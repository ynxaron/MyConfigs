"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[37239,41455],{929626:(e,t,s)=>{s.d(t,{n:()=>p});s(667294);var i=s(785893);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M10.45 8.089v.936c0 .45-.54.672-.857.355L8.248 8.034a.495.495 0 0 1 0-.71L9.593 5.98a.501.501 0 0 1 .857.355v.654a3.46 3.46 0 1 1-3.461 3.46.55.55 0 1 1 1.1 0 2.36 2.36 0 1 0 2.361-2.36"}),(0,i.jsx)("path",{d:"M4.066 8.914a6.477 6.477 0 0 1 12.859 1.029 3.494 3.494 0 0 1-1.725 6.532H5.121a3.855 3.855 0 0 1-1.056-7.56m6.384-4.14a5.226 5.226 0 0 0-5.2 4.716l-.047.482-.48.075a2.605 2.605 0 0 0 .406 5.178H15.2a2.244 2.244 0 0 0 .853-4.32l-.41-.169.024-.443q.008-.146.008-.293a5.225 5.225 0 0 0-5.225-5.225"})]})},o=(0,s(827282).IU)("cloudArrowCircleCounterclockwiseLeft",n);var a=()=>s(421797),r=()=>s(527278),l=()=>s(991007),d=()=>s(747055),c=()=>s(804217),u=()=>s(313351);const p=(0,u().N$)({key:"available offline",svg:o,displayName:u().RE.availableOffline,label:r().Z.formatMessage(u().RE.availableOffline),isLoading:e=>{const t=void 0===d().Z.state.offlinePages,s=l()._(e.id);return t||s&&d().Z.state.isSlowWrite},isEnabled:e=>l()._(e.id),validators:[a().QLY("download_for_offline"),a().or([a().daU,a().Fxc])],action:(e,t,i)=>{s(474602).toggleAvailableOffline({store:t,environment:e})},disabled:e=>!c().default.state.online&&!l()._(e.id)||l().r(e.id),renderTooltip:()=>r().Z.formatMessage(u().RE.unavailableOfflineTooltip),disableTooltip:e=>c().default.state.online||l()._(e.id)})},509417:(e,t,s)=>{s.d(t,{Vy:()=>w,YN:()=>y,fJ:()=>b,kj:()=>v,mY:()=>x});s(492176),s(7961),s(267602),s(653476),s(241792);var i=()=>s(548347),n=()=>s(255933),o=()=>s(989478),a=()=>s(513670),r=()=>s(930085),l=()=>s(395362),d=()=>s(824462),c=()=>s(784234),u=()=>s(636340),p=()=>s(269299),m=()=>s(572623),g=()=>s(779522),f=()=>s(826955),h=()=>s(219099),S=()=>s(576387);async function y(e){const{environment:t,store:s,status:i,requests:n}=e,r=t.currentUser.id;l().VM(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const d=await Promise.all(n.map((e=>j(t,{id:e.getForActorId(),table:o().KJ})))).then((e=>(0,a().oA)(e)));if("approved"===i){const e=d.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c().n_({environment:t,store:s,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:d,resolvedUsers:[]}}return p().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:a=>{n.map((n=>{const d=new(f().oK)(t,n.pointer);u().sW({store:d,transaction:a,data:{granted_time:Date.now(),granted_by_table:o().KJ,granted_by_id:r,resolved_time:Date.now(),resolved_by_table:o().KJ,resolved_by_id:r,status:i}}),l().O8(t,{status:i,request_id:n.id,from:e.from,for_actor_id:n.for_actor_id,space_role:s.getRole()})}))}}),{failedUsers:[],resolvedUsers:d}}async function b(e){const{environment:t,store:s,status:i,requests:n}=e,d=t.currentUser.id;l().VM(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const m=await Promise.all(n.map((e=>j(t,{id:e.getForActorId(),table:o().KJ})))).then((e=>(0,a().oA)(e)));if("approved"===i){const e=m.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c().n_({environment:t,store:s,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:m,resolvedUsers:[]};const i=s.id,n=await g().Z.awaitData(t,{spaceId:i}),o=n?n.map((e=>e.domain.url)):[];r().oI(t,{invite_flow_id:void 0,invite_origin:"membership_request",user_ids:m.map((e=>e.id)),internal_domains:o})}return p().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:e=>{n.map((s=>{const n=new(f().oK)(t,s.pointer);u().sW({store:n,transaction:e,data:{granted_time:Date.now(),granted_by_table:o().KJ,granted_by_id:d,resolved_time:Date.now(),resolved_by_table:o().KJ,resolved_by_id:d,status:i,type:"space_membership_request"}})}))}}),{failedUsers:[],resolvedUsers:m}}async function x(e){const{environment:t,status:s,requests:i,from:n}=e;l().VM(t,{status:s,user_count:i.length,from:n,request_type:"guest"});const c=await Promise.all(i.map((async e=>{var i,a,c;const u=await j(t,{id:e.getForActorId(),table:o().KJ});if(!u)return{type:"failed",user:void 0};if(!e.isGuestInviteRequest())return{type:"failed",user:u};const p=await d().callApi({eventName:"resolveAccessRequest",environment:t,data:{accessRequestId:e.id,status:s,spaceId:e.getParentId()}}),g=null===(i=e.getAttributes().permission_records_and_roles.at(0))||void 0===i?void 0:i.role,f=null===(a=e.getAttributes().permission_records_and_roles.at(0))||void 0===a?void 0:a.id,h=(null===(c=e.getAttributes().invite_message)||void 0===c?void 0:c.length)??0;return"success"===p.type&&"approved"===s&&r().jB(t,{role:g,is_space:!1,invite_targets:[{type:"existingUser",value:{id:u.id,version:0,email:u.getEmail()},spaceRole:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:g,user_id:u.id}],invite_message_length:h,domainType:(0,m().JF)()}),"success"===p.type&&l().Cg(t,{status:s,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:f,requested_role:g,from:n}),{type:p.type,user:u}})));await S().bi(t);const u=c.filter((e=>"failed"===e.type)).map((e=>e.user)),p=c.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,a().oA)(u),resolvedUsers:(0,a().oA)(p)}}async function v(e){if(h().Z.reset(),!e.canAdmin)return;const{environment:t,spaceId:s}=e,i=await d().callApi({eventName:"getUnreadAccessRequestCount",environment:t,data:{parentTable:n().bx,parentId:s,size:1}});"success"===i.type&&h().Z.setState({spaceId:s,count:i.data.count})}async function w(e,t,s){const n=function(e){return Object.values((0,a().vM)(e,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e)))).map((e=>{const t=(0,a().MR)(e,(e=>e.getCreatedTime()));return t[t.length-1]}))}(await Promise.all(s.map((async t=>{const s=i().J8,n=new(f().oK)(e,{table:s,id:t});return await n.load(),n.getModel()}))).then((e=>(0,a().oA)(e)))),r=await function(e,t){const s=Object.values((0,a().vM)(t,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e))));return Promise.all(s.map((async t=>{const s=(0,a().MR)(t,(e=>e.getCreatedTime())),i=s[0];return{createdByActorsWithReason:await Promise.all(s.map((async t=>{const s=await j(e,{id:t.created_by_id,table:o().KJ});if(s)return{actor:s,reason:t.message}}))).then((e=>(0,a().oA)(e))),accessRequest:i}})))}(e,n);return Promise.all(r.map((async t=>{const s=await j(e,{id:t.accessRequest.getForActorId(),table:o().KJ});if(s)return{forActor:s,...t}}))).then((e=>(0,a().oA)(e)))}async function j(e,t){const s=new(f().U6)(e,t);return await s.load(),s.getModel()}},513461:(e,t,s)=>{s.d(t,{A:()=>f,t:()=>h});var i=()=>s(362154),n=()=>s(594546),o=()=>s(443269),a=()=>s(527278),r=()=>s(341691),l=()=>s(876822),d=()=>s(148882),c=()=>s(824462),u=()=>s(308186),p=()=>s(528918),m=()=>s(636340);const g=(0,s(788860).vU)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}});function f(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m().sW({store:t,data:n,transaction:i})}async function h(e){p().j({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:m}=l().default.state;if(!s||!m||!t)return p().x(),void u().UW(a().Z.formatMessage(g.noUserError));n().K4(e,"delete_user");const f=await c().callApi({eventName:"deleteUser",environment:e,data:{}});if("success"===f.type)await d().transactionQueue.clearForUser(t),r().logoutSingleAccount({environment:e,userId:t,logoutOrigin:i().F.DeleteAccount});else{const e=a().Z.getIntl();u().UW((0,o().wf)(e,f))}p().x()}},319615:(e,t,s)=>{s.d(t,{LC:()=>d,Zy:()=>a,iD:()=>l,rZ:()=>o,wW:()=>r,wz:()=>n});var i=()=>s(594546);function n(e,t){i().K4(e,"toggle_open_in_desktop_app",t)}function o(e){i().K4(e,"configure_open_in_desktop_app")}function a(e){i().K4(e,"open_in_desktop_app_popup_dismiss")}function r(e){i().K4(e,"open_in_desktop_app_popup_display")}function l(e){i().K4(e,"open_in_desktop_app_popup_download")}function d(e,t){i().K4(e,"open_in_desktop_app_popup_open_in_app",t)}},677181:(e,t,s)=>{s.d(t,{s:()=>x,w:()=>v});s(821057),s(667294);var i=()=>s(788860),n=()=>s(572623),o=()=>s(518019),a=()=>s(576387),r=()=>s(18281),l=()=>s(897257),d=()=>s(925713),c=()=>s(174896),u=()=>s(930085),p=()=>s(395362),m=()=>s(824462),g=()=>s(528918),f=()=>s(784234),h=()=>s(102182),S=()=>s(269299),y=s(785893);const b=(0,i().vU)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function x(e){const{environment:t,store:s,role:m,guestUserStore:x,isConvertToAdmin:v}=e,w=x.id,j=x.getEmail(),M=l().subscriptionDataStoreInstance.state,_=M?await(0,r().DI)(t,s.getSpaceId(),M):1;try{if(g().j({message:b.convertingGuest}),!s.isTeamsEnabled()){if(!(await c().HD({environment:t,flowId:"",trackCreateTeamComplete:!1})))return}const i=[{type:"user_permission",role:m,user_id:w}],{serverCommitResult:o}=S().createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,canUndo:!0,perform:e=>{f().tQ({environment:t,spaceStore:s,permissionItems:i,transaction:e,from:"convert_to_member"})}});await o,p().Rb(t,{member_user_id:w,convert_to:v?"admin":"member",origin:e.origin}),u().jB(t,{role:m,is_space:!0,invite_targets:[{type:"existingUser",value:{id:w,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:i,invite_message_length:0,domainType:(0,n().JF)()})}catch(k){h().oV({label:(0,y.jsx)(i()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:j}})})}finally{await a().bi(t);const e=M?await(0,r().DI)(t,s.getSpaceId(),M):1,i=1===_&&e>1,n=s.getSpaceId(),l=n?o().Z.getData(t,{spaceId:n}):void 0;if(i&&(null==l||!l.subscription)&&n){const e=await d().Ir.trialActions.load();await e.applyMultiplayerReverseTrialIfEligible({spaceId:n,environment:t})}g().x()}}async function v(e){const{environment:t,store:s,guestUserStore:n}=e,o=n.id,r=n.getEmail();try{g().j({message:b.removingGuest});if("success"!==(await m().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[o],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1}})).type)throw new Error("Failed to remove guest");p().bw(t)}catch(l){h().oV({label:(0,y.jsx)(i()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:r}})})}finally{await a().bi(t),g().x(),p().fN(t,{origin:"space_setting_guest_tab",changedNumber:-1})}}},390054:(e,t,s)=>{s.d(t,{E:()=>o});var i=()=>s(777064),n=()=>s(824462);async function o(e,t){const s=await n().callApi({eventName:"getEmailDomainSettings",environment:e,data:{}});"success"===s.type&&t.setState({...t.state,emailDomainSettings:s.data});try{const s=await(0,i().pu)(e);t.setState({...t.state,accountSettings:{...s,error:void 0}})}catch(o){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:o}})}}},702075:(e,t,s)=>{s.d(t,{Z:()=>r});s(667294);var i=()=>s(788860),n=()=>s(348141),o=()=>s(876822),a=s(785893);const r=function(){const e=(0,s(219727).O7)(),{device:t}=e,o=(0,s(142735).VK)((()=>l()),[]);return(0,a.jsx)(s(579807).Z,{isMobile:t.isMobile,title:(0,a.jsx)(i()._H,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,a.jsx)(i()._H,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===o,onToggle:()=>function(e){const t=l();1===t?n().rx(e):n().Zf(e)}(e)})};function l(){const{currentUserSettingsStore:e}=o().default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},493462:(e,t,s)=>{s.d(t,{Z:()=>c});s(267602),s(653476),s(241792),s(228244),s(667294);var i=()=>s(788860),n=()=>s(513670),o=()=>s(155055),a=()=>s(345918),r=()=>s(703890),l=()=>s(67961),d=s(785893);const c=function(e){var t;const c=(0,s(219727).O7)(),{device:u}=c,p=(0,i().YB)(),m=(0,s(846550).yK)((e=>({icon:{width:20,height:20,fill:e.lightIconColor},spaceNameList:{listStyle:"none",maxHeight:200,overflowY:"auto",margin:0,padding:"12px 14px",display:"flex",flexDirection:"column",gap:6,border:`1px solid ${e.stroke.secondary}`},spaceItem:{display:"flex",alignItems:"center",lineHeight:"120%",width:"100%",borderRadius:6,paddingTop:4,paddingBottom:4,gap:12,height:44}})),[]),g=(0,s(142735).VK)((()=>{var e;return(0,s(122792).wP)(null===(e=s(897257).subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}),[]),f=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),{loading:h,organizationsInfo:S}=(0,s(34854).Z)(),y=null==S?void 0:S.some((e=>e.isUserLastOwner)),b=e.disabled||f&&g||y,x=f&&g?(0,d.jsx)(i()._H,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):y?(0,d.jsx)(i()._H,{defaultMessage:"You are the last owner of an organization. Add a new organization owner to enable this action.",id:"profileSettings.accountDeleteButton.disabledForLastOrgOwner.tooltip"}):h?(0,d.jsx)(i()._H,{defaultMessage:"Loading account details...",id:"profileSettings.accountDeleteButton.loading.tooltip"}):null,v=async()=>{const{currentUserStore:e,currentUserRootStore:t}=s(876822).default.state;if(!e||!t)return;if(!e.isDefined())return;const g=n().oA(t.getSpaceViewStores().map((e=>e.getSpaceStore()))),f=(0,s(18281).Io)().filter((t=>(0,s(933868).zz)(t.role)&&t.userId!==e.id)).length>0,h=g.filter((e=>!(0,s(657120).XO)(e.getModel(),e.getRole(),f))),S=n().oA(h.map((e=>{if(e)return{key:e.id,render:()=>(0,d.jsxs)("div",{style:m.spaceItem,children:[(0,d.jsx)(s(943620).Z,{disabled:!0,icon:(0,a().Wd)(c,e),isEmptyPage:!1,title:(0,a().rn)(c,e),size:32,isLarge:!0}),(0,d.jsxs)("div",{style:{minWidth:0},children:[(0,d.jsx)(l().Z,{className:"notranslate",isMobile:u.isMobile,children:(0,r().bM)(c,e)}),(0,d.jsx)(l().Z,{isSmall:!0,isMobile:u.isMobile,children:(0,r().rR)(c,p,e).subtitle})]})]})}}))),y=n().oA(h.map((e=>({id:e.id,name:(0,a().rn)(c,e)}))));o().qP(c);const b=(0,s(18610).xf)(s(146947).locale)?(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}):(0,d.jsx)(s(885178).Z,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}});await s(417205).b({title:(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.title",defaultMessage:"Delete your entire account permanently?"}),message:b,content:(0,d.jsxs)(d.Fragment,{children:[S&&S.length>0?(0,d.jsx)("div",{style:{overflow:"hidden",borderRadius:6},children:(0,d.jsx)("ul",{style:m.spaceNameList,children:S.map((e=>{let{key:t,render:s}=e;return(0,d.jsx)("div",{children:s()},t)}))})}):null,(0,d.jsx)(s(661641).q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})})]}),acceptLabel:0===y.length?(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):c.device.isMobile?(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:y.length}}):(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:y.length}}),requiredInputValue:e.getEmail()})&&(o().ps(c),s(838266).default.reset(),s(513461).t(c))};return(0,d.jsx)(s(579807).Z,{type:"custom",useFlexboxStyle:!0,isMobile:u.isMobile,title:(0,d.jsx)(i()._H,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,d.jsx)(i()._H,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:u.isMobile?(0,d.jsx)("div",{style:{marginTop:12},children:(0,d.jsx)(s(661297).Z,{size:"lg",color:"uiRed",onClick:v,disabled:b,disabledFeedback:b,children:(0,d.jsx)(i()._H,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,d.jsx)(s(745740).Z,{style:{borderRadius:"0.25em"},onClick:v,disabled:b,disabledFeedback:b,children:(0,s(958432).C)(m.icon)}),disabled:b,tooltipLabel:x})}},887330:(e,t,s)=>{s.d(t,{C:()=>n,L:()=>o});var i=()=>s(707513);function n(e){const{theme:t,isInHomeWidget:s}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...s?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:i().Ue.regular,lineHeight:1,borderRadius:6}}function o(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:i().Ue.regular,lineHeight:1,borderRadius:4}}},806856:(e,t,s)=>{s.d(t,{Z:()=>m,h:()=>u});s(667294);var i=()=>s(846550),n=()=>s(195926),o=()=>s(374289),a=()=>s(788860),r=()=>s(274879),l=()=>s(667710),d=()=>s(265640),c=s(785893);function u(e){return(0,r().canSetCookie)(e)&&(0,r().canShowCookieUi)(e)}function p(){const e=(0,i().Fg)();return(0,c.jsx)(l().Z,{hasDismissButton:!1,renderOrigin:t=>(0,c.jsxs)(d().D,{style:{paddingLeft:8,paddingRight:8,height:32},...t,children:[(0,c.jsx)(a()._H,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,o().i)({width:10,marginLeft:4,fill:e.lightIconColor})]})})}const m=function(e){let{isMobile:t}=e;return u((0,s(219727).O7)())?(0,c.jsx)(s(579807).Z,{isMobile:t,title:(0,c.jsx)(a()._H,{...n().ze.cookieSettingsLabel}),caption:(0,n().Fd)(s(81066).Tz,"settings"),type:"custom",customButton:(0,c.jsx)(p,{})}):null}},253855:(e,t,s)=>{s.d(t,{P:()=>F,U:()=>U});s(267602),s(653476),s(30005),s(241792);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(801916),l=()=>s(286977),d=()=>s(374289),c=()=>s(95886),u=()=>s(788860),p=()=>s(568017),m=()=>s(696459),g=()=>s(707513),f=()=>s(824462),h=()=>s(352230),S=()=>s(749826),y=()=>s(517632),b=()=>s(265640),x=()=>s(827973),v=()=>s(448419),w=()=>s(1910),j=()=>s(573357),M=()=>s(291198),_=()=>s(108714),k=()=>s(312578),C=()=>s(198829),I=()=>s(255577),T=()=>s(661297),P=()=>s(946563),A=()=>s(906769),Z=()=>s(388284),R=()=>s(67961),H=()=>s(504117),D=()=>s(868614),B=()=>s(539245),V=()=>s(378907),N=s(785893);function U(){const e=(0,n().O7)(),[t,s]=(0,i.useState)(""),[l,d]=(0,i.useState)(void 0),[c,u]=(0,i.useState)([]),[p,h]=(0,i.useState)(0),[b,x]=(0,i.useState)(20),v=(0,o().VK)((()=>S().default.isStatsigEnabled()),[]),w=(0,o().VK)((()=>S().default.checkGate({gateName:"replace_local_overrides_with_statsig",disableExposureLogging:!0})),[]),j=(0,o().VK)((()=>v?function(){const e=new Map,t=y().C.getStatsigClient();return r().l4.forEach((s=>{var i;const n=null==t?void 0:t.getExperiment(s,{disableExposureLog:!0});e.set(s,{experimentId:s,experimentVersion:1,group:S().default.getEligibleGroup({experimentId:s,defaultGroup:r().nb,disableExposureLogging:!0}),hasStatsigUserOverride:(null==n||null===(i=n.ruleID)||void 0===i?void 0:i.endsWith(":userID:id_override"))||!1,groups:[...(0,r()._n)(s),"control",r().nb],statsigOption:"EXPERIMENT",isActive:y().C.getIsExperimentActive(s)})})),r().b2.forEach((s=>{var i;const n=null==t?void 0:t.getFeatureGate(s,{disableExposureLog:!0});e.set(s,{experimentId:s,experimentVersion:1,group:S().default.checkGate({gateName:s,disableExposureLogging:!0}).toString(),hasStatsigUserOverride:(null==n||null===(i=n.ruleID)||void 0===i?void 0:i.endsWith(":id_override"))||!1,groups:["true","false"],statsigOption:"FEATUREGATE",isActive:!0})})),e}():new Map),[v]),_=(0,i.useMemo)((()=>[...j.values()]),[j]),C=(0,i.useMemo)((()=>_.filter((e=>e.hasStatsigUserOverride||c.includes(e.experimentId)))),[_,c]),I=(0,i.useMemo)((()=>_.filter((e=>!t||0===t.length||e.experimentId.includes(t))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[_,t]),P=(0,i.useMemo)((()=>_.filter((e=>!e.isActive)).length),[_]),Z=(0,i.useMemo)((()=>I.filter((e=>!e.isActive))),[I]),{gate:R={},experiment:H={}}=y().C.getAllLocalOverrides()??{},V=[...Object.keys(R).map((e=>j.get(e))),...Object.keys(H).map((e=>j.get(e)))].filter(m().$K);(0,i.useEffect)((()=>{w&&V.length>0&&async function(){u(V.map((e=>e.experimentId)));for(const t of V)"EXPERIMENT"===t.statsigOption&&t.group?await f().callApi({eventName:"setStatsigExperimentUserOverride",environment:e,data:{experimentName:t.experimentId,group:t.group}}):"FEATUREGATE"===t.statsigOption&&await f().callApi({eventName:"setStatsigGateUserOverride",environment:e,data:{gateName:t.experimentId,enabled:"true"===t.group}});y().C.removeAllLocalOverrides()}()}),[w,V,e]);const U=(0,a().yK)((e=>({containerStyle:{width:"100%",overflow:"hidden"},filterContainerStyle:{marginLeft:"auto",flexGrow:1,maxWidth:300},description:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap",fontSize:12,color:e.mediumTextColor,marginTop:2,marginBottom:16},headerContainer:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4},overridesHeaderContainer:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4,height:25},resetButtonContainerStyle:{marginLeft:"auto"}})),[]);return(0,N.jsxs)("div",{style:U.containerStyle,children:[(0,N.jsxs)(D().Z,{large:!0,divider:"full",style:{marginBottom:4,paddingBottom:4,display:"flex"},children:["Experiments",(0,N.jsx)("div",{style:{marginLeft:"auto"},children:(0,N.jsx)(T().Z,{style:{fontWeight:g().Ue.regular},size:"sm",onClick:()=>{const e=I.map((e=>{const t=e.group;return`${`${e.statsigOption}:${e.experimentId}`}\t${t}`})).join("\n");console.log(e)},children:null!=l&&l.reset?(0,N.jsx)(k().Z,{}):"Print all to console"})})]}),(0,N.jsxs)("div",{style:U.description,children:[(0,N.jsx)("div",{children:w?"Set overrides for your user that affect the client and server. If setting an override is still showing old data, try refreshing the page.":"For server-side/production configs, go to console.statsig.com."}),(0,N.jsx)("div",{children:"If an experiment is marked as 'STALE', it is likely no longer active and should be cleaned up!"})]}),!w&&(0,N.jsxs)("div",{style:{marginBottom:20},children:[(0,N.jsxs)("div",{style:U.overridesHeaderContainer,children:[(0,N.jsx)("div",{style:{fontWeight:g().Ue.medium},children:"Local overrides"}),V.length>0?(0,N.jsx)("div",{style:U.resetButtonContainerStyle,children:(0,N.jsx)(T().Z,{size:"sm",onClick:()=>{d({reset:!0}),y().C.removeAllLocalOverrides(),d(void 0)},children:null!=l&&l.reset?(0,N.jsx)(k().Z,{}):"Clear overrides"})}):null]}),(0,N.jsx)(O,{experimentSettings:V,emptyPlaceholder:"No overridden values",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:c,setOverrideUpdates:u})]}),w&&(0,N.jsxs)("div",{style:{marginBottom:20},children:[(0,N.jsx)("div",{style:U.overridesHeaderContainer,children:(0,N.jsx)("div",{style:{fontWeight:g().Ue.medium},children:"Statsig overrides"})}),(0,N.jsx)(O,{experimentSettings:C,emptyPlaceholder:"No overridden values from statsig",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:c,setOverrideUpdates:u,showDelete:!0})]}),(0,N.jsx)("div",{style:{...U.headerContainer,height:void 0},children:(0,N.jsx)(B().ZP,{style:{paddingLeft:0},tabs:[(0,N.jsx)("div",{children:`All (${_.length})`},"all"),(0,N.jsx)("div",{style:{display:"flex",alignItems:"center"},children:`Stale (${P})`},"stale")],selectedIndex:p,onChange:e=>h(e),right:(0,N.jsx)("div",{style:U.filterContainerStyle,children:(0,N.jsx)(M().Z,{placeholder:"Search...",value:t,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{s(e.target.value)}})})})}),(0,N.jsx)(O,{experimentSettings:"stale"===["all","stale"][p]?Z:I,emptyPlaceholder:"No results",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:c,setOverrideUpdates:u,maxRenderSize:b,showStale:!0,hideTopBorderForFirstRow:!0}),(0,N.jsx)(A().Z,{onChange:e=>{e<200&&x(b+50)}})]})}function O(e){let{experimentSettings:t,emptyPlaceholder:s,experimentUpdatingState:i,setExperimentUpdatingState:n,overrideUpdates:o,setOverrideUpdates:r,maxRenderSize:l,showDelete:d,showStale:c,hideTopBorderForFirstRow:u}=e;const p=(0,a().yK)((e=>({emptyState:{borderTop:`1px solid ${e.regularDividerColor}`,paddingTop:12,paddingLeft:10,paddingBottom:14,color:e.mediumTextColor,fontSize:12},experimentNameCell:{paddingLeft:10,paddingRight:10,flexGrow:1,flexShrink:1,overflow:"hidden"},experimentOverrideCell:{paddingLeft:10,paddingRight:10,display:"inline-flex",justifyContent:"space-between",flexGrow:1,flexShrink:0},tableStyle:{display:"block"},tableBodyStyle:{display:"block"},rowStyle:{overflow:"hidden",display:"flex",alignItems:"center"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"}})),[]),m=[{key:"name",header:"Name",style:p.tableExperimentIDHeaderStyle},{key:"value",header:"Value",style:p.tableExperimentGroupHeaderStyle}];if(!t.length)return(0,N.jsx)("div",{style:p.emptyState,children:s});const g=l?t.slice(0,l):t;return(0,N.jsx)(V().Z,{tableStyle:{borderTop:void 0,...p.tableStyle},tableBodyStyle:p.tableBodyStyle,rowStyle:p.rowStyle,cellStyle:e=>{let{columnIndex:t}=e;return 0===t?p.experimentNameCell:p.experimentOverrideCell},columns:m,hideHeader:!0,hideTopBorderForFirstRow:u,rows:g.map((e=>({key:e.experimentId,columns:[(0,N.jsx)(L,{name:e.experimentId,statsigType:e.statsigOption,isStale:c&&!e.isActive},`${e.experimentId}-title`),(0,N.jsx)(E,{experiment:e,experimentUpdatingState:i,onUpdate:e=>{n(e),null!=e&&e.experimentId&&r([...o,null==e?void 0:e.experimentId])},onRefresh:()=>{r([])},refreshNeeded:o.includes(e.experimentId),showDelete:d,showStale:c},`${e.experimentId}-value`)]})))})}function F(e){const t=(0,a().yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,N.jsxs)("div",{children:[(0,N.jsx)(D().Z,{children:"Experiments"}),(0,N.jsx)(R().Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle,children:"Locally toggle experiments."}),(0,N.jsx)(v().ZP,{popupType:v().Z4.SlideUp,renderOrigin:e=>(0,N.jsx)(T().Z,{...e,size:"lg",style:t.PlainButtonStyle,children:"View Experiments"}),render:e=>{const t={menuType:h().o.Modal,whiteBackground:!0,title:"Experiments",right:(0,N.jsx)(u()._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return(0,N.jsx)(j().Z,{capture:!0,allowEsc:!0,render:()=>(0,N.jsx)(C().Z,{...t,children:(0,N.jsx)(H().ZP,{disableScroller:!0,children:(0,N.jsx)(U,{})})})})}})]})}function L(e){const{statsigType:t,name:s,isStale:i}=e,o=(0,n().Fy)().isMobile,r=(0,a().yK)((e=>({experimentId:{flexShrink:1,marginRight:5,maxWidth:o?215:300,...g().Yu,color:i?e.lightTextColor:void 0},experimentInfo:{display:"flex",flexDirection:o?"column":"row",alignItems:"center"},stalePill:{background:e.redBadgeBackground,color:"white"},typePill:{background:"FEATUREGATE"===t?e.accentColors.blue[100]:e.accentColors.green[100]}})),[o,i,t]);return(0,N.jsxs)("div",{style:r.experimentInfo,children:[(0,N.jsx)("span",{style:r.experimentId,children:s}),t&&(0,N.jsx)(P().Z,{innerStyle:r.typePill,children:(0,N.jsx)(_().Z,{href:`https://console.statsig.com/6TSma7coh47E7CjMbuSVCO/${"FEATUREGATE"===t?"gates":"experiments"}/${s}`,external:!0,children:`${t}`})}),(0,N.jsx)("div",{style:{marginLeft:4},children:i&&(0,N.jsx)(P().Z,{innerStyle:r.stalePill,children:"Stale"})})]})}function E(e){const{experiment:t,experimentUpdatingState:s,onUpdate:i,showDelete:m,showStale:j,refreshNeeded:M,onRefresh:_}=e,T=(0,n().O7)(),P=(0,n().Fy)().isMobile,A=(0,o().VK)((()=>S().default.checkGate({gateName:"replace_local_overrides_with_statsig",disableExposureLogging:!0})),[]),R=(0,a().yK)((e=>({experimentGroup:{maxWidth:P?90:300,...g().Yu,color:j&&!t.isActive?e.lightTextColor:void 0},experimentGroupButtonCheckContainerStyle:{width:P?16:14},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left"},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center"},refreshNeededText:{color:e.accentColors.red[500]},deleteIcon:{stroke:e.accentColors.red[400]}})),[P,j,t]),H=(null==s?void 0:s.experimentId)===t.experimentId;return A&&!H&&M?(0,N.jsx)("div",{style:R.experimentGroupContainerStyle,children:(0,N.jsx)(b().D,{style:R.experimentGroupButtonStyle,onClick:async()=>{var e;const s=y().C.getStatsigClient(),n=null==s||null===(e=s.getContext())||void 0===e?void 0:e.user;s&&n&&(i({experimentId:t.experimentId,group:r().nb}),await new Promise((e=>{setTimeout(e,5e3)})),await s.updateUserAsync(n),_&&_(),y().C.emit(),i(void 0))},children:(0,N.jsxs)("div",{style:R.refreshNeededText,children:["Refresh to update"," "]})})}):(0,N.jsxs)("div",{style:R.experimentGroupContainerStyle,children:[(0,N.jsx)(v().ZP,{popupType:P?v().Z4.SlideUp:v().Z4.Popup,disabled:H,renderOrigin:e=>(0,N.jsx)(b().D,{...e,style:R.experimentGroupButtonStyle,children:H?(0,N.jsx)(k().Z,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("span",{style:R.experimentGroup,children:t.group??"unknown"}),(0,d().i)(R.experimentGroupButtonChevronStyle)]})}),render:e=>{let n;n=P?{menuType:h().o.Modal,title:t.experimentId,right:(0,N.jsx)(u()._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close}:{menuType:h().o.Popup,width:250};const o=t.groups.map((n=>{const o={key:n,action:()=>{var s;let o;A?"EXPERIMENT"===t.statsigOption?o=f().callApi({eventName:"setStatsigExperimentUserOverride",environment:T,data:{experimentName:t.experimentId,group:n}}):"FEATUREGATE"===t.statsigOption&&(o=f().callApi({eventName:"setStatsigGateUserOverride",environment:T,data:{gateName:t.experimentId,enabled:"true"===n}})):"EXPERIMENT"===t.statsigOption?o=new Promise((e=>{y().C.updateLocalOverrideConfig(t.experimentId,n),e(n)})):"FEATUREGATE"===t.statsigOption&&(o=new Promise((e=>{y().C.updateLocalOverrideGate(t.experimentId,n),e(n)}))),i({experimentId:t.experimentId,group:n}),e.close(),null===(s=o)||void 0===s||s.then((()=>{i(void 0)}))},render:e=>{const i=n===r().nb;return(0,N.jsx)(x().Z,{...e,title:n,right:s&&s.experimentId===t.experimentId&&s.group===n?(0,N.jsx)("div",{style:R.experimentGroupButtonCheckContainerStyle,children:(0,N.jsx)(k().Z,{})}):n!==t.group||s?void 0:(0,N.jsx)("div",{style:R.experimentGroupButtonCheckContainerStyle,children:(0,l().e)()}),disabled:i,style:{...i&&{color:p().ZP.mediumTextColor}}})}};return o}));return(0,N.jsx)(C().Z,{...n,children:(0,N.jsx)(I().ZP,{type:I().iW.Vertical,initialFocus:void 0,sections:[{key:t.experimentId,render:e=>(0,N.jsx)(Z().Z,{...e}),items:o}]})})}}),m?(0,N.jsx)(w().Z,{icon:c().y,iconStyle:R.deleteIcon,ariaLabel:`Delete override for ${t.experimentId}`,onClick:async()=>{i({experimentId:t.experimentId,group:r().nb}),"EXPERIMENT"===t.statsigOption?await f().callApi({eventName:"deleteStatsigExperimentUserOverride",environment:T,data:{experimentName:t.experimentId}}):"FEATUREGATE"===t.statsigOption&&await f().callApi({eventName:"deleteStatsigGateUserOverride",environment:T,data:{gateName:t.experimentId}}),i(void 0)}}):null]})}},287509:(e,t,s)=>{s.d(t,{Z:()=>a});s(667294);var i=()=>s(788860),n=()=>s(696459),o=s(785893);function a(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i()._H,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"});case"notify_email_always":return(0,o.jsx)(i()._H,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"});case"notify_slack":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_slack_mention":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackMentionNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a group, page, database property, or comment."});case"notify_slack_all_activity":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackAllActivityNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you get comments, mentions, page invites, and property changes."});case"notify_email_digest":return(0,o.jsx)(i()._H,{id:"notificationSettings.pageUpdatesNotificationsSettings.description",defaultMessage:"Receive email digests for changes to pages you’re subscribed to"});case"notify_home_digest_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.homeDigestEmailNotificationsSettings.description",defaultMessage:"Receive email digests of what's happening in your workspace"});case"marketing_emails":return(0,o.jsx)(i()._H,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});case"desktop_badge":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopBadge.description",defaultMessage:'Show/hide the notification badge using the "Badge application icon" switch in System Settings'});default:(0,n().t1)(t)}}},343734:(e,t,s)=>{s.d(t,{Z:()=>a});s(667294);var i=()=>s(788860),n=()=>s(696459),o=s(785893);function a(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i()._H,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"});case"notify_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"});case"notify_email_always":return(0,o.jsx)(i()._H,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_slack_mention":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackMentionNotificationSettings.title",defaultMessage:"Only user or group mentions"});case"notify_slack_all_activity":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackAllActivityNotificationSettings.title",defaultMessage:"Activity in your workspace"});case"notify_email_digest":return(0,o.jsx)(i()._H,{id:"notificationSettings.pageUpdatesNotificationSettings.title",defaultMessage:"Page updates"});case"notify_home_digest_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.homeDigestEmailNotificationSettings.title",defaultMessage:"Workspace digest"});case"marketing_emails":return(0,o.jsx)(i()._H,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});case"desktop_badge":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopBadge.title",defaultMessage:"Desktop badge icon"});default:(0,n().t1)(t)}}},764605:(e,t,s)=>{s.d(t,{Z:()=>b});s(267602),s(653476);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(788860),r=()=>s(696459),l=()=>s(515329),d=()=>s(218842),c=()=>s(876822),u=()=>s(806856),p=()=>s(666414),m=()=>s(637932),g=()=>s(504117),f=()=>s(868614),h=()=>s(257822),S=()=>s(928066),y=s(785893);const b=(0,s(968433).M)((function(e){let{isMobile:t,isMobileNative:b,passwordRequestStore:x,userEmailDomainSettings:v,billingData:w}=e;const{isElectron:j,isPhone:M}=(0,n().Fy)(),_=(0,n().O7)(),k=(0,o().VK)((()=>s(804217).default.state.online),[]),C=(0,o().VK)((()=>{var e,s;const i=(null===(e=c().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,n=Boolean(null===(s=c().default.state.currentSpaceViewStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.notify_slack),o=(0,l().kC)(),a=(0,l().oI)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:n}=e,o=function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;return s?i?[{key:"notify_slack",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack_mention"})}:void 0].filter(r().$K):[{key:"notify_slack",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack"})}]:[]}(n);return[{key:"notify_mobile",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_home_digest_email"})},...o,{key:"marketing_emails",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"marketing_emails"})}].filter(r().$K)}({isMobile:t,isElectron:j,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:{isSlackNotificationSettingEnabled:n,showSlackNotificationSetting:o,showNotionActivityNotificationsToSlackSetting:a}})}),[t,j]),I=(0,d().Ez)({environment:_}),T=(0,o().VK)((()=>Boolean("on"===s(749826).default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))),[]),P=(0,o().qz)(void 0,s(359023).Z);(0,s(732811).K)((()=>{s(390054).E(_,P)}));const A=(0,o().VK)((()=>P.state.accountSettings),[P]),Z=(0,s(778265).P)(),R=(0,o().VK)((()=>t?(0,d().Eo)({isPhone:M,isMobileNative:b,showOfflineSettings:Z,passwordRequestStore:x,userEmailDomainSettings:v,billingData:w,accountSettings:A}):I),[I,t,M,b,Z,x,v,w,A]),H=(0,o().VK)((()=>[(0,u().h)(_)?{key:"cookies",renderSettingsItem:()=>(0,y.jsx)(u().Z,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,y.jsx)(s(563286).H,{isMobile:t})}].filter(r().$K)),[_,t]),D=(0,o().VK)((()=>_.WindowSizeStore.state.paddingBottomCSS),[_]);return(0,i.useEffect)((()=>{s(990966).clear({environment:_})}),[_]),k?(0,y.jsxs)(g().ZP,{disableScroller:t,children:[(0,y.jsx)(f().Z,{large:!t,divider:"full",children:T?(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.notificationSection.title.v2",defaultMessage:"Notifications"}):(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})}),(0,y.jsx)(h().O,{items:C}),(0,y.jsx)(p().Z,{size:48,isHidden:!0}),(0,y.jsx)(f().Z,{large:!t,divider:"full",children:T?(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.settingsSection.title.v2",defaultMessage:"Preferences"}):(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})}),(0,y.jsx)(h().O,{items:R}),(0,y.jsx)(p().Z,{size:48,isHidden:!0}),(0,y.jsx)(f().Z,{large:!t,divider:"full",children:(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,y.jsx)(h().O,{items:H}),(0,y.jsx)(p().Z,{size:48,isHidden:!1}),(0,y.jsx)("div",{style:{marginTop:4,marginBottom:t?D:void 0},children:(0,y.jsx)(s(360964).Z,{title:(0,y.jsx)(a()._H,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,s(148126).UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,y.jsx)(g().ZP,{children:(0,y.jsx)(s(67961).Z,{isSmall:!0,style:{textAlign:"center"},children:(0,y.jsx)(a()._H,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})})})}))},421936:(e,t,s)=>{s.d(t,{Z:()=>P});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=s(785893);const l=(0,s(827282).IU)("paperAirplane",{viewBox:"0 0 34 34",svg:(0,r.jsx)("path",{d:"M19.6719 32.7188C20.6406 32.7188 21.3125 31.9375 21.8281 30.625L32.2188 3.45312C32.4375 2.875 32.5625 2.375 32.5625 1.9375C32.5625 1.07812 32.0312 0.546875 31.1719 0.546875C30.7344 0.546875 30.2344 0.671875 29.6562 0.890625L2.39062 11.3281C1.20312 11.7812 0.390625 12.4688 0.390625 13.4375C0.390625 14.625 1.26562 15.0781 2.64062 15.4844L14.2344 18.875L17.5938 30.375C18.0156 31.7969 18.4688 32.7188 19.6719 32.7188ZM14.7812 17.0469L3.51562 13.6719C3.0625 13.5469 2.95312 13.4375 2.95312 13.2812C2.95312 13.125 3.0625 13 3.4375 12.8594L26.6562 4.03125C27.6094 3.67188 28.5469 3.20312 29.375 2.82812C28.6094 3.4375 27.5156 4.29688 26.9062 4.90625L14.7812 17.0469ZM19.8281 30.1719C19.6719 30.1719 19.5625 30.0469 19.4375 29.6094L16.0625 18.3438L28.2031 6.20312C28.8125 5.60938 29.6875 4.5 30.3125 3.70312C29.9219 4.54688 29.4531 5.48438 29.0781 6.45312L20.25 29.6719C20.1094 30.0469 20 30.1719 19.8281 30.1719Z"})});var d=()=>s(223174),c=()=>s(235605),u=()=>s(405798),p=()=>s(788860),m=()=>s(568017),g=()=>s(513670),f=()=>s(707513),h=()=>s(155055),S=()=>s(824462),y=()=>s(247724),b=()=>s(443269),x=()=>s(363127),v=()=>s(666414),w=()=>s(573357),j=()=>s(291198),M=()=>s(708518),_=()=>s(67961),k=()=>s(968001),C=()=>s(951552),I=()=>s(323143),T=()=>s(167830);const P=(0,p().XN)((function(e){let{mfaStatus:t,isError:o,samlEnforced:a,isEducationPlan:l,hasPassword:d,intl:c,onReloadSettings:u,email:m}=e;const g=(0,n().O7)(),f=(0,i.useRef)();(0,i.useEffect)((()=>{if("on"===t&&void 0===f.current){const e=new(s(173694).r)(g),t=new(I().c);f.current=new(I().W)(t,e)}}),[g,t]);const S=(0,i.useCallback)((()=>function(e,t,s){"on"===t?x().default.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.exit()}}):(h().Wb(e),x().default.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))}(g,t,f)),[g,t,f]),{device:y}=g;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(579807).Z,{type:"toggleToButton",isMobile:y.isMobile,title:(0,r.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,r.jsx)(H,{hasPassword:d,isError:o,samlEnforced:a,isEducationPlan:l}),isOn:d,buttonLabel:(0,r.jsx)(p()._H,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}),onClick:S,disabled:a}),(0,r.jsx)(J,{hasPassword:d,intl:c,onReloadSettings:u,isEducationPlan:l,email:m,mfaStatus:t,settingsStateMachineRef:f})]})}));function A(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:m().ZP.red,fontSize:f().JB.UISmall.desktop}}function Z(){return(0,r.jsx)(p()._H,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}function R(e,t){return!e&&t}function H(e){let{isError:t,samlEnforced:s,isEducationPlan:i,hasPassword:n}=e;return t?(0,r.jsx)(p()._H,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):s?(0,r.jsx)(p()._H,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML single sign-on Provider."}):i?(0,r.jsx)(Z,{}):n?(0,r.jsx)(p()._H,{id:"passwordSettings.changePassword.message",defaultMessage:"Change your password to login to your account."}):(0,r.jsx)(p()._H,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function D(e){return{width:27,height:27,fill:e.regularIconColor}}function B(e){(x().default.isSetNewPasswordModal()||x().default.isRemovePasswordModal())&&x().default.setState({...x().default.state,oldPassword:e.target.value,alert:void 0})}function V(){(x().default.isSetNewPasswordModal()||x().default.isRemovePasswordModal())&&x().default.setState({...x().default.state,oldPassword:"",alert:void 0})}function N(e){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,password:e.target.value,alert:void 0})}function U(){const{onCancel:e}=x().default.state;x().default.reset(),e&&e()}function O(){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,password:"",repeatPassword:"",alert:void 0})}function F(e){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,repeatPassword:e.target.value,alert:void 0})}function L(){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,repeatPassword:"",alert:void 0})}function E(){x().default.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}function K(e){if(x().default.isSetNewPasswordModal()){const{password:t,repeatPassword:s}=x().default.state;t&&s&&t!==s&&x().default.setState({...x().default.state,alert:e.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}}async function G(e,t,s){if(!x().default.isRemovePasswordModal())return;const{oldPassword:i}=x().default.state;if(h().wr(s),!i)return void x().default.setState({...x().default.state,alert:e.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const n=await S().callApi({eventName:"setPassword",environment:s,data:{oldPassword:i,clearPassword:!0}});if("success"===n.type)t(),x().default.isRemovePasswordModal()&&x().default.setState({...x().default.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const t=(0,b().wf)(e,n);x().default.setState({...x().default.state,alert:t||e.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}}function q(e){let{isEducationPlan:t}=e;const s=(0,a().Fg)(),i=(0,o().VK)((()=>x().default.isPasswordSetModal()),[]),n=(0,o().Kw)(x().default);if(!i)return null;const{oldPassword:l}=n,d=void 0===l?(0,r.jsx)(p()._H,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,r.jsx)(p()._H,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),u=t?(0,r.jsx)(p()._H,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}):(0,r.jsx)(p()._H,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return(0,r.jsx)(k().Z,{title:d,header:u,icon:(0,c().k)(D(s)),onDismiss:U})}function W(e){let{isEducationPlan:t,mfaStatus:s,onReloadSettings:i}=e;const d=(0,p().YB)(),c=(0,a().Fg)(),u=(0,n().O7)(),m=(0,o().VK)((()=>x().default.isRemovePasswordModal()),[]),g=(0,o().Kw)(x().default);if(!m)return null;const{oldPassword:h,alert:S}=g,y=(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),b=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),t&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})]}),"on"===s&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,r.jsx)("span",{style:{fontWeight:f().Ue.semibold},children:e})}})]})]}),v={text:(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:()=>G(d,i,u),isRed:!0},w=[{text:(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:U,type:"button",view:"plain"}];return(0,r.jsxs)(k().Z,{title:y,header:b,icon:l(D(c)),onDismiss:U,primaryAction:v,secondaryActions:w,containerStyles:{width:350,padding:24},children:[(0,r.jsx)(T().Z,{hasMarginTop:!0,children:(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,r.jsx)(j().Z,{type:"password",value:h,onChange:B,showClearButton:!0,onClearButtonClick:V,placeholder:d.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,r.jsx)(_().Z,{isMultiline:!0,style:A(S),children:S})]})}function z(){const e=(0,a().Fg)();if(!(0,o().VK)((()=>x().default.isRemovePasswordSuccessModal()),[]))return null;const t=(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),s=(0,r.jsx)(p()._H,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,r.jsx)(k().Z,{title:t,header:s,icon:(0,c().k)(D(e)),onDismiss:U})}async function Y(e,t,s,i){if(!x().default.isSetNewPasswordModal())return;const{oldPassword:n,password:o,repeatPassword:a}=x().default.state;let r;if(t&&!n)r=s.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(o){const e=(0,u().IA)(o);e.success?a?o!==a&&(r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):r=function(e,t){const s=b().Ql[e.type];return s?t.formatMessage(s):t.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}(e.reason,s)}else r=s.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(r)return void x().default.setState({...x().default.state,alert:r});const l=await S().callApi({eventName:"setPassword",environment:e,data:{oldPassword:n,newPassword:o}});if("success"===l.type)i(),x().default.setState({...x().default.state,isSet:!0});else{const e=(0,b().wf)(s,l);x().default.setState({...x().default.state,alert:e})}}function Q(e){let{hasPassword:t,intl:s,onReloadSettings:l,isEducationPlan:c,email:u}=e;const m=(0,a().Fg)(),g=(0,n().O7)(),f=(0,i.useCallback)((()=>Y(g,t,s,l)),[g,t,s,l]),h=(0,o().VK)((()=>x().default.isSetNewPasswordModal()?x().default.state:null),[]);if(null===h)return null;const{password:S,repeatPassword:y,oldPassword:b,alert:w}=h,M=t?(0,r.jsx)(p()._H,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,r.jsx)(p()._H,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),C=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p()._H,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),c&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(Z,{})]})]}),I=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T().Z,{children:(0,r.jsx)(p()._H,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,r.jsx)(j().Z,{type:"password",value:S,onChange:N,showClearButton:!0,onClearButtonClick:O,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!t,onBlur:()=>K(s),autoComplete:"new-password"}),(0,r.jsx)(v().Z,{size:10,isHidden:!0}),(0,r.jsx)(T().Z,{children:(0,r.jsx)(p()._H,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,r.jsx)(j().Z,{type:"password",value:y,onChange:F,showClearButton:!0,onClearButtonClick:L,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:()=>K(s),autoComplete:"new-password"})]}),P=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j().Z,{style:{display:"none"},type:"text",value:u,autoComplete:"username",disabled:!0}),(0,r.jsx)(T().Z,{children:(0,r.jsx)(p()._H,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,r.jsx)(j().Z,{type:"password",value:b,onChange:B,showClearButton:!0,onClearButtonClick:V,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,r.jsx)(v().Z,{size:10,isHidden:!0}),I]}),H={text:t?(0,r.jsx)(p()._H,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,r.jsx)(p()._H,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:f},G=[{text:(0,r.jsx)(p()._H,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:E,type:"button",view:"plain"}];return(0,r.jsxs)(k().Z,{title:M,header:C,icon:(0,d().z)(D(m)),onDismiss:U,primaryAction:H,secondaryActions:R(c,t)?G:void 0,containerStyles:{width:350,padding:24},children:[t?P:I,(0,r.jsx)(_().Z,{isMultiline:!0,style:A(w),children:w})]})}function $(e){let{settingsStateMachineRef:t}=e;const s=(0,o().VK)((()=>x().default.isVerifyIdentityWithMfaModal()),[]);return(0,i.useEffect)((()=>{s&&void 0!==t.current&&t.current.settingsConfirmIdentityForPasswordSetting()})),s&&void 0!==t.current?(0,r.jsx)(C().Z,{settingsStateMachine:t.current,onDismiss:U,onStartSMS:g().ZT,onStartTOTP:g().ZT,onStartBackupCodes:g().ZT}):null}function J(e){let{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:a,email:l,mfaStatus:d,settingsStateMachineRef:c}=e;const u=(0,o().VK)((()=>x().default.state.open),[]);return(0,r.jsx)(M().Z,{open:u,onDismiss:U,className:y().BKn,preventHideChildrenWhileOpening:!0,render:()=>(0,r.jsx)(w().Z,{capture:!0,allowEsc:!0,render:()=>(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(Q,{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:a,email:l}),(0,r.jsx)(q,{isEducationPlan:a}),(0,r.jsx)(W,{isEducationPlan:a,mfaStatus:d,onReloadSettings:n}),(0,r.jsx)($,{settingsStateMachineRef:c}),(0,r.jsx)(z,{})]})})})}},637932:(e,t,s)=>{s.d(t,{A:()=>M});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(446866),r=()=>s(843403),l=()=>s(788860),d=()=>s(696459),c=()=>s(253502),u=()=>s(824462),p=()=>s(231077),m=()=>s(636340),g=()=>s(752127),f=()=>s(261930),h=()=>s(269299),S=()=>s(686350),y=()=>s(876822),b=()=>s(661297),x=()=>s(287509),v=()=>s(343734),w=()=>s(579807),j=s(785893);function M(e){let{target:t}=e;const s=(0,n().O7)(),{desktopAppId:M}=(0,n().Fy)(),_=(0,o().VK)((()=>y().default.state.currentSpaceViewStore),[]),k=(0,o().VK)((()=>{var e,s,i,n;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==_||null===(e=_.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==_||null===(s=_.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"notify_home_digest_email":return(null==_||null===(i=_.getSettingsStore())||void 0===i||null===(i=i.getKeyStore(t))||void 0===i?void 0:i.getValue())??(null==_||null===(n=_.getSettingsStore())||void 0===n||null===(n=n.getKeyStore("notify_email_digest"))||void 0===n?void 0:n.getValue())??!1;case"marketing_emails":case"notify_slack":case"desktop_badge":case"notify_slack_mention":case"notify_slack_all_activity":return!1;default:(0,d().t1)(t)}}),[_,t]),C=(0,i.useCallback)((()=>{if(_){const e=!k;"notify_email_digest"===t?f().MA({environment:s,newValue:e}):"notify_home_digest_email"===t?f().a2(s,e):h().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:s=>{m().sW({store:_,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&"desktop_badge"!==t&&c().Zh(s,{is_on:e,target:t})}}),[_,k,t,s]),I=async()=>{const e=await u().callApi({eventName:"getAuthorizedEmailPreferenceCenterLink",environment:s,data:{}});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return c().Md(s),g().D({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,S().iF)(s),t=(0,a().t_)(e);return c().Md(s),g().D({environment:s,url:t})}},T=()=>{var e;null!==(e=p().electronApi)&&void 0!==e&&e.openExternalUrl&&p().electronApi.openExternalUrl(`x-apple.systempreferences:com.apple.preference.notifications?id=${M}`)};return"marketing_emails"===t?(0,j.jsx)(w().Z,{type:"custom",isMobile:!0,title:(0,j.jsx)(v().Z,{target:t}),caption:(0,j.jsx)(x().Z,{target:t}),customButton:(0,j.jsx)(b().Z,{size:"lg",onClick:I,icon:r().J,children:(0,j.jsx)(l()._H,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):"desktop_badge"===t?(0,j.jsx)(w().Z,{type:"custom",isMobile:!0,title:(0,j.jsx)(v().Z,{target:t}),caption:(0,j.jsx)(x().Z,{target:t}),customButton:(0,j.jsx)(b().Z,{size:"lg",onClick:T,icon:r().J,children:(0,j.jsx)(l()._H,{id:"notificationSettings.desktopBadge.manageSettingsButton",defaultMessage:"Manage in System Settings"})}),disableSettingsItemClick:!0}):(0,j.jsx)(w().Z,{isMobile:!0,title:(0,j.jsx)(v().Z,{target:t}),caption:(0,j.jsx)(x().Z,{target:t}),type:"toggle",isOn:k,onToggle:C})}},253664:(e,t,s)=>{s.d(t,{Z:()=>m});s(667294);var i=()=>s(219727),n=()=>s(846550),o=()=>s(889919),a=()=>s(788860),r=()=>s(707513),l=()=>s(395362),d=()=>s(838266),c=()=>s(745740),u=()=>s(67961),p=s(785893);function m(e){const{icon:t,title:s,deeplinkTab:m}=e,g=(0,i().O7)(),f=(0,n().yK)((e=>({cardContainer:{backgroundColor:e.accentColors.gray[30],width:"100%",marginTop:20,marginBottom:20,padding:10,border:4,display:"flex",alignItems:"center",justifyContent:"space-between",gap:4,overflow:"hidden"},title:{flexShrink:1,...r().Yu},titleContainer:{display:"flex",alignItems:"center",flexShrink:1,overflow:"hidden"},button:{borderRadius:2,padding:4,display:"flex",alignItems:"center"},linkTitle:{color:e.mediumTextColor,fontWeight:r().Ue.medium},titleIcon:{marginRight:8,height:20,width:20,color:e.mediumTextColor},arrowIcon:{marginLeft:4,color:e.mediumTextColor,height:14,width:14}})),[]);return(0,p.jsxs)("div",{style:f.cardContainer,children:[(0,p.jsxs)("div",{style:f.titleContainer,children:[t(f.titleIcon),(0,p.jsx)(u().Z,{style:f.title,showTooltipWhenTruncated:!0,children:s})]}),m?(0,p.jsxs)(c().Z,{onClick:()=>function(e,t){l().jk(t,{source_tab:d().default.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),d().default.setState({...d().default.state,...e})}(m,g),style:f.button,children:[(0,p.jsx)(u().Z,{style:f.linkTitle,children:(0,p.jsx)(a()._H,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"})}),(0,o().k)(f.arrowIcon)]}):null]})}},257822:(e,t,s)=>{s.d(t,{O:()=>d});s(241792);var i=s(667294),n=()=>s(219727),o=()=>s(995867),a=()=>s(332504),r=()=>s(666414),l=s(785893);function d(e){const{items:t}=e,{isMobile:s}=(0,n().Fy)();return(0,l.jsx)(l.Fragment,{children:(0,o().Z)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return(0,l.jsx)(i.Fragment,{children:s()},t)})),(e=>(0,l.jsx)(r().Z,{size:(0,a().f)(s),isHidden:!s},e)))})}},928066:(e,t,s)=>{s.d(t,{O:()=>O});s(267602),s(470928);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(525807),l=()=>s(788860),d=()=>s(696459),c=()=>s(707513),u=()=>s(253502),p=()=>s(636340),m=()=>s(269299),g=()=>s(762300),f=()=>s(515329),h=()=>s(876822),S=()=>s(138912),y=()=>s(826955),b=()=>s(287509),x=()=>s(343734),v=(s(241792),()=>s(235484)),w=()=>s(286977),j=()=>s(374289),M=()=>s(159732),_=()=>s(855741),k=()=>s(832024),C=()=>s(388915),I=()=>s(352230),T=()=>s(154186),P=()=>s(827973),A=()=>s(448419),Z=()=>s(198829),R=()=>s(255577),H=()=>s(388284),D=s(785893);function B(e){const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:r,spaceViewStore:d}=e,c=(0,n().O7)(),u=(0,n().Fy)(),f=(0,o().VK)((()=>S().default.integrations.state.find((e=>e.id===v().nO))),[]),h=(0,a().yK)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let y;y=u.isPhone?{menuType:I().o.ActionSheet}:{menuType:I().o.Popup,width:280,maxHeight:"50vh"};const b=i.useCallback((e=>Object.entries((0,g().YJ)(s)).map(((s,i)=>{let[n,o]=s;return{key:n,items:o.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),V({environment:c,spaceViewStore:d,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>(0,D.jsx)(P().Z,{...e,title:n,right:i.id===(null==t?void 0:t.id)&&(0,w().e)({width:12,height:12})})}})),render:e=>(0,D.jsx)(H().Z,{...e,title:n,topBorder:0!==i})}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,d]),x=i.useCallback((e=>f?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().sW({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),k().xi(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:d})},render:e=>(0,D.jsx)(P().Z,{...e,title:(0,D.jsx)(l()._H,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),right:void 0===t&&(0,w().e)({width:12,height:12})})}],render:e=>(0,D.jsx)(H().Z,{...e,topBorder:b.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,D.jsx)(P().Z,{...e,icon:(0,M().R)({width:12,height:12}),title:(0,D.jsx)(l()._H,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await C().hM({environment:c,integration:f,spaceId:r,from:"notifications_and_settings"});if(_().x.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&V({environment:c,spaceViewStore:d,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,D.jsx)(H().Z,{...e,topBorder:!0})}]:[]),[t,c,b.length,r,d,f]);return(0,D.jsx)("div",{style:h.popupContainer,children:(0,D.jsx)(A().ZP,{popupType:A().Z4.Popup,alignmentToOrigin:A().vR.End,render:e=>(0,D.jsx)(Z().Z,{...y,children:(0,D.jsx)(R().ZP,{type:R().iW.Vertical,initialFocus:0,sections:[...b(e),...x(e)]})}),renderOrigin:t=>(0,D.jsxs)(T().Z,{...t,style:h.dropdownButtonContainer,children:[(0,D.jsx)("div",{style:h.currentValueLabel,children:(0,D.jsx)(N,{...e})}),(0,j().i)(h.icon)]})})})}function V(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e,o=s.getSettingsStore(),a=o.getKeyStore("notify_slack").getValue();if(n!==i){const e=(0,f().oI)();let s=!1;e&&(s=!n||Boolean(null==a?void 0:a.notify_slack_all_activity)),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().sW({store:o,data:{notify_slack:{external_bot_id:i,notify_slack_all_activity:s,notify_slack_mention:!n||(null==a?void 0:a.notify_slack_all_activity)}},transaction:e})}}),void 0===n?k().XC(t,{type:"personal",source:"notifications_and_settings"}):k().OS(t,{type:"personal",source:"notifications_and_settings"})}}function N(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,D.jsx)(l()._H,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,g().jg)(t).organizationName;return(0,D.jsx)(D.Fragment,{children:s})}var U=()=>s(579807);function O(e){const t=(0,n().O7)(),{target:s}=e,{isMobile:v}=(0,n().Fy)(),w=(0,o().VK)((()=>h().default.state.currentSpaceViewStore),[]),j=(0,o().VK)((()=>h().default.state.currentSpaceStore),[]),M=(0,o().Kw)(S().default.completeSlackAuthentications),_=(0,o().VK)((()=>(0,f().oI)()),[]),k=(0,o().VK)((()=>{var e;const t=null==w||null===(e=w.getSettings())||void 0===e||null===(e=e.notify_slack)||void 0===e?void 0:e.external_bot_id;if(!t)return;const s=M.find((e=>e.parent_id===t));if(s)return s;if(!w)return;return(0,y().Kv)(w,{id:t,table:r().PJ}).getValue()}),[w,M]),C=(0,o().VK)((()=>{var e;const t=null==w||null===(e=w.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();switch(s){case"notify_slack_mention":return k&&(null==t?void 0:t.notify_slack_mention)||!1;case"notify_slack_all_activity":return(null==t?void 0:t.notify_slack_all_activity)||!1;case"notify_slack":return!1;default:(0,d().t1)(s)}}),[w,s,k]),I=(0,o().VK)((()=>{var e;const t=null==w||null===(e=w.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();return null==t?void 0:t.notify_slack_all_activity}),[w]),T=(0,i.useCallback)((()=>{if(w){const e=!C,i=w.getSettingsStore();let n=i.getKeyStore("notify_slack").getValue();if(!n)return;"notify_slack_mention"===s?(n[s]=e,e||n.notify_slack_all_activity||(n=void 0),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().sW({store:i,data:{notify_slack:n},transaction:e})}})):"notify_slack_all_activity"===s&&(n[s]=e,m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().sW({store:i,data:{notify_slack:n},transaction:e})}})),"notify_slack"!==s&&u().Zh(t,{is_on:e,target:s})}}),[t,w,C,s]),P=(0,a().yK)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:c().Ue.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return w&&j?"notify_slack"===s?(0,D.jsx)(U().Z,{type:"custom",isMobile:v,title:(0,D.jsx)(x().Z,{target:s}),caption:(0,D.jsx)(D.Fragment,{children:k?(0,D.jsx)(l()._H,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} slack workspace{slackNotificationSettingMessage}.",values:{slackWorkspaceName:(0,D.jsx)("span",{style:P.notifySlackSelectedWorkspaceName,children:(0,g().jg)(k).organizationName}),slackNotificationSettingMessage:_?"":" when you're mentioned in a page, database property, or comment"}}):(0,D.jsx)(b().Z,{target:s})}),customButton:(0,D.jsx)(B,{currentExternalAuthentication:k,externalAuthentications:M,spaceId:j.id,spaceViewStore:w})}):"notify_slack_mention"===s?k?(0,D.jsx)(U().Z,{isMobile:!0,title:(0,D.jsx)(x().Z,{target:s}),caption:(0,D.jsx)(b().Z,{target:s}),type:"toggle",isOn:C,onToggle:T,disabled:Boolean(I)}):(0,D.jsx)(D.Fragment,{}):k?(0,D.jsx)(U().Z,{isMobile:!0,title:(0,D.jsx)(x().Z,{target:s}),caption:(0,D.jsx)(b().Z,{target:s}),type:"toggle",isOn:C,onToggle:T}):(0,D.jsx)(D.Fragment,{}):null}},809807:(e,t,s)=>{s.d(t,{w:()=>n});var i=()=>s(721543);function n(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,i().K)({...s,transform:"rotate(180deg)"}):(0,i().K)(s)}},202937:(e,t,s)=>{s.d(t,{Z:()=>Be});s(267602),s(653476),s(241792);var i=s(667294),n=()=>s(142735),o=()=>s(846550),a=()=>s(619186),r=()=>s(788860),l=()=>s(707513),d=()=>s(907099),c=()=>s(91502),u=()=>s(467806),p=()=>s(285473),m=()=>s(67961),g=(s(228244),()=>s(219727)),f=()=>s(527278),h=()=>s(352230),S=()=>s(270895),y=()=>s(529048),b=()=>s(44556),x=()=>s(383694),v=()=>s(149809),w=()=>s(265640),j=()=>s(827973),M=()=>s(448419),_=()=>s(740046),k=()=>s(198829),C=()=>s(388284),I=s(785893);const T=(0,r().vU)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function P(e){const t=(0,g().O7)(),s=(0,o().yK)((()=>({teamMenuItem:{fontWeight:400}})),[]),[a,l]=(0,i.useState)(""),d=(0,i.useCallback)((e=>b().RF({environment:t,teamId:e,tab:S().a.Members,from:"teams_dropdown_for_group"})),[t]),u=(0,n().VK)((()=>[{key:"teams for group",render:e=>(0,I.jsx)(C().Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var i;return(0,I.jsx)(j().Z,{icon:(0,I.jsx)(x().p,{disabled:!0,store:e}),title:(0,I.jsx)(m().Z,{style:s.teamMenuItem,children:e.getName()}),right:(0,I.jsx)(r()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:(null===(i=(0,c().oT)(e))||void 0===i?void 0:i.memberCountWithGuests)??0}}),...t})},action:()=>{d(e.id)},closeParentMenu:!0};return t}))}]),[s,e.teamStores,d]),p=a,y=(0,I.jsx)(v().Z,{filter:p,context:{blocks:[],environment:t,publicEditMode:void 0},sections:u,initialFocus:0}),w=(0,I.jsx)(C().Z,{isInput:!0,children:(0,I.jsx)(_().ZP,{value:p,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:f().Z.formatMessage(T.filterTeams)})}),M={menuType:h().o.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?w:void 0};return(0,I.jsx)(k().Z,{...M,children:y})}const A=function(e){const t=(0,n().qz)(void 0,y().Z),a=(0,o().yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),l=(0,n().VK)((()=>s(700696).default.state.teams.filter((t=>t.getRawMembership().some((t=>"group"===t.entity_type&&t.group_id===e.group.group_id))))),[e.group]);return(0,I.jsx)(M().ZP,{popupType:M().Z4.Popup,renderOrigin:e=>(0,I.jsxs)(w().D,{disabled:0===l.length,style:0===l.length?a.noTeams:a.button,...e,children:[0===l.length?(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l.length}}),l.length>0&&(0,s(374289).i)(a.chevron)]}),buttonPopupStore:t,placementToOrigin:s(128119).Iw.Bottom,render:e=>(0,I.jsx)(P,{parent:e,teamStores:l}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var Z=()=>s(641772),R=()=>s(513670),H=()=>s(912732),D=()=>s(308186),B=()=>s(224597),V=()=>s(269299),N=()=>s(485491),U=()=>s(577128),O=()=>s(855238),F=()=>s(1910),L=()=>s(255577),E=()=>s(967092);function K(e){const{group:t,spaceStore:s,settingsStore:i}=e,o=(0,n().qz)(void 0,y().Z);return(0,I.jsx)(M().ZP,{popupType:E().kQ.Popup,render:()=>(0,I.jsx)(G,{group:t,spaceStore:s,popupStore:o,settingsStore:i}),buttonPopupStore:o,renderOrigin:e=>(0,I.jsx)(F().Z,{icon:Z().o,...e})})}function G(e){const{group:t,spaceStore:s,popupStore:a,settingsStore:l}=e,d=(0,n().VK)((()=>s.canAdmin()),[s]),u=(0,g().O7)(),p=(0,n().VK)((()=>(0,c().Xq)({environment:u,spaceStore:s})),[s,u]),m=(0,o().yK)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),f=(0,i.useCallback)((async()=>{a.setState({open:!1});const{accept:e}=await D().gt({message:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group?"}),description:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationDescription",defaultMessage:"Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})});if(e){const e=(0,N().Q)({spaceStore:s,groupId:t.group_id});await V().createAndCommitAsync({environment:u,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async t=>{await B().Xv({environment:u,groupStore:e,transaction:t})}}),H().d(u)}}),[t,u,s,a]),S=(0,i.useCallback)((()=>{l.setState({...l.state,editingNameGroupId:t.group_id,groupNameInputValue:t.name||""}),a.setState({open:!1}),H().Xb(u)}),[t,u,a,l]),y=(0,i.useCallback)((()=>{U().default.setState({...U().default.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),b().lo("group_settings")}),[t]),x={key:"action_menu",render:e=>(0,I.jsx)(C().Z,{...e}),items:R().oA([{key:"rename",render:e=>(0,I.jsx)(O().Z,{...e,title:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:S},p?{key:"create_team_from_group",render:e=>(0,I.jsx)(O().Z,{...e,title:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:y}:void 0,d&&{key:"delete",render:e=>(0,I.jsx)(O().Z,{...e,title:(0,I.jsx)("div",{style:m.deleteButton,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:f}])};return(0,I.jsx)(k().Z,{menuType:h().o.Popup,children:(0,I.jsx)(L().ZP,{type:L().iW.Vertical,initialFocus:0,sections:[x],onAccept:()=>{a.setState({open:!1})}})})}var q=()=>s(801812),W=()=>s(933868),z=()=>s(989478),Y=()=>s(568017),Q=()=>s(824462);var $=()=>s(591914),J=()=>s(876822),X=()=>s(826955);class ee extends(()=>s(263184))().default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const te=ee;var se=()=>s(207917),ie=()=>s(239444),ne=()=>s(816512),oe=()=>s(446866),ae=()=>s(159732),re=()=>s(828946),le=()=>s(18281),de=()=>s(897257),ce=()=>s(154439),ue=()=>s(838367),pe=()=>s(906651),me=()=>s(864832),ge=()=>s(122671),fe=()=>s(523516);function he(e){const{group:t,spaceStore:s,groupStore:i,userIds:a,onAddUsers:l}=e,d=(0,n().qz)(void 0,y().Z),c=(0,o().yK)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,I.jsx)(M().ZP,{popupType:E().kQ.Popup,render:()=>(0,I.jsx)(Se,{spaceStore:s,group:t,userIds:a,popupStore:d,groupStore:i,onAddUsers:l}),buttonPopupStore:d,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:c.popup,renderOrigin:e=>(0,I.jsx)("div",{children:(0,I.jsx)(w().D,{isGray:!0,icon:ae().R,style:c.button,...e,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function Se(e){const t=(0,g().O7)(),s=(0,r().YB)(),{group:o,userIds:a,spaceStore:l,popupStore:d,groupStore:c,onAddUsers:p}=e,m=(0,n().VK)((()=>c.state.temporaryUserIds.map((e=>{const t=l.getRecordValue({table:z().KJ,id:e});return(0,I.jsx)(me().vw,{userValue:t,format:me().vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=c.state.temporaryUserIds.filter((t=>t!==e));c.setState({...c.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[l,c]),f=(0,n().VK)((()=>()=>{const{temporaryUserIds:e}=c.state;V().createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,canUndo:!0,perform:t=>{for(const s of e){const e=(0,N().f)({spaceStore:l,groupId:o.group_id,userId:s});B().XM({groupMemberStore:e,spaceId:l.id,groupId:o.group_id,userId:s,transaction:t})}p(e),u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===o.group_id?{group:o,memberCount:t.memberCount+e.length}:t))})}}),c.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),d.setState({open:!1}),H().Kf(t,{add_member_count:e.length})}),[c,t,d,l,o,p]),S=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=c.state,t=e.slice(0,e.length-1);c.setState({...c.state,temporaryUserIds:t})}),[c]),y=(0,i.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,oe().zI)(t),{currentSpaceStore:n}=J().default.state,o=de().subscriptionDataStoreInstance.state;if(!o||!n)return;const a=(0,le().CM)(o).map((e=>e.userId)),r=R().oA(a.map((e=>X().U6.createChildStore(n,{table:z().KJ,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!c.state.temporaryUserIds.includes(e.id)));c.setState({...c.state,temporaryUserIds:[...c.state.temporaryUserIds,...r.map((e=>e.id))],userInputValue:i})}),[c]),b=(0,n().VK)((()=>c.state.userInputValue),[c]),x=(0,n().VK)((()=>c.state.temporaryUserIds),[c]);return(0,I.jsx)(k().Z,{menuType:h().o.Popup,tokenInputHeader:!0,header:(0,I.jsx)(ge().ZP,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:ge().UR.Group,tokens:m,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:S,value:b,onChange:y,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,I.jsx)(pe().Z,{isLarge:!0,onClick:f,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,I.jsx)(ce().Z,{request:{query:b,temporaryUserIds:x},performRequest:async e=>{let{query:s,temporaryUserIds:i}=e;const n=await re().x.searchActions.load();return(await n.searchVisibleSpaceUsers({environment:t,query:s,membersOnly:!0})).filter((e=>a.indexOf(e.id)<0&&i.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,I.jsx)(ye,{results:t,spaceStore:l,groupStore:c})})})}function ye(e){const{spaceStore:t,groupStore:s}=e,[i,o]=(0,n().AF)(s,te),a=(e.results||[]).map((e=>{let{id:t}=e;return t})),l=(0,n().VK)((()=>a.map((e=>{const s=X().U6.createChildStore(t,{table:z().KJ,id:e}).getValue(),n={key:e,render:e=>(0,I.jsx)(fe().Z,{...e,actor:(0,ne().m3)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...i.temporaryUserIds,e];o({...i,temporaryUserIds:t,userInputValue:""})}};return n}))),[t,o,i,a]);if(0===a.length)return(0,I.jsx)(C().Z,{children:(0,I.jsx)(ue().Z,{title:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,I.jsx)(C().Z,{...e}),items:l};return(0,I.jsx)(L().ZP,{type:L().iW.Vertical,initialFocus:0,sections:[e]})}}const be=10;function xe(e){const{group:t,canEdit:s,spaceStore:o,settingsStore:a}=e,l=(0,r().YB)(),c=(0,g().O7)(),u=(0,n().VK)((()=>J().default.state.currentSpaceStore),[]),p=(0,n().qz)(void 0,te),m=(0,n().VK)((()=>p.state.limitUsers&&!a.state.groupsFilter?be:void 0),[p,a]),[{value:f}]=(0,q().r5)((async()=>{const e=await Q().callApi({eventName:"getSpacePermissionGroupMembers",environment:c,data:{groupIds:[t.group_id],spaceId:o.id}});if("success"===e.type){var s;const i=(null===(s=e.data.groupUsersMap[t.group_id])||void 0===s?void 0:s.userIds).map((e=>X().U6.createChildStore(o,{table:z().KJ,id:e})));return{allUserStores:(0,d().N5)({userStores:i,spaceStore:u,intl:l})}}}),[u,c,t,l,o]),[h,S]=(0,i.useState)([]);(0,i.useEffect)((()=>{null!=f&&f.allUserStores&&S(f.allUserStores)}),[null==f?void 0:f.allUserStores]);const[y,b]=(0,i.useState)([]);return(0,i.useEffect)((()=>{b(m?h.slice(0,m):h)}),[h,m]),(0,I.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[y.map((t=>(0,I.jsx)(ve,{userStore:t,...e,onRemoveUser:e=>{S(h.filter((t=>t.id!==e))),b(y.filter((t=>t.id!==e)))}},t.id))),m&&h.length>m&&(0,I.jsx)(w().D,{isGray:!0,style:{marginTop:4},onClick:()=>{p.setState({...p.state,limitUsers:!1})},children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:h.length-y.length}})}),s&&u?(0,I.jsx)(he,{group:t,spaceStore:o,groupStore:p,userIds:h.map((e=>e.id))||[],onAddUsers:e=>{const t=e.map((e=>X().U6.createChildStore(o,{table:z().KJ,id:e})));S([...h,...t])}}):y.length<1&&(0,I.jsx)(w().D,{disabled:!0,isGray:!0,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function ve(e){const{spaceStore:t,userStore:s,group:i,canEdit:o,onRemoveUser:a}=e,l=(0,g().O7)(),d=(0,n().VK)((()=>(0,$().VK)(t,s.id).getMembershipTypeAsRoleOrNone()),[t,s]);return(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,I.jsxs)("div",{style:{display:"flex"},children:[(0,I.jsx)(ie().Z,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,W().Bc)(d)&&(0,I.jsx)(se().Z,{role:"membership_admin"===d?"membership_admin":"admin"})]}),o&&(0,I.jsx)(w().D,{isGray:!0,hoveredStyle:{color:Y().ZP.red},onClick:async()=>{const{accept:e}=await D().gt({message:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})});e&&(V().createAndCommit({userAction:"SpacePermissionGroup.removeUser",environment:l,canUndo:!0,perform:e=>{!function(e){const{groupMemberStore:t,transaction:s}=e;V().applyOperation({store:t,operation:{command:"update",pointer:t.pointer,path:[],args:{removed_at:Date.now()}},transaction:s})}({transaction:e,groupMemberStore:(0,N().f)({spaceStore:t,groupId:i.group_id,userId:s.id})}),a(s.id),u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===i.group_id?{group:i,memberCount:e.memberCount>=1?e.memberCount-1:0}:e))})}}),H().xt(l))},children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})})]},s.id)}var we=()=>s(146947),je=()=>s(490670),Me=()=>s(785817),_e=()=>s(321160),ke=()=>s(67330),Ce=()=>s(458196),Ie=()=>s(388350),Te=()=>s(98991),Pe=()=>s(291198),Ae=()=>s(94967),Ze=()=>s(943620),Re=()=>s(654133),He=()=>s(167705);function De(e){const{row:t,canEdit:s,open:a,toggleOpenState:c,spaceStore:p,settingsStore:f}=e,h=t.group,S=(0,r().YB)(),y=(0,o().Fg)(),b=(0,g().O7)(),x=d().kF({intl:S,groupName:h.name}),v=(0,o().yK)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${a?0:-90}deg)`,fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:l().F5(we().locale).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:l().Ue.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[a]),w=(0,i.useCallback)((e=>{const t=Date.now();V().createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:b,canUndo:!0,perform:s=>{B().jF({spacePermissionGroupStore:(0,N().Q)({spaceStore:p,groupId:h.group_id}),transaction:s,value:{icon:e,last_edited_at:t}})}});const s={id:(0,Ce().L9)({spacePermissionGroupId:h.group_id,spaceId:p.id}),icon:e,name:h.name,group_id:h.group_id,space_id:h.space_id,version:h.getVersion(),created_by_id:h.created_by_id,created_by_table:h.created_by_table,created_at:h.created_at,last_edited_by_id:h.last_edited_by_id,last_edited_at:t,last_edited_by_table:h.last_edited_by_table};u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===h.group_id?{group:ke().k.fromValue(Ce().GQ,s),memberCount:e.memberCount}:e))}),H().zU(b,{is_emoji:(0,_e().Z)(e)})}),[h,p,b]),j=(0,i.useCallback)((()=>{f.setState({...f.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[f]),M=(0,i.useCallback)((e=>{f.setState({...f.state,groupNameInputValue:e.target.value})}),[f]),_=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=f.state,s=t.trim(),i=Date.now();if(e===h.group_id){if(s!==h.name){const e=(0,N().Q)({spaceStore:p,groupId:h.group_id});V().createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:b,canUndo:!0,perform:t=>{B().jF({spacePermissionGroupStore:e,value:{name:s,last_edited_at:i},transaction:t})}})}const e={id:(0,Ce().L9)({spacePermissionGroupId:h.group_id,spaceId:p.id}),icon:h.icon,name:s,group_id:h.group_id,space_id:h.space_id,version:h.getVersion(),created_by_id:h.created_by_id,created_by_table:h.created_by_table,created_at:h.created_at,last_edited_by_id:h.last_edited_by_id,last_edited_at:i,last_edited_by_table:h.last_edited_by_table};u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===h.group_id?{group:ke().k.fromValue(Ce().GQ,e),memberCount:t.memberCount}:t))}),f.setState({...f.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[h,b,p,f]),k=(0,n().VK)((()=>f.state.editingNameGroupId===h.group_id),[h,f]),C=(0,n().VK)((()=>f.state.groupNameInputValue),[f]);function T(e){const t={width:e-4,height:e-4,fill:y.mediumIconColor},s={width:12,height:12,fill:y.mediumIconColor};return(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,Me().I)(t),(0,je().f)(s)]})}return(0,I.jsxs)("div",{style:v.container,children:[(0,I.jsx)(He().Z,{isSidebar:!1,fill:!0,icon:"chevron",open:a,color:y.mediumIconColor,onClick:()=>c(h.group_id),style:v.toggle}),(0,I.jsx)(Te().Z,{size:28,style:v.icon}),k?(0,I.jsx)(Ae().Z,{debugName:"GroupNameToggle",capture:!0,onEsc:j,children:(0,I.jsx)(Pe().Z,{disabled:!s,type:Ie().b.Inline,style:v.input,placeholder:S.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:C,onChange:M,onBlur:_,onSubmit:_})}):(0,I.jsx)(m().Z,{style:v.name,showTooltipWhenTruncated:!0,children:x}),(P=t.isRowHovered,h.icon?s?(0,I.jsx)(Ze().Z,{disabled:!1,bucket:"public",icon:h.icon?{pointer:p.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:w,style:v.icon}):(0,I.jsx)(Ze().Z,{disabled:!0,bucket:"public",icon:h.icon?{pointer:p.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:x,style:v.icon}):P&&s?(0,I.jsx)(Re().Z,{renderTooltip:()=>(0,I.jsx)(r()._H,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,I.jsx)(Ze().Z,{disabled:!1,bucket:"public",icon:h.icon?{pointer:p.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:w,style:{...v.icon,width:30},defaultIcon:T(18),...e})}):void 0)]});var P}function Be(e){let{canEdit:t,spaceStore:s,permissionsSettingsStore:d,containerMarginTop:g}=e;const[f,h]=(0,i.useState)([]),S=(0,o().Fg)(),y=(0,n().VK)((()=>u().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group))),[]),b=(0,n().VK)((()=>0!==(0,c().az)()),[]),x=(0,n().VK)((()=>(0,a().ZP)(d.state.groupsFilter,y,(e=>e.name||""))),[d,y]),v=(0,i.useCallback)((e=>{h((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[h]),w=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.group_id,group:e,isClickable:!1})))}(x)),[x]),j=(0,i.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,showTeamsColumn:n,spaceStore:o,settingsStore:a}=e;const d={id:"title",headerTitle:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>(0,I.jsx)(De,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:o,settingsStore:a}),widthData:{width:120},hasClickableContents:!1,sortable:!1},c={id:"teams",headerTitle:(0,I.jsx)("div",{style:{paddingLeft:8},children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,I.jsx)("div",{style:l().Yu,children:(0,I.jsx)(A,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,I.jsx)(Ve,{row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},p={id:"menu",headerTitle:null,renderCell:e=>(0,I.jsx)(K,{group:e.group,spaceStore:o,settingsStore:a}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[d,...n?[c]:[],u,...i?[p]:[]]}({openRowIds:f,toggleOpenRowId:v,canEdit:t,showTeamsColumn:b,spaceStore:s,settingsStore:d})),[f,v,t,b,s,d]),M=(0,p().bE)({columnRenderInfo:j,theme:S,containerMarginTop:g}),_=(0,o().yK)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,I.jsx)(p().Dp,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:j,rows:w,styles:M,renderNoRowsComponent:()=>(0,I.jsx)(m().Z,{isSmall:!0,style:_.noRowContainer,children:y.length>0?(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found"}):(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroups",defaultMessage:"No groups"})}),renderRowChild:e=>f.includes(e.id)?(0,I.jsx)(xe,{group:e.group,canEdit:t,spaceStore:s,settingsStore:d}):void 0})}function Ve(e){const{row:t}=e,s=(0,n().VK)((()=>(0,d().c7)({groupId:t.group.group_id})),[t.group]);return(0,I.jsx)("div",{style:l().Yu,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:s}})})}},391598:(e,t,s)=>{s.d(t,{y:()=>g});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(788860),a=()=>s(228772),r=()=>s(297861),l=()=>s(897257),d=()=>s(108714),c=()=>s(661297),u=()=>s(67961),p=()=>s(868614),m=s(785893);function g(){const e=(0,i().O7)(),t=(0,n().VK)((()=>function(e){const{device:t,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:t.isMobile?s.state.paddingLeftCSS:0,paddingRight:t.isMobile?s.state.paddingRightCSS:0}}(e)),[e]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(h,{}),(0,m.jsxs)("div",{style:t,children:[(0,m.jsx)(u().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,m.jsx)(S,{})}),(0,m.jsx)(f,{})]})]})}function f(){const e=(0,a().r)(),{mobileNative:t}=(0,i().O7)(),{isIOS:s}=(0,i().Fy)(),u=(0,n().VK)((()=>{var e;const t=l().subscriptionDataStoreInstance.state;return"subscribed_admin"===(null==t?void 0:t.type)?null===(e=t.customerData)||void 0===e||null===(e=e.revenueCat)||void 0===e?void 0:e.store:void 0}),[]),p={marginTop:12,marginBottom:4},g=(0,m.jsx)(o()._H,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"});if(s&&"app_store"===u&&(0,r().Y)("supportsAiIAP")&&null!=t&&t.openUpgradeModal&&e)return(0,m.jsx)(c().Z,{size:"lg",style:p,onClick:()=>{t.openUpgradeModal(e.getSpaceId(),"settings")},children:g});let f;switch(u){case"app_store":f="https://apps.apple.com/account/subscriptions";break;case"play_store":f="https://play.google.com/store/account/subscriptions"}return(0,m.jsx)(d().Z,{href:f,children:(0,m.jsx)(c().Z,{size:"lg",style:p,children:g})})}function h(){const e=(0,i().O7)(),{device:t}=e;return(0,m.jsx)(p().Z,{large:!t.isMobile||void 0,divider:t.isMobile?void 0:"full",children:(0,m.jsx)(o()._H,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function S(){const e=(0,i().O7)(),{device:t}=e;return t.isMobile?(0,m.jsx)(o()._H,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your subscription through the App Store."}):(0,m.jsx)(o()._H,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}},418372:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(667294),n=()=>s(146947),o=()=>s(219727),a=()=>s(142735),r=()=>s(646574),l=()=>s(815757),d=()=>s(446866),c=()=>s(788860),u=()=>s(824462),p=()=>s(998901),m=()=>s(876822),g=()=>s(690122),f=()=>s(654133),h=()=>s(579807),S=s(785893);const y=function(e){let{emailDomainSettings:t}=e;const n=(0,o().O7)(),r=(0,a().qz)(void 0,s(853648).Z),d=(0,i.useCallback)(((e,s,i)=>(0,S.jsx)(M,{emailDomainSettings:t,requestStore:r,error:e,result:s,ready:i})),[t,r]),c=(0,a().VK)((()=>m().default.state.currentUserStore),[]);return c?(0,S.jsx)(s(154439).Z,{requestStore:r,request:{userId:c.id,expiryTime:Date.now()+l().g},performRequest:e=>async function(e,t){const s=await u().callApi({eventName:"getDataAccessConsent",environment:t,data:{}});if("failed"===s.type)throw s.error;return s.data}(0,n),render:d}):null};function b(e){return Boolean(e.prevent_granting_support_access)}function x(e){const t=(0,o().O7)(),{accessGranted:s,onClick:i,expiryTime:a,emailDomainSettings:l}=e,{device:d}=t;return(0,S.jsx)(h().Z,{disabled:b(l),isMobile:d.isMobile,title:(0,S.jsx)(c()._H,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&a?(0,S.jsx)(c()._H,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,r().Yx)(a,"medium_with_time",n().locale)}}):(0,S.jsx)(c()._H,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:i})}function v(e){const{accessGranted:t,onClick:s,expiryTime:i,emailDomainSettings:n}=e,o=(0,a().VK)((()=>{var e;const t=null===(e=m().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,d().Gd)(t):void 0}),[]);return(0,S.jsx)(f().Z,{disableTooltip:!b(n),renderTooltip:()=>(0,S.jsx)(c()._H,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:o}}),placement:p().Placement.Bottom,alignment:p().Alignment.Center,render:e=>(0,S.jsx)("div",{...e,children:(0,S.jsx)(x,{emailDomainSettings:n,accessGranted:t,onClick:s,expiryTime:i})})})}async function w(e,t,s){const i=await u().callApi({eventName:"setDataAccessConsent",environment:t,data:e});if("success"===i.type&&i.data){const e=s.state;s.setState({...e,result:i.data})}}function j(e){let{emailDomainSettings:t,requestStore:s}=e;const n=(0,o().O7)(),r=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await w({expiryTime:Date.now()+l().g},e,s)}(n,t,s)),[n,t,s]),d=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await w({},e,s)}(n,t,s)),[n,t,s]),c=(0,a().VK)((()=>{var e;return null===(e=s.state.result)||void 0===e?void 0:e.expiryTime}),[s]),u=Boolean(c&&Number(c)>Date.now()),p=u?d:r;return(0,S.jsx)(v,{emailDomainSettings:t,accessGranted:u,onClick:p,expiryTime:c})}function M(e){let{error:t,result:s,ready:i,emailDomainSettings:n,requestStore:o}=e;const a=(0,c().YB)();return(0,S.jsx)(g().Z,{loaded:i,spinnerSize:"sm",showSpinnerTimeout:600,children:t||!s?(0,S.jsx)("div",{children:a.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):(0,S.jsx)(j,{emailDomainSettings:n,requestStore:o})})}},563286:(e,t,s)=>{s.d(t,{H:()=>g});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(788860),a=()=>s(269299),r=()=>s(348141),l=()=>s(594546),d=()=>s(148126),c=()=>s(876822),u=()=>s(765513),p=()=>s(579807),m=s(785893);function g(e){let{isMobile:t}=e;const s=(0,i().O7)(),g=(0,n().VK)((()=>c().default.state.currentUserSettingsStore),[]),f=(0,n().VK)((()=>{var e;return!0===(null==g||null===(e=g.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[g]);return(0,m.jsx)(p().Z,{isMobile:t,title:(0,m.jsx)(o()._H,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,m.jsx)(o()._H,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,m.jsx)(u().Z,{external:!0,href:(0,d().UY)("guides.pageAnalytics"),children:e})}}),type:"dropdown",currentOption:f,options:[{key:"record",label:(0,m.jsx)(o()._H,{id:"viewHistorySettings.record.label",defaultMessage:"Record"})},{key:"do_not_record",label:(0,m.jsx)(o()._H,{id:"viewHistorySettings.do_not_record.label",defaultMessage:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;a().createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,canUndo:!0,perform:e=>{g&&r().d2({userSettingsStore:g,data:{disable_page_analytics:t},transaction:e})}}),l().K4(s,t?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}})}},617811:(e,t,s)=>{s.d(t,{H:()=>g});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(836273),a=()=>s(525579),r=()=>s(788860),l=()=>s(205228),d=()=>s(815277),c=()=>s(835673),u=()=>s(356641),p=()=>s(67961),m=s(785893);function g(e){let{spaceStore:t,showDomain:s}=e;const g=(0,i().O7)(),f=(0,r().YB)(),h=(0,n().VK)((()=>t.id),[t]),S=(0,n().VK)((()=>t.getPublicContentDomain()),[t]),y=(0,d().VX)({name:"saml",spaceId:t.id,userId:g.currentUser.id}),b=(0,d().VX)({name:"scim",spaceId:t.id,userId:g.currentUser.id});return(0,m.jsxs)(u().rj,{gap:8,children:[(0,m.jsx)(u().r8,{row:1,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})})}),(0,m.jsx)(u().r8,{row:1,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:h,tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})})}),y?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().r8,{row:2,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"})})}),(0,m.jsx)(u().r8,{row:2,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:(0,a().AE)(l().default.domainBaseUrl),tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().r8,{row:3,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"})})}),(0,m.jsx)(u().r8,{row:3,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:l().default.domainBaseUrl+o()._j.scimApiBasePath,tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,s&&void 0!==S?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().r8,{row:y?4:2,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.workspaceDomain",defaultMessage:"Workspace Domain"})})}),(0,m.jsx)(u().r8,{row:y?4:2,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:S,tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceDomain.copyTooltip",defaultMessage:"Click to copy domain"})})})})]}):null]})}},173694:(e,t,s)=>{s.d(t,{r:()=>o});s(267602),s(470928);var i=()=>s(824462),n=()=>s(174421);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*s(326966).hw?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await i().callApi({eventName:"sendTemporaryPassword",environment:this.environment,data:{passwordReset:!0,email:t}});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,n=s.split("-").join(""),o=await i().callApi({eventName:"authVerifyBackupCodesLogin",environment:this.environment,data:{code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,n=await i().callApi({eventName:"authVerifyPassword",environment:this.environment,data:{password:s}});if("success"===n.type)return{status:"match"};if("incorrect_password"===(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw n}async disableMFA(){const e=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"disable_all"}});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,n;const{mfaSettingId:o,friendlyName:a}=e,r=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"rename",mfaSettingId:o,friendlyName:a}});if("success"===r.type)return{status:"saved",settings:r.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"bad_friendly_name"};throw r}async deleteSettings(e){const t=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"delete",mfaSettingId:e}});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await i().callApi({eventName:"authCreateTotp",environment:this.environment,data:{}});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,n,o,a;const r=await i().callApi({eventName:"authCreateSms",environment:this.environment,data:{countryCode:e,phoneNumber:t}});if("success"===r.type)return{status:"created",mfaSettingId:r.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=r.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(a=r.body)||void 0===a||null===(a=a.clientData)||void 0===a?void 0:a.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw r}async verifySMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await i().callApi({eventName:"authSendSms",environment:this.environment,data:{mfaSettingId:t}});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await i().callApi({eventName:"authCreateBackupCodes",environment:this.environment,data:{}});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}async loadPasskeySettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return{settings:t.passkeys}}throw e}async createPasskeySetting(e){const t=await i().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==t.type)return{created:!1};const{options:s,attemptId:o}=t.data,a=await n().x8({options:s});return a?await n().gp({environment:e,attemptId:o,attestation:a}):{created:!1}}async renamePasskeySetting(e){const t=await i().callApi({eventName:"renamePasskey",environment:this.environment,data:e});if("success"===t.type)return{status:"saved",settings:t.data.passkeys};throw t}async deletePasskeySetting(e){const t=await i().callApi({eventName:"removePasskey",environment:this.environment,data:e});if("success"===t.type)return{settings:t.data.passkeys};throw t}}},113419:(e,t,s)=>{s.d(t,{Z:()=>S});var i=s(667294),n=()=>s(219727),o=()=>s(788860),a=()=>s(989377),r=()=>s(661297),l=()=>s(579807),d=()=>s(435669),c=()=>s(173694),u=()=>s(365581),p=()=>s(359792),m=()=>s(323143),g=()=>s(317493),f=()=>s(275678),h=s(785893);function S(e){let{samlEnforced:t,hasPasskeys:s}=e;const S=(0,n().O7)(),y=S.device.isMobile,[{rootStateMachine:b,settingsStateMachine:x,totpStateMachine:v,smsStateMachine:w,backupCodesStateMachine:j}]=(0,i.useState)((()=>{const e=new(c().r)(S),t={totpStore:new(f().o),settingsStore:new(m().c),smsStore:new(g().J),backupCodesStore:new(d().y),rootStore:new(p().M)};return{mfaService:e,rootStateMachine:new(p().i)(t.rootStore),settingsStateMachine:new(m().W)(t.settingsStore,e),totpStateMachine:new(f().V)(t.totpStore,e),smsStateMachine:new(g().F)(t.smsStore,e),backupCodesStateMachine:new(d().o)(t.backupCodesStore,e)}}));const M=(0,h.jsx)(r().Z,{size:"lg",onClick:()=>function(e){let{rootStateMachine:t,settingsStateMachine:s}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>s.passkeySettingsShow()})}({rootStateMachine:b,settingsStateMachine:x}),disabled:t,children:s?(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.managePasskeysButton.label",defaultMessage:"Manage passkeys"}):(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.addPasskeysButton.label",defaultMessage:"Add passkey"})});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l().Z,{type:"custom",isMobile:y,title:(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.passkeySetting.label",defaultMessage:"Passkeys"}),caption:(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.passkeySetting.message",defaultMessage:"Securely sign-in with on-device biometric authentication."}),badge:(0,h.jsx)(a().i,{newBadgeKey:"passkey_setting",didUserEngage:!1}),shouldHighlight:!1,disabled:t,tooltipLabel:(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.passkeySetting.tooltip",defaultMessage:"Your organization requires you to use SAML for authentication."}),disableTooltip:!t,customButton:M}),(0,h.jsx)(u().Z,{rootStateMachine:b,settingsStateMachine:x,totpStateMachine:v,smsStateMachine:w,backupCodesStateMachine:j})]})}},365581:(e,t,s)=>{s.d(t,{Z:()=>z});var i=s(667294),n=()=>s(142735),o=()=>s(696459),a=()=>s(708518),r=()=>s(788860),l=()=>s(707513),d=()=>s(312578),c=()=>s(968001),u=s(785893);function p(e){let{errorMessage:t,isLoading:s,onDisplayBackupCodes:i,onCancel:n,onDismiss:o}=e;const a=(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.title",defaultMessage:"Regenerate backup codes"}),p=(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.message",defaultMessage:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won't work after regenerating new ones.</boldtext>",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Ue.semibold},children:e})}}),m={text:s?(0,u.jsx)(d().Z,{}):(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",defaultMessage:"Generate new backup codes"}),onClick:i,view:"outline",disabled:s,isRed:!0},g=[{text:(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,view:"outline",type:"button"}];return(0,u.jsx)(c().Z,{title:a,header:p,errorMessage:t,primaryAction:m,secondaryActions:g,onDismiss:o})}var m=()=>s(846550),g=()=>s(724568),f=()=>s(972689);function h(e){let{backupCodes:t,backupCodeDownload:s,backupCodeFileName:i,errorMessage:n,onNoted:o,onDownload:a}=e;const d=(0,m().yK)(S,[]),p=(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.title",defaultMessage:"Save your backup codes"}),h=(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.message",defaultMessage:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Ue.semibold},children:e})}}),y={text:(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.codesNotedDown.button.message",defaultMessage:"I've saved them"}),onClick:o},b=[{text:(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",defaultMessage:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${s}`,saveAs:i,view:"outline",type:"link",onClick:a}];return(0,u.jsx)(c().Z,{title:p,header:h,icon:(0,g().j)(d.icon),errorMessage:n,primaryAction:y,secondaryActions:b,children:(0,u.jsx)(f().Z,{type:"unencryptedCodes",backupCodes:t})})}function S(e){return(0,m().EM)({icon:{width:30,height:30,fill:e.regularIconColor}})}function y(e){const{backupCodesStateMachine:t,onGoToSettings:s,onDismiss:i}=e,a=(0,n().VK)((()=>t.getCurrentStep()),[t]),r=()=>t.backupCodesRegenerateCodes();switch(a.step){case"backupCodesUninitialized":case"backupCodesLoading":return null;case"backupCodesRegenerateCodes":return(0,u.jsx)(p,{isLoading:a.isLoading,errorMessage:a.error,onDisplayBackupCodes:r,onDismiss:i,onCancel:s});case"backupCodesShowCodes":return(0,u.jsx)(h,{errorMessage:a.error,backupCodes:a.backupCodes,backupCodeDownload:a.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:s});default:return(0,o().t1)(a)}}var b=()=>s(951552),x=()=>s(840196);function v(e){let{type:t,errorMessage:s,onDismiss:i,onAddMethod:n}=e;const a=(0,m().yK)(w,[]),l=(0,u.jsx)(r()._H,{id:"mfa.setupComplete.confirmation.header",defaultMessage:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),d=[{text:(0,u.jsx)(r()._H,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",defaultMessage:"View 2-step methods"}),onClick:n,type:"button",view:"outline"}];return(0,u.jsx)(c().Z,{title:"totp"===t?(0,u.jsx)(r()._H,{id:"mfa.totp.setupComplete.confirmation.title",defaultMessage:"2-step verification with authenticator is turned on"}):"sms"===t?(0,u.jsx)(r()._H,{id:"mfa.sms.setupComplete.confirmation.title",defaultMessage:"2-step verification with phone number is turned on"}):(0,o().t1)(t),header:l,errorMessage:s,icon:(0,x().p)(a.confirmationIcon),secondaryActions:d,onDismiss:i})}function w(e){return(0,m().EM)({confirmationIcon:{width:30,fill:"green"}})}s(241792);var j=()=>s(304387),M=()=>s(619186),_=()=>s(235605),k=()=>s(568017),C=()=>s(352230),I=()=>s(777064),T=()=>s(148126),P=()=>s(529048),A=()=>s(128119),Z=()=>s(827973),R=()=>s(448419),H=()=>s(291198),D=()=>s(740046),B=()=>s(198829),V=()=>s(255577),N=()=>s(661297),U=()=>s(388284),O=()=>s(67961);const F={name:"United States",countryCode:"1",regionCode:"US"};function L(e){let{isLoading:t,phoneNumber:s,country:o,errorMessage:a,onDismiss:l,onBack:p,onContinue:g}=e;const f=(0,m().yK)(E,[]),h=(0,r().YB)(),[S,y]=(0,i.useState)(s??""),[b,x]=(0,i.useState)([]),[v,w]=(0,i.useState)(""),[k,L]=(0,i.useState)(o??F),K=(0,n().qz)(void 0,P().Z),G=(0,i.useMemo)((()=>(0,j().PG)(k.regionCode)),[k.regionCode]),q=(0,i.useCallback)((e=>{const t=e.target.value.replace(/\D/g,"");y(G.reset(t))}),[G]);(0,i.useEffect)((()=>{y(o!==k?G.reset(S??""):G.reset(s??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),t=(0,j().wJ)();let i=-1;const n=t.map(((t,s)=>{const n=(0,j().t7)(t).toString(),o=e.of(t);return t===k.regionCode&&(i=s),{name:o??t,countryCode:n,regionCode:t}}));-1!==i&&n.unshift(n.splice(i,1)[0]),x(n)}),[k]);const W=(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.addPhoneTitle",defaultMessage:"Add a phone number"}),z=(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.addPhoneHeader",defaultMessage:"Enter your phone number to receive a 2-step verification code."}),Y={text:t?(0,u.jsx)(d().Z,{}):(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.continueButton",defaultMessage:"Continue"}),onClick:()=>g(k,S.trim()),disabled:t||""===S},Q=[{text:(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",defaultMessage:"Need help?"}),href:(0,T().UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],$=h.formatMessage({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",defaultMessage:"Enter phone number"}),J=h.formatMessage({defaultMessage:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),X=e=>(0,u.jsxs)("div",{style:f.countryCodeSelectTitle,children:[e.name,(0,u.jsx)(O().Z,{isSmall:!0,children:`+${e.countryCode}`})]}),ee=(0,u.jsx)(R().ZP,{popupType:R().Z4.Popup,placementToOrigin:A().Iw.Bottom,alignmentToOrigin:A().lU.Start,buttonPopupStore:K,renderOrigin:e=>(0,u.jsx)(N().Z,{...e,children:`+${k.countryCode}`}),render:e=>(0,u.jsx)(B().Z,{menuType:C().o.Popup,minWidth:280,maxHeight:"30vh",header:(0,u.jsx)(U().Z,{isInput:!0,children:(0,u.jsx)(D().ZP,{value:v,onChange:e=>w(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:J})}),children:(0,u.jsx)(V().ZP,{type:V().iW.Vertical,initialFocus:0,sections:[{key:"countries",render:e=>(0,u.jsx)(U().Z,{...e}),items:(0,M().ZP)(v,b,(e=>/\d/.test(v)?`${e.countryCode}`:e.name)).map((t=>({key:t.regionCode,render:e=>(0,u.jsx)(Z().Z,{...e,title:X(t),right:t.name===k.name?(0,_().k)(f.selectedCountryCodeIcon):void 0}),action:()=>{w(""),L(t),e.close()}})))}]})})});return(0,u.jsx)(c().Z,{onDismiss:l,onBack:p,title:W,header:z,errorMessage:a,primaryAction:Y,secondaryActions:Q,children:(0,u.jsxs)("div",{style:f.container,children:[(0,u.jsx)("div",{style:f.countryCodeDropdownMenu,children:ee}),(0,u.jsx)(H().Z,{autoFocus:!0,value:S,placeholder:$,spellCheck:!1,style:f.phoneNumberInput,onChange:q,disabled:t,customElementAttributes:I().pf})]})})}function E(e){return(0,m().EM)({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginRight:5},selectedCountryCodeIcon:{width:15,height:15},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===e.mode?k().ZP.transparent:e.inputBackground}})}var K=()=>s(839116);function G(e){const{smsStateMachine:t,onGoToSettings:s,onDismiss:i,onStartBackupCodes:a}=e,r=(0,n().VK)((()=>t.getCurrentStep()),[t]);switch(r.step){case"smsUninitialized":case"smsVerified":return null;case"smsSendingSMS":case"smsSetPhoneNumber":return(0,u.jsx)(L,{phoneNumber:r.phoneNumber,country:r.country,isLoading:"smsSendingSMS"===r.step,errorMessage:r.error,onDismiss:i,onBack:s,onContinue:(e,s)=>t.smsCreateSMS(e,s)});case"smsVerifyCode":case"smsResendSMS":case"smsBackupCodesLoading":case"smsVerifying":return(0,u.jsx)(K().ZP,{isLoading:"smsVerifying"===r.step||"smsBackupCodesLoading"===r.step,errorMessage:r.error,phoneNumber:`+${r.country.countryCode} ${r.phoneNumber}`,onDismiss:i,onBack:()=>t.smsRestart(),onVerifyCode:e=>t.smsVerifyCode({code:e,onVerified:a}),resentStatus:"smsResendSMS"===r.step?"resending":"resentAt"in r&&void 0!==r.resentAt?"resent":"not-resent",resentAt:"resentAt"in r&&r.resentAt?r.resentAt:0,onResendLink:()=>t.smsResendSMS()});case"smsComplete":return(0,u.jsx)(v,{type:"sms",errorMessage:r.error,onAddMethod:s,onDismiss:i});default:return(0,o().t1)(r)}}var q=()=>s(690970);function W(e){const{totpStateMachine:t,onGoToSettings:s,onStartBackupCodes:i,onDismiss:a}=e,r=(0,n().VK)((()=>t.getCurrentStep()),[t]);switch(r.step){case"totpUninitialized":case"totpVerified":return null;case"totpLoadingQRCode":case"totpBackupCodesLoading":case"totpVerifyCode":return(0,u.jsx)(q().ZP,{isLoading:"totpBackupCodesLoading"===r.step||"totpLoadingQRCode"===r.step,qrCode:"totpVerifyCode"===r.step?r.qrCode:void 0,textCode:"totpVerifyCode"===r.step?r.rawString:void 0,friendlyName:"totpVerifyCode"===r.step?r.friendlyName:void 0,errorMessage:r.error,errorKeys:"totpVerifyCode"===r.step?r.errorKeys:void 0,onDismiss:a,onBack:s,onContinue:(e,s)=>{t.totpVerifyCode({friendlyName:e,code:s,onVerified:i})}});case"totpComplete":return(0,u.jsx)(v,{type:"totp",errorMessage:r.error,onDismiss:a,onAddMethod:s});default:return(0,o().t1)(r)}}function z(e){const{rootStateMachine:t,settingsStateMachine:s,totpStateMachine:r,smsStateMachine:l,backupCodesStateMachine:d,onReloadSettings:c}=e,p=(0,n().VK)((()=>t.getCurrentStep()),[t]),[{showSettings:m,onRootExit:g}]=(0,i.useState)((()=>({onRootExit:()=>t.exit((()=>{s.exit(),r.exit(),l.exit(),d.exit(),c&&c()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{s.settingsConfirmIdentityForSettings()}})}))),f=()=>t.rootCloseSettings((()=>{s.exit(),c&&c()})),h=()=>t.rootStartTOTP((()=>r.totpStart())),S=()=>t.rootStartSMS((()=>l.smsStart())),x=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{r.exit(),s.settingsShow({refresh:!0})}})},v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{l.exit(),s.settingsShow({refresh:!0})}})},w=()=>{d.exit(),t.rootEndBackupCodes({completeTotp:()=>{r.totpComplete()},completeSMS:()=>{l.smsComplete()},showSettings:m})},j=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{r.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{r.totpBackupCodesComplete(),r.totpComplete(),w()}})},M=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{l.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{l.smsBackupCodesComplete(),l.smsComplete(),w()}})},_=()=>{t.rootStartBackupCodesFromSettings((()=>d.backupCodesShowCreate()))},k=(0,n().VK)((()=>s.getCurrentStep()),[s]),C=(0,n().VK)((()=>r.getCurrentStep()),[r]),I=(0,n().VK)((()=>l.getCurrentStep()),[l]),T=(0,n().VK)((()=>d.getCurrentStep()),[d]);let P;switch(p.step){case"rootUninitialized":break;case"rootSettings":P={open:"settingsUninitialized"!==k.step,onDismiss:g,render:()=>(0,u.jsx)(b().Z,{settingsStateMachine:s,onDismiss:f,onStartTOTP:h,onStartSMS:S,onStartBackupCodes:_})};break;case"rootTOTP":P={open:"totpUninitialized"!==C.step,onDismiss:g,render:()=>(0,u.jsx)(W,{totpStateMachine:r,onGoToSettings:x,onStartBackupCodes:j,onDismiss:g})};break;case"rootSMS":P={open:"smsUninitialized"!==I.step,onDismiss:g,render:()=>(0,u.jsx)(G,{smsStateMachine:l,onGoToSettings:v,onStartBackupCodes:M,onDismiss:g})};break;case"rootBackupCodes":P={open:"backupCodesUninitialized"!==T.step,onDismiss:"backupCodesRegenerateCodes"===T.step?g:void 0,render:()=>(0,u.jsx)(y,{backupCodesStateMachine:d,onGoToSettings:w,onDismiss:g})};break;default:throw(0,o().t1)(p)}return P?(0,u.jsx)(a().Z,{...P,preventHideChildrenWhileOpening:!0}):null}},951552:(e,t,s)=>{s.d(t,{Z:()=>Ce});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(696459),r=()=>s(174421),l=()=>s(718959),d=()=>s(846550),c=()=>s(724568),u=()=>s(788860),p=()=>s(707513),m=()=>s(910951),g=()=>s(968001),f=s(785893);function h(e){const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:o}=e,a=(0,d().yK)(S,[]),r=(0,f.jsx)(u()._H,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),l=(0,f.jsx)(u()._H,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you when you use a password with a verification code"}),p=(0,i.useMemo)((()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m().Z,{type:"totp",title:(0,f.jsx)(u()._H,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,f.jsx)(u()._H,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:a.button}),(0,f.jsx)(m().Z,{type:"sms",title:(0,f.jsx)(u()._H,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,f.jsx)(u()._H,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:a.button})]})),[a,n,s]);return(0,f.jsx)(g().Z,{title:r,header:l,children:p,icon:(0,c().j)(a.icon),errorMessage:t,onDismiss:o})}function S(e){return(0,d().EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p().Ue.medium,marginBottom:8},icon:{width:30,height:30,fill:e.regularIconColor}})}var y=()=>s(95886),b=()=>s(312578);function x(e){const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:o,onDeleteMethod:r}=e,l=(0,d().yK)(v,[]),c={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>r(s),isRed:!0},p=[{text:(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,a().t1)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,f.jsx)("span",{style:l.boldText,children:e})}});case"totp":return(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:l.boldText,children:e})}});default:return(0,a().t1)(e)}})(),icon:(0,y().y)(l.crossIcon),primaryAction:c,secondaryActions:p,errorMessage:i,onDismiss:n})}function v(e){return(0,d().EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:p().Ue.semibold}})}s(241792);var w=()=>s(777064),j=()=>s(148126);const M=(0,s(827282).IU)("lockedFilledRedOutlinedWhite",{viewBox:"0 0 11 15",svg:(0,f.jsx)("path",{d:"M2.48352 14.5H8.51649C9.08993 14.5 9.61159 14.3415 9.98454 13.9481C10.3531 13.5594 10.5 13.0215 10.5 12.423V7.8578C10.5 7.33161 10.3876 6.85321 10.1075 6.47956C9.90863 6.21422 9.64758 6.03138 9.34616 5.92009V4.70387C9.34616 3.34493 8.90074 2.28402 8.17081 1.56217C7.44518 0.844569 6.47639 0.5 5.49671 0.5C4.51986 0.5 3.55273 0.844872 2.82813 1.5624C2.09925 2.28417 1.65385 3.34494 1.65385 4.70387V5.9209C1.35431 6.03229 1.09426 6.21478 0.895574 6.47875C0.614816 6.85174 0.5 7.32992 0.5 7.8578V12.423C0.5 13.0215 0.646934 13.5594 1.01546 13.9481C1.38841 14.3415 1.91008 14.5 2.48352 14.5ZM3.7022 4.5581C3.7022 3.8322 3.93059 3.32509 4.24526 3.00203C4.56164 2.67723 5.00162 2.50051 5.49671 2.50051C5.99216 2.50051 6.43618 2.67753 6.75611 3.00343C7.07385 3.3271 7.30439 3.83398 7.30439 4.5581V5.78746H3.7022V4.5581Z",fill:"#E12D2D",stroke:"white"})});var _=()=>s(981583);function k(e){const{userStore:t}=e,s=(0,d().yK)(C,[]);return(0,f.jsxs)("div",{style:s.iconContainer,children:[(0,f.jsx)(_().Z,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,f.jsx)("span",{children:M(s.lockIcon)})]})}function C(){return(0,d().EM)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function I(e){const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:o,errorMessage:r,onClick:l,onDismiss:c}=e,p=(0,d().yK)(T,[]),h=(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),y=[{text:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,j().UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],b=(0,i.useMemo)((()=>(0,w().UG)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,f.jsx)(m().Z,{type:t,title:e.friendlyName,caption:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});case"sms":return(0,f.jsx)(m().Z,{type:t,title:e.phoneNumber,caption:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,f.jsx)(m().Z,{type:t,title:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});default:return(0,a().t1)(t)}}))),[t,l,s,n,p.actionButton]);return(0,f.jsx)(g().Z,{title:h,header:S,errorMessage:r,icon:(0,f.jsx)(k,{userStore:o}),secondaryActions:y,onDismiss:c,children:b})}function T(e){return(0,d().EM)({resendLink:{fontWeight:p().Ue.medium,color:e.blueColor},actionButton:{marginBottom:5}})}var P=()=>s(840196);function A(e){const t=(0,d().yK)(Z,[]),{errorMessage:s,onDismiss:i}=e,n=(0,f.jsx)(u()._H,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),o=(0,f.jsx)(u()._H,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),a=[{text:(0,f.jsx)(u()._H,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:n,header:o,errorMessage:s,icon:(0,P().p)(t.confirmationIcon),secondaryActions:a,onDismiss:i})}function Z(e){return(0,d().EM)({confirmationIcon:{width:30,fill:"green"}})}var R=()=>s(695214);function H(e){const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:o,onCancel:a}=e,r=(0,d().yK)(D,[]),l=(0,f.jsx)(u()._H,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),c={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(u()._H,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,isRed:!0},m=[{text:(0,f.jsx)(u()._H,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:l,header:s?(0,f.jsx)(u()._H,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:{fontWeight:p().Ue.semibold},children:e})}}):(0,f.jsx)(u()._H,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,R().B)(r.crossIcon),primaryAction:c,secondaryActions:m,errorMessage:i,onDismiss:n})}function D(e){return(0,d().EM)({crossIcon:{width:30,fill:"red"}})}s(267602),s(653476);var B=()=>s(146947),V=()=>s(646574),N=()=>s(666414),U=()=>s(67961),O=()=>s(572022),F=()=>s(641772),L=()=>s(519454),E=()=>s(349925),K=()=>s(154186),G=()=>s(827973),q=()=>s(448419),W=()=>s(291198);function z(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,d().yK)(Y,[]),[r,l]=(0,i.useState)(""),c=t.friendlyName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=(0,i.useCallback)((()=>{p(u)?(o({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),l(r)):l(c),s(!n)}),[u,n,s,o,r,c,p,t.mfaMethod,t.mfaSettingId]),g=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||m()}),[m]),h=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,f.jsx)(W().Z,{value:u,maxlength:30,onChange:h,onKeyDown:g,onBlur:m,focus:n,style:a.inputField,inputStyle:a.input}):(0,f.jsx)(U().Z,{children:u})}function Y(){return(0,d().EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...p().Yu}})}var Q=()=>s(352230),$=()=>s(198829),J=()=>s(255577),X=()=>s(388284);function ee(e){const{activeMenuActions:t}=e;return(0,f.jsx)($().Z,{menuType:Q().o.Popup,children:(0,f.jsx)(J().ZP,{type:J().iW.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,f.jsx)(X().Z,{...e}),items:t}],initialFocus:void 0})})}function te(e){const{type:t,title:s,caption:n,setting:o,onDeleteMethod:r,onUpdateMethod:l}=e,c=(0,d().yK)(se,[]),p={totp:(0,O().X)(c.icon),sms:(0,E().u)(c.icon)},[m,g]=(0,i.useState)(!1),h=e=>({key:"deleteMFAMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().y)(c.menuItemIcon)}),action:()=>{r(o),e.close()}}),S=e=>({key:"editMFAMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,L().R)(c.menuItemIcon)}),action:()=>{g(!0),e.close()}});return(0,f.jsxs)("div",{style:c.activeMethodContainer,children:[(0,f.jsxs)("div",{style:c.activeMethodLeftContainer,children:[(0,f.jsx)("div",{style:c.icon,children:p[t]}),(0,f.jsxs)("div",{style:c.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,f.jsx)(U().Z,{children:s});case"totp":return(0,f.jsx)(z,{setting:o,setIsEditing:g,isEditing:m,onUpdateMethod:l});default:return(0,a().t1)(t)}})(),(0,f.jsx)("span",{style:c.activeMethodCaption,children:n})]})]}),(0,f.jsx)(q().ZP,{render:e=>{switch(t){case"sms":return(0,f.jsx)(ee,{activeMenuActions:[h(e)]});case"totp":return(0,f.jsx)(ee,{activeMenuActions:[S(e),h(e)]});default:(0,a().t1)(t)}},alignmentToOrigin:q().vR.Start,renderOrigin:e=>(0,f.jsx)(K().Z,{style:c.menuButton,disabled:m,...e,children:(0,F().o)(c.menuIcon)}),popupType:q().Z4.Popup})]})}function se(e){return(0,d().EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:p().JB.UISmall.desktop,lineHeight:p().Nv.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function ie(e){const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:o,onTurnOffMFA:r,onStartBackupCodes:l,onDismiss:p,onDeleteMethod:h,onUpdateMethod:S}=e,y=(0,d().yK)(ne,[]),b=(0,f.jsx)(u()._H,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),x=(0,f.jsx)(u()._H,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),v=(0,i.useMemo)((()=>(0,w().UG)(t).map((e=>{const{mfaMethod:t}=e,s=(0,V().tv)(e.createdAt,B().locale);switch(t){case"totp":return(0,f.jsx)(te,{type:t,title:e.friendlyName,caption:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:h,onUpdateMethod:S});case"sms":return(0,f.jsx)(te,{type:t,title:`${e.phoneNumber}`,caption:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:h,onUpdateMethod:S});case"backup_code":return;default:(0,a().t1)(t)}}))),[t,h,S]),j=t.filter((e=>"totp"===e.mfaMethod)).length,M=t.filter((e=>"sms"===e.mfaMethod)).length,_=(0,i.useMemo)((()=>[{type:"totp",title:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:j>=2?(0,f.jsx)(u()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,f.jsx)(u()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:j}}),onClick:n,style:y.button,disabled:j>=2},{type:"sms",title:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:M>=2?(0,f.jsx)(u()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,f.jsx)(u()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:M}}),onClick:o,style:y.button,disabled:M>=2},{type:"backup_code",title:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:l,style:y.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,o,l,j,M,y]),k=(0,i.useMemo)((()=>_.map(((e,t)=>(0,i.createElement)(m().Z,{...e,key:t})))),[_]),C=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(U().Z,{style:y.settingsTitle,isSmall:!0,children:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),v,(0,f.jsx)(N().Z,{size:15,isHidden:!0}),(0,f.jsx)(U().Z,{style:y.settingsTitle,isSmall:!0,children:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),k]}),I=[{text:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,type:"button",view:"plain",isRed:!0}];return(0,f.jsx)(g().Z,{title:b,header:x,errorMessage:s,icon:(0,c().j)(y.icon),onDismiss:p,secondaryActions:I,children:C})}function ne(e){return(0,d().EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p().Ue.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var oe=()=>s(642483),ae=()=>s(568017);function re(e){const{isLoading:t,userStore:s,errorMessage:n,onDismiss:o,onVerifyBackupCode:a,onTryAnotherMethod:r}=e,l=(0,d().yK)(le,[]),[c,p]=(0,i.useState)(""),m=(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),h=(0,f.jsx)(u()._H,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),S={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>a(c.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===c},y=[{text:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>r(),disabled:t}];return(0,f.jsx)(g().Z,{title:m,header:h,icon:(0,f.jsx)(k,{userStore:s}),primaryAction:S,secondaryActions:y,errorMessage:n,onDismiss:o,children:(0,f.jsx)(W().Z,{type:"text",value:c,onChange:e=>{p((0,oe().K)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0})})}function le(e){return(0,d().EM)({backupCodeInput:{width:"100%",background:"light"===e.mode?ae().ZP.transparent:e.inputBackground}})}function de(e){const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:a,alertMessage:r,onDismiss:l,onVerifyPassword:c,onForgotPassword:p}=e,m=(0,d().yK)(ce,[]),[h,S]=(0,i.useState)(""),y=(0,o().VK)((()=>null==n?void 0:n.getEmail()),[n]),x=(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>c(h),disabled:t||""===h},w=[{text:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>p(y)}];return(0,f.jsx)(g().Z,{title:x,header:y,icon:(0,f.jsx)(k,{userStore:n}),primaryAction:v,secondaryActions:w,errorMessage:a,alertMessage:r,onDismiss:l,children:(0,f.jsx)(W().Z,{type:"password",value:h,onChange:e=>S(e.target.value),placeholder:"Your password",style:m.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function ce(){return(0,d().EM)({passwordInput:{width:"100%"}})}var ue=()=>s(513670),pe=()=>s(484726),me=()=>s(321429);function ge(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,resentStatus:a,resentAt:r,onDismiss:l,onVerifySMS:d,onResendLink:c,onTryAnotherMethod:p}=e,[m,h]=(0,i.useState)([]),S=(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u()._H,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,f.jsx)(pe().y,{resentAt:r,resentStatus:a,onResendLink:c})]}),x={text:s?(0,f.jsx)(b().Z,{}):(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>d(t.mfaSettingId,m.join("")),disabled:s||"resending"===a||6!==(0,ue().oA)(m).length},v=[{text:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>p(),disabled:s}];return(0,f.jsx)(g().Z,{title:S,header:y,icon:(0,f.jsx)(k,{userStore:n}),primaryAction:x,secondaryActions:v,errorMessage:o,onDismiss:l,children:(0,f.jsx)("div",{children:(0,f.jsx)(me().ZP,{numInputs:6,value:m,format:"settings",disabled:!1,onChange:h,autoFocus:!0,isValidKey:me().rN})})})}function fe(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,onDismiss:a,onVerifyTOTP:r,onTryAnotherMethod:l}=e,c=(0,d().yK)(he,[]),[p,m]=(0,i.useState)([]),h=(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,f.jsx)(u()._H,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:c.boldText,children:e})}}),y={text:s?(0,f.jsx)(b().Z,{}):(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>r({mfaSettingId:t.mfaSettingId,code:p.join("")}),disabled:s||6!==(0,ue().oA)(p).length},x=[{text:(0,f.jsx)(u()._H,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),disabled:s}];return(0,f.jsx)(g().Z,{title:h,header:S,icon:(0,f.jsx)(k,{userStore:n}),primaryAction:y,secondaryActions:x,errorMessage:o,onDismiss:a,children:(0,f.jsx)("div",{children:(0,f.jsx)(me().ZP,{numInputs:6,value:p,format:"settings",disabled:!1,onChange:m,autoFocus:!0,isValidKey:me().rN})})})}function he(e){return(0,d().EM)({boldText:{fontWeight:p().Ue.semibold}})}s(470928);function Se(e){const{passkeys:t,passkeyAuthenticatorIdToDelete:s,onDismiss:i,onCancel:n,onDeleteMethod:o}=e,a=(0,d().yK)(ye,[]),r=t.find((e=>e.id===s));if(!r)return null;const l=(0,f.jsx)(u()._H,{id:"passkey.deleteSetting.title",defaultMessage:"Delete {passkeyName}",values:{passkeyName:r.authenticatorName}}),c=(0,f.jsx)(u()._H,{id:"passkey.deleteSetting.header",defaultMessage:"Once deleted, you will no longer be able to use the passkey saved in {friendlyName}.{newline}<boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:r.authenticatorName,boldtext:e=>(0,f.jsx)("span",{style:a.boldText,children:e}),newline:(0,f.jsx)("br",{})}}),p={text:(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>o(),isRed:!0},m=[{text:(0,f.jsx)(u()._H,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:l,header:c,icon:(0,y().y)(a.crossIcon),primaryAction:p,secondaryActions:m,onDismiss:i})}function ye(e){return(0,d().EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:p().Ue.semibold}})}s(30005);var be=()=>s(261275),xe=()=>s(108450);function ve(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,d().yK)(we,[]),[r,l]=(0,i.useState)(""),c=t.authenticatorName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=()=>{p(u)?(o({passkeyAuthenticatorId:t.id,name:u}),l(u)):l(c),s(!n)},g=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,f.jsx)(W().Z,{value:u,maxlength:30,onChange:g,onKeyDown:e=>{"Enter"!==e.key&&"Escape"!==e.key||m()},onBlur:m,focus:n,style:a.inputField,inputStyle:a.input}):(0,f.jsx)(U().Z,{children:u})}function we(){return(0,d().EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...p().Yu}})}function je(e){const{caption:t,setting:s,onDeleteMethod:n,onUpdateMethod:o,isEditing:a}=e,r=(0,d().yK)(Me,[]),[l,c]=(0,i.useState)(a),p=e=>({key:"deletePasskeyMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(u()._H,{id:"mfa.updatePasskeySettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().y)(r.menuItemIcon)}),action:()=>{n({passkeyAuthenticatorId:s.id}),e.close()}}),m=e=>({key:"editPasskeyMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(u()._H,{id:"mfa.updatePasskeySettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Rename passkey"}),icon:(0,L().R)(r.menuItemIcon)}),action:()=>{c(!0),e.close()}});return(0,f.jsxs)("div",{style:r.activeMethodContainer,children:[(0,f.jsxs)("div",{style:r.activeMethodLeftContainer,children:[(0,f.jsx)("div",{style:r.icon,children:(0,xe().r)(r.icon)}),(0,f.jsxs)("div",{style:r.activeMethodText,children:[(0,f.jsx)(ve,{setting:s,setIsEditing:c,isEditing:l,onUpdateMethod:o}),(0,f.jsx)("span",{style:r.activeMethodCaption,children:t})]})]}),(0,f.jsx)(q().ZP,{render:e=>(0,f.jsx)(ee,{activeMenuActions:[m(e),p(e)]}),alignmentToOrigin:q().vR.Start,renderOrigin:e=>(0,f.jsx)(K().Z,{style:r.menuButton,disabled:l,...e,children:(0,F().o)(r.menuIcon)}),popupType:q().Z4.Popup})]})}function Me(e){return(0,d().EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:p().JB.UISmall.desktop,lineHeight:p().Nv.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17}})}function _e(e){const{passkeySettings:t,errorMessage:s,onDismiss:i,onAddMethod:n,onDeleteMethod:o,onUpdateMethod:a,shouldNameNewSetting:r}=e,l=(0,d().yK)(ke,[]);let p;return null==t||t.forEach((e=>{var t;(!p||e.createdAt>(null===(t=p)||void 0===t?void 0:t.createdAt))&&(p=e)})),(0,f.jsxs)(g().Z,{title:"Passkey Settings",header:"Use your device's built-in security features like Face ID to sign in instead of remembering passwords.",errorMessage:s,icon:(0,c().j)(l.icon),onDismiss:i,children:[t.length<5&&(0,f.jsx)(be().Z,{title:"Add new passkey",onClick:n}),(0,f.jsx)(N().Z,{size:15,isHidden:!0}),t.length>0&&(0,f.jsx)(U().Z,{style:l.settingsTitle,isSmall:!0,children:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),t.map(((e,t)=>{var s;const i=(0,V().tv)(e.createdAt,B().locale);return(0,f.jsx)(je,{caption:(0,f.jsx)(u()._H,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:i}}),setting:e,onDeleteMethod:o,onUpdateMethod:a,isEditing:r&&e.id===(null===(s=p)||void 0===s?void 0:s.id)},e.id)}))]})}function ke(e){return(0,d().EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p().Ue.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}function Ce(e){const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c}=e,u=(0,n().O7)(),p=(0,n().Fy)(),m=(0,o().VK)((()=>(0,l().B7)(u)),[u]),g=(0,o().VK)((()=>t.getCurrentStep()),[t]);switch(g.step){case"settingsUninitialized":case"settingsPasskeyLoadSettings":case"settingsLoadSettings":return null;case"settingsVerifyWithPassword":return(0,f.jsx)(de,{isLoading:g.isLoading,isForgotPasswordLoading:g.isForgotPasswordLoading,userStore:m,errorMessage:g.error,alertMessage:g.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,f.jsx)(I,{isSMSLoading:g.isSMSLoading,chosenMfaSettingId:g.chosenMfaSettingId,mfaSettings:g.mfaSettings,userStore:m,errorMessage:g.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,f.jsx)(fe,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,f.jsx)(ge,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,resentAt:g.resentAt,resentStatus:g.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(g.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,f.jsx)(re,{isLoading:g.isLoading,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsInitialSetup":return(0,f.jsx)(h,{errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onDismiss:s});case"settingsShowSettings":const e=g.mfaSettings;return(0,f.jsx)(ie,{mfaSettings:e,errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsPasskeyShowSettings":case"settingsPasskeyNameNewSetting":return(0,f.jsx)(_e,{passkeySettings:g.passkeys,errorMessage:g.error,onDismiss:s,onAddMethod:()=>p.isElectron?r().Ud(u):t.settingsPasskeyAddSetting(u),onDeleteMethod:e=>t.settingsConfirmDeletePasskeySetting(e),onUpdateMethod:e=>t.settingsPasskeyRenameSetting(e),shouldNameNewSetting:"settingsPasskeyNameNewSetting"===g.step});case"settingsDeletePasskeySetting":return(0,f.jsx)(Se,{passkeys:g.passkeys,passkeyAuthenticatorIdToDelete:g.passkeyAuthenticatorIdToDelete,onDismiss:s,onCancel:()=>t.passkeySettingsShow(),onDeleteMethod:()=>t.settingsDeletePasskeySetting()});case"settingsDeleteSettings":return(0,f.jsx)(x,{isLoading:g.isLoading,mfaSetting:g.mfaSettingToDelete,errorMessage:g.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===g.step&&"disableMFA"===g.source;return"settingsDisableMFA"===g.step||n?(0,f.jsx)(H,{isLoading:n,lastMFASetting:g.lastMFASetting,errorMessage:g.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===g.source?(0,f.jsx)(A,{errorMessage:g.error,onDismiss:s}):null;default:return(0,a().t1)(g)}}},435669:(e,t,s)=>{s.d(t,{o:()=>n,y:()=>i});s(241792);class i extends(()=>s(263184))().default{getInitialState(){return{step:"backupCodesUninitialized"}}}class n extends(()=>s(361351))().o{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this.checkStep("backupCodesUninitialized"))return;const{onLoadingComplete:t,onComplete:s}=e;this.store.setState({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,onComplete:s,onLoadingComplete:t}).catch(this.handleUnexpectedError)}backupCodesShowCreate(){this.checkStep("backupCodesUninitialized")&&this.store.setState({step:"backupCodesRegenerateCodes"})}backupCodesRegenerateCodes(){this.checkStep("backupCodesRegenerateCodes")&&(this.store.setState({step:"backupCodesRegenerateCodes",isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,onComplete:()=>{},onLoadingComplete:()=>{}}).catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"backupCodesUninitialized"})}async doCreateBackupCodes(e){const{forceRecreate:t,onComplete:i,onLoadingComplete:n}=e,o=await this.withStep(["backupCodesLoading","backupCodesRegenerateCodes"],(()=>this.service.createBackupCodes(t)));if(!o)return;const{result:a}=o;if("already-exists"===a.status)i();else{const e=function(e){const t=s(527278).Z.getIntl(),i=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.title",defaultMessage:"Notion Backup Codes"}),n=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.createdAt",defaultMessage:"Created at {createdAt}"},{createdAt:`${new Date}`}),o=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.warningMessage",defaultMessage:"Please store these in a secure location and mark off codes as they are used."}),a=`${i}\n${n}\n\n${e.map(s(642483).K).join("\n")}\n\n${o}\n`;return encodeURIComponent(a)}(a.backupCodes);this.store.setState({step:"backupCodesShowCodes",backupCodes:a.backupCodes,mfaSettingId:a.mfaSettingId,backupCodesFile:e}),n()}}}},261275:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(667294),n=()=>s(846550),o=()=>s(108450),a=()=>s(661297),r=()=>s(67961),l=s(785893);function d(e){const{title:t,onClick:s}=e,[d,c]=(0,i.useState)(!1),u=(0,i.useCallback)((()=>c(!0)),[c]),p=(0,i.useCallback)((()=>c(!1)),[c]),m=(0,n().yK)((e=>({button:{width:"100%",justifyContent:"left",padding:"10px 16px",alignItems:"start",height:"auto"},buttonLoading:{width:"100%",height:59},buttonInner:{minWidth:0},icon:{width:20,height:20,marginRight:10,fill:d?e.blueColor:e.regularIconColor}})),[d]),g=(0,o().r)(m.icon);return(0,l.jsxs)(a().Z,{style:m.button,onClick:s,onMouseEnter:u,onMouseLeave:p,hovered:d,children:[(0,l.jsx)("div",{style:m.icon,children:g}),(0,l.jsx)("div",{style:m.buttonInner,children:(0,l.jsx)(r().Z,{children:t})})]})}},359792:(e,t,s)=>{s.d(t,{M:()=>i,i:()=>n});class i extends(()=>s(263184))().default{getInitialState(){return{step:"rootUninitialized"}}}class n extends(()=>s(361351))().o{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:s}=e;if(this.checkStep("rootSettings")){if(!t)return}else this.store.setState({step:"rootSettings"});s()}rootStartBackupCodesFromSettings(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootBackupCodes",source:"settings"}),e())}rootStartTOTP(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this.checkStep("rootTOTP")&&this.store.setState({step:"rootBackupCodes",source:"totp"})}rootStartSMS(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this.checkStep("rootSMS")&&this.store.setState({step:"rootBackupCodes",source:"sms"})}rootEndBackupCodes(e){const t=this.checkStep("rootBackupCodes");if(t)switch(t.source){case"settings":return this.store.setState({step:"rootSettings"}),e.showSettings();case"sms":return this.store.setState({step:"rootSMS"}),e.completeSMS();case"totp":return this.store.setState({step:"rootTOTP"}),e.completeTotp();default:(0,s(696459).t1)(t.source)}}rootCloseSettings(e){e(),this.store.setState({step:"rootUninitialized"})}exit(e){this.store.setState({step:"rootUninitialized"}),e()}}},323143:(e,t,s)=>{s.d(t,{W:()=>d,c:()=>l});s(267602),s(653476),s(470928);var i=()=>s(632314),n=()=>s(696459),o=()=>s(363127),a=()=>s(516709);const r={settingsVerifyWithPassword:a().Qj.incorrectPassword,settingsVerifyWithSMS:a().Qj.smsIncorrectCode,settingsVerifyWithTOTP:a().Qj.totpIncorrectCode,settingsVerifyWithBackupCode:a().Qj.backupCodeIncorrectCode};class l extends(()=>s(263184))().default{getInitialState(){return{step:"settingsUninitialized"}}}class d extends(()=>s(361351))().o{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,n().t1)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}passkeySettingsShow(){this.store.setState({step:"settingsPasskeyLoadSettings"}),this.doLoadPasskeySettings({nameNewSetting:!1}).catch(this.handleUnexpectedError)}settingsPasskeyAddSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doCreatePasskeySetting(e).catch(this.handleUnexpectedError)}settingsPasskeyRenameSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doRenamePasskeySetting(e).catch(this.handleUnexpectedError)}settingsDeletePasskeySetting(){const e=this.checkStep("settingsDeletePasskeySetting");e&&this.doDeletePasskeySetting({passkeyAuthenticatorId:e.passkeyAuthenticatorIdToDelete}).catch(this.handleUnexpectedError)}settingsConfirmDeletePasskeySetting(e){const t=this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]);t&&this.store.setState({passkeys:t.passkeys,step:"settingsDeletePasskeySetting",passkeyAuthenticatorIdToDelete:e.passkeyAuthenticatorId})}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));const s=t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod));1===s.length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().default.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().t1)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,n().t1)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:a().Qj.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:a().to.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:a().Qj.unexpectedError});break;default:return(0,n().t1)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:a().Qj.unexpectedError});break;default:return(0,n().t1)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().default.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().t1)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:r[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:a().Qj.unexpectedError});break;default:return(0,n().t1)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:a().Qj.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,n().t1)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:o}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:o.source});break;case"error":break;default:return(0,n().t1)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const n=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!n)return;const{result:o,state:r}=n;"saved"===o.status?o.settings.length>0&&!(0,i().Z)(o,r.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...r,error:void 0}):this.store.setState({...r,error:"duplicate"===o.status?a().Qj.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?a().Qj.totpBadFriendlyName:a().Qj.totpEmptyFriendlyName})}async doLoadPasskeySettings(e){let{nameNewSetting:t=!1}=e;const s=await this.withStep(["settingsPasskeyLoadSettings","settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.loadPasskeySettings()));if(!s)return;const{result:i,state:n}=s;this.store.setState({...n,step:t?"settingsPasskeyNameNewSetting":"settingsPasskeyShowSettings",passkeys:i.settings})}async doCreatePasskeySetting(e){const t=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.createPasskeySetting(e)));if(!t)return;const{result:s,state:i}=t;!0===s.created?await this.doLoadPasskeySettings({nameNewSetting:!0}):this.store.setState({...i,error:a().Qj.unableToSavePasskey})}async doRenamePasskeySetting(e){const{passkeyAuthenticatorId:t,name:s}=e,n=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.renamePasskeySetting({passkeyAuthenticatorId:t,name:s})));if(!n)return;const{result:o,state:a}=n;o.settings.length>0&&!(0,i().Z)(o.settings,a.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:o.settings}):this.store.setState({...a,error:void 0})}async doDeletePasskeySetting(e){const t=await this.withStep("settingsDeletePasskeySetting",(()=>this.service.deletePasskeySetting(e)));if(!t)return;const{result:s,state:n}=t;s.settings.length>=0&&!(0,i().Z)(s.settings,n.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:s.settings}):this.store.setState({...n,error:void 0})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,n().t1)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},317493:(e,t,s)=>{s.d(t,{F:()=>a,J:()=>o});var i=()=>s(696459),n=()=>s(516709);class o extends(()=>s(263184))().default{getInitialState(){return{step:"smsUninitialized"}}}class a extends(()=>s(361351))().o{constructor(e,t){super(e,"sms"),this.service=void 0,this.service=t}smsStart(){this.checkStep("smsUninitialized")&&this.store.setState({step:"smsSetPhoneNumber"})}smsRestart(){const e=this.checkStep(["smsResendSMS","smsVerifyCode","smsVerifying"]);e&&this.store.setState({step:"smsSetPhoneNumber",country:e.country,phoneNumber:e.phoneNumber,error:void 0})}smsCreateSMS(e,t){this.checkStep("smsSetPhoneNumber")&&(this.store.setState({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this.handleUnexpectedError))}smsResendSMS(){const e=this.checkStep(["smsVerifyCode","smsVerifying"]);e&&(this.store.setState({...e,step:"smsResendSMS",error:void 0}),this.doResendSMS().catch(this.handleUnexpectedError))}smsVerifyCode(e){const{code:t,onVerified:s}=e,i=this.checkStep("smsVerifyCode");i&&(this.store.setState({...i,step:"smsVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:s}).catch(this.handleUnexpectedError))}smsBackupCodesComplete(){this.checkStep("smsBackupCodesLoading")&&this.store.setState({step:"smsVerified"})}smsComplete(){this.checkStep("smsVerified")&&this.store.setState({step:"smsComplete"})}exit(){this.store.setState({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this.service.createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"created":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:t.mfaSettingId,error:void 0});break;case"already_verified_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsAlreadyVerifiedPhoneNumber});break;case"invalid_country_code":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsInvalidCountryCode});break;case"invalid_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsInvalidPhoneCode});break;case"sms_unsupported_country_code_for_enrollment":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsUnsupportedCountryCodeForEnrollment});break;default:return(0,i().t1)(t)}}async doVerifyCode(e){const{code:t,onVerified:s}=e,o=await this.withStep("smsVerifying",(e=>this.service.verifySMS({mfaSettingId:e.mfaSettingId,code:t})));if(!o)return;const{result:a,state:r}=o;switch(a.status){case"match":this.store.setState({step:"smsBackupCodesLoading",country:r.country,phoneNumber:r.phoneNumber}),s();break;case"error":this.store.setState({...r,step:"smsVerifyCode",error:n().Qj.unexpectedError});break;case"incorrect":this.store.setState({...r,step:"smsVerifyCode",error:n().Qj.smsIncorrectCode});break;default:return(0,i().t1)(a.status)}}async doResendSMS(){const e=await this.withStep("smsResendSMS",(e=>this.service.sendSMS({mfaSettingId:e.mfaSettingId})));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"ok":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:void 0,resentAt:Date.now()});break;case"error":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:n().Qj.unexpectedError});break;default:return(0,i().t1)(t.status)}}}},275678:(e,t,s)=>{s.d(t,{V:()=>n,o:()=>i});s(670560);class i extends(()=>s(263184))().default{getInitialState(){return{step:"totpUninitialized"}}}class n extends(()=>s(361351))().o{constructor(e,t){super(e,"totp"),this.service=void 0,this.service=t}totpStart(){this.checkStep("totpUninitialized")&&(this.store.setState({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this.handleUnexpectedError))}totpVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e;this.doRenameTOTPAndVerifyCode({friendlyName:t,code:s,onVerified:i}).catch(this.handleUnexpectedError)}totpBackupCodesComplete(){this.checkStep("totpBackupCodesLoading")&&this.store.setState({step:"totpVerified"})}totpComplete(){this.checkStep("totpVerified")&&this.store.setState({step:"totpComplete"})}exit(){this.store.setState({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this.service.createTOTP()));if(!e)return;const{result:t}=e;this.store.setState({step:"totpVerifyCode",qrCode:t.qrCode,rawString:t.secret,mfaSettingId:t.mfaSettingId})}async doRenameTOTPAndVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e,n=await this.withStep(["totpVerifyCode"],(e=>this.service.renameSettings({mfaSettingId:e.mfaSettingId,friendlyName:t}))),o=await this.withStep("totpVerifyCode",(e=>this.service.verifyTOTP({mfaSettingId:e.mfaSettingId,code:s})));if(!n||!o)return;const{result:a,state:r}=n,{result:l}=o;if("saved"===a.status&&"match"===l.status)this.store.setState({step:"totpBackupCodesLoading"}),i();else{const e=[];switch(a.status){case"duplicate":e.push("totpDuplicateFriendlyName");break;case"empty":e.push("totpEmptyFriendlyName");break;case"bad_friendly_name":e.push("totpBadFriendlyName")}switch(l.status){case"error":e.push("unexpectedError");break;case"incorrect":e.push("totpIncorrectCode")}this.store.setState({...r,step:"totpVerifyCode",errorKeys:e})}}}},872423:(e,t,s)=>{s.d(t,{ms:()=>ue,Xr:()=>pe,dy:()=>ce,ZP:()=>de});s(267602),s(653476);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(890598),l=()=>s(788860),d=()=>s(707513),c=()=>s(897373),u=()=>s(269299),p=()=>s(104822),m=()=>s(223160),g=()=>s(91502),f=()=>s(876822),h=()=>s(812376),S=()=>s(965014),y=()=>s(188296),b=()=>s(471645),x=()=>s(67961),v=()=>s(868614),w=()=>s(253664),j=(s(241792),()=>s(819792)),M=()=>s(378907),_=(s(470928),()=>s(646574)),k=()=>s(874459),C=()=>s(446866),I=()=>s(998411),T=()=>s(440424),P=()=>s(374289),A=()=>s(429600),Z=()=>s(513670),R=()=>s(696459),H=()=>s(509417),D=()=>s(102182),B=()=>s(998901),V=()=>s(826955),N=()=>s(154186),U=()=>s(265640),O=()=>s(661297),F=()=>s(654133),L=()=>s(239444),E=()=>s(981583),K=()=>s(506347),G=()=>s(528514),q=()=>s(396136),W=()=>s(497065),z=()=>s(429725),Y=()=>s(729775),Q=()=>s(943620),$=()=>s(384241),J=s(785893);function X(e){const{pageAndRole:t,environment:s,intl:i}=e,n=(0,a().yK)((e=>({title:{marginLeft:2},role:{marginLeft:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),r=(0,o().VK)((()=>new(V().G)(s,{table:q().iU,id:t.id})),[s,t.id]),l=(0,o().VK)((()=>{var e;return null===(e=r.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:r.getRecordModel})}),[r]),d=(0,o().VK)((()=>(0,z().ZP)({store:r,pageVisitSource:K().tY.LinkInPage})),[r]);return(0,J.jsxs)(Y().Z,{style:n.linkContainer,onClick:()=>{W().c4({environment:s,url:d,openInNew:"tab"})},children:[(0,J.jsx)(Q().Z,{icon:l,size:16,isEmptyPage:!1,disabled:!0}),(0,J.jsx)("b",{children:(0,J.jsx)($().Z,{style:n.title,store:r})}),(0,J.jsx)(x().Z,{style:n.role,isSecondaryColor:!0,children:`(${i.formatMessage((0,G().kD)(t.role,q().iU)).toLocaleLowerCase()})`})]})}function ee(e){const{store:t,request:s}=e,{forActor:r,accessRequest:d,createdByActorsWithReason:c}=s,u=(0,n().O7)(),p=(0,a().yK)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginLeft:10,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},requestBody:{marginLeft:38,marginTop:8}})),[]),m=(0,l().YB)(),g=(0,o().VK)((()=>r.__IM_SORRY__getValue()),[r]),f=(0,o().VK)((()=>(0,Z().mN)(c.map((e=>{let{actor:t}=e;return t})),(e=>e.id))),[c]),h=(0,o().VK)((()=>d.getType()),[d]),S=(0,o().VK)((()=>s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map((e=>`${e.actor.getDisplayName(m)} · ${e.reason}`))),[s,m]),y=(0,o().VK)((()=>{var e;return d.isGuestInviteRequest()?null===(e=d.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[d]),b=(0,o().VK)((()=>{if(!d.isGuestInviteRequest())return;const e=(0,C().H3)(r.email),s=e&&(0,C().Gd)(e);return s?t.getEmailDomains().find((e=>e===s)):void 0}),[d,r,t]),v=(0,o().VK)((()=>d.created_time),[d]),w=(0,i.useCallback)((async()=>{if(d.isGuestInviteRequest()){(await H().mY({environment:u,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?D().oV({label:(0,J.jsx)(l()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:r.email}})}):D().oV({label:(0,J.jsx)(l()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:r.email}})})}else if(d.isSpaceMembershipRequest()){(await H().YN({environment:u,store:t,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?D().oV({label:(0,J.jsx)(l()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:r.email}})}):D().oV({label:(0,J.jsx)(l()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:r.email}})})}}),[d,u,r,t]),j=(0,i.useCallback)((()=>{d.isGuestInviteRequest()?H().mY({environment:u,requests:[d],status:"rejected",from:"requests_center"}):d.isSpaceMembershipRequest()&&H().YN({environment:u,store:t,requests:[d],status:"rejected",from:"requests_center"})}),[d,u,t]);if(!(s&&r&&g&&c.length))return null;const M=k().CQ(v,(0,I().r)()),T=(0,_().ZV)({value:M,date_format:"relative",userTimeZone:(0,I().r)(),intl:m,allowRelativeDates:!0}),P=S.length>0||(0,R().$K)(y);return(0,J.jsxs)("div",{style:{width:"100%"},children:[(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,J.jsx)(ne,{forActor:g,type:h}),(0,J.jsxs)("div",{style:p.requestMetadata,children:[(0,J.jsx)(ie,{type:h,forActor:g}),(0,J.jsxs)(x().Z,{isSmall:!0,children:[(0,J.jsx)(F().Z,{renderTooltip:()=>(0,J.jsxs)("div",{style:p.tooltip,children:[(0,J.jsx)(x().Z,{style:p.tooltipHeader,children:(0,J.jsx)(l()._H,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),f.map((e=>(0,J.jsx)(ae,{actor:e},e.id)))]}),render:e=>(0,J.jsx)("span",{...e,children:(0,J.jsx)(oe,{request:s,createdByActors:f})})})," · ",T]})]})]}),(0,J.jsxs)("div",{style:p.actionButtons,children:[(0,J.jsx)(U().D,{isGray:!0,onClick:j,children:(0,J.jsx)(l()._H,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,J.jsx)(F().Z,{render:e=>(0,J.jsx)(O().Z,{color:"uiBlue",onClick:w,...e,children:(0,J.jsx)(l()._H,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,J.jsx)("div",{style:{width:300},children:(0,J.jsx)(l()._H,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:b}})}),disableTooltip:!b,textWrap:!0,placement:B().Placement.Bottom})]})]}),P&&(0,J.jsxs)("div",{style:p.requestBody,children:[y&&(0,J.jsx)(X,{pageAndRole:y,environment:u,intl:m}),S.length>0&&(0,J.jsx)(se,{reasonMessages:S})]})]})}function te(e){return(0,J.jsx)("b",{children:e})}function se(e){const{reasonMessages:t}=e,[s,n]=(0,i.useState)(!1),o=(0,a().yK)((e=>({viewReasonsToggle:{paddingLeft:2,paddingRight:2,borderRadius:2,display:"inline-flex",alignItems:"center"},viewReasonsCaratIcon:{marginLeft:2,width:12,height:12,color:e.accentColors.gray[500]},reasonMessageBody:{marginTop:2}})),[]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(N().Z,{style:o.viewReasonsToggle,onClick:()=>n(!s),children:[(0,J.jsx)(x().Z,{isSmall:!0,children:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,P().i)(o.viewReasonsCaratIcon):(0,A().o)(o.viewReasonsCaratIcon)]}),s&&(0,J.jsx)("div",{style:o.reasonMessageBody,children:t.map(((e,t)=>(0,J.jsx)("div",{children:e},t)))})]})}function ie(e){const{forActor:t,type:s}=e,i=(0,a().yK)((e=>({title:{display:"flex",gap:4},semibold:{fontWeight:d().Ue.semibold}})),[]),n="guest_invite_request"===s?(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,J.jsx)("span",{style:i.semibold,children:t.email})}}):(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,J.jsx)("span",{style:i.semibold,children:t.email})}});return(0,J.jsx)("div",{style:i.title,children:(0,J.jsx)(x().Z,{className:"notranslate",children:n})})}function ne(e){const{type:t,forActor:s}=e,i=(0,a().yK)((e=>({avatarWrapper:{borderRadius:"100%",background:e.accentColors.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"},addPersonIcon:{width:18,height:18,color:e.accentColors.gray[500]}})),[]);return"guest_invite_request"===t?(0,J.jsx)("div",{style:i.avatarWrapper,children:(0,T().a)(i.addPersonIcon)}):(0,J.jsx)(E().Z,{userValue:s,size:28,borderStyle:"dashed"})}function oe(e){const{createdByActors:t,request:s}=e,i=(0,l().YB)(),n=(0,o().VK)((()=>t.filter((e=>e.email!==s.forActor.email))),[s,t]),a=(0,o().VK)((()=>{var e;return null===(e=t[0])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),r=(0,o().VK)((()=>{var e;return null===(e=t[1])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),d=(0,o().VK)((()=>{var e;return null===(e=n[0])||void 0===e?void 0:e.getDisplayName(i)}),[n,i]),c=n.length!==t.length;return 1===t.length?c?(0,J.jsx)(l()._H,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,J.jsx)(l()._H,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:a,b:te}}):c?(0,J.jsx)(l()._H,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:d,numberOfOtherActors:n.length,b:te}}):(0,J.jsx)(l()._H,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:a,secondActorName:r,numberOfOtherActors:t.length-1}})}function ae(e){let{actor:t}=e;const s=(0,n().O7)(),i=(0,a().yK)((()=>({component:{display:"flex",justifyContent:"space-between",marginBottom:4},email:{marginLeft:5}})),[]),r=(0,o().VK)((()=>t.email),[t]),l=new(V().U6)(s,t.pointer);return(0,J.jsxs)("div",{style:i.component,children:[(0,J.jsx)(L().Z,{avatarSize:18,userStore:l}),(0,J.jsx)("div",{style:i.email,children:r})]},t.id)}function re(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,o().VK)((()=>s.filter((e=>"pending"===e.accessRequest.status)).sort(((e,t)=>t.accessRequest.created_time-e.accessRequest.created_time))),[s]),d=(0,a().yK)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:4},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[]),c={key:"request",header:void 0,style:d.requestColumn};return 0===n.length?(0,J.jsxs)("div",{style:d.zeroStateContainer,children:[(0,r().h)(d.mailIcon),(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,J.jsx)(M().Z,{hideHeader:!0,columns:[c],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,J.jsx)(le,{request:e,lastOpenedRequestCenterTime:i,spaceStore:t},e.accessRequest.id)]})))})}function le(e){let{request:t,lastOpenedRequestCenterTime:s,spaceStore:i}=e;const n=(0,o().VK)((()=>s<t.accessRequest.created_time),[s,t.accessRequest]);return(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[n&&(0,J.jsx)("div",{style:{marginLeft:-18,marginRight:10},children:(0,J.jsx)(j().z,{size:8})}),(0,J.jsx)(ee,{store:i,request:t})]},t.accessRequest.id)}function de(e){const{spaceStore:t,accessRequestRenderValues:s}=e,c=(0,n().O7)(),[p,m]=(0,i.useState)(Date.now()),g=(0,o().qz)(void 0,h().Z),S=(0,o().VK)((()=>g.getValueForSpace(t)),[t,g]),y=(0,o().VK)((()=>s?s.filter((e=>"pending"===e.accessRequest.status)).length:0),[s]),b=(0,o().VK)((()=>t.canAdmin()),[t]),x=(0,a().yK)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor},settingHeader:{fontSize:16,fontWeight:d().Ue.medium},requestCount:{color:e.lightTextColor}})),[]);(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=f().default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&m(t),u().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:c,canUndo:!0,perform:t=>{u().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);const j=(0,i.useCallback)((()=>b?null:(0,J.jsx)(ge,{securitySettingsStoreState:S,spaceStore:t,environment:c,isReadOnly:!0})),[c,b,S,t]);return s?(0,J.jsxs)(J.Fragment,{children:[b?(0,J.jsx)(w().Z,{icon:r().h,title:(0,J.jsx)(l()._H,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,J.jsx)("span",{style:{fontWeight:d().Ue.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,j(),(0,J.jsxs)(v().Z,{divider:"none",large:!0,style:x.settingHeader,children:[(0,J.jsx)(l()._H,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,J.jsx)("span",{children:" "}),(0,J.jsx)("span",{style:x.requestCount,children:y>0?y:void 0})]}),(0,J.jsx)(re,{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:p})]}):(0,J.jsx)("div",{style:x.errorContainer,children:(0,J.jsx)(fe,{})})}function ce(e){return(0,J.jsx)(me,{...e,title:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),description:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})})}function ue(e){return(0,J.jsx)(me,{...e,title:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),description:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})})}function pe(e){return(0,J.jsx)(me,{...e,title:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),description:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})})}function me(e){const{toggleOn:t,shouldShowUpsell:s,onClick:n,style:o,upsellOrigin:r,environment:d,description:c,title:u,isReadOnly:p,isControlledByOrganization:g}=e,f=(0,a().yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:p?"auto":"pointer",marginBottom:14,...o},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[o,p]),h=(0,i.useCallback)((()=>{p||g||(s?S().y(d,{from:r,upsell:{type:"product",product:"plus",limit:{type:"none"}}}):n())}),[d,r,p,s,n,g]);return(0,J.jsxs)("div",{style:f.toggleContainer,onClick:h,children:[(0,J.jsxs)("div",{style:f.titleDescription,children:[u,s?(0,J.jsx)(y().Z,{subscriptionTier:"plus",analyticsName:r,onClick:()=>S().y(d,{from:r,upsell:{type:"product",product:"plus",limit:{type:"none"}}}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}):null,(0,J.jsx)(x().Z,{isSmall:!0,isMultiline:!0,style:f.description,children:c})]}),p?(0,J.jsx)(x().Z,{isSmall:!0,children:(0,J.jsx)(l()._H,{id:"spaceSettingsRequests.readOnlyState.label",defaultMessage:"{isEnabled, select, true {Enabled} other {Disabled}}",values:{isEnabled:t}})}):(0,J.jsx)(b().Z,{on:t,disabled:s,isLocked:g,lockedTooltip:(0,m().g)()})]})}function ge(e){const{securitySettingsStoreState:t,spaceStore:s,environment:n,isReadOnly:a}=e,r=Boolean(null==t?void 0:t.disableMembershipRequests),l=Boolean(null==t?void 0:t.disableExternalMembershipRequests),d=Boolean(null==t?void 0:t.disableGuestMembershipRequests),u=(0,o().VK)((()=>(0,p().U)(s,n)),[n,s]),m=(0,o().VK)((()=>(0,g().bq)()),[]),f=(0,i.useCallback)((()=>{t&&c().n(n,{securitySettingsState:{...t,disableMembershipRequests:!t.disableMembershipRequests},spaceStore:s})}),[n,t,s]),h=(0,i.useCallback)((()=>{t&&c().n(n,{securitySettingsState:{...t,disableExternalMembershipRequests:!t.disableExternalMembershipRequests},spaceStore:s})}),[n,t,s]),S=(0,i.useCallback)((()=>{t&&c().n(n,{securitySettingsState:{...t,disableGuestMembershipRequests:!t.disableGuestMembershipRequests},spaceStore:s})}),[n,t,s]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(ce,{environment:n,upsellOrigin:"members_settings",toggleOn:!r,shouldShowUpsell:!1,isReadOnly:a,onClick:f}),m&&(0,J.jsx)(ue,{environment:n,upsellOrigin:"members_settings",toggleOn:!l,shouldShowUpsell:!1,isReadOnly:a,onClick:h}),u&&(0,J.jsx)(pe,{environment:n,upsellOrigin:"members_settings",toggleOn:!d,shouldShowUpsell:!1,isReadOnly:a,onClick:S})]})}function fe(){return(0,J.jsx)(l()._H,{defaultMessage:"Something went wrong.",id:"spaceSettingsRequests.unknownErrorMessage"})}},35724:(e,t,s)=>{s.d(t,{F:()=>g});s(667294);var i=()=>s(846550),n=()=>s(73363),o=()=>s(788860),a=()=>s(212493),r=()=>s(265640),l=()=>s(108714),d=()=>s(603692),c=()=>s(661641),u=()=>s(654133),p=()=>s(251932),m=s(785893);function g(e){let{quantityOfPaidSeats:t,quantityOfSpaceMembers:s,nextBillingDate:n}=e;const a=(0,i().yK)((e=>({container:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),r=t-s,l=r<0?(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.seatsTooltipText.gracePeriod",defaultMessage:"At the end of this billing period, you'll be automatically charged for {difference, plural, one {# new seat} other {# new seats}} (since your current billing period is only for {difference, plural, one {# seat} other {# seats}}). Please ensure that the member list is up-to-date.",values:{difference:Math.abs(r),seats:t}}):r>0?(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.seatsTooltipText.remainingSeats",defaultMessage:"You can invite {remainingSeats, plural, one {# more member} other {# more members}} without an additional charge, since you've already paid for those seats this billing period. You can also purchase more seats.",values:{remainingSeats:r}}):(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.seatsTooltipText.noSeats",defaultMessage:"All seats are currently filled"});return(0,m.jsxs)("div",{style:a.container,children:[(0,m.jsx)(f,{title:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.title.paidSeatsTitle",defaultMessage:"Paid seats"}),titleTooltipContent:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.paidSeatsTooltip",defaultMessage:"The number of paid seats in your workspace"}),body:t}),(0,m.jsx)(f,{title:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.title.currentMembersTitle",defaultMessage:"Current members"}),titleTooltipContent:l,body:(0,m.jsxs)(p().gq,{alignItems:"center",gap:4,children:[(0,m.jsx)("span",{children:s}),r<0?(0,m.jsx)("div",{style:{color:"green",fontSize:10},children:"▲"}):r>0?(0,m.jsx)("div",{style:{color:"gray",fontSize:10},children:"▼"}):null]})}),(0,m.jsx)(f,{customStyles:{borderRight:"none"},title:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.title.nextBillingPeriodTitle",defaultMessage:"Next billing period"}),titleTooltipContent:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.nextBillingPeriodTooltip",defaultMessage:"You have paid for seats until the next billing period, and you may purchase more before the next billing period"}),body:n})]})}function f(e){let{title:t,titleTooltipContent:s,body:p,customStyles:g}=e;const f=(0,i().yK)((e=>({container:{padding:16,borderRight:`1px solid ${e.stroke.secondary}`,...g},helpIcon:{borderRadius:3,height:"auto",padding:0}})),[g]);return(0,m.jsxs)("div",{style:f.container,children:[(0,m.jsxs)(a().jX,{direction:"row",align:"center-left",gap:4,style:{marginBottom:4},children:[(0,m.jsx)(c().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,m.jsx)(u().Z,{allowHover:!0,textWrap:!0,renderTooltip:e=>(0,m.jsxs)(a().jX,{width:200,gap:2,style:{whiteSpace:"normal"},...e,children:[s,(0,m.jsx)(l().Z,{href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(c().q,{colorName:"contrastSecondary",children:(0,m.jsx)(o()._H,{id:"spaceSettings.people.peopleDashboard.clickToLearnMore",defaultMessage:"Click to learn more"})})})]}),render:e=>(0,m.jsx)(r().D,{...e,style:f.helpIcon,className:"tooltip-button",role:"button",href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(d().y,{iconGroup:n().M,variantName:"small",colorName:"tertiary"})})})]}),(0,m.jsx)(c().q,{styleName:"Heading-17px/Medium",children:p})]})}},884749:(e,t,s)=>{s.d(t,{_:()=>o});var i=()=>s(677559);const n=new(i().Ss)("SlackImportsInviteWithModal",(async()=>await Promise.all([s.e(62743),s.e(54843)]).then(s.bind(s,563946)))),o=(0,i().kF)(n,(e=>e.SlackImportsInviteWithModal))},24746:(e,t,s)=>{s.d(t,{r:()=>a});var i=s(667294),n=()=>s(219727),o=()=>s(930085);function a(e){const{children:t}=e,s=(0,n().O7)();return(0,i.useEffect)((()=>{o().Dg(s,{})}),[s]),t}},104822:(e,t,s)=>{s.d(t,{B:()=>d,U:()=>l});var i=()=>s(530980),n=()=>s(243225),o=()=>s(989478),a=()=>s(565818),r=()=>s(286338);function l(e,t){return e.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,r().Ye)()}function d(e,t){const s=i().kk5.fromAccessRequest(e);if(!s.isPageAccessRequest())return!1;const r=s.getForActorPointer(t.id);return r.table===o().KJ&&!a().y.createChildStore(t,n().v8({userId:r.id,spaceId:t.id})).isMember()}},968433:(e,t,s)=>{s.d(t,{M:()=>r});var i=s(667294),n=()=>s(219727),o=()=>s(824462),a=s(785893);function r(e){return function(t){const s=(0,n().O7)(),[r,l]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{o().callApi({eventName:"getEmailDomainSettings",environment:s,data:{}}).then((e=>{"success"===e.type&&l(e.data)}))}),[s]);const d={...t,userEmailDomainSettings:r};return(0,a.jsx)(e,{...d})}}},762300:(e,t,s)=>{s.d(t,{P9:()=>l,YJ:()=>d,jc:()=>r,jg:()=>a});s(670560),s(267602),s(653476);var i=()=>s(235484),n=()=>s(530980),o=()=>s(525807);function a(e){if(e.integration_id!==i().nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,n]=t;return{organizationName:s,accountName:n}}function r(e){return n().kk5.fromValue(o().PJ,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const s=r(e);return!!s&&t(s)})):e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,organizationName:n}=a(i);c({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function c(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,o=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||o}},105459:(e,t,s)=>{s.d(t,{Y:()=>r});var i=()=>s(219727),n=()=>s(142735),o=()=>s(876822),a=()=>s(18281);function r(e){const t=(0,i().O7)();return(0,n().VK)((()=>{const s=o().default.state.currentSpaceStore;return s&&e?(0,a().s1)(t,s.id,e):0}),[t,e])}},936879:(e,t,s)=>{s.d(t,{i:()=>o});var i=()=>s(930085),n=()=>s(912732);function o(e){n().L7(e,{type:"request"}),i().G(e,{type:"request",from:"settings_modal"})}},47534:(e,t,s)=>{s.d(t,{b:()=>C,n:()=>M});s(122556),s(582845),s(250570),s(533019),s(721473),s(788208),s(22624),s(267602),s(653476),s(241792);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(899548),l=()=>s(788860),d=()=>s(839002),c=()=>s(285473),u=()=>s(291198),p=()=>s(661297),m=()=>s(67961),g=()=>s(868614),f=()=>s(474602),h=()=>s(804217),S=()=>s(302366),y=()=>s(486191),b=()=>s(993489),x=()=>s(299775),v=s(785893);const w=500,j=[x().K7,x().lL,x().q_];function M(){const[e,t]=(0,i.useState)(""),[s,o]=(0,i.useState)({column:x().q_,sortAscending:!1}),[r,c]=(0,i.useState)([]),[u,p]=(0,i.useState)(!1),m=(0,n().O7)(),h=(0,b().e)({searchFilter:e}),S=(0,y().L)(h,s),w=new Set(r),M=S.filter((e=>w.has(e.id))),I=(0,a().yK)((()=>({tableHeader:{display:"flex",justifyContent:"space-between",marginBottom:12},tableActions:{display:"flex",justifyContent:"end",alignItems:"end"}})),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{style:I.tableHeader,children:[(0,v.jsx)(g().Z,{children:(0,v.jsx)(l()._H,{id:"offlineSettingsTab.offlinePagesSection.title",defaultMessage:"Offline pages"})}),(0,v.jsxs)("div",{style:I.tableActions,children:[(0,v.jsx)(_,{searchFilter:e,setSearchFilter:t,disabled:0===S.length&&!Boolean(e)}),(0,v.jsx)(k,{selectedPageIds:r,onRemovePages:async()=>{p(!0),await(0,d().qd)(M,M.length,(async e=>f().toggleAvailableOffline({store:e.pageBlockStore,environment:m}))),p(!1),c([]),t("")},removePagesLoading:u})]})]}),(0,v.jsx)(C,{columnRenderInfo:j,rows:S,sortState:s,onSortStateChanged:o,searchFilter:e,selectedPageIds:r,setSelectedPageIds:c,removePagesLoading:u})]})}function _(e){const{searchFilter:t,setSearchFilter:s,disabled:i}=e,n=(0,l().YB)(),o=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"end",marginRight:6},searchIcon:{width:14,height:14,fill:e.mediumIconColor},searchInput:{height:28,minWidth:195}})),[]);return(0,v.jsx)("div",{style:o.container,children:(0,v.jsx)(u().Z,{disabled:i,placeholder:n.formatMessage(S().e.offlinePagesSectionSearchPlaceholder),left:(0,r().R)(o.searchIcon),format:u().B.Small,value:t,onChange:e=>{s(e.target.value)},style:o.searchInput})})}function k(e){const{selectedPageIds:t,onRemovePages:s,removePagesLoading:i}=e,n=0===t.length||i,o=(0,a().yK)((e=>({button:{...n?{color:e.text.tertiary}:{},height:28}})),[n]);return(0,v.jsx)(p().Z,{disabled:n,onClick:s,style:o.button,children:(0,v.jsx)(l()._H,{id:"offlineSettingsTab.removeOfflinePagesButton",defaultMessage:"Remove pages"})})}function C(e){const{columnRenderInfo:t,rows:s,sortState:i,onSortStateChanged:n,searchFilter:r,selectedPageIds:l,setSelectedPageIds:d,removePagesLoading:u,hideHeaderRow:p,disableMultiSelect:m}=e,g=(0,o().VK)((()=>!h().default.state.online),[]),f=(0,a().yK)((e=>(0,c().bE)({columnRenderInfo:t,theme:e,containerMarginTop:0})),[t]),S=m?void 0:{header:{isDisabled:u||g||0===s.length,isSelected:l.length>0&&l.length===s.filter((e=>!e.disableRemovePage)).length,onClick:()=>{const e=s.filter((e=>!e.disableRemovePage));l.length===e.length?d([]):d(e.map((e=>e.id)))}},row:{getDisabledState:e=>u||g||e.disableRemovePage,getSelectedState:e=>l.includes(e.id),onClick:e=>{l.includes(e.id)?d(l.filter((t=>t!==e.id))):d(l.concat(e.id))}}};return(0,v.jsx)(c().Dp,{hideHeaderRow:p,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:w,columnRenderInfo:t,rows:s,styles:f,renderNoRowsComponent:()=>(0,v.jsx)(I,{isSearching:Boolean(r)}),sortState:i,onSortStateChanged:n,multiselect:S})}function I(e){const{isSearching:t}=e,s=(0,a().yK)((()=>({label:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,v.jsx)(m().Z,{isSmall:!0,style:s.label,children:t?(0,v.jsx)(l()._H,{id:"offlineSettingsTab.offlinePagesSection.noPagesFound",defaultMessage:"No pages found"}):(0,v.jsx)(l()._H,{id:"offlineSettingsTab.offlinePagesSection.noPagesAvailable",defaultMessage:"No pages available"})})}},436605:(e,t,s)=>{s.d(t,{dv:()=>Z,kV:()=>U});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(317924),l=()=>s(429600),d=()=>s(899548),c=()=>s(836273),u=()=>s(788860),p=()=>s(497065),m=()=>s(827973),g=()=>s(740046),f=()=>s(198829),h=()=>s(18748),S=()=>s(470386),y=()=>s(661641),b=()=>s(661297),x=()=>s(388284),v=()=>s(579807),w=()=>s(527278),j=()=>s(352230),M=()=>s(778265),_=()=>s(302366),k=()=>s(486191),C=()=>s(993489),I=()=>s(47534),T=()=>s(299775),P=s(785893);const A=(0,u().vU)({offlineSettingsTitle:{id:"mobileSettings.offline.title",defaultMessage:"Storage"},offlinePagesStorageAmount:{id:"mobileSettings.offline.pages.storageAmount",defaultMessage:"{amount} GB"},offlinePagesTitle:{id:"mobileSettings.offline.pages.title",defaultMessage:"Offline pages"}});function Z(){const e=(0,n().O7)(),t=(0,a().Fg)(),s=(0,M().P)(),[l,d,c]=function(e){const[t,s]=(0,i.useState)(e);return[t[t.length-1],(0,i.useCallback)((e=>s((t=>[...t,e]))),[]),(0,i.useCallback)((()=>s((e=>e.slice(0,-1)))),[])]}([]),u=(0,i.useCallback)((e=>{void 0!==l?c():p().op(e)}),[l,c]),m=(0,o().VK)((()=>(0,r().w_)(e.TabbedRouterStore.state)),[e]),g=(0,o().VK)((()=>{var e,t;return Boolean("web"===m.type&&("nativeTab"===m.route.name&&"offline"===m.route.tab||"nativeTab"===(null===(e=m.redirectedTo)||void 0===e?void 0:e.route.name)&&"offline"===(null===(t=m.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[m]);return(0,i.useLayoutEffect)((()=>{var t;g&&(null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({type:"offline_settings"}))}),[e.mobileNative,g]),s?(0,P.jsx)("div",{style:{backgroundColor:t.surface.wash},children:(0,P.jsx)(f().Z,{menuType:j().o.Modal,title:"offline_pages"===l?w().Z.formatMessage(A.offlinePagesTitle):w().Z.formatMessage(A.offlineSettingsTitle),left:(0,P.jsx)(S().MobileModalBackButtonV2,{}),onClickLeft:()=>u(e),onCancel:()=>u(e),shouldRenderMobileRefresh:!0,disableDragHandle:!0,isFullScreen:!0,children:"offline_pages"===l?(0,P.jsx)(R,{}):(0,P.jsx)(D,{navigate:d})})}):null}function R(e){const[t,s]=(0,i.useState)(""),n=(0,C().e)({searchFilter:t}),o=(0,k().L)(n,{column:T().q_,sortAscending:!1});return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(H,{searchFilter:t,setSearchFilter:s,disabled:!1}),(0,P.jsx)("div",{style:{marginLeft:16,marginRight:16,marginTop:16},children:(0,P.jsx)(I().b,{hideHeaderRow:!0,columnRenderInfo:[T().K7,T().O5],rows:o,sortState:void 0,onSortStateChanged:void 0,searchFilter:t,disableMultiSelect:!0,selectedPageIds:[],setSelectedPageIds:()=>{},removePagesLoading:!1})})]})}function H(e){const{searchFilter:t,setSearchFilter:s,disabled:i}=e,n=(0,u().YB)(),o=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"end",marginRight:6},searchIcon:{width:14,height:14,fill:e.mediumIconColor},searchInput:{}})),[]);return(0,P.jsx)(x().Z,{shouldRenderMobileRefresh:!0,style:o.container,children:(0,P.jsx)(g().ZP,{disabled:i,placeholder:n.formatMessage(_().e.offlinePagesSectionSearchPlaceholder),inputLeft:(0,d().R)(o.searchIcon),value:t,onChange:e=>s(e.target.value),style:o.searchInput,shouldRenderMobileRefresh:!0})})}function D(e){const t=(0,a().Fg)(),s=(0,a().yK)((e=>({chevronRightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6},progressBarContainerStyle:{width:"100%",position:"relative",borderRadius:12,backgroundColor:e.tint.regular,height:8,display:"flex",flexDirection:"row",clipPath:"inset(0 round 12px)"},storageItemContainerStyle:{width:"100%",display:"flex",paddingTop:16,gap:8,flexDirection:"column"}})),[]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(x().Z,{title:w().Z.formatMessage(A.offlineSettingsTitle),shouldRenderMobileRefresh:!0,children:(0,P.jsx)(h().ZP,{body:(0,P.jsxs)("div",{style:{padding:"16px 0"},children:[(0,P.jsxs)("div",{style:s.progressBarContainerStyle,children:[(0,P.jsx)(B,{proportion:20,color:t.text.bluePrimary}),(0,P.jsx)(B,{proportion:20,color:t.text.blueSecondary}),(0,P.jsx)(B,{proportion:20,color:t.fill.grayPrimary})]}),(0,P.jsxs)("div",{style:s.storageItemContainerStyle,children:[(0,P.jsx)(V,{title:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.storage.otherApps",defaultMessage:"Other apps"}),amount:N(0),color:t.fill.grayPrimary}),(0,P.jsx)(V,{title:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.storage.notion",defaultMessage:"Notion"}),amount:N(0),color:t.text.blueSecondary}),(0,P.jsx)(V,{title:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.storage.notionCache",defaultMessage:"Notion cache"}),amount:N(0),color:t.text.bluePrimary})]})]})})}),(0,P.jsx)(x().Z,{shouldRenderMobileRefresh:!0,children:(0,P.jsx)(m().Z,{focused:!1,title:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.pages.clearCache.callToAction",defaultMessage:"Clear Notion cache"}),onClick:()=>{}})}),(0,P.jsx)(x().Z,{title:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.pages.title",defaultMessage:"Offline pages"}),shouldRenderMobileRefresh:!0,children:(0,P.jsx)(m().Z,{focused:!1,title:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.pages.callToAction",defaultMessage:"View offline pages"}),right:(0,l().o)(s.chevronRightIconStyle),onClick:()=>e.navigate("offline_pages")})})]})}function B(e){const{proportion:t,color:s}=e;return(0,P.jsx)("div",{style:{width:`${t}%`,height:"100%",backgroundColor:s}})}function V(e){const{title:t,amount:s,color:i}=e;return(0,P.jsxs)("div",{style:{display:"flex",gap:10,flexDirection:"row",alignItems:"center"},children:[(0,P.jsx)("div",{style:{borderRadius:"100%",width:16,height:16,backgroundColor:i}}),(0,P.jsx)(y().q,{style:{flex:1},styleName:"Heading-17px/Regular",colorName:"primary",children:t}),(0,P.jsx)(y().q,{style:{flex:"0 1 auto"},styleName:"Heading-17px/Regular",colorName:"tertiary",children:s})]})}function N(e){return w().Z.formatMessage(A.offlinePagesStorageAmount,{amount:e.toFixed(2).padStart(6,"0")})}function U(e){const t=(0,n().O7)(),s=(0,i.useCallback)((()=>{p().c4({environment:t,url:`${c().VP.nativeTab}/offline`})}),[t]),o=(0,a().yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,P.jsx)(v().Z,{type:"custom",isMobile:!0,title:w().Z.formatMessage(A.offlineSettingsTitle),disableSettingsItemClick:!0,caption:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.description",defaultMessage:"Manage your workspace storage and offline pages."}),shouldHighlight:!1,customButton:(0,P.jsx)(b().Z,{size:"lg",style:o.PlainButtonStyle,onClick:s,children:(0,P.jsx)(u()._H,{id:"mobileSettings.offline.cta",defaultMessage:"Manage"})})})}},299775:(e,t,s)=>{s.d(t,{q_:()=>f,O5:()=>h,lL:()=>g,K7:()=>m});s(667294);var i=()=>s(788860),n=()=>s(448419),o=()=>s(166124),a=()=>s(846550),r=()=>s(728267),l=()=>s(4686),d=()=>s(838266),c=s(785893);function u(e){const{blockStore:t,autosyncType:s}=e;return(0,c.jsx)(o().o,{blockStore:t,allowClickToOpenPage:!0,onOpenPage:()=>{d().default.setState({...d().default.state,open:!1})},inlineTitleContent:(0,c.jsx)(p,{autosyncType:s})})}function p(e){let{autosyncType:t}=e;const s=(0,a().yK)((e=>({star:{width:14,height:14,marginLeft:4},clock:{width:16,height:16,fill:e.mediumIconColor,marginLeft:4}})),[]);switch(t){case"favorite":return(0,l().C)(s.star);case"recent":return(0,r().a)(s.clock);case"none":return null}}const m={id:"pageName",headerTitle:(0,c.jsx)(i()._H,{id:"offlinePagesTable.columnHeader.pageName",defaultMessage:"Page name"}),renderCell:e=>(0,c.jsx)(u,{blockStore:e.pageBlockStore,autosyncType:e.autosyncType}),widthData:{width:220},sortable:!1},g={id:"owner",headerTitle:(0,c.jsx)(i()._H,{id:"offlinePagesTable.columnHeader.owner",defaultMessage:"Owner"}),renderCell:e=>e.userStore?(0,c.jsx)(s(789938).G,{userStores:[e.userStore]}):null,widthData:{width:140},sortable:!1},f={id:"lastModifiedTime",headerTitle:(0,c.jsx)(i()._H,{id:"offlinePagesTable.columnHeader.lastModifiedTime",defaultMessage:"Last modified time"}),renderCell:e=>(0,c.jsx)(s(802321).T,{dateTs:e.lastModifiedTime}),widthData:{width:100},sortable:!0},h={id:"options",headerTitle:(0,c.jsx)(i()._H,{id:"offlinePagesTable.columnHeader.options",defaultMessage:"Options"}),renderCell:e=>(0,c.jsx)(n().ZP,{popupType:n().Z4.BottomSheet,bottomSheetInitialState:"half",renderOrigin:e=>(0,c.jsx)(s(1910).Z,{icon:s(159253).O,...e,ariaLabel:"Options"}),render:t=>{const n=(0,s(219727).O7)(),a=s(890324).Z.getMode(n,e.pageBlockStore),{displayTitle:r}=(0,s(142735).VK)((()=>(0,o().gA)(e.pageBlockStore)),[]);return(0,c.jsx)(s(198829).Z,{menuType:s(352230).o.Modal,title:(0,c.jsx)(i()._H,{defaultMessage:"{displayTitle}",id:"offlinePagesTable.pageOptions.title",values:{displayTitle:r}}),children:(0,c.jsx)(s(149809).Z,{filter:void 0,context:{environment:n,blocks:[e.pageBlockStore],publicEditMode:a},sections:[(0,s(313351).$J)({key:"viewing of page content",render:e=>(0,c.jsx)(s(388284).Z,{...e,shouldRenderMobileRefresh:!0}),actions:[s(929626).n]})],initialFocus:void 0})})}}),widthData:{width:24},sortable:!1}},302366:(e,t,s)=>{s.d(t,{e:()=>i});const i=(0,s(788860).vU)({offlinePagesSectionSearchPlaceholder:{id:"offlineSettingsMobile.offlinePagesSection.searchPlaceholder",defaultMessage:"Search by name"}})},486191:(e,t,s)=>{s.d(t,{L:()=>n});var i=()=>s(513670);function n(e,t){let{sortAscending:s}=t;const n=s?"asc":"desc";return i().Xo(e,["lastModifiedTime"],[n])}},993489:(e,t,s)=>{s.d(t,{e:()=>p});s(267602),s(653476),s(241792);var i=()=>s(219727),n=()=>s(142735),o=()=>s(396136),a=()=>s(989478),r=()=>s(696459),l=()=>s(166124),d=()=>s(747055),c=()=>s(876822),u=()=>s(826955);function p(e){const{searchFilter:t}=e,s=(0,i().O7)(),p=(0,n().VK)((()=>{const e=d().Z.state.offlinePages??{};return Object.keys(e).map((i=>{var n;const r=e[i];if(void 0===r||!r.isExplicitlyOfflined)return;const d=new(u().G)(s,{table:o().iU,id:i});if(Boolean(t)&&!function(e){const{pageBlockStore:t,searchFilter:s}=e,{displayTitle:i}=(0,l().gA)(t);if(void 0===i)return!1;return i.toLowerCase().includes(s.toLowerCase())}({pageBlockStore:d,searchFilter:t}))return;if((null===(n=c().default.state.currentSpaceStore)||void 0===n?void 0:n.id)!==d.getSpaceId())return;const p=d.getCreatedById(),m=p?u().U6.createChildStore(d,{table:a().KJ,id:p}):void 0,g=d.getLastEditedTime();return{id:i,isClickable:!1,pageBlockStore:d,userStore:m,lastModifiedTime:g,disableRemovePage:r.isLocked,autosyncType:"none"}})).filter(r().$K)}),[s,t]);return p}},233126:(e,t,s)=>{s.d(t,{Z:()=>p});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(788860),a=()=>s(140798),r=()=>s(579807),l=()=>s(345918),d=()=>s(876822),c=()=>s(138390),u=s(785893);function p(e){let{isMobile:t}=e;const s=(0,i().O7)(),p=(0,n().VK)((()=>(0,c().o)()),[]),{isElectron:m}=(0,i().Fy)(),g=(0,n().VK)((()=>{var e,t;return l().g4(s,{spaceView:null===(e=d().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getModel(),space:null===(t=d().default.state.currentSpaceStore)||void 0===t?void 0:t.getModel()})}),[s]),f=m?(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.desktopDescription.message",defaultMessage:"Choose what to show when opening new windows, switching workspaces, or launching app without restoring tabs."}):(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),h=m?(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.title",defaultMessage:"Default page"}):(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.title.desktop",defaultMessage:"Open on start"});return(0,u.jsx)(r().Z,{isMobile:t,title:h,caption:f,type:"dropdown",currentOption:g,options:p,onSelectOption:e=>{a().N({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,option:e,from:"user_settings"})}})}},218842:(e,t,s)=>{s.d(t,{Eo:()=>ae,Ez:()=>de,qs:()=>le});s(267602),s(653476);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(629719),r=()=>s(788860),l=()=>s(696459),d=()=>s(231077),c=()=>s(76254),u=()=>s(269299),p=()=>s(348141),m=()=>s(702075),g=()=>s(493462),f=()=>s(312578),h=()=>s(253855),S=()=>s(617811),y=()=>s(765513),b=()=>s(113419),x=()=>s(421936),v=()=>s(868614),w=()=>s(579807),j=()=>s(391598),M=()=>s(418372),_=()=>s(148126),k=()=>s(332504),C=()=>s(466970),I=()=>s(436605),T=()=>s(297861),P=()=>s(876822),A=()=>s(725751),Z=()=>s(749826),R=()=>s(324404),H=()=>s(548812),D=()=>s(846550),B=()=>s(448768),V=()=>s(319615),N=()=>s(497065),U=()=>s(108714),O=()=>s(661297),F=()=>s(67961),L=()=>s(205228),E=()=>s(656573),K=()=>s(440434),G=()=>s(522323),q=()=>s(838266),W=s(785893);function z(){const{isMac:e,isDesktop:t}=(0,n().Fy)();return(0,o().VK)((()=>t&&e),[e,t])}function Y(e){var t;const s=e.environment.device,{isElectron:i,isMac:n,isWindows:a,isDesktop:r}=s,d=void 0!==(null===(t=(0,o().Kw)(A().default).preferences)||void 0===t?void 0:t.isUniversalLinksEnabled);return[r&&(n||a||!1)&&!d?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,W.jsx)(se,{})}:void 0,z()?{key:"open-in-browser",renderSettingsItem:()=>(0,W.jsx)($,{})}:void 0,i&&n?{key:"close-browser-tabs",renderSettingsItem:()=>(0,W.jsx)(ie,{})}:void 0].filter(l().$K)}function Q(){return(0,W.jsx)(w().Z,{isMobile:!1,caption:(0,W.jsx)(r()._H,{id:"openInBrowserSetting.caption.browser",defaultMessage:'If installed, macOS will open links to Notion in the desktop app, even if this setting is turned off. To disable that behavior, enable "Open Notion links in browser" in your app.'}),type:"custom",customButton:(0,W.jsx)(O().Z,{onClick:()=>{window.open(B().NV({httpUrl:(0,E().H)(window.location.href),protocol:L().default.protocol}))},children:(0,W.jsx)(r()._H,{id:"openInBrowserSetting.button",defaultMessage:"Set in app"})})})}function $(){const e=(0,n().Fy)(),{isElectron:t,isMac:s}=e,a=z(),l=(0,o().VK)((()=>{var e;return null===(e=A().default.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]),c=(0,i.useCallback)((()=>{const e=!l;d().electronAppFeatures.setPreference("isUniversalLinksEnabled",e)}),[l]);if(!t&&a)return(0,W.jsx)(Q,{});if(!t||!s||void 0===l)return null;const u=(0,W.jsx)(r()._H,{id:"openInDesktopAppSettings.universalLinks.title",defaultMessage:"Open Notion links in browser"}),p=(0,W.jsx)(r()._H,{id:"openInDesktopAppSettings.universalLinks.caption",defaultMessage:"By default, macOS will open links to Notion in the desktop app. Turning this setting on will redirect links to your browser instead."});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(w().Z,{isMobile:!1,title:u,caption:p,type:"toggle",isOn:!l,onToggle:c}),(0,W.jsx)(J,{show:!1===l})]})}function J(){let{show:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1};const t=(0,D().yK)((e=>({buttonStyle:{display:"flex",alignItems:"center",paddingLeft:12,paddingRight:12,paddingTop:2,paddingBottom:2,borderColor:e.outlineButtonBorder,border:1,borderWidth:1,borderRadius:4,height:32,gap:4,background:e.importOptionsButtonBackground},titleStyle:{fontSize:12,fontWeight:"medium",font:"SF Pro",color:e.text.primary,height:18},divTitleStyle:{color:e.text.secondary,display:"flex",background:e.fill.lightGraySecondary,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,borderColor:e.fill.lightGraySecondary},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:e.text.secondary,font:"SF Pro",fontSize:12,whiteSpace:"normal"}})),[]);return e?(0,W.jsx)("div",{style:t.divStyle,children:(0,W.jsxs)("div",{style:t.divTitleStyle,children:[(0,W.jsx)(F().Z,{isSecondaryColor:!0,style:t.UiLabelStyle,children:(0,W.jsx)(r()._H,{id:"openInDesktopAppSettings.universalLinks.guide.caption",defaultMessage:'Notion will redirect links to your browser. You may also want to prevent your browser from opening Notion links in the desktop app. To use Notion in your browser only, ensure that the setting "Open links in desktop app" is turned off in your browser.'})}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{style:{display:"flex"},children:(0,W.jsx)("div",{style:t.titleStyle,children:(0,W.jsx)(X,{})})})})]})}):null}function X(){const e=(0,n().O7)();return(0,W.jsx)(U().Z,{href:(0,E().H)(window.location.href),external:!0,onClick:()=>{V().rZ(e)},children:(0,W.jsx)(O().Z,{children:(0,W.jsx)(r()._H,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Set in browser"})})})}function ee(){return(0,W.jsx)(r()._H,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"})}function te(){const e=void 0!==(0,o().VK)((()=>{var e;return null===(e=A().default.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]);let t=(0,W.jsx)(ee,{}),s=(0,W.jsx)(r()._H,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."});return e&&(t=(0,W.jsx)(r()._H,{id:"openInDesktopAppSetting.title.universal",defaultMessage:"Open browser links in desktop app"}),s=(0,W.jsx)(r()._H,{id:"openInDesktopAppSetting.desktopConfigureCaption.universal",defaultMessage:"You can also configure your browser to automatically redirect Notion links to the app."})),(0,W.jsx)(w().Z,{isMobile:!1,title:t,caption:s,type:"custom",customButton:(0,W.jsx)(X,{})})}function se(){const e=(0,n().O7)(),{isElectron:t,isMac:s}=(0,n().Fy)(),i=(0,o().Kw)(G().Z),a=(0,W.jsx)(ee,{}),l=(0,o().VK)((()=>q().default.state.highlightedSetting===q().R.OpenInDesktopApp),[]),d=(0,K().e)();if(t)return(0,W.jsx)(te,{});const c=s?"macOS":"Windows";return(0,W.jsx)(w().Z,{isMobile:!1,title:a,caption:(0,W.jsx)(r()._H,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopAppLink>{platform} app</desktopAppLink> installed.",values:{desktopAppLink:function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(0,W.jsx)(y().Z,{external:!0,onClick:t=>{d.current&&(N().c4({environment:e,url:d.current,openInNew:"tab"}),t.stopPropagation())},children:s})},platform:c}}),type:"toggle",isOn:"always"===i,onToggle:()=>{const t="always"===i?"never":"always";G().Z.setState(t),"always"===t&&N().RX({url:(0,E().W)(window.location.href),environment:e}),V().wz(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:l})}function ie(){const{isElectron:e,isMac:t}=(0,n().Fy)(),s=(0,o().VK)((()=>{var e;return null===(e=A().default.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),a=(0,i.useCallback)((()=>{const e=!s;d().electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=(0,W.jsx)(r()._H,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),c=(0,W.jsx)(r()._H,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return(0,W.jsx)(w().Z,{isMobile:!1,title:l,caption:c,type:"toggle",isOn:s,onToggle:a})}var ne=()=>s(297444),oe=()=>s(233126);function ae(e){let{isPhone:t,isMobileNative:s,showOfflineSettings:i,passwordRequestStore:n,userEmailDomainSettings:o,billingData:r,accountSettings:d}=e;const c=s&&(0,a().TK)(r),u=(0,k().d)(),p=!(t&&(0,T().Y)("supportsNativeHome")),f=Z().default.checkGate({gateName:"block_attribution"});return[{key:"password",renderSettingsItem:()=>(0,W.jsx)(ce,{passwordRequestStore:n,billingData:r})},{key:"passkeys",renderSettingsItem:()=>(0,W.jsx)(b().Z,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})},{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ue,{isMobile:!0})},s&&Z().default.checkGate({gateName:"mobile_open_links_in_external_browser"})?{key:"open-external-links",renderSettingsItem:()=>(0,W.jsx)(pe,{})}:void 0,p?{key:"page-on-app-start",renderSettingsItem:()=>(0,W.jsx)(oe().Z,{isMobile:!0})}:void 0,f?{key:"block-attribution",renderSettingsItem:()=>(0,W.jsx)(me,{isMobile:!0})}:void 0,c?{key:"subscription",renderSettingsItem:()=>(0,W.jsx)(j().y,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,W.jsx)(M().Z,{emailDomainSettings:o.settings})},{key:"calendar",renderSettingsItem:()=>(0,W.jsx)(m().Z,{})},u?{key:"experiments",renderSettingsItem:()=>(0,W.jsx)(h().P,{})}:void 0,i&&s?{key:"offline",renderSettingsItem:()=>(0,W.jsx)(I().kV,{})}:void 0,{key:"spaceInfo",renderSettingsItem:()=>(0,W.jsx)(re,{})},{key:"deleteAccount",renderSettingsItem:()=>(0,W.jsx)(g().Z,{userEmailDomainSettings:o})}].filter(l().$K)}function re(){const e=(0,o().VK)((()=>P().default.state.currentSpaceStore),[]);return e?(0,W.jsxs)("div",{children:[(0,W.jsx)(v().Z,{children:(0,W.jsx)(r()._H,{id:"mobileSettings.spaceInfo.title",defaultMessage:"Workspace information"})}),(0,W.jsx)(S().H,{spaceStore:e,showDomain:!0})]}):null}function le(){return[{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ue,{isMobile:!1})}]}function de(e){var t;const{environment:s}=e,{isElectron:i,isMac:n}=s.device,a=(0,C().E)("block_attribution"),r=(0,o().VK)((()=>(0,H().t_)(s)),[s]),d=(0,o().Kw)(A().default),c=d.isQuickSearchSupported,u=Boolean(null===(t=d.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),p=d.isMenuBarIconSupported,m=d.isNewTabSearchSupported,g=i&&c,f=i&&c&&u,h=i&&n&&p&&u;return[r?void 0:{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ue,{isMobile:!1})},i&&m?{key:"page-on-tab-start",renderSettingsItem:()=>(0,W.jsx)(ge,{})}:void 0,...Y(e),g?{key:"quick-search-enabled",renderSettingsItem:()=>(0,W.jsx)(fe,{})}:void 0,f?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,W.jsx)(he,{})}:void 0,f?{key:"notion-ai-shortcut",renderSettingsItem:()=>(0,W.jsx)(Se,{})}:void 0,h?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,W.jsx)(ye,{})}:void 0,a?{key:"block-attribution",renderSettingsItem:()=>(0,W.jsx)(me,{isMobile:!1})}:void 0].filter(l().$K)}function ce(e){let{billingData:t,passwordRequestStore:s}=e;const i=(0,a().ps)(null==t?void 0:t.subscription,"student"),n=(0,o().VK)((()=>{var e;return(null===(e=P().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:r,canConfigurePassword:l,isSamlEnforced:d,mfaStatus:c,error:u,ready:p}=(0,o().VK)((()=>({...s.state.result,error:s.state.error,ready:s.state.result})),[s]);return u?(0,W.jsx)(x().Z,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:n,onReloadSettings:()=>s.refresh(),isError:!0}):p?(0,W.jsx)(x().Z,{hasPassword:r,hasPasswordActions:l,samlEnforced:d,mfaStatus:c,isEducationPlan:i,email:n,onReloadSettings:()=>s.refresh(),isError:!1}):(0,W.jsx)(f().Z,{})}function ue(e){let{isMobile:t}=e;const s=(0,n().O7)(),i=(0,o().VK)((()=>c().VZ(s)),[s]);return(0,W.jsx)(w().Z,{isMobile:t,title:(0,W.jsx)(r()._H,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,W.jsx)(r()._H,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:(0,W.jsx)(r()._H,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,W.jsx)(r()._H,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,W.jsx)(r()._H,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{c().Y7(e)}})}function pe(){const e=(0,o().VK)((()=>R().Z.state??"external"),[]);return(0,W.jsx)(w().Z,{isMobile:!0,title:(0,W.jsx)(r()._H,{id:"openExternalLinksSettings.title",defaultMessage:"External links"}),caption:(0,W.jsx)(r()._H,{id:"openExternalLinksSettings.description.message",defaultMessage:"Choose how to open links on this device."}),type:"dropdown",currentOption:e,options:[{key:"in-app",label:(0,W.jsx)(r()._H,{id:"openExternalLinksSettings.inAppBrowser.title",defaultMessage:"In-app browser"})},{key:"external",label:(0,W.jsx)(r()._H,{id:"openExternalLinksSettings.externalBrowser.title",defaultMessage:"System default browser"})}],onSelectOption:e=>{R().Z.setState(e)}})}function me(e){let{isMobile:t}=e;const s=(0,n().O7)(),a=(0,o().VK)((()=>P().default.state.currentUserSettingsStore),[]),l=(0,o().VK)((()=>{var e;return(null==a||null===(e=a.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[a]),d=(0,i.useCallback)((()=>{a&&u().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:e=>{p().d2({userSettingsStore:a,data:{show_block_attribution:!l},transaction:e})}})}),[a,l,s]);return(0,W.jsx)(w().Z,{isMobile:t,title:(0,W.jsx)(r()._H,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:(0,W.jsx)(r()._H,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:l,onToggle:d})}function ge(){const{currentPreference:e}=(0,o().VK)((()=>{var e;const t=A().default.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNewTabSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isNewTabSearchEnabled",t)}),[e]),s=(0,W.jsx)(r()._H,{id:"desktopNewTabSearch.toggle.title",defaultMessage:"New Tab Search"}),n=(0,W.jsx)(r()._H,{id:"desktopNewTabSearch.toggle.caption",defaultMessage:'Immediately search for and navigate to a specific page when you open a new tab. When turned off, new tabs will follow your "Default page" settings. <inlinelink>Learn more</inlinelink>.',values:{inlinelink:e=>(0,W.jsx)(y().Z,{external:!0,href:(0,_().UY)("guides.whyDesktop"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,W.jsx)(w().Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function fe(){const{currentPreference:e}=(0,o().VK)((()=>{var e;const t=A().default.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,W.jsx)(r()._H,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Use Command Search"}),n=(0,W.jsx)(r()._H,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open Notion AI and search anywhere with a shortcut, even when your Notion app isn't active."});return(0,W.jsx)(w().Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function he(){const{quickSearchShortcut:e,notionAiShortcut:t}=(0,o().VK)((()=>{const e=A().default.state.preferences;return{quickSearchShortcut:null==e?void 0:e.quickSearchShortcut,notionAiShortcut:null==e?void 0:e.notionAiShortcut}}),[]),{isMac:s}=(0,n().Fy)(),a=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("quickSearchShortcut",e)}),[]),l=(0,W.jsx)(r()._H,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),c=(0,W.jsx)(r()._H,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,W.jsx)(w().Z,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,W.jsx)("div",{children:(0,W.jsx)(ne().nx,{shortcut:e,onChange:a,conflictingShortcuts:t?[t]:[],isMac:s})})})}function Se(){const{notionAiShortcut:e,commandSearchShortcut:t}=(0,o().VK)((()=>{const e=A().default.state.preferences;return{notionAiShortcut:null==e?void 0:e.notionAiShortcut,commandSearchShortcut:null==e?void 0:e.quickSearchShortcut}}),[]),s=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("notionAiShortcut",e)}),[]),{isMac:a}=(0,n().Fy)(),l=(0,W.jsx)(r()._H,{id:"desktopNotionAi.shortcut.title",defaultMessage:"Notion AI shortcut"}),c=(0,W.jsx)(r()._H,{id:"desktopNotionAi.shortcut.caption",defaultMessage:"Customize the shortcut to trigger Notion AI, if your workspace has AI enabled."});return(0,W.jsx)(w().Z,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,W.jsx)("div",{children:(0,W.jsx)(ne().nx,{shortcut:e,onChange:s,conflictingShortcuts:t?[t]:[],isMac:a})})})}function ye(){const{isMenuBarIconEnabled:e}=(0,o().VK)((()=>{var e;const t=A().default.state;return{isMenuBarIconEnabled:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}}),[]),t=(0,i.useCallback)((()=>{d().electronAppFeatures.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,W.jsx)(r()._H,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),n=(0,W.jsx)(r()._H,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen."});return(0,W.jsx)(w().Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}},139934:(e,t,s)=>{s.d(t,{Z:()=>Ds});s(670560),s(122556),s(582845),s(250570),s(533019),s(721473),s(788208),s(22624),s(267602),s(653476),s(470928),s(241792);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(263184),l=()=>s(619186),d=()=>s(801812),c=()=>s(721543),u=()=>s(641772),p=()=>s(833437),m=()=>s(899548),g=()=>s(163839),f=()=>s(956057),h=()=>s(530980),S=()=>s(741633),y=()=>s(933868),b=()=>s(255933),x=()=>s(989478),v=()=>s(657120),w=()=>s(788860),j=()=>s(568017),M=()=>s(513670),_=()=>s(696459),k=()=>s(707513),C=()=>s(491927),I=()=>s(912732),T=()=>s(155055),P=()=>s(395362),A=()=>s(824462),Z=()=>s(959137),R=()=>s(308186),H=()=>s(528918),D=()=>s(784234),B=()=>s(224597),V=()=>s(677181),N=()=>s(269299),U=()=>s(154186),O=()=>s(827973),F=()=>s(448419),L=()=>s(666414),E=()=>s(1910),K=()=>s(291198),G=()=>s(312578),q=()=>s(198829),W=()=>s(255577),z=()=>s(661297),Y=()=>s(906651),Q=()=>s(388284),$=()=>s(777346),J=()=>s(471645),X=()=>s(67961),ee=()=>s(923398),te=()=>s(907099),se=()=>s(467806),ie=()=>s(469203),ne=()=>s(943620),oe=()=>s(365766),ae=s(785893);function re(e){let{spaceStore:t,groupIds:s,onGroupClick:i}=e;const n=(0,w().YB)(),r=(0,a().yK)((e=>({title:{marginRight:8,color:0===s.length?e.lightTextColor:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e.lightTextColor}})),[s]),l=(0,o().VK)((()=>s.map((e=>({key:e,render:s=>{const i=se().Z.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e));if(!i)return null;const o=te().kF({intl:n,groupName:i.group.name});return(0,ae.jsx)(O().Z,{icon:(0,ae.jsx)(ne().Z,{disabled:!0,icon:i.group.icon&&t?{pointer:t.pointer,icon:i.group.icon}:void 0,size:18,isEmptyPage:!1,title:o,defaultIcon:(0,ee().O)(r.defaultGroupIconPill)}),title:(0,ae.jsx)(X().Z,{style:i.group.name?void 0:r.untitled,children:(0,ae.jsx)(ie().s,{style:{maxWidth:200},children:o})}),caption:(0,ae.jsx)(w()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:i.memberCount}}),inline:!0,...s})},action:i})))),[s,n,i,t,r.defaultGroupIconPill,r.untitled]);return(0,ae.jsx)(oe().Nz,{title:(0,ae.jsx)(X().Z,{style:r.title,children:s&&0!==s.length?(0,ae.jsx)(w()._H,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:s.length}}):(0,ae.jsx)(w()._H,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"})}),items:l,disabled:!s||0===s.length})}var le=()=>s(506347),de=()=>s(374289),ce=()=>s(396136),ue=()=>s(497065),pe=()=>s(429725),me=()=>s(352230),ge=()=>s(940823),fe=()=>s(826955),he=()=>s(18281),Se=()=>s(897257),ye=()=>s(265640),be=()=>s(18748),xe=()=>s(838367),ve=()=>s(231219),we=()=>s(654133);const je=function(e){let{store:t,guestStore:r,isSubscribed:l,guest:d,hideActionButtons:c}=e;const u=(0,a().Fg)(),p=(0,n().O7)(),m=(0,o().qz)(void 0,s(529048).Z),g=(0,i.useCallback)((()=>(0,ae.jsx)(Me,{store:t,guestStore:r,isSubscribed:l,guest:d,hideActionButtons:c,buttonPopupStore:m})),[t,r,l,d,c,m]),{device:f}=p;return(0,o().VK)((()=>{d.guestPageIds.map((e=>{fe().G.createChildStore(t,{table:ce().iU,id:e}).load()}))}),[t,d]),0===d.guestPageIds.length?(0,ae.jsx)(ye().D,{disabled:!0,children:(0,ae.jsx)(w()._H,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,ae.jsx)(F().ZP,{popupType:f.isMobile?F().Z4.SlideUp:F().Z4.Popup,renderOrigin:e=>(0,ae.jsxs)(ye().D,{...e,children:[(0,ae.jsx)(w()._H,{id:"guestPagesPopup.page",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:d.guestPageIds.length}}),(0,de().i)({width:10,marginLeft:4,fill:u.lightIconColor})]}),buttonPopupStore:m,render:g})};function Me(e){let{store:t,guestStore:s,isSubscribed:a,guest:r,hideActionButtons:l,buttonPopupStore:d}=e;const c=(0,n().O7)(),u=(0,i.useCallback)((()=>function(e,t,s,i){R().vC({showCancel:!0,keepFocus:!1,message:(0,ae.jsx)(w()._H,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,ae.jsx)(w()._H,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{i.setState({...i.state,open:!1}),await V().w({environment:e,guestUserStore:s,store:t})}}]})}(c,t,s,d)),[c,t,s,d]),p=(0,i.useCallback)((()=>async function(e,t,s,i,n){const o=i?"read_and_write":"editor";n.setState({...n.state,open:!1}),await V().s({environment:e,guestUserStore:s,role:o,store:t,isConvertToAdmin:!i,origin:"guest_pages_popup"})}(c,t,s,a,d)),[c,t,s,a,d]),{device:m}=c,g=(0,o().VK)((()=>t.canEditMembership()),[t]),f=r.guestPageIds.map((e=>{const s=fe().G.createChildStore(t,{table:ce().iU,id:e}),i={key:e,render:e=>(0,ae.jsx)(ve().Z,{...e,store:s,placeholder:(0,ae.jsx)(w()._H,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=fe().G.createChildStore(t,{table:ce().iU,id:e}),i=(0,pe().ZP)({store:s,fullyQualified:!1,pageVisitSource:le().tY.LinkInPage});ue().c4({environment:c,url:i,openInNew:"tab"})}};return i}));let h;h=m.isMobile?{menuType:me().o.ActionSheet}:{menuType:me().o.Popup,width:300};const S=(0,ge().Q)(),y=(0,o().VK)((()=>function(){const e=Se().subscriptionDataStoreInstance.state;return Boolean(e&&(0,he().YK)(e))}()),[]);let b;S&&(b=(0,ae.jsx)(we().Z,{renderTooltip:()=>y?(0,ae.jsx)(w()._H,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,ae.jsx)(w()._H,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,ae.jsx)(z().Z,{size:"lg",onClick:p,...e,children:y?(0,ae.jsx)(w()._H,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,ae.jsx)(w()._H,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"})})}));const x=!l&&g;return(0,ae.jsxs)(q().Z,{...h,children:[x&&(0,ae.jsx)(be().ZP,{title:(0,ae.jsxs)("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"},children:[b,(0,ae.jsx)(we().Z,{renderTooltip:()=>(0,ae.jsx)(w()._H,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>(0,ae.jsx)(z().Z,{size:"lg",color:"uiRed",style:{marginLeft:b?8:0},onClick:u,...e,children:(0,ae.jsx)(w()._H,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"})})})]})}),x&&(0,ae.jsx)(xe().Z,{title:1===f.length?(0,ae.jsx)(w()._H,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"This guest can access this page:"}):(0,ae.jsx)(w()._H,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"This guest can access these pages:"})}),(0,ae.jsx)(W().ZP,{type:W().iW.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,ae.jsx)(Q().Z,{...e}),items:f}]})]})}var _e=()=>s(360964),ke=()=>s(765513),Ce=()=>s(370005),Ie=()=>s(504117),Te=()=>s(868614),Pe=()=>s(512220),Ae=()=>s(819792),Ze=()=>s(378907),Re=()=>s(527278),He=()=>s(91502),De=()=>s(270895),Be=()=>s(876822),Ve=()=>s(44556),Ne=()=>s(383694),Ue=()=>s(149809),Oe=()=>s(740046);const Fe=(0,w().vU)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function Le(e){const{teamGuest:t}=e,s=(0,n().O7)(),i=(0,o().VK)((()=>Be().default.state.currentSpaceStore),[]);if(!i)return null;if(0===t.guestPageIds.length)return null;const a=[{key:"pages",render:e=>(0,ae.jsx)(Q().Z,{...e}),items:t.guestPageIds.map((e=>{const t=fe().G.createChildStore(i,{table:ce().iU,id:e}),n={key:e,render:e=>(0,ae.jsx)(ve().Z,{...e,store:t,placeholder:(0,ae.jsx)(w()._H,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=fe().G.createChildStore(i,{table:ce().iU,id:e}),n=(0,pe().ZP)({store:t,fullyQualified:!1,pageVisitSource:le().tY.LinkInPage});ue().c4({environment:s,url:n,openInNew:"tab"})}};return n}))}],r={menuType:me().o.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&(0,ae.jsx)(X().Z,{isSmall:!0,style:{color:j().ZP.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6},children:(0,ae.jsx)(w()._H,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,ae.jsx)(q().Z,{...r,children:(0,ae.jsx)(W().ZP,{type:W().iW.Vertical,initialFocus:void 0,sections:a})})}function Ee(e){const t=(0,n().O7)(),[s,r]=(0,i.useState)(""),l=(0,i.useCallback)((e=>Ve().RF({environment:t,teamId:e,tab:De().a.Members,from:"teams_dropdown_for_team_guest"})),[t]),d=(0,a().yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),c=(0,o().VK)((()=>[{key:"teams for team guest",render:e=>(0,ae.jsx)(Q().Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,ae.jsx)(O().Z,{icon:(0,ae.jsx)(Ne().p,{disabled:!0,store:e}),title:(0,ae.jsx)(X().Z,{style:d.teamMenuItem,children:e.getName()}),caption:(0,ae.jsx)(w()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,He().oT)(e))||void 0===s?void 0:s.memberCountWithGuests)??0}}),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,d.teamMenuItem,l]),u=(0,ae.jsx)(Q().Z,{isInput:!0,children:(0,ae.jsx)(Oe().ZP,{value:s,onChange:(0,i.useCallback)((e=>{r(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:Re().Z.formatMessage(Fe.filterTeams)})}),p={menuType:me().o.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?u:void 0};return(0,ae.jsx)(q().Z,{...p,children:(0,ae.jsx)(Ue().Z,{filter:s,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:c})})}const Ke=function(e){const{teamGuest:t}=e,i=(0,o().VK)((()=>s(700696).default.state.teams),[]),n=(0,o().VK)((()=>i.filter((e=>e.isMemberOrGuest(t.userId,new Set)))),[i,t]),r=(0,a().yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),l=n.length??0;return(0,ae.jsx)(F().ZP,{popupType:F().Z4.Popup,renderOrigin:e=>(0,ae.jsx)(ye().D,{disabled:0===l,style:0===l?r.noTeams:r.button,...e,children:0===l?(0,ae.jsx)(w()._H,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(w()._H,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l}}),(0,de().i)(r.chevron)]})}),render:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ee,{teamGuest:t,teamStores:n}),(0,ae.jsx)(L().Z,{size:"100%"}),(0,ae.jsx)(Le,{teamGuest:t})]})})};var Ge=()=>s(825910),qe=()=>s(837341),We=()=>s(884749),ze=()=>s(286338),Ye=()=>s(572623),Qe=()=>s(122479),$e=()=>s(148126),Je=()=>s(345918),Xe=()=>s(105459),et=()=>s(123398),tt=()=>s(936879),st=()=>s(421736),it=()=>s(245845),nt=()=>s(72950),ot=()=>s(838266),at=()=>s(219099),rt=()=>s(621099),lt=()=>s(576387),dt=()=>s(741846),ct=()=>s(139543),ut=()=>s(815277),pt=()=>s(363832),mt=()=>s(30795),gt=()=>s(941832),ft=()=>s(754918),ht=()=>s(387454),St=()=>s(820717),yt=()=>s(458196),bt=()=>s(141455),xt=()=>s(174912),vt=()=>s(489434),wt=()=>s(872423),jt=()=>s(237427),Mt=()=>s(630029),_t=()=>s(253664),kt=()=>s(809807),Ct=()=>s(202937),It=()=>s(196234),Tt=()=>s(35724),Pt=()=>s(243225),At=()=>s(790424);function Zt(e){const t=i.useRef(null),{rows:s,hasMore:n}=(0,o().Kw)(e.listSource.rowsStore),a=(0,At().MG)({count:s.length,getScrollElement:()=>t.current,estimateSize:t=>e.estimateSize(s[t]),overscan:5}),r=a.getVirtualItems();return(0,i.useEffect)((()=>{!async function(){const t=r[r.length-1];n&&(null==t?void 0:t.index)>=s.length-1&&await e.listSource.loadMore()}()}),[e.listSource,r,s.length,n]),(0,ae.jsx)("div",{ref:t,style:{overflow:"auto",...e.style},children:(0,ae.jsx)("div",{style:{height:`${a.getTotalSize()}px`,width:"100%",position:"relative"},children:r.map((t=>(0,ae.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`},children:e.renderRow(s[t.index])},t.key)))})})}class Rt extends r().default{getInitialState(){return{rows:[],hasMore:!0}}}class Ht{constructor(e){this.rowsStore=new Rt,this.sort=void 0,this.filter=void 0,this._isFetching=!1,this.rowsStore.setState({rows:e,hasMore:!0})}async _fetchWithEffect(e){if(!this._isFetching){this._isFetching=!0;try{e(await this.fetch())}finally{this._isFetching=!1}}}async loadMore(){await this._fetchWithEffect((e=>{let{rows:t,hasMore:s}=e;this.rowsStore.setState({rows:[...this.rowsStore.getState().rows,...t],hasMore:s})}))}async setSort(e){this.sort=e,await this.refresh()}async setFilter(e){this.filter=e,await this.refresh()}async refresh(){await this._fetchWithEffect((e=>{let{rows:t,hasMore:s}=e;this.rowsStore.setState({rows:t,hasMore:s})}))}}class Dt extends Ht{constructor(e,t,s,i,n,o){super(e),this._spaceId=void 0,this._environment=void 0,this._cursor=void 0,this._limit=void 0,this._query=void 0,this._environment=t,this._limit=10,this._cursor=void 0,this._query=void 0,this._spaceId=s,this.filter=i,this.sort=n,this._query=o}async setMembershipFilter(e){this._cursor=void 0,this.rowsStore.setState({rows:[],hasMore:!1}),this.filter=e,await this.refresh()}async setSort(e){this._cursor=void 0,this.sort=e,this.rowsStore.setState({rows:[],hasMore:!1}),await this.refresh()}async setQuery(e){this._query=e,this._cursor=void 0,this.rowsStore.setState({rows:[],hasMore:!1}),await this.refresh()}async fetch(){var e,t;const{callApi:i}=await Promise.resolve().then(s.bind(s,824462)),n=await i({eventName:"listUsers",environment:this._environment,data:{cursor:this._cursor,membershipFilter:this.filter,limit:this._limit,sort:null===(e=this.sort)||void 0===e?void 0:e.field,sortDirection:null===(t=this.sort)||void 0===t?void 0:t.direction,query:this._query,spaceId:this._spaceId}});return"success"===n.type?(this._cursor=n.data.nextCursor,{rows:n.data.users,hasMore:n.data.hasMore}):{rows:[],hasMore:!1}}}function Bt(e,t,s){return(0,i.useMemo)((()=>[{id:"member",width:"guests"===e?s?"80%":"100%":"30%",header:e=>{let{sort:t,onSort:s}=e;return(0,ae.jsxs)(U().Z,{style:{display:"flex",alignItems:"center",gap:"2px",justifyContent:"flex-start"},ignoreLocalHoverState:!0,onClick:()=>null==s?void 0:s("name"),children:[(0,ae.jsx)(X().Z,{isSmall:!0,isSecondaryColor:!0,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"})}),"name"===(null==t?void 0:t.by)&&(0,ae.jsx)(kt().w,{up:t.asc})]})},cell:e=>{let{member:t,userStore:s,role:i,restorationStatus:n}=e;return(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,ae.jsx)(st().Z,{actorStore:s,restorationStatus:n,spaceRole:(0,st().K)(i),hideRolePill:!0})})}},..."guests"!==e?[{id:"groups",width:"20%",header:()=>(0,ae.jsx)(X().Z,{isSmall:!0,isSecondaryColor:!0,style:{paddingLeft:12},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),cell:e=>{let{groupIds:t,store:s,spacePermissionsSettingsStore:i,theme:n}=e;return(0,ae.jsx)("div",{style:{paddingLeft:8},children:t&&t.length>0?(0,ae.jsx)(re,{spaceStore:s,groupIds:t,onGroupClick:()=>{i.setState({...i.state,currentTab:nt().Q.Groups})}}):(0,ae.jsx)("div",{style:{color:n.mediumTextColor,fontSize:14,paddingLeft:8},children:"None"})})}},{id:"teamspaces",width:"25%",header:()=>(0,ae.jsx)(X().Z,{isSmall:!0,isSecondaryColor:!0,style:{paddingLeft:12},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.teamspacesColumn.header",defaultMessage:"Teamspaces"})}),cell:e=>{let{member:t,role:s,groupIds:i}=e;return(0,ae.jsx)("div",{style:{paddingLeft:8},children:"none"!==s&&(0,ae.jsx)(Ge().ZP,{memberId:t.id,userPermissionGroupIds:new Set(i??[])})})}},{id:"access-level",width:"25%",header:e=>{let{sort:t,onSort:s}=e;return(0,ae.jsxs)(U().Z,{style:{display:"flex",alignItems:"center",gap:"2px",justifyContent:"flex-start"},ignoreLocalHoverState:!0,onClick:()=>null==s?void 0:s("role"),children:[(0,ae.jsx)(X().Z,{isSmall:!0,isSecondaryColor:!0,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"})}),"role"===(null==t?void 0:t.by)&&(0,ae.jsx)(kt().w,{up:t.asc})]})},cell:e=>{let{role:t}=e;return(0,ae.jsx)(X().Z,{isSmall:!0,isSecondaryColor:!0,children:"editor"===t?"Workspace owner":"membership_admin"===t?"Membership admin":"read_and_write"===t?"Member":"Guest"})}}]:[],..."guests"===e&&s?[{id:"guest-pages",width:"20%",header:()=>(0,ae.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",paddingRight:"38px"},children:(0,ae.jsx)(X().Z,{isSmall:!0,isSecondaryColor:!0,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})})}),cell:e=>{var t;let{member:s,store:i,userStore:n,role:o,guestPages:a,isAdmin:r,subscribed:l}=e;if("none"===o&&null!=a&&a.guestIdToPages&&(null===(t=a.guestIdToPages[s.id])||void 0===t?void 0:t.pageIds.length)>0){const e=a.guestIdToPages[s.id];if(e)return(0,ae.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",paddingRight:"12px"},children:(0,ae.jsx)(je,{store:i,guest:{...s,userId:s.id,guestPageIds:e.pageIds,role:"none",isTeamGuest:!1,isPageGuest:!0},guestStore:n,isSubscribed:l??!1,hideActionButtons:!1})})}return null}}]:[]]),[e,s])}function Vt(e){var t;let{member:s,store:i,group:n,recentlyRemovedMembers:r,groupIds:l,guestPages:d,spacePermissionsSettingsStore:c}=e;const u=(0,a().Fg)(),p=(0,o().VK)((()=>fe().U6.createChildStore(i,{table:x().KJ,id:s.id})),[i,s.id]),m=Array.isArray(r)?null===(t=r.find((e=>e.userId===s.id)))||void 0===t?void 0:t.restorationStatus:void 0,g=(0,Pt().h5)(s.membership_type),f=(0,o().VK)((()=>{const e=Se().subscriptionDataStoreInstance.state;return Boolean(e&&he().YK(e))}),[]),h=(0,o().VK)((()=>i.canAdmin()),[i]),S=Bt(n,0,h);return(0,ae.jsx)("div",{style:{padding:"12px",borderBottom:`1px solid ${u.regularDividerColor}`,display:"flex",alignItems:"center",background:u.cardContentBackground,minHeight:"40px",fontSize:"14px",color:u.regularTextColor,width:"100%",boxSizing:"border-box"},children:S.map((e=>(0,ae.jsx)("div",{style:{width:e.width,display:"flex",alignItems:"center"},children:e.cell({member:s,store:i,userStore:p,groupIds:l,role:g,theme:u,spacePermissionsSettingsStore:c,guestPages:d,isAdmin:h,restorationStatus:m,subscribed:f})},e.id)))},s.id)}function Nt(e){let{group:t,store:s,recentlyRemovedMembers:r,spacePermissionsSettingsStore:l}=e;const c=(0,a().Fg)(),u=(0,n().O7)(),p=(0,o().VK)((()=>Be().default.state.currentSpaceStore),[]),m=(0,o().VK)((()=>(null==p?void 0:p.canAdmin())??!1),[p]),g=(0,o().VK)((()=>l.state.sorts[t]),[l,t]),f=(0,o().VK)((()=>"guests"===t?l.state.guestsFilter:l.state.membersFilter),[l,t]),h=(0,i.useMemo)((()=>g?{field:"name"===g.by?"name_normalized":(g.by,"type"),direction:g.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}),[g]),y=(0,i.useMemo)((()=>{if(!p)return null;const e=new Dt([],u,p.id,t,h,f);return e.refresh(),e}),[u,p,h,f,t]);(0,i.useEffect)((()=>{y&&g&&y.setSort(h)}),[y,g,h]);const{rows:b}=(0,o().Kw)(null==y?void 0:y.rowsStore),[x,v]=(0,i.useState)(!0);(0,i.useEffect)((()=>{null!=b&&b.length&&x&&v(!1)}),[b,x]);const[{value:w}]=(0,d().r5)((async()=>{if(!p)return;const e=await A().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:u,data:{userIds:(null==b?void 0:b.map((e=>e.id)))??[],spaceId:p.id},headers:(0,S().Bb)({cellId:void 0,spaceId:p.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[p,u,b]),[{value:j}]=(0,d().r5)((async()=>{if(!p||"guests"!==t||!m)return;const e=await A().callApi({eventName:"getGuestPagesForUserIds",environment:u,data:{spaceId:p.id,guestUserIds:(null==b?void 0:b.map((e=>e.id)))??[]},headers:(0,S().Bb)({cellId:void 0,spaceId:p.id})});return"success"===e.type?e.data:void 0}),[p,u,b,t,m]),M=Bt(t,0,m);return x||!y?(0,ae.jsx)(G().Z,{}):(0,ae.jsxs)("div",{style:{width:"100%",fontSize:13,background:c.cardContentBackground,flex:"1 1 0",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,ae.jsx)("div",{style:{display:"flex",padding:"12px",borderBottom:`1px solid ${c.regularDividerColor}`,color:c.mediumTextColor},children:M.map((e=>(0,ae.jsx)("div",{style:{width:e.width,display:"flex",alignItems:"center"},children:e.header({sort:g,onSort:e=>{const s=l.state.sorts[t];l.update((i=>({...i,sorts:{...i.sorts,[t]:{group:t,by:e,asc:(null==s?void 0:s.by)===e&&!s.asc}}})))}})},e.id)))}),(0,ae.jsx)(Zt,{estimateSize:()=>64,listSource:y,renderRow:e=>(0,ae.jsx)(Vt,{member:e,store:s,group:t,recentlyRemovedMembers:r,groupIds:null==w?void 0:w[e.id],guestPages:j,spacePermissionsSettingsStore:l}),style:{flex:"1 1 0"}})]})}var Ut=()=>s(167705),Ot=()=>s(24746),Ft=()=>s(749826),Lt=()=>s(788396),Et=()=>s(14328),Kt=()=>s(663773),Gt=()=>s(661769),qt=()=>s(550649);const Wt={maxWidth:275,borderRadius:30},zt={marginTop:8},Yt={maxWidth:160},Qt=50;function $t(e){const{store:t,currentTab:s,inviteLinkCode:i,members:n,guests:o,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,accessRequestRenderValues:l}=e;return s===nt().Q.Members?(0,ae.jsx)(ks,{isMobile:!1,store:t,inviteLinkCode:i,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,members:n}):s===nt().Q.Guests?(0,ae.jsx)(Cs,{store:t,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,guests:o}):s===nt().Q.Groups?(0,ae.jsx)(Ss,{store:t,spacePermissionsSettingsStore:a}):s===nt().Q.Reprovisioning?(0,ae.jsx)(Jt,{store:t}):s===nt().Q.Requests?(0,ae.jsx)(wt().ZP,{spaceStore:t,accessRequestRenderValues:l}):void(0,_().t1)(s)}function Jt(e){let{store:t}=e;const s=(0,a().yK)((()=>({label:{width:"80%"}})),[]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(X().Z,{isMultiline:!0,style:s.label,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,ae.jsx)(X().Z,{isMultiline:!0,style:s.label,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,ae.jsx)(L().Z,{size:24,isHidden:!0}),(0,ae.jsx)(Xt,{store:t})]})}function Xt(e){let{store:t}=e;const s=(0,n().O7)(),[o,a]=(0,i.useState)([]),[{value:r,status:l}]=(0,d().r5)((async()=>{const e=await A().callApi({eventName:"getRecoverableSpaceUserContent",environment:s,data:{spaceId:t.id}});if("failed"===e.type)throw R().x2(e),e;return e.data}),[s,t.id]),c=(null==r?void 0:r.recentSpaceRecoverPages)??[],u=(0,i.useCallback)((async(e,i)=>{const{accept:n}=await R().gt({message:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;a([...o,e]);const r=await A().callApi({eventName:"transferSpaceUserContent",environment:s,data:{spaceId:t.id,fromUserId:e,toUserId:i}});"failed"===r.type&&R().x2(r),a(o.filter((t=>t!==e)))}),[s,t.id,o]),p=(0,i.useCallback)((e=>{const s=[];for(const{userId:i,privatePagesCount:n}of e){if(n<1)continue;const e=fe().U6.createChildStore(t,{table:x().KJ,id:i});s.push({key:i,columns:[(0,ae.jsx)(ss,{userStore:e},"Member"),n,o.includes(i)?(0,ae.jsx)(ts,{}):(0,ae.jsx)("div",{style:{marginLeft:-4},children:(0,ae.jsx)(jt().Z,{mode:Mt().z.Button,focused:!1,title:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:t,userIds:o,onChange:e=>{let[t]=e;u(i,t)}})})]})}return s}),[t,o,u]);return"pending"===l?(0,ae.jsx)(ts,{}):null!=r&&r.recentSpaceRecoverPages?(0,ae.jsx)(Ze().Z,{columns:[{key:"user",header:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:p(c)}):null}function es(){const e=Se().subscriptionDataStoreInstance.state;return Boolean(e&&he().YK(e))}function ts(){return(0,ae.jsx)(G().Z,{style:{margin:"calc(50% - 1em) auto"}})}function ss(e){let{userStore:t,restorationStatus:s}=e;return(0,ae.jsx)(st().Z,{actorStore:t,restorationStatus:s})}function is(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,ae.jsx)(Ge().ZP,{memberId:t.userId,userPermissionGroupIds:s}):null}function ns(e,t,s,i){return t&&t.length>0?(0,l().ZP)(t,e,(e=>{const t=fe().U6.createChildStore(s,{table:x().KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}function os(e){let{store:t}=e;return(0,o().VK)((()=>B().LV(t)),[t])?(0,ae.jsx)(X().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,ae.jsxs)("div",{children:[(0,ae.jsx)(X().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:2},children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace.",values:{setupdomainlink:e=>(0,ae.jsx)(ke().Z,{onClick:()=>{ot().default.setState({...ot().default.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,ae.jsx)(X().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.membersTab.learnMore",defaultMessage:"<billingguidelink>Learn more about adding members.</billingguidelink>",values:{billingguidelink:e=>(0,ae.jsx)(ke().Z,{href:(0,$e().UY)("guides.billingGuide"),children:e})}})})]})}function as(e){return he().qF(e)&&es()}function rs(e){let{group:t,user:s,userStore:i,store:o}=e;const a=(0,w().YB)(),r=(0,n().O7)();return(0,ae.jsx)(F().ZP,{popupType:F().Z4.Popup,renderOrigin:e=>(0,ae.jsx)(E().Z,{...e,icon:u().o,iconStyle:{height:14,width:14},ariaLabel:a.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,ae.jsx)(O().Z,{...e,icon:(0,g()._)({height:17,width:17}),title:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=es()?"read_and_write":"editor";R().vC({message:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().lo(),n.close()},items:[{label:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await V().s({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!es(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,r)},{key:"removeFromWorkspace",render:e=>(0,ae.jsx)(O().Z,{...e,icon:(0,p().V)({height:17,width:17,color:j().ZP.red}),title:(0,ae.jsx)("span",{style:{color:j().ZP.red},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;R().vC({message:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().lo(),n.close()},items:[{label:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await V().w({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,r)}],a=[{key:"team section",render:e=>(0,ae.jsx)(Q().Z,{...e}),items:n}];return(0,ae.jsx)(q().Z,{menuType:me().o.Popup,children:(0,ae.jsx)(W().ZP,{type:W().iW.Vertical,sections:a,initialFocus:void 0,style:{minWidth:265}})})}})}function ls(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}const ds=(0,w().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});function cs(){H().j({message:ds.updatingPermissions})}function us(){H().x()}async function ps(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)cs(),"none"===t?(await A().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await lt().bi(n)):N().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>D().tQ({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),us();else{await B().bf({environment:n,spaceId:i.id,userSettingsStore:s})&&(P().Jk(n,{invite_origin:"workspace_leave",domainType:(0,Ye().JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),ot().default.setState({...ot().default.state,open:!1}))}}function ms(e){let{buttonStyle:t,store:s}=e;const a=(0,n().O7)(),r=(0,o().VK)((()=>s.canEditMembership()),[s]),l=(0,o().VK)((()=>!r&&!s.getDisableMembershipRequests()&&(0,ze().p1)()),[r,s]),d=(0,o().VK)((()=>es()),[]),c=(0,i.useCallback)((()=>{(0,tt().i)(a)}),[a]);return l?(0,ae.jsx)(et().sf,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,ae.jsx)(Y().Z,{isLarge:!0,onClick:c,children:(0,ae.jsx)(w()._H,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(qe().r,{disabled:!r,store:s,onInviteClick:cs,onInviteComplete:us,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,ae.jsx)(We()._,{inviteOrigin:"space_setting_slack_imports",canEditPermission:r,onInviteClick:cs,onInviteComplete:us})]})}function gs(e){let{member:t,store:s}=e;const i=(0,n().O7)(),a=(0,w().YB)(),r=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:d}=(0,o().VK)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=Be().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),c=(0,o().VK)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Qe().U7)();return M().oA(y().an.map((e=>{if(i||"membership_admin"!==e)return!t.canAdmin()&&y().Bc(e)?{role:e,disabledInfo:{isDisabled:!0,disabledMessage:s}}:{role:e}})))}(a,s)),[a,s]),u=(0,o().VK)((()=>!(s.canAdmin()||s.canEditMembership()&&(y().RN(t.role)||t.userId===r))),[r,t,s]);return l?(0,ae.jsx)(Ce().ZP,{role:t.role,table:b().bx,type:"user_permission",disabled:u,isUserPermission:t.userId===r,upgradeButtonName:"space_permission_item",availableRoleItems:c,onChange:async e=>{await ps(t,e,l,s,i)},buttonStyle:Yt,onRemoveMemberClick:async()=>{let e,n;if(ct().U()&&(n=f().Il(),e=await(0,gt().f)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,dt().q)(i,t.userId,null==d?void 0:d.id))()&&(await(async e=>{await ps(t,"none",l,s,i),P().Sw(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Ye().JF)(),new_workspace_member_count:-1})})(n),e&&rt().wA(i))}}):null}function fs(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(y().xm[t.role]-y().xm[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:fe().U6.createChildStore(s,{table:x().KJ,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(h().T_T.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,a=t.store.getFullName(i)||s;return n.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}function hs(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function Ss(e){let{store:t,spacePermissionsSettingsStore:s}=e;const r=(0,w().YB)(),d=(0,a().Fg)(),c=(0,n().O7)(),u=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,groupsFilter:e.target.value})}(e,s)),[s]),p=(0,i.useCallback)((()=>function(e,t,s){N().createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:e,canUndo:!0,perform:e=>{const i=B().mo({spaceStore:t,transaction:e});if(i){s.setState({...s.state,editingNameGroupId:i.getGroupId(),groupNameInputValue:""});const e=h().kk5.fromValue(yt().GQ,i.getValue()),t=[...se().Z.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],n=(0,l().ZP)(s.state.groupsFilter,t,(e=>e.group.name||""));se().Z.setState({...se().Z.state,permissionGroupsAndMemberCounts:n})}}}),I().O8(e)}(c,t,s)),[c,t,s]),g=(0,o().VK)((()=>s.state.groupsFilter),[s]),f=(0,o().VK)((()=>as(c)),[c]),S=(0,o().VK)((()=>t.canEditMembership()),[t]),y=(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),b=(0,o().VK)((()=>t.isDefined()),[t]),x=(0,o().VK)((()=>0!==(0,Qe().eL)()),[]),v=(0,o().VK)((()=>(0,He().bq)()),[]),j=(0,o().VK)((()=>function(e,t){return as(t)&&e.canEditMembership()}(t,c)),[c,t]);return b?(0,ae.jsxs)("div",{children:[f?(0,ae.jsx)(X().Z,{isMultiline:!0,style:{width:"80%"},children:v?(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,ae.jsx)(Et().Z,{subscriptionTier:"plus",from:"permission_groups",icon:ht().x,title:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,ae.jsx)(L().Z,{size:24,isHidden:!0}),(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px 8px"},children:[f&&(0,ae.jsx)(we().Z,{renderTooltip:()=>!S&&y,render:e=>(0,ae.jsx)(Y().Z,{isLarge:!0,onClick:p,disabled:!S,...S?void 0:e,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}),x&&(0,ae.jsx)(K().Z,{placeholder:r.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,m().R)(ls(d)),showClearButton:!0,format:K().B.Small,value:g,style:{...Wt,marginRight:0},onChange:u,onClick:()=>{I().RP(c,{current_tab:nt().Q.Groups})}})]}),x&&(0,ae.jsx)(Ct().Z,{spaceStore:t,permissionsSettingsStore:s,canEdit:j})]}):null}function ys(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,ae.jsx)(re,{spaceStore:s,groupIds:t,onGroupClick:()=>{!function(e,t){t.setState({...t.state,currentTab:e})}(nt().Q.Groups,i)}})}function bs(e){let{group:t,user:s,userStore:i,store:n}=e;const a=(0,o().VK)((()=>(0,ze().F$)()),[]),r=(0,o().VK)((()=>es()),[]);return"none"===s.role?a&&"team_guests"===t?(0,ae.jsx)(Ke,{teamGuest:s}):(0,ae.jsx)(je,{store:n,guest:s,guestStore:i,isSubscribed:r,hideActionButtons:a}):(0,ae.jsx)(gs,{store:n,member:s})}function xs(e){let{members:t,store:s}=e;const i=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]);return(0,ae.jsx)(ae.Fragment,{children:t.map((e=>{const t=fe().U6.createChildStore(s,{table:x().KJ,id:e.userId});return(0,ae.jsxs)("div",{style:i.container,children:[(0,ae.jsx)("div",{style:i.memberContainer,children:(0,ae.jsx)(ss,{userStore:t})}),(0,ae.jsx)("div",{style:i.permissionContainer,children:(0,ae.jsx)(bs,{store:s,group:"members",user:e,userStore:t})})]},e.userId)}))})}function vs(e){let{group:t,spaceMembers:s,store:a,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l}=e;const c=(0,n().O7)(),u=(0,o().VK)((()=>r.state.sorts[t]),[t,r]),p={key:"user",header:(0,ae.jsxs)(U().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{hs(t,"name",r)},style:{display:"flex",alignItems:"center"},children:[(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),u&&"name"===u.by&&(0,ae.jsx)(kt().w,{up:u.asc})]}),style:{width:"45%"}},m={key:"groups",header:(0,ae.jsx)(U().Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},g={key:"teams",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},f={key:"access_level",header:(0,ae.jsxs)(U().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{hs(t,"role",r)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),u&&"role"===u.by&&(0,ae.jsx)(kt().w,{up:u.asc})]}),style:{width:"20%",textAlign:"center"}},h={key:"pages",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},y={key:"three_dot",header:(0,ae.jsx)(U().Z,{disabled:!0,ignoreLocalHoverState:!0})},b=(0,o().VK)((()=>as(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),v=(0,o().VK)((()=>("team_guests"===t||"guests"===t)&&(0,ze().F$)()&&a.canEditMembership()),[t,a]),j=(0,o().VK)((()=>(0,He().bq)()),[]);let M="members"===t&&j?[p,g,f]:v?[p,h,y]:[p,h];b&&(M=[...M.slice(0,1),m,...M.slice(1)]);const _=(0,o().Kw)(l),k=(0,o().VK)((()=>s.map((e=>({member:e,store:fe().U6.createChildStore(a,{table:x().KJ,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,a]),C=(0,o().VK)((()=>Be().default.state.currentSpaceStore),[]),[{value:I}]=(0,d().r5)((async()=>{if(!C)return;const e=await A().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:k.map((e=>e.member.userId)),spaceId:C.id},headers:(0,S().Bb)({cellId:void 0,spaceId:C.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[C,c,k]);return(0,ae.jsx)(Ze().Z,{columns:M,rows:k.map((e=>{var s;const{member:n,store:o}=e,l=I&&I[n.userId],d=Array.isArray(_)?null===(s=_.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(st().Z,{actorStore:o,restorationStatus:d,spaceRole:(0,st().K)(n.role),hideRolePill:!0})},"member")];return b&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(ys,{store:a,spacePermissionsSettingsStore:r,groupIds:l||[]})},"groups")),"members"===t&&j&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(is,{user:n,userPermissionGroupIds:new Set(l??[])})},"teams")),c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(bs,{store:a,group:t,user:n,userStore:o})},"user-permission")),v&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(rs,{group:t,user:n,userStore:o,store:a})},"three-dot")),{key:n.userId,columns:c}}))})}function ws(e){var t;let{members:s,store:n,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r}=e;const l=(0,w().YB)(),d=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(a)),[a]),{membersFilter:c,limitMembers:u}=(0,o().VK)((()=>{const{membersFilter:e,limitMembers:t}=a.state;return{membersFilter:e,limitMembers:t}}),[a]),p=(0,o().VK)((()=>ns(s,c,n,l)),[s,c,n,l]),m=(0,o().VK)((()=>fs("members",p,n,l,a)),[p,n,l,a]),g=(0,Gt().pQ)({spaceId:n.id}),f=u?m.slice(0,Qt):m,h=(0,qt().Z)(n),S=(0,Kt().kw)(n.id,null==g?void 0:g.subscription,m.length),y=h&&(null==g?void 0:g.subscription)&&S&&S>0,b=m.length;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,ae.jsx)(Te().Z,{smallMarginBottom:!0,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,ae.jsx)(os,{store:n}),(0,ae.jsx)("div",{style:{margin:"24px 0px"},children:y?(0,ae.jsx)(Tt().F,{quantityOfSpaceMembers:b,quantityOfPaidSeats:S,nextBillingDate:(null==g||null===(t=g.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""}):null}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(vs,{store:n,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,group:"members",spaceMembers:f}),m.length>Qt&&u&&(0,ae.jsx)($().Z,{style:zt,onClick:d,children:(0,ae.jsx)(w()._H,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:m.length-Qt}})})]})]})}function js(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r}=e;const l=(0,w().YB)(),d=(0,a().Fg)(),c=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitTeamGuests:!1})}(n)),[n]),{teamGuestsFilter:u,limitTeamGuests:p}=(0,o().VK)((()=>{const{teamGuestsFilter:e,limitTeamGuests:t}=n.state;return{teamGuestsFilter:e,limitTeamGuests:t}}),[n]),g=t.filter((e=>e.isTeamGuest)),f=(0,o().VK)((()=>ns(g,u,s,l)),[g,u,s,l]),h=(0,o().VK)((()=>fs("team_guests",f,s,l,n)),[f,s,l,n]),S=p?h.slice(0,5):h;return(0,ae.jsx)("div",{style:{marginBottom:5},children:(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:(0,ae.jsx)(K().Z,{placeholder:l.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().R)(ls(d)),showClearButton:!0,format:K().B.Small,value:u,style:Wt,onChange:e=>{n.setState({...n.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),(0,ae.jsx)(vs,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r,group:"team_guests",spaceMembers:S}),h.length>5&&p&&(0,ae.jsx)($().Z,{style:zt,onClick:c,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:h.length-5}})})]})})}function Ms(e){let{guests:t,store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l}=e;const d=(0,w().YB)(),c=(0,a().Fg)(),u=(0,n().O7)(),p=(0,o().Kw)(l),g=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitGuests:!1})}(r)),[r]),{guestsFilter:f,limitGuests:h}=(0,o().VK)((()=>{const{guestsFilter:e,limitGuests:t}=r.state;return{guestsFilter:e,limitGuests:t}}),[r]),S=t.filter((e=>!e.isTeamGuest&&e.isPageGuest)),y=(0,o().VK)((()=>ns(S,f,s,d)),[S,f,s,d]),b=(0,o().VK)((()=>fs("guests",y,s,d,r)),[y,s,d,r]),x=(0,o().VK)((()=>(0,ze().F$)()?5:Qt),[]),v=(0,o().VK)((()=>Be().default.state.currentSpaceStore),[]),j=(0,o().Kw)(Se().subscriptionDataStoreInstance),M=(0,o().VK)((()=>Boolean(v&&j&&"subscribed_admin"===j.type&&Ft().default.checkGate({gateName:"enable_guest_export"}))),[v,j]),_=(0,o().VK)((()=>it().Z.state.shouldUseEdgeCache),[]),k=h?b.slice(0,x):b;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ae.jsx)(K().Z,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().R)(ls(c)),showClearButton:!0,format:K().B.Small,value:f,style:Wt,onChange:e=>{r.setState({...r.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{I().RP(u,{current_tab:nt().Q.Guests})}}),M&&(0,ae.jsx)(z().Z,{disabled:!1,color:"uiBlue",onClick:()=>function(e,t,s){const{currentSpaceStore:i}=Be().default.state,n=Se().subscriptionDataStoreInstance.state;i&&n&&"subscribed_admin"===n.type&&xt().Mj(s,{intl:t,spaceStore:i,guests:e})}(b,d,u),disabledFeedback:!0,children:(0,ae.jsx)(w()._H,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})})]}),_?(0,ae.jsx)(Nt,{group:"guests",store:s,recentlyRemovedMembers:p,spacePermissionsSettingsStore:r}):(0,ae.jsx)(vs,{store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l,group:"guests",spaceMembers:k}),b.length>x&&h&&(0,ae.jsx)($().Z,{style:zt,onClick:g,children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:b.length-x}})})]})}function _s(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a}=e;const[r,l]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!0),u=(0,o().VK)((()=>!Boolean(s.getSettingsStore().getKeyStore("disable_team_guests").getValue())),[s]);return(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[u&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(Ut().Z,{open:r,onClick:()=>l(!r),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,ae.jsxs)("div",{style:{marginLeft:3},children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,ae.jsx)(X().Z,{style:{fontSize:15},children:(0,ae.jsx)(w()._H,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)(X().Z,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isTeamGuest)).length})]}),(0,ae.jsx)(X().Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,ae.jsx)(w()._H,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})})]})]}),r&&(0,ae.jsx)(js,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,guests:t})]}),(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(Ut().Z,{open:d,onClick:()=>c(!d),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,ae.jsxs)("div",{style:{marginLeft:3},children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,ae.jsx)(X().Z,{style:{fontSize:15},children:(0,ae.jsx)(w()._H,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)(X().Z,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),(0,ae.jsx)(X().Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,ae.jsx)(w()._H,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they've been invited to."})})]})]}),d&&(0,ae.jsx)(Ms,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,guests:t})]})}function ks(e){let{members:t,isMobile:s,store:i,inviteLinkCode:r,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d}=e;const c=(0,o().VK)((()=>it().Z.state.shouldUseEdgeCache),[]),u=(0,o().Kw)(d),p=(0,n().O7)(),g=(0,w().YB)(),f=(0,a().Fg)(),{membersFilter:h}=(0,o().VK)((()=>{const{membersFilter:e}=l.state;return{membersFilter:e}}),[l]);return s?(0,ae.jsx)(xs,{store:i,members:t}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(It().zm,{spaceStore:i,inviteLinkCode:r,spacePermissionsSettingsStore:l,shouldUseEdgeCache:c}),(0,ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ae.jsx)(ms,{store:i}),(0,ae.jsx)(K().Z,{placeholder:g.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().R)(ls(f)),showClearButton:!0,format:K().B.Small,value:h,style:Wt,onChange:e=>{l.setState({...l.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{I().RP(p,{current_tab:nt().Q.Members})}})]}),c?(0,ae.jsx)(Nt,{group:"members",store:i,recentlyRemovedMembers:u,spacePermissionsSettingsStore:l}):(0,ae.jsx)(ws,{store:i,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d,members:t})]})}function Cs(e){let{guests:t,store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a}=e;const r=(0,n().O7)(),l=(0,o().VK)((()=>s.canAdmin()),[s]),d=r.currentUser.id,c=s.id,u=(0,ut().oo)({name:"internal_guests",spaceId:c,userId:d,amount:0}),p=(0,o().Kw)(Se().subscriptionDataStoreInstance),m=(0,Xe().Y)(p),g=(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,ae.jsx)("span",{style:{fontWeight:k().Ue.semibold},children:e})}}),f=u&&(0,bt().V5)(u,{available:()=>l?(0,ae.jsx)(_t().Z,{icon:St().v,title:g,deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,upsell:e=>{let{limit:t,upsell:s}=e;return"product"===s.type||"contact_sales"===s.type?(0,ae.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,ae.jsx)(Ot().r,{children:(0,ae.jsx)(vt().j,{iconGroup:ft().G,display:"inline",tint:"yellow",label:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To manage guest seats, <saleslink>reach out to sales</saleslink>.",values:{saleslink:e=>(0,ae.jsx)(ke().Z,{onClick:()=>(0,Lt().nx)({initialQuestion:"manage_guests",openedFrom:"permissions_guest_limit_banner"}),children:e})}})})})}):"contact_account_manager"===s.type?(0,ae.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,ae.jsx)(Ot().r,{children:(0,ae.jsx)(vt().j,{iconGroup:ft().G,display:"inline",tint:"yellow",label:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.description.sales_assisted",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."})})})}):(0,_().t1)(s)},blocked:()=>null}),h=(0,o().VK)((()=>(0,ze().F$)()),[]);return 0===m?(0,ae.jsx)(_t().Z,{icon:St().v,title:l?(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"<bold>Your workspace has no guests.</bold> Change who can invite guests in the <bold>Security</bold> tab.",values:{bold:e=>(0,ae.jsx)("span",{style:{fontWeight:k().Ue.semibold},children:e})}}):void 0,deeplinkTab:l?{currentTab:"security",defaultSubtab:void 0}:void 0}):(0,ae.jsxs)(ae.Fragment,{children:[f,h?(0,ae.jsx)(_s,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a,guests:t}):(0,ae.jsx)(Ms,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a,guests:t})]})}const Is={maxWidth:275,borderRadius:30},Ts={marginTop:8},Ps={maxWidth:160},As=50;function Zs(e){const{store:t,isMobile:l,unreadAccessRequests:c}=e,u=(0,n().O7)(),p=(0,o().qz)(void 0,nt().Z),m=(0,o().qz)(void 0,r().default),g=(0,pt().$)({spaceId:t.id});(0,s(732811).K)((()=>{!function(e){ot().default.state.open&&"members"===ot().default.state.currentTab&&ot().default.state.defaultSubtab&&(e.setState({...e.state,currentTab:ot().default.state.defaultSubtab}),ot().default.setState({...ot().default.state,defaultSubtab:void 0}))}(p),async function(e,t,s){if(!t.canAdmin())return;const i=await A().callApi({eventName:"getRecentlyRemovedUsers",environment:e,data:{spaceId:t.id}});if("failed"===i.type)throw R().x2(i),i;s.setState(i.data.recentlyRemovedMembers)}(u,t,m)}));const[{value:f}]=(0,d().r5)((async()=>{const e=await A().callApi({eventName:"getAccessRequests",environment:u,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)return[];const i=e.data.accessRequestIds;return await s(509417).Vy(u,t,i)}),[u,t],{throttle:1e3}),h=(0,o().VK)((()=>!s(804217).default.state.online),[]),S=(0,o().Kw)(Se().subscriptionDataStoreInstance),y=(0,o().VK)((()=>S?he().CM(S):[]),[S]),b=(0,o().VK)((()=>!!S&&M().yW(y.map((e=>fe().U6.createChildStore(t,{table:x().KJ,id:e.userId}).isReady())))),[t,S,y]),j=(0,o().VK)((()=>y.filter(v().nB)),[y]),C=(0,o().VK)((()=>y.filter(v().FN)),[y]),T=(0,o().VK)((()=>(0,ze().F$)()),[]),P=(0,o().VK)((()=>it().Z.state.shouldUseEdgeCache),[]),{tabs:Z,selectedTabIndex:H,currentTab:D}=(0,o().VK)((()=>{const e=Ws(u,C,t),s=e.map((e=>(0,ae.jsx)(Hs,{tab:e,unreadAccessRequests:c,accessRequestRenderValues:f},e))),i=p.state.currentTab;return{tabs:s,selectedTabIndex:e.indexOf(i),currentTab:i}}),[u,C,t,p,c,f]),B=(0,i.useCallback)((e=>{!function(e,t,s,i,n){const o=Ws(s,t,i)[e];switch(o){case nt().Q.Members:I().qT(s,{tab:"members"});break;case nt().Q.Groups:I().qT(s,{tab:"groups"});break;case nt().Q.Guests:I().qT(s,{tab:"guests"});break;case nt().Q.Reprovisioning:I().qT(s,{tab:"reprovisioning"});break;case nt().Q.Requests:I().qT(s,{tab:"requests"});break;default:(0,_().t1)(o)}n.state.currentTab===nt().Q.Requests&&o!==nt().Q.Requests&&at().Z.reset();di(o,n)}(e,C,u,t,p)}),[C,u,t,p]),V=(0,a().yK)((()=>({tabBarMenuItem:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitle:{fontSize:16},labelContainer:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},peopleTabTitleContainer:{display:"flex",alignItems:"center",gap:7},peopleTabTitle:{fontWeight:k().Ue.medium,fontSize:17},peopleSubtitle:{fontSize:15}})),[]);if(h)return(0,ae.jsx)(Ns,{});if(!S||!b||void 0===f)return(0,ae.jsx)(Vs,{});if(l)return(0,ae.jsx)(Rs,{store:t,members:j,spacePermissionsSettingsStore:p,recentlyRemovedMembersStore:m});const N=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(s(539245).ZP,{tabs:Z,selectedIndex:H,onChange:B,style:V.tabBarMenuItem,tabTitleStyle:V.tabTitle}),T&&(0,ae.jsxs)("div",{style:V.labelContainer,children:[(0,ae.jsxs)("div",{style:V.peopleTabTitleContainer,children:[(0,ae.jsx)(X().Z,{style:V.peopleTabTitle,children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,ae.jsx)(_e().Z,{href:(0,$e().UY)("guides.members"),analyticsFrom:"members_settings"})]}),(0,ae.jsx)(X().Z,{isSecondaryColor:!0,style:V.peopleSubtitle,children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}),(0,ae.jsx)($t,{store:t,currentTab:D,members:j,inviteLinkCode:g,guests:C,spacePermissionsSettingsStore:p,recentlyRemovedMembersStore:m,accessRequestRenderValues:f})]});return P?(0,ae.jsx)("div",{style:{padding:"36px 60px",display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:N}):(0,ae.jsx)(Ie().ZP,{children:N})}function Rs(e){const{store:t,members:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n}=e,a=(0,o().VK)((()=>t.canEditMembership()),[t]),r=Xs();return(0,ae.jsxs)(ae.Fragment,{children:[a&&(0,ae.jsxs)(Q().Z,{shouldShowBottomDivider:!0,children:[(0,ae.jsx)(ai,{store:t}),(0,ae.jsx)("div",{style:r,children:(0,ae.jsx)(ri,{store:t,isMobile:!0,spacePermissionsSettingsStore:i})})]}),(0,ae.jsx)(Q().Z,{children:(0,ae.jsx)(hi,{isMobile:!0,store:t,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,members:s})})]})}function Hs(e){let{tab:t,accessRequestRenderValues:s,unreadAccessRequests:i}=e;const r=(0,n().O7)(),l=(0,o().VK)((()=>zs(r)),[r]),d=(0,o().VK)((()=>se().Z.state.permissionGroupsAndMemberCounts.length),[]),c=(0,o().VK)((()=>(0,ze().F$)()),[]),u=(0,o().Kw)(Se().subscriptionDataStoreInstance),p=(0,Xe().Y)(u),m=(0,mt().V)(u),g=(0,a().yK)((e=>({lightTextColor:{color:e.lightTextColor}})),[]);switch(t){case nt().Q.Members:return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:g.lightTextColor,children:m})]});case nt().Q.Groups:return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),l&&(0,_().$K)(d)&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:g.lightTextColor,children:d})]})]});case nt().Q.Guests:return(0,ae.jsxs)(ae.Fragment,{children:[c?(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:g.lightTextColor,children:p})]});case nt().Q.Reprovisioning:return(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"});case nt().Q.Requests:return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:g.lightTextColor,children:(0,ae.jsx)(li,{accessRequestRenderValues:s})}),(0,ae.jsx)(ei,{unreadAccessRequests:i})]});default:(0,_().t1)(t)}}const Ds=i.memo(Zs);function Bs(){const e=Se().subscriptionDataStoreInstance.state;return Boolean(e&&he().YK(e))}function Vs(){return(0,ae.jsx)(G().Z,{style:{margin:"calc(50% - 1em) auto"}})}function Ns(){return(0,ae.jsx)(Ie().ZP,{children:(0,ae.jsx)(X().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})})}function Us(){return(0,ae.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,ae.jsx)(_e().Z,{title:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,$e().UY)("guides.members"),analyticsFrom:"members_settings"})})}function Os(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,c().K)({...s,transform:"rotate(180deg)"}):(0,c().K)(s)}function Fs(e){let{userStore:t,restorationStatus:s}=e;return(0,ae.jsx)(st().Z,{actorStore:t,restorationStatus:s})}function Ls(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,ae.jsx)(Ge().ZP,{memberId:t.userId,userPermissionGroupIds:s}):null}function Es(e){return Boolean(e.getKeyStore("invite_link_enabled").getValue())}function Ks(e,t){var s;return t.canAdmin()&&(0,ut().DE)(e,{name:"content_reprovisioning",spaceId:t.id,userId:null===(s=e.currentUser)||void 0===s?void 0:s.id})}function Gs(e){return e.canEditMembership()&&(0,ze().p1)()}function qs(e){let{store:t}=e;return(0,o().VK)((()=>B().LV(t)),[t])?(0,ae.jsx)(X().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,ae.jsxs)("div",{children:[(0,ae.jsx)(X().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6},children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.membersTab.manageMembersDescriptionText",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>(0,ae.jsx)(ke().Z,{onClick:()=>{ot().default.setState({...ot().default.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,ae.jsx)(X().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(w()._H,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>(0,ae.jsx)(ke().Z,{href:(0,$e().UY)("guides.billingGuide"),children:e})}})})]})}function Ws(e,t,s){return[nt().Q.Members,nt().Q.Groups,nt().Q.Guests,...Ks(e,s)?[nt().Q.Reprovisioning]:[],...Gs(s)?[nt().Q.Requests]:[]]}function zs(e){return he().qF(e)&&Bs()}function Ys(e){let{store:t}=e;const s=(0,n().O7)();return(0,o().VK)((()=>t.isDefined()),[t])?(0,ae.jsx)(w()._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:e=>(0,ae.jsx)(ke().Z,{onClick:()=>{R().vC({message:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:R().lo,items:[{label:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await A().callApi({eventName:"refreshInviteLink",environment:s,data:{spaceId:t.id}}),lt().bi(s)}}]})},children:e})}}):null}function Qs(e){let{inviteLinkUrl:t,isMobile:s}=e;const i=(0,n().O7)(),{mobileNative:o}=i,a=(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),r=async()=>{const e=await Z().F.clipboardActions.load();e.copyString({environment:i,stringValue:t,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),C().nl(i)},l=()=>{o&&o.share(t),C().nl(i)};return s?(0,ae.jsxs)("div",{children:[(0,ae.jsx)(K().Z,{type:"text",format:K().B.Default,value:t,disabled:!0}),o?(0,ae.jsx)(z().Z,{onClick:l,style:{marginTop:10,width:"100%"},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,ae.jsx)(z().Z,{onClick:r,style:{marginTop:10,width:"100%"},children:a})]}):(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,ae.jsx)(K().Z,{type:"text",format:K().B.Default,value:t,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),(0,ae.jsx)(Y().Z,{onClick:r,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},isLarge:!0,children:a})]})}function $s(e){let{group:t,user:s,userStore:i,store:o}=e;const a=(0,w().YB)(),r=(0,n().O7)();return(0,ae.jsx)(F().ZP,{popupType:F().Z4.Popup,renderOrigin:e=>(0,ae.jsx)(E().Z,{...e,icon:u().o,iconStyle:{height:14,width:14},ariaLabel:a.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,ae.jsx)(O().Z,{...e,icon:(0,g()._)({height:17,width:17}),title:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=Bs()?"read_and_write":"editor";R().vC({message:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().lo(),n.close()},items:[{label:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await V().s({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!Bs(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,r)},{key:"removeFromWorkspace",render:e=>(0,ae.jsx)(O().Z,{...e,icon:(0,p().V)({height:17,width:17,color:j().ZP.red}),title:(0,ae.jsx)("span",{style:{color:j().ZP.red},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;R().vC({message:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().lo(),n.close()},items:[{label:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await V().w({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,r)}],a=[{key:"team section",render:e=>(0,ae.jsx)(Q().Z,{...e}),items:n}];return(0,ae.jsx)(q().Z,{menuType:me().o.Popup,children:(0,ae.jsx)(W().ZP,{type:W().iW.Vertical,sections:a,initialFocus:void 0,style:{minWidth:265}})})}})}function Js(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}function Xs(){const{WindowSizeStore:e}=(0,n().O7)(),t=(0,o().VK)((()=>e.getSafePaddingRightCSS(14)),[e]);return(0,a().yK)((e=>({mobileMenuItem:{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:t,background:e.cardContentBackground}})),[t]).mobileMenuItem}function ei(e){let{unreadAccessRequests:t}=e;const s=(0,a().Fg)();return t&&t>0?(0,ae.jsx)(Ae().z,{color:s.redBadgeBackground,style:{marginLeft:6}}):null}function ti(){const e=(0,w().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});H().j({message:e.updatingPermissions})}function si(){H().x()}async function ii(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)ti(),"none"===t?(await A().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await lt().bi(n)):N().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>D().tQ({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),si();else{await B().bf({environment:n,spaceId:i.id,userSettingsStore:s})&&(P().Jk(n,{invite_origin:"workspace_leave",domainType:(0,Ye().JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),ot().default.setState({...ot().default.state,open:!1}))}}function ni(e){let{buttonStyle:t,store:s}=e;const a=(0,n().O7)(),r=(0,o().VK)((()=>s.canEditMembership()),[s]),l=(0,o().VK)((()=>!r&&!s.getDisableMembershipRequests()&&(0,ze().p1)()),[r,s]),d=(0,o().VK)((()=>Bs()),[]),c=(0,i.useCallback)((()=>{(0,tt().i)(a)}),[a]);return l?(0,ae.jsx)(et().sf,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,ae.jsx)(Y().Z,{isLarge:!0,onClick:c,children:(0,ae.jsx)(w()._H,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(qe().r,{disabled:!r,store:s,onInviteClick:ti,onInviteComplete:si,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,ae.jsx)(We()._,{inviteOrigin:"space_setting_slack_imports",canEditPermission:r,onInviteClick:ti,onInviteComplete:si})]})}function oi(e){let{member:t,store:s}=e;const i=(0,n().O7)(),a=(0,w().YB)(),r=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:d}=(0,o().VK)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=Be().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),c=(0,o().VK)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Qe().U7)();return M().oA(y().an.map((e=>{if(i||"membership_admin"!==e)return{role:e,disabledInfo:!t.canAdmin()&&y().Bc(e)?{isDisabled:!0,disabledMessage:s}:void 0}})))}(a,s)),[a,s]),u=(0,o().VK)((()=>!(s.canAdmin()||s.canEditMembership()&&(y().RN(t.role)||t.userId===r))),[r,t,s]);return l?(0,ae.jsx)(Ce().ZP,{role:t.role,table:b().bx,type:"user_permission",disabled:u,isUserPermission:t.userId===r,upgradeButtonName:"space_permission_item",availableRoleItems:c,onChange:async e=>{await ii(t,e,l,s,i)},buttonStyle:Ps,onRemoveMemberClick:async()=>{let e,n;if(ct().U()&&(n=f().Il(),e=await(0,gt().f)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,dt().q)(i,t.userId,null==d?void 0:d.id))()&&(await(async e=>{await ii(t,"none",l,s,i),P().Sw(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Ye().JF)(),new_workspace_member_count:-1})})(n),e&&rt().wA(i))}}):null}function ai(e){let{store:t}=e;const s=(0,a().Fg)(),i=Xs();return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:i,children:(0,ae.jsx)(ni,{store:t,buttonStyle:{flex:1}})}),(0,ae.jsx)("div",{style:{borderBottom:`1px solid ${s.regularDividerColor}`}})]})}function ri(e){let{store:t,isMobile:s,spacePermissionsSettingsStore:i}=e;const a=(0,n().O7)(),r=(0,Pe().tM)({spaceStore:t}),l=(0,pt().$)({spaceId:t.id}),d=(0,o().VK)((()=>function(e,t,s){if(void 0===s)return;const i=e.id;return s?(0,Je().cJ)(t,i,s):void 0}(t,a,l)),[a,t,l]),c=(0,o().VK)((()=>Es(t)),[t]);return r&&d?(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,ae.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,ae.jsx)(Te().Z,{children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,ae.jsxs)(X().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,ae.jsx)(w()._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!s&&(0,ae.jsx)(Ys,{store:t})]})]}),(0,ae.jsx)("div",{style:{marginTop:5},children:(0,ae.jsx)(J().Z,{on:c,onClick:()=>function(e,t){const s=!Es(e);T().eo(t,{enabled:s}),N().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:t=>{B().ys({transaction:t,spaceStore:e,inviteLinkEnabled:Boolean(s)})}})}(t,a)})})]}),i&&c&&d&&(0,ae.jsx)("div",{style:s?{marginTop:5}:void 0,children:(0,ae.jsx)(Qs,{isMobile:s,inviteLinkUrl:d})}),(0,ae.jsx)(L().Z,{size:40})]}):null}function li(e){let{accessRequestRenderValues:t}=e;const s=(0,o().VK)((()=>t?t.filter((e=>"pending"===e.accessRequest.status)).length:0),[t]);return t?(0,ae.jsx)("span",{children:s}):(0,ae.jsx)("span",{})}function di(e,t){t.setState({...t.state,currentTab:e})}function ci(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function ui(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,ae.jsx)(re,{spaceStore:s,groupIds:t,onGroupClick:()=>{di(nt().Q.Groups,i)}})}function pi(e){let{group:t,user:s,userStore:i,store:n}=e;const a=(0,o().VK)((()=>(0,ze().F$)()),[]),r=(0,o().VK)((()=>Bs()),[]);return"none"===s.role?a&&"team_guests"===t?(0,ae.jsx)(Ke,{teamGuest:s}):(0,ae.jsx)(je,{store:n,guest:s,guestStore:i,isSubscribed:r,hideActionButtons:a}):(0,ae.jsx)(oi,{store:n,member:s})}function mi(e){let{members:t,store:s}=e;const i=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]);return(0,ae.jsx)(ae.Fragment,{children:t.map((e=>{const t=fe().U6.createChildStore(s,{table:x().KJ,id:e.userId});return(0,ae.jsxs)("div",{style:i.container,children:[(0,ae.jsx)("div",{style:i.memberContainer,children:(0,ae.jsx)(Fs,{userStore:t})}),(0,ae.jsx)("div",{style:i.permissionContainer,children:(0,ae.jsx)(pi,{store:s,group:"members",user:e,userStore:t})})]},e.userId)}))})}function gi(e){let{group:t,spaceMembers:s,store:a,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l}=e;const c=(0,n().O7)(),u=(0,o().VK)((()=>r.state.sorts[t]),[t,r]),p={key:"user",header:(0,ae.jsxs)(U().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ci(t,"name",r)},style:{display:"flex",alignItems:"center"},children:[(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),u&&"name"===u.by&&(0,ae.jsx)(Os,{up:u.asc})]}),style:{width:"45%"}},m={key:"groups",header:(0,ae.jsx)(U().Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},g={key:"teams",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},f={key:"access_level",header:(0,ae.jsxs)(U().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ci(t,"role",r)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),u&&"role"===u.by&&(0,ae.jsx)(Os,{up:u.asc})]}),style:{width:"20%",textAlign:"center"}},h={key:"pages",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},y={key:"three_dot",header:(0,ae.jsx)(U().Z,{disabled:!0,ignoreLocalHoverState:!0})},b=(0,o().VK)((()=>zs(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),v=(0,o().VK)((()=>("team_guests"===t||"guests"===t)&&(0,ze().F$)()&&a.canEditMembership()),[t,a]),j=(0,o().VK)((()=>(0,He().bq)()),[]);let M="members"===t&&j?[p,g,f]:v?[p,h,y]:[p,h];b&&(M=[...M.slice(0,1),m,...M.slice(1)]);const _=(0,o().Kw)(l),k=(0,o().VK)((()=>s.map((e=>({member:e,store:fe().U6.createChildStore(a,{table:x().KJ,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,a]),C=(0,o().VK)((()=>Be().default.state.currentSpaceStore),[]),[{value:I}]=(0,d().r5)((async()=>{if(!C)return;const e=await A().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:k.map((e=>e.member.userId)),spaceId:C.id},headers:(0,S().Bb)({cellId:void 0,spaceId:C.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[C,c,k]);return(0,ae.jsx)(Ze().Z,{columns:M,rows:k.map((e=>{var s;const{member:n,store:o}=e,l=I&&I[n.userId],d=Array.isArray(_)?null===(s=_.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Fs,{userStore:o,restorationStatus:d})},"member")];return b&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(ui,{store:a,spacePermissionsSettingsStore:r,groupIds:l||[]})},"groups")),"members"===t&&j&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Ls,{user:n,userPermissionGroupIds:new Set(l??[])})},"teams")),c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(pi,{store:a,group:t,user:n,userStore:o})},"user-permission")),v&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)($s,{group:t,user:n,userStore:o,store:a})},"three-dot")),{key:n.userId,columns:c}}))})}function fi(e){let{members:t,store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:d}=e;const c=(0,w().YB)(),u=(0,a().Fg)(),p=(0,n().O7)(),g=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(r)),[r]),{membersFilter:f,limitMembers:S}=(0,o().VK)((()=>{const{membersFilter:e,limitMembers:t}=r.state;return{membersFilter:e,limitMembers:t}}),[r]),b=(0,o().VK)((()=>function(e,t,s,i){return t&&t.length>0?(0,l().ZP)(t,e,(e=>{const t=fe().U6.createChildStore(s,{table:x().KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}(t,f,s,c)),[t,f,s,c]),v=(0,o().VK)((()=>function(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(y().xm[t.role]-y().xm[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:fe().U6.createChildStore(s,{table:x().KJ,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(h().T_T.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,a=t.store.getFullName(i)||s;return n.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}("members",b,s,c,r)),[b,s,c,r]),j=S?v.slice(0,As):v;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,ae.jsx)(Te().Z,{children:(0,ae.jsx)(w()._H,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,ae.jsx)(qs,{store:s}),(0,ae.jsx)(L().Z,{size:16,isHidden:!0}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ae.jsx)(ni,{store:s}),(0,ae.jsx)(K().Z,{placeholder:c.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().R)(Js(u)),showClearButton:!0,format:K().B.Small,value:f,style:Is,onChange:e=>{r.setState({...r.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{I().RP(p,{current_tab:nt().Q.Members})}})]}),(0,ae.jsx)(gi,{store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:d,group:"members",spaceMembers:j}),v.length>As&&S&&(0,ae.jsx)($().Z,{style:Ts,onClick:g,children:(0,ae.jsx)(w()._H,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:v.length-As}})})]})]})}function hi(e){let{members:t,isMobile:s,store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o}=e;return s?(0,ae.jsx)(mi,{store:i,members:t}):(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Us,{}),(0,ae.jsx)(ri,{store:i,isMobile:s,spacePermissionsSettingsStore:n}),(0,ae.jsx)(fi,{store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o,members:t})]})}},359023:(e,t,s)=>{s.d(t,{Z:()=>o});var i=()=>s(874459);class n extends(()=>s(263184))().default{getInitialState(){return{uploadingProfilePhoto:!1,givenName:"",familyName:"",name:"",startDayOfWeek:(0,i().aN)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,hasPasskeys:!1,error:void 0}}}getValueForUser(e,t,s){if(e.isDefined()){const n=e.getFullName(s),o=e.getProfilePhoto(),a=t.getSettings();return{...this.state,uploadingProfilePhoto:!1,profilePhoto:o,name:n||"",startDayOfWeek:void 0===(null==a?void 0:a.start_day_of_week)?(0,i().aN)():null==a?void 0:a.start_day_of_week}}}}const o=n},219099:(e,t,s)=>{s.d(t,{Z:()=>n});class i extends(()=>s(263184))().default{getInitialState(){return{count:0}}}const n=new i},621099:(e,t,s)=>{s.d(t,{$A:()=>x,Vu:()=>v,wA:()=>b});var i=()=>s(956057),n=()=>s(788860),o=()=>s(395362),a=()=>s(824462),r=()=>s(528918),l=()=>s(784234),d=()=>s(224597),c=()=>s(269299),u=()=>s(348141),p=()=>s(572623),m=()=>s(876822),g=()=>s(838266),f=()=>s(576387),h=()=>s(741846),S=()=>s(139543),y=()=>s(941832);function b(e){const t=m().default.state.currentUserSettingsStore;t&&c().createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,canUndo:!0,perform:e=>{u().d2({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}async function x(e){let{environment:t,user:s,spaceStore:n,userSettingStore:a}=e;let r,l;if(S().U()&&(l=i().Il(),r=await(0,y().f)({environment:t,contractionSurveyId:l}),!r))return;await(async()=>await(0,h().q)(t,s.userId,n.id))()&&(await(async e=>{await v({member:s,newRole:"none",currentUserSettingsStore:a,spaceStore:n,environment:t}),o().Sw(t,{member_user_id:s.userId,member_role:s.role,contraction_survey_id:e,is_space:!0,domainType:(0,p().JF)(),new_workspace_member_count:-1})})(l),r&&b(t))}async function v(e){let{member:t,newRole:s,currentUserSettingsStore:i,spaceStore:u,environment:m}=e;const h=m.currentUser.id;if(t.userId!==h||"none"!==s)!function(){const e=(0,n().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});r().j({message:e.updatingPermissions})}(),"none"===s?(await a().callApi({eventName:"removeUsersFromSpace",environment:m,data:{userIds:[t.userId],spaceId:u.id,removePagePermissions:!0,revokeUserTokens:!1}}),await f().bi(m)):c().createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:m,canUndo:!0,perform:e=>l().tQ({environment:m,spaceStore:u,permissionItems:[{type:"user_permission",role:s,user_id:t.userId}],transaction:e,from:"space_permission_setting_table"})}),r().x();else{await d().bf({environment:m,spaceId:u.id,userSettingsStore:i})&&(o().Jk(m,{invite_origin:"workspace_remove_member",domainType:(0,p().JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[h]}),g().default.setState({...g().default.state,open:!1}))}}},741846:(e,t,s)=>{s.d(t,{q:()=>N});s(670560),s(241792),s(667294);var i=()=>s(146947),n=()=>s(142735),o=()=>s(846550),a=()=>s(646574),r=()=>s(799891),l=()=>s(406998),d=()=>s(968061),c=()=>s(698763),u=()=>s(989478),p=()=>s(629719),m=()=>s(788860),g=()=>s(979614),f=()=>s(824462),h=()=>s(212493),S=()=>s(830581),y=()=>s(661641),b=()=>s(921981),x=()=>s(981583),v=()=>s(765513),w=()=>s(148126),j=()=>s(403587),M=()=>s(876822),_=()=>s(826955),k=()=>s(663773),C=()=>s(815277),I=()=>s(661769),T=()=>s(550649),P=()=>s(938131),A=s(785893);function Z(e){const{onFinished:t,userId:s,userContractionMessages:i}=e,a=(0,o().yK)((e=>({customIcon:{alignSelf:"center",flexGrow:0},removeIconInCornerOfUserAvatar:{background:"white",borderRadius:"50%",position:"absolute",bottom:0,right:-5},dashedEllipse:{width:56,height:56,position:"absolute",top:-4,left:-4},customIconWrapper:{position:"relative",width:"fit-content",margin:"0 auto"},wrapper:{marginTop:4},descriptionBox:{borderRadius:6,textAlign:"center",background:e.surface.wash,padding:"16px 12px"}})),[]),r=(0,m().YB)(),l=(0,n().VK)((()=>M().default.state.currentSpaceStore),[]),d=(0,n().VK)((()=>{if(!l)return;const e=_().U6.createChildStore(l,{id:s,table:u().KJ});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[l,s]),c=(0,C().VX)({name:"admin_transfer_private_content",spaceId:null==l?void 0:l.id,userId:s}),{name:p,spaceName:g}=(0,n().VK)((()=>({name:null==d?void 0:d.getDisplayName(r),spaceName:null==l?void 0:l.getName()})),[d,r,l]),f=(0,I().pQ)({spaceId:null==l?void 0:l.id});return(0,A.jsx)(b().c,{areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},isOpen:!0,onDismiss:()=>t(!1),animateSizeTransition:!0,render:()=>(0,A.jsx)(S().sR,{header:(0,A.jsx)(S().vI,{iconAndTitle:(0,A.jsxs)(h().jX,{align:"center",gap:8,direction:"column",children:[(0,A.jsx)(x().Z,{userStore:d,size:48,style:a.customIcon,borderStyle:"solid"}),(0,A.jsx)(y().q,{styleName:"Heading-17px/Semibold",style:{textAlign:"center"},children:V(g,p)})]})}),footer:(0,A.jsx)(S().a6,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:B(p),onClick:()=>t(!0)}],secondaryButtons:[{buttonType:"outline",label:(0,A.jsx)(m()._H,{id:"contractionConfirmation.manageMembers",defaultMessage:"Manage members"}),onClick:()=>t(!1)}]}),children:(0,A.jsxs)(h().jX,{style:a.descriptionBox,gap:12,children:[(0,A.jsx)(y().q,{styleName:"UIRegular-14px/Medium",children:(0,A.jsx)(m()._H,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {hasTransferrableContent, select, true {} other {Removing them may cause loss of private pages.}}",values:{hasTransferrableContent:c}})}),l&&(0,A.jsx)(D,{spaceStore:l,subscription:null==f?void 0:f.subscription,userContractionMessages:i})]})})})}function R(){return null}function H(e){return e>2e3?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,A.jsx)(m()._H,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function D(e){let{spaceStore:t,subscription:s,userContractionMessages:n}=e;const o=(0,j().R)({spaceStore:t}),l=(0,k().kw)(t.id,s,o.loading?0:o.members.length),d=(0,p().nW)({logFunction:r().log.bind(r()),spaceId:t.id,subscriptionState:s})??l,c=(0,T().Z)(t);if(s&&c&&l-1<d){const e=(0,a().Yx)(s.currentPeriodEnd.toMillis(),"month_day_long",i().locale);return(0,A.jsx)(y().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{padding:"0px 12px"},children:(0,A.jsx)(m()._H,{id:"contractionConfirmation.billing.message",defaultMessage:"Your workspace is currently billed for {paidSeats, plural, one {# seat} other {# seats}}. Your bill will remain the same until it is adjusted at the start of your next renewal: {nextBillingDate}. <learnmorelink>Learn more</learnmorelink>",values:{paidSeats:l,nextBillingDate:e,learnmorelink:e=>(0,A.jsx)(v().Z,{href:(0,w().UY)("guides.billingGuide"),external:!0,children:e})}})})}return(0,A.jsxs)("div",{style:{padding:"12px 0 0 12px"},children:[(0,A.jsx)(R,{}),(0,A.jsx)(h().jX,{gap:16,children:n.map(((e,t)=>{let{icon:s,message:i}=e;return(0,A.jsxs)(h().jX,{direction:"row",align:"center-left",gap:6,children:[(0,A.jsx)(s,{width:14}),(0,A.jsx)(y().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:i})]},t)}))})]})}function B(e){return e&&e.length<16?(0,A.jsx)(m()._H,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,A.jsx)(m()._H,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function V(e,t){return t?(0,A.jsx)(m()._H,{id:"contractionConfirmation.title.withName",defaultMessage:"Remove {name} from {space}?",values:{name:t||"this member",space:e||"this workspace"}}):(0,A.jsx)(m()._H,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function N(e,t,s){let i=[],n={};if(s){const o=await f().callApi({eventName:"getUserContractionData",environment:e,data:{userId:t,spaceId:s}});"success"===o.type&&(n=o.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.num_pages_created);s>1&&t.push({icon:l().I,message:(0,A.jsx)(m()._H,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created {numberOfPages} pages",values:{numberOfPages:H(s)}})});const i=Number(e.num_comments);i>1&&t.push({icon:c().s,message:(0,A.jsx)(m()._H,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made {numberOfComments} comments",values:{numberOfComments:H(i)}})});const n=Number(e.l28_active);return n>1&&t.push({icon:d().h,message:(0,A.jsx)(m()._H,{id:"contractionConfirmation.activity",defaultMessage:"Visited {activeDays} days in the past month",values:{activeDays:H(n)}})}),t}(n))}return g().j(e,{name:"contraction_contextual_confirmation_shown",args:{userContractionData:n}}),await P().Z.showModal((s=>{const o=t=>{t?g().j(e,{name:"contraction_contextual_confirmation_confirmed",args:{userContractionData:n}}):g().j(e,{name:"contraction_contextual_confirmation_cancelled",args:{userContractionData:n}}),s(t)};return{dismissUsing:"closeButtonOrEscape",modalStyle:{minWidth:406,padding:20},onDismiss:()=>o(!1),content:(0,A.jsx)(Z,{onFinished:o,userId:t,userContractionMessages:i})}}))}},14328:(e,t,s)=>{s.d(t,{Z:()=>g});s(667294);var i=()=>s(219727),n=()=>s(846550),o=()=>s(788860),a=()=>s(707513),r=()=>s(407391),l=()=>s(752127),d=()=>s(661297),c=()=>s(906651),u=()=>s(148126),p=()=>s(965014),m=s(785893);const g=function(e){let{style:t,icon:s,title:n,caption:o,upgradeMessage:a,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c}=e;const u=(0,i().O7)();return(0,m.jsxs)("section",{style:h(u,t),children:[(0,m.jsx)(y,{icon:s}),(0,m.jsx)(f,{title:n}),(0,m.jsx)(b,{caption:o}),(0,m.jsx)(w,{upgradeMessage:a,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c})]})};function f(e){let{title:t}=e;return(0,m.jsx)("header",{style:{fontWeight:a().Ue.semibold},children:t})}function h(e,t){const{device:s}=e;return{...t,fontSize:14,...!s.isMobile&&{maxWidth:340}}}function S(e){return{color:e.mediumTextColor,marginTop:4,marginBottom:16}}function y(e){let{icon:t}=e;const s=(0,n().Fg)();return t?t(function(e){return{width:32,height:"auto",fill:e.mediumIconColor,marginBottom:8}}(s)):null}function b(e){let{caption:t}=e;const s=(0,n().Fg)();return(0,m.jsx)("p",{style:S(s),children:t})}function x(e){let{upgradeMessage:t,from:s,subscriptionTier:n,onUpgradeClick:a}=e;const r=(0,i().O7)();return(0,m.jsx)(c().Z,{onClick:e=>function(e,t,s,i,n){p().y(i,{from:t,upsell:{type:"product",product:s,limit:{type:"none"}}}),n&&n(e)}(e,s,n,r,a),isLarge:!0,children:t||(0,m.jsx)(o()._H,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}function v(e){let{from:t,learnMoreRoute:s}=e;const n=(0,i().O7)();return(0,m.jsx)(d().Z,{onClick:()=>function(e,t,s){l().D({environment:s,url:(0,u().UY)(t)}),r().Fs(s,{from:e})}(t,s,n),children:(0,m.jsx)(o()._H,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}function w(e){let{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n,learnMoreRoute:o}=e;return(0,m.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[(0,m.jsx)(x,{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n}),(0,m.jsx)(v,{from:s,learnMoreRoute:o})]})}},139543:(e,t,s)=>{s.d(t,{U:()=>o});var i=()=>s(874459),n=()=>s(876822);function o(){const e=n().default.state.currentUserSettingsStore;if(!e)return!1;const t=e.getSettings();if(!t)return!1;if(!t.seen_contraction_survey_at)return!0;return Date.now()>(0,i().Xz)({date:t.seen_contraction_survey_at,daysToAdd:1})}},363832:(e,t,s)=>{s.d(t,{$:()=>r});var i=()=>s(219727),n=()=>s(142735);const o=new(s(168469).q)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:i}=t;const n=await Promise.resolve().then(s.bind(s,824462)),o=await n.callApi({eventName:"getOrGenerateInviteLinkCode",environment:e,data:{spaceId:i},headers:(0,s(741633).Bb)({cellId:void 0,spaceId:i})});if("success"===o.type&&o.data.inviteLinkCode)return o.data.inviteLinkCode}));s(947115).exposeDebugValue("BillingDataStore",o);const a=o;function r(e){let{spaceId:t}=e;const s=(0,i().O7)();return(0,n().VK)((()=>{if(t)return a.getData(s,{spaceId:t})}),[s,t])}},550649:(e,t,s)=>{s.d(t,{Z:()=>r});var i=()=>s(629719),n=()=>s(403587),o=()=>s(663773),a=()=>s(595976);function r(e){const t=(0,n().R)({spaceStore:e}),s=(0,a().p)({spaceId:e.id}),r=(0,o().kw)(e.id,null==s?void 0:s.subscription,t.loading?0:t.members.length);return Boolean(!(0,i().zG)(null==s?void 0:s.subscription)&&!(0,i().Rd)(null==s?void 0:s.subscription)&&!(0,i().lx)(null==s?void 0:s.subscription)&&r>0)}},938131:(e,t,s)=>{s.d(t,{Z:()=>n});class i extends(()=>s(263184))().default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=s(956057).Il();return new Promise((s=>{const i=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const n=new i},856563:(e,t,s)=>{s.d(t,{m:()=>g});s(241792),s(667294);var i=()=>s(142735),n=()=>s(846550),o=()=>s(788860),a=()=>s(696459),r=()=>s(212493),l=()=>s(70654),d=()=>s(661641),c=s(785893);function u(e){const{isChecked:t,label:s,onClickToggle:i}=e,o=(0,n().yK)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,c.jsxs)("label",{style:o.row,children:[(0,c.jsx)(l()._,{checked:t,onChange:i}),(0,c.jsx)(d().q,{styleName:"Body-14px/Regular",children:s})]})}var p=()=>s(291198);function m(e){const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:o,setInputText:a}=e;return(0,c.jsxs)(r().jX,{gap:8,children:[(0,c.jsx)(u,{label:i,isChecked:s,onClickToggle:n}),s?(0,c.jsx)(p().Z,{autoFocus:!0,value:t,placeholder:o,onChange:e=>a(e.target.value)}):null]})}function g(e){const{store:t}=e,s=(0,n().yK)((e=>({container:{border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),l=(0,i().VK)((()=>t.state.options),[t]),{selectedIndexes:d,customTextByIndex:p}=(0,i().VK)((()=>{const{selectedIndexes:e,customTextByIndex:s}=t.state;return{selectedIndexes:e,customTextByIndex:s}}),[t]),g=(0,o().YB)();return(0,c.jsx)(r().jX,{padding:"16px 16px",style:s.container,gap:12,children:l.map(((e,s)=>{const{type:i}=e,n=d.has(s);switch(i){case"checkbox":return(0,c.jsx)(u,{isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":const o="placeholderText"in e&&e.placeholderText?g.formatMessage(e.placeholderText):void 0;return(0,c.jsx)(m,{inputText:p[s]??"",isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:o,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,a().t1)(i)}}))})}},984529:(e,t,s)=>{s.d(t,{f:()=>a});s(667294);var i=()=>s(788860),n=s(785893);const o=(0,i().vU)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),a={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,n.jsx)(i()._H,{id:"survey.options.other",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,n.jsx)(i()._H,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:o.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,n.jsx)(i()._H,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:o.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},265464:(e,t,s)=>{s.d(t,{b:()=>i,z:()=>n});s(670560),s(122556),s(582845),s(250570),s(533019),s(721473),s(788208),s(22624),s(267602),s(30005);class i extends(()=>s(263184))().default{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],o={};return s.forEach((s=>{const a=t[s];i.push(a.optionName),n.push(s),"checkboxAndInput"===a.type&&e[s]&&(o[a.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:o}}}const n=new i},941832:(e,t,s)=>{s.d(t,{f:()=>g});s(667294);var i=()=>s(766072),n=()=>s(788860),o=()=>s(513670),a=()=>s(979614),r=()=>s(984529),l=()=>s(830581),d=()=>s(921981),c=()=>s(631842),u=()=>s(856563),p=()=>s(265464),m=s(785893);async function g(e){const{environment:t,contractionSurveyId:s}=e;a().j(t,{name:"contraction_survey_opened",args:{contractionSurveyId:s}});const o=await async function(e){const{iconGroup:t,options:s,title:i,description:o}=e;return await c().o.showAsyncModal((e=>{const a=new(p().b);return a.setOptions(s),(0,m.jsx)(d().c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,m.jsx)(l().sR,{header:(0,m.jsx)(l().vI,{iconAndTitle:(0,m.jsx)("div",{style:{padding:"0 24px"},children:(0,m.jsx)(l().kC,{iconGroup:t,title:i})}),description:o}),footer:(0,m.jsx)(l().a6,{layout:"vertical",primaryButtons:[{label:(0,m.jsx)(n()._H,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(a.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,m.jsx)(u().m,{store:a})})})}))}({iconGroup:i().X,title:(0,m.jsx)(n()._H,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,m.jsx)(n()._H,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:f()});return o?a().j(t,{name:"contraction_survey_completed",args:{contraction_survey_id:s,reasons:o.reasons,reason_indexes:o.reasonIndexes,reason_other:o.customTextByReason.other}}):a().j(t,{name:"contraction_survey_dismissed",args:{contractionSurveyId:s}}),o}function f(){return[...(0,o().TV)([r().f.noLongerNeedAccess,r().f.noLongerWorkTogether,r().f.notUsingEnough,r().f.switching,r().f.switchingToAnotherWorkspace,r().f.tooExpensive]),r().f.other]}},766072:(e,t,s)=>{s.d(t,{X:()=>i});const i=(0,s(827282).CZ)("pencilLine",{default:{loader:()=>s.e(47736).then(s.bind(s,547736))},small:{loader:()=>s.e(91525).then(s.bind(s,591525))},mini:{loader:()=>s.e(60594).then(s.bind(s,160594))},large:{loader:()=>s.e(36121).then(s.bind(s,936121))}})},754918:(e,t,s)=>{s.d(t,{G:()=>i});const i=(0,s(827282).CZ)("personCropCircleBadgeExclamationPoint",{default:{loader:()=>s.e(7735).then(s.bind(s,107735))},small:{loader:()=>s.e(77965).then(s.bind(s,577965))},mini:{loader:()=>s.e(30314).then(s.bind(s,30314))},large:{loader:()=>s.e(89005).then(s.bind(s,589005))}})},440424:(e,t,s)=>{s.d(t,{a:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("addPerson",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.48242 7.91211C10.8076 7.91211 11.8352 6.77783 11.8352 5.35718C11.8352 4.00391 10.7908 2.84717 9.48242 2.84717C8.17407 2.84717 7.12964 4.00952 7.13525 5.36279C7.14087 6.77783 8.16284 7.91211 9.48242 7.91211ZM9.48242 8.87231C8.7356 8.87231 8.04492 8.99585 7.44409 9.22046C8.23022 9.95044 8.72437 10.9836 8.72437 12.1235C8.72437 12.511 8.66821 12.8872 8.55591 13.2466H12.8684C13.969 13.2466 14.3171 12.8479 14.3171 12.2302C14.3171 10.804 12.3967 8.87231 9.48242 8.87231ZM4.74316 15.1895C6.42212 15.1895 7.80347 13.7969 7.80347 12.1235C7.80347 10.4558 6.42212 9.06885 4.74316 9.06885C3.06982 9.06885 1.68286 10.4558 1.68286 12.1235C1.68286 13.7969 3.06982 15.1895 4.74316 15.1895ZM4.74316 14.1675C4.41187 14.1675 4.18726 13.9429 4.18726 13.6172V12.6907H3.27197C2.94629 12.6907 2.72168 12.4661 2.71606 12.1292C2.71045 11.7979 2.93506 11.5732 3.27197 11.5732H4.18726V10.6636C4.18726 10.3379 4.41187 10.1133 4.74316 10.1077C5.08008 10.1021 5.30469 10.3267 5.30469 10.6636V11.5732H6.22559C6.55127 11.5732 6.77588 11.7979 6.77588 12.1292C6.77588 12.4661 6.55127 12.6907 6.22559 12.6907H5.30469V13.6172C5.30469 13.9429 5.08008 14.1675 4.74316 14.1675Z"})})},984478:(e,t,s)=>{s.d(t,{f:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},958432:(e,t,s)=>{s.d(t,{C:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("chevronRightRoundedThin",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},840196:(e,t,s)=>{s.d(t,{p:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("circleCheck",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},728267:(e,t,s)=>{s.d(t,{a:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("clock",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M6.541 10.919a.53.53 0 0 1-.39-.157.53.53 0 0 1-.157-.39c0-.155.053-.283.157-.383a.53.53 0 0 1 .39-.157h2.905V5.895c0-.15.053-.278.158-.383a.521.521 0 0 1 .382-.158.53.53 0 0 1 .39.158.521.521 0 0 1 .157.383v4.477a.53.53 0 0 1-.157.39.53.53 0 0 1-.39.157H6.541Zm3.452 6.207a6.789 6.789 0 0 1-2.727-.554 7.124 7.124 0 0 1-2.256-1.524 7.277 7.277 0 0 1-1.525-2.256 6.788 6.788 0 0 1-.553-2.727c0-.967.184-1.876.553-2.728a7.241 7.241 0 0 1 3.773-3.78 6.788 6.788 0 0 1 2.728-.554c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 0 1 1.53 2.25c.37.852.554 1.761.554 2.728 0 .966-.184 1.875-.553 2.727a7.218 7.218 0 0 1-3.787 3.78 6.789 6.789 0 0 1-2.728.554Zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 0 0 1.805-1.217 5.68 5.68 0 0 0 1.217-1.804c.291-.684.437-1.42.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.567 5.567 0 0 0-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.715 5.715 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202c0 .788.146 1.524.438 2.208a5.735 5.735 0 0 0 1.21 1.804 5.598 5.598 0 0 0 4.013 1.654Z"})})},387454:(e,t,s)=>{s.d(t,{x:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("group",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M15.011 14.795c1.678 0 3.096-1.502 3.096-3.444C18.107 9.455 16.682 8 15.012 8c-1.67 0-3.096 1.478-3.088 3.367 0 1.926 1.41 3.428 3.088 3.428zm-8.872.178c1.464 0 2.697-1.316 2.697-3.003 0-1.656-1.241-2.917-2.697-2.917-1.448 0-2.697 1.284-2.69 2.933 0 1.671 1.234 2.987 2.69 2.987zm17.722 0c1.456 0 2.69-1.316 2.69-2.987.007-1.649-1.242-2.933-2.69-2.933s-2.697 1.261-2.697 2.917c0 1.687 1.241 3.003 2.697 3.003zM1.917 22h5.747c-.82-1.184.069-3.521 1.8-4.899-.842-.55-1.946-.952-3.325-.952C2.714 16.15.5 18.695.5 20.793.5 21.559.883 22 1.917 22zm26.166 0c1.034 0 1.417-.441 1.417-1.207 0-2.098-2.214-4.644-5.64-4.644-1.378 0-2.474.403-3.317.952 1.732 1.378 2.62 3.715 1.8 4.899h5.74zm-17.852-.008h9.554c1.264 0 1.7-.387 1.7-1.099 0-1.989-2.505-4.728-6.473-4.728-3.977 0-6.475 2.74-6.475 4.728 0 .712.437 1.1 1.693 1.1z"})})},223174:(e,t,s)=>{s.d(t,{z:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("setPassword",{viewBox:"0 0 31 21",svg:(0,i.jsx)("path",{d:"M29.4746 3.43945L30.1777 2.7168C30.5684 2.32617 30.5781 1.7793 30.1973 1.39844L29.9336 1.14453C29.6016 0.802734 29.0352 0.851562 28.6641 1.22266L27.9609 1.91602L29.4746 3.43945ZM18.2441 13.4883L20.3047 12.5996L28.7227 4.18164L27.209 2.6875L18.8008 11.0957L17.8633 13.0977C17.7656 13.3223 18.0195 13.5859 18.2441 13.4883ZM3.40039 20.0508H23.6543C25.5 20.0508 26.5254 19.0547 26.5254 17.2188V8.88867L24.5918 10.8223V17.0625C24.5918 17.8242 24.1621 18.2637 23.3906 18.2637H3.6543C2.88281 18.2637 2.45312 17.8242 2.45312 17.0625V8.91797C2.45312 8.14648 2.88281 7.7168 3.6543 7.7168H19.6504L21.4375 5.93945H3.40039C1.54492 5.93945 0.519531 6.92578 0.519531 8.77148V17.2188C0.519531 19.0547 1.54492 20.0508 3.40039 20.0508ZM6.06641 14.4453C6.85742 14.4453 7.51172 13.791 7.51172 12.9902C7.51172 12.1895 6.85742 11.5449 6.06641 11.5449C5.25586 11.5449 4.61133 12.1895 4.61133 12.9902C4.61133 13.791 5.25586 14.4453 6.06641 14.4453ZM10.373 14.4453C11.1738 14.4453 11.8184 13.791 11.8184 12.9902C11.8184 12.1895 11.1738 11.5449 10.373 11.5449C9.57227 11.5449 8.91797 12.1895 8.91797 12.9902C8.91797 13.791 9.57227 14.4453 10.373 14.4453ZM14.6797 14.4453C15.4805 14.4453 16.1348 13.791 16.1348 12.9902C16.1348 12.1895 15.4805 11.5449 14.6797 11.5449C13.8789 11.5449 13.2344 12.1895 13.2344 12.9902C13.2344 13.791 13.8789 14.4453 14.6797 14.4453Z"})})},405798:(e,t,s)=>{s.d(t,{IA:()=>n,o4:()=>o,zg:()=>a});var i=()=>s(513670);function n(e){if(i().jj(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=o(e),s=a(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}function o(e){return e.match(/[a-z]/i)}function a(e){return e.match(/\d/)}},141455:(e,t,s)=>{s.d(t,{mC:()=>l,II:()=>h,$W:()=>u,lJ:()=>p,KQ:()=>c,_e:()=>o()._e,V5:()=>o().V5});s(267602),s(653476),s(731107);var i=()=>s(629719),n=()=>s(779709),o=()=>s(259408);var a=()=>s(122792);const r={guests:{type:"cumulative",data:(0,o().Ay)({current:o().t.number()})},internal_guests:{type:"cumulative",data:(0,o().Ay)({current:o().t.number(),hasLowGuestLimit:o().t.boolean()})},members:{type:"cumulative",data:(0,o().Ay)({current:o().t.number()})},non_admin_members:{type:"check",data:o().t.isUndefined()},view_chart:{type:"per_use",data:o().t.isUndefined()},form_filesize:{type:"per_use",data:o().t.isUndefined()},form_customization:{type:"check",data:o().t.isUndefined()},premium_automations:{type:"check",data:o().t.isUndefined()},move_to:{type:"check",data:o().t.isUndefined()},claimable_spaces:{type:"check",data:o().t.isUndefined()},domain_settings:{type:"check",data:o().t.isUndefined()},managed_users:{type:"check",data:o().t.isUndefined()},saml:{type:"check",data:o().t.isUndefined()},scim:{type:"check",data:o().t.isUndefined()},export_members:{type:"check",data:o().t.isUndefined()},hipaa_compliance:{type:"check",data:o().t.isUndefined()},sites_multiple_public_domains:{type:"check",data:o().t.isUndefined()},custom_image_upload_favicon:{type:"check",data:o().t.isUndefined()},custom_public_sites_layout:{type:"check",data:o().t.isUndefined()},seo_title_and_description:{type:"check",data:o().t.isUndefined()},admin_transfer_private_content:{type:"check",data:o().t.isUndefined()},ai_slack_qna:{type:"check",data:o().t.isUndefined()},configurable_mention_invites:{type:"check",data:o().t.isUndefined()},configurable_retention:{type:"check",data:o().t.isUndefined()},team_self_promotion:{type:"check",data:o().t.isUndefined()},unbranded_forms:{type:"check",data:o().t.isUndefined()},ai_google_drive_qna:{type:"check",data:o().t.isUndefined()},github_ai_connector:{type:"check",data:o().t.isUndefined()},jira_ai_connector:{type:"check",data:o().t.isUndefined()},watermarkless_chart_export:{type:"check",data:o().t.isUndefined()},configurable_deletion_and_retention_settings:{type:"check",data:o().t.isUndefined()},sudo_mode:{type:"check",data:o().t.isUndefined()},ai_github_connector:{type:"check",data:o().t.isUndefined()},ai_jira_connector:{type:"check",data:o().t.isUndefined()},slack_imports_invite:{type:"check",data:o().t.isUndefined()},content_reprovisioning:{type:"check",data:o().t.isUndefined()},ai_space_usage:{type:"cumulative",data:o().t.object({required:{current:o().t.number(),memberCount:o().t.number(),aiPromotionConfig:n().dL,space:o().t.undefinable(o().t.instanceOf(s(530980).ugu))},optional:{}})},ai_user_usage:{type:"cumulative",data:o().t.object({required:{current:o().t.number(),memberCount:o().t.number(),aiPromotionConfig:n().dL},optional:{}})},block_read_and_write_role:{type:"check",data:o().t.isUndefined()},invite_user_to_workspace_mentions:{type:"check",data:o().t.isUndefined()}},l=(0,s(696459).Yd)(r),d={guests:e=>{let{amount:t,billingData:s,data:{current:i}}=e;return m({billingData:s,amount:t,current:i,limits:{free:10,personal:"unlimited",student:"unlimited",plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{free:"personal"}})},internal_guests:e=>{let{amount:t,billingData:s,data:{current:i,hasLowGuestLimit:n}}=e;return m({billingData:s,amount:t,current:i,limits:(0,a().gp)({hasLowGuestLimit:n}),upsellMap:{free:"personal",student:"business",personal:"business",plus:"business"}})},members:e=>{let{amount:t,data:{current:s},billingData:n}=e;return m({billingData:n,amount:t,current:s,limits:{free:i().gy(n)?1:"unlimited",personal:1,student:1,plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{student:"plus",personal:"plus"}})},non_admin_members:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},view_chart:e=>{let{amount:t,billingData:s}=e;return g({billingData:s,amount:t,limits:{free:1,personal:"unlimited",student:"unlimited",plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{free:"personal"}})},form_filesize:e=>{let{amount:t,billingData:s}=e;return g({billingData:s,amount:t,limits:{free:5,personal:100,student:100,plus:100,business:100,enterprise:100},upsellMap:{free:"personal"}})},form_customization:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},premium_automations:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},move_to:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},claimable_spaces:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},domain_settings:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},managed_users:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},invite_user_to_workspace_mentions:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},saml:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"business"})},scim:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},unbranded_forms:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},slack_imports_invite:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},export_members:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"business"})},hipaa_compliance:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},sites_multiple_public_domains:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},custom_image_upload_favicon:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},custom_public_sites_layout:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},seo_title_and_description:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},admin_transfer_private_content:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_slack_qna:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},configurable_mention_invites:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},configurable_retention:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_google_drive_qna:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},github_ai_connector:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},jira_ai_connector:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},watermarkless_chart_export:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},team_self_promotion:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},configurable_deletion_and_retention_settings:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},sudo_mode:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_github_connector:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},ai_jira_connector:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},content_reprovisioning:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_space_usage:e=>{let{billingData:t,data:{current:s,memberCount:o,aiPromotionConfig:a,space:r},amount:l,actor:d}=e;const c={type:"cumulative",current:s,total:"unlimited"};if(d.isAdminActor)return{type:"available",limit:c};const u=i().ps(t.subscription,"ai");if(d.isAdminActor||u)return{type:"available",limit:c};if(i().Rd(t.subscription))return{type:"blocked",limit:{type:"cumulative",current:s,total:0},upsell:{type:"contact_account_manager"}};const p="unknown"===l?0:l,m=function(e){let{billingData:t,space:s,config:o,numMembers:a}=e;const{baseGrant:r,studentGrant:l,grant032023:d,maxAllowance:c,studentGitHubGrant:u}=o;if(i().ps(t.subscription,"student")){let e=n().rQ(o,l,1);return n().pB({space:s,grantId:n().lN})&&(e+=n().rQ(o,u,1)),e}const p=n().rQ(o,r,a);let m=c.paid;["free","personal"].includes(i().wO(t.subscription))&&(m=c.free);let g=Math.min(p,m);return n().pB({space:s,grantId:n().u4})&&(g+=n().rQ(o,d,a)),g}({billingData:t,space:r,config:a,numMembers:o});return s+p<=m?{type:"available",limit:{type:"cumulative",current:s,total:m},upsell:{type:"product",product:"ai",limit:c}}:{type:"upsell",limit:{type:"cumulative",current:s,total:m},upsell:{type:"product",product:"ai",limit:c}}},ai_user_usage:e=>{let{billingData:t,data:{current:s,memberCount:i,aiPromotionConfig:n},amount:o}=e;const a={type:"cumulative",current:s,total:"unlimited"},r=n.userGrant,l=1===i?r.singlePlayerAmount:r.multiplayerAmount;return s+("unknown"===o?0:o)<=l?{type:"available",limit:{type:"cumulative",current:s,total:l},upsell:{type:"product",product:"ai",limit:a}}:{type:"upsell",limit:{type:"cumulative",current:s,total:l},upsell:{type:"product",product:"ai",limit:a}}},block_read_and_write_role:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})}};function c(e,t){return(0,o().KQ)(e,r,d,t)}function u(e,t){return(0,o().$W)(e,r,d,t)}function p(e,t){return(0,o().$W)(e,r,d,{...t,state:t.state,scope:{...t.scope,billingData:{...t.scope.billingData,subscription:{trialEnd:t.state.trialEnd,items:t.state.items}}}})}function m(e){let{billingData:t,amount:s,current:n,limits:o,upsellMap:a}=e;const r=i().wO(t.subscription),l=o[r],d={current:n,total:l,type:"cumulative"},c=a[r],u=c?{type:"product",product:c,limit:{type:"cumulative",current:n,total:o[c]}}:{type:"contact_sales"};return l&&("unlimited"===l||"unknown"!==s&&s+n<=l)?{type:"available",limit:d,upsell:u}:{type:"upsell",limit:d,upsell:u}}function g(e){let{billingData:t,amount:s,limits:n,upsellMap:o}=e;const a=i().wO(t.subscription),r=n[a],l={amount:r,type:"per_use"},d=o[a],c=d?{type:"product",product:d,limit:{type:"per_use",amount:n[d]}}:{type:"contact_sales"};return r&&("unlimited"===r||"unknown"!==s&&s<=r)?{type:"available",limit:l,upsell:c}:{type:"upsell",limit:l,upsell:c}}function f(e){let{billingData:t,minimumTier:s}=e;const n=i().wO(t.subscription),o={type:"none"};return(0,a().$V)(n,s)?{type:"available",limit:o}:{type:"upsell",limit:o,upsell:{type:"product",product:s,limit:o}}}function h(e){return((null==e?void 0:e.items)??[]).filter((e=>"sites_custom_hostnames"===i().tw(e))).reduce(((e,t)=>e+t.quantity),0)}}}]);