"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[20919,14705],{20919:(e,t,a)=>{a.d(t,{_p:()=>rt,q6:()=>st,Qi:()=>Xt,p0:()=>oa,KC:()=>ia,IK:()=>Ue,Dw:()=>Ve,TH:()=>He,CU:()=>Qe,Bj:()=>Xe,fK:()=>et,mS:()=>$e,zm:()=>dt,hS:()=>lt,OH:()=>ot,yN:()=>Be});a(492176),a(7961),a(267602),a(916054),a(653476),a(470928),a(749411),a(30005),a(241792),a(228244),a(667294);var n=()=>a(156642),o=()=>a(109477),i=()=>a(799891),s=()=>a(827282),r=a(785893);const c={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM5.125 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125h-5.5A2.125 2.125 0 0 1 5.125 12.5zm2.125-.875a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},l=(0,s().IU)("alignCenter",c),d={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM2.375 7.5c0-1.174.951-2.125 2.125-2.125H10c1.174 0 2.125.951 2.125 2.125v5A2.125 2.125 0 0 1 10 14.625H4.5A2.125 2.125 0 0 1 2.375 12.5zM4.5 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875H10a.875.875 0 0 0 .875-.875v-5A.875.875 0 0 0 10 6.625zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},u=(0,s().IU)("alignLeft",d),g={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM7.875 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125H10A2.125 2.125 0 0 1 7.875 12.5zM10 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},m=(0,s().IU)("alignRight",g),f={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"m3.625 11.151 1.187-1.187a.625.625 0 1 1 .884.884l-2.254 2.254a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 0 1 12.813-5.587.625.625 0 1 1-.85.915A6.375 6.375 0 0 0 3.625 10zm14-2.302 1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.375 6.375 0 0 1-10.713 4.672.625.625 0 0 0-.85.915A7.625 7.625 0 0 0 17.625 10z"})},p=(0,s().IU)("arrowCircleLoop",f);var v=()=>a(912462);const M={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M11.14 4.485h3.491l-4.073 4.073a.625.625 0 0 0 .884.884l4.073-4.073v3.49a.625.625 0 1 0 1.25 0v-5a.625.625 0 0 0-.625-.624h-5a.625.625 0 1 0 0 1.25M4.485 14.631l4.07-4.07a.625.625 0 0 1 .884.884l-4.07 4.07h3.49a.625.625 0 1 1 0 1.25h-5a.625.625 0 0 1-.624-.625v-5a.625.625 0 1 1 1.25 0z"})},b=(0,s().IU)("arrowExpandDiagonalBottomLeftToTopRight",M);const y={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M4.665 17.22a.625.625 0 0 0 .805.365 7.96 7.96 0 0 0 4.528-4.353 7.94 7.94 0 0 0 4.532 4.353.625.625 0 0 0 .44-1.17 6.69 6.69 0 0 1-4.345-6.268V4.509l2.683 2.683a.625.625 0 0 0 .884-.884l-3.75-3.75a.625.625 0 0 0-.884 0l-3.75 3.75a.625.625 0 1 0 .884.884l2.683-2.683v5.625a6.71 6.71 0 0 1-4.345 6.281.625.625 0 0 0-.365.805"})},k=(0,s().IU)("arrowMergeUp",y);var S=()=>a(585402);const h={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 1 0-15.25 7.625 7.625 0 0 1 0 15.25m-1.046-4.769 3.834-2.236a.718.718 0 0 0 0-1.24L8.954 7.144a.718.718 0 0 0-1.079.62v4.472c0 .554.6.9 1.08.62"})},N=(0,s().IU)("arrowTriangleRightCircleFill",h),C={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M6.375 15.15c0-.345.28-.625.625-.625h10.1a.625.625 0 1 1 0 1.25H7a.625.625 0 0 1-.625-.625M7 4.525a.625.625 0 1 0 0 1.25h10.1a.625.625 0 1 0 0-1.25zm0 5a.625.625 0 1 0 0 1.25h10.1a.625.625 0 1 0 0-1.25zm-4.025-3.5a.875.875 0 1 0 0-1.75.875.875 0 0 0 0 1.75m.875 4.125a.875.875 0 1 1-1.75 0 .875.875 0 0 1 1.75 0m-.975 5.875a.875.875 0 1 0 0-1.75.875.875 0 0 0 0 1.75"})},w=(0,s().IU)("bulletedList",C),I={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("g",{clipPath:"url(#clip0_9183_13197)",children:(0,r.jsx)("path",{d:"M5.375 1.25a.625.625 0 1 0-1.25 0v2.875H1.25a.625.625 0 1 0 0 1.25h2.875v8.375c0 1.174.951 2.125 2.125 2.125h8.375v2.875a.625.625 0 1 0 1.25 0v-2.875h2.875a.625.625 0 1 0 0-1.25h-2.875V6.25a2.125 2.125 0 0 0-2.125-2.125H5.375zm0 4.125h8.375c.483 0 .875.392.875.875v8.375H6.25a.875.875 0 0 1-.875-.875z"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_9183_13197",children:(0,r.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},P=(0,s().IU)("crop",I);var x=()=>a(680093),L=()=>a(19296);const A={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,r.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.481v1.92H6.4a2.425 2.425 0 0 0-2.425 2.424v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.431a2.23 2.23 0 1 1 4.46 0v2.094a.625.625 0 1 0 1.25 0V5.431a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .65-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},j=(0,s().IU)("lockOpen",A),D={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M13.594 4.125a.625.625 0 1 0 0 1.25H17a.625.625 0 1 0 0-1.25zM3 14.625a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm-.625-2.875c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625m11.219-4.125a.625.625 0 1 0 0 1.25H17a.625.625 0 1 0 0-1.25zM2.5 7a2.75 2.75 0 0 1 2.75-2.75h.321a.5.5 0 0 1 0 1H5.25a1.75 1.75 0 0 0-1.746 1.638A1.786 1.786 0 1 1 4.929 9.75 2.43 2.43 0 0 1 2.5 7.32zm5.143 0a2.75 2.75 0 0 1 2.75-2.75h.321a.5.5 0 1 1 0 1h-.321a1.75 1.75 0 0 0-1.747 1.638 1.786 1.786 0 1 1 1.425 2.862 2.43 2.43 0 0 1-2.428-2.43z"})},Z=(0,s().IU)("quoteText",D),T={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10 2.399c.27 0 .51.174.594.432l1.507 4.636h4.874a.625.625 0 0 1 .367 1.13L13.4 11.462l1.506 4.636a.625.625 0 0 1-.962.699L10 13.932l-3.943 2.865a.625.625 0 0 1-.962-.699L6.6 11.462 2.658 8.597a.625.625 0 0 1 .367-1.13h4.874L9.406 2.83A.625.625 0 0 1 10 2.399m0 2.647L8.948 8.285a.625.625 0 0 1-.595.432H4.95l2.754 2c.22.16.31.442.227.7l-1.052 3.238 2.755-2.001a.625.625 0 0 1 .734 0l2.755 2-1.052-3.237a.625.625 0 0 1 .227-.7l2.754-2h-3.405a.625.625 0 0 1-.594-.432z"})},R=(0,s().IU)("star",T),U={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 0 0-.95.814l3.18 3.71h-3.98a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .903-.183l1.215 1.418a.625.625 0 1 0 .95-.814l-.495-.576a.6.6 0 0 1-.127-.113l-11.4-13.3a.6.6 0 0 1-.093-.144m.051 5.632h3.129l5.018 5.853.027.085-2.755-2.001a.625.625 0 0 0-.734 0l-2.755 2 1.052-3.237a.625.625 0 0 0-.227-.7zm8.633 2.613 3.762-2.733a.625.625 0 0 0-.367-1.13H12.1L10.594 2.83a.625.625 0 0 0-1.188 0L8.55 5.463l.953 1.112L10 5.046l1.052 3.239a.625.625 0 0 0 .595.432h3.404l-2.287 1.662z"})},F=(0,s().IU)("starSlash",U),V=(0,s().IU)("timeBy",{viewBox:"0 0 30 30",svg:(0,r.jsx)("path",{d:"M14 25H16V15H14C13.919 15.164 13.209 15.698 12 15.909V17.94C12.743 17.85 13.416 17.652 14 17.388V25ZM25 4C25 2.343 23.657 1 22 1C20.343 1 19 2.343 19 4H11C11 2.343 9.657 1 8 1C6.343 1 5 2.343 5 4H1V29H29V4H25ZM21 4C21 3.449 21.448 3 22 3C22.552 3 23 3.449 23 4V6C23 6.551 22.552 7 22 7C21.448 7 21 6.551 21 6V4ZM7 4C7 3.449 7.448 3 8 3C8.552 3 9 3.449 9 4V6C9 6.551 8.552 7 8 7C7.448 7 7 6.551 7 6V4ZM27 27H3V13H27V27ZM27 11H3V6H5C5 7.657 6.343 9 8 9C9.657 9 11 7.657 11 6H19C19 7.657 20.343 9 22 9C23.657 9 25 7.657 25 6H27V11Z"})}),B={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zm11.875 7h-5.75v-2.25h5.75zm-5.75 1.25h5.75v1.375a.875.875 0 0 1-.875.875h-4.875zm-1.25-1.25h-5.75v-2.25h5.75zm-5.75 1.25h5.75v2.25H4.5a.875.875 0 0 1-.875-.875zm0-4.75V6.25c0-.483.392-.875.875-.875h4.875v2.25zm7 0v-2.25H15.5c.483 0 .875.392.875.875v1.375z"})},_=(0,s().IU)("viewTable",B);var H=()=>a(35980),z=()=>a(955620),O=()=>a(788860),E=()=>a(513670),J=()=>a(909240),G=()=>a(33150),K=()=>a(308186),q=()=>a(544607),W=()=>a(421654),Y=()=>a(762478),$=()=>a(636340),Q=()=>a(879952),X=()=>a(269299),ee=()=>a(423402),te=()=>a(81954),ae=()=>a(528918),ne=()=>a(527278);const oe=(0,O().vU)({importingCSV:{id:"databaseViewActions.importingCSV.loadingMessage",defaultMessage:"Importing"},uploadingCSV:{id:"databaseViewActions.uploadingCSV.loadingMessage",defaultMessage:"Uploading"},importFailed:{id:"databaseViewActions.importFailedError.message",defaultMessage:"Import failed."}});function ie(e){const{store:t,environment:n}=e,o=async(e,o,i)=>{ae().j({message:oe.importingCSV});const s=t.getCollectionStore();if(!s)return;if(!a(472753).R.findCollectionViewBlockFromStore(t))return;const r=(0,a(998411).r)(),c=a(782646).Lj(n,a(576441).E,{importType:"MergeIntoCollection",fileURL:e,fileName:o,collection:{id:s.id,spaceId:(0,te().J)(s.pointer.spaceId)},spaceId:(0,te().J)(s.pointer.spaceId),userTimeZone:r,signedToken:i}),l=a(749826).default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let d=!1;for await(const t of c){if(t.error)throw K().UW(ne().Z.formatMessage(oe.importFailed)),ae().x(),t.error;!d&&l&&"status"in t.value&&"updated_collection"===t.value.status.message&&(d=!0,ae().x())}ae().x()};let s;const r={},c=performance.now();a(109757).cR({environment:n,bucket:"temporary",onStart:e=>{s=e,ae().j({message:oe.uploadingCSV})},onCompleteWithToken:e=>{r.uploadTimeTaken=performance.now()-c,r.firstTimeNavigateToCollection=r.uploadTimeTaken,o(e[0].fileUrl,s[0].name,e[0].signedToken),r.overallTimeTaken=performance.now()-c;for(const[t,o]of Object.entries(r))(0,a(594546).j)({environment:n,event:{eventName:"import_file_finished",eventProperties:{importUploadType:"csv",importType:"MergeIntoCollection",importLatency:o,importSource:"file",importLatencyType:t,importFileCount:1}}});i().log({level:"info",from:"mergeWithCSV",type:"mergeWithCSVFinished",data:{miscDataToConvertToString:{data:{uploadType:"csv",importType:"MergeIntoCollection",importLatencies:r,importSource:"file",fileNames:[s[0].name]}}}})},onError:e=>{ae().x(),K().UW(ne().Z.formatMessage(oe.importFailed))}})}var se=()=>a(887430),re=()=>a(388284),ce=()=>a(951877),le=()=>a(630903),de=()=>a(150569),ue=()=>a(421797),ge=()=>a(546634),me=()=>a(889765),fe=()=>a(793935),pe=()=>a(156958),ve=()=>a(619541),Me=()=>a(876822),be=()=>a(77785),ye=()=>a(49802),ke=()=>a(182008),Se=()=>a(83110),he=()=>a(717538),Ne=()=>a(313351),Ce=()=>a(472592),we=()=>a(609967),Ie=()=>a(998244),Pe=()=>a(63684),xe=()=>a(667717),Le=()=>a(790082);const Ae=(0,O().vU)({fixLegacyTransclusion:{id:"action.fixLegacyTransclusion.name",defaultMessage:"Fix legacy transclusion"},insertBelowName:{id:"action.insertBelow.name",defaultMessage:"Insert below"},startPresentationName:{id:"action.startPresentation.name",defaultMessage:"Start presentation"},copyDirectLinkName:{id:"action.copyDirectLink.name",defaultMessage:"Copy link to original"},openasPageName:{id:"action.openasPage.name",defaultMessage:"Open as page"},copyLinksName:{id:"action.copyLinks.name",defaultMessage:"Copy links to all"},viewOriginalName:{id:"action.viewOriginal.name",defaultMessage:"View original"},openInBrowserName:{id:"action.openInBrowser.name",defaultMessage:"Open in browser"},downloadName:{id:"action.download.name",defaultMessage:"Download"},replaceName:{id:"action.replace.name",defaultMessage:"Replace"},turnSimpleTableIntoCollection:{id:"action.turnIntoCollection.title",defaultMessage:"Turn into database"},viewAsSpreadsheetPrototype:{id:"action.viewAsSpreadsheetPrototype.title",defaultMessage:"View as spreadsheet"},editPropertyName:{id:"action.editProperty.name",defaultMessage:"Edit property"},clearDateName:{id:"action.clearDate.name",defaultMessage:"Clear date"},turnintoInlineName:{id:"action.turnintoInline.name",defaultMessage:"Turn into inline"},turnintoPageName:{id:"action.turnintoPage.name",defaultMessage:"Turn into page"},turnCollectionIntoSimpleTable:{id:"action.turnintoSimpleTable.name",defaultMessage:"Turn into simple table"},mergewithCSVName:{id:"action.mergewithCSV.name",defaultMessage:"Merge with CSV"},mergewithCSVCaption:{id:"action.mergewithCSV.caption",defaultMessage:"Header row required"},openIn:{id:"action.openIn.name",defaultMessage:"Open in"},lockDatabaseName:{id:"action.lockDatabaseName.name",defaultMessage:"Lock database"},unlockDatabaseName:{id:"action.unlockDatabaseName.name",defaultMessage:"Unlock database"},lockDatabaseViewsName:{id:"action.lockDatabaseViewsName.name",defaultMessage:"Lock views"},unlockDatabaseViewsName:{id:"action.unlockDatabaseViews.name",defaultMessage:"Unlock views"},lockWikiName:{id:"action.lockWikiName.name",defaultMessage:"Lock wiki"},reloadPreview:{id:"action.reloadPreview",defaultMessage:"Reload preview"},unlockWikiName:{id:"action.unlockWikiName.name",defaultMessage:"Unlock wiki"},turnPreviewIntoMention:{id:"action.turnPreviewIntoMention",defaultMessage:"Turn into mention"},reloadSyncedPage:{id:"action.reloadSyncedPage",defaultMessage:"Sync page"},addtoFavoritesName:{id:"action.addtoFavorites.name",defaultMessage:"Add to Favorites"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},configureName:{id:"action.configure.name",defaultMessage:"Configure"},editIconName:{id:"action.editIcon.name",defaultMessage:"Icon"},editIconNameFeatureGated:{id:"action.editIcon.nameFeatureGated",defaultMessage:"Edit icon"},wrapCodeKeywords:{id:"action.wrapCode.fuzzySearchKeywords",defaultMessage:"Wrap Code"},wrapCodeLabel:{id:"action.wrapCode.label",defaultMessage:"Wrap code"},languageModeName:{id:"action.languageMode.name",defaultMessage:"Set language"},formatCodeLabel:{id:"action.formatCode.label",defaultMessage:"Format code"},openInBrowserLabel:{id:"action.openInBrowser.label",defaultMessage:"Open in browser"},workAtNotion:{id:"action.workAtNotion.name",defaultMessage:"Work at Notion"},quoteSizeSection:{id:"action.section.quoteSize",defaultMessage:"Quote size"},quoteSizeDefault:{id:"action.quoteSize.default",defaultMessage:"Default"},quoteSize:{id:"action.quoteSize.name",defaultMessage:"Quote size"},quoteSizeLarge:{id:"action.quoteSize.large",defaultMessage:"Large"},listFormatDefault:{id:"action.listFormat.letters.default",defaultMessage:"Default"},listFormatSection:{id:"action.listFormat.sectionName",defaultMessage:"List format"},listFormat:{id:"action.listFormat.name",defaultMessage:"List format"},listFormatNumbers:{id:"action.listFormat.numbers.name",defaultMessage:"Numbers"},listFormatLetters:{id:"action.listFormat.letters.name",defaultMessage:"Letters"},listFormatRoman:{id:"action.listFormat.letters.roman",defaultMessage:"Roman numerals"},listFormatDisc:{id:"action.listFormat.disc.name",defaultMessage:"Disc"},listFormatCircle:{id:"action.listFormat.circle.name",defaultMessage:"Circle"},listFormatSquare:{id:"action.listFormat.square.name",defaultMessage:"Square"},alignmentName:{id:"action.alignment.name",defaultMessage:"Align"},cropImage:{id:"action.cropImage",defaultMessage:"Crop image"},turnTableIntoDatabaseWarning:{id:"action.turnTableIntoDatabaseWarning",defaultMessage:"All suggestions in the table must be resolved before the table can be turned into a database."}}),je=[ue().MaU,ue().ffD(ue().sRS),ue().ffD(ue().cWe),ue().or([ue().O4s,ue().ffD(ue().OPg)]),...Ne().kv],De=(0,Ne().cN)({key:"fixLegacyTransclusion",displayName:Ae.fixLegacyTransclusion,analyticsName:Ae.fixLegacyTransclusion.defaultMessage,svg:p,validators:[ue().szW,ue().U7o,...je],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;(await a(367019).G.legacyTransclusionActions.load()).fixLegacyTransclusion({environment:n,store:t[0]})}}),Ze=(0,Ne().MV)({key:"turn into section",displayName:Ne().RE.turnIntoName,analyticsName:Ne().RE.turnIntoName.defaultMessage,svg:S().g,validators:[ue().J5S,ue().ffD(ue().OPg),ue().wFS,me().c,ue().Vc5],subActions:()=>[{key:0,title:void 0,render:e=>(0,r.jsx)(re().Z,{...e}),actions:Le().gH.actions}]}),Te=(0,Ne().cN)({key:"insert below",displayName:Ae.insertBelowName,analyticsName:Ae.insertBelowName.defaultMessage,svg:a(79685).j,validators:[ue().J5S,ue().ffD(ue().OPg),ue().ffD(ue().Hjo),ue().Eok,ue().tqC],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;X().createAndCommit({userAction:"actionRegistry.insertBelow",environment:n,canUndo:!0,perform:e=>{a(540413).insertTextBelow({environment:n,blocks:t,transaction:e})}})}}),Re=(0,Ne().cN)({key:"start presentation",displayName:Ae.startPresentationName,analyticsName:Ae.startPresentationName.defaultMessage,validators:[ue().U7o,ue().P99(n().Ti.slide)],closeParentMenu:!0,svg:N,action:async e=>{let{environment:t,blocks:a}=e}}),Ue=(0,Ne().cN)({key:"copy direct link to content housed within block",displayName:Ae.copyDirectLinkName,analyticsName:Ae.copyDirectLinkName.defaultMessage,svg:x().N,validators:[ue().jlf,ue().U7o,ue().ffD(ue().OOd),ue().ffD(ue().Fxc),ue().or([ue().Cjo,ue().$H4,ue().P99(n().Ti.bookmark),ue().P99(n().Ti.externalObjectInstance),ue().P99(n().Ti.externalObjectInstancePage),ue().K5G,ue().p5B]),ue().ffD(ue().SYI)],closeParentMenu:!0,action:(e,t)=>{const{lazyDependencies:{clipboardActions:a}}=e;a?a.copyDirectLinkToContent({...e,event:t}):i().log({data:{miscDataToConvertToString:{actionKey:"copy direct link to content housed within block"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Fe=(0,Ne().cN)({key:"open collection as page",displayName:Ae.openasPageName,analyticsName:Ae.openasPageName.defaultMessage,svg:b,validators:[ue().vjj,ue().ffD(ue().O4s),ue().ffD(ue().LHu)],closeParentMenu:!0,action:e=>a(453999).YP(e)}),Ve=(0,Ne().cN)({key:"copy links to blocks",displayName:Ae.copyLinksName,analyticsName:Ae.copyLinksName.defaultMessage,svg:x().N,validators:[ue().jlf,ue().ECq,ue().ffD(ue().uY7)],closeParentMenu:!0,action:(e,t)=>{const{lazyDependencies:{clipboardActions:a}}=e;a?a.copyLinksToBlocks({...e,event:t}):i().log({data:{miscDataToConvertToString:{actionKey:"copy links to blocks"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Be=(0,Ne().cN)({key:"view original",displayName:Ae.viewOriginalName,analyticsName:Ae.viewOriginalName.defaultMessage,svg:v().J,validators:[ue().ffD(ue().daU),ue().U7o,ue().or([ue().Cjo,ue().$H4])],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const n=t[0];(0,ge().Es)(n)&&q().qL(a,{store:n,from:"view_original"})}}),_e=(0,Ne().cN)({key:"view in browser",displayName:Ae.openInBrowserName,analyticsName:Ae.openInBrowserName.defaultMessage,svg:v().J,validators:[ue().daU,ue().U7o,ue().or([ue().Cjo,ue().$H4])],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const n=t[0];(0,ge().Es)(n)&&q().qL(a,{store:n,from:"view_original"})}}),He=(0,Ne().cN)({key:"download source",displayName:Ae.downloadName,analyticsName:Ae.downloadName.defaultMessage,svg:a(102445).D,validators:[ue().U7o,ue().or([ue().$H4,ue().Cjo]),ue().or([ue().VBw,ue().OOd]),ue().ffD(ue().Fxc)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const n=t[0];(0,ge().Es)(n)&&q().TH({environment:a,store:n})}}),ze=(0,Ne().cN)({key:"replace source",displayName:Ae.replaceName,analyticsName:Ae.replaceName.defaultMessage,svg:p,validators:[ue().J5S,ue().ffD(ue().OPg),ue().U7o,ue().or([ue().$H4,ue().Cjo])],closeParentMenu:!0,action:e=>{let{blocks:t}=e;q().x1({store:t[0]})}}),Oe=(0,Ne().cN)({key:"view as spreadsheet prototype",displayName:Ae.viewAsSpreadsheetPrototype,analyticsName:Ae.viewAsSpreadsheetPrototype.defaultMessage,svg:_,validators:[()=>!1,ue().QLY("spreadsheet_prototype"),ue().J5S,ue().ffD(ue().b47),ue()._nA,me().c,ue().ffD(ue().US8)],closeParentMenu:!0,action:e=>{let{blocks:t}=e;const a=t[0];be().Z.setState({...be().Z.getState(),[a.id]:!0})}}),Ee=(0,Ne().cN)({key:"turn into collection",displayName:Ae.turnSimpleTableIntoCollection,analyticsName:Ae.turnSimpleTableIntoCollection.defaultMessage,svg:S().g,validators:[ue().J5S,ue().ffD(ue().b47),ue()._nA,me().c,ue().ffD(ue().US8)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;return X().createAndCommit({userAction:"actionRegistry.turnSimpleTableIntoCollection",environment:n,canUndo:!0,perform:e=>{const o=t[0];o.getContentStores().flatMap((e=>{const t=Object.values(e.getProperties()).flat().filter(a(696459).$K);return(0,z().Nv0)(t)})).length>0?K().PV({message:(0,r.jsx)(O()._H,{...Ae.turnTableIntoDatabaseWarning})}):(pe().Fv({environment:n,simpleTableStore:o,transaction:e}),Q().ZH({environment:n}),pe().MO())}})}}),Je=[ue().J5S,ue().ffD(ue().p1d),ue().AKv,ue().ffD(ue().Q_M),ue().ffD(ue().YGm),function(e){return e.blocks.some((e=>e.getAssociatedCollectionStore()))}];const Ge=(0,Ne().MV)({key:"edit property",displayName:Ae.editPropertyName,analyticsName:Ae.editPropertyName.defaultMessage,svg:w,validators:Je,subActions:e=>{let{blocks:t}=e;const n=t.at(0);if(!n)return[];const i=(0,se().fm)(n),s=n.getAssociatedCollectionStore();if(!s)return[];const c=(null==i?void 0:i.normalizedSchemaStore.state)??s.getSchema(),l=s.getFormat(),d=(0,a(305580).i)(l,c,void 0,o().j5.Collection);if(!d.collection_page_properties)return[];d.collection_page_properties.unshift({property:"title"});const u=E().oA(d.collection_page_properties.map((e=>{const n=c[e.property];if(n&&(0,a(561933).Sb)({propertySchema:n,property:e.property,blockStores:t,collectionSchema:c,collectionStore:s,spaceStore:Me().default.state.currentSpaceStore}))return function(e){const{property:t,propertySchema:n}=e,o=n.name;return{key:`Edit Property ${o} ${t}`,displayName:o,analyticsName:"Edit property",searchName:o,validators:Je,closeParentMenu:!0,action:(e,o)=>{let{blocks:i,originRect:s,environment:r}=e;"checkbox"===n.type?X().createAndCommit({userAction:"actionRegistry.createEditPropertyAction",environment:r,canUndo:!0,perform:e=>{J().vO({stores:i,property:t,transaction:e})}}):s&&J().bA({environment:r,store:i[0],additionalStores:i.slice(1),property:t,format:a(356321).C.Page,rect:{...E().Go(s),width:200},preventClearSelection:!0,blockPropertyValueOverlayStore:a(718959)._H(),collectionContextStore:(0,se().fm)(i[0])})},render:e=>(0,r.jsx)(ce().N,{...e,propertySchema:n,format:ce().L.Name})}}({property:e.property,propertySchema:n})})));return[{key:0,title:void 0,render:e=>(0,r.jsx)(re().Z,{...e}),actions:u}]}}),Ke=(0,Ne().cN)({key:"clear date",displayName:Ae.clearDateName,analyticsName:Ae.clearDateName.defaultMessage,svg:V,validators:[ue().J5S,ue().ffD(ue().OPg),ue().or([ue().j2U("timeline"),ue().j2U("calendar")])],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;const o=(0,se().fm)(n[0]);if(!o)return;const i=null==o?void 0:o.collectionViewStore();if(!i)return;const s=o.normalizedSchemaStore.state;X().createAndCommit({userAction:"actionRegistry.clearDate",environment:t,canUndo:!0,perform:e=>{a(493843).k2({stores:n,collectionViewStore:i,schema:s,transaction:e})}})}}),qe=(0,Ne().cN)({key:"view collection view inline",displayName:Ae.turnintoInlineName,analyticsName:Ae.turnintoInlineName.defaultMessage,svg:S().g,validators:[ue().Mgm,ue().ffD(ue().O4s),ue().k5s,ue().ffD(ue().b47),ue().ffD(ue().f7f),ue().Vc5],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return X().createAndCommit({userAction:"actionRegistry.viewCollectionViewInline",environment:a,canUndo:!0,perform:e=>{le().transformBlocks({environment:a,blocks:t,blockType:"collection_view",transaction:e}),Q().ZH({environment:a})}})}}),We=(0,Ne().cN)({key:"view collection view as page",displayName:Ae.turnintoPageName,analyticsName:Ae.turnintoPageName.defaultMessage,svg:S().g,validators:[ue().vjj,ue().ffD(ue().O4s),ue().k5s,ue().ffD(ue().b47),ue().ffD(ue().OPg),ue().ffD(ue().K5G)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return X().createAndCommit({userAction:"actionRegistry.turnCollectionViewIntoCollectionViewPage",environment:a,canUndo:!0,perform:e=>{le().transformBlocks({environment:a,blocks:t,blockType:"collection_view_page",transaction:e})}})}}),Ye=(0,Ne().cN)({key:"turn into simple table",displayName:Ae.turnCollectionIntoSimpleTable,analyticsName:Ae.turnCollectionIntoSimpleTable.defaultMessage,svg:S().g,validators:[ue().vjj,ue().dM3("table"),ue().ffD(ue().O4s),ue().k5s,ue().ffD(ue().b47),ue().TKz,ue().iJI,ue().ffD(ue().K5G)],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;const o=t[0],s=o.useCrdt(),r=await a(881688).ZB({environment:n,collectionViewBlockStore:o});if(r.some((e=>e.useCrdt()!==s)))return a(102182).oV({label:s?"Cannot turn database with non-CRDT pages into simple table on CRDT page":"Cannot turn database with CRDT pages into simple table on non-CRDT page"}),void i().log({level:"info",from:"blockActionRegistry",type:"crdt:turnCollectionIntoSimpleTableUseCrdtMismatch",data:{miscDataToConvertToString:{collectionViewBlockUseCrdt:s}}});X().createAndCommit({userAction:"actionRegistry.turnCollectionIntoSimpleTable",environment:n,canUndo:!0,perform:e=>{pe().sR({environment:n,collectionViewBlockStore:o,pageStores:r,transaction:e}),Q().ZH({environment:n}),pe().MO()}})}}),$e=(0,Ne().cN)({key:"merge with csv",displayName:Ae.mergewithCSVName,analyticsName:Ae.mergewithCSVName.defaultMessage,validators:[ue().YGm,ue().k5s,ue().Ggh,ue().YZb,ue().ffD(ue().OPg),ue().ffD(ue().ESL),ue().ffD(ue().Jtb),ue().ffD(ue().K5G),ue().ffD(ue().uY7)],closeParentMenu:!0,render:e=>(0,r.jsx)(a(855238).Z,{...e,svg:k,title:(0,r.jsx)(O()._H,{...Ae.mergewithCSVName}),tooltipText:(0,r.jsx)(O()._H,{...Ae.mergewithCSVCaption})}),action:e=>{let{blocks:[t],environment:a}=e;ie({environment:a,store:t})}}),Qe=(0,Ne().N$)({key:"database lock",displayName:Ae.lockDatabaseName,label:ne().Z.formatMessage(Ae.lockDatabaseName),svg:e=>(0,L().Y)(e),isEnabled:e=>e.isLocked(),validators:[ue().YGm,ue().plk,ue().ffD(ue().f7f),ue().k5s,ue().ffD(ue().uY7)],action:(e,t,a)=>$().sW({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),Xe=(0,Ne().N$)({key:"database views lock",displayName:Ae.lockDatabaseViewsName,label:ne().Z.formatMessage(Ae.lockDatabaseViewsName),svg:e=>(0,L().Y)(e),isEnabled:e=>e.isLocked(),validators:[ue().YGm,ue().ffD(ue().plk),ue().k5s,ue().ffD(ue().uY7)],action:(e,t,a)=>$().sW({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),et=(0,Ne().N$)({key:"wiki lock",displayName:Ae.lockWikiName,label:ne().Z.formatMessage(Ae.lockWikiName),svg:e=>(0,L().Y)(e),isEnabled:e=>e.isLocked(),validators:[ue().YGm,ue().plk,ue().f7f,ue().k5s,ue().ffD(ue().uY7)],action:(e,t,a)=>$().sW({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),tt=(0,Ne().cN)({key:"wiki unlock",displayName:Ae.unlockWikiName,analyticsName:Ae.unlockWikiName.defaultMessage,svg:j,validators:[ue().YGm,ue().plk,ue().f7f,ue().k5s,ue().p1d],closeParentMenu:!1,action:e=>{let{blocks:t,environment:n}=e;const o=t[0];a(441530).bo({environment:n,store:o,lock:!1})}});function at(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[ue().J5S,ue().ffD(ue().OPg),ue().ffD(ue().nJQ),ue().U7o,e?ue().or([ue().rol("external_object_instance"),ue().p5B]):ue().rol("external_object_instance"),ue().ffD(ue().HBU)]}const nt=(0,Ne().cN)({key:"reload link preview",displayName:Ae.reloadPreview,analyticsName:Ae.reloadPreview.defaultMessage,svg:p,validators:at(!1),closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstanceBlockStore()&&ee().qK({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})}}),ot=(0,Ne().cN)({key:"turn preview into mention",displayName:Ae.turnPreviewIntoMention,analyticsName:Ae.turnPreviewIntoMention.defaultMessage,svg:S().g,validators:at(!0),closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;0!==n.length&&X().createAndCommit({userAction:"actionRegistry.turnPreviewIntoMention",environment:t,canUndo:!0,perform:e=>{n[0].isType("alias")?a(905).az({blockStore:n[0],transaction:e}):ee().sz({environment:t,block:n[0],transaction:e})}})}});function it(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,Ne().cN)({key:"add to favorites",displayName:Ae.addtoFavoritesName,analyticsName:Ae.addtoFavoritesName.defaultMessage,svg:R,validators:[...e,ue().jlf,ue().DFt,ue().U7o,ue().ffD(ue().UI7),ue().ffD(ue().tls),ue().ffD(ue().$w6)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=Me().default.state;if(n){const e=t[0];X().createAndCommit({userAction:"actionRegistry.addToFavorites",environment:a,canUndo:!0,perform:t=>{fe().bookmarkPage({spaceViewStore:n,store:e,transaction:t})}})}}})}const st=it([ue().tqC]),rt=it();function ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,Ne().cN)({key:"remove from favorites",displayName:Ae.removefromFavoritesName,analyticsName:Ae.removefromFavoritesName.defaultMessage,svg:F,validators:[...e,ue().UI7,ue().U7o],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=Me().default.state;n&&X().createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:a,canUndo:!0,perform:e=>{fe().unbookmarkPage({spaceViewStore:n,store:t[0],transaction:e})}})}})}const lt=ct([ue().tqC]),dt=ct(),ut=(0,Ne().cN)({key:"reload synced page",displayName:Ae.reloadSyncedPage,analyticsName:Ae.reloadSyncedPage.defaultMessage,svg:p,validators:[ue().J5S,ue().ffD(ue().OPg),ue().ffD(ue().nJQ),ue().U7o,ue().rol("external_object_instance_page")],closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstancePageBlockStore()&&ee().qK({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId(),bypassCache:!0})}}),gt=ft(!1),mt=ft(!0);function ft(e){return(0,Ne().cN)({key:"edit icon",displayName:e?Ae.editIconNameFeatureGated:Ae.editIconName,analyticsName:e?Ae.editIconNameFeatureGated.defaultMessage:Ae.editIconName.defaultMessage,svg:a(949558).emojiFaceIcon,validators:[ue().J5S,ue().ffD(ue().OPg),ue().or([ue().lrK,ue().xDy([ue().tYA,ue().tiK])])],closeParentMenu:!0,action:e=>{const{environment:t,originRect:n}=e;let i=e.blocks;if(ue().tYA(e)&&ue().tiK(e)){const e=i[0].getParentStore();e instanceof a(826955).G&&(i=[e])}const s=e=>{var t;return e.isType("button")?null===(t=e.getAutomationStore())||void 0===t?void 0:t.getIconStore():e.getIconStore()},c=(e,n)=>{var r;i.forEach((a=>{const n=s(a);n&&X().createAndCommit({userAction:"actionRegistry.editIcon",environment:t,canUndo:!0,perform:t=>{$().sO({store:n,value:e,transaction:t})}})})),"url"!==(null===(r=(0,o().Lf)(e))||void 0===r?void 0:r.type)&&i.some((e=>e.isType("callout")))&&H().Z.set({userId:t.currentUser.id,key:a(28810).n,value:e??""}),n&&n.keepVisible||Y().Z()},l=i.find((e=>{return(t=e).isType("button")?null===(a=s(t))||void 0===a?void 0:a.getValue():t.hasIcon();var t,a})),d=i.every((e=>e.isType("callout"))),u=[{type:"emoji",title:(0,r.jsx)(O()._H,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),onChange:c},{type:"icon",title:(0,r.jsx)("div",{style:{display:"flex",gap:4},children:(0,r.jsx)(O()._H,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:c}];Y().$(t,{recordIconLoggingData:{source:"bulk_block_selection"},originGap:4,originRect:n,popupWidth:de().FZ,popupHeight:de().kX,isSmallWidth:!1,title:ne().Z.getIntl().formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:l?()=>{i.forEach((e=>{const a=s(e);a&&X().createAndCommit({userAction:"actionRegistry.editIcon",environment:t,canUndo:!0,perform:e=>{$().sO({store:a,value:void 0,transaction:e})}})})),Y().Z()}:void 0,currentTab:"emoji",isCallout:d,tabs:u,disableClearSelection:!0})}})}const pt=(0,Ne().N$)({key:"code wrap",displayName:Ae.wrapCodeKeywords,label:ne().Z.formatMessage(Ae.wrapCodeLabel),isEnabled:e=>Boolean(e.getFormat().code_wrap),validators:[ue().U7o,ue().P99("code")],action:(e,t,a)=>W().FH({stores:[t],update:{code_wrap:!t.getFormat().code_wrap},transaction:a}),afterAction:(e,t)=>{H().Z.set({userId:t.currentUser.id,key:ve().T.localCodeWrapPreferenceKey,value:e})}}),vt=(0,O().vU)({ABAP:{id:"action.languageMode.abap",defaultMessage:"ABAP"},Agda:{id:"action.languageMode.agda",defaultMessage:"Agda"},Arduino:{id:"action.languageMode.arduino",defaultMessage:"Arduino"},"ASCII Art":{id:"action.languageMode.asciiart",defaultMessage:"ASCII Art"},Assembly:{id:"action.languageMode.nasm",defaultMessage:"Assembly"},Bash:{id:"action.languageMode.bash",defaultMessage:"Bash"},BASIC:{id:"action.languageMode.basic",defaultMessage:"Basic"},BNF:{id:"action.languageMode.bnf",defaultMessage:"BNF"},C:{id:"action.languageMode.c",defaultMessage:"C"},"C#":{id:"action.languageMode.csharp",defaultMessage:"C#"},"C++":{id:"action.languageMode.cplusplus",defaultMessage:"C++"},Clojure:{id:"action.languageMode.clojure",defaultMessage:"Clojure"},CoffeeScript:{id:"action.languageMode.coffeescript",defaultMessage:"CoffeeScript"},Coq:{id:"action.languageMode.coq",defaultMessage:"Coq"},CSS:{id:"action.languageMode.css",defaultMessage:"CSS"},Dart:{id:"action.languageMode.dart",defaultMessage:"Dart"},Dhall:{id:"action.languageMode.dhall",defaultMessage:"Dhall"},Diff:{id:"action.languageMode.diff",defaultMessage:"Diff"},Docker:{id:"action.languageMode.docker",defaultMessage:"Docker"},EBNF:{id:"action.languageMode.ebnf",defaultMessage:"EBNF"},Elixir:{id:"action.languageMode.elixir",defaultMessage:"Elixir"},Elm:{id:"action.languageMode.elm",defaultMessage:"Elm"},Erlang:{id:"action.languageMode.erlang",defaultMessage:"Erlang"},"F#":{id:"action.languageMode.fsharp",defaultMessage:"F#"},Flow:{id:"action.languageMode.flow",defaultMessage:"Flow"},Fortran:{id:"action.languageMode.fortran",defaultMessage:"Fortran"},Gherkin:{id:"action.languageMode.gherkin",defaultMessage:"Gherkin"},GLSL:{id:"action.languageMode.glsl",defaultMessage:"GLSL"},Go:{id:"action.languageMode.go",defaultMessage:"Go"},GraphQL:{id:"action.languageMode.graphql",defaultMessage:"Graphql"},Groovy:{id:"action.languageMode.groovy",defaultMessage:"Groovy"},Haskell:{id:"action.languageMode.haskell",defaultMessage:"Haskell"},HCL:{id:"action.languageMode.hcl",defaultMessage:"HCL"},HTML:{id:"action.languageMode.html",defaultMessage:"HTML"},Idris:{id:"action.languageMode.idris",defaultMessage:"Idris"},Java:{id:"action.languageMode.java",defaultMessage:"Java"},JavaScript:{id:"action.languageMode.javascript",defaultMessage:"JavaScript"},JSON:{id:"action.languageMode.json",defaultMessage:"JSON"},Julia:{id:"action.languageMode.julia",defaultMessage:"Julia"},Kotlin:{id:"action.languageMode.kotlin",defaultMessage:"Kotlin"},LaTeX:{id:"action.languageMode.latex",defaultMessage:"LaTeX"},Less:{id:"action.languageMode.less",defaultMessage:"LESS"},Lisp:{id:"action.languageMode.lisp",defaultMessage:"Lisp"},LiveScript:{id:"action.languageMode.livescript",defaultMessage:"LiveScript"},"LLVM IR":{id:"action.languageMode.llvm",defaultMessage:"LLVM IR"},Lua:{id:"action.languageMode.lua",defaultMessage:"Lua"},Makefile:{id:"action.languageMode.makefile",defaultMessage:"Makefile"},Markdown:{id:"action.languageMode.markdown",defaultMessage:"Markdown"},Markup:{id:"action.languageMode.markup",defaultMessage:"Markup"},MATLAB:{id:"action.languageMode.matlab",defaultMessage:"MATLAB"},Mathematica:{id:"action.languageMode.mathematica",defaultMessage:"Mathematica"},Mermaid:{id:"action.languageMode.mermaid",defaultMessage:"Mermaid"},Nix:{id:"action.languageMode.nix",defaultMessage:"Nix"},"Notion Formula":{id:"action.languageMode.notionFormula",defaultMessage:"Notion Formula"},NotionScript:{id:"action.languageMode.notionScript",defaultMessage:"NotionScript"},"Objective-C":{id:"action.languageMode.objectiveC",defaultMessage:"Objective-C"},OCaml:{id:"action.languageMode.ocaml",defaultMessage:"OCaml"},Pascal:{id:"action.languageMode.pascal",defaultMessage:"Pascal"},Perl:{id:"action.languageMode.perl",defaultMessage:"Perl"},PHP:{id:"action.languageMode.php",defaultMessage:"PHP"},"Plain Text":{id:"action.languageMode.plaintext",defaultMessage:"Plain Text"},PowerShell:{id:"action.languageMode.powershell",defaultMessage:"Powershell"},Prolog:{id:"action.languageMode.prolog",defaultMessage:"Prolog"},Protobuf:{id:"action.languageMode.protobuf",defaultMessage:"Protobuf"},PureScript:{id:"action.languageMode.purescript",defaultMessage:"PureScript"},Python:{id:"action.languageMode.python",defaultMessage:"Python"},R:{id:"action.languageMode.r",defaultMessage:"R"},Racket:{id:"action.languageMode.racket",defaultMessage:"Racket"},Reason:{id:"action.languageMode.reason",defaultMessage:"Reason"},Ruby:{id:"action.languageMode.ruby",defaultMessage:"Ruby"},Rust:{id:"action.languageMode.rust",defaultMessage:"Rust"},Sass:{id:"action.languageMode.sass",defaultMessage:"Sass"},Scala:{id:"action.languageMode.scala",defaultMessage:"Scala"},Scheme:{id:"action.languageMode.scheme",defaultMessage:"Scheme"},Scss:{id:"action.languageMode.scss",defaultMessage:"SCSS"},Shell:{id:"action.languageMode.shell",defaultMessage:"Shell"},Smalltalk:{id:"action.languageMode.smalltalk",defaultMessage:"Smalltalk"},Solidity:{id:"action.languageMode.solidity",defaultMessage:"Solidity"},SQL:{id:"action.languageMode.sql",defaultMessage:"SQL"},Swift:{id:"action.languageMode.swift",defaultMessage:"Swift"},TOML:{id:"action.languageMode.toml",defaultMessage:"TOML"},TypeScript:{id:"action.languageMode.typescript",defaultMessage:"TypeScript"},"VB.Net":{id:"action.languageMode.vbdotnet",defaultMessage:"VB.Net"},Verilog:{id:"action.languageMode.verilog",defaultMessage:"Verilog"},VHDL:{id:"action.languageMode.vhdl",defaultMessage:"VHDL"},"Visual Basic":{id:"action.languageMode.visualbasic",defaultMessage:"Visual Basic"},WebAssembly:{id:"action.languageMode.webassembly",defaultMessage:"WebAssembly"},XML:{id:"action.languageMode.xml",defaultMessage:"XML"},YAML:{id:"action.languageMode.yaml",defaultMessage:"YAML"},"Java/C/C++/C#":{id:"action.languageMode.cstyle",defaultMessage:"Java/C/C++/C#"}}),Mt=[ue().J5S,ue().ffD(ue().OPg),ue().Eok,ue().rol("code"),ue().ffD(ue().O4s)],bt=(0,Ne().$J)({key:"code block languageMode actions",title:Ae.languageModeName,render:e=>(0,r.jsx)(re().Z,{...e}),actions:a(716703).X0.map((e=>(0,Ne().cN)({key:`set language ${e} action`,displayName:vt[e],analyticsName:`set language ${e}`,validators:Mt,closeParentMenu:!0,action:t=>{let{environment:a,blocks:n}=t;H().Z.set({userId:a.currentUser.id,key:ve().T.localLanguagePreferenceKey,value:e}),X().createAndCommit({userAction:"actionRegistry.languageModeActions",environment:a,canUndo:!0,perform:t=>{G().E5({language:e,blocks:n,transaction:t})}})},render:t=>(0,r.jsx)(a(827973).Z,{...t,title:e})})))}),yt=(0,Ne().MV)({key:"languageMode section",displayName:Ae.languageModeName,analyticsName:Ae.languageModeName.defaultMessage,validators:Mt,subActions:()=>[bt]}),kt=(0,Ne().cN)({key:"format code",displayName:Ae.formatCodeLabel,closeParentMenu:!0,analyticsName:Ae.formatCodeLabel.defaultMessage,validators:[ue().U7o,ue().P99("code"),ue().GzT],action:async e=>{let{blocks:t,environment:a}=e;const n=t[0];await G().Cn({codeBlockStore:n,environment:a})}}),St=(0,Ne().cN)({key:"open html in browser",displayName:Ae.openInBrowserLabel,closeParentMenu:!0,analyticsName:Ae.openInBrowserLabel.defaultMessage,validators:[ue().U7o,ue().P99("code"),ue().UQV,ue().mjl],action:e=>{let{blocks:t,environment:a}=e;const n=t[0].getTitleValue(),o=(0,z().QaF)(n),i=window.open();i&&i.document.write(o)}}),ht=(0,Ne().cN)({key:"work at notion",analyticsName:Ae.workAtNotion.defaultMessage,closeParentMenu:!0,displayName:Ae.workAtNotion,validators:[ue().P99("code"),ue().vM3],action:()=>{window&&window.open(a(836273)._j.careers)}}),Nt=[ue().J5S,ue().ffD(ue().OPg),ue().rol("quote")];function Ct(e){return t=>{H().Z.set({userId:t.environment.currentUser.id,key:ve().l.localSizePreferenceKey,value:e}),X().createAndCommit({userAction:"actionRegistry.createQuoteSizeAction",environment:t.environment,canUndo:!0,perform:a=>{W().FH({stores:t.blocks,update:{quote_size:e},transaction:a})}})}}const wt=(0,Ne().$J)({key:"quote size actions",title:Ae.quoteSizeSection,render:e=>(0,r.jsx)(re().Z,{...e}),actions:[(0,Ne().cN)({key:"quote size default",displayName:Ae.quoteSizeDefault,analyticsName:Ae.quoteSizeDefault.defaultMessage,validators:Nt,closeParentMenu:!0,action:Ct(void 0)}),(0,Ne().cN)({key:"quote size large",displayName:Ae.quoteSizeLarge,analyticsName:Ae.quoteSizeLarge.defaultMessage,validators:Nt,closeParentMenu:!0,action:Ct("large")})]}),It=(0,Ne().MV)({key:"quote size",displayName:Ae.quoteSize,analyticsName:Ae.quoteSize.defaultMessage,svg:Z,validators:Nt,subActions:()=>[wt]}),Pt=[ue().J5S,ue().ffD(ue().OPg),ue().rol("numbered_list"),ue().J8b("numbered_list")],xt=[ue().J5S,ue().ffD(ue().OPg),ue().rol("bulleted_list"),ue().J8b("bulleted_list")],Lt=(0,Ne().MV)({key:"number format",displayName:Ae.listFormat,analyticsName:Ae.listFormat.defaultMessage,svg:w,validators:Pt,subActions:()=>[jt]});function At(e){return t=>{X().createAndCommit({userAction:"actionRegistry.createListFormatAction",environment:t.environment,canUndo:!0,perform:a=>{W().FH({stores:t.blocks,update:{list_format:e},transaction:a})}})}}const jt=(0,Ne().$J)({key:"text color actions",title:Ae.listFormatSection,render:e=>(0,r.jsx)(re().Z,{...e}),actions:[(0,Ne().cN)({key:"list format default",displayName:Ae.listFormatDefault,analyticsName:Ae.listFormatDefault.defaultMessage,validators:Pt,closeParentMenu:!0,action:At(void 0)}),(0,Ne().cN)({key:"list format numbers",displayName:Ae.listFormatNumbers,analyticsName:Ae.listFormatNumbers.defaultMessage,validators:Pt,closeParentMenu:!0,action:At("numbers")}),(0,Ne().cN)({key:"list format letters",displayName:Ae.listFormatLetters,analyticsName:Ae.listFormatLetters.defaultMessage,validators:Pt,closeParentMenu:!0,action:At("letters")}),(0,Ne().cN)({key:"list format roman numerals",displayName:Ae.listFormatRoman,analyticsName:Ae.listFormatRoman.defaultMessage,validators:Pt,closeParentMenu:!0,action:At("roman")})]});function Dt(e){return t=>{X().createAndCommit({userAction:"actionRegistry.createBulletListFormatAction",environment:t.environment,canUndo:!0,perform:a=>{W().FH({stores:t.blocks,update:{bullet_list_format:e},transaction:a})}})}}const Zt=(0,Ne().$J)({key:"bullet list format actions",title:Ae.listFormatSection,render:e=>(0,r.jsx)(re().Z,{...e}),actions:[(0,Ne().cN)({key:"list format default",displayName:Ae.listFormatDefault,analyticsName:Ae.listFormatDefault.defaultMessage,validators:xt,closeParentMenu:!0,action:Dt(void 0)}),(0,Ne().cN)({key:"list format disc",displayName:Ae.listFormatDisc,analyticsName:Ae.listFormatDisc.defaultMessage,validators:xt,closeParentMenu:!0,action:Dt("disc")}),(0,Ne().cN)({key:"list format circle",displayName:Ae.listFormatCircle,analyticsName:Ae.listFormatCircle.defaultMessage,validators:xt,closeParentMenu:!0,action:Dt("circle")}),(0,Ne().cN)({key:"list format square",displayName:Ae.listFormatSquare,analyticsName:Ae.listFormatSquare.defaultMessage,validators:xt,closeParentMenu:!0,action:Dt("square")})]}),Tt=(0,Ne().MV)({key:"bulleted format",displayName:Ae.listFormat,analyticsName:Ae.listFormat.defaultMessage,svg:w,validators:xt,subActions:()=>[Zt]}),Rt=[ue().jlf,ue().J5S,ue().ffD(ue().OPg),ue().xDy([ue().U7o,ue().Cjo,ue().k6d])],Ut=(0,Ne().MV)({key:"alignment",displayName:Ae.alignmentName,analyticsName:Ae.alignmentName.defaultMessage,svg:u,validators:Rt,subActions:()=>[Bt]});function Ft(e){return t=>{X().createAndCommit({userAction:"actionRegistry.createAlignmentFormatAction",environment:t.environment,canUndo:!0,perform:a=>{if(t.blocks&&t.blocks.length>0)for(const n of t.blocks)W().hc({environment:t.environment,store:n,alignment:e,transaction:a})}})}}const Vt=(0,O().vU)({leftAlign:{id:"action.alignment.left.name",defaultMessage:"Left"},centerAlign:{id:"action.alignment.center.name",defaultMessage:"Center"},rightAlign:{id:"action.alignment.right.name",defaultMessage:"Right"}}),Bt=(0,Ne().$J)({key:"alignment format actions",title:Ae.alignmentName,render:e=>(0,r.jsx)(re().Z,{...e}),actions:[(0,Ne().cN)({key:"alignment format left",displayName:Vt.leftAlign,analyticsName:"Align left",validators:Rt,closeParentMenu:!0,svg:u,action:Ft("left")}),(0,Ne().cN)({key:"alignment format center",displayName:Vt.centerAlign,analyticsName:"Align center",validators:Rt,closeParentMenu:!0,svg:l,action:Ft("center")}),(0,Ne().cN)({key:"alignment format right",displayName:Vt.rightAlign,analyticsName:"Align right",validators:Rt,closeParentMenu:!0,svg:m,action:Ft("right")})]}),_t=(0,Ne().cN)({key:"edit image",displayName:Ae.cropImage,analyticsName:Ae.cropImage.defaultMessage,svg:P,validators:[ue().J5S,ue().Jji,ue().YZb,ue().QLY("image_cropping"),ue().ffD(ue().OPg)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;const o=t[0],i=o.getOriginalImageSource();i&&(a(235453).Z.openModal({blockStore:o,originalSource:i}),a(252428).Z(n,{from:"blockmenu"}))}}),Ht={key:"block menu primary",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[a(905174).NY,Se().G,he().o1,he().vh,De,Ze,Te,a(61882).f]},zt={key:"block menu navigation",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[Ue,Fe,...Ie().ej,ke().Hs,ke().Kk,Ve]},Ot={key:"block menu presentation",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[Re]},Et={key:"block menu secondary",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[Qe,Xe,et,tt,a(613353).d,_e,Be,He,ze,xe().B,xe().L9,Ee,Oe,Pe().$,Pe().g,Ge,Ke,qe,We,Ye,$e,nt,ot,ke().C8,ut,we().A,rt]},Jt={key:"block menu dictate",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[a(478558).j8]},Gt={key:"block menu comment",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[ye().UI,ye().VJ,ye().Bt,(0,a(712555).E)("block_action_menu")]},Kt={key:"block menu color",render:e=>(0,r.jsx)(re().Z,{...e,topBorder:!0}),actions:[gt,a(159357).Tr]},qt={key:"code block menu style",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[pt,yt,kt,ht,St]},Wt={key:"block menu quote",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[It]},Yt={key:"block menu number",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[Lt]},$t={key:"block menu bullet",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[Tt]},Qt={key:"block alignment",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[Ut,_t,Ce().T,Ce().U]},Xt=[(0,a(58991).KE)({shouldRenderMobileRefresh:!0}),Gt,Qt,Le().WL,Ht,Jt,zt,Et,Ot,Kt,qt,Wt,Yt,$t],ea=(0,Ne().MV)({key:"open in (group)",svg:v().J,displayName:Ae.openIn,analyticsName:Ae.openIn.defaultMessage,validators:[ue().U7o,ue().ffD(ue().tqC),Ie().Y7],subActions:()=>[{key:0,title:void 0,render:e=>(0,r.jsx)(re().Z,{...e}),actions:Ie().Ob}]}),ta={key:"collection menu tertiary",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[ye().UI,ea]},aa={key:"collection menu secondary",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[mt,Ge]},na={key:"collection menu primary",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[rt,dt,ke().Kk,Ve,he().o1,we().A,Se().G]},oa=[na,aa,ta],ia=[na,aa,{key:"collection menu tertiary",render:e=>(0,r.jsx)(re().Z,{...e}),actions:[ea]}]},58991:(e,t,a)=>{a.d(t,{KE:()=>d});a(667294);var n=()=>a(207874),o=()=>a(388284),i=()=>a(421797),s=()=>a(313351),r=a(785893);const c=(0,s().cN)({key:"mobile undo",displayName:s().RE.undoName,analyticsName:s().RE.undoName.defaultMessage,svg:a(366825).s,validators:[i().jlf,i().Mnk,i().ffD(i().Eok),i().ffD(i().tls)],closeParentMenu:!0,action:e=>{let{environment:t}=e;return n().Yw(t)}}),l=(0,s().cN)({key:"mobile redo",displayName:s().RE.redoName,analyticsName:s().RE.redoName.defaultMessage,svg:a(228035).N,validators:[i().Mnk,i().ffD(i().Eok),i().ffD(i().tls)],closeParentMenu:!0,action:e=>{let{environment:t}=e;return n().KX(t)}});function d(e){const{shouldRenderMobileRefresh:t}=e;return(0,s().$J)({key:"mobile revision actions",render:e=>(0,r.jsx)(o().Z,{...e,shouldRenderMobileRefresh:t}),actions:[c,l]})}},905:(e,t,a)=>{a.d(t,{QZ:()=>D,az:()=>T,pg:()=>Z});var n=()=>a(66077),o=()=>a(435308),i=()=>a(156642),s=()=>a(530980),r=()=>a(54193),c=()=>a(396136),l=()=>a(542973),d=()=>a(81954),u=()=>a(955620),g=()=>a(696459),m=()=>a(636340),f=()=>a(879952),p=()=>a(990966),v=()=>a(205228),M=()=>a(223321),b=()=>a(852465),y=()=>a(505462),k=()=>a(639832),S=()=>a(490091),h=()=>a(656769),N=()=>a(788206),C=()=>a(543842),w=()=>a(826955),I=()=>a(439373),P=()=>a(351972),x=()=>a(282662),L=()=>a(143346),A=()=>a(970105),j=()=>a(269299);function D(e){const{environment:t,textStore:a,blockStore:i,url:s,oldTextValue:u,urlSelection:g}=e;if(k().Z.state.open||M().Z.state.open||C().Z.state.open||h().Z.state.open)return!1;const m=y().get();if(!m)return!1;const f=y().getRect(m);if(!f)return!1;const p=(0,r().parseRoute)({url:s,baseUrl:v().default.domainBaseUrl,publicDomainName:v().default.publicDomainName,isMobile:t.device.isMobile,protocol:v().default.protocol,currentUrl:window.location.href});if("page"===p.name&&!!p.discussionId&&p.discussionId){const e=p.discussionId,r=p.blockId;if(!r)return!1;const m=i.getParentBlockStore();if(!m)return!1;const v=(0,w().Kv)(m,{table:c().iU,id:r,spaceId:(0,d().J)(m.pointer.spaceId)}),M=(0,w().Kv)(v,{table:l().qF,id:e,spaceId:(0,d().J)(i.pointer.spaceId)});if("none"===M.getRole())return!1;const y=new(o().default)((()=>b().D4(M)[0]),{debugName:"firstCommentStore"}),k=new(n().Z)({name:"internalUnfurlingMenuActions.activate",isTemporaryData:!0});t.defaultRecordCache.inMemoryRecordCache.addCacheOverride(k);const h=i.clone(k),C=a.clone(k),I=m.clone(k);return N().Z.setState({args:{commentStore:y},stores:{blockStore:i,textStore:a,parentStore:m},temporaryStores:{blockStore:h,textStore:C,parentStore:I},temporaryRecordCache:k,focusedIndex:S().Z.Preview,selectionRect:f,oldTextValue:u,open:!0,url:s,urlSelection:g}),P().el(t,{url:s}),!0}return!1}function Z(e){const{actionType:t,environment:a,commentStore:n,useTempStores:o}=e,i=N().Z.state;if(!i.open)return;const{oldTextValue:r}=i,c=o?i.temporaryStores:i.stores,{textStore:l,blockStore:m,parentStore:v}=c,M=a.currentUser.id;if(M){if(o){i.temporaryRecordCache.clearCache();for(const e in i.temporaryStores){const t=i.temporaryStores[e],n={userId:M,pointer:t.pointer},o=a.defaultRecordCache.inMemoryRecordCache.getRecord(n);o?L().Wl({environment:a,inMemoryRecordCache:i.temporaryRecordCache,pointer:t.pointer,model:s().kk5.fromValue(t.pointer.table,o.value),role:o.role,updatePaths:[[]],userId:M,force:!0,debugSource:"setUnfurlType"}):L().uo({environment:a,inMemoryRecordCache:i.temporaryRecordCache,persistedRecordCache:void 0,pointer:t.pointer,userId:M})}}else a.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.temporaryRecordCache);switch(t){case S().Z.Link:f().eP({environment:a,store:i.stores.blockStore}),p().setSelection({store:i.stores.textStore,selection:{startIndex:i.urlSelection.endIndex,endIndex:i.urlSelection.endIndex}}),N().Z.setState({...i,focusedIndex:S().Z.Link});break;case S().Z.Mention:if(!n)return;const e=(0,d().J)(l.pointer.spaceId);if(!e)return;const o=n.id;j().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.mention",canUndo:!0,perform:t=>{A().sO({environment:a,store:l,value:r,transaction:t}),A().lZ({environment:a,editorMode:"default",store:l,selection:{startIndex:i.urlSelection.startIndex,endIndex:i.urlSelection.startIndex},annotation:u().mfJ(o,e),transaction:t,analyticsFrom:"block"})}}),N().Z.setState({...i,focusedIndex:S().Z.Mention});break;case S().Z.Preview:if(!n)return;j().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.preview",canUndo:!0,perform:e=>{A().sO({environment:a,store:l,value:r,transaction:e});const t=b().GP(n);if(!t)return;if(!b().HK(t)||!v||!t.getParentId())return;const o=I().k({environment:a,parentBlockStore:v,targetStore:n,transaction:e});if(x().BE({parentStore:v.getContentStore(),insertStore:o,afterStore:m,transaction:e}),0===u().QaF(i.oldTextValue).trim().length){const t=w().G.createChildStore(v.getContentStore(),i.stores.blockStore.pointer);x().Od({parentStore:v.getContentStore(),childToRemoveStore:t,transaction:e})}}}),N().Z.setState({...i,focusedIndex:S().Z.Preview});break;default:throw(0,g().t1)(t)}o||N().Z.setState({open:!1})}}function T(e){var t,a;const{blockStore:n,transaction:o}=e,s=n.getType(),r=n.getFormat(),c=n.getSpaceId();if(!n.isDefined()||s!==i().Ti.alias||null==r||null===(t=r.alias_pointer)||void 0===t||!t.id)return;const l=[u().YCD(u().mfJ(null==r||null===(a=r.alias_pointer)||void 0===a?void 0:a.id,c))];m().sW({store:n,data:{type:i().Ti.text},transaction:o}),m().sW({store:n.getFormatStore(),data:{alias_pointer:null},transaction:o}),A().sO({environment:n.environment,store:n.getBlockTitleStore(),value:l,transaction:o})}},61882:(e,t,a)=>{a.d(t,{Z:()=>rt,f:()=>st});var n=a(667294),o=()=>a(827282),i=a(785893);const s={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},r=(0,o().IU)("docOnDoc",s);var c=()=>a(788860),l=()=>a(219727),d=()=>a(142735),u=()=>a(846550),g=()=>a(506347);const m=(0,o().IU)("disconnect",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M6.45508 4.50977L7.28906 5.34375L8.7041 3.4707L7.67871 5.7334L9.45605 7.51074H11.083L10.3857 8.43359L11.2539 9.30859L12.7852 7.36035C12.9082 7.20996 12.9697 7.06641 12.9697 6.90234C12.9697 6.61523 12.751 6.41016 12.4502 6.41016H8.54688L10.5703 1.05078C10.8506 0.298828 10.0645 -0.0976562 9.58594 0.517578L6.45508 4.50977ZM12.874 13.6631C13.0859 13.875 13.4346 13.875 13.6396 13.6631C13.8516 13.458 13.8584 13.1025 13.6396 12.8906L3.10547 2.35645C2.90039 2.15137 2.53809 2.14453 2.33301 2.35645C2.12793 2.56152 2.12793 2.92383 2.33301 3.12891L12.874 13.6631ZM3.0166 9.12402C3.0166 9.4043 3.23535 9.61621 3.53613 9.61621H7.44629L5.41602 14.9688C5.13574 15.7207 5.92188 16.1172 6.40039 15.5088L9.52441 11.5166L8.69043 10.6895L7.28223 12.5488L8.30078 10.293L6.5166 8.51562H4.89648L5.60059 7.59277L4.72559 6.71777L3.20801 8.65918C3.08496 8.81641 3.0166 8.95996 3.0166 9.12402Z"})});var f=()=>a(809461),p=()=>a(342792),v=()=>a(916673),M=()=>a(836273);function b(e,t){const a=t.trim().toLowerCase(),n=(0,v().Of)(a).replace(/\./g,"-");return n?`${n}-${e}`:e}var y=()=>a(705214),k=()=>a(396136),S=()=>a(47443),h=()=>a(876822),N=()=>a(827973),C=()=>a(634760);function w(e,t){const{bot:n}=e,o=(0,d().VK)((()=>h().default.state.currentUserRootStore),[]);return n&&o?(0,i.jsx)(N().Z,{...e,icon:(0,i.jsx)(C().Z,{botValue:n}),title:(0,a(163262).Mh)(n),ref:t}):null}const I=n.forwardRef(w);var P=()=>a(855238),x=()=>a(740046),L=()=>a(312578),A=()=>a(18748),j=()=>a(838367),D=()=>a(943620),Z=()=>a(384241),T=()=>a(654133),R=()=>a(670346),U=()=>a(714230),F=()=>a(525372),V=()=>a(164079),B=()=>a(515329),_=()=>a(998901),H=()=>a(73478);function z(e){return(0,d().VK)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function O(){return(0,i.jsx)(H().Z,{imageURL:U().Z.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,i.jsx)(c()._H,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}function E(){return(0,i.jsx)(H().Z,{imageURL:U().Z.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,i.jsx)(c()._H,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})})}const J=(0,n.forwardRef)((function(e,t){const{blockStore:n,...o}=e,{blockStore:s,slackIntegrationStore:r}=(0,B().Jk)(n),{isDefined:l,channel:u}=z(r),m=(0,d().VK)((()=>(0,a(429725).ZP)({store:s,pageVisitSource:g().tY.LinkInPage})),[s]);return l?(0,i.jsx)(T().Z,{placement:_().Placement.Left,render:e=>(0,i.jsx)(P().Z,{...(0,V().Z)(e,o),svg:F().P,title:u,caption:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c()._H,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",(0,i.jsx)(a(765513).Z,{href:m,children:(0,i.jsx)(Z().Z,{store:s,style:{display:"inline"}})})]}),ref:t}),renderTooltip:E}):null})),G=(0,n.forwardRef)((function(e,t){const{blockStore:a,...n}=e,{slackIntegrationStore:o}=(0,d().VK)((()=>(0,B().Jk)(a)),[a]),{isDefined:s,channel:r}=z(o);return s?(0,i.jsx)(T().Z,{placement:_().Placement.Left,render:e=>(0,i.jsx)(P().Z,{ref:t,svg:F().P,title:r,caption:(0,i.jsx)(c()._H,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"}),...(0,V().Z)(e,n)}),renderTooltip:E}):null}));var K=()=>a(352230),q=()=>a(149809),W=()=>a(198829),Y=()=>a(470386),$=()=>a(388284),Q=()=>a(868744);const X=(0,n.forwardRef)((function(e,t){const{context:a,parent:o,isSharedDirectly:s,botStore:r,botPermissionSourcePage:c,originConnectionLabel:u,...g}=e,m=(0,l().O7)(),f=(0,d().VK)((()=>h().default.state.currentSpaceStore),[]),p=a.blocks[0],v=(0,d().VK)((()=>p.canAdmin()&&(null==f?void 0:f.canRead())),[p,f]),{botCapabilities:M,botName:b}=(0,d().VK)((()=>({botCapabilities:r.getCapabilities(),botName:r.getName()})),[r]);return(0,n.createElement)(Q().Z,{...g,key:r.id,renderOrigin:e=>(0,i.jsx)(N().Z,{...e,title:u,icon:(0,i.jsx)(C().Z,{botStore:r,showActiveDot:!0,style:{position:"relative"}})}),renderExtension:(e,t)=>{let n;return n=m.device.isPhone?{menuType:K().o.Modal,right:(0,i.jsx)(Y().DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:K().o.Popup,width:220,...e},(0,i.jsx)(W().Z,{...n,children:(0,i.jsx)(q().Z,{context:a,initialFocus:0,onAccept:o.onAccept,sections:[ee({isSharedDirectly:s,botCapabilities:M,botPermissionSourcePage:c}),...v?[te({isSharedDirectly:s,botId:r.id,botName:b})]:[]]})})},onFocus:o.onFocus,focused:g.focused,openOnFocus:!1,ref:t,placementToOrigin:_().Placement.Left})}));function ee(e){const{botCapabilities:t,isSharedDirectly:n,botPermissionSourcePage:o}=e,s=(0,a(528514).uH)(t);return{key:"active connection capabilities section",render:e=>(0,i.jsx)($().Z,{...e,topBorder:!1}),actions:[...n?[]:[Ke(o)],qe(s)]}}function te(e){const{isSharedDirectly:t,botId:a,botName:n}=e;return{key:"active connection disconnect section",render:e=>(0,i.jsx)($().Z,{...e}),actions:t?[We(a,n)]:[Ye(a)]}}a(821057),a(670560),a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(267602),a(653476),a(241792);const ae={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M7.663 5.794a2.77 2.77 0 1 1-5.539 0 2.77 2.77 0 0 1 5.539 0m-1.25 0a1.52 1.52 0 1 0-3.039 0 1.52 1.52 0 0 0 3.039 0m2.497-.55a.55.55 0 0 0 0 1.1h.098a.55.55 0 1 0 0-1.1zm2.054 0a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.602 4.328a.55.55 0 0 0-.952-.55l-.049.083a.55.55 0 0 0 .952.552zm-6.208-.551a.55.55 0 0 0-.952.551l.049.085a.55.55 0 0 0 .952-.552zm5.182 2.324a.55.55 0 0 0-.952-.552l-.05.085a.55.55 0 1 0 .953.551zm-4.156-.552a.55.55 0 1 0-.951.552l.048.084a.55.55 0 1 0 .952-.551zm6.722-2.23a2.77 2.77 0 1 0 0-5.538 2.77 2.77 0 0 0 0 5.538m0-1.25a1.52 1.52 0 1 1 0-3.038 1.52 1.52 0 0 1 0 3.038m-2.336 7.343a2.77 2.77 0 1 1-5.54 0 2.77 2.77 0 0 1 5.54 0m-1.25 0a1.52 1.52 0 1 0-3.04 0 1.52 1.52 0 0 0 3.04 0"})},ne=(0,o().IU)("integration",ae);var oe=()=>a(530980),ie=()=>a(696056),se=()=>a(85073),re=()=>a(696459),ce=()=>a(879105),le=()=>a(527278),de=()=>a(345918),ue=()=>a(828946),ge=()=>a(826955);const me=(0,c().vU)({noConnectionsLabel:{defaultMessage:"None",id:"topbarMenu.subActions.addConnections.none"},activeConnectionsLabel:{defaultMessage:"Active connections",id:"topbarMenu.subActions.addConnections.activeConnections"}}),fe=(0,n.forwardRef)((function(e,t){const{context:o,parent:s,alreadyConnectedIntegrationIds:r,alreadyConnectedBotIds:c,originButtonLabel:g,connectedActionsToShow:m,...f}=e,p=o.blocks[0],v=(0,l().O7)(),M=(0,d().VK)((()=>h().default.state.currentSpaceStore),[]),b=(0,d().VK)((()=>null==M?void 0:M.getBotSettingsStore().getValue()),[M]),k=(0,d().VK)((()=>null!=b&&b.integration_restrictions&&null!=b&&b.integration_approval_statuses?Object.keys(b.integration_approval_statuses):[]),[b]),[S,N]=(0,n.useState)(""),[C,w]=(0,n.useState)({status:"loading"}),I=(0,a(677559).XJ)(ue().x.searchActions);(0,n.useEffect)((()=>{if("resolved"!==I.status)return;const e=I.value;const{currentUserRootStore:t}=h().default.state;Promise.all([async function(t){return await e.searchSpaceBots({environment:v,query:t})}(S),async function(e){const t=await ue().x.searchActions.load();return await t.searchInstallableIntegrations({query:e,environment:v,spaceId:null==M?void 0:M.id,botSettings:b})}(S)]).then((e=>{let[a,n]=e;const o=new Set,i=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:a,botValues:n,environment:o}=e,i=[],{currentUserRootStore:s}=h().default.state;if(!s)throw new Error("currentUserStore not defined");for(const r of n){const e=r.id;let n=!Boolean(r.integration_id);if(r.integration_id){const e=(0,ge().Kv)(s,{id:r.integration_id,table:se().K2}).getKeyStore("type").getValue();(0,se().R8)(e?{type:e}:void 0)&&(n=!0)}const c=t.has(e)||r.integration_id&&!n&&a.has(r.integration_id),l=oe().kk5.fromValue(ie().cZ,r),d=(0,ce().Nq)(o,l)||(0,de().Fn)(o)&&(0,ce().f_)(l);!c&&d&&i.push(r)}return i}({alreadyConnectedBotIds:c,alreadyConnectedIntegrationIds:r,botValues:a,environment:v}).map((e=>{if(e.integration_id&&t){const a=(0,ge().Kv)(t,{id:e.integration_id,table:se().K2}).getKeyStore("type").getValue();oe().kk5.fromValue(ie().cZ,e).isInternalBot(a?{type:a}:void 0)&&o.add(e.integration_id)}return{table:ie().cZ,value:e}}));let s=n.map((e=>{if(M){const t=ge().t1.createChildStore(M,{id:e,table:se().K2}),a=t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:a}=e;return a(t)}));if(a&&!(0,y().VM)(a)){return{table:se().K2,value:a}}}})).filter(re().$K).filter((e=>!(o.has(e.value.id)||r.has(e.value.id))));if(y().Cb.name.toLowerCase().includes(S.toLowerCase())){const e={table:"legacy_integration",value:y().Cb};s=[...s,e]}const l=[...i,...s].sort(((e,t)=>{var a,n;const o=null===(a=e.value.name)||void 0===a?void 0:a.toLowerCase(),i=null===(n=t.value.name)||void 0===n?void 0:n.toLowerCase();return o&&i?o<i?-1:o>i?1:0:0}));w({results:l,status:"ready"})})).catch((e=>w({status:"error"})))}),[S,M,c,b,k,v,r,p,I.status,I.value]);const x=(0,u().yK)((e=>({rightStyle:{color:e.lightTextColor,marginRight:5}})),[]);return(0,i.jsx)(Q().Z,{...f,renderOrigin:(e,t)=>(0,i.jsx)(P().Z,{...e,ref:t,title:g,svg:ne}),renderExtension:(e,t)=>{const n=v.device.isMobile?{menuType:K().o.Modal,right:(0,i.jsx)(Y().DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:K().o.Popup,width:220,...e},s=v.device.isMobile?{menuType:K().o.Modal,topbarStyle:{height:0}}:{menuType:K().o.Popup,width:220,maxHeight:"16vh",...e},r=Boolean(p.canAdmin()&&(null==M?void 0:M.canRead()));return(0,i.jsx)(W().Z,{...n,onClick:e=>{e.stopPropagation()},children:(0,i.jsx)(q().Z,{initialFocus:0,context:o,onAccept:()=>{a(491927).sS(v)},sections:[...r?[pe(S,N),""===S?ve({searchResults:C,resultsMenuProps:s}):be({searchResults:C,resultsMenuProps:s})]:[],ye(r,y().Cb),(c=m||[],{key:"existing connections section",title:le().Z.formatMessage(me.activeConnectionsLabel),render:e=>(0,i.jsx)($().Z,{...e}),actions:c})]})});var c},onFocus:s.onFocus,focused:f.focused,openOnFocus:!0,ref:t,right:(0,i.jsx)(i.Fragment,{children:r.size+c.size||le().Z.formatMessage(me.noConnectionsLabel)}),rightStyle:x.rightStyle})}));function pe(e,t){return{key:"search connections section",render:e=>(0,i.jsx)($().Z,{...e,isInput:!0}),actions:[_e(e,t)]}}function ve(e){const{searchResults:t,resultsMenuProps:a}=e,n=new Set;return{key:"search initial connections section",render:e=>(0,i.jsx)(Me,{...e,resultsMenuProps:a}),actions:[..."ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&n.add(e.value.integration_id),ze(e.value)):et(e)?(0,B().F6)()&&!(0,B().SG)()?void 0:Ee(e.value):Oe(e.value))).filter(re().$K):"loading"===t.status?[Be()]:[He()]]}}function Me(e){const{resultsMenuProps:t,...a}=e,o=(0,n.useRef)(null),s=(0,n.useCallback)((()=>{var e;const t=null===(e=o.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,a=window.innerHeight<600?3:7;o.current&&t&&(o.current.style.maxHeight=a*t+.5*t+"px")}),[]);return(0,n.useEffect)((()=>(s(),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)})),[s]),(0,i.jsx)(W().Z,{...t,innerRef:o,children:(0,i.jsx)($().Z,{...a,isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})})}function be(e){const{searchResults:t,resultsMenuProps:a}=e;let n=[];return n="error"===t.status?[He()]:"loading"===t.status?[Be()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===ie().cZ?ze(e.value):et(e)?(0,B().F6)()&&!(0,B().SG)()?void 0:Ee(e.value):Oe(e.value))).filter(re().$K):[{key:"connections search error",displayName:le().Z.formatMessage(Fe.connectionNoSearchResultsLabel),analyticsName:Fe.connectionNoSearchResultsLabel.defaultMessage,searchName:Fe.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,Ve],render:e=>(0,i.jsx)(j().Z,{title:le().Z.formatMessage(Fe.connectionNoSearchResultsLabel)}),action:()=>{}}],{key:"connections search results",render:e=>(0,i.jsx)(Me,{...e,resultsMenuProps:a}),actions:n}}function ye(e,t){const a=e,n=!(0,B().F6)()||(0,B().SG)();return{key:"manage connections section",render:t=>(0,i.jsx)($().Z,{...t,style:{marginTop:e?6:0}}),actions:[...!a&&n?[Ee(t)]:[],{key:"manage connections",displayName:le().Z.formatMessage(Fe.manageConnectionsLabel),analyticsName:Fe.manageConnectionsLabel.defaultMessage,searchName:Fe.manageConnectionsLabel.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,ke().ffD(ke().tqC)],render:e=>(0,i.jsx)(P().Z,{...e,title:le().Z.formatMessage(Fe.manageConnectionsLabel),svg:f().w}),action:()=>{Ne().r$({currentTab:"connected_apps",openedFrom:"topbar"})}}]}}var ke=()=>a(421797),Se=()=>a(158792),he=()=>a(308186),Ne=()=>a(454393),Ce=()=>a(784234),we=()=>a(752127),Ie=()=>a(54193),Pe=()=>a(205228),xe=()=>a(848643),Le=()=>a(832024),Ae=()=>a(231077),je=()=>a(402269),De=()=>a(636340),Ze=()=>a(58771),Te=()=>a(269299);const Re=(0,c().vU)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});async function Ue(e){let{environment:t,blockId:a,intl:n}=e;Le().Mc(t),await async function(e){const{environment:t,blockId:a,intl:n}=e,o=(0,xe().eC)(t);let i=(0,Ie().GD)(Pe().default.domainBaseUrl,{blockId:a,authType:o,userId:t.currentUser.id});if(i=o.redirectToAuth?i:await(0,xe().HU)(t,i),t.device.isElectron)return void Ae().openExternalUrl(i);const s=await je().M(t,{width:530,height:530,url:i,titleMessage:Re.titleMessage});if(!s)return void he().UW(n.formatMessage(Re.somethingWentWrong));const r=(0,Ie().parseRoute)({url:s,isMobile:t.device.isMobile,baseUrl:Pe().default.domainBaseUrl,publicDomainName:Pe().default.publicDomainName,protocol:Pe().default.protocol,currentUrl:window.location.href});"slackAuthCallback"===r.name&&Ze().YU({route:r,environment:t})}({environment:t,blockId:a,intl:n})}const Fe=(0,c().vU)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading…"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},connectionsLabel:{id:"topbar.connectionsSection.connections.label",defaultMessage:"Connections"},addConnectionsLabel:{id:"topbar.connectionsSection.addConnections.label",defaultMessage:"Add connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"{botName} will be removed from this page and all child pages. Continue?"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmlabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"{botName} will have access to this and all child pages. Continue?"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"}}),Ve=ke().ffD(ke().xDy([ke().tqC,ke().ffD(ke().xDy([ke().zzA,ke().J5S]))]));function Be(){return{key:"connections loading",displayName:le().Z.formatMessage(Fe.connectionLoadingLabel),analyticsName:Fe.connectionLoadingLabel.defaultMessage,searchName:Fe.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,Ve],render:e=>(0,i.jsx)(A().ZP,{...e,icon:(0,i.jsx)(L().Z,{}),title:le().Z.formatMessage(Fe.connectionLoadingLabel)}),action:()=>{}}}function _e(e,t){return{key:"search connections input",analyticsName:Fe.connectionSearchPlaceholderLabel.defaultMessage,displayName:le().Z.formatMessage(Fe.connectionSearchPlaceholderLabel),searchName:Fe.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,Ve],render:()=>(0,i.jsx)(x().ZP,{value:e,onChange:e=>t(e.target.value),placeholder:le().Z.formatMessage(Fe.connectionSearchPlaceholderLabel),focus:!0}),action:()=>{}}}function He(){return{key:"connections search error",displayName:le().Z.formatMessage(Fe.connectionSearchErrorLabel),analyticsName:Fe.connectionSearchErrorLabel.defaultMessage,searchName:Fe.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,Ve],render:e=>(0,i.jsx)(j().Z,{title:le().Z.formatMessage(Fe.connectionSearchErrorLabel)}),action:()=>{}}}function ze(e){const{id:t,name:a}=e,n=le().Z.formatMessage(Fe.connectionSearchResultLabel,{name:a});return{key:`${t}`,displayName:n,analyticsName:n,searchName:a,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,Ve],render:(t,a)=>(0,i.jsx)(I,{...t,bot:e,focused:t.focused,onClick:async()=>{await Qe(a.blocks[0],a.environment,e)},ref:t.ref}),action:async t=>{await Qe(t.blocks[0],t.environment,e)}}}function Oe(e){const{id:t,name:a,info:n}=e,o=le().Z.formatMessage(Fe.connectionLabel,{connectionName:a});return{key:`${t}`,displayName:o,analyticsName:o,searchName:a,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,Ve,ke().ffD(ke().tqC)],render:e=>(0,i.jsx)(N().Z,{...e,title:o,icon:(0,i.jsx)("img",{src:n.icon,style:{width:18,height:"auto"},ref:e.ref})}),action:async t=>{let{environment:a}=t;e.id!==y().T0&&await async function(e,t){const{id:a,name:n}=e,{accept:o}=await he().gt({message:le().Z.formatMessage(Fe.connectionIntegrationConfirmlabel,{integrationName:n})}),i=function(e,t){if(!(0,p().e)(e))return`${M()._j.integrations}/${e}`;const a=b(e,void 0===t?"":t);return`${M()._j.integrations}/${a}`}(a,n);o&&we().D({environment:t,url:i,targetSelf:!1})}(e,a)}}}function Ee(e){const t=le().Z.formatMessage(Fe.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:Fe.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!0,validators:[ke().Ggh,ke().J5S,ke().YPq,ke().tJc,ke().OFQ,ke().ffD(ke().Fxc)],render:a=>(0,i.jsx)(T().Z,{placement:_().Placement.Left,render:n=>(0,i.jsx)(N().Z,{...(0,V().Z)(n,a),title:t,icon:(0,i.jsx)("img",{src:e.info.icon,style:{height:18}})}),renderTooltip:O}),action:e=>{var t;Ue({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:le().Z.getIntl()})}}}function Je(){const e=le().Z.formatMessage(Fe.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:Fe.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[ke().Ggh,ke().J5S,ke().urk,ke().ffD(ke().Fxc)],render:(e,t,a)=>(0,i.jsx)(J,{blockStore:t.blocks[0],...e}),action:e=>{}}}function Ge(){const e=le().Z.formatMessage(Fe.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:Fe.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[ke().Ggh,ke().J5S,ke().Rd2,ke().ffD(ke().Fxc)],render:(e,t,a)=>(0,i.jsx)(G,{blockStore:t.blocks[0],...e}),action:e=>{const{slackIntegrationStore:t}=(0,B().Jk)(e.blocks[0]);!function(e,t,a){he().vC({message:a.formatMessage(Re.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:a.formatMessage(Re.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{Le().Uu(e),Te().createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,canUndo:!0,perform:e=>{De().sW({store:t,data:{enabled:!1},transaction:e})}})}}]})}(e.environment,t,le().Z.getIntl())}}}function Ke(e){const t=le().Z.formatMessage(Fe.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S],action:()=>{},render:(t,a)=>{let{blocks:n}=a;const o=n[0],s=ge().G.createChildStore(o,{table:k().iU,id:e.blockId});return(0,i.jsx)(Xe,{parentBlockStore:s})}}}function qe(e){const t=le().Z.formatMessage(Fe.capabilitiesLabel);return{key:"capabilities",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S],action:()=>{},render:()=>(0,i.jsx)(R()._,{role:e})}}function We(e,t){const a=le().Z.formatMessage(Fe.disconnectLabel);return{key:"disconnect integration",displayName:a,analyticsName:a,searchName:Fe.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S],action:async a=>{let{blocks:n,environment:o}=a;const i=n[0];await async function(e,t,a,n){const{accept:o}=await he().gt({message:le().Z.formatMessage(Fe.disconnectConfirmationLabel,{botName:n})});o&&Se().RN({botId:a,store:e,environment:t})}(i,o,e,t)},render:e=>(0,i.jsx)(P().Z,{...e,svg:m,title:a,focused:!0})}}function Ye(e){const t=le().Z.formatMessage(Fe.disconnectLabel),a=le().Z.formatMessage(Fe.restrictionLabel);return{key:"restrict page from permission model",displayName:a,analyticsName:a,searchName:Fe.restrictionLabel.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S],action:async t=>{let{blocks:a,environment:n}=t;const o=a[0];await async function(e,t,a){const{accept:n}=await he().gt({message:le().Z.formatMessage(Fe.restrictionConfirmationLabel),acceptLabel:le().Z.formatMessage(Fe.restrictionAcceptLabel)});if(n){const n={type:"bot_permission",role:"none",bot_id:e};Te().createAndCommit({userAction:"TopbarMoreConnections.restrictPagePermissions",environment:a,canUndo:!0,perform:e=>{Ce().Pk({environment:a,store:t,permissionItem:n,shouldInherit:!0,transaction:e})}})}}(e,o,n)},render:e=>(0,i.jsx)(P().Z,{...e,svg:m,title:t,focused:!0})}}function $e(e){const{botStore:t,botPermissionSourcePage:a}=e,{id:n}=t,o=t.getName(),s=le().Z.formatMessage(Fe.connectionLabel,{connectionName:o});return{key:`${n}`,displayName:s,analyticsName:s,searchName:s,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,ke().ffD(ke().uY7)],action:()=>{},render:(e,n,o)=>{const r=n.blocks[0].id===a.blockId;return(0,i.jsx)(X,{...e,context:n,parent:o,isSharedDirectly:r,botStore:t,botPermissionSourcePage:a,originConnectionLabel:s})}}}async function Qe(e,t,a){const{accept:n}=await he().gt({message:le().Z.formatMessage(Fe.connectionBotConfirmlabel,{botName:a.name})});n&&Se().v2({botValue:a,store:e,environment:t})}function Xe(e){const{parentBlockStore:t}=e,a=(0,d().VK)((()=>t.getIcon()),[t]),o=(0,d().VK)((()=>t.isEmptyPage()),[t]),s=(0,l().O7)(),r=(0,u().Fg)(),[m,f]=(0,n.useState)("transparent"),p=s.device.isMobile?{fontSize:14,paddingLeft:4}:{fontSize:12,paddingLeft:4};return(0,i.jsx)(j().Z,{...e,title:(0,i.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,i.jsx)(c()._H,{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}),(0,i.jsxs)("span",{style:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginLeft:2,cursor:"pointer",backgroundColor:m,color:r.regularTextColor,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>{S()._c({environment:s,store:t,pageVisitSource:g().tY.LinkInPage})},onMouseEnter:()=>{f(r.selectLightGray[100])},onMouseLeave:()=>{f("transparent")},onMouseDown:()=>{f(r.selectLightGray[200])},onMouseUp:()=>{f(r.selectLightGray[100])},children:[(0,i.jsx)(D().Z,{disabled:!0,icon:a,isEmptyPage:o,size:12,style:{margin:"0px 2px"}}),(0,i.jsx)(Z().Z,{store:t})]})]}),textWrapperStyle:p})}function et(e){return"legacy_integration"===e.table&&e.value.id===y().Cb.id}a(916054);var tt=()=>a(933868),at=()=>a(379936),nt=()=>a(122479);function ot(e){const t=function(e){var t;const a=e.blocks[0],n=(0,nt().YO)(a).filter((0,re().AO)((e=>(0,tt().FB)(e.permissionItem)?{true:{...e,permissionItem:e.permissionItem}}:{false:e})));if(0===n.length)return{status:"no bots"};const o=new Map,i=null===(t=h().default.state.currentSpaceStore)||void 0===t?void 0:t.id,s=n.map((e=>{let{from:t,permissionItem:n}=e;const s=ge().t1.createChildStore(a,{table:ie().cZ,id:n.bot_id,spaceId:i});if("block"===t.table)return o.set(n.bot_id,t),s})).filter(re().$K);if(!s.every((e=>e.isReady())))return{status:"loading"};const r=s.filter((t=>t.isDefined()&&Boolean((0,ce().Nq)(e.environment,t.getModel()))));if((0,de().Fn)(e.environment)){const e=r.map((e=>e.getIntegrationId())),t=new Set(e),a=s.filter((e=>!(!e.isDefined()||t.has(e.getIntegrationId())||!Boolean((0,ce().f_)(e.getModel()))||(t.add(e.getIntegrationId()),0))));r.push(...a)}return{status:"ready",botStores:r,botIdToSharedPageIds:o}}(e),{alreadyConnectedBotIds:a,alreadyConnectedIntegrationIds:n,botActionsState:o}=function(e){const{status:t}=e;if("no bots"===t||"loading"===t)return{botActionsState:e,alreadyConnectedIntegrationIds:new Set,alreadyConnectedBotIds:new Set};const{botStores:a,botIdToSharedPageIds:n}=e,o=(0,at().K$)(a),i=new Set,s=new Array;for(const r of a)if(r.isDefined()){const e=n.get(r.id);e&&(i.add(r.id),s.push($e({botStore:r,botPermissionSourcePage:e})))}return{alreadyConnectedIntegrationIds:o,alreadyConnectedBotIds:i,botActionsState:{status:"ready",botActions:s}}}(t),s=function(e,t,a){const n=Fe.connectionsLabel,o=le().Z.formatMessage(n),s="ready"===(null==a?void 0:a.status)?a.botActions:[];return{key:"add connections action",displayName:o,analyticsName:n.defaultMessage,searchName:n.defaultMessage,closeParentMenu:!1,validators:[ke().Ggh,ke().J5S,Ve,ke().ffD(ke().uY7)],action:()=>{},render:(a,n,r)=>(0,i.jsx)(fe,{...a,context:n,parent:r,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:o,connectedActionsToShow:s})}}(n,a,o);return"loading"===o.status?{loadingAction:[Be()],connectedActions:[],searchSubMenu:s}:{loadingAction:[],connectedActions:[],searchSubMenu:s}}const it=(0,c().vU)({copyPublicApiObject:{id:"action.copyPublicApiObject",defaultMessage:"Copy API object (Dev)"}}),st=(0,a(313351).cN)({key:"copy public API object",displayName:it.copyPublicApiObject,analyticsName:it.copyPublicApiObject.defaultMessage,validators:[ke().U7o,ke().QLY("public_api_dev_mode")],closeParentMenu:!1,svg:r,action:async e=>{let{environment:t,blocks:n}=e;const o=await a(824462).callApi({eventName:"getPublicApiObject",environment:t,data:{id:n[0].id}});let i;i="success"===o.type?JSON.stringify(o.data,void 0,2):JSON.stringify(o.error,void 0,2);const s=await a(959137).F.clipboardActions.load();s.copyString({environment:t,stringValue:i,copiedMessage:s.clipboardMessages.copiedApiObjectToClipboard})}});function rt(e){const{loadingAction:t,connectedActions:a,searchSubMenu:n}=ot(e);return{key:"topbar connections",render:e=>(0,i.jsx)($().Z,{...e,style:{marginTop:1},topBorder:!0,shouldRenderMobileRefresh:!0}),actions:[...t,...[Je(),Ge()],...a,n,st]}}},630903:(e,t,a)=>{a.r(t),a.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>N,transformBlocks:()=>h,transformIntoColumnList:()=>C});a(241792);var n=()=>a(492788),o=()=>a(156642),i=()=>a(396136),s=()=>a(513670),r=()=>a(282662),c=()=>a(332542),l=()=>a(771678),d=()=>a(636340),u=()=>a(453999),g=()=>a(879952),m=()=>a(990966),f=()=>a(269299),p=()=>a(28063),v=()=>a(540413),M=()=>a(487270),b=()=>a(852465),y=()=>a(749826),k=()=>a(826955),S=()=>a(262453);function h(e){const{environment:t,blocks:a,blockType:S,transaction:h}=e;if(S!==o().Ti.transclusionContainer)if(S===o().Ti.callout&&y().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return;const r=s.getRecordStoreUIParent();if(!r||!(0,b().dz)(r))return;const u=r.getRecordStoreUIParent();if(!(u&&u instanceof k().G))return;const f=(0,M().TS)({environment:t,table:i().iU,spaceId:u.getSpaceId()}),p=d().j4({environment:t,id:f,type:o().Ti.callout,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n,spaceId:u.getSpaceId(),format:{callout_version:2}});c().jG({parentStore:r,childStore:p,after:s.id,transaction:n});w({newParentStore:p.getContentStore(),blocks:a,transaction:n}),l().WO({store:p,transaction:n}),m().clear({environment:t}),g().ZH({environment:t}),g().Z5({environment:t,stores:[p]})}({environment:t,blocks:a,transaction:h});else if(S!==o().Ti.columnList)if(S!==o().Ti.slide)if((0,o().sX)(S)){const e=parseInt(S.replace("column","").replace("block","")),o=s().oA(s().DZ(e-1,(()=>v().insertTextBelow({environment:t,blocks:a,transaction:h})))),i=[...a,...o],r=C({environment:t,blocks:i,transaction:h});n().default.afterNextFlush((()=>{m().setSelectionAtStart({store:r[0].getBlockTitleStore()})}))}else for(const o of a)if(o.isCalloutV2()){const e=o.getParentBlockStore();if(e){const i=o.getContentStores();f().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:i.map((e=>e.id)),after:o.id}},transaction:h}),c().hr({parentStore:e.getContentStore(),childStore:o,transaction:h});for(const e of i)p().vs({environment:t,block:e,blockType:S,transaction:h,isMultiBlockTransformation:a.length>1});n().default.afterNextFlush((()=>{u().DQ(t,i.map((e=>e.id)))}))}}else p().vs({environment:t,block:o,blockType:S,transaction:h,isMultiBlockTransformation:a.length>1});else!function(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return;const r=s.getRecordStoreUIParent();if(!r||!(0,b().dz)(r))return;const l=r.getRecordStoreUIParent();if(!(l&&l instanceof k().G))return;const u=(0,M().TS)({environment:t,table:i().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:u,type:o().Ti.slide,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n,spaceId:l.getSpaceId()});c().jG({parentStore:r,childStore:f,after:s.id,transaction:n});w({newParentStore:f.getContentStore(),blocks:a,transaction:n}),m().clear({environment:t}),g().ZH({environment:t}),g().Z5({environment:t,stores:[f]})}({environment:t,blocks:a,transaction:h});else C({environment:t,blocks:a,transaction:h});else!function(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return;const c=s.getRecordStoreUIParent();if(!c||!(0,b().dz)(c))return;const l=c.getRecordStoreUIParent();if(!l||!(0,b().OY)(l))return;if(!l.isDefined())return;const u=(0,M().TS)({environment:t,table:i().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:u,type:o().Ti.transclusionContainer,inMemoryRecordCache:c.inMemoryRecordCache,transaction:n,spaceId:l.getSpaceId()});r().BE({parentStore:c,insertStore:f,afterStore:s,transaction:n});w({newParentStore:f.getContentStore(),blocks:a,transaction:n}),m().clear({environment:t}),g().ZH({environment:t}),g().Z5({environment:t,stores:[f]})}({environment:t,blocks:a,transaction:h})}function N(e){let{environment:t,blocks:a,transaction:n}=e;(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(a)&&h({environment:t,blocks:a,blockType:"collection_view_page",transaction:n})}function C(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return[];const c=s.recordStoreUIParentStore;if(null==c||!c.valueIs(S().i))return[];const l=(0,M().TS)({environment:t,table:i().iU,spaceId:s.getSpaceId()}),u=d().j4({environment:t,id:l,type:o().Ti.columnList,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:s.getSpaceId()}),{childStore:g}=r().Vt({parentStore:c,insertStore:u,beforeStore:s,transaction:n});return a.map((e=>{const a=(0,M().TS)({environment:t,table:i().iU,spaceId:s.getSpaceId()}),l=d().j4({environment:t,id:a,type:o().Ti.column,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:s.getSpaceId()}),{childStore:u}=r().Od({parentStore:c,childToRemoveStore:e,transaction:n}),{childStore:m}=r().BE({parentStore:g.getContentStore(),insertStore:l,transaction:n}),{childStore:f}=r().BE({parentStore:m.getContentStore(),insertStore:u,transaction:n});return f}))}function w(e){const{newParentStore:t,blocks:a,transaction:n}=e;for(const o of a){const e=o.getRecordStoreUIParent();null!=e&&e.valueIs(S().i)&&(r().Od({parentStore:e,childToRemoveStore:o,transaction:n}),r().R3({parentStore:t,appendStore:o,transaction:n}))}}},879105:(e,t,a)=>{a.d(t,{Nq:()=>r,f_:()=>c,yh:()=>l});a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(267602),a(653476),a(241792);var n=()=>a(163262),o=()=>a(85073),i=()=>a(876822),s=()=>a(826955);function r(e,t){const a=t.getAlive(),o=(0,n().hA)(t),i=!c(t),s=c(t),r=Boolean(e.currentUser.id===t.getParentId());return a&&o&&(s&&r||i)}function c(e){if(!e.getAlive||!(0,n().hA)(e))return!1;const{currentUserRootStore:t}=i().default.state,a=e.getIntegrationId();if(!t||!a)return!1;const r=(0,s().Kv)(t,{id:a,table:o().K2}).getKeyStore("type").getValue();return!e.isInternalBot(r?{type:r}:void 0)}function l(e){const{externalIntegrationStoreState:t,integrationId:a}=e;if(!t.loaded)return;const o=t.externalAuthentications.map((e=>{let{parent_id:t}=e;return t})),i=new Set(o),s=t.bots.filter((e=>e.alive&&i.has(e.id)&&(0,n().U9)(e)&&e.integration_id===a));return s.length?s[0]:void 0}},490091:(e,t,a)=>{a.d(t,{Z:()=>o});var n=function(e){return e[e.Preview=0]="Preview",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e}(n||{});const o=n},79685:(e,t,a)=>{a.d(t,{j:()=>o});a(667294);const n={viewBox:"0 0 20 20",svg:(0,a(785893).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 0 0-.884-.884l-4.333 4.333z"})},o=(0,a(827282).IU)("arrowStraightDown",n)},19296:(e,t,a)=>{a.d(t,{Y:()=>i});a(667294);var n=a(785893);const o={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .65-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},i=(0,a(827282).IU)("lock",o)},228035:(e,t,a)=>{a.d(t,{N:()=>o});a(667294);var n=a(785893);const o=(0,a(827282).IU)("redo",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.45117 10.6826C1.45117 13.4102 3.24219 15.208 6.29785 15.208H7.93848C8.38281 15.208 8.69727 14.873 8.69727 14.4629C8.69727 14.0459 8.38281 13.7109 7.93848 13.7109H6.3457C4.14453 13.7109 2.92773 12.4053 2.92773 10.6211C2.92773 8.84375 4.14453 7.59277 6.3457 7.59277H10.7002L12.2793 7.52441L11.0762 8.53613L9.31934 10.252C9.18262 10.3887 9.10059 10.5527 9.10059 10.7715C9.10059 11.1953 9.39453 11.5029 9.83203 11.5029C10.0234 11.5029 10.2285 11.4141 10.3721 11.2705L14.3027 7.40137C14.46 7.25098 14.542 7.05273 14.542 6.84766C14.542 6.64258 14.46 6.4375 14.3027 6.29395L10.3721 2.4248C10.2285 2.28125 10.0234 2.19238 9.83203 2.19238C9.39453 2.19238 9.10059 2.5 9.10059 2.91699C9.10059 3.14258 9.18262 3.30664 9.31934 3.43652L11.0762 5.15234L12.2793 6.1709L10.7002 6.10254H6.38672C3.2832 6.10254 1.45117 7.96875 1.45117 10.6826Z"})})}}]);