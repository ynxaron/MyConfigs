"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22122,82472],{152862:(e,t,o)=>{o.d(t,{Y:()=>r,h:()=>i});var n=()=>o(594546);function i(e){n().K4(e,"view_public_site_click")}function r(e,t){n().K4(e,"share_menu_tab_click",t)}},147249:(e,t,o)=>{o.d(t,{K:()=>i,y:()=>r});var n=()=>o(594546);function i(e,t){const{from:o}=t;n().K4(e,"show_tooltip",{from:o,time:Date.now()})}function r(e,t){const{from:o}=t;n().K4(e,"dismiss_tooltip",{from:o,time:Date.now()})}},140798:(e,t,o)=>{o.d(t,{Lg:()=>p,N:()=>m,aG:()=>u});var n=()=>o(139978),i=()=>o(306164),r=()=>o(269299),a=()=>o(903609),s=()=>o(6006),l=()=>o(384334),d=()=>o(662062),c=()=>o(876822);function u(e){const{environment:t,currentSpaceViewStore:o,...n}=e;if(!o.getModel())return;const i=!(0,d().q)(o)[e.feature];r().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{r().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:i}},transaction:t})}}),(0,l().cY)({environment:t,show:i,...n})}function m(e){let{environment:t,option:o,from:n,userAction:i}=e;const a=c().default.state.currentSpaceViewStore;if(!a)return!1;const d=a.getOnAppStartStore().getValue();return r().createAndCommit({userAction:i,environment:t,canUndo:!0,perform:e=>{r().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","on_app_start"],command:"set",args:o},transaction:e})}}),(0,s().pJ)({spaceView:a.getModel(),preference:o}),(0,l().BX)({environment:t,oldValue:d,newValue:o,from:n}),!0}function p(e){const{environment:t,selectedStore:o,currentSpaceViewStore:s,collectionContextStore:d}=e,c=d.collectionViewStore(),u=d.collectionStore(),m=d.collectionViewBlockStore();if(!(u&&c&&m&&s))return;const p=s.getTeamsStores(),g=o.table===i().e0?p.indexOf(o)+1:0,h=o.table===i().e0?o.id:void 0;r().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{r().applyOperation({store:c,operation:{pointer:{id:c.id,table:n().np},path:["format","collection_view_source","teamId"],command:"set",args:h},transaction:e}),(0,a().y)({environment:t,collectionViewBlockStore:m,collectionViewStore:c,collectionStore:u,collectionContextStore:d,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0,forceLocalQueryCollection:!1})}}),(0,l().Ay)({environment:t,teamId:h,index:g})}},169793:(e,t,o)=>{o.d(t,{ND:()=>F,RD:()=>A,gc:()=>P,gl:()=>B,u7:()=>j});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(156642),s=()=>o(575861),l=()=>o(788860),d=()=>o(696459),c=()=>o(147249),u=()=>o(905263),m=()=>o(982855),p=()=>o(191003),g=()=>o(550054),h=()=>o(803728),f=()=>o(110372),b=()=>o(156538),S=()=>o(876822),v=()=>o(890324),y=()=>o(826955),C=()=>o(127519),I=()=>o(343353),x=()=>o(559155),_=()=>o(656801),w=o(785893);const M=1,k=1,T=(0,l().vU)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function j(){const e=(0,i().O7)(),t=function(){const e=(0,i().O7)(),t=(0,r().VK)((()=>{var e;return null===(e=S().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),o=(0,r().VK)((()=>{const t=S().default.state.mainEditorCurrentBlockStore;return t&&v().Z.getMode(e,t)}),[e]);return(0,r().VK)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:n,inAppCalloutStore:i}=S().default.state;if(!i.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const r=null==n?void 0:n.getSettings();if(!r)return;if((0,d().$K)(r.last_used_ai_writer_at))return;if("tooltip"!==r.ai_assistant_onboarding_phase)return;if((0,x().$_)(e,t)){if(!(0,d().$K)(r.ai_sales_assisted_extra_notification_seen_at)||(0,s().O5)(r.ai_sales_assisted_extra_notification_seen_at)<k)return}else if((0,d().$K)(r.ai_assistant_onboarding_phase_last_set_at)&&(0,s().O5)(r.ai_assistant_onboarding_phase_last_set_at)<M)return;if("space_for_ai"!==(0,_().sy)())return;if(!(0,m().GD)(o))return;const l=C().default.state;if("editing"===l.mode){const e=(0,p().QY)(l.multiSelection);if(e&&(0,g().wd)(e.selection)){const t=e.store,o=b().E.findEditableWithStore(t);if(o){const e="block"===t.pointer.table?y().G.createChildStore(t,t.pointer):void 0,n=e&&e.getType(),i=Boolean(n&&(0,a().hD)(n)),r=t.getValue();if(i&&!r)return o}}}}),[e,o,t])}(),[o,c]=(0,n.useState)(!1),h=(0,n.useCallback)((()=>{c(!0)}),[]),f=!o&&Boolean(t);return(0,n.useEffect)((()=>()=>{f&&(0,_().fz)(e)}),[e,f]),f&&t?(0,w.jsx)(u().U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,w.jsx)(l()._H,{...T.spaceForAiHeader}),content:(0,w.jsx)(l()._H,{...T.spaceForAiContent}),onCloseClick:h}):null}function A(e){const{originRef:t,openState:o}=e,a=(0,i().O7)(),s=(0,r().VK)((()=>(0,_().sy)()),[]),[d,c]=(0,n.useState)(!1),m=(0,n.useCallback)((()=>{c(!0)}),[]),p="ask_ai_anything"===s&&"initialPrompt"===o.stage&&!d;return(0,n.useEffect)((()=>()=>{!a.device.isMobile&&p&&(0,_().fz)(a)}),[a,p]),a.device.isMobile||!p?null:(0,w.jsx)(u().U,{origin:t,placementToOrigin:"top",header:(0,w.jsx)(l()._H,{...T.askAiAnythingHeader}),content:(0,w.jsx)(l()._H,{...T.askAiAnythingContent}),onCloseClick:m})}function B(e){const{originRef:t,openState:o,isInputEmpty:a}=e,s=(0,i().O7)(),d=(0,r().VK)((()=>(0,_().sy)()),[]),[c,m]=(0,n.useState)(!1),p=(0,n.useCallback)((()=>{m(!0)}),[]),g="refine_ai_response"===d&&"results"===o.stage&&!o.loading&&"cursor"===o.context.type&&a&&!c;return(0,n.useEffect)((()=>()=>{!s.device.isMobile&&g&&(0,_().fz)(s)}),[s,g]),s.device.isMobile?null:(0,w.jsx)(u().U,{origin:g?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,w.jsx)(l()._H,{...T.refineAiResponseHeader}),content:(0,w.jsx)(l()._H,{...T.refineAiResponseContent}),onCloseClick:p})}function F(e){const{origin:t}=e,o=(0,i().O7)();(0,n.useEffect)((()=>{c().K(o,{from:"qna_button"}),f().gF(o,{callout_key:"ai_assistant_origin_element_tooltip"})}),[o]);const r=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=S().default.state;e&&(c().y(o,{from:"qna_button"}),f().bl(o,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss"}),(0,I().setQnaOnboardingPhase)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),h().Gi(o,"ai_assistant_origin_element_tooltip"))}),[o]);return(0,w.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,w.jsx)(l()._H,{...T.showAssistantOriginElementLocationHeader}),content:(0,w.jsx)(l()._H,{...T.showAssistantOriginElementLocationContent}),onCloseClick:r})}function P(e){const{origin:t}=e,o=(0,i().O7)();(0,n.useEffect)((()=>{c().K(o,{from:"qna_search"})}),[o]);const r=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=S().default.state;e&&(c().y(o,{from:"qna_search"}),(0,I().setQnaOnboardingPhase)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[o]);return(0,w.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,w.jsx)(l()._H,{...T.showAssistantLocationHeader}),content:(0,w.jsx)(l()._H,{...T.showAssistantLocationContent}),onCloseClick:r})}(0,o(100056).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=S().default.state;t&&o(269299).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{o(348141).d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},509572:(e,t,o)=>{o.r(t),o.d(t,{FORMS_SHARE_CALLOUT_KEY:()=>X,changeFormClosedState:()=>ce,changeFormSubmissionPermissions:()=>ue,createAndFocusCollectionFormEditorView:()=>ne,createCollectionFormEditorView:()=>ie,createDummyFormPage:()=>he,createFormInPrivate:()=>re,createFormQuestion:()=>se,createFormQuestionAndModuleForNewlyDuplicatedProperty:()=>le,createFormQuestionAndUpdateOrCreateModule:()=>de,createResponsesCollectionView:()=>ae,handleUpdateFormQuestionName:()=>ee,incrementAndTrackUserFormsCreated:()=>J,maybeAlertAboutUnsupportedPublicQuestions:()=>fe,maybeSyncQuestionNameToPropertyName:()=>te,remapQuestionToNewProperty:()=>ge,toggleAnonymousFormSubmissionState:()=>me,toggleNotionBrandingState:()=>pe});o(821057),o(670560),o(267602),o(653476),o(470928),o(30005),o(667294);var n=()=>o(846550),i=()=>o(506347),r=()=>o(156642),a=()=>o(863112),s=()=>o(226413),l=()=>o(532850),d=()=>o(817629),c=()=>o(998411),u=()=>o(127513),m=()=>o(64272),p=()=>o(644602),g=()=>o(667932),h=()=>o(217465),f=()=>o(375255),b=()=>o(396136),S=()=>o(139978),v=()=>o(26645),y=()=>o(483791),C=()=>o(955620),I=()=>o(788860),x=()=>o(342792),_=()=>o(543172),w=()=>o(707513),M=()=>o(984871),k=()=>o(132156),T=()=>o(308186),j=()=>o(421654),A=()=>o(636340),B=()=>o(47443),F=()=>o(145284),P=()=>o(269299),V=()=>o(348141),U=()=>o(804057),L=()=>o(427886),D=()=>o(594546),E=()=>o(907005),Z=()=>o(561933),N=()=>o(487270),O=()=>o(527278),R=()=>o(803728),H=()=>o(99537),K=()=>o(356117),W=()=>o(876822),Q=()=>o(749826),z=()=>o(808282),q=()=>o(807230),G=()=>o(469753),$=o(785893);const Y=(0,I().vU)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),X="forms_share_form_tooltip";function J(e,t){const{currentUserSettingsStore:o}=W().default.state;if(!o)return;const n=function(){const{currentUserSettingsStore:e}=W().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==n&&(V().d2({userSettingsStore:o,transaction:t,data:{user_forms_created_count:n+1}}),function(e,t){(0,D().j)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:t.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:n+1})),Q().default.logEvent("form_created")}function ee(e){var t;const{questionStore:o,newName:n,environment:i,collectionStore:r,collectionSchema:a,collectionContextStore:s}=e,l=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!l)throw new Error("No property ID found for question");P().createAndCommit({userAction:"formQuestion.changeName",environment:i,canUndo:!0,perform:e=>{var t,i;const d=null===(t=o.getConfig())||void 0===t?void 0:t.name;if(!d)return;const u=(0,f().Xh)({textValue:d,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:O().Z.getIntl()})===(null===(i=a[l])||void 0===i?void 0:i.name);P().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","name"],command:"set",args:[[n]]},transaction:e}),o.shouldSyncQuestionNameToPropertyName()&&(u&&!(0,Z().Gu)({property:l,collectionContextStore:s,newValue:n})?M().Bv({collectionStore:r,property:l,name:n,transaction:e}):P().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function te(e){var t;const{questionStore:o,environment:n,collectionStore:i,collectionContextStore:r}=e,a=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!a)throw new Error("No property ID found for question");P().createAndCommit({userAction:"formQuestion.changeName",environment:n,canUndo:!0,perform:e=>{if(!o.shouldSyncQuestionNameToPropertyName())return;const t=o.getNameStore().getValue();if(!t)return;const n=(0,f().Xh)({textValue:t,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:O().Z.getIntl()}),s=(0,Z().Gu)({property:a,collectionContextStore:r,newValue:n})?(0,d().n)(n):n;M().Bv({collectionStore:i,property:a,name:s,transaction:e})}})}function oe(){const e=(0,n().yK)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:w().Ue.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,$.jsxs)("div",{style:e.container,children:[(0,$.jsxs)("div",{style:e.iconGroup,children:[(0,p().t)({width:24}),(0,u().r)({width:16,marginLeft:16,marginRight:14}),(0,m().E)({width:24})]}),(0,$.jsx)("span",{style:e.dialogTitle,children:(0,$.jsx)(I()._H,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,$.jsx)("span",{style:e.dialogDescription,children:(0,$.jsx)(I()._H,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ne(e){const{environment:t,collectionContextStore:o,transaction:n}=e,i=o.collectionViewBlockStore(),r=o.collectionStore();if(!i||!r)return;const a=o.normalizedSchemaStore.state,s=ie({environment:t,collectionViewBlockStore:i,schema:a,transaction:n,initializeWithAllDefaultQuestions:!1});if(!s)return;(0,L().f)({environment:t,collectionContextStore:o,collectionViewId:s.newViewId,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});const l=s.layoutStore,d=Object.keys(a).filter((e=>{const t=a[e];return"title"!==e&&t&&(0,G().I0)(t)}));d.length>0&&d.length<=G().h0&&T().vC({showCancel:!1,keepFocus:!1,message:(0,$.jsx)(oe,{}),mode:"wide",items:[{label:(0,$.jsx)(I()._H,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:d.length}}),color:"blue",buttonType:"solid",onAccept(){P().createAndCommit({environment:t,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const n of d)le({environment:t,transaction:e,layoutStore:l,collectionStore:r,propertyId:n,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},addLayoutModule:o=>{(0,H().sW)({environment:t,sessionId:(0,x().ZP)(),layoutStore:l,position:o.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},module:o.layoutModule,transaction:e,isPropertyCreation:!1})},collectionContextStore:o,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0})}})}},{label:(0,$.jsx)(I()._H,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function ie(e){const{environment:t,collectionViewBlockStore:o,transaction:n,schema:i,initializeWithAllDefaultQuestions:r}=e;if(!o)return;const l=o.getSpaceId(),{formBlockStore:d,layoutStore:c}=function(e){var t;const{environment:o,spaceId:n,inMemoryRecordCache:i,transaction:r,schema:l,initializeWithAllDefaultQuestions:d}=e,c=Object.keys(l).find((e=>{var t;return"select"===(null===(t=l[e])||void 0===t?void 0:t.type)})),u=Boolean(d&&void 0!==c),m=(0,N().TS)({environment:o,table:b().iU,spaceId:n}),p=(0,N().TS)({environment:o,table:v().L_,spaceId:n}),h=u?(0,N().TS)({environment:o,table:v().L_,spaceId:n}):void 0,f=A().j4({id:m,environment:o,type:"form",permissions:(0,a().wG)(),inMemoryRecordCache:i,transaction:r}),S=A().ae({environment:o,table:y().Bh,value:{space_id:n,parent_table:b().iU,parent_id:f.id,modules:(0,g().l2)(p,h)},inMemoryRecordCache:i,transaction:r});var C;j().FH({stores:[f],update:{form_layout_pointer:{id:S.id,spaceId:n,table:y().Bh}},transaction:r}),se({environment:o,questionId:p,spaceId:n,layoutId:S.id,propertyId:s().iw,initialQuestionTitle:(null===(t=l[s().iw])||void 0===t?void 0:t.name)??"",inMemoryRecordCache:i,transaction:r,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1}),u&&h&&c&&se({environment:o,questionId:h,spaceId:n,layoutId:S.id,propertyId:c,initialQuestionTitle:(null===(C=l[c])||void 0===C?void 0:C.name)??"",inMemoryRecordCache:i,transaction:r,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1});return{formBlockStore:f,layoutStore:S}}({environment:t,spaceId:l,inMemoryRecordCache:o.inMemoryRecordCache,transaction:n,schema:i,initializeWithAllDefaultQuestions:r}),u=(0,U().W)({environment:t,collectionViewBlockStore:o,collectionView:{type:"form_editor",parent_id:o.id,parent_table:b().iU,alive:!0,space_id:l,name:O().Z.formatMessage(Y.newFormViewName),format:{form_block_pointer:{id:d.id,spaceId:l,table:b().iU}}},transaction:n});return A().sW({store:d,data:{parent_id:u.id,parent_table:S().np,alive:!0},transaction:n}),z().Z.setState({openTooltip:u.id}),R().yM(t,X),J(t,n),{newViewId:u.id,layoutStore:c,formId:d.id}}function re(e){const{environment:t,navigateToFormBuilder:o}=e,{currentSpaceStore:n,currentSpaceViewStore:r}=W().default.state;if(!n||!r)return;if(!(0,q().ww)(t))return void(0,q().eD)(t);if(!(n&&n.canEdit()&&r))return;const a=n.id,s=t.idCreator.getSpaceIdCreatorSync(a);P().createAndCommit({environment:t,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var l;const{targetBlockStore:d}=k().Z({environment:t,sourceBlockId:"root",targetBlockPointer:(0,N().Ii)({environment:t,table:b().iU,spaceId:a}),sourceBlockSubtree:(0,h().partialRecordMapToRecordMap)(E().Xq({isInline:!0,name:(0,C().TPx)(O().Z.formatMessage(Y.formDatabaseTitle))})),targetRecordCache:n.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:s}),c=d.getCollectionStore(),u=null==c||null===(l=c.getModel())||void 0===l?void 0:l.getNormalizedSchema(),m=d;if(!u)throw new Error("Schema not found");ie({environment:t,transaction:e,collectionViewBlockStore:m,schema:u,initializeWithAllDefaultQuestions:!0}),ae({environment:t,transaction:e,collectionViewBlockStore:m,schema:u}),F().Hj({environment:t,spaceStore:n,spaceViewStore:r,pageStore:d,isPrivate:!0,transaction:e,location:{type:"prepend"}}),o&&B()._c({environment:t,store:d,pageVisitSource:i().tY.CreateFormDeepLink})}})}function ae(e){const{environment:t,collectionViewBlockStore:o,transaction:n}=e,i=o.getSpaceId(),r=Object.keys(e.schema).find((t=>{var o;return"created_by"===(null===(o=e.schema[t])||void 0===o?void 0:o.type)}));(0,U().W)({environment:t,collectionViewBlockStore:o,collectionView:{type:"table",parent_id:o.id,parent_table:b().iU,alive:!0,name:O().Z.formatMessage(Y.responsesViewName),space_id:i,format:{table_properties:[{property:"title",visible:!0},...r?[{property:r,visible:!0}]:[]],table_wrap:!0,collection_pointer:o.getCollectionPointer()}},transaction:n})}function se(e){const{environment:t,questionId:o,spaceId:n,layoutId:i,propertyId:r,initialQuestionTitle:a,inMemoryRecordCache:s,transaction:l,shouldSyncQuestionNameToPropertyName:d,collectionContextStore:c,shouldLogEvent:u=!0,autofocusTitle:m,existingFormQuestionConfig:p,autoCreatedFromExistingDatabase:g}=e;A().ae({environment:t,table:v().L_,value:{id:o,space_id:n,parent_table:y().Bh,parent_id:i,alive:!0,config:{...p,propertyId:r,name:[[a]],shouldSyncQuestionNameToPropertyName:d}},inMemoryRecordCache:s,transaction:l}),u&&(0,D().j)({environment:t,event:{eventName:"add_form_question",eventProperties:{...(0,G().Pz)({collectionContextStore:c,propertyId:r,questionId:o}),auto_created_from_existing_database:Boolean(g)}}}),m&&m.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:o})}function le(e){const{environment:t,transaction:o,layoutStore:n,collectionStore:i,propertyId:r,position:a,addLayoutModule:s,collectionContextStore:l,shouldLogEvent:d=!0,autofocusTitle:c,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:m}=e,p=i.getSchema()[r];if(!p)throw new Error(`No schema found for property ${r}`);const g=u?(0,C().QaF)(null==u?void 0:u.name):p.name,h=n.getSpaceId(),f=(0,N().TS)({environment:t,table:v().L_,spaceId:h});return se({environment:t,questionId:f,spaceId:h,layoutId:n.id,propertyId:r,initialQuestionTitle:g,inMemoryRecordCache:n.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:d,collectionContextStore:l,autofocusTitle:c,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:m}),s({layoutModule:{type:"formQuestion",id:(0,_().ZP)(),formQuestionId:f},position:a,transaction:o}),{questionId:f}}function de(e){const{environment:t,transaction:o,layoutStore:n,propertyId:i,initialQuestionTitle:r,moduleId:a,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d,area:c,sessionId:u}=e,m=n.getModel();if(!m)throw new Error("Layout model cannot be undefined");const p=n.getSpaceId(),g=(0,N().TS)({environment:t,table:v().L_,spaceId:p});se({environment:t,questionId:g,spaceId:p,layoutId:m.id,propertyId:i,initialQuestionTitle:r,inMemoryRecordCache:n.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d});const h={type:"formQuestion",id:a??(0,_().ZP)(),formQuestionId:g,..."form_conditional_modules"===c?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return a?(0,K().Uq)({environment:t,transaction:o,layoutStore:n,position:{area:c,moduleId:a},updatedModule:h}):"form_conditional_modules"===c&&(0,H().sW)({environment:t,transaction:o,layoutStore:n,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:h,sessionId:u,isPropertyCreation:!1}),{updatedModuleId:h.id}}function ce(e){let{environment:t,formBlockStore:o,isClosed:n}=e;o.getIsFormClosed()!==n&&P().createAndCommit({userAction:"formActions.changeFormClosedState",environment:t,canUndo:!0,perform:e=>{j().FH({stores:[o],update:{form_config:{...o.getFormConfig(),is_form_closed:n}},transaction:e})}})}function ue(e){let{environment:t,formBlockStore:o,permissions:n}=e;o.getFormSubmissionPermissions()!==n&&P().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:t,canUndo:!0,perform:e=>{j().FH({stores:[o],update:{form_config:{...o.getFormConfig(),submission_permissions:n}},transaction:e})}})}function me(e){let{environment:t,formBlockStore:o}=e;const n=o.getIsFormAnonymousSubmissionEnabled();P().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:t,canUndo:!0,perform:e=>{j().FH({stores:[o],update:{form_config:{...o.getFormConfig(),anonymous_submissions:!n}},transaction:e})}})}function pe(e){var t;let{environment:o,formBlockStore:n}=e;const i=n.getSiteStore();if(!i)return;const r=(null===(t=i.getHeader())||void 0===t?void 0:t.hideWatermark)??!1;P().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:o,canUndo:!0,perform:e=>{P().applyOperation({store:i,operation:{pointer:i.pointer,path:["header","hideWatermark"],command:"set",args:!r},transaction:e})}})}function ge(e){let{environment:t,newPropertyId:o,formQuestionStore:n}=e;P().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:t,canUndo:!0,perform:e=>{P().applyOperation({store:n,operation:{pointer:n.pointer,path:["config","propertyId"],command:"set",args:o},transaction:e})}})}function he(e){const{environment:t,collectionSchema:o,temporaryRecordCache:n,spaceId:i,collectionId:a,formMode:s}=e,l={};Object.keys(o).forEach((e=>{l[e]=(0,C().TPx)("")}));const{performResult:d}=P().createAndCommit({environment:t,userAction:"formActions.createDummyFormPage",perform:e=>{const o=A().j4({environment:t,type:r().Ti.page,inMemoryRecordCache:n,transaction:e,spaceId:i,properties:{...l}});return A().sW({store:o,data:{alive:"viewer"===s,parent_id:a,parent_table:"collection"},transaction:e}),o},canUndo:!1});return d}async function fe(e){const{environment:t,formBlockStore:o,collectionSchema:n,theme:i,onAccept:r}=e;if(!n)return;const a=(0,G().jj)(o),s=(null==a?void 0:a.getFormQuestionsForFormLayout())??[],d=[];if(s.forEach((e=>{const o=e.getPropertyId();if(!o)return;const i=(0,l().Qm)({schema:n,property:o}),r=null==i?void 0:i.type;if(!r)return;(0,G().Hz)({environment:t,propertyType:r,propertySchema:i,isPublicForm:!0})&&d.push(e)})),0===d.length)return void r();const u=d.map(((e,t)=>{const o=(0,f().Xh)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:O().Z.getIntl()}),n=t===d.length-1;return(0,$.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:n?void 0:`1px solid ${i.lightDividerColor}`},children:o},e.id)})),{accept:m}=await T().gt({message:(0,$.jsx)(I()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,$.jsx)("div",{style:{borderRadius:6,border:`1px solid ${i.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:u}),acceptLabel:(0,$.jsx)(I()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});m&&r()}},842117:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ue});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(788860),l=()=>o(661297),d=()=>o(654133),c=()=>o(594546),u=()=>o(469753),m=()=>o(714230),p=()=>o(863112),g=o(785893);const h=(0,o(827282).IU)("anonymousForm",{viewBox:"0 0 16 16",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M1.896 5.789c-.446 0-.67-.228-.67-.684V3.444c0-.73.19-1.28.568-1.654.378-.374.936-.561 1.675-.561h1.66c.452 0 .678.223.678.67 0 .451-.226.677-.677.677H3.55c-.318 0-.562.082-.73.246-.165.164-.247.412-.247.745v1.538c0 .456-.225.684-.677.684zm12.203 0c-.447 0-.67-.228-.67-.684V3.567c0-.333-.087-.581-.26-.745-.169-.164-.41-.246-.725-.246h-1.579c-.45 0-.677-.226-.677-.677 0-.447.226-.67.677-.67h1.661c.743 0 1.304.187 1.682.56.378.374.567.926.567 1.655v1.661c0 .456-.225.684-.676.684zM3.469 14.77c-.739 0-1.297-.19-1.675-.567-.378-.374-.567-.926-.567-1.655v-1.654c0-.456.223-.684.67-.684.45 0 .676.228.676.684v1.538c0 .333.082.581.246.745.169.164.413.246.732.246H5.13c.451 0 .677.226.677.677 0 .447-.226.67-.677.67H3.469zm7.396 0c-.45 0-.677-.223-.677-.67 0-.451.226-.677.677-.677h1.58c.314 0 .555-.082.724-.246.173-.164.26-.412.26-.745v-1.538c0-.456.223-.684.67-.684.45 0 .676.228.676.684v1.654c0 .73-.189 1.28-.567 1.655-.378.378-.939.567-1.682.567h-1.66zm-6.193-2.796c-.164 0-.287-.048-.37-.143a.596.596 0 01-.115-.376c0-.205.075-.468.225-.787a3.79 3.79 0 01.697-.97 3.977 3.977 0 011.19-.82c.478-.224 1.043-.336 1.695-.336.66 0 1.23.112 1.71.335a3.896 3.896 0 011.879 1.791c.155.32.232.582.232.787 0 .15-.04.275-.123.376-.077.095-.198.143-.362.143H4.672zm3.322-4.02c-.35 0-.67-.09-.957-.273a2.03 2.03 0 01-.69-.738 2.173 2.173 0 01-.26-1.067c0-.373.087-.715.26-1.025a2.03 2.03 0 01.69-.738c.287-.187.606-.28.957-.28s.672.093.964.28c.292.182.522.428.69.738.174.31.26.652.26 1.025 0 .397-.086.752-.26 1.067-.168.31-.398.556-.69.738a1.783 1.783 0 01-.964.274z"})})});var f=()=>o(429600),b=()=>o(38370),S=()=>o(237874),v=()=>o(904114),y=()=>o(968061),C=()=>o(467526),I=()=>o(820717),x=()=>o(259408),_=()=>o(959137),w=()=>o(879952),M=()=>o(990966),k=()=>o(348141),T=()=>o(521632),j=()=>o(827973),A=()=>o(448419),B=()=>o(206352),F=()=>o(291198),P=()=>o(198829),V=()=>o(470386),U=()=>o(989377),L=()=>o(906651),D=()=>o(125659),E=()=>o(247724),Z=()=>o(347577),N=()=>o(527278),O=()=>o(352230),R=()=>o(164079),H=()=>o(148126),K=()=>o(345918),W=()=>o(466970),Q=()=>o(690277),z=()=>o(803728),q=()=>o(878797),G=()=>o(356140),$=()=>o(314169),Y=()=>o(714022),X=()=>o(333023),J=()=>o(998470),ee=()=>o(689653),te=()=>o(787093),oe=()=>o(998901),ne=()=>o(876822),ie=()=>o(47375);class re extends(()=>o(263184))().default{getInitialState(){return{formShareMenuType:"initial"}}}const ae=new re;var se=()=>o(808282),le=()=>o(965014),de=()=>o(385337),ce=()=>o(815277),ue=()=>o(659796),me=()=>o(509572),pe=(o(267602),o(470928),o(241792),()=>o(513670)),ge=()=>o(255577),he=()=>o(967092);const fe=function(e){let{icon:t,title:s,selectedKey:l,onChange:c,disabled:u,tooltipMessage:m,disableTooltip:p,...h}=e;const b=(0,i().Fy)(),S=(0,a().Fg)(),v="options"in h?h.options:[],y=v.find((e=>pe().Xy(e.key,l))),C=(0,r().qz)(void 0,o(529048).Z),I=(0,r().Kw)(C);(0,n.useEffect)((()=>{y||o(799891).log({level:"error",from:"FormSettingsPickListRow",type:"InvalidSelectedItem",error:(0,o(792409).Ui)("Selected key is invalid.")})}));const x=(0,a().yK)((e=>({desktopAndTabletButton:{marginLeft:0,marginRight:0,width:"auto",padding:"2px 0",margin:"0 10px"},valueContainer:{display:"flex",alignItems:"center",color:e.text.secondary},iconStyle:{width:16,height:16},rightStyle:{marginRight:0},chevronIcon:{height:12,width:12,marginLeft:6,fill:e.icon.tertiary,transform:I.open?"rotate(90deg)":void 0}})),[I.open]),_=(0,g.jsxs)("div",{style:x.valueContainer,children:[null==y?void 0:y.title,(0,f().o)(x.chevronIcon)]});return(0,g.jsx)(d().Z,{renderTooltip:()=>m,disableTooltip:p,placement:oe().Placement.Left,textWrap:!0,render:e=>(0,g.jsx)(A().ZP,{popupType:b.isPhone?he().kQ.SlideUp:he().kQ.Popup,alignmentToOrigin:A().vR.End,placementToOrigin:A().pO.Bottom,originGap:0,buttonPopupStore:C,disabled:u,renderOrigin:o=>(0,g.jsx)(j().Z,{...e,icon:null==t?void 0:t(x.iconStyle),title:s,focused:!1,disabled:u,buttonStyle:b.isPhone?void 0:x.desktopAndTabletButton,right:_,...(0,R().Z)(o,h)}),render:e=>{const t=[{key:0,render:e=>(0,g.jsx)(o(388284).Z,{enableActionSheetTitle:!0,...e}),items:pe().oA(v.map(((t,o)=>{const n={key:o,render:e=>(0,g.jsx)(d().Z,{textWrap:!0,placement:oe().Placement.Left,disableTooltip:!t.tooltipMessage,renderTooltip:()=>t.tooltipMessage,render:o=>(0,g.jsx)(j().Z,{...(0,R().Z)(e,o),disabled:t.disabled,title:t.title,icon:t.icon,style:{color:t.disabled?S.lightTextColor:S.text.primary},checkState:t.key===l})}),action:()=>{c(t.key,e),e.close()}};return n})))}];return(0,g.jsx)(P().Z,{menuType:b.isPhone?O().o.ActionSheet:O().o.Popup,width:300,children:(0,g.jsx)(ge().ZP,{type:ge().iW.Vertical,sections:t,initialFocus:b.isMobile?void 0:0})})}})})};const be=function(e){let{icon:t,title:n,onClick:r,menuItemDisabled:s,toggleDisabled:l,tooltipMessage:c,disableTooltip:u,on:m}=e;const p=(0,i().Fy)(),h=(0,a().yK)((e=>({iconStyle:{width:16,height:16},desktopAndTabletButton:{marginLeft:0,marginRight:0,width:"auto",padding:"2px 0",margin:"0 10px"}})),[]);return(0,g.jsx)(d().Z,{renderTooltip:()=>c,disableTooltip:u,render:e=>(0,g.jsx)(j().Z,{buttonStyle:p.isPhone?void 0:h.desktopAndTabletButton,icon:null==t?void 0:t(h.iconStyle),title:n,right:(0,g.jsx)(o(471645).Z,{on:m,onClick:r,disabled:l??s}),focused:!1,disabled:s,onClick:r,...e}),placement:oe().Placement.Left,textWrap:!0})};var Se=()=>o(154186),ve=()=>o(905263);function ye(e){let{origin:t,onCloseClick:o}=e;const n=(0,a().yK)((e=>({tooltipStyle:{opacity:1},gotItButton:{border:"dark"===e.mode?`1px solid ${e.accentColors.gray[500]}`:`1px solid ${e.accentColors.gray[700]}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center",height:28,padding:"0px 8px"}})),[]),i=(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{style:{opacity:.7},children:(0,g.jsx)(s()._H,{id:"FormShareTooltip.content",defaultMessage:"When you’re done editing, click here to copy the form link to share."})}),(0,g.jsx)("div",{style:{float:"right",marginTop:10},children:(0,g.jsx)(Se().Z,{onClick:o,style:n.gotItButton,children:(0,g.jsx)(s()._H,{id:"FormShareTooltip.dismissButton",defaultMessage:"Got it"})})})]});return(0,g.jsx)(ve().U,{origin:t,style:{width:250},hideCloseButton:!0,hideActions:!0,placementToOrigin:"bottom",alignmentToOrigin:oe().Alignment.End,pointerLength:30,contentStyle:n.tooltipStyle,pointerPosition:"85%",content:i,onCloseClick:o,shouldDismissUponOutsideClick:!0})}const Ce=(0,s().vU)({anonymousFormSettingTooltip:{defaultMessage:"Form submissions will be anonymous",id:"FormShareMenu.CollectRespondentIdentity.tooltip"},anonymousFormSettingTooltipForPublicForms:{defaultMessage:"All submissions for public forms will be anonymous",id:"FormShareMenu.CollectRespondentIdentity.tooltipForPublicForms"},disabledPublishFormByTeamspace:{defaultMessage:"Disabled via teamspace settings",id:"FormShareMenu.disabledPublishFormByTeamspace"},disabledPublishFormByWorkspace:{defaultMessage:"Disabled via workspace settings",id:"FormShareMenu.disabledPublishFormByWorkspace"},disabledFormConfigurationPermissionTooltip:{defaultMessage:"You do not have permission to change this setting. Only users with full access can modify this form setting.",id:"FormShareMenu.DisabledFormConfigurationPermission.tooltip"},disabledFormConfigurationAnonymousSubmissionTooltip:{defaultMessage:"You do not have permission to change this setting. Only users with edit access can modify this form setting.",id:"FormShareMenu.DisabledFormConfigurationAnonymousSubmission.tooltip"},sharedToSpaceTooltip:{defaultMessage:"Workspace members with the link will be able to view and submit.",id:"FormShareMenu.sharedToSpace.tooltip"},sharedToWebTooltip:{defaultMessage:"Anyone with the link will be able to view and submit, no login required.",id:"FormShareMenu.sharedToWeb.tooltip"},closedFormTooltip:{defaultMessage:"No one will be able to view or submit this form.",id:"FormShareMenu.closedForm.tooltip"},notionBrandingDisabledTooltip:{defaultMessage:"Upgrade to remove Notion branding from the form",id:"FormShareMenu.notionBrandingDisabled.tooltip"},notionBrandingDisabledTooltipNonWorkspaceOwner:{defaultMessage:"Contact your workspace owner to upgrade to remove branding",id:"FormShareMenu.notionBrandingDisabled.tooltipNonWorkspaceOwner"},notionBrandingTooltip:{defaultMessage:"Remove Notion branding from the form",id:"FormShareMenu.notionBranding.tooltip"},embedSettingRowTitle:{defaultMessage:"Embed this form",id:"FormShareMenu.embedSettingRowTitle"},embedSettingRowTooltip:{defaultMessage:"Embed this form outside of Notion",id:"FormShareMenu.embedSettingRowTooltip"},submissionNoAccessTooltip:{defaultMessage:"After submitting the form, respondents will not have access to their submissions.",id:"FormShareMenu.submissionNoAccessTooltip"},submissionCanViewTooltip:{defaultMessage:"After submitting the form, respondents can view their submissions.",id:"FormShareMenu.submissionCanViewTooltip"},submissionCanCommentTooltip:{defaultMessage:"After submitting the form, respondents can comment on their submissions.",id:"FormShareMenu.submissionCanCommentTooltip"},submissionCanEditTooltip:{defaultMessage:"After submitting the form, respondents can edit their submissions.",id:"FormShareMenu.submissionCanEditTooltip"},submissionFullAccessTooltip:{defaultMessage:"After submitting the form, respondents will have full access to their submissions, including the ability to edit, delete, and share them.",id:"FormShareMenu.submissionFullAccessTooltip"},anonymousSubmissionPermissionsTooltip:{defaultMessage:"Turn off anonymous submissions to allow respondents to access their submissions",id:"FormShareMenu.anonymousSubmissionPermissionsTooltip"}});function Ie(e){let{formBlockStore:t,showCompactDesktopHeader:o}=e;const a=(0,D().Y$)(),l=(0,i().Fy)(),u=(0,i().O7)(),m=(0,n.useRef)(null),p=(0,r().VK)((()=>a.formShareMenuButtonPopupStore),[a]),h=(0,r().VK)((()=>{var e;const o=t.getCreatedById(),n=null===(e=a.collectionViewStore())||void 0===e?void 0:e.id,i=o===u.currentUser.id,r=ie().default.state.open;return!(!i||r||se().Z.state.openTooltip!==n)&&q().default.isVisible(me().FORMS_SHARE_CALLOUT_KEY)}),[u,t,a]),f=(0,n.useCallback)((()=>{k().N0({environment:u}),z().Gi(u,me().FORMS_SHARE_CALLOUT_KEY)}),[u]);return(0,r().VK)((()=>(0,H().Sr)(u)),[u])?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(A().ZP,{popupType:l.isPhone?A().Z4.SlideUp:A().Z4.Popup,style:l.isPhone?{height:Z().DQ,maxHeight:Z().DQ}:void 0,forceInitialInbound:!0,buttonPopupStore:p,renderOrigin:e=>(0,g.jsx)(d().Z,{disableTooltip:l.isMobile||!o,renderTooltip:()=>(0,g.jsx)(s()._H,{defaultMessage:"Share form",id:"collectionViewBlock.formEditorView.shareForm"}),render:t=>(0,g.jsx)(L().Z,{ref:m,style:{marginLeft:6},...(0,R().Z)(t,e),children:l.isMobile||o?(0,g.jsx)(s()._H,{defaultMessage:"Share",id:"collectionViewBlock.formEditorView.shareFormMobile"}):(0,g.jsx)(s()._H,{defaultMessage:"Share form",id:"collectionViewBlock.formEditorView.shareForm"})})}),originGap:8,render:e=>(0,g.jsx)(xe,{formBlockStore:t,parent:e}),onClick:()=>{(0,c().j)({environment:u,event:{eventName:"share_form_clicked",eventProperties:{form_id:t.id}}})},onDismiss:()=>p.reset(),onClose:()=>p.reset()}),h&&(0,g.jsx)(ye,{origin:m,onCloseClick:f})]})}function xe(e){let{formBlockStore:t,parent:o}=e;const a=(0,i().Fy)(),s=(0,W().E)("enable_embeddable_sites_for_space"),l=(0,W().E)("forms_submission_permissions"),{formUrl:d,isFormPublic:c,isFormClosed:m}=(0,r().VK)((()=>({formUrl:(0,u().sP)(t),isFormPublic:t.getIsFormPublic(),isFormClosed:t.getIsFormClosed()})),[t]),p=(0,r().VK)((()=>ae.state.formShareMenuType),[]),h=m?null:(0,g.jsxs)(g.Fragment,{children:[!c&&l&&(0,g.jsx)(je,{formBlockStore:t}),c&&(0,g.jsx)(Be,{formBlockStore:t}),(0,g.jsx)(Te,{formBlockStore:t}),s&&c&&(0,g.jsx)(_e,{})]}),f=(0,i().O7)();(0,n.useEffect)((()=>{w().ZH({preventDismissMobileKeyboard:!0,environment:f}),M().clear({preventDismissMobileKeyboard:!0,environment:f})}),[f]);let b={menuType:O().o.Popup,maxHeight:"90vh",width:480};return a.isPhone&&(b={menuType:O().o.Modal,right:(0,g.jsx)(V().DoneMenuText,{}),onClickRight:o.close,paddingTop:0}),(0,g.jsx)(P().Z,{...b,className:E().IG,children:(0,g.jsx)(B().Z,{debugName:"ShareFormContainer",capture:!0,allowEsc:!0,children:"initial"===p?(0,g.jsxs)("div",{style:{paddingBottom:12},children:[(0,g.jsx)(ke,{formBlockStore:t}),h,(0,g.jsx)(Me,{formUrl:d})]}):(0,g.jsx)(we,{formBlockStore:t})})})}function _e(){const e=(0,a().Fg)();return(0,g.jsx)(d().Z,{renderTooltip:()=>N().Z.formatMessage(Ce.embedSettingRowTooltip),disableTooltip:!1,render:t=>(0,g.jsx)(j().Z,{icon:(0,b().z)({width:16,height:16}),title:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s()._H,{...Ce.embedSettingRowTitle}),(0,g.jsx)(U().i,{newBadgeKey:"publish_site_settings_embed_page",didUserEngage:!1,style:{display:"inline"}})]}),focused:!1,disabled:!1,buttonStyle:{marginLeft:0,marginRight:0,width:"auto",padding:"2px 0",margin:"0 10px"},right:(0,f().o)({height:12,width:12,marginLeft:6,fill:e.icon.tertiary}),onClick:()=>{ae.setState({...ae.state,formShareMenuType:"embed"})},...t}),placement:oe().Placement.Left,textWrap:!0})}function we(e){const{formBlockStore:t}=e,{isMobile:o}=(0,i().Fy)(),n=(0,te().Z)(),r=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",marginTop:14,marginBottom:o?0:16,paddingLeft:n,paddingRight:n}})),[n,o]);return(0,g.jsxs)("div",{children:[(0,g.jsx)(Ve,{handleBackButtonClick:()=>{ae.setState({...ae.state,formShareMenuType:"initial"})}}),(0,g.jsx)("div",{style:r.container,children:(0,g.jsx)(ee().O,{currentBlockStore:t})})]})}function Me(e){const{formUrl:t}=e,[o,r]=(0,n.useState)(!1),c=(0,i().O7)(),u=(0,i().MO)(),m=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",margin:12,marginTop:8,marginBottom:0,height:u?40:30},urlInputWrapper:{position:"relative",flexGrow:1,height:u?40:30},urlInput:{borderTopLeftRadius:6,borderBottomLeftRadius:6,borderTopRightRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderWidth:1,borderRightWidth:0,borderStyle:"solid",borderColor:e.outlineButtonBorder,padding:0,height:"100%",fontSize:u?16:14,backgroundColor:e.contentBackground},urlInputGradient:{position:"absolute",top:1,right:0,background:`linear-gradient(90deg, \n\t\t\t\t\t${e.contentBackgroundTransparent} 0%, \n\t\t\t\t\t${e.contentBackground} 90%)`,height:28,width:36},urlInputInner:{padding:6,paddingRight:0,backgroundColor:"transparent",border:"none"},copyLinkButton:{height:"100%",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:6,borderBottomRightRadius:6},linkIcon:{width:u?22:14,height:u?22:14,color:e.icon.secondary,marginRight:6}})),[u]);return(0,g.jsxs)("div",{style:m.container,children:[(0,g.jsxs)("div",{style:m.urlInputWrapper,children:[(0,g.jsx)(F().Z,{style:m.urlInput,inputStyle:m.urlInputInner,value:t,readOnly:!0,disabled:!0}),(0,g.jsx)("div",{style:m.urlInputGradient})]}),(0,g.jsx)(d().Z,{forceVisibleState:!!o||void 0,disableTooltip:!o,renderTooltip:()=>(0,g.jsx)(s()._H,{defaultMessage:"Copied",id:"database.collectionViewBlock.formEditorShareButton.copiedLinkToForm.tooltip"}),render:e=>(0,g.jsxs)(l().Z,{style:m.copyLinkButton,onClick:async()=>{r(!0);(await _().F.clipboardActions.load()).copyString({stringValue:t,environment:c,copiedMessage:u?ue().Y.copiedLinkToForm:void 0}),setTimeout((()=>{r(!1)}),1e3)},...e,children:[(0,S().N)(m.linkIcon),(0,g.jsx)(s()._H,{defaultMessage:"Copy form link",id:"database.collectionViewBlock.formEditorShareButton.copyFormLink"})]})})]})}function ke(e){let{formBlockStore:t}=e;const o=(0,i().O7)(),l=(0,a().Fg)(),d=(0,D().Y$)(),{canEditPermissions:m,collectionSchema:p}=(0,r().VK)((()=>{var e;const t=d.collectionViewBlockStore();return{canEditPermissions:!!t&&t.canEditMembership(),collectionSchema:null===(e=d.collectionStore())||void 0===e?void 0:e.getSchema()}}),[d]),h=(0,Q().E)({store:t}),f=(0,r().VK)((()=>h.disabled&&"team"===h.disabledBy?Ce.disabledPublishFormByTeamspace:h.disabled&&"space"===h.disabledBy?Ce.disabledPublishFormByWorkspace:void 0),[h]),{currentSpaceStore:b}=(0,r().Kw)(ne().default),S=(0,a().yK)((e=>({permissionOption:{display:"flex",alignItems:"center"},yellowBadge:{background:"light"===e.mode?e.accentColors.yellow[50]:e.accentColors.yellow[200],color:"light"===e.mode?e.accentColors.yellow[500]:e.accentColors.yellow[600]},container:{marginTop:10}})),[]),v=(0,r().VK)((()=>t.getIsFormPublic()),[t]),y=(0,r().VK)((()=>t.getIsFormClosed()),[t]),C=(0,r().VK)((()=>b?(0,K().rn)(o,b):""),[o,b]),x=(0,r().VK)((()=>{if(t)return X().mk({store:t,environment:o})}),[o,t]),_=(0,r().VK)((()=>null==x?void 0:x.mostPermissivePublicItem),[x]),w=(0,n.useCallback)((e=>{if(!_)return;const{permissionItem:n}=_;(0,$().iK)({oldPermissionItem:n,newPermissionItem:{...n,...e},wasInherited:!1,environment:o,store:t,sudoModeStore:void 0,location:void 0})}),[o,_,t]);return(0,g.jsx)("div",{style:S.container,children:(0,g.jsx)(fe,{disabled:!m,icon:I().v,title:(0,g.jsx)(s()._H,{id:"formEditSettings.formPermissions.title",defaultMessage:"Who can fill out"}),disableTooltip:m,tooltipMessage:m?void 0:N().Z.formatMessage(Ce.disabledFormConfigurationPermissionTooltip),selectedKey:(0,u().Nb)(v,y),options:[{key:"shared_to_space",tooltipMessage:N().Z.formatMessage(Ce.sharedToSpaceTooltip),title:(0,g.jsx)(s()._H,{id:"formEditSettings.formPermissions.spacePermission",defaultMessage:"Anyone at {spaceName} with link",values:{spaceName:C}})},{key:"shared_to_web",disabled:h.disabled,tooltipMessage:f?N().Z.formatMessage(f):N().Z.formatMessage(Ce.sharedToWebTooltip),title:(0,g.jsxs)("div",{style:S.permissionOption,children:[(0,g.jsx)(s()._H,{id:"formEditSettings.formPermissions.publicPermission",defaultMessage:"Anyone on the web with link"}),(0,g.jsx)(T().Z,{content:(0,g.jsx)(s()._H,{id:"formEditSettings.formPermissions.publicBadge",defaultMessage:"Public"}),style:S.yellowBadge})]})},{key:"closed",tooltipMessage:N().Z.formatMessage(Ce.closedFormTooltip),title:(0,g.jsxs)("div",{style:S.permissionOption,children:[(0,g.jsx)(s()._H,{id:"formEditSettings.formPermissions.noAccess",defaultMessage:"No access"}),(0,g.jsx)(T().Z,{content:(0,g.jsx)(s()._H,{id:"formEditSettings.formPermissions.closedBadge",defaultMessage:"Closed"})})]})}],onChange:async e=>{const n=(0,u().Nb)(v,y);switch(e){case"shared_to_space":me().changeFormClosedState({environment:o,formBlockStore:t,isClosed:!1}),w({role:"none"});break;case"shared_to_web":await me().maybeAlertAboutUnsupportedPublicQuestions({environment:o,formBlockStore:t,collectionSchema:p,theme:l,onAccept:()=>{me().changeFormClosedState({environment:o,formBlockStore:t,isClosed:!1}),J().Fo({environment:o,type:"form",store:t,header:{hideBreadcrumbs:!0,hideSearch:!0}}),w({role:"reader",allow_duplicate:!1})}});break;case"closed":me().changeFormClosedState({environment:o,formBlockStore:t,isClosed:!0})}(0,c().j)({environment:o,event:{eventName:"change_form_permissions",eventProperties:{form_id:t.id,old_permissions:n,new_permissions:e}}})}})})}function Te(e){let{formBlockStore:t}=e;const o=(0,i().O7)(),n=(0,s().YB)(),a=(0,D().Y$)(),l=(0,r().VK)((()=>a.permissionScopesStore.state.canConfigureBlock),[a]),d=(0,r().VK)((()=>t.getIsFormAnonymousSubmissionEnabled()),[t]),u=(0,r().VK)((()=>t.getIsFormPublic()),[t]),m=(0,r().VK)((()=>l?u?Ce.anonymousFormSettingTooltipForPublicForms:d?Ce.anonymousFormSettingTooltip:void 0:Ce.disabledFormConfigurationAnonymousSubmissionTooltip),[l,u,d]);return(0,g.jsx)(be,{icon:h,title:(0,g.jsx)(s()._H,{id:"formShareMenu.anonymousFormToggle.title",defaultMessage:"Anonymous responses"}),menuItemDisabled:!l||u,on:!!u||d,onClick:()=>{me().toggleAnonymousFormSubmissionState({environment:o,formBlockStore:t}),(0,c().j)({environment:o,event:{eventName:"form_anonymous_responses_toggled",eventProperties:{form_id:t.id,is_anonymous:!d}}})},tooltipMessage:m?n.formatMessage(m):void 0,disableTooltip:!m})}function je(e){let{formBlockStore:t}=e;const o=(0,i().O7)(),n=(0,D().Y$)(),a=(0,s().YB)(),l=(0,r().VK)((()=>{const e=n.collectionViewBlockStore();return!!e&&e.canEditMembership()}),[n]),d=(0,r().VK)((()=>t.getIsFormAnonymousSubmissionEnabled()),[t]),u=(0,r().VK)((()=>(0,p().lm)(t.getFormSubmissionPermissions(),d,t.getIsFormPublic())),[t,d]),m=(0,r().VK)((()=>l?d?Ce.anonymousSubmissionPermissionsTooltip:void 0:Ce.disabledFormConfigurationPermissionTooltip),[l,d]);return(0,g.jsx)(fe,{disabled:!l||d,icon:v().I,title:(0,g.jsx)(s()._H,{id:"formEditSettings.formSubmissionPermission.title",defaultMessage:"Access to submission"}),disableTooltip:!m,tooltipMessage:m?a.formatMessage(m):void 0,selectedKey:u,options:[{key:"none",tooltipMessage:N().Z.formatMessage(Ce.submissionNoAccessTooltip),title:(0,g.jsx)(s()._H,{id:"formEditSettings.formSubmissionPermission.noAccess",defaultMessage:"No access"})},{key:"reader",tooltipMessage:N().Z.formatMessage(Ce.submissionCanViewTooltip),title:(0,g.jsx)(s()._H,{id:"formEditSettings.formSubmissionPermission.canView",defaultMessage:"Can view"})},{key:"comment_only",tooltipMessage:N().Z.formatMessage(Ce.submissionCanCommentTooltip),title:(0,g.jsx)(s()._H,{id:"formEditSettings.formSubmissionPermission.canComment",defaultMessage:"Can comment"})},{key:"read_and_write",tooltipMessage:N().Z.formatMessage(Ce.submissionCanEditTooltip),title:(0,g.jsx)(s()._H,{id:"formEditSettings.formSubmissionPermission.canEdit",defaultMessage:"Can edit"})},{key:"editor",tooltipMessage:N().Z.formatMessage(Ce.submissionFullAccessTooltip),title:(0,g.jsx)(s()._H,{id:"formEditSettings.formSubmissionPermission.fullAccess",defaultMessage:"Full access"})}],onChange:e=>{me().changeFormSubmissionPermissions({environment:o,formBlockStore:t,permissions:e}),(0,c().j)({environment:o,event:{eventName:"change_form_submission_permissions",eventProperties:{form_id:t.id,old_permissions:u,new_permissions:e}}})}})}const Ae=200;function Be(e){var t;let{formBlockStore:o}=e;const n=(0,i().O7)(),a=(0,r().VK)((()=>o.getSiteStore()),[o]),l=(0,G().W)(),d=(0,ce().oo)({name:"unbranded_forms",spaceId:l,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id}),c=null==d?void 0:d.upsell,u=(0,r().VK)((()=>(0,K().Fn)(n)),[n]),m=(0,r().VK)((()=>{var e;return!!a&&!(null!==(e=a.getHeader())&&void 0!==e&&e.hideWatermark)}),[a]);if(!a)return null;const p=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)("div",{style:{width:Ae},children:d?(0,ce().V5)(d,{upsell:()=>N().Z.formatMessage(Ce.notionBrandingDisabledTooltip),blocked:()=>N().Z.formatMessage(Ce.notionBrandingDisabledTooltipNonWorkspaceOwner),available:()=>N().Z.formatMessage(Ce.notionBrandingTooltip)}):(0,g.jsx)("div",{})})]});return(0,g.jsx)(be,{icon:y().h,title:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,g.jsx)(s()._H,{id:"formShareMenu.publicForms.notionBranding.title",defaultMessage:"Notion branding"}),"upsell"===(null==d?void 0:d.type)&&c&&(0,g.jsx)("div",{style:{marginLeft:10},children:(0,g.jsx)(de().R,{upsell:c,analyticsName:"forms_notion_branding",disableTooltip:!0})})]}),toggleDisabled:!(0,x()._e)(d),menuItemDisabled:!u,on:m||!(0,x()._e)(d),onClick:()=>{"upsell"===(null==d?void 0:d.type)&&"product"===(null==c?void 0:c.type)?le().y(n,{upsell:c,from:"forms_notion_branding"}):me().toggleNotionBrandingState({environment:n,formBlockStore:o})},tooltipMessage:p})}function Fe(){const e=(0,a().Fg)(),t=(0,s().YB)(),o=(0,a().yK)((e=>({notionBrandingBaseImage:{width:Ae,borderRadius:4},brandingPreview:{display:"flex",position:"absolute",top:"36%",left:"44%",transform:"translateX(-50%)"},linkIcon:{width:17,height:void 0,marginRight:4,color:e.icon.primary}})),[]);return(0,g.jsxs)("div",{style:{paddingTop:4},children:[(0,g.jsx)("img",{src:"light"===e.mode?m().Z.images.forms.formsNotionBrandingTooltipPng:m().Z.images.forms.formsNotionBrandingTooltipDarkPng,alt:t.formatMessage({id:"FormShareMenu.MadeWithNotion.accessibility.label",defaultMessage:"Made with Notion"}),style:o.notionBrandingBaseImage}),(0,g.jsxs)("div",{style:o.brandingPreview,children:[(0,S().N)(o.linkIcon),(0,g.jsx)(Pe,{})]})]})}function Pe(){const e=(0,a().Fg)(),t=(0,a().yK)((e=>({watermarkButton:{marginLeft:8,color:e.regularTextColor},notionLogo:{width:14,height:14,marginLeft:6,fill:e.regularTextColor}})),[]);return(0,g.jsxs)(l().Z,{style:t.watermarkButton,children:[(0,g.jsx)(s()._H,{defaultMessage:"Made with",id:"topbar.publicPage.cta.label.madeWithNotion"}),"light"===e.mode?(0,y().h)(t.notionLogo):(0,C().N)(t.notionLogo)]})}function Ve(e){const t=(0,a().yK)((e=>({container:{display:"flex",padding:"0 12px 0 8px",height:40,borderBottom:`1px solid ${e.stroke.secondary}`}})),[]);return(0,g.jsx)("div",{style:t.container,children:(0,g.jsx)(Y().xE,{onClick:e.handleBackButtonClick,titleMessage:(0,g.jsx)(s()._H,{...Ce.embedSettingRowTitle})})})}const Ue=function(e){const{showCompactDesktopHeader:t,collectionContextStore:n}=e,m=(0,i().O7)(),p=(0,r().VK)((()=>n.collectionViewStore()),[n]),h=(0,r().VK)((()=>{const e=n.collectionViewStore();return null==e?void 0:e.getFormat().form_block_pointer}),[n]),f=(0,r().VK)((()=>{if(p&&h)return o(826955).G.createChildStore(p,h)}),[h,p]),b=(0,r().VK)((()=>!!f&&f.getIsFormPublic()),[f]),S=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center"},openFormButton:{marginLeft:6,height:28,paddingLeft:10},copyLinkButton:{height:28,width:28,borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeftWidth:0},previewIcon:{width:14,height:14}})),[]);return p&&f?(0,g.jsxs)("div",{style:S.container,children:[(0,g.jsx)(d().Z,{disableTooltip:!t,renderTooltip:()=>(0,g.jsx)(s()._H,{defaultMessage:"Preview",id:"collectionViewBlock.formEditorView.previewForm"}),render:e=>(0,g.jsxs)(l().Z,{...e,style:S.openFormButton,onClick:()=>{(0,c().j)({environment:m,event:{eventName:"preview_form",eventProperties:{form_id:f.id,is_form_public:b}}});const e=(0,u().sP)(f,!0);b?o(752127).D({url:e,environment:m}):o(497065).c4({environment:m,url:e})},children:[(0,o(94250).c)(S.previewIcon),t?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o(396439).Z,{size:6}),(0,g.jsx)(s()._H,{defaultMessage:"Preview",id:"collectionViewBlock.formEditorView.previewForm"})]})]})}),(0,g.jsx)(Ie,{formBlockStore:f,showCompactDesktopHeader:t})]}):null}},659796:(e,t,o)=>{o.d(t,{Y:()=>n});const n=(0,o(788860).vU)({copiedLinkToForm:{id:"FormActionButtons.copiedLinkToForm",defaultMessage:"Copied link to form"}})},632599:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(667294),i=()=>o(846550),r=()=>o(729201),a=()=>o(312578),s=o(785893);function l(e){let{loadingMessage:t}=e;const o=(0,i().Fg)(),l=(0,r().Z)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a().Z,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t})]})})}},755589:(e,t,o)=>{o.d(t,{m:()=>c});o(667294);var n=()=>o(968061),i=()=>o(788860),r=()=>o(231077),a=()=>o(1910),s=()=>o(45909),l=o(785893);const d=(0,i().vU)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function c(){const e=(0,i().YB)();return(0,l.jsx)(a().Z,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,s().X)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{r().openAppMenu()},icon:n().h,ariaLabel:e.formatMessage(d.menu)})}},577521:(e,t,o)=>{o.d(t,{C:()=>I,V:()=>y});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(263555),l=()=>o(788860),d=()=>o(718959),c=()=>o(247724),u=()=>o(793935),m=()=>o(291335),p=()=>o(998901),g=()=>o(725751),h=()=>o(628370),f=()=>o(1910),b=()=>o(64260),S=()=>o(654133),v=o(785893);function y(e){const t=(0,i().O7)(),o=(0,i().Fy)(),n=(0,l().YB)(),a=(0,r().Kw)(m().sidebarMouseEnteredStore),c=(0,r().VK)((()=>g().default.state.isShowingTabBar||!1),[]),p=(0,r().Kw)(d().tu),h=n.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),f=(!o.isElectronMac||!p)&&!c&&a;return(0,v.jsx)(I,{isVisible:f,icon:s().D,caption:h,onClick:()=>{u().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const C={width:16,height:16,fill:"inherit"};function I(e){const t=(0,i().Fy)(),o=(0,a().yK)((t=>({keyboardShortcut:{color:t.mediumInvertedTextColor},button:{fill:t.mediumIconColor},enterAnimation:{opacity:e.isVisible?0:1},animation:{opacity:e.isVisible?1:0}})),[e.isVisible]),r=(0,n.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...o.button,...e.style})),[e.style,o.button,t.isMobile]);return(0,v.jsx)(S().Z,{renderTooltip:()=>(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,v.jsx)(b().Z,{style:o.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?p().Placement.Right:p().Placement.Bottom,render:o=>(0,v.jsx)(h().Z,{tag:f().Z,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:r,hoveredStyle:e.hoveredStyle,iconStyle:C,mobileFeedback:t.isMobile,onClick:e.onClick,className:c().Mfh,...o})})}},302485:(e,t,o)=>{o.d(t,{F:()=>r});var n=()=>o(677559);const i=new(n().Ss)("HelpButtonContent",(async()=>await o.e(53060).then(o.bind(o,687569)))),r=(0,n().kF)(i,(e=>e.HelpButtonContent))},416277:(e,t,o)=>{o.d(t,{R7:()=>r,TG:()=>a,gM:()=>s});var n=()=>o(677559);const i=new(n().Ss)("login",(async()=>{const{default:e}=await Promise.all([o.e(62743),o.e(37358),o.e(25350),o.e(18216),o.e(72646),o.e(86595),o.e(82544),o.e(62949),o.e(54535)]).then(o.bind(o,604922)),{default:t}=await Promise.all([o.e(62743),o.e(37358),o.e(25350),o.e(18216),o.e(72646),o.e(86595),o.e(82544),o.e(62949),o.e(54535)]).then(o.bind(o,663920)),{default:n}=await Promise.all([o.e(62743),o.e(37358),o.e(25350),o.e(18216),o.e(72646),o.e(86595),o.e(82544),o.e(62949),o.e(54535)]).then(o.bind(o,735246)),{default:i}=await Promise.all([o.e(62743),o.e(37358),o.e(25350),o.e(18216),o.e(72646),o.e(86595),o.e(82544),o.e(62949),o.e(54535)]).then(o.bind(o,99389)),{default:r}=await Promise.all([o.e(62743),o.e(37358),o.e(25350),o.e(18216),o.e(72646),o.e(86595),o.e(82544),o.e(62949),o.e(54535)]).then(o.bind(o,12872));return{LoginPage:e,LoginDesktop:t,LoginMobileNative:n,FrontLoginPage:i,LoginModalContent:r}})),r=(0,n().kF)(i,(e=>e.LoginPage)),a=(0,n().kF)(i,(e=>e.FrontLoginPage)),s=(0,n().kF)(i,(e=>e.LoginModalContent))},871953:(e,t,o)=>{o.d(t,{TL:()=>u,nc:()=>c,ue:()=>d});var n=()=>o(816512),i=()=>o(934158),r=()=>o(696056),a=()=>o(989478),s=()=>o(696459),l=()=>o(826955);function d(e){const{parentStore:t,pointer:o}=e,i=(0,l().Kv)(t,o).getValue();if(i)return(0,n().LU)({table:o.table,value:i})}function c(e){const{parentStore:t,pointer:o}=e;return o.table===r().cZ?l().Qx.createChildStore(t,o):o.table===a().KJ?l().U6.createChildStore(t,o):o.table===i().y0?l().fg.createChildStore(t,o):void(0,s().t1)(o)}function u(e){return e.table===r().cZ?(0,n().ON)(e.getValue()):e.table===a().KJ?(0,n().m3)(e.getValue()):e.table===i().y0?(0,n().I4)(e.getValue()):void(0,s().t1)(e)}},244303:(e,t,o)=>{o.d(t,{a:()=>l});o(667294);var n=()=>o(816512),i=()=>o(696459),r=()=>o(634760),a=()=>o(981583),s=o(785893);function l(e){const{actor:t}=e,o={size:e.size??14,style:{marginRight:2,...e.style}};return(0,n().YU)(t)?(0,s.jsx)(r().Z,{botValue:t.asActor,...o}):(0,n().$S)(t)?(0,s.jsx)(a().Z,{userValue:t.asActor,...o}):(0,n().Iq)(t)?(0,s.jsx)(a().Z,{userValue:void 0,...o}):void(0,i().t1)(t)}},690277:(e,t,o)=>{o.d(t,{E:()=>l});var n=()=>o(142735),i=()=>o(696459),r=()=>o(239482),a=()=>o(926434),s=()=>o(876822);function l(e){let{store:t}=e;return(0,n().VK)((()=>{const e=(0,a().B)({blockId:t.id,setting:"publicAccess"});if((0,i().$K)(e))return e;const o=s().default.state.currentSpaceStore,n=(0,r().VP)(t);return n?{disabled:Boolean(n.getDisablePublicAccess()),disabledBy:"team"}:!n&&null!=o&&o.getDisablePublicAccess()?{disabled:!0,disabledBy:"space"}:{disabled:!1}}),[t])}},228772:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(142735),i=()=>o(876822);function r(){return(0,n().VK)((()=>i().default.state.currentSpaceStore),[])}},772327:(e,t,o)=>{o.d(t,{_:()=>p});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(788860),l=()=>o(921981),d=()=>o(842574),c=()=>o(416277),u=()=>o(520849),m=o(785893);function p(e){let{loginModalStore:t,loginStore:o,title:a,description:s,isSignup:d,disableLoginLink:u,redirectURL:p,className:b,onDismiss:S,trustedDomain:v}=e;const y=(0,i().O7)(),C=(0,r().VK)((()=>t.state.open),[t]),I=(0,n.useId)(),x=(0,n.useId)(),_={loginStore:o,title:a,description:s,isSignup:d,redirectURL:p,disableLoginLink:u,titleAriaId:I,descriptionAriaId:x,trustedDomain:v};return(0,m.jsx)(l().c,{ariaLabelledBy:I,ariaDescribedBy:x,isOpen:C,onDismiss:()=>{f({loginModalStore:t,loginStore:o,onDismiss:S})},areaConstraint:{width:{type:"fixed",length:480},height:{type:"unlimited",scroll:"allow"}},deprecatedCompatibilityOverrides:{tabletsUsePhoneDisplayMode:!0},render:()=>(0,m.jsx)(g,{children:(0,m.jsxs)("div",{className:b,children:[!y.device.isMobile&&(0,m.jsx)(h,{loginModalStore:t,loginStore:o,onDismiss:S}),(0,m.jsx)(c().gM,{..._})]})})})}function g(e){let{children:t}=e;return(0,i().O7)().device.isMobile?(0,m.jsx)(d().T,{type:u().Z.Y,children:t}):t}function h(e){let{loginModalStore:t,loginStore:o,onDismiss:n}=e;const i=(0,a().Fg)();return(0,m.jsx)("div",{style:{fontSize:14,color:i.mediumTextColor,position:"absolute",right:0,marginTop:16,marginRight:16,cursor:"pointer",zIndex:1},onClick:()=>{f({loginModalStore:t,loginStore:o,onDismiss:n})},children:(0,m.jsx)(s()._H,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function f(e){const{loginModalStore:t,loginStore:o,onDismiss:n}=e;o.reset(),t.setState({open:!1}),n&&n()}},355435:(e,t,o)=>{o.d(t,{E7:()=>r,Ju:()=>i,cb:()=>s,iv:()=>a,tL:()=>n});const n=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},420406:(e,t,o)=>{o.d(t,{$:()=>n});function n(e,t){t.route.name;return!1}},341643:(e,t,o)=>{o.d(t,{DW:()=>S,IG:()=>h,J4:()=>b,hZ:()=>f,q9:()=>g,qq:()=>v,s4:()=>p});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(801812),s=()=>o(677559),l=()=>o(690664),d=()=>o(105649),c=()=>o(291335),u=()=>o(590972),m=()=>o(420406);const p=new(s().Ss)("PerformanceToolbar",(()=>Promise.all([o.e(62743),o.e(5242),o.e(4014),o.e(20919),o.e(93843),o.e(66283),o.e(54194)]).then(o.bind(o,674207)))),g=(0,s().kF)(p,(e=>e.PerformanceToolbar)),h=(0,s().kF)(p,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,i().O7)();return(0,r().VK)((()=>(0,m().$)(e,e.RouterStore.state)),[e])}function b(){const e=(0,i().O7)(),t=y("PerformanceToolbarStore"),o=y("isPerformanceToolbarVisible");return(0,r().VK)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function S(){const e=y("PerformanceToolbarStore");return(0,r().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function v(){const e=(0,i().O7)(),t=y("createPerformanceToolbarMouseListeners"),o=y("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:m,secondarySidebarWidth:p,updateSidebarExpanded:g,updateSidebarWidth:h}=(0,r().VK)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,m,p,g,h)}),[t,e,o,a,s,m,p,g,h])}function y(e){const t=f(),[{value:o}]=(0,a().r5)((()=>t?p.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},662062:(e,t,o)=>{o.d(t,{q:()=>i});const n={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1};function i(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...n,...t}}},138390:(e,t,o)=>{o.d(t,{o:()=>u});o(670560),o(667294);var n=()=>o(505365),i=()=>o(934935),r=()=>o(330125),a=()=>o(828042),s=()=>o(788860),l=()=>o(91502),d=()=>o(524434),c=o(785893);function u(){const e=(0,l().QI)(),t=d().KR.isFullPageAssistantInStartOptions(),o=[];return e&&o.push({key:"personal_home",label:(0,c.jsx)(s()._H,{id:"pageOnAppStoreSetting.home.label",defaultMessage:"Home"}),renderIcon:e=>(0,r().z)({width:20,height:20,...e})}),o.push({key:"last_visited_page",label:(0,c.jsx)(s()._H,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"}),renderIcon:e=>(0,n().Y)({width:20,height:20,...e})},{key:"first_page",label:(0,c.jsx)(s()._H,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"}),renderIcon:e=>(0,i().S)({width:20,height:20,padding:2,...e})}),t&&o.push({key:"chat",label:(0,c.jsx)(s()._H,{id:"pageOnAppStoreSetting.chat.label",defaultMessage:"Notion AI"}),renderIcon:e=>(0,a().t)({width:20,height:20,...e})}),o}},714022:(e,t,o)=>{o.d(t,{Tm:()=>B,xE:()=>D,zC:()=>P});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(714230),l=()=>o(647439),d=()=>o(573369),c=()=>o(617256),u=()=>o(205248),m=()=>o(956057),p=()=>o(201565),g=()=>o(788860),h=()=>o(696459),f=()=>o(707513),b=()=>o(152862),S=()=>o(643051),v=()=>o(1910),y=()=>o(67961),C=()=>o(539245),I=()=>o(247724),x=()=>o(641506),_=()=>o(314160),w=()=>o(998470),M=()=>o(836756),k=()=>o(779733),T=()=>o(681832),j=o(785893);const A=(0,g().vU)({seo:{defaultMessage:"Search engine indexing",id:"publishSiteSettings.SEO.title"},embed:{defaultMessage:"Embed this page",id:"embedSiteSettings.title"}});function B(e){let{inviteTargetsStore:t,mostPermissivePublicItem:o}=e;const{display:n,source:i}=(0,r().VK)((()=>{const{display:e}=T().default.state;if(e===T().wV.Invite){const{source:t}=T().default.state;return{display:e,source:t}}return{display:e,source:void 0}}),[]);switch(n){case T().wV.MainShareMenu:case T().wV.Publish:return(0,j.jsx)(P,{mostPermissivePublicItem:o});case T().wV.Invite:if("notion"===i)return(0,j.jsx)(V,{inviteTargetsStore:t});if("slack"===i||"google"===i)return(0,j.jsx)(U,{source:i});throw(0,h().t1)(i);default:(0,h().t1)(n)}}const F=[T().XF.Share,T().XF.Publish];function P(e){let{mostPermissivePublicItem:t}=e;const o=(0,i().O7)(),s=n.useRef(null),{isMobile:l}=o.device,c=(0,r().VK)((()=>(0,p().L)(t.permissionItem)),[t.permissionItem]);(0,n.useEffect)((()=>{const e=T().default.state,t=e.tab===T().XF.Share&&e.display===T().wV.MainShareMenu?e.source:void 0;c&&t!==T().Xd.InviteBackButton&&(T().default.setState({tab:T().XF.Publish,display:T().wV.Publish,sessionId:m().Il(),isInitialized:!0}),(0,_().Jh)(o,{source:"share_button"}))}),[o,c]);const u=(0,r().VK)((()=>T().default.state.tab),[]),h=(0,r().VK)((()=>(0,k().wZ)()),[]),S=(0,a().yK)((e=>({tabStyle:{color:e.lightTextColor,...l&&{width:"50%",textAlign:"center"}},selectedTabStyle:h?{}:{fontWeight:f().Ue.medium},tabTitleStyle:{color:"inherit",...h&&{fontSize:(0,x().yv)(o,"UIRegular"),fontWeight:f().Ue.medium}},style:l?{marginBottom:8,justifyContent:"space-between"}:{marginBottom:h?16:14,paddingLeft:h?16:8},tabBorderStyle:h?{left:0,right:0}:{}})),[o,l,h]),v=(0,a().yK)((e=>({tabStyle:{width:"50%",textAlign:"center",borderRadius:10,color:e.text.secondary,fontWeight:f().Ue.regular,paddingTop:2,paddingBottom:2},tabBorderStyle:{borderBottom:"none"},selectedTabStyle:{borderRadius:8,background:"dark"===e.mode?e.tint.regular:e.surface.elevated},tabTitleStyle:{color:"inherit",fontSize:(0,x().yv)(o,"UIRegular"),fontWeight:f().Ue.regular},selectedTabTitleStyle:{fontWeight:f().Ue.medium},style:{justifyContent:"space-between",padding:2,background:e.tint.regular,borderRadius:10,marginBottom:0,height:34}})),[o]),y=(0,a().yK)((e=>({publishTabContainer:{display:"flex",alignItems:"center"},publishIcon:{height:16,width:16,marginLeft:4,opacity:u===T().XF.Publish?1:.5},tabBarContainer:{paddingLeft:20,paddingRight:20,paddingTop:8,paddingBottom:16,backgroundColor:e.surface.page}})),[u]),A=(0,n.useCallback)((e=>{const t=F[e];t!==u&&(b().Y(o,{tab:t}),t===T().XF.Share&&T().default.setState({...T().default.state,display:T().wV.MainShareMenu,tab:T().XF.Share,source:T().Xd.ShareTab}),t===T().XF.Publish&&T().default.setState({...T().default.state,display:T().wV.Publish,tab:T().XF.Publish}))}),[u,o]),B=[(0,j.jsx)(n.Fragment,{children:l&&!h?(0,j.jsx)(g()._H,{defaultMessage:"Permissions",id:"shareMenu.permissionsTab.title"},"permissions"):(0,j.jsx)(g()._H,{defaultMessage:"Share",id:"shareMenu.shareTab.title"},"share")},"title"),(0,j.jsxs)("div",{ref:s,style:y.publishTabContainer,className:I().UBk,children:[(0,j.jsx)(g()._H,{defaultMessage:"Publish",id:"shareMenu.publishTab.title"},"publish"),c&&(0,d().v)(y.publishIcon)]},"publishTab")],P=(0,r().VK)((()=>M().Z.state.siteSettingContentType),[]);return"seo"===P?(0,j.jsx)(E,{}):"embed"===P?(0,j.jsx)(Z,{handleBackButtonClick:()=>{w().pn("initial")}}):l&&h?(0,j.jsx)("div",{style:y.tabBarContainer,children:(0,j.jsx)(C().ZP,{...v,tabs:B,selectedIndex:F.indexOf(u),onChange:A,hideTabBorder:!0})}):(0,j.jsx)(C().ZP,{...S,tabs:B,selectedIndex:F.indexOf(u),onChange:A})}function V(e){let{inviteTargetsStore:t}=e;const o=(0,r().VK)((()=>(0,k().wZ)()),[]),i=(0,a().yK)((e=>({container:o?{display:"flex",paddingLeft:12,paddingRight:12,marginBottom:16,height:40,boxShadow:`inset 0 -1px 0 ${e.regularDividerColor}`}:{display:"flex",margin:"0 12px 6px",height:48}})),[o]),s=(0,n.useCallback)((()=>{t.reset(),T().default.setState({...T().default.state,display:T().wV.MainShareMenu,tab:T().XF.Share,source:T().Xd.InviteBackButton})}),[t]);return(0,j.jsx)("div",{style:i.container,children:(0,j.jsx)(D,{onClick:s,titleMessage:o?(0,j.jsx)(g()._H,{id:"shareMenu.sendInvite.labelV2",defaultMessage:"Invite"}):(0,j.jsx)(g()._H,{id:"shareMenu.sendInvite.label",defaultMessage:"Send invite"})})})}function U(e){const{source:t}=e,o=(0,g().YB)(),i=(0,a().yK)((()=>({container:{display:"flex",justifyContent:"space-between",margin:"0 12px",height:48,alignItems:"center"},titleLabel:{display:"flex",fontSize:12,alignItems:"center",fontWeight:f().Ue.semibold}})),[]),r=(0,n.useCallback)((()=>{T().default.setState({...T().default.state,tab:T().XF.Share,display:T().wV.Invite,source:T().T5.Notion,focus:T().Sw.Search,emailMessage:""})}),[]);return(0,j.jsxs)("div",{style:i.container,children:[(0,j.jsx)(y().Z,{style:i.titleLabel,children:(0,j.jsx)(g()._H,{id:"shareMenu.addFromSlack.label",defaultMessage:"Add people from {integrationNameWithLogo}",values:{integrationNameWithLogo:(0,j.jsx)(L,{source:t})}})}),(0,j.jsx)(v().Z,{ariaLabel:o.formatMessage({id:"shareMenuHeader.goBackToInviteFromNotionMenu.iconButton",defaultMessage:"Close external integration and go back to the main invite flow."}),icon:u().D,style:{borderRadius:"100%"},onClick:r})]})}function L(e){let{source:t}=e;const o=(0,a().yK)((()=>({imageStyle:{marginLeft:4,marginRight:4}})),[]);return t===T().T5.Slack?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(S().Z,{type:"image_url",imageURL:s().Z.images.externalIntegrations.slackIconPng,size:18,imageStyle:o.imageStyle}),(0,j.jsx)(g()._H,{defaultMessage:"Slack",id:"shareMenu.slackIntegrationName.label"})]}):t===T().T5.Google?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(S().Z,{type:"image_url",imageURL:s().Z.images.externalIntegrations.googleGIconPng,size:18,imageStyle:o.imageStyle}),(0,j.jsx)(g()._H,{defaultMessage:"Google",id:"shareMenu.googleContactsIntegrationName.label"})]}):void(0,h().t1)(t)}function D(e){const{onClick:t,titleMessage:o}=e,n=(0,i().O7)(),s=(0,r().VK)((()=>(0,k().wZ)()),[]),d=(0,g().YB)(),u=(0,a().yK)((()=>({topContainer:{display:"flex",alignItems:"center",width:"max-content"},backButtonPressedStyle:{backgroundColor:"transparent"},iconButton:{marginRight:6,height:24,width:24},arrowIcon:{...s?{height:20,width:20}:{height:16,width:16},strokeWidth:f().Ue.semibold},sendInviteLabel:{fontWeight:f().Ue.medium,...s&&{fontSize:(0,x().yv)(n,"UIRegular")}}})),[n,s]);return(0,j.jsxs)("div",{style:u.topContainer,children:[(0,j.jsx)(v().Z,{icon:s?c().k:l().W,iconStyle:u.arrowIcon,style:u.iconButton,onClick:t,ariaLabel:d.formatMessage({id:"shareMenu.backButton.iconButton",defaultMessage:"Go back to main share menu."})}),(0,j.jsx)(y().Z,{style:u.sendInviteLabel,children:o})]})}function E(){const e=(0,a().yK)((e=>({container:{display:"flex",padding:"0 12px 0 8px",height:40,borderBottom:`1px solid ${e.stroke.secondary}`}})),[]),t=(0,n.useCallback)((()=>{w().pn("initial")}),[]);return(0,j.jsx)("div",{style:e.container,children:(0,j.jsx)(D,{onClick:t,titleMessage:(0,j.jsx)(g()._H,{...A.seo})})})}function Z(e){const t=(0,a().yK)((e=>({container:{display:"flex",padding:"0 12px 0 8px",height:40,borderBottom:`1px solid ${e.stroke.secondary}`}})),[]);return(0,j.jsx)("div",{style:t.container,children:(0,j.jsx)(D,{onClick:e.handleBackButtonClick,titleMessage:(0,j.jsx)(g()._H,{...A.embed})})})}},591707:(e,t,o)=>{o.d(t,{C:()=>r,E:()=>i});var n=()=>o(529048);const i=new(n().Z),r=new(n().Z)},314160:(e,t,o)=>{o.d(t,{Jh:()=>i,Mo:()=>a,O$:()=>l,_F:()=>r,aC:()=>s,mm:()=>d});var n=()=>o(594546);function i(e,t){(0,n().j)({environment:e,event:{eventName:"open_publish_modal",eventProperties:t}})}function r(e,t){(0,n().j)({environment:e,event:{eventName:"change_domain",eventProperties:t}})}function a(e,t){(0,n().j)({environment:e,event:{eventName:"update_seo_settings",eventProperties:t}})}function s(e,t){(0,n().j)({environment:e,event:{eventName:"site_set_link_expiration",eventProperties:t}})}function l(e,t){(0,n().j)({environment:e,event:{eventName:"page_unpublish",eventProperties:t}})}function d(e,t){(0,n().j)({environment:e,event:{eventName:"page_publish",eventProperties:t}})}},998470:(e,t,o)=>{o.d(t,{AB:()=>B,Au:()=>R,C$:()=>Q,DR:()=>T,Fo:()=>w,H2:()=>Z,Hl:()=>O,KD:()=>z,Q6:()=>j,QP:()=>U,YU:()=>V,Y_:()=>P,c7:()=>E,cy:()=>G,dM:()=>k,dU:()=>A,f$:()=>L,gx:()=>H,pn:()=>F,t:()=>D,wt:()=>q,xz:()=>K,y_:()=>N,yr:()=>W});o(821057),o(670560),o(267602),o(653476),o(241792),o(667294);var n=()=>o(396136),i=()=>o(81954),r=()=>o(928833),a=()=>o(899133),s=()=>o(788860),l=()=>o(513670),d=()=>o(342792),c=()=>o(824462),u=()=>o(636340),m=()=>o(752127),p=()=>o(102182),g=()=>o(269299),h=()=>o(205228),f=()=>o(487270),b=()=>o(314169),S=()=>o(663132),v=()=>o(479875),y=()=>o(836756),C=()=>o(759160),I=()=>o(314160),x=()=>o(566245),_=o(785893);function w(e){const{environment:t,store:o,type:n,header:a,domainId:s}=e,l=o.getSiteStore();if(l)return l.id;let d=s;var c;d||(d=null===(c=S().VA(o.getSpaceStore()))||void 0===c?void 0:c.id);const m=(0,f().$x)({environment:t,table:r().Gs,spaceId:(0,i().J)(o.getSpaceId())});g().createAndCommit({userAction:"publishSite.create",environment:t,canUndo:!0,perform:e=>{const i=u().Ue({environment:t,table:m.table,args:{id:m.id,type:n,spaceId:m.spaceId,blockId:o.id,domainId:d,currentUserId:t.currentUser.id,header:a??{}},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e});return u().sW({store:o.getFormatStore(),data:{site_id:i.id},transaction:e}),i.id}})}function M(e){const{environment:t,siteRootBlockStore:o,domainId:n}=e;let i=o.getSiteStore();if(i||(w({environment:t,type:"site",store:o,domainId:n}),i=o.getSiteStore()),i)return i}function k(e){const{environment:t,domainId:o,resetWatermark:n}=e,i=M(e);i&&i.isDefined()&&(g().createAndCommit({userAction:"publishSite.updatePublicDomain",environment:t,canUndo:!0,perform:e=>{i.getDomainId()!==o&&g().applyOperation({transaction:e,store:i,operation:i.getModel().ops.updatePublicDomainId({domainId:o,currentUserId:t.currentUser.id})})}}),g().createAndCommit({userAction:"publishSite.resetWatermark",environment:t,canUndo:!0,perform:e=>{if(n){const o=i.getHeader();g().applyOperation({transaction:e,store:i,operation:i.getModel().ops.updateHeader({header:{...o,hideWatermark:!1},currentUserId:t.currentUser.id})})}}}),p().oV({label:(0,_.jsx)(s()._H,{id:"publishSiteSettings.publicDomain.confirmation",defaultMessage:"Successfully updated domain for all pages within this site"})}))}function T(e){const{environment:t,siteRootBlockStore:o,isSearchEngineIndexingEnabled:n}=e,r=M(e);if(!r)return;"form"!==r.getType()&&g().createAndCommit({userAction:"publishSite.updateSeoEnabled",environment:t,canUndo:!0,perform:e=>{r&&r.isDefined()&&n!==r.isSearchEngineIndexingEnabled()&&(g().applyOperation({transaction:e,store:r,operation:r.getModel().ops.updateIsSearchEngineIndexingEnabled({isSearchEngineIndexingEnabled:n,currentUserId:t.currentUser.id})}),n&&e.postSubmitCallbacks.push((async e=>{e||await c().callApi({eventName:"enqueueScanContentTask",environment:t,data:{pagePointer:{id:o.id,table:"block",spaceId:(0,i().J)(o.pointer.spaceId)}}})})))}})}function j(e){const{environment:t,store:o,seoTitle:n,seoDescription:i}=e;g().createAndCommit({userAction:"publishSite.create",environment:t,canUndo:!0,perform:e=>{const r=o.getFormat().seo_title,a=o.getFormat().seo_description;r===n&&a===i||(u().sW({store:o.getFormatStore(),data:{seo_title:n,seo_description:i},transaction:e}),(0,I().Mo)(t,{target_block_id:o.id,new_title:n??null,new_description:i??null}),p().oV({label:(0,_.jsx)(s()._H,{id:"siteSettingsEditor.publishSeoChanges.confirmation",defaultMessage:"Successfully updated the SEO settings"})}))}})}function A(e){C().Z.setState({...C().Z.state,settingOpen:e})}function B(){C().Z.setState({...C().Z.state,settingOpen:"initial"})}function F(e){y().Z.setState({...y().Z.state,siteSettingContentType:e})}function P(e){var t,o,n;const{siteRootBlockStore:i,permissionItem:r,from:a,sudoModeStore:s}=e,l=i.getSiteStore(),d=null==l?void 0:l.getHeader(),c=(null==d||null===(t=d.customItems)||void 0===t?void 0:t.map((e=>e.blockId)))||[];C().Z.setState({settingOpen:"initial",permissionItem:r,from:a,sudoModeStore:s,faviconUrl:(null==l?void 0:l.getFaviconUrl())||null,previewImageUrl:(null==l?void 0:l.getPreviewImageUrl())||null,hideBreadcrumbs:null==d?void 0:d.hideBreadcrumbs,hideSearch:null==d?void 0:d.hideSearch,hideWatermark:null==d?void 0:d.hideWatermark,enableDuplicateAsTemplate:r.allow_duplicate,customHeaderBlockIds:c,googleAnalyticsId:null==l?void 0:l.getGoogleAnalyticsId(),theme:null==l||null===(o=l.getSettings())||void 0===o?void 0:o.theme,enableQna:null==l||null===(n=l.getSettings())||void 0===n?void 0:n.enableQna})}async function V(e){var t;const{environment:o,store:i,siteRootBlockStore:r}=e,a=M({environment:o,siteRootBlockStore:r}),u=null==a?void 0:a.getType();if(!a||"form"===u)return;const m=C().Z.getState();let h=!1;const f={};let v;m.enableQna&&(v=await async function(e){var t,o,n,i;const{environment:r,siteStore:a}=e,s=null===(t=a.getSettings())||void 0===t?void 0:t.siteUserId;if(s)return s;if(!((null===(o=a.getDomainStore())||void 0===o?void 0:o.getDomainName())??(null===(n=S().VA(a.getSpaceStore()))||void 0===n?void 0:n.domain_name)))throw new Error("no domain on site");const l=S().Co({spaceStore:a.getSpaceStore(),domainId:null===(i=a.getDomainStore())||void 0===i?void 0:i.id}).split(":")[0],u=`${(0,d().XR)(a.id)}@${l}`,m=await c().callApi({eventName:"createEmailUser",environment:r,data:{email:u}});if("failed"===m.type)throw new Error("failed to create qna user");return m.data.userId}({environment:o,siteStore:a})),g().createAndCommit({userAction:"publishSite.updateSiteSettingsInEditor",environment:o,canUndo:!0,perform:e=>{if(a&&a.isDefined()){var t,n;(a.getFaviconUrl()||null)!==m.faviconUrl&&(g().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateFaviconUrl({faviconUrl:m.faviconUrl,currentUserId:o.currentUser.id})}),h=!0,f.favicon=m.faviconUrl);(a.getPreviewImageUrl()||null)!==m.previewImageUrl&&(g().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updatePreviewImageUrl({previewImageUrl:m.previewImageUrl,currentUserId:o.currentUser.id})}),h=!0,f.preview_image=m.previewImageUrl);const i=a.getHeader();let r=i;const s=function(e,t){const o=e.map((e=>({type:"block",blockId:e})));if(!t&&0===o.length)return;if(t&&(0,l().Xy)(o,t))return;return o}(m.customHeaderBlockIds,null==i?void 0:i.customItems);s&&(r={...r,customItems:s},f.custom_headers=s.map((e=>e.blockId))),(null==i?void 0:i.hideBreadcrumbs)!==m.hideBreadcrumbs&&(r={...r,hideBreadcrumbs:m.hideBreadcrumbs},f.hide_breadcrumbs=m.hideBreadcrumbs),(null==i?void 0:i.hideSearch)!==m.hideSearch&&(r={...r,hideSearch:m.hideSearch},f.hide_search=m.hideSearch),(null==i?void 0:i.hideWatermark)!==m.hideWatermark&&(r={...r,hideWatermark:m.hideWatermark},f.hide_watermark=m.hideWatermark),r&&i!==r&&(g().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateHeader({header:r,currentUserId:o.currentUser.id})}),h=!0);a.getGoogleAnalyticsId()!==m.googleAnalyticsId&&(g().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateGoogleAnalyticsId({googleAnalyticsId:m.googleAnalyticsId,currentUserId:o.currentUser.id})}),h=!0,f.google_analytics_id=m.googleAnalyticsId);(null===(t=a.getSettings())||void 0===t?void 0:t.theme)!==m.theme&&(g().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateTheme({theme:m.theme,currentUserId:o.currentUser.id})}),h=!0,f.theme=m.theme);(null===(n=a.getSettings())||void 0===n?void 0:n.enableQna)!==m.enableQna&&(m.enableQna?v&&g().applyOperation({transaction:e,store:a,operation:{pointer:a.pointer,command:"update",path:["settings"],args:{enableQna:m.enableQna,siteUserId:v}}}):g().applyOperation({transaction:e,store:a,operation:{pointer:a.pointer,command:"update",path:["settings"],args:{enableQna:m.enableQna}}}),h=!0)}}});if((null===(t=m.permissionItem)||void 0===t?void 0:t.allow_duplicate)!==m.enableDuplicateAsTemplate&&m.permissionItem&&m.from){const e=m.from.table===n().iU?m.from.blockId:m.from.teamId;(0,b().iK)({oldPermissionItem:m.permissionItem,newPermissionItem:{...m.permissionItem,allow_duplicate:m.enableDuplicateAsTemplate},wasInherited:e!==i.id,environment:o,store:i,sudoModeStore:m.sudoModeStore,location:"published_site_settings"}),h=!0,f.enable_duplicate_as_template=m.enableDuplicateAsTemplate}h&&((0,x().u6)(o,{settings_changed:f}),p().oV({label:(0,_.jsx)(s()._H,{id:"siteSettingsEditor.publishChanges.confirmation",defaultMessage:"Changes published"})}))}function U(e){C().Z.setState({...C().Z.state,faviconUrl:e})}function L(e){C().Z.setState({...C().Z.state,previewImageUrl:e})}function D(e){C().Z.setState({...C().Z.state,hideBreadcrumbs:e})}function E(e){C().Z.setState({...C().Z.state,hideSearch:e})}function Z(e){C().Z.setState({...C().Z.state,hideWatermark:e})}function N(e){C().Z.setState({...C().Z.state,enableDuplicateAsTemplate:e})}function O(e){const t=C().Z.state.customHeaderBlockIds.concat([e]);C().Z.setState({...C().Z.state,customHeaderBlockIds:t})}function R(e){const t=C().Z.state.customHeaderBlockIds.filter((t=>t!==e));C().Z.setState({...C().Z.state,customHeaderBlockIds:t})}function H(e){C().Z.setState({...C().Z.state,googleAnalyticsId:e})}function K(e){C().Z.setState({...C().Z.state,theme:e})}async function W(e){const{environment:t,spaceStore:o,query:n,siteRootBlockId:i}=e;if(!o)return;const r=await c().callApi({eventName:"searchPagesInSite",environment:t,data:{query:n,spaceId:o.id,filters:a().u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:!0,editedBy:[],ancestors:[i],inTeams:[]}),sort:{field:"relevance"},limit:10}});return"failed"!==r.type?r.data:void 0}async function Q(e){const{environment:t,blockStore:o,slug:n}=e,i=await c().callApi({eventName:"updatePublicPageSlug",environment:t,data:{spaceId:o.getSpaceId(),blockId:o.id,slug:n,clientVersion:h().default.version}});if("success"!==i.type)return{error:i};p().oV({label:(0,_.jsx)(s()._H,{id:"customSlugInput.updateSuccess.toast",defaultMessage:"Successfully updated URL for this page"})})}function z(e){C().Z.setState({...C().Z.state,enableQna:e})}function q(e){const{environment:t,store:o,pageVisitSource:n}=e,i=v().$({store:o,pageVisitSource:n});m().D({environment:t,url:i})}function G(e){const{environment:t,siteStore:o,embedSettings:n}=e;g().createAndCommit({userAction:"embedSite.updateEmbedSettings",environment:t,canUndo:!0,perform:e=>{u().sW({store:o.getSettingsStore(),data:{embedSettings:n},transaction:e})}})}},566245:(e,t,o)=>{o.d(t,{Cx:()=>a,g2:()=>i,u6:()=>r});var n=()=>o(594546);function i(e,t){(0,n().j)({environment:e,event:{eventName:"open_customize_site",eventProperties:t}})}function r(e,t){(0,n().j)({environment:e,event:{eventName:"update_site_customization_settings",eventProperties:t}})}function a(e){(0,n().j)({environment:e,event:{eventName:"close_customize_site",eventProperties:{}}})}},584006:(e,t,o)=>{o.d(t,{U:()=>d});o(667294);var n=()=>o(846550),i=()=>o(265640),r=()=>o(788860),a=()=>o(67961),s=o(785893);function l(e){const{title:t,icon:o,iconStyle:i,disabled:l}=e,d=(0,n().yK)((e=>({container:{display:"flex",alignItems:"center",gap:6},icon:{height:16,width:16,fill:e.icon.secondary,...i},text:{color:l?e.text.secondary:void 0}})),[i,l]);return(0,s.jsxs)("div",{style:d.container,children:[o&&o(d.icon),(0,s.jsx)(a().Z,{style:d.text,children:(0,s.jsx)(r()._H,{...t})})]})}function d(e){const{title:t,icon:o,iconStyle:r,right:a,disabled:d,onClick:c,style:u,badge:m}=e,p=(0,n().yK)((()=>({container:{minHeight:32,paddingLeft:8,paddingRight:8,width:"100%",paddingTop:2,paddingBottom:2,...u},titleContainer:{display:"flex",flex:1}})),[u]);return(0,s.jsxs)(i().D,{disabled:d,onClick:c,style:p.container,children:[(0,s.jsxs)("div",{style:p.titleContainer,children:[(0,s.jsx)(l,{title:t,icon:o,iconStyle:r,disabled:d}),m]}),a]})}},689653:(e,t,o)=>{o.d(t,{O:()=>T});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(926291),l=()=>o(7932),d=()=>o(788860),c=()=>o(707513),u=()=>o(959137),m=()=>o(212493),p=()=>o(291198),g=()=>o(661297),h=()=>o(471645),f=()=>o(654133),b=()=>o(627990),S=()=>o(594546),v=()=>o(527278),y=()=>o(998901),C=()=>o(998470),I=()=>o(479875),x=()=>o(772084),_=()=>o(591917),w=()=>o(584006),M=o(785893);const k=(0,d().vU)({showTitle:{id:"embedSettingsContent.showPageTitle.toggle",defaultMessage:"Show page title"},showFormTitle:{id:"embedSettingsContent.showFormTitle.toggle",defaultMessage:"Show form title"},showTitleTooltip:{id:"embedSettingsContent.showTitleTooltip",defaultMessage:"Show page title & icon in the embedded view"}});function T(e){const t=(0,i().O7)(),{currentBlockStore:o}=e,T=(0,r().VK)((()=>{var e;if(o)return null===(e=(0,x().gR)(o))||void 0===e?void 0:e.getSiteStore()}),[o]),j=(0,r().VK)((()=>{var e;return null==T||null===(e=T.getSettings())||void 0===e?void 0:e.embedSettings}),[T]),A=(0,r().VK)((()=>o?(0,I().$)({store:o,embedded:!0,pageVisitSource:void 0}):""),[o]),B=(0,r().VK)((()=>A?`\n\t\t\t\t<iframe src="${A}"\n\t\t\t\t\twidth="100%"\n\t\t\t\t\theight="600"\n\t\t\t\t\tframeborder="0"\n\t\t\t\t\tallowfullscreen\n\t\t\t\t/>\n\t\t\t\t`.trim().replace(/\s+/g," "):""),[A]),F=n.useCallback((async()=>{const e=await u().F.clipboardActions.load();e.copyString({environment:t,stringValue:B,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),(0,S().j)({environment:t,event:{eventName:"copy_embed_code",eventProperties:{target_block_id:o.id}}})}),[B,t,o.id]),P=n.useCallback((()=>{T&&(0,C().cy)({environment:t,siteStore:T,embedSettings:{hideTitle:!(null!=j&&j.hideTitle)}})}),[T,null==j?void 0:j.hideTitle,t]),V=(0,r().VK)((()=>o.isFormBlock()?k.showFormTitle:k.showTitle),[o]),U=(0,a().yK)((e=>({title:{fontWeight:c().Ue.bold,fontSize:25,marginTop:20},copyIcon:{width:16,height:16,marginLeft:0,marginRight:6},primaryButton:{height:32,marginLeft:"auto",marginRight:0,width:"fit-content"},titleIcon:{width:16,height:16},container:{paddingLeft:8,paddingRight:8}})),[]);return(0,M.jsxs)(m().jX,{direction:"column",gap:14,style:U.container,children:[(0,M.jsx)(f().Z,{renderTooltip:()=>v().Z.formatMessage(k.showTitleTooltip),disableTooltip:!1,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(w().U,{title:V,icon:l().V,iconStyle:U.titleIcon,right:(0,M.jsx)(h().Z,{on:!Boolean(null==j?void 0:j.hideTitle),onClick:P}),disabled:!1,onClick:P,style:{marginBottom:-6}})}),placement:y().Placement.Bottom,alignment:b().v2.Center,textWrap:!0,style:{maxWidth:_().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,M.jsx)(p().Z,{disabled:!0,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,autosizeMinHeight:50,showClearButton:!1,readOnly:!0,value:B,textareaElementAttributes:{cols:50}}),(0,M.jsx)(g().Z,{onClick:F,style:U.primaryButton,icon:e=>(0,s().W)({...e,...U.copyIcon}),children:(0,M.jsx)(d()._H,{id:"embedSettingsContent.copyEmbedCode",defaultMessage:"Copy code"})})]})}},787093:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(219727),i=()=>o(142735);function r(){const e=(0,n().O7)();return(0,i().VK)((()=>e.WindowSizeStore.getSafePaddingLeftCSS(8)),[e])}},759160:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{settingOpen:"initial",permissionItem:void 0,from:void 0,sudoModeStore:void 0,location:"",faviconUrl:null,previewImageUrl:null,hideBreadcrumbs:!1,hideSearch:!1,hideWatermark:!1,enableDuplicateAsTemplate:!1,customHeaderBlockIds:[],googleAnalyticsId:void 0,theme:void 0,enableQna:!1}}}const i=new n},808282:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{openTooltip:void 0}}}const i=new n},663773:(e,t,o)=>{o.d(t,{Cv:()=>l,aJ:()=>d,kw:()=>c,zX:()=>u});var n=()=>o(219727),i=()=>o(142735),r=()=>o(799891),a=()=>o(629719),s=()=>o(515323);function l(e){let{spaceId:t}=e;const o=(0,n().O7)();return(0,i().VK)((()=>{if(t)return s().U.getData(o,{spaceId:t})}),[o,t])}function d(e){if("admin"===(null==e?void 0:e.type))return e}function c(e,t,o){if(!t)return 0;const n=(0,a().nW)({spaceId:e,logFunction:r().log.bind(r()),subscriptionState:t});return n?Math.max(n,o):0}function u(e){var t;const o=null===(t=(0,a().a7)(e,"plan"))||void 0===t?void 0:t.price;if(!o)return;const n=o.unitAmount,i="year"===o.billingInterval?12:1;return{amount:n.amount/i,currencyCode:n.currencyCode}}},595976:(e,t,o)=>{o.d(t,{p:()=>l});var n=()=>o(219727),i=()=>o(142735),r=()=>o(616433),a=()=>o(515323),s=()=>o(663773);function l(e){let{spaceId:t}=e;const o=(0,n().O7)(),l=(0,r().J)();return(0,i().VK)((()=>{if(!t||!l)return;const e=a().U.getData(o,{spaceId:t});return(0,s().aJ)(e)}),[o,t,l],{useDeepEqual:!0})}},548919:(e,t,o)=>{o.d(t,{D:()=>r,Qk:()=>s,we:()=>a});var n=()=>o(873463),i=()=>o(914575);function r(e){i().Z.setState({open:!0,...e})}function a(){i().Z.setState({open:!1})}function s(e){n().Z.setState({open:!0,...e})}},701814:(e,t,o)=>{o.d(t,{z:()=>S});o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),a=()=>o(677200),s=()=>o(788860),l=()=>o(568017),d=()=>o(154186),c=()=>o(603692),u=()=>o(661641),m=()=>o(654133),p=()=>o(345918),g=()=>o(228772),h=()=>o(998901),f=()=>o(697623),b=o(785893);function S(e){let{onClick:t,showIcon:o=!0}=e;const r=y(o),a=(0,n().O7)(),l=(0,g().r)(),c=(0,i().VK)((()=>l&&(0,p().rn)(a,l)),[a,l]),S=(0,i().VK)((()=>(0,f().zt)()),[]);return void 0===t?(0,b.jsx)("div",{style:{...r.badge,cursor:"default"},children:(0,b.jsx)(v,{showIcon:o})}):(0,b.jsx)(m().Z,{placement:h().Placement.Bottom,style:r.tooltip,render:e=>(0,b.jsx)(d().Z,{onClick:t,style:{...r.badge,cursor:"pointer"},hoveredStyle:r.badgeHover,pressedStyle:r.badgePressed,...e,children:(0,b.jsx)(v,{showIcon:o})}),renderTooltip:()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u().q,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:(0,b.jsx)(s()._H,{id:"trialBadge.tooltip.title",defaultMessage:"{hasSpaceName, select, true {{spaceName}} other {Your workspace}} is on a free {planName, select, plus {Plus} business {Business} enterprise {Enterprise} other {}} trial",values:{hasSpaceName:Boolean(c),spaceName:c,planName:S}})}),(0,b.jsx)(u().q,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:(0,b.jsx)(s()._H,{id:"trialBadge.tooltip.description",defaultMessage:"Click to learn more"})})]}),textWrap:!0})}function v(e){let{showIcon:t}=e;const o=y(t);return(0,b.jsxs)(b.Fragment,{children:[t?(0,b.jsx)("span",{style:o.giftIcon,children:(0,b.jsx)(c().y,{iconGroup:a().$,variantName:"mini",colorName:"orangePrimary"})}):null,(0,b.jsx)(u().q,{styleName:"UISmall-12px/Medium",children:(0,b.jsx)(s()._H,{id:"trialBadge.title",defaultMessage:"Free trial"})})]})}function y(e){return(0,r().yK)((t=>({badge:{display:"flex",flexDirection:"row",gap:4,justifyContent:"center",alignItems:"center",color:t.icon.orangePrimary,background:t.fill.orangeSecondary,padding:e?"0px 6px 0px 4px":"0px 6px",height:e?22:20,borderRadius:6,width:"fit-content"},badgeHover:{background:l().FN[t.mode].orange[100]},badgePressed:{background:l().FN[t.mode].orange[200]},tooltip:{maxWidth:"240px",width:"max-content",display:"flex",padding:"4px 6px",flexDirection:"column",alignItems:"flex-start",gap:2,borderRadius:4},giftIcon:{paddingBottom:1}})),[e])}},873463:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue({open:!1},{name:"TrialEndModalStore"})},914575:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue({open:!1},{name:"TrialInfoModalStore"})},656221:(e,t,o)=>{o.d(t,{JT:()=>p,O:()=>h,Zb:()=>g,jL:()=>f,nk:()=>S,rX:()=>b,yP:()=>m});o(821057),o(670560),o(267602),o(653476),o(470928),o(241792);var n=()=>o(799891),i=()=>o(530980),r=()=>o(934165),a=()=>o(696459),s=()=>o(824462),l=()=>o(636340),d=()=>o(269299),c=()=>o(876822),u=()=>o(826955);function m(e){let{trustedDomainIds:t,spaceStore:o}=e;return t.map((e=>{const t=u().hf.createChildStore(o,{table:r().l,id:e,spaceId:o.id});if(t.canRead())return t})).filter(a().$K)}async function p(e){let{environment:t,spaceId:o,currentUserId:i,organizationId:r}=e;const a=await s().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:o,organizationId:r},userId:i});return"failed"===a.type?(n().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):a.data.results}function g(e){let{environment:t,trustedEmailDomain:o,trustedDomainStores:n,spaceStore:i,spaceBasicSettingsStore:a}=e,s=n.find((e=>e.getEmailDomain()===o));const c=a.state.emailDomains;return s?(d().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainDLSEnabled",environment:t,canUndo:!0,perform:e=>{l().sW({store:i,data:{email_domains:c},transaction:e}),l().sW({store:s,data:{domain_link_sharing_enabled:!0,join_space_method:"request_to_join"},transaction:e})}}),s):(d().createAndCommit({userAction:"trustedDomainActions.createTrustedDomain",environment:t,canUndo:!0,perform:e=>{l().sW({store:i,data:{email_domains:c},transaction:e});const n={space_id:i.id,join_space_method:"request_to_join",domain_link_sharing_enabled:!0,email_domain:o};s=l().ae({environment:t,table:r().l,value:n,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e})}}),s&&n.push(s),s)}function h(e){let{store:t,environment:o}=e;const{currentSpaceStore:n}=c().default.getState();if(!n)throw new Error("currentSpaceStore does not exist");if(n.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(d().createAndCommit({userAction:"trustedDomainActions.deleteTrustedDomain",environment:o,canUndo:!0,perform:e=>{l().sW({store:t,data:{domain_link_sharing_enabled:!1},transaction:e})}}),!0)}function f(e){let{store:t,environment:o,joinSpaceMethod:n}=e;const{currentSpaceStore:i}=c().default.getState();if(!i)throw new Error("currentSpaceStore does not exist");if(i.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(t.getJoinSpaceMethod()!==n&&(d().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainJoinSpaceMethod",environment:o,canUndo:!0,perform:e=>{l().sW({store:t,data:{join_space_method:n},transaction:e})}}),!0))}async function b(e){let{environment:t,spaceId:o}=e;const n=await s().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:o}});if("success"!==n.type)return[];return n.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>i().kk5.fromValue(r().l,e)))}async function S(e){let{environment:t,spaceId:o}=e;const n=await s().callApi({eventName:"getTrustedDomainForUser",environment:t,data:{spaceId:o}});if("success"===n.type)return i().kk5.fromValue(r().l,n.data.result)}},280210:(e,t,o)=>{o.d(t,{U_:()=>I,f6:()=>_,ii:()=>x});o(821057),o(409045),o(453627),o(994774),o(995194),o(520522),o(200082),o(379976),o(724224),o(761121),o(637133),o(241792);var n=o.n(o(402568)),i=()=>o(513670),r=()=>o(326966),a=()=>o(431595),s=()=>o(24945),l=()=>o(255933);const d={version:8,notion_version:0,variant:2},c={version:8,notion_version:1,variant:2},u=0,m=1,p=6,g=8,h=10,f=Date.UTC(2024,0,1);function b(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const o=Math.floor(((new Date).getTime()-f)/r().A0);if(o>=4096||o<0)throw new Error("Invalid offsetInDays.");return t[u]=o>>4,t[u+1]=o<<4&240|15&t[u+1],t}function S(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[m]=240&t[m]|e/2**32&15;for(let o=0;o<4;o++)t[m+1+o]=e/2**(24-8*o)&255;return t}function v(e,t){const o=e?1:0;return t[p]=d.version<<4&240|d.notion_version<<1&14|1&o,t[g]=d.variant<<6&192|63&t[g],t}function y(e,t){if("block"===e)return t[h]=(0,s().ym)(e)|63&t[h],t;const o=(0,s().ym)(e);return t[h]=o>>8&127,t[h+1]=255&o,t}function C(e,t){const o=(0,s().Nq)(e);return t[h]=127&o|128&t[h],t}function I(e,t,o,n){const i=new Uint8Array(16),r=globalThis.crypto.getRandomValues(i);return o!==l().bx&&b(e,r),S(t,r),v(n,r),y(o,r),k(r)}function x(e,t,o,n){return I(e,t,o,n)}function _(e,t,o){return w(e,t,o)}function w(e,t,o){const r=n()(o),l=i().yo(r,2).map((e=>parseInt(e.join(""),16)));if((0,s().LV)(t)){if(void 0===e)throw new(a().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const d=new Uint8Array(l);return e&&S(e,d),C(t,d),function(e){e[p]=240&c.version<<4|14&c.notion_version<<1|1&e[p],e[g]=192&c.variant<<6|63&e[g]}(d),k(d)}const M=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function k(e){let t=0;return M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]}},677200:(e,t,o)=>{o.d(t,{$:()=>n});const n=(0,o(827282).CZ)("gift",{default:{loader:()=>o.e(63636).then(o.bind(o,563636))},small:{loader:()=>o.e(19806).then(o.bind(o,719806))},mini:{loader:()=>o.e(73393).then(o.bind(o,373393))},large:{loader:()=>o.e(40651).then(o.bind(o,840651))}})},573369:(e,t,o)=>{o.d(t,{v:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,n.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,n.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,n.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})})},414294:(e,t,o)=>{o.d(t,{E:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,n.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},165940:(e,t,o)=>{o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,n.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},505365:(e,t,o)=>{o.d(t,{Y:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("clockAlternate",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10.417 6.09961C10.5811 6.09961 10.7201 6.15885 10.834 6.27734C10.9525 6.39128 11.0117 6.53027 11.0117 6.69434V11.2949L10.376 9.34668L12.5977 12.3408C12.7116 12.4867 12.7617 12.6416 12.748 12.8057C12.7344 12.9697 12.6592 13.0996 12.5225 13.1953C12.3721 13.3001 12.2148 13.3389 12.0508 13.3115C11.8913 13.2842 11.75 13.1908 11.627 13.0312L9.99316 10.8779C9.93392 10.8005 9.89062 10.7253 9.86328 10.6523C9.83594 10.5749 9.82227 10.4928 9.82227 10.4062V6.69434C9.82227 6.53027 9.87923 6.39128 9.99316 6.27734C10.1117 6.15885 10.2529 6.09961 10.417 6.09961ZM10.6768 17.126C9.93848 17.126 9.22298 17.0098 8.53027 16.7773C7.84212 16.5495 7.20638 16.2259 6.62305 15.8066C6.04427 15.3919 5.54297 14.9111 5.11914 14.3643C4.96875 14.182 4.90495 13.9928 4.92773 13.7969C4.95052 13.6009 5.03939 13.446 5.19434 13.332C5.36296 13.2135 5.53841 13.1748 5.7207 13.2158C5.90299 13.2568 6.06478 13.3571 6.20605 13.5166C6.54785 13.9678 6.94889 14.3597 7.40918 14.6924C7.87402 15.0205 8.37988 15.2734 8.92676 15.4512C9.47819 15.6335 10.0615 15.7269 10.6768 15.7314C11.4606 15.736 12.1943 15.5902 12.8779 15.2939C13.5661 15.0023 14.1676 14.599 14.6826 14.084C15.2021 13.5645 15.6077 12.9629 15.8994 12.2793C16.1956 11.5911 16.3438 10.8529 16.3438 10.0645C16.3438 9.2806 16.1956 8.54688 15.8994 7.86328C15.6077 7.17513 15.2021 6.57357 14.6826 6.05859C14.1676 5.53906 13.5661 5.13346 12.8779 4.8418C12.1943 4.55013 11.4606 4.4043 10.6768 4.4043C9.88835 4.4043 9.15234 4.55013 8.46875 4.8418C7.78971 5.12891 7.19043 5.52995 6.6709 6.04492C6.15137 6.5599 5.74349 7.15918 5.44727 7.84277C5.1556 8.52181 5.00749 9.25326 5.00293 10.0371H3.6084C3.61296 9.07096 3.7998 8.16406 4.16895 7.31641C4.53809 6.46875 5.0485 5.72135 5.7002 5.07422C6.35189 4.42708 7.10156 3.92122 7.94922 3.55664C8.80143 3.1875 9.71061 3.00293 10.6768 3.00293C11.6429 3.00293 12.5521 3.1875 13.4043 3.55664C14.2565 3.92578 15.0062 4.4362 15.6533 5.08789C16.305 5.73503 16.8154 6.4847 17.1846 7.33691C17.5537 8.18913 17.7383 9.09831 17.7383 10.0645C17.7383 11.0306 17.5537 11.9398 17.1846 12.792C16.8154 13.6442 16.305 14.3962 15.6533 15.0479C15.0062 15.6995 14.2565 16.2077 13.4043 16.5723C12.5521 16.9414 11.6429 17.126 10.6768 17.126ZM2.78809 8.66992H6.16504C6.33822 8.66992 6.4681 8.71094 6.55469 8.79297C6.64583 8.87044 6.68913 8.9707 6.68457 9.09375C6.68001 9.21224 6.63216 9.33984 6.54102 9.47656L4.87988 11.7803C4.76595 11.9352 4.63151 12.015 4.47656 12.0195C4.32161 12.0195 4.1849 11.9398 4.06641 11.7803L2.40527 9.47656C2.31413 9.3444 2.26628 9.2168 2.26172 9.09375C2.25716 8.9707 2.29818 8.87044 2.38477 8.79297C2.47591 8.71094 2.61035 8.66992 2.78809 8.66992Z"})})},858233:(e,t,o)=>{o.d(t,{o:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("topbarCommentFilled",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M6.27344 19.0703C5.96094 19.0703 5.71615 18.9688 5.53906 18.7656C5.36719 18.5625 5.28125 18.2865 5.28125 17.9375V16.0156H4.85938C4.10417 16.0156 3.45573 15.8698 2.91406 15.5781C2.3776 15.2865 1.96354 14.8698 1.67188 14.3281C1.38542 13.7812 1.24219 13.1198 1.24219 12.3438V6.28125C1.24219 5.50521 1.38542 4.84635 1.67188 4.30469C1.95833 3.75781 2.3724 3.33854 2.91406 3.04688C3.46094 2.75521 4.1276 2.60938 4.91406 2.60938H15.0781C15.8594 2.60938 16.5234 2.75521 17.0703 3.04688C17.6172 3.33854 18.0339 3.75781 18.3203 4.30469C18.6068 4.84635 18.75 5.50521 18.75 6.28125V12.3438C18.75 13.1198 18.6068 13.7812 18.3203 14.3281C18.0339 14.8698 17.6172 15.2865 17.0703 15.5781C16.5234 15.8698 15.8594 16.0156 15.0781 16.0156H10.25L7.57812 18.3828C7.3125 18.6172 7.08333 18.7891 6.89062 18.8984C6.69792 19.013 6.49219 19.0703 6.27344 19.0703ZM6.65625 17.3438L9.13281 14.8906C9.29948 14.724 9.45312 14.6146 9.59375 14.5625C9.73958 14.5052 9.93229 14.4766 10.1719 14.4766H15.0312C15.7708 14.4766 16.3177 14.2943 16.6719 13.9297C17.0312 13.5599 17.2109 13.013 17.2109 12.2891V6.32812C17.2109 5.60938 17.0312 5.06771 16.6719 4.70312C16.3177 4.33333 15.7708 4.14844 15.0312 4.14844H4.95312C4.21875 4.14844 3.67188 4.33333 3.3125 4.70312C2.95833 5.06771 2.78125 5.60938 2.78125 6.32812V12.2891C2.78125 13.013 2.95833 13.5599 3.3125 13.9297C3.67188 14.2943 4.21875 14.4766 4.95312 14.4766H6.02344C6.24219 14.4766 6.40104 14.526 6.5 14.625C6.60417 14.7188 6.65625 14.8828 6.65625 15.1172V17.3438ZM6.02344 7.25781C5.88802 7.25781 5.77344 7.21094 5.67969 7.11719C5.58594 7.01823 5.53906 6.90104 5.53906 6.76562C5.53906 6.63542 5.58333 6.52344 5.67188 6.42969C5.76562 6.33594 5.88281 6.28906 6.02344 6.28906H13.8828C14.0234 6.28906 14.1406 6.33594 14.2344 6.42969C14.3281 6.52344 14.375 6.63542 14.375 6.76562C14.375 6.90104 14.3281 7.01823 14.2344 7.11719C14.1406 7.21094 14.0234 7.25781 13.8828 7.25781H6.02344ZM6.02344 9.74219C5.88802 9.74219 5.77344 9.69531 5.67969 9.60156C5.58594 9.50781 5.53906 9.39062 5.53906 9.25C5.53906 9.125 5.58333 9.01302 5.67188 8.91406C5.76562 8.8151 5.88281 8.76562 6.02344 8.76562H13.8828C14.0234 8.76562 14.1406 8.8151 14.2344 8.91406C14.3281 9.01302 14.375 9.125 14.375 9.25C14.375 9.39062 14.3281 9.50781 14.2344 9.60156C14.1406 9.69531 14.0234 9.74219 13.8828 9.74219H6.02344ZM6.02344 12.2344C5.88802 12.2344 5.77344 12.1875 5.67969 12.0938C5.58594 12 5.53906 11.8854 5.53906 11.75C5.53906 11.6146 5.58333 11.5 5.67188 11.4062C5.76562 11.3073 5.88281 11.2578 6.02344 11.2578H11.1406C11.276 11.2578 11.3906 11.3073 11.4844 11.4062C11.5833 11.5 11.6328 11.6146 11.6328 11.75C11.6328 11.8854 11.5833 12 11.4844 12.0938C11.3906 12.1875 11.276 12.2344 11.1406 12.2344H6.02344Z"})})},938479:(e,t,o)=>{o.d(t,{d:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("topbarUpdate",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10.0781 18.1562C14.5078 18.1562 18.1641 14.5 18.1641 10.0781C18.1641 5.65625 14.5 2 10.0703 2C5.64844 2 2 5.65625 2 10.0781C2 14.5 5.65625 18.1562 10.0781 18.1562ZM10.0781 16.5469C6.49219 16.5469 3.625 13.6641 3.625 10.0781C3.625 6.49219 6.49219 3.61719 10.0703 3.61719C13.6562 3.61719 16.5391 6.49219 16.5469 10.0781C16.5547 13.6641 13.6641 16.5469 10.0781 16.5469ZM6.14062 11.0625H10.0703C10.4297 11.0625 10.7031 10.7891 10.7031 10.4375V5.32812C10.7031 4.97656 10.4297 4.70312 10.0703 4.70312C9.72656 4.70312 9.45312 4.97656 9.45312 5.32812V9.8125H6.14062C5.78906 9.8125 5.51562 10.0859 5.51562 10.4375C5.51562 10.7891 5.78906 11.0625 6.14062 11.0625Z"})})},46581:(e,t,o)=>{o.d(t,{U:()=>a});var n=o.n(o(389539)),i=()=>o(280210),r=()=>o(956057);class a{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=o(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:n}=this.getSettings();return n&&e!==o(363777).uK?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,i().ii)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:o,enableIdSchema:r}=this.getSettings();if(!r||"space"===t)return this.legacyId(t,"disabled");const a=this.mapSpaceIdToShortId(e),s=n().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,o?"id_schema_test":"id_schema"),(0,i().U_)(o,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:o,enableIdSchema:n}=this.getSettings();return n&&"space"!==t?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,i().U_)(o,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),r().Il()}async deterministicIdWithSpaceId(e,t,o){const{enableTestDateOffset:a,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),r().Ul(o);const l=this.mapSpaceIdToShortId(e),d=n().types.isPromise(l)?await l:l;return d?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema"),(0,i().f6)(d,t,o)):(this.idCreatorLogger(e,t,"missing_short_id"),r().Ul(o))}deterministicIdWithSpaceShortId(e,t,o){const{enableTestDateOffset:n,enableIdSchema:a}=this.getSettings();return a?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,i().f6)(e,t,o)):(this.idCreatorLogger(void 0,t,"disabled"),r().Ul(o))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),i=n().types.isPromise(o)?await o:o;return this.getSpaceShortIdCreator(e,i)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),i=n().types.isPromise(o)?void 0:o;return this.getSpaceShortIdCreator(e,i)}getSpaceShortIdCreator(e,t){const{enableIdSchema:o}=this.getSettings();return o&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),r().Il()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),r().Il()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),r().Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,o){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=o}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},88829:(e,t,o)=>{o.d(t,{Z:()=>n});const n={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},201565:(e,t,o)=>{function n(e){return"none"!==e.role&&Boolean(!e.is_public_share_link||e.is_site)}o.d(t,{L:()=>n})},416403:(e,t,o)=>{o.d(t,{Gx:()=>c,HU:()=>m,Ju:()=>u,KT:()=>s,O5:()=>d,RY:()=>l,T$:()=>p});o(267602),o(470928);var n=()=>o(696459),i=()=>o(999673),r=()=>o(156642);const a=["ar","bg","cs","da","de","el","es","et","fi","fr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","ro","ru","sk","sl","sv","tr","uk","zh","en","pt"];function s(e){return(0,r().XD)(e,void 0)?"title":(0,r().W2)(e)?"caption":"table_row"===e||"collection_view"===e||"collection_view_page"===e?"properties":(0,r().nq)(e)||"column"===e||"column_list"===e||"table"===e?"unmapped":void(0,n().t1)(e)}const l=["en","es","fr","pt","zh","ja","ko","ru","de","it","nl","id"];function d(e){return(0,n().DE)(a,e)}const c=["en","es","fr","pt","zh","ja","ko","ru","de","it","nl","id"];const u=[{key:"en",name:i().Dr.translateEnglish},{key:"es",name:i().Dr.translateSpanish},{key:"fr",name:i().Dr.translateFrench},{key:"pt",name:i().Dr.translatePortuguese},{key:"zh",name:i().Dr.translateChinese},{key:"ja",name:i().Dr.translateJapanese},{key:"ko",name:i().Dr.translateKorean},{key:"ru",name:i().Dr.translateRussian},{key:"de",name:i().Dr.translateGerman},{key:"it",name:i().Dr.translateItalian},{key:"nl",name:i().Dr.translateDutch},{key:"id",name:i().Dr.translateIndonesian}];function m(e){return u.find((t=>t.key===e))}let p=function(e){return e.NAME="name",e.VIEW_NAME="view_name",e.DESCRIPTION="description",e.SCHEMA_PROPERTY_NAME="schema_property_name",e.SCHEMA_PROPERTY_OPTION="schema_property_option",e}({})},971095:(e,t,o)=>{o.d(t,{A:()=>n});const n=(0,o(830742).LS)("importEvernote")}}]);