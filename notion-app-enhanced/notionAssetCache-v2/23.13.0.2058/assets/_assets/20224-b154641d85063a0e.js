"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[20224],{144628:(e,t,r)=>{r.d(t,{G:()=>a,h:()=>o});r(122556),r(582845),r(250570),r(533019),r(721473),r(788208),r(22624),r(267602),r(653476),r(470928),r(241792);var i=()=>r(513670),n=()=>r(696459);function o(e){const{inferences:t,inferenceKeysToAnnotations:r,acceptedInferenceKeys:n}=e.state,o=new Map;for(const i of t)o.set(i.key,i);return{cachedInferences:i().oA(n.map((e=>o.get(e)))),annotationInferences:i().oA(Object.entries(r).map((e=>{let[t,r]=e;const i=o.get(t);if(i)return{...i,value:{...i.value,input:{...i.value.input,annotation:r}}}})))}}function a(e){const{clientStore:t,threadStore:r}=e,i=((null==r?void 0:r.getMessageStores())??[]).map((e=>e.getStep())).filter(n().$K)??[],o=new Set(i.map((e=>e.id))),a=t.state.temporarySteps;return[...i.map((e=>a.find((t=>t.id===e.id))??e)),...a.filter((e=>!o.has(e.id)))].filter((e=>"title"!==e.type))}},704923:(e,t,r)=>{r.d(t,{De:()=>p,Ms:()=>l,Th:()=>i});r(670560),r(241792);const i=12e3,n=["openai-gpt-4o","openai-chatgpt-4o-latest","openai-gpt-4o-mini","openai-o1","openai-o1-mini","openai-o3-mini"];const o=["anthropic-haiku","anthropic-sonnet","anthropic-opus"];const a=["vertex-gemini-1.5-pro","vertex-gemini-1.5-flash","vertex-gemini-2.0-flash"];const s=["groq-gemma2-9b-it","groq-gemma-7b-it","groq-llama-70b","groq-llama-8b","groq-mixtral"];const c=["fireworks-llama3.1-405b","fireworks-llama3.1-70b","fireworks-llama3.3-70b","fireworks-llama3.3-70b-dedicated","fireworks-llama3.1-8b","fireworks-llama3-70b","fireworks-mixtral-22b","fireworks-mixtral-7b","fireworks-ft-router-101","fireworks-ft-router-102","fireworks-deepseek-v3","fireworks-deepseek-r1"];function p(e){const t=[];for(const r of e){const e=t[t.length-1];e?"text"===r.type&&"text"===e.type?t[t.length-1]={type:"text",content:e.content+r.content}:"tool_use"===r.type&&"tool_use"===e.type&&r.id===e.id?t[t.length-1]={type:"tool_use",id:r.id,name:r.name,content:e.content+r.content}:t.push({...r}):t.push({...r})}return t}function l(e){return"string"==typeof e?[{type:"text",content:e}]:e}},269672:(e,t,r)=>{r.d(t,{Cd:()=>o,ai:()=>i});r(122556),r(582845),r(250570),r(533019),r(721473),r(788208),r(22624),r(267602),r(470928);const i={type:"ai",config:{},authentication:void 0,latestVersion:"1.0.0",isTriggerConfigured:{},getModuleConfigurationStatus:()=>"ready"},n=["ai.prompt","ai.promptJson","databases.pickPages","databases.pickSelectOption","databases.pickMultiSelectOptions","agents.runAgent"];function o(e){const t=new Set;for(const r of e.functions||[])for(const e of r.tests||[])if(e.result&&e.result.effects)for(const r of e.result.effects)if(n.includes(r.key)){const e=Array.isArray(r.args)?r.args[0]:void 0,i="object"==typeof e&&null!==e&&"promptName"in e&&"string"==typeof e.promptName?e.promptName:void 0;i&&t.add(i)}return Array.from(t).sort()}},335696:(e,t,r)=>{r.d(t,{Fs:()=>p,Gw:()=>h,rl:()=>m,c1:()=>f,dw:()=>y,yr:()=>u});r(821057),r(670560),r(267602),r(470928),r(749411),r(30005),r(241792);var i=()=>r(513670),n=()=>r(543172),o=()=>r(696459),a=()=>r(124199),s=()=>r(295617),c=()=>r(235484);a().object({required:{accessScope:a().literals("read","write"),schema:r(59694).OR},optional:{},exact:!0});const p={type:"database",config:{},authentication:void 0,latestVersion:"1.0.0",isTriggerConfigured:{"database.page.created":()=>!0,"database.page.updated":()=>!0,"database.page.deleted":()=>!0},getModuleConfigurationStatus:e=>e.state?"ready":"invalidAndRequiredToWriteCode"};function l(e){return"rollup"===e.type||"formula"===e.type||"created_by"===e.type||"location"===e.type||"last_edited_by"===e.type||"last_visited_time"===e.type||"button"===e.type||"auto_increment_id"===e.type||"verification"===e.type||"geo_point"===e.type}function d(e,t){var r;if("relation"!==e.type)return;const i=(null===(r=e.collection_pointer)||void 0===r?void 0:r.id)||e.collection_id;return t.find((e=>{var t;return!!e.state&&(null===(t=e.state)||void 0===t||null===(t=t.pointer)||void 0===t?void 0:t.id)===i}))}function u(e){const{databaseKey:t,databaseKeyMap:r,workflowSchema:i,notionSchema:a,connectedRelationCollections:p,databaseModules:u}=e,y=r[t];if(!y)throw new Error(`Database ${t} not found`);const{propertyKeyToIdMap:m}=y,f=Object.fromEntries(Object.entries(i).flatMap((e=>{var t;let[i,l]=e;const d=m[i],u=function(e){const{key:t,workflowPropertySchema:r,notionPropertySchema:i,databaseKeyMap:a,connectedRelationCollections:p}=e;if(i&&r.type!==i.type)return;if("content"===r.type);else{if("title"===r.type)return{...i,type:"title",name:t};if("text"===r.type)return{...i,type:"text",name:t};if("url"===r.type)return{...i,type:"url",name:t};if("email"===r.type)return{...i,type:"email",name:t};if("phone_number"===r.type)return{...i,type:"phone_number",name:t};if("date"===r.type)return{...i,type:"date",name:t};if("created_time"===r.type)return{...i,type:"created_time",name:t};if("last_edited_time"===r.type)return{...i,type:"last_edited_time",name:t};if("number"===r.type)return{...i,type:"number",name:t};if("checkbox"===r.type)return{...i,type:"checkbox",name:t};if("select"===r.type){var l;const e={};if("select"===(null==i?void 0:i.type)&&i.options&&i.options.forEach((t=>{e[t.value]=t})),i&&"select"!==i.type)throw new Error(`Property ${t} is not a select property in Notion`);return{...i,type:"select",name:t,options:null===(l=r.options)||void 0===l?void 0:l.map((t=>({...e[t.value]??{id:(0,n().ZP)()},...t})))}}if("multi_select"===r.type){var d;const e={};if("multi_select"===(null==i?void 0:i.type)&&i.options&&i.options.forEach((t=>{e[t.value]=t})),i&&"multi_select"!==i.type)throw new Error(`Property ${t} is not a multi_select property in Notion`);return{...i,type:r.type,name:t,options:null===(d=r.options)||void 0===d?void 0:d.map((t=>({...e[t.value]??{id:(0,n().ZP)()},...t})))}}if("status"===r.type){const e={},o={};"status"===(null==i?void 0:i.type)&&(i.options&&i.options.forEach((t=>{e[t.value]=t})),i.groups&&i.groups.forEach((e=>{o[e.name]=e})));const a=Object.values(r.groups).flatMap((t=>t.map((t=>({...e[t.value]??{id:(0,n().ZP)()},...t}))))),c=["to_do","in_progress","complete"].map((e=>{const t=r.groups[e]||[],i="to_do"===e?s().G1:"in_progress"===e?s().Ho:s().RW;return{...o[i]||{id:(0,n().ZP)()},name:i,optionIds:t.map((e=>{const t=a.find((t=>t.value===e.value));if(!t)throw new Error(`Option ${e} not found`);return t.id}))}}));return{...i,type:r.type,name:t,options:a,groups:c}}if("person"===r.type)return{...i,type:"person",name:t};if("file"===r.type)return{...i,type:"file",name:t};if("relation"===r.type){const e=a[r.databaseKey];if(!e)throw new Error(`Database ${r.databaseKey} not found`);const{collectionPointer:n,propertyKeyToIdMap:o}=e,s=r.propertyKey?o[r.propertyKey]:void 0;return{...i,type:"relation",name:t,collection_pointer:n,version:"v2",property:s}}if("external_relation"===r.type){if("slack.message"===r.object){const e=p[t],{collectionPointer:r,property:n}=e??{};return{...i,type:"relation",name:t,collection_pointer:r,version:"v2",property:n,connectedRelation:{integration_id:c().nO}}}(0,o().t1)(r.object)}else(0,o().t1)(r)}}({key:i,workflowPropertySchema:l,notionPropertySchema:d&&(null===(t=a[d])||void 0===t?void 0:t.type)===l.type?a[d]:void 0,databaseKeyMap:r,connectedRelationCollections:p});if(u){if(!d)throw new Error(`Property ${i} not found`);return[[d,{...u,description:l.description}]]}return[]}))),g={};return Object.entries(a).forEach((e=>{let[t,r]=e;if(r&&l(r))f[t]=r;else if("relation"===(null==r?void 0:r.type)){!d(r,u)&&(f[t]=r)}else g[t]=r})),{schema:f,deletedSchema:g}}function y(e){const{databaseKey:t,schema:r,databaseModules:i}=e,n=Object.fromEntries(Object.entries(r).flatMap((e=>{let[r,n]=e;if(!n)return[];const a=function(e){const{databaseKey:t,propertySchema:r,databaseModules:i}=e;if("title"===r.type)return{name:r.name,schema:{type:"title",description:r.description||""}};if("text"===r.type)return r.external_relation_object?{name:r.name,schema:{type:"external_relation",description:r.description||"",object:r.external_relation_object}}:{name:r.name,schema:{type:"text",description:r.description||""}};if("url"===r.type)return{name:r.name,schema:{type:"url",description:r.description||""}};if("email"===r.type)return{name:r.name,schema:{type:"email",description:r.description||""}};if("phone_number"===r.type)return{name:r.name,schema:{type:"phone_number",description:r.description||""}};if("checkbox"===r.type)return{name:r.name,schema:{type:"checkbox",description:r.description||""}};if("person"===r.type)return{name:r.name,schema:{type:"person",description:r.description||""}};if("file"===r.type)return{name:r.name,schema:{type:"file",description:r.description||""}};if("select"===r.type)return{name:r.name,schema:{type:"select",description:r.description||"",options:(r.options||[]).map((e=>({value:e.value,description:e.description||""})))}};if("multi_select"===r.type)return{name:r.name,schema:{type:"multi_select",description:r.description||"",options:(r.options||[]).map((e=>({value:e.value,description:e.description||""})))}};if("status"===r.type)return{name:r.name,schema:{type:"status",description:r.description||"",groups:{to_do:b({propertySchema:r,type:s().G1}),in_progress:b({propertySchema:r,type:s().Ho}),complete:b({propertySchema:r,type:s().RW})}}};if("date"===r.type)return{name:r.name,schema:{type:"date",description:r.description||""}};if("created_time"===r.type)return{name:r.name,schema:{type:"created_time",description:r.description||""}};if("last_edited_time"===r.type)return{name:r.name,schema:{type:"last_edited_time",description:r.description||""}};if("relation"===r.type){var n;const e=g(r);if(e)return{name:r.name,schema:{type:"external_relation",description:r.description||"",object:e}};const o=d(r,i);if(!o)return;const a=null===(n=Object.entries(o.state.schema).find((e=>{let[i,n]=e;return"relation"===n.type&&(n.propertyKey===r.name&&n.databaseKey===t)})))||void 0===n?void 0:n[0];return{name:r.name,schema:{type:"relation",databaseKey:o.key,propertyKey:a||r.name,description:r.description||""}}}if("number"===r.type)return{name:r.name,schema:{type:"number",description:r.description||""}};if(l(r))return;(0,o().t1)(r)}({databaseKey:t,propertySchema:n,databaseModules:i});return a?[[a.name,a.schema]]:[]}))),a=Object.fromEntries(Object.entries(r).map((e=>{let[t,r]=e;if(!r||l(r))return[];if("relation"===(null==r?void 0:r.type)){if(!d(r,i))return[]}return[r.name,t]})));return n.content||(n.content={type:"content",description:""}),{schema:n,propertyKeyToIdMap:a}}function m(e){return Object.fromEntries(i().oA(Object.entries(e).map((e=>{let[t,r]=e;if("external_relation"===r.type)return[t,r.object]}))))}function f(e){const{notionSchema:t,databaseKeyMap:r,databaseKey:n}=e,{propertyKeyToIdMap:o}=r[n],a=(s=t,Object.fromEntries(i().oA(Object.entries(s).map((e=>{let[t,r]=e;if("relation"!==(null==r?void 0:r.type)||!r.collection_pointer||!r.property)return;const i=g(r);return i?[t,{collectionPointer:r.collection_pointer,property:r.property,externalRelationType:i}]:void 0})))));var s;const c=i().U_(o);return Object.fromEntries(i().oA(Object.entries(a).map((e=>{let[t,r]=e;if(c[t])return[c[t],r]}))))}function g(e){var t;if((null===(t=e.connectedRelation)||void 0===t?void 0:t.integration_id)===c().nO)return"slack.message"}function b(e){var t;const{propertySchema:r,type:i}=e;return((null===(t=(r.groups||[]).find((e=>e.name===i)))||void 0===t?void 0:t.optionIds)||[]).flatMap((e=>{const t=(r.options||[]).find((t=>t.id===e));return t?[{value:t.value,description:t.description||""}]:[]}))}a().array(a().string());function h(e){let t=e.replace(/\s+/g,"").replace(/[^a-zA-Z0-9]/g,"").replace(/^(.)/,(e=>e.toLowerCase()));return""===t&&(t="untitled"),/^[^a-z]/.test(t)&&(t=`_${t}`),t}},594860:(e,t,r)=>{r.d(t,{O:()=>l});r(241792);var i=()=>r(124199);i().object({required:{id:i().string(),url:i().string(),type:i().literal("user"),userId:i().string(),message:i().string()},optional:{},exact:!0});const n={type:"agent",config:{},authentication:void 0,latestVersion:"1.0.0",isTriggerConfigured:{"agent.message":()=>!0},getModuleConfigurationStatus:()=>"ready"};const o={type:"files",config:{},authentication:void 0,latestVersion:"1.0.0",isTriggerConfigured:{},getModuleConfigurationStatus:()=>"ready"};const a={type:"search",config:{},authentication:void 0,latestVersion:"1.0.0",isTriggerConfigured:{},getModuleConfigurationStatus:()=>"ready"};function s(e){var t;return!(null===(t=e.channelIds)||void 0===t||!t.length)||!!e.allChannels}const c={type:"slack",config:{scopes:["channels:history","channels:read","chat:write","chat:write.customize","files:read","files:write","groups:history","groups:read","im:history","im:read","im:write","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users:read.email","channels:join","chat:write.public"]},authentication:{type:"oauth2"},latestVersion:"1.0.0",isTriggerConfigured:{"slack.message":s,"slack.thread.created":s,"slack.reaction.added":s},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"}},p={type:"users",config:{},authentication:void 0,latestVersion:"1.0.0",isTriggerConfigured:{},getModuleConfigurationStatus:()=>"ready"},l={database:r(335696).Fs,slack:c,users:p,files:o,ai:r(269672).ai,recurrence:{type:"recurrence",config:{},latestVersion:"1.0.0",isTriggerConfigured:{recurrence:()=>!0},getModuleConfigurationStatus:()=>"ready"},search:a,discussions:{type:"discussions",config:{},latestVersion:"1.0.0",isTriggerConfigured:{"page.discussion.comment.added":e=>{let{databaseKey:t}=e;return!!t}},getModuleConfigurationStatus:()=>"ready"},notionmail:{type:"notionmail",config:{},latestVersion:"1.0.0",isTriggerConfigured:{"notionmail.email.received":e=>{let{email:t}=e;return!!t}},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"}},zendesk:{type:"zendesk",config:{scopes:["read","write"]},authentication:{type:"oauth2"},latestVersion:"1.0.0",isTriggerConfigured:{"zendesk.ticket":()=>!0},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"}},agent:n}},59694:(e,t,r)=>{r.d(t,{OR:()=>s,$A:()=>n});var i=()=>r(124199);r(267602),r(653476),r(241792);Object.entries({users:!0,files:!0,database:!1,search:!1,agent:!1,slack:!1,ai:!1,recurrence:!1,discussions:!1,zendesk:!1,notionmail:!1}).filter((e=>{let[t,r]=e;return r})).map((e=>{let[t]=e;return t}));const n={},o=(i().object({required:{},optional:{triggerKey:i().string(),start:i().string(),end:i().string(),containsSubstring:i().string()},exact:!0}),i().object({required:{runId:i().string(),instructions:i().string()},optional:{},exact:!0}),i().object({required:{value:i().string(),description:i().string()},optional:{},exact:!0})),a=i().union([i().object({required:{type:i().literal("title"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("content"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("text"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("url"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("email"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("phone_number"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("file"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("number"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("date"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("select"),options:i().array(o),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("multi_select"),options:i().array(o),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("status"),groups:i().object({required:{to_do:i().array(o),in_progress:i().array(o),complete:i().array(o)},optional:{},exact:!0}),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("person"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("relation"),databaseKey:i().string(),description:i().string()},optional:{propertyKey:i().string()}}),i().object({required:{type:i().literal("external_relation"),object:i().literals("slack.message"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("checkbox"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("created_time"),description:i().string()},optional:{},exact:!0}),i().object({required:{type:i().literal("last_edited_time"),description:i().string()},optional:{},exact:!0})]),s=i().record(i().string(),a)}}]);