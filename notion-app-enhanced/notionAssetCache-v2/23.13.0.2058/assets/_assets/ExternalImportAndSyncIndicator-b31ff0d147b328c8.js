"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47433],{635604:(e,t,n)=>{n.r(t),n.d(t,{ExternalImportAndSyncIndicator:()=>L});var l=n(667294),i=()=>n(146947),o=()=>n(219727),a=()=>n(142735),s=()=>n(846550),c=()=>n(646574),d=()=>n(109477),r=()=>n(890085),g=()=>n(562842),y=()=>n(973369),p=()=>n(396136),u=()=>n(696056),x=()=>n(752778),h=()=>n(788860),v=()=>n(568017),m=()=>n(707513),S=()=>n(887274),_=()=>n(594546),j=()=>n(148976),f=()=>n(527278),T=()=>n(148126),b=()=>n(176691),C=()=>n(998901),P=()=>n(876822),I=()=>n(749826),w=()=>n(308939),B=()=>n(826955),k=()=>n(521632),H=()=>n(108714),E=()=>n(729775),F=()=>n(654133),M=()=>n(312578),z=n(785893);function U(e){var t;const{store:n}=e,i=(0,a().VK)((()=>n.isCollectionView()),[n]),o=(0,a().VK)((()=>{var e;let t;if(n.table===p().iU)if(n.isCollectionView())t=n.getCollectionStore();else{const e=n.getParentStore();(null==e?void 0:e.table)===x().vF&&(t=e)}return null===(e=t)||void 0===e?void 0:e.getFormat()}),[n]),c=Boolean(null==o||null===(t=o.sync_state)||void 0===t?void 0:t.syncing),r=(0,s().yK)((e=>({wrapper:{display:"flex",alignItems:"center",gap:6},syncProgress:{fontWeight:m().Ue.medium,fontSize:14,color:e.blueColor},syncAge:{fontWeight:m().Ue.regular,fontSize:m().JB.UIRegular.desktop,color:v().ZP.blueWithAlpha(.7)},badge:{background:"light"===e.mode?v().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",marginBottom:3,borderRadius:20,padding:"2px 6x",...!i&&{marginTop:8}}})),[i]),g=(0,l.useCallback)((()=>i&&c?{syncBadgeContent:(0,z.jsx)("span",{style:r.syncProgress,children:(0,z.jsx)(h()._H,{id:"PageTitle.ImportSync.syncInProgress.title",defaultMessage:"Import in progress",values:{integration:null==o?void 0:o.external_collection_type}})})}:{}),[o,i,r,c]);if(!(o&&o.static_import_collection_type&&i&&o.static_import_collection_type===d().gH.CsvImport&&c))return null;const{syncBadgeContent:y}=g();return(0,z.jsx)("div",{style:{alignSelf:"end",display:"inline-block"},children:(0,z.jsx)(k().Z,{style:r.badge,content:(0,z.jsxs)("div",{style:r.wrapper,children:[(0,z.jsx)(M().Z,{legacySize:14}),y]})})})}function L(e){const{store:t}=e,n=(0,a().VK)((()=>{var e;let n;if(t.table===x().vF)n=t;else if(t.table===p().iU)if(t.isCollectionView())n=t.getCollectionStore();else{const e=t.getParentStore();(null==e?void 0:e.table)===x().vF&&(n=e)}return null===(e=n)||void 0===e?void 0:e.getFormat()}),[t]);return(null==n?void 0:n.external_collection_type)===d().Vj.Jira?(0,z.jsx)(N,{...e}):(null==n?void 0:n.static_import_collection_type)===d().gH.CsvImport&&e.store.table===p().iU?(0,z.jsx)(U,{store:e.store}):(0,z.jsx)(z.Fragment,{})}function N(e){const t=(0,o().O7)(),{store:n}=e,d=(0,a().VK)((()=>{var e,t,l,o,a;const s=n.table===x().vF||n.table===p().iU&&n.isCollectionView(),d=s?n.table===x().vF?n:n.getCollectionStore():null==n?void 0:n.getParentStore();if(d&&d.table!==x().vF)return;const r=null==d?void 0:d.getFormat(),g={errorStatusCode:null==r||null===(e=r.error)||void 0===e?void 0:e.status_code,isCollection:s,isSyncFailed:Boolean(null==r||null===(t=r.error)||void 0===t?void 0:t.status_code),isSyncing:Boolean(null==r||null===(l=r.sync_state)||void 0===l?void 0:l.syncing),botId:null==r?void 0:r.bot_id,collectionSyncedTime:null==r||null===(o=r.sync_state)||void 0===o?void 0:o.last_synced_at,collectionSyncedTimeNormalized:null!=r&&null!==(a=r.sync_state)&&void 0!==a&&a.last_synced_at?(0,c().$b)(r.sync_state.last_synced_at,i().locale,f().Z.getIntl()):void 0,pageSyncedTime:void 0,pageSyncedTimeNormalized:void 0,synced_collection_external_url:null==r?void 0:r.synced_collection_external_url,external_collection_type:null==r?void 0:r.external_collection_type,collectionId:null==d?void 0:d.id};return I().default.checkGate({gateName:"show_collection_pill_at_page_level_for_jira"})?(g.pageSyncedTime=g.collectionSyncedTime,g.pageSyncedTimeNormalized=g.collectionSyncedTimeNormalized):s||(g.pageSyncedTime=n.getLastEditedTime(),g.pageSyncedTimeNormalized=(0,c().$b)(n.getLastEditedTime(),i().locale,f().Z.getIntl())),g}),[n]),{isCollection:M,isSyncing:U,isSyncFailed:L,external_collection_type:N,synced_collection_external_url:Z,botId:A,collectionId:V,collectionSyncedTime:R,collectionSyncedTimeNormalized:W,pageSyncedTime:J,pageSyncedTimeNormalized:K}=d||{},D=(0,a().VK)((()=>{const e=P().default.state.currentSpaceStore;if(A&&e){const t=B().Qx.createChildStore(e,{table:u().cZ,id:A,spaceId:e.id});return!!t.isDefined()&&!t.getAlive()}return!1}),[A]),Y=D||L&&M,$=(0,s().yK)((e=>({container:{display:"flex",alignSelf:"end",alignItems:"center",marginTop:6,...M&&{marginBottom:5}},wrapper:{display:"flex",alignItems:"center",gap:6},syncIcon:{width:14,height:14,position:"relative",color:Y?e.icon.uiYellowPrimary:e.blueColor},syncProgress:{fontWeight:m().Ue.medium,fontSize:t.device.isMobile?m().JB.UISmall.desktop:m().JB.UIRegular.desktop,color:Y?e.text.primary:e.blueColor},syncAge:{fontWeight:m().Ue.regular,fontSize:t.device.isMobile?m().JB.UISmall.desktop:m().JB.UIRegular.desktop,color:v().ZP.blueWithAlpha(.7)},badge:{background:"light"===e.mode?Y?e.fill.yellowSecondary:v().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",borderRadius:20,padding:"2px 8px 2px 6px"},tooltipHeading:{fontSize:m().JB.UISmall.desktop,fontWeight:m().Ue.medium},tooltipCaption:{fontSize:m().JB.UISmall.desktop,color:r().Lr.dark.gray,fontWeight:m().Ue.regular},reauthCta:{color:e.text.secondary,marginLeft:12}})),[t,M,Y]),G=(0,l.useCallback)((()=>D?{syncBadgeContent:(0,z.jsx)("span",{style:$.syncProgress,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.botDisconnected.title",defaultMessage:"Sync has stopped",values:{integration:N}})}),syncBadgeTooltipContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:$.tooltipHeading,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.botDisconnected.tooltip.heading",defaultMessage:"Re-authenticate to continue syncing. Last updated {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:W}})}),(0,z.jsx)("div",{style:$.tooltipCaption,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.botDisconnected.tooltip.caption",defaultMessage:"Click to view the help center"})})]}),syncSecondaryAction:(0,z.jsx)(E().Z,{inline:!0,style:$.reauthCta,hoveredStyle:{background:"none",textDecoration:"underline"},onClick:()=>{(0,_().j)({environment:t,event:{eventName:"external_sync_setup_action",eventProperties:{actionType:"sync_label_reconnect_account_cta_click",integration:"jira",collectionId:V,flowId:w().ZP.createNewFlowId()}}}),S().jW({environment:t,from:"sync_header",action:"add_account"})},children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.syncFailed.reauth",defaultMessage:"Re-authenticate account"})})}:M?L?{syncBadgeContent:(0,z.jsx)("span",{style:$.syncProgress,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.syncFailed.title",defaultMessage:"Sync failed",values:{integration:N}})}),syncBadgeTooltipContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:$.tooltipHeading,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.syncFailed.tooltip.heading",defaultMessage:"Failed to sync some projects"})}),(0,z.jsx)("div",{style:$.tooltipCaption,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.syncFailed.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}:U?{syncBadgeContent:(0,z.jsx)("span",{style:$.syncProgress,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.syncInProgress.title",defaultMessage:"Sync in progress",values:{integration:N}})}),syncBadgeTooltipContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:$.tooltipHeading,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.syncInProgress.tooltip.heading",defaultMessage:"Syncing projects and issues from {site}",values:{site:(0,j().jh)(Z||"")}})}),(0,z.jsx)("div",{style:$.tooltipCaption,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.syncInProgress.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}:{syncBadgeContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{style:$.syncProgress,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.title",defaultMessage:"Synced with {integration}",values:{integration:N}})}),R&&(0,z.jsx)("span",{style:$.syncAge,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.subtitle",defaultMessage:"{lastUpdated}",values:{lastUpdated:(0,b().IS)(R,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:$.tooltipHeading,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:W}})}),(0,z.jsx)("div",{style:$.tooltipCaption,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}:{syncBadgeContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{style:$.syncProgress,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.pageLastSynced.title",defaultMessage:"Synced with {integration}",values:{integration:N}})}),J&&(0,z.jsx)("span",{style:$.syncAge,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.pageLastSynced.subtitle",defaultMessage:"{lastUpdated}",values:{lastUpdated:(0,b().IS)(J,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:$.tooltipHeading,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.pageLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:K}})}),(0,z.jsx)("div",{style:$.tooltipCaption,children:(0,z.jsx)(h()._H,{id:"PageTitle.ExternalSync.pageLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}),[t,U,M,$,J,K,R,W,L,N,Z,D,V]);if(!N||M&&!R)return null;const{syncBadgeContent:O,syncBadgeTooltipContent:Q,syncSecondaryAction:q}=G(),X=()=>(0,z.jsx)("div",{style:{alignSelf:"end",display:"inline-block"},children:(0,z.jsx)(H().Z,{className:"notion-print-ignore",href:(0,T().UY)("guides.externalImportAndSync"),external:!0,children:(0,z.jsx)(k().Z,{style:$.badge,content:(0,z.jsxs)("div",{style:$.wrapper,children:[L||D?(0,y().T)($.syncIcon):(0,g().b)($.syncIcon),O]})})})});return(0,z.jsxs)("div",{style:$.container,children:[Q?(0,z.jsx)(F().Z,{renderTooltip:()=>Q,render:e=>(0,z.jsx)("div",{...e,children:X()}),placement:C().Placement.Bottom}):X(),q]})}},973369:(e,t,n)=>{n.d(t,{T:()=>i});n(667294);var l=n(785893);const i=(0,n(827282).IU)("unsync",{viewBox:"0 0 30 30",svg:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.768 23.295l1.353 1.351a11.298 11.298 0 01-6.118 1.81c-5.862 0-10.781-4.538-11.387-10.254h-1.55c-.809 0-1.011-.55-.573-1.168l2.516-3.572c.37-.527.91-.516 1.269 0l2.515 3.583c.427.606.225 1.157-.572 1.157H5.536a9.496 9.496 0 009.467 8.344c1.74 0 3.366-.454 4.765-1.251zM10.233 6.723l-1.361-1.36a11.26 11.26 0 016.131-1.818c5.851 0 10.782 4.548 11.388 10.265h1.539c.808 0 1.021.539.572 1.167l-2.504 3.572c-.37.528-.91.516-1.27 0l-2.515-3.583c-.427-.617-.224-1.156.573-1.156h1.673a9.503 9.503 0 00-9.456-8.356 9.55 9.55 0 00-4.77 1.27z"}),(0,l.jsx)("path",{d:"M27.067 28.551c.41.41 1.094.41 1.49 0 .41-.41.41-1.08 0-1.49L2.937 1.454a1.06 1.06 0 00-1.505 0c-.396.396-.396 1.08 0 1.49l25.635 25.607z"})]})})}}]);