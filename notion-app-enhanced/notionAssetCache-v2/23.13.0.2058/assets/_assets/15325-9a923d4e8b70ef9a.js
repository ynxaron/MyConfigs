"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[15325],{3077:(e,t,n)=>{n.r(t),n.d(t,{CheckoutUpgradeModal:()=>Ue});var a=()=>n(629756),i=n(667294),o=()=>n(219727),r=()=>n(142735),s=()=>n(629719),d=()=>n(921981),l=()=>n(247724),c=()=>n(145613),u=()=>n(576387),p=()=>n(38812),m=()=>n(18281),g=()=>n(661769),y=()=>n(30795),v=()=>n(419157),b=(n(670560),n(267602),n(228244),()=>n(732811)),f=()=>n(799891),h=()=>n(701611),I=()=>n(851549),S=()=>n(381348),_=()=>n(161428),x=()=>n(681941),j=()=>n(122792),w=()=>n(788860),C=()=>n(513670),T=()=>n(979614),M=()=>n(454393),P=()=>n(785673),A=()=>n(212493),E=()=>n(603692),V=()=>n(661641),k=()=>n(226994),D=()=>n(876822),U=()=>n(804217),F=()=>n(838266),O=(n(821057),n(653476),n(731107),()=>n(730120)),Z=()=>n(506347),N=()=>n(923420),B=()=>n(396136),K=()=>n(976102),q=()=>n(320080),R=()=>n(308186),L=()=>n(528918),Q=()=>n(47443),H=()=>n(102182),Y=()=>n(234049),X=()=>n(614027),z=()=>n(505006),G=()=>n(518019),W=()=>n(826955),$=()=>n(728779),J=()=>n(303106),ee=()=>n(686532),te=n(785893);function ne(e){const{onClick:t}=e;return(0,te.jsx)(ee().H,{buttonInfo:{onClick:t,label:(0,te.jsx)(w()._H,{id:"spaceSubscriptionUpgradeModal.upgradeAi.getStarted",defaultMessage:"Get started"})}})}var ae=()=>n(548812),ie=()=>n(254687),oe=()=>n(489294);const re=(0,w().vU)({cancelFailedSubscription:{id:"subscription.upgrade.cancel_failed_subscription",defaultMessage:"Cancelling subscription..."}});async function se(e){var t;const{address:n,billingEmail:a,billingInterval:i,coupon:o,currencyCode:r,environment:d,isStartingTrial:l,modalId:c,modalType:u,paymentData:p,promo:m,quantity:g,selectedProducts:y,stripe:v,useTestClock:b,vatId:f,intl:h}=e,I=D().default.state.currentSpaceStore;if(!I)return;const _=await ie().aQ({environment:d,spaceId:I.id}),j=await G().Z.awaitData(d,{spaceId:null==I?void 0:I.id});if(!j)throw new Error("Billing data not loaded");const M=(null===(t=(0,s().a7)(null==j?void 0:j.subscription,"sites_custom_hostnames"))||void 0===t?void 0:t.quantity)??0,P=(0,x().Vj)({prices:_,quantity:g,domainsQuantity:M}),A=(0,s().Lg)(j),E=l?O().ou.now().plus({days:14}):void 0,V=(0,C().oA)(y).filter((e=>"free"!==e)),k={interval:i,currency:r},U=V.reduce(((e,t)=>(0,K().dP)(P,e,{...k,product:t})),{...A,trialEnd:E}),F=V.some((e=>(0,S().CF)(o,e,i)));try{const e=await oe().updateSubscription({environment:d,spaceStore:I,desiredState:(0,K().Zl)(_,U,i),paymentData:p,billingEmail:a,coupon:m&&"coupon"===m.source?m.code:void 0,customerName:n.name,businessName:n.businessName,addressLine1:n.addressLine1,addressCity:n.city,addressZip:n.zipCode,addressState:n.state,addressCountry:n.country,vatId:f??void 0,promoCodeId:m&&"promo_code"===m.source?m.code:void 0,from:"subscription_upgrade_modal",useTestClock:b,sessionId:c,inAppOffer:F?o:void 0});await oe().handlePaymentIntentNextActions({paymentIntentData:e,stripe:v,onSuccess:()=>{T().fZ(d,{payment_intent_id:e.paymentIntentId,modal_id:c,modal_type:u})},onFailure:async()=>{await async function(e){const{updateSubscriptionResponse:t,environment:n,modalId:a,modalType:i,spaceStore:o,currencyCode:r,intl:s}=e,{subscriptionStatus:d,paymentIntentId:l}=t,c=$().i;await oe().refreshBillingHistory(n,c);const u=c.state.billingEvents;R().vC({message:"trialing"===d?(0,te.jsx)(w()._H,{id:"subscription.upgrade.payment_failed.trial",defaultMessage:"Please provide an alternate payment method to complete your upgrade."}):(0,te.jsx)(w()._H,{id:"subscription.upgrade.payment_failed",defaultMessage:"Your payment could not be processed. Please provide an alternate payment method or you will lose access to Notion."}),showCancel:!1,keepFocus:!1,disableBackgroundDismiss:!0,items:[{label:(0,te.jsx)(w()._H,{id:"subscription.upgrade.payment_failed.pay_invoice",defaultMessage:"Complete payment"}),onAccept:()=>{if(T().Aq(n,{payment_intent_id:l,modal_id:a,modal_type:i}),(0,ae().EQ)())return(0,J().C)(n,o,r,[u[0]],$().i,s);window.open(t.invoiceUrl,"_blank")},color:"red"},{label:(0,te.jsx)(w()._H,{id:"subscription.upgrade.payment_failed.cancel",defaultMessage:"Cancel upgrade"}),onAccept:async()=>{T().cY(n,{payment_intent_id:t.paymentIntentId,modal_id:a,modal_type:i}),L().j({message:re.cancelFailedSubscription}),await oe().cancelSubscription({environment:n,spaceStore:o,from:"subscription_upgrade_modal-failed_payment"}),L().x()}}]})}({updateSubscriptionResponse:e,environment:d,modalId:c,spaceStore:I,currencyCode:r,intl:h})}}),m&&(0,N().$r)(d.currentUser.id)}catch{T().cY(d,{modal_id:c,modal_type:u})}}var de=()=>n(788396),le=()=>n(438665),ce=()=>n(768064),ue=()=>n(498854),pe=()=>n(575154),me=()=>n(144948),ge=()=>n(297959),ye=()=>n(991460),ve=()=>n(801812),be=()=>n(523298),fe=()=>n(824462);var he=()=>n(368958),Ie=()=>n(85084),Se=()=>n(509679),_e=()=>n(724791),xe=()=>n(92110),je=()=>n(846550),we=()=>n(916095),Ce=()=>n(317589);function Te(e){let{header:t,paymentContent:n,orderOptions:a,footer:i,showDismissButton:s}=e;const d=(0,o().O7)(),{isMobile:l}=(0,o().Fy)(),c=(0,r().VK)((()=>(0,Ce().Z)(d)),[d])||!a,u=function(e){return(0,je().yK)((()=>({wrapper:{...!e&&{minWidth:506}},mobile:{display:"grid",gridTemplateRows:"1fr auto",overflow:"hidden auto"}})),[e])}(l),p=(0,te.jsxs)(A().jX,{direction:c?"column":"row",gap:c?20:32,style:{...l&&u.mobile},children:[(0,te.jsx)(A().jX,{direction:"column",gap:c?20:28,width:c?"fill":420,children:n}),(0,te.jsxs)(A().jX,{direction:"column",gap:c?20:28,width:c?"fill":310,children:[a,i]})]});return(0,te.jsxs)(A().jX,{direction:"column",gap:c?28:36,padding:32,width:"hug",height:"hug",style:u.wrapper,children:[t,p,s&&(0,te.jsx)(we().U4,{})]})}n(241792);var Me=()=>n(696459),Pe=()=>n(666414),Ae=()=>n(312578),Ee=()=>n(565577);function Ve(e){var t;const{state:n,data:a,promo:d,billingData:l,dueAtPeriodEnd:c,billingInterval:u,products:p}=e,{coupon:m,calculatingTax:g,taxAmount:b}=n,f=(0,o().O7)(),[h,I]=i.useState(!1),_=Ee().Zr(d),j=(0,y().V)(a),[w,C,T]=(0,r().VK)((()=>{const e=p.map((e=>v().Z.getPrice(f,(t=>t.product===e&&t.billingInterval===u))));let t,n;return"year"===u&&(t=p.map((e=>v().Z.getPrice(f,(t=>t.product===e&&"month"===t.billingInterval)))),n=p.map((e=>v().Z.getPrice(f,(t=>t.product===e&&"year"===t.billingInterval))))),[e,t,n]}),[u,f,p]);if(w.some((e=>!e.isLoaded)))return(0,te.jsx)(Ae().Z,{});const M=w.map((e=>e.result)).filter(Me().$K),P=null==C?void 0:C.map((e=>e.result)).filter(Me().$K),E=null==T?void 0:T.map((e=>e.result)).filter(Me().$K),V=M[0].unitAmount.currencyValue,k=(null===(t=(0,s().a7)(null==l?void 0:l.subscription,"sites_custom_hostnames"))||void 0===t?void 0:t.quantity)??0,D=(0,x().Vj)({prices:M,quantity:j,domainsQuantity:k}),U=p.filter((e=>(0,S().CF)(m,e,u))),F=U&&U.length>0,O=Ee().cv({items:D,coupon:F?m:void 0}),Z=F&&E,N=P&&E?Ee().cv({items:(0,x().Vj)({prices:Z?E:P,quantity:j,domainsQuantity:k})}).withMultipliedAmount(Z?1:12):void 0,B=N?N.minus(O):void 0,K=Ee().VT({calculatingTax:g,taxAmount:b,currencyValue:V}),q=Ee().rF({items:D,promo:_}),R=Ee().Et(a,V),L=O.plus(K).minus(q).minus(R),Q=L.amount<0?L.withMultipliedAmount(0):L,H=function(e){var t;let{hasDiscount:n,dueAtPeriodEnd:a,billingData:i,billingInterval:o}=e;if(n)return{chargeType:"immediate"};if(a&&null!=i&&null!==(t=i.subscription)&&void 0!==t&&t.currentPeriodEnd)return{chargeType:"nextPeriod",periodEnd:i.subscription.currentPeriodEnd};return{chargeType:void 0,billingInterval:o}}({hasDiscount:0!==q.amount&&0!==R.amount,dueAtPeriodEnd:c,billingData:l,billingInterval:u});return(0,te.jsxs)(A().jX,{gap:2,children:[(0,te.jsx)(_e().Mq,{total:Q,handleToggleExpanded:()=>I((e=>!e)),isExpanded:h,discount:q,accountBalance:R,annualPriceDifference:B,coupon:F?m:void 0,isTotalLoading:g,...H}),(0,te.jsx)(_e().MA,{isExpanded:h,children:(0,te.jsxs)(A().jX,{gap:12,children:[(0,te.jsx)(_e().tQ,{items:D,coupon:F?m:void 0}),(0,te.jsx)(Pe().Z,{size:1}),(0,te.jsx)(_e().J0,{subtotal:O,tax:K,discount:q,accountBalance:R,showDiscountLine:0!==q.amount&&_&&!m,isCalculatingTax:g,subtotalMonthly:N})]})})]})}var ke=()=>n(514508);function De(e){const{state:t,data:n,spaceStore:d,spaceViewStore:l}=e,u=(0,o().O7)(),y=(0,w().YB)(),O=(0,a().useStripe)(),N=(0,a().useElements)(),{isMobile:K}=(0,o().Fy)(),R=(0,g().pQ)({spaceId:d.id}),L=(0,r().VK)((()=>D().default.state.currentUserRootStore),[]),G=(0,ge().W)(),$=(0,r().VK)((()=>{if(c().Z.state.open)return c().Z.state.dismissMobilePlansModal}),[]),J=(0,r().VK)((()=>U().default.state.online),[]),ee=(0,r().VK)((()=>v().Z.state.selectedCurrencyCode??"USD"),[]),ie=function(){var e;const t=(0,o().O7)(),[n]=(0,ve().r5)((async()=>{const e=await fe().callApi({eventName:"getGeoIpLocation",environment:t,data:{}});if("success"===e.type)return e.data}),[t]),a=null==n||null===(e=n.value)||void 0===e?void 0:e.countryCodeFromIp;return!!(0,ye().GC)(a)&&(0,be().nz)(a)}(),oe=(0,k().s)(),re=(0,g().bA)(),je=(0,me().K)(),we=(0,r().VK)((()=>t.addOnFeature??(0,x().KE)(t.subscriptionTier)),[t.addOnFeature,t.subscriptionTier]),Ce=(0,s().lx)(null==R?void 0:R.subscription)&&G&&(0,I().jQ)(G.offer.campaign)&&we===(0,S().Ib)(G);(0,b().K)((()=>{const e=m().GJ(n);c().Z.update((t=>{var a;return{...t,appliedPromo:e?null===(a=n.customerData)||void 0===a?void 0:a.stripe.promo:void 0}})),e&&void 0!==(null==R?void 0:R.address)&&c().Z.setAddressField(null==R?void 0:R.address)}));const Me=(0,r().VK)((()=>{const e=[we];return((0,s().aV)(null==R?void 0:R.subscription)??[]).includes("ai")||Ce||e.push("ai"),e}),[we,R,Ce]),[{billingInterval:Pe,addOnFeature:Ae,name:Ee,businessName:De,vatId:Ue},Fe]=i.useState({billingInterval:"ai"===we?"year":"month",name:oe}),[Oe,Ze]=i.useState({}),[Ne,Be]=i.useState(),[Ke,qe]=i.useState(!1),Re=i.useCallback((e=>{Ne&&Be(void 0),Fe((t=>({...t,...e})))}),[Ne]),Le=i.useMemo((()=>(0,C().jj)((0,C().oA)([we,Ae]))),[Ae,we]),[Qe,He]=i.useState(!1);i.useEffect((()=>{re&&!t.coupon&&(c().Z.update((e=>({...e,coupon:"ai_fifty_percent"}))),async function(){await(0,le().WV)({environment:u,hasReceived:!1,offerType:"add_on_upgrade_flow",coupon:"ai_fifty_percent"})}())}),[t.coupon,re,u]),i.useEffect((()=>{je&&("month"===Pe&&"plus"===we&&(c().Z.update((e=>({...e,coupon:"resurrection_offer"}))),Qe||(!async function(){await(0,le().WV)({environment:u,hasReceived:!1,offerType:"resurrection_flow",coupon:"resurrection_offer"})}(),He(!0))),"year"===Pe&&"plus"===we&&c().Z.update((e=>({...e,coupon:void 0}))))}),[t.coupon,je,Pe,we,u,Qe]),i.useEffect((()=>{ce().W_({environment:u,billingInterval:Pe,vatId:Ue,billingData:R,addOn:Ae,onlyShowAddOn:"ai"===we})}),[u,Pe,Ae,Ue,R,we]);const Ye={month:(0,he().O)({billingInterval:"month",priceStore:v().Z,products:Me}),year:(0,he().O)({billingInterval:"year",priceStore:v().Z,products:Me})},Xe=(0,Ie().F)({asyncPrice:Ye[Pe??"month"].ai}),ze=(0,xe().j4)(R,re),Ge=(0,Ie().F)({asyncPrice:Ye.month[we]}),We=(0,Ie().F)({asyncPrice:Ye.year[we]}),$e=i.useCallback((async e=>{if(Be(void 0),!Ee)return void Ze((e=>({...e,name:{type:"required",message:y.formatMessage({id:"spaceSubscriptionUpgradeModal.name.required.error",defaultMessage:"Your name is required."})}})));if(T().PN(u,{modal_id:t.sessionId}),qe(!0),!N||!O)return(0,f().log)({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}}),Be(y.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})),void qe(!1);const a=await m().DI(u,d.id,n),i=await async function(e){const{billingEmail:t,coupon:n,currencyCode:a,environment:i,elements:o,billingInterval:r,name:s,businessName:d,vatId:l,intl:c,modalId:u,promo:m,quantity:g,selectedProducts:y,stripe:v,useTestClock:b}=e,f=await async function(e){const{modalId:t,modalType:n,environment:a,intl:i,elements:o,stripe:r}=e,s=i.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."}),{error:d}=await o.submit();if(d)return T().VQ(a,{error:"could not submit form",error_type:"payment_method",modal_id:t,modal_type:n}),{error:s};const{error:l,paymentMethod:c}=await r.createPaymentMethod({elements:o});if(l)return T().VQ(a,{error:l.message,error_type:"payment_method",modal_id:t,modal_type:n}),{error:p().translateStripeError(a,i,l)};if(!c)return T().VQ(a,{error:"could not create token",error_type:"payment_method",modal_id:t,modal_type:n}),{error:s};const u={type:"paymentMethodId",value:c.id},m=c.billing_details.address;return{paymentData:u,address:{zipCode:(null==m?void 0:m.postal_code)??"",country:q().P1.includes(c.type)?"KR":(null==m?void 0:m.country)??""}}}({modalId:u,environment:i,intl:c,elements:o,stripe:v});if("error"in f)return{error:f.error};return void(await se({address:{name:s??"",businessName:d??"",addressLine1:"",addressLine2:"",zipCode:f.address.zipCode??"",city:"",state:"",country:f.address.country??""},billingEmail:t,billingInterval:r,coupon:n,currencyCode:a,environment:i,modalId:u,paymentData:f.paymentData,promo:m,quantity:g,selectedProducts:y,stripe:v,vatId:l,useTestClock:b,intl:c}))}({billingEmail:m().Md(t,n,R),coupon:t.coupon,currencyCode:ee,environment:u,elements:N,intl:y,billingInterval:Pe,name:Ee,businessName:De,vatId:ie?Ue:void 0,modalId:t.sessionId,promo:t.appliedPromo,quantity:a,selectedProducts:Le,stripe:O,useTestClock:e.useTestClock});return null!=i&&i.error?(Be(i.error),void qe(!1)):(function(e){const{environment:t,modalId:n}=e;c().Z.reset(),T().LY(t,{modal_id:n})}({environment:u,modalId:t.sessionId}),"ai"===we?(F().default.reset(),function(e){const{environment:t,spaceStore:n,spaceViewStore:a,intl:i,currentUserRootStore:o}=e,r=(0,z().getAIUpgradeTemplate)({intl:i});if(!r)throw new Error("AI template not found");if(!o)throw new Error("Cannot create BlockStore: currentUserRootStore not found");const s=W().G.createChildStore(o,{table:B().iU,id:r.rootId});(0,Y().JI)({environment:t,blockStore:s,spaceStore:n,spaceViewStore:a,hideModal:!0,disableRedirect:!0,showDuplicationStartedToast:!1,showDuplicationFinishedToast:!1}).then((e=>{e&&H().oV({label:i.formatMessage({id:"spaceSubscriptionUpgradeModal.upgradeAi.success",defaultMessage:"You now have unlimited Notion AI"}),style:{gap:8,display:"flex"},right:(0,te.jsx)(ne,{onClick:()=>{Q()._c({environment:t,store:e,visitType:X().vu.Link,pageVisitSource:Z().tY.Duplicate})}})})})).catch((e=>{f().log({from:"client/checkoutActions",level:"error",type:"aiUpgrade.duplicationFailed",data:{message:"AI Upgrade duplication failed.  Block store not found"}})}))}({environment:u,spaceStore:d,spaceViewStore:l,intl:y,currentUserRootStore:L}),void(K&&(null==$||$()))):void M().r$({currentTab:"billing"}))}),[R,Pe,De,ee,L,n,N,u,y,K,Ee,$,we,Le,d,l,t,O,ie,Ue]),Je=(0,r().VK)((()=>(0,ae().G2)()&&!1),[]),et=[{buttonType:"primary",isDisabled:Ke,isLoading:Ke,label:_().Jg.some((e=>e===we))?(0,te.jsx)(w()._H,{id:"subscriptionUpgradeModal.upgradeButton.upgradeToPlan",defaultMessage:"Upgrade to {plan}",values:{plan:(0,j().v$)(we,y)}}):(0,te.jsx)(w()._H,{id:"subscriptionUpgradeModal.upgradeButton.upgradeAi",defaultMessage:"Upgrade now"}),onClick:()=>$e({useTestClock:!1})}];Je&&et.push({buttonType:"primary",isDisabled:Ke,label:"ðŸš§ Upgrade with Test Clock ðŸš§",onClick:()=>$e({useTestClock:!0})});const tt=["business","enterprise"].includes(we)?[{buttonType:"outline",label:(0,te.jsxs)(A().jX,{direction:"row",gap:6,align:"center",children:[(0,te.jsx)(E().y,{iconGroup:h().G,variantName:"default",colorName:"primary"}),(0,te.jsx)(w()._H,{id:"spaceSubscriptionSettings.upgradeModal.contactSales",defaultMessage:"Contact sales"})]}),onClick:()=>(0,de().nx)({initialQuestion:"enterprise"===we?"interest_in_enterprise":"interest_in_business",openedFrom:"enterprise"===we?"enterprise_checkout_modal":"business_checkout_modal"})}]:void 0;if(!J)return(0,te.jsx)(Se().L,{});const nt=(0,xe().We)({product:we,coupon:t.coupon});return Ce&&(nt.subtitle=(0,te.jsx)(V().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:{maxWidth:525},children:(0,te.jsx)(w()._H,{id:"subscriptionUpgradeModal.upgradeDuringTrial",defaultMessage:"Unlimited access to our most loved team features. If you choose not to upgrade, you will be on a free plan with restricted usage."})})),(0,te.jsx)(Te,{showDismissButton:!0,header:(0,te.jsx)(_e().ZI,{...nt,image:"ai"===we?(0,te.jsx)(P().fy,{variant:"medium",style:{}}):(0,te.jsx)(pe().q,{product:we})}),paymentContent:(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(_e().ge,{title:(0,te.jsx)(w()._H,{id:"subscriptionUpdateModal.billedTo",defaultMessage:"Billed to"}),name:Ee??"",onChangeName:e=>{Oe.name&&Ze((e=>({...e,name:void 0}))),Re({name:e})},businessName:De??"",onChangeBusinessName:e=>Re({businessName:e}),vatId:Ue,onChangeVatId:ie?e=>Re({vatId:e}):void 0,validationErrors:Oe,modalId:t.sessionId}),(0,te.jsx)(A().jX,{gap:8,style:{marginBottom:0},children:(0,te.jsx)(ke().n,{})})]}),orderOptions:ze?null:(0,te.jsxs)(A().jX,{gap:20,children:[(0,te.jsx)(_e().wJ,{selectedBillingInterval:Pe,monthlyUnitPrice:Ge,yearlyUnitPrice:We,onChange:e=>{T().FR(u,{billingInterval:e,modal_id:t.sessionId}),Re({billingInterval:e})},product:we,coupon:t.coupon}),Me.includes("ai")&&"ai"!==we?(0,te.jsx)(_e().hj,{selectedAddOn:Ae,unitPrice:Xe,onChange:e=>{T().qz(u,{addOnFeatures:e?[e]:void 0,modal_id:t.sessionId}),Re({addOnFeature:e})},coupon:t.coupon,billingInterval:Pe}):null]}),footer:(0,te.jsxs)(A().jX,{gap:16,children:[(0,te.jsx)(Ve,{state:t,data:n,billingInterval:Pe,products:Le,promo:t.appliedPromo,billingData:R,dueAtPeriodEnd:Ce}),(0,te.jsx)(_e().Rp,{primaryButtons:et,secondaryButtons:tt,termsOfService:(0,te.jsx)(ue().E,{showTrialEndDisclaimer:(0,s().lx)(null==R?void 0:R.subscription)&&!Ce,products:Le})}),Ne?(0,te.jsx)(V().q,{styleName:"Caption-12px/Regular",colorName:"uiRedPrimary",children:Ne}):null]})})}function Ue(e){let{data:t,spaceStore:n,spaceViewStore:a}=e;const i=(0,o().O7)(),s=(0,g().pQ)({spaceId:n.id}),p=(0,r().VK)((()=>c().Z.state),[]);return(0,te.jsx)(d().c,{ariaLabelledBy:l().BaY,isOpen:p.open,onClosed:()=>u().Fp(i),animateSizeTransition:!1,areaConstraint:{width:{type:"min",length:400}},render:()=>p.open?(0,te.jsx)("div",{style:{overflowY:"auto"},children:(0,te.jsx)(Fe,{state:p,billingData:s,data:t,spaceStore:n,spaceViewStore:a})}):null})}function Fe(e){const{state:t,billingData:n,data:i,spaceStore:o,spaceViewStore:d}=e,{subscriptionTier:l,onlyShowAddOn:c,calculatingTax:u,temporaryBillingInterval:g,taxAmount:b,addOnFeature:f,coupon:h}=t,I=(0,r().VK)((()=>(0,s().YF)(null==n?void 0:n.subscription)??v().Z.selectedCurrencyCode),[n]),S=(0,y().V)(i),{payAmount:_}=m().uN({subscriptionTier:l,memberCount:S,currencyCode:I,promo:t.appliedPromo,data:i,onlyShowAddOn:c,calculatingTax:u,billingInterval:g??"year",taxAmount:b,addOnFeature:f,coupon:h}),x=(0,p().useElementsOptions)({type:"subscription",amount:_.amount,currency:_.currencyCode}),j=(0,p().getStripe)();return(0,te.jsx)(a().Elements,{stripe:j,options:x,children:(0,te.jsx)(De,{spaceViewStore:d,state:t,data:i,spaceStore:o})})}},514508:(e,t,n)=>{n.d(t,{n:()=>y});var a=()=>n(629756),i=(a(),n(667294),()=>n(219727)),o=()=>n(142735),r=()=>n(846550),s=()=>n(667067),d=()=>n(788860),l=()=>n(979614),c=()=>n(212493),u=()=>n(876822),p=()=>n(145613),m=()=>n(724791),g=n(785893);function y(e){const{hideTitle:t,modalId:n}=e,y=(0,i().O7)(),v=(0,r().yK)((e=>({lockIcon:{width:12,color:e.icon.tertiary}})),[]),b={defaultValues:{billingDetails:(0,o().VK)((()=>{const e=u().default.state.currentUserStore;return{email:null==e?void 0:e.getEmail(),name:null==e?void 0:e.getName()}}),[])}};return(0,g.jsx)(m().FC,{title:t?null:(0,g.jsxs)(c().jX,{direction:"row",gap:"auto",align:"center",children:[(0,g.jsx)(d()._H,{id:"checkoutPaymentField.paymentDetails.title",defaultMessage:"Payment details"}),(0,s().Q)(v.lockIcon)]}),children:(0,g.jsx)(a().PaymentElement,{options:b,onChange:e=>{l().Dc(y,{event:e,modal_id:n}),p().Z.update((e=>{if(!e.open)return e;const{paymentData:t,...n}=e;return n}))}})})}},46135:(e,t,n)=>{n.d(t,{default:()=>i});class a extends(()=>n(263184))().default{getInitialState(){return{open:!1,succeeded:!1}}close(){this.setState({open:!1,succeeded:!1})}closeWithSuccess(){this.setState({open:!1,succeeded:!0})}open(e){this.setState({open:!0,temporaryBillingInterval:"month",temporaryAddress:{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""},appliedPromo:void 0,error:void 0,vatApplicable:!1,calculatingTax:!1,payButtonState:"disabled",subscriptionTier:"enterprise",targetPlan:void 0,targetSpace:e,totalUpgradeCost:void 0,onlyShowAddOn:!1,sessionId:n(956057).Il(),type:n(145613).U.TargetSpace})}setAddressField(e){this.state.open&&this.setState({...this.state,temporaryAddress:{...this.state.temporaryAddress,...e},taxCalculationError:void 0})}}const i=new a},701611:(e,t,n)=>{n.d(t,{G:()=>a});const a=(0,n(827282).CZ)("infoBubble",{default:{loader:()=>n.e(48506).then(n.bind(n,748506))},small:{loader:()=>n.e(66398).then(n.bind(n,66398))},mini:{loader:()=>n.e(7873).then(n.bind(n,707873))},large:{loader:()=>n.e(3020).then(n.bind(n,903020))}})}}]);