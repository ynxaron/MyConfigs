"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[43468],{787738:(e,t,o)=>{o.d(t,{K:()=>s});var r=()=>o(594546);function s(e,t){const{spaceId:o,pageId:s,joinSpaceMethod:i}=t;(0,r().j)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:o,pageId:s,joinSpaceMethod:i}}})}},837600:(e,t,o)=>{o.d(t,{Z:()=>i});var r=o(667294),s=()=>o(231077);function i(e){return(0,r.useEffect)((()=>{document.title=e.title,s().setWindowTitle(e.title)}),[e.title]),e.children}},184495:(e,t,o)=>{o.d(t,{Z:()=>C});var r=o(667294),s=()=>o(219727),i=()=>o(142735),n=()=>o(263184),a=()=>o(788860),l=()=>o(568017),c=()=>o(696459),d=()=>o(707513),u=()=>o(438793),g=()=>o(912732),p=()=>o(787738),m=()=>o(824462),f=()=>o(443269),h=()=>o(352230),x=()=>o(876822),v=()=>o(697623),j=()=>o(154439),S=()=>o(206352),b=()=>o(291198),y=()=>o(198829),M=()=>o(661297),w=()=>o(906651),_=o(785893);const P={marginBottom:10},k={...P,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},I=(0,a().vU)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function E(){return(0,_.jsx)(a()._H,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const T=n().default.createClass(0,{name:"RequestAttemptStore"}),A=n().default.createClass(void 0,{name:"MessageStore"});const C=function(e){const t=(0,s().O7)(),n=(0,s().MO)(),l=(0,i().qz)(void 0,o(529048).Z),c=(0,i().qz)(void 0,A),g=(0,i().qz)(void 0,T),m=(0,r.useCallback)((()=>q(l)),[l]),f=(0,r.useCallback)((()=>(0,_.jsx)(R,{...e,requestAttemptStore:g,messageStore:c,buttonPopupStore:l})),[e,g,c,l]),h=(0,i().VK)((()=>g.state>0),[g]),x=(0,i().VK)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,_.jsx)(Z,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,_.jsx)(Z,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const v="primary"===e.buttonType?w().Z:M().Z;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v,{isLarge:!0,disabled:h,onClick:()=>{var o,r;return function(e,t){const{environment:o,flowId:r,type:s,source:i,spaceId:n,pageId:a}=e;"trusted_domain_page"===i&&n&&p().K(o,{spaceId:n,pageId:a,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===s?u().zX(o,{button_name:"request-access",flow_id:r,request_access_type:"page"}):"current-actor-to-space-via-team"===s&&u().zX(o,{button_name:"request-access",flow_id:r,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(o=e.block)||void 0===o?void 0:o.id,spaceId:null===(r=e.block)||void 0===r?void 0:r.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Ue.semibold}:{},children:h?(0,_.jsx)(a()._H,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):V(e.type)}),n?(0,_.jsx)(o(967092).ZP,{popupType:o(104088).k.SlideUp,open:x,render:f}):(0,_.jsx)(o(708518).Z,{open:x,onDismiss:m,render:f})]})};function B(e){let{result:t}=e;return t&&t.error?(0,_.jsx)("div",{style:{color:l().ZP.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function D(e){e.update((e=>e+1))}function q(e){return e.setState({open:!1})}function H(e){let{error:t,result:o,ready:n,requestAttemptStore:l,messageStore:c,type:u}=e;const g=(0,a().YB)(),p=(0,s().MO)(),m=(0,r.useCallback)((()=>D(l)),[l]),f=(0,r.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),h=(0,i().VK)((()=>Boolean(0===l.state||n&&o&&o.error)),[l,n,o]),x=(0,i().VK)((()=>c.state||""),[c]);return(0,_.jsxs)(_.Fragment,{children:[!p&&(0,_.jsx)("div",{style:{fontSize:16,fontWeight:d().Ue.semibold,marginBottom:16},children:V(u)}),(0,_.jsx)(b().Z,{format:p?b().B.Transparent:void 0,textarea:!0,value:x,onChange:f,disabled:!h,placeholder:g.formatMessage(I.requestAccessMessagePlaceholder),style:{...p?{...k,padding:"16px"}:{...P,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!p&&(0,_.jsx)(w().Z,{isLarge:!0,disabled:!h,onClick:m,style:P,children:(0,_.jsx)(a()._H,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,_.jsx)(B,{result:o})]})}function R(e){const{requestAttemptStore:t,messageStore:o,buttonPopupStore:n}=e,l=(0,s().O7)(),d=(0,s().MO)(),u=(0,a().YB)(),p=(0,r.useCallback)(((r,s,i)=>(0,_.jsx)(H,{requestAttemptStore:t,messageStore:o,error:r,result:s,ready:i,type:e.type})),[t,o,e.type]),v=(0,i().VK)((()=>{var e;return null===(e=x().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),b=(0,r.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:o,type:r,teamId:s,requestAttempt:i,environment:n,currentUserId:a,intl:l,flowId:d}=e;if(0===i)return;const u=t.state,p=await async function(){if("current-actor-to-block"===r)return m().callApi({eventName:"requestAccess",environment:n,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===r)return m().callApi({eventName:"requestAccess",environment:n,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===r)return m().callApi({eventName:"requestAccess",environment:n,data:{type:"current-actor-to-space-via-team",teamId:s,message:u}});if("current-actor-to-space-via-block"===r){if(!a)return;return m().callApi({eventName:"requestAccess",environment:n,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:a,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}}();return p?"success"!==p.type?"UserRateLimitResponse"===(null===(h=p.body)||void 0===h?void 0:h.name)?{error:l.formatMessage(I.rateLimitError)}:{error:(0,f().wf)(l,p)}:("current-actor-to-block"===r?g().dU(n,{request_access_type:"page",flow_id:d,requestId:p.data.requestId}):"current-actor-to-space-via-team"===r?g().dU(n,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===r?g().dU(n,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===r?g().dU(n,{request_access_type:"collection",flow_id:d,requestId:p.data.requestId}):(0,c().t1)(r),o.reset(),{value:!0}):{error:l.formatMessage(I.currentUserNotFound)};var h}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:v})),[l,u,e,v]),w=(0,r.useCallback)((()=>D(t)),[t]),P=(0,r.useCallback)((()=>q(n)),[n]),k=(0,i().Kw)(t);return d?(0,_.jsx)(y().Z,{menuType:h().o.Modal,whiteBackground:!0,title:V(e.type),left:E(),onClickLeft:P,right:(0,_.jsx)(a()._H,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:w,children:(0,_.jsx)(S().Z,{debugName:"RequestAccessForm",capture:!0,children:(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,_.jsx)(j().Z,{request:k,performRequest:b,render:p})})})}):(0,_.jsx)(S().Z,{debugName:"RequestAccessForm",capture:!0,children:(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,_.jsx)(j().Z,{request:k,performRequest:b,render:p}),(0,_.jsx)(M().Z,{onClick:P,children:E()})]})})}function Z(e){const{type:t,flowId:o,buttonType:n}=e,l=(0,s().O7)(),d="outline"===n?M().Z:w().Z,[u,p]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!1),x={attributes:{add_permissions_on_approval:!1,role:(0,i().VK)((()=>(0,v().QM)()),[])?"reader":"read_and_write"},message:void 0};let j;"page"===t?j={...x,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?j={...x,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().t1)(t);const S=(0,r.useCallback)((async()=>{var e;const r=await m().callApi({eventName:"requestAccess",environment:l,data:j});"success"===r.type&&r.data.request?(p(!0),g().dU(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:o,requestId:r.data.requestId})):"failed"===r.type&&"UserRateLimitResponse"===(null===(e=r.body)||void 0===e?void 0:e.name)&&h(!0)}),[l,j,t,o]);return(0,_.jsx)(d,{isLarge:!0,disabled:u||f,disabledFeedback:u||f,onClick:S,children:u?(0,_.jsx)(a()._H,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):f?(0,_.jsx)(a()._H,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):V("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function V(e){return"current-actor-to-space-via-block"===e?(0,_.jsx)(a()._H,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,_.jsx)(a()._H,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},306881:(e,t,o)=>{o.r(t),o.d(t,{PageError:()=>ze,PageError404:()=>Tt,PageErrorDivider:()=>Ge,getPageWrapperStyle:()=>et});o(267602),o(916054),o(470928);var r=o(667294),s=()=>o(146947),i=()=>o(219727),n=()=>o(142735),a=()=>o(846550),l=()=>o(506347),c=()=>o(714230),d=()=>o(799891),u=()=>o(998411),g=()=>o(252818),p=o(785893);const m=(0,o(827282).IU)("googlePlay",{viewBox:"0 0 14 14",svg:(0,p.jsx)("path",{d:"M3.41741,13.7929001 L13.0843,8.42241009 C14.2002,7.80245009 14.2002,6.19755009 13.0843,5.57759009 L3.41741,0.207109087 C2.33284,-0.395426913 1,0.388821087 1,1.62952009 L1,12.3705001 C1,13.6112001 2.33284,14.3954001 3.41741,13.7929001 Z"})});var f=()=>o(968061),h=()=>o(182068),x=()=>o(567319),v=()=>o(95886),j=()=>o(836273),S=()=>o(282017),b=()=>o(467171),y=()=>o(788860),M=()=>o(568017),w=()=>o(707513),_=()=>o(491927),P=()=>o(438793),k=()=>o(510161),I=()=>o(146630),E=()=>o(231077),T=()=>o(418216),A=()=>o(13382),C=()=>o(508383),B=()=>o(47443),D=()=>o(752127),q=()=>o(497065),H=()=>o(224597),R=()=>o(358414),Z=()=>o(663366),V=()=>o(306743),F=()=>o(937419),N=()=>o(886123),O=()=>o(718959),K=()=>o(247724),U=()=>o(527278),W=()=>o(148126),L=()=>o(345918),z=()=>o(323342),Y=()=>o(341691),G=()=>o(193961),J=()=>o(347390),X=()=>o(772327),$=()=>o(158177),Q=()=>o(594723),ee=()=>o(274328),te=()=>o(210673),oe=()=>o(291550),re=()=>o(279174),se=()=>o(741636),ie=()=>o(686350),ne=()=>o(707138),ae=()=>o(845465),le=()=>o(681832),ce=()=>o(793935),de=()=>o(853249),ue=()=>o(998901),ge=()=>o(876822),pe=()=>o(183211),me=()=>o(804217),fe=()=>o(972218),he=()=>o(725751),xe=()=>o(749826),ve=()=>o(257934),je=()=>o(148882),Se=()=>o(350974),be=()=>o(56810),ye=()=>o(482162),Me=()=>o(885414),we=()=>o(897257),_e=()=>o(431041),Pe=()=>o(154186),ke=()=>o(265640),Ie=()=>o(666414),Ee=()=>o(573357),Te=()=>o(108714),Ae=()=>o(729775),Ce=()=>o(661297),Be=()=>o(906651),De=()=>o(943620),qe=()=>o(67961),He=()=>o(837600),Re=()=>o(323107),Ze=()=>o(765513),Ve=()=>o(251932),Fe=()=>o(441305),Ne=()=>o(184495);function Oe(e){let{canRequestAccess:t,pageTitle:o,inSudoModeAndInTrash:r}=e;return t?r?o?(0,p.jsx)(y()._H,{id:"fullPageError.canReqestAccess.inTrash.titleWithPageName",defaultMessage:"No access to {pageTitle} in Trash",values:{pageTitle:o}}):(0,p.jsx)(y()._H,{id:"fullPageError.canRequestAccess.inTrash.title",defaultMessage:"No access to this page in Trash"}):o?(0,p.jsx)(y()._H,{id:"fullPageError.canRequestAccess.titleWithPageName",defaultMessage:"No access to {pageTitle}",values:{pageTitle:o}}):(0,p.jsx)(y()._H,{id:"fullPageError.canRequestAccess.title",defaultMessage:"No access to this page"}):(0,p.jsx)(y()._H,{id:"fullPageError.noAccess.title",defaultMessage:"Page not found"})}const Ke={fontWeight:w().Ue.bold},Ue={display:"flex",justifyContent:"center",marginBottom:16,marginTop:16,flexWrap:"wrap",zIndex:1},We={width:14,height:14,marginRight:6,flexShrink:0},Le={maxWidth:300};function ze(e){let{route:t,publicPageData:o,shouldRedirectFromHome:s}=e;const a=(0,i().O7)(),c=$e(a),d=(0,n().qz)(void 0,Se().Z),u=(0,n().qz)(void 0,Me().Z),g=(0,n().qz)(void 0,ve().ZP),m=(0,n().qz)(void 0,oe().Z),f=(0,n().qz)(void 0,re().Z),h=(0,r.useRef)(!1),x=(0,n().VK)((()=>d.state.flowId),[d]),v=(0,n().VK)((()=>{var e;return null===(e=ge().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id}),[]),j=(0,n().VK)((()=>{var e;return(null===(e=ge().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isPlaceholderWorkflowTemplateBlock())??!1}),[]),b=(0,n().VK)((()=>d.state.didPerformAction),[d]),y=(0,n().VK)((()=>!me().default.state.online),[]),M=(0,n().VK)((()=>{var e;const{mainEditorCurrentBlockStore:t}=ge().default.state;return null==t||null===(e=t.getModel())||void 0===e?void 0:e.isNonverifiedContentClassification()}),[]);(0,r.useEffect)((()=>{ye().default.state.open&&C().E(ye().default.state.presenceStore,a,be().jx,ye().default.state.targetStore),C().E(ge().default.state.presenceStore,a,be().$g,ge().default.state.mainEditorCurrentBlockStore),ce().cancelSidebarInitialRenderLog()}),[a]),(0,r.useEffect)((()=>{if(!h.current&&(h.current=!0,T().setInitialRenderCompleted(),s&&async function(e){let{environment:t,flowId:o}=e;const r=ge().default.state.currentSpaceViewStore;if(!r)return;Qe("invalid_home_block",o,t);const s=await(0,L().rg)(t,r);s&&B()._c({environment:t,store:s,openInNew:void 0,templateGalleryItem:void 0,projectManagementLaunch:!1,pageVisitSource:l().tY.PersonalHomeErrorRedirect})}({environment:a,flowId:x}),$e(a)||(0,S().gi)(window.location.href),a.device.isElectron||a.mobileNative)){const e=null==o?void 0:o.requireInterstitial;if(e){const t=e+window.location.hash;D().D({environment:a,url:t}),W().NW(a)?q().op(a):E().closeTab()}}}),[a,x,null==o?void 0:o.requireInterstitial,s]);const w=(0,n().VK)((()=>ge().default.state.currentSpaceStore),[]);return(0,r.useEffect)((()=>{R().i({environment:a,sudoModeStore:u,pageBlockId:v,currentSpaceStore:w})}),[a,v,u,w]),b?null:y?(0,p.jsx)(ht,{store:d,sudoModeStore:u,loginModalStore:m,loginStore:f}):"teamsInvite"===t.name&&c?(0,p.jsx)(kt,{publicPageData:o,route:t,store:d,sudoModeStore:u,inviteTargetsStore:g,loginModalStore:m,loginStore:f,data:o,source:"teamsInvite",canJoinSpace:!0}):"initiateExternalAuthenticationFromDesktop"===t.name?(0,p.jsx)(yt,{route:t,store:d,sudoModeStore:u,loginModalStore:m,loginStore:f}):j?(0,p.jsx)(Tt,{route:t,store:d}):o?o&&"onboarding"===t.name?(0,p.jsx)(kt,{publicPageData:o,route:t,store:d,sudoModeStore:u,inviteTargetsStore:g,loginModalStore:m,loginStore:f,data:o,source:"onboarding",canJoinSpace:!1}):null!=o&&o.spaceName?M&&o.requireInterstitial?(0,p.jsx)(Tt,{route:t,store:d}):o.requireInterstitial?(0,p.jsx)(xt,{href:o.requireInterstitial+window.location.hash,urlToDisplay:o.requireInterstitial,store:d}):M?(0,p.jsx)(bt,{route:t,store:d}):c?(0,p.jsx)(At,{route:t,publicPageData:o,pageErrorStore:d,sudoModeStore:u,inviteTargetsStore:g,loginModalStore:m,loginStore:f}):(o.requireLogin,(0,p.jsx)(jt,{store:d,data:o})):(0,p.jsx)(Tt,{route:t,store:d}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(de().Z,{skipFadeinDelay:!0})]})}function Ye(){return(0,h().C)({width:50,height:50,marginBottom:16})}function Ge(){return(0,p.jsx)(Ie().Z,{size:48,innerStyle:{maxWidth:280}})}function Je(e){let{inviteeEmail:t}=e;return t?(0,p.jsx)(y()._H,{id:"signupPage.subtitle.invitationVersion",defaultMessage:"Please check {invitee_email} for your temporary login code.",values:{invitee_email:(0,p.jsx)("b",{children:t})}}):null}function Xe(){const e=(0,i().Fy)(),{isShowingTabBar:t,isFullscreen:o}=(0,n().VK)((()=>({isShowingTabBar:he().default.state.isShowingTabBar,isFullscreen:pe().Z.state.isFullScreen})),[]);return!e.isElectron||t||o?null:(0,p.jsx)("div",{className:K().pMC,style:{width:"100%",height:b().R6(e.isElectronMac),position:"absolute",top:0,left:0}})}function $e(e){return!!e.currentUser.id}function Qe(e,t,o){P().AM(o,{type:e,flow_id:t})}function et(e){const{device:t}=e;return{width:"100vw",paddingLeft:t.isMobile?16:30,paddingRight:t.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}function tt(e){const{device:t}=e;return{width:"100vw",paddingLeft:t.isMobile?16:30,paddingRight:t.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",paddingTop:t.isTablet?"20vh":"12vh"}}function ot(){const e=(0,i().O7)(),{isMobile:t,isElectronMac:o,isElectron:r}=e.device,{isShowingTabBar:s,isFullscreen:a}=(0,n().VK)((()=>({isShowingTabBar:he().default.state.isShowingTabBar,isFullscreen:pe().Z.state.isFullScreen})),[]);return(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingTop:!r||s||a?20:b().R6(o),maxWidth:1300,paddingLeft:20,paddingRight:20},children:[(0,h().C)({width:t?28:30,height:t?28:30,marginRight:10,flexShrink:0}),(0,p.jsx)("div",{style:{fontWeight:w().Ue.medium,fontSize:16},children:"Notion"})]})}function rt(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{device:r}=e;return{fontSize:r.isMobile?18:20,marginBottom:10,textAlign:"center",color:t.regularTextColor,fontWeight:500,maxWidth:350,...o}}function st(e){let{environment:t,currentRoute:o}=e;return(0,r.useEffect)((()=>{q().c4({environment:t,url:`/home?p=${o.peekViewBlockId}&pm=${o.peekMode}`})}),[t,o]),null}function it(e){let{isElectron:t,publicPageData:o,showInvitationVersion:r,inviterName:n,greetingStyle:l,iconBoxInitialStyle:c,trustedDomain:d}=e;const u=(0,a().Fg)(),g=(0,i().O7)(),m=(0,y().YB)(),f=Boolean(d)&&"none"===o.publicAccessRole;return(0,p.jsxs)(p.Fragment,{children:[t&&(0,p.jsx)(He().Z,{title:m.formatMessage({defaultMessage:"Log in",id:"errorPage.loggedOutWorkspace.title"})}),r?(0,p.jsx)("div",{style:{fontSize:28,fontWeight:700,maxWidth:358,letterSpacing:.364,lineHeight:1.2,textAlign:"center",fontFamily:w().F5(s().locale).sans},children:n?(0,p.jsx)("div",{children:(0,p.jsx)(y()._H,{id:"signupPage.title.showInvitationVersion",defaultMessage:"Verify your email to accept {inviter_name}'s invite",values:{inviter_name:n}})}):(0,p.jsx)("div",{children:(0,p.jsx)(y()._H,{id:"signupPage.title.showInvitationVersion.noInviterName",defaultMessage:"Verify your email to accept the invite"})})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Fe().Z,{type:Fe().i.NoAccess,publicPageData:o,iconBoxInitialStyle:c}),(0,p.jsx)("div",{style:rt(g,u,l),children:f?(0,p.jsx)(y()._H,{id:"fullPageError.domainSharingPage.message",defaultMessage:"Sign in to view this shared page"}):(0,p.jsx)(y()._H,{id:"fullPageError.improveLoggedOutLandingExp.message",defaultMessage:"Sign in to see this page in {workspaceName}",values:{workspaceName:(0,p.jsx)("span",{style:Ke,children:o.spaceName})}})})]})]})}function nt(e){V().j_({environment:e,from:"page_error"})}function at(){const e=(0,i().O7)();return(0,p.jsx)("div",{style:Ue,children:(0,p.jsx)(qe().Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!1,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(y()._H,{id:"fullPageError.somethingWrong.label",defaultMessage:"Something wrong?"}),(0,p.jsx)(Te().Z,{onClick:()=>nt(e),style:{textDecoration:"underline",paddingLeft:"4px"},children:(0,p.jsx)(y()._H,{id:"fullPageError.reportAProblem.label",defaultMessage:"Report a problem"})})]})})})}function lt(e){let{buttonStyles:t={}}=e;const o=(0,i().O7)();return(0,p.jsxs)("div",{style:Ue,children:[(0,p.jsx)(Te().Z,{href:"https://www.notion.com/product",external:!0,children:(0,p.jsxs)(ke().D,{isGray:!0,...t,children:[(0,f().h)({width:16,height:16,marginRight:8}),(0,p.jsx)(y()._H,{id:"fullPageError.whatIsNotionButton.label",defaultMessage:"What is Notion?"})]})}),(0,p.jsx)(ke().D,{onClick:()=>nt(o),...t,style:{marginLeft:4,...t.style},isGray:!0,children:(0,p.jsx)(y()._H,{id:"fullPageError.sendMessageButton.label",defaultMessage:"Message support"})}),(0,p.jsx)(Te().Z,{href:j()._j.termsAndPrivacy,external:!0,style:{marginLeft:4},children:(0,p.jsx)(ke().D,{isGray:!0,...t,children:(0,p.jsx)(y()._H,{id:"fullPageError.termsAndPrivacyButton.label",defaultMessage:"Terms"})})})]})}function ct(e){let{sudoModeStore:t}=e;const o=(0,a().Fg)(),r=(0,n().VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),s=(0,n().Kw)(t);return r&&s.privatePageStore&&!s.changePermissionsEnabled?(0,p.jsxs)("div",{style:{background:o.cardBackground,borderRadius:4,padding:18,margin:24,width:400},children:[(0,p.jsx)(qe().Z,{isMultiline:!0,style:{textAlign:"center"},children:(0,p.jsx)(y()._H,{id:"fullPageError.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,p.jsx)("b",{children:t})}}})}),(0,p.jsxs)(Ce().Z,{style:{fontWeight:w().Ue.medium,justifyContent:"center",margin:"18px auto 12px"},onClick:()=>t.setState({...t.state,changePermissionsEnabled:!0}),children:[(0,x().I)({width:16,height:16,marginRight:6}),(0,p.jsx)(y()._H,{id:"fullPageError.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"})]})]}):null}function dt(e){let{sudoModeStore:t,inviteTargetsStore:o}=e;const r=(0,a().Fg)(),s=(0,n().VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),i=(0,n().Kw)(t);return s&&i.privatePageStore&&i.changePermissionsEnabled?(0,p.jsx)("div",{style:{textAlign:"left",borderRadius:4,background:r.modalBackground,position:"relative",boxShadow:r.shadowMD,width:ae().SD,margin:"24px auto"},children:(0,p.jsx)(N()._,{store:i.privatePageStore,sudoModeStore:t,inviteTargetsStore:o,location:"no_access_page",onClose:()=>le().default.reset()})}):null}function ut(e){let{sudoModeStore:t,loginModalStore:o,loginStore:s,trustedDomain:l,hideChangePermissions:c}=e;const d=(0,a().Fg)(),u=(0,i().O7)(),g=(0,n().VK)((()=>(0,O().B7)(u)),[u]),m=je().transactionQueue.hasTasks(),f=(0,n().VK)((()=>ge().default.state.mainEditorCurrentBlockStore),[]),h=(0,n().VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),x=(0,n().VK)((()=>null==g?void 0:g.getEmail()),[g]);let v;return(0,r.useEffect)((()=>{f&&I()._S({environment:u,store:f})}),[u,f]),v=m?(0,p.jsx)(qe().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,p.jsx)(y()._H,{id:"fullPageError.sendMessageForHelp.message",defaultMessage:"<sendmessagelink>Message support</sendmessagelink> for help.",values:{sendmessagelink:e=>(0,p.jsx)(Ze().Z,{onClick:()=>nt(u),children:e})}})}):(0,p.jsx)(qe().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,p.jsx)(y()._H,{id:"fullPageError.wrongAccountRequestAccess.message",defaultMessage:"You might need to <loginlink>log in</loginlink> with a different email.",values:{loginlink:e=>Q().kH(u)?(0,p.jsxs)(Ze().Z,{onClick:()=>{o.setState({open:!0})},children:[e,(0,p.jsx)(X()._,{loginModalStore:o,loginStore:s,title:(0,p.jsx)(y()._H,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,p.jsx)(y()._H,{id:"sidebarSwitcherMultiAccount.addAccount.description",defaultMessage:"Use an existing account, or sign up with a new email. Your current account will remain logged in."}),className:K().zYS,trustedDomain:l})]}):(0,p.jsx)(Ze().Z,{href:j()._j.logout,onClick:()=>Y().logout(u),children:e})}})}),(0,p.jsxs)("div",{style:{textAlign:"center"},children:[h&&!Boolean(c)?(0,p.jsx)(ct,{sudoModeStore:t}):(0,p.jsx)(Ge,{}),(0,p.jsx)(qe().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,p.jsx)(y()._H,{id:"fullPageError.wrongLoggedInUserError.message",defaultMessage:"You're currently logged in as {currentlyLoggedInUser}",values:{currentlyLoggedInUser:(0,p.jsx)("span",{style:{color:d.regularTextColor},children:x})}})}),v]})}function gt(e){const t=e.state.privatePageStore;if(!e.shouldUserHaveAccessToPrivatePageBlock()||!t)return;const o=t.getModel();if(!o)return;const r=o.getRenderTitleWithPlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,u().r)(),intl:U().Z.getIntl()}),s=o.getRenderIcon({getRecordModel:t.getRecordModel});return(0,p.jsxs)(p.Fragment,{children:[s&&(0,p.jsx)(De().Z,{isEmptyPage:!0,disabled:!0,icon:s,size:24,style:{display:"inline-block",marginRight:4}}),r&&(0,p.jsx)("span",{children:r})]})}function pt(e){let{sudoModeStore:t}=e;const o=(0,a().Fg)(),r=(0,i().O7)(),s=(0,n().VK)((()=>gt(t)),[t]),l=(0,n().VK)((()=>{var e;return null===(e=ge().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]);return(0,p.jsxs)("div",{style:{background:o.cardBackground,borderRadius:4,padding:18,margin:"24px auto 0",width:400},children:[(0,p.jsx)("div",{style:{...rt(r,o),fontWeight:w().Ue.semibold,marginBottom:6},children:s?(0,p.jsx)(y()._H,{id:"fullPageError.changePermissions.titleWithPageName",defaultMessage:"Change permissions for {pageTitle}",values:{pageTitle:s}}):(0,p.jsx)(y()._H,{id:"fullPageError.changePermissions.title",defaultMessage:"Change permissions for this page"})}),(0,p.jsx)(qe().Z,{isMultiline:!0,style:{textAlign:"center"},children:l?(0,p.jsx)(y()._H,{id:"fullPageError.workspaceOwner.changePermissions.descriptionWithSpaceName",defaultMessage:"As a workspace owner for <b>{spaceName}</b>, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,p.jsx)("b",{children:t})},spaceName:l}}):(0,p.jsx)(y()._H,{id:"fullPageError.workspaceOwner.changePermissions.description",defaultMessage:"As an owner of this workspace, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,p.jsx)("b",{children:t})}}})})]})}function mt(e){let{data:t,sudoModeStore:o,inSudoModeAndInTrash:r}=e;const s=(0,a().Fg)(),l=(0,i().O7)(),c=(0,n().VK)((()=>gt(o)),[o]),d=Boolean(t.canRequestAccess);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:Ye()}),(0,p.jsx)("div",{style:{...rt(l,s),fontWeight:w().Ue.semibold,marginBottom:6},children:(0,p.jsx)(Oe,{canRequestAccess:d,pageTitle:c,inSudoModeAndInTrash:r})}),(0,p.jsx)("div",{style:{...rt(l,s),color:s.mediumTextColor,fontWeight:w().Ue.regular,lineHeight:1.4},children:d?r?(0,p.jsx)(y()._H,{id:"fullPageError.pageInTrash.message",defaultMessage:"As a <bold>workspace owner</bold>, you can restore this page to update access to it",values:{bold:e=>(0,p.jsx)("b",{children:e}),br:(0,p.jsx)("br",{})}}):(0,p.jsx)(y()._H,{id:"fullPageError.canRequestAccess.message",defaultMessage:"You can access this page if someone approves your request."}):(0,p.jsx)(y()._H,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"You don't have permission to access this page."})})]})}function ft(e){const{publicPageData:t,environment:o,flowId:r,store:s,skipClickLogging:i}=e;s.setState({...s.state,didPerformAction:!0}),i||P().zX(o,{button_name:"join-workspace",flow_id:r});const{currentUserRootStore:n,currentUserSettingsStore:a}=ge().default.state;if(n&&a&&t.spaceId){const e=t.spaceId;H().j({environment:o,userRootStore:n,spaceId:e,navigate:!0,analyticsFrom:"page_error",userSettingsStore:a})}}function ht(e){let{store:t,sudoModeStore:o,loginModalStore:s,loginStore:n}=e;const l=(0,a().Fg)(),c=(0,i().O7)();return(0,r.useEffect)((()=>{Qe("offline",t.state.flowId,c),_().DC(c,{type:"page_error"})}),[t,c]),(0,p.jsxs)("div",{style:et(c),children:[(0,p.jsx)(Xe,{}),(0,p.jsxs)("div",{style:rt(c,l),children:[(0,p.jsx)(y()._H,{id:"fullPageError.offlineError.message",defaultMessage:"Oops, you seem to be offline. Please go online to view this page."}),(0,p.jsx)(ut,{sudoModeStore:o,loginModalStore:s,loginStore:n})]})]})}function xt(e){let{href:t,urlToDisplay:o,store:s}=e;const n=(0,a().Fg)(),l=(0,i().O7)();return(0,r.useEffect)((()=>Qe("incorrect_domain_interstitial_block",s.state.flowId,l)),[s,l]),(0,p.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,p.jsxs)("div",{style:{...et(l),height:"100%"},children:[(0,p.jsx)(Xe,{}),(0,p.jsx)("div",{style:{...rt(l,n),maxWidth:"240px"},children:(0,p.jsx)(y()._H,{id:"fullPageError.publicDomainInterstitial.title",defaultMessage:"Continue to external site by following the link below"})}),(0,p.jsx)(qe().Z,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,p.jsx)(Te().Z,{href:t,external:!1,style:{textDecoration:"underline",color:M().ZP.blue,overflowWrap:"anywhere"},children:o})}),(0,p.jsxs)(Ve().gq,{gap:8,children:[(0,p.jsx)(Ce().Z,{onClick:()=>{d().log({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateBack",canGoBack:W().NW(l)}}}),W().NW(l)?q().op(l):q().c4({environment:l,url:"/home"})},children:(0,p.jsx)(y()._H,{id:"PageError.IncorrectDomainInterstitialButton.back.label",defaultMessage:"Go back"})}),(0,p.jsx)(ke().D,{isLightGray:!0,onClick:()=>{d().log({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateHome"}}}),q().c4({environment:l,url:"/home"})},children:(0,p.jsx)(y()._H,{id:"PageError.IncorrectDomainInterstitialButton.home.label",defaultMessage:"Take me Home"})})]})]}),(0,p.jsx)("div",{style:{position:"fixed",width:"100%",bottom:0},children:(0,p.jsx)(at,{})})]})}function vt(e){const t=(0,a().yK)((t=>{const o=e.themeOverride??t;return{backgroundImg:{position:"absolute",top:230,WebkitMask:"linear-gradient(to bottom, rgba(0,0,0,1) 50%, rgba(0,0,0,0) 100%)",zIndex:0},wrapper:{boxShadow:o.shadowMD,zIndex:1,border:`1px ${o.stroke.primary}`,background:o.modalBackground,borderRadius:20,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",padding:40},loginDisclaimer:{color:o.text.secondary,maxWidth:400}}}),[e.themeOverride]);return e.isEnabled?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("img",{src:c().Z.images.onboarding.skeletonPageSvg,style:t.backgroundImg}),(0,p.jsx)("div",{style:t.wrapper,children:e.children}),(0,p.jsx)(J().E,{style:t.loginDisclaimer,themeOverride:e.themeOverride})]}):(0,p.jsx)(p.Fragment,{children:e.children})}function jt(e){var t;let{data:o,store:s}=e;const l=(0,a().Fg)(),c=(0,i().O7)(),{device:d}=c,{inviteeEmail:u,inviterName:f,showInvitationVersion:h}=(0,n().VK)((()=>{const{inviteeEmail:e,inviterName:t}=te().default.state;return{inviteeEmail:e,inviterName:t,showInvitationVersion:ee().Z.isTemporaryPasscode()&&e===ee().Z.state.email}}),[]),x=(0,M().gh)({theme:"light"}),v=null!==(t=o.trustedDomains)&&void 0!==t&&t.length&&"none"===o.publicAccessRole?o.trustedDomains[0]:void 0;(0,r.useEffect)((()=>{Qe("team_login",s.state.flowId,c),(0,S().Ko)(window.location.href)}),[s,c]);const b=(0,n().VK)((()=>!(d.isMobile||d.isElectron||h)),[d.isElectron,d.isMobile,h]),w=(0,n().VK)((()=>({...tt(c),...b&&{paddingTop:"5vh"}})),[c,b]),_=(0,n().VK)((()=>ee().Z.isMfa()),[]);return(0,p.jsx)(Ee().Z,{capture:!0,render:e=>(0,p.jsx)(Re().Z,{analyticsName:"team_login",hideNavItems:!0,hideNotificationBanner:!0,children:(0,p.jsxs)("div",{style:w,...e,children:[(0,p.jsxs)(vt,{isEnabled:b,themeOverride:x,children:[(0,p.jsx)(it,{isElectron:c.device.isElectron,publicPageData:o,showInvitationVersion:h,inviterName:f,greetingStyle:{color:x.regularTextColor,overflow:"hidden",textOverflow:"ellipsis"},iconBoxInitialStyle:{background:x.regularDividerColor,color:x.mediumTextColor},trustedDomain:v}),u&&h?(0,p.jsx)("div",{style:{fontSize:"18px",fontWeight:400,width:"100%",maxWidth:358,textAlign:"center",color:"#535353",lineHeight:"145.34%",opacity:.78,marginBottom:24},children:(0,p.jsx)(Je,{inviteeEmail:u})}):null,_?(0,p.jsx)($().Z,{loginStore:ee().Z}):(0,p.jsx)(G().Z,{emailLabelType:"email",style:{...Le},emailPasscodePlaceholderType:h?"paste_code":"enter_code",emailInputAutoFocus:!0,from:"pageError",loginStore:ee().Z,showInvitationVersion:h,isSignup:h,themeOverride:x,disableDisclaimer:b})]}),d.isMobile&&!d.isMobileNative&&!h&&(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)("div",{style:{height:1,width:"100vw",background:l.regularDividerColor,marginTop:36,marginBottom:36}}),(0,p.jsxs)(Be().Z,{style:{width:280},isLarge:!0,onClick:()=>{q().RX({url:window.location.href,environment:c})},children:[d.isIOS?(0,g().o)(We):m(We),(0,p.jsx)(y()._H,{id:"fullPageError.openInMobileAppButton.label",defaultMessage:"Open in mobile app"})]}),(0,p.jsx)(Ae().Z,{href:d.isIOS?j()._j.appStore:j()._j.playStore,external:!0,innerStyle:{marginTop:16},children:(0,p.jsx)(qe().Z,{isSmall:!0,style:{textDecoration:"underline",fontSize:14,color:x.mediumTextColor},children:(0,p.jsx)(y()._H,{id:"fullPageError.downloadMobileAppButton.label",defaultMessage:"Get mobile app"})})})]}),(0,p.jsx)(lt,{buttonStyles:{iconStyle:{fill:x.mediumTextColor},style:{color:x.mediumTextColor},pressedStyle:{background:x.buttonPressedBackground}}})]})})})}function St(e){let{color:t,canJoinSpaceWithData:o,route:r,store:s}=e;const c=(0,a().Fg)(),d=(0,i().O7)(),u=(0,n().VK)((()=>{const{currentUserRootStore:e}=ge().default.state;return e&&0===e.getSpaceViewPointers().length}),[]),{isCreatingSpace:g,flowId:m}=(0,n().VK)((()=>{const{isCreatingSpace:e,flowId:t}=s.state;return{isCreatingSpace:e,flowId:t}}),[s]),f=(0,n().VK)((()=>{const{currentUserStore:e}=ge().default.state;return!(null!=e&&e.getOnboardingCompleted())}),[]),h=e=>"blue"===t?(0,p.jsx)(Be().Z,{...e}):(0,p.jsx)(Ce().Z,{backgroundColor:c.whiteButtonBackground,...e,style:{fontWeight:w().Ue.medium,height:"auto",...e.style}});return o?(0,p.jsx)(h,{isLarge:!0,onClick:()=>ft({publicPageData:o,environment:d,flowId:m,store:s}),children:(0,p.jsx)(y()._H,{id:"fullPageError.joinSpaceButton.label",defaultMessage:"Join the space"})}):"onboarding"===r.name||f?(0,p.jsx)(h,{isLarge:!0,onClick:()=>function(e,t){P().zX(e,{button_name:"back-to-onboarding",flow_id:t}),A().vq();const o=ne().default.state;o.isOnboarding?ie().n0(o)?se().I1(e,{type:"new-user",disableRedirectUrl:!0,source:"page_error"}):ie().y7(o)?se().I1(e,{type:"create-or-join",disableRedirectUrl:!0,source:"page_error"}):(ne().default.reset(),F().default.reset(),q().c4({environment:e,url:j()._j.root})):(ne().default.reset(),F().default.reset(),q().c4({environment:e,url:j()._j.root}))}(d,m),children:(0,p.jsx)(y()._H,{defaultMessage:"Back to onboarding",id:"fullPageError.returnToOnboardingButton.label"})}):u||g?(0,p.jsx)(h,{isLarge:!0,onClick:()=>async function(e,t,o){P().zX(e,{button_name:"create-account",flow_id:t});const{currentUserRootStore:r,currentUserStore:s}=ge().default.state;r&&s&&(o.setState({...o.state,isCreatingSpace:!0}),await se().xN(e),o.setState({...o.state,isCreatingSpace:!1}))}(d,m,s),disabled:g,children:(0,p.jsx)(y()._H,{id:"fullPageError.createOrJoinWorkspaceButton.label",defaultMessage:"Create or join a workspace"})}):(0,p.jsx)(h,{isLarge:!0,onClick:()=>function(e,t){if(P().zX(e,{button_name:"back-to-my-content",flow_id:t}),W().NW(e))return void q().op(e);const{currentUserRootStore:o,currentUserSettingsStore:r,currentSpaceViewStore:s}=ge().default.state;o&&r?s?H().y3({environment:e,spaceViewStore:s,userRootStore:o,userSettingsStore:r,pageVisitSource:l().tY.PageError,navigationType:"switchingToOrLoadingSpace"}):H().L5({environment:e,userRootStore:o,userSettingsStore:r,pageVisitSource:l().tY.PageError}):q().c4({environment:e,url:j()._j.root,redirect:!0})}(d,m),children:(0,p.jsx)(y()._H,{id:"fullPageError.backToMyContentButton.label",defaultMessage:"Back to my content"})})}function bt(e){let{route:t,store:o}=e;const s=(0,a().Fg)(),n=(0,i().O7)(),l=$e(n);return(0,r.useEffect)((()=>{Qe("content_classification_block",o.state.flowId,n)}),[n,o]),(0,p.jsxs)("div",{style:et(n),children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(Fe().Z,{type:Fe().i.Unsafe}),(0,p.jsx)("div",{style:rt(n,s),children:(0,p.jsx)(y()._H,{id:"fullPageError.unsafePageError.title",defaultMessage:"This page has been flagged as unsafe"})}),(0,p.jsx)(qe().Z,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,p.jsx)(y()._H,{id:"fullPageError.unsafePageError.message",defaultMessage:"This page may contain spam, phishing, illegal, or inappropriate content. If you received this link from an unknown source, we suggest you to close this tab. <proceedanywaylink>Proceed anyway</proceedanywaylink>",values:{proceedanywaylink:e=>(0,p.jsx)(Ze().Z,{onClick:()=>function(e){const{mainEditorCurrentBlockStore:t}=ge().default.state;t&&(fe().Z.bypassPage(t.id),P().ux(e))}(n),children:e})}})}),l&&(0,p.jsx)(St,{route:t,store:o,color:"blue"}),!l&&(0,p.jsx)(lt,{})]})}function yt(e){let{route:t,store:o,sudoModeStore:s,loginModalStore:l,loginStore:c}=e;const d=(0,a().Fg)(),u=(0,i().O7)(),{device:g}=u,m=$e(u);(0,r.useEffect)((()=>{Qe("oauth_no_access",o.state.flowId,u)}),[u,o]);const f=(0,n().VK)((()=>tt(u)),[u]);return(0,p.jsxs)("div",{children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(ot,{}),(0,p.jsxs)("div",{style:{...f,marginTop:g.isMobile?0:"12vh",justifyContent:"start"},children:[(0,p.jsx)(Fe().Z,{type:Fe().i.NotFound}),(0,p.jsx)("div",{style:rt(u,d),children:(0,p.jsx)(y()._H,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"You don't have permission to access this page."})}),m&&(0,p.jsx)(St,{route:t,store:o,color:"blue"}),(0,p.jsx)(ut,{sudoModeStore:s,loginModalStore:l,loginStore:c})]})]})}function Mt(e){let{publicPageData:t,sudoModeStore:o,inSudoModeAndInTrash:s,route:a,store:l}=e;const c=(0,n().VK)((()=>l.state.flowId),[l]),d=(0,i().O7)(),{spaceId:u,pageId:g}={...t},m=(0,r.useCallback)((async()=>{const{currentSpaceStore:e}=ge().default.state,t=o.state.privatePageStore;e&&t&&(await Z().DV({environment:d,block:t,spaceId:t.pointer.spaceId||e.id,from:"page_error"}),o.reset())}),[o,d]);return t&&t.canRequestAccess&&u&&g?(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:8},children:[s?(0,p.jsx)(Be().Z,{onClick:m,isLarge:!0,children:(0,p.jsx)(y()._H,{id:"fullPageError.pageInTrash.restoreButton",defaultMessage:"Restore page"})}):(0,p.jsx)(Ne().Z,{type:"current-actor-to-block",block:{id:g,spaceId:u},flowId:c}),(0,p.jsx)(St,{route:a,store:l,color:"white"})]}):(0,p.jsx)(St,{route:a,store:l,color:"blue"})}function wt(e){let{route:t,store:o}=e;const r=(0,a().Fg)(),s=(0,i().O7)(),l=(0,n().VK)((()=>o.state.flowId),[o]);if("teamsInvite"!==t.name)return(0,p.jsx)(St,{route:t,store:o,color:"blue"});const{teamId:c}=t;return c?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{...rt(s,r),color:r.mediumTextColor,fontWeight:w().Ue.regular,lineHeight:1.4},children:(0,p.jsx)(y()._H,{id:"fullPageError.canRequestWorkspaceAccess.message",defaultMessage:"You can access this workspace if someone approves your request."})}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,p.jsx)("div",{children:(0,p.jsx)(Ne().Z,{type:"current-actor-to-space-via-team",teamId:c,flowId:l})}),(0,p.jsx)("div",{style:{width:10,height:10}}),(0,p.jsx)(St,{route:t,store:o,color:"white"})]})]}):(0,p.jsx)(St,{route:t,store:o,color:"blue"})}function _t(e){let{route:t,store:o,sudoModeStore:r,loginModalStore:s,loginStore:n,trustedDomain:l}=e;const c=(0,a().Fg)(),d=(0,i().O7)();return(0,p.jsxs)("div",{style:et(d),children:[(0,p.jsx)(Xe,{}),(0,p.jsx)("div",{children:Ye()}),(0,p.jsx)("div",{style:{...rt(d,c),fontWeight:w().Ue.semibold,marginBottom:6},children:(0,p.jsx)(y()._H,{id:"fullPageError.domainSharingPage.title",defaultMessage:"No access to this shared page"})}),(0,p.jsx)("div",{style:{...rt(d,c),color:c.mediumTextColor,fontWeight:w().Ue.regular,lineHeight:1.4,marginBottom:20},children:(0,p.jsx)(y()._H,{id:"fullPageError.domainSharingPage.messageV2",defaultMessage:"You can access this page by signing in to an account with a <b>@{trustedDomain}</b> email address.",values:{trustedDomain:l,b:e=>(0,p.jsx)("b",{children:e})}})}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,p.jsx)("div",{children:(0,p.jsxs)(Be().Z,{isLarge:!0,onClick:()=>s.setState({open:!0}),children:[(0,p.jsx)(y()._H,{id:"fullPageError.domainSharingPage.login.",defaultMessage:"Log in"}),(0,p.jsx)(X()._,{loginModalStore:s,loginStore:n,title:(0,p.jsx)(y()._H,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,p.jsx)(y()._H,{id:"sidebarSwitcherMultiAccount.addAccount.descriptionV2",defaultMessage:"Log in/sign up with a @makenotion.com email address. Your current account will remain logged in."}),className:"notion-space-settings",trustedDomain:l})]})}),(0,p.jsx)("div",{style:{width:10,height:10}}),(0,p.jsx)(St,{route:t,store:o,color:"white"})]}),(0,p.jsx)(ut,{sudoModeStore:r,loginModalStore:s,loginStore:n,trustedDomain:l})]})}function Pt(e){let{data:t,publicPageData:o,route:r,store:s,sudoModeStore:a,inviteTargetsStore:l,loginModalStore:c,loginStore:d}=e;const u=(0,i().O7)(),g=(0,n().VK)((()=>a.state.loading),[a]),m=(0,n().VK)((()=>a.shouldUserHaveAccessToPrivatePageBlock&&a.shouldUserHaveAccessToPrivatePageBlock()&&a.state.changePermissionsEnabled),[a]),f=(0,n().VK)((()=>a.shouldUserHaveAccessToPrivatePageBlock()),[a]),h=(0,n().VK)((()=>{if(!f||!xe().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))return!1;const e=a.state.privatePageStore;return!!e&&(e.pathHasDeletedPermission()&&!e.pathHasPurgedDeletedPermission())}),[a,f]),x=(0,n().VK)((()=>Boolean(a.state.privatePageStore&&a.state.privatePageStore.pathIsDead()&&xe().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))),[a]);return g?(0,p.jsx)(de().Z,{skipFadeinDelay:!0}):h?(0,p.jsxs)("div",{style:et(u),children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(Bt,{isElectron:u.device.isElectron}),(0,p.jsx)(Et,{sudoModeStore:a,route:r,store:s}),(0,p.jsx)(ut,{sudoModeStore:a,loginModalStore:c,loginStore:d,hideChangePermissions:!0})]}):(0,p.jsxs)("div",{style:et(u),children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(Bt,{isElectron:u.device.isElectron}),m?(0,p.jsx)(pt,{sudoModeStore:a}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(mt,{sudoModeStore:a,data:t,inSudoModeAndInTrash:x}),(0,p.jsx)(Mt,{publicPageData:o,sudoModeStore:a,inSudoModeAndInTrash:x,route:r,store:s})]}),f?(0,p.jsx)(dt,{sudoModeStore:a,inviteTargetsStore:l}):null,(0,p.jsx)(ut,{sudoModeStore:a,loginModalStore:c,loginStore:d,hideChangePermissions:x})]})}function kt(e){const t=(0,a().Fg)(),o=(0,i().O7)(),{data:s,source:n,canJoinSpace:l,publicPageData:c,route:d,store:u,sudoModeStore:g,inviteTargetsStore:m,loginModalStore:f,loginStore:h}=e;if((0,r.useEffect)((()=>{"onboarding"===n?Qe("onboarding_error",u.state.flowId,o):"teamsInvite"===n?Qe("team_invite_no_access",u.state.flowId,o):s&&Qe("team_no_access",u.state.flowId,o)}),[n,s,u,o]),s){var x;const e=null!==(x=s.trustedDomains)&&void 0!==x&&x.length?s.trustedDomains[0]:void 0;return e?(0,p.jsx)(_t,{route:d,store:u,sudoModeStore:g,loginModalStore:f,loginStore:h,trustedDomain:e}):(0,p.jsx)(Pt,{publicPageData:c,route:d,store:u,sudoModeStore:g,inviteTargetsStore:m,loginModalStore:f,loginStore:h,data:s})}return(0,p.jsxs)("div",{style:et(o),children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(Bt,{isElectron:o.device.isElectron}),(0,p.jsx)("div",{children:Ye()}),(0,p.jsx)("div",{style:rt(o,t),children:l?(0,p.jsx)(y()._H,{id:"fullPageError.notInWorkspace.message",defaultMessage:"You are not in this workspace."}):(0,p.jsx)(y()._H,{id:"fullPageError.accessNotAllowed.message",defaultMessage:"You do not have access to this page."})}),"teamsInvite"===n?(0,p.jsx)(wt,{route:d,store:u}):(0,p.jsx)(St,{route:d,store:u,color:"blue",canJoinSpaceWithData:l?s:void 0}),(0,p.jsx)(ut,{sudoModeStore:g,loginModalStore:f,loginStore:h})]})}function It(e){let{data:t,publicPageData:o,route:s,store:n,sudoModeStore:a,inviteTargetsStore:l,loginModalStore:c,loginStore:d}=e;const u=(0,i().O7)();return(0,r.useEffect)((()=>{Qe("team_page_no_access",n.state.flowId,u)}),[u,n]),(0,p.jsx)(Pt,{publicPageData:o,route:s,store:n,sudoModeStore:a,inviteTargetsStore:l,loginModalStore:c,loginStore:d,data:t})}function Et(e){let{sudoModeStore:t,route:o,store:s}=e;const l=(0,i().O7)(),c=(0,n().VK)((()=>t.state.privatePageStore),[t]),d=(0,n().VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),u=(0,n().Kw)(we().subscriptionDataStoreInstance),g=(0,z().$)({subscriptionData:u}),m=(0,r.useCallback)((()=>{c&&Z().Yk({environment:l,blockStore:c,handleSuccess:()=>{k().H(l,{pageId:c.id,from:"page"}),q().CZ({environment:l,blocks:[c]})}})}),[l,c]),f=function(e){const{device:t}=e;return(0,a().yK)((e=>({buttonContainer:{display:"flex",flexDirection:"row",marginBottom:18},container:{display:"flex",alignItems:"center",flexDirection:"column"},heading:{fontSize:t.isMobile?18:22,textAlign:"center",color:e.regularTextColor,marginBottom:32},subheading:{fontSize:t.isMobile?18:17,marginBottom:20,textAlign:"center",color:e.mediumTextColor,fontWeight:w().Ue.regular,lineHeight:1.4},restoreButton:{marginRight:10},permanentlyDeleteButton:{display:"flex",color:e.text.secondary,fontSize:14},trashIcon:{width:14,marginRight:4}})),[t])}(l),h=(0,r.useCallback)((e=>(0,p.jsx)(Be().Z,{...e,isLarge:!0,style:f.restoreButton,children:(0,p.jsx)(y()._H,{id:"fullPageError.deletedFromTrashPage.restoreButton",defaultMessage:"Restore page"})})),[f]),x=(0,n().VK)((()=>gt(t)),[t]);return c&&d?(0,p.jsxs)("div",{style:f.container,children:[(0,p.jsx)("div",{children:Ye()}),(0,p.jsx)("div",{style:f.heading,children:(0,p.jsx)(y()._H,{id:"fullPageError.deletedFromTrashPage.titleWithPageName",defaultMessage:"<bold>{pageTitle}</bold> has been deleted from the Trash",values:{pageTitle:x,bold:e=>(0,p.jsx)("b",{children:e})}})}),(0,p.jsx)("div",{style:f.subheading,children:(0,p.jsx)(y()._H,{id:"fullPageError.deletedFromTrashPage.message",defaultMessage:"As a workspace owner, you can restore this page. <br>This will be recorded in the audit log.</br>",values:{br:e=>(0,p.jsx)("div",{children:e})}})}),(0,p.jsxs)("div",{style:f.buttonContainer,children:[(0,p.jsx)(_e().L,{renderPopupOrigin:h,blockStore:c,environment:l,placementToOrigin:ue().Placement.Bottom,includeNonRestoreActions:!1,getValidDeletedPermissions:g,from:"retainedPage"}),(0,p.jsx)(St,{route:o,store:s,color:"white"})]}),(0,p.jsxs)(Pe().Z,{style:f.permanentlyDeleteButton,onClick:m,children:[(0,v().y)(f.trashIcon),(0,p.jsx)(y()._H,{id:"fullPageError.deletedFromTrashPage.permanentlyDeleteButton",defaultMessage:"Permanently delete"})]})]}):null}function Tt(e){let{store:t,route:o}=e;const s=(0,a().Fg)(),l=(0,i().O7)(),{device:c}=l,d=$e(l),u=(0,n().VK)((()=>tt(l)),[l]);return(0,r.useEffect)((()=>Qe("404",t.state.flowId,l)),[t,l]),(0,p.jsxs)("div",{children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(ot,{}),(0,p.jsxs)("div",{style:{...u,marginTop:c.isMobile?0:"12vh",justifyContent:"start"},children:[(0,p.jsx)(Fe().Z,{type:Fe().i.NotFound}),(0,p.jsx)("div",{style:rt(l,s),children:(0,p.jsx)(y()._H,{id:"fullPageError.contentDoesNotExist.title",defaultMessage:"This content does not exist"})}),!d&&(0,p.jsx)(lt,{}),d&&(0,p.jsx)(St,{route:o,store:t,color:"blue"}),(0,p.jsx)(Ge,{}),(0,p.jsx)(qe().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,p.jsx)(y()._H,{id:"fullPageError.contentDoesNotExist.message",defaultMessage:"Having trouble? <helplink>Message support</helplink>",values:{helplink:e=>(0,p.jsx)(Ze().Z,{onClick:()=>nt(l),children:e})}})})]})]})}function At(e){let{route:t,publicPageData:o,pageErrorStore:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c}=e;const d=(0,i().O7)(),{allStoresLoaded:u,foundSpaceView:g}=(0,n().VK)((()=>{const{currentUserRootStore:e}=ge().default.state;if(!e||!e.isReady())return{allStoresLoaded:!1,foundSpaceView:null};const t=(null==e?void 0:e.getSpaceViewStores())||[];if(!t.every((e=>e.isReady())))return{allStoresLoaded:!1,foundSpaceView:null};return{allStoresLoaded:!0,foundSpaceView:t.find((e=>e.getSpaceId()===o.spaceId))}}),[o.spaceId]);return u?g&&"page"===t.name?t.peekViewBlockId?(0,p.jsx)(st,{environment:d,currentRoute:t}):(0,p.jsx)(It,{publicPageData:o,route:t,store:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c,data:o}):o.canJoinSpace?"space"===t.name?(0,p.jsx)(Ct,{publicPageData:o,pageErrorStore:r}):(0,p.jsx)(kt,{publicPageData:o,route:t,store:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c,data:o,source:"workspace",canJoinSpace:!0}):(0,p.jsx)(kt,{publicPageData:o,route:t,store:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c,data:o,source:"workspace",canJoinSpace:!1}):null}function Ct(e){let{publicPageData:t,pageErrorStore:o}=e;const s=(0,i().O7)(),a=(0,n().VK)((()=>o.state.flowId),[o]);return(0,r.useEffect)((()=>{ft({publicPageData:t,environment:s,flowId:a,store:o,skipClickLogging:!0})}),[t,s,a,o]),null}function Bt(e){let{isElectron:t}=e;const o=(0,y().YB)();return t?(0,p.jsx)(He().Z,{title:o.formatMessage({defaultMessage:"No access",id:"errorPage.workspaceNoAccess.title"})}):(0,p.jsx)(p.Fragment,{})}},728243:(e,t,o)=>{o.d(t,{Z:()=>d});o(267602),o(30005);var r=o(667294),s=()=>o(142735),i=()=>o(396035),n=()=>o(217465),a=()=>o(269299),l=()=>o(757590),c=()=>o(876822);function d(e){let{unpersistedInMemoryRecordCache:t}=e;const o=(0,s().VK)((()=>{var e;return null===(e=c().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]);return{createAndCommit:(0,r.useCallback)((e=>{let{perform:r}=e;const s=new(l().Y)({deadlockTimeoutMs:a().DEADLOCK_WARNING_TIMEOUT_MS}),c=r(s),d=n().RecordMap.create();s.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&d.addModel(t)})),(0,i().FS)({operations:s.operations,recordMap:d,updateOnly:!1});for(const i of d){const{model:e,pointer:r}=i;t.setModelAndRole({pointer:r,userId:o},e,"editor")}return t.emitAll(),{performResult:c,serverCommitResult:Promise.resolve()}}),[t,o])}}},350974:(e,t,o)=>{o.d(t,{Z:()=>s});class r extends(()=>o(263184))().default{getInitialState(){return{isCreatingSpace:!1,didPerformAction:!1,flowId:o(956057).Il()}}}const s=r}}]);