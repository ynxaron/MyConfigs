"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14705],{630903:(e,t,n)=>{n.r(t),n.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>C,transformBlocks:()=>T,transformIntoColumnList:()=>y});n(241792);var o=()=>n(492788),r=()=>n(156642),i=()=>n(396136),a=()=>n(513670),c=()=>n(282662),s=()=>n(332542),l=()=>n(771678),d=()=>n(636340),S=()=>n(453999),m=()=>n(879952),p=()=>n(990966),f=()=>n(269299),u=()=>n(28063),v=()=>n(540413),g=()=>n(487270),b=()=>n(852465),k=()=>n(749826),h=()=>n(826955),I=()=>n(262453);function T(e){const{environment:t,blocks:n,blockType:I,transaction:T}=e;if(I!==r().Ti.transclusionContainer)if(I===r().Ti.callout&&k().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:n,transaction:o}=e,a=n[0];if(!a)return;const c=a.getRecordStoreUIParent();if(!c||!(0,b().dz)(c))return;const S=c.getRecordStoreUIParent();if(!(S&&S instanceof h().G))return;const f=(0,g().TS)({environment:t,table:i().iU,spaceId:S.getSpaceId()}),u=d().j4({environment:t,id:f,type:r().Ti.callout,inMemoryRecordCache:c.inMemoryRecordCache,transaction:o,spaceId:S.getSpaceId(),format:{callout_version:2}});s().jG({parentStore:c,childStore:u,after:a.id,transaction:o});R({newParentStore:u.getContentStore(),blocks:n,transaction:o}),l().WO({store:u,transaction:o}),p().clear({environment:t}),m().ZH({environment:t}),m().Z5({environment:t,stores:[u]})}({environment:t,blocks:n,transaction:T});else if(I!==r().Ti.columnList)if(I!==r().Ti.slide)if((0,r().sX)(I)){const e=parseInt(I.replace("column","").replace("block","")),r=a().oA(a().DZ(e-1,(()=>v().insertTextBelow({environment:t,blocks:n,transaction:T})))),i=[...n,...r],c=y({environment:t,blocks:i,transaction:T});o().default.afterNextFlush((()=>{p().setSelectionAtStart({store:c[0].getBlockTitleStore()})}))}else for(const r of n)if(r.isCalloutV2()){const e=r.getParentBlockStore();if(e){const i=r.getContentStores();f().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:i.map((e=>e.id)),after:r.id}},transaction:T}),s().hr({parentStore:e.getContentStore(),childStore:r,transaction:T});for(const e of i)u().vs({environment:t,block:e,blockType:I,transaction:T,isMultiBlockTransformation:n.length>1});o().default.afterNextFlush((()=>{S().DQ(t,i.map((e=>e.id)))}))}}else u().vs({environment:t,block:r,blockType:I,transaction:T,isMultiBlockTransformation:n.length>1});else!function(e){const{environment:t,blocks:n,transaction:o}=e,a=n[0];if(!a)return;const c=a.getRecordStoreUIParent();if(!c||!(0,b().dz)(c))return;const l=c.getRecordStoreUIParent();if(!(l&&l instanceof h().G))return;const S=(0,g().TS)({environment:t,table:i().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:S,type:r().Ti.slide,inMemoryRecordCache:c.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId()});s().jG({parentStore:c,childStore:f,after:a.id,transaction:o});R({newParentStore:f.getContentStore(),blocks:n,transaction:o}),p().clear({environment:t}),m().ZH({environment:t}),m().Z5({environment:t,stores:[f]})}({environment:t,blocks:n,transaction:T});else y({environment:t,blocks:n,transaction:T});else!function(e){const{environment:t,blocks:n,transaction:o}=e,a=n[0];if(!a)return;const s=a.getRecordStoreUIParent();if(!s||!(0,b().dz)(s))return;const l=s.getRecordStoreUIParent();if(!l||!(0,b().OY)(l))return;if(!l.isDefined())return;const S=(0,g().TS)({environment:t,table:i().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:S,type:r().Ti.transclusionContainer,inMemoryRecordCache:s.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId()});c().BE({parentStore:s,insertStore:f,afterStore:a,transaction:o});R({newParentStore:f.getContentStore(),blocks:n,transaction:o}),p().clear({environment:t}),m().ZH({environment:t}),m().Z5({environment:t,stores:[f]})}({environment:t,blocks:n,transaction:T})}function C(e){let{environment:t,blocks:n,transaction:o}=e;(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(n)&&T({environment:t,blocks:n,blockType:"collection_view_page",transaction:o})}function y(e){const{environment:t,blocks:n,transaction:o}=e,a=n[0];if(!a)return[];const s=a.recordStoreUIParentStore;if(null==s||!s.valueIs(I().i))return[];const l=(0,g().TS)({environment:t,table:i().iU,spaceId:a.getSpaceId()}),S=d().j4({environment:t,id:l,type:r().Ti.columnList,inMemoryRecordCache:a.inMemoryRecordCache,transaction:o,spaceId:a.getSpaceId()}),{childStore:m}=c().Vt({parentStore:s,insertStore:S,beforeStore:a,transaction:o});return n.map((e=>{const n=(0,g().TS)({environment:t,table:i().iU,spaceId:a.getSpaceId()}),l=d().j4({environment:t,id:n,type:r().Ti.column,inMemoryRecordCache:a.inMemoryRecordCache,transaction:o,spaceId:a.getSpaceId()}),{childStore:S}=c().Od({parentStore:s,childToRemoveStore:e,transaction:o}),{childStore:p}=c().BE({parentStore:m.getContentStore(),insertStore:l,transaction:o}),{childStore:f}=c().BE({parentStore:p.getContentStore(),insertStore:S,transaction:o});return f}))}function R(e){const{newParentStore:t,blocks:n,transaction:o}=e;for(const r of n){const e=r.getRecordStoreUIParent();null!=e&&e.valueIs(I().i)&&(c().Od({parentStore:e,childToRemoveStore:r,transaction:o}),c().R3({parentStore:t,appendStore:r,transaction:o}))}}}}]);