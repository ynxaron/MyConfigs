(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6093,95986,18638,93843,75751],{147249:(e,t,n)=>{"use strict";n.d(t,{K:()=>r,y:()=>i});var o=()=>n(594546);function r(e,t){const{from:n}=t;o().K4(e,"show_tooltip",{from:n,time:Date.now()})}function i(e,t){const{from:n}=t;o().K4(e,"dismiss_tooltip",{from:n,time:Date.now()})}},140798:(e,t,n)=>{"use strict";n.d(t,{Lg:()=>m,N:()=>p,aG:()=>u});var o=()=>n(139978),r=()=>n(306164),i=()=>n(269299),a=()=>n(903609),s=()=>n(6006),l=()=>n(384334),c=()=>n(662062),d=()=>n(876822);function u(e){const{environment:t,currentSpaceViewStore:n,...o}=e;if(!n.getModel())return;const r=!(0,c().q)(n)[e.feature];i().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{i().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:r}},transaction:t})}}),(0,l().cY)({environment:t,show:r,...o})}function p(e){let{environment:t,option:n,from:o,userAction:r}=e;const a=d().default.state.currentSpaceViewStore;if(!a)return!1;const c=a.getOnAppStartStore().getValue();return i().createAndCommit({userAction:r,environment:t,canUndo:!0,perform:e=>{i().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","on_app_start"],command:"set",args:n},transaction:e})}}),(0,s().pJ)({spaceView:a.getModel(),preference:n}),(0,l().BX)({environment:t,oldValue:c,newValue:n,from:o}),!0}function m(e){const{environment:t,selectedStore:n,currentSpaceViewStore:s,collectionContextStore:c}=e,d=c.collectionViewStore(),u=c.collectionStore(),p=c.collectionViewBlockStore();if(!(u&&d&&p&&s))return;const m=s.getTeamsStores(),g=n.table===r().e0?m.indexOf(n)+1:0,f=n.table===r().e0?n.id:void 0;i().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{i().applyOperation({store:d,operation:{pointer:{id:d.id,table:o().np},path:["format","collection_view_source","teamId"],command:"set",args:f},transaction:e}),(0,a().y)({environment:t,collectionViewBlockStore:p,collectionViewStore:d,collectionStore:u,collectionContextStore:c,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0,forceLocalQueryCollection:!1})}}),(0,l().Ay)({environment:t,teamId:f,index:g})}},839821:(e,t,n)=>{"use strict";n.d(t,{j:()=>p});var o=()=>n(685472),r=()=>n(774985),i=()=>n(308186),a=()=>n(421654),s=()=>n(762478),l=()=>n(269299),c=()=>n(109757);const d=1500,u=(0,n(788860).vU)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function p(e){let{environment:t,intl:n,store:o,rect:r}=e;s().$(t,{originGap:3,originRect:r,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:n.formatMessage(u.pageCover),onDelete:()=>{!function(e){let{environment:t,store:n}=e;s().Z(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{a().MF({store:n,transaction:e})}})}({environment:t,store:o})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:n,position:r}=e;g({environment:t,store:o,url:n,position:r})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:n.formatMessage(u.fileTypeCaption,{idealImageWidth:d}),onUpload:e=>{s().Z(),c().cT({environment:t,file:e[0],bucket:"secure",record:o.pointer,onStart:f,onProgress:h,onComplete:e=>{var n;n={environment:t,store:o,url:e},m({...n,position:.5})},onError:()=>{i().UW(n.formatMessage(u.uploadFailed))}})}},{type:"embed",title:n.formatMessage(u.embedTitle),inputPlaceholder:n.formatMessage(u.embedPlaceholder),caption:n.formatMessage(u.embedCaption),buttonText:n.formatMessage(u.embedSubmit),onChange:e=>{var n;n={environment:t,store:o,url:e},m({...n,position:.5}),s().Z()}},{type:"unsplash",onChange:e=>{let{url:n,position:r}=e;g({environment:t,store:o,url:n,position:r})}}]})}async function m(e){const{environment:t,store:n,url:i,position:s}=e,{serverCommitResult:c}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{a().fs({store:n,url:i,position:s||.5,transaction:e})}});await c,r().Z.state.loadingMode===o().NS&&r().Z.setState({loadingMode:o().EP,dataURL:r().Z.state.dataURL,uploadProgress:100})}function g(e){m(e),e.environment.device.isMobile&&s().Z()}function f(e){const{file:t,name:n,size:i}=e;if(s().Z(),r().Z.setState({loadingMode:o().SS,file:t,name:n,size:i}),t instanceof File&&t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{r().Z.state.loadingMode===o().SS&&r().Z.setState({...r().Z.state,uploadProgress:0,loadingMode:o().NS,dataURL:e.target.result})},e.readAsDataURL(t)}}function h(e){const{progressPercent:t}=e;r().Z.state.loadingMode===o().NS&&r().Z.setState({...r().Z.state,uploadProgress:t})}},169793:(e,t,n)=>{"use strict";n.d(t,{ND:()=>V,RD:()=>P,gc:()=>E,gl:()=>R,u7:()=>M});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(156642),s=()=>n(575861),l=()=>n(788860),c=()=>n(696459),d=()=>n(147249),u=()=>n(905263),p=()=>n(982855),m=()=>n(191003),g=()=>n(550054),f=()=>n(803728),h=()=>n(110372),v=()=>n(156538),y=()=>n(876822),S=()=>n(890324),b=()=>n(826955),_=()=>n(127519),C=()=>n(343353),k=()=>n(559155),w=()=>n(656801),x=n(785893);const I=1,A=1,T=(0,l().vU)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function M(){const e=(0,r().O7)(),t=function(){const e=(0,r().O7)(),t=(0,i().VK)((()=>{var e;return null===(e=y().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),n=(0,i().VK)((()=>{const t=y().default.state.mainEditorCurrentBlockStore;return t&&S().Z.getMode(e,t)}),[e]);return(0,i().VK)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:o,inAppCalloutStore:r}=y().default.state;if(!r.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const i=null==o?void 0:o.getSettings();if(!i)return;if((0,c().$K)(i.last_used_ai_writer_at))return;if("tooltip"!==i.ai_assistant_onboarding_phase)return;if((0,k().$_)(e,t)){if(!(0,c().$K)(i.ai_sales_assisted_extra_notification_seen_at)||(0,s().O5)(i.ai_sales_assisted_extra_notification_seen_at)<A)return}else if((0,c().$K)(i.ai_assistant_onboarding_phase_last_set_at)&&(0,s().O5)(i.ai_assistant_onboarding_phase_last_set_at)<I)return;if("space_for_ai"!==(0,w().sy)())return;if(!(0,p().GD)(n))return;const l=_().default.state;if("editing"===l.mode){const e=(0,m().QY)(l.multiSelection);if(e&&(0,g().wd)(e.selection)){const t=e.store,n=v().E.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?b().G.createChildStore(t,t.pointer):void 0,o=e&&e.getType(),r=Boolean(o&&(0,a().hD)(o)),i=t.getValue();if(r&&!i)return n}}}}),[e,n,t])}(),[n,d]=(0,o.useState)(!1),f=(0,o.useCallback)((()=>{d(!0)}),[]),h=!n&&Boolean(t);return(0,o.useEffect)((()=>()=>{h&&(0,w().fz)(e)}),[e,h]),h&&t?(0,x.jsx)(u().U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,x.jsx)(l()._H,{...T.spaceForAiHeader}),content:(0,x.jsx)(l()._H,{...T.spaceForAiContent}),onCloseClick:f}):null}function P(e){const{originRef:t,openState:n}=e,a=(0,r().O7)(),s=(0,i().VK)((()=>(0,w().sy)()),[]),[c,d]=(0,o.useState)(!1),p=(0,o.useCallback)((()=>{d(!0)}),[]),m="ask_ai_anything"===s&&"initialPrompt"===n.stage&&!c;return(0,o.useEffect)((()=>()=>{!a.device.isMobile&&m&&(0,w().fz)(a)}),[a,m]),a.device.isMobile||!m?null:(0,x.jsx)(u().U,{origin:t,placementToOrigin:"top",header:(0,x.jsx)(l()._H,{...T.askAiAnythingHeader}),content:(0,x.jsx)(l()._H,{...T.askAiAnythingContent}),onCloseClick:p})}function R(e){const{originRef:t,openState:n,isInputEmpty:a}=e,s=(0,r().O7)(),c=(0,i().VK)((()=>(0,w().sy)()),[]),[d,p]=(0,o.useState)(!1),m=(0,o.useCallback)((()=>{p(!0)}),[]),g="refine_ai_response"===c&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&a&&!d;return(0,o.useEffect)((()=>()=>{!s.device.isMobile&&g&&(0,w().fz)(s)}),[s,g]),s.device.isMobile?null:(0,x.jsx)(u().U,{origin:g?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,x.jsx)(l()._H,{...T.refineAiResponseHeader}),content:(0,x.jsx)(l()._H,{...T.refineAiResponseContent}),onCloseClick:m})}function V(e){const{origin:t}=e,n=(0,r().O7)();(0,o.useEffect)((()=>{d().K(n,{from:"qna_button"}),h().gF(n,{callout_key:"ai_assistant_origin_element_tooltip"})}),[n]);const i=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(d().y(n,{from:"qna_button"}),h().bl(n,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss"}),(0,C().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),f().Gi(n,"ai_assistant_origin_element_tooltip"))}),[n]);return(0,x.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,x.jsx)(l()._H,{...T.showAssistantOriginElementLocationHeader}),content:(0,x.jsx)(l()._H,{...T.showAssistantOriginElementLocationContent}),onCloseClick:i})}function E(e){const{origin:t}=e,n=(0,r().O7)();(0,o.useEffect)((()=>{d().K(n,{from:"qna_search"})}),[n]);const i=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(d().y(n,{from:"qna_search"}),(0,C().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,x.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,x.jsx)(l()._H,{...T.showAssistantLocationHeader}),content:(0,x.jsx)(l()._H,{...T.showAssistantLocationContent}),onCloseClick:i})}(0,n(100056).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=y().default.state;t&&n(269299).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{n(348141).d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},579217:(e,t,n)=>{"use strict";n.d(t,{_:()=>i,s:()=>r});var o=()=>n(677559);const r=(0,o().kF)(new(o().Ss)("UniversalQnaModals",(async()=>await Promise.all([n.e(62743),n.e(37358),n.e(7312),n.e(31189),n.e(69343),n.e(2933),n.e(7678),n.e(20919),n.e(52435),n.e(75066),n.e(37317),n.e(78517),n.e(93843),n.e(58183)]).then(n.bind(n,960872)))),(e=>e.UniversalQnaModals)),i=(0,o().kF)(new(o().Ss)("SlackConnectionOptions",(async()=>await n.e(16982).then(n.bind(n,945272)))),(e=>e.SlackConnectionOptions))},707461:(e,t,n)=>{"use strict";n.d(t,{Pm:()=>s,Xj:()=>i,wC:()=>a});var o=()=>n(435308);class r extends(()=>n(263184))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new r,a=new(o().default)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(o().default)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},493843:(e,t,n)=>{"use strict";n.d(t,{$o:()=>$,Fv:()=>j,IL:()=>W,J4:()=>N,KA:()=>B,Nf:()=>D,_p:()=>Y,cQ:()=>z,f$:()=>O,fX:()=>H,j2:()=>L,k2:()=>G,mg:()=>Q,mz:()=>Z,oP:()=>F,tF:()=>J,td:()=>K,x:()=>q});n(670560),n(267602),n(470928),n(30005),n(241792),n(228244);var o=()=>n(730120),r=()=>n(492788),i=()=>n(506347),a=()=>n(926724),s=()=>n(331540),l=()=>n(874459),c=()=>n(998411),d=()=>n(35980),u=()=>n(513670),p=()=>n(696459),m=()=>n(250303),g=()=>n(384667),f=()=>n(366257),h=()=>n(139224),v=()=>n(421654),y=()=>n(636340),S=()=>n(531515),b=()=>n(47443),_=()=>n(794586),C=()=>n(879952),k=()=>n(970105),w=()=>n(990966),x=()=>n(269299),I=()=>n(715146),A=()=>n(887430),T=()=>n(861026),M=()=>n(804217),P=()=>n(826955),R=()=>n(965903),V=()=>n(807230),E=()=>n(701182),U=()=>n(645843);function L(e){const{collectionViewStore:t,collectionContextStore:n,timelineState:o,environment:r}=e,i=r.currentUser.id,a=(0,E().B8)(t.id),s=(0,E().pQ)(t,r),l=n.permissionScopesStore.state,c=u().Ds((()=>{if(o.destroyed)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,E().al)(o)};d().Z.set({userId:i,key:a,value:e})}),1e3),p=u().Ds((()=>{if(o.destroyed||!M().default.state.online||!r.currentUser.isLoggedIn()||!l.canConfigureBlock)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,E().al)(o)},n=t.getFormat().timeline_preference;u().Xy(n,e)||x().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:r,canUndo:!0,perform:n=>{v().FH({stores:[t],update:{timeline_preference:e},transaction:n})}})}),5e3);o.savePreference=()=>{c(),p()},D({timelineState:o,environment:r,...s})}function D(e){const{timelineState:t,zoomLevel:n,centerTimestamp:o,environment:i}=e,{savePreference:a}=t,s=i.WindowSizeStore.state.width+2*E().Ge,l=(0,E().x2)(n,s),c=o-l/2,d=o+l/2;t.zoomLevel.setState(n),t.currentRange.setState({startTimestamp:c,endTimestamp:d}),r().default.afterNextFlush((()=>{B({timelineState:t,centerTimestamp:o}),a&&a()}))}function B(e){const{timelineState:t,centerTimestamp:n}=e,{horizontalScroller:o,outerSizeObserver:r}=t;if(!o)return;const i=t.zoomLevel.state,{startTimestamp:a,endTimestamp:s}=t.currentRange.state,l=r.rect.state.width;if(l===(0,E().e$)(i,s-a))return;const c=(0,E().e$)(i,n-a)-l/2;o.scrollLeft=c,t.scrollLeft.setState(c)}function F(e){const{environment:t,store:n,query:o,date:r,schema:i,transaction:a}=e,{timeline_by:s}=o;if(!s)return;const l=n.getAssociatedCollectionStore(),c=(null==l?void 0:l.getMappedProperty(s))??s,d=o.timeline_by_end?(null==l?void 0:l.getMappedProperty(o.timeline_by_end))??o.timeline_by_end:void 0,u=(0,E().TW)({store:n,dateValue:r,query:o,schema:(null==l?void 0:l.getSchema())??i}),p=n.getPropertyValue(c),m=d?n.getPropertyValue(d):void 0;return y().sW({store:n.getPropertiesStore(),data:u,transaction:a}),f().H({environment:t,store:n,dateProperty:{id:c,newValue:(null==u?void 0:u[c])??[],oldValue:p},otherDateProperty:d?{id:d,newValue:(null==u?void 0:u[d])??[],oldValue:m}:void 0}),n}function j(e){var t;const{environment:n,timelineState:r,collectionStore:i,collectionContextStore:a,store:s,query:d,groupFormat:u,transaction:p}=e,m=r.zoomLevel.state,f=(0,E().al)(r),{snapUnit:h,getDateRangePlaceholderDuration:v}=E().BJ[m],{timeline_by:y}=d;if(!y)return;const S=null===(t=a.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state;if(!S)return;const b=o().ou.fromMillis(f),_=(0,E().DS)(b,h),C=(0,E().DS)(v(b),h),k=(0,E().AZ)({startValue:(0,l().Lg)((0,c().r)()),snapUnit:h,desiredStart:_,desiredEnd:C});return F({environment:n,store:s,query:d,schema:i.getSchema(),date:k,transaction:p}),g().$T({environment:n,collectionStore:i,before:!0,store:S[0],insertStores:[s],collectionContextStore:a,groupsPointer:u?[u]:[],transaction:p}),s}function O(e){const{type:t,timelineState:n,store:o,startX:r,query:i,schema:a,intl:s,environment:l}=e,{horizontalScroller:c}=n,{startTimestamp:d}=n.currentRange.state;if(!c)return;C().Ys({environment:l,store:o});const p=c.scrollLeft,{stores:m}=R().default.state,g=u().oA(m.map((e=>{const t=(0,E().bk)({store:e,query:i,schema:a,userId:l.currentUser.id,intl:s,formulasModule:void 0});if(t)return{startValue:t,store:e}})));n.dragState.setState({type:t,startStore:o,stores:g.map((e=>{let{store:t}=e;return t})),startValues:g.map((e=>{let{startValue:t}=e;return t})),temporaryValues:g.map((e=>{let{startValue:t}=e;return t})),startX:r,startStartTimestamp:d,startScrollLeft:p})}function N(e){const{timelineState:t,store:n,startX:o,startY:r,schema:i,collectionContextStore:a,verticalScroller:s}=e,{horizontalScroller:l}=t,{startTimestamp:c}=t.currentRange.state;if(!l||!s)return;const d=l.scrollLeft,u=s.scrollTop,p=(0,E().YE)(a,n,i);t.drawState.setState({startStore:n,startDependencyRelationPointers:p,temporaryDependencyRelationPointers:[...p],startX:o,startY:r,startScrollLeft:d,startScrollTop:u,startStartTimestamp:c,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function K(e){const{timelineState:t,currentX:n}=e,{horizontalScroller:o}=t,r=t.zoomLevel.state,i=t.dragState.state,{startTimestamp:a}=t.currentRange.state;if(!i||!o)return;const{type:s,startStartTimestamp:c,startValues:d,startScrollLeft:m,startX:g,startStore:f,stores:h}=i,v=E().BJ[r],{snapUnit:y}=v,S=o.scrollLeft-m+(n-g)+(0,E().e$)(r,a-c),b=(0,E().x2)(r,S),_=d[h.indexOf(f)];let C;if(s===E().px.LeftResizer){const{start:e}=(0,E().XO)(_,y),t=e.plus(b);C=d.map((e=>{const n=(0,E().AZ)({startValue:e,snapUnit:y,desiredStart:t});return(0,l().gW)(n)}))}else if(s===E().px.RightResizer){const{end:e}=(0,E().XO)(_,y),t=e.plus(b);C=d.map((e=>{const n=(0,E().AZ)({startValue:e,snapUnit:y,desiredEnd:t});return(0,l().Qq)(n)}))}else s===E().px.ItemDrag?C=d.map((e=>{const{start:t,end:n}=(0,E().XO)(e,y),o=t.plus(b),r=o.plus(n.valueOf()-t.valueOf());return(0,E().AZ)({startValue:e,snapUnit:y,desiredStart:o,desiredEnd:r})})):(0,p().t1)(s);u().Xy(i.temporaryValues,C)||t.dragState.setState({...i,temporaryValues:C})}function Z(e){const{timelineState:t,currentX:n,currentY:o,verticalScroller:r}=e,i=t.drawState.state,a=t.zoomLevel.state,{startTimestamp:s}=t.currentRange.state,{horizontalScroller:l}=t;if(!i||!l||!r)return;const{startDependencyRelationPointers:c,startStore:d,startX:p,startY:m,startScrollLeft:g,startScrollTop:f,startStartTimestamp:h}=i,v=l.scrollLeft,y=r.scrollTop,S=v-g+(n-p)+(0,E().e$)(a,s-h),b=y-f+(o-m),_=t.hoveredItem.state;if(_&&_!==d&&!c.some((e=>e.id===_.id))){const e=[...c,{table:"block",id:_.id,spaceId:_.getSpaceId()}];u().Xy(i.temporaryDependencyRelationPointers,e)||t.drawState.setState({...i,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...i,temporaryDependencyRelationPointers:[...c],xOffsetPx:S,yOffsetPx:b})}function H(e){const{environment:t,collectionContextStore:n,timelineState:o,query:r,schema:i,transaction:a}=e,s=o.dragState.state,{timeline_by:l}=r;if(!s||!l)return;const{temporaryValues:c,stores:d}=s;c.forEach(((e,o)=>{const s=d[o];F({environment:t,store:s,query:r,schema:i,transaction:a,date:e}),m().rv({environment:t,collectionContextStore:n,block_id:s.id,property:l,property_type:"date",from:"timeline"})})),o.dragState.setState(void 0)}function $(e){var t;const{timelineState:n,environment:o,transaction:r,collectionContextStore:i,isFullScreen:a,isRootChild:s}=e,l=n.drawState.state,c=n.dateRangePlaceholder.state;if(!l)return;const{startStore:d,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:p}=l;if(!d)return void n.drawState.setState(void 0);let g;if(c.active){const{date:e,store:t,parentStore:a,groupFormat:s,newTimelineItemProps:l,existingTimelineItemProps:u}=c;if(t&&u){const{query:n,schema:i}=u;F({environment:o,store:t,query:n,schema:i,date:e,transaction:r}),g={table:"block",id:t.id,spaceId:d.getSpaceId()}}else if(l){const{query:n,schema:c,isFullScreen:u,canEditTimelineItems:p,subitemPath:m}=l,f=Q({environment:o,date:e,store:t,parentStore:a,query:n,schema:c,isFullScreen:u,groupFormat:s,canEditTimelineItems:p,collectionContextStore:i,subitemPath:m,transaction:r,from:"timeline_complete_draw"});f&&(g={table:"block",id:f.id,spaceId:d.getSpaceId()})}n.dateRangePlaceholder.setState({active:!1})}else g=p.find((e=>!u.includes(e)));const f=(0,E()._e)(i);if(f){const{property:e}=f;g&&(S().hE({environment:o,propertyWithInverse:f,sourceStore:d,destStore:P().G.createChildStore(d,g),position:{type:"after"},transaction:r}),m().rv({environment:o,collectionContextStore:i,block_id:d.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),n.drawState.setState(void 0)}else h().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:i.settingsStore}),n.drawState.setState({...l,tryToCompleteDrawnArrow:!0});const v=null===(t=g)||void 0===t?void 0:t.id;v&&(0,U().LE)(o,{...(0,T().Pn)(i),...(0,U().Ii)({environment:o,collectionContextStore:i,timelineState:n,isFullScreen:a,isRootChild:s}),dependenciesPropertyID:null==f?void 0:f.property,blockedByStoreID:d.id,blockingStoreID:v})}function z(e){const{timelineState:t,environment:n}=e;t.dragState.state&&(t.dragState.setState(void 0),C().ZH({environment:n}))}function q(e){const{timelineState:t,environment:n}=e;t.drawState.state&&(t.drawState.setState(void 0),C().ZH({environment:n}))}function G(e){const{stores:t,collectionViewStore:n,schema:o,transaction:r}=e,i=n.getType(),a=n.getQuery(o),s=[];a&&("calendar"===i?a.calendar_by&&s.push(a.calendar_by):"timeline"===i&&(a.timeline_by&&s.push(a.timeline_by),a.timeline_by_end&&s.push(a.timeline_by_end)));for(const l of t)for(const e of s)k().sO({environment:l.environment,store:l.getPropertyStore(e),value:void 0,transaction:r})}function W(e){const{dependency:t,collectionContextStore:n,environment:o,timelineState:r,isFullScreen:i,isRootChild:a}=e,s=(0,E()._e)(n),l=n.collectionStore();if(!s||!l)return;const{property:c}=s,{store:d,relationPointer:u}=t,p=d.getSchema()[c];p&&"relation"===p.type&&(x().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:o,canUndo:!0,perform:e=>{S().Bl({environment:o,propertyWithInverse:s,sourceStore:d,destStore:P().G.createChildStore(d,u),transaction:e}),m().rv({environment:o,block_id:u.id,property:c,property_type:p.type,from:"timeline",collectionContextStore:n,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,U().lf)(o,{...(0,T().Pn)(n),...(0,U().Ii)({environment:o,collectionContextStore:n,timelineState:r,isFullScreen:i,isRootChild:a}),dependenciesPropertyID:c,blockedByStoreID:d.id,blockingStoreID:u.id}))}function J(e){const{collectionViewStore:t,newProperty:n,transaction:o}=e;v().FH({stores:[t],update:{timeline_arrows_by:{property:n}},transaction:o})}function Y(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:r}=e,i=n.collectionStore();if(!i)return;const l=o?i.getSchema()[o]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=i.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0;v().FH({stores:[i],update:{collection_default_arrows_by:o,...i.getFormat().app_config_uri===s().iS?{app_uri_map:{...i.getFormat().app_uri_map?i.getFormat().app_uri_map:{},[a().Es.BlockingRelation]:o,[a().Es.BlockedRelation]:c}}:{}},transaction:r})}function Q(e){const{environment:t,transaction:n,date:o,parentStore:r,query:a,schema:s,isFullScreen:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,from:p}=e;if(!(0,V().ww)(t))return;const m=c?[c]:[],f=u.groupsStore.getGroupState(m);if(!f)return;if(r)return function(e){const{environment:t,transaction:n,date:o,store:r,parentStore:a,query:s,schema:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,subitemPath:p}=e;if(!r||!a)return;const m=c?[c]:[],f=g().yk({environment:t,collectionContextStore:u,groupsPointer:m,store:r,before:!1,collectionStore:a,transaction:n,subitemPath:p,subitemInsertDirection:"into"});if(f){if(F({environment:t,store:f,query:s,schema:l,date:o,transaction:n}),t.device.isMobile)b()._c({environment:t,store:f,pageVisitSource:i().tY.Create});else if(f&&d){const e=f.getBlockTitleStore();w().setSelectionAtStart({store:e})}return f}}(e);u.searchQueryStore.state&&(0,I().U)({searchQuery:"",collectionContextStore:u,isFullScreen:l});const h=g().IW({environment:t,collectionContextStore:u,groupsPointer:m,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:n,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!h)return;const v=h.coercionSucceeded,y=h.newStore;if(F({environment:t,store:y,query:a,schema:s,date:o,transaction:n}),t.device.isMobile)b()._c({environment:t,store:y,pageVisitSource:i().tY.Create});else if(v&&d){const e=y.getBlockTitleStore();w().setSelectionAtEnd({store:e})}else _().CH({environment:t,store:y,peekMode:(0,A().kr)(u),resultsStore:null==f?void 0:f.resultsStore,collectionContextStore:u,pageVisitSource:i().tY.Create});return y}},645843:(e,t,n)=>{"use strict";n.d(t,{Al:()=>l,CB:()=>c,H6:()=>s,Ii:()=>g,LE:()=>p,gw:()=>d,iR:()=>i,lf:()=>m,ne:()=>u,zI:()=>a});n(267602),n(653476);var o=()=>n(594546),r=()=>n(701182);function i(e,t){o().lu(e,"timeline_view","timeline_view",5,t)}function a(e,t){o().K4(e,"timeline_zoom_level_update",t)}function s(e,t){o().K4(e,"timeline_today_click",t)}function l(e,t){o().K4(e,"timeline_shift_time_click",t)}function c(e,t){o().K4(e,"timeline_toggle_table_click",t)}function d(e,t){o().K4(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){o().K4(e,"timeline_item_resize",t)}function p(e,t){o().K4(e,"timeline_dependency_arrow_add",t)}function m(e,t){o().K4(e,"timeline_dependency_arrow_delete",t)}function g(e){const{environment:t,collectionContextStore:n,timelineState:o,isFullScreen:i,isRootChild:a}=e,s=o.zoomLevel.state,l=n.normalizedFormatStore.state,c=(0,r().C1)({environment:t,format:l,isFullScreen:i,isRootChild:a}),d=c&&l.timeline_table_properties?l.timeline_table_properties.length:0,u=l.timeline_properties||[],p=u.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:c,show_table_properties_count:d,show_timeline_title:u.length!==p.length,show_timeline_properties_count:p.length}}},715146:(e,t,n)=>{"use strict";function o(e){const{searchQuery:t,collectionContextStore:n}=e;n.collectionViewStore()&&(n.searchQueryStore.setState(t||""),n.groupsStore.resetAllLimits())}n.d(t,{U:()=>o})},397174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});n(267602),n(653476),n(241792),n(258429);var o=n(667294),r=()=>n(846550),i=()=>n(26970),a=()=>n(707513),s=()=>n(384510),l=n(785893);function c(e){const{button:t,isLast:n}=e,s=(0,r().yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Ue.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,i().iv)(t.props.style,s.button,n&&s.buttonLast),hoveredStyle:(0,i().iv)(s.buttonHovered,n&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const d=function(e){let{children:t,isVisible:d,position:u,style:p}=e;const m=(0,n(219727).O7)(),g=(0,r().yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:s().Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:m.device.isMobile?"auto":"none",opacity:m.device.isMobile?1:0,fontFamily:a().F5(n(146947).locale).sans,position:"absolute",right:s().Z.horizontal.small,bottom:s().Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:s().Z.vertical.small,bottom:void 0}})),[m]),f=o.Children.toArray(t).filter(n(696459).$K),h=f.length;return(0,l.jsx)(n(628370).Z,{animate:{opacity:d?1:0},...(0,i().iv)(g.container,p,d&&g.containerHover,"top"===u&&g.containerTop),children:f.map(((e,t)=>{const r=t===h-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===n(654133).Z&&o.isValidElement(e))return o.cloneElement(e,{render:(t,n)=>{const o=e.props.render(t,n);return(0,l.jsx)(c,{isLast:r,button:o},e.key)}});if(e.type===n(154186).Z&&o.isValidElement(e))return(0,l.jsx)(c,{isLast:r,button:e},e.key)}}))})}},632599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(667294),r=()=>n(846550),i=()=>n(729201),a=()=>n(312578),s=n(785893);function l(e){let{loadingMessage:t}=e;const n=(0,r().Fg)(),l=(0,i().Z)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(a().Z,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},887330:(e,t,n)=>{"use strict";n.d(t,{C:()=>r,L:()=>i});var o=()=>n(707513);function r(e){const{theme:t,isInHomeWidget:n}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...n?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:o().Ue.regular,lineHeight:1,borderRadius:6}}function i(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:o().Ue.regular,lineHeight:1,borderRadius:4}}},755589:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});n(667294);var o=()=>n(968061),r=()=>n(788860),i=()=>n(231077),a=()=>n(1910),s=()=>n(45909),l=n(785893);const c=(0,r().vU)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function d(){const e=(0,r().YB)();return(0,l.jsx)(a().Z,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,s().X)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{i().openAppMenu()},icon:o().h,ariaLabel:e.formatMessage(c.menu)})}},75751:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(788860),s=()=>n(421654),l=()=>n(839821),c=()=>n(269299),d=()=>n(191586),u=()=>n(685472),p=()=>n(774985),m=()=>n(397174),g=()=>n(628370),f=()=>n(154186),h=()=>n(710706),v=n(785893);const y=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:d,height:m,proxyWidth:g}=e;const f=(0,r().O7)(),h=(0,i().qz)(void 0,n(233417).Z),y=(0,i().VK)((()=>a||"suggest"===n(279386).MT.getMode(t)),[a,t]),_=(0,i().VK)((()=>t.getCover()),[t]),C=(0,i().Kw)(p().Z),[k,w]=(0,o.useState)(void 0);if(!_)return null;const x=C.loadingMode!==u().LU&&C.loadingMode!==u().SS;return(0,v.jsx)(n(910293).Z,{mouseStore:h,onFlushTemporaryPosition:e=>function(e,t,n){const{imagePosition:o,reset:r}=e;c().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:n,canUndo:!0,perform:e=>{s().Mp({store:t,coverPosition:o,transaction:e}),r()}})}(e,t,f),renderControl:e=>{let{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:r,isVisible:i,isRepositioning:a}=e;return(0,v.jsx)(b,{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:r,isVisible:i,isRepositioning:a,lastProxiedUrl:k,store:t,disabled:y,paddingRight:l,paddingLeft:d,mouseStore:h})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:m,maxHeight:280,cursor:"default"},render:e=>(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(n(135499).Z,{url:_.cover,isAuthenticated:!0,permissionRecord:_.pointer,width:g,onFinishedLoadingProxyUrl:w,render:(t,o)=>{const r={width:"100%",height:m,maxHeight:280,objectFit:"cover",opacity:x?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:m,maxHeight:280};return(0,v.jsx)(n(167499).B,{src:o,placeholderSrc:x?C.dataURL:void 0,placeholderBehavior:x?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:r,onLoadComplete:S,testId:"pageCover"})}}),x&&(0,v.jsxs)("div",{style:n(518242).IA,children:[(0,v.jsx)(n(312578).Z,{size:"md",style:{marginRight:4}}),(0,v.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,v.jsx)(n(410184).Z,{percentage:C.uploadProgress})})]})]})})};function S(){p().Z.reset()}function b(e){let{isVisible:t,isRepositioning:n,handleCancelClick:s,handleRepositionClick:c,handleSavePositionClick:y,lastProxiedUrl:S,store:b,disabled:_,paddingRight:C,paddingLeft:k,mouseStore:w}=e;const x=(0,r().O7)(),I=(0,a().YB)(),A=(0,o.useCallback)((e=>function(e,t,n,o,r){r.reset();const i=e.target.getBoundingClientRect();l().j({environment:t,intl:n,store:o,rect:i})}(e,x,I,b,w)),[x,I,b,w]),T=(0,i().VK)((()=>p().Z.state.loadingMode),[]),M=(0,i().VK)((()=>function(e){let t;return t=e.isFullWidth()?"100%":d().zL,t}(b)),[b]);if(_||T!==u().LU)return null;const{device:P}=x,{isMobile:R}=P;return(0,v.jsx)(g().Z,{animate:{width:M,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,v.jsxs)(m().Z,{isVisible:t,position:"bottom",style:{marginRight:C,marginLeft:k},children:[!n&&(0,v.jsx)(f().Z,{style:{borderRight:R?"none":void 0,...h().ar},onClick:A,children:(0,v.jsx)(a()._H,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!n&&!R&&(0,v.jsx)(f().Z,{style:{...h().ar,borderRight:"none"},onClick:e=>c(e,S),children:(0,v.jsx)(a()._H,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),n&&!R&&(0,v.jsx)(f().Z,{style:h().ar,onClick:y,children:(0,v.jsx)(a()._H,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),n&&!R&&(0,v.jsx)(f().Z,{style:{...h().ar,borderRight:"none"},onClick:s,children:(0,v.jsx)(a()._H,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},986520:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(667067),l=()=>n(827282),c=n(785893);const d=(0,l().IU)("mobileLocked",{viewBox:"0 0 26 26",svg:(0,c.jsx)("path",{d:"M7.88672 23.417H18.1133C19.499 23.417 20.1758 22.7295 20.1758 21.2256V13.3408C20.1758 11.9873 19.6172 11.2891 18.4678 11.1709V8.46387C18.4678 4.41406 15.8145 2.45898 13 2.45898C10.1855 2.45898 7.53223 4.41406 7.53223 8.46387V11.2246C6.47949 11.3857 5.82422 12.0732 5.82422 13.3408V21.2256C5.82422 22.7295 6.50098 23.417 7.88672 23.417ZM9.26172 8.23828C9.26172 5.54199 10.9912 4.11328 13 4.11328C15.0088 4.11328 16.7383 5.54199 16.7383 8.23828V11.1602L9.26172 11.1709V8.23828Z"})}),u=(0,l().IU)("mobileUnlocked",{viewBox:"0 0 32 26",svg:(0,c.jsx)("path",{d:"M7.89355 23.417H18.1094C19.4951 23.417 20.1826 22.7295 20.1826 21.2256V13.3408C20.1826 12.0303 19.6562 11.332 18.582 11.1816V8.23828C18.582 5.54199 20.3115 4.11328 22.3203 4.11328C24.3291 4.11328 26.0586 5.54199 26.0586 8.23828V10.623C26.0586 11.2783 26.4346 11.6006 26.9287 11.6006C27.4014 11.6006 27.7881 11.3105 27.7881 10.623V8.46387C27.7881 4.41406 25.1348 2.45898 22.3203 2.45898C19.5059 2.45898 16.8525 4.41406 16.8525 8.46387V11.1602L8.1084 11.1816C6.72266 11.1816 5.82031 11.8584 5.82031 13.3408V21.2256C5.82031 22.7295 6.50781 23.417 7.89355 23.417Z"})}),p=(0,l().IU)("unlockedFilled",{viewBox:"0 0 16 16",svg:(0,c.jsx)("path",{d:"M2.33301 14.6338H8.94336C9.85938 14.6338 10.3105 14.1826 10.3105 13.1914V8.08496C10.3105 7.2168 9.95508 6.75195 9.24414 6.65625V4.83105C9.24414 3.22461 10.2627 2.35645 11.4863 2.35645C12.71 2.35645 13.7354 3.22461 13.7354 4.83105V6.28711C13.7354 6.76562 14.0156 7.01855 14.3848 7.01855C14.7471 7.01855 15.0273 6.7793 15.0273 6.28711V4.96094C15.0273 2.36328 13.2979 1.1123 11.4863 1.1123C9.6748 1.1123 7.94531 2.36328 7.94531 4.96094V6.64258L2.44922 6.64941C1.5332 6.64941 0.96582 7.10742 0.96582 8.08496V13.1914C0.96582 14.1826 1.41699 14.6338 2.33301 14.6338Z"})});var m=()=>n(989478),g=()=>n(499110),f=()=>n(788860),h=()=>n(491927),v=()=>n(421654),y=()=>n(269299),S=()=>n(482162),b=()=>n(826955),_=()=>n(154186),C=()=>n(654133),k=()=>n(49489);const w=function(e){let{store:t,disableTooltip:o,hideText:a,isInlineCollection:s,buttonStyle:l,lockStore:d}=e;const{isMobile:u}=(0,r().Fy)(),p=(0,i().qz)(d,n(385021).Z);return u?(0,c.jsx)(V,{store:t,lockStore:p,hideText:a}):(0,c.jsx)(R,{store:t,disableTooltip:o,hideText:a,isMobile:u,isInlineCollection:s,buttonStyle:l,lockStore:p})};function x(e,t,n){return{display:"flex",alignItems:"center",whiteSpace:"nowrap",fontSize:e?12:14,borderRadius:4,padding:"0 6px",marginRight:2,height:24,marginTop:e?1:0,marginLeft:e?0:-5,...t&&{marginLeft:e?8:12,marginRight:0},...n}}function I(e,t,n,o,r){return{...x(e,o,r),color:n.lightTextColor,fill:n.lightIconColor}}function A(e,t,n,o,r){return{...x(e,o,r),paddingLeft:5,border:`1px solid ${n.blueColor}`,color:n.blueColor,fill:n.blueColor}}function T(e){let{store:t}=e;const n=(0,a().Fg)(),o=(0,i().VK)((()=>t.getFormat().block_locked_by),[t]),r=(0,f().YB)(),s=(0,i().VK)((()=>o&&(0,g().Nz)(r,b().t1.createChildStore(t,{table:m().KJ,id:o}).getModel())),[o,r,t]);return o?(0,c.jsx)("div",{children:(0,c.jsx)(f()._H,{defaultMessage:"Locked by {lockedByPerson}{br}to prevent accidental editing.{br}<prompttext>Click to unlock</prompttext>",id:"pageLockIndicator.lockedTooltip",values:{lockedByPerson:(0,c.jsx)("b",{children:s}),br:(0,c.jsx)("br",{}),prompttext:e=>(0,c.jsx)("span",{style:{color:n.mediumInvertedTextColor},children:e})}})}):null}function M(e,t,n){y().createAndCommit({userAction:"PageLockTopbarIndicator.handleLockClick",environment:e,canUndo:!0,perform:n=>{v().Wq({environment:e,store:t,isLocked:!1,transaction:n})}}),n.setState({...n.state,justUnlocked:!0});const o=t.getType();if(o){var r;let n;t.isCollectionView()&&(n=t.getCollectionStore()),h().UJ(e,{from:"topbar",block_type:o,locked:!1,collection_id:null===(r=n)||void 0===r?void 0:r.id})}}function P(e,t,n){y().createAndCommit({userAction:"PageLockTopbarIndicator.handleUnlockClick",environment:e,canUndo:!0,perform:n=>{v().Wq({environment:e,store:t,isLocked:!0,transaction:n})}}),n.setState({...n.state,justUnlocked:!1});const o=t.getType();if(o){var r;let n;t.isCollectionView()&&(n=t.getCollectionStore()),h().UJ(e,{from:"topbar",block_type:o,locked:!0,collection_id:null===(r=n)||void 0===r?void 0:r.id})}}function R(e){let{store:t,disableTooltip:n,hideText:l,isMobile:d,isInlineCollection:u,buttonStyle:m,lockStore:g}=e;const h=(0,a().Fg)(),v=(0,r().O7)(),y=(0,o.useCallback)((()=>P(v,t,g)),[v,t,g]),b=(0,o.useCallback)((()=>M(v,t,g)),[v,t,g]),w=(0,i().VK)((()=>t.isLocked()),[t]),x=(0,i().VK)((()=>g.state.justUnlocked),[g]),R=(0,i().VK)((()=>S().default.state.open&&S().default.state.targetStore.id===t.id),[t.id]);return w?(0,c.jsx)(C().Z,{renderTooltip:()=>(0,c.jsx)(T,{store:t}),disableTooltip:n,render:e=>(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[R&&(0,c.jsx)(k().Z,{}),(0,c.jsxs)(_().Z,{style:I(d,0,h,u,m),onClick:b,...e,children:[(0,s().Q)({width:16,marginRight:l?void 0:4}),!l&&(0,c.jsx)("div",{style:{lineHeight:1},children:(0,c.jsx)(f()._H,{defaultMessage:"Locked",id:"pageLockIndicator.lockedButton.label"})})]})]})}):x?(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,c.jsx)(k().Z,{}),(0,c.jsxs)(_().Z,{style:A(d,0,h,u,m),onClick:y,hoveredStyle:{background:h.outlineBlueButtonHoveredBackground},pressedStyle:{background:h.outlineBlueButtonPressedBackground},children:[p({width:16,marginRight:l?void 0:4}),!l&&(0,c.jsx)("div",{style:{lineHeight:1},children:(0,c.jsx)(f()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.relockButton.label"})})]})]}):null}function V(e){let{store:t,lockStore:n,hideText:s}=e;const l=(0,a().Fg)(),p=(0,r().O7)(),m=(0,o.useCallback)((()=>P(p,t,n)),[p,t,n]),g=(0,o.useCallback)((()=>M(p,t,n)),[p,t,n]),h=(0,i().VK)((()=>t.isLocked()),[t]),{WindowSizeStore:v}=p,y=(0,i().VK)((()=>v.getSafePaddingLeftCSS(10)),[v]),S=(0,i().VK)((()=>v.getSafePaddingRightCSS(14)),[v]),b=(0,i().VK)((()=>n.state.justUnlocked),[n]);return h?(0,c.jsxs)(_().Z,{onClick:g,mobileFeedback:!0,style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:y,paddingRight:S},children:[d({width:20,marginRight:6}),!s&&(0,c.jsx)("div",{children:(0,c.jsx)(f()._H,{defaultMessage:"Locked",id:"pageLockIndicator.mobileLockedButton.label"})})]}):b?(0,c.jsxs)(_().Z,{onClick:m,mobileFeedback:!0,style:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingLeft:y,paddingRight:S,color:l.blueColor,fill:l.blueColor},children:[u({height:26,width:32,marginRight:6}),!s&&(0,c.jsx)("div",{children:(0,c.jsx)(f()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.mobileRelockButton.label"})})]}):null}},910293:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var o=n(667294),r=()=>n(146947),i=()=>n(219727),a=()=>n(142735),s=()=>n(26970),l=()=>n(788860),c=()=>n(568017),d=()=>n(513670),u=()=>n(707513),p=()=>n(326966),m=()=>n(628370),g=n(785893);const f={isRepositioning:!1};const h=function(e){const t=(0,o.useRef)(null),r=(0,i().O7)(),{isMobile:l}=(0,i().Fy)(),[c,u]=(0,o.useState)(f),m=(0,o.useCallback)((()=>{u(f)}),[]),{renderControl:h,onFlushTemporaryPosition:y,style:S,source:b,store:_}=e,{isRepositioning:C,image:k,startDragRenderedPosition:w,startDragImageScreenHeight:x}=c,I=(0,a().VK)((()=>0===n(965903).default.state.stores.length),[]),[A,T]=(0,o.useState)(!1),M=(0,a().qz)(e.mouseStore,n(233417).Z),P=(0,a().VK)((()=>M.state.mouseEntered),[M]),R=(0,n(846550).yK)((()=>({dragContainer:{width:"100%",cursor:C?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[C]),V=(0,a().VK)((()=>function(e,t,n){return(0,d().hj)(n)?n:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,d().hj)(e))return e}const n=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().z4)(t)?n:t}}const o=t.getFormat(),r=o.page_cover_position;if((0,d().hj)(r))return r;return n}(e,t)}(b,_,c.temporaryPosition)),[c.temporaryPosition,b,_]);(0,o.useEffect)((()=>{const e=e=>{const n=t.current;n&&!n.contains(e.target)&&C&&y({imagePosition:V,reset:()=>{M.reset(),m()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[V,C,M,y,m]),C&&!I&&m();const E=(0,o.useMemo)((()=>(0,d().P2)((e=>{M.setState({...M.state,mouseEntered:!0})}),100)),[M]),U=(0,o.useMemo)((()=>(0,d().Ds)((e=>{M.setState({...M.state,mouseEntered:!1})}),100)),[M]),L=(0,o.useCallback)(((e,t)=>{n(879952).ZH({environment:r});const o=new Image;o.onload=()=>{u((e=>({...e,isRepositioning:!0,image:o})))},t&&(o.src=t)}),[r]),D=(0,o.useCallback)((e=>{y({imagePosition:V,reset:()=>{m()}})}),[V,y,m]),B=(0,o.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,n(474788).E)(t)&&T(!0)}),[]),F=(0,o.useCallback)((()=>{T(!0)}),[]),j=(0,o.useCallback)((e=>{if(k&&C){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/k.width*k.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:V})))}}}),[k,V,C]),O=(0,o.useCallback)((e=>{if(C){const t=e.diffY/(x||0)+(w||0);u((e=>({...e,temporaryPosition:(0,d().NM)((0,n(120420).Z)(t,0,1),4)})))}}),[C,x,w]),N=(0,o.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),K=(0,a().VK)((()=>h({handleRepositionClick:L,handleSavePositionClick:D,handleCancelClick:m,isVisible:l||P||A||C,isRepositioning:C})),[L,D,A,l,C,P,h,m]);return(0,g.jsxs)("div",{ref:t,onFocus:B,onBlur:F,onMouseEnter:E,onMouseMove:E,onMouseLeave:U,...(0,s().iv)(R.container,S),children:[(0,g.jsx)(n(790964).Z,{onDraggableDragStart:j,onDraggableDragMove:O,onDraggableDragEnd:N,onDraggableDragCancel:N,disabled:!C,render:t=>(0,g.jsx)("div",{...(0,s().iv)(R.dragContainer),...t,children:e.render({imagePosition:V,isRepositioning:C})})}),(0,g.jsx)(v,{small:e.small,isRepositioning:C}),K]})};function v(e){let{small:t,isRepositioning:n}=e;if(t)return null;const o={background:c().ZP.blackWithAlpha(.4),borderRadius:4,color:c().ZP.white,fontSize:12,fontFamily:u().F5(r().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,g.jsx)(m().Z,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,g.jsx)(l()._H,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},946735:(e,t,n)=>{"use strict";n.d(t,{Dr:()=>a,Jt:()=>s,Su:()=>i});var o=()=>n(677559);const r={pageVerification:new(o().Ss)("pageVerification",(()=>Promise.all([n.e(62743),n.e(44832),n.e(55253)]).then(n.bind(n,711296)))),pageVerificationBadge:new(o().Ss)("pageVerificationBadge",(()=>Promise.all([n.e(62743),n.e(44832),n.e(11189),n.e(53335),n.e(46616),n.e(61171),n.e(63502),n.e(99590),n.e(81917),n.e(10553),n.e(22371),n.e(77679),n.e(64153)]).then(n.bind(n,776864)))),pageVerificationMenuRenderer:new(o().Ss)("pageVerificationMenuRenderer",(()=>Promise.all([n.e(62743),n.e(44832),n.e(11189),n.e(53335),n.e(46616),n.e(61171),n.e(63502),n.e(99590),n.e(81917),n.e(10553),n.e(22371),n.e(77679),n.e(71e3)]).then(n.bind(n,852586))))},i=(0,o().kF)(r.pageVerification,(e=>e.PageAddVerificationButton)),a=(0,o().kF)(r.pageVerificationBadge,(e=>e.PageVerificationBadge)),s=(0,o().kF)(r.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},49489:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(667294);var o=n(785893);const r=function(){const e=(0,n(846550).yK)((e=>({separator:{height:14,width:1,marginLeft:6,marginRight:6,background:e.darkDividerColor}})),[]);return(0,o.jsx)("div",{style:e.separator})}},577521:(e,t,n)=>{"use strict";n.d(t,{C:()=>C,V:()=>b});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(263555),l=()=>n(788860),c=()=>n(718959),d=()=>n(247724),u=()=>n(793935),p=()=>n(291335),m=()=>n(998901),g=()=>n(725751),f=()=>n(628370),h=()=>n(1910),v=()=>n(64260),y=()=>n(654133),S=n(785893);function b(e){const t=(0,r().O7)(),n=(0,r().Fy)(),o=(0,l().YB)(),a=(0,i().Kw)(p().sidebarMouseEnteredStore),d=(0,i().VK)((()=>g().default.state.isShowingTabBar||!1),[]),m=(0,i().Kw)(c().tu),f=o.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),h=(!n.isElectronMac||!m)&&!d&&a;return(0,S.jsx)(C,{isVisible:h,icon:s().D,caption:f,onClick:()=>{u().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const _={width:16,height:16,fill:"inherit"};function C(e){const t=(0,r().Fy)(),n=(0,a().yK)((t=>({keyboardShortcut:{color:t.mediumInvertedTextColor},button:{fill:t.mediumIconColor},enterAnimation:{opacity:e.isVisible?0:1},animation:{opacity:e.isVisible?1:0}})),[e.isVisible]),i=(0,o.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...n.button,...e.style})),[e.style,n.button,t.isMobile]);return(0,S.jsx)(y().Z,{renderTooltip:()=>(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,S.jsx)(v().Z,{style:n.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?m().Placement.Right:m().Placement.Bottom,render:n=>(0,S.jsx)(f().Z,{tag:h().Z,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:i,hoveredStyle:e.hoveredStyle,iconStyle:_,mobileFeedback:t.isMobile,onClick:e.onClick,className:d().Mfh,...n})})}},125659:(e,t,n)=>{"use strict";n.d(t,{DK:()=>c,L1:()=>s,Y$:()=>l,cu:()=>a});n(821057);var o=n(667294);const r="collectionContextStore",i=(0,n(949744).Q)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),a=i.context,s=i.Provider;function l(){const e=o.useContext(a);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function c(){return o.useContext(a)}},681035:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var o=()=>n(677559);const r=new(o().Ss)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([n.e(62743),n.e(37912)]).then(n.bind(n,682652));return{CollectionItemCover:e}})),i=(0,o().kF)(r,(e=>e.CollectionItemCover))},302485:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var o=()=>n(677559);const r=new(o().Ss)("HelpButtonContent",(async()=>await n.e(53060).then(n.bind(n,687569)))),i=(0,o().kF)(r,(e=>e.HelpButtonContent))},416277:(e,t,n)=>{"use strict";n.d(t,{R7:()=>i,TG:()=>a,gM:()=>s});var o=()=>n(677559);const r=new(o().Ss)("login",(async()=>{const{default:e}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,604922)),{default:t}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,663920)),{default:o}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,735246)),{default:r}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,99389)),{default:i}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,12872));return{LoginPage:e,LoginDesktop:t,LoginMobileNative:o,FrontLoginPage:r,LoginModalContent:i}})),i=(0,o().kF)(r,(e=>e.LoginPage)),a=(0,o().kF)(r,(e=>e.FrontLoginPage)),s=(0,o().kF)(r,(e=>e.LoginModalContent))},521412:(e,t,n)=>{"use strict";n.d(t,{X:()=>o});const o=new(n(677559).Ss)("pageCovers",(async()=>n.e(1642).then(n.bind(n,832783))))},871953:(e,t,n)=>{"use strict";n.d(t,{TL:()=>u,nc:()=>d,ue:()=>c});var o=()=>n(816512),r=()=>n(934158),i=()=>n(696056),a=()=>n(989478),s=()=>n(696459),l=()=>n(826955);function c(e){const{parentStore:t,pointer:n}=e,r=(0,l().Kv)(t,n).getValue();if(r)return(0,o().LU)({table:n.table,value:r})}function d(e){const{parentStore:t,pointer:n}=e;return n.table===i().cZ?l().Qx.createChildStore(t,n):n.table===a().KJ?l().U6.createChildStore(t,n):n.table===r().y0?l().fg.createChildStore(t,n):void(0,s().t1)(n)}function u(e){return e.table===i().cZ?(0,o().ON)(e.getValue()):e.table===a().KJ?(0,o().m3)(e.getValue()):e.table===r().y0?(0,o().I4)(e.getValue()):void(0,s().t1)(e)}},244303:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(667294);var o=()=>n(816512),r=()=>n(696459),i=()=>n(634760),a=()=>n(981583),s=n(785893);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().YU)(t)?(0,s.jsx)(i().Z,{botValue:t.asActor,...n}):(0,o().$S)(t)?(0,s.jsx)(a().Z,{userValue:t.asActor,...n}):(0,o().Iq)(t)?(0,s.jsx)(a().Z,{userValue:void 0,...n}):void(0,r().t1)(t)}},706363:(e,t,n)=>{"use strict";n.d(t,{Ct:()=>r,LO:()=>o,iN:()=>i});const o=40,r=48,i=60},657553:(e,t,n)=>{"use strict";n.r(t);n(821057),n(670560),n(267602),n(653476),n(470928),n(30005),n(241792),n(228244),n(398858),n(461318),n(33228);var o=()=>n(100056),r=()=>n(619995),i=()=>n(156642),a=()=>n(874459),s=()=>n(329866),l=()=>n(998411),c=()=>n(578292),d=()=>n(547913),u=()=>n(251887),p=()=>n(827370),m=()=>n(494616),g=()=>n(396136),f=()=>n(24945),h=()=>n(325490),v=()=>n(989478),y=()=>n(899133),S=()=>n(955620),b=()=>n(855741),_=()=>n(696459),C=()=>n(374847),k=()=>n(110958),w=(n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(916054),()=>n(513670)),x=()=>n(362137),I=()=>n(226413),A=()=>n(942275),T=()=>n(530980),M=()=>n(416403);function P(e){return e.every((e=>{const t="element"===e.type&&["annotation","mention","equation"].includes(e.tagName);return"text"===e.type||t}))}function R(e){return!!e&&"element"===e.type&&"block"===e.tagName}function V(e){return e.every((e=>"element"===e.type&&("block"===e.tagName||"text"===e.tagName||"property"===e.tagName)))}function E(e){return t=>{const{block:n,exportArgs:o,renderers:r}=t,i=T().kk5.fromBlock(n),a=(0,C().hJ)({textValue:i.getProperty("title"),exportArgs:o,renderers:r,fromString:e=>({type:"text",value:(0,x().Jo)(e)})});if(0===a.length&&0===i.getContentLength()&&"page"!==i.getType())return;const s=e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type});if(!P(a))throw new Error("Delineated text node children are invalid");const l={type:"element",tagName:"text",attributes:{},children:a},c={type:"element",tagName:"block",attributes:{id:s.toString()},children:[l]};if(i.getContentLength()>0){const e=w().oA(i.getRenderableContentIds().map((e=>(0,C()._2)({exportArgs:{...o,blockId:e,renderParentBlockId:i.id,visitedBlockIds:(o.visitedBlockIds||new Set).add(e)},renderers:r}))));if(!V(e))throw new Error("Block simple XML node children are invalid");c.children.push(...e)}if("page"===i.type&&n.properties){const t=(0,A().ky)({getRecordValue:o.getRecordValue,block:n});if(t&&t.schema)for(const[i,a]of Object.entries(t.schema)){var d;const s=(null===(d=n.properties[i])||void 0===d?void 0:d.toString())??"";a&&s&&i in n.properties&&"text"===a.type&&c.children.push(q(e,i,s,o,r,{parentCollectionId:t.id,propertyId:i}))}}return c}}function U(e){return async(t,n)=>{if(o=t.block,!["page","text","header","sub_header","sub_sub_header","quote","bulleted_list","toggle","to_do","numbered_list","callout"].includes(o.type))return;var o;return await Promise.resolve(E(e)({...t,block:t.block}))}}function L(e){return t=>{const{block:n,exportArgs:o,renderers:r}=t,i=T().kk5.fromBlock(n),a={type:"element",tagName:"block",attributes:{id:e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type}).toString()},children:[]};if(i.getContentLength()>0){const e=w().oA(i.getRenderableContentIds().map((e=>(0,C()._2)({exportArgs:{...o,blockId:e,renderParentBlockId:i.id,visitedBlockIds:(o.visitedBlockIds||new Set).add(e)},renderers:r}))));if(!V(e))throw new Error("Block simple XML node children are invalid");a.children.push(...e)}return a}}function D(e){return async(t,n)=>{if(o=t.block,!["transclusion_container","column","column_list","table_row"].includes(o.type))return;var o;return await Promise.resolve(L(e)({...t,block:t.block}))}}function B(e){const{block:t,exportArgs:n,renderers:o}=e,r=T().kk5.fromBlock(t),i=r.getTransclusionReferenceTargetPointer();if(i)return(0,C()._2)({exportArgs:{...n,blockId:i.id,renderParentBlockId:r.id,visitedBlockIds:(n.visitedBlockIds||new Set).add(i.id)},renderers:o})}function F(e){return t=>{const{block:n,exportArgs:o,renderers:r}=t,i=T().kk5.fromBlock(n),a=(0,C().hJ)({textValue:i.getProperty("caption"),exportArgs:o,renderers:r,fromString:e=>({type:"text",value:e})}),s=e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type});if(!P(a))throw new Error("Delineated text node children are invalid");const l={type:"element",tagName:"text",attributes:{},children:a};return{type:"element",tagName:"block",attributes:{id:s.toString()},children:[l]}}}function j(e){return async(t,n)=>{if(o=t.block,!["image","video"].includes(o.type))return;var o;return await Promise.resolve(F(e)({...t,block:t.block}))}}function O(e){return t=>{const{block:n,exportArgs:o,renderers:r}=t,i=T().kk5.fromBlock(n),a={type:"element",tagName:"block",attributes:{id:e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type}).toString()},children:[]};if(i.getContentLength()>0){const e=w().oA(i.getRenderableContentIds().map((e=>(0,C()._2)({exportArgs:{...o,blockId:e,renderParentBlockId:i.id,visitedBlockIds:(o.visitedBlockIds||new Set).add(e)},renderers:r}))));if(!V(e))throw new Error("Block simple XML node children are invalid");a.children.push(...e)}return a}}function N(e){return async(t,n)=>{if(!function(e){return"table"===e.block.type}(t))return;return await Promise.resolve(O(e)(t))}}function K(e){return async(t,n)=>await Promise.resolve(Z(e)(t))}function Z(e){return t=>{const{block:n,exportArgs:o,renderers:r}=t,i=T().kk5.fromBlock(n),a=i.getProperties(),s=w().oA(Object.keys(a).map((t=>{const n=i.getProperty(t);if(!n)return;const a=(0,C().hJ)({textValue:n,exportArgs:o,renderers:r,fromString:e=>({type:"text",value:(0,x().Jo)(e)})});if(!P(a))throw new Error("Property children are invalid");return{type:"element",tagName:"property",attributes:{key:e.mapBlockOrAnnotation({type:"property",key:t}).toString()},children:a}})));if(!s.length)return;return{type:"element",tagName:"block",attributes:{id:e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type}).toString()},children:s}}}function H(e){return t=>{const{annotation:n}=t,o=e.mapBlockOrAnnotation({type:"annotation",annotation:n}),{date_format:r,time_format:i,...a}=S().zyO(n),s="date"===(l=a).type?l.start_date:"daterange"===l.type?`${l.start_date} -> ${l.end_date}`:"datetime"===l.type?`${l.start_date} ${l.start_time}`:"datetimerange"===l.type?`${l.start_date} ${l.start_time} -> ${l.end_date} ${l.end_time}`:void(0,_().t1)(l);var l;return{type:"element",tagName:"mention",attributes:{id:o.toString()},children:[{type:"text",value:s}]}}}function $(e){const{children:t}=e;return t}function z(e){return async function(t){let{block:n,exportArgs:o,renderers:r}=t;const i=e.mapBlockOrAnnotation({type:"block",id:n.id,blockType:n.type}),a=await Promise.resolve((0,C().KD)({blockModel:T().kk5.fromBlock(n),exportArgs:o,includeEmptyCollection:!0}));if(!a||!a.length)return;const s=a[0],{collectionTitle:l,columnIds:c,collectionDescription:d,columnIdToName:u,collectionId:p,collectionSpaceId:m,schema:g}=s,f=l?W(e,{collectionId:p,type:M().T$.NAME,collectionSpaceId:m},l,o,r):void 0,h=d?W(e,{collectionId:p,type:M().T$.DESCRIPTION,collectionSpaceId:m},d,o,r):void 0,v=[];for(const b of a){const{collectionViewName:t,collectionViewId:n,collectionViewSpaceId:i}=b;if(!t)continue;const a=t?W(e,{collectionId:p,type:M().T$.VIEW_NAME,collectionViewId:n,collectionSpaceId:m,collectionViewSpaceId:i},t,o,r):void 0;a&&v.push(a)}const y=[],S=w().oA(c.map((t=>{var n;const i=u[t];if(!i)return;const a=(0,C().hJ)({textValue:[[i,[]]],exportArgs:o,renderers:r,fromString:e=>({type:"text",value:"string"==typeof e?(0,x().Jo)(e):""})});if(!P(a))throw new Error("Property children are invalid");const s={collectionId:p,type:M().T$.SCHEMA_PROPERTY_NAME,collectionSpaceId:m,propertyId:t,oldValue:i,propertySchemaType:null===(n=g[t])||void 0===n?void 0:n.type},l={type:"element",tagName:"property",attributes:{key:e.mapBlockOrAnnotation({type:"property",key:G(s),metadata:s}).toString()},children:a},c=g[t];return c&&(0,I().t)(c)&&c.options&&y.push(...c.options.map((n=>W(e,{collectionId:p,type:M().T$.SCHEMA_PROPERTY_OPTION,propertyId:t,optionId:n.id,optionColor:(0,I().cu)(c)?n.color:void 0,collectionSpaceId:m,oldValue:n.value,propertySchemaType:c.type},n.value,o,r)))),l})));return{type:"element",tagName:"block",attributes:{id:i.toString()},children:[...f?[f]:[],...v,...h?[h]:[],...S,...y]}}}function q(e,t,n,o,r,i){const a=(0,C().hJ)({textValue:[[n,[]]],exportArgs:o,renderers:r,fromString:e=>({type:"text",value:(0,x().Jo)(e)})});if(!P(a))throw new Error("Delineated text node children are invalid");return{type:"element",tagName:"property",attributes:{key:e.mapBlockOrAnnotation({type:"property",key:t,metadata:i}).toString()},children:a}}function G(e){const{type:t,propertyId:n,optionId:o,optionColor:r,collectionViewId:i}=e;switch(t){case M().T$.NAME:return"collection.name";case M().T$.VIEW_NAME:return`collection.view_name.${i}`;case M().T$.DESCRIPTION:return"collection.description";case M().T$.SCHEMA_PROPERTY_NAME:return`collection.property.${n}`;case M().T$.SCHEMA_PROPERTY_OPTION:return`collection.option.${n}.${o}${r?`.${r}`:""}`;default:(0,_().t1)(t)}}function W(e,t,n,o,r){return q(e,G(t),n,o,r,t)}function J(){throw new Error("unimplemented")}function Y(){}function Q(e){const t=E(e),n=L(e),o=F(e),r=O(e),i=Z(e),a=function(e){return t=>{const{annotation:n,children:o}=t,r=e.mapBlockOrAnnotation({type:"annotation",annotation:n});if(!o)return;if(!function(e){return"text"===e.type||"element"===e.type&&("annotation"===e.tagName||"mention"===e.tagName||"equation"===e.tagName)}(o))throw new Error("Annotation simple XML node children are invalid");const i=[o];return{type:"element",tagName:"annotation",attributes:{id:r.toString()},children:i}}}(e),s=function(e){return t=>{const{annotation:n,exportArgs:o}=t,r=T().omK.fromGetRecordValueFn(o.getRecordValue),i=e.mapBlockOrAnnotation({type:"annotation",annotation:n}),a=S().TOT(n);let s="Untitled page";return r({table:g().iU,id:a})&&(s=(0,C().Ho)({intl:o.intl,blockId:a,getRecordValue:o.getRecordValue,userTimeZone:o.userTimeZone})),{type:"element",tagName:"mention",attributes:{id:i.toString()},children:[{type:"text",value:s}]}}}(e),l=function(e){return t=>{const{annotation:n,exportArgs:{intl:o,getRecordValue:r}}=t,i=T().omK.fromGetRecordValueFn(r),a=e.mapBlockOrAnnotation({type:"annotation",annotation:n}),s=S().zEN(n),l=i({table:v().KJ,id:s});let c=null==l?void 0:l.getFullName(o);return c||(c="Tim Smith"),{type:"element",tagName:"mention",attributes:{id:a.toString()},children:[{type:"text",value:c}]}}}(e),c=function(e){return t=>{const{annotation:n,exportArgs:o}=t,r=e.mapBlockOrAnnotation({type:"annotation",annotation:n});let i=(0,C().kF)({annotation:n,exportArgs:o});return i||(i="Employee group"),{type:"element",tagName:"mention",attributes:{id:r.toString()},children:[{type:"text",value:i}]}}}(e),d=function(e){return t=>{const{annotation:n,exportArgs:o}=t,r=e.mapBlockOrAnnotation({type:"annotation",annotation:n});let i=(0,C().cg)({annotation:n,exportArgs:o});return i||(i="Employee team"),{type:"element",tagName:"mention",attributes:{id:r.toString()},children:[{type:"text",value:i}]}}}(e),u=function(e){return t=>{var n;const{annotation:o,exportArgs:{getRecordValue:r}}=t,i=e.mapBlockOrAnnotation({type:"annotation",annotation:o}),a=T().omK.fromGetRecordValueFn(r),s=S().frW(o),l=(null===(n=a({table:g().iU,id:s}))||void 0===n?void 0:n.getFormatValue("original_url"))??"https://example.com";return{type:"element",tagName:"mention",attributes:{id:i.toString()},children:[{type:"text",value:l}]}}}(e),p=function(e){return t=>{const{annotation:n}=t,o=e.mapBlockOrAnnotation({type:"annotation",annotation:n}),r=S().r0m(n).href;return{type:"element",tagName:"mention",attributes:{id:o.toString()},children:[{type:"text",value:r}]}}}(e),m=H(e),f=function(e){return t=>{const{annotation:n}=t,o=e.mapBlockOrAnnotation({type:"annotation",annotation:n}),r=S().xey(n);return{type:"element",tagName:"equation",attributes:{id:o.toString()},children:[{type:"text",value:r}]}}}(e),h=function(e){return z(e)}(e),y=function(e){return async function(t){return z(e)({...t,block:{...t.block,type:"collection_view"}})}}(e),b={...{page:t,text:t,header:t,sub_header:t,sub_sub_header:t,quote:t,bulleted_list:t,toggle:t,to_do:t,numbered_list:t,callout:t,image:o,video:o,transclusion_container:n,transclusion_reference:B,column:n,column_list:n,table:r,table_row:i},...{code:Y,embed:Y,bookmark:Y,file:Y,tweet:Y,maps:Y,gist:Y,framer:Y,invision:Y,mixpanel:Y,drive:Y,figma:Y,loom:Y,pdf:Y,typeform:Y,codepen:Y,audio:Y,divider:Y,equation:Y,collection_view:Y,collection_view_page:Y,factory:Y,copy_indicator:Y,breadcrumb:Y,link_to_collection:Y,link_to_page:Y,table_of_contents:Y,whimsical:Y,miro:Y,abstract:Y,sketch:Y,excalidraw:Y,replit:Y,alias:Y,external_object_instance:Y,tab:Y,hex:Y,deepnote:Y,external_object_instance_page:Y,button:Y,ai_block:Y,drawing:Y,slide:Y,personal_home_page:Y,form:Y,post:Y,workflow:Y,encrypted_text:Y,transcription:Y}},_={...{page:U(e),text:U(e),header:U(e),sub_header:U(e),sub_sub_header:U(e),quote:U(e),bulleted_list:U(e),toggle:U(e),to_do:U(e),numbered_list:U(e),callout:U(e),image:j(e),video:j(e),transclusion_container:D(e),transclusion_reference:async e=>{const t=function(e){return"transclusion_reference"===e.type}(e.block)?e.block:void 0;if(t)return await Promise.resolve(B({...e,block:t}))},column:D(e),column_list:D(e),table:N(e),table_row:K(e),collection_view:h,collection_view_page:y},...{image:J,video:J,code:J,embed:J,bookmark:J,file:J,tweet:J,maps:J,gist:J,framer:J,invision:J,mixpanel:J,drive:J,figma:J,loom:J,pdf:J,typeform:J,codepen:J,audio:J,divider:J,equation:J,factory:J,copy_indicator:J,breadcrumb:J,link_to_collection:J,link_to_page:J,table_of_contents:J,transcription:J,whimsical:J,miro:J,abstract:J,sketch:J,excalidraw:J,replit:J,alias:J,external_object_instance:J,tab:J,hex:J,deepnote:J,external_object_instance_page:J,button:J,ai_block:J,drawing:J,slide:J,personal_home_page:J,form:J,post:J,workflow:J,encrypted_text:J}};return{blockRenderers:b,annotationRenderers:{[S().GKr.Bold]:a,[S().GKr.Italic]:a,[S().GKr.Strike]:a,[S().GKr.Code]:a,[S().GKr.Highlight]:a,[S().GKr.Discussion]:a,[S().GKr.Underline]:a,[S().GKr.Link]:a,[S().GKr.Equation]:f,[S().GKr.Comment]:$,[S().GKr.Page]:s,[S().GKr.User]:l,[S().GKr.Group]:c,[S().GKr.Team]:d,[S().GKr.LinkMention]:p,[S().GKr.Date]:m,[S().GKr.ExternalObjectInstance]:u,[S().GKr.Inserted]:$,[S().GKr.CustomEmoji]:Y,[S().GKr.SuggestionInsertText]:Y,[S().GKr.SuggestionRemoveText]:Y,[S().GKr.SuggestionAnnotate]:Y,[S().GKr.SuggestionUnannotate]:Y,[S().GKr.Deleted]:Y,[S().GKr.Bot]:Y,[S().GKr.TemporaryComment]:Y,[S().GKr.TemporaryCursor]:Y,[S().GKr.TemporaryEquation]:Y,[S().GKr.TemporaryPage]:Y,[S().GKr.TemporaryInput]:Y,[S().GKr.TemporarySelection]:Y,[S().GKr.TemporaryFindHighlight]:Y,[S().GKr.TemporarySelectedFindHighlight]:Y,[S().GKr.TemplateVariable]:Y,[S().GKr.FormulaPageProperty]:Y,[S().GKr.FormulaContextValue]:Y,[S().GKr.FormulaError]:Y,[S().GKr.Citation]:Y,[S().GKr.TemporaryNativeMABFilter]:Y,[S().GKr.TemporaryDictation]:Y,[S().GKr.TemporaryHighlight]:Y,[S().GKr.AssistantInstructionsCollection]:Y,[S().GKr.TemporaryCommentHighlight]:Y,[S().GKr.TemporarySuggestionUnderline]:Y,[S().GKr.GeoPoint]:Y},asyncBlockRenderers:_,propertyRenderers:{title:Y,text:Y,select:Y,multi_select:Y,status:Y,relation:Y,rollup:Y,url:Y,email:Y,phone_number:Y,checkbox:Y,person:Y,number:Y,date:Y,file:Y,formula:Y,created_time:Y,last_edited_time:Y,created_by:Y,last_edited_by:Y,button:Y,auto_increment_id:Y,last_visited_time:Y,location:Y,verification:Y,geo_point:Y}}}n(492176),n(7961);var X=()=>n(963864);function ee(e){const{translateRenderer:t,attributes:n,expectedType:o}=e;if(!("id"in n))return{error:new Error("Expected ID attribute")};const r=parseInt(n.id);if(!(r in t.map))return{error:new Error(`Could not find ${r} in TranslateRenderer`)};const i=t.map[r];return"block"===i.type&&"block"===o?{value:{counter:r,value:{blockType:i.blockType,id:i.id}}}:"annotation"===i.type&&(0,S().f_I)(i.annotation)&&"textAnnotation"===o||"annotation"===i.type&&(0,S().ZAl)(i.annotation)&&"mentionAnnotation"===o||"annotation"===i.type&&(0,S().kuv)(i.annotation)&&"equationAnnotation"===o?{value:{counter:r,value:i.annotation}}:{error:new Error(`Expected ${o}, received ${JSON.stringify(i)}.`)}}const te=k().p.mapResult(X().oT,(e=>({value:e.value})));function ne(e){return k().p.mapResult((0,X().hc)("text"),(t=>{const n=(0,k().w6)((0,X().Lf)("text",[se(e),re(e),ie(e),te]),t.children??[]);return b().x.isFail(n),n}))}function oe(e){return k().p.mapResult((0,X().hc)("block"),(t=>{const n=ee({translateRenderer:e,attributes:t.attributes,expectedType:"block"});if(b().x.isFail(n))return n;const o=(0,k().w6)(k().p.mapResult((0,X().Lf)("block",[k().p.mapResult(te,(e=>({value:[e]}))),k().p.mapResult(se(e),(e=>({value:[e]}))),k().p.mapResult(re(e),(e=>({value:[e]}))),k().p.mapResult(ae(e),(e=>({value:[e],metadata:e.metadata}))),k().p.mapResult(oe(e),(e=>({value:[e]}))),ne(e)]),(e=>({value:e.flat()}))),t.children??[]);return b().x.isFail(o)?o:{value:{type:"block",blockType:n.value.value.blockType,id:n.value.value.id,children:o.value}}}))}function re(e){return k().p.mapResult((0,X().hc)("mention"),(t=>{const n=ee({translateRenderer:e,attributes:t.attributes,expectedType:"mentionAnnotation"});if(b().x.isFail(n))return n;const o=(0,k().w6)(k().p.many(te),t.children??[]);return b().x.isFail(o)?o:{value:{type:"mention",annotation:n.value.value,text:o.value.join("")}}}))}function ie(e){return k().p.mapResult((0,X().hc)("equation"),(t=>{const n=ee({translateRenderer:e,attributes:t.attributes,expectedType:"equationAnnotation"});if(b().x.isFail(n))return n;const o=(0,k().w6)(k().p.many(te),t.children??[]);return b().x.isFail(o)?o:{value:{type:"equation",annotation:n.value.value}}}))}function ae(e){return k().p.mapResult((0,X().hc)("property"),(t=>{const n=(0,X().Lf)("property",[te,se(e),re(e)]),o=function(e,t){if(!("key"in t))return{error:new Error("Expected key attribute")};const n=parseInt(t.key);if(!(n in e.map))return{error:new Error(`Could not find ${n} in TranslateRenderer`)};const o=e.map[n];return"property"!==o.type?{error:new Error(`Expected property, received ${JSON.stringify(o)}.`)}:{value:{counter:n,value:{key:o.key},metadata:o.metadata}}}(e,t.attributes);if(b().x.isFail(o))return o;const r=(0,k().w6)(k().p.map(n,(e=>e)),t.children??[]);return b().x.isFail(r)?r:{value:{type:"property",key:o.value.value.key,children:r.value,metadata:o.value.metadata}}}))}function se(e){return k().p.mapResult((0,X().hc)("annotation"),(t=>{const n=ee({translateRenderer:e,attributes:t.attributes,expectedType:"textAnnotation"});if(b().x.isFail(n))return n;const o=(0,X().Lf)("annotation",[te,se(e),re(e)]),r=(0,k().w6)(k().p.map(o,(e=>{if(function(e){return 1===e.length}(e))return e;return[e.at(0)??""]})),t.children??[]);return b().x.isFail(r)?r:{value:{type:"annotation",annotation:n.value.value,children:r.value}}}))}function le(e){const{annotation:t}=e;return(0,S().YCD)(t)}function ce(e){const{annotation:t}=e;return(0,S().qZ6)(t[1])}function de(e){const{annotations:t,value:n}=function e(t){const n=[t.annotation],o=t.children[0];if("string"==typeof o)return{annotations:n,value:o};if("mention"===o.type)return{annotations:n,value:o};if("annotation"===o.type){const{annotations:t,value:r}=e(o);return n.push(...t),{annotations:n,value:r}}(0,_().t1)(o)}(e);return"string"==typeof n?(0,S().V3y)(n,t):(0,S().YCD)(n.annotation,t)}function ue(e){const t=[];for(const n of e.children)"string"==typeof n?t.push((0,S().V3y)(n)):"annotation"===n.type?t.push(de(n)):"mention"===n.type?t.push(le(n)):(0,_().t1)(n);return t}function pe(e){let t={};const n={},o=[];for(const r of e.children)"string"==typeof r?o.push((0,S().V3y)(r)):"annotation"===r.type?o.push(de(r)):"mention"===r.type?o.push(le(r)):"property"===r.type?n[r.key]={value:ue(r),metadata:r.metadata}:"equation"===r.type?o.push(ce(r)):"block"===r.type&&(t={...pe(r),...t});return{[e.id]:{value:o,blockType:e.blockType,mapping:(0,M().KT)(e.blockType),properties:n},...t}}class me{constructor(e){this.map=void 0,this.counter=0,this.renderers=void 0,this.hasTranslated=!1,this.renderers=Q(this),this.map=e??{}}getExportArgs(e){const{pagePointer:t,intl:o,getRecordModel:r,serverOrClientConfig:i,experimentService:a,formulasModule:s}=e;return{blockId:t.id,navigableBlockId:t.id,renderParentBlockId:void 0,root:t,numberedListCache:{},bulletedListCache:{},getExportedPathToFile:e=>"",getExportedRenderAsset:e=>"",getExportedPathToPage:e=>"",getRecordValue:r.getRecordValue,getRecordsWithParent:()=>[],userTimeZone:(0,l().r)(),intl:o,baseUrl:i.domainBaseUrl,publicDomainName:i.publicDomainBaseUrl,resultCache:new Map,regExpCache:new Map,experimentService:a,collectionFeatureGates:(0,n(855855).Q)({experimentService:a,actor:void 0,spaceId:t.spaceId}),formulasModule:s}}mapPageToXML(e){if(this.hasTranslated)throw new Error("Page already loaded.");this.hasTranslated=!0;const t=this.getExportArgs(e),n=(0,C()._2)({exportArgs:t,renderers:this.renderers});if(!n||!R(n))throw new Error("Failed to render page");return n}async asyncMapPageToXML(e){if(this.hasTranslated)throw new Error("Page already loaded.");this.hasTranslated=!0;const t=this.getExportArgs(e),o=await(0,C()._f)({exportArgs:t,renderers:this.renderers,ticker:new(n(672719).M)});if(!o||!R(o))throw new Error("Failed to render page");return o}parseXMLToTranslations(e){const t=(0,k().w6)(oe(this),e);if(b().x.isSuccess(t))return pe(t.value);throw t.error}getBlocksMissingFromTranslationMap(e){const t=Object.keys(e);return Object.values(this.map).map((e=>"block"===e.type?e.id:void 0)).filter(_().$K).filter((e=>!t.includes(e)))}mapBlockOrAnnotation(e){const t=this.counter++;return this.map[t]=e,t}}var ge=()=>n(349220),fe=()=>n(342792),he=()=>n(824462),ve=()=>n(430310),ye=()=>n(593515),Se=()=>n(636340),be=()=>n(970105),_e=()=>n(269299),Ce=()=>n(348141),ke=()=>n(285755),we=()=>n(205228),xe=()=>n(141735),Ie=()=>n(887490),Ae=()=>n(876822),Te=()=>n(749826),Me=()=>n(482162),Pe=()=>n(826955),Re=()=>n(128076),Ve=()=>n(965903),Ee=()=>n(517632),Ue=()=>n(768905),Le=()=>n(697623),De=()=>n(126621),Be=()=>n(985575),Fe=()=>n(712334),je=()=>n(527278),Oe=()=>n(8),Ne=()=>n(954949),Ke=()=>n(803728);function Ze(e){const{environment:t,userAction:n,data:o}=e,r=Ae().default.state.currentUserSettingsStore;r?_e().createAndCommit({userAction:n,environment:t,canUndo:!0,userId:r.id,perform:e=>{Ce().d2({userSettingsStore:r,data:o,transaction:e})}}):console.error("Could not find current user settings")}(0,o().exposeDebugEnvironmentValue)("messages",(function(e){const t=t=>{Ke().IW(e),Ke().W3(e,t)};return{resetNotionCalendarOnboarding:()=>{Ze({environment:e,userAction:"debuggingHelpers.clearNotionCalendarOnboarding",data:{notion_calendar_launch_modal_phase:null,notion_calendar_launch_modal_dismissed_at:null,seen_open_in_calendar_tooltip:null}}),t("notion_calendar_launch_promo")},resetAsanaPostImportTour:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetAsanaPostImportTour",data:{seen_asana_post_import_tour:null}}),t("asana_post_import_tour")},resetFormsShareTooltip:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetFormsShareTooltip",data:{seen_forms_share_form_tooltip:null}}),t("forms_share_form_tooltip")},resetDummyModal:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetDummyModal",data:{seen_dummy_modal:null}}),t("dummy_modal")},resetSidebarUpgradeNudge:()=>{Ze({environment:e,userAction:"sidebarUpgradeNudge.markNotificationAsDismissed",data:{dismissed_sidebar_upgrade_nudge:!1}}),t("sidebar_upgrade_nudge")},forceShowMessage:t=>{const n=(0,Ne().Si)(t);n?Ke().ES(e,n):console.log(`Invalid static message key: ${t}`)},resetMessageExposures:()=>{Ke().IW(e)},tryShowMessage:t=>{const n=(0,Ne().Si)(t);if(n){const t=Ke().Bo(e,n);t.error&&console.log(`Could not show ${n} because of ${t.error}`)}else console.log(`Invalid static message key: ${t}`)},resetMessage:t,resetLanguageSwitchPrompt:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetLanguageSwitchPrompt",data:{language_switching_prompt_dismissals:[]}}),t("language_switch_prompt")},pushOrReplaceToast:e=>{n(369637).m2(e)},resetLayoutPageEducation:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetLayoutPageEducation",data:{layout_info_panel_button_education_tooltip_dismissed_at:null,layout_builder_add_module_button_education_tooltip_dismissed_at:null}})},resetMwnFeatureModal:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetMwnFeatureModal",data:{mwn_feature_modal_dismissed_at_millis:null}}),t("mwn_feature_modal")},resetSlackEmbedAiConnectorTooltip:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetSlackEmbedAiConnectorTooltip",data:{seen_slack_embed_ai_connector_tooltip:!1}}),t("ai_slack_qna_embed_tooltip")},addDynamicCallout:t=>{Ke().Go(e,t)},resetGithubAIConnectorAnnouncement:()=>{const{currentSpaceViewStore:n}=Ae().default.state;n&&(_e().createAndCommit({environment:e,userAction:"AiGithubAIConnectorAnnouncementModal.clearGithubAIConnectorAnnouncementSeenAt",canUndo:!0,perform:e=>{_e().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{...n.getSettings(),ai_github_ai_connector_announcement_seen_at:null}},transaction:e})}}),t("ai_github_ai_connector_announcement"))},resetJiraUniversalQnaAnnouncement:()=>{const{currentSpaceViewStore:n}=Ae().default.state;n&&(_e().createAndCommit({environment:e,userAction:"debuggingHelpers.resetJiraUniversalQnaAnnouncement",canUndo:!0,perform:e=>{_e().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{...n.getSettings(),ai_jira_universal_qna_announcement_seen_at:null}},transaction:e})}}),t("ai_jira_universal_qna_announcement"))},resetAILimitNudge:()=>{Ze({environment:e,userAction:"debuggingHelpers.resetAiLimitNudge",data:{addOnLimitNotifications:null}}),t("ai_limit_nudge")},checkMessageEligibility:async t=>await Ke().IY(e,t)}}));const He=20;async function $e(e,t){const n=(0,fe().xP)(t)||t,{inMemoryRecordCache:o,persistedRecordCache:i}=e.defaultRecordCache;let a;for(const s of o.data)if(s.pointer.id===n){console.log(`Found a ${s.pointer.table} record in the in-memory record cache:`,s.model,s.model.__IM_SORRY__getValue());const e=o.checkRecordForTemporaryData(s);if(e&&console.log("The record has been augmented by temporary data:",e),i&&(0,r().t)(s.pointer)){const e=await i.get({pointer:s.pointer,userId:s.userId});console.log("The record is also in the persisted record cache: ",e)}a=u().mk.fromModel(s.model)}return a||console.log("Alas, no records with the id were found in the in-memory record cache."),a}function ze(e,t){return"string"==typeof e&&"string"==typeof t?Object.keys(f().OC).includes(e)?{table:e,id:(0,fe().xP)(t)||t}:{table:t,id:(0,fe().xP)(e)||e}:"string"!=typeof e||t?"object"==typeof e?e:t:{table:"block",id:(0,fe().xP)(e)||e}}function qe(e,t){if(t>He)return[];const n=[],o=(null==e?void 0:e.getAutomationStores())??[];n.push(...o.map((e=>We(e))).filter(_().$K));const r=(null==e?void 0:e.getTemplatePageStores())??[];for(const a of r){const e=a.getAutomationStore();if(e){const t=We(e);t&&n.push(t)}n.push(...Ge(a,t+1))}const i=e.getSchema();for(const a of Object.values(i))if("button"===(null==a?void 0:a.type)&&(0,_().$K)(a.automation_id)){const t=We(Pe().Mz.createChildStore(e,{id:a.automation_id,spaceId:e.getSpaceId(),table:m().cv}));t&&n.push(t)}return w().mN(n,(e=>p().dr.toKey(e.automation.pointer)))}function Ge(e,t){if(t>He)return[];const n=[];{const o=e.getAutomationStore();if(o){const e=We(o);e&&n.push(e)}if(e.isCollectionView()){const o=e.getCollectionStore();o&&n.push(...qe(o,t+1))}}const o=e.getContentStores();for(const r of o){const e=r.getAutomationStore();if(e){const t=We(e);t&&n.push(t)}if(r.isCollectionView()){const e=r.getCollectionStore();e&&n.push(...qe(e,t+1))}n.push(...Ge(r,t+1))}return w().mN(n,(e=>p().dr.toKey(e.automation.pointer)))}function We(e){if(!e)return;const t=(null==e?void 0:e.getActionStores())??[],n=null==e?void 0:e.getCreatedByPointer(),o=(null==n?void 0:n.table)===v().KJ&&(null==e?void 0:e.getRecordModel(n));return o?{automation:e,actions:t,createdBy:o,parent:e.getParentBlockStore()}:void 0}(0,o().exposeDebugEnvironmentValue)("debugging",(e=>{const t=function(e){const t=async(t,n)=>{const o=ze(t,n),r=await(0,ve().Y)(e,{pointer:o,version:-1,userId:e.currentUser.id});return(null==r?void 0:r.value)||void 0},o=async(t,o)=>{var r;const a=ze(t,o),s=await(0,ve().Y)(e,{pointer:a,version:-1,userId:e.currentUser.id}),l=null==s?void 0:s.value;if(!l)return void console.log("Unable to find record.");const c=null===(r=(0,n(718959).RM)())||void 0===r?void 0:r.pointer.spaceId;_e().createAndCommit({environment:e,perform(t){const o=Se().j4({environment:e,type:i().Ti.code,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:c});be().sO({environment:e,store:o.getBlockTitleStore(),transaction:t,value:[[JSON.stringify(l,null,2)]]}),n(33150).E5({blocks:[o],language:"JSON",transaction:t}),be().sO({environment:e,store:o.getCaptionStore(),transaction:t,value:[[`${a.table} ${a.id}`]]}),n(453999).BM({environment:e,blocksToInsert:[o],target:Ve().default.state.stores,transaction:t,replaceEmptyTextBlock:!1})},userAction:"debuggingHelpers.editRecordJson",canUndo:!0}),console.log("Created a code block with the record source. You can make edits and, with the text cursor still in the block, use __console.updateRecordJson() to write it back to the database. Do not modify the caption.")},r=()=>{const t=Ve().default.state.stores[0];if(!(t instanceof Re().G&&t.isType(i().Ti.code)))return void console.log("No code block is selected!");const n=(e=>{try{return JSON.parse(e)}catch(t){return void console.error(t)}})((0,S().QaF)(t.getTitleValue()));if(!n)return void console.log("Unable to parse JSON in selected code block.");const[o,r]=(0,S().QaF)(t.getCaptionStore().getValue()).split(" ");if(!o||!r)return void console.log("Unable to parse record pointer in caption.");const a=ze(o,r);_e().createAndCommit({environment:e,perform(o){const r=(0,Pe().Kv)(t,a);if(r instanceof Re().G){const t=n.properties;if(t){delete n.properties;const i=t.title;i&&be().sO({environment:e,store:r.getBlockTitleStore(),value:i,transaction:o}),delete t.title,_e().applyOperation({store:r,operation:{pointer:r.pointer,path:["properties"],command:"update",args:t},transaction:o})}}_e().applyOperation({store:r,operation:{pointer:r.pointer,path:[],command:"update",args:n},transaction:o})},userAction:"debuggingHelpers.updateRecordJson",canUndo:!0}),console.log(`Updated ${o} ${r}. Press Cmd-Z (in Notion, not console) to undo.`)},u=async()=>{var t,n;const o=null===(t=Ae().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId(),r=null===(n=Ae().default.state.currentUserStore)||void 0===n?void 0:n.userId;if(!o||!r)return;const i=await(0,De().fetchUserSignals)({spaceId:o,environment:e});void 0!==i&&(0,De().setUserSignals)({spaceId:o,userId:r,environment:e,newSignals:i,initialize:!1})},p=()=>{var e,t;const n=null===(e=Ae().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId(),o=null===(t=Ae().default.state.currentUserStore)||void 0===t?void 0:t.userId;if(!n||!o)return;const r=Ue().default.getUserSignals({spaceId:n,userId:o});return r?Ue().USER_SIGNALS_KEYS.map((e=>[e,("similarUserRecentPages"===e?Array.from(Object.values(r[e])):r[e]).map((e=>{let{pageId:t,...n}=e;return{...n,pageId:t,page:k(g().iU,t)}}))])):void 0},b=(t,n)=>{var o;const r=ze(t,n),i=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:r,userId:e.currentUser.id});if(void 0===(null==i?void 0:i.value))return`${r.table}: ${r.id}`;const a="type"in i.value?i.value.type:r.table;return"name"in(null==i?void 0:i.value)?`${a} ${i.value.id} ${i.value.name}`:"properties"in(null==i?void 0:i.value)&&(0,_().$K)(i.value.properties)&&"title"in i.value.properties&&(0,_().$K)(null==i?void 0:i.value.properties.title)?`${a} ${i.value.id} ${i.value.properties.title.join(" ").slice(0,30)}`:`${a} ${null==i||null===(o=i.value)||void 0===o?void 0:o.id}`},C=(t,n)=>{const o=ze(t,n);return e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:o,userId:e.currentUser.id})},k=(e,t)=>{const n=ze(e,t),o=C(e,t),r={title:b(e,t),raw:null==o?void 0:o.value,parent:void 0,id:n,children:[]};var i,a;void 0!==(null==o?void 0:o.value)&&"parent_table"in(null==o?void 0:o.value)&&"parent_id"in(null==o?void 0:o.value)&&o.value.parent_id&&(r.parent=ze(null===(i=o.value)||void 0===i?void 0:i.parent_id,null===(a=o.value)||void 0===a?void 0:a.parent_table));if(null!=o&&o.value&&"content"in(null==o?void 0:o.value)){var s;const e=(null==o||null===(s=o.value)||void 0===s?void 0:s.content)||[];for(const t of e){const e=ze(t,"block"),o=C(t,"block"),i={title:b(t,"block"),raw:null==o?void 0:o.value,parent:n,id:e,children:[]};r.children.push(i)}}return r},x=()=>{var e;const t=null===(e=R())||void 0===e?void 0:e.id;if(t)return k(t,"block");console.error("Not opening")},I=(e,t)=>`${we().default.adminUrl}/__admin/${e}/${t}`,A=(e,t)=>{window.open(I(e,t))},T=()=>{if(0!==Ve().default.state.stores.length)return Ve().default.state.stores.forEach((e=>{A(g().iU,e.id)}));console.error("No selected block")},M=()=>{Ae().default.state.currentSpaceStore?A(n(255933).bx,Ae().default.state.currentSpaceStore.id):console.error("No current space")},P=()=>{var e;const t=null===(e=R())||void 0===e?void 0:e.id;t?A(g().iU,t):console.error("Not opening")},R=()=>Me().default.state.open?(console.warn("Returning peek view page, if you want the underlying page, please close it and try again"),Me().default.state.targetStore):Ae().default.state.mainEditorCurrentBlockStore?Ae().default.state.mainEditorCurrentBlockStore:void console.error("No current mainEditorCurrentBlockStore"),V=()=>{var t;if(!Ae().default.state.mainEditorCurrentBlockStore)return void console.error("No current mainEditorCurrentBlockStore");const n=Ae().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore()||Ae().default.state.mainEditorCurrentBlockStore.getCollectionStore();if(!n)return void console.error("Cannot find collection store to remove Page sections from");const o=n.getFormat(),r=((null===(t=o.property_visibility)||void 0===t?void 0:t.filter((e=>"section"===e.visibility)))||[]).map((e=>e.property));_e().createAndCommit({userAction:"debuggingHelpers.addRelationsGroupModuleToCurrentLayout",environment:e,canUndo:!0,perform(t){ye().Do({store:n,pageSectionFormats:[],transaction:t,environment:e}),r.forEach((e=>{ye().M0({property:e,visibility:"show",store:n,format:o,transaction:t})}))}})},E=t=>{const{visibility:n,section:o}=t,r=Ae().default.state.mainEditorCurrentBlockStore;if(!n||!o)return void console.error("No visibility or section provided");if(!r)return;const i=r.getAssociatedCollectionStore()||r.getCollectionStore(),a=(null==i?void 0:i.getFormat())||r.getFormat();ye().W4({environment:e,store:i||r,pageSection:o,visibility:n,format:a})},U=()=>{var e,t;const n=null===(e=R())||void 0===e?void 0:e.getCreatedById(),o=null===(t=R())||void 0===t?void 0:t.getCreatedByTable();if(n&&o)return C(n,o);console.error("no created_by_id or created_by_table for this page")},L=()=>{var e;const t=U(),n=null==t||null===(e=t.value)||void 0===e?void 0:e.id;n?A(v().KJ,n):console.error("no current page Creator, not opening")},D=function(t){var n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const a="string"==typeof t?{query:{text:t,filters:(0,y().u4)(),sort:{field:"relevance"}},limit:20,debug:o}:t;return{environment:e,input:a,spaceId:null===(n=Ae().default.state.currentSpaceStore)||void 0===n?void 0:n.id,publicAccessPermissionAncestorBlockId:Oe().bC(e).publicAccessPermissionAncestorBlockId,searchExperimentOverrides:i,forcedClusterPattern:r,source:"debugging"}},B=async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i="string"==typeof t?{query:{text:t,filters:(0,y().u4)(),sort:{field:"relevance"}},limit:20,debug:n}:t,a=Ae().default.state.currentSpaceStore,{query:s,limit:l}=i;if(!a)return;const c=he().callApi({eventName:"search",environment:e,data:{type:y().n8.CollectionsInSpace,query:s.text.trim(),spaceId:a.id,limit:l,filters:y().u4({excludeTemplates:!0,requireEditPermissions:!0}),sort:{field:"relevance"},debug:n,searchExperimentOverrides:r,forcedClusterPattern:o}}),d=await c;return"success"===d.type?d.data:d},F={id:"root0000-0000",table:"block"},j=e=>{var t;if(void 0!==(null==e||null===(t=e.value)||void 0===t?void 0:t.parent_id))return ze(e.value.parent_id,e.value.parent_table)},O=e=>{const t=new(n(747381).Z);e.map((e=>{const n=ze(e.id,e.table),o=b(e.id,e.table),r=C(e.id,e.table),i={title:o,parent:j(r),id:n,raw:null==r?void 0:r.value,children:[]};t.set(n,i)}));const o={title:"root",parent:void 0,id:F,raw:void 0,children:[]};return e.map((e=>{const n=ze(e.id,e.table),r=t.get(n);var i;void 0!==(null==r?void 0:r.parent)&&t.has(r.parent)?null===(i=t.get(r.parent))||void 0===i||i.children.push(r):void 0!==r?o.children.push(r):o.children.push({title:"Failed to load Record",parent:void 0,id:n,raw:void 0,children:[]})})),o},N=()=>{if(!Te().default.isStatsigEnabled())throw new Error("Failed to override: Statsig not enabled");if(!Ee().C.isInitialized())throw new Error("Failed to override: Statsig not initialized")},K=()=>{var e;return null===(e=R())||void 0===e?void 0:e.getSpaceId()},Z=()=>{var e;return null===(e=Ae().default.state.currentUserStore)||void 0===e?void 0:e.id},H=async t=>{const n=K(),o=Z(),r=`${"production"}-main-usw2-0001`,i=await he().callApi({eventName:"getSpacesInitial",environment:e,data:{},headers:{[d().Zr]:r}});if(n&&o&&"success"===i.type){const e=i.data.fanoutData,t=(null==e?void 0:e.filter((e=>{let{request:t}=e;return t.users[o].some((e=>{let{spaceId:t}=e;return t===n}))})))||[];return t.length>0?t[0].headers[d().Zr]:void 0}},$=()=>{const e=R();if(e)return Ge(e,0)},z=()=>{var t;const o=null===(t=Ae().default.state.currentSpaceStore)||void 0===t?void 0:t.id,r=e.currentUser.id;if(o&&r)return(0,n(336662).hH)({spaceId:o,userId:r})},q=async(t,o)=>{const r=await xe().F.formulas.load(),i=R(),a=null==i?void 0:i.getModel();if(!i||!a||!a.isPageBlock())return;const s=i.getRecordModel,d=i.getRecordRole,u=s({id:t,spaceId:i.getSpaceId(),table:m().cv});if(!u)return;const p=(0,n(982855).gM)(e),g=u.getActionPointers().map((e=>s(e))).filter(_().$K);return g.length===u.getActionIds().length?(0,n(752348).typecheckAutomation)("button_block"===o?{actionModels:g,automationModel:u,assistantFeatureGate:p,checkExperimentGate:e=>Te().default.checkGate({gateName:e}),contextType:o,formulasModule:r,getRecordModel:s,getRecordRole:d,intl:(0,c().vc)(),isSubscribed:(0,Le().sX)(),pageBlockModel:a,userTimeZone:(0,l().r)(),valueTypes:[],env:"production"}:{actionModels:g,automationModel:u,assistantFeatureGate:p,checkExperimentGate:e=>Te().default.checkGate({gateName:e}),contextType:o,formulasModule:r,getRecordModel:s,getRecordRole:d,intl:(0,c().vc)(),isSubscribed:(0,Le().sX)(),userTimeZone:(0,l().r)(),valueTypes:[],env:"production"}):void 0},G=async t=>{const o=R();if(!o)throw new Error("Could not get current page");const r=Pe().Mz.createChildStore(o,{id:t,table:m().cv,spaceId:o.getSpaceId()}),[a,s,l]=await Promise.all([xe().F.formulas.load(),ke().Sm.automationTypecheck.load(),ke().Sm.automationActionRegistry.load()]);if(r.isTriggerType("button")){const u=r.getParentStore();if(!u)throw new Error("Could not get parent store");if(u instanceof Re().G){var c;if(!u.isType(i().Ti.button))throw new Error("Unexpected parent for button block automation");if(!o.isPageBlock())throw new Error("Current page must be a page block for button analysis");return(0,Be().jq)({environment:e,automationActionRegistryModule:l,automationStore:r,automationTypecheckModule:s,blockStore:u,currentUserId:null===(c=e.currentUser)||void 0===c?void 0:c.id,isLoggedIn:e.currentUser.isLoggedIn(),formulasModule:a,intl:je().Z.getIntl(),pageStore:o,parentRecordStore:r,type:"button_block"})}{var d;const o=Object.entries(u.getSchema()).find((e=>{let[,n]=e;return"button"===(null==n?void 0:n.type)&&n.automation_id===t}));if(!o)throw new Error("Could not find property schema for button automation");const[i,c]=o;if("button"!==(null==c?void 0:c.type))throw new Error("Expected button property schema");const p=new(n(985866).Z)(e);return p.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:u}),(0,Be().jq)({environment:e,automationActionRegistryModule:l,automationStore:r,automationTypecheckModule:s,collectionContextStore:p,currentUserId:null===(d=e.currentUser)||void 0===d?void 0:d.id,formulasModule:a,intl:je().Z.getIntl(),isLoggedIn:e.currentUser.isLoggedIn(),parentRecordStore:r,propertyId:i,propertySchema:c,type:"button_property"})}}if((0,Fe().Xd)(r))return(0,Be().$5)({environment:e,automationActionRegistryModule:l,automationTypecheckModule:s,automationStore:r,contextType:(0,Fe().Uk)((0,ge().TO)(r.getTriggerType(),"Could not get trigger type")),formulasModule:a,intl:je().Z.getIntl()});throw new Error("Unexpected automation type")},W=t=>{const n=Ae().default.state.currentUserSettingsStore,o=null==n?void 0:n.getSettings();if(!n||!o)return void console.error("Could not find current user settings");const r=e=>e?(0,a().Xz)({date:e,daysToAdd:-t}):e;_e().createAndCommit({userAction:"debuggingHelpers.advanceAssistantOnboardingNDays",environment:e,canUndo:!0,userId:n.id,perform:e=>{Ce().d2({userSettingsStore:n,data:{last_exposed_to_ai_qna_at:r(o.last_exposed_to_ai_qna_at),last_used_ai_writer_at:r(o.last_used_ai_writer_at),ai_assistant_onboarding_phase_last_set_at:r(o.ai_assistant_onboarding_phase_last_set_at),ai_assistant_tutorial_dismissed_at:r(o.ai_assistant_tutorial_dismissed_at),ai_sales_assisted_extra_notification_seen_at:r(o.ai_sales_assisted_extra_notification_seen_at),qna_reminders_shown_at:(0,_().$K)(o.qna_reminders_shown_at)?o.qna_reminders_shown_at.map((e=>(0,a().Xz)({date:e,daysToAdd:-t}))):void 0},transaction:e})}})},J=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.resetNotionAiSidebarNewBadge",environment:e,canUndo:!0,userId:t.id,perform:e=>{Ce().d2({userSettingsStore:t,data:{ai_sidebar_item_new_badge_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},Y=()=>{const t=Ae().default.state.currentSpaceViewStore;t?_e().createAndCommit({environment:e,userAction:"debuggingHelpers.resetDatabaseAISummaryDismiss",canUndo:!0,perform:e=>{n(261930).VD(t,e,{dismissed_db_page_summary_suggestion:0})}}):console.error("Could not find current space view")},Q=()=>{const t=Ae().default.state.currentSpaceViewStore;t?_e().createAndCommit({userAction:"githubAIConnector.onboarding.dismissPersonalAuthPrompt",environment:e,canUndo:!0,perform:e=>{t&&_e().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),dismissed_github_personal_auth_prompt:!1}},transaction:e})}}):console.error("Could not find current user settings")},X=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.clearQnAOnboarding",environment:e,canUndo:!0,userId:t.id,perform:e=>{var n;Ce().d2({userSettingsStore:t,data:{ai_qna_intro_onboarding_phase:null,last_exposed_to_ai_qna_at:null,last_used_ai_writer_at:null,qna_reminders_shown_at:null,ai_assistant_onboarding_phase:null,ai_assistant_tooltips_onboarding_phase:null,ai_onboarding_phase:null,ai_assistant_onboarding_phase_last_set_at:null,ai_sales_assisted_extra_notification_seen_at:null,ai_assistant_tutorial_dismissed_at:null,assistant_summarize_this_page_shown_at:void 0,ai_qna_abandoned_search_reminder_shown_at:void 0,callout_dismissal_timestamps:((null===(n=t.getSettings())||void 0===n?void 0:n.callout_dismissal_timestamps)??[]).filter((e=>"ai_assistant_announcement"!==e.name))},transaction:e})}}):console.error("Could not find current user settings")},ee=()=>{const{currentSpaceViewStore:t}=Ae().default.state;t&&_e().createAndCommit({environment:e,userAction:"AiSlackQnaNotificationTooltip.clearSlackQnaAnnouncementSeenAt",canUndo:!0,perform:e=>{_e().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),slack_universal_qna_announcement_seen_at:null}},transaction:e})}})},te=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.resetTwoWayLimitAddRelationConfirmationDialog",environment:e,canUndo:!0,userId:t.id,perform:e=>{Ce().d2({userSettingsStore:t,data:{relation_limit_confirmation_dialog_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},ne=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.resetAiPageTranslationPassiveSuggestions",environment:e,canUndo:!0,userId:t.id,perform:e=>{Ce().d2({userSettingsStore:t,data:{ai_page_translation_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},oe=()=>{const{currentSpaceViewStore:t}=Ae().default.state;t&&_e().createAndCommit({environment:e,userAction:"AiGoogleDriveQnaNotificationTooltip.clearGoogleDriveQnaAnnouncementSeenAt",canUndo:!0,perform:e=>{_e().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),google_drive_universal_qna_announcement_seen_at:null}},transaction:e})}})},re=()=>{const t=Ae().default.state.currentSpaceStore,n=Ae().default.state.currentSpaceViewStore;t&&n?_e().createAndCommit({userAction:"debuggingHelpers.resetAssistantLeapSettings",environment:e,canUndo:!0,perform:e=>{Se().sW({store:t,data:{settings:{...t.getSettings(),enable_ai_training:void 0}},transaction:e}),_e().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{...n.getSettings(),has_user_seen_leap_modal:!1}},transaction:e})}}):console.error("Could not find current space")},ie=()=>{const t=Ae().default.state.currentSpaceViewStore;t?_e().createAndCommit({userAction:"slackAIConnector.onboarding.dismissPersonalAuthPrompt",environment:e,canUndo:!0,perform:e=>{t&&_e().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),dismissed_slack_personal_auth_prompt:!1}},transaction:e})}}):console.error("Could not find current user settings")},ae=()=>{const{RouterStore:t}=e,n=Ae().default.state.currentSpaceStore,o=t.state.route;if(!n||"aiInferenceTranscript"!==o.name||!o.threadId)return;const r=Pe().V3.createChildStore(n,{id:o.threadId,spaceId:n.id,table:h().kL});return{thread:r,messages:r.getMessageStores()}},se=()=>{const{thread:e}=ae()??{};return e?e.getTranscript():[]},le=()=>{var t,n,o,r,i;const{RouterStore:a}=e,s=a.state.route;if("page"!==s.name)return;const l=s.collectionViewId;if(!l)return void console.error("Must run this from a Form view");const c=null===(t=C(l,"collection_view"))||void 0===t?void 0:t.value;if(!c||"form_editor"!==c.type)return void console.error("Must run this from a Form view");const d=(null===(n=c.format)||void 0===n||null===(n=n.form_block_pointer)||void 0===n?void 0:n.id)??"",u=null===(o=C(d,"block"))||void 0===o?void 0:o.value;if(!u)return void console.error("Can't load form block");const p=(null===(r=u.format)||void 0===r||null===(r=r.form_layout_pointer)||void 0===r?void 0:r.id)??"",m=null===(i=C(p,"layout"))||void 0===i?void 0:i.value;m?(console.log("Form editor view: \n"),console.log(c),console.log("Form block: \n"),console.log(u),console.log("Form layout: \n"),console.log(m)):console.error("Can't load form layout")},ce=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.resetJiraOnboardingTourLaunch",environment:e,canUndo:!0,userId:t.id,perform:e=>{Ce().d2({userSettingsStore:t,data:{tutorials:{"jira-sync-onboarding":"all-projects-tooltip"},jira_sync_onboarding_tour_state:null,seen_jira_sync_source_tooltip:null},transaction:e})}}):console.error("Could not find current user settings")},de=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.resetImproveJiraSyncPopup",environment:e,canUndo:!0,userId:t.id,perform:e=>{Ce().d2({userSettingsStore:t,data:{seen_improve_jira_sync_popup:null},transaction:e})}}):console.error("Could not find current user settings")},ue=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.resetJiraSetupGuide",environment:e,canUndo:!0,userId:t.id,perform:e=>{Ce().d2({userSettingsStore:t,data:{jira_sync_guide_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},pe=async()=>{const{currentSpaceStore:t,currentSpaceViewStore:o}=Ae().default.state;if(t){const r=await(0,n(590166).S1)({environment:e,currentSpaceStore:t,currentSpaceViewStore:o}),i=new Map;return r.getAllBlocks().forEach((e=>{e.block.source.forEach((t=>{const n=i.get(t)||[];n?i.set(t,[...n,e.block]):i.set(t,[e.block])}))})),{...r,groupedPages:i}}},fe=async()=>{var t;const n=null===(t=e.defaultRecordCache.persistedRecordCache)||void 0===t?void 0:t.getDedicatedWorkerConnection_DEBUG_ONLY();if(!n)throw new Error("Browser SQLite is not active here!");await n.resetDb_DEBUG_ONLY(),console.log("Browser SQLite DB successfully reset!")},Ne=async()=>{try{var t;await(null===(t=e.defaultRecordCache.persistedRecordCache)||void 0===t?void 0:t.reset()),n(747055).Z.reset()}catch(o){console.error("Error resetting SQLite:",o)}finally{console.log("SQLite reset successfully")}},Ke=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unread_and_read",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";const r=K();if(r){const i=await he().callApi({eventName:"getNotificationsForInbox",environment:e,data:{spaceId:r,size:n,type:t,locale:o}});console.log(i)}else console.log("no space id")},Ze=t=>{const o=n(217465).RecordMapWithRole.create();for(const[n,r]of Object.entries(t)){if(!f().wb(n)||!Array.isArray(r))throw new Error(`Not a table: ${n}. Argument should be like { block: [id1, id2], collection: [...], ... }`);for(const t of r){const r={table:n,id:t},i=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:r,userId:e.currentUser.id});i&&o.setValueAndRole(r,i.value,i.role)}}return o},He=e=>Ze(e).toRecordMap(),qe=()=>{const t=R();t&&(0,n(72700).y)({environment:e,pageStore:t,duplicateTo:"private_pages",triggeredFrom:"debugging_helper"})},We=()=>{const t=R();if(!t)return;const o=(new me).mapPageToXML({pagePointer:t.getSpaceShardedPointer(),intl:(0,c().vc)(),getRecordModel:e.defaultRecordCache.inMemoryRecordCache.makeGetRecordModelFn(e.currentUser.id),serverOrClientConfig:{domainBaseUrl:we().default.domainBaseUrl,publicDomainBaseUrl:we().default.publicDomainName},experimentService:Te().default,formulasModule:s()});return(0,n(175882).KT)(o)},Je=async t=>await(0,n(660259).resetAndInitializeAssistantSession)({environment:e,chatTranscriptStorageStep:t,chatStartTimestamp:Date.now(),makeActiveSession:!0}),Ye=()=>{const t=Ae().default.state.currentUserSettingsStore;t?_e().createAndCommit({userAction:"debuggingHelpers.resetAssistantSuggestionExposure",environment:e,canUndo:!0,userId:t.id,perform:e=>{Ce().d2({userSettingsStore:t,data:{ai_suggested_skill_exposure_tracker:null},transaction:e})}}):console.error("Could not find current user settings")};return{getRecordFromApi:t,getRecordFromCache:C,getAdminUrl:I,getSelectedBlocks:()=>Ve().default.state.stores,openInAdmin:A,openSelectedBlocksInAdmin:T,openCurrentPageCreatorInAdmin:L,getCurrentPage:R,getCurrentLayoutStore:()=>{if(!Ae().default.state.mainEditorCurrentBlockStore)return void console.error("No current mainEditorCurrentBlockStore");const e=Ae().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore();if(!e)return void console.error("Collection pages use layouts, but can't find a collection page in the main editor.");const t=e.getLayoutStore();if(t)return t;console.error("This collection doesn't have a layout in main editor.")},removeAllCollectionPageSections:V,setPageSectionVisibility:E,getCurrentNormalizedPropertyGroups:()=>{if(!Ae().default.state.mainEditorCurrentBlockStore)return void console.error("No current mainEditorCurrentBlockStore");const e=Ae().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore()||Ae().default.state.mainEditorCurrentBlockStore.getCollectionStore();if(e)return e.getNormalizedPropertyGroups();console.error("Property groups are stored on collections but can't find collection in main editor.")},openCurrentPageInAdmin:P,openCurrentSpaceInAdmin:M,quickFind:function(e){const t=D(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0),n=Oe().MS(t);return n&&n.then((e=>"success"===e.type?e.data:e))},quickFindRequest:function(e){return D(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)},quickFindCollections:B,getCurrentPageDetail:x,getHomeBlockIdsForUser:z,getRecordDetail:k,getRecordTitle:b,getRecordTree:O,overrideStatsigLocalExperiment:(e,t)=>{N(),Ee().C.updateLocalOverrideConfig(e,t)},overrideStatsigLocalFeatureGate:(e,t)=>{N(),Ee().C.updateLocalOverrideGate(e,t)},removeAllStatsigLocalOverrides:()=>{N(),Ee().C.removeAllLocalOverrides()},getCurrentSpaceId:K,getCurrentUserId:Z,getAutomationsForSelectedBlocks:()=>Ve().default.state.stores.map((e=>Ge(e,0))).filter(_().$K),getAutomationsForCurrentPage:$,getCurrentThread:ae,getCurrentThreadSteps:se,debugCompileAutomation:q,getAutomationAnalysis:G,generateTutorialData:(e,t,n)=>{const o="production";if("development"!==o&&"local"!==o)return;const r=n??Ae().default.state.mainEditorCurrentBlockStore,i=null==r?void 0:r.getType(),a=null==r?void 0:r.getProperties(),s=null==r?void 0:r.getFormat();if(!(r&&i&&a&&s))return void console.log(`Missing one of these: ${JSON.stringify({rootBlockStore:r,type:i,properties:a,format:s})}`);function l(e,t){const n=t.getContentStores();return w().xH(n.map(((t,n)=>{const o=t.getType(),r=t.getProperties(),i=t.getFormat();if(!o||!r||!i)return;return[{uri:`${e}/${n}`,type:"block",parentUri:e,parentType:"block",blockValue:{type:o,properties:r,format:i}},...l(`${e}/${n}`,t)]}))).filter(_().$K)}const c=[{uri:e,type:"block",parentUri:t,parentType:"collection",blockValue:{type:i,properties:a,format:s}},...l(e,r)];function d(t){const n=t.replace(e,"").split("/");return w().eV(e)+n.join("_")}const u={},p=c.map((t=>{const n=t.uri;return JSON.stringify(t,((o,r)=>{if("uri"===o||"parentUri"===o)return["<<<START>>>","`",r.replace(e,"${uri}"),"`","<<<END>>>"].join("");if("title"===o&&Array.isArray(r)&&"image"!==t.blockValue.type){const e=[];for(const[t,o]of r.entries()){if(o.length>1&&"a"===o[1][0][0])return o;const r=d(`${n}/${t}`),i=[["<<<START>>>",`LocalizationHelper.formatMessage(messages.${r})`,"<<<END>>>"].join(""),...o.slice(1)];u[r]={defaultMessage:o[0],id:r,description:"Page template's content"},e.push(i)}return e}return r}))})).map((e=>e.replace(/"<<<START>>>/g,"").replace(/<<<END>>>"/g,"").replace(/<<<QUOTE>>>/g,'"')));return`\n\t\t\tconst messages = defineMessages({\n\t\t\t\t${(0,_().qP)(u).map((e=>{let[t,n]=e;return`"${t}": {\n\t\t\t\t\t\t\t\t\tid: "${n.id}",\n\t\t\t\t\t\t\t\t\tdefaultMessage: \`${n.defaultMessage}\`,\n\t\t\t\t\t\t\t\t\tdescription: "${n.description}",\n\t\t\t\t\t\t\t\t}`})).join(",\n")}\n\t\t\t})\n\t\t\tconst uri = "${e}"\n\t\t\treturn [\n\t\t\t\t${p.join(", ")}\n\t\t\t]`},setHomeTemplatesPersona:e=>{const t=[...Ie().az.map((e=>({personaValue:{type:"function",persona:e},key:`function - ${e}`}))),...Ie().ml.map((e=>({personaValue:{type:"space_intent",persona:e},key:`space_intent - ${e}`}))),...Ie().GK.map((e=>({personaValue:{type:"space_type",persona:e},key:`space_type - ${e}`})))],o=t.find((t=>t.key===e));o?n(149778).Z.setState(o.personaValue):console.error("input must be one of the following values",t.map((e=>e.key)))},setHomeLearnUserType:e=>{const t={isMultiplayer:e.isMultiplayer??!1,isNewAccount:e.isNewAccount??!1,isWorkspaceOwner:e.isWorkspaceOwner??!1,isOnTrial:e.isOnTrial??!1,persona:e.persona};n(416698).Z.setState(t)},advanceAssistantOnboardingNDays:W,printAllFormsDataModel:le,resetJiraOnboardingTourLaunch:ce,resetImproveJiraSyncPopup:de,resetJiraSetupGuide:ue,getAllUserSignals:p,loadAllUserSignals:u,getLocalSearchableCache:pe,saveFileFromOpfs:async e=>{const t=await navigator.storage.getDirectory(),n=await(await t.getFileHandle(e)).getFile(),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e,o.click()},resetBrowserSqlite:fe,resetSqliteForOffline:Ne,resetNotionAiSidebarNewBadge:J,resetDatabaseAISummaryDismiss:Y,getNotificationsforInbox:Ke,createRecordMapWithRole:Ze,createRecordMap:He,findId:$e.bind(null,e),editRecordJson:o,updateRecordJson:r,duplicateTranslatedPage:qe,loadAssistantChatTranscriptStorageStep:Je,resetGithubPersonalAuthPrompt:Q,resetSlackPersonalAuthPrompt:ie,getTranslatedPageXml:We,resetAssistantSuggestionExposure:Ye,resetGoogleDriveOnboarding:oe,resetSlackOnboarding:ee,resetAssistantOnboarding:X,resetAssistantLeapSettings:re,resetTwoWayLimitAddRelationConfirmationDialog:te,resetAiPageTranslationPassiveSuggestions:ne,getCurrentCellId:H}}(e);for(const[o,r]of Object.entries(t))(0,n(947115).exposeDebugValue)(o,r);return t}))},761936:(e,t,n)=>{"use strict";n.d(t,{L:()=>d});var o=()=>n(642240),r=()=>n(338530);const i={ko:()=>n.e(60692).then(n.bind(n,299435)),es:()=>n.e(20883).then(n.bind(n,960142)),de:()=>n.e(83224).then(n.bind(n,299606)),fr:()=>n.e(85038).then(n.bind(n,604240)),pt:()=>n.e(72138).then(n.bind(n,515748)),zh:()=>n.e(17835).then(n.bind(n,240169)),ja:()=>n.e(96377).then(n.bind(n,770488)),da:()=>n.e(57677).then(n.bind(n,317410)),fi:()=>n.e(66970).then(n.bind(n,266265)),nb:()=>n.e(93031).then(n.bind(n,189761)),nl:()=>n.e(62579).then(n.bind(n,360701)),sv:()=>n.e(60382).then(n.bind(n,575660))};let a=!1,s=!1;async function l(e){for(const[n,r]of Object.entries(e.emojiLocaleKeywords)){var t;o().Q4[n]={...o().Q4[n],keywords:[...r,...(null===(t=o().Q4[n])||void 0===t?void 0:t.keywords)||[]]}}await r().Z.waitUntilLoaded(),r().Z.update((t=>{let{emojiByName:n,...o}=t;return{...o,emojiByName:{...n,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=n(146947).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const d=(0,n(924665).Z)((async()=>{await async function(){s||(await l(await n.e(83552).then(n.bind(n,716373))),s=!0)}(),await c()}))},228772:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var o=()=>n(142735),r=()=>n(876822);function i(){return(0,o().VK)((()=>r().default.state.currentSpaceStore),[])}},110372:(e,t,n)=>{"use strict";n.d(t,{YF:()=>c,bl:()=>l,gF:()=>a,i6:()=>d,lZ:()=>s});var o=()=>n(954949),r=()=>n(594546),i=()=>n(749826);function a(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,r().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),i().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,r().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),i().default.logEvent("callout_click",t.callout_key)}function l(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,r().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),i().default.logEvent("callout_dismiss",t.callout_key)}function c(e,t){const{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:i,eligibility_timeouts:a,blocklist:s}=t;(0,r().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:i,eligibility_timeouts:a,blocklist:s}}})}function d(e,t){(0,r().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},772327:(e,t,n)=>{"use strict";n.d(t,{_:()=>m});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(788860),l=()=>n(921981),c=()=>n(842574),d=()=>n(416277),u=()=>n(520849),p=n(785893);function m(e){let{loginModalStore:t,loginStore:n,title:a,description:s,isSignup:c,disableLoginLink:u,redirectURL:m,className:v,onDismiss:y,trustedDomain:S}=e;const b=(0,r().O7)(),_=(0,i().VK)((()=>t.state.open),[t]),C=(0,o.useId)(),k=(0,o.useId)(),w={loginStore:n,title:a,description:s,isSignup:c,redirectURL:m,disableLoginLink:u,titleAriaId:C,descriptionAriaId:k,trustedDomain:S};return(0,p.jsx)(l().c,{ariaLabelledBy:C,ariaDescribedBy:k,isOpen:_,onDismiss:()=>{h({loginModalStore:t,loginStore:n,onDismiss:y})},areaConstraint:{width:{type:"fixed",length:480},height:{type:"unlimited",scroll:"allow"}},deprecatedCompatibilityOverrides:{tabletsUsePhoneDisplayMode:!0},render:()=>(0,p.jsx)(g,{children:(0,p.jsxs)("div",{className:v,children:[!b.device.isMobile&&(0,p.jsx)(f,{loginModalStore:t,loginStore:n,onDismiss:y}),(0,p.jsx)(d().gM,{...w})]})})})}function g(e){let{children:t}=e;return(0,r().O7)().device.isMobile?(0,p.jsx)(c().T,{type:u().Z.Y,children:t}):t}function f(e){let{loginModalStore:t,loginStore:n,onDismiss:o}=e;const r=(0,a().Fg)();return(0,p.jsx)("div",{style:{fontSize:14,color:r.mediumTextColor,position:"absolute",right:0,marginTop:16,marginRight:16,cursor:"pointer",zIndex:1},onClick:()=>{h({loginModalStore:t,loginStore:n,onDismiss:o})},children:(0,p.jsx)(s()._H,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function h(e){const{loginModalStore:t,loginStore:n,onDismiss:o}=e;n.reset(),t.setState({open:!1}),o&&o()}},128646:(e,t,n)=>{"use strict";n.r(t),n.d(t,{moveToTeamImpl:()=>l});var o=()=>n(513670),r=()=>n(696459),i=()=>n(332542),a=()=>n(968377),s=()=>n(630903);function l(e){let{transaction:t,currentSpaceViewStore:n,teamStore:l,targets:c,location:d,environment:u}=e;const p=n.getTeamsStores(),m=l.getTeamPagesStore();s().maybeTurnCollectionViewIntoCollectionViewPage({environment:u,blocks:c,transaction:t});for(const s of c){const e=o().sE(p,(e=>{const t=e.getTeamPagesStore().getValue();if(t)return t.includes(s.id)}));(null==e?void 0:e.id)!==l.id&&("append"===d.type?i().jG({parentStore:m,childStore:s,after:d.after,transaction:t}):"prepend"===d.type?i().SH({parentStore:m,childStore:s,before:d.before,transaction:t}):(0,r().t1)(d),e&&a().sp({teamStore:e,store:s,transaction:t}))}return l}},309797:(e,t,n)=>{"use strict";n.d(t,{D9:()=>D,GB:()=>B,L2:()=>L,Nr:()=>R,Qg:()=>U,WJ:()=>j,h9:()=>P,m4:()=>M,mj:()=>V,n1:()=>F,sD:()=>E});var o=()=>n(219727),r=()=>n(657320),i=()=>n(142735),a=()=>n(156642),s=()=>n(109477),l=()=>n(752778),c=()=>n(844085),d=()=>n(707461),u=()=>n(887430),p=()=>n(954452),m=()=>n(201741),g=()=>n(982855),f=()=>n(949842),h=()=>n(148976),v=()=>n(191586),y=()=>n(942226),S=()=>n(466970),b=()=>n(170210),_=()=>n(876822),C=()=>n(845622),k=()=>n(749826),w=()=>n(543842),x=()=>n(346392),I=()=>n(311562),A=()=>n(482162),T=()=>n(365609);function M(e){(0,f().ZP)({event:e,context:f().Af.EditorMouseDown,callback:()=>{}})}function P(e){(0,f().ZP)({event:e,context:f().Af.EditorClick,callback:()=>{}})}function R(e){return(0,i().VK)((()=>Boolean(T().Z.state.pageMap[e.id])||x().Z.state.pages.has(e.id)),[e.id])}function V(e,t){const n=(0,o().O7)(),a=(0,r().l)(),s=R(e),l=(0,i().VK)((()=>{var n,o;return t===I().S.Frame?Boolean(null===(n=_().default.state.currentLoadingContainerStore)||void 0===n?void 0:n.state.ready):t===I().S.PeekView&&A().default.state.open?Boolean(null===(o=A().default.state.loadingContainerStore)||void 0===o?void 0:o.state.ready):t===I().S.CollectionPageView||t===I().S.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=U(e);return(0,i().VK)((()=>{if(!l)return!1;const t=n.currentUser.isLoggedIn(),o=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=o&&o.hasPublicPermission)||"edit"===(null==o?void 0:o.permission))&&!s&&!c&&(!(0,g().GD)(o)||"completionPopup"!==C().default.state.type))}),[n.currentUser,c,l,a,s,e])}function E(e,t){const n=(0,o().O7)(),a=(0,r().l)(),{isTablet:s}=(0,o().Fy)(),l=(0,S().E)("tablet_refresh_template_pills_gate");return(0,i().VK)((()=>{if(t===I().S.SitePreview)return!1;if(n.device.isMobile&&(!s||!l))return!1;if(!n.currentUser.isLoggedIn())return!1;const o=a&&a.publicEditModeStore.state;if(null!=o&&o.hasPublicPermission&&"edit"!==(null==o?void 0:o.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const i=m().TI.state,c=m().mn.state;if(i&&e.id===c)return!1;return!((0,v().OZ)(t)?d().Pm.state:d().wC.state)}),[n,a,e,t,s,l])}function U(e){return(0,i().VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(a().Ti.externalObjectInstancePage)}),[e])}function L(e){return(0,i().VK)((()=>{if(!(0,h().K6)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().vF){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function D(e){return(0,i().VK)((()=>{if(!(0,h().K6)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function B(e){return(0,i().VK)((()=>{if(!k().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().gH.CsvImport}),[e])}function F(e){const t=(0,o().O7)(),{device:n,WindowSizeStore:r}=t,a=(0,i().VK)((()=>{const e=r.state.height,o=n.isMobile&&w().Z.state.open?e:0;return c()._4(t)+o}),[t,r,n.isMobile]);return(0,i().VK)((()=>"home-phone"===e?b().jq:n.isTablet?380:n.isIOS?Math.max(350,a):n.isMobile?400:"side-peek"===e||"center-peek"===e?y().KA:"home"===e?b().XX:"30vh"),[n,a,e])}function j(e){const t=(0,o().O7)(),n=(0,i().VK)((()=>(0,p().fg)(t,e)),[t,e]);return(0,i().VK)((()=>n&&!e.isFullWidth()?(0,p().gC)(t,(0,y().wq)(e),(0,u().Ks)(e)):0),[t,n,e])}},355435:(e,t,n)=>{"use strict";n.d(t,{E7:()=>i,Ju:()=>r,cb:()=>s,iv:()=>a,tL:()=>o});const o=32,r=202,i=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},420406:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});function o(e,t){t.route.name;return!1}},341643:(e,t,n)=>{"use strict";n.d(t,{DW:()=>y,IG:()=>f,J4:()=>v,hZ:()=>h,q9:()=>g,qq:()=>S,s4:()=>m});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(801812),s=()=>n(677559),l=()=>n(690664),c=()=>n(105649),d=()=>n(291335),u=()=>n(590972),p=()=>n(420406);const m=new(s().Ss)("PerformanceToolbar",(()=>Promise.all([n.e(62743),n.e(5242),n.e(4014),n.e(20919),n.e(93843),n.e(66283),n.e(54194)]).then(n.bind(n,674207)))),g=(0,s().kF)(m,(e=>e.PerformanceToolbar)),f=(0,s().kF)(m,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,r().O7)();return(0,i().VK)((()=>(0,p().$)(e,e.RouterStore.state)),[e])}function v(){const e=(0,r().O7)(),t=b("PerformanceToolbarStore"),n=b("isPerformanceToolbarVisible");return(0,i().VK)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function y(){const e=b("PerformanceToolbarStore");return(0,i().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function S(){const e=(0,r().O7)(),t=b("createPerformanceToolbarMouseListeners"),n=b("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:f}=(0,i().VK)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,g,f)}),[t,e,n,a,s,p,m,g,f])}function b(e){const t=h(),[{value:n}]=(0,a().r5)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},662062:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});const o={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1};function r(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...o,...t}}},887490:(e,t,n)=>{"use strict";n.d(t,{GK:()=>l,Ju:()=>S,NZ:()=>c,az:()=>a,ml:()=>s});n(670560),n(267602),n(653476);var o=()=>n(696459),r=()=>n(876822);const i=10,a=["creative","internal_communication","eng","product_design","project_or_program_management","product","marketing","sales_or_success","support","finance","hr","it_admin","knowledge_management","operations","educator","student"],s=["life","work","school"],l=["singleplayer","multiplayer"];function c(e){let{userPersonaValue:t,userUseCases:n,spaceSurveyData:r}=e;const i=[g(t),...f({userUseCases:n}),...h({spaceSurveyData:r}),v({workspaceType:p()})].filter(o().$K);let a;for(const o of i)a=a?u(a,o):o;return void 0===a?{type:"space_type",persona:"singleplayer"}:a}const d={space_type:0,space_intent:1,function:2};function u(e,t){return d[e.type]>=d[t.type]?e:t}function p(){const{currentSpaceStore:e}=r().default.state,t=null==e?void 0:e.getModel(),n=null==e?void 0:e.getMemberCountFromPublicSpaceData();return t&&n?n<=1?"singleplayer":n<i?"multiplayer_small":"multiplayer":"singleplayer"}const m={student:{type:"function",persona:"student"},educator:{type:"function",persona:"educator"},creative:{type:"function",persona:"creative"},finance:{type:"function",persona:"finance"},internal_communication:{type:"function",persona:"internal_communication"},project_or_program_management:{type:"function",persona:"project_or_program_management"},it_admin:{type:"function",persona:"it_admin"},knowledge_management:{type:"function",persona:"knowledge_management"},marketing:{type:"function",persona:"marketing"},eng:{type:"function",persona:"eng"},hr:{type:"function",persona:"hr"},product:{type:"function",persona:"product"},product_design:{type:"function",persona:"product_design"},sales:{type:"function",persona:"sales_or_success"},support:{type:"function",persona:"support"},operations:{type:"function",persona:"operations"},founder_or_ceo:void 0,other:void 0,unfilled:void 0};function g(e){return e?m[e]:void 0}function f(e){let{userUseCases:t}=e;const n=[];for(const r of t??[])switch(r){case"personal_notes_to_dos":n.push({type:"space_intent",persona:"life"});continue;case"team_docs_knowledge_base":case"team_project_management":n.push({type:"space_intent",persona:"work"});continue;case"ai":case"docs":case"wikis":case"notes":case"project":case"goals":case"other":continue;default:(0,o().t1)(r)}return n}function h(e){let{spaceSurveyData:t}=e;const n=[],r=function(e){var t;let{spaceSurveyData:n}=e;const r=null==n||null===(t=n.intent)||void 0===t?void 0:t.value;if(r)switch(r){case"personal":case"life":return"life";case"team":case"work":return"work";case"school":return"school";default:(0,o().t1)(r)}}({spaceSurveyData:t});if(r&&n.push({type:"space_intent",persona:r}),null!=t&&t.use_cases)for(const i of t.use_cases.value)switch(i){case"personal_notes_to_dos":n.push({type:"space_intent",persona:"life"});continue;case"team_docs_knowledge_base":case"team_project_management":n.push({type:"space_intent",persona:"work"});continue;case"ai":case"docs":case"wikis":case"notes":case"project":case"goals":case"other":continue;default:(0,o().t1)(i)}return n}function v(e){let{workspaceType:t}=e;if(!t)return;return y({workspaceType:t})?{type:"space_type",persona:"multiplayer"}:{type:"space_type",persona:"singleplayer"}}function y(e){let{workspaceType:t}=e;switch(t){case"multiplayer":case"multiplayer_small":return!0;case"singleplayer":return!1;default:(0,o().t1)(t)}}function S(){return y({workspaceType:p()})}},170210:(e,t,n)=>{"use strict";n.d(t,{$1:()=>C,$K:()=>b,A0:()=>h,A5:()=>f,Ae:()=>M,Cm:()=>u,D9:()=>g,EP:()=>l,Er:()=>k,Gl:()=>T,KI:()=>x,Ng:()=>m,QF:()=>p,Uf:()=>d,XX:()=>i,bS:()=>S,cc:()=>I,d_:()=>c,iO:()=>s,jO:()=>_,jq:()=>a,pW:()=>v});var o=()=>n(513670),r=()=>n(696459);const i=160,a=40,s=24,l=20,c=600,d=270,u=405,p=480,m=500,g=void 0,f=16,h=10,v=8,y=(n(706363).Ct,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),S=4;function b(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function _(e){return{width:48,height:48,fill:e.lightIconColor}}function C(e){let{theme:t,isPhone:n}=e;return n?t.personalHomeBackgroundPhone:t.surface.page}function k(e){let{theme:t,isPhone:n,buttonState:o}=e,r=t.whiteButtonBackground;switch(o){case"hovered":r=t.whiteButtonHoveredBackground;break;case"pressed":r=t.whiteButtonPressedBackground}return n&&(r=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:r,...y,boxShadow:A({isPhone:n,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const w=1;function x(e){let{isPhone:t,theme:n}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:n.home.tile.background,boxShadow:A({isPhone:t,theme:n}),...y}}function I(e){let{mode:t,isPhone:n}=e;switch(t){case"dark":return 0;case"light":return w;default:return(0,r().P)(t),0}}function A(e){let{isPhone:t,theme:n,borderOnly:r}=e;if("dark"===n.mode)return"unset";n.mode;const i=I({mode:n.mode,isPhone:t});return(0,o().oA)([r||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${i}px rgba(0, 0, 0, 0.05)`]).join(", ")}function T(e){return{display:"flex",flexDirection:"column",width:e.isPhone?"100%":700,gap:24}}function M(e){const{isPhone:t,theme:n,borderOnly:o}=e;return{unhoveredBoxShadow:A({isPhone:t,theme:n,borderOnly:o}),hoveredBoxShadow:"light"===n.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):n.homeShadow.card.hovered}}},416698:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){}}const r=new o},149778:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){}}const r=new o},138390:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});n(670560),n(667294);var o=()=>n(505365),r=()=>n(934935),i=()=>n(330125),a=()=>n(828042),s=()=>n(788860),l=()=>n(91502),c=()=>n(524434),d=n(785893);function u(){const e=(0,l().QI)(),t=c().KR.isFullPageAssistantInStartOptions(),n=[];return e&&n.push({key:"personal_home",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.home.label",defaultMessage:"Home"}),renderIcon:e=>(0,i().z)({width:20,height:20,...e})}),n.push({key:"last_visited_page",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"}),renderIcon:e=>(0,o().Y)({width:20,height:20,...e})},{key:"first_page",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"}),renderIcon:e=>(0,r().S)({width:20,height:20,padding:2,...e})}),t&&n.push({key:"chat",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.chat.label",defaultMessage:"Notion AI"}),renderIcon:e=>(0,a().t)({width:20,height:20,...e})}),n}},591707:(e,t,n)=>{"use strict";n.d(t,{C:()=>i,E:()=>r});var o=()=>n(529048);const r=new(o().Z),i=new(o().Z)},974442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},685472:(e,t,n)=>{"use strict";n.d(t,{EP:()=>i,LU:()=>a,NS:()=>r,SS:()=>o,ZP:()=>l});const o="loadingLocalImage",r="uploading",i="downloading",a="loaded";class s extends(()=>n(263184))().default{getInitialState(){return{loadingMode:a}}}const l=s},385021:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{justUnlocked:!1}}}const r=o},774985:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=new(n(685472).ZP)},663773:(e,t,n)=>{"use strict";n.d(t,{Cv:()=>l,aJ:()=>c,kw:()=>d,zX:()=>u});var o=()=>n(219727),r=()=>n(142735),i=()=>n(799891),a=()=>n(629719),s=()=>n(515323);function l(e){let{spaceId:t}=e;const n=(0,o().O7)();return(0,r().VK)((()=>{if(t)return s().U.getData(n,{spaceId:t})}),[n,t])}function c(e){if("admin"===(null==e?void 0:e.type))return e}function d(e,t,n){if(!t)return 0;const o=(0,a().nW)({spaceId:e,logFunction:i().log.bind(i()),subscriptionState:t});return o?Math.max(o,n):0}function u(e){var t;const n=null===(t=(0,a().a7)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const o=n.unitAmount,r="year"===n.billingInterval?12:1;return{amount:o.amount/r,currencyCode:o.currencyCode}}},595976:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var o=()=>n(219727),r=()=>n(142735),i=()=>n(616433),a=()=>n(515323),s=()=>n(663773);function l(e){let{spaceId:t}=e;const n=(0,o().O7)(),l=(0,i().J)();return(0,r().VK)((()=>{if(!t||!l)return;const e=a().U.getData(n,{spaceId:t});return(0,s().aJ)(e)}),[n,t,l],{useDeepEqual:!0})}},548919:(e,t,n)=>{"use strict";n.d(t,{D:()=>i,Qk:()=>s,we:()=>a});var o=()=>n(873463),r=()=>n(914575);function i(e){r().Z.setState({open:!0,...e})}function a(){r().Z.setState({open:!1})}function s(e){o().Z.setState({open:!0,...e})}},701814:(e,t,n)=>{"use strict";n.d(t,{z:()=>y});n(667294);var o=()=>n(219727),r=()=>n(142735),i=()=>n(846550),a=()=>n(677200),s=()=>n(788860),l=()=>n(568017),c=()=>n(154186),d=()=>n(603692),u=()=>n(661641),p=()=>n(654133),m=()=>n(345918),g=()=>n(228772),f=()=>n(998901),h=()=>n(697623),v=n(785893);function y(e){let{onClick:t,showIcon:n=!0}=e;const i=b(n),a=(0,o().O7)(),l=(0,g().r)(),d=(0,r().VK)((()=>l&&(0,m().rn)(a,l)),[a,l]),y=(0,r().VK)((()=>(0,h().zt)()),[]);return void 0===t?(0,v.jsx)("div",{style:{...i.badge,cursor:"default"},children:(0,v.jsx)(S,{showIcon:n})}):(0,v.jsx)(p().Z,{placement:f().Placement.Bottom,style:i.tooltip,render:e=>(0,v.jsx)(c().Z,{onClick:t,style:{...i.badge,cursor:"pointer"},hoveredStyle:i.badgeHover,pressedStyle:i.badgePressed,...e,children:(0,v.jsx)(S,{showIcon:n})}),renderTooltip:()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u().q,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:(0,v.jsx)(s()._H,{id:"trialBadge.tooltip.title",defaultMessage:"{hasSpaceName, select, true {{spaceName}} other {Your workspace}} is on a free {planName, select, plus {Plus} business {Business} enterprise {Enterprise} other {}} trial",values:{hasSpaceName:Boolean(d),spaceName:d,planName:y}})}),(0,v.jsx)(u().q,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:(0,v.jsx)(s()._H,{id:"trialBadge.tooltip.description",defaultMessage:"Click to learn more"})})]}),textWrap:!0})}function S(e){let{showIcon:t}=e;const n=b(t);return(0,v.jsxs)(v.Fragment,{children:[t?(0,v.jsx)("span",{style:n.giftIcon,children:(0,v.jsx)(d().y,{iconGroup:a().$,variantName:"mini",colorName:"orangePrimary"})}):null,(0,v.jsx)(u().q,{styleName:"UISmall-12px/Medium",children:(0,v.jsx)(s()._H,{id:"trialBadge.title",defaultMessage:"Free trial"})})]})}function b(e){return(0,i().yK)((t=>({badge:{display:"flex",flexDirection:"row",gap:4,justifyContent:"center",alignItems:"center",color:t.icon.orangePrimary,background:t.fill.orangeSecondary,padding:e?"0px 6px 0px 4px":"0px 6px",height:e?22:20,borderRadius:6,width:"fit-content"},badgeHover:{background:l().FN[t.mode].orange[100]},badgePressed:{background:l().FN[t.mode].orange[200]},tooltip:{maxWidth:"240px",width:"max-content",display:"flex",padding:"4px 6px",flexDirection:"column",alignItems:"flex-start",gap:2,borderRadius:4},giftIcon:{paddingBottom:1}})),[e])}},873463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"TrialEndModalStore"})},914575:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"TrialInfoModalStore"})},72700:(e,t,n)=>{"use strict";n.d(t,{y:()=>b});n(821057);var o=()=>n(506347),r=()=>n(696459),i=()=>n(421654),a=()=>n(676922),s=()=>n(332542),l=()=>n(47443),c=()=>n(145284),d=()=>n(269299),u=()=>n(205228),p=()=>n(872308),m=()=>n(594546),g=()=>n(128646),f=()=>n(876822),h=()=>n(524434),v=()=>n(279386),y=()=>n(807230),S=()=>n(56348);function b(e){try{const{pageStore:t,environment:n,duplicateTo:S,triggeredFrom:b}=e,{currentUserStore:_,currentSpaceStore:C,currentSpaceViewStore:k}=f().default.state;if(!h().KR.isFullPageTranslateEnabled())throw new Error("Invalid call to duplicateTranslatedPage: full page translate is not enabled");if(!_||!C||!k)throw new Error("Cannot duplicate translated page: missing required stores");if(!(0,y().ww)(n))throw new Error("Cannot duplicate translated page: user cannot create page");const w=v().MT.getStateForBlock(t.id);if(!w)throw new Error("Cannot duplicate translated page: no editor mode state");if("translate_locked"!==w.mode||"active"!==w.status)throw new Error("Cannot duplicate translated page: invalid editor mode state");const x=async e=>{const{duplicateStore:r,duplicateBlockResultStatusPromise:s}=e;try{"success"===(await s).status&&(r.isLocked()&&d().createAndCommit({userAction:"fullPageTranslationActions.duplicateTranslatedPage.unlockPage",environment:n,canUndo:!0,perform:e=>{i().Wq({environment:n,store:r,isLocked:!1,transaction:e})}}),l()._c({environment:n,store:r,pageVisitSource:o().tY.SavePageTranslationCopy}),a().lR({pageStore:t,environment:n,triggeredFrom:"navigation"}))}catch(c){throw new Error("Error duplicating translated page",{cause:c})}};if((0,m().j)({environment:n,event:{eventName:"duplicate_translated_page",eventProperties:{duplicate_to:S,triggered_from:b,page_id:t.id}}}),"parent"===S){const e=t.getParentStore();if("block"!==(null==e?void 0:e.table)&&"team"!==(null==e?void 0:e.table)&&"space"!==(null==e?void 0:e.table)&&"collection"!==(null==e?void 0:e.table))throw new Error("Cannot duplicate translated page: invalid parent store table");const o=d().createAndCommit({userAction:"fullPageTranslationActions.duplicateTranslatedPageToParent",environment:n,canUndo:!0,perform:o=>{const[i,a]=p().duplicateBlock({environment:n,stores:[t],addCopyName:!1,transaction:o,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!t.isInsideTemplate(),targetSpaceId:C.id,baseUrl:u().default.domainBaseUrl,publicDomainName:u().default.publicDomainName,preferDuplicateLocation:"local",applyTranslationMap:w.translationMap}),l=i[0],d={type:"append",after:t.id};switch(e.table){case"team":(0,g().moveToTeamImpl)({transaction:o,currentSpaceViewStore:k,teamStore:e,targets:[l],environment:n,location:d,action:"move",value:{type:"team",id:e.id,spaceId:C.id}});break;case"block":s().jG({parentStore:e,childStore:l,transaction:o,after:d.after});break;case"space":c().Hj({environment:n,spaceStore:C,spaceViewStore:k,pageStore:l,isPrivate:!0,location:d,transaction:o});break;case"collection":s().zw({childStore:l,parentStore:e,transaction:o});break;default:(0,r().t1)(e)}return{duplicateStore:l,duplicateBlockResultStatusPromise:a}}}).performResult;return x(o),o.duplicateStore}if("private_pages"===S){const e=d().createAndCommit({userAction:"fullPageTranslationActions.duplicateTranslatedPageToPrivatePages",environment:n,canUndo:!0,perform:e=>{const[o,r]=p().duplicateBlock({environment:n,stores:[t],addCopyName:!1,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!t.isInsideTemplate(),targetSpaceId:C.id,baseUrl:u().default.domainBaseUrl,publicDomainName:u().default.publicDomainName,preferDuplicateLocation:"local",applyTranslationMap:w.translationMap}),i=o[0];return c().Hj({environment:n,spaceStore:C,spaceViewStore:k,pageStore:i,isPrivate:!0,location:{type:"prepend"},transaction:e}),{duplicateStore:i,duplicateBlockResultStatusPromise:r}}}).performResult;return x(e),e.duplicateStore}(0,r().t1)(S)}catch(t){(0,S().v)(t)}}},656221:(e,t,n)=>{"use strict";n.d(t,{JT:()=>m,O:()=>f,Zb:()=>g,jL:()=>h,nk:()=>y,rX:()=>v,yP:()=>p});n(821057),n(670560),n(267602),n(653476),n(470928),n(241792);var o=()=>n(799891),r=()=>n(530980),i=()=>n(934165),a=()=>n(696459),s=()=>n(824462),l=()=>n(636340),c=()=>n(269299),d=()=>n(876822),u=()=>n(826955);function p(e){let{trustedDomainIds:t,spaceStore:n}=e;return t.map((e=>{const t=u().hf.createChildStore(n,{table:i().l,id:e,spaceId:n.id});if(t.canRead())return t})).filter(a().$K)}async function m(e){let{environment:t,spaceId:n,currentUserId:r,organizationId:i}=e;const a=await s().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:n,organizationId:i},userId:r});return"failed"===a.type?(o().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):a.data.results}function g(e){let{environment:t,trustedEmailDomain:n,trustedDomainStores:o,spaceStore:r,spaceBasicSettingsStore:a}=e,s=o.find((e=>e.getEmailDomain()===n));const d=a.state.emailDomains;return s?(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainDLSEnabled",environment:t,canUndo:!0,perform:e=>{l().sW({store:r,data:{email_domains:d},transaction:e}),l().sW({store:s,data:{domain_link_sharing_enabled:!0,join_space_method:"request_to_join"},transaction:e})}}),s):(c().createAndCommit({userAction:"trustedDomainActions.createTrustedDomain",environment:t,canUndo:!0,perform:e=>{l().sW({store:r,data:{email_domains:d},transaction:e});const o={space_id:r.id,join_space_method:"request_to_join",domain_link_sharing_enabled:!0,email_domain:n};s=l().ae({environment:t,table:i().l,value:o,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e})}}),s&&o.push(s),s)}function f(e){let{store:t,environment:n}=e;const{currentSpaceStore:o}=d().default.getState();if(!o)throw new Error("currentSpaceStore does not exist");if(o.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(c().createAndCommit({userAction:"trustedDomainActions.deleteTrustedDomain",environment:n,canUndo:!0,perform:e=>{l().sW({store:t,data:{domain_link_sharing_enabled:!1},transaction:e})}}),!0)}function h(e){let{store:t,environment:n,joinSpaceMethod:o}=e;const{currentSpaceStore:r}=d().default.getState();if(!r)throw new Error("currentSpaceStore does not exist");if(r.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(t.getJoinSpaceMethod()!==o&&(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainJoinSpaceMethod",environment:n,canUndo:!0,perform:e=>{l().sW({store:t,data:{join_space_method:o},transaction:e})}}),!0))}async function v(e){let{environment:t,spaceId:n}=e;const o=await s().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:n}});if("success"!==o.type)return[];return o.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>r().kk5.fromValue(i().l,e)))}async function y(e){let{environment:t,spaceId:n}=e;const o=await s().callApi({eventName:"getTrustedDomainForUser",environment:t,data:{spaceId:n}});if("success"===o.type)return r().kk5.fromValue(i().l,o.data.result)}},126621:(e,t,n)=>{"use strict";n.r(t),n.d(t,{computeSimilarUserRecentPagesState:()=>p,fetchUserSignals:()=>h,initializeAndLoadAllUserSignals:()=>g,refreshAndBroadcastSimilarUserSignals:()=>m,setUserSignals:()=>f});n(670560),n(267602),n(30005),n(241792);var o=()=>n(741633),r=()=>n(513670),i=()=>n(824462),a=()=>n(507795),s=()=>n(749826),l=()=>n(485014),c=()=>n(768905);const d=5*n(326966).hM;function u(e){const t=s().default.getEligibleGroup({experimentId:e,parameter:"editedPagesLookbackDays",defaultGroup:"control"});return void 0===t||"control"===t?"1":t}function p(e){const t={};return e.forEach((e=>{let{userId:n,recentPages:o,similarity:i}=e;if(!o.length)return;const a=r().vM(o,(e=>{let{pageId:t}=e;return t}));Object.entries(a).forEach((e=>{let[o,r]=e;const a=r.map((e=>{let{visitedAt:t}=e;return t})).sort(((e,t)=>t-e));t[o]||(t[o]={pageId:o,sortedSimilarUserSignals:[]}),t[o].sortedSimilarUserSignals.push({userId:n,similarity:i,visitedAt:a})}))})),Object.values(t).forEach((e=>{e.sortedSimilarUserSignals.sort(((e,t)=>t.similarity-e.similarity))})),t}async function m(e){var t;const{spaceId:n,userId:o,environment:r}=e,i=await h({spaceId:n,environment:r,signalsOverride:[{name:"similarUserRecentPages",includeRecords:!0},{name:"similarUsersEditedPages",includeRecords:!0,lookbackDays:1}]});void 0!==i&&(f({spaceId:n,userId:o,environment:r,newSignals:i,initialize:!1}),await(null===(t=l().Z.state.broadcastChannel)||void 0===t?void 0:t.postMessage({type:"userSignals",data:i})))}async function g(e){const{spaceId:t,userId:n,environment:o,refreshTimer:r=d}=e,i=await h({spaceId:t,environment:o});if(void 0===i)return;f({spaceId:t,userId:n,environment:o,newSignals:i,initialize:!0});var a;"on"===s().default.getGroup("search_refresh_user_signals")?(await c().default.waitUntil((()=>Boolean(c().default.getUserSignals({spaceId:t,userId:n})))),null===(a=l().Z.state.broadcastChannel)||void 0===a||a.addEventListener("message",(e=>{"userSignals"===e.type&&f({spaceId:t,userId:n,environment:o,newSignals:e.data,initialize:!1})})),await l().Z.waitUntil((()=>Boolean(l().Z.state.elector))),l().Z.state.elector.awaitLeadership().then((()=>{c().default.update((e=>{e.refreshIntervalId&&window.clearInterval(e.refreshIntervalId);const i=window.setInterval((async()=>{await m({spaceId:t,userId:n,environment:o})}),r);return{...e,refreshIntervalId:i}}))}))):c().default.update((e=>{e.refreshIntervalId&&window.clearTimeout(e.refreshIntervalId);const i=window.setTimeout((async()=>{const e=await h({spaceId:t,environment:o});void 0!==e&&f({spaceId:t,userId:n,environment:o,newSignals:e,initialize:!1})}),r);return{...e,refreshIntervalId:i}}))}function f(e){const{spaceId:t,userId:n,environment:o,newSignals:r,initialize:i}=e;r&&(c().default.setUserSignals({spaceId:t,userId:n,userSignals:r,initialize:i}),a().S(o,i?"userSignalsInitialization":"userSignalsReload"))}async function h(e){const{spaceId:t,environment:n,signalsOverride:a}=e,s=u("search-local-edited-pages-max"),l=u("search-local-sim-users-edited-pages-max"),d=parseInt(l),m=parseInt(s),g=await i().callApi({eventName:"getUserSignals",environment:n,data:{spaceId:t,signals:a??[{name:"similarUserRecentPages",includeRecords:!0},{name:"topPages7dPageView",includeRecords:!0},{name:"editedPages",includeRecords:!0,lookbackDays:m},{name:"similarUsersEditedPages",includeRecords:!0,lookbackDays:d}]},headers:(0,o().Bb)({cellId:void 0,recordId:void 0,spaceId:t})});if("success"!==g.type)return;const f=a?r().ei((0,c().getInitialUserSignalsState)(),a.map((e=>e.name))):(0,c().getInitialUserSignalsState)();return g.data.signals.forEach((e=>{if("error"===e.status)return;const t=e.name;switch(t){case"similarUserRecentPages":f.similarUserRecentPages=p(e.data);break;case"recentPages":f.recentPages=e.data;break;case"topPages7dPageView":f.topPages7dPageView=e.data;break;case"similarUsersEditedPages":f.similarUsersEditedPages=e.data;break;case"editedPages":f.editedPages=e.data}})),f}},877727:(e,t,n)=>{"use strict";n.d(t,{QZ:()=>a,SV:()=>r,mq:()=>i});var o=()=>n(749826);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"workflow_templates_settings_dev",disableExposureLogging:e.disableExposureLogging})&&o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function a(e){return!e.device.isPhone}},999582:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const r=new o;n(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},280210:(e,t,n)=>{"use strict";n.d(t,{U_:()=>C,f6:()=>w,ii:()=>k});n(821057),n(409045),n(453627),n(994774),n(995194),n(520522),n(200082),n(379976),n(724224),n(761121),n(637133),n(241792);var o=n.n(n(402568)),r=()=>n(513670),i=()=>n(326966),a=()=>n(431595),s=()=>n(24945),l=()=>n(255933);const c={version:8,notion_version:0,variant:2},d={version:8,notion_version:1,variant:2},u=0,p=1,m=6,g=8,f=10,h=Date.UTC(2024,0,1);function v(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const n=Math.floor(((new Date).getTime()-h)/i().A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[u]=n>>4,t[u+1]=n<<4&240|15&t[u+1],t}function y(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let n=0;n<4;n++)t[p+1+n]=e/2**(24-8*n)&255;return t}function S(e,t){const n=e?1:0;return t[m]=c.version<<4&240|c.notion_version<<1&14|1&n,t[g]=c.variant<<6&192|63&t[g],t}function b(e,t){if("block"===e)return t[f]=(0,s().ym)(e)|63&t[f],t;const n=(0,s().ym)(e);return t[f]=n>>8&127,t[f+1]=255&n,t}function _(e,t){const n=(0,s().Nq)(e);return t[f]=127&n|128&t[f],t}function C(e,t,n,o){const r=new Uint8Array(16),i=globalThis.crypto.getRandomValues(r);return n!==l().bx&&v(e,i),y(t,i),S(o,i),b(n,i),A(i)}function k(e,t,n,o){return C(e,t,n,o)}function w(e,t,n){return x(e,t,n)}function x(e,t,n){const i=o()(n),l=r().yo(i,2).map((e=>parseInt(e.join(""),16)));if((0,s().LV)(t)){if(void 0===e)throw new(a().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(l);return e&&y(e,c),_(t,c),function(e){e[m]=240&d.version<<4|14&d.notion_version<<1|1&e[m],e[g]=192&d.variant<<6|63&e[g]}(c),A(c)}const I=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function A(e){let t=0;return I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]}},29488:(e,t,n)=>{"use strict";function o(e){return`${e.table}:${e.id}`}n.d(t,{O:()=>o})},924665:(e,t,n)=>{"use strict";function o(e){let t,n,o;return async function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(o=i,n||(n=t.then((()=>(n=void 0,t=e(...o),t))),n)):(t=e(...i),t)}}n.d(t,{Z:()=>o})},752348:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getAllContextValues:()=>v,getContextValueForActionById:()=>S,getContextValuesForAction:()=>y,typecheckAutomation:()=>f,typecheckAutomationAsync:()=>h});n(670560),n(267602),n(241792),n(228244);var o=()=>n(513670),r=()=>n(855741),i=()=>n(696459),a=()=>n(870910),s=()=>n(177634),l=()=>n(440692),c=()=>n(782827),d=()=>n(360517),u=()=>n(750239),p=()=>n(870691),m=()=>n(227666);function*g(e){const{actionModels:t,automationModel:n,contextType:g,formulasModule:f,runtimeStats:h}=e,v={valueTypes:e.valueTypes,actionInputValueTypes:{},actionValidationFailures:{}},y=performance.now();let S,b,_;if("button_block"===g||"button_property"===g){if(!n.isButtonType())return{error:new(d().MO)(`Automation trigger (${n.getTriggerType()}) does not match context type (${g}).`)};const t=n.getTrigger();_=(0,m().o)(n.getTriggerType()).typecheck(e,t)}else if("event"===g){if(!n.isEventType()&&!n.isNotificationType())return{error:new(d().MO)(`Automation trigger (${n.getTriggerType()}) does not match context type (${g}).`)};const t=n.getTrigger();_=(0,m().o)(n.getTriggerType()).typecheck(e,t)}else if("recurrence"===g){if(!n.isRecurrenceType())return{error:new(d().MO)(`Automation trigger (${n.getTriggerType()}) does not match context type (${g}).`)};const t=n.getTrigger();_=(0,m().o)(n.getTriggerType()).typecheck(e,t)}else(0,i().t1)(e);if(r().x.isFail(_))return _;v.valueTypes.push(...o().d9(_.value.valueTypes));for(const i of t){S=void 0,h&&(S=p().Fv.getOrCreateAction(h,i.pointer,i.getType()));const t=(0,l().getActionRegistryItem)(i.getType());if(!t){b={error:new(d().EP)({actionId:i.id,message:`Unsupported action type: ${i.getType()}`})};break}const m=performance.now(),g=(0,c().C)({automationModel:n,formulasModule:f,formulaValueTypes:v.valueTypes}),y=(0,u().xg)(yield*t.resolveExecutionDependencies(g,i));yield*a().R.fetchRecords(y.map((e=>e.pointer))),S&&(S.totalDependencies=y.length,S.getDependenciesDurationMs=Math.trunc(performance.now()-m));const _=t.typecheck(e,i),C=o().d9(v.valueTypes);if(v.actionInputValueTypes[i.id]=C,r().x.isFail(_)){b=_;break}for(const e of _.value.valueTypes??[]){v.valueTypes.some((t=>(0,s().Fl)(e,t)))||v.valueTypes.push(e)}_.value.validationFailures&&_.value.validationFailures.length>0&&(v.actionValidationFailures[i.id]=_.value.validationFailures)}const C=Math.trunc(performance.now()-y);return h&&(h.typecheckStartTime=y,h.typecheckDurationMs=C,h.typecheckSuccess=!(0,i().$K)(b)),b??{value:v}}function f(e){return a().R.runSync(e.getRecordModel,g(e))}async function h(e){return await a().R.runAsync(e.loadRecordModel,g(e))}function v(e){return r().x.isFail(e)?[]:e.value.valueTypes.slice(0)}function y(e,t){return r().x.isFail(e)?[]:e.value.actionInputValueTypes[t]??[]}function S(e,t,n){const o=y(e,t);return(0,s().vx)(o,n)}},157955:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>M,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>C,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>_,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>f,convertFromUnpersistedRecurrenceConfig:()=>E,convertToUnpersistedRecurrenceConfig:()=>P,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>A,getNewEndTimestamp:()=>R,getNextDateUtc:()=>I,getRecurrenceAfter:()=>w,isRunningBetweenMidnightAnd3AM:()=>x,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>k});n(267602),n(653476),n(241792);var o=()=>n(730120);n(670560);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(696459),a=()=>n(326966),s=()=>n(803021),l=()=>n(646574),c=()=>n(998411),d=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(494616);const m=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},f={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},h=99,v=999;function y(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function S(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=v}function b(e){const{start_date:t,frequency:n,interval:o,weekdays:a,timezone:l,hour:c,minute:d}=e,p="week"===n&&a?a.map((e=>f[e])):void 0,m={};return(0,i().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,i().t1)(e.end_condition)),"month"===e.frequency&&(0,i().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return f[t].nth(n)})):(0,i().t1)(e.monthly_restriction)),new u({freq:g[n],dtstart:(0,s().pd)(t),interval:o,byweekday:p,tzid:l,byhour:c??0,byminute:d??0,bysecond:0,...m})}const _=1,C=1;function k(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=o>_,a=n.length>=C;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:r}}function w(e){const{recurrence:t,afterDate:n}=e;if((0,p().nA)(t)){const e=(0,s().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(t).after((0,s().pd)(n));if(!e)return;return(0,s().YL)(e)}}function x(e){return 0===e.hour||1===e.hour||2===e.hour}function I(e){return b(e).after((0,s().pd)((0,s().Jh)()))||void 0}function A(e){const{recurrence:t,intl:n}=e,r=I(E(t));if(!r)return;const i=x(t),a=o().ou.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(n)).setZone(t.timezone),s=(0,l().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(m.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().ou.TIME_SIMPLE);return t.timezone!==(0,c().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(m.dateAtTime,{date:s,time:e})}}function T(e,t){return(0,i().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().p6)({date:o().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().t1)(e):t.formatMessage(m.noEndCondition)}const M=100;function P(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,i().t1)(e.end_condition):void 0}}function R(e,t,n){return e.plus(n-t)}function V(e,t){const n=o().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(n.toJSDate())}}function E(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?V(e,e.end_condition):(0,i().t1)(e.end_condition):void 0}}},309968:(e,t,n)=>{"use strict";n.d(t,{Hr:()=>d,Nq:()=>C,TW:()=>g,Vl:()=>s,ZH:()=>y,_V:()=>h,lg:()=>_,q6:()=>m,xL:()=>c});var o=()=>n(874459),r=()=>n(92960),i=()=>n(177634);const a=(0,n(788860).vU)({buttonAutomationCurrentUserDescription:{defaultMessage:"The user who clicked this button",id:"automations.contextValue.buttonAutomationCurrentUserDescription"},buttonAutomationCurrentUserName:{defaultMessage:"Whoever clicked",id:"automations.contextValue.buttonAutomationCurrentUserName"},buttonAutomationCurrentUserTooltip:{defaultMessage:"The person who clicked the button",id:"automations.contextValue.buttonAutomationCurrentUserTooltip"},buttonAutomationThisPageDescription:{defaultMessage:"The page containing this button",id:"automations.contextValue.buttonAutomationThisPageDescription"},buttonAutomationThisPageName:{defaultMessage:"This page",id:"automations.contextValue.buttonAutomationThisPageName"},buttonAutomationThisPageTooltip:{defaultMessage:"The page containing this button",id:"automations.contextValue.buttonAutomationThisPageTooltip"},eventAutomationCurrentUserDescription:{defaultMessage:"The user who made the edit that triggered this automation to run.",id:"automations.contextValue.eventAutomationCurrentUserDescription"},eventAutomationCurrentUserName:{defaultMessage:"Whoever triggered",id:"automations.contextValue.eventAutomationCurrentUserName"},eventAutomationCurrentUserTooltip:{defaultMessage:"The person whose action triggered this automation",id:"automations.contextValue.eventAutomationCurrentUserTooltip"},eventAutomationThisPageDescription:{defaultMessage:"The page that was edited to trigger this automation to run.",id:"automations.contextValue.eventAutomationThisPageDescription"},eventAutomationThisPageName:{defaultMessage:"Trigger page",id:"automations.contextValue.eventAutomationThisPageName"},eventAutomationThisPageTooltip:{defaultMessage:"The page that triggered this automation",id:"automations.contextValue.eventAutomationThisPageTooltip"},now:{id:"automations.triggers.now.label",defaultMessage:"Time triggered"},nowDescription:{id:"automations.triggers.now.description",defaultMessage:"The time when this automation begins to run."},nowTooltip:{id:"automations.triggers.now.tooltip",defaultMessage:"The time this automation was triggered"},pageCreator:{id:"automations.triggers.pageCreator.label",defaultMessage:"Page creator"},pageCreatorDescription:{id:"automations.triggers.pageCreator.description",defaultMessage:"The user who created the page that was edited to trigger this automation to run."},pageCreatorTooltip:{id:"automations.triggers.pageCreator.tooltip",defaultMessage:"Person who created page"},today:{id:"automations.triggers.today.label",defaultMessage:"Date triggered"},todayDescription:{id:"automations.triggers.today.description",defaultMessage:"The date when this automation begins to run."},todayTooltip:{id:"automations.triggers.today.tooltip",defaultMessage:"The date this automation was triggered"}});function s(){return(0,i().Kd)({source:"global",global:"button_page"})}function l(e,t,n){return{description:n,name:e,tooltip:t,compile:(o,i)=>({description:n?o.formatMessage(n):void 0,id:s(),kind:r().FormulaContextValueKind.ContextValue,name:o.formatMessage(e),tooltipName:o.formatMessage(t),type:{collection:i,type:"block"}}),evaluate:e=>({kind:r().FormulaContextValueKind.ContextValue,id:s(),value:{type:"block",value:e}})}}const c=l(a.buttonAutomationThisPageName,a.buttonAutomationThisPageTooltip,a.buttonAutomationThisPageDescription),d=l(a.eventAutomationThisPageName,a.eventAutomationThisPageTooltip,a.eventAutomationThisPageDescription);function u(){return(0,i().Kd)({source:"global",global:"current_user"})}function p(e,t,n){return{description:n,name:e,tooltip:t,compile:o=>({description:n?o.formatMessage(n):void 0,id:u(),kind:r().FormulaContextValueKind.ContextValue,name:o.formatMessage(e),tooltipName:o.formatMessage(t),type:{type:"person"}}),evaluate:e=>({id:u(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"person",value:e}})}}const m=p(a.buttonAutomationCurrentUserName,a.buttonAutomationCurrentUserTooltip,a.buttonAutomationCurrentUserDescription),g=p(a.eventAutomationCurrentUserName,a.eventAutomationCurrentUserTooltip,a.eventAutomationCurrentUserDescription);function f(){return(0,i().Kd)({source:"global",global:"now"})}const h={description:a.nowDescription,name:a.now,tooltip:a.nowTooltip,compile(e){return{description:this.description?e.formatMessage(this.description):void 0,id:f(),kind:r().FormulaContextValueKind.ContextValue,name:e.formatMessage(this.name),tooltipName:this.tooltip?e.formatMessage(this.tooltip):void 0,type:{type:"date"}}},evaluate:e=>({id:f(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"date",value:(0,o().CQ)(Date.now(),e)}})};function v(){return(0,i().Kd)({source:"global",global:"today"})}const y={description:a.todayDescription,name:a.today,tooltip:a.todayTooltip,compile(e){return{description:this.description?e.formatMessage(this.description):void 0,id:v(),kind:r().FormulaContextValueKind.ContextValue,name:e.formatMessage(this.name),tooltipName:this.tooltip?e.formatMessage(this.tooltip):void 0,type:{type:"date"}}},evaluate:e=>({id:v(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"date",value:(0,o().hT)(Date.now(),e)}})};function S(){return(0,i().Kd)({source:"global",global:"page_creator"})}function b(e,t){return{description:a.pageCreatorDescription,name:e,tooltip:t,compile(n){return{description:this.description?n.formatMessage(this.description):void 0,id:S(),kind:r().FormulaContextValueKind.ContextValue,name:n.formatMessage(e),tooltipName:n.formatMessage(t),type:{type:"person"}}},evaluate:e=>({id:S(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"person",value:e}})}}const _=b(a.pageCreator,a.pageCreatorTooltip),C=b(a.pageCreator,a.pageCreatorTooltip)},227666:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});var o=()=>n(513670),r=()=>n(696459),i=()=>n(998411),a=()=>n(752778),s=()=>n(309968);const l={type:"button",getCreatePermissions(e){const{parentPointer:t}=e;return[{minimumRole:"read_and_write",pointer:t,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{automationModel:t,contextType:i,getRecordModel:l,intl:c}=e,d=s().q6.compile(c),u=s()._V.compile(c),p=s().ZH.compile(c),m=t.getParentPointer();let g,f;if("button_block"===i){if(e.pageBlockModel){const t=(0,n(942275).J2)({block:e.pageBlockModel,getRecordModel:l});t&&(g=s().xL.compile(c,t.pointer),f=s().lg.compile(c))}}else if("button_property"===i){const e=l(m);if((null==e?void 0:e.table)!==a().vF)return{error:new(n(360517).MO)(`Unable to load automation parent: ${n(827370).dr.toKey(m)}`)};g=s().xL.compile(c,e.pointer),f=s().lg.compile(c)}else(0,r().t1)(i);return{value:{valueTypes:(0,o().oA)([d,u,p,g,f])}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserPointer:n,executingUserTimeZone:r,thisPageBlockModel:a}=t??{},l=a?s().xL.evaluate(a.pointer):void 0,c=null==a?void 0:a.getCreatedByPointer(),d=c?s().lg.evaluate(c):void 0,u=n?s().q6.evaluate(n):void 0,p=(0,i().r)(),m=s()._V.evaluate(r??p),g=s().ZH.evaluate(r??p);return{value:{values:(0,o().oA)([l,d,u,m,g])}}},isAvailableForContext:e=>!0};n(670560);const c={type:"event",getCreatePermissions(e){const{parentPointer:t,spacePointer:n}=e;return[{minimumRole:"editor",pointer:t,type:"record_permission"},{minimumRole:"read_and_write",pointer:n,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e,o=[{minimumRole:"editor",pointer:t.getParentPointer(),type:"record_permission"},{minimumRole:"read_and_write",pointer:t.getSpacePointer(),type:"record_permission"}],i=t.getTrigger();if("event"===i.type){const e=i.event;(0,r().$K)(e.source)&&"filter"!==e.source.type&&(e.source.type===a().vF||e.source.type===n(139978).np?o.push({minimumRole:"reader",pointer:e.source.pointer,type:"record_permission"}):(0,r().t1)(e.source))}return o},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"editor",pointer:t.getParentPointer(),type:"record_permission"},{minimumRole:"read_and_write",pointer:t.getSpacePointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{automationModel:t,intl:n}=e,r=s().TW.compile(n),i=s().Nq.compile(n),l=s()._V.compile(n),c=s().ZH.compile(n),d=t.getParentPointer();let u;return d.table===a().vF&&(u=s().Hr.compile(n,d)),{value:{valueTypes:(0,o().oA)([r,i,l,c,u])}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserPointer:n,executingUserTimeZone:a,thisPageBlockModel:l}=t??{},c=l?s().Hr.evaluate(l.pointer):void 0,d=n?s().TW.evaluate(n):void 0,u=(0,i().r)(),p=s()._V.evaluate(a??u),m=null==l?void 0:l.getCreatedByPointer(),g=(0,r().$K)(m)?s().Nq.evaluate(m):void 0,f=s().ZH.evaluate(a??u);return{value:{values:(0,o().oA)([c,d,p,f,g])}}},isAvailableForContext:e=>!0};const d={button:l,event:c,notification_event:c,recurrence:{type:"recurrence",getCreatePermissions(e){const{parentPointer:t}=e;return[{minimumRole:"read_and_write",pointer:t,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{intl:t}=e;return{value:{valueTypes:[s()._V.compile(t),s().ZH.compile(t)]}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserTimeZone:n}=t??{},o=(0,i().r)();return{value:{values:[s()._V.evaluate(n??o),s().ZH.evaluate(n??o)]}}},isAvailableForContext(e){const{automation:t,automationActions:o,hasPremiumAutomations:i}=e;if(t.parent_table===n(396136).iU)return!0;if(t.parent_table===a().vF){const e=n(217465).RecordMap.create();for(const t of o)e.addModel(t);return!!t.isCompleteSprintAutomation({getRecordModel:n(530980).omK.fromRecordMap(e)})||i}(0,r().t1)(t.parent_table)}}};function u(e){return d[e]}},677200:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});const o=(0,n(827282).CZ)("gift",{default:{loader:()=>n.e(63636).then(n.bind(n,563636))},small:{loader:()=>n.e(19806).then(n.bind(n,719806))},mini:{loader:()=>n.e(73393).then(n.bind(n,373393))},large:{loader:()=>n.e(40651).then(n.bind(n,840651))}})},383499:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("addPageCover",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})})},29248:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},414294:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},984478:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},165940:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},505365:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("clockAlternate",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.417 6.09961C10.5811 6.09961 10.7201 6.15885 10.834 6.27734C10.9525 6.39128 11.0117 6.53027 11.0117 6.69434V11.2949L10.376 9.34668L12.5977 12.3408C12.7116 12.4867 12.7617 12.6416 12.748 12.8057C12.7344 12.9697 12.6592 13.0996 12.5225 13.1953C12.3721 13.3001 12.2148 13.3389 12.0508 13.3115C11.8913 13.2842 11.75 13.1908 11.627 13.0312L9.99316 10.8779C9.93392 10.8005 9.89062 10.7253 9.86328 10.6523C9.83594 10.5749 9.82227 10.4928 9.82227 10.4062V6.69434C9.82227 6.53027 9.87923 6.39128 9.99316 6.27734C10.1117 6.15885 10.2529 6.09961 10.417 6.09961ZM10.6768 17.126C9.93848 17.126 9.22298 17.0098 8.53027 16.7773C7.84212 16.5495 7.20638 16.2259 6.62305 15.8066C6.04427 15.3919 5.54297 14.9111 5.11914 14.3643C4.96875 14.182 4.90495 13.9928 4.92773 13.7969C4.95052 13.6009 5.03939 13.446 5.19434 13.332C5.36296 13.2135 5.53841 13.1748 5.7207 13.2158C5.90299 13.2568 6.06478 13.3571 6.20605 13.5166C6.54785 13.9678 6.94889 14.3597 7.40918 14.6924C7.87402 15.0205 8.37988 15.2734 8.92676 15.4512C9.47819 15.6335 10.0615 15.7269 10.6768 15.7314C11.4606 15.736 12.1943 15.5902 12.8779 15.2939C13.5661 15.0023 14.1676 14.599 14.6826 14.084C15.2021 13.5645 15.6077 12.9629 15.8994 12.2793C16.1956 11.5911 16.3438 10.8529 16.3438 10.0645C16.3438 9.2806 16.1956 8.54688 15.8994 7.86328C15.6077 7.17513 15.2021 6.57357 14.6826 6.05859C14.1676 5.53906 13.5661 5.13346 12.8779 4.8418C12.1943 4.55013 11.4606 4.4043 10.6768 4.4043C9.88835 4.4043 9.15234 4.55013 8.46875 4.8418C7.78971 5.12891 7.19043 5.52995 6.6709 6.04492C6.15137 6.5599 5.74349 7.15918 5.44727 7.84277C5.1556 8.52181 5.00749 9.25326 5.00293 10.0371H3.6084C3.61296 9.07096 3.7998 8.16406 4.16895 7.31641C4.53809 6.46875 5.0485 5.72135 5.7002 5.07422C6.35189 4.42708 7.10156 3.92122 7.94922 3.55664C8.80143 3.1875 9.71061 3.00293 10.6768 3.00293C11.6429 3.00293 12.5521 3.1875 13.4043 3.55664C14.2565 3.92578 15.0062 4.4362 15.6533 5.08789C16.305 5.73503 16.8154 6.4847 17.1846 7.33691C17.5537 8.18913 17.7383 9.09831 17.7383 10.0645C17.7383 11.0306 17.5537 11.9398 17.1846 12.792C16.8154 13.6442 16.305 14.3962 15.6533 15.0479C15.0062 15.6995 14.2565 16.2077 13.4043 16.5723C12.5521 16.9414 11.6429 17.126 10.6768 17.126ZM2.78809 8.66992H6.16504C6.33822 8.66992 6.4681 8.71094 6.55469 8.79297C6.64583 8.87044 6.68913 8.9707 6.68457 9.09375C6.68001 9.21224 6.63216 9.33984 6.54102 9.47656L4.87988 11.7803C4.76595 11.9352 4.63151 12.015 4.47656 12.0195C4.32161 12.0195 4.1849 11.9398 4.06641 11.7803L2.40527 9.47656C2.31413 9.3444 2.26628 9.2168 2.26172 9.09375C2.25716 8.9707 2.29818 8.87044 2.38477 8.79297C2.47591 8.71094 2.61035 8.66992 2.78809 8.66992Z"})})},666669:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},263555:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},119239:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("doubleChevronRight",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.25781 14.1211C2.47656 14.1211 2.66797 14.0391 2.81836 13.8887L8.14355 8.67969C8.32812 8.49512 8.41699 8.29688 8.41699 8.06445C8.41699 7.8252 8.32812 7.62012 8.14355 7.44922L2.81836 2.24023C2.66797 2.08984 2.4834 2.00781 2.25781 2.00781C1.81348 2.00781 1.46484 2.35645 1.46484 2.80078C1.46484 3.0127 1.55371 3.21777 1.7041 3.375L6.50977 8.05762L1.7041 12.7539C1.55371 12.9043 1.46484 13.1094 1.46484 13.3281C1.46484 13.7725 1.81348 14.1211 2.25781 14.1211ZM8.36914 14.1211C8.58789 14.1211 8.77246 14.0391 8.92285 13.8887L14.2549 8.67969C14.4395 8.49512 14.5283 8.29688 14.5283 8.06445C14.5283 7.8252 14.4326 7.62012 14.2549 7.44922L8.92285 2.24023C8.77246 2.08984 8.58789 2.00781 8.36914 2.00781C7.9248 2.00781 7.56934 2.35645 7.56934 2.80078C7.56934 3.0127 7.66504 3.21777 7.81543 3.375L12.6211 8.05762L7.81543 12.7539C7.66504 12.9043 7.56934 13.1094 7.56934 13.3281C7.56934 13.7725 7.9248 14.1211 8.36914 14.1211Z"})})},94250:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("eye",{viewBox:"0 0 32 32",svg:(0,o.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},682547:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("eyePadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},1723:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("import",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},519454:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},229010:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("repeat",{viewBox:"0 0 16 14",svg:(0,o.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},899548:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("search",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},858233:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("topbarCommentFilled",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M6.27344 19.0703C5.96094 19.0703 5.71615 18.9688 5.53906 18.7656C5.36719 18.5625 5.28125 18.2865 5.28125 17.9375V16.0156H4.85938C4.10417 16.0156 3.45573 15.8698 2.91406 15.5781C2.3776 15.2865 1.96354 14.8698 1.67188 14.3281C1.38542 13.7812 1.24219 13.1198 1.24219 12.3438V6.28125C1.24219 5.50521 1.38542 4.84635 1.67188 4.30469C1.95833 3.75781 2.3724 3.33854 2.91406 3.04688C3.46094 2.75521 4.1276 2.60938 4.91406 2.60938H15.0781C15.8594 2.60938 16.5234 2.75521 17.0703 3.04688C17.6172 3.33854 18.0339 3.75781 18.3203 4.30469C18.6068 4.84635 18.75 5.50521 18.75 6.28125V12.3438C18.75 13.1198 18.6068 13.7812 18.3203 14.3281C18.0339 14.8698 17.6172 15.2865 17.0703 15.5781C16.5234 15.8698 15.8594 16.0156 15.0781 16.0156H10.25L7.57812 18.3828C7.3125 18.6172 7.08333 18.7891 6.89062 18.8984C6.69792 19.013 6.49219 19.0703 6.27344 19.0703ZM6.65625 17.3438L9.13281 14.8906C9.29948 14.724 9.45312 14.6146 9.59375 14.5625C9.73958 14.5052 9.93229 14.4766 10.1719 14.4766H15.0312C15.7708 14.4766 16.3177 14.2943 16.6719 13.9297C17.0312 13.5599 17.2109 13.013 17.2109 12.2891V6.32812C17.2109 5.60938 17.0312 5.06771 16.6719 4.70312C16.3177 4.33333 15.7708 4.14844 15.0312 4.14844H4.95312C4.21875 4.14844 3.67188 4.33333 3.3125 4.70312C2.95833 5.06771 2.78125 5.60938 2.78125 6.32812V12.2891C2.78125 13.013 2.95833 13.5599 3.3125 13.9297C3.67188 14.2943 4.21875 14.4766 4.95312 14.4766H6.02344C6.24219 14.4766 6.40104 14.526 6.5 14.625C6.60417 14.7188 6.65625 14.8828 6.65625 15.1172V17.3438ZM6.02344 7.25781C5.88802 7.25781 5.77344 7.21094 5.67969 7.11719C5.58594 7.01823 5.53906 6.90104 5.53906 6.76562C5.53906 6.63542 5.58333 6.52344 5.67188 6.42969C5.76562 6.33594 5.88281 6.28906 6.02344 6.28906H13.8828C14.0234 6.28906 14.1406 6.33594 14.2344 6.42969C14.3281 6.52344 14.375 6.63542 14.375 6.76562C14.375 6.90104 14.3281 7.01823 14.2344 7.11719C14.1406 7.21094 14.0234 7.25781 13.8828 7.25781H6.02344ZM6.02344 9.74219C5.88802 9.74219 5.77344 9.69531 5.67969 9.60156C5.58594 9.50781 5.53906 9.39062 5.53906 9.25C5.53906 9.125 5.58333 9.01302 5.67188 8.91406C5.76562 8.8151 5.88281 8.76562 6.02344 8.76562H13.8828C14.0234 8.76562 14.1406 8.8151 14.2344 8.91406C14.3281 9.01302 14.375 9.125 14.375 9.25C14.375 9.39062 14.3281 9.50781 14.2344 9.60156C14.1406 9.69531 14.0234 9.74219 13.8828 9.74219H6.02344ZM6.02344 12.2344C5.88802 12.2344 5.77344 12.1875 5.67969 12.0938C5.58594 12 5.53906 11.8854 5.53906 11.75C5.53906 11.6146 5.58333 11.5 5.67188 11.4062C5.76562 11.3073 5.88281 11.2578 6.02344 11.2578H11.1406C11.276 11.2578 11.3906 11.3073 11.4844 11.4062C11.5833 11.5 11.6328 11.6146 11.6328 11.75C11.6328 11.8854 11.5833 12 11.4844 12.0938C11.3906 12.1875 11.276 12.2344 11.1406 12.2344H6.02344Z"})})},938479:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("topbarUpdate",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.0781 18.1562C14.5078 18.1562 18.1641 14.5 18.1641 10.0781C18.1641 5.65625 14.5 2 10.0703 2C5.64844 2 2 5.65625 2 10.0781C2 14.5 5.65625 18.1562 10.0781 18.1562ZM10.0781 16.5469C6.49219 16.5469 3.625 13.6641 3.625 10.0781C3.625 6.49219 6.49219 3.61719 10.0703 3.61719C13.6562 3.61719 16.5391 6.49219 16.5469 10.0781C16.5547 13.6641 13.6641 16.5469 10.0781 16.5469ZM6.14062 11.0625H10.0703C10.4297 11.0625 10.7031 10.7891 10.7031 10.4375V5.32812C10.7031 4.97656 10.4297 4.70312 10.0703 4.70312C9.72656 4.70312 9.45312 4.97656 9.45312 5.32812V9.8125H6.14062C5.78906 9.8125 5.51562 10.0859 5.51562 10.4375C5.51562 10.7891 5.78906 11.0625 6.14062 11.0625Z"})})},46581:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var o=n.n(n(389539)),r=()=>n(280210),i=()=>n(956057);class a{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:o}=this.getSettings();return o&&e!==n(363777).uK?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,r().ii)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:i}=this.getSettings();if(!i||"space"===t)return this.legacyId(t,"disabled");const a=this.mapSpaceIdToShortId(e),s=o().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),(0,r().U_)(n,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:o}=this.getSettings();return o&&"space"!==t?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,r().U_)(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),i().Il()}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:a,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),i().Ul(n);const l=this.mapSpaceIdToShortId(e),c=o().types.isPromise(l)?await l:l;return c?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema"),(0,r().f6)(c,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),i().Ul(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:o,enableIdSchema:a}=this.getSettings();return a?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,r().f6)(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),i().Ul(n))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),r=o().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,r)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),r=o().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,r)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),i().Il()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),i().Il()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),i().Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},88829:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},416403:(e,t,n)=>{"use strict";n.d(t,{Gx:()=>d,HU:()=>p,Ju:()=>u,KT:()=>s,O5:()=>c,RY:()=>l,T$:()=>m});n(267602),n(470928);var o=()=>n(696459),r=()=>n(999673),i=()=>n(156642);const a=["ar","bg","cs","da","de","el","es","et","fi","fr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","ro","ru","sk","sl","sv","tr","uk","zh","en","pt"];function s(e){return(0,i().XD)(e,void 0)?"title":(0,i().W2)(e)?"caption":"table_row"===e||"collection_view"===e||"collection_view_page"===e?"properties":(0,i().nq)(e)||"column"===e||"column_list"===e||"table"===e?"unmapped":void(0,o().t1)(e)}const l=["en","es","fr","pt","zh","ja","ko","ru","de","it","nl","id"];function c(e){return(0,o().DE)(a,e)}const d=["en","es","fr","pt","zh","ja","ko","ru","de","it","nl","id"];const u=[{key:"en",name:r().Dr.translateEnglish},{key:"es",name:r().Dr.translateSpanish},{key:"fr",name:r().Dr.translateFrench},{key:"pt",name:r().Dr.translatePortuguese},{key:"zh",name:r().Dr.translateChinese},{key:"ja",name:r().Dr.translateJapanese},{key:"ko",name:r().Dr.translateKorean},{key:"ru",name:r().Dr.translateRussian},{key:"de",name:r().Dr.translateGerman},{key:"it",name:r().Dr.translateItalian},{key:"nl",name:r().Dr.translateDutch},{key:"id",name:r().Dr.translateIndonesian}];function p(e){return u.find((t=>t.key===e))}let m=function(e){return e.NAME="name",e.VIEW_NAME="view_name",e.DESCRIPTION="description",e.SCHEMA_PROPERTY_NAME="schema_property_name",e.SCHEMA_PROPERTY_OPTION="schema_property_option",e}({})},971095:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(830742).LS)("importEvernote")},400939:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var r=0;r<n.length;r++)n[r].charCodeAt(0)>=19968?o+=n[r].length:o+=1;return o}}}]);