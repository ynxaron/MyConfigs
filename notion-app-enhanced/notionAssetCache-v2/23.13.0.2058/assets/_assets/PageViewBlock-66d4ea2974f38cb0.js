"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39938],{778447:(e,t,o)=>{o.d(t,{EA:()=>k,Pc:()=>g,TE:()=>p,Te:()=>M,VN:()=>u,Wc:()=>_,XH:()=>h,ZP:()=>P,ZY:()=>S,b:()=>y,jo:()=>f,n5:()=>d,nZ:()=>C,pE:()=>m,rk:()=>s,sL:()=>c,tb:()=>v});var n=()=>o(146947),i=()=>o(707513),r=()=>o(191586),a=()=>o(876822),l=()=>o(311562);const s=i().F5(n().locale).sans,c={serif:i().F5(n().locale).serif,mono:i().F5(n().locale).mono,comic:i().F5(n().locale).comic},d={serif:1.6,mono:1.6},u={serif:0,mono:.055},g={serif:15,mono:14},p={serif:17,mono:15},S=14,m=17,v=16,f=16,b=30;function y(e){return e.device.isMobile?200:`${b}vh`}const P=o(701474).ZP;function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{device:o}=e;return o.isTablet?380:o.isIOS?Math.max(350,t):o.isMobile?400:"30vh"}function h(e){return!!e&&(e===l().S.PostInFullPageOrPeek||e===l().S.DraftPostInFullPageComposer)}function C(e,t){if(function(e){return e===a().default.state.mainEditorCurrentBlockStore}(e)){const{RouterStore:e}=t;return e.state.route.collectionViewId}}function _(e,t){return 28+(0,r().uU)(e,t)}function M(e){return{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 100ms ease"}}},701474:(e,t,o)=>{o.d(t,{ZP:()=>$,uE:()=>ae});o(670560),o(267602),o(470928);var n=o(667294),i=()=>o(146947),r=()=>o(219727),a=()=>o(142735),l=()=>o(511115),s=()=>o(263184),c=()=>o(752778),d=()=>o(788860),u=()=>o(513670),g=()=>o(696459),p=()=>o(707513),S=()=>o(917801),m=()=>o(244540),v=()=>o(418216),f=()=>o(879952),b=()=>o(990966),y=()=>o(656801),P=()=>o(881266),k=()=>o(125659),h=()=>o(201741),C=()=>o(500174),_=()=>o(589024),M=()=>o(191586),B=()=>o(239482),V=()=>o(942226),w=()=>o(90065),K=()=>o(480089),T=()=>o(828946),x=()=>o(658096),I=()=>o(876822),E=()=>o(529048),L=()=>o(158083),F=()=>o(279386),Z=()=>o(749826),D=()=>o(9599),O=()=>o(475335),R=()=>o(543842),j=()=>o(121700),A=()=>o(311562),H=()=>o(851713),q=()=>o(27475),W=()=>o(482162),N=()=>o(557576),U=()=>o(965903),z=o(785893);p().F5(i().locale).sans,p().F5(i().locale).serif,p().F5(i().locale).mono,p().F5(i().locale).comic;const X={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},G=30;function Q(e,t){var i,g;const p=(0,n.useRef)();p.current=performance.now();const{store:D,context:j,disabled:H,onTitleEsc:q,styleOverrides:U,disableTopControls:G}=e,Q=(0,a().VK)((()=>{var e;return null===(e=D.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[D]),$=(0,o(580215).M)(Q),le=H||"active"===$,se=(0,r().O7)(),ce=(0,r().Fy)(),de=(0,o(657320).l)(),ue=(0,K().PE)(D,le),ge=(0,K().Jy)(D,le),pe=(0,a().VK)((()=>D.isReady()&&ge&&!D.isNonEditableState()&&!(0,M().a_)(D)&&!(0,M().Wt)(D)),[ge,D]),Se=(0,K().Pl)(D),me=(0,a().VK)((()=>D.isCollectionView()),[D]),ve=(0,a().VK)((()=>Boolean((0,o(631871).sL)(D.id))?"v8":"v4"),[D]),fe=(0,a().VK)((()=>D.isCollectionViewPageWithContent()),[D]),be=(0,a().VK)((()=>"workflow"===D.getType()),[D]),ye=(0,a().VK)((()=>{const e=D.getAssociatedCollectionStore(),t=null==e?void 0:e.getLayoutStore();return Boolean(t)}),[D]),Pe=(0,o(309797).WJ)(D),ke=(0,a().VK)((()=>({layout:{translateX:-1*Pe},layoutFull:{translateX:Pe}})),[Pe]),he=(0,a().VK)((()=>s().default.createValue(!1,{name:"headerFocusStore"})),[]),Ce=(0,a().Kw)(he),{isInPeek:_e,isInsideSidePeek:Me}=(0,a().VK)((()=>({isInPeek:(0,V().wq)(D),isInsideSidePeek:(0,M().yp)(D)})),[D]),Be=(0,n.useMemo)((()=>new(A().Z)),[]),Ve=(0,n.useMemo)((()=>new(E().Z)),[]),we=(0,n.useMemo)((()=>new(E().Z)),[]),Ke=(0,n.useMemo)((()=>new(o(692304).Z)),[]),Te=(0,a().VK)((()=>s().default.createValue(!1,{name:"forceControlHoverVisibleStore"})),[]),xe=(0,a().Kw)(Te),Ie=(0,n.useMemo)((()=>({headerFocusStore:he,pageViewBlockStore:Be,resolvedDiscussionButtonPopupStore:Ve,backlinksButtonPopupStore:we,templatePickerMenuListStore:Ke,forceControlHoverVisibleStore:Te})),[he,Be,Ve,we,Ke,Te]),[Ee,Le]=(0,n.useState)(!1),[Fe,Ze]=(0,n.useState)(!1),[De,Oe]=(0,n.useState)(""),Re=(0,n.useCallback)((()=>{Ve.setState({open:!0}),Be.setState({...Be.state,forceDiscussionOpen:!0})}),[Be,Ve]),je=(0,n.useCallback)((()=>{const e=He.current;if(e){if(function(e){if(!e.isIOS)return!1;return!0}(ce))return{paddingLeft:0,paddingRight:0};const t=getComputedStyle(e),o=parseFloat(t.getPropertyValue("padding-left")),n=parseFloat(t.getPropertyValue("padding-left"));return{paddingLeft:u().i2(o)?0:o,paddingRight:u().i2(n)?0:n}}}),[ce]),Ae=(0,n.useCallback)((()=>{const e=He.current;if(e){const t=e.getBoundingClientRect().width,o=je()??{paddingLeft:0,paddingRight:0};return t-o.paddingLeft-o.paddingRight}}),[je]),He=(0,n.useRef)(null),qe=(0,n.useRef)(null),We=(0,n.useRef)(null),Ne=(0,n.useCallback)((()=>He.current),[]),Ue=(0,n.useCallback)((()=>qe.current),[]),ze=(0,n.useMemo)((()=>new(o(985866).Z)(se)),[]);(0,o(98642).c)(o(163085).Z,(()=>({store:D,blockContext:j,openResolvedDiscussionPopup:Re,getContentInnerWidth:Ae,getContentWrapEl:Ne,getLayoutEl:Ue,collectionContextStore:ze,headerFocusStore:he,pageViewBlockStore:Be,resolvedDiscussionButtonPopupStore:Ve,backlinksButtonPopupStore:we,templatePickerMenuListStore:Ke,forceControlHoverVisibleStore:Te,headerMouseStore:void 0,detailsFocusStore:void 0,detailsMouseStore:void 0,renderedType:"page",getBlockStore:()=>D,getNode:()=>We.current})),[D,j,Re,Ae,je,Ne,Ue,ze,Ie]);const Xe=(0,n.useRef)(!1),Ge=(0,a().VK)((()=>D.getTitleStore()),[D]),Qe=(0,a().VK)((()=>D.isInsideFactoryOrDuplicateBlocksAction()),[D]),$e=(0,a().VK)((()=>{const e=x().default.state.publicPageData;return Boolean(null==e?void 0:e.isDLSViewer)}),[]),Je=(0,n.useCallback)((()=>!!Ge&&(!!e.forceSelectTitleOnMount||!me&&(!(ce.isMobile&&ce.isPhone&&o(369320).Z.hasOpenMobileSlideUps())&&(!o(955620).QaF(Ge.getValue())||(0,M().CX)(D)&&!ce.isMobile)))),[ce.isMobile,ce.isPhone,me,e.forceSelectTitleOnMount,D,Ge]);(0,n.useEffect)((()=>{if(Z().default.checkGate({gateName:"dont_load_users"})||async function(e){const{environment:t}=e;R().Z.state.emptyQueryUserRequestStore.setState({...R().Z.state.emptyQueryUserRequestStore.state,ready:!1,loading:!0});const o=await T().x.searchActions.load();await I().default.waitUntil((()=>Boolean(I().default.state.currentSpaceStore&&I().default.state.mainEditorCurrentBlockStore)));const n=await o.searchVisibleSpaceUsers({environment:t,query:"",membersOnly:!1,minFuzzyScore:25,placeSelfFirst:!1});R().Z.state.emptyQueryUserRequestStore.setState({ready:!0,loading:!1,result:n})}({environment:se}),(0,o(761936).L)(),ce.isPhone){const{PageScroller:e}=o(832924).default;if(e){const t=e.getNode();if(t&&ue&&!Kt){const e=function(e,t){return 28+(0,M().uU)(e,t)}(j,se);t.scrollTo({top:e})}}}if(Ge&&Je()&&(f().eP({environment:se,store:D}),b().setSelectionAtEnd({store:Ge})),v().updateMetricDataWithIsPushTag(se),j!==A().S.Frame||me||Ye||(p.current&&o(842918).Z.markPageViewBlockRender(p.current),v().measurePageRenderMetrics({environment:se,isEditable:pe,isHomePage:!1,isWikiHome:!1,isPageWithCustomLayout:ye,idSchema:ve}),function(e,t){var o;re(e,t)&&(null===(o=t.mobileNative)||void 0===o||o.markTransitionReady({type:"new_page",id:e.id,sendImmediately:!0}))}(D,se)),ze){const e=(0,o(861026).vS)(ze);o(620218).default.DO_NOT_USE_measureLegacy("collections.open_item_page_lag",{environment:se,data:{...e,peek_mode:W().default.getPeekMode()}})}!function(e,t){if("space_for_ai"!==(0,y().sy)())return;const o=e.getContentStores()[0],n=y().__.state;if(!o||o.id!==n)return;f().eP({environment:t,store:o}),b().setSelectionAtEnd({store:o.getBlockTitleStore()})}(D,se)}),[]);const Ye=(0,a().VK)((()=>D.isFormBlock()),[D]),et=(0,a().VK)((()=>D.getFormat()),[D]),tt=(0,a().VK)((()=>{var e;return null===(e=F().MT.getStateForBlock(D.id))||void 0===e?void 0:e.mode}),[D.id]),ot=(0,a().VK)((()=>h().TI.state&&h().mn.state===D.id&&"disconnected"===o(795597).Z.state),[D.id]),nt=(0,a().VK)((()=>{var e;return B().wf(D)||Boolean(null===(e=x().default.state.publicPageData)||void 0===e?void 0:e.isDeleted)&&te(j)}),[D,j]),it=(0,a().VK)((()=>de&&de.publicEditModeStore.state),[de]),rt=(0,a().VK)((()=>D.isTemplate()),[D]);(0,n.useEffect)((()=>{if(j===A().S.Frame){const e=ne(j);null==it||!it.hasPublicPermission||"edit"!==it.permission||rt||(0,o(547046).C)()?S().qL({bannerStore:e,id:"EditingPageBanner"}):S().Bw({bannerStore:e,id:"EditingPageBanner",contentKey:"editing_page",styleKey:C().v.White});o(844095).Z.state.pageMap[D.id]?S().Bw({bannerStore:e,id:"ImportingEvernotePage",contentKey:"importing_evernote",styleKey:C().v.Blue,blockStore:D}):S().qL({bannerStore:e,id:"ImportingEvernotePage"})}if(ie(j)){const e=ne(j),t=B().oZ(D),n=B().D0(D);if((0,o(657120).nV)(t))S().Bw({bannerStore:e,id:"SpaceContentDuplicationPage",contentKey:"space_content_duplication",styleKey:C().v.Red,blockStore:D});else if(!nt||Ye||re(D,se))if(n)S().Bw({bannerStore:e,id:"ArchivedTeamPage",contentKey:"page_in_archived_team",styleKey:C().v.Red});else for(const o of["SpaceContentDuplicationPage","DeletedPage","ArchivedTeamPage"])S().qL({bannerStore:e,id:o});else S().Bw({bannerStore:e,id:"DeletedPage",contentKey:"deleted_or_moved_page",blockStore:D,styleKey:C().v.Red});ot?S().Bw({bannerStore:e,id:"DictationConnectionBanner",styleKey:C().v.Yellow,contentKey:"dictation_connection",blockStore:D}):S().qL({bannerStore:e,id:"DictationConnectionBanner"}),tt&&(0,F().a0)(tt)?S().Bw({bannerStore:e,id:"TranslateBanner",styleKey:C().v.Blue,contentKey:"translate",blockStore:D}):S().qL({bannerStore:e,id:"TranslateBanner"}),$e&&!(0,V().wq)(D)?S().Bw({bannerStore:e,id:"TrustedDomainPageBanner",styleKey:C().v.LightGray,contentKey:"trusted_domain_page",blockStore:D}):S().qL({bannerStore:e,id:"TrustedDomainPageBanner"}),rt?S().Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_page",styleKey:C().v.Beige,blockStore:D,context:j,disabled:le}):Qe?S().Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_button",styleKey:C().v.Beige,blockStore:D,context:j,disabled:le}):S().qL({bannerStore:e,id:"CollectionTemplatePage"}),(null!=et&&et.is_asana_imported_project||null!=et&&et.is_asana_imported_task)&&(null!=et&&et.dismissed_asana_import_banner?S().qL({bannerStore:e,id:"AsanaImporterBanner"}):S().Bw({bannerStore:e,id:"AsanaImporterBanner",contentKey:"asana_importer_banner",blockStore:D,styleKey:C().v.ImportNotification}))}return()=>{ie(j)&&(S().qL({bannerStore:ne(j),id:"DeletedPage"}),S().qL({bannerStore:ne(j),id:"CollectionTemplatePage"}),S().qL({bannerStore:ne(j),id:"Site"}),S().qL({bannerStore:ne(j),id:"CrdtPage"}),S().qL({bannerStore:ne(j),id:"TrustedDomainPageBanner"}),S().qL({bannerStore:ne(j),id:"TranslateBanner"}),S().qL({bannerStore:ne(j),id:"AsanaImporterBanner"}))}}),[se,it,j,le,D,nt,Ye,Qe,null==et?void 0:et.is_asana_imported_project,null==et?void 0:et.is_asana_imported_task,null==et?void 0:et.dismissed_asana_import_banner,tt,ot,$e,rt]),(0,o(732811).K)((()=>{"suggest"===F().MT.getMode(D,!0)?m().Ej({environment:se,location:"page_navigation",navigableBlockStore:D}):ce.isMobile||D.canEdit()||!D.canComment()||D.isLocked()||me&&!fe||F().MT.hasModeSet(D)||D.useCrdt()||D.isFormBlock()||D.isPost()||D.isWorkflowPage()||(0,o(728670).$t)(B().fJ(D))||m().t_({environment:se,navigableBlockStore:D,mode:"suggest",location:"default_on_for_comment_only_user"})})),(0,o(22648).KV)({pageId:D.id,isFrameContext:te(j)}),(0,n.useEffect)((()=>()=>{"suggest"===F().MT.getMode(D,!0)&&m().bk({environment:se,location:"page_navigation",navigableBlockStore:D})}),[se,D]);const at=(0,a().VK)((()=>ee(D)),[D]),lt=(0,a().VK)((()=>null==at?void 0:at.getParentBlockStore()),[at]),st=(0,a().VK)((()=>null==ze?void 0:ze.collectionStore()),[ze]);at&&at!==st&&ze.setContext({type:"collectionPage",collectionViewBlockStore:lt,collectionStore:at});const ct=(0,a().VK)((()=>{const e=(0,o(317924).w_)(se.TabbedRouterStore.state);if("web"===e.type){var t,n;if("page"===(null===(t=e.redirectedTo)||void 0===t?void 0:t.route.name))return null===(n=e.redirectedTo)||void 0===n?void 0:n.route.blockId;if("page"===e.route.name)return e.route.blockId}}),[se]);(0,n.useEffect)((()=>{var e;se.mobileNative&&De===ct&&(null===(e=se.mobileNative)||void 0===e||e.markTransitionReady({type:"page",id:D.id,sendImmediately:!0}))}),[se.mobileNative,ct,De,D.id]),(0,n.useEffect)((()=>{Oe(D.id)}),[D]);const dt=(0,n.useCallback)((()=>{_e||L().Z.state.isDragging||N().default.state.isActive||Le(!0)}),[_e]),ut=(0,n.useCallback)((()=>{_e||L().Z.state.isDragging||N().default.state.isActive||Le(!1)}),[_e]),gt=(0,n.useCallback)((()=>{L().Z.state.isDragging||N().default.state.isActive||Ze(!0)}),[]),pt=(0,n.useCallback)((()=>{L().Z.state.isDragging||N().default.state.isActive||Ze(!1)}),[]),St=(0,l().z)(gt,100),mt=(0,l().z)(pt,100),vt=(0,n.useCallback)((e=>{Ge&&(f().eP({environment:se,store:D}),e.isAtStartOfLine?b().setSelectionAtStart({store:Ge}):b().setSelectionAtEnd({store:Ge}))}),[se,D,Ge]),ft=(0,n.useCallback)((e=>{b().clear({environment:se}),f().ZH({environment:se}),q&&q(e)}),[se,q]),bt=(0,n.useCallback)((e=>{if(me)return!0;if(e.preventDefault(),function(e){return Boolean(ee(e))}(D)){const e=(0,M().y6)(D);if(e&&e.collection_page_properties){const t=e.collection_page_properties.find(((e,t)=>function(e,t){const o=ee(t);if(!o)return!1;const n=function(e){return e.getSchema()}(t);return(0,_().AB)(n[e])}(e.property,D)));t&&o(492788).default.afterNextFlush((()=>{o(909240).bA({environment:se,blockPropertyValueOverlayStore:oe(j),collectionContextStore:ze,store:D,property:t.property,format:o(356321).C.Page})}))}}}),[ze,j,se,me,D]),yt=(0,n.useCallback)((e=>{if(me)return!0;ft(e)}),[ft,me]),Pt=(0,n.useCallback)((()=>{Ke.reset()}),[Ke]),kt=(0,n.useCallback)((e=>{e.target===We.current&&null===e.relatedTarget&&document.hasFocus()&&f().ZH({environment:se})}),[se]),ht=(0,a().VK)((()=>ae(Se,D,j,se)),[se,Se,j,D]),Ct=(0,a().VK)((()=>{const e=D.isPost(),t=e&&!D.isPublishedPost();return j===A().S.DraftPostInInlineComposer?A().S.DraftPostInInlineComposer:e&&!t?A().S.PostInFullPageOrPeek:e&&t?A().S.DraftPostInFullPageComposer:void 0}),[D,j]),_t=(0,o(896641).S)({pageStore:D,postContext:Ct,collectionStore:at,pageViewBlockStore:Ie.pageViewBlockStore}),Mt=(0,a().VK)((()=>W().default.state.topHoverAreaEntered),[]),Bt=(0,n.useCallback)((e=>{const{isBottomControl:t,forceVisible:o}=e??{},n=_e?Mt:Ee;let i;return i=!!ce.isMobile||(!!o||(!!xe||(t?Fe&&!O().default.state.isKeyboardMode:n&&!O().default.state.isKeyboardMode||Ce))),function(e){return{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 100ms ease"}}(i)}),[Fe,ce.isMobile,Ce,Ee,_e,Mt,xe]),Vt=(0,a().VK)((()=>Bt({isBottomControl:!1})),[Bt]),[wt,Kt]=(0,a().VK)((()=>[D.hasIcon(),D.hasCover()]),[D]),Tt=(0,a().VK)((()=>"suggest"===F().MT.getMode(D)),[D]),xt=(0,a().VK)((()=>(0,w().$0)({environment:se,collectionStore:D.getAssociatedCollectionStore()})),[se,D]),It=(0,a().VK)((()=>!ce.isMobile&&((0,w().l9)({blockStore:D})||xt)),[ce.isMobile,D,xt]),Et=(0,o(378773).V)({environment:se,blockStore:D,from:"topControls",blockContext:j}),Lt=(0,n.useCallback)((e=>{let{from:t}=e;const n=me?D.getCollectionStore():ee(D);n&&(0,o(142730).IR)({environment:se,blockStore:D,collectionStore:n,from:t})}),[se,me,D]),Ft=(0,n.useMemo)((()=>{if(G)return[];const e=[];return!pe||wt||Tt||e.push((0,z.jsx)(n.Fragment,{children:(0,z.jsx)(o(628621).Z,{store:D,afterOnClick:()=>{Xe.current=!0},style:Vt,label:ce.isSmallPhone?(0,z.jsx)(d()._H,{id:"PageViewBlock.icon.pageIconMobile",defaultMessage:"Icon"}):(0,z.jsx)(d()._H,{id:"PageViewBlock.icon.pageIcon",defaultMessage:"Add icon"})})},"add-icon")),!pe||Kt||Tt||e.push((0,z.jsx)(n.Fragment,{children:(0,z.jsx)(o(857815).Z,{store:D,style:Vt,label:ce.isSmallPhone?(0,z.jsx)(d()._H,{id:"PageViewBlock.cover.pageCoverMobile",defaultMessage:"Cover"}):(0,z.jsx)(d()._H,{id:"PageViewBlock.cover.pageCover",defaultMessage:"Add cover"})})},"add-cover")),It&&e.push((0,z.jsx)(n.Fragment,{children:(0,z.jsx)(o(946735).Su,{store:D,style:Vt,showUpsell:xt})},"verify-page")),Et&&e.push((0,z.jsx)(o(995764).Z,{blockStore:D,onClick:()=>Lt({from:"customize_page_button_above_title"}),style:Vt},"customize-layout")),pe&&!ce.isMobile&&e.push((0,z.jsx)(n.Fragment,{children:(0,z.jsx)(o(448438).G,{store:D})},"generate-preview-image")),e}),[G,pe,wt,Tt,Kt,It,Et,ce.isMobile,ce.isSmallPhone,D,Vt,Lt,xt]),Zt=(0,a().VK)((()=>{const{WindowSizeStore:e}=se,t=me?"20vh":(null==U?void 0:U.pageCoverHeight)??J(se),n=(null==U?void 0:U.paddingX)??(0,M().RH)(j,se);return(0,z.jsx)(o(58836).p,{allowSelectionWithin:!1,style:(0,o(279080).p)(D,se),children:(0,z.jsx)(o(75751).Z,{height:t,store:D,disabled:!pe,paddingLeft:e.getSafePaddingLeftCSS(n),paddingRight:e.getSafePaddingRightCSS(n),proxyWidth:e.state.width})})}),[se,me,pe,U,D,j]),Dt=(0,a().VK)((()=>{const e=se.currentUser.isLoggedIn(),t=de&&de.publicEditModeStore.state;let n;return j===A().S.Frame?n=I().default.state.currentLoadingContainerStore:j===A().S.PeekView&&W().default.state.open&&(n=W().default.state.loadingContainerStore),Boolean(D&&n&&D.isDefined()&&!D.isNonEditableState()&&D.canEdit()&&!D.hasContent()&&e&&(!(null!=t&&t.hasPublicPermission)||"edit"===(null==t?void 0:t.permission))&&!(Boolean(o(365609).Z.state.pageMap[D.id])||o(346392).Z.state.pages.has(D.id))&&n.state.ready&&!(0,M().a_)(D)&&!(0,M().Wt)(D)&&(!(0,o(982855).GD)(t)||"completionPopup"!==o(845622).default.state.type))}),[se.currentUser,de,D,j]),Ot=(0,n.useMemo)((()=>({store:D,isEditable:pe,hasCover:Kt,isInSidePeek:Me,openMenuOnMountCallback:()=>{Xe.current=!1}})),[Kt,pe,Me,D]),Rt=(0,a().VK)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(D)),[D]),jt=(0,a().VK)((()=>ce.isMobile&&!ce.isTablet&&ce.isIOS&&!Rt&&"on"===Z().default.getEligibleGroup({experimentId:"mobile_lightweight_editor_prompt",defaultGroup:"control"})),[ce.isMobile,ce.isTablet,ce.isIOS,Rt]),At=(0,a().VK)((()=>{var t;const o=(null===(t=e.styleOverrides)||void 0===t?void 0:t.paddingX)??(0,M().RH)(j,se);let n=e.titlePlaceholder;return jt&&(n=""),{store:D,disabled:!ue,isInSidePeek:Me,paddingLeft:o,paddingRight:o,extraStyles:e.titleStyle,titlePlaceholder:n,collectionContextStore:ze,shouldShowTemplatePicker:Dt,onTitleChange:Pt,onTitleEditText:vt,onTitleEsc:ft,onTitleUntab:yt,onTitleTab:bt}}),[null===(i=e.styleOverrides)||void 0===i?void 0:i.paddingX,e.titleStyle,e.titlePlaceholder,j,se,D,ue,ze,Dt,Pt,vt,ft,yt,bt,Me,jt]),Ht=(0,n.useCallback)((e=>{"page"===e&&v().measurePageRenderMetrics({environment:se,isEditable:pe,isHomePage:!1,isWikiHome:!0,isPageWithCustomLayout:!1,idSchema:ve})}),[se,pe,ve]),qt=(0,a().VK)((()=>{var t,n;const i=(0,z.jsx)(o(763986).d.Provider,{value:Pe,children:(0,z.jsx)(o(628370).Z,{tag:o(857719).Xg,animate:ke.layout,type:ht,withBottomPadding:j!==A().S.DraftPostInInlineComposer,ref:qe,children:(0,z.jsx)(o(349509).Z,{context:j,postContext:Ct,onHeaderMouseEnter:dt,onHeaderMouseLeave:ut,onDetailMouseEnter:St,onDetailMouseLeave:mt,pageCoverHeight:(null===(t=e.styleOverrides)||void 0===t?void 0:t.pageCoverHeight)??J(se),modules:(null===(n=e.layoutModulesByArea)||void 0===n?void 0:n.page_main)??_t.page_main,styleOverrides:e.styleOverrides,templatePickerMenuListStore:Ie.templatePickerMenuListStore,topControls:Ft,getControlHoverStyle:Bt,pageViewBlockStores:Ie,...Ot,openMenuOnMount:Xe.current,...At,disabled:le,pageViewBlockAccessor:Ue,ref:He})})});return ze&&ze.contextType?(0,z.jsx)(k().L1,{value:ze,children:i}):i}),[Pe,ke.layout,ht,j,dt,ut,St,mt,e.styleOverrides,null===(g=e.layoutModulesByArea)||void 0===g?void 0:g.page_main,se,_t.page_main,Ie,Ft,Bt,Ot,At,le,Ue,ze,Ct]),Wt=(0,a().VK)((()=>D.getType()===o(156642).Ti.copyIndicator&&(D.getParentTable()!==c().vF||D.getParentTable()===c().vF&&0===Object.keys(D.getProperties()).length)?(0,z.jsx)(o(847207).X,{}):o(452842).Z.state.isDuplicating?(0,z.jsx)(P().g,{store:D,peekMode:void 0,forceShowIcon:!0}):me?(0,z.jsx)(k().L1,{value:ze,children:(0,z.jsx)(o(281510).Z,{canEdit:ue,context:A().S.CollectionViewBlockFullScreen,controlHoverStyle:Vt,handleHeaderMouseEnter:dt,handleHeaderMouseLeave:ut,headerFocusStore:Ie.headerFocusStore,pageCover:Zt,topControls:Ft,...Ot,openMenuOnMount:Xe.current,...At,store:D,onCollectionViewBlockMount:Ht})}):Ye?(0,z.jsx)(o(937905).D,{renderLoading:()=>(0,z.jsx)(P().g,{store:D,peekMode:void 0}),innerRenderLoading:()=>(0,z.jsx)(P().g,{store:D,peekMode:void 0}),store:D}):be?(0,z.jsx)(o(662807).Gn,{store:D}):(0,z.jsx)(o(28832).O,{displayName:"PageContent",style:{...X,...e.style},disabled:!ue||D.isNonEditableState(),onBlur:kt,shouldSelectOnEnter:Y,ref:We,children:qt})),[ue,ze,Vt,kt,dt,ut,me,Ye,Ht,qt,Ot,At,e.style,Zt,D,Ie.headerFocusStore,Ft,be]);return(0,K().ez)(D,t,(0,n.useMemo)((()=>({store:D,blockContext:j,openResolvedDiscussionPopup:Re,getContentInnerWidth:Ae,getContentWrapEl:Ne,getLayoutEl:Ue,collectionContextStore:ze,...Ie,renderedType:"page",getBlockStore:()=>D,getNode:()=>We.current})),[D,j,ze,Ae,Ne,Ue,Re,Ie]),Wt)}const $=n.memo(n.forwardRef(Q),o(632314).Z);function J(e){return e.device.isMobile?200:`${G}vh`}function Y(){return 0===U().default.state.stores.length}function ee(e){return e.getAssociatedCollectionStore()}function te(e){return e===A().S.Frame}function oe(e){return(0,M().OZ)(e)?q().Z:j().Z}function ne(e){return(0,M().OZ)(e)?H().Z:te(e)?D().Z:(0,g().t1)(e)}function ie(e){return te(e)||(0,M().OZ)(e)}function re(e,t){const{device:o,RouterStore:n}=t,{route:i}=n.state,r=e;return o.isMobileNative&&"page"===i.name&&i.showMoveTo&&r.isEmptyTitle()&&r.isEmptyPage()}function ae(e,t,o,n){return o===A().S.DraftPostInInlineComposer?"create-post":n.device.isPhone?"phone":n.device.isTablet?(0,M().mO)(t,o,n)?"wide":"tablet":(0,M().OZ)(o)?(0,M().yp)(t)?"side-peek":"center-peek":function(e){return e===A().S.InAppTemplatePreview}(o)||function(e){return e===A().S.InPageSnapShot}(o)?"template-preview":(0,M().mO)(t,o,n)?e?"wide-right-margin-expanded":"wide":"default"}}}]);