"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[70907,95986,30795,37598],{589357:(e,t,o)=>{o.r(t),o.d(t,{AssistantAnimatedFace:()=>T,AssistantAnimatedFaceInner:()=>I});o(492176),o(7961);var n=()=>o(522399),i=()=>o(730120),r=o(667294),a=()=>o(387934),l=()=>o(142735),s=()=>o(846550),d=()=>o(947115),c=()=>o(444263),u=()=>o(840521),p=()=>o(79179),m=()=>o(839002),f=()=>o(696459),g=()=>o(726143),h=()=>o(379072),y=()=>o(95718),v=()=>o(660293),x=()=>o(21062),b=()=>o(934262),w=()=>o(73898),S=()=>o(576917);const C=o.p+"bc69e69669ca365b.riv",k=["Base_Idle","Idle A","Idle B","Idle C"];var _=o(785893);n().RuntimeLoader.setWasmUrl(o(822721));const j=!1;function T(e){const{sizeVariant:t,includeBoxShadow:o,onMouseEnter:n}=e,i=function(){const e=(0,g().Io)().isWriter,t=(0,l().VK)((()=>{const t=e?(0,y().Js)():h().default.getActiveSession();if(!t)return"idle";const o=t.evaluator.getTranscript().at(-1);if(o&&"observation"===o.type&&"error"===o.observationType)return"error";const n=t.isStreaming();if(!n)return"idle";const i=t.getCombinedSteps().at(-1),r="assistantSearch"===(null==i?void 0:i.type)||"assistantShowSearchResults"===(null==i?void 0:i.type),a="assistantLoading"===(null==i?void 0:i.type)||"human"===(null==i?void 0:i.type);return"groupedEditCard"===(null==i?void 0:i.type)?"writing":r?"searching":a?"thinking":n?"writing":"idle"}),[e]);return(0,r.useEffect)((()=>{j&&M("HighLevelState","Pink",t)}),[t]),t}();return(0,_.jsx)(x().N,{step:"ai_assistant",isFullWidth:!1,highlightStyle:{borderRadius:"100%"},children:(0,_.jsx)(I,{sizeVariant:t,includeBoxShadow:o,highLevelState:i,onMouseEnter:n})})}function I(e){const{sizeVariant:t,highLevelState:o,includeBoxShadow:i,onMouseEnter:g}=e,[h,y]=(0,r.useState)(!1),x=(0,r.useCallback)((()=>{y(!0)}),[]),{onStateChange:T,waitUntilState:I,animationState:P}=function(){const e=(0,r.useRef)("Idle B"),t=(0,r.useMemo)((()=>new(c().Z)),[]),o=(0,r.useCallback)((o=>{if(Array.isArray(o.data)&&1===o.data.length){const n=o.data[0];j&&M("State change","DarkGreen",n),e.current=n,t.emit(n)}}),[t]),n=(0,r.useCallback)((()=>new Promise((e=>{const o=n=>{t.removeListener(o),e(n)};t.addListener(o)}))),[t]),i=(0,r.useCallback)((async t=>{(await m().OI(2e3,(async()=>{for(;!t(e.current);)await n()})())).timeout&&(0,a().XY)("Timed out while waiting for an assistant face state change.")}),[n]);return{animationState:e,waitUntilState:i,onStateChange:o}}(),{rive:R,RiveComponent:V}=(0,n().useRive)({src:C,stateMachines:["Main"],autoplay:!0,onAdvance:x,onStateChange:T});!function(e){const t=(0,l().VK)((()=>v().Z.state.isVisible),[]),o=(0,r.useCallback)((()=>{null==e||e.startRendering()}),[e]),n=(0,r.useCallback)((()=>{null==e||e.stopRendering()}),[e]);(0,r.useEffect)((()=>{t?o():n()}),[t,n,o])}(R);const B=function(e){const t=(0,r.useMemo)((()=>{const t=null==e?void 0:e.stateMachineInputs("Main"),o=new Map;if(!t)return o;for(const e of t)o.set(e.name,e);return o}),[e]);(0,r.useEffect)((()=>{(0,d().exposeDebugValue)("AssistantAnimatedFaceTriggers",t)}),[t]);const o=(0,u().X)(),n=(0,r.useCallback)((e=>{var n;o.current&&(j&&M("Firing trigger","MediumBlue",e),null===(n=t.get(e))||void 0===n||n.fire())}),[o,t]);return n}(R),L=(0,r.useMemo)((()=>new(p().z)(1)),[]);(0,r.useEffect)((()=>{L.enqueue((async()=>{"writing"===o?B("WritingInTrigger"):"idle"===o?(await async function(){"Writing_In"===P.current&&await I((e=>"Writing_Loop"===e)),"Writing_Loop"===P.current&&(B("WritingOutTrigger"),await I((e=>(0,f().DE)(k,e)))),"Thinking_In"!==P.current&&"Thinking_Loop"!==P.current||(B("ThinkingOutTrigger"),await I((e=>(0,f().DE)(k,e)))),"Searching_In"===P.current&&await I((e=>"Searching_Loop"===e)),"Searching_Loop"===P.current&&(B("SearchingOutTrigger"),await I((e=>(0,f().DE)(k,e))))}(),B("IdleTrigger")):"searching"===o?B("SearchingInTrigger"):"thinking"===o?B("ThinkingInTrigger"):"error"===o?B("ErrorTrigger"):(0,f().t1)(o)}))}),[o,B,I,L,P]);const A=(0,s().yK)((e=>{const o=(0,w().O)(t);return{wrap:{width:o,height:o,...i&&{boxShadow:e.shadowXS,borderRadius:"100%"},position:"relative"},faceImg:{position:"absolute",height:o,width:o},staticFace:{position:"absolute",left:0,top:0}}}),[t,i]);return(0,_.jsxs)("div",{style:A.wrap,onMouseEnter:e=>{e.stopPropagation(),null==g||g(e),setTimeout((()=>b().default.dismissTourTutorial()),400)},children:[(0,_.jsx)(V,{style:A.faceImg,onMouseEnter:()=>{Math.random()<.1&&B("GreetingTrigger")}}),!h&&(0,_.jsx)(S().P,{variant:t,wrapWithPadding:!0,style:A.staticFace,shadowVariant:i?"strong":"none"})]})}function M(e,t){const o=i().ou.local().toFormat("HH:mm:ss.SSS");for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];console.log(`%c[${o}] %c${e}:`,"color: Grey;",`color: ${t}; font-weight: bold;`,...r)}},707461:(e,t,o)=>{o.d(t,{Pm:()=>l,Xj:()=>r,wC:()=>a});var n=()=>o(435308);class i extends(()=>o(263184))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new i,a=new(n().default)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),l=new(n().default)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},472344:(e,t,o)=>{o.d(t,{O:()=>f,b:()=>m});o(667294);var n=()=>o(846550),i=()=>o(996106),r=()=>o(513670),a=()=>o(326966),l=()=>o(589024),s=()=>o(527278),d=()=>o(86048),c=()=>o(594072),u=o(785893);const p=21;function m(e){const{numberValue:t,numberFormat:o,numberPrecision:m,numberShowAs:g,shouldRenderTooltip:h,withComma:y,style:v,ringWidth:x,className:b,barHeight:w}=e,S=(0,n().Fg)();if(r().i2(t)||a().z4(t))return null;const C=e.progressSize??p,k=(null==g?void 0:g.showValue)??!0,_=k&&i().uf(t,o,s().Z.getIntl(),void 0,m);let j;if("bar"===(null==g?void 0:g.type)||"ring"===(null==g?void 0:g.type)){const n=i().IM(t,g.maxValue),{filledColor:r,gapColor:a,unfilledColor:s}=f({theme:S,color:g.color}),p=h?l().X7({numberValue:t,numberFormat:o,numberShowAs:g}):void 0;j="bar"===g.type?(0,u.jsx)(d().k,{percentage:n,filledColor:r,gapColor:a,unfilledColor:s,height:w,style:{height:C,...e.barStyle,...k?{}:{flexBasis:"100%"}},tooltip:p}):(0,u.jsx)(c().e,{percentage:n,filledColor:r,gapColor:a,unfilledColor:s,size:C,ringWidth:x,tooltip:p})}return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...v},className:b,children:[_,j,y?", ":null]})}function f(e){let{theme:t,color:o}=e;const n="default"===o?t.selectLightGray:t.accentColors[o];return{filledColor:"dark"===t.mode?n[500]:n[400],gapColor:n[50],unfilledColor:"dark"===t.mode?n[200]:t.selectLightGray[200]}}},246471:(e,t,o)=>{o.d(t,{F:()=>c,a:()=>d});o(667294);var n=()=>o(846550),i=()=>o(568017),r=()=>o(707513),a=()=>o(827618),l=()=>o(78014),s=o(785893);function d(e){const{value:t,color:o,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:f,hideTooltip:g,description:h,tooltipPlacement:y,...v}=e,x=(0,n().Fg)(),b=(0,n().yK)((e=>({token:{...c&&r().Yu}})),[c]),{textColor:w,backgroundColor:S}=(0,i().KR)(x,o);return t?(0,s.jsx)(l().Z,{format:d,value:(0,s.jsx)(a().Z,{children:t}),description:h,onClickRemove:u,showRemoveButton:p,isSingle:m,color:w,backgroundColor:S,shouldShrink:f,tooltipPlacement:y,showTooltip:g?"never":"overflow",style:b.token,...v}):null}function c(e){const{value:t,color:o,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:f,groupColor:g,tooltipPlacement:h,description:y,hideTooltip:v,...x}=e,b=(0,n().Fg)(),w=(0,n().yK)((()=>({token:{...c&&r().Yu}})),[c]);if(!t)return null;const{textColor:S,backgroundColor:C}=(0,i().KR)(b,o??g??"gray");let k;return k=o||(g||"gray"),(0,s.jsx)(l().Z,{format:d,value:(0,s.jsx)(a().Z,{children:t}),description:y,onClickRemove:u,showRemoveButton:p,isSingle:m,color:S,backgroundColor:C,shouldShrink:f,showTooltip:v?"never":"overflow",style:w.token,isRound:!0,showColoredDot:k,tooltipPlacement:h,...x})}},539245:(e,t,o)=>{o.d(t,{Qr:()=>s,ZP:()=>d,pQ:()=>l});o(241792);var n=o(667294),i=()=>o(352230),r=o(785893);function a(e){let{tabs:t,selectedIndex:a,onChange:d,separatorIndexes:c,right:u,style:p,rightStyle:m,tabStyle:f,tabTitleStyle:g,selectedTabTitleStyle:h,tabBorderStyle:y,selectedTabStyle:v,readOnly:x,hideTabBorder:b,idPrefix:w}=e;const S=(0,n.useContext)(i().p),{device:C,WindowSizeStore:k}=(0,o(219727).O7)(),{safePaddingLeft:_,safePaddingRight:j}=(0,o(142735).VK)((()=>({safePaddingLeft:k.getSafePaddingLeftCSS(16),safePaddingRight:k.getSafePaddingRightCSS(16)})),[k]),T=(0,o(846550).yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...f},o=`inset 0 -1px 0 ${e.regularDividerColor}`,n=S.menuType===i().o.Popup,r={fontSize:16,paddingTop:2,paddingLeft:n?16:_,paddingRight:n?16:j,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:b?void 0:o,...C.isMobile?r:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...p},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...v},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...y},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...m}}}),[S.menuType,C.isMobile,m,_,j,v,p,y,f,b]);return(0,r.jsxs)("div",{className:"hide-scrollbar",style:T.container,role:"tablist",children:[t.map(((e,t)=>{const i=t===a;return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)("div",{style:i?T.selectedTab:T.tab,children:[(0,r.jsx)(o(265640).D,{style:{...g,...i?h:{}},onClick:()=>d(t),disabled:x,mobileFeedback:C.isMobile,isLightGray:!Boolean(i),role:"tab","aria-selected":i,id:l(w,t),"aria-controls":s(w,t),children:e}),i&&(0,r.jsx)("div",{style:T.border})]},`tabButton-${t}`),c&&c.includes(t)&&(0,r.jsx)("div",{style:T.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),u&&(0,r.jsx)("div",{style:T.rightContainer,children:u})]})}function l(e,t){if(e)return`${e}-tab-${t}`}function s(e,t){if(e)return`${e}-tabpanel-${t}`}const d=n.memo(a)},125659:(e,t,o)=>{o.d(t,{DK:()=>d,L1:()=>l,Y$:()=>s,cu:()=>a});o(821057);var n=o(667294);const i="collectionContextStore",r=(0,o(949744).Q)({displayName:i,legacyContextKey:i,modernContextDefaultValue:void 0}),a=r.context,l=r.Provider;function s(){const e=n.useContext(a);if(void 0===e)throw new Error(`No context provided: ${i}`);return e}function d(){return n.useContext(a)}},589024:(e,t,o)=>{o.d(t,{AB:()=>V,Sy:()=>w,TP:()=>M,Hw:()=>C,z0:()=>S,X9:()=>T,X7:()=>_,AF:()=>k,g0:()=>j,xE:()=>R,aJ:()=>P,VM:()=>b});o(267602),o(228244);var n=()=>o(506347),i=()=>o(15607),r=()=>o(226413),a=()=>o(532850);o(667294);const l={viewBox:"0 0 20 20",svg:(0,o(785893).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},s=(0,o(827282).IU)("arrowExpandDiagonal",l);var d=()=>o(165405),c=()=>o(850648),u=()=>o(996106),p=()=>o(955620),m=()=>o(513670),f=()=>o(696459),g=()=>o(916673),h=()=>o(326966),y=()=>o(356321),v=()=>o(429725),x=()=>o(527278);function b(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function w(e){switch(e){case y().C.Table:return"table";case y().C.Board:return"board";case y().C.ListView:return"list";case y().C.GalleryView:return"gallery";case y().C.Relation:case y().C.RelationSection:return"relation_section";case y().C.Timeline:return"timeline";case y().C.Calendar:return"calendar";case y().C.Page:return"page_properties";case y().C.CompactPage:return"compact_page";case y().C.Mini:return"mini_peek";case y().C.FormEditor:case y().C.FormViewer:case y().C.PropertyModule:return"property_module";default:(0,f().t1)(e)}}function S(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function C(e){const{store:t,property:o,propertySchema:i}=e,r=null==i?void 0:i.type;if("title"===r)return(0,v().ZP)({store:t,fullyQualified:!1,pageVisitSource:n().tY.LinkInPage});{const e=t.getPropertyValue(o);return a().Hw(r,e)}}function k(e){let t=(0,p().Jcv)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=g().Qc(t),n=o.host;if(o.protocol&&n||(o=g().Qc(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const i=t.toLowerCase().indexOf(n.toLowerCase());if(-1===i)return{domain:void 0,restOfUrl:void 0};n=t.slice(i,i+n.length);return{domain:n,restOfUrl:t.slice(i+n.length)}}function _(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(m().i2(t)||h().z4(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=x().Z.getIntl();return"percent"===o?u().uf(t,"percent",e):`${t} / ${n.maxValue}`}}function j(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,i().w)(t)}function T(e,t){switch(e){case"side_peek":return{icon:c().L,tooltip:x().Z.formatMessage(I.openInSidePeekTooltip),caption:t?"":x().Z.formatMessage(I.openAsPageTitle)};case"center_peek":return{icon:d().w,tooltip:x().Z.formatMessage(I.openInCenterPeekTooltip),caption:t?"":x().Z.formatMessage(I.openAsPageTitle)};case"full_page":return{icon:s,tooltip:x().Z.formatMessage(I.openAsPageTooltip),caption:t?"":x().Z.formatMessage(I.openAsPageTitle)};default:(0,f().t1)(e)}}const I=(0,o(788860).vU)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function M(e){const t=e.getSchema();if(t)for(const[n,i]of Object.entries(t)){var o;if(i&&"text"===i.type&&"summarize"===(null===(o=i.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function P(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,i=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!i)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==i.id}))}function R(e){return e===y().C.FormEditor||e===y().C.FormViewer}function V(e){return Boolean(e&&!r().uk.includes(e.type))}},706363:(e,t,o)=>{o.d(t,{Ct:()=>i,LO:()=>n,iN:()=>r});const n=40,i=48,r=60},688293:(e,t,o)=>{o.d(t,{N:()=>m,t:()=>f});o(670560);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(799891),l=(o(821057),()=>o(386616)),s=()=>o(826955),d=()=>o(269299);var c=()=>o(109083),u=()=>o(910135),p=()=>o(142109);function m(e,t){let{canUndo:o,shouldPersistOperation:m}=t;const f=(0,i().O7)(),g=(0,n.useRef)([]).current,h=(0,n.useCallback)((e=>{g.push(...e)}),[g]),y=(0,n.useCallback)((e=>{m&&!m(e)||h([e])}),[h,m]),v=(0,p().$)(e,{cacheFallback:f.defaultRecordCache.inMemoryRecordCache,isTemporaryData:!0,onOperationCallback:y});(0,n.useEffect)((()=>{c().Z.initializeCache(e,v)}),[e,v]);const x=(0,n.useCallback)((()=>{u().default.reset(),c().Z.clearCache(e)}),[e]);(0,n.useEffect)((()=>(u().default.reset(),()=>{u().default.reset(),c().Z.expire(e)})),[e]);const b=(0,r().VK)((()=>u().default.state.undoStack.length>0),[]);(0,n.useEffect)((()=>{c().Z.updateUnsavedCacheState(e,b)}),[e,b]);const w=(0,n.useCallback)((async e=>{if(0===g.length)return void 0;v.assertUnexpired(),function(e){for(const t of u().default.state.undoStack)for(const o of t.transactions)for(const t of o.stores)if(t.inMemoryRecordCache!==e&&!t.inMemoryRecordCache.isMockTextStore){const n=o.getUserActionForAnalyticsPurposesOnly(),i=t.inMemoryRecordCache.name,r=e.name,l=`Undoable user action "${n}" was applied to cache "${i}", but only operations in the cache "${r}" should be in the undo stack!`;(0,a().log)({from:"useLocalDraft",type:"invalidStoreInRevisionStack",level:"error",data:{message:l,miscDataToConvertToString:{userAction:n,inMemoryRecordCacheName:i,expectedInMemoryRecordCacheName:r}}})}}(v);const{serverCommitResult:t}=d().createAndCommit({environment:f,userAction:e,perform(e){!function(e){let{environment:t,transaction:o,operationsWithStores:n}=e;for(const{operation:i,store:r}of n){if(!(r instanceof s().ST))continue;const e=r.clone(t.defaultRecordCache.inMemoryRecordCache);(0,l().Qf)(i)?d().applyCrdtTextOperation({store:r,operation:i,transaction:o,invertedOperation:void 0}):d().applyOperation({transaction:o,store:e,operation:i})}}({environment:f,transaction:e,operationsWithStores:g}),e.postSubmitCallbacks.push((e=>{e||(v.expire(),u().default.reset())}))},canUndo:o});return t}),[e,o,f,g,v]);return(0,n.useMemo)((()=>({cache:v,hasChanges:b,persist:w,reset:x})),[b,w,x,v])}function f(e,t){return(0,r().VK)((()=>t.clone(e.cache)),[t,e.cache])}},228772:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(142735),i=()=>o(876822);function r(){return(0,n().VK)((()=>i().default.state.currentSpaceStore),[])}},821227:(e,t,o)=>{o.d(t,{C:()=>r});var n=()=>o(836273),i=()=>o(497065);function r(e){const{environment:t}=e;i().c4({environment:t,url:n()._j.marketplace,redirect:!1})}},4909:(e,t,o)=>{o.d(t,{y:()=>d});var n=o(667294),i=()=>o(219727),r=()=>o(836273),a=()=>o(497065),l=()=>o(594546),s=()=>o(821227);function d(e,t){const o=(0,i().O7)();return(0,n.useCallback)((n=>{(0,l().j)({environment:o,event:{eventName:e,eventProperties:{}}});const i="click"===n.type&&(n.metaKey||n.ctrlKey);(null==t?void 0:t.forceOpenInNewTab)||i?a().c4({environment:o,url:r()._j.marketplace,openInNew:"tab",makeTabActive:!i&&o.device.isDesktop}):(0,s().C)({environment:o})}),[o,e,t])}},913011:(e,t,o)=>{o.d(t,{H:()=>u});o(821057);var n=()=>o(792197),i=()=>o(308240),r=()=>o(215134),a=()=>o(6623),l=()=>o(639708),s=()=>o(269299),d=()=>o(655260),c=()=>o(772669);function u(e){let{environment:t,transaction:o,layoutStore:u,position:p,sessionId:m,beforePerformDeleteModule:f}=e;const g=u.getModules();if(!g)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const h=(0,r().h7)(g,(e=>e.id===p.moduleId));if(!h)throw new Error("[deleteModuleAtPosition] module to delete not found");const{module:y,position:v}=h;if(!(0,a().Fo)(y))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var x;(s().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:r,moduleToDelete:a,beforePerformDeleteModule:d}=e;d&&d(t);(0,l().Fc)(a)&&(0,c().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:a,transaction:t});if("form_conditional_modules"===r.area){const e=n().CI.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const n of e)s().applyOperation({transaction:t,store:o,operation:n})}else{const e="views_main_tab_modules"===r.area?{area:r.area,viewId:r.viewId}:{area:i().mt[r.area]};s().applyOperation({transaction:t,store:o,operation:n().CI.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:u,moduleLocation:v,moduleToDelete:y,beforePerformDeleteModule:f})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),m)&&d().DZ({environment:t,module:y,sessionId:m,collectionId:null===(x=u.getCollectionModel())||void 0===x?void 0:x.id,layoutId:u.id,context:(0,i().AR)(p.area),area:p.area})}},142730:(e,t,o)=>{o.d(t,{IR:()=>I,L0:()=>P,MF:()=>M,gm:()=>R,iQ:()=>V,m2:()=>_});o(821057),o(492176),o(7961),o(267602),o(653476);var n=()=>o(956057),i=()=>o(530980),r=()=>o(308240),a=()=>o(215134),l=()=>o(667932),s=()=>o(137785),d=()=>o(639708),c=()=>o(483791),u=()=>o(593515),p=()=>o(82937),m=()=>o(497065),f=()=>o(269299),g=()=>o(887430),h=()=>o(487270),y=()=>o(793935),v=()=>o(876822),x=()=>o(482162),b=()=>o(826955),w=()=>o(26796),S=()=>o(913011),C=()=>o(655260),k=()=>o(356117);function _(e){let{environment:t,transaction:o,collectionStore:n,userId:r,modules:a}=e;const s=(0,h().Ii)({environment:t,spaceId:n.getSpaceId(),table:c().Bh}),d=b().t1.createChildStore(n,s),{model:u,operations:[p]}=i().rp4.create({pointer:s,parent:n.pointer,createdByUserId:r,modules:a??(0,l()._P)()});f().applyOperation({transaction:o,store:d,operation:p});const m=i().kj1.setLayout(n.pointer,s);return f().applyOperation({transaction:o,store:n,operation:m}),{model:u,store:d}}function j(e){let t;return e?t=e:x().default.state.open&&x().default.state.targetStore?t=x().default.state.targetStore:v().default.state.mainEditorCurrentBlockStore&&(t=v().default.state.mainEditorCurrentBlockStore),t}function T(e){y().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),p().xv({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function I(e){var t,o;let{environment:i,blockStore:r,collectionStore:a,collectionViewStore:l,from:s,initialSelectedModuleType:d}=e;const c=function(e){var t;let o=j(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,g().fm)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(r),u=window.location.href;T(i);const p=n().Il();w().Z.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:c,siteRootBlockStore:void 0,sessionId:p,initialSelectedModuleId:null==c||null===(t=c.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(d??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:u}),(0,C().Rt)({environment:i,from:s,context:"layout",sessionId:p,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==l?void 0:l.id})}function M(e){let{environment:t,store:o,siteRootBlockStore:i,from:r}=e;const a=j(o);T(t);const l=n().Il();w().Z.setState({isOpen:!0,mode:"site-settings-editor",collectionStore:void 0,pageStore:a,siteRootBlockStore:i,sessionId:l}),(0,C().Rt)({environment:t,context:"site",from:r,sessionId:l,collectionId:void 0,existingLayoutId:void 0})}function P(e){w().Z.getState().isOpen&&R(e)}function R(e){let{environment:t}=e;const o=w().Z.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&m().op(t),w().Z.setState({isOpen:!1})}function V(e){var t;let{environment:o,transaction:n,property:i,layoutStore:l}=e;const c=w().Z.getSessionId(),p=null===(t=l.getModel())||void 0===t?void 0:t.getRawModules(),m=l.getCollectionModel();if(!p||!m)return;const f=b().NW.createChildStore(l,m.pointer),g=(0,a()._i)(p,(e=>"titleWithIcon"===e.type));if(g&&(0,d().p9)(g.module)){var h;const{module:e,position:t}=g,a={...e,type:"titleWithIcon",propertyIds:null===(h=e.propertyIds)||void 0===h?void 0:h.filter((e=>e!==i))};(0,k().Uq)({environment:o,sessionId:c,transaction:n,layoutStore:l,position:{area:(0,r().Gc)(t.area),moduleId:e.id},updatedModule:(0,s().V)(a)})}const y=(0,a().MI)(p,(e=>"property"===e.type&&e.propertyId===i));for(const{module:a,position:s}of y){const e=a.id,t=(0,r().Gc)(s.area);(0,S().H)({environment:o,sessionId:c,transaction:n,layoutStore:l,position:{area:t,moduleId:e}})}const v=m.getFormat().collection_page_sections;if(v){const e=v.filter((e=>e.section!==i));u().Do({store:f,pageSectionFormats:e,transaction:n,environment:o})}}},356117:(e,t,o)=>{o.d(t,{Uq:()=>m,Wb:()=>g});o(821057),o(267602),o(470928),o(30005);var n=()=>o(109477),i=()=>o(530980),r=()=>o(308240),a=()=>o(712185),l=()=>o(215134),s=()=>o(667932),d=()=>o(639708),c=()=>o(827370),u=()=>o(421654),p=()=>o(269299);function m(e){let{environment:t,transaction:o,layoutStore:n,position:s,updatedModule:d,sessionId:c}=e;const u=r().mt[s.area],m=n.getRawModules();if("form_conditional_modules"===u){const e=null==m?void 0:m[u];if(!(null==e?void 0:e[s.moduleId]))throw new Error("Unable to find module being updated.");return void p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:n,operation:i().CIp.updateNestedModule(n.pointer,u,(0,a().cm)(d))})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const f=(0,l().mT)(m,(e=>e.id===s.moduleId));if(!f||f.area!==u)throw new Error("Unable to find module being updated.");p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:n,operation:i().CIp.updateModuleInArea({pointer:n.pointer,module:(0,a().cm)(d),..."views_main_tab_modules"===f.area?{area:f.area,viewId:f.viewId}:{area:f.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function f(e){var t,o,n;let{collectionStore:i,layoutStore:r}=e;const a=new Map,l=i.getFormat(),s=[...null===(t=r.getModules())||void 0===t?void 0:t.page_main,...null===(o=r.getModules())||void 0===o?void 0:o.page_details],c=new Map;null===(n=l.property_visibility)||void 0===n||n.forEach((e=>{c.set(e.property,e)})),s.forEach((e=>{if(!(0,d().LP)(e))return(0,d().f)(e)?(a.set(e.propertyId,{property:e.propertyId}),void c.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),c.set(e,{property:e,visibility:"show"})}))}));const u=i.getNormalizedPropertyGroups();var p;u?u.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(p=l.collection_page_properties)||void 0===p||p.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(c.values())}}function g(e){let{environment:t,transaction:o,collectionStore:r,layoutStore:a}=e;const{propertiesFormat:l,propertyVisibility:m}=f({collectionStore:r,layoutStore:a});p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.getFormat(),f=a.firstModuleOfType("viewsMain");f&&(0,d().aJ)(f)&&t.find((e=>c().dr.isEqual(e,f.collection_view_block_pointer)))&&p().applyOperation({transaction:e,store:a,operation:i().CIp.removeBlockChild(a.pointer,f.collection_view_block_pointer.id)});const g=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,h=g&&t.find((e=>c().dr.isEqual(e,g)));h&&p().applyOperation({transaction:e,store:a,operation:i().CIp.removeBlockChild(a.pointer,h.id)}),p().applyOperation({transaction:e,store:a,operation:i().CIp.setModulesByAreas(a.pointer,(0,s()._P)())}),p().applyOperation({transaction:e,store:a,operation:i().CIp.deleteFormat(a.pointer)});const y=r.getFormat(),{page_section_visibility:v}=y;u().FH({stores:[r],update:{property_groups:void 0,collection_page_properties:l,property_visibility:m,...v?{page_section_visibility:n().dN}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},772669:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>a});var n=()=>o(349220),i=()=>o(332542),r=()=>o(826955);function a(e){const{layoutStore:t,viewsModule:o,transaction:a}=e,l=(0,n().TO)(r().G.createChildStore(t,o.collection_view_block_pointer));i().hr({childStore:l,parentStore:t,transaction:a})}},309797:(e,t,o)=>{o.d(t,{D9:()=>E,GB:()=>F,L2:()=>A,Nr:()=>R,Qg:()=>L,WJ:()=>O,h9:()=>P,m4:()=>M,mj:()=>V,n1:()=>K,sD:()=>B});var n=()=>o(219727),i=()=>o(657320),r=()=>o(142735),a=()=>o(156642),l=()=>o(109477),s=()=>o(752778),d=()=>o(844085),c=()=>o(707461),u=()=>o(887430),p=()=>o(954452),m=()=>o(201741),f=()=>o(982855),g=()=>o(949842),h=()=>o(148976),y=()=>o(191586),v=()=>o(942226),x=()=>o(466970),b=()=>o(170210),w=()=>o(876822),S=()=>o(845622),C=()=>o(749826),k=()=>o(543842),_=()=>o(346392),j=()=>o(311562),T=()=>o(482162),I=()=>o(365609);function M(e){(0,g().ZP)({event:e,context:g().Af.EditorMouseDown,callback:()=>{}})}function P(e){(0,g().ZP)({event:e,context:g().Af.EditorClick,callback:()=>{}})}function R(e){return(0,r().VK)((()=>Boolean(I().Z.state.pageMap[e.id])||_().Z.state.pages.has(e.id)),[e.id])}function V(e,t){const o=(0,n().O7)(),a=(0,i().l)(),l=R(e),s=(0,r().VK)((()=>{var o,n;return t===j().S.Frame?Boolean(null===(o=w().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===j().S.PeekView&&T().default.state.open?Boolean(null===(n=T().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===j().S.CollectionPageView||t===j().S.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),d=L(e);return(0,r().VK)((()=>{if(!s)return!1;const t=o.currentUser.isLoggedIn(),n=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!l&&!d&&(!(0,f().GD)(n)||"completionPopup"!==S().default.state.type))}),[o.currentUser,d,s,a,l,e])}function B(e,t){const o=(0,n().O7)(),a=(0,i().l)(),{isTablet:l}=(0,n().Fy)(),s=(0,x().E)("tablet_refresh_template_pills_gate");return(0,r().VK)((()=>{if(t===j().S.SitePreview)return!1;if(o.device.isMobile&&(!l||!s))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=a&&a.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const i=e.getContentStores()[0];if(i&&!i.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const r=m().TI.state,d=m().mn.state;if(r&&e.id===d)return!1;return!((0,y().OZ)(t)?c().Pm.state:c().wC.state)}),[o,a,e,t,l,s])}function L(e){return(0,r().VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(a().Ti.externalObjectInstancePage)}),[e])}function A(e){return(0,r().VK)((()=>{if(!(0,h().K6)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===s().vF){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function E(e){return(0,r().VK)((()=>{if(!(0,h().K6)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function F(e){return(0,r().VK)((()=>{if(!C().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().gH.CsvImport}),[e])}function K(e){const t=(0,n().O7)(),{device:o,WindowSizeStore:i}=t,a=(0,r().VK)((()=>{const e=i.state.height,n=o.isMobile&&k().Z.state.open?e:0;return d()._4(t)+n}),[t,i,o.isMobile]);return(0,r().VK)((()=>"home-phone"===e?b().jq:o.isTablet?380:o.isIOS?Math.max(350,a):o.isMobile?400:"side-peek"===e||"center-peek"===e?v().KA:"home"===e?b().XX:"30vh"),[o,a,e])}function O(e){const t=(0,n().O7)(),o=(0,r().VK)((()=>(0,p().fg)(t,e)),[t,e]);return(0,r().VK)((()=>o&&!e.isFullWidth()?(0,p().gC)(t,(0,v().wq)(e),(0,u().Ks)(e)):0),[t,o,e])}},170210:(e,t,o)=>{o.d(t,{$1:()=>S,$K:()=>b,A0:()=>h,A5:()=>g,Ae:()=>M,Cm:()=>u,D9:()=>f,EP:()=>s,Er:()=>C,Gl:()=>I,KI:()=>_,Ng:()=>m,QF:()=>p,Uf:()=>c,XX:()=>r,bS:()=>x,cc:()=>j,d_:()=>d,iO:()=>l,jO:()=>w,jq:()=>a,pW:()=>y});var n=()=>o(513670),i=()=>o(696459);const r=160,a=40,l=24,s=20,d=600,c=270,u=405,p=480,m=500,f=void 0,g=16,h=10,y=8,v=(o(706363).Ct,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),x=4;function b(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function w(e){return{width:48,height:48,fill:e.lightIconColor}}function S(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}function C(e){let{theme:t,isPhone:o,buttonState:n}=e,i=t.whiteButtonBackground;switch(n){case"hovered":i=t.whiteButtonHoveredBackground;break;case"pressed":i=t.whiteButtonPressedBackground}return o&&(i=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:i,...v,boxShadow:T({isPhone:o,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const k=1;function _(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:T({isPhone:t,theme:o}),...v}}function j(e){let{mode:t,isPhone:o}=e;switch(t){case"dark":return 0;case"light":return k;default:return(0,i().P)(t),0}}function T(e){let{isPhone:t,theme:o,borderOnly:i}=e;if("dark"===o.mode)return"unset";o.mode;const r=j({mode:o.mode,isPhone:t});return(0,n().oA)([i||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function I(e){return{display:"flex",flexDirection:"column",width:e.isPhone?"100%":700,gap:24}}function M(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:T({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},804097:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(470928);class n extends(()=>o(442))().Z{findTableHeaderCell(e,t){return this.find((o=>o.collectionContextStore===e&&o.property===t))}}const i=new n},469203:(e,t,o)=>{o.d(t,{s:()=>c});var n=o(667294),i=()=>o(219727),r=()=>o(846550),a=()=>o(707513),l=()=>o(654133);var s=()=>o(998901),d=o(785893);function c(e){let{children:t,style:o,tooltipStyle:c,placement:u=s().Placement.Bottom}=e;const{isSafari:p}=(0,i().Fy)(),m=(0,n.useRef)(null),f=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(m),g=(0,r().yK)((()=>({overflowText:{...a().Yu,...o}})),[o]);return(0,d.jsx)(l().Z,{delayThreshold:500,placement:u,textWrap:!0,style:c,forceVisibleState:!(p||!f)&&void 0,renderTooltip:()=>f?t:void 0,render:e=>(0,d.jsx)("div",{ref:m,style:g.overflowText,...e,children:t})})}},877727:(e,t,o)=>{o.d(t,{QZ:()=>a,SV:()=>i,mq:()=>r});var n=()=>o(749826);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().default.checkGate({gateName:"workflow_templates_settings_dev",disableExposureLogging:e.disableExposureLogging})&&n().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function a(e){return!e.device.isPhone}},999582:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n;o(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},67369:(e,t,o)=>{o.r(t),o.d(t,{WorkflowTemplatesOnboardingModal:()=>Rn});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(696459),l=()=>o(963310),s=()=>o(212493),d=()=>o(921981),c=()=>o(594546),u=()=>o(877727),p=()=>o(533808),m=()=>o(184441),f=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792),()=>o(511544)),g=()=>o(307312),h=()=>o(846550),y=()=>o(353329),v=()=>o(955620),x=()=>o(788860),b=()=>o(522283),w=()=>o(668001),S=()=>o(73333),C=()=>o(228772),k=()=>o(961507),_=()=>o(660301),j=()=>o(990966),T=()=>o(1910),I=()=>o(94967),M=()=>o(623498),P=()=>o(247724),R=()=>o(57687),V=()=>o(156538),B=(o(821057),o(470928),()=>o(824462)),L=()=>o(766072),A=()=>o(102182),E=()=>o(291198),F=()=>o(830581),K=()=>o(545821),O=o(785893);const W=(0,x().vU)({sendFeedbackButton:{id:"setupGenerator.sendFeedbackButton",defaultMessage:"Send feedback"},feedbackPlaceholder:{id:"setupGenerator.feedbackPlaceholder",defaultMessage:"Share your feedback"},submitSuccess:{id:"setupGenerator.submitSuccess",defaultMessage:"Your feedback has been submitted, thanks!"}});function N(e){const{onSubmit:t}=e,o=(0,x().YB)(),[i,r]=(0,n.useState)(""),a=(0,n.useCallback)((()=>{t(i),A().oV({label:o.formatMessage(W.submitSuccess)})}),[i,o,t]);return(0,O.jsx)(F().sR,{header:(0,O.jsx)(F().vI,{iconAndTitle:(0,O.jsx)("div",{style:{padding:"0 24px"},children:(0,O.jsx)(F().kC,{iconGroup:L().X,title:(0,O.jsx)(x()._H,{id:"setupGenerator.feedbackModal.title",defaultMessage:"How can we improve this result?"})})}),description:(0,O.jsx)(x()._H,{id:"setupGenerator.feedbacModal.description",defaultMessage:"Your feedback helps Notion AI improve. We'll share this prompt and the result with the Notion team."})}),footer:(0,O.jsx)(F().a6,{layout:"vertical",primaryButtons:[{label:o.formatMessage(W.sendFeedbackButton),onClick:a,isDisabled:0===i.length}]}),children:(0,O.jsx)(s().jX,{padding:2,children:(0,O.jsx)(E().Z,{placeholder:o.formatMessage(W.feedbackPlaceholder),textarea:!0,focusInitial:!0,value:i,onChange:e=>r(e.target.value)})})})}function Z(e){const{traceId:t,spaceId:o,transcript:r}=e??{},[a,l]=(0,n.useState)(void 0),s=(0,i().O7)(),c=r.find((e=>"config"===e.type));if(!c)throw new Error("No config step found");return[a,(0,n.useCallback)((async e=>{if(l(e),B().callApi({eventName:"saveInferenceTranscriptFeedback",environment:s,data:{spaceId:o,type:c.value.type,traceId:t,feedbackType:e,userComment:void 0}}),"thumbs_down"===e){const e=await async function(){return await(0,K().showAsyncModal)((e=>(0,O.jsx)(d().c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"fixed",length:400}},render:()=>(0,O.jsx)(N,{onSubmit:e.resolve})})))}();e&&B().callApi({eventName:"saveInferenceTranscriptFeedback",environment:s,data:{spaceId:o,type:c.value.type,traceId:t,feedbackType:"thumbs_down",userComment:e}})}}),[s,o,t,c])]}var D=()=>o(473759),z=()=>o(827282);const U=(0,z().CZ)("handThumbsDown",{default:{loader:()=>o.e(7585).then(o.bind(o,707585))},small:{loader:()=>o.e(31369).then(o.bind(o,731369))},mini:{loader:()=>o.e(63387).then(o.bind(o,63387))},large:{loader:()=>o.e(39081).then(o.bind(o,339081))}}),H=(0,z().CZ)("handThumbsDownFill",{default:{loader:()=>o.e(21301).then(o.bind(o,21301))},small:{loader:()=>o.e(95919).then(o.bind(o,295919))},mini:{loader:()=>o.e(78131).then(o.bind(o,478131))},large:{loader:()=>o.e(20800).then(o.bind(o,420800))}}),$=(0,z().CZ)("handThumbsUp",{default:{loader:()=>o.e(20609).then(o.bind(o,197434))},small:{loader:()=>o.e(15409).then(o.bind(o,515409))},mini:{loader:()=>o.e(5067).then(o.bind(o,405067))},large:{loader:()=>o.e(80592).then(o.bind(o,880592))}}),G=(0,z().CZ)("handThumbsUpFill",{default:{loader:()=>o.e(30277).then(o.bind(o,430277))},small:{loader:()=>o.e(30479).then(o.bind(o,630479))},mini:{loader:()=>o.e(30752).then(o.bind(o,830752))},large:{loader:()=>o.e(66195).then(o.bind(o,766195))}});var X=()=>o(603692),q=()=>o(654133),Y=()=>o(998901);const Q=(0,x().vU)({negativeFeedbackTooltip:{defaultMessage:"Share negative feedback with Notion",id:"setupGenerator.negativeFeedbackTooltip"},positiveFeedbackTooltip:{defaultMessage:"Share positive feedback with Notion",id:"setupGenerator.positiveFeedbackTooltip"},retry:{defaultMessage:"Revert",id:"setupGenerator.retry"}});function J(e){const{value:t,onChange:o,canRetry:n,onClickRetry:i,variantName:r}=e,a=(0,x().YB)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ee,{type:"thumbs_up",isSelected:"thumbs_up"===t,variantName:r,iconGroup:"thumbs_up"===t?G:$,onClick:o}),(0,O.jsx)(ee,{type:"thumbs_down",isSelected:"thumbs_down"===t,variantName:r,iconGroup:"thumbs_down"===t?H:U,onClick:o}),n?(0,O.jsx)(q().Z,{renderTooltip:()=>(0,O.jsx)("div",{children:(0,O.jsx)(x()._H,{...Q.retry})}),placement:Y().Placement.Bottom,render:e=>(0,O.jsx)(T().Z,{onClick:i,icon:()=>(0,O.jsx)(X().y,{iconGroup:D().v,variantName:r,colorName:"secondary"}),ariaLabel:a.formatMessage(Q.retry),...e})}):null]})}function ee(e){const{type:t,onClick:o,isSelected:i,iconGroup:r,variantName:l}=e,s=(0,x().YB)(),d=(0,n.useCallback)((()=>{o(i?void 0:t)}),[o,i,t]),c=(0,n.useMemo)((()=>s.formatMessage(function(e){switch(e){case"thumbs_up":return Q.positiveFeedbackTooltip;case"thumbs_down":return Q.negativeFeedbackTooltip;default:(0,a().t1)(e)}}(t))),[s,t]);return(0,O.jsx)(q().Z,{renderTooltip:()=>(0,O.jsx)("div",{children:c}),placement:Y().Placement.Bottom,render:e=>(0,O.jsx)(T().Z,{onClick:d,icon:()=>(0,O.jsx)(X().y,{iconGroup:r,variantName:l,colorName:i?"uiBluePrimary":"secondary"}),ariaLabel:c,...e})})}const te={page:!0,bot:!0,team:!0,reminder:!0,date:!0,user:!0,group:!0,heading:!0,templateVariable:!0,formulaContextVariable:!0},oe={type:"none"};function ne(e){const{onSubmit:t,value:o,onChange:r,canPressEnter:a,canRetry:l,feedbackArgs:s,onClickRetry:d,onFocus:c,onBlur:u,onClickStop:p,isBusy:m}=e,f=(0,i().O7)(),g=(0,x().YB)(),y=function(){const e=20,t=24;return(0,h().yK)((o=>{const n={boxShadow:o.inputBoxShadow,backgroundColor:o.surface.elevated,borderRadius:16,padding:"8px 8px 8px 12px",gap:"4px 8px",display:"flex",flexShrink:0,overflow:"hidden",height:"100%"};return{oneLineInput:{...n,flexDirection:"row",alignItems:"center",borderRadius:50},multiLineInput:{...n,display:"grid",gridTemplate:"1fr auto"},textWrapper:{paddingRight:4,flexGrow:1,display:"flex",fontSize:14,minWidth:0,overflow:"auto"},textContainer:{maxWidth:"100%",width:"100%",flexGrow:1,minWidth:0,height:"100%"},buttonWrapper:{minHeight:22,display:"flex",justifyContent:"flex-end",alignItems:"center",flexShrink:0,marginLeft:"auto"},icon:{height:e,width:e},stopIcon:{height:e,width:e,fill:o.icon.primary},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}}}),[])}(),{store:b,setValue:w}=(0,R().Cl)({initialValue:o,onChange:r});(0,n.useEffect)((()=>{const e=b.getValue();o!==e&&w(o)}),[o,w,b]);const S=(0,v().QaF)(o).length,C=!(0,v().PgY)(o),[B,L]=Z(s),A=(0,n.useCallback)((()=>{j().clear({environment:f}),null==u||u()}),[f,u]),E=(0,n.useMemo)((()=>g.formatMessage({id:"setupGenerator.followUp.placeholder",defaultMessage:"Add or make changes..."})),[g]),F=(0,n.useCallback)((e=>{if(e.target===e.currentTarget){const t=V().E.findEditableWithStore(b);t&&t.handleClick(e)}}),[b]),K=S>=35;return(0,O.jsx)(I().Z,{debugName:"AiFollowUpInput",capture:!0,children:(0,O.jsxs)("div",{className:P().Wh_,style:K?y.multiLineInput:y.oneLineInput,onClick:F,children:[(0,O.jsx)("div",{style:y.textWrapper,children:(0,O.jsx)(M().Z,{inPageFind:oe,style:y.textContainer,store:b,disabled:m,disabledMentionTypes:te,placeholder:E,disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,disableUpDownArrows:!0,disableEnter:!C||!a||m,onEnter:t,pasteBehavior:"inline",onFocus:c,onBlur:A})}),(0,O.jsxs)("div",{style:y.buttonWrapper,children:[C||m?null:(0,O.jsx)(J,{value:B,onChange:L,onClickRetry:d,canRetry:l,variantName:"small"}),C&&!m?(0,O.jsx)(T().Z,{icon:k()._,onClick:t,isBlue:C,disabled:!C,ariaLabel:"submit-ai-prompt",style:y.button,iconStyle:y.icon}):null,m?(0,O.jsx)(T().Z,{icon:_().q,onClick:p,iconStyle:y.stopIcon,ariaLabel:"stop-ai-message",style:y.button}):null]})]})})}var ie=()=>o(661641);function re(e){let{text:t,styleName:o,animate:n}=e;const i=(0,h().yK)((e=>{const t=e.text.quaternary,o=e.text.primary,n={backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundColor:o,backgroundSize:"300% 100%",backgroundRepeat:"no-repeat",userSelect:"none",backgroundImage:`linear-gradient(90deg, ${o} 0%, var(--shimmer-text-faded-color) 50%, ${o} 100%)`,transition:"--shimmer-text-faded-color 0.25s ease-in-out"};return{animated:{...n,"--shimmer-text-faded-color":t},static:{...n,"--shimmer-text-faded-color":o}}}),[]);return(0,O.jsx)(ie().q,{styleName:o,children:(0,O.jsx)(g().E.div,{style:n?i.animated:i.static,animate:{backgroundPosition:["150% 0","-50% 0"]},transition:{ease:"linear",duration:3,repeat:1/0},children:t})})}const ae=(0,x().vU)({default:{id:"setupGenerator.loading.default",defaultMessage:"Designing database"},addingProperty:{id:"setupGenerator.loading.addingProperty",defaultMessage:"Adding {propertyName}"},addingView:{id:"setupGenerator.loading.addingView",defaultMessage:"Adding {viewName}"},addingPages:{id:"setupGenerator.loading.addingPages",defaultMessage:"Adding pages"}});function le(e){const{statusLabel:t}=e,o=(0,x().YB)();let n;switch(null==t?void 0:t.type){case"default":n=o.formatMessage(ae.default);break;case"addingProperty":n=o.formatMessage(ae.addingProperty,{propertyName:t.propertyName});break;case"addingView":n=o.formatMessage(ae.addingView,{viewName:t.viewName});break;case"addingPages":n=o.formatMessage(ae.addingPages);break;default:return null}return(0,O.jsx)(re,{styleName:"UITitle-22px/Semibold",text:n,animate:!0})}var se=()=>o(469203);const de=(0,x().vU)({featureTemplateRequired:{id:"featureTemplateRequired",defaultMessage:"This is required"}});function ce(e){let{template:t,isRequired:n,...i}=e;const r=n?o(527278).Z.formatMessage(de.featureTemplateRequired):void 0;return(0,O.jsx)(q().Z,{...i,disableTooltip:void 0===r,renderTooltip:()=>r})}var ue=()=>o(499819),pe=()=>o(281236),me=()=>o(938938),fe=o.n(o(369282)),ge=()=>o(647439),he=()=>o(328714),ye=()=>o(73898),ve=()=>o(265640),xe=()=>o(906651),be=()=>o(916095),we=()=>o(565630),Se=()=>o(384667),Ce=()=>o(269299),ke=()=>o(67961),_e=()=>o(566937),je=()=>o(275200),Te=()=>o(466970),Ie=()=>o(804097),Me=()=>o(965350),Pe=()=>o(473244),Re=()=>o(688293);o(749411),o(670560),o(228244);function Ve(e){let{normalizedSchema:t,collectionView:o,considerGroupByAsVisible:n=!1}=e;const i=function(e){let{collectionView:t,includeGroupByProperties:o=!1}=e;const n={},i=e=>{if(e)for(const t of e)n[t.property]||(n[t.property]=[]),n[t.property].push(t)},r=t.getType(),l=t.getFormatStore();switch(r){case"board":if(i(l.getKeyValue("board_properties")),o){const e=l.getKeyValue("board_columns_by");e&&i([{property:e.property,visible:!0}])}break;case"calendar":i(l.getKeyValue("calendar_properties"));break;case"gallery":i(l.getKeyValue("gallery_properties"));break;case"list":i(l.getKeyValue("list_properties"));break;case"timeline":i(l.getKeyValue("timeline_properties")),i(l.getKeyValue("timeline_table_properties"));break;case"table":i(l.getKeyValue("table_properties"));break;case"chart":case"chat":case"feed":case"page":case"form_editor":case"map":break;default:(0,a().t1)(r)}if(o){const e=l.getKeyValue("collection_group_by");e&&i([{property:e.property,visible:!0}])}return n}({collectionView:o,includeGroupByProperties:n}),r={visibleProperties:new Set,invisibleProperties:new Set};for(const a of Object.keys(t)){const e=i[a];(null==e?void 0:e.some((e=>e.visible)))??!1?r.visibleProperties.add(a):r.invisibleProperties.add(a)}return r}function Be(e){let{collectionContextStore:t}=e;const o=(0,r().VK)((()=>{var e;const o=t.collectionStore(),n=null===(e=t.collectionViewStore())||void 0===e?void 0:e.getModel();if(!o||!n)return[];const{invisibleProperties:i}=Ve({normalizedSchema:o.getSchema(),collectionView:n,considerGroupByAsVisible:!0});return Array.from(i)}),[t]),n=o.length,i=(0,h().yK)((e=>({container:{position:"fixed",bottom:40,right:40,color:e.text.primary,opacity:0===n?0:1,transition:0===n?"opacity 0s ease":"opacity 0.1s ease"},button:{backgroundColor:e.white}})),[n]);return(0,O.jsx)("div",{style:i.container,children:(0,O.jsx)(q().Z,{renderTooltip:()=>(0,O.jsx)(Le,{collectionContextStore:t,invisibleProperties:o}),render:e=>(0,O.jsx)(ve().D,{hovered:!0,disabled:!0,...e,style:i.button,children:(0,O.jsx)(ie().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,O.jsx)(x()._H,{id:"hiddenPropertiesIndicator.hiddenCount",defaultMessage:"{numHiddenProperties, plural, one {1 hidden property} other {# hidden properties}}",values:{numHiddenProperties:n}})})})})})}function Le(e){let{collectionContextStore:t,invisibleProperties:o}=e;const n=(0,r().VK)((()=>{var e;const n=(null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema())??{},i={};for(const t of o){var r;const e=null===(r=n[t])||void 0===r?void 0:r.name;e&&(i[t]=e)}return i}),[t,o]);return(0,O.jsx)("div",{children:o.flatMap((e=>{const t=n[e];return t?[(0,O.jsx)("div",{children:t},e)]:[]}))})}const Ae=n.memo(Be),Ee=3,Fe=32;function Ke(e){let{collectionTemplate:t,flowId:o}=e;const a=(0,i().O7)(),d=(0,Te().E)("packaging_property_visibility_label"),c=(0,n.useMemo)((()=>({isPreviewing:!0,location:"workflow_templates_onboarding",hideViewBlockSource:!0,hideTableAggregationRow:!0,flowId:o})),[o]),u=function(){const e=(0,i().O7)(),t=(0,Re().N)(Pe().i7,{canUndo:!0}),o=(0,n.useRef)(void 0),a=(0,r().Kw)(m().default);return(0,n.useEffect)((()=>{if(a.open&&a.collectionTemplate&&!o.current){const{performResult:{collectionStore:n,collectionViewBlockStore:i,collectionViewStore:r}}=Ce().createAndCommit({userAction:"workflowTemplateCustomizationOnboarding.previewCollection",environment:e,perform:o=>{const{collectionStore:n,collectionViewBlockStore:i,collectionViewStore:r}=(0,Me().l3)({environment:e,existingCollectionInfo:void 0,inMemoryRecordCache:t.cache,parentStore:a.parentStore.clone(t.cache),template:a.collectionTemplate,transaction:o,logger:new(pe().WorkflowTemplateLogger),disableExampleRows:!0});return{collectionViewBlockStore:i,collectionViewStore:r,collectionStore:n}},canUndo:!1});o.current={collectionStore:n,collectionViewBlockStore:i,collectionViewStore:r},m().default.setState({...a,collectionViewBlockStore:i})}}),[a,t,e]),o.current}(),[p,f]=(0,n.useState)(void 0),g=(0,r().VK)((()=>"gallery"===(null==p?void 0:p.getViewType())),[p]),y=(0,r().VK)((()=>u?function(e){let{collectionStore:t,collectionViewStore:o}=e;const n=t.getSchema(),i=o.getFormat().table_properties;return null==i?void 0:i.filter((e=>{let{property:t}=e;return t in n})).map((e=>{let{property:t}=e;return t}))}(u):void 0),[u]),v=(0,we().D9)(y);(0,n.useEffect)((()=>{!function(e){let{collectionContextStore:t,previousPropertyIds:o,propertyIds:n,environment:i}=e;const r=null==t?void 0:t.collectionViewStore(),a=t&&"table"===(null==r?void 0:r.getType())&&n&&o&&n!==o;if(!a)return;if(n.length===o.length)return;if(n.length<o.length){const e=o.findIndex((e=>!n.includes(e)));Oe({propertyId:0===e?n[0]:n[e-1],collectionContextStore:t,environment:i})}else{const e=n.filter((e=>!o.includes(e)));Oe({propertyId:e[e.length-1],collectionContextStore:t,environment:i})}}({collectionContextStore:p,previousPropertyIds:v,propertyIds:y,environment:a})}),[p,v,y,a]);const x=(0,n.useCallback)((e=>{if(p)return;if(f(e),!u)return;const{collectionViewBlockStore:o,collectionStore:n,collectionViewStore:i}=u,r=function(e){let{environment:t,collectionContextStore:o,collectionStore:n,collectionViewBlockStore:i,collectionViewStore:r,collectionTemplate:a}=e;const{performResult:l}=Ce().createAndCommit({userAction:"workflowTemplateCustomizationOnboarding.previewCollectionPages",environment:t,perform:e=>{var l;if(null!==(l=a.value.exampleRows)&&void 0!==l&&l.length)return(0,Me().Uo)({environment:t,transaction:e,collectionStore:n,collectionViewBlockStore:i,collectionViewStore:r,exampleRows:a.value.exampleRows,dependencyMap:a.dependencyMap??{}});for(let i=0;i<Ee;i++)Se().IW({environment:t,collectionContextStore:o,groupsPointer:[],insertAtIndex:0,shouldCoerce:!0,templateStore:o.defaultPageTemplateStore.state,transaction:e,from:{createBlock:"workflow_template"},inMemoryRecordCache:n.inMemoryRecordCache})},canUndo:!1});return l}({environment:a,collectionContextStore:e,collectionViewBlockStore:o,collectionStore:n,collectionViewStore:i,collectionTemplate:t});r&&m().default.setExamplePageStores(r)}),[a,u,t,p]),b=(0,h().yK)((e=>({container:{position:"relative",backgroundColor:e.contentBackground,paddingTop:Fe,overflowY:"auto",borderRadius:12,border:`1px solid ${e.stroke.primary}`},titleWrapper:{display:"flex",alignItems:"center",paddingLeft:Fe+8,margin:"8px 0"},titleText:{fontSize:24,fontWeight:700,lineHeight:"26px",whiteSpace:"pre-line",marginLeft:12,overflow:"initial"}})),[]);return t?(0,O.jsxs)(s().jX,{height:"fill",style:b.container,children:[(0,O.jsxs)("div",{style:b.titleWrapper,children:[(0,O.jsx)(ue().l,{template:t,size:28}),(0,O.jsx)(ke().Z,{style:b.titleText,children:t.value.targetCollection.name})]}),(0,O.jsx)(_e().q$,{value:c,children:u&&(0,O.jsx)(l().DZ,{store:u.collectionViewBlockStore,disabled:!0,forceLocalQueryCollection:!0,headerActionsBehavior:"hidden",overridePaddingLeft:Fe,overridePaddingRight:g?Fe:0,setCollectionContextStore:x})}),p&&d&&(0,O.jsx)(Ae,{collectionContextStore:p})]}):(0,O.jsx)(s().jX,{height:"fill",style:b.container})}function Oe(e){let{propertyId:t,collectionContextStore:o,environment:n}=e;const i=Ie().Z.findTableHeaderCell(o,t);if(!i)return;const r=i.getNode();if(!r)return;const a=(0,je().xH)(r);if(!a)return;const l=r.getBoundingClientRect(),s=a.getBoundingClientRect(),d=l.left-s.left,c=l.right-s.left,u=a.clientWidth,p=150;let m;c>u-p?m=c-u+p:d<p&&(m=d-p),m&&je().X5({element:a,environment:n,options:{left:a.scrollLeft+m,behavior:"smooth"}})}var We=()=>o(628370),Ne=()=>o(38883),Ze=()=>o(568017),De=()=>o(707513),ze=()=>o(246471);function Ue(e){let{recordTitles:t,boardByPropertyTemplate:o,optionNames:n,disableBoardColorColumns:i}=e;const r=(0,h().Fg)(),a=(0,h().yK)((e=>({container:{display:"flex",paddingTop:12,borderTop:`1px solid ${e.stroke.secondary}`},recordTitle:{display:"flex",alignItems:"center",color:e.mediumTextColor,minHeight:40,borderRadius:6,width:"100%",padding:"10px 12px 8px 8px",marginBottom:5,boxShadow:e.buttonBoxShadow,backgroundColor:e.calendarItemBackground,fontSize:14,fontWeight:De().Ue.medium,...De().Yu},recordColumn:{display:"flex",flexDirection:"column",marginTop:12},group:{width:"33%",marginRight:10,borderRadius:5,padding:5},statusSelectToken:{fontWeight:500,lineHeight:"normal",overflow:"hidden",paddingRight:6}})),[]);if(!o||!n)return null;const l=n.map((e=>{var t;return(null===(t=o.value.options)||void 0===t||null===(t=t.find((t=>t.value===e)))||void 0===t?void 0:t.color)??"gray"}));return(0,O.jsx)("div",{style:a.container,children:n.map(((e,o)=>{const{backgroundColor:n}=i?{}:(0,Ze().bw)(r,l[o]);return(0,O.jsxs)("div",{style:{...a.group,backgroundColor:n},children:[(0,O.jsx)("span",{style:a.statusSelectToken,children:(0,O.jsx)(ze().F,{value:e??"",color:l[o],format:Ne().lo.Medium,showRemoveButton:!1,isSingle:!0,groupColor:l[o]})}),0===o&&(0,O.jsx)("div",{style:a.recordColumn,children:t.map(((e,t)=>(0,O.jsx)("div",{style:a.recordTitle,children:e},t)))})]},o)}))})}const He=3,$e=3;function Ge(e){let{recordTitles:t}=e;const o=(0,h().yK)((e=>({container:{display:"flex",flexDirection:"column",paddingTop:12,borderTop:`1px solid ${e.stroke.secondary}`},datePlaceholder:{width:60,height:10,borderRadius:12,background:e.cardPressedBackground,marginBottom:16},calendarPreview:{display:"flex",minWidth:1600}})),[]);return(0,O.jsxs)("div",{style:o.container,children:[(0,O.jsx)("div",{style:o.datePlaceholder}),(0,O.jsx)("div",{style:o.calendarPreview,children:[...Array($e)].map(((e,o)=>(0,O.jsx)(Xe,{column:o,recordTitles:t},o)))})]})}function Xe(e){let{column:t,recordTitles:o}=e;const n=(0,h().yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:180},header:{width:30,height:6,borderRadius:12,background:e.cardPressedBackground,marginBottom:6}})),[]);return(0,O.jsxs)("div",{style:n.container,children:[(0,O.jsx)("div",{style:n.header}),[...Array(He)].map(((e,n)=>(0,O.jsx)(qe,{row:n,column:t,contents:Qe(n,t,o)},n)))]})}function qe(e){let{row:t,column:o,contents:n}=e;const i=(0,h().yK)((e=>({container:{width:"100%",height:180,borderTop:`1px solid ${e.stroke.secondary}`,borderBottom:t===He-1?`1px solid ${e.stroke.secondary}`:"none",borderLeft:`1px solid ${e.stroke.secondary}`,borderRight:o===$e-1?`1px solid ${e.stroke.secondary}`:"none",backgroundColor:0===o?e.surface.wash:void 0},header:{width:16,height:8,borderRadius:12,background:e.cardPressedBackground,marginBottom:6,position:"relative",top:6,left:160}})),[o,t]);return(0,O.jsxs)("div",{style:i.container,children:[(0,O.jsx)("div",{style:i.header}),null==n?void 0:n.map(((e,t)=>(0,O.jsx)(Ye,{content:e,itemNumber:t},t)))]})}function Ye(e){let{content:t,itemNumber:o}=e;const n=(0,h().yK)((e=>({rowItem:{position:"relative",paddingLeft:8,paddingRight:8,left:10,top:10+10*o,width:150,height:30,color:e.text.primary,backgroundColor:e.calendarItemBackground,borderRadius:6,fontSize:14,alignContent:"center",boxShadow:e.buttonBoxShadow,...De().Yu}})),[o]);return(0,O.jsx)("div",{style:n.rowItem,children:t})}function Qe(e,t,o){return 0===e&&1===t?o.slice(0,2):1===e&&1===t?[o[o.length-1]]:[]}var Je=()=>o(169352);function et(e){let{recordTitles:t}=e;const o=(0,h().yK)((e=>({icon:{width:20,height:20,color:e.mediumIconColor},recordTitle:{fontSize:14,...De().Yu},wrapper:{borderTop:`1px solid ${e.stroke.secondary}`}})),[]);return(0,O.jsx)(s().jX,{direction:"column",align:"top-left",gap:4,padding:"12px 0px",style:o.wrapper,children:t.map(((e,t)=>(0,O.jsxs)(s().jX,{direction:"row",align:"center-left",gap:4,padding:"0px 8px",children:[(0,Je().a)(o.icon),(0,O.jsx)("span",{style:o.recordTitle,children:e}),(0,O.jsx)(s().jX,{direction:"row",align:"center-right",children:(0,O.jsx)(ze().F,{value:"Not started",color:"gray",format:Ne().lo.Small,showRemoveButton:!1,isSingle:!0,groupColor:"gray"})})]},t)))})}o(731107);var tt=()=>o(714230),ot=()=>o(766933),nt=()=>o(661727),it=()=>o(523634),rt=()=>o(518242),at=()=>o(86048),lt=()=>o(472344),st=()=>o(965865),dt=()=>o(167777);function ct(){return(0,r().VK)((()=>function(){const e=m().default.state;if(!e.open)return!1;return!(0,p().vg)(e).includes("recordTitles")}()),[])}var ut=()=>o(406756);const pt=[{avatarSrc:tt().Z.images.workflowTemplates.previewAvatar1Png,name:(0,O.jsx)(x()._H,{defaultMessage:"Taylor Moore",id:"previewTableView.personProperty.name1"})},{avatarSrc:tt().Z.images.workflowTemplates.previewAvatar2Png,name:(0,O.jsx)(x()._H,{defaultMessage:"Emma Johnson",id:"previewTableView.personProperty.name2"})},{avatarSrc:tt().Z.images.workflowTemplates.previewAvatar3Png,name:(0,O.jsx)(x()._H,{defaultMessage:"James Smith",id:"previewTableView.personProperty.name3"})}];function mt(e){const t=(0,h().yK)((e=>({container:{display:"flex",alignItems:"center",width:"100%"},avatarWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,marginRight:6,boxSizing:"content-box",borderRadius:"100%",overflow:"hidden",outlineWidth:1,outlineStyle:"solid",outlineColor:e.stroke.secondary},avatarImage:{width:"100%",height:"100%",borderRadius:"100%"}})),[]),o=pt[e.index%pt.length];return(0,O.jsxs)("div",{style:t.container,children:[(0,O.jsx)("div",{style:t.avatarWrapper,children:(0,O.jsx)(rt().ZP,{src:o.avatarSrc,style:t.avatarImage})}),(0,O.jsx)(ut().X,{style:ft(e.index)})]})}function ft(e){const t=function(e){return 60+(2*(e+3)+43)%(e%5+2)*5}(e);return{width:`${t}%`,maxWidth:"80%"}}const gt=[30,45,35,40];function ht(e){let{index:t,offset:o}=e;return{width:gt[(t+o)%gt.length]}}const yt=[2,4,3];function vt(e){let{index:t}=e;const o=yt[t%yt.length],n=(0,h().yK)((e=>({container:{display:"flex",flexDirection:"row",gap:6},file:{width:22,height:22}})),[]);return(0,O.jsx)("div",{style:n.container,children:Array.from({length:o}).map(((e,t)=>(0,O.jsx)(ut().X,{style:n.file},t)))})}function xt(e){let{propertyId:t,propertySchema:o,columnIndex:n}=e;switch(o.type){case"file":return(0,dt().HP)().map(((e,o)=>(0,O.jsx)(vt,{index:o},`file-${t}-${o}`)));case"number":return(0,dt().HP)().map(((e,o)=>(0,O.jsx)(ut().X,{style:ht({index:o,offset:n})},`number-${t}-${o}`)));case"text":case"title":return(0,dt().HP)().map(((e,o)=>(0,O.jsx)(ut().X,{style:ft(o)},`text-skeleton-${t}-${o}`)));case"select":case"multi_select":return(0,dt().m6)(o).map(((e,o)=>(0,O.jsx)(ze().a,{value:e.value,color:e.color,format:Ne().lo.Medium,showRemoveButton:!1,isSingle:!0},`${t}-${o}`)));case"status":return(0,dt().m6)(o).map(((e,o)=>(0,O.jsx)(ze().F,{value:e.value,color:e.color,format:Ne().lo.Medium,showRemoveButton:!1,isSingle:!0,groupColor:e.color},`${t}-${o}`)));case"created_time":case"last_edited_time":case"last_visited_time":case"date":return(0,dt()._y)(o).map(((e,o)=>(0,O.jsx)(ut().X,{style:{width:"70%",maxWidth:"70%"}},`date-skeleton-${t}-${o}`)));case"created_by":case"last_edited_by":case"person":return(0,dt().HP)().map(((e,o)=>(0,O.jsx)(mt,{index:o},`${t}-${o}`)));case"checkbox":return(0,dt().Qu)().map(((e,o)=>(0,O.jsx)(it().n,{checked:e,disabled:!0},`${t}-${o}`)));case"formula":return"percent"===o.number_format?(0,dt().HP)().map(((e,o)=>(0,O.jsx)(wt,{index:o},`progress-bar-${t}-${o}`))):(0,dt().HP)().map(((e,o)=>(0,O.jsx)(ut().X,{style:ht({index:o,offset:n})},`formula-${t}-${o}`)));default:return[]}}const bt=[15,90,55,0];function wt(e){let{index:t}=e;const o=bt[t%bt.length],n=(0,h().Fg)(),{filledColor:i,gapColor:r,unfilledColor:a}=(0,lt().O)({theme:n,color:"green"});return(0,O.jsx)(at().k,{percentage:o,filledColor:i,gapColor:r,unfilledColor:a,style:{width:"100%"}})}const St=250,Ct=150,kt=10,_t={duration:.2,ease:"easeInOut",backgroundColor:{duration:.8}};function jt(e){let{recordTitles:t,userCustomizations:o}=e;const[i,...a]=(0,r().VK)((()=>(0,dt().G$)(o)),[o]),l=(0,we().D9)(a),d=(0,n.useMemo)((()=>{if(l&&!(a.length>=l.length))return l.findIndex((e=>!a.includes(e)))}),[a,l]),c=(0,S().w)(200),u=ct(),p=St+kt+a.reduce(((e,t)=>{var o;return e+((null===(o=t.tablePropertyFormat)||void 0===o?void 0:o.width)??Ct)}),0);return(0,O.jsx)(s().jX,{direction:"row",height:"fill",style:{minWidth:p},children:(0,O.jsxs)(f().M,{children:[i&&(0,O.jsx)(Tt,{shouldAnimate:c,propertySchema:i.value,isLastColumn:!1,rowContent:u?xt({propertyId:dt().Pc.templateId,propertySchema:dt().Pc.value,columnIndex:0}):t,width:St},i.templateId),a.map(((e,t)=>{var o;const n=e.value,i=e.templateId;return(0,O.jsx)(Tt,{shouldAnimate:c,forceScrollTo:void 0!==d&&t===d-1,propertySchema:n,isLastColumn:t===a.length-1,rowContent:u?xt({propertyId:i,propertySchema:n,columnIndex:t}):[],width:(null===(o=e.tablePropertyFormat)||void 0===o?void 0:o.width)??Ct},i)}))]})})}function Tt(e){const{isLastColumn:t,propertySchema:o,rowContent:r,width:a,shouldAnimate:l,forceScrollTo:s}=e,d=(0,i().O7)(),c=(0,h().Fg)(),u=(0,n.useRef)(null),p=(0,n.useRef)(l),[m,f]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const e=setTimeout((()=>{u.current&&(p.current||s)&&(0,je().n5)({element:u.current,environment:d,behavior:"smooth",additionalPadding:{right:a}})}),200);return()=>clearTimeout(e)}),[u,a,p,s,d]);const y=(0,h().yK)((e=>({column:{flex:"0 0 auto",overflow:"hidden",background:e.white,minWidth:l?void 0:a,position:"relative"},inner:{position:"absolute",left:0,minWidth:a,height:"100%"},headerCell:{color:e.text.secondary,fontWeight:400,textWrap:"nowrap",padding:"8px 32px 8px 8px",borderBottom:`1px solid ${e.stroke.secondary}`,borderRight:t?void 0:`1px solid ${e.stroke.secondary}`,borderTop:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",fontSize:14,height:32},icon:{marginRight:6},rowCell:{height:32,borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",overflow:"hidden",fontSize:14,whiteSpace:"pre",textOverflow:"ellipsis",padding:"6px 8px"},rowWrapper:{borderRight:t?void 0:`1px solid ${e.stroke.secondary}`}})),[t,a,l]),v=(r.length>0?r:(0,dt().HP)().map((()=>""))).map(((e,t)=>(0,O.jsx)("div",{style:y.rowCell,children:e},t))),x=(0,n.useMemo)((()=>{const e=(0,nt().Fq)(c.fill.uiBlue,.1),t=(0,nt().Fq)(e,0),o=(null==m?void 0:m.width)??a;return l?{initial:{width:0,opacity:0,backgroundColor:e},animate:{width:o,backgroundColor:t,opacity:1},exit:{width:0,backgroundColor:t,opacity:0}}:{initial:{width:o,backgroundColor:t},animate:void 0,exit:{width:0,backgroundColor:t}}}),[l,m,a,c]);return(0,O.jsx)(g().E.div,{ref:u,layoutId:null==o?void 0:o.name,style:y.column,initial:x.initial,animate:x.animate,exit:x.exit,transition:_t,children:(0,O.jsx)(st().n4,{onSizeChange:f,children:(0,O.jsxs)("div",{style:y.inner,children:[(0,O.jsx)("div",{style:y.headerCell,children:o?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ot().ZP,{icon:o.icon,size:16,theme:c,type:o.type,style:y.icon}),o.name,"ai_inference"in o&&(0,O.jsx)(b().Z,{})]}):null}),(0,O.jsx)("div",{style:y.rowWrapper,children:v})]})})})}const It=40;function Mt(e){let{recordTitles:t}=e;const o=(0,h().yK)((e=>({container:{display:"flex",flexDirection:"column",paddingTop:12,borderTop:`1px solid ${e.stroke.secondary}`},datePlaceholder:{width:60,height:10,borderRadius:12,background:e.cardPressedBackground,marginBottom:16},dateTickerContainer:{display:"flex",width:1600},dateTicker:{background:e.cardPressedBackground,height:6,width:2,borderRadius:1},timelineBackground:{marginTop:6,marginLeft:-20,minHeight:1e3,minWidth:1600,backgroundColor:e.timelineBackground,display:"flex",position:"relative"}})),[]);return(0,O.jsxs)("div",{style:o.container,children:[(0,O.jsx)("div",{style:o.datePlaceholder}),(0,O.jsx)("div",{style:o.dateTickerContainer,children:[...Array(It)].map(((e,t)=>(0,O.jsx)("div",{style:{...o.dateTicker,...0!==t&&{marginLeft:14}}},t)))}),(0,O.jsxs)("div",{style:o.timelineBackground,children:[(0,O.jsx)(Pt,{left:78}),(0,O.jsx)(Pt,{left:256}),t.map(((e,t)=>(0,O.jsx)(Rt,{row:t,content:e},t)))]})]})}function Pt(e){let{left:t}=e;const o=(0,h().yK)((e=>({darkerColumn:{position:"relative",minHeight:1e3,width:72,backgroundColor:e.onboardingPreviewBackground,left:t}})),[t]);return(0,O.jsx)("div",{style:o.darkerColumn})}function Rt(e){let{row:t,content:o}=e;const n=(0,h().yK)((e=>({rowItem:{position:"absolute",left:50+120*t,top:20+42*t,paddingLeft:8,paddingRight:8,width:216,height:30,color:e.text.primary,backgroundColor:e.calendarItemBackground,borderRadius:6,fontSize:14,alignContent:"center",boxShadow:e.buttonBoxShadow,...De().Yu}})),[t]);return(0,O.jsx)("div",{style:n.rowItem,children:o})}function Vt(e){let{userCustomizations:t,previewCollectionViewTemplateId:o}=e;const n=(0,h().yK)((e=>({placeholder:{color:e.mediumTextColor}})),[]),i=(0,O.jsx)("span",{style:n.placeholder,children:(0,O.jsx)(x()._H,{id:"WorkflowTemplatesOnboardingModal.recordTitles.placeholder",defaultMessage:"Untitled"})}),{recordTitles:a}=t,l=Bt(a,i),s=o,d=(0,r().VK)((()=>s?pe().globalWorkflowTemplates.fromIdOfType({templateId:s,type:"collection_view"}):void 0),[s]),c=(null==d?void 0:d.value.type)||"table",u=(0,r().VK)((()=>{var e,o;switch(null==d?void 0:d.value.type){case"board":const n=(0,p().oL)(d);return(0,O.jsx)(Ue,{recordTitles:l,boardByPropertyTemplate:n,optionNames:null===(e=d.value.format)||void 0===e||null===(e=e.board_columns)||void 0===e?void 0:e.map((e=>{const{value:t}=e;if(!t.value)return"";if("status"===t.type)return"by_group"===t.value.type?t.value.group:t.value.option;if("select"===t.type||"multi_select"===t.type)return t.value;throw new Error(`Group value type ${t.type} not yet supported in preview`)})),disableBoardColorColumns:null===(o=d.value.format)||void 0===o||null===(o=o.board_columns_by)||void 0===o?void 0:o.disableBoardColorColumns});case"timeline":return(0,O.jsx)(Mt,{recordTitles:l});case"calendar":return(0,O.jsx)(Ge,{recordTitles:l});case"list":return(0,O.jsx)(et,{recordTitles:l});default:return(0,O.jsx)(jt,{recordTitles:Bt(a,""),userCustomizations:t})}}),[d,l,a,t]);return(0,O.jsx)(We().Z,{config:{duration:200},animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:{flex:1,display:"flex",flexDirection:"column"},children:u},c)}function Bt(e,t){return e.map((e=>e||t))}var Lt=()=>o(539245),At=()=>o(383694);function Et(e){let{icon:t,title:o,indentPixels:n}=e;const i=(0,h().yK)((e=>({sidebarRow:{height:30,paddingTop:4,paddingBottom:4,paddingLeft:8+(n??0),paddingRight:8,display:"flex",alignItems:"center",justifyContent:"flex-start"},sidebarIcon:{},sidebarTitle:{width:"100%",marginLeft:8,fontSize:14,fontWeight:De().Ue.medium,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})),[n]);return(0,O.jsxs)("div",{style:i.sidebarRow,children:[(0,O.jsx)("div",{style:i.sidebarIcon,children:t}),(0,O.jsx)("div",{style:i.sidebarTitle,children:o})]})}const Ft=180;function Kt(e){let{style:t,children:o,parentStore:n,collectionTemplate:i,userCustomizations:r,previewCollectionViewTemplateId:a}=e;const l=!1,s=(0,h().yK)((e=>({wrapper:{...t,display:"flex",flexDirection:"column",flex:1,overflow:"hidden",zIndex:2,position:"relative",height:"100%"},preview:{height:"100%",display:"flex",flexDirection:"column",flex:1,border:`1px solid ${e.stroke.primary}`,borderRadius:12,backgroundColor:e.surface.wash},sidebar:{width:Ft,height:400,backgroundColor:e.surface.wash,marginTop:16,padding:8,color:e.text.secondary},content:{padding:"32px 0 0 32px",display:"flex",flexDirection:"column",flex:1,height:"100%",backgroundColor:e.surface.elevated,borderRadius:12,overflowX:"scroll",overflowY:"hidden",minWidth:void 0},peopleLookingAtCollection:{position:"absolute",height:100,width:149,left:240,top:8,marginTop:-100},previewRow:{width:20,height:20,borderRadius:4,background:e.icon.quaternary,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,l]);let d;switch(n.table){case"team":d=(0,O.jsx)(Ot,{teamStore:n});break;case"block":case"space":d=null}return(0,O.jsx)("div",{style:s.wrapper,children:(0,O.jsxs)("div",{style:s.preview,children:[l,(0,O.jsxs)("div",{style:s.content,children:[(0,O.jsx)(Wt,{userCustomizations:r,collectionTemplate:i,previewCollectionViewTemplateId:a}),o]})]})})}function Ot(e){let{teamStore:t}=e;const o=(0,r().VK)((()=>t.getName()),[t]);return(0,O.jsx)(Et,{icon:(0,O.jsx)(At().p,{size:20,store:t,disabled:!0}),title:o})}function Wt(e){let{userCustomizations:t,collectionTemplate:o,previewCollectionViewTemplateId:i}=e;const a=(0,h().yK)((e=>({headerWrapper:{position:"sticky",left:0,marginBottom:-1.5},titleWrapper:{display:"flex",alignItems:"center",paddingLeft:8,marginTop:8,marginBottom:8},titleText:{fontSize:24,fontWeight:700,lineHeight:"26px",whiteSpace:"pre-line",marginLeft:12,overflow:"initial"},icon:{height:16,width:16,display:"inline-block"},tabTitle:{marginLeft:4,fontSize:14,fontWeight:500}})),[]),l=n.useMemo((()=>t.featureTemplateSelections.filter((e=>"collection_view"===e.template.type&&e.selected)).map((e=>e.template.templateId))),[t.featureTemplateSelections]),s=(0,r().VK)((()=>pe().globalWorkflowTemplates.allOfType({templateIds:l,type:"collection_view"})),[l]),d=(0,r().VK)((()=>{const e=i,t=s.findIndex((t=>t.templateId===e));return-1===t?0:t}),[i,s]);return(0,O.jsxs)("div",{style:a.headerWrapper,children:[(0,O.jsxs)("div",{style:a.titleWrapper,children:[(0,O.jsx)(ue().l,{template:o,size:28}),(0,O.jsx)(ke().Z,{style:a.titleText,children:o.value.targetCollection.name})]}),(0,O.jsx)(Lt().ZP,{style:{paddingLeft:0,paddingRight:0,boxShadow:"none"},tabBorderStyle:{left:0,right:0},tabs:s.map(((e,t)=>(0,O.jsx)(Nt,{collectionViewTemplate:e,index:t,selectedIndex:d},t))),selectedIndex:d,onChange:()=>{},readOnly:!0})]})}function Nt(e){let{collectionViewTemplate:t,index:o,selectedIndex:n}=e;const i=o===n,r=(0,h().yK)((e=>({tabContainer:{display:"flex",alignItems:"center"},tabTitle:{marginLeft:4,fontSize:14,fontWeight:500},icon:{fill:i?e.regularIconColor:e.lightIconColor}})),[i]);return(0,O.jsxs)("span",{style:r.tabContainer,children:[(0,O.jsx)(ue().l,{template:t,iconStyle:r.icon}),(0,O.jsx)("span",{style:r.tabTitle,children:t.value.name})]})}function Zt(e){const{sidebar:t,cornerButton:o,preview:n}=e;return(0,O.jsxs)(O.Fragment,{children:[o,(0,O.jsxs)(s().jX,{direction:"row",height:"fill",padding:24,gap:24,style:{minHeight:0},children:[t?(0,O.jsx)(s().jX,{width:320,height:"fill",padding:"60px 0 0 0",gap:25,style:{flexShrink:0},children:t}):null,n]})]})}function Dt(e){let{children:t}=e;const o=(0,h().yK)((()=>({sidebarFooter:{flexShrink:0}})),[]),n=(0,r().VK)((()=>m().default.state),[]),i=(0,r().VK)((()=>(0,u().SV)()),[]);if(!n.open||!n.collectionTemplate)return null;const a=i?(0,O.jsx)(Ke,{collectionTemplate:n.collectionTemplate,flowId:n.flowId}):(0,O.jsx)(Kt,{...(0,p().lq)(n),parentStore:n.parentStore,children:(0,O.jsx)(Vt,{userCustomizations:n.userCustomizations,previewCollectionViewTemplateId:n.previewCollectionViewTemplateId})});return(0,O.jsx)(Zt,{sidebar:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s().jX,{height:"fill",padding:2,children:t}),(0,O.jsx)(s().jX,{style:o.sidebarFooter,children:(0,O.jsx)(Ut,{modalState:n})})]}),cornerButton:(0,O.jsx)(qt,{modalState:n}),preview:a})}const zt=!1;function Ut(e){let{modalState:t}=e;const o=(0,x().YB)(),{isOnFirstModalStep:n,isOnLastModalStep:i}=(0,r().VK)((()=>({isOnFirstModalStep:!(0,p()._u)(t),isOnLastModalStep:!(0,p().Ds)(t)})),[t]),a=(0,r().VK)((()=>{var e;return!!t.open&&(null===(e=t.setupGenerator)||void 0===e?void 0:e.store.state.isBusy)}),[t]);if(!t.collectionTemplate)return null;const l=o.formatMessage({id:"workflowTemplatesOnboardingModalStep.getStarted",defaultMessage:"Get started"}),s=n&&i;return i?(0,O.jsx)(Gt,{label:s?l:(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModalStep.done",defaultMessage:"Done"})}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ht,{disabled:t.isSaving||t.isFollowUpInputFocused||a,modalState:t,label:n?l:o.formatMessage({id:"workflowTemplatesOnboardingModalStep.continue",defaultMessage:"Continue"})}),zt&&!s&&(0,O.jsx)($t,{})]})}function Ht(e){let{modalState:t,label:o,isLoading:n,disabled:r,onClick:a}=e;const l=(0,h().yK)((()=>({button:{padding:10,width:"100%",height:32,borderRadius:8}})),[]),s=(0,i().O7)();return t.collectionTemplate?(0,O.jsx)(xe().Z,{style:l.button,isLoading:n,disabled:r,onClick:async()=>{m().default.update((e=>({...e,isSaving:!0})));const e=await(null==a?void 0:a());if(m().default.update((e=>({...e,isSaving:!1}))),!1===e)return;const o=(0,p().J3)(t);o>=0&&(m().default.update((e=>({...e,currentStepIndex:o}))),(0,c().j)({environment:s,event:{eventName:"workflow_template_onboarding_next_step",eventProperties:{next_step:(0,p().vg)(t)[o],step:(0,p().IA)(t),...(0,p().px)(t)}}}))},children:o}):null}function $t(){const e=(0,i().O7)(),t=(0,r().VK)((()=>m().default.state),[]);return fe()(t.open,"Modal should always be open for this to render."),(0,O.jsx)(ve().D,{isGray:!0,style:{height:32,borderRadius:8,justifyContent:"center",marginTop:8},isLoading:t.isSaving,disabled:t.isSaving,onClick:()=>(0,me().createCollectionTemplateFromModalState)({environment:e,modalState:t}),children:(0,O.jsx)("span",{children:"Customize later"})})}function Gt(e){const{label:t}=e,o=(0,i().O7)(),a=(0,r().Kw)(m().default);fe()(a.open,"Modal should always be open for this to render.");const l=(0,r().VK)((()=>{var e;return null===(e=a.setupGenerator)||void 0===e?void 0:e.store.state.isBusy}),[a]),s=(0,n.useCallback)((()=>{(0,me().createCollectionTemplateFromModalState)({environment:o,modalState:a})}),[o,a]);return(0,O.jsx)(xe().Z,{style:{height:32,borderRadius:8},isLoading:a.isSaving,disabled:a.isSaving||a.isFollowUpInputFocused||l,onClick:s,children:t})}function Xt(e){let{title:t,caption:o}=e;const n=(0,h().yK)((e=>({assistantFace:{borderRadius:"100%",width:(0,ye().O)("medium"),boxShadow:e.shadowSM,marginBottom:14},title:{whiteSpace:"pre-line",hangingPunctuation:"first",textWrap:"balance"}})),[]);return(0,O.jsx)("div",{style:{flexShrink:0},children:(0,O.jsxs)(s().jX,{gap:4,children:[(0,O.jsx)(ie().q,{styleName:"UITitle-22px/Semibold",customStyles:n.title,children:t??(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModalStep.customize",defaultMessage:"Customize"})}),o?(0,O.jsx)(ie().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:o}):null]})})}function qt(e){const{modalState:t}=e;return 0===t.currentStepIndex?(0,O.jsx)(Qt,{}):(0,O.jsx)(Jt,{modalState:t})}function Yt(e){const{iconFn:t,onClick:o,style:n}=e,i=(0,h().yK)((e=>({button:{position:"absolute",top:20,left:20,zIndex:1,height:26,paddingLeft:5,paddingRight:5,...n},icon:{width:16,height:16,fill:e.icon.secondary}})),[n]);return(0,O.jsx)(ve().D,{onClick:o,style:i.button,children:t(i.icon)})}function Qt(){const e=(0,n.useContext)(be().gv);return(0,O.jsx)(Yt,{iconFn:he().U,onClick:()=>null==e?void 0:e()})}function Jt(e){const{modalState:t,style:o}=e,r=(0,i().O7)(),a=(0,n.useCallback)((()=>{const e=(0,p().AQ)(t);e>=0&&m().default.setState({...t,currentStepIndex:e});var o;"setupGenerator"===(0,p().vg)(t)[e]&&(null==t||null===(o=t.setupGenerator)||void 0===o||o.discardAllSetups());(0,c().j)({environment:r,event:{eventName:"workflow_template_onboarding_previous_step",eventProperties:{previous_step:(0,p().vg)(t)[e],step:(0,p().IA)(t),...(0,p().px)(t)}}})}),[r,t]);return t.collectionTemplate?(0,O.jsx)(Yt,{style:o,iconFn:ge().W,onClick:a}):null}function eo(e){let{children:t,isSelected:o,disabled:n,onClick:i,tooltipEvents:r,style:a}=e;const l=(0,h().yK)((e=>({button:{fontSize:14,paddingLeft:12,paddingRight:12,borderRadius:24,color:e.text.primary,boxShadow:`0 0 0 1px ${e.stroke.primary}`,...o&&{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.buttonBackground},...a},buttonHovered:{...o?{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.outlineBlueButtonHoveredBackground}:{boxShadow:`0 0 0 1px ${e.stroke.input}`,background:e.buttonHoveredBackground}}})),[o,a]);return(0,O.jsx)(ve().D,{...r,style:l.button,disabled:n,disabledFeedback:!0,onClick:i,hoveredStyle:l.buttonHovered,children:t})}function to(){const e=(0,r().Kw)(m().default),t=(0,C().r)(),o=null==t?void 0:t.id,i=(0,h().yK)((()=>({grid:{flex:"1 0 0",display:"grid",gridTemplateRows:"1fr auto",position:"relative",maxHeight:"100%",overflowY:"auto"},features:{},feedbackInput:{display:"flex",flexDirection:"column",minHeight:30,maxHeight:120,flexShrink:0}})),[]),a=(0,r().VK)((()=>{if(e.open)return e.setupGenerator}),[e]),l=(0,n.useCallback)((e=>{!(0,v().PgY)(e)?(0,me().setFollowUpInputFocused)(!0):(0,me().setFollowUpInputFocused)(!1),null==a||a.setPrompt(e)}),[a]),d=(0,r().VK)((()=>{var e;return null==a||null===(e=a.store)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.feedbackArgs}),[a]),c=(0,r().VK)((()=>(null==a?void 0:a.store.state.isBusy)??!1),[a]),u=(0,r().VK)((()=>{var e;return c?null==a||null===(e=a.store.state)||void 0===e?void 0:e.progress:void 0}),[a,c]),f=(0,n.useCallback)((()=>{(0,me().retryAiSetup)()}),[]),g=(0,n.useCallback)((()=>{null==a||a.submitPrompt({from:"follow-up"})}),[a]),y=(0,r().VK)((()=>null==a?void 0:a.store.state.prompt),[a]),x=(0,n.useCallback)((()=>{null==a||a.stopGenerating()}),[a]),b=(0,r().VK)((()=>{var e;return a?(null===(e=a.store.state.transcriptTree)||void 0===e||null===(e=e.toNodes())||void 0===e?void 0:e.filter((e=>"setup"===e.value.type)))??[]:[]}),[a]),w=(0,r().VK)((()=>b.length<5),[b]),S=(0,r().VK)((()=>b.length>=2),[b]);return e.open&&o&&e.collectionTemplate?(0,O.jsxs)(s().jX,{direction:"column",height:"fill",gap:10,children:[(0,O.jsx)(oo,{collectionName:e.collectionTemplate.value.targetCollection.name,setupGeneratorProgress:u}),(0,O.jsx)("div",{style:i.grid,children:(0,O.jsx)(co,{contentStyle:{padding:5},children:(0,O.jsx)("div",{style:i.features,children:(0,O.jsx)(no,{featureTemplateSelections:e.userCustomizations.featureTemplateSelections,isSetupGeneratorBusy:c,updatePreviewCollectionViewTemplateId:me().setPreviewCollectionViewTemplateId,...(0,p().lq)(e)})})})}),d?(0,O.jsx)("div",{style:i.feedbackInput,children:w?(0,O.jsx)(ne,{canPressEnter:!0,canRetry:S,onClickRetry:f,onSubmit:g,onClickStop:x,value:y,onChange:l,feedbackArgs:d,isBusy:c}):null}):null]}):null}function oo(e){const{collectionName:t,setupGeneratorProgress:o}=e;return o?(0,O.jsx)(le,{statusLabel:o.statusLabel}):(0,O.jsx)(Xt,{title:(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModal.customizeCollection",defaultMessage:"Customize {collectionName}",values:{collectionName:t}}),caption:(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModal.selectFeatures",defaultMessage:"Select features to turn on or off"})})}function no(e){let{featureTemplateSelections:t,updatePreviewCollectionViewTemplateId:o,isSetupGeneratorBusy:i,...a}=e;const{collectionTemplate:l,previewCollectionViewTemplateId:s}=a,d=(0,r().VK)((()=>(0,p().se)(l)),[l]),c=(0,n.useMemo)((()=>(0,p().Uy)({collectionViewTemplates:d,featureTemplateSelections:t})),[d,t]);return(0,n.useEffect)((()=>{const e=s?pe().globalWorkflowTemplates.fromIdOfType({templateId:s,type:"collection_view"}):void 0;if("table"===(null==e?void 0:e.value.type))return;const t=new Set(a.userCustomizations.featureTemplateSelections.filter((e=>e.selected)).map((e=>e.template.templateId)));for(const n of d)if("table"===n.value.type&&t.has(n.templateId))return void o(n.templateId)})),(0,O.jsx)(io,{featureTemplateSelections:c,templateOnboardingState:a,isLoading:i})}function io(e){const t=(0,i().O7)(),{isLoading:o,featureTemplateSelections:n,templateOnboardingState:r}=e,a=(0,h().yK)((()=>({sectionHeader:{fontWeight:600,marginBottom:6},pillsSection:{display:"flex",flexWrap:"wrap",gap:12,isolation:"isolate"}})),[]),l=(0,S().w)(1e3);return(0,O.jsx)("div",{style:a.pillsSection,children:(0,O.jsx)(f().M,{mode:"popLayout",children:n.map(((e,i)=>(0,O.jsx)(ro,{index:i,featureTemplateSelectionsToShow:n,featureSelection:e,isRequired:!1,isLoading:o,shouldAnimate:l,toggleFeatureTemplateSelection:e=>(0,me().toggleFeatureSelectionInPreview)({template:e,environment:t}),...r},i)))})})}const ro=(0,n.forwardRef)((function(e,t){const{featureTemplateSelectionsToShow:o,featureSelection:n,isRequired:r,isLoading:a,toggleFeatureTemplateSelection:l,index:s,shouldAnimate:d,...u}=e,m=(0,i().O7)(),f=n.template;return(0,O.jsx)(ce,{template:f,alignment:Y().Alignment.Start,isRequired:r,render:e=>(0,O.jsx)(so,{ref:t,template:f,index:s,isSelected:n.selected,tooltipEvents:e,disabled:r,isLoading:a,shouldAnimate:d,onClick:()=>{(0,c().j)({environment:m,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:n.selected?"deselecting":"selecting",feature_template_id:f.templateId,feature_template_type:f.type,previously_selected_feature_template_ids:o.filter((e=>e.selected)).map((e=>e.template.templateId)),step:"features",...(0,p().px)(u)}}}),l(f)}})})})),ao={type:"spring",damping:25,stiffness:250},lo={...ao,delay:.1},so=(0,n.forwardRef)((function(e,t){const{template:o,isSelected:n,isLoading:i,disabled:r,onClick:a,tooltipEvents:l,index:s,shouldAnimate:d}=e,c=(0,h().yK)((e=>({icon:{marginRight:6,fill:n?e.text.uiBluePrimary:e.mediumIconColor},overflowTooltip:{maxWidth:250},selectButton:{maxWidth:"100%"},wrapper:{background:e.surface.wash,borderRadius:24,position:"relative",maxWidth:"100%",willChange:"transform",zIndex:void 0!==s?100-s:void 0},shimmerArea:{pointerEvents:"none"},shimmer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:24,boxShadow:`0 0 0 1px ${e.stroke.secondary}`}})),[n,s]);return(0,O.jsxs)(g().E.div,{ref:t,style:c.wrapper,layout:!0,transition:ao,initial:!!d&&{x:-50,opacity:.5},animate:{x:0,opacity:1},exit:{scale:.5,opacity:0},children:[(0,O.jsx)(g().E.div,{initial:!!d&&{opacity:0},animate:{opacity:i?0:1},transition:lo,children:(0,O.jsxs)(eo,{tooltipEvents:l,disabled:r,isSelected:n,onClick:a,style:c.selectButton,children:[(0,O.jsx)(ue().l,{iconStyle:c.icon,template:o}),(0,O.jsx)(se().s,{tooltipStyle:c.overflowTooltip,placement:Y().Placement.Right,children:(0,pe().getWorkflowTemplateName)(o)}),"ai_inference"in o.value&&(0,O.jsx)(b().Z,{})]})}),(0,O.jsx)(g().E.div,{initial:!1,animate:{opacity:i?1:0},transition:lo,style:i?{}:c.shimmerArea,children:(0,O.jsx)(w().Z,{style:c.shimmer})})]})}));function co(e){let{children:t,fadeHeight:o=30,contentStyle:i={}}=e;const r=(0,n.useRef)(null),[a,l]=(0,n.useState)(!1),[s,d]=(0,n.useState)(!1),c=(0,h().yK)((e=>({wrapper:{position:"relative"},content:{height:"100%",padding:2,overflowY:"auto",...i},fadeTop:{position:"absolute",top:0,left:0,right:0,height:o,background:`linear-gradient(to bottom, ${e.surface.wash}, transparent)`,pointerEvents:"none",opacity:a?1:0,willChange:"opacity",transition:"opacity 0.3s"},fadeBottom:{position:"absolute",bottom:0,left:0,right:0,height:o,background:`linear-gradient(to top, ${e.surface.wash}, transparent)`,pointerEvents:"none",opacity:s?1:0,willChange:"opacity",transition:"opacity 0.3s"}})),[o,a,s,i]),u=(0,n.useCallback)((()=>{if(!r.current)return;const{scrollTop:e,scrollHeight:t,clientHeight:o}=r.current;l(e>0),d(e<t-o-1)}),[r]);return(0,n.useEffect)((()=>{const e=r.current;if(e)return e.addEventListener("scroll",u),window.addEventListener("resize",u),u(),()=>{e.removeEventListener("scroll",u),window.removeEventListener("resize",u)}}),[u,r]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{ref:r,style:c.content,children:t}),(0,O.jsx)("div",{style:c.fadeTop}),(0,O.jsx)("div",{style:c.fadeBottom})]})}var uo=()=>o(667067),po=()=>o(842631),mo=()=>o(943620),fo=()=>o(384241),go=()=>o(852465),ho=()=>o(641506);function yo(){const e=(0,r().Kw)(m().default);if(!e.open||!e.collectionTemplate)return null;const{collectionTemplate:t,relationInfos:o}=e,n=t.value.targetCollection.name;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Xt,{title:(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModal.welcome",defaultMessage:"Welcome to {collectionName}",values:{collectionName:n}}),caption:(0,O.jsx)(xo,{modalState:e})}),(0,O.jsx)(vo,{collectionName:n,templateDescription:t.description,relationInfos:o})]})}function vo(e){let{collectionName:t,templateDescription:o,relationInfos:n}=e;const i=(0,h().yK)((e=>({container:{display:"flex",flexDirection:"column",marginBottom:24},cardButtonBase:{cursor:"default",fontSize:14,padding:"10px 10px 10px 14px",width:"100%",borderRadius:10,borderStyle:"solid",transition:"border-color 0.3s, box-shadow 0.3s",display:"grid",gridTemplateColumns:"28px auto 16px",background:e.surface.elevated},cardButtonSelected:(0,ho().x6)({width:2,color:e.blueColor}),titleContainer:{display:"flex",flexDirection:"row",alignItems:"center"},title:{fontWeight:De().Ue.semibold,flex:1,marginLeft:8},descriptionRow:{marginLeft:23},plusIcon:{width:16,height:16},relatedCollectionInfo:{fontWeight:De().Ue.semibold,color:e.accentColors.uiBlue[600],marginLeft:23}})),[]),a=(0,po().A)(i.plusIcon),l=(0,r().VK)((()=>function(e){return e.map((e=>(0,v().QaF)(e.collectionStore.getName())))}(n)),[n]),s=new Intl.ListFormat("en",{style:"long",type:"conjunction"});return(0,O.jsxs)("div",{style:{...i.cardButtonBase,...i.cardButtonSelected,...i.container},children:[(0,O.jsxs)("div",{style:i.titleContainer,children:[a,(0,O.jsx)(ke().Z,{style:i.title,children:`Add ${t}`})]}),o&&(0,O.jsx)(ke().Z,{isMultiline:!0,isSecondaryColor:!0,style:i.descriptionRow,children:o}),l.length>0&&(0,O.jsx)(ke().Z,{isMultiline:!0,isSecondaryColor:!0,style:i.relatedCollectionInfo,children:`Links to ${s.format(l)}`})]})}function xo(e){const{modalState:t}=e,o=(0,h().yK)((e=>({container:{display:"flex",fontSize:14,fontWeight:De().Ue.medium,alignItems:"center",marginBottom:30},label:{color:e.lightTextColor,paddingRight:4,whiteSpace:"nowrap"},icon:{marginRight:4}})),[]),{parentStore:n}=t,i=(0,r().VK)((()=>n.getIcon()),[n]),a=(0,h().Fg)(),l=(0,go().Mm)(n);return(0,O.jsxs)("div",{style:o.container,children:[(0,O.jsx)("span",{style:o.label,children:"Add to"}),(0,O.jsx)("span",{style:o.icon,children:l?(0,uo().Q)({width:20,fill:a.lightIconColor}):(0,go().Y)(n)?(0,O.jsx)(At().p,{size:20,store:n,disabled:!0}):(0,O.jsx)(mo().Z,{icon:i,disabled:!0,isEmptyPage:!1,size:20})}),l?(0,O.jsx)(O.Fragment,{children:"Private"}):(0,O.jsx)(fo().Z,{store:n})]})}var bo=()=>o(629013);const wo=200;function So(){const e=(0,r().Kw)(m().default),t=(0,n.useCallback)((t=>{e.open&&e.collectionTemplate&&m().default.setState({...e,userCustomizations:t})}),[e]);return e.open&&e.collectionTemplate?(0,O.jsxs)(s().jX,{direction:"column",height:"fill",gap:24,children:[(0,O.jsx)(Xt,{title:e.collectionTemplate&&(o=e.collectionTemplate,`Lets start by adding a few ${(0,y().HR)({template:o,isPlural:!0,isUpperCase:!1})}`)}),(0,O.jsx)(Co,{updateUserCustomizations:t,...(0,p().lq)(e)})]}):null;var o}function Co(e){let{updateUserCustomizations:t,...o}=e;const n=(0,i().O7)(),{collectionTemplate:r,userCustomizations:a}=o,l=(0,bo().y)((e=>{let{index:t,event:i}=e;(0,c().j)({environment:n,event:{eventName:"workflow_template_onboarding_record_titles_input",eventProperties:{is_empty:0===i.target.value.length,input_index:t,step:"recordTitles",...(0,p().px)(o)}}})}),1e3),{recordTitles:s}=a,d=(0,y().HR)({template:r,isPlural:!1,isUpperCase:!1}),u=[],m=s.length;for(let i=0;i<m;i++)u.push((0,O.jsx)(ko,{style:{marginBottom:16},value:s[i],onChange:e=>{const o=e.target.value;s[i]=o,t({...a,recordTitles:s}),l({index:i,event:e})},placeholder:`Add a ${d}`,focusInitial:0===i},i));return(0,O.jsx)(O.Fragment,{children:u})}function ko(e){const t=(0,h().yK)((e=>({input:{backgroundColor:e.buttonBackground}})),[]),{style:o,...n}=e;return(0,O.jsx)(E().Z,{style:{...t.input,...o},format:E().B.Large,maxLength:wo,...n})}var _o=()=>o(506347);var jo=()=>o(396136),To=()=>o(625230),Io=()=>o(711608),Mo=()=>o(47443),Po=()=>o(154186),Ro=()=>o(54033),Vo=()=>o(842574),Bo=()=>o(614027),Lo=()=>o(4909),Ao=()=>o(520849),Eo=()=>o(876822),Fo=()=>o(826955),Ko=()=>o(561280),Oo=()=>o(967092),Wo=()=>o(235605),No=()=>o(827973),Zo=()=>o(18748),Do=()=>o(255577),zo=()=>o(388284);const Uo=18,Ho=16;function $o(e){let{store:t,style:o,textStyle:n}=e;const i=(0,h().yK)((e=>({iconAndTitle:{display:"flex",alignItems:"center",gap:4,overflow:"hidden",...o},lockIcon:{width:Ho,height:Ho,margin:(Uo-Ho)/2,fill:e.icon.primary},text:{flexShrink:1,overflow:"hidden",...n}})),[o,n]),l=(0,r().VK)((()=>{if(t instanceof Fo().H2)return(0,uo().Q)(i.lockIcon);const e=null==t?void 0:t.getIcon();return t instanceof Fo().G?(0,O.jsx)(mo().Z,{icon:e,disabled:!0,isEmptyPage:!1,size:Uo}):t instanceof Fo().zX?(0,O.jsx)(At().p,{store:t,disabled:!0,size:Uo}):void(0,a().t1)(t)}),[t,i.lockIcon]);return(0,O.jsxs)("div",{style:i.iconAndTitle,children:[l,(0,O.jsx)(ie().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:i.text,children:t instanceof Fo().H2?(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModalLocationPicker.privateLocationName",defaultMessage:"Private"}):(0,O.jsx)(fo().Z,{store:t})})]})}function Go(e){let{currentParentStore:t,onSelect:i,onDismiss:l}=e;const s=(0,x().YB)(),[d,c]=(0,n.useState)(""),u=(0,n.useMemo)((()=>{const e=new(o(263184).default)("scrolledToTop");return e.setState(!0),e}),[]),p=(0,r().VK)((()=>{var e;const n=Eo().default.state.currentSpaceStore,i=Eo().default.state.currentSpaceViewStore,r=null===(e=Eo().default.state.currentUserStore)||void 0===e?void 0:e.id;if(!i||!n||!r)return[];const a=o(502175).Z.getJoinedTeamStores({userId:r,spaceStore:n}).filter((e=>e.canAddOrRemoveTopLevelPages())),l=(0,o(345918).Cx)(n)?a:[n,...a],s=l.findIndex((e=>e.id===t.id&&e.table===t.table));if(-1===s)return l;const d=l[s];return[d,...l.filter((e=>e!==d))]}),[t.id,t.table]),m=(0,r().VK)((()=>0===d.length?p:(0,o(619186).ZP)(d,p,(e=>e instanceof Fo().H2?s.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.private",defaultMessage:"Private"}):e instanceof Fo().zX?e.getName()??"":void(0,a().t1)(e)))),[d,p,s]),f=(0,n.useCallback)((e=>{u.setState(0===e.currentTarget.scrollTop)}),[u]),g=(0,n.useCallback)((e=>{const t=m.find((t=>t.id===e.key));t&&i(t)}),[m,i]),y=(0,h().yK)((e=>({checkIcon:{width:14,height:14},input:{marginTop:6},inputInner:{fontSize:12},lastMenuItem:{marginBottom:4},menuItemTextWrapper:{display:"flex",alignItems:"center",minHeight:28,marginLeft:10,marginRight:12},locationTitle:{gap:10},overfilteredLabel:{fill:e.text.secondary,paddingBottom:12}})),[]),v=(0,n.useMemo)((()=>[m.length>0?Yo({filteredLocations:m,currentParentStore:t,onSelect:i,locationTitleStyle:y.locationTitle,menuItemTextWrapperStyle:y.menuItemTextWrapper,checkIconStyle:y.checkIcon}):qo({intl:s,overfilteredLabelStyle:y.overfilteredLabel})]),[m,t,i,y.locationTitle,y.menuItemTextWrapper,y.checkIcon,y.overfilteredLabel,s]);return(0,O.jsx)(o(198829).Z,{menuType:o(352230).o.Popup,header:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(o(740046).ZP,{style:y.input,inputStyle:y.inputInner,itemMarginLeft:8,itemMarginRight:8,focusInitial:!0,value:d,onChange:e=>c(e.target.value),placeholder:s.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.searchInputPlaceholder",defaultMessage:"Add to..."})}),(0,O.jsx)(Xo,{isScrolledToTopStore:u})]}),onClickOutside:l,maxHeight:210,width:252,onScroll:f,children:(0,O.jsx)(Do().ZP,{type:Do().iW.Vertical,initialFocus:0,onAccept:g,sections:v})})}function Xo(e){let{isScrolledToTopStore:t}=e;const o=(0,r().Kw)(t),n=(0,h().yK)((e=>({divider:{height:1,overflow:"visible",boxShadow:`inset 0 0 0 1px ${e.lightDividerColor}`,opacity:o?0:1,transition:"opacity 0.1s ease-in-out"}})),[o]);return(0,O.jsx)("div",{style:n.divider})}function qo(e){let{intl:t,overfilteredLabelStyle:o}=e;return{key:"empty",items:[{key:"noMatchingLocationsItem",render:e=>(0,O.jsx)(Zo().ZP,{...e,title:t.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.noLocations",defaultMessage:"No matching teamspaces found"}),style:o}),action:()=>{}}],render:e=>(0,O.jsx)(zo().Z,{...e,disableDesktopPadding:!0})}}function Yo(e){let{filteredLocations:t,currentParentStore:o,onSelect:n,locationTitleStyle:i,menuItemTextWrapperStyle:r,checkIconStyle:a}=e;return{key:"section",items:t.map((e=>({key:e.id,render:t=>(0,O.jsx)(No().Z,{...t,textWrapperStyle:r,right:e.id===o.id&&e.table===o.table?(0,Wo().k)(a):void 0,title:(0,O.jsx)($o,{store:e,style:i})}),action:()=>n(e)}))),render:e=>(0,O.jsx)(zo().Z,{...e,disableDesktopPadding:!1})}}const Qo=n.memo(Go);function Jo(e){let{currentSelectedStore:t,onSelect:i}=e;const[r,a]=(0,n.useState)(!1),l=(0,n.useCallback)((e=>{i(e),a(!1)}),[i]),s=(0,n.useCallback)((()=>a(!1)),[]),d=(0,n.useCallback)((()=>a(!0)),[]),c=(0,h().yK)((e=>({originContainer:{display:"flex",alignItems:"center",gap:2,maxWidth:300},originText:{fontWeight:De().Ue.medium},addToLabel:{flexShrink:0},button:{width:"max-content",display:"flex",alignItems:"center",gap:4,padding:4,height:24,flexShrink:1,overflow:"hidden"},icon:{width:12,height:12,fill:e.text.tertiary}})),[]);return t?(0,O.jsxs)("div",{style:c.originContainer,children:[(0,O.jsx)(ie().q,{styleName:"UIRegular-14px/Medium",colorName:"secondary",customStyles:c.addToLabel,children:(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModalLocationPicker.addTo",defaultMessage:"Add to"})}),(0,O.jsx)(Oo().ZP,{open:r,popupType:Oo().kQ.Popup,placementToOrigin:Y().Placement.Bottom,alignmentToOrigin:Y().Alignment.Start,onDismiss:s,origin:(0,O.jsxs)(ve().D,{style:c.button,onClick:d,children:[(0,O.jsx)($o,{store:t,textStyle:c.originText}),(0,o(374289).i)(c.icon)]}),render:()=>(0,O.jsx)(Qo,{currentParentStore:t,onSelect:l,onDismiss:s})})]}):null}const en=n.memo(Jo);var tn=()=>o(745213),on=()=>o(656822);function nn(e){let{modalState:t,searchQuery:o,handleSearchQueryChange:i,handleTopbarSizeChange:r,scrollerStore:a}=e;const l=(0,x().YB)(),d=t.parentStore.table===jo().iU?void 0:t.parentStore,c=(0,n.useCallback)((e=>{m().default.setState({...t,parentStore:e})}),[t]),u=(0,n.useContext)(be().gv),p=(0,h().yK)((e=>({topbar:{position:"absolute",top:0,zIndex:2,padding:"16px 24px",width:"100%",display:"grid",gap:24,gridTemplateColumns:`minmax(${d?123:0}px, 1fr) minmax(0, 296px) minmax(0, 1fr)`},closeButton:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.accentColors.translucentGray[75],flexShrink:0},closeButtonHovered:{background:e.accentColors.translucentGray[200]},closeIcon:{width:10,color:e.icon.secondary,stroke:e.icon.secondary,strokeWidth:.5},locationPickerWrapper:{overflow:"hidden"},input:{width:"100%",padding:"8px 12px",background:e.accentColors.washGlass[0],borderRadius:10},divider:{position:"absolute",bottom:0,width:"100%"}})),[d]);return(0,O.jsx)(st().n4,{onSizeChange:r,children:(0,O.jsxs)("div",{style:p.topbar,children:[(0,O.jsxs)(s().jX,{direction:"row",gap:16,align:"center-left",children:[(0,O.jsx)(Po().Z,{style:p.closeButton,hoveredStyle:p.closeButtonHovered,onClick:u,children:(0,he().U)(p.closeIcon)}),d&&(0,O.jsx)("div",{style:p.locationPickerWrapper,children:(0,O.jsx)(en,{currentSelectedStore:d,onSelect:c})})]}),(0,O.jsx)(E().Z,{focusInitial:!0,value:o,onChange:i,style:p.input,placeholder:l.formatMessage({id:"workflowTemplatesOnboardingModal.searchPlaceholder",defaultMessage:"Search"})}),(0,O.jsx)("div",{style:p.divider,children:(0,O.jsx)(Ro().Z,{type:"top",scrollerStore:a})})]})})}let rn=0;function an(e){let{modalState:t}=e;const o=(0,i().O7)(),[a,l]=(0,n.useState)(rn),d=(0,r().qz)(void 0,Ko().Z),u=(0,n.useCallback)((e=>{var t;t=e.height,rn=t,l(e.height)}),[]),f=t.collectionTemplatesSearchQuery??"";!function(e){let{environment:t,searchQuery:o}=e;const i=(0,we().Kt)(o,500,((e,t)=>e===t));(0,n.useEffect)((()=>{const{state:e}=m().default;if(!e.open)return;if(e.flowId!==ln.flowId&&(ln={query:"",flowId:e.flowId}),ln.query===i)return;const o=ln.query.length??0,n=i.length>0,r=o>0;(0,c().j)({environment:t,event:{eventName:"template_picker_search_changed",eventProperties:{...(0,p().px)(e),type:n?r?"search_edited":"search_started":"search_ended",shown_templates_for_search:n?(0,tn().RZ)(i,(0,tn().uO)()).map((e=>e.templateId)):void 0}}}),ln={query:i,flowId:e.flowId}}),[t,i])}({environment:o,searchQuery:f});const g=(0,h().yK)((e=>{const t=`\n\t\t\tlinear-gradient(\n\t\t\t\tto bottom,\n\t\t\t\ttransparent ${a+1}px,\n\t\t\t\twhite ${a+1.1}px\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\tto left,\n\t\t\t\tblack 16px,\n\t\t\t\ttransparent 17px\n\t\t\t)`;return{container:{maskImage:t,WebkitMaskImage:t,maskSize:"100% 100%",WebkitMaskSize:"100% 100%",maskPosition:"0 0",WebkitMaskPosition:"0 0",maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:a},content:{maxWidth:"calc(100% - 32px)",paddingBottom:16}}}),[a]),y=(0,n.useCallback)((e=>{m().default.setState({...t,collectionTemplatesSearchQuery:e.target.value})}),[t]),v=(0,n.useCallback)((async e=>{const{title:n}=e??{},i=function(e){let{environment:t,parentStore:o,title:n}=e;const{currentSpaceStore:i,currentSpaceViewStore:r}=Eo().default.state;if(i&&r){if(o instanceof Fo().zX)return Io().mv({environment:t,from:"team_workflow_templates_onboarding_modal",spaceStore:i,spaceViewStore:r,teamStore:o,andNavigate:!0,appendOrPrepend:"append",title:n});if(o instanceof Fo().H2){const e="private",o="workflow_templates_onboarding_modal";return To().j({name:"page_created",args:{type:e,from:o}}),Io().kC({environment:t,spaceStore:i,spaceViewStore:r,type:e,outlinerItemFrom:o,title:n})}}}({environment:o,parentStore:t.parentStore,title:n});if(!i)return;m().default.close({type:"accepted_new_page",newPageTitle:n});const r=await i;r&&(0,c().j)({environment:o,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,p().px)(t),type:"page",created_block_id:r.id,created_block_type:r.getType()}}})}),[o,t]),x=(0,Te().E)("workflow_container"),b=(0,n.useCallback)((e=>{var n;t.open&&(!t.existingCollectionInfo||x?(0,Me().Ex)({environment:o,parentStore:t.parentStore,collectionViewBlockStore:null===(n=t.existingCollectionInfo)||void 0===n?void 0:n.collectionViewBlockStore,title:null==e?void 0:e.title,onFinish:n=>{(0,c().j)({environment:o,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,p().px)(t),type:"database",created_block_id:n.id,created_block_type:n.getType()}}}),Mo()._c({environment:o,store:n,visitType:Bo().vu.Link,pageVisitSource:_o().tY.Create}),m().default.close({type:"accepted_empty_collection",newCollectionTitle:null==e?void 0:e.title})}}):m().default.close({type:"accepted_empty_collection",newCollectionTitle:null==e?void 0:e.title}))}),[o,t,x]),w=(0,n.useCallback)(((e,t)=>{(0,me().handleSelectTemplateFromOnboardingModal)({environment:o,template:e,analyticsArgs:t})}),[o]),S=(0,Lo().y)("marketplace_workflow_templates_onboarding_modal",{forceOpenInNewTab:!0}),C=(0,n.useMemo)((()=>({onSelectTemplate:w,onAddEmptyPage:v,onAddEmptyDatabase:b,onMarketplaceClick:S})),[w,v,b,S]),k="collection_settings_create_view_source"!==(_=t.origin)&&"collection_settings_create_view_source_inline"!==_;var _;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(nn,{modalState:t,searchQuery:f,scrollerStore:d,handleSearchQueryChange:y,handleTopbarSizeChange:u}),(0,O.jsx)(Vo().T,{type:Ao().Z.Y,store:d,style:g.container,children:(0,O.jsx)(s().jX,{width:620,style:g.content,children:0===f.length?(0,O.jsx)(on().OW,{parentStore:t.parentStore,showEmptyPageButton:k,...C}):(0,O.jsx)(tn().ep,{query:f,showEmptyPageButton:k,...C})})})]})}let ln={query:"",flowId:void 0};o(492176),o(7961);var sn=()=>o(445520),dn=()=>o(364052);const cn=(0,z().CZ)("circle",{default:{loader:()=>o.e(13097).then(o.bind(o,413097))},small:{loader:()=>o.e(60030).then(o.bind(o,760030))},mini:{loader:()=>o.e(33061).then(o.bind(o,133061))},large:{loader:()=>o.e(40157).then(o.bind(o,812683))}});var un=()=>o(589357),pn=()=>o(292518);function mn(e){const{placeholder:t,value:o,onChange:a,onSubmit:l,canPressEnter:s}=e,{store:d,setValue:c}=(0,R().Cl)({initialValue:o,onChange:a});(0,n.useEffect)((()=>{const e=d.getValue();o!==e&&c(o)}),[o,c,d]);const u=(0,i().O7)(),p=(0,x().YB)(),m=function(){const e=20,t=24;return(0,h().yK)((o=>({input:{display:"flex",maxWidth:"100%",flexFlow:"column",flexShrink:0,boxShadow:o.inputBoxShadow,backgroundColor:o.surface.elevated,borderRadius:16,overflow:"inherit",padding:"8px 8px 8px 12px",gap:"4px 0"},textWrapper:{minHeight:46,paddingRight:4,flexWrap:"wrap",flexGrow:99999,display:"flex",alignItems:"flex-start",minWidth:0},innerTextWrapper:{flex:"1 1 0%",display:"flex",gap:4,alignItems:"center",fontSize:14,padding:"2px 0",minWidth:0},textContainer:{maxWidth:"100%",width:"100%",flexGrow:1,alignSelf:"flex-end",maxHeight:240,overflow:"auto",minWidth:0},buttonWrapper:{minHeight:22,minWidth:60,display:"flex",justifyContent:"flex-end",alignItems:"center",flexGrow:1,flexShrink:0,paddingTop:2,paddingBottom:2,gap:8,margin:"0 0 0 auto"},stopIcon:{fill:o.icon.primary},icon:{height:e,width:e},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}})),[])}(),f=(0,n.useContext)(be().gv),g=(0,r().VK)((()=>d.getValue()),[d]),y=!(0,v().PgY)(g);!function(e){const{textStore:t,initialFocus:o}=e,i=(0,n.useCallback)((()=>{j().setSelectionAtEnd({store:t})}),[t]);(0,n.useEffect)((()=>{o&&i()}),[o,i])}({textStore:d,initialFocus:!0});const b=(0,n.useCallback)((e=>{if(e.target===e.currentTarget){const t=V().E.findEditableWithStore(d);t&&t.handleClick(e)}}),[d]);return(0,O.jsx)(I().Z,{debugName:"AiPromptInput",capture:!0,onEsc:f,children:(0,O.jsxs)("div",{className:P().Wh_,style:m.input,onClick:b,children:[(0,O.jsx)("div",{style:m.textWrapper,children:(0,O.jsx)("div",{style:m.innerTextWrapper,children:(0,O.jsx)(M().Z,{inPageFind:{type:"none"},style:m.textContainer,store:d,disabled:!1,disabledMentionTypes:{page:!0,bot:!0,team:!0,reminder:!0,date:!0,user:!0,group:!0,heading:!0,templateVariable:!0,formulaContextVariable:!0},placeholder:p.formatMessage(t),disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,disableUpDownArrows:!0,disableFilters:!0,disableEnter:!y||!s,onEnter:()=>{y&&s&&l()},pasteBehavior:"inline",onBlur:()=>{j().clear({environment:u})}})})}),(0,O.jsx)("div",{style:m.buttonWrapper,children:(0,O.jsx)(T().Z,{icon:k()._,onClick:()=>{},isBlue:y,disabled:!y,ariaLabel:"submit-ai-prompt",onMouseDown:e=>{e.preventDefault(),l()},style:m.button,iconStyle:m.icon})})]})})}const fn=(0,x().vU)({promptPlaceholder:{id:"setupGenerator.promptPlaceholder",defaultMessage:"Make a customer feedback tracker with priority levels, status, and assignee..."}}),gn={duration:0},hn={duration:.7,ease:"anticipate"},yn={type:"spring",stiffness:150,damping:20,delay:1};function vn(){const e=(0,r().VK)((()=>(0,pe().getIsSetupGeneratorEnabled)()),[]),t=(0,n.useContext)(be().gv),o=(0,r().VK)((()=>m().default.state),[]),i=(0,r().VK)((()=>o.open?o.setupGenerator:void 0),[o]),a=(0,r().VK)((()=>(null==i?void 0:i.store.state.isBusy)??!1),[i]);return i&&e?o.open?a?(0,O.jsx)(wn,{modalState:o,setupGenerator:i}):(0,O.jsx)(xn,{}):null:(0,O.jsx)(Tn,{onClickClose:t})}function xn(){const e=(0,x().YB)(),t=(0,r().VK)((()=>m().default.state),[]),o=(0,r().VK)((()=>{if(t.open)return t.setupGenerator}),[t]),i=(0,r().VK)((()=>null==o?void 0:o.store.state.prompt),[o]),a=(0,n.useCallback)((async()=>{if(!o)return;await o.submitPrompt({from:"initial-input"})&&(0,me().moveToNextOnboardingStep)()}),[o]),l=(0,r().VK)((()=>{var t;return null===(t=Eo().default.state.currentUserStore)||void 0===t?void 0:t.getDisplayName(e)}),[e]);return t.open&&o?(0,O.jsx)(bn,{currentUserName:l,prompt:i,onChange:o.setPrompt,onSubmit:a}):null}function bn(e){const{currentUserName:t,prompt:o,onChange:n,onSubmit:i}=e,a=(0,h().yK)((()=>({text:{textAlign:"center",textWrap:"balance"}})),[]),l=(0,r().VK)((()=>m().default.state),[]);return l.open?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(qt,{modalState:l}),(0,O.jsx)(s().jX,{width:"fill",height:"fill",align:"top-center",padding:"32px",children:(0,O.jsxs)(s().jX,{height:"fill",align:"center",gap:32,children:[(0,O.jsxs)(s().jX,{gap:12,align:"top-center",width:400,style:a.text,children:[(0,O.jsx)(g().E.div,{layoutId:"assistant-face",transition:gn,layout:"position",children:(0,O.jsx)(un().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"idle",includeBoxShadow:!0})}),(0,O.jsx)(ie().q,{styleName:"UITitle-22px/Semibold",children:(0,O.jsx)(x()._H,{id:"setupGenerator.greeting",defaultMessage:"Hi {currentUserName}! Here to help. What do you want to build today?",values:{currentUserName:t}})})]}),(0,O.jsx)(s().jX,{direction:"column",gap:16,width:420,style:{marginBottom:42},children:(0,O.jsx)(mn,{placeholder:fn.promptPlaceholder,value:o,onChange:n,onSubmit:i,canPressEnter:!0})})]})})]}):null}function wn(e){const{modalState:t,setupGenerator:o}=e,i=(0,r().VK)((()=>{var e;return(null==o||null===(e=o.store.state)||void 0===e?void 0:e.progress)??{databases:{},statusLabel:{type:"default"},steps:[]}}),[o]),a=(0,n.useCallback)((()=>{null==o||o.stopGenerating()}),[o]),l=Object.values(i.databases).at(0),s=(null==l?void 0:l.databaseName)??"",d=(null==l?void 0:l.iconName)??"pencil";return(0,O.jsx)(Sn,{collectionName:s,collectionIcon:`/icons/${d}_gray.svg`,progress:i,onClickStop:a,cornerButtonVariant:0!==t.currentStepIndex||i?"back":"close"})}function Sn(e){const{collectionName:t,collectionIcon:o,progress:n,onClickStop:i,cornerButtonVariant:r}=e,a=null==n?void 0:n.statusLabel,l=(0,h().yK)((e=>({container:{borderRadius:12,border:`1px solid ${e.stroke.secondary}`,backgroundColor:"dark"===e.mode?e.popoverWaxPaperBackground:void 0,backgroundImage:`url(${tt().Z.images.workflowTemplates.bgDotsPng})`,backgroundRepeat:"repeat",backgroundSize:"70px 70px",backgroundPosition:"0% 0%",backgroundBlendMode:"multiply",position:"absolute",userSelect:"none",inset:0,zIndex:10},header:{opacity:.6,paddingBottom:20,borderBottom:`1px solid ${e.stroke.primary}`},columns:{display:"grid",gridTemplateColumns:"3fr 2fr 2fr",gap:45},shimmer:{width:"50%",height:9,borderRadius:5},shimmerWide:{width:"100%",height:9,borderRadius:5}})),[]),d=(0,h().Fg)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Yt,{iconFn:"close"===r?he().U:ge().W,onClick:i}),(0,O.jsx)(Zt,{sidebar:(0,O.jsxs)(s().jX,{direction:"column",gap:36,children:[(0,O.jsxs)(s().jX,{direction:"column",gap:12,children:[(0,O.jsx)(g().E.div,{layoutId:"assistant-face",layout:"position",transition:hn,children:(0,O.jsx)(un().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"writing",includeBoxShadow:!0})}),(0,O.jsx)(g().E.div,{initial:{opacity:0},animate:{opacity:1},transition:hn,children:(0,O.jsx)(le,{statusLabel:a})})]}),(0,O.jsx)(g().E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:yn,children:(0,O.jsx)(kn,{steps:(null==n?void 0:n.steps)??[]})})]}),preview:(0,O.jsx)(g().E.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:yn,style:{width:"100%",height:"100%",position:"relative"},children:(0,O.jsxs)(s().jX,{direction:"column",height:"fill",width:"fill",padding:"36px 38px",style:l.container,gap:30,children:[(0,O.jsxs)(s().jX,{direction:"row",align:"center-left",gap:12,height:50,style:l.header,children:[(0,O.jsx)(sn().Z,{icon:o,size:20,theme:d}),(0,O.jsx)(ie().q,{styleName:"UITitle-22px/Semibold",children:t})]}),(0,O.jsx)("div",{style:l.columns,children:Array.from({length:3}).map(((e,t)=>(0,O.jsxs)(s().jX,{direction:"column",gap:25,children:[(0,O.jsx)(w().Z,{style:l.shimmer}),Array.from({length:5}).map(((e,t)=>(0,O.jsx)(w().Z,{style:l.shimmerWide},t)))]},t)))})]})})})]})}function Cn(e){const{status:t}=e,o=(0,h().yK)((()=>({loadingDotsContainer:{width:24,height:24,gap:3},loadingDot:{width:5,height:5}})),[]);switch(t){case"idle":return(0,O.jsx)(X().y,{iconGroup:cn,variantName:"large",colorName:"tertiary"});case"in_progress":return(0,O.jsx)(pn().Z,{isTriColored:!0,styleParentContainer:o.loadingDotsContainer,style:o.loadingDot});case"completed":return(0,O.jsx)(X().y,{iconGroup:dn().F,variantName:"large",colorName:"tertiary"});default:(0,a().t1)(t)}}function kn(e){const{steps:t}=e,o=(0,h().yK)((e=>({separator:{width:1,height:12,background:e.stroke.primary}})),[]);return(0,O.jsx)(s().jX,{direction:"column",gap:2,children:t.map(((e,i)=>{const r=i===t.length-1;return(0,O.jsxs)(n.Fragment,{children:[(0,O.jsx)(jn,{step:e}),r?void 0:(0,O.jsx)(s().jX,{width:24,align:"center",children:(0,O.jsx)("div",{style:o.separator})})]},i)}))})}const _n=(0,x().vU)({creatingDatabase:{id:"setupGenerator.progress.createDatabase",defaultMessage:"Creating database"},addingProperties:{id:"setupGenerator.progress.addProperties",defaultMessage:"Adding properties"},addingViews:{id:"setupGenerator.progress.addViews",defaultMessage:"Adding views"},addingPages:{id:"setupGenerator.progress.addPages",defaultMessage:"Adding pages"}});function jn(e){const{step:t}=e,o=(0,x().YB)();let n;switch(t.type){case"createDatabases":n=o.formatMessage(_n.creatingDatabase);break;case"addProperties":n=o.formatMessage(_n.addingProperties);break;case"addViews":n=o.formatMessage(_n.addingViews);break;case"addPages":n=o.formatMessage(_n.addingPages);break;default:return null}return(0,O.jsxs)(s().jX,{direction:"row",align:"center-left",gap:6,children:[(0,O.jsx)(Cn,{status:t.status}),(0,O.jsx)(ie().q,{styleName:"UIRegular-14px/Medium",colorName:"in_progress"===t.status?"primary":"tertiary",children:n})]})}function Tn(e){const{onClickClose:t}=e;return(0,O.jsxs)(O.Fragment,{children:[t?(0,O.jsx)(Yt,{iconFn:he().U,onClick:t}):null,(0,O.jsx)(s().jX,{height:"fill",width:"fill",align:"center",children:(0,O.jsx)(ie().q,{styleName:"UIRegular-14px/Regular",children:(0,O.jsx)(x()._H,{id:"setupGenerator.notAvailable",defaultMessage:"This feature is not available."})})})]})}var In=()=>o(561933);function Mn(){var e;const t=(0,r().Kw)(m().default),o=(0,i().O7)(),a=(0,r().VK)((()=>t.open&&t.collectionTemplate?(0,p().lq)(t):null),[t]),l=(0,n.useCallback)((e=>{m().default.updatePreviewCollectionViewTemplateId(e)}),[]);return a&&t.open?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Xt,{caption:(0,O.jsx)(x()._H,{id:"workflowTemplatesOnboardingModal.selectViews",defaultMessage:"Select how you prefer to see your {collectionName}",values:{collectionName:null===(e=t.collectionTemplate)||void 0===e?void 0:e.value.targetCollection.name}})}),(0,O.jsx)(Pn,{toggleViewSelection:e=>{(0,me().toggleFeatureSelectionInPreview)({template:e,environment:o})},updatePreviewCollectionViewTemplateId:l,...a})]}):null}function Pn(e){let{toggleViewSelection:t,updatePreviewCollectionViewTemplateId:o,...n}=e;const a=(0,i().O7)(),{collectionTemplate:l,userCustomizations:s}=n,d=(0,h().Fg)(),u=(0,r().VK)((()=>pe().globalWorkflowTemplates.allOfType({templateIds:l.value.templateItems.map((e=>e.pointer)),type:"collection_view"})),[l]),m=(0,r().VK)((()=>{const e=s.featureTemplateSelections.filter((e=>"collection_view"===e.template.type&&e.selected));return e.length>0?e[0].template.templateId:void 0}),[s]),f=(0,r().VK)((()=>1===s.featureTemplateSelections.filter((e=>e.selected&&"collection_view"===e.template.type)).length),[s]),g=(0,h().yK)((e=>({views:{display:"flex",flexDirection:"column",gap:12,padding:2},button:{display:"flex",width:"100%",flexDirection:"row",alignItems:"center",gap:8,justifyContent:"left",height:52,borderRadius:14,cursor:"pointer",fontSize:14,padding:16,lineHeight:"20px",color:e.text.primary,fontWeight:De().Ue.medium},viewName:{flexGrow:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},baseIconStyle:{flexShrink:0,height:20,width:20},overflowTooltip:{maxWidth:250}})),[]);return m?(0,O.jsx)("div",{style:g.views,children:u.map(((e,i)=>{const r=s.featureTemplateSelections.find((t=>t.template.templateId===e.templateId)),{name:l,type:m,format:h}=e.value,y=Boolean(null==r?void 0:r.selected),v="required"===(null==r?void 0:r.optionality)||f&&y,x=null==h?void 0:h.collection_view_icon;return(0,O.jsxs)(eo,{isSelected:y,style:g.button,onClick:()=>{if(v)return;const i=!y,r=new Set(s.featureTemplateSelections.filter((e=>e.selected)).map((e=>e.template.templateId)));(0,c().j)({environment:a,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:i?"selecting":"deselecting",previously_selected_feature_template_ids:[...r],feature_template_id:e.templateId,feature_template_type:e.type,step:"viewsSelection",...(0,p().px)(n)}}}),t(e);const l=n.previewCollectionViewTemplateId===e.templateId;if(i)o(e.templateId);else if(l){var d;const t=null===(d=u.find((t=>r.has(t.templateId)&&t.templateId!==e.templateId)))||void 0===d?void 0:d.templateId;o(t)}},children:[x?(0,O.jsx)(sn().Z,{theme:d,icon:x,style:{...g.baseIconStyle,...y&&{fill:d.text.uiBluePrimary}},size:g.baseIconStyle.width}):In().aW[m]({...g.baseIconStyle,...y&&{fill:d.text.uiBluePrimary}}),(0,O.jsx)(se().s,{tooltipStyle:g.overflowTooltip,placement:Y().Placement.Right,children:l})]},i)}))}):null}function Rn(){const e=(0,r().Kw)(m().default),t=(0,i().O7)(),o=(0,r().VK)((()=>(0,u().SV)({disableExposureLogging:!0})),[]);(0,n.useEffect)((()=>{o&&l().Xm.CollectionViewBlock.load()}),[o]);const a=(0,n.useCallback)((()=>{if(!e.open)return;const o=e.setupGenerator;o&&o.trackSessionEnded({reason:"dismissed"}),(0,c().j)({environment:t,event:{eventName:"workflow_template_onboarding_dismissed",eventProperties:{...(0,p().px)(e),step:(0,p().IA)(e),dismissed_by:"click_outside"}}})}),[e,t]),f=(0,r().VK)((()=>e.open?(0,p().IA)(e):void 0),[e]),g=(0,n.useCallback)((()=>{m().default.close({type:"canceled"})}),[]),h=(0,n.useMemo)((()=>({width:{type:"fixed",length:1e3},height:{type:"fixed",length:650}})),[]);return f&&e.open?(0,O.jsx)(d().c,{isOpen:!0,areaConstraint:h,onDismiss:a,onClosed:g,backgroundAppearance:"wash",render:e=>{let{sizeRange:t}=e;return(0,O.jsx)(s().jX,{style:t,children:(0,O.jsx)(Vn,{currentModalStep:f})})}}):null}function Vn(e){let{currentModalStep:t}=e;const o=(0,r().VK)((()=>m().default.state),[]);if(!o.open)return null;switch(t){case"templateSelection":return(0,O.jsx)(an,{modalState:o});case"setupGenerator":return(0,O.jsx)(vn,{});case"intro":return(0,O.jsx)(Dt,{children:(0,O.jsx)(yo,{})});case"features":return(0,O.jsx)(Dt,{children:(0,O.jsx)(to,{})});case"recordTitles":return(0,O.jsx)(Dt,{children:(0,O.jsx)(So,{})});case"viewsSelection":return(0,O.jsx)(Dt,{children:(0,O.jsx)(Mn,{})});default:(0,a().t1)(t)}}},29488:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{O:()=>n})},157955:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>M,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>S,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>w,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>g,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>P,getFormattedEndCondition:()=>I,getFormattedNextRecurrenceTime:()=>T,getNewEndTimestamp:()=>R,getNextDateUtc:()=>j,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>_,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>x,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>C});o(267602),o(653476),o(241792);var n=()=>o(730120);o(670560);function i(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const r=[];for(const a of e)r.push(...i(o[0],...o.slice(1)).map((e=>[a,...e])));return r}var r=()=>o(696459),a=()=>o(326966),l=()=>o(803021),s=()=>o(646574),d=()=>o(998411),c=()=>o(578292);class u extends(()=>o(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>o(494616);const m=(0,o(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 123 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},g={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},h=99,y=999;function v(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function x(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=y}function b(e){const{start_date:t,frequency:o,interval:n,weekdays:a,timezone:s,hour:d,minute:c}=e,p="week"===o&&a?a.map((e=>g[e])):void 0,m={};return(0,r().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().t1)(e.end_condition)),"month"===e.frequency&&(0,r().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return g[t].nth(o)})):(0,r().t1)(e.monthly_restriction)),new u({freq:f[o],dtstart:(0,l().pd)(t),interval:n,byweekday:p,tzid:s,byhour:d??0,byminute:c??0,bysecond:0,...m})}const w=1,S=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=n>w,a=o.length>=S;return{violatesConstraint:r||a,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:i}}function k(e){const{recurrence:t,afterDate:o}=e;if((0,p().nA)(t)){const e=(0,l().kq)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(t).after((0,l().pd)(o));if(!e)return;return(0,l().YL)(e)}}function _(e){return 0===e.hour||1===e.hour||2===e.hour}function j(e){return b(e).after((0,l().pd)((0,l().Jh)()))||void 0}function T(e){const{recurrence:t,intl:o}=e,i=j(B(t));if(!i)return;const r=_(t),a=n().ou.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,c().E2)(o)).setZone(t.timezone),l=(0,s().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(r)return o.formatMessage(m.dateBetweenMidnightAnd3AM,{date:l});{let e=a.toLocaleString(n().ou.TIME_SIMPLE);return t.timezone!==(0,d().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(m.dateAtTime,{date:l,time:e})}}function I(e,t){return(0,r().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().p6)({date:n().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().t1)(e):t.formatMessage(m.noEndCondition)}const M=100;function P(e){return{...e,start_date:(0,l().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().kq)(e.end_condition.end_at)}:(0,r().t1)(e.end_condition):void 0}}function R(e,t,o){return e.plus(o-t)}function V(e,t){const o=n().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Jh)(o.toJSDate())}}function B(e){return{...e,start_date:(0,l().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?V(e,e.end_condition):(0,r().t1)(e.end_condition):void 0}}},473759:(e,t,o)=>{o.d(t,{v:()=>n});const n=(0,o(827282).CZ)("arrowCounterClockwise",{default:{loader:()=>o.e(26518).then(o.bind(o,126518))},small:{loader:()=>o.e(98759).then(o.bind(o,598759))},mini:{loader:()=>o.e(51079).then(o.bind(o,451079))},large:{loader:()=>o.e(32680).then(o.bind(o,432680))}})},766072:(e,t,o)=>{o.d(t,{X:()=>n});const n=(0,o(827282).CZ)("pencilLine",{default:{loader:()=>o.e(47736).then(o.bind(o,547736))},small:{loader:()=>o.e(91525).then(o.bind(o,591525))},mini:{loader:()=>o.e(60594).then(o.bind(o,160594))},large:{loader:()=>o.e(36121).then(o.bind(o,936121))}})},647439:(e,t,o)=>{o.d(t,{W:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},127513:(e,t,o)=>{o.d(t,{r:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},29248:(e,t,o)=>{o.d(t,{K:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},293641:(e,t,o)=>{o.d(t,{J:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("layout",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},519454:(e,t,o)=>{o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},842631:(e,t,o)=>{o.d(t,{A:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("plusMedium",{viewBox:"0 0 16 16",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M2 8a.77.77 0 01.237-.566.762.762 0 01.566-.244h4.394V2.803a.77.77 0 01.237-.566A.773.773 0 018 2c.225 0 .416.079.573.237a.773.773 0 01.237.566V7.19h4.387c.22 0 .409.081.566.244A.773.773 0 0114 8a.781.781 0 01-.237.573.785.785 0 01-.566.23H8.81v4.401a.764.764 0 01-.237.56A.781.781 0 018 14a.773.773 0 01-.566-.237.764.764 0 01-.237-.559V8.803H2.803a.785.785 0 01-.566-.23A.781.781 0 012 8z"})})})},961507:(e,t,o)=>{o.d(t,{_:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("sendArrow",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},660301:(e,t,o)=>{o.d(t,{q:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("squareStop",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79469 18.5894C8.59333 18.5894 7.46094 18.3595 6.39753 17.8996C5.33986 17.4398 4.40579 16.8046 3.5953 15.9941C2.78481 15.1836 2.14963 14.2495 1.68978 13.1919C1.22993 12.1284 1 10.9961 1 9.79469C1 8.59333 1.22993 7.46381 1.68978 6.40615C2.14963 5.34274 2.78193 4.40579 3.58667 3.5953C4.39717 2.78481 5.33124 2.14963 6.3889 1.68978C7.45232 1.22993 8.5847 1 9.78607 1C10.9874 1 12.1198 1.22993 13.1832 1.68978C14.2466 2.14963 15.1836 2.78481 15.9941 3.5953C16.8046 4.40579 17.4398 5.34274 17.8996 6.40615C18.3595 7.46381 18.5894 8.59333 18.5894 9.79469C18.5894 10.9961 18.3595 12.1284 17.8996 13.1919C17.4398 14.2495 16.8046 15.1836 15.9941 15.9941C15.1836 16.8046 14.2466 17.4398 13.1832 17.8996C12.1256 18.3595 10.9961 18.5894 9.79469 18.5894ZM7.44944 13.028H12.1399C12.4159 13.028 12.6314 12.9504 12.7866 12.7952C12.9476 12.64 13.028 12.4245 13.028 12.1486V7.42357C13.028 7.15341 12.9476 6.94073 12.7866 6.78553C12.6314 6.63033 12.4159 6.55273 12.1399 6.55273H7.44944C7.17353 6.55273 6.9551 6.63033 6.79415 6.78553C6.63895 6.94073 6.56135 7.15341 6.56135 7.42357V12.1486C6.56135 12.4245 6.63895 12.64 6.79415 12.7952C6.9551 12.9504 7.17353 13.028 7.44944 13.028Z"})})},749166:(e,t,o)=>{o.d(t,{w:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},997469:(e,t,o)=>{o.d(t,{E:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("templatesNewColored",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fill:"#FFB110",fillRule:"evenodd",d:"M6.014 16.338a4.429 4.429 0 004.429-4.48H8.88c-.254 0-.512 0-.732-.018a2.26 2.26 0 01-.86-.226 2.24 2.24 0 01-.979-.979 2.26 2.26 0 01-.226-.86 9.471 9.471 0 01-.018-.731V7.48a4.44 4.44 0 014.179 3.111 4.431 4.431 0 00-8.659 1.318 4.43 4.43 0 004.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#097FE8",d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 01.828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.019 1.019 0 01-.414-.718c-.035-.329.197-.73.66-1.532l2.028-3.512z"}),(0,n.jsx)("path",{fill:"#F64932",fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.379c.57 0 .855 0 1.073.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 00-1.521.109c-.46.204-.75.56-.94.83a13.31 13.31 0 00-.594.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1.018 1.018 0 01-.445-.445c-.11-.218-.11-.503-.11-1.074V4.63z",clipRule:"evenodd"})]})})},667932:(e,t,o)=>{o.d(t,{KD:()=>s,_I:()=>d,_P:()=>u,l2:()=>p,x9:()=>c});o(267602),o(653476),o(241792);var n=()=>o(543172),i=()=>o(210349),r=()=>o(639708),a=()=>o(712185);const l={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},d={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[]};function c(e){return(0,a().Dl)({modulesByArea:l,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function u(){return{page_layout_schema:(0,a().L0)(l.page_main).map((e=>{if(!(0,r().zP)(e))return(0,i().T)(e)?{...e,id:(0,n().ZP)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().L0)(l.page_details).map((e=>{if(!(0,r().zP)(e))return(0,i().T)(e)?{...e,id:(0,n().ZP)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function p(e,t){const o=void 0===t?[{id:(0,n().ZP)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,n().ZP)(),type:"formQuestion",formQuestionId:e},{id:(0,n().ZP)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,n().ZP)(),type:"cover"},{id:(0,n().ZP)(),type:"formTitle"},...o,{id:(0,n().ZP)(),type:"formSubmit"}]}}},210349:(e,t,o)=>{o.d(t,{T:()=>a,s:()=>r});const n={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},i={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function r(e,t){return n[e.type]}function a(e){return i[e.type]}},6623:(e,t,o)=>{o.d(t,{Fo:()=>r,m7:()=>a});const n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},i={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function r(e){return n[e.type]}function a(e){return i[e.type]}},511544:(e,t,o)=>{o.d(t,{M:()=>d});var n=o(667294);class i extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function r({children:e,isPresent:t}){const o=(0,n.useId)(),r=(0,n.useRef)(null),a=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)((()=>{const{width:e,height:n,top:i,left:l}=a.current;if(t||!r.current||!e||!n)return;r.current.dataset.motionPopId=o;const s=document.createElement("style");return document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            top: ${i}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(s)}}),[t]),n.createElement(i,{isPresent:t,childRef:r,sizeRef:a},n.cloneElement(e,{ref:r}))}const a=({children:e,initial:t,isPresent:i,onExitComplete:a,custom:s,presenceAffectsLayout:d,mode:c})=>{const u=(0,o(996681).h)(l),p=(0,n.useId)(),m=(0,n.useMemo)((()=>({id:p,initial:t,isPresent:i,custom:s,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))})),d?void 0:[i]);return(0,n.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[i]),n.useEffect((()=>{!i&&!u.size&&a&&a()}),[i]),"popLayout"===c&&(e=n.createElement(r,{isPresent:i},e)),n.createElement(o(400240).O.Provider,{value:m},e)};function l(){return new Map}const s=e=>e.key||"";const d=({children:e,custom:t,initial:i=!0,onExitComplete:r,exitBeforeEnter:l,presenceAffectsLayout:d=!0,mode:c="sync"})=>{(0,o(45487).k)(!l,"Replace exitBeforeEnter with mode='wait'");const u=(0,n.useContext)(o(325364).p).forceRender||(0,o(706337).N)()[0],p=(0,o(704454).t)(),m=function(e){const t=[];return n.Children.forEach(e,(e=>{(0,n.isValidElement)(e)&&t.push(e)})),t}(e);let f=m;const g=(0,n.useRef)(new Map).current,h=(0,n.useRef)(f),y=(0,n.useRef)(new Map).current,v=(0,n.useRef)(!0);if((0,o(158868).L)((()=>{v.current=!1,function(e,t){e.forEach((e=>{const o=s(e);t.set(o,e)}))}(m,y),h.current=f})),(0,o(865411).z)((()=>{v.current=!0,y.clear(),g.clear()})),v.current)return n.createElement(n.Fragment,null,f.map((e=>n.createElement(a,{key:s(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:d,mode:c},e))));f=[...f];const x=h.current.map(s),b=m.map(s),w=x.length;for(let o=0;o<w;o++){const e=x[o];-1!==b.indexOf(e)||g.has(e)||g.set(e,void 0)}return"wait"===c&&g.size&&(f=[]),g.forEach(((e,o)=>{if(-1!==b.indexOf(o))return;const i=y.get(o);if(!i)return;const l=x.indexOf(o);let v=e;if(!v){const e=()=>{g.delete(o);const e=Array.from(y.keys()).filter((e=>!b.includes(e)));if(e.forEach((e=>y.delete(e))),h.current=m.filter((t=>{const n=s(t);return n===o||e.includes(n)})),!g.size){if(!1===p.current)return;u(),r&&r()}};v=n.createElement(a,{key:s(i),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:d,mode:c},i),g.set(o,v)}f.splice(l,0,v)})),f=f.map((e=>{const t=e.key;return g.has(t)?e:n.createElement(a,{key:s(e),isPresent:!0,presenceAffectsLayout:d,mode:c},e)})),n.createElement(n.Fragment,null,g.size?f:f.map((e=>(0,n.cloneElement)(e))))}},706337:(e,t,o)=>{o.d(t,{N:()=>a});var n=o(667294),i=()=>o(704454),r=()=>o(426166);function a(){const e=(0,i().t)(),[t,o]=(0,n.useState)(0),a=(0,n.useCallback)((()=>{e.current&&o(t+1)}),[t]);return[(0,n.useCallback)((()=>r().Wi.postRender(a)),[a]),t]}},704454:(e,t,o)=>{o.d(t,{t:()=>r});var n=o(667294),i=()=>o(158868);function r(){const e=(0,n.useRef)(!1);return(0,i().L)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},865411:(e,t,o)=>{o.d(t,{z:()=>i});var n=o(667294);function i(e){return(0,n.useEffect)((()=>()=>e()),[])}}}]);