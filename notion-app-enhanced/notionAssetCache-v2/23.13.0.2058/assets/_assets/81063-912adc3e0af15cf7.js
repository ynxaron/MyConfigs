"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[81063],{510161:(e,t,n)=>{n.d(t,{H:()=>s});var r=()=>n(594546);function s(e,t){(0,r().j)({environment:e,event:{eventName:"cdrr_page_delete_permanently",eventProperties:{page_id:t.pageId,from:t.from}}})}},358414:(e,t,n)=>{n.d(t,{W:()=>m,i:()=>c});var r=()=>n(66077),s=()=>n(423658),i=()=>n(396136),a=()=>n(749826),o=()=>n(826955),l=()=>n(815277),d=()=>n(824462);async function c(e){const{environment:t,sudoModeStore:n,pageBlockId:r,currentSpaceStore:i}=e,o=n.state.privatePageStore&&n.state.privatePageStore.id===r;if(t.device.isMobile||o||n.state.loading||n.state.error)return;await a().default.waitUntilStatsigReady();if(!a().default.checkGate({gateName:"enable_get_private_page_info_endpoint"}))return;const c=(null==i?void 0:i.isReady())&&(null==i?void 0:i.canAdmin()),u=await function(e,t){return(0,l().KQ)(e,{name:"sudo_mode",spaceId:t,userId:e.currentUser.id})}(t,null==i?void 0:i.id);if(!(r&&c&&i&&u))return;n.setState({...n.state,privatePageStore:void 0,loading:!0});const p=i.id,h=await d().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:r}});if("failed"===h.type)return void n.setState({...n.state,loading:!1,error:h.error});const g=h.data,b=m({environment:t,blockId:r,privateRecordCacheName:s().Gh,ancestorData:g,spaceId:p});n.setState({...n.state,privatePageStore:b,loading:!1,error:void 0})}function m(e){const{environment:t,privateRecordCacheName:n,ancestorData:s,spaceId:a,blockId:l}=e,d=new(r().Z)({name:n});for(const r of s)switch(r.table){case"block":case"collection":case"team":d.setRecord({pointer:{spaceId:a,table:r.table,id:r.value.id},userId:t.currentUser.id},{role:"editor",value:r.value})}const c=new(o().G)(t,{table:i().iU,id:l},{inMemoryRecordCache:d});return c.inMemoryRecordCache.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),c}},167830:(e,t,n)=>{n.d(t,{Z:()=>s});n(667294);var r=n(785893);const s=function(e){const{hasMarginTop:t}=e,s=(0,n(846550).yK)((e=>{const n={display:"block",marginBottom:4,fontSize:12,color:e.mediumTextColor};return t&&(n.marginTop=14),{style:n}}),[t]),{forId:i,children:a,style:o}=e;return(0,r.jsx)("label",{style:{...s.style,...o},htmlFor:i,children:a})}},431041:(e,t,n)=>{n.d(t,{L:()=>_});n(267602),n(653476);var r=n(667294),s=()=>n(142735),i=()=>n(696459),a=()=>n(352230),o=()=>n(998901),l=()=>n(104088),d=()=>n(529048),c=()=>n(448419),m=()=>n(198829),u=()=>n(255577),p=()=>n(66077),h=()=>n(219727),g=()=>n(396136),b=()=>n(513670),f=()=>n(269299),S=()=>n(728243),C=()=>n(826955),v=()=>n(388284),y=()=>n(118680),M=()=>n(928907),x=n(785893);function T(e){let{blockStore:t,filterDeletedPermissions:n}=e;const{mockBlockStore:i}=function(e){let{blockStore:t,filterDeletedPermissions:n}=e;const i=(0,h().O7)(),a=(0,s().VK)((()=>(0,b().Xh)(t.inMemoryRecordCache.data)),[t]),o=(0,r.useMemo)((()=>new(p().Z)({name:"adminContentSearch.deletedFromTrashPermissionsView",data:a,isTemporaryData:!0})),[a]),l=(0,S().Z)({unpersistedInMemoryRecordCache:o}),{mockBlockStore:d}=(0,s().VK)((()=>{const e=n?n(t):[],r=new(C().G)(i,{table:g().iU,id:t.id},{inMemoryRecordCache:o});return l.createAndCommit({userAction:"adminContentSearch.restoreDeletedFromTrashPermissionsOptimistically",perform:t=>{f().applyOperation({store:r,operation:{pointer:r,command:"set",path:["permissions"],args:e},transaction:t})}}),{inMemoryRecordCache:o,mockBlockStore:r}}),[i,t,o,l,n]);return{mockBlockStore:d}}({blockStore:t,filterDeletedPermissions:n}),o=(0,M().E)(i),l=(0,y().z)({permissionItems:o});return(0,x.jsx)(m().Z,{menuType:a().o.Popup,width:248,children:(0,x.jsx)(u().ZP,{type:u().iW.Vertical,initialFocus:void 0,sections:[{key:"deletedFromTrashPermissions",render:e=>(0,x.jsx)(v().Z,{...e}),items:l}]})})}var P=()=>n(947435),k=()=>n(824546);function _(e){let{blockStore:t,getValidDeletedPermissions:n,placementToOrigin:p,renderPopupOrigin:h,environment:g,includeNonRestoreActions:b,onRestoreOrDeletePage:f,from:S}=e;const C=(0,s().qz)(void 0,d().Z),v=(0,k().T)(),[y,M]=(0,r.useState)(!1),_=(0,P().Sq)({blockStore:t,getValidDeletedPermissions:n}),I=[(0,P().OX)({environment:g,pageStatus:"deleted_from_trash",popupStore:C,blockStore:t,from:S,handleOpenDeletedPermissionsMenu:()=>M(!0),includeNonRestoreActions:b,onRestoreOrDeletePage:f,..._}),(0,P().h7)({environment:g,from:S,pageStatus:"deleted_from_trash",popupStore:C,blockStore:t,includeNonRestoreActions:b,onRestoreOrDeletePage:f,..._})].filter(i().$K);return(0,x.jsx)(c().ZP,{popupType:l().k.Popup,alignmentToOrigin:o().Alignment.Start,placementToOrigin:p,style:v.popupMenu,render:()=>y?(0,x.jsx)(T,{blockStore:t,filterDeletedPermissions:n}):(0,x.jsx)(m().Z,{menuType:a().o.Popup,width:248,children:(0,x.jsx)(u().ZP,{type:u().iW.Vertical,initialFocus:void 0,sections:I})}),onClose:()=>{M(!1)},buttonPopupStore:C,renderOrigin:h})}},947435:(e,t,n)=>{n.d(t,{OX:()=>I,Sq:()=>_,h7:()=>w});n(670560),n(241792),n(667294);var r=()=>n(142735),s=()=>n(846550),i=()=>n(506347),a=()=>n(799891),o=()=>n(374844),l=()=>n(237874),d=()=>n(567319),c=()=>n(95886),m=()=>n(366825),u=()=>n(788860),p=()=>n(696459),h=()=>n(510161),g=()=>n(959137),b=()=>n(752127),f=()=>n(663366),S=()=>n(429725),C=()=>n(239482),v=()=>n(998901),y=()=>n(876822),M=()=>n(827973),x=()=>n(388284),T=()=>n(654133),P=()=>n(824546),k=n(785893);function _(e){const{getValidDeletedPermissions:t,blockStore:n}=e;return(0,r().VK)((()=>{var e;const r=C().nR(C().eG(n));if(Boolean((null==r?void 0:r.id)!==n.id))return{ancestorBlockStore:r,canRestoreAncestor:!0,canRestoreOriginalAccess:!1};const s=t?t(n):[],i=Boolean(n.getParentSpaceStore()&&0===s.length);return{ancestorBlockStore:r,canRestoreAncestor:!1,canRestoreOriginalAccess:!Boolean(null===(e=n.getParentBlockStore())||void 0===e?void 0:e.pathHasDeletedPermission())&&!i}}),[n,t])}function I(e){const t=(0,P().T)(),{environment:n,pageStatus:r,popupStore:s,blockStore:a}=e;async function l(){const e=(0,S().ZP)({store:a,pageVisitSource:i().tY.CopyLink}),t=await g().F.clipboardActions.load();await t.copyString({environment:n,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),s.setState({open:!1})}const c=[];switch(r){case"alive":case"in_trash":{const{handleOpenPermissionsMenu:n}=e;c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"change-permissions",render:e=>(0,k.jsx)(M().Z,{...e,icon:(0,d().I)(t),title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})}),action:n}}({iconStyle:t.changePermissionsIcon,action:n}),W({iconStyle:t.icon,action:l}));break}case"deleted_from_trash":{const{ancestorBlockStore:r,canRestoreAncestor:a,canRestoreOriginalAccess:m,handleOpenDeletedPermissionsMenu:p,includeNonRestoreActions:h}=e;if(r&&a){const e=()=>{const e=(0,S().ZP)({store:r,pageVisitSource:i().tY.DeletedFromTrashPageActions});b().D({environment:n,url:e}),s.setState({open:!1})};c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"go-to-parent-page",render:e=>(0,k.jsx)(M().Z,{...e,icon:(0,o().n)(t),title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.navigateToParent",defaultMessage:"Open parent in new tab"})}),action:n}}({iconStyle:t.openLinkIcon,action:e}))}m&&c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"view-original-permissions",render:e=>(0,k.jsx)(M().Z,{...e,icon:(0,d().I)(t),title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.viewOriginalPermissions",defaultMessage:"View original permissions"})}),action:n}}({iconStyle:t.changePermissionsIcon,action:p})),h&&c.push(W({iconStyle:t.icon,action:l}));break}default:(0,p().t1)(r)}if(0!==c.length)return{key:"actions",render:e=>(0,k.jsx)(x().Z,{...e}),items:c}}function w(e){const{from:t,pageStatus:n,environment:s,blockStore:i,popupStore:o,onRestoreOrDeletePage:l}=e,d=(0,P().T)(),g=[],b=(0,r().VK)((()=>{var e;return(null===(e=y().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)===i.id}),[i]);switch(n){case"alive":return;case"in_trash":{async function S(){await f().DV({environment:s,block:i,spaceId:i.getSpaceId(),from:"adminContentSearch.restorePage",restoreWithoutNavigation:!0}),null==l||l(i.id),o.setState({open:!1})}function C(){const e=l?e=>{e.length>1&&a().log({level:"warning",from:"usePageCellActions",type:"multipleBlocksDeletedFromTrash",data:{blockIds:e.map((e=>e.id))}}),e.length>0&&l(e[0].id)}:void 0;f().Rn({environment:s,blocks:[i],from:"adminContentSearch",handleSuccess:e}),o.setState({open:!1})}g.push(R({iconStyle:d.icon,action:S,disable:!1}),function(e){let{iconStyle:t,action:n}=e;return{key:"delete-from-trash",render:e=>(0,k.jsx)(j,{...e,icon:(0,c().y)(t),title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.deleteFromTrash",defaultMessage:"Delete from Trash"})}),action:n}}({iconStyle:d.icon,action:C}));break}case"deleted_from_trash":{const{canRestoreAncestor:v,canRestoreOriginalAccess:T,includeNonRestoreActions:_}=e,I=v||!T,w=v?(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.restoreParent",defaultMessage:"Restore the parent page to restore the original permissions."}):T?void 0:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.pageCannotBeRestored",defaultMessage:"This page cannot have its original permissions restored."});g.push(R({iconStyle:d.icon,action:async()=>{await f().Fy({environment:s,blockStore:i,spaceId:i.getSpaceId(),from:`${t}.restoreRetainedPage`}),null==l||l(i.id),o.setState({open:!1})},disable:I,tooltip:w}),function(e){let{iconStyle:t,action:n}=e;return{key:"restore-to-private",render:e=>(0,k.jsx)(M().Z,{...e,icon:(0,m().s)(t),shouldWrapCaption:!0,title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.restoreToPrivate",defaultMessage:"Restore to Private pages"})}),action:n}}({iconStyle:d.icon,action:async()=>{await f().gW({environment:s,blockStore:i,spaceId:i.getSpaceId(),navigateToPage:b,from:`${t}.restoreRetainedPage`}),null==l||l(i.id),o.setState({open:!1})}})),_&&g.push(function(e){let{iconStyle:t,action:n}=e;return{key:"purge",render:e=>(0,k.jsx)(j,{...e,icon:(0,c().y)(t),title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.purge",defaultMessage:"Permanently delete"})}),action:n}}({iconStyle:d.icon,action:()=>{f().Yk({environment:s,blockStore:i,handleSuccess:e=>{null==l||l(e),h().H(s,{pageId:i.id,from:"content_search"})}}),o.setState({open:!1})}}));break}default:(0,p().t1)(n)}return{key:"inactive-page-actions",render:e=>(0,k.jsx)(x().Z,{...e,topBorder:!0}),items:g}}function j(e){const t=(0,s().yK)((e=>({destructiveMenuItemHover:{background:e.tint.uiRedHover},destructiveMenuItemPressed:{background:e.tint.uiRedPressed}})),[]);return(0,k.jsx)(M().Z,{...e,isRedOnHover:!0,hoveredStyle:t.destructiveMenuItemHover,pressedStyle:t.destructiveMenuItemPressed})}function R(e){let{iconStyle:t,action:n,disable:r,tooltip:s}=e;const i=e=>(0,k.jsx)(M().Z,{...e,disabled:r,disallowTabbing:r,disabledFeedback:!0,icon:(0,m().s)(t),shouldWrapCaption:!0,title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.restore",defaultMessage:"Restore to original location"})});return{key:"restore",render:e=>s?(0,k.jsx)(T().Z,{textWrap:!0,renderTooltip:()=>s??null,placement:v().Placement.Right,render:t=>(0,k.jsx)("div",{...t,children:i(e)})}):i(e),action:n}}function W(e){let{iconStyle:t,action:n}=e;return{key:"copy-link",render:e=>(0,k.jsx)(M().Z,{...e,icon:(0,l().N)(t),title:(0,k.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:n}}},824546:(e,t,n)=>{n.d(t,{T:()=>o});var r=()=>n(142735),s=()=>n(846550),i=()=>n(779733),a=()=>n(845465);function o(){const e=(0,r().VK)((()=>(0,i().wZ)()),[]);return(0,s().yK)((t=>({changePermissionsIcon:{height:18,width:18,fill:"currentColor"},icon:{marginRight:3,height:15,width:15,fill:"currentColor"},destructiveMenuItemHover:{background:t.tint.uiRedHover},destructiveMenuItemPressed:{background:t.tint.uiRedPressed},openLinkIcon:{marginRight:3,height:15,width:15,fill:"currentColor",transform:"rotate(-45deg)"},popupMenu:{width:248},popupShareModal:{width:a().SD,...e&&{borderRadius:a().q5}}})),[e])}},118680:(e,t,n)=>{n.d(t,{v:()=>B,z:()=>O});n(670560),n(241792);var r=n(667294),s=()=>n(409873),i=()=>n(788860),a=()=>n(654133),o=()=>n(219727),l=()=>n(142735),d=()=>n(846550),c=()=>n(696056),m=()=>n(826955),u=()=>n(668001),p=()=>n(18748),h=()=>n(634760),g=n(785893);function b(e){let{botId:t}=e;const n=(0,i().YB)(),r=(0,o().O7)(),s=(0,l().VK)((()=>m().t1.createUniqueRootStore(r,{table:c().cZ,id:t})),[t,r]),a=(0,l().VK)((()=>s.getDisplayName(n)),[s,n]),u=(0,l().VK)((()=>s.getParentStore()),[s]),b=(0,l().VK)((()=>{if(u){if(u instanceof m().U6)return u.getDisplayName(n);if(u instanceof m().H2)return u.getName()}}),[u,n]),S=(0,d().yK)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return a?(0,g.jsx)(p().ZP,{desktopIconStyle:S.desktopIconStyle,icon:(0,g.jsx)(h().Z,{botStore:s,size:24}),title:a,caption:(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:b}})}):(0,g.jsx)(f,{})}function f(){const e=(0,d().yK)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return(0,g.jsxs)("div",{style:e.container,children:[(0,g.jsx)(u().Z,{style:e.icon}),(0,g.jsxs)("div",{style:e.textContainer,children:[(0,g.jsx)(u().Z,{emphasized:!1,style:e.title}),(0,g.jsx)(u().Z,{emphasized:!1,style:e.byline})]})]})}var S=()=>n(923398),C=()=>n(876822),v=()=>n(943620);const y=(0,i().vU)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function M(e,t){switch(t){case"editor":return e.formatMessage(y.editor);case"read_and_write":return e.formatMessage(y.readAndWrite);case"comment_only":return e.formatMessage(y.commentOnly);case"reader":return e.formatMessage(y.reader);case"none":return e.formatMessage(y.none)}}function x(e){let{name:t,icon:n,role:r}=e;const s=(0,i().YB)(),a=(0,l().VK)((()=>C().default.state.currentSpaceStore),[]),o=M(s,r),c=(0,d().yK)((e=>({defaultIcon:{height:18,width:18,color:e.lightTextColor,fill:"currentColor"},defaultGroupIcon:{height:20,width:20,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,g.jsx)(p().ZP,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:(0,g.jsx)(v().Z,{disabled:!0,icon:n&&a?{pointer:a.pointer,icon:n}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,S().O)(c.defaultGroupIcon)}),title:t||(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}}),caption:(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}})})}var T=()=>n(933868),P=()=>n(383694);function k(e){let{permissionItem:t}=e;const n=(0,i().YB)(),r=(0,l().VK)((()=>C().default.state.currentSpaceStore),[]),s=(0,l().VK)((()=>{var e;return null===(e=C().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),a=null==t?void 0:t.role,o=(0,T().iC)(a)?M(n,a):void 0;return(0,g.jsx)(p().ZP,{desktopIconStyle:{alignSelf:"center",width:24},icon:r?(0,g.jsx)(P().p,{disabled:!0,store:r,size:24}):void 0,title:s,caption:(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}})})}var _=()=>n(594968),I=()=>n(306164);function w(e){let{teamId:t,role:n,onlyOwners:r}=e;const s=(0,o().O7)(),a=(0,i().YB)(),d=(0,l().VK)((()=>new(m().zX)(s,{table:I().e0,id:t})),[s,t]),c=M(a,n),u=(0,l().VK)((()=>d.getName()),[d]),h=u||(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return(0,g.jsx)(p().ZP,{desktopIconStyle:{alignSelf:"center",width:24},icon:u?(0,g.jsx)(P().p,{disabled:!0,store:d,size:24}):(0,_().x)(),title:h,caption:r?(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}}):(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}})})}var j=()=>n(989478),R=()=>n(499110),W=()=>n(981583);function Z(e){let{userId:t,role:n,isGuest:r}=e;const s=(0,i().YB)(),a=(0,o().O7)(),{userStore:d,userName:c}=(0,l().VK)((()=>{const e=new(m().U6)(a,{table:j().KJ,id:t}),n=(0,R().Nz)(s,e.getModel());return{userStore:e,userName:n}}),[a,t,s]),u=M(s,n);return(0,g.jsx)(p().ZP,{desktopIconStyle:{alignSelf:"center",width:24},icon:(0,g.jsx)(W().Z,{userStore:d,size:24}),title:c,caption:r?(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}}):(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}})})}const V=(0,i().vU)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function L(e){let{blockStore:t}=e;const r=(0,n(928907).E)(t),o=function(e,t){const{mostPermissivePublicItem:n,spacePermission:r,groupPermissions:o,guestUserPermissions:l,memberUserPermissions:d,teamSharePermissions:c,teamOwnerSharePermissions:m,botPermissions:u}=e,p=r&&"none"!==r.permissionItem.role;if(n&&"none"!==n.permissionItem.role)return(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!p&&0===o.length&&0===l.length&&0===d.length&&0===c.length&&0===m.length&&0===u.length)return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),(0,g.jsx)(a().Z,{render:e=>(0,g.jsx)("div",{...e,children:(0,s().D)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,g.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})})]});const h=[];p?h.push(t.formatMessage(V.sharedWithWorkspaceMembers)):(m.length>0&&0===c.length?h.push(t.formatMessage(V.sharedWithTeamOwners)):c.length>0&&h.push(t.formatMessage(V.sharedWithTeamMembers)),d.length>0&&h.push(t.formatMessage(V.sharedWithMembers,{numMembers:d.length})),o.length>0&&h.push(t.formatMessage(V.sharedWithGroups,{numGroups:o.length})));l.length>0&&h.push(t.formatMessage(V.sharedWithGuests,{numGuests:l.length}));u.length>0&&h.push(t.formatMessage(V.sharedWithBots,{numBots:u.length}));return h.join(t.formatMessage(V.separator))}(r,(0,i().YB)()),l=O({permissionItems:r});return(0,g.jsx)(n(365766).Nz,{title:o,items:l,disabled:0===l.length})}function O(e){let{permissionItems:t}=e;return[...t.spacePermission?[{key:"space-permission",render:e=>{var n;return(0,g.jsx)(k,{...e,permissionItem:null===(n=t.spacePermission)||void 0===n?void 0:n.permissionItem})},action:()=>{}}]:[],...t.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>(0,g.jsx)(w,{...t,onlyOwners:!0,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>(0,g.jsx)(w,{...t,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.groupPermissions.map((e=>({key:e.id,render:()=>(0,g.jsx)(x,{name:e.name,icon:e.icon,role:e.role}),action:()=>{}}))),...t.memberUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(Z,{...t,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.guestUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(Z,{...t,isGuest:!0,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.botPermissions.map((e=>({key:e.bot_id,render:t=>(0,g.jsx)(b,{...t,botId:e.bot_id}),action:()=>{}})))]}const B=r.memo(L)},928907:(e,t,n)=>{n.d(t,{E:()=>u});n(670560),n(267602),n(653476),n(470928),n(241792),n(731107);var r=()=>n(142735),s=()=>n(933868),i=()=>n(458196),a=()=>n(542487),o=()=>n(239482),l=()=>n(122479),d=()=>n(467806),c=()=>n(18281),m=()=>n(897257);function u(e){return(0,r().VK)((()=>{const t=m().subscriptionDataStoreInstance.state,n=t?(0,c().CM)(t):[],r=(0,l().YO)(e),u=d().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group)),p=(0,o().VP)(e),h=r.find((e=>{let{permissionItem:t}=e;return s().$D(t)})),g=r.find((e=>{let{permissionItem:t}=e;return s().Ir(t)})),b=p?r.find((e=>{let{permissionItem:t}=e;return(0,a().J2)(t,p.id)})):void 0,f=r.map((e=>{let{permissionItem:t}=e;return t})).filter(s().zU),S=r.map((e=>{let{permissionItem:t}=e;return t})).filter(s().LW),C=r.map((e=>{let{permissionItem:t}=e;return t})).filter(s().hV).reduce(((e,t)=>{const n=t.group_id,r=t.role,s=u.find((e=>e.group_id===n));if(s){const t={group_id:s.group_id,id:(0,i().L9)({spacePermissionGroupId:s.group_id,spaceId:s.space_id}),name:s.name,space_id:s.space_id,icon:s.icon,version:s.getVersion(),role:r};e.push(t)}return e}),[]),[v,y]=r.map((e=>{let{permissionItem:t}=e;return t})).filter(s().jg).reduce(((e,t)=>{const r=n.find((e=>e.userId===t.user_id));return Boolean(r&&!s().zz(r.role)&&!s().J5(r.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:C,mostPermissivePublicItem:h,spacePermission:g,teamPermission:b,teamSharePermissions:f,teamOwnerSharePermissions:S,guestUserPermissions:v,memberUserPermissions:y,botPermissions:r.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,s().FB)(e)))}}),[e])}},886123:(e,t,n)=>{n.d(t,{_:()=>i});var r=()=>n(677559);const s=new(r().Ss)("shareMenuContainer",(async()=>await Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(84885),n.e(90698),n.e(37358),n.e(7312),n.e(5242),n.e(31189),n.e(90424),n.e(69343),n.e(81580),n.e(84325),n.e(2933),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(4387),n.e(11189),n.e(53329),n.e(71896),n.e(72586),n.e(53335),n.e(46616),n.e(54940),n.e(20224),n.e(46546),n.e(98721),n.e(50471),n.e(49498),n.e(2971),n.e(20634),n.e(91253),n.e(63707),n.e(61171),n.e(4014),n.e(63502),n.e(7678),n.e(5006),n.e(20919),n.e(75377),n.e(99590),n.e(52435),n.e(69437),n.e(81063),n.e(75066),n.e(81917),n.e(88128),n.e(97934),n.e(37317),n.e(91e3),n.e(18162),n.e(91752),n.e(78517),n.e(99537),n.e(80730),n.e(11770),n.e(83962),n.e(62084),n.e(79289),n.e(21862),n.e(41589),n.e(71641),n.e(23006),n.e(72646),n.e(10553),n.e(74879),n.e(67601),n.e(37239),n.e(40692),n.e(20683),n.e(22467),n.e(27039),n.e(97083),n.e(52065),n.e(18534),n.e(39179),n.e(77555),n.e(38632),n.e(78856),n.e(19592),n.e(47559),n.e(22371),n.e(73230),n.e(25911),n.e(54843),n.e(76540),n.e(22337),n.e(93536),n.e(53936),n.e(23721),n.e(32175),n.e(66283),n.e(22154),n.e(58586)]).then(n.bind(n,622026)))),i=(0,r().kF)(s,(e=>e.ShareMenuContainer))},323342:(e,t,n)=>{n.d(t,{$:()=>m});n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(470928),n(30005);var r=n(667294),s=()=>n(142735),i=(n(653476),()=>n(696459)),a=()=>n(728670);var o=()=>n(933868),l=()=>n(239482),d=()=>n(467806),c=()=>n(18281);function m(e){let{subscriptionData:t}=e;const{userIsMember:n,permissionGroupExists:m}=(0,s().VK)((()=>{if(!t)return{userIsMember:()=>!1,permissionGroupExists:()=>!1};const e=new Set;c().hn(t).forEach((t=>{e.add(t.userId)}));const n=new Set;d().Z.state.permissionGroupsAndMemberCounts.forEach((e=>{n.add(e.group.group_id)}));return{userIsMember:t=>e.has(t),permissionGroupExists:e=>n.has(e)}}),[t]);return(0,r.useCallback)((e=>{var t;const r=null===(t=e.getPermissionItems().find(o().gG))||void 0===t?void 0:t.previous_permissions;return r?function(e){var t;let{deletedPermissions:n,ancestorPath:r,userIsMember:s,permissionGroupExists:o}=e;const l=null===(t=(0,a().bs)(r))||void 0===t?void 0:t.id;return n.filter((e=>{const t=e.type;switch(t){case"trusted_domain_permission":case"public_permission":case"deleted_permission":case"bot_permission":return!1;case"exclusive_user_permission":case"user_permission":return s(e.user_id);case"explicit_team_guest_permission":case"explicit_team_owner_permission":case"explicit_team_permission":return e.team_id===l;case"group_permission":return o(e.group_id);case"team_owner_permission":case"team_permission":case"restricted_permission":case"space_permission":return!0;default:(0,i().t1)(t)}}))}({deletedPermissions:r,ancestorPath:(0,l().fJ)(e),userIsMember:n,permissionGroupExists:m}):[]}),[n,m])}},845465:(e,t,n)=>{n.d(t,{J4:()=>i,S2:()=>h,SD:()=>c,ZY:()=>f,bY:()=>S,fV:()=>b,gf:()=>o,gr:()=>a,lw:()=>C,o8:()=>p,q5:()=>d,u0:()=>g,w5:()=>m});var r=()=>n(890085),s=()=>n(641506);const i=16,a=20,o=8,l=10,d=12,c=456,m=24,u=24,p=48;function h(e){let{theme:t,inheritanceBannerEnabled:n,isMobile:r}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:r?0:i,marginRight:r?0:i,marginTop:4,marginBottom:8}}function g(e){let{isRedesignEnabled:t,isMobile:n}=e;return t?{...f({isMobile:n}),width:"unset",height:p,paddingTop:6,paddingBottom:6}:{}}function b(e){let{environment:t,isRedesignEnabled:n}=e;return n?(0,s().yv)(t,t.device.isMobile?"UISmall":"UIRegular"):(0,s().yv)(t,"UISmall")}function f(e){let{isMobile:t}=e;return{marginLeft:t?0:o,marginRight:t?0:o,borderRadius:l,transition:"background 150ms ease-out"}}function S(e){let{isMobile:t}=e;return t?12:10}function C(e){let{theme:t,colorOverride:n,size:s=u,useLargeBorderRadius:i,useLightBackgroundColor:a,icon:o}=e;return{background:n||(o&&(0,r().V2)(o)?(0,r().Pk)({icon:o,mode:t.mode,useLightGrayColor:a}):a?t.lightDividerColor:t.regularDividerColor),width:s,height:s,borderRadius:i?6:"0.25em"}}},885414:(e,t,n)=>{n.d(t,{Z:()=>i});var r=()=>n(876822);class s extends(()=>n(263184))().default{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,r=n(749826).default.checkGate({gateName:"enable_get_private_page_info_endpoint"}),s=this.doesUserAlreadyHaveEditorAccessOnBlock(e.id);return t&&r&&this.state.changePermissionsEnabled&&!s}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const n=null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),s="enterprise"===(null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&n&&s}doesUserAlreadyHaveEditorAccessOnBlock(e){const t=r().default.state.currentSpaceStore;if(!t)return!1;return n(826955).G.createChildStore(t,{table:"block",id:e}).canAdmin()}}const i=s},724568:(e,t,n)=>{n.d(t,{j:()=>s});n(667294);var r=n(785893);const s=(0,n(827282).IU)("lockShield",{viewBox:"0 0 21 25",svg:(0,r.jsx)("path",{d:"M10.418 24.75C10.6289 24.75 10.9453 24.668 11.25 24.5039C17.9766 20.8359 20.3203 19.1484 20.3203 14.8828V6.01172C20.3203 4.62891 19.7812 4.13672 18.6211 3.64453C17.3203 3.09375 12.9258 1.54688 11.6367 1.125C11.2617 0.996094 10.8164 0.914062 10.418 0.914062C10.0312 0.914062 9.58594 1.01953 9.19922 1.125C7.92188 1.47656 3.52734 3.10547 2.22656 3.64453C1.06641 4.125 0.527344 4.62891 0.527344 6.01172V14.8828C0.527344 19.1484 2.87109 20.8242 9.59766 24.5039C9.90234 24.668 10.2188 24.75 10.418 24.75ZM10.418 22.2891C10.2539 22.2891 10.0781 22.2305 9.75 22.0195C4.38281 18.7617 2.71875 17.8711 2.71875 14.4375V6.38672C2.71875 5.97656 2.8125 5.8125 3.12891 5.68359C4.86328 4.98047 8.23828 3.86719 9.80859 3.24609C10.0664 3.15234 10.2539 3.11719 10.418 3.11719C10.5938 3.11719 10.7695 3.15234 11.0273 3.24609C12.6094 3.86719 15.9492 5.05078 17.707 5.68359C18.0352 5.80078 18.1172 5.97656 18.1172 6.38672V14.4375C18.1172 17.8945 16.3945 18.832 11.0977 22.0195C10.7578 22.2305 10.5938 22.2891 10.418 22.2891ZM6.22266 16.7695C6.22266 17.6602 6.62109 18.0703 7.44141 18.0703H13.4062C14.2266 18.0703 14.625 17.6602 14.625 16.7695V12.1992C14.625 11.3906 14.2969 10.9805 13.6406 10.9219V9.58594C13.6406 7.44141 12.3398 5.98828 10.4297 5.98828C8.50781 5.98828 7.21875 7.44141 7.21875 9.58594V10.9102C6.55078 10.9805 6.22266 11.3906 6.22266 12.1992V16.7695ZM8.57812 10.8984V9.46875C8.57812 8.17969 9.31641 7.32422 10.4297 7.32422C11.5312 7.32422 12.2695 8.17969 12.2695 9.46875V10.8984H8.57812Z"})})},890598:(e,t,n)=>{n.d(t,{h:()=>s});n(667294);var r=n(785893);const s=(0,n(827282).IU)("mailRound",{viewBox:"0 0 17 12",svg:(0,r.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})},594968:(e,t,n)=>{n.d(t,{x:()=>s});n(667294);var r=n(785893);const s=(0,n(827282).IU)("privateTeam",{viewBox:"0 0 28 28",svg:(0,r.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},567319:(e,t,n)=>{n.d(t,{I:()=>s});n(667294);var r=n(785893);const s=(0,n(827282).IU)("settingsSecurity",{viewBox:"0 0 11 20",svg:(0,r.jsx)("path",{d:"M4.92129 19.3231C5.26719 19.627 5.74092 19.6649 6.07178 19.3383L8.38779 16.9913C8.71865 16.6571 8.70361 16.1558 8.38027 15.8292L7.2749 14.7127L8.92168 13.0569C9.2375 12.7379 9.22998 12.229 8.90664 11.8948L7.41026 10.3757C9.44805 9.35026 10.5985 7.64127 10.5985 5.62847C10.5985 2.78016 8.32012 0.486328 5.49277 0.486328C2.66543 0.486328 0.394531 2.77257 0.394531 5.62847C0.394531 7.67166 1.54502 9.50217 3.37979 10.3301V17.4622C3.37979 17.7357 3.4625 18.0471 3.69561 18.2446L4.92129 19.3231ZM5.49277 17.9863L4.68066 17.166V9.34266C2.95869 8.9629 1.73301 7.4438 1.73301 5.62847C1.73301 3.53972 3.40986 1.84592 5.49277 1.84592C7.57569 1.84592 9.24502 3.53212 9.24502 5.62847C9.24502 7.42101 8.01181 8.96289 6.13194 9.38824V11.0289L7.57569 12.4872L6.03418 14.0214V15.3887L7.04931 16.3989L5.49277 17.9863ZM5.49277 5.67405C6.23721 5.67405 6.83877 5.06641 6.83877 4.32205C6.83877 3.5777 6.23721 2.97005 5.49277 2.97005C4.74834 2.97005 4.1543 3.5701 4.1543 4.32205C4.1543 5.06641 4.75586 5.67405 5.49277 5.67405Z"})})}}]);