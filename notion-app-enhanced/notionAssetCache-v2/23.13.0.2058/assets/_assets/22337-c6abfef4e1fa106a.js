"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22337,95986],{636133:(e,t,i)=>{i.d(t,{Ce:()=>o,IC:()=>c,Jv:()=>g,QF:()=>u,Yc:()=>n,az:()=>r,eO:()=>d,s4:()=>l,ti:()=>a});var s=()=>i(594546);function n(e,t){s().K4(e,"workspace_creation_ability",t)}function a(e,t){s().K4(e,"workspace_creation_setting_updated",t)}function o(e,t){s().K4(e,"claimable_spaces_viewed",t)}function r(e,t){s().K4(e,"space_transfer_requested",t)}function l(e,t){s().K4(e,"space_transfer_completed",t)}function d(e,t){s().K4(e,"space_claim_upgrade_requested",t)}function c(e,t){s().K4(e,"space_claim_upgrade_completed",t)}function u(e,t){s().K4(e,"space_claim_deletion_started",t)}function g(e,t){s().K4(e,"space_claim_deletion_canceled",t)}},636413:(e,t,i)=>{i.d(t,{Z:()=>f});i(241792),i(667294);var s=()=>i(142735),n=()=>i(846550),a=()=>i(697466),o=()=>i(788860),r=()=>i(18610),l=()=>i(308186),d=()=>i(128119),c=()=>i(827973),u=()=>i(448419),g=()=>i(255577),p=()=>i(946563),m=i(785893);const f=function(e){let{currentLocale:t,pickerLabel:a,confirm:c,onChange:f,origin:x,showGlobeIcon:y}=e;const b=(0,n().Fg)(),v=(0,i(219727).O7)(),j=(0,o().YB)(),C=(0,s().qz)(void 0,i(529048).Z),{device:w}=v,M=(0,s().VK)((()=>"ja-JP"===t),[t]),T=(0,i(466970).E)("polyglot");return w.isMobile?null:(0,m.jsx)(u().ZP,{onClick:()=>{i(155055).xU(v,{origin:x})},popupType:u().Z4.Popup,buttonPopupStore:C,renderOrigin:e=>(0,m.jsxs)(i(265640).D,{style:{marginLeft:-8,paddingLeft:8,paddingRight:8,display:"flex",alignItems:"center",...y&&{color:b.icon.secondary}},...e,children:[y&&(0,i(81979).o)({width:16,height:16,fill:b.icon.secondary,marginRight:4}),a||h(t,j).label,(0,r().ay)(t)&&!M&&(0,m.jsx)(p().Z,{desktopStyle:{marginLeft:4},children:(0,m.jsx)(o()._H,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})}),(0,i(374289).i)({width:10,marginLeft:4,fill:y?b.icon.secondary:b.lightIconColor})]}),placementToOrigin:d().Iw.Bottom,alignmentToOrigin:d().lU.Start,render:e=>{let s;s=T?[...r().tp,...r().is]:[...r().tp];const n=[{key:"languages",render:e=>(0,m.jsx)(i(388284).Z,{...e,topBorder:0!==e.index}),items:s.map((i=>{const s={key:i,render:e=>function(e,t,i,s){const{label:n,caption:a}=h(e,s);return(0,m.jsx)(S,{label:n,caption:a,focused:t,props:i,locale:e})}(i,e.focused,e,j),action:()=>{!function(e,t,i,s,n){t!==e&&function(e,t,i,s){const{label:n}=h(e,t);if(i){const t=()=>{s(e)};l().vC({showCancel:!0,keepFocus:!1,message:(0,m.jsx)(o()._H,{id:"languagePicker.changeLanguage.confirmationMessage",defaultMessage:"Are you sure you want to update the language to {language}?",values:{language:n}}),items:[{label:(0,m.jsx)(o()._H,{id:"languagePicker.changeLanguage.updateButton.label",defaultMessage:"Update"}),color:"red",onAccept:t}]})}else s(e)}(e,i,s,n)}(i,t,j,c,f),e.close()}};return s}))}],a={menuType:i(352230).o.Popup,width:240};return(0,m.jsx)(i(198829).Z,{className:i(247724).hKO,...a,children:(0,m.jsx)(g().ZP,{type:g().iW.Vertical,initialFocus:void 0,sections:n})})}})};function h(e,t){return(0,a().t)(t)[e]}function S(e){const{locale:t}=e,i=(0,n().Fg)(),a=(0,s().VK)((()=>"ja-JP"===t),[t]);return(0,m.jsx)(c().Z,{...e.props,title:(0,m.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,m.jsx)("div",{style:{...e.style,marginRight:0},children:e.label})}),caption:e.caption&&(0,m.jsx)("span",{style:{color:i.mediumTextColor},children:e.caption}),shouldWrapCaption:!0,right:(0,r().ay)(e.locale)&&!a&&(0,m.jsx)(p().Z,{children:(0,m.jsx)(o()._H,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})})})}},486595:(e,t,i)=>{i.d(t,{Z:()=>S,d:()=>h});i(667294);var s=()=>i(142735),n=()=>i(245015),a=()=>i(788860),o=()=>i(155055),r=()=>i(824462),l=()=>i(308186),d=()=>i(231077),c=()=>i(332504),u=()=>i(148882),g=()=>i(838266),p=()=>i(661641),m=()=>i(504117),f=i(785893);async function h(e){let{locale:t,environment:i,origin:s}=e;o().A0(i,{locale:t,origin:s});const a=await r().callApi({eventName:"setlocale",environment:i,data:{locale:t}});"success"===a.type?(n().Z.set("preferredLocale",t),await u().transactionQueue.drain(),i.device.isElectron?d().refreshAll({includeFocusedWindow:!0}):window.location.reload(!0)):l().x2(a)}const S=function(e){const t=(0,i(219727).O7)(),{device:n,WindowSizeStore:o}=t,r=(0,s().VK)((()=>o.state.paddingLeftCSS),[o]),l=(0,s().VK)((()=>o.state.paddingRightCSS),[o]),d=(0,s().VK)((()=>g().default.state.highlightedSetting===g().R.LanguageSetting),[]),u=(0,i(846550).yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"auto",height:"auto",paddingLeft:n.isMobile?r:0,paddingRight:n.isMobile?l:0,...d?{backgroundColor:e.buttonHoveredBackground,marginLeft:-1*(0,m().kN)(n.isMobile),marginRight:-1*(0,m().kN)(n.isMobile),paddingLeft:(0,m().kN)(n.isMobile),paddingRight:(0,m().kN)(n.isMobile),marginTop:-1*(0,c().f)(n.isMobile),marginBottom:-1*(0,c().f)(n.isMobile)+5,paddingTop:(0,c().f)(n.isMobile)/2,paddingBottom:(0,c().f)(n.isMobile)/2}:{}}})),[n.isMobile,r,l,d]);return(0,f.jsx)("div",{style:u.container,children:(0,f.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,f.jsxs)(i(212493).jX,{direction:"column",gap:6,children:[(0,f.jsx)(p().q,{id:"languageRegionSettings.language.label",styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,f.jsx)(a()._H,{id:"languageRegionSettings.language.label",defaultMessage:"Language"})}),(0,f.jsx)(p().q,{id:"languageSettings.languageSwitcher.subtitle",styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,f.jsx)(a()._H,{id:"languageSettings.languageSwitcher.subtitle",defaultMessage:"Change the language used in the user interface."})})]}),(0,f.jsx)(i(636413).Z,{confirm:!0,onChange:e=>h({locale:e,environment:t,origin:"languageSettings"}),currentLocale:e.locale,origin:"languageSettings"})]})})}},91826:(e,t,i)=>{i.d(t,{AU:()=>I,Lb:()=>w,Mw:()=>C,VR:()=>k,Wc:()=>A,fm:()=>M});i(667294);var s=()=>i(219727),n=()=>i(846550),a=()=>i(714230),o=()=>i(357808),r=()=>i(667067),l=()=>i(757665),d=()=>i(779653),c=()=>i(332087),u=()=>i(691119),g=()=>i(788860),p=()=>i(696459),m=()=>i(497065),f=()=>i(998901),h=()=>i(661641),S=()=>i(906651),x=()=>i(654133),y=()=>i(360964),b=()=>i(83315),v=()=>i(213004),j=i(785893);function C(e){let{organizationOnboardingInfo:t}=e;const i=(0,s().O7)(),n=I(),r=(0,g().YB)();if(!t||"ineligible"===t.onboardingStatus)return null;const{buttonLabel:l,onClick:d}=w({environment:i,organizationOnboardingInfo:t});return(0,j.jsxs)("div",{style:n.bannerContainer,children:[(0,j.jsxs)("div",{style:n.title,children:[(0,j.jsx)("img",{src:a().Z.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77},alt:"Organization onboarding icon"}),(0,j.jsx)(h().q,{styleName:"UITitle-22px/Semibold",children:r.formatMessage(A.title)}),(0,j.jsx)(h().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:r.formatMessage(A.byline)})]}),(0,j.jsx)(M,{}),(0,j.jsxs)(S().Z,{isLarge:!0,style:n.button,onClick:d,children:[l,(0,o().y)(n.iconArrow)]})]})}function w(e){let{environment:t,organizationOnboardingInfo:i}=e;switch(i.onboardingStatus){case"not_started":return{buttonLabel:(0,j.jsx)(g()._H,{id:"workspaceSettingsModal.organizationsBanner.startSetUpButton",defaultMessage:"Set up organization"}),onClick:()=>{m().c4({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,c().a5)({organizationId:c().L1,tabRoute:u().CO,queryParams:{[b().n1]:i.spaceId}})})}};case"domain_verified":return{buttonLabel:(0,j.jsx)(g()._H,{id:"workspaceSettingsModal.organizationsBanner.finishSetUpButton",defaultMessage:"Finish set up"}),onClick:()=>{m().c4({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,c().a5)({organizationId:i.organizationId,tabRoute:u().e_})})}};case"completed":return{buttonLabel:(0,j.jsx)(g()._H,{id:"workspaceSettingsModal.organizationsBanner.orgSettingsButton",defaultMessage:"Go to organization console"}),onClick:()=>{m().c4({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,c().a5)({organizationId:i.organizationId,tabRoute:u().CO})})}};default:(0,p().t1)(i)}}function M(){const e=I();return(0,j.jsxs)("div",{style:e.features,children:[(0,j.jsx)(_,{icon:r().Q,description:(0,j.jsx)(g()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationOwnerRole",defaultMessage:"<blue>A new organization owner role</blue> manages all workspace settings and owner permissions.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,j.jsx)(T,{chunks:t})}}})}),(0,j.jsx)(_,{icon:l().K,description:(0,j.jsx)(g()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationWideVisibility",defaultMessage:"<blue>Organization-wide visibility</blue> of people, sharing and security settings, and audit logs all in one place.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,j.jsx)(T,{chunks:t})}}})}),(0,j.jsx)(_,{icon:d().K,description:(0,j.jsx)(g()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.simplifiedSettingsManagement",defaultMessage:"<blue>Simplified settings management</blue> across organization, workspace, and teamspace levels.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,j.jsx)(T,{chunks:t})}}})})]})}function T(e){return(0,j.jsx)(h().q,{styleName:"UIRegular-14px/Medium",colorName:"uiBluePrimary",as:"span",children:e.chunks})}function _(e){const t=(0,n().yK)((e=>({container:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",gap:8},icon:{fill:e.icon.uiBluePrimary,height:16,width:16}})),[]);return(0,j.jsxs)("div",{style:t.container,children:[e.icon(t.icon),(0,j.jsx)(h().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:e.description})]})}function k(e){let{content:t,tooltipContent:i}=e;const s=I();return(0,j.jsx)(v().Z,{isPrimary:!0,style:s.bannerContainer,leftIcon:(0,r().Q)(s.icon),content:(0,j.jsxs)("div",{style:s.content,children:[t,(0,j.jsx)(x().Z,{placement:f().Placement.Bottom,alignment:f().Alignment.End,render:e=>(0,j.jsx)(y().Z,{...e,analyticsFrom:"organization_settings_migration_banner"}),renderTooltip:()=>i})]})})}function I(){return(0,n().yK)((e=>({bannerContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:20,padding:24,borderRadius:12,marginBlock:12,background:"dark"===e.mode?e.cardBackground:"#F0F6FD"},title:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6,width:"100%"},content:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},features:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:10,width:"100%"},icon:{height:16,width:16,fill:e.icon.secondary},button:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4}})),[])}const A=(0,g().vU)({title:{id:"organization.onboarding.modal.title",defaultMessage:"Get more from your Enterprise plan."},byline:{id:"organization.onboarding.modal.byline",defaultMessage:"Get a birdâ€™s-eye view of members, guests, and security settings across all your workspaces."}})},139428:(e,t,i)=>{i.r(t),i.d(t,{SpaceSettings:()=>Kh,UserName:()=>Dh});i(821057);var s=i(667294),n=()=>i(219727),a=()=>i(732811),o=()=>i(142735),r=()=>i(846550),l=()=>i(667067),d=()=>i(180789),c=()=>i(956057),u=()=>i(255393),g=()=>i(629719),p=()=>i(122792),m=()=>i(788860),f=()=>i(513670),h=()=>i(707513),S=()=>i(509417),x=()=>i(513461),y=()=>i(286310),b=()=>i(155055),v=()=>i(308186),j=()=>i(454393),C=()=>i(752127),w=()=>i(224597),M=()=>i(390054),T=()=>i(261930),_=()=>i(269299),k=()=>i(348141),I=(i(122556),i(582845),i(250570),i(533019),i(721473),i(788208),i(22624),i(267602),i(30005),()=>i(874459)),A=()=>i(431595),D=()=>i(741633),P=()=>i(586573),R=()=>i(696056),B=()=>i(989478),Z=()=>i(824462),U=()=>i(443269),H=()=>i(527278),O=()=>i(828946),E=()=>i(582665),L=()=>i(263184);class q extends L().default{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const V=new q;class N extends L().default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,i){if(i<=1||this.state.spaceId!==e)return;const s=(0,E().r)(t);if(this.state.filterStr!==s)return;const n=this.state.cachedResponses[i-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,i){this.updateResultHelper(e,t,{...i,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,i){const s=(0,E().r)(t);1!==t.pageNum&&this.state.spaceId===e&&this.state.filterStr===s?this.setState({spaceId:e,filterStr:s,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...i}}}):this.setState({spaceId:e,filterStr:s,cachedResponses:{[t.pageNum||1]:{...i}}})}}const F=new N,K=(0,m().vU)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function W(e){const{environment:t,spaceId:i}=e,s=await Z().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:i}});return"success"!==s.type?[]:s.data.results}async function z(e){const{environment:t,spaceId:i}=e;if(V.getState().spaceId!==i&&V.reset(),!i)return;const s=await O().x.searchActions.load(),[n,a]=await Promise.all([s.searchSpaceActorIds({environment:t,membersOnly:!1}),W({environment:t,spaceId:i})]),o={spaceId:i,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};n.userIds.forEach((e=>{o.allUserIds.add(e)})),n.botIds.forEach((e=>{o.allBotIds.add(e)})),a.forEach((e=>{var t;(t=e.actorId)!==R()._H.id&&t!==B().s$.id&&t!==B().el.id||o.allUserIds.has(e.actorId)?e.actorType!==B().KJ||o.allUserIds.has(e.actorId)?e.actorType!==R().cZ||o.allBotIds.has(e.actorId)||(o.allBotIds.add(e.actorId),o.removedBotIds.add(e.actorId)):(o.allUserIds.add(e.actorId),o.removedUserIds.add(e.actorId)):o.allUserIds.add(e.actorId)})),V.setState(o)}var G=()=>i(998411),Y=()=>i(630029),$=()=>i(559333),Q=(i(653476),i(241792),()=>i(816512)),J=()=>i(730388),X=()=>i(946563),ee=()=>i(523516),te=()=>i(826955),ie=()=>i(940125),se=i(785893);const ne=(0,m().XN)((function(e){const{parentStore:t,auditLogHistoricalUserStore:i,selectedActors:a,onChange:o,intl:r}=e,l=(0,n().O7)(),[d,c]=(0,s.useState)(new Set(a.map(ie().eW))),u=(0,se.jsx)(m()._H,{id:"auditlogActorFilter.title",defaultMessage:"User"}),g=(0,s.useCallback)((()=>{const e=Array.from(d).map(ie().Ij).filter((e=>void 0!==e));o(e)}),[d,o]),p=(0,s.useCallback)((()=>{const e=a.map(ie().eW);c(new Set(e))}),[a]),f=(0,s.useCallback)((e=>{"applyButton"!==e?p():g()}),[g,p]);return(0,se.jsx)(Y().Z,{mode:Y().z.Pill,title:u,icon:J().f,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==a?void 0:a.length)>0,onChange:e=>{c(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:f,labelText:{title:u,tokenInputPlaceholder:r.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:r.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:i,selectedActors:s,environment:n}=e;const{query:a}=t,{allUserIds:o,allBotIds:r}=i.getState(),l=100,d=await O().x.searchActions.load(),c=await d.searchActorsById({environment:n,query:a,userIds:[...o],botIds:[...r]}),u=[...c.users.map((e=>`notion_user:${e.id}`)),...c.bots.map((e=>`bot:${e.id}`))];if(a.length>0)return u.slice(0,l);const g=s.map(ie().eW),p=new Set(g),m=u.filter((e=>!p.has(e)));return[...g,...m].slice(0,Math.max(g.length,l))}({args:e,auditLogHistoricalUserStore:i,selectedActors:a,environment:l}),renderResultMenuItem:(e,s)=>{var n;const a=function(e,t){const i=(0,ie().Ij)(e);if(!i)return(0,Q().m3)(void 0);if("notion_user"===i.actorType)return(0,Q().m3)(function(e,t){const i=te().U6.createChildStore(t,{table:B().KJ,id:e});return i.getModel()}(i.actorId,t));return(0,Q().ON)(function(e,t){const i=te().Qx.createChildStore(t,{table:R().cZ,id:e});return i.getModel()}(i.actorId,t))}(e,t);return(0,se.jsx)(ae,{...s,item:e,tempActorSelections:d,showRemovedBadge:i.isUserOrBotRemoved(null===(n=a.asActor)||void 0===n?void 0:n.id),actor:a,intl:r})},renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),ae=(0,s.forwardRef)(((e,t)=>{const{item:i,intl:s,tempActorSelections:n,showRemovedBadge:a,actor:r}=e,l=(0,o().VK)((()=>(0,Q().$4)(s,r)),[s,r]);return(0,se.jsx)(ee().Z,{...e,ref:t,actor:r,useEmailAsTooltip:!0,checkState:n.has(i),userTitle:(0,se.jsxs)("div",{style:{display:"flex",gap:4},children:[l,a&&(0,se.jsx)(X().Z,{children:(0,se.jsx)(m()._H,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));ae.displayName="ResultMenuItem";const oe=(0,m().vU)({auditLogNotSupportedDateRangeError:{id:"auditLog.dateTimeRangeMenu.notSupportedDateRange",defaultMessage:"Audit Log retains events from the past year."}});const re=(0,m().XN)((function(e){const{spaceStore:t,intl:s}=e,[n,a]=(0,o().AF)(E().Z),[r,l,d]=(0,o().AF)(V),c=(0,o().qz)(void 0,$().X),u=(0,o().qz)(void 0,$().X),g=(0,I().Uu)((0,G().r)());return(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,se.jsx)(i(777539).Z,{mode:Y().z.Pill,focused:!1,title:(0,se.jsx)(m()._H,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:i(135796).C,value:n.timeRange,showButtons:"footer",onChange:e=>{a({...n,timeRange:e,pageNum:1})},minDate:g.minus({years:1}),maxDate:g.endOf("day"),customErrorMessage:e=>{if(e===i(544590).B.NOT_SUPPORTED)return s.formatMessage(oe.auditLogNotSupportedDateRangeError)}}),(0,se.jsx)(ne,{parentStore:t,auditLogHistoricalUserStore:d,selectedActors:n.actors,onChange:e=>{a({...n,actors:e,pageNum:1})}}),(0,se.jsx)(i(242716).Z,{lastSelectionStore:c,componentStore:u,onChange:e=>{a({...n,actions:e,pageNum:1})}})]})}));var le=()=>i(868614);function de(){return(0,se.jsx)(le().Z,{large:!0,style:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:h().Ue.medium,display:"flex",justifyContent:"space-between"},children:(0,se.jsx)("div",{style:{gap:8,display:"flex"},children:(0,se.jsx)(m()._H,{id:"auditlog.title",defaultMessage:"Audit log"})})})}var ce=()=>i(775377),ue=()=>i(524052),ge=()=>i(959137),pe=()=>i(285473),me=()=>i(154186),fe=()=>i(654133),he=()=>i(67961),Se=()=>i(286338),xe=()=>i(998901),ye=()=>i(749826),be=()=>i(421736);function ve(e){const{auditLogEntry:t,spaceStore:i,id:n}=e,a=(0,m().YB)(),l=(0,o().VK)((()=>{if(t.actor.actorType===B().KJ){const e=te().U6.createChildStore(i,{id:t.actor.actorId,table:B().KJ});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===R().cZ){const e=te().Qx.createChildStore(i,{id:t.actor.actorId,table:R().cZ});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[i,t]),d=(0,o().VK)((()=>{var e,t;if(l)return(null===(e=l.actorStore)||void 0===e?void 0:e.getDisplayName(a))??(null===(t=l.avatar)||void 0===t?void 0:t.name)}),[l,a]),c=(0,o().VK)((()=>{var e,t;if(l)return(null===(e=l.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=l.avatar)||void 0===t?void 0:t.email)}),[l]),u=(0,s.useMemo)((()=>{var e;if(t.actor.actorType===B().KJ)return(0,be().K)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),g=(0,r().yK)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),p=(0,s.createRef)();return(0,se.jsx)(fe().Z,{disableTooltip:je(p.current),renderTooltip:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{children:d}),(0,se.jsx)("div",{children:c})]}),placement:xe().Placement.Bottom,render:e=>(0,se.jsx)("div",{...e,style:g.container,children:(0,se.jsx)(be().Z,{id:n,...l,spaceRole:u})})})}function je(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var Ce=()=>i(997218);const we={id:"actor",headerTitle:(0,se.jsx)(m()._H,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,se.jsx)(ve,{spaceStore:e.spaceStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},Me={id:"event",headerTitle:(0,se.jsx)(m()._H,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,se.jsx)(i(664357).p,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},Te={id:"dateTimeAndMenu",headerTitle:(0,se.jsx)(m()._H,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,s=`event-${e.auditLogEntry.actionName}-${e.id}`,n=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(i(857411).t,{auditLogEntry:e.auditLogEntry,id:n}),(0,se.jsx)(Ie,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:s,dateTimeColumnId:n}})]})},widthData:{width:25},sortable:!0},_e=[we,Me,Te];function ke(){return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,se.jsx)("div",{children:(0,se.jsx)(he().Z,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,se.jsx)(m()._H,{id:"auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,se.jsx)(he().Z,{isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function Ie(e){const{auditLogEntry:t,ids:i}=e,s=(0,o().VK)((()=>(0,Se().F$)()),[]),a=(0,o().VK)((()=>ye().default.checkGate({gateName:"audit_log_event_name_column"})?ce().pz:ce().C9),[]),l=(0,m().YB)(),d=(0,n().O7)(),c=(0,r().Fg)(),u=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:6}})),[]);return(0,se.jsx)(fe().Z,{delayThreshold:80,placement:xe().Placement.Bottom,render:e=>(0,se.jsx)("div",{style:u.container,...e,children:(0,se.jsx)(me().Z,{style:u.button,onClick:async()=>{const e=await ge().F.clipboardActions.load();var n;e.copyString({environment:d,stringValue:(0,ce().eA)({auditLogEntry:t,intl:l,getAuditLogEventText:(n=i.eventColumnId,e=>{var t;return null===(t=document.getElementById(n))||void 0===t?void 0:t.textContent}),isTeamGuestsEnabled:s,csvColumnNames:a}),copiedMessage:e.clipboardMessages.copiedToClipboard})},children:(0,ue().U)({width:16,height:16,fill:c.mediumIconColor})})}),renderTooltip:()=>(0,se.jsx)(m()._H,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const Ae=(0,m().XN)((function(e){const{searchResponse:t,spaceStore:i}=e,[n,a]=(0,o().AF)(E().Z),l=t.results||[],d=t.hasMoreResults,c=Boolean(l.length),u=e=>{const t={...n,pageNum:e};a(t)},g=(0,r().yK)((e=>(0,pe().bE)({columnRenderInfo:_e,theme:e,containerMarginTop:0})),[]),p=l.map(((e,t)=>({id:t.toString(),auditLogEntry:e,spaceStore:i,isClickable:!1}))),f=(0,s.useCallback)((()=>{const e=n.sortOrder===P().NQ.CreatedOldest?P().NQ.CreatedNewest:P().NQ.CreatedOldest;a({...n,sortOrder:e,pageNum:1})}),[n,a]),h=(0,s.useMemo)((()=>({column:Te,sortAscending:n.sortOrder===P().NQ.CreatedOldest})),[n]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(pe().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:_e,rows:p,sortState:h,onSortStateChanged:f,renderNoRowsComponent:ke,styles:g}),c?(0,se.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,se.jsx)(Ce().v,{onClick:()=>{u(n.pageNum-1)},disabled:1===n.pageNum,children:(0,se.jsx)(m()._H,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,se.jsx)(Ce().v,{disabled:!d,onClick:()=>{u(n.pageNum+1)},children:(0,se.jsx)(m()._H,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));const De=(0,m().XN)((function(e){const{spaceStore:t}=e,a=(0,n().O7)(),r=null==t?void 0:t.id,[l]=(0,o().AF)(F),[d]=(0,o().AF)(E().Z),c=(0,E().r)(d)!==l.filterStr?void 0:l.cachedResponses[d.pageNum];return(0,s.useEffect)((()=>{r&&async function(e){var t,i;const{environment:s,spaceId:n}=e,a=E().Z.getState();F.startLoading(n,a);const{sortOrder:o,pageSize:r,pageNum:l}=a,d={spaceId:n,limit:r,cursor:F.getCursor(n,a,l),filters:{timeRange:{starting:a.timeRange.starting?I().OQ.toUnixMs(a.timeRange.starting):void 0,ending:a.timeRange.ending?I().OQ.toUnixMs(a.timeRange.ending):void 0},...(null===(t=a.actors)||void 0===t?void 0:t.length)>0?{actors:a.actors}:void 0,...(null===(i=a.actions)||void 0===i?void 0:i.length)>0?{actions:a.actions}:void 0},sort:o||P().NQ.CreatedNewest},c=await Z().callApi({eventName:"searchAuditLog",environment:s,data:d,headers:(0,D().Bb)({spaceId:d.spaceId})});if("success"!==c.type)if(F.updateError(n,a),(0,A().Jx)(c.body)){const e=(0,U().wf)(H().Z.getIntl(),c);v().UW(e)}else v().UW(H().Z.formatMessage(K.loadCurrentAuditLogError));else F.updateLoadedResult(n,a,c.data)}({environment:a,spaceId:r})}),[a,r,d]),(0,s.useEffect)((()=>{z({environment:a,spaceId:r})}),[a,r]),(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(de,{}),(0,se.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:12,paddingBottom:12},children:[(0,se.jsx)(re,{spaceStore:t}),(0,se.jsx)(i(553802).Z,{parentStore:t})]}),"loading"===(null==c?void 0:c.status)&&(0,se.jsx)(i(294492).Z,{}),"success"===(null==c?void 0:c.status)&&(0,se.jsx)(Ae,{searchResponse:c,spaceStore:t})]})}));var Pe=()=>i(677559);const Re=new(Pe().Ss)("collectionDebugSettings",(()=>i.e(5e3).then(i.bind(i,293921)))),Be=(0,Pe().kF)(Re,(e=>e.CollectionDebugSettings)),Ze={settingsTab:new(Pe().Ss)("customEmojiSettings",(()=>i.e(60156).then(i.bind(i,156875))))},Ue=(0,Pe().kF)(Ze.settingsTab,(e=>e.CustomEmojiSettings)),He=new(Pe().Ss)("SitesSettingsTab",(async()=>await Promise.all([i.e(62743),i.e(20919),i.e(78517),i.e(93843),i.e(75751),i.e(82472),i.e(79582)]).then(i.bind(i,113989)))),Oe=(0,Pe().kF)(He,(e=>e.SitesSettingsTab));var Ee=()=>i(718959),Le=()=>i(247724),qe=()=>i(606757),Ve=()=>i(849668),Ne=()=>i(148126),Fe=()=>i(332504),Ke=()=>i(90065),We=()=>i(10271),ze=()=>i(778265);const Ge=new(Pe().Ss)("offlineModeDebugSettings",(()=>i.e(61860).then(i.bind(i,855875)))),Ye=(0,Pe().kF)(Ge,(e=>e.OfflineModeDebugSettings)),$e=new(Pe().Ss)("offlineSettings",(()=>i.e(61860).then(i.bind(i,855875)))),Qe=(0,Pe().kF)($e,(e=>e.OfflineSettings));var Je=()=>i(341643),Xe=()=>i(139934),et=()=>i(876822),tt=()=>i(180099),it=()=>i(623521);class st extends L().default{getInitialState(){return{status:"unconfigured",emailDomains:[],domainVerifications:[],spaces:[],createAccount:!1,useMetadataUrl:!0}}}const nt=st;var at=()=>i(812376),ot=()=>i(902030);class rt extends L().default{getInitialState(){return{emailDomains:[],spaceCreation:"admins_only",settings:{}}}async updateValueForSpace(e){const{environment:t,spaceId:i,store:s}=e,n=await Z().callApi({eventName:"getEmailDomainsForSpace",environment:t,data:{spaceId:i}});if("failed"===n.type)return void v().x2(n);const{data:a}=n,o=Object.keys(a);return 0!==o.length?s.setState({emailDomains:o,spaceCreation:a[o[0]].spaceCreationEnum,settings:a[o[0]].settings}):s.setState(this.getInitialState()),s.state}}const lt=rt;var dt=()=>i(359023),ct=()=>i(838266),ut=()=>i(219099),gt=()=>i(396992),pt=()=>i(576387),mt=()=>i(827282);const ft=(0,mt().CZ)("paperPlane",{default:{loader:()=>i.e(57702).then(i.bind(i,557702))},small:{loader:()=>i.e(49996).then(i.bind(i,149996))},mini:{loader:()=>i.e(92004).then(i.bind(i,592004))},large:{loader:()=>i.e(67337).then(i.bind(i,767337))}});var ht=()=>i(717064),St=()=>i(828042),xt=()=>i(212493),yt=()=>i(603692),bt=()=>i(661641),vt=()=>i(661297),jt=()=>i(524434),Ct=()=>i(788396),wt=()=>i(965014),Mt=()=>i(178504),Tt=()=>i(232695),_t=()=>i(897257),kt=()=>i(595976),It=()=>i(30795);function At(e){let{currentSettingsTab:t}=e;const i=(0,n().O7)(),a=(0,r().yK)((e=>({aiIcon:{width:16,height:16,color:e.icon.purplePrimary},assistantIcon:{width:16,height:16},buttonStyle:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:6,borderRadius:6,border:`1px solid ${e.stroke.primary}`}})),[]),l=(0,Mt().n_)()&&!["plans","billing"].includes(t),d=(0,o().Kw)(jt().r4),c=function(){const e=(0,Tt().K)(),t=(0,o().VK)((()=>{var e;return null===(e=et().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),i=(0,kt().p)({spaceId:t}),s=(0,o().Kw)(_t().subscriptionDataStoreInstance),n=(0,It().V)(s);return"eligible"===e&&(i&&(0,g().YK)(i)&&!(0,p().Aw)((0,g().wO)(i.subscription))||n>5)}(),u=s.useMemo((()=>c?{onClick:()=>(0,Ct().nx)({openedFrom:"settings_sidebar"}),text:(0,se.jsx)(m()._H,{id:"settingsUpsellButton.contactSales",defaultMessage:"Chat with Sales"}),icon:(0,se.jsx)(yt().y,{iconGroup:ft,colorName:"primary",variantName:"default"})}:l?{onClick:()=>{wt().y(i,{from:"ai_upsell_settings",upsell:{type:"product",product:"ai",limit:{type:"none"}}})},text:(0,se.jsx)(m()._H,{id:"AddOnUpsellNudge.title",defaultMessage:"Get unlimited AI"}),icon:d?(0,ht().Q)(a.assistantIcon):(0,St().t)(a.aiIcon)}:void 0),[c,l,d,a,i]);return u?(0,se.jsx)(xt().jX,{direction:"column",padding:16,align:"center-left",children:(0,se.jsxs)(vt().Z,{onClick:u.onClick,style:a.buttonStyle,children:[u.icon,(0,se.jsx)(bt().q,{styleName:"UIRegular-14px/Medium",children:u.text})]})}):null}var Dt=()=>i(782451),Pt=()=>i(504117),Rt=()=>i(322983),Bt=()=>i(265640);const Zt=(0,m().vU)({apply_credit:{id:"spaceSubscriptionBilling.applyCreditButton.label",defaultMessage:"Apply credit"},update:{id:"spaceSubscriptionBilling.updateButton.label",defaultMessage:"Update"},add:{id:"spaceSubscriptionBilling.addButton.label",defaultMessage:"Add"},apply:{id:"spaceSubscriptionBilling.apply.label",defaultMessage:"Apply"}});const Ut=(0,m().XN)((function(e){const t=(0,r().Fg)(),i={marginLeft:18,marginRight:-4,fontWeight:h().Ue.medium},{title:s,caption:n,buttonArgs:a}=e,o=(0,se.jsx)(m()._H,{...Zt[a.buttonPurpose]});return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:14},children:[(0,se.jsx)("div",{style:{marginRight:"auto"},children:s}),(0,se.jsx)("div",{style:{color:t.mediumTextColor},children:n}),(0,se.jsx)("div",{style:{minWidth:110,display:"flex",justifyContent:"flex-end"},children:a.showButton&&(0,se.jsx)(Bt().D,{isBlue:!0,onClick:a.onClick,style:i,children:o})})]})}));var Ht=()=>i(804217);const Ot={workspaceBalance:(0,se.jsx)(m()._H,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.workspaceSubscriptionBalance.title",defaultMessage:"Workspace balance"}),applyCoupon:(0,se.jsx)(m()._H,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.applyCoupon.title",defaultMessage:"Apply coupon"}),discount:(0,se.jsx)(m()._H,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.discount.title",defaultMessage:"Discount"})};var Et=()=>i(702548);const Lt={height:"100%",padding:"36px 60px"},qt={display:"flex",flexDirection:"column",height:"100%"};const Vt=function(e){let{data:t,spaceStore:s}=e;const r=(0,n().O7)(),l=(0,o().qz)(void 0,i(728779).Z),d=(0,m().YB)(),c=(0,o().Kw)(Ht().default),u=(0,o().Kw)(l),g=(0,kt().p)({spaceId:s.id});return(0,a().K)((()=>{pt().bi(r),pt().zb(r,l)})),c.online?(0,se.jsx)("div",{style:qt,children:(0,se.jsxs)(i(842574).T,{style:Lt,type:i(520849).Z.Y,children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{...Rt().sY.billingTab})}),(0,se.jsx)(Nt,{data:t,billingData:g}),(0,se.jsx)(Ft,{}),(0,se.jsx)(i(79624).V,{spaceStore:s,events:u.billingEvents,upcomingInvoiceData:void 0})]})}):(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,style:{textAlign:"center"},children:d.formatMessage(Dt().s.offline)})})};function Nt(e){let{data:t,billingData:i}=e;const s=(0,g().YF)(null==i?void 0:i.subscription);if(!s)return null;const n=-Math.min(0,t.accountBalance);return(0,se.jsx)(Ut,{title:Ot.workspaceBalance,caption:(0,se.jsx)("div",{children:(0,se.jsx)(Et().W,{cost:{amount:n,currencyCode:s},trailingZeroDisplay:"stripIfInteger"})}),buttonArgs:{showButton:!1,buttonPurpose:"apply_credit",onClick:f().ZT}})}function Ft(){return(0,se.jsx)("div",{style:{flex:"none",marginTop:30}})}var Kt=()=>i(548812),Wt=()=>i(661769),zt=()=>i(228772),Gt=()=>i(663773);var Yt=()=>i(699550);const $t={currentPage:"home",setPage:()=>{}},Qt=(0,s.createContext)($t);Qt.displayName="RequestsSettingsPageContext";var Jt=()=>i(429600),Xt=()=>i(897373),ei=()=>i(1910),ti=()=>i(471645),ii=()=>i(730971),si=()=>i(368634),ni=()=>i(991331),ai=()=>i(909763),oi=()=>i(653363),ri=()=>i(218835),li=()=>i(188296),di=()=>i(277533),ci=()=>i(146920);const ui=4;function gi(e){let{securitySettingsStore:t,spaceStore:i}=e;const s=(0,m().YB)();return(0,se.jsxs)(xt().jX,{direction:"column",padding:"36px 60px",children:[(0,se.jsxs)(xt().jX,{direction:"column",gap:32,children:[(0,se.jsx)(bt().q,{styleName:"UITitle-22px/Semibold",colorName:"primary",children:s.formatMessage(yi.title)}),(0,se.jsxs)(xt().jX,{direction:"row",gap:14,height:113,children:[i&&(0,se.jsx)(fi,{spaceStore:i}),i&&(0,se.jsx)(hi,{spaceStore:i})]})]}),(0,se.jsx)(pi,{securitySettingsStore:t,spaceStore:i})]})}function pi(e){let{securitySettingsStore:t,spaceStore:i}=e;const n=(0,m().YB)(),{setPage:a}=(0,s.useContext)(Qt);return(0,se.jsx)("div",{style:{width:"100%"},children:(0,se.jsx)(ai().Q,{title:n.formatMessage(yi.permissionsTitle),content:(0,se.jsxs)(ii().T,{children:[(0,se.jsx)(ni().N,{title:n.formatMessage(yi.membersAndGuestsSettingTitle),byline:n.formatMessage(yi.memberAndGuestsSettingByline),item:(0,se.jsx)(mi,{ariaLabel:n.formatMessage(yi.memberAndGuestsSettingAriaLabel),onClick:()=>{a("people_invitation_settings")}})}),(0,se.jsx)(Si,{securitySettingsStore:t,spaceStore:i})]})})})}function mi(e){let{ariaLabel:t,onClick:i}=e;const s=(0,r().yK)((e=>({icon:{height:20,width:20,fill:e.icon.tertiary}})),[]);return(0,se.jsx)(ei().Z,{style:s.icon,icon:Jt().o,ariaLabel:t,onClick:i})}function fi(e){let{spaceStore:t}=e;const i=(0,m().YB)(),{setPage:n}=(0,s.useContext)(Qt),{requestsSize:a,requestedUserStores:r,totalRequestedUsersSize:l}=function(e){let{spaceStore:t,userStoreLimit:i}=e;const{requests:s,isLoading:n}=(0,ci().p)({spaceId:t.id});return(0,o().VK)((()=>{let e=0;if(!s)return{requestsSize:e,requestedUserStores:[],totalRequestedUsersSize:0,isLoading:n};const a=new Set;for(const t of Object.values(s)){for(const e of t)a.add(e.created_by_id);e+=t.length}return{requestsSize:e,requestedUserStores:Array.from(a).slice(0,i).map((e=>di().U.createChildStore(t,{table:B().KJ,id:e}))),totalRequestedUsersSize:a.size,isLoading:n}}),[t,s,n,i])}({spaceStore:t,userStoreLimit:ui});return(0,se.jsx)(si().Z,{headerText:i.formatMessage(yi.upgradesTitle),mainText:a,bottom:(0,se.jsx)(oi().s,{users:r,totalMemberCount:l,isLoading:!1}),onClick:()=>{n("upgrades")}})}function hi(e){let{spaceStore:t}=e;const i=(0,m().YB)(),s=(0,ri().oE)({spaceStore:t,requestType:"member_or_guest"}),n=new Set;for(const o of s)for(const{actor:e}of o.createdByActorsWithReason)n.add(e.id);const a=[...n].slice(0,ui).map((e=>te().U6.createChildStore(t,{table:B().KJ,id:e})));return(0,se.jsx)(si().Z,{headerText:i.formatMessage(yi.peoplesTitle),mainText:s.length,bottom:s.length>0&&(0,se.jsx)(oi().s,{users:a,totalMemberCount:n.size,isLoading:!1}),onClick:()=>{j().r$({currentTab:"members",subtab:"requests"})}})}function Si(e){let{securitySettingsStore:t,spaceStore:i}=e;const s=(0,m().YB)(),a=(0,n().O7)(),r=(0,o().VK)((()=>t.state),[t]),l=(0,Gt().Cv)({spaceId:i.id}),d=(0,o().VK)((()=>(0,p().wP)((0,g().wO)(null==l?void 0:l.subscription))),[l]);return(0,se.jsx)(ni().N,{title:(0,se.jsx)(xi,{showUpsell:!d}),byline:s.formatMessage(yi.purchaseRequestsMemberSettingsByline),item:(0,se.jsx)(ti().Z,{disabled:!d,on:!r.disableMemberUpgradeRequests,onClick:()=>{Xt().y(a,{spaceStore:i,securitySettingsStore:t,fields:{disableMemberUpgradeRequests:!r.disableMemberUpgradeRequests}})}})})}function xi(e){let{showUpsell:t}=e;const i=(0,m().YB)(),s=(0,n().O7)();return(0,se.jsxs)(xt().jX,{direction:"row",gap:4,children:[i.formatMessage(yi.purchaseRequestsMemberSettingsTitle),t&&(0,se.jsx)(li().Z,{subscriptionTier:"enterprise",analyticsName:"upgrade_requests_page",onClick:async()=>{await wt().y(s,{from:"upgrade_requests_page",upsell:{type:"product",product:"enterprise",limit:{type:"none"}}})}})]})}const yi=(0,m().vU)({title:{id:"RequestsSettingsPage.title",defaultMessage:"Requests"},upgradesTitle:{id:"RequestsSettingsPage.UpgradesTileTitle",defaultMessage:"Upgrades"},peoplesTitle:{id:"RequestsSettingsPage.PeopleTileTitle",defaultMessage:"People"},permissionsTitle:{id:"RequestsSettingsPage.permissionsTitle",defaultMessage:"Permissions"},membersAndGuestsSettingTitle:{id:"RequestsSettingsPage.membersAndGuestsSettingTitle",defaultMessage:"Inviting guests and members"},memberAndGuestsSettingByline:{id:"RequestsSettingsPage.memberAndGuestsSettingByline",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsSettingTitle:{id:"RequestsSettingsPage.purchaseRequestsSettingTitle",defaultMessage:"Purchase requests"},purchaseRequestsSettingByline:{id:"RequestsSettingsPage.purchaseRequestsSettingByline",defaultMessage:"Configure who can send and approve requests"},memberAndGuestsSettingAriaLabel:{id:"RequestsSettingsPage.memberAndGuestsSettingAriaLabel",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsSettingsAriaLabel:{id:"RequestsSettingsPage.purchaseRequestsSettingsAriaLabel",defaultMessage:"Configure who can send and approve requests"},purchaseRequestsMemberSettingsTitle:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsTitle",defaultMessage:"Allow members to request for all upgrades"},purchaseRequestsMemberSettingsByline:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsByline",defaultMessage:"Users in your workspace can send purchase requests to the workspace owner"}});var bi=()=>i(984478),vi=()=>i(696459),ji=()=>i(395362),Ci=()=>i(104822),wi=()=>i(223160),Mi=()=>i(853571),Ti=()=>i(91502),_i=()=>i(105459),ki=()=>i(429892),Ii=()=>i(141455),Ai=()=>i(906651),Di=()=>i(360964);function Pi(e){let{title:t,byline:i,settingItem:s,style:n}=e;const a=(0,r().yK)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",...n||{}},settingLeft:{width:"60%"},settingTitle:{fontWeight:h().Ue.regular},settingByline:{marginBottom:4}})),[n]);return(0,se.jsxs)("div",{style:a.settingContainer,children:[(0,se.jsxs)("div",{style:a.settingLeft,children:[(0,se.jsx)(le().Z,{smallMarginBottom:!0,style:a.settingTitle,children:t}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:a.settingByline,children:i})]}),s]})}var Ri=()=>i(575154),Bi=()=>i(815277),Zi=()=>i(469203),Ui=()=>i(18902),Hi=()=>i(95886),Oi=()=>i(745740),Ei=()=>i(291198),Li=()=>i(921981),qi=()=>i(972544),Vi=()=>i(525454);const Ni=(0,m().vU)({deleteFromTrashLayoutTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.layoutTitle.deleteFromTrash."},deleteFromTrashTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.title.deleteFromTrash"},deleteFromTrashDescription:{defaultMessage:"Customize how long pages stay in Trash before being automatically deleted",id:"updateRetentionWindowModal.description.deleteFromTrash"},deleteFromTrashDefaultOptionTitle:{defaultMessage:"30 days, then delete from Trash",id:"updateRetentionWindowModal.defaultOption.title.deleteFromTrash"},deleteFromTrashDefaultOptionDescription:{defaultMessage:"Pages deleted from Trash are retained for an additional period of time. Retained pages can be restored by workspace owners",id:"updateRetentionWindowModal.defaultOption.description.deleteFromTrash"},deleteFromTrashImmediateEffect:{defaultMessage:"Reducing this retention setting may lead to pages being deleted from Trash immediately. Please type your workspace name to continue",id:"updateRetentionWindowModal.immediateEffect.deleteFromTrash"},purgeLayoutTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.layoutTitle.purge"},purgeTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.title.purge"},purgeDescription:{defaultMessage:"Pages deleted from Trash are retained for a period of time. Only workspace owners can view and restore retained pages.",id:"updateRetentionWindowModal.description.purge"},purgeDefaultOptionTitle:{defaultMessage:"30 days, then permanently delete",id:"updateRetentionWindowModal.defaultOption.title.purge"},purgeDefaultOptionDescription:{defaultMessage:"Pages are removed from Notion's servers and cannot be restored",id:"updateRetentionWindowModal.defaultOption.description.purge"},purgeImmediateEffect:{defaultMessage:"Reducing the retain period could lead to pages being deleted from Notion server. Please type your workspace name to continue ",id:"updateRetentionWindowModal.immediateEffect.purge"}});var Fi=()=>i(579807);const Ki=(0,m().vU)({days:{defaultMessage:"days",id:"customRetentionWindow.relativeDates.days"},years:{defaultMessage:"years",id:"customRetentionWindow.relativeDates.years"}}),Wi=(0,m().vU)({inputPlaceholder:{defaultMessage:"...",id:"customRetentionWindow.timeNum.inputPlaceholder"}}),zi=(0,vi().Yd)(ki().tL).map((e=>({key:e,label:(0,se.jsx)(he().Z,{children:H().Z.formatMessage(Ki[e])})})));function Gi(e){const{isDropdownEnabled:t,timeNumString:i,timeUnit:s,setTimeNumString:n,setTimeUnit:a}=e,o=(0,m().YB)(),l=(0,r().yK)((e=>({dropdownRow:{display:"flex"},input:{width:70,marginRight:4,marginLeft:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`}})),[]);return(0,se.jsxs)("span",{style:l.dropdownRow,children:[(0,se.jsx)(Ei().Z,{style:l.input,value:i,onChange:e=>n(e.target.value),placeholder:o.formatMessage(Wi.inputPlaceholder),disabled:!t}),(0,se.jsx)(Fi().L,{buttonStyle:l.dropdown,disabled:!t,type:"dropdown",currentOption:s,options:zi,onSelectOption:e=>t&&a(e),isMobile:!1})]})}const Yi=(0,m().vU)({invalidNumber:{defaultMessage:"Please enter a valid number",id:"updateRetentionWindow.error.invalidNumber"},outOfRangeTrash:{defaultMessage:"Pages can't be in Trash for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeTrash"},outOfRangeRetained:{defaultMessage:"Pages can't be retained for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeRetained"},lowerBoundTrash:{defaultMessage:"Pages can't be in Trash for less than 1 day",id:"updateRetentionWindow.error.lowerBoundTrash"},lowerBoundRetained:{defaultMessage:"Pages can't be retained for less than 1 day",id:"updateRetentionWindow.error.lowerBoundRetained"}});function $i(e){let{isSelected:t,retentionType:i,hasChosenRetentionWindow:n,currentRetentionWindowInSeconds:a,errorMessage:o,onNextRetentionWindowInSecondsChange:l,onClick:d,setErrorMessage:c,style:u}=e;const g=(0,m().YB)(),p=(0,r().yK)((e=>({rowStyles:{display:"flex",fontSize:14,background:t?e.lightBlueBannerBackground:"inherit",...u,alignItems:"flex-start",flexFlow:"column"},centeredRow:{display:"flex",flexFlow:"row",alignItems:"center"},dropdownRow:{marginTop:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`},errorMessageStyle:{marginTop:8,width:"100%",display:"flex",paddingLeft:28,color:e.errorText,fontWeight:h().Ue.regular}})),[u,t]),[f,S]=(0,s.useState)((0,ki().ln)(a)),[x,y]=(0,s.useState)(`${(0,ki().yR)(a,f)}`),b=Number(x)*ki().tL[f],v=!n&&t;return(0,s.useEffect)((()=>{l(b)}),[l,b]),(0,s.useEffect)((()=>{if(t){if(void 0===x)return void c(g.formatMessage(Yi.invalidNumber));const e=parseInt(x);if(isNaN(e)||e.toString()!==x)return void c(g.formatMessage(Yi.invalidNumber));const t=ki().tL[f]*e;if(t>ki().GL){const e="delete_from_trash"===i?Yi.outOfRangeTrash:Yi.outOfRangeRetained;return void c(g.formatMessage(e))}if(t<ki().Of){const e="delete_from_trash"===i?Yi.lowerBoundTrash:Yi.lowerBoundRetained;return void c(g.formatMessage(e))}c(void 0)}}),[x,f,t,c,g,i]),(0,se.jsxs)(Bt().D,{style:p.rowStyles,onClick:d,children:[(0,se.jsxs)("div",{style:p.centeredRow,children:[(0,se.jsx)(qi().Z,{isSelected:t}),(0,se.jsx)(he().Z,{style:p.centeredRow,children:"delete_from_trash"===i?(0,se.jsx)(m()._H,{defaultMessage:"<dropdownpicker></dropdownpicker>, then delete from trash",id:"updateRetentionWindowModal.custom.deleteFromTrash",values:{dropdownpicker:e=>(0,se.jsx)(Gi,{isDropdownEnabled:v,timeNumString:x,timeUnit:f,setTimeNumString:y,setTimeUnit:S})}}):(0,se.jsx)(m()._H,{defaultMessage:"<dropdownpicker></dropdownpicker>, then permanently delete",id:"updateRetentionWindowModal.custom.permanentlyDelete",values:{dropdownpicker:e=>(0,se.jsx)(Gi,{isDropdownEnabled:v,timeNumString:x,timeUnit:f,setTimeNumString:y,setTimeUnit:S})}})})]}),o?(0,se.jsx)(he().Z,{style:p.errorMessageStyle,children:o}):null]})}const Qi=(0,m().vU)({invalidWorkspaceName:{id:"updateRetentionWindow.error.invalidWorkspaceName",defaultMessage:"Must type in workspace name correctly"}});function Ji(e){let{isOpen:t,closeModal:i,currentRetentionWindowInSeconds:a,spaceStore:l,retentionType:d,onSaveRetentionWindow:c}=e;const u=(0,n().O7)(),g=(0,r().yK)((e=>({contentStyle:{display:"flex",flexFlow:"column",alignItems:"center",paddingTop:24,paddingLeft:15,paddingRight:15},headerStyle:{display:"flex",flexFlow:"column",alignItems:"center",marginBottom:16},headerTitleStyle:{fontWeight:h().Ue.semibold,fontSize:17,marginBottom:8},headerDescriptionStyle:{width:"100%",textAlign:"center",fontSize:14},defaultOptionStyle:{display:"flex",flexFlow:"column",paddingLeft:8},defaultOptionTitleStyle:{fontSize:13,fontWeight:h().Ue.medium},defaultOptionDescriptionStyle:{width:350,fontSize:12,whiteSpace:"normal",lineHeight:"16px",fontWeight:h().Ue.regular},iconStyle:{color:e.lightIconColor,width:36,marginBottom:12},saveButtonStyles:{width:"100%",marginBottom:4,marginTop:16},errorMessageStyle:{marginTop:4,color:e.errorText},cancelButtonStyles:{width:"100%",paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"center",marginBottom:16,borderRadius:4},optionStyle:{width:"100%",height:void 0,marginBottom:4,paddingTop:8,paddingBottom:8,fontWeight:h().Ue.medium,display:"flex",flexFlow:"row"},confirmationContainerStyle:{marginTop:16,width:"100%",paddingTop:14,paddingBottom:14,padingLeft:14,paddingRight:14,backgroundColor:e.accentColors.red[100],display:"flex",flexFlow:"column",alignItems:"center",borderRadius:4},confirmationDescription:{color:e.accentColors.red[800],fontSize:14,paddingBottom:6},confirmationContentStyle:{width:"90%"}})),[]),p=(0,o().VK)((()=>l.getName()),[l]),[f,S]=(0,s.useState)(void 0),[x,y]=(0,s.useState)(void 0===a),[v,j]=(0,s.useState)(a),C=x?void 0:v,[w,M]=(0,s.useState)(!1),[T,_]=(0,s.useState)(""),k=C===a||(0,vi().$K)(f),I=T!==p,A=(0,s.useCallback)((()=>{f||(b().Ym(u,{type:d,value:C}),c(C),_(""),M(!1),i())}),[u,d,c,C,f,i]),D=(0,s.useCallback)((()=>{w?T===p?A():S(H().Z.formatMessage(Qi.invalidWorkspaceName)):!function(e){let{nextRetentionWindowValue:t,currentRetentionWindowValue:i,retentionType:s}=e;const n=Xi(i,s),a=Xi(t,s);if(a<n)return!0;return!1}({nextRetentionWindowValue:C,retentionType:d,currentRetentionWindowValue:a})?A():M(!0)}),[w,T,p,C,d,a,A]),P=(0,s.useCallback)((()=>{w||x||(M(!1),y(!0),S(void 0))}),[w,x,M,y,S]),R=(0,s.useCallback)((()=>{w||x&&(M(!1),y(!1))}),[w,x,M,y]),B=function(e){return(0,s.useMemo)((()=>"delete_from_trash"===e?{layoutTitle:Ni.deleteFromTrashLayoutTitle,title:Ni.deleteFromTrashTitle,description:Ni.deleteFromTrashDescription,defaultOptionTitle:Ni.deleteFromTrashDefaultOptionTitle,defaultOptionDescription:Ni.deleteFromTrashDefaultOptionDescription,immediateEffect:Ni.deleteFromTrashImmediateEffect}:"purge"===e?{layoutTitle:Ni.purgeLayoutTitle,title:Ni.purgeTitle,description:Ni.purgeDescription,defaultOptionTitle:Ni.purgeDefaultOptionTitle,defaultOptionDescription:Ni.purgeDefaultOptionDescription,immediateEffect:Ni.purgeImmediateEffect}:void(0,vi().t1)(e)),[e])}(d);return(0,se.jsx)(Li().c,{isOpen:t,onDismiss:i,areaConstraint:{width:{type:"max",length:460}},render:e=>{let{displayMode:t}=e;return(0,se.jsx)(Vi().a,{displayMode:t,title:(0,se.jsx)(m()._H,{...B.layoutTitle}),children:(0,se.jsxs)("div",{style:g.contentStyle,children:[(0,se.jsxs)("div",{style:g.headerStyle,children:[(0,se.jsx)("div",{children:(0,Hi().y)(g.iconStyle)}),(0,se.jsx)(he().Z,{style:g.headerTitleStyle,children:(0,se.jsx)(m()._H,{...B.title})}),(0,se.jsx)(he().Z,{style:g.headerDescriptionStyle,isSecondaryColor:!0,isMultiline:!0,children:(0,se.jsx)(m()._H,{...B.description})})]}),(0,se.jsxs)(Bt().D,{style:g.optionStyle,onClick:P,children:[(0,se.jsx)(qi().Z,{isSelected:x}),(0,se.jsxs)("div",{style:g.defaultOptionStyle,children:[(0,se.jsx)(he().Z,{style:g.defaultOptionTitleStyle,children:(0,se.jsx)(m()._H,{...B.defaultOptionTitle})}),(0,se.jsx)(he().Z,{isSecondaryColor:!0,isMultiline:!0,style:g.defaultOptionDescriptionStyle,children:(0,se.jsx)(m()._H,{...B.defaultOptionDescription})})]})]}),(0,se.jsx)($i,{style:g.optionStyle,isSelected:!x,retentionType:d,hasChosenRetentionWindow:w,currentRetentionWindowInSeconds:a,errorMessage:f,onClick:R,onNextRetentionWindowInSecondsChange:j,setErrorMessage:S}),w?(0,se.jsxs)("div",{style:g.confirmationContainerStyle,children:[(0,se.jsx)(he().Z,{isMultiline:!0,style:{...g.confirmationContentStyle,...g.confirmationDescription},children:(0,se.jsx)(m()._H,{...B.immediateEffect})}),(0,se.jsx)(Ei().Z,{style:g.confirmationContentStyle,value:T,placeholder:p,onChange:e=>_(e.target.value)})]}):null,(0,se.jsx)(Ai().Z,{onClick:D,disabled:w?I:k,style:g.saveButtonStyles,isLarge:!0,children:(0,se.jsx)(m()._H,{id:"updateRetentionWindowModal.save",defaultMessage:"Save"})}),(0,se.jsx)(Oi().Z,{onClick:i,style:g.cancelButtonStyles,children:(0,se.jsx)(he().Z,{isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"updateRetentionWindowModal.cancel",defaultMessage:"Cancel"})})})]})})}})}function Xi(e,t){return e||("delete_from_trash"===t?Ui().A7:Ui().vF)}function es(e){const{spaceStore:t}=e,i=(0,n().O7)(),a=(0,m().YB)(),d=(0,r().yK)((e=>({genericSetting:{width:"100%",paddingTop:24},settingItem:{display:"flex",alignItems:"center"},currentSettingLabel:{fontWeight:h().Ue.medium},changeButtonStyle:{fontSize:12,marginLeft:8},lockIconStyle:{color:e.lightTextColor,width:20,marginLeft:4}})),[]),c=(0,Bi().oo)({name:"configurable_retention",spaceId:t.id,userId:i.currentUser.id}),[u,g]=s.useState({isOpen:!1,retentionType:"delete_from_trash"}),{saveDeleteFromTrashDelay:p,savePurgeDelay:f}=function(e){let{environment:t,spaceStore:i}=e;return{saveDeleteFromTrashDelay:(0,s.useCallback)((e=>{_().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{_().applyOperation({store:i,operation:{pointer:i.pointer,path:["settings"],command:"update",args:{delete_from_trash_delay_seconds:e??null}},transaction:t})}})}),[i,t]),savePurgeDelay:(0,s.useCallback)((e=>{_().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{_().applyOperation({store:i,operation:{pointer:i.pointer,path:["settings"],command:"update",args:{purge_delay_seconds:e??null}},transaction:t})}})}),[i,t])}}({environment:i,spaceStore:t}),{currentDeleteFromTrashDelayInSeconds:S,currentPurgeDelayInSeconds:x}=(0,o().VK)((()=>({currentDeleteFromTrashDelayInSeconds:(0,Ii()._e)(c)?t.getSettings().delete_from_trash_delay_seconds:void 0,currentPurgeDelayInSeconds:(0,Ii()._e)(c)?t.getSettings().purge_delay_seconds:void 0})),[t,c]);return(0,se.jsxs)("div",{children:[u.isOpen&&(0,se.jsx)(Ji,{isOpen:u.isOpen,closeModal:()=>g({...u,isOpen:!1}),spaceStore:t,currentRetentionWindowInSeconds:u.currentRetentionWindowInSeconds,retentionType:u.retentionType,onSaveRetentionWindow:"delete_from_trash"===u.retentionType?p:f}),(0,se.jsx)(ts,{dataRetentionAvailability:c}),(0,se.jsx)(Pi,{style:d.genericSetting,title:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.deleteFromTrash.title",defaultMessage:"Once pages are moved to Trash, delete them after"}),byline:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.deletedFromTrash.byline",defaultMessage:"Anyone with edit or full access will be able to restore or manually delete pages in Trash"}),settingItem:(0,se.jsxs)("div",{style:d.settingItem,children:[(0,se.jsx)(he().Z,{style:d.currentSettingLabel,children:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.deleteFromTrash.currentSetting",defaultMessage:"{duration}",values:{duration:(0,ki().uP)(S,a)}})}),(0,Ii()._e)(c)?(0,se.jsx)(vt().Z,{disabled:!1,style:d.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"delete_from_trash",currentRetentionWindowInSeconds:S}),children:(0,se.jsx)(m()._H,{defaultMessage:"Change",id:"securitySettings.dataRetention.deleteFromTrash.button"})}):(0,se.jsx)("div",{children:(0,l().Q)(d.lockIconStyle)})]})}),(0,se.jsx)(Pi,{style:d.genericSetting,title:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.purge.title",defaultMessage:"After pages are deleted from Trash, retain them for"}),byline:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.purge.byline",defaultMessage:"During the retention period, only workspace owners can view or restore the page from Content search. After the retention period, the page will be permanently deleted from Notion's servers"}),settingItem:(0,se.jsxs)("div",{style:d.settingItem,children:[(0,se.jsx)(he().Z,{style:d.currentSettingLabel,children:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.purge.currentSetting",defaultMessage:"{duration}",values:{duration:(0,ki().uP)(x,a)}})}),(0,Ii()._e)(c)?(0,se.jsx)(vt().Z,{disabled:!1,style:d.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"purge",currentRetentionWindowInSeconds:x}),children:(0,se.jsx)(m()._H,{defaultMessage:"Change",id:"securitySettings.dataRetention.purge.button"})}):(0,se.jsx)("div",{children:(0,l().Q)(d.lockIconStyle)})]})})]})}function ts(e){const{dataRetentionAvailability:t}=e,i=(0,r().yK)((e=>({bannerStyle:{borderRadius:4,padding:15,width:"100%",backgroundColor:e.lightBlueBannerBackground,flexFlow:(0,Ii()._e)(t)?"column":"row",display:"flex",overflow:"hidden"},bannerLabelStyle:{marginBottom:8},bannerImage:{width:75,display:"flex",alignItems:"center",paddingRight:15},bannerTitleBold:{fontWeight:h().Ue.bold},b:{fontWeight:h().Ue.medium},helpIcon:{fill:"inherit"}})),[t]),s=(0,n().O7)();return(0,Ii()._e)(t)?(0,se.jsxs)("div",{style:i.bannerStyle,children:[(0,se.jsx)(he().Z,{style:i.bannerLabelStyle,children:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.disclaimer.title",defaultMessage:"How page deletion and retention works in Notion"})}),(0,se.jsx)(he().Z,{style:i.bannerLabelStyle,isMultiline:!0,isSmall:!0,children:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.disclaimer.description",defaultMessage:"A page can be moved to Trash by anyone with edit or full access. The page can then be restored or deleted. Workspace owners can customize whether pages in Trash are automatically deleted after a period of time, and how long deleted pages are retained on Notion's servers."})}),(0,se.jsx)(Di().Z,{title:(0,se.jsx)(Zi().s,{children:(0,se.jsx)(m()._H,{defaultMessage:"Learn more about data retention in Notion",id:"securitySettings.dataRetention.learnMore"})}),iconStyle:i.helpIcon,buttonStyle:{maxWidth:"100%",overflow:"hidden"},href:(0,Ne().UY)("guides.customDataRetentionRules"),analyticsFrom:"security_settings"})]}):(0,se.jsxs)("div",{style:i.bannerStyle,children:[(0,se.jsx)("div",{style:i.bannerImage,children:(0,se.jsx)(Ri().q,{product:"enterprise"})}),(0,se.jsxs)("div",{children:[(0,se.jsx)(he().Z,{style:{...i.bannerLabelStyle,...i.bannerTitleBold},children:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.upsell.title",defaultMessage:"Upgrade to the Enterprise plan to customize your workspaceâ€™s data retention policy"})}),(0,se.jsx)(he().Z,{style:i.bannerLabelStyle,isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"securitySettings.dataRetention.upsell.description",defaultMessage:"Workspaces on the Enterprise plan also get SAML SSO, custom guest limits, audit logging, and other advanced security controls"})}),(0,se.jsx)(Ai().Z,{onClick:()=>{null!=t&&t.upsell&&(0,wt().y)(s,{from:"space_settings_cdrr_settings",upsell:t.upsell})},isLarge:!0,children:(0,se.jsx)(m()._H,{defaultMessage:"Upgrade to Enterprise",id:"securitySettings.upgradeButton.text"})})]})]})}var is=()=>i(72950),ss=()=>i(697623),ns=()=>i(666414),as=()=>i(312578),os=()=>i(146947),rs=()=>i(708518),ls=function(e){return e[e.Keep=0]="Keep",e[e.Remove=1]="Remove",e}(ls||{});function ds(e){return(0,se.jsx)(rs().Z,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,se.jsx)(cs,{...e})})}function cs(e){const{onDismiss:t,onSave:i,guestCount:n}=e,[a,o]=(0,s.useState)(ls.Keep),l=(0,r().yK)((e=>({container:{width:350,padding:30,borderRadius:5,height:400,alignItems:"center"},title:{fontFamily:h().F5(os().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:h().F5(os().locale).sans,fontSize:14,fontWeight:300,lineHeight:"19px",margin:10,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column"},button:{justifyContent:"space-between",marginTop:10,height:70,borderRadius:5},buttonText:{display:"flex",flexDirection:"column"},optionSubtitle:{whiteSpace:"break-spaces"},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{justifyContent:"center",margin:"8px auto 0"}})),[]),d=(0,s.useCallback)((()=>{const e=a===ls.Keep;i(e)}),[i,a]);return(0,se.jsxs)("div",{style:l.container,children:[(0,se.jsx)(he().Z,{style:l.title,children:(0,se.jsx)(m()._H,{id:"disableGuestsConfig.title",defaultMessage:"Disable inviting guests?"})}),(0,se.jsx)(he().Z,{isSmall:!0,style:l.subtitle,isMultiline:!0,children:(0,vi().$K)(n)?(0,se.jsx)(m()._H,{id:"disableGuestsConfig.description",defaultMessage:"Your workspace currently has {guestCount, plural, one {1 guest} other {{guestCount} guests}}. You can choose to:",values:{guestCount:n}}):(0,se.jsx)(m()._H,{id:"disableGuestsConfig.description.noGuestCount",defaultMessage:"You are turning off guests in this workspace. You can choose to:"})}),(0,se.jsxs)("div",{style:l.radioContainer,children:[(0,se.jsxs)(vt().Z,{size:"lg",onClick:()=>o(ls.Keep),style:l.button,children:[(0,se.jsx)(qi().Z,{isSelected:a===ls.Keep}),(0,se.jsxs)("div",{style:l.buttonText,children:[(0,se.jsx)(he().Z,{children:(0,se.jsx)(m()._H,{id:"disableGuestsConfig.keepExistingGuests.title",defaultMessage:"Keep existing guests"})}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:l.optionSubtitle,children:(0,se.jsx)(m()._H,{id:"disableGuestsConfig.keepExistingGuests.description",defaultMessage:"Guests will still be able to access the pages they've been invited to"})})]})]}),(0,se.jsxs)(vt().Z,{size:"lg",onClick:()=>o(ls.Remove),style:l.button,children:[(0,se.jsx)(qi().Z,{isSelected:a===ls.Remove}),(0,se.jsxs)("div",{style:l.buttonText,children:[(0,se.jsx)(he().Z,{children:(0,se.jsx)(m()._H,{id:"disableGuestsConfig.removeExistingGuests.title",defaultMessage:"Remove existing guests"})}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:l.optionSubtitle,children:(0,se.jsx)(m()._H,{id:"disableGuestsConfig.removeExistingGuests.description",defaultMessage:"All guests will be removed from your workspace"})})]})]})]}),(0,se.jsxs)("div",{style:l.actionButtonsContainer,children:[(0,se.jsx)(Ai().Z,{isLarge:!0,onClick:d,children:(0,se.jsx)(m()._H,{id:"disableGuestsModal.saveChanges",defaultMessage:"Disable inviting guests"})}),(0,se.jsx)(Bt().D,{onClick:t,style:l.cancelButton,children:(0,se.jsx)(m()._H,{id:"disableGuestsModal.cancel",defaultMessage:"Cancel"})})]})]})}var us=()=>i(765513),gs=()=>i(872423),ps=()=>i(539245);const ms={security:(0,se.jsx)(m()._H,{id:"securityTabs.security.title",defaultMessage:"Security"}),data_retention:(0,se.jsxs)("div",{style:{display:"flex"},children:[(0,se.jsx)(m()._H,{id:"securityTabs.dataRetention.title",defaultMessage:"Data retention"}),(0,se.jsx)(i(989377).i,{newBadgeKey:"data_retention_settings",didUserEngage:!1})]})},fs=(0,vi().Yd)(ms),hs=fs.map((e=>ms[e])),Ss=.5;const xs=function(e){let{securitySettingsStore:t,spaceStore:i,organizationOverrides:a}=e;const l=(0,n().O7)(),d=(0,r().yK)((()=>({tabMenu:{marginBottom:24}})),[]),c=(0,o().VK)((()=>Ht().default.state.online),[]),u=(0,o().VK)((()=>ct().default.getState().defaultSubtab),[]),[g,p]=(0,s.useState)((()=>u&&fs.includes(u)?fs.indexOf(u):0)),f=(0,s.useCallback)((e=>{b().kA(l,{tab:fs[e]}),p(e)}),[p,l]);return c?(0,se.jsx)(Pt().ZP,{children:(0,se.jsxs)("div",{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"securitySettings.securityAndData.title",defaultMessage:"Security & data"})}),(0,se.jsx)(ps().ZP,{tabs:hs,selectedIndex:g,onChange:f,style:d.tabMenu}),0===g?(0,se.jsx)(Zs,{securitySettingsStore:t,spaceStore:i,organizationOverrides:a}):(0,se.jsx)(es,{spaceStore:i})]})}):(0,se.jsx)(ys,{})};function ys(){return(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{defaultMessage:"Please go online to manage security settings.",id:"securitySAMLSettings.offline.message"})})})}function bs(e,t,i,s){Xt().y(s,{spaceStore:i,securitySettingsStore:t,fields:e})}function vs(e){return{fontWeight:h().Ue.medium,fontSize:18,borderBottom:`1px solid ${e.regularDividerColor}`,paddingBottom:6,marginBottom:12,display:"flex",alignItems:"center"}}function js(e,t){const{subscriptionTier:i="enterprise"}=t||{};wt().y(e,{from:"space_saml",upsell:{type:"product",product:i,limit:{type:"none"}}})}function Cs(e,t,i,s){const{name:n,isToggleEnabled:a,showUpgradeIfDisabled:o}=e;if(!a)return o?js(s):void 0;bs({[n]:!t.state[n]},t,i,s)}function ws(e){let{style:t,subscriptionTier:i="enterprise"}=e;const s=(0,n().O7)();return(0,se.jsx)(li().Z,{subscriptionTier:i,analyticsName:"space_saml",onClick:()=>js(s,{subscriptionTier:i}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3,...t}})}function Ms(e){let{requestTogglesAvailableForTier:t,spaceStore:i,securitySettingsStore:s,organizationOverrides:a}=e;const r=(0,n().O7)(),l=(0,o().VK)((()=>(0,Ci().U)(i,r)),[i,r]),d=(0,o().VK)((()=>(0,Ti().bq)()),[]),c=(0,o().VK)((()=>t&&!Boolean(s.state.disableMembershipRequests)),[t,s]),u=(0,o().VK)((()=>t&&!Boolean(s.state.disableExternalMembershipRequests)),[t,s]),g=(0,o().VK)((()=>t&&!Boolean(s.state.disableGuestMembershipRequests)),[t,s]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(gs().dy,{environment:r,toggleOn:c,onClick:()=>Cs({name:"disableMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},s,i,r),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(a.disable_membership_requests)}),d&&(0,se.jsx)(gs().ms,{environment:r,toggleOn:u,onClick:()=>Cs({name:"disableExternalMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},s,i,r),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(a.disable_external_membership_requests)}),l&&(0,se.jsx)(gs().Xr,{environment:r,toggleOn:g,onClick:()=>Cs({name:"disableGuestMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},s,i,r),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(a.disable_guest_membership_requests)})]})}function Ts(e){let{toggleAvailableForTier:t,guestCount:i,securitySettingsStore:s,spaceStore:a,publicAccessRequestsExpEnabled:r,isControlledByOrganization:l}=e;const d=(0,n().O7)(),c=(0,o().Kw)(s),u=(0,o().VK)((()=>!t||r&&!s.state.disablePublicAccessRequests),[t,s,r]),g=(0,o().VK)((()=>t?u||l?()=>{}:()=>async function(e,t,i){const s=e.state.disableGuests,n=e.state.enableGuestInviteRequests;if(s)bs({disableGuests:!s,...n&&{enableGuestInviteRequests:!n}},e,t,i);else{if(ye().default.checkGate({gateName:"show_keep_existing_guests_modal"}))return void e.setState({...e.state,disableGuestsModalOpen:!0});{const{accept:e}=await v().gt({message:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.disableGuests.confirmationModal.message",defaultMessage:"Are you sure? All guests in this workspace will be removed."}),acceptLabel:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.disableGuests.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}bs({disableGuests:!s},e,t,i)}}(s,a,d):()=>js(d)),[d,t,s,a,u,l]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m()._H,{id:"securitySAMLSettings.guestsSection.disableGuests.label",defaultMessage:"Disable members inviting guests to pages"}),!t&&(0,se.jsx)(ws,{}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.guestsSection.disableGuests.caption",defaultMessage:"Your workspace currently has <gueststablink> {guestCount, plural, one {1 guest} other {{guestCount} guests}}</gueststablink>",values:{gueststablink:e=>(0,se.jsx)(us().Z,{onClick:()=>{ji().jk(d,{source_tab:ct().default.state.currentTab,destination_tab:"members",destination_subtab:is().Q.Guests}),ct().default.setState({...ct().default.state,currentTab:"members",defaultSubtab:is().Q.Guests})},children:e}),guestCount:i}})})]}),(0,se.jsx)("div",{onClick:g,style:{marginTop:5,opacity:u?Ss:void 0},children:(0,se.jsx)(ti().Z,{on:c.disableGuests,disabled:u,isLocked:l,lockedTooltip:(0,wi().g)()})})]}),(0,se.jsx)(ns().Z,{size:24,style:{opacity:0}}),(0,se.jsx)(ds,{isOpen:Boolean(c.disableGuestsModalOpen),onDismiss:()=>{s.setState({...s.state,disableGuestsModalOpen:!1})},onSave:e=>{bs({disableGuests:!0,keepExistingGuests:e},s,a,d),s.setState({...s.state,disableGuestsModalOpen:!1})},guestCount:i})]})}function _s(e){let{toggleAvailableForTier:t,securitySettingsStore:i,spaceStore:s,publicAccessRequestsExpEnabled:a,isControlledByOrganization:r}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>!t||!i.state.disableGuests||a&&!i.state.disablePublicAccessRequests),[i,t,a]),c=(0,o().VK)((()=>t&&d?()=>{}:()=>{r||Cs({name:"enableGuestInviteRequests",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,s,l)}),[l,t,i,s,d,r]),u=(0,o().VK)((()=>(0,Se().p1)()),[]),g=(0,o().VK)((()=>!t||i.state.disableGuests),[i,t]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,se.jsx)(m()._H,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.label",defaultMessage:"Allow members to request adding guests"}),t&&(0,se.jsx)(Di().Z,{style:{marginLeft:0},href:(0,Ne().UY)("guides.guestRequests"),analyticsFrom:"space_saml"}),!t&&(0,se.jsx)(ws,{style:{marginTop:0}})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.caption",defaultMessage:"{hasRequestTab, select, true {Requests must be approved by a workspace owner. You can view all requests <requeststablink>here</requeststablink>} other {Requests must be approved by a workspace owner}}",values:{hasRequestTab:u,requeststablink:e=>(0,se.jsx)(us().Z,{onClick:()=>{ji().jk(l,{source_tab:ct().default.state.currentTab,destination_tab:"members",destination_subtab:is().Q.Requests}),ct().default.setState({...ct().default.state,currentTab:"members",defaultSubtab:is().Q.Requests})},children:e})}})})]}),(0,se.jsx)(fe().Z,{render:e=>(0,se.jsx)("div",{onClick:c,style:{marginTop:5,opacity:d?Ss:void 0},...e,children:(0,se.jsx)(ti().Z,{on:i.state.enableGuestInviteRequests,disabled:d,isLocked:r,lockedTooltip:(0,wi().g)()})}),renderTooltip:()=>(0,se.jsx)("div",{style:{},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.disabled.label",defaultMessage:"Disable inviting guests to use this feature"})}),disableTooltip:g,placement:xe().Placement.Top})]}),(0,se.jsx)(ns().Z,{size:24,style:{opacity:0}})]})}function ks(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:i,enableExternalAccessRequestSettingForTier:s,securitySettingsStore:n,spaceStore:a,organizationOverrides:o}=e;return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.guestsSection.title",defaultMessage:"Inviting members & guests"})}),(0,se.jsx)(Is,{securitySettingsStore:n,spaceStore:a,disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:i,enableExternalAccessRequestSettingForTier:s,organizationOverrides:o})]})}function Is(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:i,enableExternalAccessRequestSettingForTier:s,securitySettingsStore:n,spaceStore:a,organizationOverrides:r}=e;const l=(0,o().Kw)(_t().subscriptionDataStoreInstance),d=(0,o().VK)((()=>(0,Se().p1)()),[]),c=(0,o().VK)((()=>ye().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0})),[]),u=(0,_i().Y)(l);return void 0===u?(0,se.jsx)(as().Z,{}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Bs,{spaceStore:a,securitySettingsStore:n,toggleAvailableForTier:s,publicAccessRequestsExpEnabled:c}),(0,se.jsx)(Ts,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:t,guestCount:u,publicAccessRequestsExpEnabled:c,isControlledByOrganization:Boolean(r.disable_guests)}),(0,se.jsx)(_s,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:i,publicAccessRequestsExpEnabled:c,isControlledByOrganization:Boolean(r.enable_guest_invite_requests)}),(0,se.jsx)(Ms,{spaceStore:a,securitySettingsStore:n,requestTogglesAvailableForTier:d,organizationOverrides:r})]})}function As(e){let{enable:t,featureUpsellButton:i,securitySettingsStore:s,spaceStore:a,isControlledByOrganization:r}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>s.state.disablePublicAccess),[s]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:t?()=>{r||async function(e,t,i){const s=e.state.disablePublicAccess;if(!s){const{accept:e}=await v().gt({message:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.message",defaultMessage:"Are you sure you want to disable publishing sites and forms?"}),description:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.description",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this workspace."}),acceptLabel:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}bs({disablePublicAccess:!s},e,t,i)}(s,a,l)}:()=>js(l),children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.preventPublicSharing.label",defaultMessage:"Disable publishing sites and forms"}),!t&&i,(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.preventPublicSharing.caption",defaultMessage:"Disable the Share to web option in the Share menu on every page and form in this workspace."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ss},children:(0,se.jsx)(ti().Z,{on:d,disabled:!t,isLocked:r,lockedTooltip:(0,wi().g)()})})]}),(0,se.jsx)(ns().Z,{size:24,style:{opacity:0}})]})}function Ds(e){let{enable:t,featureUpsellButton:i,securitySettingsStore:s,spaceStore:a}=e;const r=(0,n().O7)(),l=(0,o().VK)((()=>s.state.disableSpacePageEdits),[s]);return(0,o().VK)((()=>(0,Ti().bq)()),[])?null:(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>Cs({name:"disableSpacePageEdits",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,a,r),children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.label",defaultMessage:"Prevent members from editing the Workspace section"}),!t&&i,(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.caption",defaultMessage:"Disable the ability for members to create, move, reorder, and delete top-level Workspace pages."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ss},children:(0,se.jsx)(ti().Z,{on:l,disabled:!t})})]}),(0,se.jsx)(ns().Z,{size:24,style:{opacity:0}})]})}function Ps(e){let{enable:t,spaceStore:i,securitySettingsStore:s,featureUpsellButton:a,isControlledByOrganization:r}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>s.state.disableMoveToSpace),[s]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{r||Cs({name:"disableMoveToSpace",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,i,l)},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disableMovingPages.label",defaultMessage:"Disable duplicating pages to other workspaces"}),!t&&a,(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disableMovingPages.caption",defaultMessage:"Prevent anyone from duplicating pages to other workspaces via the Move To or Duplicate To actions."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ss},children:(0,se.jsx)(ti().Z,{on:d,disabled:!t,isLocked:r,lockedTooltip:(0,wi().g)()})})]}),(0,se.jsx)(ns().Z,{size:24,style:{opacity:0}})]})}function Rs(e){let{enable:t,securitySettingsStore:i,spaceStore:s,featureUpsellButton:a,isControlledByOrganization:r}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>i.state.disableExport),[i]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{r||Cs({name:"disableExport",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,s,l)},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disableExport.label",defaultMessage:"Disable export"}),!t&&a,(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disableExport.caption",defaultMessage:"Prevent anyone from exporting as Markdown, CSV, or PDF."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ss},children:(0,se.jsx)(ti().Z,{on:d,disabled:!t||r,isLocked:r,lockedTooltip:(0,wi().g)()})})]}),(0,se.jsx)(ns().Z,{size:24,style:{opacity:0}})]})}function Bs(e){let{securitySettingsStore:t,spaceStore:i,publicAccessRequestsExpEnabled:s,toggleAvailableForTier:a,isControlledByOrganization:r}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>t.state.disablePublicAccessRequests),[t]),c=(0,o().VK)((()=>{if(!a)return()=>js(l,{subscriptionTier:"plus"});const e=!t.state.disablePublicAccessRequests,s=!e;return()=>{r||bs({disablePublicAccessRequests:e,...s&&{disableGuests:!1,enableGuestInviteRequests:!1}},t,i,l)}}),[l,i,t,a,r]);return s?(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:c,children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.label",defaultMessage:"Allow page access requests from non-members"}),!a&&(0,se.jsx)(ws,{subscriptionTier:"plus"}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.caption",defaultMessage:"This allows anyone with the link to a page to request access. Workspace members can always request access."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:a?void 0:Ss},children:(0,se.jsx)(ti().Z,{on:!d,disabled:!a,isLocked:r,lockedTooltip:(0,wi().g)()})})]}),(0,se.jsx)(ns().Z,{size:24,style:{opacity:0}})]}):null}function Zs(e){let{securitySettingsStore:t,spaceStore:i,organizationOverrides:n}=e;const a=(0,r().Fg)(),l=(0,Wt().pQ)({spaceId:i.id}),d=(0,o().VK)((()=>(0,Mi().J)({billingData:l})),[l]),c=(0,o().Kw)(t),u=(0,o().VK)((()=>(0,ss().wP)()),[]),g=(0,o().VK)((()=>(0,ss().mq)()),[]),p=(0,se.jsx)(ws,{});return d?(0,se.jsxs)(s.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})}),(0,se.jsx)(As,{enable:!0,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,se.jsx)(Ds,{enable:!0,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p}),(0,se.jsx)(Ps,{enable:!0,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,se.jsx)(Rs,{enable:!0,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,se.jsx)(ks,{securitySettingsStore:t,spaceStore:i,disableGuestsAvailableForTier:!0,enableGuestInviteRequestAvailableForTier:u,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,se.jsx)("div",{style:{height:36}})]}):(0,se.jsxs)(s.Fragment,{children:[(0,se.jsx)("div",{style:vs(a),children:(0,se.jsx)("span",{style:{marginRight:8},children:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})})}),(0,se.jsx)(As,{enable:c.disablePublicAccess,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,se.jsx)(Ds,{enable:c.disableSpacePageEdits,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p}),(0,se.jsx)(Ps,{enable:c.disableMoveToSpace,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,se.jsx)(Rs,{enable:c.disableExport,spaceStore:i,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,se.jsx)(ks,{securitySettingsStore:t,spaceStore:i,disableGuestsAvailableForTier:c.disableGuests,enableGuestInviteRequestAvailableForTier:c.enableGuestInviteRequests,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,se.jsx)("div",{style:{height:32}})]})}var Us=()=>i(454598);function Hs(e){let{spaceStore:t}=e;const i=(0,m().YB)(),{setPage:n}=(0,s.useContext)(Qt);return(0,se.jsxs)(xt().jX,{height:"fill",direction:"column",gap:32,padding:"40px 60px",children:[(0,se.jsxs)(xt().jX,{direction:"row",gap:6,children:[(0,se.jsx)(ei().Z,{ariaLabel:"back",icon:bi().f,onClick:()=>n("home")}),(0,se.jsx)(bt().q,{styleName:"UIHeading-17px/Medium",colorName:"primary",children:i.formatMessage(Es.title)})]}),(0,se.jsx)(Os,{spaceStore:t})]})}function Os(e){let{spaceStore:t}=e;const i=(0,kt().p)({spaceId:t.id}),s=(0,o().VK)((()=>(0,Mi().J)({billingData:i})),[i]),n=(0,o().qz)(void 0,at().Z);(0,a().K)((()=>{const e=n.getValueForSpace(t);e&&n.setState(e)}));const r=(0,o().Kw)(n),{organizationOverrides:l}=(0,Us().u)({spaceId:t.id}),d=(0,g().wO)(null==i?void 0:i.subscription),c=(0,o().VK)((()=>(0,p().wP)(d)),[d]),u=(0,o().VK)((()=>(0,p().mq)(d)),[d]);return s?(0,se.jsx)(Is,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:!0,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:c,organizationOverrides:l}):(0,se.jsx)(Is,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:r.disableGuests,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:r.enableGuestInviteRequests,organizationOverrides:l})}const Es=(0,m().vU)({title:{id:"RequestsSettingPage.PeopleInvitationSettings.title",defaultMessage:"Inviting guests and members"}});var Ls=()=>i(361072);function qs(e){let{title:t,loadedIconFunction:i,buttonAction:s,buttonText:n,buttonAriaLabel:a}=e;const l=(0,r().yK)((e=>({icon:{height:48,width:48,fill:e.icon.tertiary}})),[]),d=(0,o().VK)((()=>i(l.icon)),[l.icon,i]);return(0,se.jsxs)(xt().jX,{gap:16,align:"center",direction:"column",padding:"32px 0 88px 0",height:"fill",children:[(0,se.jsx)("div",{children:d}),(0,se.jsx)(bt().q,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,se.jsx)(vt().Z,{onClick:s,ariaLabel:a,children:(0,se.jsx)(bt().q,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Medium",children:n})})]})}function Vs(){const e=(0,m().YB)(),{setPage:t}=(0,s.useContext)(Qt);return(0,se.jsxs)(xt().jX,{height:"fill",direction:"column",gap:32,padding:"40px 60px",children:[(0,se.jsxs)(xt().jX,{direction:"row",gap:6,children:[(0,se.jsx)(ei().Z,{ariaLabel:"back",icon:bi().f,onClick:()=>t("home")}),(0,se.jsx)(bt().q,{styleName:"UIHeading-17px/Medium",colorName:"primary",children:e.formatMessage(Ns.title)})]}),(0,se.jsx)(qs,{title:e.formatMessage(Ns.noPendingRequests),buttonAriaLabel:"invite",buttonText:e.formatMessage(Ns.invite),buttonAction:()=>{},loadedIconFunction:Ls().l})]})}const Ns=(0,m().vU)({title:{id:"RequestsSettingPage.PeopleInvitations.title",defaultMessage:"People"},noPendingRequests:{id:"RequestsSettingPage.PeopleInvitations.noPendingRequests",defaultMessage:"No pending requests in your workspace"},invite:{id:"RequestsSettingPage.PeopleInvitations.invite",defaultMessage:"Invite"}});var Fs=()=>i(843403),Ks=()=>i(460561),Ws=()=>i(802321),zs=()=>i(789938),Gs=()=>i(167705),Ys=()=>i(661849);var $s=()=>i(539306),Qs=()=>i(860003),Js=()=>i(316855),Xs=()=>i(830581),en=()=>i(981583),tn=()=>i(512221),sn=()=>i(750824);function nn(e){let{feature:t,request:i,userId:s,onDismiss:a}=e;const l=(0,m().YB)(),d=(0,zt().r)(),c=(0,n().O7)(),u=(0,kt().p)({spaceId:null==d?void 0:d.id}),g=(0,r().yK)((e=>({fullWidth:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...sn().sM,height:32,color:e.text.secondary},input:{color:e.text.primary}})),[]),{userStore:f,userDisplayName:h}=(0,o().VK)((()=>{if(!d||!s)return{userStore:void 0,userDisplayName:void 0};const e=di().U.createChildStore(d,{table:B().KJ,id:s});return{userStore:e,userDisplayName:e.getDisplayName(l)}}),[d,s,l]);return(0,se.jsx)(Li().c,{ariaLabel:l.formatMessage(an.ariaLabel),isOpen:!0,onDismiss:a,areaConstraint:{width:{type:"min",length:480},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,se.jsx)(Xs().sR,{showDismissButton:!1,header:(0,se.jsx)(tn().xB,{icon:(0,se.jsx)(en().Z,{userStore:f,size:40}),title:l.formatMessage(an.title,{feature:p().aw[t].defaultMessage,user:h}),byline:l.formatMessage(an.subtitle,{entrypoint:i.entrypoint})}),footer:(0,se.jsx)(Qs().j,{gap:16,children:(0,se.jsxs)(Qs().j,{gap:8,children:[(0,se.jsx)(Ai().Z,{"aria-label":l.formatMessage(an.submitButton,{feature:p().aw[t].defaultMessage}),onClick:async()=>{await(0,$s().l)({environment:c,spaceStore:d,billingData:u,product:i.request,from:"upgrade_requests_page"}),a()},style:{height:32},children:l.formatMessage(an.submitButton,{feature:p().aw[t].defaultMessage})}),(0,se.jsx)("div",{style:{textAlign:"center"},children:(0,se.jsx)(bt().q,{styleName:"Caption-12px/Regular",colorName:"secondary",children:l.formatMessage(an.billingNotice)})}),(0,se.jsx)(Bt().D,{size:"lg",onClick:a,style:{...g.fullWidth,...g.cancelButton},"aria-label":l.formatMessage(an.cancelButton),children:l.formatMessage(an.cancelButton)})]})}),children:(0,se.jsxs)(Qs().j,{gap:8,children:[(0,se.jsx)(bt().q,{styleName:"Caption-12px/Regular",colorName:"secondary",style:{paddingLeft:2},children:l.formatMessage(an.noteLabel)}),(0,se.jsx)(Js().Z,{disabled:!0,format:Js().B.Large,value:i.reason_for_request,inputStyle:g.input}),(0,se.jsx)(bt().q,{styleName:"Caption-12px/Regular",colorName:"secondary",style:{paddingLeft:2},children:new Date(i.created_time).toLocaleDateString()})]})})})}const an=(0,m().vU)({submitButton:{id:"viewUpgradeRequestModal.submitButton",defaultMessage:"Upgrade {feature}"},cancelButton:{id:"viewUpgradeRequestModal.cancelButton",defaultMessage:"Cancel"},billingNotice:{id:"viewUpgradeRequestModal.billingNotice",defaultMessage:"Youâ€™ll be able to confirm the updated bill on the next step"},subtitle:{id:"viewUpgradeRequestModal.subtitle",defaultMessage:"This request was made from the {entrypoint} page"},title:{id:"viewUpgradeRequestModal.title",defaultMessage:"{user} would like access to Notion {feature}"},ariaLabel:{id:"viewUpgradeRequestModal.modal.ariaLabel",defaultMessage:"View plan request modal"},noteLabel:{id:"viewUpgradeRequestModal.noteLabel",defaultMessage:"Note"}});function on(e){let{spaceStore:t}=e;const i=(0,m().YB)(),{setPage:n}=(0,s.useContext)(Qt),{requests:a,isLoading:o}=(0,ci().p)({spaceId:t.id});if(o)return null;const r=Object.keys(a).length,l=1===r,d=0===r;return(0,se.jsxs)(xt().jX,{height:"fill",direction:"column",gap:32,padding:"40px 60px",children:[(0,se.jsxs)(xt().jX,{direction:"row",gap:6,children:[(0,se.jsx)(ei().Z,{ariaLabel:"back",icon:bi().f,onClick:()=>n("home")}),(0,se.jsx)(bt().q,{styleName:"UIHeading-17px/Medium",colorName:"primary",children:i.formatMessage(hn.title)})]}),d?(0,se.jsx)(qs,{title:i.formatMessage(hn.noRequestsTitle),buttonAriaLabel:"explore plans",buttonText:i.formatMessage(hn.noRequestsButtonTitle),buttonAction:()=>{j().r$({currentTab:"plans"})},loadedIconFunction:Ks().z}):(0,vi().qP)(a).map((e=>{let[i,s]=e;return s?(0,se.jsx)(rn,{expandByDefault:l,requestType:i,requests:s,spaceStore:t},i):null}))]})}function rn(e){let{expandByDefault:t=!1,requestType:i,requests:a,spaceStore:o}=e;const r=(0,n().O7)(),l=(0,kt().p)({spaceId:o.id}),[d,c]=s.useState(t),u=(0,m().YB)(),g=function(e){switch(e){case"ai":return hn.aiUpgrade;case"business":case"enterprise":return hn.planUpgrade;default:return null}}(i);return(0,se.jsxs)("div",{children:[(0,se.jsx)(Fi().Z,{title:(0,se.jsx)(ln,{requestType:i,requestCount:a.length,isExpanded:d,handleClick:()=>{c(!d)},shouldHideToggle:t}),type:"custom",isMobile:!1,disableSettingsItemClick:!0,customButton:g&&(0,se.jsx)(Ai().Z,{onClick:async()=>{await(0,$s().l)({environment:r,spaceStore:o,billingData:l,product:i,from:"upgrade_requests_page"})},children:u.formatMessage(g)})}),d&&(0,se.jsx)(fn,{spaceStore:o,requests:a})]})}function ln(e){let{handleClick:t,isExpanded:i,requestType:s,requestCount:n,shouldHideToggle:a}=e;const o=(0,m().YB)(),l=function(e){switch(e){case"ai":return hn.ai;case"business":return hn.business;case"enterprise":return hn.enterprise;default:return null}}(s),d=(0,r().yK)((e=>({toggleButton:{color:e.icon.secondary}})),[]);return(0,se.jsxs)(xt().jX,{direction:"row",gap:6,align:"center-left",children:[!a&&(0,se.jsx)(Gs().Z,{isSidebar:!1,fill:!0,onClick:()=>{t()},open:i,color:d.toggleButton.color}),l&&(0,se.jsx)(bt().q,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:o.formatMessage(l)}),(0,se.jsx)(bt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:n})]})}const dn={id:"note",headerTitle:(0,se.jsx)(m()._H,{id:"RequestsSettingsPage.UpgradesPage.noteColumn",defaultMessage:"Note"}),renderCell:e=>{let{value:t}=e;const i=t.reason_for_request??"â€”";return(0,se.jsx)(bt().q,{children:i})},sortable:!1,widthData:{minWidth:150,maxWidth:310,widthPercent:37}};function cn(e){let{value:t,isRowHovered:i}=e;const[n,a]=s.useState(!1),[o,l]=s.useState(null),d=(0,r().yK)((e=>({icon:{height:14,width:14,color:e.icon.secondary}})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(xt().jX,{direction:"row",width:"fill",gap:"auto",align:"center",children:i&&(0,se.jsx)(fe().Z,{placement:xe().Placement.Top,renderTooltip:()=>(0,se.jsx)(m()._H,{id:"RequestsSettingsPage.UpgradesPage.displayRequestToolTip",defaultMessage:"View Detail"}),render:e=>(0,se.jsx)(ei().Z,{ariaLabel:"View Detail",hasBackground:!0,icon:Fs().J,showShadow:!0,iconStyle:d.icon,onClick:e=>{l(t),a(!0),e.stopPropagation()},...e})})}),n&&o&&(0,se.jsx)(nn,{feature:o.request,request:o,userId:o.created_by_id,onDismiss:()=>a(!1)})]})}const un={id:"date",headerTitle:(0,se.jsx)(m()._H,{id:"RequestsSettingsPage.UpgradesPage.dateColumn",defaultMessage:"Date"}),renderCell:e=>{let{value:t}=e;return(0,se.jsx)(Ws().T,{dateTs:t.created_time})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:26}},gn={id:"dateWithViewDetail",headerTitle:"",renderCell:e=>{let{value:t,isRowHovered:i}=e;return(0,se.jsx)(cn,{value:t,isRowHovered:i})},sortable:!1,widthData:{minWidth:30,maxWidth:30,widthPercent:4}},pn=[{id:"requestedBy",headerTitle:(0,se.jsx)(m()._H,{id:"RequestsSettingsPage.UpgradesPage.requestedByColumn",defaultMessage:"Requested By"}),renderCell:e=>{let{userStore:t}=e;return(0,se.jsx)(zs().G,{useSecondaryColorTitle:!0,userStores:[t]})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:30}},dn,un,gn],mn=8;function fn(e){let{requests:t,spaceStore:i}=e;const[n,a]=s.useState(!1),[o,l]=s.useState(null),d=(0,r().yK)((e=>{const t=(0,pe().bE)({columnRenderInfo:pn,theme:e,containerMarginTop:8});return{...t,container:{...t.container,width:"100%"}}}),[]),c=t.map((e=>({value:e,userStore:(0,Ys().o)({userId:e.created_by_id,currentSpaceStore:i}),id:e.id,isClickable:!0}))),{pageRows:u,loadMoreMethod:g}=function(e){let{rows:t,limit:i}=e;const[n,a]=(0,s.useState)(i),[o,r]=(0,s.useState)(0),l=t.length,d=l>i;return{pageRows:(0,s.useMemo)((()=>d?t.slice(o,n):t),[t,o,n,d]),loadMoreMethod:(0,s.useMemo)((()=>{if(d)return{type:"pages",onLoadNext:()=>{if(n>=l)return;const e=Math.min(n+i,l);a(e),r(o+i)},onLoadPrevious:()=>{0!==o&&(a(o),r(o-i))},hasNextPage:n<l,hasPrevPage:o>0,currentPage:Math.floor(o/i)+1,finalPage:Math.floor(l/i)+1}}),[l,o,n,i,d])}}({rows:c,limit:mn});return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(pe().Dp,{columnRenderInfo:pn,rows:u,renderNoRowsComponent:()=>null,styles:d,loadMoreMethod:g,onRowClick:e=>{l(e.value),a(!0)}}),n&&o&&(0,se.jsx)(nn,{feature:null==o?void 0:o.request,request:o,userId:null==o?void 0:o.created_by_id,onDismiss:()=>a(!1)})]})}const hn=(0,m().vU)({title:{id:"RequestsSettingPage.UpgradePage.title",defaultMessage:"Upgrades"},aiUpgrade:{id:"RequestsSettingsPage.UpgradesPage.aiUpgrade",defaultMessage:"Upgrade AI"},planUpgrade:{id:"RequestsSettingsPage.UpgradesPage.planUpgrade",defaultMessage:"Upgrade Plan"},ai:{id:"RequestsSettingsPage.UpgradesPage.notionAI",defaultMessage:"Notion AI"},business:{id:"RequestsSettingsPage.UpgradesPage.business",defaultMessage:"Business"},enterprise:{id:"RequestsSettingsPage.UpgradesPage.enterprise",defaultMessage:"Enterprise"},noRequestsTitle:{id:"RequestsSettingsPage.UpgradesPage.NoPendingRequestsTitle",defaultMessage:"No upgrade requests in your workspace"},noRequestsButtonTitle:{id:"RequestsSettingsPage.UpgradesPage.NoPendingRequestsButtonTitle",defaultMessage:"Explore plans"}});function Sn(e){let{spaceStore:t,securitySettingsStore:i}=e;const[n,a]=(0,s.useState)("home");return(0,se.jsx)(Qt.Provider,{value:{currentPage:n,setPage:a},children:(0,se.jsx)(xn,{securitySettingsStore:i,spaceStore:t})})}function xn(e){let{spaceStore:t,securitySettingsStore:i}=e;const{currentPage:n}=(0,s.useContext)(Qt);switch(n){case"home":return(0,se.jsx)(gi,{securitySettingsStore:i,spaceStore:t});case"people_invitations":return(0,se.jsx)(Vs,{});case"people_invitation_settings":return(0,se.jsx)(Hs,{spaceStore:t});case"upgrades":return(0,se.jsx)(on,{spaceStore:t});default:return null}}var yn=()=>i(645491);const bn={VerifiedPagesSettings:new(Pe().Ss)("VerifiedPagesSettings",(()=>Promise.all([i.e(62743),i.e(7678),i.e(10553),i.e(22371),i.e(66463),i.e(77679),i.e(19454)]).then(i.bind(i,378341))))},vn=(0,Pe().kF)(bn.VerifiedPagesSettings,(e=>e.VerifiedPagesSettings));var jn=()=>i(401438),Cn=()=>i(801812),wn=()=>i(730728),Mn=()=>i(656221),Tn=()=>i(868982);var _n=()=>i(155481),kn=()=>i(787806),In=()=>i(343177),An=()=>i(220725),Dn=()=>i(394970),Pn=()=>i(843346);function Rn(e){let{spaceStore:t,filters:i,runNewSearch:a,setFilters:l,hasUserConfirmedAcknowledgement:d}=e;const c=function(e){const[t,i]=(0,s.useState)([]),a=(0,n().O7)(),r=(0,o().VK)((()=>(null==e?void 0:e.spaceStore)??et().default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),l=(0,o().VK)((()=>{var e;return null===(e=et().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,s.useEffect)((()=>{!async function(){const e=await(0,Ti().sj)({spaceStore:r,currentUserId:l,includeArchived:!1,minRoleOnTeamStores:"editor",environment:a});i(e)}()}),[r,l,a]),t}(),u=(0,r().yK)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]),g=(0,n().O7)(),[p]=(0,Cn().r5)((async()=>{const e=null==t?void 0:t.id;if(!e)return!1;return(await(0,Mn().rX)({environment:g,spaceId:e})).length>0}),[g,t]),m=(0,o().VK)((()=>ye().default.checkGate({gateName:"enterprise_trusted_domain_enabled"})&&"resolved"===p.status&&p.value?wn().m:wn().a),[p]);return(0,se.jsxs)("div",{style:u.container,children:[(0,se.jsx)(Tn().ON,{mode:Tn().p3.Button,query:i.query,setQueryFilter:function(e){l({query:e},{runSearchAfter:!0})},disabled:!d}),d?(0,se.jsxs)("div",{style:u.filterPillsContainer,children:[(0,se.jsx)(An().UO,{spaceStore:t,selectedPageStatus:i.pageStatus,setSelectedPageStatus:function(e){l({pageStatus:e})},onMenuClose:a}),(0,se.jsx)(In().f,{lastEditedTime:i.lastEditedTime,createdTime:i.createdTime,setLastEditedTime:function(e){l({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){l({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,se.jsx)(Pn().p,{selectedTeamIds:i.teamIds,setSelectedTeamIds:function(e){l({teamIds:e})},onMenuClose:a,teamStores:c}),(0,se.jsx)(Dn().Q,{spaceStore:t,sharedWithFilterItems:i.sharedWith,setSharedWithFilter:function(e){l({sharedWith:e})},runNewSearch:a,includeGroups:!0,includeGuests:!0}),(0,se.jsx)(_n().xF,{selectedAudience:i.audience,setSelectedAudience:function(e){l({audience:e})},onMenuClose:a,audienceValues:m}),(0,se.jsx)(kn().y,{spaceStore:t,createdByFilterIds:i.createdBy,setCreatedByFilter:function(e){l({createdBy:e})},runNewSearch:a,includeGuests:!0})]}):null]})}function Bn(e){let{spaceStore:t,filters:i,pageStores:s,hasUserConfirmedAcknowledgement:n}=e;const a=(0,o().VK)((()=>t.getName()),[t]);return(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:24},children:[(0,se.jsx)(he().Z,{isMultiline:!0,style:{marginBottom:20},isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"adminContentSearchTab.description.dataRetentionPolicy",defaultMessage:"Workspace owners can search for any page in <b>{workspaceName}</b>. This includes private pages and deleted pages retained per the <link>data retention policy</link>",values:{workspaceName:a,b:e=>(0,se.jsx)("b",{children:e}),link:e=>(0,se.jsx)(us().Z,{onClick:()=>ct().default.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}),children:e})}})}),(0,se.jsx)(jn().C,{spaceId:t.id,disabled:0===s.length||!n,filters:i})]})}const Zn=function(e){let{spaceStore:t,userStore:s}=e;const a=(0,n().O7)(),r=(0,o().VK)((()=>Ht().default.state.online),[]),l=(0,o().VK)((()=>{const e=et().default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return(null==t?void 0:t.admin_content_search_acknowledgement)??!1}),[]),{showSuggestions:d,loadNextPage:c,pageStores:u,loading:g,error:p,runNewSearch:f,filters:h,setFilters:S,refreshSearchResult:x}=(0,i(925230).z)({spaceStore:t,userStore:s,hasUserConfirmedAcknowledgement:l});return r?(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsx)(le().Z,{large:!a.device.isMobile||void 0,divider:a.device.isMobile?void 0:"full",children:(0,se.jsx)(m()._H,{id:"adminContentSearchTab.title",defaultMessage:"Content search"})}),(0,se.jsx)(Bn,{spaceStore:t,pageStores:u,filters:h,hasUserConfirmedAcknowledgement:l}),(0,se.jsx)(Rn,{spaceStore:t,runNewSearch:f,setFilters:S,filters:h,hasUserConfirmedAcknowledgement:l}),(0,se.jsx)(i(529253).d,{loading:g,error:p,pageStores:u,loadNextPage:c,filters:h,setFilters:S,showSuggestions:d,runNewSearch:f,hasUserConfirmedAcknowledgement:l,refreshSearchResult:x})]}):(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{defaultMessage:"Please go online to access content search.",id:"adminContentSearchTab.offline.message"})})})};var Un=()=>i(255933),Hn=()=>i(158792),On=()=>i(88142),En=()=>i(423402),Ln=()=>i(68247),qn=()=>i(466970),Vn=()=>i(853648),Nn=(i(670560),i(731107),i(228244),()=>i(714230)),Fn=()=>i(48826),Kn=()=>i(345864),Wn=()=>i(705214),zn=()=>i(657120),Gn=()=>i(921787),Yn=()=>i(636340),$n=()=>i(993261),Qn=()=>i(379936),Jn=()=>i(36560),Xn=()=>i(666830),ea=()=>i(853946),ta=()=>i(202787),ia=()=>i(138912),sa=()=>i(487985),na=()=>i(25694),aa=()=>i(254687),oa=()=>i(546464),ra=()=>i(419157),la=()=>i(159732),da=()=>i(568017),ca=()=>i(104088),ua=()=>i(235484),ga=()=>i(85073),pa=()=>i(342792),ma=()=>i(205228),fa=()=>i(352230),ha=()=>i(98228),Sa=()=>i(154439),xa=()=>i(827973),ya=()=>i(198829),ba=()=>i(18748),va=()=>i(255577),ja=()=>i(943620),Ca=()=>i(388284),wa=()=>i(497459);function Ma(e){const{query:t}=e,i=(0,n().O7)(),a=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),r=(0,o().VK)((()=>null==a?void 0:a.getBotSettingsStore().getValue()),[a]),l="approved_or_built_by_notion"===(null==r?void 0:r.integration_restrictions),d=(0,o().VK)((()=>null!=r&&r.integration_approval_statuses?Object.keys(r.integration_approval_statuses):[]),[r]),c=(0,o().VK)((()=>Object.keys(ua().u2).map((e=>{const t=null==a?void 0:a.getRecordModel({id:e,table:ga().K2});if("published"===(null==t?void 0:t.status))return e})).filter(vi().$K)),[a]),u=(0,s.useMemo)((()=>c.some((e=>e===ua().f3))),[c]),g=(0,o().VK)((()=>c.filter((e=>!d.includes(e))).slice(0,5)),[d,c]);return(0,se.jsx)(ya().Z,{menuType:fa().o.Popup,width:255,header:ka(t,g,l),children:(0,se.jsx)(Sa().Z,{request:t,performRequest:e=>async function(e){const{query:t,integrationType:i,environment:s,spaceId:n,approvedIntegrationIds:a,popularIntegrationIds:o,autoApproveBuiltByNotion:r}=e;if(!Ht().default.state.online||!n)return[];if((0,pa().e)(t)||(0,pa().qn)(t))return[t];if(""===t&&!r)return o;const l=await Z().callApi({eventName:"searchIntegrations",environment:s,data:{query:t,type:i,spaceId:n}});if("success"===l.type){const e=l.data.integrationIds.filter((e=>!a.includes(e))),t="production";if(!r){return e.sort(((e,i)=>(0,ua().BP)({integrationId:e,env:t})===(0,ua().BP)({integrationId:i,env:t})?0:(0,ua().BP)({integrationId:e,env:t})?-1:1)).slice(0,5)}return e.filter((e=>!(0,ua().BP)({integrationId:e,env:t}))).slice(0,5)}if("failed"===l.type)throw l.error;return(0,vi().t1)(l)}({query:e,environment:i,spaceId:null==a?void 0:a.id,approvedIntegrationIds:d,popularIntegrationIds:g,autoApproveBuiltByNotion:l}),debounce:ha().vp,render:(s,n,o)=>{if(!n||!o)return(0,se.jsx)(Ca().Z,{children:(0,se.jsx)(wa().Z,{})});const l=Wn().ns.filter((e=>t&&e.name.toLowerCase().includes(t.toLowerCase())&&!d.includes(e.id)&&(e.id!==Wn()._o||!u))),c=[];if(0===n.length&&0===l.length)c.push({key:"no_results",render:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:{marginLeft:8},children:(0,se.jsx)(m()._H,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=n.map((t=>{const s={table:ga().K2,id:t};if(!a)return;const n=te().y2.createChildStore(a,s);if("internal"===n.getType())return;const o=n.getInfo(),l=null==o?void 0:o.icon;return{key:`${t}`,render:e=>(0,se.jsx)(xa().Z,{...e,title:(0,se.jsx)(he().Z,{style:{fontWeight:h().Ue.semibold},children:n.getName()}),icon:l&&(0,se.jsx)(ja().Z,{disabled:!0,icon:{pointer:s,icon:l},isEmptyPage:!1,size:20}),style:l?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,se.jsx)(Ia,{tagline:null==o?void 0:o.tagline,isNotionIntegration:(0,ua().BP)({integrationId:n.id,env:"production"})}),className:"notranslate"}),action:()=>{e.closeDropdown(),_a({environment:i,currentSpaceStore:a,botSettings:r,integrationId:t})}}})).filter(vi().$K),s=l.map((t=>{const s=t.info;return{key:`${t.id}`,render:e=>(0,se.jsx)(xa().Z,{...e,title:(0,se.jsx)(he().Z,{style:{fontWeight:h().Ue.semibold},children:t.name}),icon:(0,se.jsx)("img",{src:s.icon,style:{height:20}}),caption:s.tagline,style:{paddingBottom:12},shouldWrapCaption:!0,className:"notranslate"}),action:()=>{e.closeDropdown(),_a({environment:i,currentSpaceStore:a,botSettings:r,integrationId:t.id})}}})).filter(vi().$K);c.push(...t,...s)}return(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:c}]})}})})}function Ta(e){const{query:t}=e,i=(0,n().O7)(),s=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]);return s?(0,se.jsx)(ya().Z,{menuType:fa().o.Popup,width:255,header:ka(t,[],!1),children:(0,se.jsx)(Sa().Z,{request:t,performRequest:e=>async function(e){const{query:t,environment:i,spaceId:s}=e;if(!Ht().default.state.online||!s)return[];if((0,pa().e)(t)||(0,pa().qn)(t))return[t];const n=await Z().callApi({eventName:"searchIntegrations",environment:i,data:{query:t,type:"compliance",spaceId:s}});if("success"===n.type)return n.data.integrationIds;if("failed"===n.type)throw n.error;return(0,vi().t1)(n)}({query:e,environment:i,spaceId:null==s?void 0:s.id}),debounce:ha().vp,render:(t,i,n)=>{if(!i||!n)return(0,se.jsx)(Ca().Z,{children:(0,se.jsx)(wa().Z,{})});const a=[];if(0===i.length)a.push({key:"no_results",render:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:{marginLeft:8},children:(0,se.jsx)(m()._H,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=Xn().Z.state.loaded&&ia().default.state.loaded?Xn().Z.state.webhookSubscriptions.map((e=>{var t;return null===(t=ia().default.getBotsAsRecordMap().getValue({table:R().cZ,id:e.bot_id}))||void 0===t?void 0:t.integration_id})):[],n=i.map((i=>{var n;const a=te().y2.createChildStore(s,{id:i,table:ga().K2});if(t.includes(i))return;const o={table:ga().K2,id:i},r=te().y2.createChildStore(s,o),l=null===(n=r.getInfo())||void 0===n?void 0:n.icon,d=(0,Gn().I$)(r.id);return{key:`${i}`,render:e=>(0,se.jsx)(xa().Z,{...e,title:(0,se.jsxs)("div",{style:{display:"flex",float:"left",alignItems:"center"},children:[(0,se.jsx)(he().Z,{style:{fontWeight:h().Ue.semibold},children:r.getName()}),(null==d?void 0:d.type)&&(0,se.jsx)("div",{style:{marginLeft:4},children:(0,se.jsx)(X().Z,{children:d.type})})]}),icon:l&&(0,se.jsx)(ja().Z,{disabled:!0,icon:{pointer:o,icon:l},isEmptyPage:!1,size:20}),style:null!=d&&d.icon?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,se.jsx)(Ia,{tagline:null!=d&&d.tagline?H().Z.formatMessage(null==d?void 0:d.tagline):"A SIEM or DLP partner",isNotionIntegration:!1})}),action:()=>{var t;e.closeDropdown();a.getModel()&&(null!=d&&null!==(t=d.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==d?void 0:d.type))?ta().Z.setState({open:!0,integrationId:r.id}):ea().Z.setState({open:!0,integrationId:r.id})}}})).filter(vi().$K);a.push(...n)}return(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:a}]})}})}):null}function _a(e){const{environment:t,currentSpaceStore:i,botSettings:s,integrationId:n}=e;if(i&&!(0,Gn().z6)(n)){const e={...null==s?void 0:s.integration_approval_statuses,[n]:{type:"integration",status:"approved"}};_().createAndCommit({userAction:"AdminIntegrationSettingsSearchResults.handleIntegrationSelection",environment:t,canUndo:!0,perform:t=>{Yn().sW({store:i,data:{bot_settings:{...s,integration_approval_statuses:e}},transaction:t})}})}}function ka(e,t,i){return!e&&!i&&t.length>0&&(0,se.jsx)(ba().ZP,{title:(0,se.jsx)(he().Z,{isSmall:!0,style:{marginTop:4,fontWeight:h().Ue.medium},children:(0,se.jsx)(m()._H,{defaultMessage:"Popular integrations",id:"adminIntegrationSettings.search.title.popularIntegrations"})})})}function Ia(e){const{tagline:t,isNotionIntegration:i}=e,s=(0,r().Fg)(),n=i?{}:{maxHeight:52,overflow:"auto"};return t?(0,se.jsxs)("div",{style:n,children:[t,i&&(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:8},children:[(0,se.jsx)(m()._H,{defaultMessage:"Developed by Notion",id:"adminIntegrationSettings.search.subtitle.notionBuilt"}),(0,Kn().X)({marginLeft:3,width:12,height:12,fill:s.invoiceGreen})]})]}):null}var Aa=()=>i(967092);const Da=(0,m().vU)({searchInputPlaceholder:{id:"adminConnectionsSettings.search.input.placeholder",defaultMessage:"Add by name or integration ID"},complianceIntegrationSearchInputPlaceholder:{id:"adminConnectionsSettings.search.input.complianceIntegrationPlaceholder",defaultMessage:"Add by name"}});function Pa(){const e=(0,n().MO)(),t=(0,r().Fg)(),[i,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(""),u=(0,s.useRef)(null);return i?(0,se.jsx)(me().Z,{style:{display:"flex",alignItems:"center",height:28,fontWeight:h().Ue.medium,fontSize:h().JB.UIRegular.desktop,color:da().ZP.blue,padding:"0px 6px"},onClick:()=>{a(!1)},children:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.search.button.label",defaultMessage:"{plusIcon}Â Add approved connection",values:{plusIcon:(0,la().R)({fill:da().ZP.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,se.jsx)(Aa().ZP,{alignmentToOrigin:xe().Alignment.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),a(!0),l(!1)},origin:(0,se.jsx)(Ei().Z,{type:"text",style:{width:255},left:(0,la().R)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),ref:u,value:d,onFocus:()=>{l(!0)},placeholder:H().Z.formatMessage(Da.searchInputPlaceholder),onChange:e=>c(e.target.value)}),open:o,popupType:ca().k.Popup,style:{width:255},render:()=>(0,se.jsx)(Ma,{query:d,closeDropdown:()=>l(!1)})})}function Ra(){const e=(0,n().MO)(),t=(0,r().Fg)(),[i,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(""),u=(0,s.useRef)(null);return i?(0,se.jsx)(Bt().D,{isBlue:!0,style:{display:"flex",alignItems:"center",height:28,fontWeight:h().Ue.medium,fontSize:h().JB.UIRegular.desktop,color:da().ZP.blue,padding:"0px 6px"},onClick:()=>{var e;a(!1),null===(e=u.current)||void 0===e||e.focus()},children:(0,se.jsx)(m()._H,{id:"adminConnectionsSettingsAddComplianceMenu.search.button.label",defaultMessage:"{plusIcon}Â Add connection",values:{plusIcon:(0,la().R)({fill:da().ZP.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,se.jsx)(Aa().ZP,{alignmentToOrigin:xe().Alignment.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),a(!0),l(!1)},origin:(0,se.jsx)(Ei().Z,{type:"text",style:{width:255},left:(0,la().R)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),focus:!0,ref:u,value:d,onFocus:()=>{l(!0)},placeholder:H().Z.formatMessage(Da.complianceIntegrationSearchInputPlaceholder),onChange:e=>c(e.target.value)}),open:o,popupType:ca().k.Popup,style:{width:255},render:()=>(0,se.jsx)(Ta,{query:d,closeDropdown:()=>{a(!0),l(!1)}})})}var Ba=()=>i(906301),Za=()=>i(625827),Ua=()=>i(585649),Ha=()=>i(663631);const Oa=["member_connections","workspace_connections"];function Ea(e){const t=(0,n().O7)(),{isMobile:i}=t.device,{guestBotIds:a,organizationOverrides:l}=e,d=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),u=(0,o().VK)((()=>Xn().Z.webhookSubscriptions.state.reduce(((e,t)=>{const i=t.getBotId();return i&&(e[i]=t.id),e}),{})),[]),g=(0,o().VK)((()=>ye().default.checkGate({gateName:"webhooks_beta"})||ye().default.checkGate({gateName:"e_discovery"})),[]),p=(0,qn().E)("ai_connector_discoverability");let S=p?function(e){const t=[];return t.push({id:Fn().aP,appName:"Slack",account:void 0,caption:"Get answers about public Slack channels and conversations using Notion AI",logo:Nn().Z.images.externalIntegrations.slackIconPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const i=await(0,oa().$W)(e,{name:"ai_slack_qna",spaceId:null===(t=et().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("upsell"===i.type){if("product"===i.upsell.type){const t=i.upsell.product;wt().y(e,{from:"slack_connect_button",upsell:{type:"product",product:t,limit:{type:"none"}}})}return}if("blocked"===i.type)return;const s=c().Il();$n().slackUniversalQnAConnectionStore.setState({...$n().slackUniversalQnAConnectionStore.state,currentScreen:"introduction",analyticsFrom:"connection_settings",sessionId:s})},integrationTypes:["aiConnector"]}),t.push({id:Fn().V,appName:"Google Drive",account:void 0,caption:"Get answers about Google Docs, Slides and Sheets using Notion AI",logo:Nn().Z.images.googleDriveLogoPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const i=await(0,oa().$W)(e,{name:"ai_google_drive_qna",spaceId:null===(t=et().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("upsell"===i.type){if("product"===i.upsell.type){const t=i.upsell.product;wt().y(e,{from:"google_drive_connect_button",upsell:{type:"product",product:t,limit:{type:"none"}}})}return}if("blocked"===i.type)return;const s=c().Il();sa().googleDriveConnectionStore.setState({...sa().googleDriveConnectionStore.state,analyticsFrom:"connection_settings",sessionId:s,screenToShow:"info_screen"})},integrationTypes:["aiConnector"]}),t.push({id:Fn().xb,appName:"GitHub",account:void 0,caption:"Get answers about GitHub PRs, issues and code repositories using Notion AI",logo:Nn().Z.images.externalIntegrations.githubIconPng,capabilities:(0,se.jsx)("div",{style:{display:"none"}}),canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const i=await(0,oa().$W)(e,{name:"github_ai_connector",spaceId:null===(t=et().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("upsell"===i.type){if("product"===i.upsell.type){const t=i.upsell.product;wt().y(e,{from:"github_connect_button",upsell:{type:"product",product:t,limit:{type:"none"}}})}return}if("blocked"===i.type)return;const s=c().Il();Jn().W.setState({...Jn().W.state,analyticsFrom:"connection_settings",sessionId:s,currentScreen:"introduction"})},integrationTypes:["aiConnector"]}),t.push({id:Fn().qC,appName:"Jira",account:void 0,caption:"Get answers about Jira projects, issues and boards using Notion AI",logo:Nn().Z.images.externalIntegrations.jiraPng,capabilities:(0,se.jsx)("div",{style:{display:"none"}}),canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const i=await(0,oa().$W)(e,{name:"jira_ai_connector",spaceId:null===(t=et().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("upsell"===i.type){if("product"===i.upsell.type){const t=i.upsell.product;wt().y(e,{from:"jira_connect_button",upsell:{type:"product",product:t,limit:{type:"none"}}})}return}if("blocked"===i.type)return;const s=c().Il();na().Z.setState({...na().Z.state,analyticsFrom:"connection_settings",sessionId:s,screenToShow:"info_screen"})},integrationTypes:["aiConnector"]}),t}(t):[];const x=(0,o().VK)((()=>d?(0,f().jj)([...a,...ia().default.bots.state.map((e=>e.id))]).map((e=>{const t=te().Qx.createChildStore(d,{table:R().cZ,id:e,spaceId:d.id});return t.getAlive()?t:void 0})).filter(vi().$K):[]),[d,a]),y=(0,o().VK)((()=>(0,Qn().e2)(x)),[x]),b=(0,o().VK)((()=>Ln().Z.state.appsConnectionData),[]),v=(0,o().VK)((()=>function(e){return e.filter((e=>e.isInternalBot())).map((e=>e.id))}(x)),[x]),j=(0,o().VK)((()=>function(e,t){if(!t)return{};return e.reduce(((e,i)=>{const s=di().U.createChildStore(t,{table:B().KJ,id:i.getCreatedById()}),n=i.getIntegrationId();return n?e[n]=n in e?[...e[n],s]:[s]:e[i.id]=[s],e}),{})}(x,d)),[x,d]),w=(0,o().VK)((()=>null==d?void 0:d.getBotSettingsStore().getValue()),[d]),M=(0,o().VK)((()=>Object.keys(y.nonCompliance).length+v.length),[y.nonCompliance,v]);let T=(0,o().VK)((()=>Object.values(y.compliance).flat().length),[y.compliance]);T+=b.length;const _=(0,o().VK)((()=>null!=w&&w.integration_approval_statuses?Object.keys(w.integration_approval_statuses).length+v.length:v.length),[w,v]),k={member_connections:(0,se.jsx)(m()._H,{id:"admin.connections.tabs.member_connections",defaultMessage:"Member{numberOfIntegrations}",values:{numberOfIntegrations:0!==M&&(0,se.jsx)(he().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:M+Wn().T2.length})}}),workspace_connections:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m()._H,{id:"admin.connections.tabs.workspace_connections",defaultMessage:"Workspace{numberOfIntegrations}",values:{numberOfIntegrations:0!==T&&(0,se.jsx)(he().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:T})}}),(0,se.jsx)(Ha().Z,{})]})},I=Oa.map((e=>k[e])),A=(0,o().VK)((()=>"integrations"===ct().default.state.currentTab?ct().default.state.defaultSubtab:void 0),[]),D=(0,o().VK)((()=>Xn().Z.integrations.state),[]),[P,Z]=(0,s.useState)(A||"member_connections"),U=(0,o().VK)((()=>(0,ss().wP)()),[]),H=Boolean(l.integration_restrictions),O=(0,r().yK)((e=>({connectedSection:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},connectedSectionDescription:{fontSize:14,marginRight:8,color:e.lightTextColor,fontWeight:400,marginBottom:12},addMenu:{position:"absolute",right:0,top:0},discoverSectionUpsell:{backgroundColor:e.accentColors.uiBlue[100],padding:16,borderRadius:6},discoverSectionHeader:{display:"flex",justifyContent:"space-between",marginBottom:8},discoverSectionTitle:{fontSize:16,fontWeight:510},discoverSectionButtons:{display:"flex"},learnMoreButton:{padding:"0px 8px",borderRadius:4,display:"flex",alignItems:"center",color:e.blueColor},upgradeButton:{marginLeft:12,padding:"0px 14px"},alias:{marginLeft:6,width:"0.9em",height:"0.9em",padding:1,border:"1px solid",borderRadius:2}})),[]),E={member_connections:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(La,{isIntegrationRestrictionsControlledByOrganization:H}),(null==w?void 0:w.integration_restrictions)&&(0,se.jsx)("div",{style:{marginTop:"19px"},children:(0,se.jsx)(qa,{isIntegrationRestrictionsControlledByOrganization:H})}),(0,se.jsx)("div",{style:{marginTop:"19px"},children:(0,se.jsx)(Va,{})}),(0,se.jsx)(ns().Z,{size:i?32:18,isHidden:!i}),Boolean(null==w?void 0:w.integration_restrictions)?(0,se.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:19},children:[(0,se.jsx)(he().Z,{style:{fontWeight:h().Ue.medium,display:"flex",alignItems:"center",height:28},children:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.table.allowIntegrations.title",defaultMessage:"Approved connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==_&&(0,se.jsx)(he().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:_})}})}),(0,se.jsx)(Pa,{})]}):(0,se.jsx)(he().Z,{style:{fontWeight:h().Ue.medium,display:"flex",height:28,alignItems:"center",marginBottom:"19px"},children:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.table.default.title",defaultMessage:"All connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==M&&(0,se.jsx)(he().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:M+Wn().T2.length})}})}),(0,se.jsx)(Ba().ZP,{integrationIdToBotIds:y.nonCompliance,internalIntegrationIds:v,integrationIdToUsers:j}),(0,se.jsx)("div",{style:{marginTop:16,marginBottom:32,display:"grid",gridTemplateColumns:"1fr",gap:4},children:(0,se.jsx)(Ua().Z,{})})]}),workspace_connections:()=>{const e=Object.keys(y.compliance),i=e.length>0||p&&b.length>0,s=function(e){const{allIntegrations:t,connectedIntegrationIds:i,isEnterprise:s}=e,n=[];for(const a of t)if(!i.includes(a.id)){const e=(0,Gn().I$)(a.id);if(!e)continue;if("internal"===a.type)continue;n.push({id:a.id,appName:a.name,account:void 0,caption:a.getInfo().tagline,logo:a.getInfo().icon,shouldHideInDiscover:!1,shouldShowNewBadge:!1,shouldHideConnectAccount:!0,shouldShowUpsell:!s,integrationTypes:[e.type],capabilities:(0,se.jsx)(se.Fragment,{}),canSelectPageAccess:!1,onConnect:()=>{var t;null!=e&&null!==(t=e.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==e?void 0:e.type)||"ediscovery"===(null==e?void 0:e.type)?ta().Z.setState({open:!0,integrationId:a.id}):ea().Z.setState({open:!0,integrationId:a.id})},onDisconnect:()=>{}})}return n}({allIntegrations:D,connectedIntegrationIds:e,isEnterprise:U});S=S.filter((e=>!b.some((t=>t.id===e.id)))),U&&s.unshift(...S);const n=s.length>0||S.length>0;return(0,se.jsx)(se.Fragment,{children:g?(0,se.jsxs)(se.Fragment,{children:[i&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("span",{style:O.connectedSectionDescription,children:(0,se.jsx)(m()._H,{id:"admin.connections.tab.workspace_connections.description",defaultMessage:"These integrations connect your workspace to external apps, or improve security and compliance. Only workspace owners can install them"})}),(0,se.jsxs)("div",{style:O.connectedSection,children:[(0,se.jsx)("div",{style:O.addMenu,children:(0,se.jsx)(Ra,{})}),(0,se.jsx)(Ba().cP,{botIdToWebhookSubscriptionId:u,complianceIntegrationsIdToBotIds:y.compliance,aiConnectedApps:b})]})]}),n&&(0,se.jsxs)("div",{children:[!U&&p&&0!==S.length&&(0,se.jsx)("div",{style:{marginBottom:10,marginTop:10},children:(0,se.jsx)(Za().Z,{apps:S,numberOfConnectedApps:0,title:(0,se.jsx)("div",{style:O.discoverSectionTitle,children:(0,se.jsx)(m()._H,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"})})})}),(0,se.jsx)("div",{style:{...U?{}:O.discoverSectionUpsell,marginTop:i?32:void 0},children:(0,se.jsx)(Za().Z,{apps:s,numberOfConnectedApps:e.length,numberOfDisplayRows:2,title:(0,se.jsxs)("div",{style:O.discoverSectionHeader,children:[(0,se.jsx)("div",{style:O.discoverSectionTitle,children:U?(0,se.jsx)(m()._H,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"}):(0,se.jsx)(m()._H,{id:"connectionsSettings.discoverNewConnectionsSection.titleUpsell",defaultMessage:"Upgrade to Enterprise to use these connections"})}),!U&&(0,se.jsxs)("div",{style:O.discoverSectionButtons,children:[(0,se.jsxs)(Oi().Z,{onClick:()=>{C().D({environment:t,url:"https://www.notion.so/integrations/collections/security-and-compliance"})},style:O.learnMoreButton,children:[(0,se.jsx)(m()._H,{defaultMessage:"Learn more",id:"connectionsSettings.discoverNewConnectionsSection.learnMore"}),(0,Fs().J)(O.alias)]}),(0,se.jsx)(Ai().Z,{style:O.upgradeButton,onClick:async()=>{d&&(aa().Zz({environment:t,spaceId:d.id}),await ra().Z.waitUntilReady()),wt().y(t,{from:"workspace_connections",upsell:{type:"product",product:"enterprise",limit:{type:"none"}},dontOpenPlansOnCancel:!0})},children:(0,se.jsx)(m()._H,{defaultMessage:"Upgrade",id:"connectionsSettings.discoverNewConnectionsSection.upgrade"})})]})]})})})]})]}):null})}},L=e=>E[e];return g?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ps().ZP,{tabs:I,selectedIndex:Oa.findIndex((e=>e===P)),onChange:e=>(e=>{Z(Oa[e])})(e),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),L(P)()]}):L("member_connections")()}function La(e){let{isIntegrationRestrictionsControlledByOrganization:t}=e;const i=(0,n().O7)(),s=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),{isMobile:a}=i.device,r=(0,o().VK)((()=>(0,ss().wP)()),[]),l=(0,o().VK)((()=>null==s?void 0:s.getBotSettingsStore().getValue()),[s]);return(0,se.jsx)(Fi().Z,{isMobile:a,isLocked:t,lockedTooltip:(0,wi().g)(),title:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.requireApprovalSetting.title",defaultMessage:"Restrict members from adding connections"}),caption:(0,zn().CJ)(l)?(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.requireApprovalSetting.allowList.workspaceOwner.caption",defaultMessage:"Workspace members can only install connections pre-approved by workspace owners."}):(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.requireApprovalSetting.off.caption",defaultMessage:"Workspace members can install any new connection."}),upsellOptions:{shouldUpsell:!r,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"dropdown",currentOption:(0,zn().CJ)(l)?"allow_list":"any_integrations",options:[{key:"any_integrations",label:(0,se.jsx)(m()._H,{id:"adminIntegrationSettings.integrationRestrictions.off.title",defaultMessage:"No restrictions"}),caption:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.connectionRestrictions.off.caption",defaultMessage:"Workspace members can install any connection."})},{key:"allow_list",label:(0,se.jsx)(m()._H,{id:"adminIntegrationSettings.integrationRestrictions.allowList.title",defaultMessage:"Only from approved list"}),caption:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.connectionRestrictions.allowList.caption",defaultMessage:"Workspace members can only install connections pre-approved by a workspace owner."})}],onSelectOption:e=>{t||function(e){const{environment:t,currentSpaceStore:i,botSettings:s,setting:n}=e;if(i){if("allow_list"===n&&(0,zn().CJ)(s))return;const e="allow_list"===n?"approved_only":void 0;_().createAndCommit({userAction:"AdminIntegrationSettings.handleIntegrationRestrictionSelect",environment:t,canUndo:!0,perform:t=>{Yn().sW({store:i,data:{bot_settings:{...s,integration_restrictions:e}},transaction:t})}})}}({environment:i,currentSpaceStore:s,botSettings:l,setting:e})},info:[{key:"learn_more",label:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.connectionRestrictions.info.title",defaultMessage:"Workspace owners can always install and approve new connections."})}]})}function qa(e){const{isIntegrationRestrictionsControlledByOrganization:t}=e,i=(0,n().O7)(),s=(0,r().Fg)(),a=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),{isMobile:l}=i.device,d=(0,o().VK)((()=>(0,ss().wP)()),[]),c=(0,o().VK)((()=>null==a?void 0:a.getBotSettingsStore().getValue()),[a]);return(0,se.jsx)(Fi().Z,{isMobile:l,title:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.autoApproveBuiltByNotion.title",defaultMessage:"Auto-approve <builtbynotion>Built by Notion</builtbynotion> connections",values:{builtbynotion:e=>(0,se.jsxs)("span",{style:{color:s.invoiceGreen,marginRight:4,marginLeft:4},children:[(0,Kn().X)({width:14,display:"inline",verticalAlign:"bottom",marginRight:2}),e]})}}),caption:(0,se.jsx)(m()._H,{defaultMessage:"Toggle this on to approve all workspace members to install connectionsÂ <helpcenterlink>built by Notion</helpcenterlink>.",id:"adminConnectionsSettings.autoApproveBuiltByNotion.caption",values:{helpcenterlink:e=>(0,se.jsx)(us().Z,{href:(0,Ne().UY)("guides.enterpriseIntegrationSettings"),children:e})}}),upsellOptions:{shouldUpsell:!d,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:"approved_or_built_by_notion"===(null==c?void 0:c.integration_restrictions),onToggle:()=>{t||function(e){const{environment:t,currentSpaceStore:i,botSettings:s}=e;if(i){const e="approved_or_built_by_notion"===(null==s?void 0:s.integration_restrictions)?"approved_only":"approved_or_built_by_notion";_().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:t=>{Yn().sW({store:i,data:{bot_settings:{...s,integration_restrictions:e}},transaction:t})}})}}({environment:i,currentSpaceStore:a,botSettings:c})},isLocked:t,lockedTooltip:(0,wi().g)()})}function Va(e){const t=(0,n().O7)(),{isMobile:i}=t.device,a=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),r=(0,o().VK)((()=>(0,ss().wP)()),[]),l=(0,o().VK)((()=>Boolean(null==a?void 0:a.getSettingsStore().getKeyStore("disallow_webhook_automation_action").getValue())),[a]),d=!l,c=(0,s.useCallback)((()=>{a&&_().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:e=>{Yn().sW({store:a.getSettingsStore(),data:{disallow_webhook_automation_action:!l},transaction:e})}})}),[a,l,t]);return(0,se.jsx)(Fi().Z,{isMobile:i,title:(0,se.jsx)(m()._H,{id:"adminConnectionsSettings.allowWebRequestsInAutomations.title",defaultMessage:"Allow webhooks in automations"}),caption:(0,se.jsx)(m()._H,{defaultMessage:"Allow webhooks to third-party tools in database automations and buttons.",id:"adminConnectionsSettings.allowWebRequestsInAutomations.caption"}),upsellOptions:{shouldUpsell:!r,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:d,onToggle:c})}var Na=()=>i(690122);const Fa=function(e){let{spaceStore:t,userStore:a,organizationOverrides:r}=e;const l=(0,n().O7)(),d=(0,o().qz)(void 0,Vn().Z),{device:c}=l,u=(0,o().VK)((()=>(0,i(345918).Fn)(l)),[l]);return(0,s.useEffect)((()=>{u||j().r$({currentTab:"members"})}),[u]),u?(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsx)(le().Z,{large:!c.isMobile||void 0,divider:c.isMobile?void 0:"full",style:{paddingBottom:12},children:(0,se.jsx)(m()._H,{id:"spaceConnectionsSettings.title",defaultMessage:"Connections"})}),(0,se.jsx)(Wa,{spaceStore:t,userStore:a,requestStore:d,organizationOverrides:r})]}):null};function Ka(e){let{error:t,result:i,ready:s,organizationOverrides:n}=e;return(0,o().VK)((()=>et().default.state.currentSpaceStore),[])?(0,se.jsxs)(Na().Z,{loaded:s,spinnerSize:"sm",showSpinnerTimeout:600,children:[t&&(0,se.jsx)("div",{children:(0,se.jsx)(m()._H,{id:"spaceIntegrationSettings.error",defaultMessage:"Something went wrongâ€¦"})}),i&&(0,se.jsx)(Ea,{...i,organizationOverrides:n})]}):null}function Wa(e){let{spaceStore:t,userStore:i,requestStore:s,organizationOverrides:a}=e;const r=(0,n().O7)(),l=(0,o().qz)(s,Vn().Z),d=(0,qn().E)("ai_connector_discoverability");return(0,se.jsx)(Sa().Z,{requestStore:l,request:{spaceId:t.id,userId:i.id},performRequest:async e=>(d&&await async function(e,t){let{spaceId:i}=e;const s=await Z().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:i},headers:(0,D().Bb)({spaceId:i})});var n;return"success"===s.type&&Ln().Z.setState({...Ln().Z.state,appsConnectionData:(null===(n=s.data)||void 0===n?void 0:n.appsData)||[]}),[]}(e,r),async function(e,t){let{spaceId:i}=e;return{guestBotIds:(await Promise.all([Hn().Yw({environment:t,table:Un().bx,id:i,type:"guest"}),Hn().Yw({environment:t,table:Un().bx,id:i,type:"external"}),En().pJ({environment:t}),On().v({environment:t})]))[0].botIds}}(e,r)),render:(e,t,i)=>(0,se.jsx)(Ka,{error:e,result:t,ready:i,organizationOverrides:a})})}var za=()=>i(573357),Ga=()=>i(253855),Ya=()=>i(636133),$a=()=>i(720866),Qa=()=>i(744958);const Ja=10,Xa=[50,100,200,500,1e3],eo=50;function to(e){var t;let{spaceStore:i,samlConfigStore:a,memberCountFilter:r,isPrimarySpace:l}=e;const d=(0,n().O7)(),c=(0,o().VK)((()=>a.state.emailDomains),[a]),[u,g]=(0,s.useState)({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),p=(0,Bi().VX)({name:"claimable_spaces",spaceId:i.id,userId:null===(t=d.currentUser)||void 0===t?void 0:t.id}),m=(0,s.useCallback)((async e=>{if(p&&0!==c.length&&l&&u.nextEarliestCreatedAt&&!u.loading&&!(e&&u.numPagesLoaded>0||u.error)){g((e=>({...e,loading:!0})));try{const{spaces:e,earliestCreatedAt:t,hasMoreSpaces:s}=await(0,Qa().XD)({fn:async()=>await async function(e,t,i,s,n){const a=await Z().callApi({eventName:"getSpacesCreatedByUserWithDomains",environment:e,data:{spaceId:t,emailDomains:i,spacesLimit:Ja,memberCountFilter:n,spaceCreatedTimeUpperBound:s}});if("failed"===a.type)throw a.error;return{spaces:a.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:a.data.hasMoreSpaces?a.data.earliestCreatedAt:void 0,hasMoreSpaces:a.data.hasMoreSpaces}}(d,i.id,c,u.nextEarliestCreatedAt?u.nextEarliestCreatedAt-1:Date.now(),r),handleError:(e,t)=>t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:Xa,retryAttemptRandomOffsetMS:eo,initialInput:void 0});g((i=>{const n=[...i.spaces],a=new Set(i.spaces.map((e=>e.id)));for(const t of e)a.has(t.id)||n.push(t);return{spaces:n,nextEarliestCreatedAt:t,numPagesLoaded:i.numPagesLoaded+1,hasNextPage:s,loading:!1,error:void 0}}))}catch(t){const e=(0,$a().t)(t);g((t=>({...t,loading:!1,error:e})))}}}),[d,p,r,l,i,c,u.nextEarliestCreatedAt,u.numPagesLoaded,u.loading,u.error]);const f=(0,s.useCallback)((async()=>{await m(!1)}),[m]),h=(0,s.useCallback)((async()=>{await m(!0)}),[m]),S=(0,s.useCallback)((async()=>{g({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),await m(!0)}),[m]);return{claimableSpaces:u.spaces,loading:u.loading,error:u.error,hasNextPage:u.hasNextPage,loadFirstPage:h,loadNextPage:f,resetFirstPage:S,setSpaceRequest:function(e,t){g((i=>{const s=i.spaces.map((i=>i.id===e?{...i,spaceRequest:t}:i));return{...i,spaces:s}}))},removeClaimableSpace:function(e){g((t=>{const i=t.spaces.filter((t=>t.id!==e));return{...t,spaces:i}}))}}}async function io(e){var t;const{environment:i,spaceId:s,store:n}=e;if(!(await(0,Bi().KQ)(i,{name:"saml",spaceId:s,userId:null===(t=et().default.state.currentUserStore)||void 0===t?void 0:t.id})))return n.reset(),{};const a=await Z().callApi({eventName:"getSamlConfigForSpace",environment:i,data:{spaceId:s}});if("failed"===a.type)v().x2(a);else if(a.data&&a.data.samlConfig){const e={...a.data.samlConfig,useMetadataUrl:!Boolean(a.data.samlConfig.idpMetadata)};return n.setState(e),a.data}return n.reset(),{}}const so={SettingsPage:"settings-page",WorkspacesPage:"workspaces-page",ManagedUsersPage:"managed-users-page"};let no=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}({});const ao=(0,s.createContext)(null);function oo(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a,children:r}=e;const l=(0,n().O7)(),[d,c]=(0,s.useState)(so.SettingsPage),[u,g]=(0,s.useState)(no.Single),m=(0,o().VK)((()=>i.state.emailDomains),[i]),f=(0,o().VK)((()=>Boolean(i.state.id)&&i.state.id===t.id),[i,t]),{loading:h,error:S,loaded:x}=function(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:s}=e;const a=(0,n().O7)(),[{status:o,error:r}]=(0,Cn().r5)((async()=>{const e=await io({environment:a,spaceId:t.id,store:i});return(0,A().Zw)(e)?e:e.samlConfig?{samlResponse:e,domainResponse:await s.updateValueForSpace({environment:a,spaceId:t.id,store:s})}:{samlResponse:e,domainResponse:void 0}}),[a,i,t,s]);return{loading:"pending"===o,loaded:"resolved"===o,error:r}}({spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),{loading:y,error:b,claimableSpaces:v,setSpaceRequest:j,removeClaimableSpace:C,hasNextPage:w,loadNextPage:M,loadFirstPage:T,resetFirstPage:_}=to({spaceStore:t,samlConfigStore:i,isPrimarySpace:f,memberCountFilter:"single"}),{loading:k,error:I,claimableSpaces:D,setSpaceRequest:P,removeClaimableSpace:R,hasNextPage:B,loadNextPage:U,loadFirstPage:H,resetFirstPage:O}=to({spaceStore:t,samlConfigStore:i,isPrimarySpace:f,memberCountFilter:"multi"}),E=v.length+D.length>0,[L,q,V,N,F,K,W,z]=u===no.Single?[y,b,v,j,C,w,M,T,_]:[k,I,D,P,R,B,U,H,O],{loading:G,error:Y,domainVerifications:$}=function(e){let{spaceStore:t}=e;const i=(0,n().O7)(),[a,o]=(0,s.useState)([]),[{status:r,error:l}]=(0,Cn().r5)((async()=>{if(!(0,p().Rs)(t.getSubscriptionTier()))return void o([]);const e=await Z().callApi({eventName:"getDomainVerificationCodesForSpace",environment:i,data:{spaceId:t.id,verifiedOnly:!0}});"success"===e.type?o(e.data.domainVerifications):o([])}),[i,t]);return{loading:"pending"===r,domainVerifications:"resolved"===r?a:[],error:l}}({spaceStore:t,emailDomains:m});(0,s.useEffect)((()=>{T(),H()}),[V,T,H]);const Q={page:d,navigateTo:function(e){c(e),0===v.length&&D.length>0&&g(no.Multi),"workspaces-page"===e&&Ya().Ce(l,{verifiedDomains:m,tab:u===no.Single?"single":"multi"})},loadingSaml:h,loadingSpaces:L,loadingVerifications:G,errorSaml:S,errorClaimableSpaces:q,errorVerifications:Y,loadedSaml:x,domainVerifications:$,hasBrowsableSpaces:E,claimableSpaces:V,setSpaceRequest:N,removeClaimableSpace:F,resetInitialClaimableSpaces:z,hasMoreClaimableSpaces:K,loadMoreClaimableSpaces:W,tab:u,setSelectedTab:function(e){g(e),"workspaces-page"===d&&Ya().Ce(l,{verifiedDomains:m,tab:e===no.Single?"single":"multi"})},verifiedDomains:m};return(0,se.jsx)(ao.Provider,{value:Q,children:r})}var ro=()=>i(456681),lo=(i(470928),()=>i(833437)),co=()=>i(313084),uo=()=>i(519454),go=()=>i(223174),po=()=>i(513602),mo=()=>i(191918),fo=()=>i(102182);const ho={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};function So(e){let{spaceStore:t,samlConfigStore:i,userStatus:a}=e;const r=(0,n().O7)(),[l,d]=(0,s.useState)(ho),c=(0,s.useRef)(void 0),u=(0,o().VK)((()=>Boolean(i.state.id)&&i.state.id===t.id),[i,t]),g=(0,o().VK)((()=>i.state.emailDomains),[i]),p=(0,s.useCallback)((async e=>{if(0===g.length)return;if(!u)return;let i=l.loading,s=l.error,n=l.hasNextPage,o=l.paginationToken;if(e.restartSearch&&(d((e=>({...ho,filters:e.filters}))),i=ho.loading,s=ho.error,n=ho.hasNextPage,o=ho.paginationToken),n&&!i&&!s){d((e=>({...e,loading:!0}))),c.current=l.filters;try{var p;const e=await Z().callApi({eventName:"getManagedUsers",environment:r,data:{spaceId:t.id,emailDomains:g,query:l.filters.query,multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId,paginationToken:o,userStatus:a}});if(ji().HH(r,{filters:{multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId},query_length:(null===(p=l.filters.query)||void 0===p?void 0:p.length)??0,current_page:o,user_status:a}),"failed"===e.type)throw e.error;const i=e.data.nextPaginationToken,s=e.data.results;d((e=>{const t=[...e.managedUsers],n=new Set(e.managedUsers.map((e=>e.userId)));for(const i of s)n.has(i.userId)||t.push(i);return{...e,managedUsers:t,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:i,hasNextPage:Boolean(i)}}))}catch(m){const e=(0,$a().t)(m);d((t=>({...t,loading:!1,error:e})))}}}),[r,t,g,u,l.loading,l.error,l.hasNextPage,l.paginationToken,l.filters,a]);(0,s.useEffect)((()=>{f().Xy(c.current,l.filters)||p({restartSearch:!0})}),[l.filters,p]);const m=(0,s.useCallback)((()=>p({restartSearch:!1})),[p]),h=(0,s.useCallback)((e=>{d((t=>({...t,filters:{...t.filters,...e}})))}),[]),S=(0,s.useCallback)(((e,t)=>{d((i=>({...i,managedUsers:i.managedUsers.map((i=>i.userId===e?{...i,workspaces:i.workspaces.filter((e=>e.id!==t))}:i))})))}),[]),x=(0,s.useCallback)((e=>{d((t=>({...t,managedUsers:[...t.managedUsers,e]})))}),[]),y=(0,s.useCallback)((e=>{d((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:l.managedUsers,filters:l.filters,loading:l.loading,error:l.error,removeWorkspaceFromUser:S,addUserToManagedUsers:x,removeUserFromManagedUsers:y,setFilters:h,hasNextPage:l.hasNextPage,loadNextPage:m}}let xo=function(e){return e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended",e}({});function yo(e){switch(e){case xo.Suspended:return"suspended";case xo.NotSuspended:return"notSuspended";default:(0,vi().t1)(e)}}var bo=()=>i(409873),vo=()=>i(259259);function jo(e){let{workspace:t}=e;const i=(0,m().YB)(),s=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return(0,se.jsxs)("div",{style:s.container,children:[t.name??(0,vo().o)(i),t.isExternal?(0,se.jsx)(Co,{}):null]})}function Co(){const e=(0,r().yK)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return(0,se.jsx)(fe().Z,{render:t=>(0,se.jsx)("div",{...t,children:(0,bo().D)(e.icon)}),renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}function wo(e){let{workspaceSummaries:t}=e;const i=(0,m().YB)(),s=(0,r().yK)((e=>({title:{marginRight:8},noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return(0,se.jsx)(he().Z,{style:s.noWorkspaces,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"})});const n=t.find((e=>e.name)),a=n?n.name:(0,vo().o)(i),o=t.length-1;return(0,se.jsxs)("div",{style:s.titleContainer,children:[(0,se.jsx)(he().Z,{isInline:!0,style:s.workspaceName,children:a}),!n||n.isExternal?(0,se.jsx)(Co,{}):null,o>0?(0,se.jsxs)(he().Z,{isInline:!0,style:s.plusMore,children:[(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:o}}),""]}):null]})}var Mo=()=>i(641772),To=()=>i(529048),_o=()=>i(855238),ko=()=>i(448419),Io=()=>i(508181);const Ao=(0,m().vU)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function Do(e){let{managedUser:t,managedUserActionSections:i}=e;const s=(0,o().qz)(void 0,To().Z),n=(0,m().YB)(),a=(0,r().yK)((()=>({container:{minWidth:265}})),[]);return(0,se.jsx)(ko().ZP,{popupType:Aa().kQ.Popup,style:a.container,buttonPopupStore:s,renderOrigin:e=>(0,se.jsx)(ei().Z,{ariaLabel:n.formatMessage(Ao.menuAriaLabel),icon:Mo().o,...e}),render:()=>(0,se.jsx)(Po,{managedUser:t,popupStore:s,managedUserActionSections:i})})}function Po(e){let{managedUser:t,popupStore:i,managedUserActionSections:s}=e;const n=[],a=(0,r().yK)((()=>({destructiveIcon:{fill:da().ZP.red,color:da().ZP.red}})),[]);for(const[o,r]of s.entries()){const e=r.map(((e,i)=>({key:i,render:i=>{var s,n;return(0,se.jsx)(_o().Z,{...i,shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...a.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?a.destructiveIcon:{}},disabled:null===(s=e.getDisabledState)||void 0===s?void 0:s.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)})},action:()=>e.onClick(t)}))),i={key:`section-${o}`,render:e=>(0,se.jsx)(Ca().Z,{topBorder:o>0,...e}),items:e};n.push(i)}return(0,se.jsxs)(ya().Z,{menuType:fa().o.Popup,children:[(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:n,onAccept:()=>{i.setState({open:!1})}}),(0,se.jsx)(Ca().Z,{topBorder:!0,children:(0,se.jsx)(Io().Z,{title:(0,se.jsx)(m()._H,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,Ne().UY)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})})]})}var Ro=()=>i(816559),Bo=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(Bo||{});const Zo={marginLeft:4,height:14,width:14,opacity:.5},Uo=[{id:"user",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Bo.ManagedUser?(0,se.jsx)(Ro().S,{userId:e.managedUser.userId}):(0,se.jsx)(Ro().L,{}),widthData:{width:70},sortable:!1},{id:"access",headerTitle:(0,se.jsx)("span",{style:{paddingInline:8},children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.access",defaultMessage:"Workspaces"})}),renderCell:e=>e.type===Bo.ManagedUser?(0,se.jsx)(wo,{workspaceSummaries:e.managedUser.workspaces}):(0,se.jsx)(i(365766).z6,{}),widthData:{width:60},sortable:!1},{id:"lastActive",headerTitle:(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.lastActive",defaultMessage:"Last active"}),(0,se.jsx)(fe().Z,{render:e=>(0,se.jsx)("div",{...e,children:(0,bo().D)(Zo)}),renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Bo.ManagedUser?(0,se.jsx)(i(956779).B,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,se.jsx)(Ws().I,{}),widthData:{width:60},sortable:!1},{id:"menu",headerTitle:null,renderCell:e=>e.type===Bo.ManagedUser?(0,se.jsx)(Do,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0}],Ho=[{id:"1",isClickable:!1,type:Bo.Loading},{id:"2",isClickable:!1,type:Bo.Loading},{id:"3",isClickable:!1,type:Bo.Loading}];function Oo(e){let{managedUsers:t,loadMoreManagedUsers:i,onEditDetails:s,loading:n,managedUserActionSections:a}=e;const o=t.map((e=>({id:e.userId,type:Bo.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:a}))),l=(0,r().yK)((e=>(0,pe().bE)({columnRenderInfo:Uo,theme:e,containerMarginTop:0})),[]);const d=n?[...o,...Ho]:o;return(0,se.jsx)(pe().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Uo,rows:d,onRowClick:function(e){e.type===Bo.ManagedUser&&s(e.managedUser)},renderNoRowsComponent:()=>(0,se.jsx)(Eo,{loading:n}),styles:l,loadMoreMethod:i?{type:"scroll",onLoadMore:i}:void 0})}function Eo(e){const t=(0,r().yK)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,se.jsx)(he().Z,{isSmall:!0,style:t.text,children:!e.loading&&(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.empty",defaultMessage:"No users found."})})}var Lo=()=>i(438771),qo=()=>i(646574),Vo=()=>i(578292),No=()=>i(777064),Fo=()=>i(176691),Ko=()=>i(628370),Wo=()=>i(485156),zo=()=>i(167830);function Go(e){let{title:t,byline:i,isOn:s,onToggle:n,disabled:a,tooltipForDisabled:o}=e;function r(){a||n()}return(0,se.jsx)(fe().Z,{placement:xe().Placement.Top,alignment:xe().Alignment.End,disableTooltip:!o||!a,renderTooltip:()=>o,render:e=>(0,se.jsx)("div",{...e,children:(0,se.jsx)(Pi,{title:t,byline:i,settingItem:(0,se.jsx)(ti().Z,{on:s,disabled:a,onClick:r})})})})}var Yo=()=>i(458852),$o=()=>i(470374);function Qo(e){const{userId:t,workspaces:i,spaceStore:n,removeWorkspaceFromUser:a}=e,o=(0,r().yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,se.jsx)("div",{style:o.container,children:i.map(((e,o)=>(0,se.jsxs)(s.Fragment,{children:[(0,se.jsx)(Jo,{userId:t,spaceId:n.id,workspace:e,removeWorkspaceFromUser:a}),o<i.length-1?(0,se.jsx)(ns().Z,{size:8}):null]},e.id)))})}function Jo(e){const{userId:t,spaceId:i,workspace:s,removeWorkspaceFromUser:a}=e,o=(0,m().YB)(),l=(0,n().O7)(),d=Xo(s),c=(0,r().yK)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]);async function u(){ji().wV(l,{external_space_id:s.id});const{accept:e}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})}),description:(0,se.jsx)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."})}),acceptLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!e)return;const n=await Z().callApi({eventName:"removeManagedUserFromSpace",environment:l,data:{userId:t,targetSpaceId:s.id,requestingSpaceId:i}});ji().dw(l,{external_space_id:s.id}),"success"===n.type?(a(t,s.id),fo().oV({label:(0,se.jsx)(m()._H,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:s.name}})})):fo().oV({label:(0,se.jsx)(m()._H,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:s.name}})})}const g=s.icon?{pointer:{table:Un().bx,id:s.id,spaceId:s.id},icon:s.icon}:void 0;return(0,se.jsx)("div",{style:c.container,children:(0,se.jsxs)("div",{style:c.workspaceContainer,children:[(0,se.jsx)("div",{style:c.iconContainer,children:(0,se.jsx)(ja().Z,{disabled:!0,icon:g,isEmptyPage:!1,size:28,title:s.name,isLarge:!0,emojiSize:24,isRaw:!1})}),(0,se.jsxs)("div",{style:c.textContainer,children:[(0,se.jsx)(he().Z,{style:c.name,isMultiline:!0,children:(0,se.jsx)(jo,{workspace:s})}),(0,se.jsx)(he().Z,{style:c.byline,children:(0,se.jsx)(er,{workspace:s,intl:o})})]}),(0,se.jsx)("div",{children:(0,se.jsx)(fe().Z,{render:e=>(0,se.jsx)(Bt().D,{isRed:!0,onClick:u,disabled:d,disabledFeedback:d,...e,children:(0,se.jsx)(m()._H,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})}),renderTooltip:()=>(0,se.jsx)(m()._H,{defaultMessage:"You cannot remove this user from the workspace because they are the only user in the workspace. To remove this user, delete the workspace instead.",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace.disableTooltip"}),disableTooltip:!d,placement:xe().Placement.Bottom})})]})})}function Xo(e){const t=e.membersCount;return"number"==typeof t?1===t:1===t.length&&1===t[0]}function er(e){const{workspace:t,intl:i}=e;return Xo(t)?(0,se.jsx)(m()._H,{defaultMessage:"{plan} Â· 1 member",id:"identityAndProvisioning.managedUsers.table.userAccess.oneMemberWorkspace",values:{plan:(0,p().v$)(t.plan,i)}}):Array.isArray(t.membersCount)?1===t.membersCount.length?(0,se.jsx)(m()._H,{defaultMessage:"{plan} Â· {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,p().v$)(t.plan,i),lowerEnd:t.membersCount[0]}}):(0,se.jsx)(m()._H,{defaultMessage:"{plan} Â· {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,p().v$)(t.plan,i),lowerEnd:t.membersCount[0],higherEnd:t.membersCount[1]}}):(0,se.jsx)(m()._H,{defaultMessage:"{plan} Â· {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,p().v$)(t.plan,i),numMembers:t.membersCount}})}const tr=(0,m().vU)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"},supportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.supportAccessFailed"}});function ir(e){let{spaceStore:t,managedUser:i,onClose:s,removeWorkspaceFromUser:n}=e;const a=Boolean(i),{isAccessGranted:o,toggleDataAccessConsent:r,loading:l}=(0,$o().d)({userId:null==i?void 0:i.userId,spaceId:t.id});return(0,se.jsx)(rs().Z,{open:a,onDismiss:s,preventHideChildrenWhileOpening:!0,render:()=>i?(0,se.jsx)(sr,{managedUser:i,isAccessGranted:o,toggleDataAccessConsent:r,loadingSupportAccess:l,renderWorkspacesOverview:()=>(0,se.jsx)(Qo,{spaceStore:t,userId:i.userId,workspaces:i.workspaces,removeWorkspaceFromUser:n})}):null})}function sr(e){let{managedUser:t,renderWorkspacesOverview:i,isAccessGranted:s,toggleDataAccessConsent:a,loadingSupportAccess:l}=e;const d=(0,m().YB)(),c=(0,n().O7)(),u=(0,o().VK)((()=>new(te().U6)(c,{id:t.userId,table:B().KJ})),[t,c]),{hasStagedChanges:g,resetState:p,saveChanges:f,loading:h,profilePhoto:S,name:x,email:y}=(0,Yo().s)({userStore:u}),b=(0,o().VK)((()=>u.getIsSuspended()?{type:"suspended"}:(0,Wo().os)({profilePhoto:S.value,name:x.value,email:y.value})),[u,S.value,x.value,y.value]),v=function(e){const{loadingSupportAccess:t}=e;return(0,r().yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.mediumTextColor},horizontalLabel:{color:e.mediumTextColor,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.regularTextColor},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.shadow2XS,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:l}),j=(0,Vo().E2)(d),C=(0,o().VK)((()=>!Ht().default.state.online),[]),w=t.mfaMethods.filter((e=>"backup_code"!==e)),M=d.formatList(w.map((e=>(0,No().cR)(e))),{type:"conjunction"});return(0,se.jsxs)("div",{style:v.container,children:[(0,se.jsxs)("div",{style:v.innerContainer,children:[(0,se.jsx)("div",{style:v.avatarContainer,children:(0,se.jsx)(Wo().ZP,{size:56,avatarType:b,isOffline:C,loading:S.loading,onUploadProfilePhoto:S.set,onRemoveProfilePhoto:S.remove})}),(0,se.jsxs)("div",{style:v.inputContainer,children:[(0,se.jsxs)("div",{style:v.inputRow,children:[(0,se.jsx)(zo().Z,{children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})}),(0,se.jsx)(Ei().Z,{style:v.input,disabled:h,value:x.value,placeholder:d.formatMessage(tr.namePlaceholder),onChange:e=>{x.set(e.target.value)}})]}),(0,se.jsxs)("div",{style:v.inputRow,children:[(0,se.jsx)(zo().Z,{children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})}),(0,se.jsx)(Ei().Z,{style:v.input,disabled:h,value:y.value,placeholder:d.formatMessage(tr.emailPlaceholder),onChange:e=>{y.set(e.target.value)}})]})]}),(0,se.jsxs)("div",{style:v.infoContainer,children:[(0,se.jsxs)("div",{style:v.infoRow,children:[(0,se.jsx)(he().Z,{style:v.label,isSmall:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})}),t.accountCreatedAt?(0,se.jsx)(he().Z,{isSmall:!0,style:v.value,children:(0,qo().Yx)(t.accountCreatedAt,"medium",j)}):(0,se.jsx)(he().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"})})]}),(0,se.jsx)(ns().Z,{size:16}),(0,se.jsxs)("div",{style:v.infoRow,children:[(0,se.jsx)(he().Z,{style:v.label,isSmall:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})}),t.lastActiveAt?(0,se.jsx)(he().Z,{isSmall:!0,style:v.value,children:(0,Fo().gs)(t.lastActiveAt)}):(0,se.jsx)(he().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"})})]}),(0,se.jsx)(ns().Z,{size:16}),(0,se.jsxs)("div",{style:v.infoRow,children:[(0,se.jsx)(he().Z,{style:v.label,isSmall:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})}),w.length>0?(0,se.jsx)(he().Z,{isSmall:!0,style:v.value,children:M}):(0,se.jsx)(he().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"})})]}),(0,se.jsx)(ns().Z,{size:16}),(0,se.jsx)("div",{style:v.supportAccessRow,children:(0,se.jsx)(Go,{title:(0,se.jsxs)(he().Z,{style:v.horizontalLabel,isSmall:!0,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),(0,se.jsx)(fe().Z,{placement:xe().Placement.Bottom,render:e=>(0,se.jsx)("div",{...e,children:(0,ro().m)(v.icon)}),renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})]}),byline:null,isOn:s,onToggle:a,disabled:l})})]}),(0,se.jsx)("div",{children:t.workspaces.length>0?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(zo().Z,{children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})}),i()]}):null})]}),(0,se.jsxs)(Ko().Z,{visible:g||h,initial:{translateY:48,opacity:0},animate:{opacity:1,translateY:0},exit:{translateY:48,opacity:0},style:v.footer,children:[(0,se.jsx)(vt().Z,{color:"uiRed",disabled:h,style:v.button,onClick:p,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})}),(0,se.jsx)(Ai().Z,{disabled:h,style:v.button,onClick:()=>f(),children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})})]})]})}var nr=()=>i(186596);const ar=(0,m().vU)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function or(e){let{spaceStore:t,samlConfigStore:i}=e;const{navigateTo:a}=(0,s.useContext)(ao),l=(0,n().O7)(),d=(0,m().YB)(),c=(0,r().yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:h().Ue.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:h().Ue.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),u=(0,o().VK)((()=>i.state.spaces),[i]),{managedUsers:g,filters:p,loadNextPage:f,setFilters:S,removeWorkspaceFromUser:x,loading:y,selectedTab:b,setSelectedTab:j,onOpenDetailsModal:w,onCloseDetailsModal:M,selectedUser:T,managedUserActionSections:_}=function(e){let{spaceStore:t,samlConfigStore:i}=e;const a=(0,n().O7)(),r=(0,m().YB)(),[l,d]=(0,s.useState)(),[c,u]=(0,s.useState)(xo.NotSuspended),g=(0,o().VK)((()=>a.currentUser.id),[a]),p=(0,s.useCallback)(((e,t)=>{ji().JX(a,{user_status:yo(c),from:t}),d(e.userId)}),[a,c]),f=So({userStatus:"notSuspended",spaceStore:t,samlConfigStore:i}),h=So({userStatus:"suspended",spaceStore:t,samlConfigStore:i});let S;S=c===xo.NotSuspended?f:h;const x=(0,s.useCallback)((async e=>{ji().rZ(a);const{accept:i}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})}),acceptLabel:(0,se.jsx)(m()._H,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:(0,se.jsx)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"})})});if(!i)return;const s=await Z().callApi({eventName:"updateUserSuspension",environment:a,data:{userId:e.userId,spaceId:t.id,suspend:!0}});ji().rv(a,{suspended_user_id:e.userId}),"failed"===s.type&&v().UW((0,U().wf)(H().Z.getIntl(),s)),h.addUserToManagedUsers(e),f.removeUserFromManagedUsers(e.userId)}),[a,t.id,h,f]),y=(0,s.useCallback)((async e=>{ji().NF(a);const{accept:i}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})}),acceptLabel:(0,se.jsx)(m()._H,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:(0,se.jsx)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."})})});if(!i)return;const s=await Z().callApi({eventName:"logoutManagedUsers",environment:a,data:{spaceId:t.id,target:{type:mo().J.User,userId:e.userId}}});if(ji()._m(a),"failed"===s.type)return v().UW((0,U().wf)(H().Z.getIntl(),s)),void fo().oV({label:(0,se.jsx)(m()._H,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});fo().oV({label:(0,se.jsx)(m()._H,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[a,t.id]),b=(0,s.useCallback)((async e=>{ji().Zm(a);const{accept:i}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})}),acceptLabel:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:(0,se.jsx)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,se.jsx)("br",{})}})})});if(!i)return;const s=await Z().callApi({eventName:"resetPasswordsForManagedUsers",environment:a,data:{spaceId:t.id,target:{type:mo().J.User,userId:e.userId}}});if(ji().vC(a),"failed"===s.type)return v().UW((0,U().wf)(r,s)),void fo().oV({label:(0,se.jsx)(m()._H,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});fo().oV({label:(0,se.jsx)(m()._H,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[a,r,t.id]),j=(0,s.useCallback)((async e=>{const i=await Z().callApi({eventName:"updateUserSuspension",environment:a,data:{userId:e.userId,spaceId:t.id,suspend:!1}});ji().Ci(a),"failed"===i.type&&v().RL(i.error.message),h.removeUserFromManagedUsers(e.userId),f.addUserToManagedUsers(e)}),[a,t.id,h,f]),C=(0,s.useCallback)((async e=>{ji().P1(a,{user_status:yo(c)});const{accept:i}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})}),acceptLabel:(0,se.jsx)(m()._H,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:(0,se.jsx)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{defaultMessage:"This action cannot be undone. This will permanently delete the user's entire account. All private workspaces will be deleted, and they will be removed from all shared workspaces.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"})})});if(!i)return;const s=await Z().callApi({eventName:"deleteManagedUser",environment:a,data:{userId:e.userId,spaceId:t.id}});ji().j7(a,{user_status:yo(c)}),"success"===s.type?(h.removeUserFromManagedUsers(e.userId),f.removeUserFromManagedUsers(e.userId)):v().UW((0,U().wf)(H().Z.getIntl(),s))}),[a,c,t.id,h,f]),w=(0,s.useMemo)((()=>S.managedUsers.find((e=>{let{userId:t}=e;return t===l}))),[l,S.managedUsers]),M=(0,s.useMemo)((()=>{let e;const t={onClick:e=>p(e,"dropdown_menu"),icon:uo().R,title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},i={onClick:e=>C(e),icon:Hi().y,title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0};switch(c){case xo.NotSuspended:e=[[t,{onClick:y,icon:co().S,title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})},{onClick:b,icon:go().z,title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})}],[{onClick:x,icon:lo().V,title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===g},i]];break;case xo.Suspended:e=[[t],[{onClick:e=>j(e),icon:po().u,title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})},i]];break;default:(0,vi().t1)(c)}return e.filter((e=>e.length>0))}),[p,g,c,C,x,j,y,b]);return{...S,selectedTab:c,setSelectedTab:u,selectedUser:w,managedUserActionSections:M,onOpenDetailsModal:p,onCloseDetailsModal:function(){d(void 0)}}}({spaceStore:t,samlConfigStore:i}),k=(0,s.useCallback)((e=>w(e,"row_click")),[w]);return(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsx)(us().Z,{style:c.link,onClick:()=>a(so.SettingsPage),children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.breadcrumb",defaultMessage:"â† Identity & Provisioning"})}),(0,se.jsxs)(le().Z,{large:!0,style:c.title,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.title",defaultMessage:"User management"}),(0,se.jsx)(ei().Z,{icon:ro().m,ariaLabel:d.formatMessage({defaultMessage:"Managed users settings help button",id:"identityProvisioningSettings.managedUsers.helpButton.label"}),onClick:()=>C().D({environment:l,url:(0,Ne().UY)("guides.managedUsers")})})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:c.byline,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.byline",defaultMessage:"Manage and view users that are using your verified domains"})}),(0,se.jsx)(ps().ZP,{tabs:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.table.notSuspendedTab.title",defaultMessage:"Active"},"notSuspended.title"),(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.table.suspendedTab.title",defaultMessage:"Suspended"},"suspended")],selectedIndex:b,onChange:e=>j(e),style:c.tabBarMenu}),(0,se.jsx)(Tn().ON,{mode:Tn().p3.Button,query:p.query,setQueryFilter:e=>{S({query:e})},placeholderText:H().Z.formatMessage(ar.placeholder)}),(0,se.jsxs)("div",{style:c.filters,children:[(0,se.jsx)(nr().O,{selectedSpaceId:p.workspaceId,setSelectedSpaceId:e=>{S({workspaceId:e})},spaceData:u}),(0,se.jsx)(Lo().V,{selectedMfaMethod:p.multiFactorStatus,setSelectedMfaMethod:e=>{S({multiFactorStatus:e})}})]}),(0,se.jsx)(Oo,{managedUsers:g,loading:y,loadMoreManagedUsers:f,onEditDetails:k,managedUserActionSections:_},b),(0,se.jsx)(ir,{spaceStore:t,managedUser:T,onClose:M,removeWorkspaceFromUser:x})]})}function rr(e){var t;let{environment:i,samlConfigStore:s,spaceStore:n}=e;const a=(0,Bi().VX)({name:"saml",spaceId:n.id,userId:null===(t=i.currentUser)||void 0===t?void 0:t.id});return(0,o().VK)((()=>s.state.emailDomains.length>0||a),[s,a])}var lr=()=>i(458335),dr=()=>i(91826),cr=()=>i(260599);function ur(e){var t;let{spaceStore:i,samlConfigStore:a,domainSettingsStore:r}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>a.state.emailDomains),[a]),c=(0,o().VK)((()=>"disabled"!==a.state.status&&"unconfigured"!==a.state.status),[a]),u=(0,Bi().VX)({name:"domain_settings",spaceId:i.id,userId:null===(t=l.currentUser)||void 0===t?void 0:t.id}),g=rr({environment:l,samlConfigStore:a,spaceStore:i}),p=(0,o().VK)((()=>g&&(!a.state.id||a.state.id===i.id)),[g,a,i]),m=(0,o().VK)((()=>r.state.emailDomains.length>0&&u),[r,u]),f=(0,o().VK)((()=>d.length>0),[d]),h=(0,s.useCallback)((async()=>{if(a.state.emailDomains.length>0)return(0,cr().B)({onRequest:()=>Z().callApi({eventName:"updateWorkspaceCreationForEmailDomains",environment:l,data:{emailDomains:a.state.emailDomains,workspaceCreationEnum:r.state.spaceCreation,spaceId:i.id}}),onSuccess:()=>{r.setState({...r.state,emailDomains:a.state.emailDomains})}})}),[l,i,r,a]),S=(0,s.useCallback)((async()=>{if(a.state.emailDomains.length>0)return(0,cr().B)({onRequest:()=>Z().callApi({eventName:"updateEmailDomainSettings",environment:l,data:{emailDomains:a.state.emailDomains,spaceId:i.id,preventProfileEdits:r.state.settings.prevent_profile_edits,preventMembersJoiningExternalWorkspace:r.state.settings.prevent_members_joining_external_workspace,customSessionDuration:(0,vo().K)(r.state.settings.custom_session_duration),preventGrantingSupportAccess:r.state.settings.prevent_granting_support_access,disableNotionMail:r.state.settings.disable_notion_mail}}),onSuccess:()=>{r.setState({...r.state,emailDomains:a.state.emailDomains})}})}),[l,i,r,a]),x=(0,o().VK)((()=>g&&u),[g,u]);return{verifiedDomains:d,isSamlStatusEnabled:c,isSamlAvailable:g,isSamlEditable:p,isDomainSettingsAvailable:m,isClaimSpacesAvailable:x,canSaveWorkspaceCreationSetting:f,saveWorkspaceCreationSetting:h,saveEmailDomainSettings:S}}function gr(e){let{title:t,byline:i,targetTier:a}=e;const o=(0,n().O7)(),r=(0,s.useCallback)((()=>wt().y(o,{from:"space_saml",upsell:{type:"product",product:a,limit:{type:"none"}}})),[o,a]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(le().Z,{smallMarginBottom:!0,style:{fontWeight:h().Ue.regular,display:"flex",alignItems:"center"},children:[(0,se.jsx)("span",{style:{marginRight:8},children:t}),(0,se.jsx)(li().Z,{subscriptionTier:a,analyticsName:"space_saml",onClick:r})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,children:i})]})}const pr={browseWorkspaces:(0,se.jsx)(m()._H,{defaultMessage:"Browse workspaces",id:"identityAndProvisioning.claimWorkspaces.button"}),noWorkspaces:(0,se.jsx)(m()._H,{defaultMessage:"No workspaces",id:"identityAndProvisioning.claimWorkspaces.buttonEmpty"}),loadingError:(0,se.jsx)(m()._H,{defaultMessage:"Error loading workspaces.",id:"identityAndProvisioning.claimWorkspaces.errorByline"})};function mr(e){let{promptUpgrade:t}=e;const{navigateTo:i,loadingSpaces:n,hasBrowsableSpaces:a,errorClaimableSpaces:o}=(0,s.useContext)(ao),l=Boolean(o),d=!a||n,c=!a&&!n,u=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.title",defaultMessage:"Claim workspaces"}),g=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.message",defaultMessage:"Claim workspaces created by users with a verified domain or require owners to use an external domain."}),p=(0,r().yK)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:d?.5:1,minWidth:160},settingErrorByline:{color:e.errorText,marginTop:8,fontSize:13}})),[d]);if(t)return(0,se.jsx)(gr,{title:u,byline:g,targetTier:"enterprise"});let f;return f=n?(0,se.jsx)(as().Z,{}):a?pr.browseWorkspaces:pr.noWorkspaces,(0,se.jsx)("div",{style:p.settingContainer,children:(0,se.jsx)(Pi,{title:u,byline:g,settingItem:(0,se.jsxs)("div",{style:p.buttonAndErrorContainer,children:[(0,se.jsx)(fe().Z,{placement:xe().Placement.Top,alignment:xe().Alignment.End,render:e=>(0,se.jsx)(vt().Z,{disabled:d,size:"lg",style:p.button,onClick:()=>i(so.WorkspacesPage),...e,children:f}),disableTooltip:!c,renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.tooltip",defaultMessage:"There are no available workspaces to claim"})}),l?(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:p.settingErrorByline,children:pr.loadingError}):null]})})})}var fr=()=>i(21234),hr=()=>i(279431);function Sr(e){let{spaceStore:t,samlConfigStore:i,promptUpgrade:a,disabled:l,saveWorkspaceCreationSetting:d,renderOverrideAddDomainButton:c}=e;const u=(0,n().O7)(),g=(0,o().qz)(void 0,fr().Z),p=(0,r().yK)((()=>({flex:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"18px 0px"},button:{position:"relative",marginLeft:"auto",marginRight:0,opacity:l?.5:1},plusIcon:{width:14,height:14,fill:"inherit",marginRight:"6px"}})),[l]),f=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.emailDomainsSection.title",defaultMessage:"Verified domains"}),S=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.emailDomainsSection.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),x=[...(0,o().VK)((()=>i.state.emailDomains.map(hr().f4)),[i]),...(0,o().VK)((()=>i.state.domainVerifications.filter((e=>!i.state.emailDomains.includes(e.domain))).sort(((e,t)=>e.createdAt-t.createdAt)).map(hr().UV)),[i])],y=(0,s.useCallback)((async()=>{await io({environment:u,spaceId:t.id,store:i})}),[u,t,i]),{resetInitialClaimableSpaces:b}=(0,s.useContext)(ao),v=(0,s.useCallback)((async e=>{switch(e.type){case"verified":return(0,cr().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id,removedEmailDomains:[e.domain]}}),onSuccess:async()=>{await y(),b()}});case"unverified":case"invalid":return(0,cr().B)({onRequest:()=>Z().callApi({eventName:"deleteDomainVerificationCode",environment:u,data:{id:e.id}}),onSuccess:()=>y()})}}),[u,t,y,b]),j=(0,s.useCallback)((()=>(0,cr().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id}}),onSuccess:()=>y()})),[u,y,t]),C=(0,s.useCallback)((async()=>{await y(),await d()}),[d,y]);return a?(0,se.jsx)(gr,{title:f,byline:S,targetTier:"business"}):(0,se.jsx)(hr().ZP,{disabled:l,domains:x,onRemoveDomain:v,domainVerificationStore:g,verificationType:"saml_config",verificationTargetId:t.id,refreshDomains:C,onClickAddDomain:j,renderOverrideAddDomainButton:e=>c?c():(0,se.jsxs)("div",{style:p.flex,children:[(0,se.jsxs)("div",{children:[(0,se.jsx)(le().Z,{smallMarginBottom:!0,style:{fontWeight:h().Ue.medium},children:f}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{marginBottom:4},children:S})]}),(0,se.jsx)("div",{children:(0,se.jsx)(Bt().D,{isBlue:!0,style:p.button,icon:e=>(0,la().R)({...e,...p.plusIcon}),disabled:l,onClick:e,children:(0,se.jsx)(m()._H,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})})})]})})}function xr(e){let{domainSettingsStore:t,samlConfigStore:i,disabled:a,promptUpgrade:l,verifiedDomains:d,tooltip:c,saveWorkspaceCreationSetting:u}=e;const g=(0,n().O7)(),p=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),f=(0,o().VK)((()=>{const e=i.state.id;if(!e)return;return new(te().H2)(g,{table:Un().bx,id:e}).getName()}),[g,i]),h=(0,s.useCallback)((async e=>{t.setState({...t.state,spaceCreation:e}),await u(),Ya().ti(g,{workspace_creation:e})}),[t,u,g]),S=(0,o().VK)((()=>d.length>0?t.state.spaceCreation:"admins_only"),[t,d]),x=(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.title",defaultMessage:"Workspace creation"}),y=(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.byline",defaultMessage:"Customize who can create new workspaces."}),b=(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.titleWithSpaceName",defaultMessage:"{primaryWorkspaceName} workspace owners",values:{primaryWorkspaceName:f}}),v=(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.title",defaultMessage:"Only workspace owners"});return l?(0,se.jsx)("div",{style:p.settingContainer,children:(0,se.jsx)(gr,{title:x,byline:y,targetTier:"enterprise"})}):(0,se.jsx)(fe().Z,{placement:xe().Placement.Top,alignment:xe().Alignment.End,render:e=>(0,se.jsx)("div",{...e,style:p.settingContainer,children:(0,se.jsx)(Fi().Z,{isMobile:g.device.isMobile,disabled:a,title:x,caption:y,type:"dropdown",currentOption:S,options:[{key:"unrestricted",label:(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.unrestricted.title",defaultMessage:"Anyone"}),caption:(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.unrestricted.caption",defaultMessage:"Any user can create new workspaces."})},{key:"admins_only",label:f?b:v,caption:(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.captionWithSpaceName",defaultMessage:"Only workspace owners of this workspace can create new workspaces."})}],onSelectOption:h})}),disableTooltip:!c,renderTooltip:()=>c})}function yr(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:s,isCurrentSpaceEnterprise:n}=e;const{verifiedDomains:a,isSamlAvailable:o,saveWorkspaceCreationSetting:r,isSamlEditable:l,isDomainSettingsAvailable:d,canSaveWorkspaceCreationSetting:c,isClaimSpacesAvailable:u}=ur({spaceStore:t,samlConfigStore:i,domainSettingsStore:s}),g=d&&l;return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Sr,{disabled:!l,promptUpgrade:!o,spaceStore:t,samlConfigStore:i,saveWorkspaceCreationSetting:r}),(0,se.jsx)(xr,{disabled:!g||!c,promptUpgrade:!n,verifiedDomains:a,samlConfigStore:i,domainSettingsStore:s,tooltip:0===a.length?(0,se.jsx)(m()._H,{id:"domainSettings.workspaceCreation.disabledTooltip",defaultMessage:"There must be at least one verified domain to configure the workspace creation setting."}):void 0,saveWorkspaceCreationSetting:r}),(0,se.jsx)(mr,{promptUpgrade:!u})]})}var br=()=>i(160459);function vr(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:a,disabled:l}=e;const d=(0,n().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,s.useMemo)((()=>Object.entries(br().nb).map((e=>{let[t,i]=e;return{key:t,label:(0,se.jsx)(he().Z,{children:(0,Fo().hH)(0,i)})}}))),[]),g=(0,o().VK)((()=>(0,vo().K)(t.state.settings.custom_session_duration)??br().gl),[t]),p=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.customSessionDuration.title",defaultMessage:"Session duration"}),f=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.customSessionDuration.message",defaultMessage:"Control how long your managed users can be logged in for before they must re-authenticate."});return a?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(gr,{title:p,byline:f,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fi().Z,{isMobile:d.device.isMobile,disabled:l,title:p,caption:f,type:"dropdown",currentOption:g,options:u,onSelectOption:async function(e){const s=t.state.settings.custom_session_duration??br().nb[br().gl],n=br().nb[e];if(void 0===n)return;ji().LO(d,{custom_session_duration_ms:s});const{accept:a}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,se.jsxs)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,Fo().hH)(0,s),newDuration:(0,Fo().hH)(0,n),b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,se.jsx)("b",{children:t})}}}),(0,se.jsx)("br",{}),(0,se.jsx)("br",{}),(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});a&&(t.setState({...t.state,settings:{...t.state.settings,custom_session_duration:n}}),ji().l0(d,{new_session_duration_ms:n}),await i())}})})}function jr(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:a,hasVerifiedDomains:l,disabled:d}=e;const c=(0,n().O7)(),u=(0,qn().E)("enable_notion_mail_settings_toggle"),g=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),p=(0,o().VK)((()=>Boolean(!t.state.settings.disable_notion_mail)),[t]),f=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.enableNotionMail.title",defaultMessage:"Notion Mail"}),h=(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.enableNotionMail.message",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,se.jsx)("br",{}),(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.enableNotionMail.terms",defaultMessage:"By using Notion Mail, you agree to the Notion Mail and Notion AI Supplementary Terms."})]}),S=(0,s.useCallback)((async()=>{const e=Boolean(!t.state.settings.disable_notion_mail);t.setState({...t.state,settings:{...t.state.settings,disable_notion_mail:e}}),ji().Dn(c,{new_value:e}),await i()}),[c,t,i]);return u?a?(0,se.jsx)("div",{style:g.settingContainer,children:(0,se.jsx)(gr,{title:f,byline:h,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:g.settingContainer,children:(0,se.jsx)(Go,{title:(0,se.jsx)("div",{style:g.settingsTitle,children:f}),byline:h,isOn:p,onToggle:S,disabled:d||!l})}):null}function Cr(e){let{spaceId:t,domainSettingsStore:i,promptUpgrade:s,verifiedDomains:a,disabled:o}=e;const l=a.length>0,d=(0,n().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!o&&l?1:.5}})),[o,l]),u=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.title",defaultMessage:"Reset passwords for all users"}),g=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.message",defaultMessage:"Force reset the passwords for all managed users and require them to create a new one the next time they log in."});async function p(){ji().Jo(d,{email_domains:a});const{accept:e}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.message",defaultMessage:"Reset passwords for your managed users?"})}),description:(0,se.jsx)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.description",defaultMessage:"You are about to reset the passwords for of your managed users, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,se.jsx)("br",{})}})}),acceptLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.acceptLabel",defaultMessage:"Reset passwords for all managed users"}),cancelLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const s=i.state.emailDomains;await Z().callApi({eventName:"resetPasswordsForManagedUsers",environment:d,data:{spaceId:t,target:{type:mo().J.Domains,emailDomains:s}}}),fo().oV({label:(0,se.jsx)(m()._H,{id:"managedUsers.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed users"})}),ji().aT(d,{email_domains:s})}return s?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(gr,{title:u,byline:g,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Pi,{title:u,byline:g,settingItem:(0,se.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,se.jsx)(fe().Z,{placement:xe().Placement.Top,alignment:xe().Alignment.End,render:e=>(0,se.jsx)(Bt().D,{isRed:!0,disabled:o||!l,style:c.button,onClick:p,...e,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.logoutButton",defaultMessage:"Reset passwords for all users"})}),disableTooltip:l,renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function wr(e){let{spaceId:t,domainSettingsStore:i,promptUpgrade:s,verifiedDomains:a,disabled:o}=e;const l=a.length>0,d=(0,n().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!o&&l?1:.5}})),[o,l]),u=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.title",defaultMessage:"Log out all users"}),g=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.message",defaultMessage:"Force log out all managed users and require them to re-authenticate."});async function p(){ji().KF(d,{email_domains:a});const{accept:e}=await v().gt({message:(0,se.jsx)(he().Z,{style:v().fq.title,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.message",defaultMessage:"Log out all of your managed users?"})}),description:(0,se.jsx)(he().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.description",defaultMessage:"You are about to log all of your managed users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})}),acceptLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.acceptLabel",defaultMessage:"Log out all managed users"}),cancelLabel:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const s=i.state.emailDomains;await Z().callApi({eventName:"logoutManagedUsers",environment:d,data:{spaceId:t,target:{type:mo().J.Domains,emailDomains:s}}}),fo().oV({label:(0,se.jsx)(m()._H,{id:"managedUsers.toastMessage.logout.all.success",defaultMessage:"Logging out managed users. This may take a few minutes to complete."})}),ji()._6(d,{email_domains:s})}return s?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(gr,{title:u,byline:g,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Pi,{title:u,byline:g,settingItem:(0,se.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,se.jsx)(fe().Z,{placement:xe().Placement.Top,alignment:xe().Alignment.End,render:e=>(0,se.jsx)(Bt().D,{isRed:!0,disabled:o||!l,style:c.button,onClick:p,...e,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"})}),disableTooltip:l,renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function Mr(e){let{promptUpgrade:t,hasVerifiedDomains:i,disabled:a}=e;const{navigateTo:o}=(0,s.useContext)(ao),l=(0,n().O7)(),d=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.title",defaultMessage:"Managed users dashboard"}),c=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.message",defaultMessage:"Manage and view users that are using your verified domains"}),u=(0,r().yK)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!a&&i?1:.5}})),[i,a]);return t?(0,se.jsx)("div",{style:u.settingContainer,children:(0,se.jsx)(gr,{title:d,byline:c,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:u.settingContainer,children:(0,se.jsx)(Pi,{title:d,byline:c,settingItem:(0,se.jsx)("div",{style:u.buttonAndErrorContainer,children:(0,se.jsx)(fe().Z,{placement:xe().Placement.Top,alignment:xe().Alignment.End,render:e=>(0,se.jsx)(vt().Z,{disabled:a||!i,size:"lg",style:u.button,onClick:()=>{ji().pC(l),o(so.ManagedUsersPage)},...e,children:(0,se.jsx)(m()._H,{defaultMessage:"View dashboard",id:"identityAndProvisioning.managedUsers.button"})}),disableTooltip:i,renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function Tr(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:s,verifiedDomains:a,disabled:l}=e;const d=(0,n().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=a.length>0,g=(0,o().VK)((()=>Boolean(t.state.settings.prevent_granting_support_access)),[t]),p=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.title",defaultMessage:"Prevent managed users from granting support access"}),f=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.message",defaultMessage:"Control if managed users can enable support access on their accounts."});return s?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(gr,{title:p,byline:f,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Go,{title:(0,se.jsx)("div",{style:c.settingsTitle,children:p}),byline:f,isOn:g,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_granting_support_access);t.setState({...t.state,settings:{...t.state.settings,prevent_granting_support_access:e}}),ji().Dn(d,{new_value:e}),await i()},disabled:l||!u})})}function _r(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:s,disabled:a}=e;const l=(0,n().O7)(),d=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,o().VK)((()=>Boolean(t.state.settings.prevent_members_joining_external_workspace)),[t]),u=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.title",defaultMessage:"External workspace access"}),g=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.message",defaultMessage:"Control if managed users are able to join workspaces that aren't owned by your organization."});if(s)return(0,se.jsx)("div",{style:d.settingContainer,children:(0,se.jsx)(gr,{title:u,byline:g,targetTier:"enterprise"})});const p=c?"on":"off";return(0,se.jsx)("div",{style:d.settingContainer,children:(0,se.jsx)(Fi().Z,{isMobile:l.device.isMobile,disabled:a,title:u,caption:g,type:"dropdown",currentOption:p,options:[{key:"on",label:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.titleGeneric",defaultMessage:"Only workspace owners"}),caption:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.caption",defaultMessage:"Only workspace owners of your connected workspaces can join external workspaces."})},{key:"off",label:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.titleWithSpaceName",defaultMessage:"Anyone"}),caption:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.caption",defaultMessage:"All users can join any workspace."})}],onSelectOption:async function(){const e=Boolean(!t.state.settings.prevent_members_joining_external_workspace);t.setState({...t.state,settings:{...t.state.settings,prevent_members_joining_external_workspace:e}}),ji().T4(l,{new_value:e}),await i()}})})}function kr(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:s,hasVerifiedDomains:a,disabled:l}=e;const d=(0,n().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,o().VK)((()=>Boolean(t.state.settings.prevent_profile_edits)),[t]),g=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.title",defaultMessage:"Allow managed users to change profile information"}),p=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.message",defaultMessage:"Control if managed users can change their preferred name, email address, and profile photo."});return s?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(gr,{title:g,byline:p,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Go,{title:(0,se.jsx)("div",{style:c.settingsTitle,children:g}),byline:p,isOn:!u,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_profile_edits);t.setState({...t.state,settings:{...t.state.settings,prevent_profile_edits:e}}),ji().Dn(d,{new_value:e}),await i()},disabled:l||!a})})}function Ir(e){var t;let{spaceStore:i,samlConfigStore:s,domainSettingsStore:a}=e;const{verifiedDomains:l,isDomainSettingsAvailable:d,isSamlEditable:c,saveEmailDomainSettings:u}=ur({spaceStore:i,samlConfigStore:s,domainSettingsStore:a}),g=(0,r().yK)((e=>({byline:{fontSize:14,fontWeight:h().Ue.regular,color:e.mediumTextColor},helpButton:{marginTop:18,marginBottom:16}})),[]),p=(0,n().O7)(),f=d&&c,S=(0,Bi().VX)({name:"managed_users",spaceId:i.id,userId:null===(t=p.currentUser)||void 0===t?void 0:t.id}),x=(0,o().VK)((()=>i.id),[i]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{children:(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:g.byline,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.byline",defaultMessage:"These settings apply to all users with a verified domain, even if they are not a member of this workspace."})})}),(0,se.jsx)(Di().Z,{title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.managedUsers.helpButton",defaultMessage:"Learn about managed users"}),href:(0,Ne().UY)("guides.managedUsers"),style:g.helpButton,analyticsFrom:"managed_users_section"}),(0,se.jsx)(Mr,{promptUpgrade:!S,hasVerifiedDomains:l.length>0,disabled:!f}),(0,se.jsx)(kr,{promptUpgrade:!S,hasVerifiedDomains:l.length>0,domainSettingsStore:a,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(_r,{promptUpgrade:!S,domainSettingsStore:a,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(Tr,{promptUpgrade:!S,verifiedDomains:l,domainSettingsStore:a,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(vr,{promptUpgrade:!S,domainSettingsStore:a,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(wr,{spaceId:x,promptUpgrade:!S,domainSettingsStore:a,verifiedDomains:l,disabled:!f}),(0,se.jsx)(Cr,{spaceId:x,promptUpgrade:!S,domainSettingsStore:a,verifiedDomains:l,disabled:!f}),(0,se.jsx)(jr,{promptUpgrade:!S,hasVerifiedDomains:l.length>0,domainSettingsStore:a,saveEmailDomainSettings:u,disabled:!f})]})}function Ar(e){let{spaceStore:t,samlConfigStore:i}=e;const a=(0,n().O7)();return{updateSamlIdpUrl:(0,s.useCallback)((async e=>{let s=!1;return await(0,cr().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:a,data:{spaceId:t.id,idpMetadataUrl:e}}),onSuccess:()=>{s=!0,i.setState({...i.state,useMetadataUrl:!0,idpMetadataUrl:e,idpMetadata:void 0})}}),s}),[i,t,a]),updateSamlIdpXml:(0,s.useCallback)((async e=>{let s=!1;return await(0,cr().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:a,data:{spaceId:t.id,idpMetadata:e}}),onSuccess:()=>{s=!0,i.setState({...i.state,useMetadataUrl:!1,idpMetadataUrl:void 0,idpMetadata:e})}}),s}),[i,t,a]),updateStatus:(0,s.useCallback)((e=>(0,cr().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:a,data:{spaceId:t.id,status:e}}),onSuccess:()=>{i.setState({...i.state,status:e})}})),[i,t,a]),updateCreateAccount:(0,s.useCallback)((e=>(0,cr().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:a,data:{spaceId:t.id,createAccount:e}}),onSuccess:()=>{i.setState({...i.state,createAccount:e})}})),[i,t,a])}}function Dr(e){let{spaceStore:t,samlConfigStore:i,disabled:s}=e;const{updateCreateAccount:a}=Ar({samlConfigStore:i,spaceStore:t}),l=(0,n().O7)(),d=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,o().VK)((()=>i.state.createAccount),[i]);return(0,se.jsx)("div",{style:d.settingContainer,children:(0,se.jsx)(Go,{title:(0,se.jsxs)("div",{style:d.settingsTitle,children:[(0,se.jsx)(m()._H,{id:"identityAndProvisioning.createAccount.title",defaultMessage:"Automatic account creation"}),(0,se.jsx)(ei().Z,{icon:ro().m,onClick:()=>C().D({environment:l,url:(0,Ne().UY)("guides.samlJIT")})})]}),byline:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.createAccount.byline",defaultMessage:"Automatically create Notion accounts for new users who log in via SAML SSO."}),isOn:c,onToggle:async function(){await a(!i.state.createAccount)},disabled:s})})}function Pr(e){let{spaceStore:t,samlConfigStore:i,promptUpgrade:s,disabled:a}=e;const l=(0,n().O7)(),{updateStatus:d}=Ar({samlConfigStore:i,spaceStore:t}),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),u=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.accountAuth.title",defaultMessage:"Login method"}),g=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.accountAuth.byline",defaultMessage:"Customize how users access workspaces that have SAML SSO enabled. Workspace owners can always log in with a password or passkey."}),p=(0,o().VK)((()=>"enforced"===i.state.status?"enforced":"enforced_for_domain"===i.state.status?"enforced_for_domain":"not_enforced"),[i]);if(s)return(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(gr,{title:u,byline:g,targetTier:"business"})});const f=[{key:"enforced",label:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.accountAuth.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.accountAuth.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===p?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fi().Z,{isMobile:l.device.isMobile,disabled:!0,title:u,caption:g,type:"custom",customButton:(0,se.jsx)(Bt().D,{disabled:!0,disabledFeedback:!0,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.accountAuth.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fi().Z,{isMobile:l.device.isMobile,title:u,caption:g,type:"dropdown",currentOption:p,options:f,onSelectOption:async function(e){"enforced"===e?await d("enforced"):"enforced_for_domain"===e?await d("enforced_for_domain"):await d("configured")}})})}var Rr=()=>i(521913),Br=()=>i(525579);function Zr(e){let{isOpen:t,...i}=e;const s=(0,o().VK)((()=>({active:i.samlConfigStore.state.useMetadataUrl?"url":"xml",url:i.samlConfigStore.state.idpMetadataUrl||"",xml:i.samlConfigStore.state.idpMetadata||""})),[i.samlConfigStore]);return(0,se.jsx)(rs().Z,{open:t,onDismiss:i.onClose,render:()=>(0,se.jsx)(Ur,{...i,initialConfiguration:s})})}function Ur(e){let{onSaveChanges:t,initialConfiguration:i,samlConfigStore:a,spaceStore:l,onClose:d}=e;const[c,u]=(0,s.useState)(i),g=(0,n().O7)(),p=(0,r().yK)((e=>({container:{background:e.popoverBackground,width:450,padding:24,borderRadius:4,transition:"all 500ms ease"},title:{fontFamily:h().F5(os().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:h().F5(os().locale).sans,fontSize:14,fontWeight:500,lineHeight:"19px",margin:"20px 0 0"},copyButton:{borderRadius:4,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:h().F5(os().locale).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},url:{width:"100%",color:e.mediumTextColor,fontFamily:h().F5(os().locale).sans,fontSize:14,fontWeight:400,lineHeight:"18px"},readonlyInput:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:4},divider:{margin:"20px auto 20px"},radioContainer:{display:"flex",justifyContent:"space-evenly",flexDirection:"column",height:60},radioOption:{display:"flex",alignItems:"center"},caption:{margin:"4px 0 8px"},centeredCaption:{margin:"4px 24px 8px",textAlign:"center"},buttonContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:24},buttonSpacing:{marginRight:8},feedback:{color:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400],display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px",height:20}})),[]),f=(0,s.useMemo)((()=>Or(c)),[c]),S=(0,o().VK)((()=>"unconfigured"===a.state.status),[a]),x=(0,o().VK)((()=>(0,Br().v9)(l.id,ma().default.domainBaseUrl)),[l]),y=(0,s.useCallback)((async()=>{const e=await ge().F.clipboardActions.load();e.copyString({environment:g,stringValue:x,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})}),[g,x]),b=(0,s.useCallback)((()=>{u((e=>({...e,active:"url"})))}),[]),v=(0,s.useCallback)((()=>{u((e=>({...e,active:"xml"})))}),[]),j=(0,r().yK)((e=>({input:{transition:"all 200ms ease-in-out",boxShadow:"none",margin:"12px 0",width:"100%",background:e.popoverBackground,border:`1px solid ${e.outlineButtonBorder}`}})),[]),C=(0,s.useMemo)((()=>"url"===c.active?{placeholder:"https://...",value:c.url,onChange:e=>{const t=e.target.value;u((e=>({...e,url:t})))},style:{height:32,...j.input}}:{placeholder:'<md:EntityDescriptor entityID="...',value:c.xml,onChange:e=>{const t=e.target.value;u((e=>({...e,xml:t})))},textarea:!0,style:{height:118,...j.input},inputStyle:{width:"100%",height:"100%"}}),[c,j]),w=(0,s.useCallback)((()=>{t(c)}),[t,c]);return(0,se.jsxs)("div",{style:p.container,children:[(0,se.jsx)(he().Z,{style:p.title,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.title",defaultMessage:"SAML SSO Configuration"})}),(0,se.jsx)(he().Z,{isSmall:!0,style:p.centeredCaption,isMultiline:!0,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.byline",defaultMessage:"Configure SAML SSO for your Notion workspace with your Identity Provider (IDP). <guidelink>Learn more</guidelink>.",values:{guidelink:e=>(0,se.jsx)(us().Z,{href:(0,Ne().UY)("guides.samlSettings"),external:!0,children:e})}})}),(0,se.jsx)(he().Z,{style:p.subtitle,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.acsTitle",defaultMessage:"Assertion Consumer Service (ACS) URL"})}),(0,se.jsx)(he().Z,{isSmall:!0,style:p.caption,isMultiline:!0,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.acsByline",defaultMessage:"Enter this in your IDP's SAML configuration."})}),(0,se.jsxs)("div",{style:p.readonlyInput,children:[(0,se.jsx)(he().Z,{style:p.url,children:x}),(0,se.jsxs)(me().Z,{onClick:y,style:p.copyButton,children:[(0,ue().U)(p.copyIcon),(0,se.jsx)(m()._H,{id:"verifyDomainModal.editSamlConfig.copy",defaultMessage:"Copy"})]})]}),(0,se.jsx)(he().Z,{style:p.subtitle,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.idpTitle",defaultMessage:"Identity Provider Details"})}),(0,se.jsx)(he().Z,{isSmall:!0,style:p.caption,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.idpUrlByline",defaultMessage:"Enter the value provided by your IDP."})}),(0,se.jsxs)("div",{style:p.radioContainer,children:[(0,se.jsxs)(Bt().D,{style:p.radioOption,onClick:b,children:[(0,se.jsx)(qi().Z,{isSelected:"url"===c.active}),(0,se.jsx)(he().Z,{children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.idpUrl",defaultMessage:"Identity Provider URL"})})]}),(0,se.jsxs)(Bt().D,{style:p.radioOption,onClick:v,children:[(0,se.jsx)(qi().Z,{isSelected:"xml"===c.active}),(0,se.jsx)(he().Z,{children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.idpXml",defaultMessage:"Identity Provider Metadata XML"})})]})]}),(0,se.jsx)(Ei().Z,{...C}),(0,se.jsx)("div",{style:p.feedback,children:(0,se.jsx)(Hr,{validation:f})}),(0,se.jsxs)("div",{style:p.buttonContainer,children:[(0,se.jsx)(vt().Z,{size:"lg",style:p.buttonSpacing,onClick:d,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.cancel",defaultMessage:"Cancel"})}),(0,se.jsx)(Ai().Z,{isLarge:!0,disabled:"invalid"===f.type,onClick:w,children:S?(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.enableSaml",defaultMessage:"Enable SAML"}):(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.saveChanges",defaultMessage:"Save changes"})})]})]})}function Hr(e){let t,{validation:i}=e;if("valid"===i.type)return null;switch(i.reason){case"empty":t=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.feedback.empty",defaultMessage:"You cannot leave this field blank"});break;case"signed_request":t=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.editSamlConfig.feedback.signed_request",defaultMessage:"Requests cannot be signed"})}return(0,se.jsxs)(se.Fragment,{children:[(0,Rr().t)({height:16,width:16,margin:"0 4px 0 8px"}),(0,se.jsx)("span",{children:t})]})}function Or(e){return"url"===e.active?(0,Br().jY)(e.url):"xml"===e.active?(0,Br().a7)(e.xml):void(0,vi().t1)(e.active)}function Er(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:n,isSamlStatusEnabled:a,promptUpgrade:o,disabled:l}=e;const[d,c]=(0,s.useState)({isOpened:!1,enableSamlOnSave:!1}),{updateStatus:u,updateSamlIdpUrl:g,updateSamlIdpXml:p}=Ar({samlConfigStore:i,spaceStore:t}),{verifiedDomains:f}=ur({spaceStore:t,samlConfigStore:i,domainSettingsStore:n}),S=(0,r().yK)((()=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:l?"default":"pointer"},settingTitle:{fontWeight:h().Ue.medium},settingByline:{marginBottom:4},configButton:{marginTop:14}})),[l]),x=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.samlToggle.title",defaultMessage:"Enable SAML SSO"}),y=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.samlToggle.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified domain."});return o?(0,se.jsx)(gr,{title:x,byline:y,targetTier:"business"}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Go,{title:x,byline:y,isOn:a,disabled:l,tooltipForDisabled:0===f.length?(0,se.jsx)(m()._H,{id:"identityAndProvisioning.samlToggle.disabledTooltipNoVerifiedDomains",defaultMessage:"Verify a domain to enable SAML."}):void 0,onToggle:function(){if(l)return;const{useMetadataUrl:e,idpMetadata:t,idpMetadataUrl:s}=i.state,n=e&&s||!e&&t;switch(i.state.status){case"disabled":n?u("configured"):c({isOpened:!0,enableSamlOnSave:!0});break;case"unconfigured":c({isOpened:!0,enableSamlOnSave:!0});break;case"configured":case"enforced":u("disabled");break;case"enforced_for_domain":break;default:(0,vi().t1)(i.state.status)}}}),(0,se.jsx)(vt().Z,{disabled:l,disabledFeedback:l,size:"lg",style:S.configButton,onClick:function(){l||c({isOpened:!0,enableSamlOnSave:!1})},children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.samlToggle.configure",defaultMessage:"Edit SAML SSO configuration"})}),(0,se.jsx)(Zr,{isOpen:d.isOpened,onClose:()=>c({isOpened:!1,enableSamlOnSave:!1}),onSaveChanges:async function(e){if("invalid"===Or(e).type)return;let t=!1;switch(e.active){case"url":t=await g(e.url);break;case"xml":t=await p(e.xml)}if(t){switch(i.state.status){case"disabled":d.enableSamlOnSave&&await u("configured");break;case"unconfigured":await u("configured");break;case"enforced":case"enforced_for_domain":case"configured":break;default:(0,vi().t1)(i.state.status)}c({isOpened:!1,enableSamlOnSave:!1})}},spaceStore:t,samlConfigStore:i})]})}var Lr=()=>i(306743);const qr={id:"name",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.name",defaultMessage:"Name"}),renderCell:e=>(0,se.jsx)(zr,{space:e.space,isCurrentSpace:e.isCurrentSpace}),widthData:{width:50},sortable:!0},Vr={id:"memberCount",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.memberCount",defaultMessage:"Members"}),renderCell:e=>(0,se.jsx)(he().Z,{children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.members",defaultMessage:"{count} members",values:{count:e.space.memberCount}})}),widthData:{width:20},sortable:!0},Nr={id:"createdAt",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.plan",defaultMessage:"Created at"}),renderCell:e=>{const t=e.space.createdTime;return(0,se.jsx)(he().Z,{children:t&&(0,qo().Yx)(t,"medium",os().locale)})},widthData:{width:20},sortable:!0},Fr=[qr,Vr,Nr];function Kr(e){let{spaceStore:t,spaces:i}=e;const[n,a]=(0,s.useState)({column:qr,sortAscending:!1}),l=(0,o().VK)((()=>i.map((e=>({id:e.id,isClickable:!1,isCurrentSpace:t.id===e.id,space:e})))),[i,t]),d=(0,r().yK)((e=>(0,pe().bE)({columnRenderInfo:Fr,theme:e,containerMarginTop:12})),[]);return(0,se.jsx)(pe().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Fr,rows:Wr(l,n),sortState:n,onSortStateChanged:a,renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.empty",defaultMessage:"No linked workspaces."})}),styles:d})}function Wr(e,t){let{column:i,sortAscending:s}=t,n=[];switch(i.id){case"name":n=f().MR(e,(e=>e.space.name));break;case"createdAt":n=f().MR(e,(e=>e.space.createdTime));break;case"memberCount":n=f().MR(e,(e=>e.space.memberCount))}return s?n:n.reverse()}function zr(e){const t=(0,r().yK)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"center",gap:4}})),[]);return(0,se.jsxs)(he().Z,{style:t.container,children:[e.space.name,e.isCurrentSpace?(0,se.jsx)(X().Z,{children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.name.currentBadge",defaultMessage:"Current"})}):null]})}function Gr(e){let{spaceStore:t,spaces:i}=e;const a=(0,n().O7)(),l=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),d=(0,s.useCallback)((()=>{Lr().j_({environment:a,from:"saml_settings",prepopulatedContent:`Request to add or remove a workspace for SAML single sign-on on workspace ${t.id}.`})}),[t,a]),c=(0,o().VK)((()=>(0,p().$U)(t.getSubscriptionTier())),[t]);return(0,se.jsxs)("div",{style:l.settingContainer,children:[(0,se.jsx)(Pi,{title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.title",defaultMessage:"Linked workspaces"}),byline:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.description",defaultMessage:"This SAML SSO configuration applies to the following other workspaces."}),c&&(0,se.jsxs)(se.Fragment,{children:[" ",(0,se.jsx)(m()._H,{id:"identityAndProvisioning.secondaryWorkspaces.contact",defaultMessage:"<contactlink>Contact support</contactlink> to add or remove a workspace.",values:{contactlink:e=>(0,se.jsx)(us().Z,{onClick:d,children:e})}})]})]}),settingItem:null}),(0,se.jsx)(Kr,{spaceStore:t,spaces:i})]})}function Yr(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:s}=e;const{verifiedDomains:n,isSamlAvailable:a,isSamlEditable:r,isSamlStatusEnabled:l}=ur({spaceStore:t,samlConfigStore:i,domainSettingsStore:s}),d=!r||!a||!l,c=(0,o().VK)((()=>i.state.spaces),[i]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Di().Z,{title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.samlToggle.learnMore",defaultMessage:"Learn about SAML SSO"}),href:(0,Ne().UY)("guides.samlSettings"),style:{marginTop:18,marginBottom:16},analyticsFrom:"saml_settings"}),(0,se.jsx)(Er,{disabled:!r||0===n.length,promptUpgrade:!a,isSamlStatusEnabled:l,spaceStore:t,samlConfigStore:i,domainSettingsStore:s}),(0,se.jsx)(Pr,{disabled:d,promptUpgrade:!a,spaceStore:t,samlConfigStore:i}),(0,se.jsx)(Dr,{disabled:d,spaceStore:t,samlConfigStore:i}),(0,se.jsx)(Gr,{spaceStore:t,spaces:c})]})}var $r=()=>i(357808),Qr=()=>i(78078);function Jr(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a,organizationOnboardingInfo:l}=e;const d=(0,n().O7)(),{saveWorkspaceCreationSetting:c}=ur({spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),u=(0,r().yK)((()=>({iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4},button:{margin:"4px 0px 16px",width:"fit-content",display:"flex",alignItems:"center",justifyContent:"center",gap:4}})),[]),{buttonLabel:g,onClick:p}=(0,dr().Lb)({environment:d,organizationOnboardingInfo:l}),f=(0,s.useCallback)((()=>(0,se.jsxs)(Bt().D,{isBlue:!0,onClick:p,style:u.button,children:[g,(0,$r().y)(u.iconArrow)]})),[g,p,u.button,u.iconArrow]),h=(0,s.useCallback)((()=>(0,se.jsx)(Pi,{title:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.emailDomainsSection.organization.title",defaultMessage:"Verified domains"}),byline:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.emailDomainsSection.organization.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),settingItem:f()})),[f]),S=(0,o().VK)((()=>i.state.emailDomains.length+i.state.domainVerifications.length>0),[i]);return(0,se.jsxs)(Qr().sg,{gap:16,children:[S?(0,se.jsx)(Sr,{disabled:!0,promptUpgrade:!1,spaceStore:t,samlConfigStore:i,saveWorkspaceCreationSetting:c,renderOverrideAddDomainButton:h}):h(),(0,se.jsx)(Pi,{title:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.saml.organization.title",defaultMessage:"Enable SAML SSO"}),byline:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.saml.organization.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified email domain."}),settingItem:f()})]})}const Xr=(0,m().vU)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});function el(e){const[t,i]=(0,s.useState)(!1),a=(0,n().O7)();const o=!t&&"Able"===e.tokenCreationAbility,r=t||"Able"!==e.tokenCreationAbility,l=(0,se.jsx)(Bt().D,{isBlue:o,isLightGray:r,disabled:r,style:{position:"relative",marginLeft:"auto",marginRight:0},icon:e=>(0,la().R)({...e,width:14,height:14,fill:"inherit",marginRight:"6px"}),onClick:async function(){i(!0);try{const t=await async function(e){let{environment:t,spaceStore:i,userStore:s}=e;const{botStore:n,transactionPromise:a}=Hn().lz({environment:t,spaceStore:i,name:"SCIM",userId:s.id,spaceRole:"editor",type:"scim"});return await a,n.id}({...e,environment:a});e.onNewScimToken(t)}catch(t){v().UW(H().Z.formatMessage(Xr.failedCreatingNewScimToken))}i(!1)},children:(0,se.jsx)(m()._H,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"})});let d;switch(e.tokenCreationAbility){case"Able":return l;case"Undefined":d=(0,se.jsx)(m()._H,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":d=(0,se.jsx)(m()._H,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":d=(0,se.jsx)(m()._H,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,vi().t1)(e.tokenCreationAbility)}return(0,se.jsx)(fe().Z,{textWrap:!1,renderTooltip:()=>d,placement:xe().Placement.Right,render:e=>(0,se.jsx)("div",{...e,style:{paddingLeft:"4px"},children:l})})}var tl=()=>i(163262),il=()=>i(530980),sl=()=>i(777346);const nl={container:{display:"flex",alignItems:"center",fontSize:h().JB.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},userName:{flexShrink:1,...h().Yu}};function al(e,t){const i=il().kk5.fromValue(R().cZ,e);return i.getCreatedByTable()===B().KJ&&i.getCreatedById()===t}const ol={buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,marginRight:1},menuItemButton:{minWidth:200}};function rl(e){let{onRevokeToken:t}=e;const i=(0,r().Fg)();return(0,se.jsx)(fe().Z,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m()._H,{defaultMessage:"Revoke this token.",id:"revokeTokenButton.tooltip"}),placement:xe().Placement.Right,render:e=>(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,placementToOrigin:ko().pO.Right,renderOrigin:t=>(0,se.jsx)(me().Z,{className:Le().TAd,style:ol.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,Hi().y)({fill:i.mediumIconColor,width:12,height:12})}),onClick:()=>{v().gt({mode:"wide",message:(0,se.jsx)(m()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.message",defaultMessage:"Revoke this token?"}),description:(0,se.jsx)(m()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.description",defaultMessage:"Existing SCIM configurations that use this token will no longer work once the token is revoked, and you'll have to provide them with a new token."}),acceptLabel:(0,se.jsx)(m()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.acceptButton.label",defaultMessage:"Revoke token"}),cancelLabel:(0,se.jsx)(m()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.cancelButton.label",defaultMessage:"Cancel"})}).then((e=>e.accept)).then((e=>e&&t()))},render:e=>(e.close(),(0,se.jsx)(se.Fragment,{}))})})}function ll(){const e=(0,r().Fg)();return(0,se.jsx)(fe().Z,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m()._H,{defaultMessage:"Outdated token. Revoke this token and generate a new one to view its contents.",id:"manageScimTokenTable.OutdatedWarningIcon.tooltip"}),placement:xe().Placement.Right,render:t=>(0,se.jsx)("div",{...t,style:{paddingLeft:"4px"},children:(0,Rr().t)({fill:(0,da().fi)("orange",e).fill,width:12,height:12})})})}function dl(e){let{clipboardTextFn:t}=e;const i=(0,n().O7)();const s=(0,r().Fg)(),a={height:25,background:s.whiteButtonBackground,color:s.regularTextColor,fontWeight:h().Ue.regular,padding:"4px 6px",fontSize:11.5};return(0,se.jsxs)(sl().Z,{onClick:async function(){const e=await t();if(void 0!==e){const t=await ge().F.clipboardActions.load();t.copyString({environment:i,stringValue:e,copiedMessage:t.clipboardMessages.copiedTokenToClipboard,showCopyModal:!!i.device.isSafari||void 0})}},style:a,children:[(0,ue().U)({height:16,width:16,paddingRight:4}),(0,se.jsx)(m()._H,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]})}const cl="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢";function ul(){return(0,se.jsx)(fe().Z,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m()._H,{defaultMessage:"This token can only be viewed by its creator.",id:"manageScimTokenTable.renderTokenThatCannotBeViewed.tooltip"}),placement:xe().Placement.Right,render:e=>(0,se.jsx)("div",{...e,children:cl})})}function gl(e){let{row:t}=e;const i=(0,n().O7)();return t.legacy?(0,se.jsxs)(se.Fragment,{children:[cl,(0,se.jsx)(ll,{})]}):t.ownedByCurrentUser?(0,se.jsxs)(se.Fragment,{children:[cl,(0,se.jsx)(dl,{clipboardTextFn:()=>Hn().VG({environment:i,botId:t.id})})]}):(0,se.jsx)(ul,{})}const pl={id:"token",headerTitle:(0,se.jsx)(m()._H,{id:"manageScimTokenTable.columnTitle.token",defaultMessage:"Token"}),renderCell:e=>(0,se.jsx)(gl,{row:e}),widthData:{width:40},sortable:!1,hasClickableContents:!0};function ml(){const e=nl;return(0,se.jsx)(fe().Z,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m()._H,{defaultMessage:"This token was created by a user who is no longer an admin in the workspace.",id:"scimTableLegacyUserCell.tooltip"}),placement:xe().Placement.Right,render:t=>(0,se.jsx)("div",{...t,children:(0,se.jsxs)("div",{style:e.container,children:[(0,se.jsx)(en().Z,{style:e.userAvatar,avatarShouldShowShadow:!0,size:20}),(0,se.jsx)("div",{style:e.userName,children:(0,se.jsx)("i",{children:"Deactivated user"})})]})})})}const fl={id:"addedBy",headerTitle:(0,se.jsx)(m()._H,{id:"manageScimTokenTable.columnTitle.addedBy",defaultMessage:"Added by"}),renderCell:e=>{if(e.legacy)return(0,se.jsx)(ml,{});{const t=e.ownedByCurrentUser?(0,se.jsx)(he().Z,{isSecondaryColor:!0,style:{marginLeft:4,textAlign:"center"},children:(0,se.jsx)(m()._H,{id:"manageSCIMTokenTable.colums.addedBy.selfIndicator",defaultMessage:"(you)"})}):(0,se.jsx)(se.Fragment,{});return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(zs().G,{isClickable:!1,userStores:[e.ownerUserStore]}),t]})}},widthData:{width:40},sortable:!1,hasClickableContents:!1},hl={id:"created",headerTitle:(0,se.jsx)(m()._H,{id:"manageScimTokenTable.columnTitle.created",defaultMessage:"Created"}),renderCell:e=>(0,se.jsx)(Ws().T,{includeTime:!0,dateTs:e.createdAt}),widthData:{width:40},sortable:!0,hasClickableContents:!1},Sl=[pl,fl,hl,{id:"revokeToken",headerTitle:void 0,renderCell:e=>(0,se.jsx)(rl,{onRevokeToken:()=>{e.onRevokeToken()}}),widthData:{width:10},sortable:!1,hasClickableContents:!0}];function xl(e,t){let{column:i,sortAscending:s}=t;const n=null==i?void 0:i.id;let a=e=>e.id;switch(n){case"name":a=e=>e.name;break;case"created":a=e=>e.createdAt;break;case"token":case"addedBy":case"revokeToken":case void 0:break;default:(0,vi().t1)(n)}const o=f().MR(e,a);return s||o.reverse(),o}function yl(e){let{botStores:t,onRevokeToken:i}=e;const n=(0,o().VK)((()=>et().default.state.currentUserStore),[]),a=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),l=(0,m().YB)(),d=(0,o().VK)((()=>{if(!a)return[];const e=null==n?void 0:n.id;return f().oA(t.map((t=>{const s=t.getModel();if(!s||!(0,tl().xe)(s))return;const n={id:s.id,isClickable:!1,createdAt:s.getCreatedAt(),userLocale:l.locale,name:s.getName(),onRevokeToken:()=>{i(s.id)}},o=function(e){const t=il().kk5.fromValue(R().cZ,e);return"notion_user"===t.getCreatedByTable()&&t.getCreatedById()===B().s$.id}(s);return o?{...n,legacy:o}:{...n,legacy:o,ownedByCurrentUser:al(s,e),ownerUserStore:"notion_user"===s.getCreatedByTable()?(0,Ys().o)({userId:s.getCreatedById(),currentSpaceStore:a}):void 0}})))}),[t,a,n,l.locale,i]),[c,u]=(0,s.useState)({column:hl,sortAscending:!1}),g=(0,r().yK)((e=>(0,pe().bE)({columnRenderInfo:Sl,theme:e,containerMarginTop:0})),[]);return(0,se.jsx)(pe().Dp,{columnRenderInfo:Sl,rows:xl(d,c),sortState:c,onSortStateChanged:u,onRowClick:()=>(0,se.jsx)(se.Fragment,{}),renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,se.jsx)(m()._H,{id:"manageSCIMTokenTable.noTokensFound.message",defaultMessage:"No active SCIM tokens."})}),styles:g})}async function bl(e){let{environment:t,spaceId:i}=e;return(await Hn().Yw({environment:t,table:Un().bx,id:i,type:"scim"})).botIds}const vl=function(e){let{botIds:t,setBotIds:i,spaceStore:a}=e;const o=(0,n().O7)(),r=a.id;if((0,s.useEffect)((()=>{void 0===t&&bl({environment:o,spaceId:r}).then(i)}),[t,o,i,r]),t){const e=t.map((e=>te().t1.createChildStore(a,{table:R().cZ,id:e,spaceId:r})));return(0,se.jsx)(yl,{botStores:e,onRevokeToken:e=>{Hn().P0({environment:o,botId:e,onSuccess:()=>{bl({environment:o,spaceId:r}).then(i)}})}})}return(0,se.jsx)(as().Z,{})};function jl(e){let{userStore:t,spaceStore:i,promptUpgrade:a}=e;const[r,l]=(0,s.useState)(void 0),d=(0,n().O7)(),c=(0,o().VK)((()=>function(e){let{botIds:t,spaceStore:i,environment:s}=e;if(void 0===t)return"Undefined";const n=t.map((e=>te().t1.createChildStore(i,{table:R().cZ,id:e,spaceId:i.id}))).filter((e=>e.isDefined()));if(n.some((e=>e.getCreatedByTable()===B().KJ&&e.getCreatedById()===B().s$.id)))return"SpaceHasExistingToken";const a=n.some((e=>e.getCreatedByTable()===B().KJ&&e.getCreatedById()===s.currentUser.id));if(a)return"UserHasExistingToken";return"Able"}({botIds:r,spaceStore:i,environment:d})),[r,d,i]),u=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.scim.title",defaultMessage:"SCIM tokens"}),g=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.scim.byline",defaultMessage:"Generate a token to configure SCIM."});return a?(0,se.jsx)(gr,{title:u,byline:g,targetTier:"enterprise"}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Pi,{title:u,byline:g,settingItem:(0,se.jsx)(el,{onNewScimToken:e=>l((t=>[...t??[],e])),spaceStore:i,userStore:t,tokenCreationAbility:c})}),(0,se.jsx)(Di().Z,{title:(0,se.jsx)(m()._H,{id:"securitySAMLSettings.SCIMSection.helpButton.label",defaultMessage:"Learn about SCIM"}),style:{marginTop:18,marginBottom:24},href:(0,Ne().UY)("guides.scim"),analyticsFrom:"scim_settings"}),(0,se.jsx)(vl,{spaceStore:i,userStore:t,botIds:r,setBotIds:l})]})}function Cl(e){let{spaceStore:t}=e;const i=(0,n().O7)(),s=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),a=(0,o().VK)((()=>Boolean(t.getSettings().are_scim_invite_emails_suppressed)),[t]),l=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.title",defaultMessage:"Suppress invite emails from SCIM provisioning"}),d=(0,se.jsx)(m()._H,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.message",defaultMessage:"Control if users will receive invite emails when provisioned by SCIM to workspaces and groups."});return(0,se.jsx)("div",{style:s.settingContainer,children:(0,se.jsx)(Go,{title:(0,se.jsx)("div",{style:s.settingsTitle,children:l}),byline:d,isOn:a,onToggle:()=>function(e){let{environment:t,areScimInviteEmailsSuppressed:i,spaceStore:s}=e;_().createAndCommit({userAction:"ScimSection.SuppressScimInviteEmailsSetting",environment:t,canUndo:!0,perform:e=>{_().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings","are_scim_invite_emails_suppressed"],command:"set",args:i},transaction:e})}})}({environment:i,spaceStore:t,areScimInviteEmailsSuppressed:!a})})})}function wl(e){let{userStore:t,spaceStore:i}=e;const s=(0,Bi().VX)({name:"scim",spaceId:i.id,userId:t.id});return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(jl,{promptUpgrade:!s,userStore:t,spaceStore:i}),s?(0,se.jsx)(Cl,{spaceStore:i}):null]})}function Ml(e){let{primarySpaceName:t}=e;const i=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",gap:8,width:"100%",padding:"18px 24px",borderRadius:12,marginBlock:12,background:e.onboardingPreviewBackground},title:{fontSize:14,fontWeight:500,color:e.text.primary,width:"100%"},text:{fontSize:14,fontWeight:400,color:e.text.secondary,width:"100%"}})),[]);return(0,se.jsxs)("div",{style:i.container,children:[(0,se.jsx)(he().Z,{style:i.title,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableTitle",defaultMessage:"The primary workspace is <bold>{primaryWorkspaceName}</bold>.",values:{primaryWorkspaceName:t,bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Ue.semibold},children:e})}})}),(0,se.jsx)(he().Z,{style:i.text,isMultiline:!0,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableMessage",defaultMessage:"The domain management settings and SAML SSO configuration are being managed by the workspace <bold>{primaryWorkspaceName}</bold>. Please navigate there or contact an admin of that workspace to edit the verified domains or SSO configuration.",values:{primaryWorkspaceName:t,bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Ue.semibold},children:e})}})})]})}var Tl=()=>i(617811);function _l(e){let{userStore:t,spaceStore:i,samlConfigStore:a,domainSettingsStore:l,organizationInfo:d,isOrganizationOwner:c,organizationOnboardingInfo:u}=e;const g=(0,n().O7)(),p=(0,o().VK)((()=>Ht().default.state.online),[]),{loadingSaml:f,loadedSaml:h,errorSaml:S}=(0,s.useContext)(ao),x=void 0!==d,y=function(e){let{environment:t,samlConfigStore:i,spaceStore:s}=e;const n=rr({environment:t,samlConfigStore:i,spaceStore:s}),a=(0,o().VK)((()=>!i.state.id||i.state.id===s.id),[i,s]);return n&&a}({environment:g,samlConfigStore:a,spaceStore:i}),b=u&&("not_started"===u.onboardingStatus||"domain_verified"===u.onboardingStatus),j=x&&u&&"ineligible"===(null==u?void 0:u.onboardingStatus),C=u&&"ineligible"!==(null==u?void 0:u.onboardingStatus),w=C||x,M=C,T=x&&!c,_=(0,qn().E)("organization_console_ga_enabled"),k=(0,o().VK)((()=>a.state.id?lr().Z.getData(g,{spaceId:a.state.id}):void 0),[g,a]),I=(0,r().yK)((e=>({header:{marginTop:36},byline:{color:e.mediumInvertedTextColor},title:{display:"flex",alignItems:"center",gap:6}})),[]),A=(0,o().VK)((()=>(0,ss().wP)()),[]);return(0,s.useEffect)((()=>{p&&!f&&S&&v().RL(S.message)}),[S,f,p]),p?f?(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(as().Z,{style:{margin:"0 auto"}})}):S?null:h?(0,se.jsxs)(Pt().ZP,{children:[b?(0,se.jsx)(dr().Mw,{organizationOnboardingInfo:u}):j&&c?(0,se.jsx)(dr().Mw,{organizationOnboardingInfo:{onboardingStatus:"completed",organizationId:null==d?void 0:d.id}}):null,d&&!c?(0,se.jsx)(dr().VR,{content:(0,se.jsx)(m()._H,{id:"workspaceSettingsModal.organizationsBanner.member.title",defaultMessage:"These settings can only be managed by organization owners"}),tooltipContent:(0,se.jsx)(m()._H,{id:"workspaceSettingsModal.organizationsBanner.member.tooltip",defaultMessage:"Verifying domains and managing accounts can only be done by organization owners{br}<byline>Organization owners can manage all workspaces in {organizationName}</byline>",values:{br:(0,se.jsx)("br",{}),organizationName:d.name,byline:e=>(0,se.jsx)("span",{style:I.byline,children:e})}})}):null,y||_||!k?null:(0,se.jsx)(Ml,{primarySpaceName:k.name}),w?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.domain.title",defaultMessage:"Domain management"})}),(0,se.jsx)(yr,{spaceStore:i,samlConfigStore:a,domainSettingsStore:l,isCurrentSpaceEnterprise:A})]}),w?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.userManagement.title",defaultMessage:"User management"})}),(0,se.jsx)(Ir,{spaceStore:i,samlConfigStore:a,domainSettingsStore:l})]}),T?null:M?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",style:"completed"===(null==u?void 0:u.onboardingStatus)&&_?void 0:I.header,children:(0,se.jsxs)("div",{style:I.title,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"}),(0,se.jsx)(Di().Z,{href:(0,Ne().UY)("guides.samlSettings"),analyticsFrom:"saml_settings"})]})}),(0,se.jsx)(Jr,{spaceStore:i,samlConfigStore:a,domainSettingsStore:l,organizationOnboardingInfo:u})]}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"})}),(0,se.jsx)(Yr,{spaceStore:i,samlConfigStore:a,domainSettingsStore:l})]}),(0,se.jsx)(le().Z,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.scim.title",defaultMessage:"SCIM provisioning"})}),(0,se.jsx)(wl,{userStore:t,spaceStore:i}),(0,se.jsx)(le().Z,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,se.jsx)(Tl().H,{spaceStore:i})]}):null:(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{defaultMessage:"Please go online to manage identity and provisioning settings.",id:"identityProvisioningSettings.offline.message"})})})}var kl=()=>i(857806),Il=()=>i(947115),Al=()=>i(60836),Dl=()=>i(679547),Pl=()=>i(326966),Rl=()=>i(174912),Bl=()=>i(904440),Zl=()=>i(145613);function Ul(){return(0,se.jsx)(fe().Z,{renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceClaim.Explanation",defaultMessage:"Workspace claim request is being processed."}),render:e=>(0,se.jsx)(he().Z,{...e,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingClaim",defaultMessage:"Pending"})})})}var Hl=()=>i(499110);function Ol(e){let{admin:t}=e;const i=(0,m().YB)();return(0,se.jsx)(fe().Z,{renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceTransferExplanation",defaultMessage:"Waiting for {name} to transfer the workspace to an external account.",values:{name:(0,Hl().Nz)(i,t)}}),render:e=>(0,se.jsx)(he().Z,{...e,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingTransfer",defaultMessage:"Pending"})})})}let El=function(e){return e.Single="single",e.Multi="multi",e}({});function Ll(e){const{space:t,mode:i}=e,s=(0,o().qz)(void 0,To().Z),n=(0,r().yK)((()=>({container:{minWidth:325}})),[]);return i===El.Single?(0,se.jsx)(Vl,{action:e.action,space:t}):(0,se.jsx)(ko().ZP,{popupType:Aa().kQ.Popup,style:n.container,buttonPopupStore:s,renderOrigin:e=>(0,se.jsx)(ei().Z,{icon:Mo().o,...e}),render:()=>(0,se.jsx)(ql,{space:t,actions:e.actions,popupStore:s})})}function ql(e){let{space:t,actions:i,popupStore:s}=e;const n={key:"workspace-actions",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:i.map((e=>{const i=!!e.getDisabledState&&e.getDisabledState(t),s=e.getTooltip?e.getTooltip(t):null;return{key:e.id,render:t=>(0,se.jsx)(fe().Z,{render:s=>(0,se.jsx)(_o().Z,{...t,...s,shouldWrapCaption:!0,svg:t=>e.getIcon(t),title:e.name,caption:e.caption,style:{paddingTop:8,paddingBottom:8,opacity:i?.5:1},disabled:i}),renderTooltip:()=>s,disableTooltip:!Boolean(s),placement:xe().Placement.Left}),action:()=>e.onAction(t)}}))};return(0,se.jsx)(ya().Z,{menuType:fa().o.Popup,children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:[n],onAccept:()=>{s.setState({open:!1})}})})}function Vl(e){const{action:t,space:i}=e,n=(0,r().yK)((e=>({button:{paddingLeft:5,paddingRight:5}})),[]),a=s.useCallback((()=>{t.onAction(i)}),[t,i]);return(0,se.jsx)(Bt().D,{size:"sm",style:n.button,onClick:a,children:t.name})}var Nl=()=>i(587148),Fl=()=>i(314171);function Kl(e){let{users:t,deletedUserEmailDomain:i}=e;const s=(0,o().qz)(void 0,To().Z),n=(0,r().yK)((()=>({container:{minWidth:275}})),[]);return(0,se.jsx)(ko().ZP,{popupType:Aa().kQ.Popup,style:n.container,buttonPopupStore:s,renderOrigin:e=>(0,se.jsx)(Gl,{users:t,deletedUserEmailDomain:i,...e}),render:()=>(0,se.jsx)(Wl,{users:t,popupStore:s})})}function Wl(e){let{users:t,popupStore:i}=e;const s=(0,n().O7)(),a={key:"workspace-users-menu",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:t.map((e=>({key:e.id,render:t=>(0,se.jsx)(zl,{user:e,...t}),action:()=>C().D({environment:s,url:`mailto:${e.email}`})})))};return(0,se.jsx)(ya().Z,{menuType:fa().o.Popup,children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:0,sections:[a],onAccept:()=>{i.setState({open:!1})}})})}function zl(e){let{user:t,...i}=e;const s=(0,m().YB)(),n=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8,margin:"0 6px"},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:300},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:300}})),[]);return(0,se.jsxs)(Bt().D,{style:n.container,...i,children:[(0,se.jsx)("div",{style:n.avatarContainer,children:(0,se.jsx)(en().Z,{userValue:t,size:24})}),(0,se.jsxs)("div",{style:n.nameContainer,children:[(0,se.jsx)(he().Z,{style:n.name,children:(0,Hl().Nz)(s,t)}),(0,se.jsx)(he().Z,{style:n.email,children:t.email})]}),(0,se.jsx)("div",{style:n.copyContainer,children:(0,Fl().Z)({height:18,width:18})})]})}function Gl(e){let{users:t,deletedUserEmailDomain:i,...s}=e;const n=(0,m().YB)(),a=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:"-8px",maxWidth:"100%"},empty:{fontSize:14,maxWidth:150,opacity:.5},name:{fontSize:14,maxWidth:150},plusMore:{opacity:.5,display:"inline"}})),[]);return 0===t.length?(0,se.jsx)(fe().Z,{render:e=>(0,se.jsx)(Bt().D,{style:a.container,disabled:!0,...s,...e,children:(0,se.jsx)(he().Z,{style:a.empty,children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.users.empty",defaultMessage:"Deleted user"})})}),disableTooltip:!i,renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.users.emptyTooltip",defaultMessage:"Deleted user from {domain}",values:{domain:`@${i}`}})}):(0,se.jsx)(Bt().D,{style:a.container,...s,children:(0,se.jsx)(he().Z,{children:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.users.name",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} <gray>+{remainingCount}</gray>} other {{firstUser} <gray>+{remainingCount}</gray>}}",values:{firstUser:(0,Hl().Nz)(n,t[0]),remainingCount:t.length-1,gray:e=>(0,se.jsx)(he().Z,{style:a.plusMore,children:e})}})})})}const Yl=[{id:"spaces",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.name",defaultMessage:"Workspaces"}),renderCell:e=>(0,se.jsx)(Nl().k,{id:e.space.id,name:e.space.name,icon:e.space.icon,subscriptionTier:e.space.subscriptionTier,memberCount:e.space.memberCount}),widthData:{width:60},sortable:!1},{id:"admins",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.admins",defaultMessage:"Workspace owners"}),renderCell:e=>(0,se.jsx)(Kl,{users:e.space.admins}),widthData:{width:40},sortable:!1},{id:"createdBy",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.createdBy",defaultMessage:"Created by"}),renderCell:e=>e.space.creator?(0,se.jsx)(Kl,{users:[e.space.creator]}):(0,se.jsx)(Kl,{users:[],deletedUserEmailDomain:e.space.creatorEmailDomain}),widthData:{width:40},sortable:!1},{id:"createdAt",headerTitle:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.createdAt",defaultMessage:"Created date"}),renderCell:e=>(0,se.jsx)(he().Z,{style:{opacity:.5},children:(0,Fo().gs)(e.space.createdAt)}),widthData:{width:30},sortable:!1},{id:"action",headerTitle:null,renderCell:e=>{if((0,zn().DI)(e.space.spaceRequest))return(0,se.jsx)(Ol,{admin:e.space.admins[0]});if((0,zn().XR)(e.space.spaceRequest))return(0,se.jsx)(Ul,{});if((0,zn().TZ)(e.space.spaceRequest)){const t=e.actions.find((e=>"recover-space"===e.id));return t&&(0,se.jsx)(Ll,{space:e.space,action:t,mode:El.Single})}return e.actions.length>0?(0,se.jsx)(Ll,{space:e.space,actions:e.actions.filter((e=>"recover-space"!==e.id)),mode:El.Multi}):null},widthData:{width:15},sortable:!1}];function $l(e){let{claimableSpaces:t,spaceActions:i,loadMoreClaimableSpaces:s,loading:n}=e;const a=t.map((e=>({id:e.id,isClickable:!1,space:e,actions:i}))),o=(0,r().yK)((e=>(0,pe().bE)({columnRenderInfo:Yl,theme:e,containerMarginTop:0})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(pe().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Yl,rows:a,renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:!n&&(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.empty",defaultMessage:"No claimable workspaces."})}),styles:o,getStyleForRow:function(e){if((0,zn().DI)(e.space.spaceRequest)||(0,zn().XR)(e.space.spaceRequest)||(0,zn().TZ)(e.space.spaceRequest))return{opacity:.5}},loadMoreMethod:s?{type:"scroll",onLoadMore:s}:void 0}),n&&(0,se.jsx)(as().Z,{style:{margin:"24px auto 24px"}})]})}var Ql=()=>i(446866),Jl=()=>i(205248),Xl=()=>i(280742),ed=()=>i(235605),td=()=>i(108714);const id=(0,m().vU)({emailPlaceholder:{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function sd(e){let{onDismiss:t,spaceQueuedForTransfer:i,currentSpaceId:a}=e;const[o,l]=(0,s.useState)(),[d,c]=(0,s.useState)(!1),{setSpaceRequest:u}=(0,s.useContext)(ao),g=(0,n().O7)(),p=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:h().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:h().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},dividerContainer:{marginTop:20},dividerInner:{borderBottomColor:e.regularDividerColor},contactEmailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},contactEmailTitle:{fontWeight:h().Ue.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},primaryButton:{width:"100%",marginTop:32},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Ue.medium,color:e.lightTextColor},buttonCaptionError:{color:e.errorText,marginTop:8,fontSize:13}})),[]),f=Boolean(i);return(0,se.jsx)(rs().Z,{open:f,innerStyle:p.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:p.closeIconContainer,children:(0,se.jsx)(Bt().D,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Jl().D)(p.closeIcon)})}),(0,se.jsx)("div",{children:(0,Xl()._)(p.modalIcon)}),(0,se.jsxs)(he().Z,{style:p.title,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.selfServe.title",defaultMessage:"Require account change"}),(0,se.jsx)(td().Z,{href:(0,Ne().UY)("guides.domainManagement"),children:(0,se.jsx)(ei().Z,{icon:ro().m})})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:p.description,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.byline",defaultMessage:"Youâ€™re about to require the Workspace Owner of 1 workspace to use an external Notion accounts. They will be unable to use the workspace until the change is made."})}),(0,se.jsxs)("div",{style:p.workspaceContainer,children:[i?(0,se.jsx)(Nl().k,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):null,(0,se.jsx)("div",{style:p.checkContainer,children:(0,ed().k)(p.check)})]}),(0,se.jsx)(ns().Z,{size:"100%",innerStyle:p.dividerInner,style:p.dividerContainer}),(0,se.jsxs)("div",{style:p.contactEmailContainer,children:[(0,se.jsxs)(he().Z,{style:p.contactEmailTitle,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.title",defaultMessage:"Send request from"}),(0,se.jsx)(fe().Z,{renderTooltip:()=>(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingExplanation",defaultMessage:"The Workspace Owner can contact this email for inquiries"}),render:e=>(0,se.jsx)("span",{...e,children:(0,ro().m)(p.helpIcon)})})]}),(0,se.jsx)(Ei().Z,{value:o,placeholder:H().Z.formatMessage(id.emailPlaceholder),onChange:e=>{c(!1),l(e.target.value)}}),d&&(0,se.jsx)(he().Z,{isSmall:!0,style:p.buttonCaptionError,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.error",defaultMessage:"Invalid email address"})})]}),(0,se.jsx)(Ai().Z,{isLarge:!0,style:p.primaryButton,onClick:async()=>{const e=(0,Ql().H3)(o);var s;if((0,Ql().oH)(e)){if(i&&e){const n=await Z().callApi({eventName:"initiateWorkspaceTransfer",environment:g,data:{requestingSpaceId:a,targetSpaceId:i.id,contactEmail:e}});if("failed"===n.type)v().UW((0,U().wf)(H().Z.getIntl(),n));else{const a=n.data.workspaceTransfer;u(i.id,a),Ya().az(g,{contactEmail:e,currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,subscriptionTier:i.subscriptionTier}),t(),s=i.name,fo().oV({label:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.toast",defaultMessage:"Account change successfully requested for â€œ{spaceName}â€œ",values:{spaceName:s}})})}}}else c(!0)},children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.confirm",defaultMessage:"Confirm change"})}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:p.buttonCaption,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.buttonCaption",defaultMessage:"This cannot be undone"})}),(0,se.jsx)(Bt().D,{style:p.secondaryButton,onClick:t,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.cancel",defaultMessage:"Cancel"})})]})})}function nd(e){let{onDismiss:t,spaceQueuedForClaiming:i,requestingSpaceId:a}=e;const o=(0,n().O7)(),{setSpaceRequest:l}=(0,s.useContext)(ao),d=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},title:{fontWeight:h().Ue.medium,fontSize:16,marginBottom:8,display:"inline-flex",alignItems:"center",justifyContent:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:h().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Ue.medium,color:e.lightTextColor},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12}})),[]),c=Boolean(i),u=async()=>{if(!i)return;const e=await Z().callApi({eventName:"requestClaimAndUpgrade",environment:o,data:{requestingSpaceId:a,targetSpaceId:i.id}});var s;"failed"===e.type?v().x2(e):(Ya().eO(o,{currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,memberCount:i.memberCount}),l(i.id,e.data.spaceRequest),s=i.name,fo().oV({label:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.toast",defaultMessage:"Workspace claim successfully requested for â€œ{spaceName}â€œ",values:{spaceName:s}})})),t()};return(0,se.jsx)(rs().Z,{open:c,innerStyle:d.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:d.closeIconContainer,children:(0,se.jsx)(Bt().D,{size:"sm",onClick:t,children:(0,Jl().D)(d.closeIcon)})}),(0,se.jsxs)(he().Z,{style:d.title,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.title",defaultMessage:"Request workspace claim"}),(0,se.jsx)(td().Z,{href:(0,Ne().UY)("guides.domainManagement"),children:(0,se.jsx)(ei().Z,{icon:ro().m})})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:d.description,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.byline",defaultMessage:"Youâ€™re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. Youâ€™ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:i?i.name:"the workspace below"}})}),(0,se.jsxs)("div",{style:d.workspaceContainer,children:[i?(0,se.jsx)(Nl().k,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):null,(0,se.jsx)("div",{style:d.checkContainer,children:(0,ed().k)(d.check)})]}),(0,se.jsx)(Ai().Z,{isLarge:!0,style:d.primaryButton,onClick:u,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.sendRequest",defaultMessage:"Send request"})}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:d.buttonCaption,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.buttonCaption",defaultMessage:"This request may take a few days to process. For more information, contact your <accountmanageremail>Account Management team</accountmanageremail>.",values:{accountmanageremail:e=>(0,se.jsx)(us().Z,{href:"mailto:am@makenotion.com",children:e})}})}),(0,se.jsx)(Bt().D,{style:d.secondaryButton,onClick:t,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.cancel",defaultMessage:"Cancel"})})]})})}function ad(e){let{onDismiss:t,spaceQueuedForClaiming:i}=e;const s=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:h().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:h().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Ue.medium,color:e.lightTextColor}})),[]),n=Boolean(i);return(0,se.jsx)(rs().Z,{open:n,innerStyle:s.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:s.closeIconContainer,children:(0,se.jsx)(Bt().D,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Jl().D)(s.closeIcon)})}),(0,se.jsx)("div",{children:(0,Dl().l)(s.modalIcon)}),(0,se.jsxs)(he().Z,{style:s.title,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.title",defaultMessage:"Claim workspace"}),(0,se.jsx)(td().Z,{href:(0,Ne().UY)("guides.domainManagement"),children:(0,se.jsx)(ei().Z,{icon:ro().m})})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:s.description,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.byline",defaultMessage:"Youâ€™re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. Youâ€™ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:i?i.name:"the workspace below"}})}),(0,se.jsxs)("div",{style:s.workspaceContainer,children:[i?(0,se.jsx)(Nl().k,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):null,(0,se.jsx)("div",{style:s.checkContainer,children:(0,ed().k)(s.check)})]}),(0,se.jsx)(Ai().Z,{isLarge:!0,style:s.primaryButton,onClick:async()=>{i&&await pt().Xb(i)},children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.reviewAndPay",defaultMessage:"Review and pay"})}),(0,se.jsx)(Bt().D,{style:s.secondaryButton,onClick:t,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.cancel",defaultMessage:"Cancel"})})]})})}var od=()=>i(661727),rd=()=>i(715139);const ld=(0,m().vU)({emailPlaceholder:{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function dd(e){let{onDismiss:t,spaceQueuedForDeletion:i,currentSpaceId:a}=e;const[o,l]=(0,s.useState)({email:void 0,didError:!1}),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),{setSpaceRequest:p}=(0,s.useContext)(ao),f=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],height:24,width:24},title:{fontWeight:h().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:h().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},checkboxContainer:{display:"inline-flex",marginTop:8,alignItems:"center"},checkbox:{color:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[200],marginRight:8},primaryButton:{width:"100%",marginTop:32,background:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],justifyContent:"center",fontWeight:h().Ue.medium,color:da().ZP.white},primaryButtonHovered:{background:"dark"===e.mode?(0,od()._j)(e.accentColors.red[700],.3):(0,od()._j)(e.accentColors.red[500],.3)},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Ue.medium,color:e.lightTextColor},checkboxCaption:{color:e.mediumTextColor,textAlign:"center",fontSize:12},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),S=(0,n().O7)(),x=(0,s.useCallback)((()=>{l({email:void 0,didError:!1}),c(!1),g(!1),t()}),[t]),y=(0,s.useCallback)((e=>{l({didError:!1,email:e.target.value})}),[]),b=(0,s.useCallback)((()=>c((e=>!e))),[]),j=(0,s.useCallback)((async()=>{const e=(0,Ql().H3)(o.email);if(!(0,Ql().oH)(e))return void l({...o,didError:!0});if(!i)return;g(!0);const t=await Z().callApi({eventName:"deleteSpaceForDomain",environment:S,data:{requestingSpaceId:a,targetSpaceId:i.id,contactEmail:e}});if("failed"===t.type)g(!1),v().UW((0,U().wf)(H().Z.getIntl(),t));else{const n=t.data.spaceDeletion;p(i.id,n),Ya().QF(S,{contactEmail:e,currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,targetSubscriptionTier:i.subscriptionTier}),x(),s=i.name,fo().oV({label:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.toast",defaultMessage:"Successfully deleted â€œ{spaceName}â€œ",values:{spaceName:s}})})}var s}),[x,o,a,S,p,i]),C=Boolean(i);return(0,se.jsx)(rs().Z,{open:C,innerStyle:f.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:x,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:f.closeIconContainer,children:(0,se.jsx)(Bt().D,{size:"sm",onClick:x,ignoreLocalHoverState:!0,children:(0,Jl().D)(f.closeIcon)})}),(0,se.jsx)("div",{children:(0,Hi().y)(f.modalIcon)}),(0,se.jsxs)(he().Z,{style:f.title,children:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.title",defaultMessage:"Delete workspace"}),(0,se.jsx)(td().Z,{href:(0,Ne().UY)("guides.domainManagement"),children:(0,se.jsx)(ei().Z,{icon:ro().m})})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:f.description,children:i?(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.byline",defaultMessage:"Youâ€™re about to permanently delete {currentWorkspaceName} and all of its contents. The workspace owner will be notified.",values:{currentWorkspaceName:i.name}}):void 0}),(0,se.jsxs)("div",{style:f.workspaceContainer,children:[i?(0,se.jsx)(Nl().k,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):void 0,(0,se.jsx)("div",{style:f.checkContainer,children:(0,ed().k)(f.check)})]}),(0,se.jsx)(ns().Z,{size:0,style:f.dividerContainer,innerStyle:f.divider}),(0,se.jsx)(cd,{value:o.email,placeholder:H().Z.formatMessage(ld.emailPlaceholder),onChange:y,labelMessage:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.title",defaultMessage:"Contact email"}),helpMessage:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.deleteWorkspaces.deletionModal.tooltipExplanation",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:o.didError?(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.error",defaultMessage:"Invalid email address"}):void 0}),(0,se.jsx)(Bt().D,{disabled:!d||!o.email||u,disabledFeedback:!0,size:"lg",style:f.primaryButton,hoveredStyle:f.primaryButtonHovered,onClick:j,children:u?(0,se.jsx)(as().Z,{}):(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.deleteButton",defaultMessage:"Delete workspace"})}),(0,se.jsxs)("div",{style:f.checkboxContainer,children:[(0,se.jsx)(rd().Z,{style:f.checkbox,size:14,checked:d,onClick:b}),(0,se.jsx)(he().Z,{isSmall:!0,style:f.checkboxCaption,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.checkboxLabel",defaultMessage:"I'm sure I want to delete this workspace"})})]}),(0,se.jsx)(Bt().D,{style:f.secondaryButton,onClick:x,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.cancel",defaultMessage:"Cancel"})})]})})}function cd(e){const t=(0,r().yK)((e=>({emailInputTitle:{fontWeight:h().Ue.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},emailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},inputCaptionError:{color:e.errorText,marginTop:8,fontSize:13},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16}})),[]);return(0,se.jsxs)("div",{style:t.emailContainer,children:[(0,se.jsxs)(he().Z,{style:t.emailInputTitle,children:[e.labelMessage,e.helpMessage&&(0,se.jsx)(fe().Z,{renderTooltip:()=>e.helpMessage,render:e=>(0,se.jsx)("span",{...e,children:(0,ro().m)(t.helpIcon)})})]}),(0,se.jsx)(Ei().Z,{value:e.value,placeholder:e.placeholder,onChange:e.onChange}),e.errorMessage&&(0,se.jsx)(he().Z,{isSmall:!0,style:t.inputCaptionError,children:e.errorMessage})]})}function ud(e){let{onDismiss:t,onAccept:i,spaceQueued:s,descriptionMessage:n,divider:a,modalIcon:o,title:l,acceptMessage:d,isLoading:c}=e;const u=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{height:24,width:24,fill:e.mediumIconColor},title:{fontWeight:h().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:h().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32,justifyContent:"center",fontWeight:h().Ue.medium},secondaryButton:{margin:"8px auto 0",width:"100%",justifyContent:"center",fontWeight:h().Ue.medium,color:e.lightTextColor},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),g=Boolean(s);return(0,se.jsx)(rs().Z,{open:g,innerStyle:u.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:u.closeIconContainer,children:(0,se.jsx)(Bt().D,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Jl().D)(u.closeIcon)})}),o&&(0,se.jsx)("div",{children:o(u.modalIcon)}),(0,se.jsxs)(he().Z,{style:u.title,children:[l,(0,se.jsx)(td().Z,{href:(0,Ne().UY)("guides.domainManagement"),children:(0,se.jsx)(ei().Z,{icon:ro().m})})]}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:u.description,children:n}),(0,se.jsxs)("div",{style:u.workspaceContainer,children:[s?(0,se.jsx)(Nl().k,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):void 0,(0,se.jsx)("div",{style:u.checkContainer,children:(0,ed().k)(u.check)})]}),a&&(0,se.jsx)(ns().Z,{size:0,style:u.dividerContainer,innerStyle:u.divider}),(0,se.jsx)(Ai().Z,{isLarge:!0,style:u.primaryButton,onClick:i,disabled:c,children:c?(0,se.jsx)(as().Z,{}):d}),(0,se.jsx)(Bt().D,{style:u.secondaryButton,onClick:t,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimableSpaceConfirmationModal.cancel",defaultMessage:"Cancel"})})]})})}function gd(e){let{onDismiss:t,spaceQueuedForRecovery:i,currentSpaceId:a}=e;const{setSpaceRequest:o}=(0,s.useContext)(ao),r=(0,n().O7)(),[l,d]=(0,s.useState)(!1),c=(0,s.useCallback)((()=>{d(!1),t()}),[t]),u=(0,s.useCallback)((async()=>{if(!a||!i)return;d(!0);const e=await Z().callApi({eventName:"cancelSpaceDeletionForDomain",environment:r,data:{requestingSpaceId:a,targetSpaceId:i.id}});if("failed"===e.type)return d(!1),void v().UW((0,U().wf)(H().Z.getIntl(),e));var t;o(i.id,void 0),Ya().Jv(r,{targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain}),c(),t=i.name,fo().oV({label:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.table.recoverSpace.toast",defaultMessage:"Successfully recovered â€œ{spaceName}â€œ",values:{spaceName:t}})})}),[o,a,r,i,c]);return(0,se.jsx)(ud,{onDismiss:c,onAccept:u,spaceQueued:i,modalIcon:po().u,title:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.title",defaultMessage:"Recover workspace"}),descriptionMessage:i?(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.byline",defaultMessage:"Restore workspace content and the workspace owner's access.",values:{currentWorkspaceName:i.name}}):void 0,acceptMessage:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.deleteButton",defaultMessage:"Recover"}),isLoading:l,divider:!1})}let pd=!1;function md(e){let{spaceStore:t,subscriptionDataStore:i}=e;const{claimableSpaces:a,domainVerifications:l,loadingSpaces:d,errorClaimableSpaces:c,errorVerifications:u,navigateTo:f,removeClaimableSpace:S,loadMoreClaimableSpaces:x,tab:y,setSelectedTab:b,verifiedDomains:j}=(0,s.useContext)(ao),C=(0,n().O7)(),w=(0,kt().p)({spaceId:null==t?void 0:t.id}),M=(0,o().VK)((()=>!Zl().Z.state.open&&Boolean(Zl().Z.state.succeeded)),[]),[T,_]=(0,s.useState)(),[k,I]=(0,s.useState)(),[A,D]=(0,s.useState)(),[P,R]=(0,s.useState)(),B=(0,Bl().q)(w,i);function Z(){_(void 0),I(void 0),D(void 0),R(void 0)}(0,s.useEffect)((()=>{M&&T&&(S(T.id),_(void 0),Zl().Z.reset())}),[M,T,S,_]);const U=(0,g().ri)(w),H=(0,r().yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:h().Ue.semibold,fontSize:17},byline:{fontSize:14,fontWeight:h().Ue.regular,color:e.mediumTextColor,marginRight:"auto",paddingRight:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"}})),[]);if((0,s.useEffect)((()=>{c?v().RL(c.message):u&&v().RL(u.message)}),[c,u]),c)return null;if(u)return null;const O=a.filter((e=>(0,kl().Ns)(e.spaceRequest,e.memberCount))),E=a.filter((e=>!(0,kl().Ns)(e.spaceRequest,e.memberCount))),L=[{id:"external-transfer",getIcon:e=>(0,Al().Z)({...e,height:14,width:14}),name:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransfer",defaultMessage:"Require account change"}),caption:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransferCaption",defaultMessage:"Owner will be prompted to change workspace ownership to a personal account."}),onAction:e=>I(e)},{id:"space-deletion",getIcon:e=>(0,Hi().y)({...e,height:14,width:14}),name:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace",defaultMessage:"Delete workspace"}),caption:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpaceCaption",defaultMessage:"Owner will lose access to the workspace immediately."}),onAction:e=>D(e),getDisabledState:e=>{const{isEligible:t}=fd(l,e.creatorEmailDomain);return!t||e.isDelinquent||e.isPendingBilling||!(0,p().QM)(e.subscriptionTier)},getTooltip:e=>{const t=fd(l,e.creatorEmailDomain);return t.isEligible?!(0,p().QM)(e.subscriptionTier)||e.isDelinquent||e.isPendingBilling?(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for deletion."}):void 0:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,se.jsx)("br",{})}})}},{id:"recover-space",getIcon:()=>{},name:(0,se.jsx)(m()._H,{id:"identityAndProvisioning.claimWorkspaces.actions.recoverSpace",defaultMessage:"Recover"}),caption:void 0,onAction:e=>R(e)}],q=[{id:"claim-and-upgrade",getIcon:e=>(0,Dl().l)({...e,height:14,width:14}),name:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgrade",defaultMessage:"Claim and upgrade"}),caption:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgradeCaption",defaultMessage:"Take ownership of the workspace and upgrade it to an Enterprise plan"}),onAction:e=>_(e),getDisabledState:e=>{const{isEligible:t}=fd(l,e.creatorEmailDomain);return U||!t||e.isDelinquent||e.isPendingBilling},getTooltip:e=>{const t=fd(l,e.creatorEmailDomain);return e.isDelinquent||e.isPendingBilling?(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for claiming."}):t.isEligible?void 0:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,se.jsx)("br",{})}})}}];return(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsx)(us().Z,{style:H.link,onClick:()=>f(so.SettingsPage),children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.breadcrumb",defaultMessage:"â† Identity & Provisioning"})}),(0,se.jsx)(le().Z,{large:!0,style:H.title,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.title",defaultMessage:"Manage workspaces"})}),(0,se.jsxs)(Qr().X2,{children:[(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:H.byline,children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.byline",defaultMessage:"Claim verified-domain workspaces to your Enterprise plan or require Owners to use an external domain."})}),(0,se.jsx)(vt().Z,{size:"lg",onClick:()=>{Rl().g({environment:C,data:{spaceId:t.id,emailDomains:j}})},children:(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.exportClaimableWorkspaces.button",defaultMessage:"Export to CSV"})})]}),(0,se.jsx)(ps().ZP,{tabs:[(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.singleSpaces",defaultMessage:"Single-member"},"single"),(0,se.jsx)(m()._H,{id:"identityProvisioningSettings.claimWorkspaces.multiSpaces",defaultMessage:"Multi-member"},"multi")],selectedIndex:y,onChange:e=>b(e),style:H.tabBarMenu}),(0,se.jsx)(sd,{onDismiss:Z,spaceQueuedForTransfer:k,currentSpaceId:t.id}),y===no.Single?(0,se.jsx)($l,{claimableSpaces:O,spaceActions:L,loadMoreClaimableSpaces:x,loading:d},"single"):(0,se.jsx)($l,{claimableSpaces:E,spaceActions:q,loadMoreClaimableSpaces:x,loading:d},"multi"),B?(0,se.jsx)(nd,{onDismiss:Z,spaceQueuedForClaiming:T,requestingSpaceId:t.id}):(0,se.jsx)(ad,{onDismiss:Z,spaceQueuedForClaiming:T}),(0,se.jsx)(dd,{onDismiss:Z,spaceQueuedForDeletion:A,currentSpaceId:t.id}),(0,se.jsx)(gd,{onDismiss:Z,spaceQueuedForRecovery:P,currentSpaceId:t.id})]})}function fd(e,t){if(pd)return{isEligible:!0};const i=e.find((e=>{let{domain:i}=e;return t===i}));if(!i||!i.verified_at)return{isEligible:!0};const s=(Date.now()-i.verified_at)/Pl().A0;return s>=14?{isEligible:!0}:{isEligible:!1,daysUntilEligible:Math.ceil(14-s)}}function hd(e){let{userStore:t,spaceStore:i,samlConfigStore:n,domainSettingsStore:a,organizationInfo:o,isOrganizationOwner:r,organizationOnboardingInfo:l}=e;const{page:d}=(0,s.useContext)(ao);switch(d){case so.SettingsPage:return(0,se.jsx)(_l,{userStore:t,spaceStore:i,samlConfigStore:n,domainSettingsStore:a,organizationInfo:o,isOrganizationOwner:r,organizationOnboardingInfo:l});case so.WorkspacesPage:return(0,se.jsx)(md,{spaceStore:i,subscriptionDataStore:_t().subscriptionDataStoreInstance});case so.ManagedUsersPage:return(0,se.jsx)(or,{spaceStore:i,samlConfigStore:n})}}["local","development","staging"].includes("production")&&(0,Il().exposeDebugValue)("bypassDomainVerificationWaitingPeriod",(function(){pd=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}));const Sd=function(e){let{userStore:t,spaceStore:i,samlConfigStore:s,domainSettingsStore:n,organizationInfo:a,isOrganizationOwner:o,organizationOnboardingInfo:r}=e;return(0,se.jsx)(oo,{spaceStore:i,samlConfigStore:s,domainSettingsStore:n,children:(0,se.jsx)(hd,{userStore:t,spaceStore:i,samlConfigStore:s,domainSettingsStore:n,organizationInfo:a,isOrganizationOwner:o,organizationOnboardingInfo:r})})};var xd=()=>i(3315),yd=()=>i(702075),bd=()=>i(830669),vd=()=>i(138190),jd=()=>i(543573),Cd=()=>i(431652);function wd(e){let{isMobile:t}=e;const i=(0,n().O7)(),s=H().Z.getIntl(),a=(0,o().VK)((()=>et().default.state.currentUserSettingsStore),[]),{currentTimeZone:r,auto_update_disabled:l}=(0,o().VK)((()=>{const e=null==a?void 0:a.getSettings();return{currentTimeZone:null!=e&&e.time_zone&&(0,vd().XE)(null==e?void 0:e.time_zone)?e.time_zone:void 0,auto_update_disabled:null==e?void 0:e.disable_auto_set_timezone}}),[a]),d=!l||!r;return a?(0,se.jsx)(Fi().Z,{isMobile:t,type:"timezonePicker",currentTimeZone:r,title:(0,se.jsx)(m()._H,{id:"dateAndTimeSettings.timeZone.title",defaultMessage:"Timezone"}),caption:(0,se.jsx)(m()._H,{id:"dateAndTimeSettings.timeZone.caption",defaultMessage:"Current timezone setting."}),renderOrigin:e=>(0,se.jsx)(Cd().X,{focused:!1,disabled:d,buttonStyle:{width:void 0,margin:0},title:r?(0,bd().zU)(s,r):(0,se.jsx)(m()._H,{id:"dateAndTimeSettings.timeZone.error",defaultMessage:"Error finding timezone"}),...e}),disabled:d,onSelect:e=>{jd().l6({environment:i,userSettingsStore:a,timeZone:e})}}):null}function Md(e){let{isMobile:t}=e;const i=(0,n().O7)(),a=(0,o().VK)((()=>et().default.state.currentUserSettingsStore),[]),r=(0,o().VK)((()=>{var e;return null==a||null===(e=a.getSettings())||void 0===e?void 0:e.disable_auto_set_timezone}),[a])??!1,l=(0,s.useCallback)((e=>{const t=!r;jd().k2({environment:i,userSettingsStore:e,disableAutoSetTimezone:t}),t||jd().wk({environment:i,userSettingsStore:e})}),[i,r]),d=(0,se.jsx)(m()._H,{id:"dateAndTimeSettings.autoTimeZone.title",defaultMessage:"Set timezone automatically using your location"}),c=(0,se.jsx)(m()._H,{id:"dateAndTimeSettings.autoTimeZone.caption",defaultMessage:"Reminders, notifications and emails are delivered based on your time zone."});return(a&&(0,se.jsx)(Fi().Z,{isMobile:t,title:d,caption:c,type:"toggle",isOn:!r,onToggle:()=>l(a)}))??null}var Td=()=>i(486595),_d=()=>i(257822),kd=()=>i(799891),Id=()=>i(374289),Ad=()=>i(792409),Dd=()=>i(128119);const Pd=function(e){const[t,a]=s.useState([]),[l,d]=s.useState([]),c=(0,n().O7)(),u=(0,o().qz)(void 0,To().Z),g=(0,r().yK)((e=>({span:{color:e.mediumTextColor},plainButton:{paddingLeft:8,paddingRight:8,marginLeft:-8},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);function p(e){return l.some((t=>t.code===e.code))}(0,s.useEffect)((()=>{const e=c.SpellCheckStore;e&&(e.getAvailableLanguages().then(a).catch((e=>{kd().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getAvailableLanguages",error:(0,Ad().Ui)(e)})})),e.getLanguages().then(d).catch((e=>{kd().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getLanguages",error:(0,Ad().Ui)(e)})})))}),[c]),(0,s.useEffect)((()=>{const e=c.SpellCheckStore;if(!e)return;const t=l.map((e=>{let{code:t}=e;return t}));e.setLanguages(t)}),[l,c.SpellCheckStore]);const f=l.length>0?l.slice(0,3).map((e=>{let{name:t}=e;return t})).join(", ")+(l.length>3?"â€¦":""):(0,se.jsx)(m()._H,{id:"languageRegionSettings.spellchecker.picker.label",defaultMessage:"Select languages"});return(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,buttonPopupStore:u,renderOrigin:e=>(0,se.jsxs)(Bt().D,{style:g.plainButton,...e,children:[f,(0,Id().i)(g.icon)]}),placementToOrigin:Dd().Iw.Bottom,alignmentToOrigin:Dd().lU.Start,render:e=>{const s=[{key:"spellcheckerlanguages",render:e=>(0,se.jsx)(Ca().Z,{...e,topBorder:0!==e.index}),items:t.map((e=>{const t={key:e.code,render:t=>function(e){const t=e.language.name||e.language.code;return(0,se.jsx)(xa().Z,{...e.props,title:(0,se.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,se.jsx)("div",{style:{marginRight:0},children:t})}),shouldWrapCaption:!0,right:p(e.language)?(0,i(235665).$)({width:12,height:12}):void 0})}({language:e,props:t}),action:()=>{p(e)?d(l.filter((t=>t.code!==e.code))):d([...l,e])}};return t}))}],n={menuType:fa().o.Popup,width:240};return(0,se.jsx)(ya().Z,{className:Le().hKO,...n,children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:s})})}})};const Rd=function(e){const t=(0,n().O7)();return t.device.isElectron&&t.device.isWindows?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ns().Z,{size:24,isHidden:!0}),(0,se.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto"},children:(0,se.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,se.jsxs)("div",{style:{flex:1},children:[(0,se.jsx)(he().Z,{children:(0,se.jsx)(m()._H,{id:"languageRegionSettings.spellchecker.label",defaultMessage:"Spellchecker languages"})}),(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,se.jsx)(m()._H,{id:"languageSettings.spellcheckerSwitcher.subtitle",defaultMessage:"Change the languages used by the spellchecker."})})]}),(0,se.jsx)(Pd,{})]})})]}):null};const Bd=function(){return(0,o().VK)((()=>Ht().default.state.online),[])?(0,se.jsx)(Ud,{}):(0,se.jsx)(Zd,{})};function Zd(){return(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{defaultMessage:"Please go online to manage your language and region.",id:"languageSettings.offline.message"})})})}function Ud(){const e=(0,o().VK)((()=>et().default.state.currentUserSettingsStore),[]),t=(0,o().VK)((()=>{var t;return(null==e||null===(t=e.getSettings())||void 0===t?void 0:t.preferred_locale)||Vo().al}),[e]),i=(0,n().O7)(),{isMobile:s}=(0,n().Fy)(),a=(0,o().VK)((()=>(0,Kt().t_)(i)),[i]);if(!e)return null;const r=[{key:"timezone-auto",renderSettingsItem:()=>(0,se.jsx)(Md,{isMobile:s})},{key:"timezone-manual",renderSettingsItem:()=>(0,se.jsx)(wd,{isMobile:s})}].filter(vi().$K);return a?(0,se.jsxs)("div",{style:{paddingTop:48},children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"languageSettings.languageAndTimeSection.title",defaultMessage:"Language & Time"})}),(0,se.jsx)(Td().Z,{locale:t,userSettingsStore:e}),(0,se.jsx)(Rd,{}),(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)(yd().Z,{}),(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)(_d().O,{items:r})]}):(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"languageSettings.languageSection.title",defaultMessage:"Language & region"})}),(0,se.jsx)(Td().Z,{locale:t,userSettingsStore:e}),(0,se.jsx)(Rd,{}),(0,se.jsx)(ns().Z,{size:24}),(0,se.jsx)(yd().Z,{})]})}var Hd=()=>i(764605),Od=()=>i(515329),Ed=()=>i(637932),Ld=()=>i(928066);function qd(){const{isElectron:e,isElectronMac:t,isMobile:i,desktopAppId:s}=(0,n().Fy)(),a=(0,n().O7)(),r=(0,o().VK)((()=>Ht().default.state.online),[]),l=(0,o().VK)((()=>(0,Od().oI)()),[]),d=(0,o().VK)((()=>(0,Kt().t_)(a)),[a]),c=(0,o().VK)((()=>{const n=(0,Od().kC)();return function(e){const{isMobile:t,isElectron:i,isElectronMac:s,desktopAppId:n,slackFeatureGateChecks:{showSlackNotificationSetting:a,showNotionActivityNotificationsToSlackSetting:o}}=e,r=!t&&i,l=r&&s&&Boolean(n);return[{key:"notify_mobile",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"notify_mobile"})},r?{key:"notify_desktop",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"notify_desktop"})}:void 0,l?{key:"desktop_badge",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"desktop_badge"})}:void 0,a&&!o?{key:"notify_slack",renderSettingsItem:()=>(0,se.jsx)(Ld().O,{target:"notify_slack"})}:void 0].filter(vi().$K)}({isMobile:i,isElectron:e,isElectronMac:t,desktopAppId:s,slackFeatureGateChecks:{showSlackNotificationSetting:n,showNotionActivityNotificationsToSlackSetting:l}})}),[i,e,t,s,l]),u=(0,o().VK)((()=>{var e;const t=(0,Od().kC)();return function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:i,showNotionActivityNotificationsToSlackSetting:s}=e;if(!i||!s)return[];return[{key:"notify_slack",renderSettingsItem:()=>(0,se.jsx)(Ld().O,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,se.jsx)(Ld().O,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,se.jsx)(Ld().O,{target:"notify_slack_mention"})}:void 0].filter(vi().$K)}({isSlackNotificationSettingEnabled:Boolean(null===(e=et().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.notify_slack),showSlackNotificationSetting:t,showNotionActivityNotificationsToSlackSetting:l})}),[l]),g=(0,o().VK)((()=>{var e;return function(e){const{showNotifyEmailAlwaysSetting:t}=e;return[{key:"notify_email",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"notify_email"})},t?{key:"notify_email_always",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"notify_home_digest_email"})},{key:"marketing_emails",renderSettingsItem:()=>(0,se.jsx)(Ed().A,{target:"marketing_emails"})}].filter(vi().$K)}({showNotifyEmailAlwaysSetting:(null===(e=et().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1})}),[]),p=(0,o().VK)((()=>a.WindowSizeStore.state.paddingBottomCSS),[a.WindowSizeStore]);return r?(0,se.jsxs)(Pt().ZP,{disableScroller:i,children:[(0,se.jsx)(le().Z,{large:!i,divider:"full",children:d?(0,se.jsx)(m()._H,{id:"notificationSettings.notificationsSection.title.v2",defaultMessage:"Notifications"}):(0,se.jsx)(m()._H,{id:"notificationSettings.notificationsSection.title",defaultMessage:"My notifications"})}),(0,se.jsx)(_d().O,{items:c}),(0,se.jsx)(ns().Z,{size:48,isHidden:!0}),l?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!i,divider:"full",children:(0,se.jsx)(m()._H,{id:"notificationSettings.slackNotificationsSection.title",defaultMessage:"Slack notifications"})}),(0,se.jsx)(_d().O,{items:u}),(0,se.jsx)(ns().Z,{size:48,isHidden:!0})]}):void 0,(0,se.jsx)(le().Z,{large:!i,divider:"full",children:(0,se.jsx)(m()._H,{id:"notificationSettings.emailNotificationsSection.title",defaultMessage:"Email notifications"})}),(0,se.jsx)(_d().O,{items:g}),(0,se.jsx)(ns().Z,{size:48,isHidden:!0}),(0,se.jsx)("div",{style:{marginTop:4,marginBottom:i?p:void 0},children:(0,se.jsx)(Di().Z,{title:(0,se.jsx)(m()._H,{id:"myNotificationSettings.helpButton.caption",defaultMessage:"Learn about notifications"}),href:(0,Ne().UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{defaultMessage:"Please go online to manage your notification settings.",id:"myNotificationsSettings.goOnline.prompt"})})})}var Vd=()=>i(140303);var Nd=()=>i(917949);const Fd={whiteSpace:"normal",paddingTop:5,paddingBottom:5,height:"auto"};function Kd(e){const t=(0,n().O7)(),{onView:i}=e,a=(0,m().YB)();(0,s.useEffect)((()=>{i(t)}),[t,i]);const o=a.formatMessage({id:"settingsPrompt.learnMore.button",defaultMessage:"Learn more"});return(0,se.jsxs)("div",{children:[(0,se.jsx)(ns().Z,{size:0}),(0,se.jsx)(Nd().N,{icon:e.icon,title:e.title,description:e.descriptionMessage,onDismiss:e.onDismiss,primaryAction:{text:e.buttonText,onClick:t=>(e.onDismiss(),e.onClick(t)),ariaLabel:e.buttonAriaLabel},secondaryAction:{icon:e=>(0,ro().m)(e),text:o,ariaLabel:o,onClick:e.onClickLearnMore},customPrimaryButtonStyles:Fd})]})}const Wd=function(e){const t=(0,r().yK)((t=>({style:{display:"flex",height:"100%",flexDirection:e.isReversed?"row-reverse":"row"},sidebarStyle:{height:"100%",background:t.cardSidebarBackground,flexGrow:0,flexShrink:0,width:240,overflowY:"auto"},childrenStyle:{flexGrow:1,position:"relative",zIndex:1,height:"100%",overflow:"hidden"}})),[e.isReversed]);return(0,se.jsxs)("div",{style:t.style,onMouseDown:e.onMouseDown,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,children:[(0,se.jsx)("div",{style:t.sidebarStyle,children:e.sidebar}),(0,se.jsx)("div",{style:t.childrenStyle,children:e.children})]})};var zd=()=>i(266093),Gd=()=>i(840984),Yd=()=>i(565630),$d=()=>i(768050),Qd=()=>i(928826),Jd=()=>i(220167),Xd=()=>i(682547),ec=()=>i(665385),tc=()=>i(407544),ic=()=>i(356641),sc=()=>i(774933),nc=()=>i(499214),ac=()=>i(304109);const oc=640;function rc(e){let{data:t,loading:i,error:a,daysFilter:o,setDaysFilter:l}=e;const[d,c]=(0,tc().e)(),u=(0,r().yK)((e=>({title:{fontWeight:h().Ue.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:1},titleText:{flexShrink:1},infoIcon:{marginLeft:4,flexShrink:0},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:g,uniquePageViews:p,pagesCreated:f,pageEdits:S}=t,x=(0,n().O7)(),y=(0,s.useCallback)((e=>{zd().ky(x,{daysFilter:e}),l(e)}),[x,l]);return(0,se.jsxs)("div",{style:u.container,ref:d,children:[(0,se.jsxs)("div",{style:u.titleContainer,children:[(0,se.jsxs)(he().Z,{style:u.title,children:[(0,se.jsx)("div",{style:u.titleText,children:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,se.jsx)(fe().Z,{placement:xe().Placement.Bottom,render:e=>(0,se.jsx)(Di().Z,{...e,href:(0,Ne().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:u.infoIcon}),renderTooltip:()=>"all_time"!==o?(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:H().Z.formatMessage($d().xX[o])}}):(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,se.jsx)(ac().f,{currentFilter:o,onChangeFilter:y})]}),(0,se.jsxs)(ic().rj,{gap:16,children:[(0,se.jsx)(ic().r8,{row:1,col:1,children:(0,se.jsx)(nc().q,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:i,error:a,icon:Xd().N,iconStyles:{height:48,width:48},title:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,se.jsx)(sc().e,{abbreviateNumber:c<oc,num:g})}}),byline:(0,se.jsx)(he().Z,{isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,se.jsx)(sc().e,{abbreviateNumber:c<oc,num:p})}})})})}),(0,se.jsx)(ic().r8,{row:1,col:2,children:(0,se.jsx)(nc().q,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:i,error:a,icon:ec().j,iconStyles:{height:36,width:36},title:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,se.jsx)(sc().e,{abbreviateNumber:c<oc,num:f})}}),byline:(0,se.jsx)(he().Z,{isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,se.jsx)(sc().e,{abbreviateNumber:c<oc,num:S})}})})})})]})]})}var lc=()=>i(239482),dc=()=>i(549874),cc=()=>i(726008),uc=()=>i(330565),gc=()=>i(506347),pc=()=>i(429725);function mc(e){let{blockStore:t}=e;const s=(0,n().O7)(),a=(0,o().qz)(void 0,To().Z),l=(0,r().yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const d={key:"actions",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:[{key:"copy-link",render:e=>(0,se.jsx)(xa().Z,{...e,icon:(0,i(237874).N)(l.copyLinkIcon),title:(0,se.jsx)(m()._H,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,pc().ZP)({store:t,pageVisitSource:gc().tY.CopyLink}),i=await ge().F.clipboardActions.load();await i.copyString({environment:s,stringValue:e,copiedMessage:i.clipboardMessages.copiedLinkToClipboard}),a.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,se.jsx)(xa().Z,{...e,icon:(0,i(374844).n)(l.openLinkIcon),title:(0,se.jsx)(m()._H,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,pc().ZP)({store:t,pageVisitSource:gc().tY.LinkInPage});C().D({environment:s,url:e}),a.setState({open:!1})}}]};return(0,se.jsx)(ko().ZP,{popupType:Aa().kQ.Popup,alignmentToOrigin:xe().Alignment.Center,placementToOrigin:xe().Placement.Right,style:{width:248},render:()=>(0,se.jsx)(ya().Z,{menuType:fa().o.Popup,width:248,children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:[d]})}),buttonPopupStore:a,renderOrigin:e=>(0,se.jsx)(ei().Z,{icon:Mo().o,ariaLabel:"open menu for page actions",...e})})}const fc=(0,m().vU)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),hc={id:"page",headerTitle:(0,se.jsx)(Mc,{message:$d().y3.page}),renderCell:e=>(0,se.jsx)(i(166124).o,{blockStore:e.navigableBlockStore,rightIcon:(0,se.jsx)(mc,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},Sc={id:"location",headerTitle:(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,se.jsx)(i(465498).N,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},xc={id:"audience",headerTitle:(0,se.jsx)(Mc,{message:$d().y3.audience}),renderCell:e=>(0,se.jsx)(he().Z,{children:(0,i(840816).e)(e.audience)}),widthData:{width:140},sortable:!1},yc={id:"views",headerTitle:(0,se.jsx)(uc().r,{tooltipMessageDescriptor:fc.views,columnHeader:$d().y3.allViews}),renderCell:e=>(0,se.jsx)(he().Z,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},bc={id:"uniqueViews",headerTitle:(0,se.jsx)(uc().r,{tooltipMessageDescriptor:fc.uniqueViews,columnHeader:$d().y3.uniqueViews}),renderCell:e=>(0,se.jsx)(he().Z,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},vc={id:"createdBy",headerTitle:(0,se.jsx)(Mc,{message:$d().y3.createdBy}),renderCell:e=>e.createdById?(0,se.jsx)(cc().t,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},jc={id:"createdTime",headerTitle:(0,se.jsx)(Mc,{message:$d().y3.createdAt}),renderCell:e=>(0,se.jsx)(Ws().T,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},Cc=[hc,yc,bc,Sc,xc,{id:"lastEditedBy",headerTitle:(0,se.jsx)(Mc,{message:$d().y3.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,se.jsx)(cc().t,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,se.jsx)(Mc,{message:$d().y3.lastEditedAt}),renderCell:e=>(0,se.jsx)(Ws().T,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},vc,jc];function wc(e){let{navigableBlockStores:t,analyticsByPageId:i,runNewSearch:n,sort:a,setSort:l,loadNextPage:d,loading:c,error:u}=e;const g=(0,o().VK)((()=>t.map((e=>{var t,s,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,lc().VP)(e),views:(null===(t=i.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(s=i.get(e.id))||void 0===s?void 0:s.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=i.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,i]),p=(0,s.useMemo)((()=>function(e){const t=Cc.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),i=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return i}(a)),[a]),f=(0,r().yK)((e=>(0,pe().bE)({columnRenderInfo:Cc,theme:e,containerMarginTop:0})),[]),h=(0,r().yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return u?(0,se.jsx)(dc().q,{error:u,runNewSearch:n}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(pe().Dp,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:Cc,rows:g,sortState:p,onSortStateChanged:e=>{l(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",i=e.sortAscending?"asc":"desc";return{field:t,direction:i}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:d},renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:h.emptyQuery,children:!c&&0===t.length&&(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:f}),c?(0,se.jsx)(as().Z,{style:h.loadingSpinner}):null]})}function Mc(e){let{message:t}=e;const i=(0,m().YB)();return(0,se.jsx)(se.Fragment,{children:i.formatMessage(t)})}var Tc=()=>i(396136);const _c={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},kc={field:"pageViews",direction:"desc"},Ic=Gd().D2,Ac={filters:_c,sort:kc,timeRange:Ic,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var Dc=()=>i(700696);function Pc(e){let{spaceStore:t,teamStores:i,timeRange:s,filters:n,runNewSearch:a,setFilters:l,setTimeRange:d}=e;const c=(0,o().VK)((()=>i??Dc().default.state.teams),[i]),u=(0,r().yK)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,se.jsxs)("div",{style:u.container,children:[(0,se.jsx)(Tn().ON,{mode:Tn().p3.OnChange,query:n.query,setQueryFilter:function(e){l({query:e},{runSearchAfter:!0})},placeholderText:H().Z.formatMessage(Tn()._7.titleOnlyPlaceholder)}),(0,se.jsxs)("div",{style:u.filterPillsContainer,children:[(0,se.jsxs)("div",{style:u.timeRangeContainer,children:[(0,se.jsx)(he().Z,{isSecondaryColor:!0,children:(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,se.jsx)(ac().f,{currentFilter:s,onChangeFilter:d})]}),(0,se.jsx)(Pn().p,{selectedTeamIds:n.teamIds,setSelectedTeamIds:function(e){l({teamIds:e})},onMenuClose:a,teamStores:c}),(0,se.jsx)(kn().y,{spaceStore:t,createdByFilterIds:n.createdBy,setCreatedByFilter:function(e){l({createdBy:e})},runNewSearch:a,includeGuests:!1}),(0,se.jsx)(In().f,{lastEditedTime:n.lastEditedTime,createdTime:n.createdTime,setLastEditedTime:function(e){l({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){l({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function Rc(e){var t;let{spaceStore:i,teamStores:a,contentEngagement:l}=e;const d=(0,Yd().D9)(i.id),c=(0,s.useRef)(!1),{loadNextPage:u,navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,setFilters:h,setTimeRange:S,timeRange:x,filters:y,sort:b,setSort:v,loading:j,error:C}=function(e){let{spaceStore:t}=e;const i=(0,n().O7)(),[a,o]=(0,s.useState)(Ac),r=(0,s.useRef)(_c),l=(0,s.useRef)(kc),d=(0,s.useRef)(Ic),{organizationOwnerRecordCache:c,updateCacheWithRecordMap:u}=(0,s.useContext)(Vd().V),g=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:n}=e;const c=!f().Xy(a.filters,r.current)||!f().Xy(a.sort,l.current)||!f().Xy(a.timeRange,d.current);if(!n&&!c)return;r.current=a.filters,l.current=a.sort,d.current=a.timeRange;let g=a.loading,p=a.error,m=a.hasNextPage,h=a.paginationToken;if(s&&(o((e=>({...Ac,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),g=Ac.loading,p=Ac.error,m=Ac.hasNextPage,h=Ac.paginationToken),!m||g)return;if(p)return;o((e=>({...e,loading:!0})));const S=await Z().callApi({eventName:"loadContentAnalytics",environment:i,data:{spaceId:t.id,sort:a.sort,titleQuery:a.filters.query,filters:{inTeams:a.filters.teamIds,lastEditedTime:(0,ie().Hq)(a.filters.lastEditedTime),createdTime:(0,ie().Hq)(a.filters.createdTime),createdBy:a.filters.createdBy},timeRange:a.timeRange,startCursor:h}});if("failed"===S.type)return void o((e=>({...e,loading:!1,error:S.error})));u(S);const x=S.data.results;o((e=>{const t=[],i=new Set(e.navigableBlockIds),s=new Map(e.analyticsByPageId);for(const a of x){const e=a.id,n=a.analytics;i.has(e)||(t.push(e),s.set(e,n))}const n=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:n,analyticsByPageId:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:S.data.nextCursor,hasNextPage:Boolean(S.data.nextCursor)}}))}),[i,t,a.filters,a.sort,a.timeRange,a.loading,a.error,a.hasNextPage,a.paginationToken,u]),p=(0,s.useMemo)((()=>a.navigableBlockIds.map((e=>new(te().G)(i,{id:e,table:Tc().iU},{inMemoryRecordCache:c})))),[a.navigableBlockIds,c,i]);(0,s.useEffect)((()=>{a.shouldReRunSearch&&(o((e=>({...e,shouldReRunSearch:!1}))),g({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[a.shouldReRunSearch,g]);const m=(0,s.useCallback)((async()=>{a.shouldReRunSearch||await g({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[a.shouldReRunSearch,g]),h=(0,s.useCallback)((async e=>{await g({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[g]),S=(0,s.useCallback)(((e,t)=>{o((i=>({...i,filters:{...i.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const s of(0,vi().Yd)(e))f().Xy(e[s],_c[s])||zd().uS(i,{filter:s,value:"createdBy"===s||"teamIds"===s?e[s]:void 0})}),[i]),x=(0,s.useCallback)((e=>{o((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),zd().e2(i,{daysFilter:e})}),[i]),y=(0,s.useCallback)((e=>{o((t=>({...t,sort:e,shouldReRunSearch:!0}))),zd().jM(i,{column:e.field,isAscending:"asc"===e.direction})}),[i]);return{filters:a.filters,sort:a.sort,timeRange:a.timeRange,analyticsByPageId:a.analyticsByPageId,loading:a.loading,error:a.error,navigableBlockStores:p,loadNextPage:m,runNewSearch:h,setFilters:S,setTimeRange:x,setSort:y}}({spaceStore:i}),w=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),M=(0,o().VK)((()=>{const e=ye().default.checkGate({gateName:"allow_space_member_to_export_analytics"});return Boolean(i.canAdmin())||e&&i.canRead()}),[i]),T=(0,s.useMemo)((()=>void 0!==d&&i.id!==d),[i.id,d]);(0,s.useEffect)((()=>{c.current&&!T||(m(!0),c.current=!0)}),[m,T]);const _=(0,o().VK)((()=>i.getName()),[i]);if("NotFoundError"===(null==l||null===(t=l.error)||void 0===t?void 0:t.name))return(0,se.jsx)(Jd().y,{type:"empty",spaceName:_});const k={...y,daysFilter:x,lastEditedTime:(0,ie().Hq)(y.lastEditedTime),createdTime:(0,ie().Hq)(y.createdTime)};return(0,se.jsxs)("div",{style:w.container,children:[(0,se.jsx)(rc,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter}),(0,se.jsx)(Bc,{canExport:M,filters:k}),(0,se.jsx)(Pc,{spaceStore:i,teamStores:a,runNewSearch:m,setFilters:h,filters:y,timeRange:x,setTimeRange:S}),(0,se.jsx)(wc,{navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,sort:b,setSort:v,loadNextPage:u,loading:j,error:C})]})}function Bc(e){const t=(0,r().yK)((()=>({sectionTitle:{fontWeight:h().Ue.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canExport:i,filters:s}=e,{daysFilter:n}=s,a=(0,se.jsxs)("div",{style:t.sectionTitleSection,children:[(0,se.jsx)(he().Z,{style:t.sectionTitle,children:(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,se.jsx)(fe().Z,{placement:xe().Placement.Bottom,render:e=>(0,se.jsx)(Di().Z,{...e,href:(0,Ne().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:H().Z.formatMessage($d().xX[n])}}):(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,se.jsxs)("div",{style:t.wrapper,children:[a,i&&(0,se.jsx)(Qd().f,{style:t.exportButton,analyticsType:ot().x.Content,filters:s})]})}var Zc=()=>i(957744),Uc=()=>i(820717),Hc=()=>i(637887);const Oc=640;function Ec(e){let{data:t,loading:i,error:a,daysFilter:l,setDaysFilter:d}=e;const c=(0,n().O7)(),{organizationOwnerRecordCache:u}=(0,s.useContext)(Vd().V),g=(0,r().yK)((e=>({title:{fontWeight:h().Ue.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center",overflow:"hidden"},titleText:{...h().Yu,flexShrink:1},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[p,f]=(0,tc().e)(),{pageViews:S,uniquePageViews:x,pageEdits:y,topPages:b}=t,v=(0,o().VK)((()=>b.map((e=>{let{pageId:t,pageViews:i}=e;return{store:new(te().G)(c,{id:t,table:Tc().iU},{inMemoryRecordCache:u}),caption:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,se.jsx)(sc().e,{abbreviateNumber:!1,num:i})}})}}))),[c,b,u]),j=(0,s.useCallback)((e=>{d(e),zd().m0(c,{filter:"content_engagement",daysFilter:e})}),[c,d]);return(0,se.jsxs)("div",{style:g.container,ref:p,children:[(0,se.jsxs)("div",{style:g.titleContainer,children:[(0,se.jsxs)(he().Z,{style:g.title,children:[(0,se.jsx)("div",{style:g.titleText,children:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,se.jsx)(fe().Z,{placement:xe().Placement.Bottom,render:e=>(0,se.jsx)(Di().Z,{...e,href:(0,Ne().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==l?(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:H().Z.formatMessage($d().xX[l])}}):(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,se.jsx)(ac().f,{currentFilter:l,onChangeFilter:j})]}),(0,se.jsxs)(ic().rj,{gap:16,children:[(0,se.jsx)(ic().r8,{row:1,col:1,colEnd:3,children:(0,se.jsx)(nc().q,{loading:i,error:a,icon:Xd().N,textStyles:g.overviewCard,title:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,se.jsx)(sc().e,{abbreviateNumber:f<Oc,num:S})}})})}),(0,se.jsx)(ic().r8,{row:2,col:1,colEnd:3,children:(0,se.jsx)(nc().q,{loading:i,error:a,icon:Uc().v,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,se.jsx)(sc().e,{abbreviateNumber:f<Oc,num:x})}})})}),(0,se.jsx)(ic().r8,{row:3,col:1,colEnd:3,children:(0,se.jsx)(nc().q,{loading:i,error:a,icon:Zc().E,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,se.jsx)(sc().e,{abbreviateNumber:f<Oc,num:y})}})})}),(0,se.jsx)(ic().r8,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,se.jsx)(Hc().$,{loading:i,error:a,title:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:v})})]})]})}var Lc=()=>i(121056);function qc(e){var t,i;let{onUserTabFilterChange:s,spaceStore:n,contentEngagement:a,userEngagement:l}=e;const d=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),c=(0,o().VK)((()=>n.getName()),[n]);if("NotFoundError"===(null===(t=a.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(i=l.error)||void 0===i?void 0:i.name))return(0,se.jsx)(Jd().y,{type:"empty",spaceName:c});return(0,se.jsxs)("div",{style:d.container,children:[(0,se.jsx)(Lc().D,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:function(e){s({graphFilter:"all_time"===e?"last_90_days":e}),l.setDaysFilter(e)}}),(0,se.jsx)(Ec,{data:a.data,loading:a.loading,error:a.error,daysFilter:a.daysFilter,setDaysFilter:a.setDaysFilter})]})}var Vc=()=>i(776981),Nc=()=>i(549971);const Fc={[ot().x.Overview]:(0,se.jsx)(m()._H,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"}),[ot().x.Users]:(0,se.jsx)(m()._H,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"}),[ot().x.Content]:(0,se.jsx)(m()._H,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"}),[ot().x.Search]:(0,se.jsx)(m()._H,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})};function Kc(e){const{currentTab:t,spaceAnalyticsStoreState:i,onUserTabFilterChange:s,spaceStore:n}=e;switch(t){case ot().x.Content:return(0,se.jsx)(Rc,{spaceStore:n,contentEngagement:e.contentEngagementData});case ot().x.Users:return(0,se.jsx)(Nc().Z,{spaceStore:n,usersTabData:i.usersTabData,onUserTabFilterChange:s,userEngagement:e.userEngagementData});case ot().x.Overview:return(0,se.jsx)(qc,{contentEngagement:e.contentEngagementData,userEngagement:e.userEngagementData,spaceStore:n,onUserTabFilterChange:s});case ot().x.Search:return(0,se.jsx)(Vc().Z,{spaceStore:n});default:(0,vi().t1)(t)}}const Wc=function(e){let{spaceStore:t}=e;const a=(0,r().yK)((e=>({headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:h().Ue.medium,display:"flex",justifyContent:"space-between"},title:{display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[]),l=(0,n().O7)(),d=(0,o().VK)((()=>{var e;return null===(e=et().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),c=(0,i(860570).U)({spaceId:t.id}),u=(0,i(113437).i)({spaceStore:t,userId:d}),[g,p]=(0,o().AF)(ot().Z),f=(0,o().VK)((()=>Boolean(null==t?void 0:t.getSettings().disable_page_analytics)),[t]),S=(0,o().VK)((()=>null==t?void 0:t.getName()),[t]),x=(0,s.useCallback)((async e=>{await Gd().Pr({environment:l,spaceStore:t,currentTab:g.currentTab,currentSpaceId:g.currentSpaceId,usersTabData:g.usersTabData,setState:p,graphFilter:e.graphFilter,tableFilter:e.tableFilter})}),[l,t,g,p]),y=(0,s.useCallback)((e=>{zd().nK(l,{tab:e}),p({...g,currentTab:e})}),[p,g,l]),b=(0,o().VK)((()=>{const e=[];return function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(ot().x.Overview),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(ot().x.Users),e.push(ot().x.Content),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(ot().x.Search),e}),[t]),v=(0,o().VK)((()=>b.length>1),[b]),j=g.currentTab||b[0];(0,s.useEffect)((()=>{!async function(){const e=t.id;e&&ot().Z.shouldRefreshState(e)&&(j===ot().x.Users?await x({graphFilter:"last_90_days",tableFilter:"last_90_days"}):j===ot().x.Content||j===ot().x.Overview||j===ot().x.Search||(0,vi().t1)(j))}()}));const w=(0,s.useCallback)((()=>{C().D({environment:l,url:(0,Ne().UY)("guides.workspaceAnalytics")})}),[l]),M=b.map((e=>Fc[e])),T=f?(0,se.jsx)(Jd().y,{type:"disabled",spaceName:S}):(0,se.jsxs)(se.Fragment,{children:[v&&(0,se.jsx)(ps().ZP,{tabs:M,selectedIndex:b.indexOf(j),onChange:e=>{y(b[e])},style:a.tabsStyle}),Kc({currentTab:j,spaceAnalyticsStoreState:g,onUserTabFilterChange:x,spaceStore:t,contentEngagementData:c,userEngagementData:u})]});return(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsxs)(le().Z,{large:!0,style:a.headingStyle,children:[(0,se.jsxs)("div",{style:a.title,children:[(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.title",defaultMessage:"Workspace analytics"}),(0,se.jsx)(fe().Z,{placement:xe().Placement.Right,render:e=>(0,se.jsx)(Di().Z,{...e,href:(0,Ne().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:a.helpInfo}),renderTooltip:()=>(0,se.jsx)(m()._H,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from the start date of your Enterprise Plan"})})]}),(0,se.jsx)(vt().Z,{size:"sm",onClick:w,icon:ro().m,children:(0,se.jsx)(m()._H,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"})})]}),(0,Pt().Um)(),T]})};var zc=()=>i(325803),Gc=()=>i(109757),Yc=()=>i(18281),$c=()=>i(493462),Qc=()=>i(521632),Jc=()=>i(491927),Xc=()=>i(693622);let eu=function(e){return e.Password="Password",e.CurrentEmail="TemporaryPasscode",e}({});class tu extends L().default{getInitialState(){return{open:!1,authorized:!1,authorizationType:void 0}}}const iu=tu;var su=()=>i(951113);const nu={modal:{width:460,padding:32,borderRadius:4,fontSize:14},loadingSpinner:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},paragraph:{marginTop:12,marginBottom:14},error:{color:da().ZP.red,fontSize:12,marginTop:4,marginLeft:8},bold:{fontWeight:h().Ue.bold},input:{padding:"4px 8px"},button:{marginTop:14,width:"100%"},educationPlanWarning:{display:"flex",marginTop:14,paddingTop:14},claimedEmailDomainWarning:{marginTop:14,marginBottom:14}},au=(0,m().vU)({dialogLabel:{id:"profileSettings.accountSecuritySection.emailSetting.dialogLabel",defaultMessage:"Change email"}});const ou=function(e){let{userValue:t,hasEducationPlan:i,areProfileEditsDisabled:a}=e;const r=(0,n().O7)(),l=(0,m().YB)(),d=(0,o().qz)(void 0,iu),c=(0,s.useCallback)((()=>(0,se.jsx)(Tu,{userValue:t,hasEducationPlan:i,emailChangeStore:d})),[t,i,d]),u=(0,s.useCallback)((()=>pu(r,i,d)),[r,i,d]),g=(0,o().VK)((()=>d.state.open),[d]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Fi().Z,{type:"custom",isMobile:!1,title:(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.emailSetting.label",defaultMessage:"Email"}),caption:t&&t.email,customButton:(0,se.jsx)(hu,{userValue:t,areProfileEditsDisabled:a,emailChangeStore:d})}),(0,se.jsx)(rs().Z,{ariaLabel:l.formatMessage(au.dialogLabel),open:g,onDismiss:u,render:c})]})};function ru(e){let{userValue:t}=e;return t?(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.currentEmail",defaultMessage:"Your current email is {currentEmail}.",values:{currentEmail:(0,se.jsx)("span",{style:nu.bold,children:t&&t.email})}}):null}function lu(e){let{state:t}=e;return(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,style:nu.claimedEmailDomainWarning,children:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.claimedEmailDomainWarning",defaultMessage:"The email domain {newEmailDomain} has been claimed by an organization. If you continue with changing this email address, any workspaces created by this account can be managed by the organization. See <domainclaimlink>this page</domainclaimlink> for more info.",values:{newEmailDomain:(0,Ql().Gd)(t.newEmail)??t.newEmail,domainclaimlink:e=>(0,se.jsx)(us().Z,{href:(0,Ne().UY)("guides.domainManagement"),external:!0,children:e})}})})}function du(e){return{modal:{background:e.contentBackground},educationPlanWarning:{color:e.lightTextColor,borderTop:`1px solid ${e.regularDividerColor}`}}}function cu(e){let{hasEducationPlan:t}=e;const i=(0,r().Fg)(),s=(0,n().O7)();return t?(0,se.jsxs)("div",{style:{...nu.educationPlanWarning,...du(i).educationPlanWarning},children:[(0,ro().m)({width:14,marginTop:4,marginRight:6,fill:i.lightIconColor})," ",(0,se.jsx)("div",{children:(0,se.jsx)(m()._H,{defaultMessage:"Changing your email may downgrade your workspace on a Free Education Plan to the basic Free Plan. You won't lose any data, but you'll need to upgrade to re-access paid features. Have questions about this? <sendmessagelink>Message support</sendmessagelink>.",id:"emailChangeSettings.downgradeEducationPlan.warning.message",values:{sendmessagelink:e=>(0,se.jsx)(us().Z,{onClick:()=>function(e){Lr().j_({environment:e,from:"change_email_student"})}(s),children:e})}})})]}):null}function uu(e,t,i){if(e)return e.email;i.setState({open:i.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorNoUserValue",defaultMessage:"User value is undefined."})})}async function gu(e,t,i){if(!i.state.authorized)return;const s=(0,Ql().Gd)(i.state.newEmail);i.setState({...i.state,loading:!0});const[n,a]=await Promise.all([await Z().callApi({eventName:"sendEmailVerification",environment:e,data:{email:i.state.newEmail}}),s?await Z().callApi({eventName:"getVerifiedEmailDomain",environment:e,data:{emailDomain:s}}):void 0]);if("success"===n.type){const e=(0,vi().$K)(a)&&"failed"===a.type?(0,U().wf)(t,a):void 0;i.setState({...i.state,newEmailPasscodeSent:!0,newEmailPasscode:"",error:e,loading:!1,newEmailContainsVerifiedDomain:(0,vi().$K)(a)&&"success"===a.type&&void 0!==a.data.id})}else i.setState({...i.state,loading:!1,error:(0,U().wf)(t,n)})}async function pu(e,t,i){i.reset(),t&&await pt().bi(e)}async function mu(e,t,i,s){if(!s.state.authorized)if(s.state.authorizationType===eu.Password){if(!uu(t,i,s))return;s.setState({...s.state,loading:!0});const n=await Z().callApi({eventName:"authVerifyPassword",environment:e,data:{password:s.state.password}});if("failed"===n.type)return void s.setState({...s.state,loading:!1,error:(0,U().wf)(i,n)});s.setState({...s.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}else s.state.authorizationType===eu.CurrentEmail&&s.setState({...s.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}async function fu(e,t,i,s){if(!s.state.authorized)return;const n=s.state.authorizationType===eu.Password?{type:"Password",password:s.state.password,newEmail:s.state.newEmail,newEmailPasscode:s.state.newEmailPasscode}:{type:"CurrentEmail",currentEmailPasscode:s.state.currentEmailPasscode,newEmail:s.state.newEmail,newEmailPasscode:s.state.newEmailPasscode};s.setState({...s.state,loading:!0});const a=await Z().callApi({eventName:"changeEmail",environment:e,data:n});if("success"===a.type)Jc().tx(e,{new_email:s.state.newEmail,error:void 0}),s.setState({...s.state,loading:!1}),await pu(e,t,s);else{const t=(0,U().wf)(i,a);Jc().tx(e,{new_email:s.state.newEmail,error:t}),s.setState({...s.state,loading:!1,error:t})}}function hu(e){let{userValue:t,areProfileEditsDisabled:i,emailChangeStore:n}=e;const a=(0,s.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:void 0})}(n)),[n]),o=(0,se.jsx)(vt().Z,{size:"lg",onClick:i?()=>{}:a,disabled:i,disabledFeedback:i,children:(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.emailSetting.changeEmailButton.label",defaultMessage:"Change email"})});return i?(0,se.jsx)(fe().Z,{renderTooltip:()=>(0,se.jsx)(m()._H,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:t?(0,Ql().Gd)(t.email):""}}),placement:xe().Placement.Bottom,alignment:xe().Alignment.Center,render:e=>(0,se.jsx)("div",{...e,children:o})}):o}function Su(e){let{state:t,userValue:i,emailChangeStore:a}=e;const o=(0,n().O7)(),r=(0,m().YB)(),l=(0,s.useCallback)((()=>mu(o,i,r,a)),[o,i,r,a]),d=(0,s.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:eu.Password,password:""})}(a)),[a]),c=(0,s.useCallback)((e=>function(e,t){t.setState({open:!0,authorized:!1,authorizationType:eu.Password,password:e.currentTarget.value,error:void 0})}(e,a)),[a]);return i?(0,se.jsxs)(s.Fragment,{children:[(0,se.jsx)("p",{style:{margin:0},children:(0,se.jsx)(ru,{userValue:i})}),(0,se.jsx)("p",{style:nu.paragraph,children:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.enterPasswordInstructions",defaultMessage:"Please enter your password."})}),(0,se.jsx)(Ei().Z,{style:{display:"none"},type:"text",value:i.email,autoComplete:"username",disabled:!0}),(0,se.jsx)(Ei().Z,{type:"password",disabled:t.authorized,value:t.password,onChange:c,showClearButton:!0,onClearButtonClick:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.passwordInput.label",defaultMessage:"Password"}),style:nu.input,focusInitial:!0,autoComplete:"current-password"}),!t.authorized&&t.error&&(0,se.jsx)("div",{style:nu.error,children:t.error}),!t.authorized&&(0,se.jsx)(Ai().Z,{isLarge:!0,style:nu.button,onClick:l,disabled:t.loading,children:t.loading?(0,se.jsx)(as().Z,{}):(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]}):null}function xu(e){let{userValue:t,emailChangeStore:i}=e;const a=(0,n().O7)(),r=(0,m().YB)(),l=(0,s.useCallback)((()=>async function(e,t,i,s){if(!t)return;s.setState({...s.state,loading:!0});const n=await Z().callApi({eventName:"sendEmailVerification",environment:e,data:{email:t.email}});"success"===n.type?s.setState({...s.state,currentEmailPasscodeSent:!0,currentEmailPasscode:"",error:void 0,loading:!1}):s.setState({...s.state,currentEmailPasscodeSent:!0,loading:!1,error:(0,U().wf)(i,n)})}(a,t,r,i)),[a,t,r,i]),d=(0,o().VK)((()=>i.state.loading),[i]);return(0,se.jsx)(Ai().Z,{isLarge:!0,onClick:l,disabled:d,children:d?(0,se.jsx)(as().Z,{}):(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.sendCurrentEmailVerificationCode.label",defaultMessage:"Send verification code"})})}function yu(e){let{state:t,userValue:i,emailChangeStore:a}=e;const o=(0,n().O7)(),r=(0,m().YB)(),l=(0,s.useCallback)((()=>mu(o,i,r,a)),[o,i,r,a]),d=(0,s.useCallback)((e=>function(e,t){t.setState({...t.state,currentEmailPasscode:e.currentTarget.value,error:void 0})}(e,a)),[a]);return(0,se.jsxs)(s.Fragment,{children:[(0,se.jsx)(Ei().Z,{value:t.currentEmailPasscode,onChange:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.enterCurrentEmailVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:nu.input}),!t.authorized&&(0,se.jsx)(Ai().Z,{isLarge:!0,style:nu.button,onClick:l,disabled:t.loading,children:t.loading?(0,se.jsx)(as().Z,{}):(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]})}function bu(e){let{emailChangeStore:t}=e;const i=(0,n().O7)(),a=(0,m().YB)(),r=(0,s.useCallback)((()=>function(e){e.setState({...e.state,newEmail:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0})}(t)),[t]),l=(0,s.useCallback)((()=>gu(i,a,t)),[i,a,t]),d=(0,s.useCallback)((e=>function(e,t){t.setState({...t.state,newEmail:e.currentTarget.value,error:void 0})}(e,t)),[t]),c=(0,o().Kw)(t);return c.authorized?(0,se.jsx)(Ei().Z,{value:c.newEmail,onChange:d,onSubmit:l,showClearButton:!0,onClearButtonClick:r,placeholder:a.formatMessage({id:"profileSettings.changeEmailModal.newEmailInput.placeholder",defaultMessage:"Enter new email"}),style:nu.input,focusInitial:!0}):null}function vu(e){let{state:t,emailChangeStore:i}=e;const a=(0,n().O7)(),o=(0,m().YB)(),r=(0,s.useCallback)((()=>gu(a,o,i)),[a,o,i]);return(0,se.jsxs)(s.Fragment,{children:[t.error&&(0,se.jsx)("div",{style:nu.error,children:t.error}),(0,se.jsx)(Ai().Z,{isLarge:!0,style:nu.button,onClick:r,disabled:t.loading,children:t.loading?(0,se.jsx)(as().Z,{}):(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.sendVerificationCodeButton.label",defaultMessage:"Send verification code"})})]})}function ju(e){let{state:t,userValue:i,emailChangeStore:n}=e;return(0,se.jsxs)(s.Fragment,{children:[(0,se.jsxs)("p",{style:{...nu.paragraph,marginTop:0},children:[(0,se.jsx)(ru,{userValue:i})," ",t.currentEmailPasscodeSent?(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.sentVerificationCodeToCurrentEmail",defaultMessage:"We've sent a temporary verification code to this email."}):(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.sendVerificationCodeToCurrentEmail",defaultMessage:"We'll send a temporary verification code to this email."})]}),t.currentEmailPasscodeSent?(0,se.jsx)(yu,{userValue:i,emailChangeStore:n,state:t}):(0,se.jsx)(xu,{userValue:i,emailChangeStore:n})]})}function Cu(e,t,i,s,n){if(!n.state.authorized)return()=>{};if(n.state.newEmailContainsVerifiedDomain&&(0,Ql().Gd)(n.state.newEmail)!==(0,Ql().Gd)((null==t?void 0:t.email)||"")){const t=n.state.newEmail;return async()=>{const a=await function(e){return v().gt({mode:"wide",message:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.confirmationModal.title",defaultMessage:"Change your email?"}),description:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.confirmationModal.description",defaultMessage:"If you continue changing this email address to this domain, any workspaces created by this account can be managed by the organization.",values:{verifiedDomain:(0,Ql().Gd)(e)}}),acceptLabel:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.confirmationModal.acceptButton.label",defaultMessage:"Change email"}),cancelLabel:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.confirmationModal.cancelButton.label",defaultMessage:"Go back"})}).then((e=>e.accept))}(t);a&&await fu(e,i,s,n)}}return()=>fu(e,i,s,n)}function wu(e){let{state:t,userValue:i,hasEducationPlan:a,store:r}=e;const l=(0,n().O7)(),d=(0,m().YB)(),c=(0,s.useCallback)((e=>function(e,t){t.setState({...t.state,newEmailPasscode:e.currentTarget.value,error:void 0})}(e,r)),[r]),u=(0,o().VK)((()=>Cu(l,i,a,d,r)),[l,i,a,d,r]);return(0,se.jsxs)(s.Fragment,{children:[(0,se.jsx)("p",{style:nu.paragraph,children:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.verificationCodeSentMessage",defaultMessage:"We just sent you a temporary verification code to {newEmail}.",values:{newEmail:(0,se.jsx)("span",{style:nu.bold,children:t.newEmail})}})}),(0,se.jsx)(Ei().Z,{value:t.newEmailPasscode,onChange:c,onSubmit:u,placeholder:d.formatMessage({id:"profileSettings.changeEmailModal.enterVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:nu.input}),t.error&&(0,se.jsx)("div",{style:nu.error,children:t.error}),(0,se.jsx)(Ai().Z,{isLarge:!0,style:nu.button,onClick:u,disabled:t.loading,children:t.loading?(0,se.jsx)(as().Z,{}):(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.changeEmailButton.label",defaultMessage:"Change email"})})]})}function Mu(e){let{state:t,userValue:i,hasEducationPlan:n,emailChangeStore:a}=e;const r=(0,o().Kw)(a);if(!r.authorized)return null;const{newEmail:l,newEmailContainsVerifiedDomain:d,newEmailPasscodeSent:c}=r;return(0,se.jsxs)(s.Fragment,{children:[(0,se.jsx)("p",{style:nu.paragraph,children:(0,se.jsx)(m()._H,{id:"profileSettings.changeEmailModal.newEmailInstructions",defaultMessage:"Please enter a new email and we will send you a verification code."})}),(0,se.jsx)("div",{children:(0,se.jsx)(bu,{emailChangeStore:a})}),d&&(0,Ql().Gd)(l)!==(0,Ql().Gd)((null==i?void 0:i.email)||"")&&(0,se.jsx)(lu,{state:t}),c?(0,se.jsx)(wu,{userValue:i,hasEducationPlan:n,store:a,state:t}):(0,se.jsx)(vu,{emailChangeStore:a,state:t}),(0,se.jsx)(cu,{hasEducationPlan:n})]})}function Tu(e){let{userValue:t,hasEducationPlan:i,emailChangeStore:a}=e;const l=(0,m().YB)(),d=(0,r().Fg)(),c=(0,n().O7)(),u=(0,s.useCallback)((()=>async function(e,t,i,s){const n=uu(i,t,s);if(!n)return;const a=await Xc().c({environment:e,userEmail:n});a.error?s.setState({open:s.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorFetchingAccountData",defaultMessage:"Could not fetch account information for {currentEmail}."},{currentEmail:n})}):a.value.isSamlEnforced||!a.value.hasPassword?s.setState({open:!0,authorized:!1,authorizationType:eu.CurrentEmail,currentEmailPasscodeSent:!1,currentEmailPasscode:""}):s.setState({open:!0,authorized:!1,authorizationType:eu.Password,password:""})}(c,l,t,a)),[c,l,t,a]),g=(0,o().Kw)(a);return(0,se.jsx)("div",{style:{...nu.modal,...du(d).modal},children:(0,se.jsx)(su().Z,{fetch:u,loading:e=>e?(0,se.jsx)("div",{style:nu.loadingSpinner,children:(0,se.jsx)(as().Z,{})}):null,render:()=>(0,se.jsxs)(s.Fragment,{children:[g.authorizationType===eu.Password?(0,se.jsx)(Su,{userValue:t,emailChangeStore:a,state:g}):g.authorizationType===eu.CurrentEmail?(0,se.jsx)(ju,{userValue:t,emailChangeStore:a,state:g}):void 0,g.authorized&&(0,se.jsx)(Mu,{userValue:t,hasEducationPlan:i,emailChangeStore:a,state:g})]})})})}var _u=()=>i(682890),ku=()=>i(721543),Iu=()=>i(214993);const Au=(0,mt().IU)("cellPhone",{viewBox:"0 0 12 18",svg:(0,se.jsx)("path",{d:"M2.938 17.398c-.672 0-1.217-.197-1.633-.593-.412-.39-.617-.912-.617-1.563V2.461c0-.646.205-1.167.617-1.563.416-.395.96-.593 1.633-.593h6.148c.667 0 1.2.198 1.601.593.407.396.61.917.61 1.563v12.781c0 .646-.203 1.167-.61 1.563-.4.396-.934.593-1.601.593H2.937zm.265-1.578h5.594c.307 0 .544-.08.71-.242.173-.161.259-.39.259-.687V2.812c0-.291-.086-.518-.258-.68-.167-.166-.404-.25-.711-.25H3.203c-.312 0-.555.082-.726.243-.167.161-.25.39-.25.688V14.89c0 .296.083.526.25.687.171.162.414.242.726.242zm1.11-.61a.398.398 0 01-.282-.108.368.368 0 01-.117-.282c0-.12.04-.216.117-.289a.398.398 0 01.282-.11h3.375a.38.38 0 01.28.11c.074.073.11.17.11.29a.38.38 0 01-.11.28.38.38 0 01-.28.11H4.313zm.703-11.546a.583.583 0 01-.43-.172.583.583 0 01-.172-.43.57.57 0 01.172-.421.57.57 0 01.43-.18h1.96a.56.56 0 01.422.18c.12.114.18.255.18.421a.583.583 0 01-.172.43.583.583 0 01-.43.172h-1.96z"})});var Du=()=>i(745795),Pu=()=>i(175771),Ru=()=>i(968795);class Bu extends L().default{getInitialState(){return{open:!1,singleDeviceLogout:!1,deviceName:void 0}}}const Zu=new Bu;const Uu=new(i(168469).q)((e=>{let{userId:t,paginationInfo:i}=e;return`getUserDevices/${t}/limit=${null==i?void 0:i.limit}`}),(async(e,t)=>{let{paginationInfo:s}=t;const n=await Promise.resolve().then(i.bind(i,824462)),a=await n.callApi({eventName:"getUserDevices",environment:e,data:{paginationInfo:s}});if("success"===a.type)return a.data}));Il().exposeDebugValue("DevicesStore",Uu);const Hu=Uu;class Ou extends L().default{getInitialState(){return{deviceListLoadingState:"init",nextCursor:void 0,currentDevice:void 0,allDevices:[],viewDevices:[],sortColumn:void 0,sortAscending:!1}}async fetchDevices(e,t){this.setState({...this.state,deviceListLoadingState:"loading",sortColumn:void 0});const i=await Hu.awaitData(e,t);var s,n;i&&i.devices&&i.currentDevice&&(this.setDevices(i.devices),this.setCurrentDevice(i.currentDevice),this.setNextCursor(null===(s=i.devices[i.devices.length-1])||void 0===s?void 0:s.id));i&&i.devices&&!i.currentDevice&&(this.setDevices(i.devices),this.setNextCursor(null===(n=i.devices[i.devices.length-1])||void 0===n?void 0:n.id));void 0!==i?this.setViewDevices():this.setState({...this.state,deviceListLoadingState:"error"})}setCurrentDevice(e){this.setState({...this.state,currentDevice:e})}setViewDevices(){var e;let t=this.state.allDevices.slice(0,3);const i=t.findIndex((e=>{var t;return e.id===(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}));-1===i&&this.state.currentDevice?t=[this.state.currentDevice,...t.slice(0,2)]:i>0&&(t=[t[i],...t.slice(0,i),...t.slice(i+1)]);const s=null===(e=this.state.allDevices[t.length-1])||void 0===e?void 0:e.id;this.setNextCursor(s),this.setState({...this.state,deviceListLoadingState:"loaded",viewDevices:t})}setDevices(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return void this.setState({...this.state,allDevices:e,viewDevices:e.slice(0,3)});let t=e;this.state.currentDevice&&(t=[this.state.currentDevice,...e.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]),this.setState({...this.state,allDevices:e,viewDevices:t})}setSorting(e,t){switch(this.setState({...this.state,sortColumn:e,sortAscending:t}),e){case"device-name":this.sortDevicesByName();break;case"last-seen-time":this.sortDevicesByLastSeenTime();break;case"last-login-geographic-location":this.sortDevicesByLocation()}}sortDevicesByLastSeenTime(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),i=f().Xo(t,(e=>e.last_seen_time??e.last_login_at),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...i]:i})}sortDevicesByName(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),i=f().Xo(t,(e=>e.device_name.toLowerCase()),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...i]:i})}sortDevicesByLocation(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),i=f().Xo(t,(e=>{var t;return(null===(t=e.last_login_geographic_location)||void 0===t?void 0:t.toLowerCase())||"unknown"}),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...i]:i})}setNextCursor(e){this.setState({...this.state,nextCursor:e})}loadMoreDevices(){var e;if(void 0===this.state.nextCursor)return;const t=this.state.allDevices.slice(0,3),i=this.state.allDevices.slice(t.length);let s=[...t,...i];this.state.currentDevice&&(s=[this.state.currentDevice,...s.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]);const n=null===(e=this.state.allDevices[s.length-1])||void 0===e?void 0:e.id;this.setNextCursor(n),this.setState({...this.state,viewDevices:s})}}const Eu=new Ou;var Lu=()=>i(668001),qu=()=>i(378907);function Vu(){var e;const t=(0,n().O7)(),i=(0,r().yK)((e=>({tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},allDevicesContainer:{display:"flex",flexDirection:"column",marginTop:16},noSessionsMessage:{height:120,width:"100%",fontSize:12,color:e.lightTextColor,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`},shimmerRow:{height:12,gap:16,display:"flex",borderRadius:6},tooltips:{color:e.icon.tertiary,height:14,width:15,marginLeft:4},lastActiveTimeContainer:{display:"flex",alignItems:"center"}})),[]),[a]=(0,Cn().r5)((async()=>{const e=t.currentUser.id;if(!e)return Promise.reject("User ID is not available");try{return await Eu.fetchDevices(t,{userId:e}),Promise.resolve()}catch(l){return Promise.reject(l)}}),[t]),l="rejected"===a.status,d=(0,o().Kw)(Eu),c=(null===(e=d.currentDevice)||void 0===e?void 0:e.id)??"",u=(0,s.useMemo)((()=>l?[]:d.viewDevices.map((e=>function(e){let{userDevicePointer:t,storeState:i,currentUserDevicePk:s}=e;const n=t.id,a=i.viewDevices.find((e=>e.id===n));if(!a)return;const o=s===a.id,{device_name:r,last_seen_time:l,last_login_geographic_location:d,last_login_at:c}=a;return{key:n,columns:[(0,se.jsx)(ig,{deviceName:r,isCurrentDevice:o},"device-name"),(0,se.jsx)(eg,{lastSeenTime:l??c,isCurrentDevice:o},"last-seen-time"),(0,se.jsx)(tg,{location:d},"location"),(0,se.jsx)(Ju,{deviceId:a.id,isCurrentDevice:o},"action")]}}({userDevicePointer:{id:e.id,table:Ru().e},storeState:d,currentUserDevicePk:c}))).filter((e=>void 0!==e))),[c,l,d]),g=(0,s.useMemo)((()=>Array.from({length:3}).map(((e,t)=>({columns:Array.from({length:4}).map(((e,t)=>(0,se.jsx)(Lu().Z,{style:i.shimmerRow},t))),key:`device-loading-shimmer-${t}`})))),[i.shimmerRow]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Ku,{deviceRows:u,styles:i,storeState:d,shimmerRows:g}),(0,se.jsx)($u,{})]})}function Nu(e){let{column:t,onSortableColumnClick:i,header:s}=e;const n=(0,r().yK)((e=>({wrapper:{display:"flex"},text:{fontSize:h().JB.UISmall.desktop,fontWeight:h().Ue.regular,color:e.mediumTextColor},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[]),{sortColumn:a,sortAscending:l}=(0,o().VK)((()=>{const{sortColumn:e,sortAscending:t}=Eu.state;return{sortColumn:e,sortAscending:t}}),[]),d=["device-name","last-seen-time","last-login-geographic-location"].includes(t),c=()=>{if(a===t)return(0,ku().K)({...n.sortIcon,...l?{transform:"rotate(180deg)"}:{}})};return s&&d?(0,se.jsx)("div",{style:n.wrapper,children:(0,se.jsxs)(me().Z,{style:n.sortButton,onClick:()=>i(t),children:[s,c()]})}):s?(0,se.jsx)("div",{style:n.wrapper,children:s}):(0,se.jsx)(se.Fragment,{children:s})}function Fu(e){let{isLoadingState:t,styles:i}=e;const s=t?"3px 5px":0;return[{key:"device-name",header:(0,se.jsx)("div",{children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.table.nameColumn.title",defaultMessage:"Device Name"})}),style:{width:"30%",minWidth:200,padding:s}},{key:"last-seen-time",header:(0,se.jsxs)("div",{style:i.lastActiveTimeContainer,children:[(0,se.jsx)(m()._H,{id:"manageActiveSessions.table.lastSeenColumn.title",defaultMessage:"Last Active"}),(0,se.jsx)(fe().Z,{renderTooltip:()=>(0,se.jsx)(m()._H,{id:"manageActiveSessions.table.lastSeenColumn.tooltip",defaultMessage:"This may be delayed by several hours."}),render:e=>(0,se.jsx)("div",{...e,children:(0,ro().m)(i.tooltips)}),placement:xe().Placement.Top,alignment:xe().Alignment.Start})]}),style:{width:"25%",padding:s}},{key:"last-login-geographic-location",header:(0,se.jsx)(m()._H,{id:"manageActiveSessions.table.locationColumn.title",defaultMessage:"Location"}),style:{width:"30%",padding:s}},{key:"logout",header:(0,se.jsx)(se.Fragment,{}),style:{width:"10%",padding:s}}]}function Ku(e){const{deviceRows:t,styles:i,storeState:n,shimmerRows:a}=e,o="loading"===n.deviceListLoadingState&&!t.length,r=!o&&!t.length,l=!o&&!r,d=(0,s.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=Eu.state,s=t!==e||!i;Eu.setSorting(e,s)}),[]);return(0,se.jsxs)(se.Fragment,{children:[o?(0,se.jsx)(qu().Z,{columns:Fu({isLoadingState:!0,styles:i}),rows:a,tableStyle:i.tableBox,cellStyle:i.cell}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(qu().Z,{columns:Fu({isLoadingState:!1,styles:i}).map((e=>({key:e.key,header:(0,se.jsx)(Nu,{column:e.key,header:e.header,onSortableColumnClick:d}),style:e.style}))),rows:t,tableStyle:i.tableBox,cellStyle:i.cell}),r&&(0,se.jsx)("div",{style:i.noSessionsMessage,children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.noActiveSessions",defaultMessage:"No active sessions found."})})]}),l&&(0,se.jsx)(ng,{...e})]})}function Wu(e,t){Zu.setState({...Zu.state,open:!0,singleDeviceLogout:e??!1,deviceName:t})}function zu(){Zu.setState({...Zu.state,open:!1,singleDeviceLogout:!1,deviceName:void 0})}function Gu(){Eu.loadMoreDevices()}function Yu(){Eu.setViewDevices()}function $u(){const e=(0,o().VK)((()=>Zu.state.open),[]),t=(0,o().VK)((()=>Zu.state.singleDeviceLogout),[]),i=(0,o().VK)((()=>Zu.state.deviceName),[]),n=(0,o().VK)((()=>function(){let e;const{currentUserStore:t}=et().default.state;return t&&(e=t.getEmail()),e}()),[]),a=(0,r().yK)((e=>({container:{width:350,padding:24,display:"flex",flexDirection:"column",alignItems:"center"},descriptionText:{marginBottom:20,textAlign:"center"},button:{width:"100%"},bold:{fontWeight:h().Ue.semibold}})),[]),l=(0,s.useCallback)((e=>(0,se.jsx)("span",{style:a.bold,children:e})),[a]);return(0,se.jsx)(rs().Z,{open:e,onDismiss:zu,render:()=>(0,se.jsxs)("div",{style:a.container,children:[(0,se.jsx)("div",{style:a.descriptionText,children:t?(0,se.jsx)(m()._H,{id:"manageActiveSessions.confirmationModal.singleDevice",defaultMessage:"You have been logged out from {br}<bold>{deviceName}</bold>",values:{deviceName:i,bold:l,br:(0,se.jsx)("br",{})}}):n?(0,se.jsx)(m()._H,{id:"manageActiveSessions.confirmationModal.withEmail",defaultMessage:"You have been logged out from other active sessions for <bold>{email}</bold>",values:{email:n,bold:l}}):(0,se.jsx)(m()._H,{id:"manageActiveSessions.confirmationModal.withoutEmail",defaultMessage:"You have been logged out from other active sessions for your account."})}),(0,se.jsx)(Ai().Z,{style:a.button,onClick:zu,isLarge:!0,children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.confirmationModal.close",defaultMessage:"Close"})})]})})}function Qu(){const e=(0,n().O7)(),t=(0,o().Kw)(Eu),{device:i}=e,a=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",justifyContent:"center"},descriptionText:{textAlign:"center"},button:{color:"dark"===e.mode?da().ZP.whiteWithAlpha(.81):e.mediumTextColor,fontSize:12,fontWeight:500,padding:"6px 8px",height:28},personBadgeExclamationMarkIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),l=(0,s.useCallback)((async()=>{const i=(0,se.jsxs)("div",{style:a.container,children:[(0,Xl()._)(a.personBadgeExclamationMarkIcon),(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.confirmationMessage",defaultMessage:"<bold>Log out of all devices?</bold>",values:{bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Ue.semibold},children:e})}})]}),s=(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.acceptLabel",defaultMessage:"Log out"}),n=(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.cancelLabel",defaultMessage:"Cancel"}),o=(0,se.jsx)("div",{style:a.descriptionText,children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.description",defaultMessage:"You will be logged out of all other active sessions on other devices <bold>except</bold> this one.",values:{bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Ue.semibold},children:e})}})}),{accept:r}=await v().gt({message:i,acceptLabel:s,cancelLabel:n,description:o});if(!r)return;b().AQ(e),await Z().callApi({eventName:"logoutActiveSessions",environment:e,data:{}});const l=t.allDevices.filter((e=>{var i;return e.id===(null===(i=t.currentDevice)||void 0===i?void 0:i.id)}));Eu.setDevices(l,!0),Wu(!1)}),[t,e,a]),d=(0,se.jsx)(m()._H,{id:"manageActiveSessions.logOutAllDevices.title",defaultMessage:"Log out of all devices"}),c=(0,se.jsx)(m()._H,{id:"manageActiveSessions.logOutAllDevices.label",defaultMessage:"Log out of all other active sessions on other devices besides this one."});return(0,se.jsx)(Fi().Z,{type:"custom",isMobile:i.isMobile,disableSettingsItemClick:!0,title:d,caption:c,customButton:(0,se.jsx)(vt().Z,{onClick:l,style:a.button,ariaLabel:"Log out of all devices",children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.logOutAllDevices.button",defaultMessage:"Log out of all devices"})})})}function Ju(e){const t=(0,o().Kw)(Eu),i=(0,o().VK)((()=>Eu),[]),a=(0,n().O7)(),l=(0,r().yK)((e=>({button:{color:"dark"===e.mode?da().ZP.whiteWithAlpha(.81):e.mediumTextColor,fontSize:12,fontWeight:500,padding:"6px 8px",height:28,display:"inline-flex",margin:0},container:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,justifyContent:"center"},descriptionText:{textAlign:"center"},confirmationIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),d=(0,s.useCallback)((e=>(0,se.jsx)(Xu,{...e})),[]),c=(0,s.useCallback)((async e=>{const s=t.allDevices.find((t=>t.id===e)),n=(0,se.jsx)(d,{deviceName:(null==s?void 0:s.device_name)??"Unknown Device",containerStyles:l.container,iconStyles:l.confirmationIcon}),o=(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.acceptLabel",defaultMessage:"Log out"}),r=(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.cancelLabel",defaultMessage:"Cancel"}),c=(0,se.jsx)("div",{style:l.descriptionText,children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.description",defaultMessage:"You will be logged out of this device."})}),{accept:u}=await v().gt({message:n,acceptLabel:o,cancelLabel:r,description:c});if(u&&s){b().AQ(a),await Z().callApi({eventName:"logoutSingleDeviceSession",environment:a,data:{deviceId:e}});const n=t.allDevices.filter((t=>t.id!==e));i.setDevices(n),Wu(!0,s.device_name)}}),[i,t,a,l,d]);return e.isCurrentDevice?null:(0,se.jsx)(vt().Z,{onClick:()=>c(e.deviceId),style:l.button,ariaLabel:"Log out of this device",children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.logOutSingleDevice.button",defaultMessage:"Log out"})})}function Xu(e){return(0,se.jsxs)("div",{style:e.containerStyles,children:[(0,Xl()._)(e.iconStyles),(0,se.jsx)(m()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.confirmationMessage",defaultMessage:"<bold>Log out of {deviceName}?</bold>",values:{bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Ue.semibold},children:e}),deviceName:e.deviceName}})]})}function eg(e){const t=(0,m().YB)(),i=(0,s.useMemo)((()=>e.isCurrentDevice?t.formatMessage({id:"manageActiveSessions.lastSeenTime.currentDevice",defaultMessage:"Now"}):function(e,t){const i=Number(e);return qo().$b(i,os().locale,t)}(e.lastSeenTime,t)),[e.lastSeenTime,t,e.isCurrentDevice]);return(0,se.jsx)(he().Z,{className:"notranslate",isSmall:!0,children:i})}function tg(e){const t=(0,s.useMemo)((()=>{return""===(t=e.location)?"Unknown Location":t;var t}),[e.location]);return(0,se.jsx)(he().Z,{isSmall:!0,children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.location",defaultMessage:"{location}",values:{location:t}})})}function ig(e){const{deviceName:t,isCurrentDevice:i}=e,n=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",gap:8,marginLeft:4},stack:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},thisDeviceBadge:{color:e.blueColor,fontSize:11,fontWeight:400,margin:0}})),[]),a=(0,s.useMemo)((()=>function(e){const t=e.toLowerCase(),i={mac:"Mac OS X",macintosh:"Mac OS X",windows:"Windows Device",iphone:"iPhone",ipad:"iPad",ipod:"iPod",android:"Android Device",cros:"Chrome OS",ubuntu:"Ubuntu",linux:"Linux",unknown:"Unknown Device",motorola:"Motorola Device",intel:"Mac OS X"},s=Object.keys(i);for(const n of s)if(t.includes(n))return i[n];return e}(t)),[t]);return(0,se.jsxs)("div",{style:n.container,children:[sg({deviceName:t}),(0,se.jsxs)("div",{style:n.stack,children:[(0,se.jsx)(he().Z,{className:"notranslate",style:{fontSize:12,fontWeight:400},children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.deviceName",defaultMessage:"{deviceName}",values:{deviceName:a}})}),i?(0,se.jsx)("p",{style:n.thisDeviceBadge,children:(0,se.jsx)(m()._H,{id:"manageActiveSessions.deviceName.currentDeviceBadge",defaultMessage:"This Device"})}):void 0]})]})}function sg(e){const t=(0,r().yK)((e=>({iconStyle:{width:24,height:24,fill:e.lightIconColor}})),[]),i={intel:()=>(0,Du().h)(t.iconStyle),iphone:()=>Au(t.iconStyle),ipad:()=>Au(t.iconStyle),pixel:()=>Au(t.iconStyle),unknown:()=>(0,Pu().L)(t.iconStyle),windows:()=>(0,Du().h)(t.iconStyle)},s=e.deviceName.toLowerCase();for(const n in i)if(s.includes(n))return(0,se.jsx)(se.Fragment,{children:i[n]()});return(0,se.jsx)(se.Fragment,{children:i.unknown()})}function ng(e){const t=(0,r().yK)((e=>({loadMoreButton:{display:"flex",alignItems:"center",height:30,whiteSpace:"break-spaces",borderBottom:`1px solid ${e.lightDividerColor}`,color:e.lightTextColor,fontSize:14,opacity:.7},arrowIcon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.lightIconColor}})),[]),i=e.deviceRows.length<=3,s=e.deviceRows.length===e.storeState.allDevices.length;return(0,se.jsxs)(me().Z,{style:t.loadMoreButton,onClick:i?Gu:Yu,children:[s?null:i?(0,_u().M)(t.arrowIcon):(0,Iu().Z)(t.arrowIcon),(0,se.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:i?4:8,fontSize:12},children:i?(0,se.jsx)(m()._H,{id:"manageActiveSessions.loadMoreButton",defaultMessage:"{numberOfDevicesLeft, plural, =0 {All devices loaded} one {Load # more device} other {Load # more devices}}",values:{numberOfDevicesLeft:e.storeState.allDevices.length-e.deviceRows.length}}):(0,se.jsx)(m()._H,{id:"manageActiveSessions.retractLoadMoreButton",defaultMessage:"Show fewer devices"})})]})}var ag=()=>i(435669),og=()=>i(173694),rg=()=>i(365581),lg=()=>i(359792),dg=()=>i(323143),cg=()=>i(317493),ug=()=>i(275678);function gg(e){let{status:t,numMfaSettings:i,onReloadSettings:a,regenerateBackupCodes:l}=e;const d=(0,n().O7)(),[{rootStateMachine:c,settingsStateMachine:u,totpStateMachine:g,smsStateMachine:p,backupCodesStateMachine:f}]=(0,s.useState)((()=>{const e=new(og().r)(d),t={totpStore:new(ug().o),settingsStore:new(dg().c),smsStore:new(cg().J),backupCodesStore:new(ag().y),rootStore:new(lg().M)};return{mfaService:e,rootStateMachine:new(lg().i)(t.rootStore),settingsStateMachine:new(dg().W)(t.settingsStore,e),totpStateMachine:new(ug().V)(t.totpStore,e),smsStateMachine:new(cg().F)(t.smsStore,e),backupCodesStateMachine:new(ag().o)(t.backupCodesStore,e)}})),S=d.device.isMobile,x=(0,r().yK)((e=>({configureButton:{marginTop:S?12:0,marginBottom:S?4:0},regenerateBackupCodesBadge:{fontWeight:h().Ue.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?da().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content"}})),[S]),y=(0,o().VK)((()=>ct().default.state.highlightedSetting===ct().R.TwoStepVerification),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Fi().Z,{type:"custom",customButton:(0,se.jsx)("div",{style:{marginTop:12},children:(0,se.jsx)(vt().Z,{size:"lg",onClick:()=>{!function(e){let{rootStateMachine:t,settingsStateMachine:i}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>i.settingsConfirmIdentityForSettings()})}({rootStateMachine:c,settingsStateMachine:u})},style:x.configureButton,disabled:"disabled"===t,children:"on"===t?(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.changeTwoStepVerificationSettingButton.label",defaultMessage:"Change verification methods"}):(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.addTwoStepVerificationSettingButton.label",defaultMessage:"Add verification method"})})}),isMobile:!1,title:(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.label",defaultMessage:"2-step verification"}),caption:"on"===t?(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.settingConfigured.message",defaultMessage:"You have {numMfaSettings} verification methods turned on.",values:{numMfaSettings:i}}):(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.message",defaultMessage:"Add an additional layer of security to your account during login."}),tooltipLabel:(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.tooltip",defaultMessage:"A password is required to enable 2-step verification"}),disableTooltip:"disabled"!==t,badge:l&&(0,se.jsx)(Qc().Z,{style:x.regenerateBackupCodesBadge,content:(0,se.jsx)(m()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.regenerateBackupCodes.badge",defaultMessage:"Regenerate backup codes"})}),shouldHighlight:y}),(0,se.jsx)(rg().Z,{onReloadSettings:a,rootStateMachine:c,settingsStateMachine:u,totpStateMachine:g,smsStateMachine:p,backupCodesStateMachine:f})]})}var pg=()=>i(113419),mg=()=>i(421936),fg=()=>i(418372);const hg=L().default.createClass(!1,{name:"IsEducationStore"});const Sg=function(e){let{spaceProfileSettingsStore:t,isEducationPlan:i}=e;const a=(0,m().YB)(),r=(0,n().O7)(),l=(0,o().qz)(void 0,hg);return(0,s.useEffect)((()=>{!async function(){const{currentUserStore:e,currentUserSettingsStore:i,currentUserRootStore:s,currentSpaceStore:n}=et().default.state;if(e&&i){const s=t.getValueForUser(e,i,a);s&&t.setState({...t.state,...s})}if(s&&n){const e=await(0,Yc().Ok)({environment:r,userRootStore:s}),t=n.canAdmin()&&(e||[]).some((e=>"student"===e));l.setState(t)}await M().E(r,t)}()}),[r,a,l,t]),(0,s.useEffect)((()=>()=>{ct().default.state.highlightedSetting&&ct().default.setState({...ct().default.state,highlightedSetting:void 0})}),[]),(0,o().VK)((()=>Ht().default.state.online),[])?(0,se.jsx)(Mg,{spaceProfileSettingsStore:t,isEducationPlan:i,isEducationStore:l}):(0,se.jsx)(xg,{})};function xg(){return(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{defaultMessage:"Please go online to manage your profile.",id:"profileSettings.offline.message"})})})}function yg(e){const{emailDomainForUser:t,spaceProfileSettingsStore:i,areProfileEditsDisabled:s}=e,a=(0,o().VK)((()=>{var e;return Boolean(null===(e=i.state.emailDomainSettings)||void 0===e?void 0:e.isDomainVerified)}),[i]),r=(0,n().O7)(),l=(0,o().VK)((()=>(0,Kt().t_)(r)),[r]);return(0,se.jsxs)(le().Z,{large:!0,divider:"full",children:[a?(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:"0 0 8px"},children:[(0,se.jsx)(Qc().Z,{style:{fontWeight:h().Ue.medium,letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",margin:0},content:(0,se.jsx)(m()._H,{id:"profileSettings.myProfile.managedByline",defaultMessage:"Your account is managed by {domain}",values:{domain:t}})}),s?(0,se.jsx)(fe().Z,{render:e=>(0,se.jsx)("div",{...e,children:(0,bo().D)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,se.jsx)(m()._H,{id:"profileSettings.myProfile.managedByTooltip",defaultMessage:"Contact your organization's administrator to change your profile information."})}):null]}):null,l?(0,se.jsx)(m()._H,{id:"profileSettings.myAccount.title",defaultMessage:"Account"}):(0,se.jsx)(m()._H,{id:"profileSettings.myProfile.title",defaultMessage:"My profile"})]})}function bg(e){let{spaceProfileSettingsStore:t}=e;const i=(0,r().yK)((e=>({allDevicesHelpIcon:{height:14,width:15,color:e.icon.tertiary},headerContainer:{display:"flex",alignItems:"center",gap:4}})),[]),[s,a]=(0,o().VK)((()=>{var e;return[(null===(e=t.state.emailDomainSettings)||void 0===e?void 0:e.settings)??{},t.state.emailDomainSettings]}),[t]),l=(0,n().O7)(),d=(0,o().VK)((()=>(0,Kt().t_)(l)),[l]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"profileSettings.support.title",defaultMessage:"Support"})}),(0,se.jsx)(fg().Z,{emailDomainSettings:s}),(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)($c().Z,{userEmailDomainSettings:a}),(0,se.jsx)(ns().Z,{size:d?48:14,isHidden:!0}),(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsxs)("div",{style:i.headerContainer,children:[(0,se.jsx)(m()._H,{id:"profileSettings.devices.title",defaultMessage:"Devices"}),(0,se.jsx)(fe().Z,{renderTooltip:()=>(0,se.jsx)(m()._H,{id:"profileSettings.devices.tooltip",defaultMessage:"All devices logged in to your Notion account."}),render:e=>(0,se.jsx)("div",{...e,children:(0,ro().m)(i.allDevicesHelpIcon)}),placement:xe().Placement.Top,alignment:xe().Alignment.Start})]})}),(0,se.jsx)(Qu,{}),(0,se.jsx)(ns().Z,{size:20,isHidden:!0}),(0,se.jsx)(Vu,{})]})}function vg(e,t){b().He(t),Gc().cR({environment:t,onStart:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!0})}(e),bucket:"public",onError:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!1}),v().UW((0,se.jsx)(m()._H,{id:"profileSettings.profilePhotoSection.uploadProfilePhotoError.message",defaultMessage:"Upload failed."}))}(e),onComplete:i=>function(e,t,i){const s=e[0];t.setState({...t.state,profilePhoto:s,uploadingProfilePhoto:!1}),_().createAndCommit({userAction:"SpaceProfileSettings.handleUploadComplete",environment:i,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;t&&x().A({userStore:t,data:{profilePhoto:s},transaction:e})}})}(i,e,t),accept:"image/*"})}function jg(e){const t=(0,n().O7)(),{userName:i,emailDomainForUser:s,areProfileEditsDisabled:a,spaceProfileSettingsStore:o}=e;return a?(0,se.jsx)(fe().Z,{renderTooltip:()=>(0,se.jsx)(m()._H,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:s}}),placement:xe().Placement.Bottom,alignment:xe().Alignment.Center,render:e=>(0,se.jsx)("div",{...e,style:{opacity:.4},children:(0,se.jsx)(Ei().Z,{disabled:!0,value:i})})}):(0,se.jsx)(Ei().Z,{value:i,onChange:e=>function(e,t,i){const s=e.target.value;b().O$(i,{from:t.state.name,to:s}),t.setState({...t.state,name:s}),_().createAndCommit({userAction:"SpaceProfileSettings.handleNameChange",environment:i,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;t&&x().A({userStore:t,data:{name:s},transaction:e})}})}(e,o,t)})}function Cg(e){let{currentUserValue:t,spaceProfileSettingsStore:i,isEducationPlan:a,isEducationStore:r}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>i.state.accountSettings),[i]),c=(0,o().VK)((()=>{var e;return Boolean(null===(e=i.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[i]),u=(0,s.useCallback)((()=>{M().E(l,i)}),[l,i]),g=(0,o().Kw)(r);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:(0,se.jsx)(m()._H,{id:"profileSettings.accountSecurity.title",defaultMessage:"Account security"})}),(0,se.jsx)(ou,{userValue:t,hasEducationPlan:g,areProfileEditsDisabled:c}),(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)(mg().Z,{hasPassword:d.hasPassword,hasPasswordActions:d.canConfigurePassword,isEducationPlan:a,samlEnforced:d.isSamlEnforced,email:t.email,isError:Boolean(d.error),onReloadSettings:u,mfaStatus:d.mfaStatus}),(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)(gg,{status:d.mfaStatus,numMfaSettings:d.numMfaSettings,onReloadSettings:u,regenerateBackupCodes:d.regenerateBackupCodes}),(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)(pg().Z,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})]})}function wg(e){const{userName:t,currentUserStore:i,currentUserValue:s,spaceProfileSettingsStore:a,isEducationPlan:r,isEducationStore:l}=e,d=(0,n().O7)(),c=(0,m().YB)(),u=(0,o().VK)((()=>(0,Wo().N5)(i,c)),[i,c]),g=(0,Ql().Gd)(s.email),p=(0,o().VK)((()=>{var e;return Boolean(null===(e=a.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[a]),f=(0,o().VK)((()=>Ht().default.state.online),[]),h=(0,o().VK)((()=>(0,Kt().t_)(d)),[d]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(yg,{spaceProfileSettingsStore:a,emailDomainForUser:g,areProfileEditsDisabled:p}),(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,se.jsx)(Wo().ZP,{size:60,avatarType:u,isOffline:!f,onUploadProfilePhoto:()=>vg(a,d),onRemoveProfilePhoto:()=>function(e,t){e.setState({...e.state,profilePhoto:void 0}),_().createAndCommit({userAction:"SpaceProfileSettings.handleRemoveProfilePhoto",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;t&&x().A({userStore:t,data:{profilePhoto:null},transaction:e})}})}(a,d),disabled:p,disabledTooltipMessage:(0,se.jsx)(m()._H,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:g}})}),(0,se.jsxs)("div",{style:{marginLeft:20,width:250},children:[(0,se.jsx)(zo().Z,{children:(0,se.jsx)(m()._H,{id:"profileSettings.personalInfoSection.nameInput.label",defaultMessage:"Preferred name"})}),(0,se.jsx)(jg,{spaceProfileSettingsStore:a,userName:t,emailDomainForUser:g,areProfileEditsDisabled:p})]})]}),(0,se.jsx)(Tg,{avatarType:u,spaceProfileSettingsStore:a,areProfileEditsDisabled:p})]}),(0,se.jsx)(ns().Z,{size:48,isHidden:!0}),(0,se.jsx)(Cg,{spaceProfileSettingsStore:a,isEducationPlan:r,isEducationStore:l,currentUserValue:s}),(0,se.jsx)(ns().Z,{size:h?48:12,isHidden:!0}),(0,se.jsx)(bg,{spaceProfileSettingsStore:a})]})}function Mg(e){let{spaceProfileSettingsStore:t,isEducationPlan:i,isEducationStore:s}=e;const n=(0,o().VK)((()=>et().default.state.currentUserStore),[]),a=(0,o().VK)((()=>n?n.getValue():void 0),[n]),r=(0,o().VK)((()=>t.state.name),[t]);return n&&a?(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(wg,{spaceProfileSettingsStore:t,isEducationPlan:i,isEducationStore:s,currentUserStore:n,currentUserValue:a,userName:r})}):null}function Tg(e){const{avatarType:t,spaceProfileSettingsStore:i,areProfileEditsDisabled:s}=e,a=(0,r().Fg)(),o=(0,n().O7)(),l=(0,qn().E)("enable_add_notion_face_in_setting");return"photo"===t.type||s||l?"photo"!==t.type&&!s&&l?(0,se.jsx)("div",{style:{color:a.mediumIconColor,fontSize:14,marginTop:8},children:(0,se.jsx)(m()._H,{id:"editableUserAvatar.profilePhoto.addPhotoWithNotionFace",defaultMessage:"<addphoto>Add photo</addphoto> or <createface>Create your portrait</createface>",values:{addphoto:e=>(0,se.jsx)(us().Z,{color:a.blueColor,disableUnderline:!0,disableHover:!0,onClick:()=>{vg(i,o)},children:e}),createface:e=>(0,se.jsx)(us().Z,{color:a.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):!s&&l?(0,se.jsx)("div",{style:{color:a.mediumIconColor,fontSize:14,marginTop:8},children:(0,se.jsx)(m()._H,{id:"editableUserAvatar.profilePhoto.addNotionFace",defaultMessage:"<createface>Create your portrait</createface>",values:{createface:e=>(0,se.jsx)(us().Z,{color:a.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):null:(0,se.jsx)("div",{style:{color:a.mediumIconColor,fontSize:14,marginTop:8},children:(0,se.jsx)(m()._H,{id:"editableUserAvatar.profilePhoto.addPhoto",defaultMessage:"Add photo"})})}var _g=()=>i(912732),kg=()=>i(467806),Ig=()=>i(363832),Ag=()=>i(550649),Dg=()=>i(819792),Pg=()=>i(512220),Rg=()=>i(387454),Bg=()=>i(122479),Zg=()=>i(14328),Ug=()=>i(202937);function Hg(e){let{spaceStore:t,spacePermissionsSettingsStore:i}=e;const{canUseGroups:s,canEditGroups:n,isSpaceStoreDefined:a}=function(e){let{spaceStore:t}=e;const i=(0,Pg().VJ)(),{canEditMembership:s,isSpaceStoreDefined:n}=(0,o().VK)((()=>({canEditMembership:t.canEditMembership(),isSpaceStoreDefined:t.isDefined()})),[t]),a=(0,o().VK)((()=>s&&i),[s,i]);return{canUseGroups:i,canEditMembership:s,canEditGroups:a,isSpaceStoreDefined:n}}({spaceStore:t}),r=(0,o().VK)((()=>0!==(0,Ti().az)()),[]),l=(0,o().VK)((()=>0!==(0,Bg().eL)()),[]);return a?(0,se.jsxs)("div",{children:[s?!l&&(0,se.jsx)(he().Z,{isMultiline:!0,style:{marginTop:17,marginBottom:17},children:r?(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,se.jsx)(Zg().Z,{subscriptionTier:"plus",from:"permission_groups",icon:Rg().x,title:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,se.jsx)(Ug().Z,{spaceStore:t,permissionsSettingsStore:i,canEdit:n,containerMarginTop:s?0:void 0})]}):null}var Og=()=>i(779522),Eg=()=>i(890085),Lg=()=>i(677181),qg=()=>i(159253);class Vg extends L().default{getInitialState(){return{isModalOpen:!1,guests:[],handleClickDecline:()=>{}}}}const Ng=new Vg;function Fg(e){let{guest:t,spaceStore:i,shouldDisableInteraction:a}=e;const{environment:l,styles:d,isSubscribed:c,handleConvertToMemberClick:u,handleRemoveClick:g}=function(e){let{guest:t,spaceStore:i,shouldDisableInteraction:a}=e;const l=(0,r().yK)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end",opacity:a?.5:1},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{padding:"0px 6px 0px 8px",width:257},removeMenuDivider:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},removeButton:{width:257,padding:"0px 6px 0px 8px",color:Eg().Lr[e.mode].red},upgradeIcon:{width:17,height:17}})),[a]),d=(0,o().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Yc().YK(e))}),[]),c=(0,n().O7)(),u=(0,s.useCallback)((()=>{const e=te().U6.createChildStore(i,{table:B().KJ,id:t.userId}),s=d?"read_and_write":"editor";Lg().s({environment:c,guestUserStore:e,role:s,store:i,isConvertToAdmin:!d,origin:"guest_pages_popup"})}),[d,i,c,t.userId]),g=(0,s.useCallback)((()=>{Ng.setState({...Ng.state,isModalOpen:!0,guests:[t.userId],handleClickDecline:()=>{_g().b4(c,{from:"guest",button_name:"confirm_in_dialog",count:1});const e=te().U6.createChildStore(i,{table:B().KJ,id:t.userId});Lg().w({environment:c,guestUserStore:e,store:i})}})}),[i,c,t]);return{environment:c,styles:l,isSubscribed:d,handleConvertToMemberClick:u,handleRemoveClick:g}}({guest:t,spaceStore:i,shouldDisableInteraction:a});return(0,se.jsx)("div",{style:d.container,children:(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,renderOrigin:e=>(0,se.jsx)(Bt().D,{style:d.button,...e,children:(0,se.jsx)(se.Fragment,{children:(0,qg().O)(d.buttonIcon)})}),onClick:()=>{_g().b4(l,{from:"guest",button_name:"actions"})},disabled:a,render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:[{key:"upgrade",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:[{key:"upgrade",render:e=>(0,se.jsx)(xa().Z,{...e,buttonStyle:d.upgradeButton,icon:(0,Dl().l)(d.upgradeIcon),title:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.upgradeToAdmin",defaultMessage:"Upgrade to {isSubscribed, select, true {member} other {admin}}",values:{isSubscribed:c}})}),action:()=>{u(),_g().b4(l,{from:"guest",button_name:"upgrade"})}}]},{key:"remove",render:e=>(0,se.jsx)(Ca().Z,{...e,style:d.removeMenuDivider}),items:[{key:"remove",render:e=>(0,se.jsx)(xa().Z,{...e,buttonStyle:d.removeButton,icon:(0,lo().V)(d.upgradeIcon),title:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.remove",defaultMessage:"Remove from workspace"})}),action:()=>{g(),_g().b4(l,{from:"guest",button_name:"remove"})}}]}]})})})})}const Kg=(0,mt().IU)("peopleFillXmark",{viewBox:"0 0 20 20",svg:(0,se.jsx)("path",{d:"M12.2061 6.75684C12.0374 6.75684 11.8916 6.69531 11.7686 6.57227C11.6501 6.44922 11.5908 6.30339 11.5908 6.13477C11.5908 5.96615 11.6523 5.82259 11.7754 5.7041L13.5801 3.89258L11.7754 2.08105C11.6523 1.96257 11.5908 1.81901 11.5908 1.65039C11.5908 1.47721 11.6501 1.33366 11.7686 1.21973C11.8916 1.10124 12.0374 1.04199 12.2061 1.04199C12.3838 1.04199 12.5319 1.10352 12.6504 1.22656L14.4551 3.02441L16.2803 1.21973C16.4033 1.09212 16.5469 1.02832 16.7109 1.02832C16.8841 1.02832 17.0299 1.08984 17.1484 1.21289C17.2669 1.33138 17.3262 1.47493 17.3262 1.64355C17.3262 1.80762 17.2646 1.95117 17.1416 2.07422L15.3369 3.89258L17.1348 5.69727C17.2624 5.82031 17.3262 5.96615 17.3262 6.13477C17.3262 6.30339 17.2646 6.44922 17.1416 6.57227C17.0231 6.69531 16.8796 6.75684 16.7109 6.75684C16.5332 6.75684 16.3828 6.69303 16.2598 6.56543L14.4551 4.76758L12.6572 6.56543C12.5387 6.69303 12.3883 6.75684 12.2061 6.75684ZM1.89746 13.2441C1.51465 13.2441 1.21387 13.1576 0.995117 12.9844C0.776367 12.8112 0.666992 12.5742 0.666992 12.2734C0.666992 11.8314 0.799154 11.3688 1.06348 10.8857C1.33236 10.4027 1.71745 9.94922 2.21875 9.52539C2.72461 9.10156 3.33301 8.75749 4.04395 8.49316C4.75488 8.22884 5.55241 8.09668 6.43652 8.09668C7.3252 8.09668 8.125 8.22884 8.83594 8.49316C9.54688 8.75749 10.153 9.10156 10.6543 9.52539C11.1602 9.94922 11.5475 10.4027 11.8164 10.8857C12.0853 11.3688 12.2197 11.8314 12.2197 12.2734C12.2197 12.5742 12.1104 12.8112 11.8916 12.9844C11.6729 13.1576 11.3721 13.2441 10.9893 13.2441H1.89746ZM6.44336 6.87988C5.94661 6.87988 5.48861 6.74544 5.06934 6.47656C4.65462 6.20768 4.31966 5.84538 4.06445 5.38965C3.8138 4.93392 3.68848 4.4235 3.68848 3.8584C3.68848 3.30241 3.8138 2.80111 4.06445 2.35449C4.31966 1.90332 4.6569 1.54557 5.07617 1.28125C5.49544 1.01693 5.95117 0.884766 6.44336 0.884766C6.9401 0.884766 7.39811 1.01465 7.81738 1.27441C8.23665 1.53418 8.57161 1.88965 8.82227 2.34082C9.07747 2.78743 9.20508 3.28874 9.20508 3.84473C9.20508 4.41439 9.07747 4.92936 8.82227 5.38965C8.57161 5.84538 8.23665 6.20768 7.81738 6.47656C7.39811 6.74544 6.9401 6.87988 6.44336 6.87988Z"})});function Wg(e){let{isModalOpen:t,handleDismiss:i,handleConfirm:s,title:n,description:a,ctaText:o}=e;const{styles:l}=function(){const e=(0,r().yK)((e=>({modal:{width:300,overflow:"hidden",borderRadius:5},container:{display:"flex",padding:"20px 20px 12px 20px",flexDirection:"column",width:299,justifyContent:"center",alignItems:"flex-start",gap:20},iconAndTitle:{display:"flex",flexDirection:"column",alignItems:"center",gap:9,width:"100%"},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:36,height:36},icon:{color:e.icon.secondary,fontSize:24,fontWeight:510},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:590,width:"100%",wordBreak:"break-word"},description:{color:e.text.secondary,textAlign:"center"},footer:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",width:"100%"},declineButton:{height:32,padding:"0 12px",borderRadius:6,width:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",background:Eg().Lr[e.mode].red},declineButtonHovered:{background:e.tint.uiRedPressed},declineText:{fontWeight:590,color:e.text.contrastPrimary},cancelButton:{display:"flex",height:24,padding:"0px 6px",justifyContent:"center",alignItems:"center",gap:4,textAlign:"center"}})),[]);return{styles:e}}();return(0,We().Z)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0}),(0,se.jsx)(rs().Z,{open:t,innerStyle:l.modal,showCloseIcon:!0,onDismiss:i,render:()=>(0,se.jsx)(za().Z,{capture:!0,allowEsc:!0,render:()=>(0,se.jsxs)("div",{style:l.container,children:[(0,se.jsxs)("div",{style:l.iconAndTitle,children:[(0,se.jsx)("div",{style:l.iconContainer,children:(0,se.jsx)("div",{style:l.icon,children:Kg({width:24,height:24})})}),(0,se.jsx)("div",{style:l.title,children:n})]}),(0,se.jsx)("div",{style:l.description,children:a}),(0,se.jsxs)("div",{style:l.footer,children:[(0,se.jsx)(Bt().D,{style:l.declineButton,onClick:()=>{s(),i()},hoveredStyle:l.declineButtonHovered,children:(0,se.jsx)("div",{style:l.declineText,children:o})}),(0,se.jsx)(Bt().D,{style:l.cancelButton,onClick:i,children:(0,se.jsx)("div",{children:(0,se.jsx)(m()._H,{id:"BulkDeclineConfirmationDialog.cancel",defaultMessage:"Cancel"})})})]})]})})})}function zg(){const{isModalOpen:e,handleClickDecline:t,handleDismiss:i,guests:a,firstGuestName:r}=function(){const{isModalOpen:e,guests:t,handleClickDecline:i}=(0,o().VK)((()=>{const{isModalOpen:e,guests:t,handleClickDecline:i}=Ng.state;return{isModalOpen:e,guests:t,handleClickDecline:i}}),[]),a=(0,m().YB)(),r=(0,o().VK)((()=>{const{currentSpaceStore:e}=et().default.state;if(0===t.length||!e)return;return te().U6.createChildStore(e,{table:B().KJ,id:t[0]}).getDisplayName(a)}),[t,a]),l=(0,n().O7)(),d=(0,s.useCallback)((()=>{Ng.reset(),_g().b4(l,{from:"guest",button_name:"confirm_in_dialog",count:t.length})}),[l,t]);return{isModalOpen:e,guests:t,firstGuestName:r,handleClickDecline:i,handleDismiss:d}}();return 0===a.length?null:(0,se.jsx)(Wg,{isModalOpen:e,handleDismiss:i,handleConfirm:t,title:(0,se.jsx)(m()._H,{id:"GuestBulkRemoveConfirmationDialog.title",defaultMessage:"Remove {numberOfGuests, plural, one {{firstGuestName}} other {{numberOfGuests} guests}} from the workspace?",values:{numberOfGuests:a.length,firstGuestName:r}}),description:(0,se.jsx)(m()._H,{id:"GuestBulkRemoveConfirmationDialog.description",defaultMessage:"They will lose access to all shared pages. To add them as a guest in the future, a request must be submitted, or an admin must invite them."}),ctaText:(0,se.jsx)(m()._H,{id:"GuestBulkRemoveConfirmationDialog.remove",defaultMessage:"Remove"})})}var Gg=()=>i(528514),Yg=()=>i(497065),$g=()=>i(231219);function Qg(e){let{guestUserId:t,pageIds:i}=e;const{menuListItems:s,styles:a}=function(e){let{guestUserId:t,pageIds:i}=e;const s=(0,r().yK)((()=>({container:{width:256},chevron:{marginLeft:8,width:16,height:16}})),[]),a=(0,n().O7)(),l=(0,m().YB)(),d=(0,o().VK)((()=>i.map((e=>{var i;const s=new(te().G)(a,{table:Tc().iU,id:e}),n=null===(i=s.getPermissionItems().find((e=>"user_permission"===e.type&&e.user_id===t)))||void 0===i?void 0:i.role;return{key:e,render:e=>(0,se.jsx)($g().Z,{...e,store:s,placeholder:(0,se.jsx)(m()._H,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"}),caption:n?l.formatMessage((0,Gg().kD)(n,"block")):void 0}),action:()=>{const e=(0,pc().ZP)({store:s,fullyQualified:!1,pageVisitSource:gc().tY.LinkInPage});Yg().c4({environment:a,url:e,openInNew:"tab"})}}}))),[i,t,a,l]);return{menuListItems:d,styles:s}}({guestUserId:t,pageIds:i});return(0,se.jsx)("div",{style:a.container,children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:[{key:"pages",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:s}]})})}function Jg(e){let{from:t,guestUserId:i,pageIds:s,shouldDisableInteraction:a}=e;const{styles:o}=function(e){let{shouldDisableInteraction:t}=e;const i=(0,r().yK)((e=>({button:{opacity:t?.5:1,color:e.text.secondary},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[t]);return{styles:i}}({shouldDisableInteraction:a}),l=(0,n().O7)(),d=s.length;return 0===d?(0,se.jsx)(Bt().D,{disabled:!0,style:o.button,children:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.GuestPagesButton.noPages",defaultMessage:"No pages"})}):(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,onClick:()=>{_g().b4(l,{from:t,button_name:"open_pages"})},renderOrigin:e=>(0,se.jsxs)(Bt().D,{...e,style:o.button,children:[(0,se.jsx)(m()._H,{id:"GuestPagesButton.button",defaultMessage:"{numOfPages, plural, one {{numOfPages} page} other {{numOfPages} pages}}",values:{numOfPages:d}}),(0,Id().i)(o.chevron)]}),disabled:a,render:()=>(0,se.jsx)(Qg,{pageIds:s,guestUserId:i})})}function Xg(e){let{guest:t,shouldDisableInteraction:i}=e;return(0,se.jsx)(Jg,{pageIds:t.guestPageIds,guestUserId:t.userId,shouldDisableInteraction:i,from:"guest"})}const ep=10,tp=10,ip=5;var sp=()=>i(708071),np=()=>i(983653);function ap(e){let{userId:t,spaceStore:n,restorationStatus:a,isInternalGuest:l,isForSuggestionsTable:d}=e;const c=(0,m().YB)().formatMessage({id:"peopleSettings.userCell.guest",defaultMessage:"Guest"}),{name:u,email:g,userStore:p,styles:f}=function(e){let{userId:t,spaceStore:i,isForSuggestionsTable:s}=e;const n=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",fontSize:h().JB.UIRegular.desktop,width:"100%",justifyContent:"space-between"},titleContainer:{maxWidth:s?210:163},userAvatarWrapper:{position:"relative"},userAvatarIcon:{position:"absolute",left:17,top:18},userName:{height:17,alignSelf:"stretch",fontSize:h().JB.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",...h().Yu},userEmail:{height:17,alignSelf:"stretch",fontSize:h().JB.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,...h().Yu},nameContainer:{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:4}})),[s]),a=(0,m().YB)(),l=te().U6.createChildStore(i,{table:B().KJ,id:t}),{name:d,email:c}=(0,o().VK)((()=>({name:l.getDisplayName(a),email:l.getEmail()})),[l,a]);return{name:d,email:c,styles:n,userStore:l}}({userId:t,spaceStore:n,isForSuggestionsTable:d}),[S,x]=(0,s.useState)(!1);return(0,se.jsxs)("div",{style:f.container,children:[(0,se.jsxs)("div",{style:f.nameContainer,children:[(0,se.jsxs)("div",{style:f.userAvatarWrapper,children:[(0,se.jsx)(en().Z,{userStore:p,size:28}),l&&(0,se.jsx)(fe().Z,{style:{width:250},textWrap:!0,placement:xe().Placement.Right,alignment:xe().Alignment.Start,render:e=>(0,se.jsx)("div",{...e,style:f.userAvatarIcon,children:(0,se.jsx)(yt().y,{iconGroup:np().t,colorName:"secondary",variantName:"mini"})}),renderTooltip:()=>(0,se.jsxs)("div",{children:[(0,se.jsx)(bt().q,{styleName:"Body-12px/Medium",colorName:"contrastPrimary",children:(0,se.jsx)(m()._H,{id:"userCell.internalGuest.tooltip.title",defaultMessage:"Using an email domain associated with your workspace"})}),(0,se.jsx)(bt().q,{styleName:"Body-12px/Medium",colorName:"contrastSecondary",children:(0,se.jsx)(m()._H,{id:"userCell.internalGuest.tooltip.description",defaultMessage:"You'll see this icon for users who have a workspace owner email domain, verified domain, or allowed email domain"})})]})})]}),(0,se.jsxs)("div",{style:f.titleContainer,children:[(0,se.jsx)("div",{style:f.userName,title:d?g:u,children:d?g:u}),(0,se.jsx)("div",{style:f.userEmail,title:d?c:g,children:d?c:g}),a&&(0,se.jsx)(i(490040).Z,{spaceStore:n,restorationStatus:a,didAttemptRecovery:S})]})]}),!S&&"canBeRestored"===(null==a?void 0:a.status)&&(0,se.jsx)(i(582060).Z,{spaceId:n.id,userStore:p,onSubmit:()=>x(!0)})]})}function op(e){let{guests:t,spaceStore:i,domainFilterValues:a,internalDomains:l}=e;const{environment:d,tableStyles:c,styles:u,sortState:g,setSortState:p,selectedRowIds:f,setSelectedRowIds:h,rows:S,searchQuery:x,onClickApprove:y,onClickDecline:b,isApproveButtonLoading:v,canEditMembership:j,columnRenderInfo:C,isSubscribed:w,shouldHideActions:M,shouldShowRequest:T,canAdmin:_,guestsCount:k,shouldShowLoadMore:I,onLoadMore:A}=function(e){let{guests:t,spaceStore:i,domainFilterValues:a,internalDomains:l}=e;const d=(0,ri().tA)({spaceStore:i}),c=(0,Pg().IH)({spaceStore:i}),u=(0,n().O7)(),g=(0,r().yK)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:d&&c?"space-between":"flex-end"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:Eg().Lr[e.mode].red},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30}})),[d,c]),p=(0,Pg().eA)({spaceStore:i}),f=(0,o().VK)((()=>p?[rp,lp,dp]:[rp]),[p]),h=(0,r().yK)((e=>({...(0,pe().bE)({columnRenderInfo:f,theme:e,containerMarginTop:0})})),[f]),S=(0,o().VK)((()=>f[0]),[f]),[x,y]=(0,s.useState)({column:S,sortAscending:!0}),[b,v]=(0,s.useState)([]),j=(0,m().YB)(),C=(0,o().VK)((()=>sp().default.state.searchQuery),[]),w=(0,o().VK)((()=>t.map((e=>{const t=te().U6.createChildStore(i,{table:B().KJ,id:e.userId}),s=t.getEmail(),n=null==s?void 0:s.split("@")[1],a=l.some((e=>e.url===n));return{spaceStore:i,user:e,email:s,userName:t.getDisplayName(j),id:e.userId,shouldDisableInteraction:b.includes(e.userId),isClickable:!1,isInternalGuest:a}})).filter((e=>{var t;if(C){var i;if(!((null===(i=e.email)||void 0===i?void 0:i.includes(C))||e.userName.includes(C)))return!1}if(!a||0===a.length)return!0;const s=null===(t=e.email)||void 0===t?void 0:t.split("@")[1];return null==a?void 0:a.some((e=>"other"===e?!(null!=l&&l.some((e=>e.url===s))):s===e))}))),[i,t,j,C,b,l,a]),M=(0,o().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Yc().YK(e))}),[]),T=(0,s.useCallback)((()=>{_g().b4(u,{from:"guest",button_name:"bulk_upgrade",count:b.length}),b.forEach((e=>{const t=te().U6.createChildStore(i,{table:B().KJ,id:e}),s=M?"read_and_write":"editor";Lg().s({environment:u,guestUserStore:t,role:s,store:i,isConvertToAdmin:!M,origin:"guest_actions"}),v([])}))}),[b,u,M,i]),_=(0,s.useCallback)((()=>{_g().b4(u,{from:"guest",button_name:"bulk_remove",count:b.length}),Ng.setState({...Ng.state,isModalOpen:!0,guests:b,handleClickDecline:()=>{_g().b4(u,{from:"guest",button_name:"confirm_in_dialog",count:b.length}),b.forEach((e=>{const t=te().U6.createChildStore(i,{table:B().KJ,id:e});Lg().w({environment:u,guestUserStore:t,store:i})})),v([])}})}),[b,u,i]),k=!w.some((e=>b.includes(e.id))),[I,A]=(0,s.useState)(tp),D=(0,s.useCallback)((()=>{A(I+tp)}),[I]),P=I<w.length,R=w.slice(0,I);return{environment:u,tableStyles:h,styles:g,sortState:x,setSortState:y,selectedRowIds:b,setSelectedRowIds:v,rows:R,searchQuery:C,onClickApprove:T,onClickDecline:_,isApproveButtonLoading:!1,canEditMembership:p,columnRenderInfo:f,isSubscribed:M,shouldHideActions:k,shouldShowRequest:d,canAdmin:c,guestsCount:w.length,shouldShowLoadMore:P,onLoadMore:D}}({guests:t,spaceStore:i,domainFilterValues:a,internalDomains:l});return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:u.headerContainer,children:[T&&_&&(0,se.jsxs)("div",{style:u.titleContainer,children:[(0,se.jsx)("span",{children:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.activeguests.title",defaultMessage:"Active"})}),(0,se.jsx)("span",{style:u.titleNumber,children:k})]}),f.length>0&&!M&&(0,se.jsxs)("div",{style:u.actionsContainer,children:[(0,se.jsx)(Bt().D,{style:u.actionLeftButton,onClick:y,isLoading:v,children:(0,se.jsxs)("div",{style:u.buttonContainerApprove,children:[(0,se.jsx)("div",{style:u.buttonIcon,children:(0,Dl().l)({width:20,height:16})}),(0,se.jsx)("div",{style:u.buttonText,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:f.length,isSubscribed:w}})})]})}),(0,se.jsx)("div",{style:u.buttonDivider}),(0,se.jsx)(Bt().D,{style:u.actionRightButton,onClick:b,children:(0,se.jsxs)("div",{style:u.buttonContainerDecline,children:[(0,se.jsx)("div",{style:{...u.buttonIcon,paddingTop:3},children:(0,lo().V)({width:20,height:16})}),(0,se.jsx)("div",{style:u.buttonText,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.guestsTable.bulkDecline",defaultMessage:"Remove from workspace"})})]})})]})]}),(0,se.jsxs)("div",{style:{marginTop:T&&_?4:-1},children:[(0,se.jsx)(pe().Dp,{allowHorizontalScroll:j,setStickyHeaderRow:!0,columnRenderInfo:C,rows:cp(S,g),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:g,onSortStateChanged:p,loadMoreMethod:I?{type:"button",onLoadMore:A}:void 0,renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:u.emptyMessage,children:x?(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:c,multiselect:j?{header:{isDisabled:0===S.length,isSelected:f.length>0&&f.length===S.length,onClick:()=>{f.length===S.length?(h([]),_g().pZ(d,{from:"guests",action:"deselect_all",row_count:f.length})):(h(S.map((e=>e.id))),_g().pZ(d,{from:"guests",action:"select_all",row_count:S.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>f.includes(e.id),onClick:e=>{h((t=>t.includes(e.id)?(_g().pZ(d,{from:"guests",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(_g().pZ(d,{from:"guests",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0}),(0,se.jsx)(zg,{})]})]})}const rp={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(ap,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest}),widthData:{width:210},sortable:!0},lp={id:"access",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,se.jsx)(Xg,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:180},sortable:!1},dp={id:"actions",headerTitle:(0,se.jsx)(se.Fragment,{}),renderCell:e=>(0,se.jsx)(Fg,{guest:e.user,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:300},sortable:!1};function cp(e,t){let{sortAscending:i}=t;const s=f().MR(e,(e=>e.email));return i||s.reverse(),s}var up=()=>i(754918),gp=()=>i(775404);const pp=(0,mt().IU)("checkMarkShield",{viewBox:"0 0 10 11",svg:(0,se.jsx)("path",{d:"M5.08789 10.4893C5.03906 10.4893 4.9821 10.4795 4.91699 10.46C4.85514 10.4437 4.79167 10.4193 4.72656 10.3867C4.02669 10.0189 3.43262 9.68522 2.94434 9.38574C2.45931 9.08952 2.06868 8.79655 1.77246 8.50684C1.47624 8.21712 1.25977 7.90462 1.12305 7.56934C0.989583 7.23405 0.922852 6.84831 0.922852 6.41211V2.8623C0.922852 2.52051 0.986328 2.26335 1.11328 2.09082C1.24023 1.91829 1.45345 1.77018 1.75293 1.64648C1.84733 1.60742 1.98405 1.55534 2.16309 1.49023C2.34212 1.42188 2.54069 1.35026 2.75879 1.27539C2.98014 1.19727 3.19987 1.12077 3.41797 1.0459C3.63932 0.971029 3.83789 0.904297 4.01367 0.845703C4.19271 0.787109 4.32617 0.743164 4.41406 0.713867C4.52148 0.681315 4.63379 0.655273 4.75098 0.635742C4.87142 0.616211 4.98372 0.606445 5.08789 0.606445C5.19206 0.606445 5.30436 0.616211 5.4248 0.635742C5.5485 0.655273 5.66243 0.681315 5.7666 0.713867C5.85449 0.743164 5.98633 0.787109 6.16211 0.845703C6.34115 0.904297 6.53971 0.971029 6.75781 1.0459C6.97591 1.12077 7.19564 1.19727 7.41699 1.27539C7.63835 1.35026 7.83854 1.42025 8.01758 1.48535C8.19661 1.55046 8.33333 1.60417 8.42773 1.64648C8.72721 1.77018 8.9388 1.91829 9.0625 2.09082C9.18945 2.26335 9.25293 2.52051 9.25293 2.8623V6.41211C9.25293 6.84831 9.1862 7.23568 9.05273 7.57422C8.92253 7.91276 8.70931 8.23014 8.41309 8.52637C8.12012 8.81934 7.73112 9.11393 7.24609 9.41016C6.76107 9.70638 6.16374 10.0319 5.4541 10.3867C5.389 10.4193 5.32389 10.4437 5.25879 10.46C5.19694 10.4795 5.13997 10.4893 5.08789 10.4893ZM4.55078 7.73047C4.6582 7.73047 4.75586 7.70605 4.84375 7.65723C4.9349 7.60514 5.01302 7.5319 5.07812 7.4375L7.34863 3.9707C7.3877 3.90885 7.41862 3.84538 7.44141 3.78027C7.46745 3.71517 7.48047 3.65169 7.48047 3.58984C7.48047 3.4401 7.4235 3.31641 7.30957 3.21875C7.19889 3.12109 7.07031 3.07227 6.92383 3.07227C6.73177 3.07227 6.57064 3.17643 6.44043 3.38477L4.54102 6.40723L3.68652 5.3623C3.62142 5.28092 3.55306 5.22233 3.48145 5.18652C3.41309 5.15072 3.33333 5.13281 3.24219 5.13281C3.0957 5.13281 2.96875 5.18652 2.86133 5.29395C2.75391 5.39811 2.7002 5.52507 2.7002 5.6748C2.7002 5.74642 2.71322 5.81478 2.73926 5.87988C2.7653 5.94499 2.80599 6.01172 2.86133 6.08008L4.00391 7.44727C4.08203 7.54167 4.16504 7.61328 4.25293 7.66211C4.34082 7.70768 4.4401 7.73047 4.55078 7.73047Z"})}),mp=(0,mt().IU)("globe4",{viewBox:"0 0 12 12",svg:(0,se.jsx)("path",{d:"M5.99512 10.5156C5.64355 10.5156 5.31315 10.4001 5.00391 10.1689C4.69792 9.94108 4.42773 9.62207 4.19336 9.21191C3.96224 8.7985 3.77995 8.31673 3.64648 7.7666C3.51302 7.21647 3.44629 6.6224 3.44629 5.98438C3.44629 5.3431 3.51302 4.7474 3.64648 4.19727C3.77995 3.64388 3.96224 3.16211 4.19336 2.75195C4.42448 2.33854 4.69466 2.01628 5.00391 1.78516C5.31315 1.55404 5.64355 1.43848 5.99512 1.43848C6.34993 1.43848 6.68197 1.55404 6.99121 1.78516C7.30046 2.01628 7.57064 2.33854 7.80176 2.75195C8.03613 3.16211 8.21842 3.64388 8.34863 4.19727C8.47884 4.7474 8.54395 5.3431 8.54395 5.98438C8.54395 6.6224 8.47721 7.21647 8.34375 7.7666C8.21354 8.31673 8.03125 8.7985 7.79688 9.21191C7.56576 9.62207 7.29557 9.94108 6.98633 10.1689C6.68034 10.4001 6.34993 10.5156 5.99512 10.5156ZM5.99512 2.15137C5.76725 2.15137 5.5459 2.25553 5.33105 2.46387C5.11947 2.6722 4.92904 2.95703 4.75977 3.31836C4.59375 3.67643 4.46191 4.08496 4.36426 4.54395C4.2666 5.00293 4.21777 5.48307 4.21777 5.98438C4.21777 6.48242 4.2666 6.95931 4.36426 7.41504C4.46191 7.87077 4.59375 8.27767 4.75977 8.63574C4.92904 8.99382 5.11947 9.27702 5.33105 9.48535C5.5459 9.69368 5.76725 9.79785 5.99512 9.79785C6.22624 9.79785 6.44759 9.69368 6.65918 9.48535C6.87402 9.27702 7.06445 8.99382 7.23047 8.63574C7.39974 8.27767 7.5332 7.87077 7.63086 7.41504C7.72852 6.95931 7.77734 6.48242 7.77734 5.98438C7.77734 5.48307 7.72852 5.00293 7.63086 4.54395C7.5332 4.08496 7.39974 3.67643 7.23047 3.31836C7.06445 2.95703 6.87402 2.6722 6.65918 2.46387C6.44759 2.25553 6.22624 2.15137 5.99512 2.15137ZM5.61914 1.50684H6.37598V10.4229H5.61914V1.50684ZM5.99512 7.47363C6.51921 7.47363 7.01562 7.51432 7.48438 7.5957C7.95312 7.67708 8.37142 7.79427 8.73926 7.94727C9.1071 8.10026 9.40007 8.2793 9.61816 8.48438L9.04199 8.96289C8.84017 8.8099 8.58464 8.67806 8.27539 8.56738C7.9694 8.45671 7.62272 8.3737 7.23535 8.31836C6.84798 8.25977 6.43457 8.23047 5.99512 8.23047C5.55892 8.23047 5.14714 8.25977 4.75977 8.31836C4.3724 8.3737 4.02409 8.45671 3.71484 8.56738C3.40885 8.67806 3.15332 8.8099 2.94824 8.96289L2.37207 8.48438C2.59342 8.2793 2.88802 8.10026 3.25586 7.94727C3.6237 7.79427 4.04199 7.67708 4.51074 7.5957C4.97949 7.51432 5.47428 7.47363 5.99512 7.47363ZM10.4189 5.59375V6.35059H1.57617V5.59375H10.4189ZM5.99512 4.5C5.47428 4.5 4.97949 4.45931 4.51074 4.37793C4.04199 4.29329 3.6237 4.17611 3.25586 4.02637C2.88802 3.87337 2.59342 3.69434 2.37207 3.48926L2.94824 3.00586C3.15332 3.16211 3.41048 3.29557 3.71973 3.40625C4.02897 3.51367 4.37728 3.59668 4.76465 3.65527C5.15202 3.71387 5.56217 3.74316 5.99512 3.74316C6.43457 3.74316 6.84798 3.71387 7.23535 3.65527C7.62272 3.59668 7.9694 3.51367 8.27539 3.40625C8.58464 3.29557 8.84017 3.16211 9.04199 3.00586L9.61816 3.48926C9.40007 3.69434 9.1071 3.87337 8.73926 4.02637C8.37142 4.17611 7.95312 4.29329 7.48438 4.37793C7.01562 4.45931 6.51921 4.5 5.99512 4.5ZM5.99512 11.1309C5.28874 11.1309 4.62467 10.9958 4.00293 10.7256C3.38118 10.4587 2.83268 10.0876 2.35742 9.6123C1.88216 9.1403 1.50944 8.59342 1.23926 7.97168C0.972331 7.34993 0.838867 6.68424 0.838867 5.97461C0.838867 5.26823 0.972331 4.60417 1.23926 3.98242C1.50944 3.36068 1.88053 2.81217 2.35254 2.33691C2.8278 1.86165 3.3763 1.49056 3.99805 1.22363C4.62305 0.953451 5.28874 0.818359 5.99512 0.818359C6.7015 0.818359 7.36556 0.953451 7.9873 1.22363C8.6123 1.49056 9.16081 1.86165 9.63281 2.33691C10.1081 2.81217 10.4808 3.36068 10.751 3.98242C11.0212 4.60417 11.1562 5.26823 11.1562 5.97461C11.1562 6.68424 11.0212 7.34993 10.751 7.97168C10.4808 8.59342 10.1081 9.1403 9.63281 9.6123C9.16081 10.0876 8.61393 10.4587 7.99219 10.7256C7.37044 10.9958 6.70475 11.1309 5.99512 11.1309ZM5.99512 10.1396C6.56803 10.1396 7.10514 10.0306 7.60645 9.8125C8.10775 9.5944 8.55046 9.29492 8.93457 8.91406C9.31868 8.52995 9.61816 8.08724 9.83301 7.58594C10.0511 7.08138 10.1602 6.54427 10.1602 5.97461C10.1602 5.40495 10.0511 4.86947 9.83301 4.36816C9.61816 3.86361 9.31868 3.4209 8.93457 3.04004C8.55046 2.65592 8.10612 2.35482 7.60156 2.13672C7.10026 1.91862 6.56478 1.80957 5.99512 1.80957C5.42546 1.80957 4.88835 1.91862 4.38379 2.13672C3.88249 2.35482 3.43978 2.65592 3.05566 3.04004C2.6748 3.4209 2.37533 3.86361 2.15723 4.36816C1.94238 4.86947 1.83496 5.40495 1.83496 5.97461C1.83496 6.54427 1.94238 7.08138 2.15723 7.58594C2.37533 8.08724 2.6748 8.52995 3.05566 8.91406C3.43978 9.29492 3.88249 9.5944 4.38379 9.8125C4.88835 10.0306 5.42546 10.1396 5.99512 10.1396Z"})});var fp=()=>i(24746),hp=()=>i(167393),Sp=()=>i(489434);const xp=(0,m().vU)({infoTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.title",defaultMessage:"Find teammates more easily by filtering to your workspace's email domains"},infoDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.description",defaultMessage:"Upgrade these guests to members for better collaboration and reduced page-by-page permissions."},emailDomainTooltip:{defaultMessage:"Your workspaceâ€™s email domains include allowed email domains, verified domains, and workspace owner email domains.",id:"spacePermissionsSettings.guestsTab.internalGuestBanner.tooltip"},overLimitTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.title",defaultMessage:"Your workspace is over the {limit}-guest limit"},upsellDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.upselldescription",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <upgradelink>upgrade your plan</upgradelink> or <saleslink>reach out to sales</saleslink>."},contactSalesDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.contactSales.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <saleslink>reach out to sales</saleslink>."},salesAssistedDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.salesAssisted.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."},nonAdminTooltip:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.nonAdmin.tooltip",defaultMessage:"New users can continue to be added as members. To resume adding guests, contact your workspace owner to upgrade or remove existing guests from your workspace."}}),yp={warning_upsell:{iconGroup:up().G,tint:"yellow",label:xp.overLimitTitle,description:xp.upsellDescription,tooltip:xp.emailDomainTooltip},warning_contact_sales:{iconGroup:up().G,tint:"yellow",label:xp.overLimitTitle,description:xp.contactSalesDescription,tooltip:xp.emailDomainTooltip},warning_sales_assisted:{iconGroup:up().G,tint:"yellow",label:xp.overLimitTitle,description:xp.salesAssistedDescription,tooltip:xp.emailDomainTooltip},warning_nonadmin:{iconGroup:up().G,tint:"yellow",label:xp.overLimitTitle,tooltip:xp.nonAdminTooltip},info:{iconGroup:np().t,tint:"gray",label:xp.infoTitle,description:xp.infoDescription,tooltip:xp.emailDomainTooltip}};function bp(e){let{spaceStore:t,internalDomains:i,domainFilterValues:s,setDomainFilterValues:n}=e;const a=(0,Pg().IH)({spaceStore:t}),o=i.length>0;if(!o)return null;const r=o&&a,l=(0,se.jsx)(vp,{spaceStore:t});return r||l?(0,se.jsxs)(xt().jX,{padding:"16px 0px",gap:16,children:[l,r&&(0,se.jsx)(jp,{internalDomains:i,domainFilterValues:s??[],setDomainFilterValues:n})]}):null}function vp(e){let{spaceStore:t}=e;const i=function(e){let{spaceStore:t}=e;const i=(0,n().O7)(),s=(0,Pg().IH)({spaceStore:t}),a=i.currentUser.id,o=t.id,r=(0,Bi().oo)({name:"internal_guests",spaceId:o,userId:a,amount:0});if(!r)return null;return(0,Ii().V5)(r,{available:()=>s?{...yp.info,messageValues:{}}:null,upsell:e=>{let{limit:t,upsell:i}=e;return"product"===i.type?{...yp.warning_upsell,messageValues:{limit:t.total,saleslink:e=>(0,se.jsx)(us().Z,{onClick:()=>(0,Ct().nx)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e}),upgradelink:e=>(0,se.jsx)(us().Z,{onClick:()=>{ct().default.setState({...ct().default.state,currentTab:"plans",defaultSubtab:void 0})},children:e})}}:"contact_sales"===i.type?{...yp.warning_contact_sales,messageValues:{limit:t.total,saleslink:e=>(0,se.jsx)(us().Z,{onClick:()=>(0,Ct().nx)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e})}}:"contact_account_manager"===i.type?{...yp.warning_sales_assisted,messageValues:{limit:t.total}}:(0,vi().t1)(i)},blocked:e=>{let{limit:t}=e;return{...yp.warning_nonadmin,messageValues:{limit:t.total}}}})}({spaceStore:t});if(!i)return null;const s=(0,se.jsx)(fe().Z,{style:{width:250},textWrap:!0,renderTooltip:()=>(0,se.jsx)(m()._H,{...i.tooltip}),originGap:6,placement:xe().Placement.Bottom,alignment:xe().Alignment.Start,render:e=>(0,se.jsx)("div",{style:{paddingLeft:3,display:"inline-block",verticalAlign:"text-bottom"},...e,children:(0,ro().m)({width:14})})});return(0,se.jsx)(fp().r,{children:(0,se.jsx)(Sp().j,{iconGroup:i.iconGroup,display:"inline",tint:i.tint,label:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m()._H,{...i.label,values:i.messageValues}),i.description?void 0:s]}),description:i.description&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m()._H,{...i.description,values:i.messageValues}),s]})})})}function jp(e){let{internalDomains:t,domainFilterValues:i,setDomainFilterValues:s}=e;const n=[...t.map((e=>({key:e.url,value:`${e.url}`,title:Cp({domain:`${e.url}`})}))),{key:"other",value:"other",title:Cp({domain:"other"})}];return(0,se.jsx)(hp().F,{pillIcon:gp().p,pillTitle:i?(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.filtered",defaultMessage:"Email domain: {domainFilter}",values:{domainFilter:i.join(", ")}}):(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.placeholder",defaultMessage:"Email domain"}),selectedItems:i,setSelectedItems:e=>{s(e)},items:n})}function Cp(e){let{domain:t}=e;return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["other"===t?(0,se.jsx)(m()._H,{defaultMessage:"Other",id:"spacePermissionsSettings.guestsTab.internalDomainFilter.other"}):`@${t}`,(0,se.jsx)("div",{style:{paddingLeft:5},children:"other"===t?mp({width:14}):pp({width:14})})]})}var wp=()=>i(698072),Mp=()=>i(703976),Tp=()=>i(209264);function _p(e){let{request:t,shouldDisableInteraction:i,requestType:a,handleApprove:o,handleDecline:l}=e;const d=function(e){let{shouldDisableInteraction:t}=e;return(0,r().yK)((e=>({approveButton:{background:e.outlineBlueButtonHoveredBackground,color:e.blueColor,fontWeight:510,fontSize:14,borderRadius:4,paddingLeft:10,paddingRight:10},declineButton:{marginRight:10,borderRadius:4,paddingLeft:10,paddingRight:10,color:e.text.secondary},container:{opacity:t?.5:1,display:"flex",width:"100%",justifyContent:"flex-end"}})),[t])}({shouldDisableInteraction:i}),[c,u]=(0,s.useState)(!1),g=(0,n().O7)(),p=(0,s.useCallback)((()=>{_g().b4(g,{from:`${a}_request`,button_name:"decline"}),l(t)}),[g,a,t,l]),f=(0,s.useCallback)((async()=>{u(!0),_g().b4(g,{from:`${a}_request`,button_name:"approve"}),await o(t),u(!1)}),[g,t,a,o]);return(0,se.jsxs)("div",{style:d.container,children:[(0,se.jsx)("div",{children:(0,se.jsx)(Bt().D,{style:d.declineButton,onClick:p,disabled:i,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.requestsTable.Decline",defaultMessage:"Decline"})})}),(0,se.jsx)("div",{children:(0,se.jsx)(Bt().D,{style:d.approveButton,onClick:f,isLoading:c,disabled:i,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.requestsTable.approve",defaultMessage:"Approve"})})})]})}function kp(e){const{isModalOpen:t,handleClickDecline:i,handleClickDismiss:a,requestType:r,requests:l}=e,d=function(e,t,i){const a=(0,n().O7)();return(0,s.useCallback)((()=>{i(),_g().b4(a,{from:"member"===e?"member_request":"guest_request",button_name:"dismiss_in_dialog",count:t.length})}),[i,a,t,e])}(r,l,a),c=(0,m().YB)(),u=(0,o().VK)((()=>{var e;return null===(e=l[0])||void 0===e||null===(e=e.createdByActorsWithReason[0])||void 0===e?void 0:e.actor.getDisplayName(c)}),[l,c]),g=(0,o().VK)((()=>{var e;return null===(e=l[0])||void 0===e?void 0:e.forActor.email}),[l]);return 0===l.length?null:(0,se.jsx)(Wg,{isModalOpen:t,handleDismiss:d,handleConfirm:()=>i(l),title:(0,se.jsx)(m()._H,{id:"RequestBulkDeclineConfirmationDialog.title",defaultMessage:"Decline {numberOfRequests, plural, one {{requestType} request for {firstRequestEmail}} other {{numberOfRequests} {requestType} requests}}?",values:{numberOfRequests:l.length,requestType:r,firstRequestEmail:g}}),description:(0,se.jsx)(m()._H,{id:"RequestBulkDeclineConfirmationDialog.description",defaultMessage:"{numberOfRequests, plural, one {To add them as a {requestType} in the future, {inviter} must resubmit a request, or an admin must invite them} other {Requests must be resubmitted, or an admin must add them as {isMemberRequest, select, true {members} other {guests}} in the future}}.",values:{numberOfRequests:l.length,requestType:r,isMemberRequest:"member"===r,inviter:u}}),ctaText:(0,se.jsx)(m()._H,{id:"RequestBulkDeclineConfirmationDialog.decline",defaultMessage:"Decline"})})}function Ip(e){let{createdByActorsWithReason:t,latestRequestTime:i}=e;return(0,se.jsx)("div",{style:{width:241,maxHeight:600,overflowY:"auto",whiteSpace:"pre-wrap",padding:"12px 12px 12px 12px"},children:t.map((e=>(0,se.jsx)(Ap,{createdByActorWithReason:e,latestRequestTime:i},e.actor.id)))})}function Ap(e){let{createdByActorWithReason:t,latestRequestTime:i}=e;const{requestorName:s,reason:n,actor:a,styles:l}=function(e){let{createdByActorWithReason:t}=e;const{actor:i,reason:s}=t,n=(0,m().YB)(),a=(0,o().VK)((()=>i.getDisplayName(n)),[n,i]),l=(0,r().yK)((e=>({avatar:{width:24,height:24},metadata:{display:"flex",alignItems:"center",gap:6,flex:"1 0 0"},userName:{textOverflow:"ellipsis",fontSize:14,fontWeight:510,overflow:"hidden",width:100,whiteSpace:"nowrap"},timestamp:{color:e.text.tertiary,textAlign:"right",fontSize:12,fontWeight:400,lineHeight:"15px"},header:{display:"flex",alignItems:"center",gap:10},reason:{paddingLeft:30,fontSize:14,fontWeight:400,color:e.text.primary,letterSpacing:"-0.154px",display:"inline-block",overflowWrap:"break-word",inlineSize:200},noReason:{color:e.text.quaternary}})),[]);return{requestorName:a,reason:s,actor:i,styles:l}}({createdByActorWithReason:t});return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:l.header,children:[(0,se.jsx)(en().Z,{hasTooltip:!0,userValue:a,style:l.avatar,size:24,avatarShouldShowShadow:!1}),(0,se.jsxs)("div",{style:l.metadata,children:[(0,se.jsx)("div",{style:l.userName,children:s}),(0,se.jsx)(he().Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:l.timestamp,children:(0,Fo().IS)(i)})]})]}),(0,se.jsx)("span",{style:l.reason,children:n||(0,se.jsx)("div",{style:l.noReason,children:(0,se.jsx)(m()._H,{id:"requestReasonContent.noReason",defaultMessage:"No message"})})})]})}function Dp(e){let{request:t,shouldDisableInteraction:i,requestType:s}=e;const{styles:a,firstRequestorName:l,numberOfRequestors:d}=function(e){let{request:t,shouldDisableInteraction:i}=e;const s=(0,r().yK)((e=>({firstRequestorName:{color:e.text.secondary,opacity:i?.5:1,maxWidth:118,...h().Yu},buttonSuffix:{color:e.text.tertiary,paddingLeft:4},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[i]),a=(0,n().O7)(),l=(0,m().YB)(),d=(0,o().VK)((()=>{if(0===t.createdByActorsWithReason.length)return;return new(te().U6)(a,{table:B().KJ,id:t.createdByActorsWithReason[0].actor.id}).getDisplayName(l)}),[a,l,t.createdByActorsWithReason]);return{styles:s,firstRequestorName:d,numberOfRequestors:t.createdByActorsWithReason?t.createdByActorsWithReason.length:0}}({request:t,shouldDisableInteraction:i}),c=(0,n().O7)();return void 0===l||0===d?null:(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,onClick:()=>{_g().b4(c,{from:`${s}_request`,button_name:"open_requested_by"})},renderOrigin:e=>(0,se.jsx)(Bt().D,{...e,disabled:i,children:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("span",{style:a.firstRequestorName,title:l,children:l}),(0,se.jsx)("span",{style:a.buttonSuffix,children:d>1?(0,se.jsxs)("div",{children:["+",d-1]}):null}),(0,Id().i)(a.chevron)]})}),render:()=>(0,se.jsx)(Ip,{createdByActorsWithReason:t.createdByActorsWithReason,latestRequestTime:t.accessRequest.created_time})})}function Pp(e){let{request:t,spaceStore:i,shouldDisableInteraction:s}=e;const{accessRequest:n,forActor:a}=t,r=function(e){let{accessRequest:t}=e;return(0,o().VK)((()=>t.isGuestInviteRequest()?t.getAttributes().permission_records_and_roles.map((e=>e.id)):[]),[t])}({accessRequest:n});return(0,se.jsx)(Jg,{pageIds:r,guestUserId:a.id,shouldDisableInteraction:s,from:"guest_request"})}var Rp=()=>i(306164),Bp=()=>i(270895),Zp=()=>i(44556),Up=()=>i(383694),Hp=()=>i(149809),Op=()=>i(740046);const Ep=(0,m().vU)({filterTeams:{defaultMessage:"Filter teamspacesâ€¦",id:"teamsDropdownForMember.filterForTeams.placeholder"},privateTeamspace:{defaultMessage:"Private teamspace",id:"teamsDropdownForMember.privateTeamspace"}});function Lp(e){const t=(0,n().O7)(),[i,a]=(0,s.useState)(""),l=(0,s.useCallback)((e=>Zp().RF({environment:t,teamId:e,tab:Bp().a.Members,from:"teams_dropdown_space_settings_people"})),[t]),d=(0,r().yK)((e=>({teamName:{color:e.text.primary,fontSize:14},teamMemberCount:{color:e.text.secondary,fontSize:12}})),[]),c=(0,o().VK)((()=>[{key:"teams for member",render:e=>(0,se.jsx)(Ca().Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName()??H().Z.formatMessage(Ep.privateTeamspace),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var i;return(0,se.jsx)(xa().Z,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,se.jsxs)("div",{style:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},children:[(0,se.jsx)(Up().p,{disabled:!0,store:e,size:20,style:{borderRadius:4}}),(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{style:d.teamName,children:e.getName()??H().Z.formatMessage(Ep.privateTeamspace)}),(0,se.jsx)("div",{style:d.teamMemberCount,children:(0,se.jsx)(m()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(i=(0,Ti().oT)(e))||void 0===i?void 0:i.memberCountWithGuests)??0}})})]})]}),disabled:!Boolean(e.getName()),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,l,d.teamMemberCount,d.teamName]),u=i,g=(0,se.jsx)(Ca().Z,{isInput:!0,children:(0,se.jsx)(Op().ZP,{value:u,onChange:(0,s.useCallback)((e=>{a(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:H().Z.formatMessage(Ep.filterTeams)})}),p={menuType:fa().o.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?g:void 0};return(0,se.jsx)(ya().Z,{...p,children:(0,se.jsx)(Hp().Z,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:void 0,sections:c})})}function qp(e){let{from:t,teamStores:i}=e;const{styles:a,onClickButton:o}=function(e){let{from:t}=e;const i=(0,r().yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},teamspaceName:{color:e.text.secondary,maxWidth:70,...h().Yu},teamspaceNameSuffix:{color:e.text.tertiary,paddingLeft:4}})),[]),a=(0,n().O7)(),o=(0,s.useCallback)((()=>{_g().b4(a,{from:t,button_name:"open_teamspaces"})}),[a,t]);return{styles:i,onClickButton:o}}({from:t}),l=i.length;return(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,onClick:o,renderOrigin:e=>(0,se.jsx)(Bt().D,{disabled:0===l,style:0===l?a.noTeams:a.button,...e,children:0===l?(0,se.jsx)(m()._H,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("span",{style:a.teamspaceName,title:i[0].getName(),children:i[0].getName()}),(0,se.jsx)("span",{style:a.teamspaceNameSuffix,children:l>1?(0,se.jsxs)("div",{children:["+",l-1]}):null}),(0,Id().i)(a.chevron)]})}),render:()=>(0,se.jsx)(Lp,{teamStores:i})})}function Vp(e){let{spaceStore:t,request:i}=e;const{teamStores:s}=function(e){let{request:{accessRequest:t},spaceStore:i}=e;const s=(0,o().VK)((()=>{var e,s;const n=Dc().default.state.teams.filter((e=>e.isDefault())),a=null===(e=t.getAttributes())||void 0===e?void 0:e.origin_table,o=null===(s=t.getAttributes())||void 0===s?void 0:s.origin_id;if(a&&o){const e=te().zX.createChildStore(i,{table:Rp().e0,id:o});n.includes(e)||n.push(e)}return n}),[t,i]);return{teamStores:s}}({request:i,spaceStore:t});return(0,se.jsx)(qp,{teamStores:s,from:"member_request"})}function Np(e){let{request:t,spaceStore:i}=e;const{relativeDate:s,email:n,userStore:a,styles:l}=function(e){let{request:{accessRequest:t,forActor:i},spaceStore:s}=e;const n=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",fontSize:h().JB.UIRegular.desktop,gap:10,flex:"1 0 0",maxWidth:50},userAvatar:{},title:{height:17,alignSelf:"stretch",fontSize:h().JB.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",maxWidth:160,...h().Yu},subtitle:{height:17,alignSelf:"stretch",fontSize:h().JB.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,maxWidth:160,...h().Yu}})),[]),a=te().U6.createChildStore(s,{table:B().KJ,id:i.id}),{email:l}=(0,o().VK)((()=>({email:a.getEmail()})),[a]),d=(0,m().YB)(),c=(0,o().VK)((()=>t.created_time),[t]),u=I().CQ(c,(0,G().r)()),g=(0,qo().ZV)({value:u,date_format:"relative",userTimeZone:(0,G().r)(),intl:d,allowRelativeDates:!0});return{email:l,styles:n,userStore:a,relativeDate:g}}({request:t,spaceStore:i});return(0,se.jsxs)("div",{style:l.container,children:[(0,se.jsx)(en().Z,{style:l.userAvatar,userStore:a,size:28}),(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{style:l.title,title:n,children:n}),(0,se.jsx)("div",{style:l.subtitle,title:s,children:s})]})]})}function Fp(e){let{spaceStore:t,requests:i,requestType:a,domainFilterValues:l,internalDomains:d}=e;const c=(0,n().O7)(),[u,g]=(0,s.useState)(ip),[p,h]=(0,s.useState)({column:Kp,sortAscending:!0}),S=(0,o().VK)((()=>sp().default.state.searchQuery),[]),[x,y]=(0,s.useState)([]),{rows:b,hasMore:v}=function(e){let{spaceStore:t,requestType:i,requests:s,searchQuery:n,domainFilters:a=[],internalDomains:r=[],limit:l,selectedRowIds:d,sortState:c}=e;const u=(0,o().VK)((()=>s.map((e=>{const s=te().U6.createChildStore(t,{table:B().KJ,id:e.forActor.id});return{id:e.accessRequest.id,spaceStore:t,isClickable:!1,request:e,requestType:i,email:s.getEmail(),shouldDisableInteraction:d.includes(e.accessRequest.id)}}))),[t,i,s,d]),g=(0,f().oA)(a),p=u.filter((e=>{var t;const i=e.email?(0,Ql().Gd)(e.email):void 0,s=(0,Mp().is)(e.email,r);return!(n&&(null===(t=e.email)||void 0===t||!t.includes(n)))&&(!(g.length>0)||g.some((e=>"other"===e?!s:i===e)))})),m=function(e,t){let{sortAscending:i}=t;const s=(0,f().MR)(e,(e=>e.email));i||s.reverse();return s}(p,c),h=m.length>l;return{rows:m.slice(0,l),hasMore:h}}({spaceStore:t,requestType:a,requests:i,domainFilters:(0,f().oA)(l),internalDomains:d,searchQuery:S,limit:u,sortState:p,selectedRowIds:x}),j=(0,s.useMemo)((()=>i.filter((e=>x.includes(e.accessRequest.id)))),[i,x]),[C,w]=(0,s.useState)(!1),[M,T]=(0,s.useState)(void 0),_=!b.some((e=>x.includes(e.id))),k=(0,s.useCallback)((async()=>{w(!0),_g().b4(c,{from:`${a}_request`,button_name:"bulk_approve",count:j.length});const e=await $p({environment:c,spaceStore:t,requests:j.map((e=>e.accessRequest)),requestType:a,status:"approved"});w(!1),e&&y([])}),[c,t,j,a]),I=(0,s.useCallback)((()=>{_g().b4(c,{from:`${a}_request`,button_name:"bulk_decline",count:j.length}),T(j)}),[c,a,T,j]),A=(0,s.useCallback)((()=>T(void 0)),[T]),D=function(e){let{requestType:t,onClickApprove:i,onClickDecline:s}=e;return"member"===t?[Kp,Wp,Gp,Yp({onClickApprove:i,onClickDecline:s})]:[Kp,zp,Gp,Yp({onClickApprove:i,onClickDecline:s})]}({requestType:a,onClickApprove:e=>$p({environment:c,spaceStore:t,requests:[e.accessRequest],requestType:a,status:"approved"}),onClickDecline:e=>T([e])}),P=(0,r().yK)((e=>({container:{paddingBottom:30},headerContainer:{display:"flex",justifyContent:"space-between"},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:e.text.tertiary},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.secondary},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30},noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},noRowText:{color:e.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"}})),[]),R=function(e){return(0,r().yK)((t=>({...(0,pe().bE)({columnRenderInfo:e,theme:t,containerMarginTop:0})})),[e])}(D);return 0===i.length?null:(0,se.jsxs)("div",{style:P.container,children:[(0,se.jsxs)("div",{style:P.headerContainer,children:[(0,se.jsxs)("div",{style:P.titleContainer,children:[(0,se.jsx)("div",{children:(0,se.jsx)(m()._H,{id:"peopleSectionMembersTab.memberRequests.title",defaultMessage:"Requests"})}),(0,se.jsx)("span",{style:P.titleNumber,children:i.length})]}),x.length>0&&!_&&(0,se.jsxs)("div",{style:P.actionsContainer,children:[(0,se.jsx)(Tp().D,{style:P.actionLeftButton,onClick:k,isLoading:C,children:(0,se.jsxs)("div",{style:P.buttonContainerApprove,children:[(0,se.jsx)("div",{style:P.buttonIcon,children:(0,wp().M)({width:20,height:20})}),(0,se.jsx)("div",{style:P.buttonText,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.requestsTable.bulkApprove",defaultMessage:"Approve {numberOfRequests, plural, one {1 request} other {{numberOfRequests} requests}}",values:{numberOfRequests:x.length}})})]})}),(0,se.jsx)("div",{style:P.buttonDivider}),(0,se.jsx)(Tp().D,{style:P.actionRightButton,onClick:I,isLoading:!1,children:(0,se.jsxs)("div",{style:P.buttonContainerDecline,children:[(0,se.jsx)("div",{style:{...P.buttonIcon,paddingTop:3},children:Kg({width:20,height:20})}),(0,se.jsx)("div",{style:P.buttonText,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.requestsTable.bulkDecline",defaultMessage:"Decline"})})]})})]})]}),(0,se.jsx)("div",{style:{marginTop:4},children:(0,se.jsx)(pe().Dp,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:D,rows:b,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:p,onSortStateChanged:h,renderNoRowsComponent:()=>(0,se.jsx)("div",{style:P.noRowContainer,children:(0,se.jsx)("div",{style:P.noRowText,children:(0,se.jsx)(m()._H,{id:"peopleSectionRequestTable.emptySearch",defaultMessage:"No search results"})})}),styles:R,getStyleForRow:e=>{if(e.shouldDisableInteraction)return{backgroundColor:"rgba(35, 131, 226, 0.07)"}},loadMoreMethod:v?{type:"button",onLoadMore:()=>g(u+ip)}:void 0,multiselect:i.length>0?{header:{isDisabled:0===b.length,isSelected:x.length>0&&x.length===b.length,onClick:()=>{x.length===b.length?(y([]),_g().pZ(c,{from:`${a}_request`,action:"deselect_all",row_count:x.length})):(y(b.map((e=>e.id))),_g().pZ(c,{from:`${a}_request`,action:"select_all",row_count:b.length}))}},row:{getDisabledState:e=>!1,getSelectedState:e=>x.includes(e.id),onClick:e=>{y((t=>t.includes(e.id)?(_g().pZ(c,{from:`${a}_request`,action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(_g().pZ(c,{from:`${a}_request`,action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})}),(0,se.jsx)(kp,{isModalOpen:(0,vi().$K)(M),requestType:a,requests:M??[],handleClickDecline:async e=>{await $p({environment:c,spaceStore:t,requests:e.map((e=>e.accessRequest)),requestType:a,status:"rejected"})&&y([]),T(void 0)},handleClickDismiss:A})]})}const Kp={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionRequestsTable.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(Np,{request:e.request,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},Wp={id:"teamspaces",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionRequestsTable.teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,se.jsx)(Vp,{spaceStore:e.spaceStore,request:e.request}),widthData:{width:175},sortable:!1},zp={id:"pages",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:175,textAlign:"left"},children:(0,se.jsx)(m()._H,{id:"peopleSectionRequestsTable.pages",defaultMessage:"Access"})}),renderCell:e=>(0,se.jsx)(Pp,{request:e.request,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:175},sortable:!1},Gp={id:"requestBy",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:160,textAlign:"left"},children:(0,se.jsx)(m()._H,{id:"peopleSectionRequestsTable.requestBy",defaultMessage:"Requested by"})}),renderCell:e=>(0,se.jsx)(Dp,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType}),widthData:{width:120},sortable:!1};function Yp(e){let{onClickApprove:t,onClickDecline:i}=e;return{id:"actions",headerTitle:(0,se.jsx)("div",{style:{minWidth:155}}),renderCell:e=>(0,se.jsx)(_p,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType,handleApprove:t,handleDecline:i}),widthData:{width:100},sortable:!1}}async function $p(e){let t,{environment:i,spaceStore:s,requests:n,requestType:a,status:o}=e;if(0===n.length)return!0;if("member"===a){const e=n.filter((e=>"guest_invite_request"!==e.getType())),a=n.filter((e=>"guest_invite_request"===e.getType())),r=await S().YN({environment:i,store:s,requests:e,status:o,from:"requests_center"}),l=await S().fJ({environment:i,store:s,requests:a,status:o,from:"requests_center"});t={failedUsers:r.failedUsers.concat(l.failedUsers),resolvedUsers:r.resolvedUsers.concat(l.resolvedUsers)}}else"guest"===a?t=await S().mY({environment:i,requests:n,status:o,from:"requests_center"}):(0,vi().t1)(a);const r=function(e){let{requestType:t,result:{resolvedUsers:i,failedUsers:s},status:n}=e;if("guest"===t&&"approved"===n&&i.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests",defaultMessage:"Approved {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:i.length,userEmail:i[0].getEmail()}})};if("guest"===t&&"approved"===n&&s.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests.failed",defaultMessage:"Failed approve {numberOfRequests, plural, one {guest request for {userEmail}} other {{numberOfRequests} guest requests}}, please try again.",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("guest"===t&&"rejected"===n&&i.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.success",defaultMessage:"Declined {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:i.length,userEmail:i[0].getEmail()}})};if("guest"===t&&"rejected"===n&&s.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.failed",defaultMessage:"Failed decline {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}, please try again.",values:{numberOfSuccesses:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"approved"===n&&i.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.success",defaultMessage:"Approved {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"approved"===n&&s.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.failed",defaultMessage:"Failed to approve {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"rejected"===n&&i.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.success",defaultMessage:"Declined {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"rejected"===n&&s.length>0)return{label:(0,se.jsx)(m()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.failed",defaultMessage:"Failed to decline {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};return}({requestType:a,result:t,status:o});return r&&fo().oV(r),0===t.failedUsers.length}function Qp(e){let{spaceStore:t}=e;const[i,a]=(0,s.useState)(),r=(0,n().O7)(),l=(0,o().VK)((()=>(0,Yc().A7)()),[]),d=(0,o().VK)((()=>{const e=Og().Z.getData(r,{spaceId:t.id});return e?e.filter((e=>e.hasGuests)).map((e=>e.domain)):[]}),[r,t]),c=(0,ri().tA)({spaceStore:t}),u=(0,Pg().IH)({spaceStore:t}),g=(0,ri().oE)({spaceStore:t,requestType:"guest"});return(0,ri().bn)({requestType:"guest",spaceStore:t}),(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(bp,{spaceStore:t,internalDomains:d,domainFilterValues:i,setDomainFilterValues:a}),c&&u&&(0,se.jsx)(Fp,{requests:g,spaceStore:t,requestType:"guest",domainFilterValues:i,internalDomains:d}),(0,se.jsx)(op,{guests:l,spaceStore:t,domainFilterValues:i??[],internalDomains:d})]})}var Jp=()=>i(196234),Xp=()=>i(933868),em=()=>i(621099);function tm(e){let{user:t,spaceStore:i,shouldDisableAction:a}=e;const{styles:l,handleRemoveMemberFromWorkspace:d,environment:c,isCurrentUser:u}=function(e){let{user:t,spaceStore:i}=e;const a=(0,r().yK)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{},removeMenuDivider:{borderTop:e.stroke.secondary},removeButton:{color:Eg().Lr[e.mode].red},upgradeIcon:{width:17,height:17}})),[]),l=(0,n().O7)(),d=(0,s.useCallback)((async()=>{const{currentUserSettingsStore:e}=et().default.state;return e?await(0,em().$A)({user:t,spaceStore:i,environment:l,userSettingStore:e}):()=>{}}),[i,l,t]),c=(0,o().VK)((()=>{var e;return(null===(e=et().default.state.currentUserStore)||void 0===e?void 0:e.id)===t.userId}),[t]);return{styles:a,handleRemoveMemberFromWorkspace:d,environment:l,isCurrentUser:c}}({user:t,spaceStore:i}),g=new(To().Z);return(0,se.jsx)("div",{style:l.container,children:(0,se.jsx)(ko().ZP,{buttonPopupStore:g,popupType:ko().Z4.Popup,renderOrigin:e=>(0,se.jsx)(Bt().D,{style:l.button,...e,children:(0,se.jsx)(se.Fragment,{children:(0,qg().O)(l.buttonIcon)})}),onClick:()=>{_g().b4(c,{from:"member",button_name:"actions"})},disabled:a,render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:[{key:"remove",render:e=>(0,se.jsx)(Ca().Z,{...e,style:l.removeMenuDivider}),items:[{key:"remove",render:e=>(0,se.jsx)(xa().Z,{...e,buttonStyle:l.removeButton,icon:(0,lo().V)(l.upgradeIcon),title:(0,se.jsx)(m()._H,{id:"peopleSectionmembersTab.removeMember",defaultMessage:"{isCurrentUser, select, true {Leave workspace} other {Remove from workspace}} ",values:{isCurrentUser:u}})}),action:async()=>{g.setState({open:!1}),await d(),_g().b4(c,{from:"member",button_name:"remove"})}}]}]})})})})}var im=()=>i(907099);function sm(e){let{shouldShowSearchHeader:t,sections:i,filterPlaceholder:a}=e;const o=(0,n().O7)(),[r,l]=(0,s.useState)(""),d=r,c=(0,se.jsx)(Ca().Z,{isInput:!0,children:(0,se.jsx)(Op().ZP,{value:d,onChange:(0,s.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:a&&H().Z.formatMessage(a)})}),u={menuType:fa().o.Popup,maxWidth:350,maxHeight:300,header:t?c:void 0};return(0,se.jsx)(ya().Z,{...u,children:(0,se.jsx)(Hp().Z,{filter:d,context:{blocks:[],environment:o,publicEditMode:void 0},initialFocus:0,sections:i})})}const nm=(0,m().vU)({filterGroups:{defaultMessage:"Filter groups...",id:"GroupPopupContent.filterGroups"}});function am(e){let{groups:t,spaceStore:i,spacePermissionsSettingsStore:s}=e;const n=t.map((e=>({group:e.group,numberOfGroupMembers:e.memberCount}))),a=(0,r().yK)((e=>({buttonTitle:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},groupName:{color:e.text.primary,fontSize:14},groupMemberCount:{color:e.text.secondary,fontSize:12}})),[]),o=t.length>5;return(0,se.jsx)(sm,{shouldShowSearchHeader:o,sections:[{key:"groups for member",render:e=>(0,se.jsx)(Ca().Z,{...e}),actions:n.map((e=>{const{group:t,numberOfGroupMembers:n}=e;return{key:t.group_id,displayName:t.name,analyticsName:t.name??"unknown group",searchName:t.name,render:e=>(0,se.jsx)(xa().Z,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,se.jsxs)("div",{style:a.buttonTitle,children:[(0,se.jsx)(ja().Z,{disabled:!0,bucket:"public",icon:t.icon?{pointer:i.pointer,icon:t.icon}:void 0,size:20,isEmptyPage:!1,title:t.name}),(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{style:a.groupName,children:t.name}),(0,se.jsx)("div",{style:a.groupMemberCount,children:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:n}})})]})]}),...e}),action:()=>{s.setState({...s.state,currentTab:is().Q.Groups})},closeParentMenu:!1}}))}],filterPlaceholder:nm.filterGroups})}function om(e){let{user:t,spaceStore:i,spacePermissionsSettingsStore:a,spacePermissionGroupIds:l}=e;const{styles:d,groups:c,numberOfGroups:u,firstGroupName:g,onClick:p}=function(e){let{spacePermissionGroupIds:t}=e;const i=(0,n().O7)(),a=(0,s.useCallback)((()=>{_g().b4(i,{from:"member",button_name:"open_groups"})}),[i]),l=(0,r().yK)((e=>({button:{marginRight:8},noGroups:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},noneGroupText:{color:e.text.tertiary},groupNameText:{color:e.text.secondary,maxWidth:100,...h().Yu},groupNumberText:{color:e.text.secondary}})),[]),d=(0,m().YB)(),c=(0,o().VK)((()=>f().oA(t.map((e=>kg().Z.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e)))))),[t]),u=c.length,g=u>0?(0,im().kF)({groupName:c[0].group.name,intl:d}):void 0;return{styles:l,groups:c,numberOfGroups:u,firstGroupName:g,onClick:a}}({spacePermissionGroupIds:l});return(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,onClick:p,renderOrigin:e=>(0,se.jsx)(Bt().D,{disabled:0===u,style:0===u?d.noGroups:d.button,...e,children:0===u?(0,se.jsx)("span",{style:d.noneGroupText,children:(0,se.jsx)(m()._H,{id:"userGroupsCell.noGroups",defaultMessage:"None"})}):1===u?(0,se.jsx)("span",{style:d.groupNameText,title:g,children:g}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:d.groupNumberText,children:u}),(0,Id().i)(d.chevron)]})}),render:()=>(0,se.jsx)(am,{groups:c,spaceStore:i,spacePermissionsSettingsStore:a})})}var rm=()=>i(370005);function lm(e){let{user:t,spaceStore:i,maxWidth:s}=e;const a=(0,r().yK)((e=>({button:{color:e.text.secondary,maxWidth:s}})),[s]),l=(0,n().O7)(),{isPermissionSelectDisabled:d,currentUserId:c}=(0,o().VK)((()=>{let e=!0;return(i.canAdmin()||i.canEditMembership()&&(Xp().RN(t.role)||t.userId===l.currentUser.id))&&(e=!1),{isPermissionSelectDisabled:e,currentUserId:l.currentUser.id}}),[i,l,t.role,t.userId]),u=(0,o().VK)((()=>et().default.state.currentUserSettingsStore),[]),g=(0,m().YB)(),p=(0,o().VK)((()=>{const e=g.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),t="enterprise"===i.getSubscriptionTier();return f().oA(Xp().an.filter((e=>"none"!==e)).map((s=>{if(t||"membership_admin"!==s)return{role:s,disabledInfo:!i.canAdmin()&&Xp().Bc(s)?{isDisabled:!0,disabledMessage:e}:void 0}})))}),[g,i]);return u?(0,se.jsx)(rm().ZP,{role:t.role,table:Un().bx,type:"user_permission",disabled:d,isUserPermission:t.userId===c,upgradeButtonName:"space_permission_item",availableRoleItems:p,buttonStyle:a.button,onChange:async e=>{await em().Vu({member:t,newRole:e,currentUserSettingsStore:u,spaceStore:i,environment:l})},onClick:()=>{_g().b4(l,{from:"member",button_name:"open_role"})}}):null}function dm(e){let{user:t,spaceStore:i}=e;return(0,se.jsx)("div",{children:(0,se.jsx)(lm,{user:t,spaceStore:i,maxWidth:148})})}function cm(e){let{user:t,userPermissionGroupIds:i}=e;const{userTeamStores:s}=function(e){let{user:t,userPermissionGroupIds:i}=e;const s=(0,o().VK)((()=>Dc().default.state.teams.filter((e=>e.isMemberOrGuest(t.userId,i)))),[t.userId,i]);return{userTeamStores:s}}({user:t,userPermissionGroupIds:i});return(0,se.jsx)(qp,{teamStores:s,from:"member"})}function um(e){let{spaceStore:t,spacePermissionsSettingsStore:i,shouldShowHeading:a}=e;const l=(0,o().VK)((()=>(0,Yc().Io)()),[]),{tableStyles:d,styles:c,sortState:u,setSortState:g,rows:p,membersCount:h,searchQuery:S,columnRenderInfo:x,shouldShowLoadMore:y,onLoadMore:b}=function(e){let{members:t,spaceStore:i,spacePermissionsSettingsStore:a}=e;const l=(0,n().O7)(),d=(0,o().VK)((()=>(0,Kt().mu)()),[]),c=(0,Pg().eA)({spaceStore:i}),u=(0,o().VK)((()=>i.canAdmin()),[i]),g=(0,o().VK)((()=>f().oA([gm,pm,mm,fm,d?Sm:void 0,c?hm:void 0])),[c,d]),p=(0,r().yK)((e=>({...(0,pe().bE)({columnRenderInfo:g,theme:e,containerMarginTop:0})})),[g]),h=(0,r().yK)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]),[S,x]=(0,s.useState)({column:fm,sortAscending:!1}),y=(0,m().YB)(),b=(0,o().VK)((()=>sp().default.state.searchQuery),[]),v=(0,Pg().bS)({spaceStore:i,members:t}),j=(0,o().VK)((()=>i.getSpaceId()),[i]),[{value:C}]=(0,Cn().r5)((async()=>{const e=await Z().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:l,data:{spaceId:j,userIds:t.map((e=>e.userId))},headers:(0,D().Bb)({cellId:void 0,spaceId:j})});return"success"===e.type?e.data.userToGroupMap:{}}),[l,j,t],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),w=(0,o().VK)((()=>t.map((e=>{const t=te().U6.createChildStore(i,{table:B().KJ,id:e.userId}),s=null==v?void 0:v.find((t=>t.userId===e.userId));return{spaceStore:i,user:e,email:t.getEmail(),userName:t.getDisplayName(y),id:e.userId,isClickable:!1,userRole:e.role,spacePermissionsSettingsStore:a,firstJoinedSpaceTime:e.firstJoinedSpaceTime,shouldDisableAction:!(u||!c||"editor"!==e.role&&"membership_admin"!==e.role),restorationStatus:null==s?void 0:s.restorationStatus,spacePermissionGroupIds:(null==C?void 0:C[e.userId])||[]}})).filter((e=>{var t,i;return void 0===b||(((null===(t=e.email)||void 0===t?void 0:t.includes(b))||(null===(i=e.userName)||void 0===i?void 0:i.includes(b)))??!1)}))),[i,t,y,b,u,c,a,v,C]),M=w.length,T=(0,o().VK)((()=>function(e,t){let{sortAscending:i,column:s}=t,n=e;switch(s.id){case"user":n=f().MR(e,(e=>e.email));break;case"roles":n=f().MR(e,(e=>Xp().xm[e.userRole]))}i||n.reverse();return n}(w,S)),[w,S]),[_,k]=(0,s.useState)(ep),I=(0,s.useCallback)((()=>{k(_+ep)}),[_]),A=_<T.length,P=T.slice(0,_);return{tableStyles:p,styles:h,sortState:S,setSortState:x,rows:P,searchQuery:b,membersCount:M,columnRenderInfo:g,onLoadMore:I,shouldShowLoadMore:A}}({members:l,spaceStore:t,spacePermissionsSettingsStore:i});return(0,se.jsxs)(se.Fragment,{children:[a&&(0,se.jsxs)("div",{style:c.titleContainer,children:[(0,se.jsx)("span",{children:(0,se.jsx)(m()._H,{id:"peopleSectionMembersTab.activeMembers.title",defaultMessage:"Active"})}),(0,se.jsx)("span",{style:c.titleNumber,children:h})]}),(0,se.jsx)("div",{style:{marginTop:a?4:-1},children:(0,se.jsx)(pe().Dp,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:x,rows:p,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:u,onSortStateChanged:g,loadMoreMethod:y?{type:"button",onLoadMore:b}:void 0,renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:c.emptyMessage,children:S?(0,se.jsx)(m()._H,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"}):(0,se.jsx)(m()._H,{id:"peopleSectionMembersTab.emptyRow",defaultMessage:"No members"})}),styles:d})})]})}const gm={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionMembersTab.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(ap,{userId:e.user.userId,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},pm={id:"teamspaces",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m()._H,{id:"teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,se.jsx)(cm,{user:e.user,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}),widthData:{width:175},sortable:!1},mm={id:"groups",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m()._H,{id:"groups",defaultMessage:"Groups"})}),renderCell:e=>(0,se.jsx)(om,{user:e.user,spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore,spacePermissionGroupIds:e.spacePermissionGroupIds}),widthData:{width:118.5},sortable:!1},fm={id:"roles",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),renderCell:e=>(0,se.jsx)(dm,{user:e.user,spaceStore:e.spaceStore}),widthData:{width:118.5},sortable:!0},hm={id:"actions",headerTitle:(0,se.jsx)(se.Fragment,{}),renderCell:e=>(0,se.jsx)(tm,{user:e.user,spaceStore:e.spaceStore,shouldDisableAction:e.shouldDisableAction}),widthData:{width:51},sortable:!1},Sm={id:"joined",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{id:"role",defaultMessage:"Date added"})}),renderCell:e=>e.firstJoinedSpaceTime?(0,qo().Yx)(Number(e.firstJoinedSpaceTime),"medium",os().locale):"",widthData:{width:118},sortable:!0};var xm=()=>i(674462),ym=()=>i(889919),bm=()=>i(213004);function vm(e){let{currentTab:t}=e;const i=(0,r().yK)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary,cursor:"pointer"},ctaIcon:{fontSize:12,fill:e.icon.secondary,fontWeight:510}})),[]),a=(0,n().O7)(),o=(0,s.useCallback)((()=>{ct().default.setState({...ct().default.state,currentTab:"security",defaultSubtab:void 0}),_g().kx(a,{current_tab:t})}),[a,t]);return(0,s.useEffect)((()=>{_g().Ad(a,{current_tab:t})}),[a,t]),(0,se.jsx)(bm().Z,{leftIcon:(0,xm().C)(i.icon),content:(0,se.jsx)(m()._H,{id:"PeopleSectionSecurityBanner.title",defaultMessage:"Some invite settings have moved, make changes in Security tab"}),rightIcon:(0,ym().k)(i.ctaIcon),onClick:o})}var jm=()=>i(717956);const Cm=3;function wm(e){let{guests:t,spaceStore:i,internalDomains:a}=e;const{environment:l,tableStyles:d,sortState:c,setSortState:u,selectedRowIds:g,setSelectedRowIds:p,rows:f,searchQuery:h,canEditMembership:S,columnRenderInfo:x,guestsCount:y,onClickApprove:b,isSubscribed:v}=function(e){let{guests:t,spaceStore:i,internalDomains:a}=e;const l=(0,n().O7)(),d=(0,Pg().eA)({spaceStore:i}),c=(0,o().VK)((()=>d?[_m,km,Im]:[_m]),[d]),u=(0,r().yK)((e=>({...(0,pe().bE)({columnRenderInfo:c,theme:e,containerMarginTop:0})})),[c]),g=(0,o().VK)((()=>c[0]),[c]),[p,f]=(0,s.useState)({column:g,sortAscending:!0}),[h,S]=(0,s.useState)([]),x=(0,m().YB)(),y=(0,o().VK)((()=>sp().default.state.searchQuery),[]),b=(0,o().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Yc().YK(e))}),[]),v=(0,o().VK)((()=>t.map((e=>{const t=te().U6.createChildStore(i,{table:B().KJ,id:e.userId}),s=t.getEmail(),n=null==s?void 0:s.split("@")[1],o=a.some((e=>e.url===n));return{spaceStore:i,user:e,email:s,userName:t.getDisplayName(x),guestUserStore:t,id:e.userId,shouldDisableInteraction:h.includes(e.userId),isClickable:!1,isInternalGuest:o,isSubscribed:b}})).filter((e=>{if(y){var t;if(!((null===(t=e.email)||void 0===t?void 0:t.includes(y))||e.userName.includes(y)))return!1}return e.isInternalGuest})).slice(0,Cm)),[t,i,a,x,h,b,y]),j=(0,s.useCallback)((()=>{_g().b4(l,{from:"guest_suggestions",button_name:"bulk_upgrade",count:h.length}),h.forEach((e=>{const t=te().U6.createChildStore(i,{table:B().KJ,id:e}),s=b?"read_and_write":"editor";Lg().s({environment:l,guestUserStore:t,role:s,store:i,isConvertToAdmin:!b,origin:"suggested_guest_table"}),S([])}))}),[h,l,b,i]),C=!v.some((e=>h.includes(e.id)));return{environment:l,tableStyles:u,sortState:p,setSortState:f,selectedRowIds:h,setSelectedRowIds:S,rows:v,searchQuery:y,isApproveButtonLoading:!1,canEditMembership:d,columnRenderInfo:c,isSubscribed:b,shouldHideActions:C,guestsCount:v.length,onClickApprove:j}}({guests:t,spaceStore:i,internalDomains:a}),j=function(){const e=(0,r().yK)((e=>({suggestions:{transition:"opacity 1s",marginTop:12},suggestionsHidden:{transition:"opacity 1s",opacity:0},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},suggestionsMenu:{width:265},hideSuggestionIcon:{height:20,width:20},learnMoreIcon:{height:20,width:20},learnMoreMenuItem:{color:e.text.secondary},learnMoreSection:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},optionsContainer:{display:"flex",alignItems:"center"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},approveButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30}})),[]);return e}(),[w,M]=(0,s.useState)(!0),T=(0,s.useCallback)((()=>{C().D({environment:l,url:(0,Ne().UY)("guides.invitePerson")})}),[l]);if(0===a.length)return null;if(0===f.length)return null;if(!w)return null;const _=g.length>0;return(0,se.jsxs)("div",{style:w?j.suggestions:j.suggestionsHidden,children:[(0,se.jsxs)("div",{style:j.headerContainer,children:[(0,se.jsxs)("div",{style:j.titleContainer,children:[(0,se.jsx)("span",{children:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.suggestions.title",defaultMessage:"Suggestions"})}),(0,se.jsx)("span",{style:j.titleNumber,children:y})]}),(0,se.jsx)("div",{style:j.optionsContainer,children:_?(0,se.jsx)("div",{style:j.actionsContainer,children:(0,se.jsx)(Bt().D,{style:j.approveButton,onClick:b,children:(0,se.jsxs)("div",{style:j.buttonContainerApprove,children:[(0,se.jsx)("div",{style:j.buttonIcon,children:(0,Dl().l)({width:20,height:16})}),(0,se.jsx)("div",{style:j.buttonText,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:g.length,isSubscribed:v}})})]})})}):(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,renderOrigin:e=>(0,se.jsx)(ei().Z,{icon:qg().O,ariaLabel:"3 Dots",style:{height:24,width:24},iconStyle:{width:20,height:20},...e}),onClick:()=>{_g().b4(l,{from:"guest_suggestions",button_name:"upgrade"})},render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,style:j.suggestionsMenu,sections:[{key:"hide_suggestions",render:e=>(0,se.jsx)(Ca().Z,{...e}),items:[{key:"hide_suggestions",render:e=>(0,se.jsx)(xa().Z,{...e,icon:(0,jm().B)(j.hideSuggestionIcon),title:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.hideSuggestions",defaultMessage:"Hide Suggestions"})}),action:()=>{M(!1),_g().b4(l,{from:"guest_suggestions",button_name:"hide_suggestions"})}}]},{key:"learn_more",render:e=>(0,se.jsx)(Ca().Z,{...e,style:j.learnMoreSection}),items:[{key:"learn_more",render:e=>(0,se.jsx)(xa().Z,{...e,icon:(0,ro().m)(j.learnMoreIcon),title:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.learnMore",defaultMessage:"Learn more"}),style:j.learnMoreMenuItem}),action:()=>{T(),_g().b4(l,{from:"guest_suggestions",button_name:"suggestions_learn_more"})}}]}]})})})})]}),(0,se.jsx)("div",{style:{marginBottom:36,marginTop:4},children:(0,se.jsx)(pe().Dp,{allowHorizontalScroll:S,setStickyHeaderRow:!0,columnRenderInfo:x,rows:Am(f,c),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:c,onSortStateChanged:u,renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:j.emptyMessage,children:h?(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:d,multiselect:S?{header:{isDisabled:0===f.length,isSelected:g.length>0&&g.length===f.length,onClick:()=>{g.length===f.length?(p([]),_g().pZ(l,{from:"guest_suggestions",action:"deselect_all",row_count:g.length})):(p(f.map((e=>e.id))),_g().pZ(l,{from:"guest_suggestions",action:"select_all",row_count:f.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>g.includes(e.id),onClick:e=>{p((t=>t.includes(e.id)?(_g().pZ(l,{from:"guest_suggestions",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(_g().pZ(l,{from:"guest_suggestions",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})})]})}function Mm(){const e=(0,r().Fg)();return(0,se.jsx)("div",{style:{color:e.text.secondary},children:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.suggestions.reason.approvedEmailDomain",defaultMessage:"Approved email domain"})})}function Tm(e){let{spaceStore:t,upgradeMember:i,guestUserStore:a,disabled:o}=e;const l=(0,r().Fg)(),d=(0,n().O7)(),[c,u]=(0,s.useState)(!1);return(0,se.jsx)(Bt().D,{disabled:o,style:{background:l.tint.uiBlue,color:l.text.uiBluePrimary,fontWeight:510,fontSize:14,borderRadius:4,paddingTop:4,paddingBottom:4,paddingLeft:12,paddingRight:12,marginLeft:24,...o&&{color:l.text.uiBlueTertiary}},hoveredStyle:{background:l.tint.uiBlueHover},onClick:async()=>{u(!0),_g().b4(d,{from:"guest_suggestions",button_name:"upgrade"}),await i({environment:d,store:t,guestUserStore:a}),u(!1)},isLoading:c,children:(0,se.jsx)(m()._H,{id:"spaceSettings.peopleSection.suggestionsTable.upgrade",defaultMessage:"Upgrade"})})}const _m={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.guest",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(ap,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest,isForSuggestionsTable:!0}),widthData:{width:210},sortable:!0},km={id:"access",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,se.jsx)("div",{style:{display:"flex"},children:(0,se.jsx)(Xg,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction})}),widthData:{width:120},sortable:!1},Im={id:"reason",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionguestsTab.suggestions.reason",defaultMessage:"Reason"})}),renderCell:e=>(0,se.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,se.jsx)(Mm,{}),(0,se.jsx)(Tm,{upgradeMember:async t=>{await Lg().s({origin:"suggested_guest_table",isConvertToAdmin:!1,role:e.isSubscribed?"read_and_write":"editor",...t})},spaceStore:e.spaceStore,guestUserStore:e.guestUserStore,disabled:e.shouldDisableInteraction})]}),widthData:{width:256},sortable:!1};function Am(e,t){let{sortAscending:i}=t;const s=f().MR(e,(e=>e.email));return i||s.reverse(),s}function Dm(e){let{spaceStore:t,spacePermissionsSettingsStore:i}=e;const s=(0,n().O7)(),a=(0,o().VK)((()=>(0,Yc().A7)()),[]),r=(0,o().VK)((()=>{const e=Og().Z.getData(s,{spaceId:t.id});return(null==e?void 0:e.filter((e=>e.hasMembers)).map((e=>e.domain)))??[]}),[s,t]),l=(0,ri().tA)({spaceStore:t}),d=(0,Pg().IH)({spaceStore:t}),c=(0,ri().oE)({spaceStore:t,requestType:"member"});(0,ri().bn)({requestType:"member",spaceStore:t});const u=(0,ri().Mu)({spaceStore:t,guests:a,internalDomains:r}),g=l&&0!==c.length,p=g||u;return(0,se.jsxs)(se.Fragment,{children:[u&&!g&&(0,se.jsx)(wm,{guests:a,spaceStore:t,internalDomains:r}),g&&(0,se.jsxs)("div",{style:{paddingTop:16,paddingBottom:16},children:[d&&(0,se.jsx)(vm,{currentTab:"members"}),(0,se.jsx)(Fp,{requests:c,spaceStore:t,requestType:"member"})]}),(0,se.jsx)(um,{spaceStore:t,spacePermissionsSettingsStore:i,shouldShowHeading:p}),u&&g&&(0,se.jsx)(wm,{guests:a,spaceStore:t,internalDomains:r})]})}function Pm(e){let{recentRecoverableUser:t,spaceStore:a}=e;const{environment:o,styles:l,handleReprovisionToUserChange:d,userId:c,selectedTransferToUser:u}=function(e){let{recentRecoverableUser:t,spaceStore:i}=e;const a=(0,r().yK)((e=>({container:{display:"flex",width:"100%",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},removeMenuDivider:{borderTop:e.stroke.secondary},upgradeIcon:{width:17,height:17}})),[]),o=(0,n().O7)(),[l,d]=(0,s.useState)(),c=(0,s.useCallback)((async(e,s)=>{const{accept:n}=await v().gt({message:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;d(s);const a=await Z().callApi({eventName:"transferSpaceUserContent",environment:o,data:{spaceId:i.id,fromUserId:e,toUserId:s}});"failed"===a.type?v().x2(a):(t.privatePagesCount=0,sp().default.setState({...sp().default.state,recentRecoverableUsers:[...sp().default.state.recentRecoverableUsers.filter((t=>t.userId!==e)),t]}))}),[o,i,t]);return{environment:o,styles:a,handleReprovisionToUserChange:c,userId:t.userId,selectedTransferToUser:l}}({recentRecoverableUser:t,spaceStore:a});return c?(0,se.jsx)("div",{style:l.container,children:(0,se.jsx)(ko().ZP,{popupType:ko().Z4.Popup,onClick:()=>{_g().b4(o,{from:"recently_left",button_name:"actions"})},renderOrigin:e=>(0,se.jsx)(Bt().D,{style:l.button,...e,children:(0,se.jsx)(se.Fragment,{children:(0,qg().O)(l.buttonIcon)})}),render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(va().ZP,{type:va().iW.Vertical,initialFocus:void 0,sections:[{key:"transfer",render:e=>(0,se.jsx)(Ca().Z,{...e,style:l.removeMenuDivider}),items:[{key:"transfer",render:e=>(0,se.jsx)(i(237427).Z,{mode:Y().z.Button,focused:!1,title:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:a,userIds:u?[u]:[],onChange:e=>{let[t]=e;d(c,t)}}),action:()=>{_g().b4(o,{from:"recently_left",button_name:"open_transfer_ownership"})}}]}]})})})}):null}function Rm(e){let{spaceStore:t,recentRecoverableUsers:i}=e;const s=(0,r().yK)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary}})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,se.jsx)(bm().Z,{leftIcon:(0,bo().D)(s.icon),content:(0,se.jsx)(m()._H,{id:"peopleSectionReprovisioningTab.settingsDeeplinkBannerTitle",defaultMessage:"People left the workspace in the past 30 days and had private pages appear here"})})}),(0,se.jsx)(Bm,{recentRecoverableUsers:i,spaceStore:t})]})}function Bm(e){let{spaceStore:t,recentRecoverableUsers:i}=e;const{rows:n,sortState:a,setSortState:l,tableStyles:d}=function(e){let{recentRecoverableUsers:t,spaceStore:i}=e;const n=(0,r().yK)((e=>(0,pe().bE)({columnRenderInfo:Um,theme:e,containerMarginTop:0})),[]),[a,l]=(0,s.useState)({column:Um[0],sortAscending:!0}),d=(0,o().VK)((()=>t.map((e=>{const t=te().U6.createChildStore(i,{table:B().KJ,id:e.userId});return{spaceStore:i,reprovisioningUser:e,email:t.getEmail(),id:e.userId,isClickable:!1}}))),[i,t]);return{rows:d,sortState:a,setSortState:l,tableStyles:n}}({recentRecoverableUsers:i,spaceStore:t}),c=(0,r().yK)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,se.jsx)("div",{style:{marginTop:4},children:(0,se.jsx)(pe().Dp,{setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:Um,rows:Hm(n,a),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:a,onSortStateChanged:l,renderNoRowsComponent:()=>(0,se.jsx)(he().Z,{isSmall:!0,style:c.noRowContainer,children:(0,se.jsx)(m()._H,{id:"peopleSectionReprovisioningTab.noUser",defaultMessage:"No recent left user"})}),styles:d})})}function Zm(e){let{userLeftTime:t}=e;const i=(0,m().YB)(),s=(0,o().VK)((()=>{const e=I().CQ(t,(0,G().r)());return(0,qo().ZV)({value:e,date_format:"relative",userTimeZone:(0,G().r)(),intl:i,allowRelativeDates:!0})}),[t,i]);return(0,se.jsx)(he().Z,{isSmall:!0,children:s})}const Um=[{id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{id:"peopleSectionReprovisioningTab.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(ap,{userId:e.reprovisioningUser.userId,spaceStore:e.spaceStore}),widthData:{width:220},sortable:!0},{id:"pageCount",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{defaultMessage:"Private pages",id:"peopleSectionReprovisioningTab.privatePages"})}),renderCell:e=>(0,se.jsx)(he().Z,{isSmall:!0,children:e.reprovisioningUser.privatePagesCount}),widthData:{width:100},sortable:!1},{id:"leftTime",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m()._H,{defaultMessage:"Left workspace",id:"peopleSectionReprovisioningTab.leftTime"})}),renderCell:e=>(0,se.jsx)(Zm,{userLeftTime:e.reprovisioningUser.userLeftTime}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:"",renderCell:e=>(0,se.jsx)(Pm,{recentRecoverableUser:e.reprovisioningUser,spaceStore:e.spaceStore}),widthData:{width:100},sortable:!1}];function Hm(e,t){let{sortAscending:i}=t;const s=f().MR(e,(e=>e.email));return i||s.reverse(),s}var Om=()=>i(619186),Em=()=>i(458196),Lm=()=>i(123638);const qm=(0,mt().IU)("arrowDownPage",{viewBox:"0 0 14 18",svg:(0,se.jsx)("path",{d:"M7.67969 9.39844V11.7891L7.61719 13.0078L8.21875 12.3828L8.8125 11.7656C8.875 11.7031 8.94531 11.6536 9.02344 11.6172C9.10677 11.5755 9.19271 11.5547 9.28125 11.5547C9.45312 11.5547 9.59635 11.612 9.71094 11.7266C9.83073 11.8411 9.89062 11.9844 9.89062 12.1562C9.89062 12.2552 9.8724 12.3411 9.83594 12.4141C9.79948 12.487 9.74479 12.5573 9.67188 12.625L7.51562 14.6016C7.42708 14.6849 7.34115 14.7448 7.25781 14.7812C7.17969 14.8177 7.09375 14.8359 7 14.8359C6.90104 14.8359 6.8125 14.8177 6.73438 14.7812C6.65625 14.7448 6.57031 14.6849 6.47656 14.6016L4.32031 12.625C4.2474 12.5573 4.19271 12.487 4.15625 12.4141C4.11979 12.3411 4.10156 12.2552 4.10156 12.1562C4.10156 11.9844 4.15885 11.8411 4.27344 11.7266C4.39323 11.612 4.54167 11.5547 4.71875 11.5547C4.79688 11.5547 4.8776 11.5755 4.96094 11.6172C5.04427 11.6536 5.11719 11.7031 5.17969 11.7656L5.77344 12.3828L6.375 13.0078L6.32031 11.7891V9.39844C6.32031 9.21615 6.38542 9.0625 6.51562 8.9375C6.65104 8.80729 6.8125 8.74219 7 8.74219C7.18229 8.74219 7.34115 8.80729 7.47656 8.9375C7.61198 9.0625 7.67969 9.21615 7.67969 9.39844ZM2.83594 17.3203C1.9974 17.3203 1.36458 17.1042 0.9375 16.6719C0.510417 16.2396 0.296875 15.6016 0.296875 14.7578V2.96875C0.296875 2.13021 0.510417 1.49479 0.9375 1.0625C1.36458 0.625 1.9974 0.40625 2.83594 0.40625H6.60156C6.92969 0.40625 7.21615 0.429688 7.46094 0.476562C7.70573 0.518229 7.93229 0.598958 8.14062 0.71875C8.34896 0.833333 8.5625 1.0026 8.78125 1.22656L12.875 5.39062C13.1042 5.61979 13.276 5.84115 13.3906 6.05469C13.5104 6.26302 13.5911 6.49479 13.6328 6.75C13.6745 7 13.6953 7.30729 13.6953 7.67188V14.7578C13.6953 15.5964 13.4818 16.2318 13.0547 16.6641C12.6276 17.1016 11.9948 17.3203 11.1562 17.3203H2.83594ZM2.96094 15.7812H11.0312C11.4115 15.7812 11.6953 15.6849 11.8828 15.4922C12.0703 15.2995 12.1641 15.0234 12.1641 14.6641V7.88281H7.95312C7.39583 7.88281 6.97917 7.74479 6.70312 7.46875C6.43229 7.19271 6.29688 6.77604 6.29688 6.21875V1.9375H2.96875C2.58854 1.9375 2.30469 2.03646 2.11719 2.23438C1.92969 2.43229 1.83594 2.71094 1.83594 3.07031V14.6641C1.83594 15.0234 1.92969 15.2995 2.11719 15.4922C2.30469 15.6849 2.58594 15.7812 2.96094 15.7812ZM8.10156 6.53125H11.9531L7.64844 2.14844V6.07031C7.64844 6.23177 7.68229 6.34896 7.75 6.42188C7.82292 6.49479 7.9401 6.53125 8.10156 6.53125Z"})});function Vm(e){let{spaceStore:t}=e;const{styles:i,shouldEnableExportGuests:a,handleExportGuestsClick:l}=function(e){let{spaceStore:t}=e;const i=(0,r().yK)((e=>({button:{display:"flex",width:28,height:28,justifyContent:"center",gap:10,alignItems:"center"},buttonIcon:{width:20,height:20,fontSize:16,fontStyle:"normal",flexDirection:"column",flexShrink:0,fontWeight:510,fill:e.icon.secondary}})),[]),a=(0,o().VK)((()=>{const{currentSpaceStore:e}=et().default.state,t=_t().subscriptionDataStoreInstance.state;return Boolean(e&&t&&"subscribed_admin"===t.type&&ye().default.checkGate({gateName:"enable_guest_export"}))}),[]),l=(0,n().O7)(),d=(0,m().YB)(),c=(0,s.useCallback)((()=>{const e=_t().subscriptionDataStoreInstance.state;if(t&&e&&"subscribed_admin"===e.type){const i=(0,Yc().ND)(e);Rl().Mj(l,{intl:d,spaceStore:t,guests:i})}}),[l,d,t]);return{styles:i,shouldEnableExportGuests:a,handleExportGuestsClick:c}}({spaceStore:t});return a?(0,se.jsx)(fe().Z,{render:e=>(0,se.jsx)(Bt().D,{style:i.button,onClick:l,...e,children:qm(i.buttonIcon)}),renderTooltip:()=>(0,se.jsx)(m()._H,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):null}var Nm=()=>i(528918),Fm=()=>i(837341),Km=()=>i(123398),Wm=()=>i(936879),zm=()=>i(563946),Gm=()=>i(21062);function Ym(e){let{spaceStore:t,origin:i,requestFrom:a,inviteFrom:r}=e;const{shouldShowRequestMemberButtion:l,canEditMembership:d}=(0,o().VK)((()=>({shouldShowRequestMemberButtion:!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,Se().p1)(),canEditMembership:t.canEditMembership()})),[t]),c=(0,o().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Yc().YK(e))}),[]),{isMobile:u}=(0,n().Fy)(),g=(0,o().VK)((()=>{var e;return null===(e=et().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),p=(0,Bi().VX)({name:"slack_imports_invite",spaceId:t.id,userId:g}),f=(0,o().VK)((()=>(0,zm().shouldEnableSlackImportsInvite)({canEditPermission:d,isMobile:u,hasAccessToFeature:p})),[d,u,p]),h=(0,s.useCallback)((()=>{const e=(0,m().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updatingâ€¦"}});Nm().j({message:e.updatingPermissions})}),[]),S=(0,s.useCallback)((()=>{Nm().x()}),[]),x=(0,n().O7)(),y=(0,s.useCallback)((()=>{(0,Wm().i)(x)}),[x]);return l?(0,se.jsx)(Km().sf,{store:t,analyticsFrom:a,origin:i?(0,se.jsx)("div",{onClick:y,children:i}):(0,se.jsx)(Ai().Z,{isLarge:!0,onClick:y,children:(0,se.jsx)(m()._H,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,se.jsx)(Gm().N,{step:"collaborate_add_member",isFullWidth:!1,showContentOverlays:!1,children:(0,se.jsx)(Fm().r,{disabled:!d,store:t,onInviteClick:h,onInviteComplete:S,isSubscribed:c,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,enableInviteDropdown:f,origin:i,analyticsFrom:r})})}function $m(e){let{spaceStore:t,currentTab:i,spacePermissionsSettingsStore:n}=e;return(0,s.useEffect)((()=>()=>{sp().default.reset()}),[]),(0,se.jsxs)("div",{style:{display:"flex",height:34,paddingBottom:0,justifyContent:"flex-end",alignItems:"center",gap:10},children:[(0,se.jsxs)("div",{style:{display:"flex",height:28,justifyContent:"flex-end",alignItems:"center",gap:4},children:[(0,se.jsx)(Lm().Z,{handleSearchQueryChange:e=>{sp().default.setState({...sp().default.state,searchQuery:e}),i===is().Q.Groups&&n.setState({...n.state,groupsFilter:e??""})},currentTab:i,isSearchBarAlwaysOpen:!0}),i===is().Q.Guests?(0,se.jsx)(Vm,{spaceStore:t}):null]}),(0,se.jsx)("div",{style:{paddingBottom:2},children:(0,se.jsx)(Qm,{spaceStore:t,currentTab:i,spacePermissionsSettingsStore:n})})]})}function Qm(e){let{spaceStore:t,currentTab:i,spacePermissionsSettingsStore:a}=e;const{canUseGroups:r,canCreateGroups:l,handleCreateGroupClick:d,shouldShowRequestMemberButtion:c,canEditMembership:u}=function(e){let{spaceStore:t,currentTab:i,spacePermissionsSettingsStore:a}=e;const r=(0,Pg().VJ)(),l=(0,Pg().eA)({spaceStore:t}),d=(0,n().O7)(),c=(0,s.useCallback)((()=>{_().createAndCommit({userAction:"PeopleSectionGroupsTab.handleCreateGroupClick",environment:d,canUndo:!0,perform:e=>{const i=w().mo({spaceStore:t,transaction:e});if(i){a.setState({...a.state,editingNameGroupId:i.getGroupId(),groupNameInputValue:""});const e=il().kk5.fromValue(Em().GQ,i.getValue()),t=[...kg().Z.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],s=(0,Om().ZP)(a.state.groupsFilter,t,(e=>e.group.name||""));kg().Z.setState({...kg().Z.state,permissionGroupsAndMemberCounts:s})}}})}),[d,t,a]),u=(0,o().VK)((()=>!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,Se().p1)()),[t]),g=(0,Pg().eA)({spaceStore:t});return{canUseGroups:r,canCreateGroups:l,shouldShowRequestMemberButtion:u,canEditMembership:g,handleCreateGroupClick:c}}({spaceStore:t,currentTab:i,spacePermissionsSettingsStore:a});return i===is().Q.Groups&&r?l?(0,se.jsx)(fe().Z,{renderTooltip:()=>!l&&(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),render:e=>(0,se.jsx)(Ai().Z,{isLarge:!0,onClick:d,...e,children:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):null:c||u?(0,se.jsx)(Ym,{spaceStore:t,requestFrom:"space_settings_add_members",inviteFrom:"space_settings_add_members"}):null}var Jm=()=>i(35724);function Xm(){const e=(0,o().VK)((()=>{const e=et().default.state.currentSpaceStore;if(null!=e&&e.isDefined())return e}),[]),t=(0,o().VK)((()=>Ht().default.state.online),[]),i=(0,o().Kw)(_t().subscriptionDataStoreInstance),s=(0,Ig().$)({spaceId:null==e?void 0:e.id}),n=(0,o().qz)(void 0,is().Z);return e&&i?t?(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsx)(Jp().ZP,{spaceStore:e,inviteLinkCode:s,spacePermissionsSettingsStore:n}),(0,se.jsx)(tf,{subscriptionData:i,spaceStore:e,spacePermissionsSettingsStore:n})]}):(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})}):(0,se.jsx)(ef,{})}function ef(){return(0,se.jsx)(as().Z,{style:{margin:"calc(50% - 1em) auto"}})}function tf(e){var t;let{subscriptionData:i,spaceStore:a,spacePermissionsSettingsStore:l}=e;(0,s.useEffect)((()=>{if(ct().default.state.open&&"members"===ct().default.state.currentTab&&ct().default.state.defaultSubtab){const e=ct().default.state.defaultSubtab!==is().Q.Requests?ct().default.state.defaultSubtab:is().Q.Members;l.setState({...l.state,currentTab:e})}}),[l]);const{memberCount:d,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:p,currentTabs:f,environment:h,billingData:S}=function(e){let{subscriptionData:t,spaceStore:i,spacePermissionsSettingsStore:s}=e;const a=(0,n().O7)(),l=(0,It().V)(t),d=(0,_i().Y)(t);(0,Pg().yE)({spaceStore:i,subscriptionData:t});const c=(0,o().VK)((()=>{const{recentRecoverableUsers:e}=sp().default.state;return e.filter((e=>e.privatePagesCount>0))}),[]),u=(0,o().VK)((()=>s.state.currentTab),[s]),g=(0,Pg().JJ)({spaceStore:i,subscriptionData:t}),p=(0,ri().O4)({spaceStore:i,requestType:"guest"}),f=(0,ri().O4)({spaceStore:i,requestType:"member"}),h=(0,r().yK)((e=>({activeTabStyle:{color:e.regularTextColor},inactiveTabStyle:{color:e.lightTextColor},redDot:{background:e.redBadgeBackground,marginLeft:6,marginTop:6}})),[]),S=(0,o().VK)((()=>{const e=kg().Z.state.permissionGroupsAndMemberCounts.length;return l?{[is().Q.Members]:(0,se.jsx)(af,{text:(0,se.jsx)("div",{children:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"})}),number:l,isCurrentTab:u===is().Q.Members,styles:h,unread:(f??0)>0}),[is().Q.Guests]:(0,se.jsx)(af,{text:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),number:d,isCurrentTab:u===is().Q.Guests,styles:h,unread:(p??0)>0}),[is().Q.Groups]:(0,se.jsx)(af,{text:(0,se.jsx)(m()._H,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),number:e,isCurrentTab:u===is().Q.Groups,styles:h}),[is().Q.Reprovisioning]:(0,se.jsx)(af,{text:(0,se.jsx)(m()._H,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),number:c.length,isCurrentTab:u===is().Q.Reprovisioning,styles:h}),[is().Q.Requests]:(0,se.jsx)(m()._H,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"})}:{}}),[l,d,u,h,f,p,c.length]),x=nf(g),y=(0,Wt().pQ)({spaceId:i.id}),b=x.map((e=>S[e]));return{billingData:y,memberCount:l,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:b,currentTabs:x,environment:a}}({subscriptionData:i,spaceStore:a,spacePermissionsSettingsStore:l}),x=(0,Ag().Z)(a),y=(0,Gt().kw)(a.id,null==S?void 0:S.subscription,d),b=x&&u===is().Q.Members&&(null==S?void 0:S.subscription);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ps().ZP,{tabs:p,selectedIndex:f.indexOf(u),onChange:e=>function(e){let{newSelectedIndex:t,environment:i,spacePermissionsSettingsStore:s,currentTab:n,canReprovisionContent:a}=e;const o=nf(a)[t];switch(o){case is().Q.Members:_g().qT(i,{tab:"members"});break;case is().Q.Groups:_g().qT(i,{tab:"groups"});break;case is().Q.Guests:_g().qT(i,{tab:"guests"});break;case is().Q.Reprovisioning:_g().qT(i,{tab:"reprovisioning"});break;case is().Q.Requests:_g().qT(i,{tab:"requests"});break;default:(0,vi().t1)(o)}n===is().Q.Requests&&o!==is().Q.Requests&&ut().Z.reset();s.setState({...s.state,currentTab:o})}({newSelectedIndex:e,environment:h,spacePermissionsSettingsStore:l,currentTab:u,canReprovisionContent:g}),style:{paddingLeft:0,paddingRight:0,marginTop:-6},tabTitleStyle:{fontSize:16,fontWeight:400},tabBorderStyle:{left:0,right:0},right:(0,se.jsx)($m,{spaceStore:a,currentTab:u,spacePermissionsSettingsStore:l})}),b?(0,se.jsx)("div",{style:{margin:"20px 0 20px 0"},children:(0,se.jsx)(Jm().F,{quantityOfPaidSeats:y,quantityOfSpaceMembers:d,nextBillingDate:(null===(t=S.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):null,(0,se.jsx)(sf,{currentTab:u,spaceStore:a,spacePermissionsSettingsStore:l,recentRecoverableUsers:c})]})}function sf(e){let{currentTab:t,spaceStore:i,spacePermissionsSettingsStore:s,recentRecoverableUsers:n}=e;switch(t){case is().Q.Members:return(0,se.jsx)(Dm,{spaceStore:i,spacePermissionsSettingsStore:s});case is().Q.Guests:return(0,se.jsx)(Qp,{spaceStore:i});case is().Q.Groups:return(0,se.jsx)(Hg,{spaceStore:i,spacePermissionsSettingsStore:s});case is().Q.Reprovisioning:return(0,se.jsx)(Rm,{spaceStore:i,recentRecoverableUsers:n});default:return null}}function nf(e){return[is().Q.Members,is().Q.Guests,is().Q.Groups,...e?[is().Q.Reprovisioning]:[]]}function af(e){let{text:t,number:i,isCurrentTab:s,unread:n,styles:a}=e;return(0,se.jsxs)("div",{style:{display:"flex",fontSize:h().JB.UIRegular.desktop,fontWeight:h().Ue.medium,lineHeight:"18px",...s?a.activeTabStyle:a.inactiveTabStyle},children:[t,i&&i>0?(0,se.jsx)("div",{style:{fontSize:h().JB.UIRegular.desktop,lineHeight:"18px",paddingLeft:4,...a.inactiveTabStyle},children:i}):void 0,n&&(0,se.jsx)(Dg().z,{style:a.redDot,size:6})]})}var of=()=>i(391598),rf=()=>i(37428),lf=()=>i(586270),df=()=>i(17064),cf=()=>i(436614),uf=()=>i(606021),gf=()=>i(899548),pf=()=>i(261070),mf=()=>i(465755),ff=()=>i(61738),hf=()=>i(397540);function Sf(e){let{selectItems:t,currentSelectedItem:i,onChange:s,icon:n}=e;const a=(0,r().yK)((()=>({filterWrap:{marginRight:0}})),[]);return(0,se.jsx)(hf().Z,{items:t,getKey:e=>e.key,selectedItem:i,onSelect:s,renderItem:e=>(0,se.jsx)(xa().Z,{title:e.value.name,...e,checkState:i.key===e.value.key}),renderOrigin:e=>(0,se.jsx)(ff().Z,{...e,title:i.originName??i.name,on:!i.showFilterAsOffWhenSelected,icon:n,wrapStyle:a.filterWrap})})}const xf={[cf().ii]:{key:cf().ii,name:(0,se.jsx)(m()._H,{id:"manageTeamsAccessFilter.accessFilter.filterAllTeams",defaultMessage:"Any"}),originName:(0,se.jsx)(m()._H,{id:"manageTeamsAccessFilter.accessSelectPlaceolder",defaultMessage:"Access"}),showFilterAsOffWhenSelected:!0},[cf().nu]:{key:cf().nu,name:(0,se.jsx)(m()._H,{id:"manageTeamsAccessFilter.accessFilter.filterOpenTeams",defaultMessage:"Open"})},[cf().XI]:{key:cf().XI,name:(0,se.jsx)(m()._H,{id:"manageTeamsAccessFilter.accessFilter.filterClosedTeams",defaultMessage:"Closed"})},[cf().TI]:{key:cf().TI,name:(0,se.jsx)(m()._H,{id:"manageTeamsAccessFilter.accessFilter.filterPrivateTeams",defaultMessage:"Private"})}},yf=f().oA([xf[cf().ii],xf[cf().nu],xf[cf().XI],xf[cf().TI]]);function bf(e){let{manageTeamsStore:t}=e;const i=(0,n().O7)(),a=(0,o().VK)((()=>t.state.filterAccess),[t]),l=(0,r().yK)((e=>({keyIcon:{width:18,height:18,...a!==cf().ii?{fill:da().ZP.blue}:{fill:e.mediumIconColor}}})),[a]),d=(0,s.useCallback)((e=>{t.update((t=>({...t,filterAccess:e.key}))),mf().GZ(i,{filter:"access",value:e.key})}),[t,i]),c=xf[a];return(0,se.jsx)(Sf,{selectItems:yf,currentSelectedItem:c,onChange:d,icon:(0,pf().f)(l.keyIcon)})}const vf=(0,mt().IU)("archiveFilled",{viewBox:"0 0 16 16",svg:(0,se.jsx)("path",{d:"M2.16211 5.06934H13.5029C14.2754 5.06934 14.665 4.61133 14.665 3.8457V3.22363C14.665 2.45801 14.2754 2 13.5029 2H2.16211C1.43066 2 1 2.45801 1 3.22363V3.8457C1 4.61133 1.38965 5.06934 2.16211 5.06934ZM4.08301 14.585H11.582C12.9287 14.585 13.6465 13.8877 13.6465 12.5479V6.00586H2.01855V12.5479C2.01855 13.8945 2.73633 14.585 4.08301 14.585ZM5.58008 8.47363C5.29297 8.47363 5.09473 8.27539 5.09473 7.97461V7.7627C5.09473 7.46191 5.29297 7.27051 5.58008 7.27051H10.0918C10.3789 7.27051 10.584 7.46191 10.584 7.7627V7.97461C10.584 8.27539 10.3789 8.47363 10.0918 8.47363H5.58008Z"})}),jf="showArchived",Cf="hideArchived",wf={[Cf]:{key:Cf,name:(0,se.jsx)(m()._H,{id:"manageTeamsArchivedFilter.archivedFilter.hideArchivedTeams",defaultMessage:"Active"}),originName:(0,se.jsx)(m()._H,{id:"manageTeamsArchivedFilter.archivedSelectPlaceolder",defaultMessage:"Active"}),showFilterAsOffWhenSelected:!0},[jf]:{key:jf,name:(0,se.jsx)(m()._H,{id:"manageTeamsArchivedFilter.archivedFilter.showArchivedTeams",defaultMessage:"Archived"})}};function Mf(e){let{manageTeamsStore:t}=e;const i=(0,n().O7)(),a=(0,o().VK)((()=>t.state.showOnlyArchivedTeams),[t]),l=(0,r().yK)((e=>({archiveIcon:{width:16,height:16,marginRight:5,...a?{fill:da().ZP.blue}:{fill:e.mediumIconColor}}})),[a]),d=[wf[Cf],wf[jf]],c=(0,s.useCallback)((e=>{t.update((t=>({...t,showOnlyArchivedTeams:e.key===jf}))),mf().GZ(i,{filter:"archived",value:e.key})}),[t,i]),u=wf[a?jf:Cf];return(0,se.jsx)(Sf,{selectItems:d,currentSelectedItem:u,onChange:c,icon:vf(l.archiveIcon)})}i(749411);const Tf="ShowTeamsWithNoOwnersId";function _f(e){let{teamStores:t,manageTeamsStore:i}=e;const a=(0,n().O7)(),l=(0,o().VK)((()=>i.state.filterByOwner),[i]),d=function(e){switch(e.type){case cf().uY:return;case cf().yj:return e.id;case cf().R7:return Tf;default:(0,vi().t1)(e)}}(l),c=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),u=(0,m().YB)(),g=(0,o().VK)((()=>{const e=t.flatMap((e=>e.getOwnerUserIds()));return f().jj(e)}),[t]),p=(0,r().yK)((e=>({icon:{marginRight:2,fill:e.mediumIconColor},blueFill:{fill:da().ZP.blue}})),[]),h=(0,s.useCallback)((e=>{if(c)return(0,Ys().o)({userId:e,currentSpaceStore:c}).getValue()}),[c]),S=(0,s.useCallback)((e=>{const t=e[e.length-1];let s;s=t===d||void 0===t?{type:cf().uY}:t===Tf?{type:cf().R7}:{type:cf().yj,id:t},i.update((e=>({...e,filterByOwner:s}))),mf().GZ(a,{filter:"owner",value:s.type})}),[d,i,a]),x=(0,Pe().XJ)(O().x.searchActions),y=(0,s.useCallback)((async e=>{let{query:t}=e;if(!c||"resolved"!==x.status)return[];const i=x.value,s=(await i.searchUsers({environment:a,query:t,parentStore:c,userIds:g})).map((e=>e.id));return""===t?[Tf,...s]:s}),[a,c,g,x.status,x.value]),b=(0,s.useCallback)(((e,t)=>{if(!c)return null;if(e===Tf)return(0,se.jsx)(xa().Z,{...t,title:(0,se.jsx)(m()._H,{id:"manageTeamsOwnerFilter.noOwnersFilterOption",defaultMessage:"No owners"}),checkState:l.type===cf().R7,className:"notranslate"});const i=h(e);return i?(0,s.createElement)(ee().Z,{...t,key:e,actor:(0,Q().m3)(i),checkState:d===e}):null}),[c,h,d,l.type]),v=(0,o().VK)((()=>{if(l.type!==cf().yj)return;const e=h(l.id);return e?(0,Hl().Nz)(u,e):void 0}),[l,h,u]);let j;return j=l.type===cf().R7?(0,se.jsx)(m()._H,{id:"manageTeamsOwnerFilter.filterTitle.onlyOrphanedTeams",defaultMessage:"Owner: None"}):v?(0,se.jsx)(m()._H,{id:"manageTeamsOwnerFilter.filterTitle.withSpecifiedOwner",defaultMessage:"Owner: {teamOwnerName}",values:{teamOwnerName:v}}):(0,se.jsx)(m()._H,{id:"manageTeamsOwnerFilter.filterTitle.unset",defaultMessage:"Owner"}),(0,se.jsx)(Y().Z,{mode:Y().z.Pill,title:j,disabled:0===t.length,icon:J().f,iconStyles:{...p.icon,...l.type!==cf().uY&&p.blueFill},items:f().oA([d]),hasItemsSelected:(0,vi().$K)(d),onChange:S,labelText:{title:j,tokenInputPlaceholder:u.formatMessage({defaultMessage:"Search teamspace owner...",id:"manageTeamsOwnerFilter.searchOwner.placeholder"}),resultSectionTitle:u.formatMessage({defaultMessage:"Select users",id:"manageTeamsOwnerFilter.searchOwner.resultsTitle"}),componentDebugName:"ManageTeamsSearchOwnerFilter"},performRequest:y,renderResultMenuItem:b,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}const kf="showAll",If="showTeamsWithSecurityOverrides",Af={[kf]:{key:kf,name:(0,se.jsx)(m()._H,{id:"ManageTeamsSecurityOverridesFilter.showAllOption",defaultMessage:"Show all"}),originName:(0,se.jsx)(m()._H,{id:"ManageTeamsSecurityOverridesFilter.showAllPlaceholder",defaultMessage:"Security"}),showFilterAsOffWhenSelected:!0},[If]:{key:If,name:(0,se.jsx)(m()._H,{id:"ManageTeamsSecurityOverridesFilter.showTeamsWithSecurityOverrides",defaultMessage:"Has overrides"})}};function Df(e){let{manageTeamsStore:t}=e;const i=(0,n().O7)(),a=(0,o().VK)((()=>t.state.showTeamsWithSecurityOverrides),[t]),l=(0,r().yK)((e=>({securityIcon:{width:14,height:14,marginRight:5,fill:e.mediumIconColor},blueFill:{fill:da().ZP.blue}})),[]),d=[Af[kf],Af[If]],c=(0,s.useCallback)((e=>{t.setState({...t.state,showTeamsWithSecurityOverrides:e.key===If}),mf().GZ(i,{filter:"securityOverrides",value:e.key})}),[t,i]),u=Af[a?If:kf];return(0,se.jsx)(Sf,{selectItems:d,currentSelectedItem:u,onChange:c,icon:(0,Kn().X)({...l.securityIcon,...a&&l.blueFill})})}const Pf=16,Rf=5;function Bf(e){let{manageTeamsStore:t,teamStores:i}=e;const n=(0,r().yK)((()=>({container:{display:"flex",alignItems:"center",marginTop:20,flexWrap:"wrap",gap:`${Pf}px ${Rf}px`},searchContainer:{maxWidth:250,marginRight:"auto"},archivedTeamsSwitch:{display:"flex",alignItems:"center",marginLeft:15,marginRight:15},archivedTeamsLabel:{marginLeft:10},dropdownContainer:{display:"flex",alignContent:"stretch",flexWrap:"wrap",gap:`${Pf}px ${Rf}px`}})),[]),a=(0,o().VK)((()=>t.state.searchQuery),[t]),l=(0,s.useCallback)((e=>{t.update((t=>({...t,searchQuery:e})))}),[t]);return(0,se.jsxs)("div",{style:n.container,children:[(0,se.jsx)(Zf,{style:n.searchContainer,onChange:l,value:a}),(0,se.jsxs)("div",{style:n.dropdownContainer,children:[(0,se.jsx)(Mf,{manageTeamsStore:t}),(0,se.jsx)(_f,{teamStores:i,manageTeamsStore:t}),(0,se.jsx)(bf,{manageTeamsStore:t}),(0,se.jsx)(Df,{manageTeamsStore:t})]})]})}function Zf(e){let{style:t,value:i,onChange:n}=e;const a=(0,m().YB)(),o=(0,r().yK)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),l=(0,s.useCallback)((e=>n(e.target.value)),[n]);return(0,se.jsx)(Ei().Z,{placeholder:a.formatMessage({defaultMessage:"Search teamspaces...",id:"manageTeamsFilterRow.searchFilter.placeholder"}),style:{...o.input,...t},value:i,onChange:l,left:(0,gf().R)(o.searchIcon),format:Ei().B.Small,showClearButton:!0})}var Uf=()=>i(542487),Hf=()=>i(949842),Of=()=>i(164079);function Ef(e){let{teamStore:t,accessLevel:s,isTeamOwner:a,isArchivedTeam:l,onChangeAccessLevel:d,width:c}=e;const u=(0,n().O7)(),g=function(e){return(0,o().VK)((()=>e.isDefault()),[e])}(t),p=(0,i(550445).U)({teamStore:t,onChange:d,isDefault:g}),f=g?"default":s,S=p.find((e=>e.key===f)),x=!a||l||Boolean(null==S?void 0:S.disableAllOptionsTooltip);let y;x&&(null!=S&&S.disableAllOptionsTooltip||!a?y=(0,se.jsx)(m()._H,{id:"manageTeamsAccessCell.onlyTeamOwnersCanChangeAccessLevel",defaultMessage:"Only teamspace owners can change teamspace access levels"}):l&&(y=(0,se.jsx)(m()._H,{id:"manageTeamsAccessCell.archivedTeamCannotChangeAccessLevel",defaultMessage:"Cannot change access level for archived team"})));const b=(0,i(617111).P)(),v=(0,r().yK)((e=>{const t=e.lightTextColor;return{selectButton:{paddingLeft:8,marginLeft:-8,maxWidth:c},label:{...x&&{color:t},fontSize:h().JB.UIRegular.desktop,fontWeight:h().Ue.regular},chevron:{width:10,marginLeft:4,fill:e.mediumIconColor,...x&&{fill:t}},tooltip:{width:200}}}),[x,c]);if(!S)throw new Error(`Selected access level is not an option found in team access level option: ${f}`);return(0,se.jsx)(hf().Z,{items:p,getKey:e=>e.key,selectedItem:S,onSelect:e=>"private"!==e.key||b?e.onSelect():wt().y(u,{from:"team_security_settings",upsell:{type:"product",product:"business",limit:{type:"none"}}}),renderItem:e=>(0,se.jsx)(fe().Z,{textWrap:!0,style:v.tooltip,placement:xe().Placement.Bottom,disableTooltip:!e.value.tooltip,renderTooltip:()=>e.value.tooltip,render:t=>(0,se.jsx)(xa().Z,{title:e.value.title,...(0,Of().Z)(e,t)})}),disabled:x,renderOrigin:e=>(0,se.jsx)(fe().Z,{textWrap:!0,style:v.tooltip,disableTooltip:!y,renderTooltip:()=>y,alignment:xe().Alignment.Center,placement:xe().Placement.Left,render:t=>(0,se.jsxs)(Bt().D,{style:v.selectButton,disabled:x,...(0,Of().Z)(e,t),children:[(0,se.jsx)(Zi().s,{style:v.label,children:S.level}),(0,Id().i)(v.chevron)]})})})}function Lf(e){let{teamOwnerIds:t,manageTeamsStore:n}=e;const a=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),l=(0,m().YB)(),{userIds:d,groupIds:c}=t,u=(0,s.useMemo)((()=>[...d,...c]),[c,d]),{userStore:g,groupStore:p}=(0,o().VK)((()=>{if(!a)return{userStore:void 0,groupStore:void 0};const{filterByOwner:e}=n.state;let t=d[0]||c[0];if(e.type===cf().yj){const i=e.id;u.includes(i)&&(t=i)}return t?d.includes(t)?{userStore:(0,Ys().o)({userId:t,currentSpaceStore:a}),groupStore:void 0}:{userStore:void 0,groupStore:(0,i(485491).Q)({groupId:t,spaceStore:a})}:{userStore:void 0,groupStore:void 0}}),[a,c,n,u,d]),f=(0,o().VK)((()=>null!=g&&g.isDefined()?(0,Hl().Nz)(l,g.getModel()):null!=p&&p.isDefined()?p.getName():void 0),[g,p,l]),S=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",fontSize:h().JB.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},nMoreOwnersText:{paddingLeft:3,color:e.mediumTextColor},noOwners:{marginRight:8,color:e.lightTextColor},userName:{flexShrink:1}})),[]);return u.length<1?(0,se.jsx)("div",{style:S.noOwners,children:(0,se.jsx)(m()._H,{id:"manageTeamsOwnersCell.noOwners",defaultMessage:"No owners"})}):(0,se.jsxs)("div",{style:S.container,children:[(0,se.jsx)(en().Z,{style:S.userAvatar,avatarShouldShowShadow:!0,userStore:g,size:20}),(0,se.jsx)(Zi().s,{style:S.userName,children:f}),u.length>1&&(0,se.jsx)("div",{style:S.nMoreOwnersText,children:(0,se.jsx)(m()._H,{id:"manageTeamsOwnersCell.nMoreOwnersLabel",defaultMessage:"+{numAdditionalOwners}",values:{numAdditionalOwners:u.length-1}})})]})}const qf=[cf().BR,cf().GR,cf().KP,cf().Aw,cf().a9],Vf={[cf().KP]:{headerTitle:(0,se.jsx)(m()._H,{id:"manageTeamsTable.columnTitle.access",defaultMessage:"Access"}),renderCell:e=>{let{data:t,environment:i}=e;return(0,se.jsx)(Ef,{teamStore:t.store,accessLevel:t.accessLevel,isTeamOwner:t.isCurrentUserOwnerOfTeam,isArchivedTeam:t.isArchivedTeam,onChangeAccessLevel:(e,s)=>Zp().Ju({environment:i,store:t.store,accessLevel:e,isDefault:s,teamName:t.name,from:"manage_teams_table"}),width:90})},colWidth:{width:90},hasClickableContents:!0},[cf().BR]:{headerTitle:(0,se.jsx)(m()._H,{id:"manageTeamspacesTable.columnTitle.teamspace",defaultMessage:"Teamspace"}),renderCell:e=>{let{data:t}=e;return(0,se.jsx)(Nf,{teamStore:t.store,isArchivedTeam:t.isArchivedTeam,name:t.name})},colWidth:{minWidth:30,widthPercent:35}},[cf().GR]:{headerTitle:(0,se.jsx)(m()._H,{id:"manageTeamsTable.columnTitle.owners",defaultMessage:"Owners"}),renderCell:e=>{let{data:t,manageTeamsStore:i}=e;return(0,se.jsx)(Lf,{teamOwnerIds:t.owners,manageTeamsStore:i})},colWidth:{minWidth:60,widthPercent:25}},[cf().Aw]:{headerTitle:(0,se.jsx)(m()._H,{id:"manageTeamsTable.columnTitle.updated",defaultMessage:"Updated"}),renderCell:e=>{let{data:t}=e;return t.lastUpdated&&(0,se.jsx)(Ff,{lastUpdatedMillis:t.lastUpdated})},colWidth:{minWidth:50,widthPercent:15}},[cf().a9]:{headerTitle:void 0,renderCell:e=>{let{data:t}=e;return(0,se.jsx)(i(626360).OutlinerTeamOverflow,{teamStore:t.store,from:"manage_teams_table"})},colWidth:{width:30},hasClickableContents:!0}};function Nf(e){let{teamStore:t,name:s,isArchivedTeam:a}=e;const o=(0,n().O7)(),l=(0,i(132222).e)(t),d=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},teamIcon:{marginRight:12},nameAndMembersContainer:{display:"flex",flexDirection:"column",minWidth:0},nameAndArchivedPillContainer:{display:"flex"},nameText:{lineHeight:"18px",fontWeight:h().Ue.regular},smallText:{fontSize:(0,i(641506).yv)(o,"UISmall"),color:e.mediumTextColor,fontWeight:h().Ue.regular},archivedTag:{marginLeft:5}})),[o]),c=`${(0,i(983135).K)(t)}`,u=(0,se.jsx)(m()._H,{id:"manageTeamsTableColumnData.numMembersLabel",defaultMessage:"{numMembers, plural, one {1 member} other {{numMembers} members}}",values:{numMembers:c}}),g=l?(0,se.jsxs)(se.Fragment,{children:[" â€¢ ",(0,se.jsx)(m()._H,{id:"manageTeamsTableColumnData.joinedLabel",defaultMessage:"Joined"})]}):void 0,p=f().oA([u,g]);return(0,se.jsxs)("div",{style:d.container,children:[(0,se.jsx)(Up().p,{style:d.teamIcon,size:28,store:t,disabled:!0}),(0,se.jsxs)("div",{style:d.nameAndMembersContainer,children:[(0,se.jsxs)("div",{style:d.nameAndArchivedPillContainer,children:[(0,se.jsx)(Zi().s,{style:d.nameText,children:s}),a&&(0,se.jsx)(X().Z,{desktopStyle:d.archivedTag,mobileStyle:d.archivedTag,children:(0,se.jsx)(m()._H,{id:"manageTeamsTable.archivedTag",defaultMessage:"Archived"})})]}),(0,se.jsx)(Zi().s,{style:d.smallText,children:p})]})]})}function Ff(e){let{lastUpdatedMillis:t}=e;return(0,se.jsx)(Zi().s,{children:(0,qo().Yx)(t,"very_short",os().locale)})}function Kf(e){let{teamStores:t,manageTeamsStore:i}=e;const a=(0,n().O7)(),l=(0,o().VK)((()=>et().default.state.currentUserStore),[]),{sortAscending:d,sortColumn:c}=(0,o().VK)((()=>{const{sortAscending:e,sortColumn:t}=i.state;return{sortAscending:e,sortColumn:t}}),[i]),u=(0,o().VK)((()=>{const e=null==l?void 0:l.id;return e?f().oA(t.map((t=>{if(!t.canRead()||!t.isReady())return;const{ownerUserIds:i,ownerGroupIds:s}=t.getAllOwnerIds();return{store:t,name:t.getName()??"",owners:{userIds:i,groupIds:s},isCurrentUserOwnerOfTeam:Boolean(t.isOwner(e)),hasSecurityOverrides:t.hasSecurityOverrides(),accessLevel:t.getTeamAccessLevel(),isArchivedTeam:(0,Uf().m4)({archived_by:t.getArchivedBy()}),lastUpdated:t.getLastEditedTime()}}))):[]}),[null==l?void 0:l.id,t]),g=(0,o().VK)((()=>{const{showOnlyArchivedTeams:e,filterByOwner:t,showTeamsWithSecurityOverrides:s,filterAccess:n}=i.state;return u.filter((t=>e?t.isArchivedTeam:!t.isArchivedTeam)).filter((e=>!s||e.hasSecurityOverrides)).filter((e=>{if(n===cf().nu&&"open"!==e.accessLevel)return!1;if(n===cf().XI&&"closed"!==e.accessLevel)return!1;if(n===cf().TI&&"private"!==e.accessLevel)return!1;switch(t.type){case cf().R7:return e.owners.userIds.length+e.owners.groupIds.length===0;case cf().yj:return[...e.owners.userIds,e.owners.groupIds].includes(t.id);case cf().uY:return!0;default:(0,vi().t1)(t)}}))}),[i,u]),p=(0,o().VK)((()=>{const{sortAscending:e,sortColumn:t}=i.state;return(0,rf().CN)({data:g,sortAscending:e,sortColumn:t})}),[i,g]),m=(0,o().VK)((()=>(0,Om().ZP)(i.state.searchQuery,p,(e=>e.name))),[i,p]),h=(0,s.useCallback)((e=>Zp().RF({environment:a,teamId:e,tab:Bp().a.Members,from:"manage_teams_table"})),[a]),S=(0,r().yK)((e=>({container:{marginTop:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:qf.reduce(((e,t)=>e+Xf(Vf[t].colWidth)+Qf),0)},tableHeaderRow:{borderTop:`1px solid ${e.tableDividerColor}`,borderBottom:`1px solid ${e.tableDividerColor}`},noTeamsLabel:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]),x=(0,s.useCallback)((e=>{const{sortColumn:t,sortAscending:s}=i.state,n=e===t&&!s;i.setState({...i.state,sortAscending:n,sortColumn:e}),mf().dw(a,{sortBy:e,sortOrder:s?"ascending":"descending"})}),[i,a]),y=(0,s.useCallback)((()=>{i.reset()}),[i]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)("table",{style:S.container,children:[(0,se.jsx)("thead",{children:(0,se.jsx)("tr",{style:S.tableHeaderRow,children:qf.map((e=>(0,se.jsx)(zf,{column:e,onSortableColumnClick:x,sortAscending:d,sortColumn:c},`header_${e}`)))})}),(0,se.jsxs)("tbody",{children:[(0,se.jsx)("tr",{children:qf.map((e=>(0,se.jsx)("td",{},`padding_row_${e}`)))}),m.map((e=>(0,se.jsx)(Wf,{onShowTeamSettings:h,teamData:e,manageTeamsStore:i},`${e.store.id}_row`)))]})]}),(0,se.jsx)(Yf,{style:S.noTeamsLabel,numItemsAfterFilter:m.length,numItemsBeforeFilter:t.length,onResetFilters:y})]})}function Wf(e){let{teamData:t,manageTeamsStore:i,onShowTeamSettings:n}=e;const[a,o]=(0,s.useState)(!1),l=(0,s.useCallback)((()=>o(!0)),[]),d=(0,s.useCallback)((()=>o(!1)),[]),c=(0,s.useCallback)((e=>{$f(e,(()=>n(t.store.id)))}),[n,t.store.id]),u=!t.isArchivedTeam,g=(0,r().yK)((e=>({teamRow:{cursor:u?"pointer":"default",borderBottom:`1px solid ${e.tableDividerColor}`}})),[u]);return(0,se.jsx)("tr",{onMouseLeave:u?d:void 0,onMouseEnter:u?l:void 0,style:g.teamRow,onClick:u?c:void 0,children:qf.map((e=>(0,se.jsx)(Gf,{isRowHovered:a,teamData:t,columnData:Vf[e],manageTeamsStore:i},`${t.store.id}_${e}`)))})}function zf(e){let{column:t,onSortableColumnClick:i,sortColumn:s,sortAscending:n}=e;const a=Vf[t],o=(0,r().yK)((e=>({th:eh(a),innerDiv:{display:"flex",alignItems:"center",minWidth:Xf(a.colWidth),height:32},text:{fontSize:h().JB.UISmall.desktop,fontWeight:h().Ue.regular,color:e.mediumTextColor},sortButton:{padding:5,margin:-5,overflow:"hidden",maxWidth:"100%"},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[a]),l=(0,se.jsx)(Zi().s,{style:o.text,children:a.headerTitle}),d=(c=t,cf().xj.includes(c)?(0,se.jsxs)(Bt().D,{style:o.sortButton,onClick:()=>i(t),children:[l,(()=>{if(t===s)return(0,ku().K)({...o.sortIcon,...n&&{transform:"rotate(180deg)"}})})()]}):l);var c;return(0,se.jsx)("th",{style:o.th,children:(0,se.jsx)("div",{style:o.innerDiv,children:d})})}function Gf(e){let{teamData:t,columnData:i,isRowHovered:s,manageTeamsStore:a}=e;const o=(0,n().O7)(),l=(0,r().yK)((e=>({td:{...eh(i),...s&&{background:e.buttonHoveredBackground}},innerDiv:{minWidth:Xf(i.colWidth),fontSize:h().JB.UIRegular.desktop,color:e.regularTextColor,height:56,display:"flex",alignItems:"center"}})),[i,s]),d=$f,c=Boolean(i.hasClickableContents);return(0,se.jsx)("td",{style:l.td,children:(0,se.jsx)("div",{style:l.innerDiv,onClick:c?d:void 0,children:i.renderCell({environment:o,data:t,manageTeamsStore:a})})})}function Yf(e){let{style:t,numItemsBeforeFilter:i,numItemsAfterFilter:s,onResetFilters:n}=e;if(0!==s)return null;let a;return a=0!==i?(0,se.jsx)(m()._H,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.teamsFilteredOut",defaultMessage:"Could not find any teamspaces. <linkbutton>Reset your filters</linkbutton>",values:{linkbutton:e=>(0,se.jsx)(us().Z,{onClick:n,children:e})}}):(0,se.jsx)(m()._H,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.noTeamsExist",defaultMessage:"Could not find any teamspaces."}),(0,se.jsx)(he().Z,{isSmall:!0,style:t,children:a})}function $f(e,t){(0,Hf().ZP)({event:e,context:Hf().Af.ManageTeamsRowClick,callback:t})}const Qf=10,Jf={paddingLeft:Qf/2,paddingRight:Qf/2};function Xf(e){return"minWidth"in e?e.minWidth:e.width}function eh(e){let t={};return t="width"in e.colWidth?{width:e.colWidth.width}:{width:`${e.colWidth.widthPercent}%`,minWidth:e.colWidth.minWidth},{...Jf,...t}}function th(e){let{}=e;const{isMobile:t=!1}=(0,n().Fy)(),i=(0,n().O7)(),a=(0,o().qz)(cf().yl),l=(0,r().yK)((()=>({container:{marginTop:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},subheader:{display:"flex",flexDirection:"column",flexShrink:1,overflow:"hidden"}})),[]),{unarchivedTeamIds:d,archivedTeamIds:c,isLoading:u}=(0,o().VK)((()=>{const e=uf().Z.state;return"loaded"!==e.loadingState?{unarchivedTeamIds:[],archivedTeamIds:[],isLoading:!0}:{unarchivedTeamIds:e.unarchivedTeamIds,archivedTeamIds:e.archivedTeamIds,isLoading:!1}}),[]),g=(0,o().VK)((()=>u?[]:(0,rf().GO)({environment:i,teamIds:[...d,...c]})),[c,i,u,d]),p=(0,s.useCallback)((()=>Zp().lo("workspace_settings")),[]);return(0,se.jsxs)("div",{style:l.container,children:[(0,se.jsxs)(le().Z,{large:!t,style:l.header,small:!0,children:[(0,se.jsxs)("div",{style:l.subheader,children:[(0,se.jsx)(m()._H,{id:"manageTeamsBrowser.title",defaultMessage:"Manage teamspaces"}),(0,se.jsx)(he().Z,{isSmall:!0,style:{marginTop:3},children:(0,se.jsx)(m()._H,{id:"manageTeamsBrowser.subtitle",defaultMessage:"Manage all teamspaces you have access to here"})})]}),(0,se.jsx)(Ai().Z,{onClick:p,isLarge:!0,className:Le().myM,children:(0,se.jsx)(m()._H,{id:"manageTeamsBrowser.newTeamButton.text",defaultMessage:"New teamspace"})})]}),u?(0,se.jsx)(as().Z,{}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Bf,{teamStores:g,manageTeamsStore:a}),(0,se.jsx)(Kf,{teamStores:g,manageTeamsStore:a})]})]})}var ih=()=>i(635596);function sh(){const e=(0,n().O7)(),{currentSpaceStore:t,currentUserStore:a}=(0,o().VK)((()=>{const{currentSpaceStore:e,currentUserStore:t}=et().default.state;return{currentSpaceStore:e,currentUserStore:t}}),[]);return(0,s.useEffect)((()=>{if("loading"===uf().Z.state.loadingState||!t||!a)return;yn().F({environment:e,messageStoreEmitValue:-1});const s=ih().ZP.addListener((0,i(183922).pD)({userId:a.id,spaceId:t.id}),((t,i)=>{yn().F({environment:e,messageStoreEmitValue:i})}),void 0,e);return function(){s&&ih().ZP.removeListener(s,e)}}),[t,a,e]),null}const nh=s.memo(sh);var ah=()=>i(509695);function oh(){const e=(0,n().Fy)();return(0,se.jsx)(le().Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full",children:(0,se.jsx)(m()._H,{id:"teamsWorkspaceSettings.title",defaultMessage:"Teamspace settings"})})}function rh(){const e=(0,n().O7)(),t=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),i=(0,o().qz)(void 0,at().Z),a=(0,o().VK)((()=>t&&i.getValueForSpace(t)),[t,i]),r=(0,o().VK)((()=>(0,Se().F$)()),[]),l=(null==a?void 0:a.disableTeamCreation)??!1,d=(null==a?void 0:a.disableTeamGuests)??!1,c=void 0===a,u=(0,s.useCallback)((()=>{const i=l?"allowTeamCreation":"disableTeamCreation";t&&a&&(0,rf().Bb)({newSettingValue:i,environment:e,spaceStore:t,workspaceSecuritySettings:a})}),[t,l,e,a]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ah().O,{disabled:c,onChange:u,title:(0,se.jsx)(m()._H,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),description:(0,se.jsx)(m()._H,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.caption",defaultMessage:"Only allow workspace owners to create teamspaces"}),selected:l}),(0,se.jsx)(ns().Z,{size:34}),r&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ah().O,{disabled:c,onChange:async function(){if(t&&a){if(!Boolean(a.disableTeamGuests)){const{accept:e}=await v().gt({message:(0,se.jsx)(m()._H,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.message",defaultMessage:"Are you sure you want to disable teamspace guests?"}),description:(0,se.jsx)(m()._H,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.description",defaultMessage:"This action will remove all teamspace guests from the workspace."}),acceptLabel:(0,se.jsx)(m()._H,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.acceptButton",defaultMessage:"Disable and remove teamspace guests"})});if(!e)return}Xt().n(e,{securitySettingsState:{...a,disableTeamGuests:!a.disableTeamGuests},spaceStore:t})}},title:(0,se.jsx)(m()._H,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.title",defaultMessage:"Allow teamspace owners to add teamspace guests"}),description:(0,se.jsx)(m()._H,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.caption",defaultMessage:"This will allow teamspace owners with membership admin permissions to add teamspace guests. Disabling will remove all teamspace guests."}),selected:!d}),(0,se.jsx)(ns().Z,{size:34})]})]})}function lh(e){let{}=e;const t=(0,r().yK)((()=>({learnMoreLinkContainer:{paddingTop:6,paddingBottom:20}})),[]),i=(0,n().O7)(),a=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),l=(0,s.useCallback)((async e=>{let{addedTeams:t,removedTeams:s}=e;a&&await(0,rf().ci)({environment:i,addedTeams:t,removedTeams:s,spaceStore:a})}),[a,i]),{unarchivedTeams:d,isLoaded:c}=(0,Ti().r8)(),u=0===d.length?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(df().h,{unarchivedTeams:d,onUpdate:l,description:(0,se.jsx)(he().Z,{isSmall:!0,isMultiline:!0,children:(0,se.jsx)(m()._H,{id:"teamsWorkspaceSettings.defaultTeams.caption",defaultMessage:"Choose teamspaces that all new and current workspace members will automatically join"})})}),(0,se.jsx)(ns().Z,{size:34})]});return(0,se.jsxs)(Pt().ZP,{children:[(0,se.jsx)(oh,{}),(0,se.jsx)(lf().Z,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_workspace_settings",containerStyle:t.learnMoreLinkContainer}),(0,se.jsx)(nh,{}),c?(0,se.jsxs)(se.Fragment,{children:[u,(0,se.jsx)(rh,{}),(0,se.jsx)(th,{})]}):null]})}var dh=()=>i(219592),ch=()=>i(231077),uh=()=>i(725751),gh=()=>i(505365),ph=()=>i(330125);function mh(){const e=(0,o().VK)((()=>{var e;return null===(e=uh().default.state.preferences)||void 0===e?void 0:e.onStartup}),[]);if(!e)return null;const t=[{key:"continue",label:(0,se.jsx)(m()._H,{id:"OnDesktopAppStartupSetting.continue.label",defaultMessage:"Continue where you left off"}),renderIcon:e=>(0,gh().Y)({width:20,height:20,...e})},{key:"default_page",label:(0,se.jsx)(m()._H,{id:"OnDesktopAppStartupSetting.defaultPage.label",defaultMessage:"Your default page"}),renderIcon:e=>(0,ph().z)({width:20,height:20,...e})}];return(0,se.jsx)(Fi().Z,{isMobile:!1,title:(0,se.jsx)(m()._H,{id:"onStartup.title",defaultMessage:"On startup"}),caption:(0,se.jsx)(m()._H,{id:"onStartup.description",defaultMessage:"Choose what to show when the Notion app starts."}),type:"dropdown",currentOption:e,options:t,onSelectOption:e=>{ch().electronAppFeatures.setPreference("onStartup",e)}})}var fh=()=>i(218842);const hh=function(){const e=(0,o().VK)((()=>{var e;return null===(e=uh().default.state.preferences)||void 0===e?void 0:e.onStartup}),[]),t=(0,n().O7)(),s=(0,fh().Ez)({environment:t}),a=(0,o().VK)((()=>!t.device.isMobile&&Boolean("on"===ye().default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))),[t]),r=[...(0,o().VK)((()=>a&&Array.isArray(s)?s:[]),[a,s]),e?{key:"on-startup",renderSettingsItem:()=>(0,se.jsx)(mh,{})}:void 0,{key:"default-page",renderSettingsItem:()=>(0,se.jsx)(i(233126).Z,{isMobile:!1})}].filter(vi().$K);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",children:a?(0,se.jsx)(m()._H,{id:"desktopAppSettings.settingsSection.title",defaultMessage:"Desktop app"}):(0,se.jsx)(m()._H,{id:"desktopAppStartupSettings.settingsSection.title",defaultMessage:"Startup"})}),(0,se.jsx)(_d().O,{items:r}),(0,se.jsx)(ns().Z,{size:48,isHidden:!0})]})};var Sh=()=>i(806856);const xh=function(e){let{isMobile:t}=e;const i=(0,n().O7)(),a=(0,o().VK)((()=>et().default.state.currentUserSettingsStore),[]),r=(0,o().VK)((()=>{var e;return null==a||null===(e=a.getSettings())||void 0===e?void 0:e.profile_discoverable}),[a])??!0,l=(0,s.useCallback)((e=>{const t=!r;_().createAndCommit({userAction:"ProfileDIscoverabilitySettings.onToggleOption",environment:i,canUndo:!0,perform:e=>{a&&k().d2({userSettingsStore:a,data:{profile_discoverable:t},transaction:e})}})}),[i,r,a]),d=(0,se.jsx)(m()._H,{id:"profileDiscoverabilitySettings.title",defaultMessage:"Profile discoverability"}),c=(0,se.jsx)(m()._H,{id:"profileDiscoverabilitySettings.caption",defaultMessage:"Users with your email can see your name and profile picture when inviting you to a new workspace. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,se.jsx)(us().Z,{external:!0,href:(0,Ne().UY)("guides.profileSettings"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,se.jsx)(Fi().Z,{isMobile:t,title:d,caption:c,isOn:r,type:"toggle",onToggle:()=>l(a)})};const yh=(0,i(968433).M)((function(e){let{passwordRequestStore:t,userEmailDomainSettings:r,billingData:l}=e;const{isPhone:d,isMobile:c,isElectron:u,isMobileNative:g}=(0,n().Fy)(),p=(0,n().O7)(),f=(0,o().VK)((()=>Ht().default.state.online),[]),h=(0,fh().Ez)({environment:p}),S=(0,fh().qs)(),x=(0,o().qz)(void 0,dt().Z);(0,a().K)((()=>{M().E(p,x)}));const y=(0,o().VK)((()=>x.state.accountSettings),[x]),b=(0,ze().P)(),v=(0,o().VK)((()=>(0,Kt().t_)(p)),[p]),j=(0,o().VK)((()=>c&&t?(0,fh().Eo)({isPhone:d,isMobileNative:g,showOfflineSettings:b,passwordRequestStore:t,userEmailDomainSettings:r,billingData:l,accountSettings:y}):v?S:h),[h,c,d,g,b,t,r,y,l,S,v]);(0,s.useEffect)((()=>(u&&ch().setGlobalShortcutsEnabled(!1),()=>{u&&ch().setGlobalShortcutsEnabled(!0)})),[u]);const C=[{key:"timezone-auto",renderSettingsItem:()=>(0,se.jsx)(Md,{isMobile:c})},{key:"timezone-manual",renderSettingsItem:()=>(0,se.jsx)(wd,{isMobile:c})}].filter(vi().$K),w=[(0,o().VK)((()=>(0,Sh().h)(p)),[p])?{key:"cookies",renderSettingsItem:()=>(0,se.jsx)(Sh().Z,{isMobile:c})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,se.jsx)(i(563286).H,{isMobile:c})},{key:"profile-discoverability",renderSettingsItem:()=>(0,se.jsx)(xh,{isMobile:c})}].filter(vi().$K);return f?(0,se.jsxs)(Pt().ZP,{disableScroller:c,children:[(0,se.jsx)(le().Z,{large:!c,divider:"full",children:v?(0,se.jsx)(m()._H,{id:"preferences.settingsSection.title",defaultMessage:"Preferences"}):(0,se.jsx)(m()._H,{id:"mySettings.settingsSection.title",defaultMessage:"My settings"})}),(0,se.jsx)(_d().O,{items:j}),v?(0,se.jsx)(Bd,{}):null,(0,se.jsx)(ns().Z,{size:48,isHidden:!0}),(0,se.jsx)(hh,{}),v?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le().Z,{large:!c,divider:"full",children:(0,se.jsx)(m()._H,{id:"notificationAndPersonalSettings.dateAndTimeSection.title",defaultMessage:"Date & time"})}),(0,se.jsx)(_d().O,{items:C}),(0,se.jsx)(ns().Z,{size:48,isHidden:!0})]}),(0,se.jsx)(le().Z,{large:!c,divider:"full",children:(0,se.jsx)(m()._H,{id:"mySettings.privacySection.title",defaultMessage:"Privacy"})}),(0,se.jsx)(_d().O,{items:w})]}):(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(he().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{defaultMessage:"Please go online to manage settings.",id:"mySettings.goOnline.prompt"})})})}));var bh=()=>i(615389);function vh(e){const{up:t}=e,i={width:10,height:10,marginLeft:4};return t?(0,ku().K)({...i,transform:"rotate(180deg)"}):(0,ku().K)(i)}function jh(e){let{users:t,store:i,extraColumns:n,initialSort:a,tableStyle:r}=e;const[l,d]=(0,s.useState)(a),c=(0,m().YB)();function u(e,t){return(0,se.jsxs)(me().Z,{disabled:!t.sortable,ignoreLocalHoverState:!0,onClick:()=>{!function(e){d({column:e,asc:(null==l?void 0:l.column)===e&&!(null!=l&&l.asc)})}(e)},style:{display:"flex",alignItems:"center"},children:[t.title,t.sortable&&l&&l.column===e&&vh({up:l.asc})]},e)}const g=(0,s.useMemo)((()=>({title:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"60%"},sortable:!0,renderer:e=>(0,se.jsx)(be().Z,{actorStore:e}),getValue:e=>e.getDisplayName(c)})),[c]),p=(0,s.useMemo)((()=>({name:g,...n})),[n,g]),h=f().XP(p).map((e=>({key:e,header:u(e,p[e]),style:p[e].style}))),S=(0,o().VK)((()=>{const e=t.map((e=>te().U6.createChildStore(i,{table:B().KJ,id:e.userId}))).filter((e=>e.isDefined()));return l?e.sort(((e,t)=>{const i=p[l.column].getValue(e),s=p[l.column].getValue(t),n=i<s?-1:i>s?1:0;return l.asc?n:-1*n})):e}),[t,i,p,l]);return(0,se.jsx)(qu().Z,{columns:h,rows:S.map((e=>{const t=Object.values(p).map(((t,i)=>t.renderer?t.renderer(e):(0,se.jsx)(s.Fragment,{children:t.getValue(e)},i)));return{key:e.id,columns:t}})),tableStyle:r})}function Ch(e){const{store:t}=e,{isOnline:i,subscriptionDataStoreData:s,userSimilarityData:n,visibleUsersLoaded:a,visibleUsers:r}=(0,o().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state,i=e?(0,Yc().CM)(e):[],s=f().yW(i.map((e=>te().U6.createChildStore(t,{table:B().KJ,id:e.userId}).isReady())));return{isOnline:Ht().default.state.online,subscriptionDataStoreData:e,userSimilarityData:bh().O.state||{},visibleUsersLoaded:s,visibleUsers:i}}),[t]);if(!i)return(0,se.jsx)(he().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m()._H,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})});if(!s)return(0,se.jsx)(as().Z,{style:{margin:"calc(50% - 1em) auto"}});if(!a)return(0,se.jsx)(as().Z,{style:{margin:"calc(50% - 1em) auto"}});const l={style:{},title:(0,se.jsx)(se.Fragment,{children:"Similarity Score"}),sortable:!0,renderer:e=>{var t;return(0,se.jsx)(se.Fragment,{children:(null===(t=n[e.id])||void 0===t?void 0:t.toFixed(3))||0})},getValue:e=>n[e.id]||0};return(0,se.jsxs)("div",{style:{width:"100%"},children:[(0,se.jsx)(le().Z,{large:!0,divider:"full",style:{marginBottom:16,paddingBottom:4,display:"flex"},children:"User Similarity Scores"}),(0,se.jsx)(jh,{users:r,store:t,extraColumns:{similarityColumn:l},initialSort:{column:"similarityColumn",asc:!1},tableStyle:{borderTop:void 0}})]})}const wh={overflow:"auto",paddingTop:10,paddingBottom:12},Mh={display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",paddingLeft:4,paddingRight:4},Th={user_settings:{},profile:{},notifications:{},notifications_and_settings:{},connected_apps:{},language_and_region:{},offline:{},settings:{},teams:{adminOnly:!0,membersOnly:!0},members:{membersOnly:!0},analytics:{membersOnly:!0,enterpriseOnly:!0},plans:{membersOnly:!0},billing:{},subscription:{},requests:{adminOnly:!0},security:{adminOnly:!0},identity_provisioning:{adminOnly:!0},admin_content_search:{adminOnly:!0,enterpriseOnly:!0},integrations:{adminOnly:!0},imports:{},audit_log:{adminOnly:!0,enterpriseOnly:!0},sites:{membersOnly:!0},custom_emoji:{membersOnly:!0},verified_pages:{membersOnly:!0},experiments:{},performance_toolbar:{},user_similarity_scores:{},collection_debug:{},offline_mode_debug:{}},_h=(0,m().vU)({dialogLabel:{id:"spaceSettings.dialogLabel",defaultMessage:"Settings & members"}});function kh(e){let{spaceStore:t,userStore:l}=e;const d=(0,n().O7)(),{open:c,currentTab:u,openedFrom:g,upsellType:p}=(0,o().VK)((()=>{const{open:e,currentTab:t,openedFrom:i,upsellType:s}=ct().default.state;return{open:e,currentTab:t,openedFrom:i,upsellType:s}}),[]),m=(0,o().qz)(void 0,i(536984).Z),f=(0,o().qz)(void 0,dt().Z),h=(0,o().qz)(void 0,at().Z),x=(0,o().qz)(void 0,nt),y=(0,o().qz)(void 0,lt);(0,a().K)((()=>{const e=h.getValueForSpace(t);e&&h.setState(e)})),(0,a().K)((()=>{M().E(d,f)})),(0,s.useEffect)((()=>{c&&b().SU(d,{tab:u,from:g,upsell_type:p})}),[c]);const v=(0,s.useCallback)((()=>{pt().bi(d),Ah(),S().kj({environment:d,spaceId:t.id,canAdmin:t.canAdmin()})}),[d,t]),j=(0,s.useCallback)((()=>{Lh((()=>{ct().default.setState({...ct().default.state,open:!1}),i(658530).Z.reset(),y.reset(),Ah(),ut().Z.reset()}),d,t,m,f,h)}),[d,t,m,f,h,y]),C=(0,r().yK)((()=>({modalInner:{width:1150,maxWidth:"calc(100vw - 100px)",height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:12,maxHeight:715}})),[]);return(0,se.jsx)(rs().Z,{ariaLabel:H().Z.formatMessage(_h.dialogLabel),open:c,innerStyle:C.modalInner,onOpen:v,onDismiss:j,render:()=>(0,se.jsx)(Fh,{spaceStore:t,userStore:l,spaceBasicSettingsStore:m,spaceProfileSettingsStore:f,securitySettingsStore:h,samlSettingsStore:x,spaceDomainSettingsStore:y}),className:Le().zYS})}function Ih(e,t){const i=Th[e];return!(i.adminOnly&&!t.canAdmin())&&(!(i.membersOnly&&!t.canRead())&&!(i.enterpriseOnly&&!(0,p().wP)(t.getSubscriptionTier())))}function Ah(){E().Z.reset(),F.reset()}function Dh(e){let{userStore:t}=e;const i=(0,m().YB)(),s=(0,o().VK)((()=>t.getFullName(i)),[i,t]);return s?(0,se.jsx)(he().Z,{style:{fontWeight:h().Ue.medium},children:s}):null}function Ph(e,t,i){const{disablePublicAccess:s,disableGuests:n,disableMoveToSpace:a,disableExport:o,disableSpacePageEdits:r,disablePublicAccessRequests:l,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,enableAiFeature:p,disableTeamGuests:m,enableGuestInviteRequests:f,enableAiTraining:h,zeroRetentionEnabled:S,disableMemberUpgradeRequests:x}=e.state;_().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:i,canUndo:!0,perform:e=>{w().Xr({environment:i,disablePublicAccess:s,disableGuests:n,disableMoveToSpace:a,disableExport:o,disableSpacePageEdits:r,disablePublicAccessRequests:l,transaction:e,spaceStore:t,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,enableAiFeature:Boolean(p),disableTeamGuests:m,enableGuestInviteRequests:f,enableAiTraining:Boolean(h),zeroRetentionEnabled:Boolean(S),disableMemberUpgradeRequests:Boolean(x)})}})}function Rh(e){let{spaceStore:t}=e;const i=(0,n().O7)(),s=(0,o().VK)((()=>(0,Se().wE)(i)),[i]),a=(0,o().VK)((()=>ut().Z.state.count),[]);return s?(0,se.jsx)(Xm,{}):(0,se.jsx)(Xe().Z,{store:t,unreadAccessRequests:a})}function Bh(e){let{spaceStore:t}=e;const i=(0,n().O7)(),s=(0,o().Kw)(_t().subscriptionDataStoreInstance),a=(0,o().VK)((()=>gt().Z.getData(i,{spaceId:t.id})),[t,i]);if(!s)return null;const r="unsubscribed_admin"===s.type&&s.customerData&&(0,u().E3)(s.customerData.stripe.addOns);if("subscribed_admin"===s.type||r){var l;const e=null===(l=s.customerData)||void 0===l?void 0:l.stripe;return e?(0,se.jsx)(Dt().Z,{spaceStore:t,subscriptionData:s,upcomingInvoiceData:a,customerData:e}):null}return s&&"unsubscribed_admin"===s.type?(0,se.jsx)(Vt,{spaceStore:t,data:s}):null}function Zh(){const e=(0,o().VK)((()=>(0,Ve().tt)()),[]),t=(0,o().VK)((()=>(0,Ve().RT)()),[]);return(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(xd().Z,{genericImporterEnabled:e,zipImporterEnabled:t})})}function Uh(e){return{fontSize:12,lineHeight:1,marginBottom:1,color:e.mediumTextColor,fontWeight:h().Ue.semibold,alignItems:"center",display:"flex",height:24,paddingLeft:12,paddingRight:11,textOverflow:"ellipsis",overflow:"hidden"}}function Hh(){const e=(0,r().Fg)(),t=(0,n().O7)(),i=(0,o().VK)((()=>(0,Ee().B7)(t)),[t]),s=(0,o().VK)((()=>null==i?void 0:i.getEmail()),[i]),a={size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:i};return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",height:44,paddingLeft:12,paddingRight:12},children:[(0,se.jsx)("div",{style:(0,Rt().xJ)(e),children:(0,se.jsx)(en().Z,{...a})}),i?(0,se.jsxs)("div",{children:[(0,se.jsx)(Dh,{userStore:i}),s&&(0,se.jsx)(he().Z,{isSmall:!0,children:s})]}):(0,se.jsx)(m()._H,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"})]})}function Oh(e){let{tab:t}=e;const i=(0,r().Fg)(),s=(0,n().O7)(),a=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]);return(0,o().VK)((()=>"members"===t&&s.device.isDesktop&&(null==a?void 0:a.canEditMembership())&&(0,Se().p1)()&&!(0,Se().wE)(s)&&ut().Z.state.count>0),[t,s,a])?(0,se.jsx)(Dg().z,{color:i.redBadgeBackground}):null}function Eh(e){let{spaceProfileSettingsStore:t,billingData:i}=e;const s=(0,g().ps)(null==i?void 0:i.subscription,"student");return(0,se.jsx)(Sg,{isEducationPlan:s,spaceProfileSettingsStore:t})}async function Lh(e,t,i,s,n,a){const{currentUserStore:o,currentUserSettingsStore:r}=et().default.state;if(!o||!r)throw new Error("No user or settings store.");const l=(0,se.jsx)(m()._H,{id:"spaceSettings.closeSettingsDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Save changes?"}),d=(0,se.jsx)(m()._H,{id:"spaceSettings.closeSettingsDialog.confirmationButton.label",defaultMessage:"Yes"}),c=(0,se.jsx)(m()._H,{id:"spaceSettings.closeSettingsDialog.cancelationButton.label",defaultMessage:"No"}),{currentTab:u}=ct().default.state;if("profile"===u){if(!f().Xy(n.state,n.getValueForUser(o,r,H().Z.getIntl()))){const{profilePhoto:i,name:s,startDayOfWeek:a}=n.state;return s?v().vC({message:l,showCancel:!0,keepFocus:!0,items:[{label:(0,se.jsx)(m()._H,{id:"spaceSettings.closeSettingsDialog.updateSettingsButton.label",defaultMessage:"Update"}),color:"blue",onAccept:()=>{_().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;if(t&&x().A({userStore:t,data:{name:s,profilePhoto:i},transaction:e}),r){const t=r.getSettings();(null==t?void 0:t.start_day_of_week)!==a&&k().d2({userSettingsStore:r,data:{start_day_of_week:a},transaction:e})}}}),e()}}],handleCancel:()=>{e()}}):v().UW((0,se.jsx)(m()._H,{id:"profileSettings.personalInfoSection.nameMissing.message",defaultMessage:"Please fill in name."})),!0}e()}else if("settings"===u&&i.canEdit()){const n=!f().Xy(a.state,a.getValueForSpace(i)),o=!f().Xy(s.state,s.getValueForSpace(i));if(n||o){const{accept:r}=await v().gt({message:l,acceptLabel:d,cancelLabel:c});return r?(o&&w().OF({environment:t,spaceStore:i,spaceBasicSettingsStore:s}),n&&Ph(a,i,t),e()):e(),!0}e()}else if("audit_log"===u)Ah(),e();else if("analytics"===u)ot().Z.reset(),e();else if("plans"===u&&i.canAdmin()){const s=a.getValueForSpace(i);!f().Xy(a.state,a.getValueForSpace(i))&&s&&(a.setState(s),Ph(a,i,t)),e()}else"teams"===u?(yn().g(),e()):e();return!1}function qh(e){let{tab:t,spaceStore:i,spaceBasicSettingsStore:s,spaceProfileSettingsStore:a,securitySettingsStore:l,spaceDomainSettingsStore:d}=e;const c=(0,r().Fg)(),u=(0,n().O7)(),g=(0,o().VK)((()=>ct().default.state.currentTab===t),[t]),p=(0,o().VK)((()=>Ih(t,i)),[i,t]),m=(0,o().VK)((()=>Rt().mY[t](u,c)),[u,t,c]),f=(0,o().VK)((()=>Rt().j7[t](u)),[u,t]),S=(0,o().VK)((()=>Rt().ap[t](u)),[u,t]),x=(0,Wt().tw)(_t().subscriptionDataStoreInstance),y="plans"===t&&!x,v=g&&!y;if(!p)return null;const j=y?{color:c.text.uiBluePrimary}:void 0;return(0,se.jsxs)(me().Z,{hovered:g,style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:12,paddingRight:12,borderRadius:4,marginTop:1,marginBottom:1,minHeight:27,position:"relative"},onClick:e=>{if(g)return null;Lh((()=>{ct().default.setState({...ct().default.state,currentTab:t,defaultSubtab:void 0}),d.reset(),b().XI(u,{tab:t})}),u,i,s,a,l)},testId:`settings-tab-${t}`,"aria-current":g?"page":void 0,children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",...v&&{fontWeight:h().Ue.semibold}},children:[(0,se.jsx)("div",{style:(0,Rt().xJ)(c,y),children:m}),(0,se.jsx)(he().Z,{style:j,isMultiline:!0,children:f}),S]}),(0,se.jsx)(Oh,{tab:t})]})}function Vh(e){let{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:c,renderBelowPrompt:u}=e;const g=(0,r().Fg)(),p=(0,n().O7)(),f=(0,m().YB)(),h=(0,o().VK)((()=>function(e){var t,i;const{currentSpaceViewStore:s,currentSpaceStore:n,currentUserStore:a}=et().default.state;if(!n||!Ih("analytics",n))return!1;if(null==a||!a.id)return!1;if(null==n||!n.isDefined())return!1;const o=null==s?void 0:s.getSettings();return"dismissed"!==(null==o||null===(t=o.space_analytics_settings_prompt)||void 0===t?void 0:t.status)&&"hidden"!==(null==o||null===(i=o.space_analytics_settings_prompt)||void 0===i?void 0:i.status)&&(T().lo(e),!0)}(p)),[p]),S=(0,o().VK)((()=>et().default.state.currentSpaceStore),[]),x=(0,o().VK)((()=>null==S?void 0:S.canAdmin()),[S]),y=(0,o().VK)((()=>function(e,t){var i,s;const{currentSpaceViewStore:n,currentSpaceStore:a,currentUserStore:o}=et().default.state;if(null==o||!o.id)return!1;if(null==a||!a.isDefined())return!1;const r=null==n?void 0:n.getSettings();return"dismissed"!==(null==r||null===(i=r.mfa_settings_prompt)||void 0===i?void 0:i.status)&&"hidden"!==(null==r||null===(s=r.mfa_settings_prompt)||void 0===s?void 0:s.status)&&"off"===t.state.accountSettings.mfaStatus&&(T().GZ(e),!0)}(p,s)),[p,s]);if(h){const e=x?(0,se.jsx)(m()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.workspaceOwner",defaultMessage:"Explore how members & guests are engaging with this workspace, common searches that are made, and content engagement metrics with workspace analytics."}):(0,se.jsx)(m()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.member",defaultMessage:"See how your content is performing by reviewing metrics like number of views or unique visitors using workspace analytics."});return(0,se.jsx)(Kd,{onDismiss:()=>T().TY(p),onClick:()=>{Lh((()=>{ct().default.setState({...ct().default.state,currentTab:"analytics",defaultSubtab:void 0}),c.reset(),b().XI(p,{tab:"analytics"}),T().pE(p)}),p,t,i,s,a)},onView:e=>{"enterprise"===(null==S?void 0:S.getSubscriptionTier())&&T().pE(e)},onClickLearnMore:()=>{const e=(0,Ne().UY)("guides.workspaceAnalytics");C().D({environment:p,url:e})},descriptionMessage:e,title:(0,se.jsx)(m()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.title",defaultMessage:"New workspace analytics"}),buttonText:(0,se.jsx)(m()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),buttonAriaLabel:f.formatMessage({id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),icon:(0,d().v)((0,Rt().tc)(g))})}return y?(0,se.jsx)(Kd,{onClick:()=>{Lh((()=>{ct().default.setState({...ct().default.state,open:!0,currentTab:"profile",defaultSubtab:void 0,highlightedSetting:ct().R.TwoStepVerification}),b().XI(p,{tab:"profile"})}),p,t,i,s,a)},onView:T().E6,onDismiss:()=>T().ZJ(p),onClickLearnMore:()=>{const e=(0,Ne().UY)("guides.mfa");C().D({environment:p,url:e})},descriptionMessage:(0,se.jsx)(m()._H,{id:"mfaSettingsPrompt.description",defaultMessage:"2-step verification, also known as 2FA or MFA, is now available. Add a secondary method of verification used during login."}),title:(0,se.jsx)(m()._H,{id:"mfaSettingsPrompt.title",defaultMessage:"Add an extra layer of security to your account."}),buttonText:(0,se.jsx)(m()._H,{id:"mfaSettingsPrompt.button.label",defaultMessage:"Enable 2-step verification"}),buttonAriaLabel:f.formatMessage({id:"mfaSettingsPrompt.button.ariaLabel",defaultMessage:"Enable 2-step verification"}),icon:(0,l().Q)((0,Rt().tc)(g))}):u}function Nh(e){let{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l}=e;const d=(0,r().Fg)(),f=(0,n().O7)(),h=(0,Wt().pQ)({spaceId:t.id}),S=(0,o().VK)((()=>ct().default.state.currentTab),[]),x=(0,g().TK)(h),b=function(e,t){var i;const s=(0,o().Kw)(_t().subscriptionDataStoreInstance),n=(0,Wt().pQ)({spaceId:t.id}),a=(0,o().VK)((()=>t.canAdmin()),[t]);return!(!s||e||!a||"subscribed_admin"!==s.type&&("unsubscribed_admin"!==s.type||!(0,u().E3)(null===(i=s.customerData)||void 0===i?void 0:i.stripe.addOns))&&!(null!=n&&n.paymentMethod||s.hasPaidNonzero))}(x,t),v=(0,o().VK)((()=>t.canAdmin()),[t]),j=function(){const e=(0,zt().r)(),t=(0,Gt().Cv)({spaceId:null==e?void 0:e.id});return(0,o().VK)((()=>{if(!e)return!1;const i=e.canAdmin(),s=(0,g().wO)(null==t?void 0:t.subscription);return(0,Kt().LT)()&&i&&(0,p().mq)(s)}),[t,e])}(),C=Boolean((0,g().a7)(null==h?void 0:h.subscription,"plan")),w=(0,ze().P)(),[M,T,_,k]=(0,o().VK)((()=>{const e=(0,Fe().d)();return[e,e,e,e&&ye().default.checkGate({gateName:"download_for_offline"})]}),[]),I=(0,Je().hZ)(),A=(0,o().VK)((()=>{const e=tt().Z.getData(f,{spaceId:t.id}),i=e&&(null==e?void 0:e.pointers.length)>0;return!f.device.isMobile&&((0,qe().Zr)({spaceStore:t})||i)}),[f,t]);(0,We().Z)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0});const D=(0,o().VK)((()=>(0,Ke().ux)(t)),[t]),P=(0,o().VK)((()=>(0,Kt().t_)(f)),[f]);return(0,se.jsxs)("div",{style:Mh,children:[(0,se.jsx)("div",{style:wh,children:(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{style:Uh(d),children:(0,se.jsx)(m()._H,{id:"spaceSettings.sidebar.personalSettingsSection.title",defaultMessage:"Account"})}),P?null:(0,se.jsx)(Hh,{}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"profile"}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"user_settings"}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"notifications"}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"connected_apps"}),P?null:(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"language_and_region"}),w&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"offline"}),(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)("div",{style:Uh(d),children:(0,se.jsx)(m()._H,{id:"spaceSettings.sidebar.workspaceSettingsSection.title",defaultMessage:"Workspace"})}),C||P?null:(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"plans"}),C||!b||P?null:(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"billing"}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"settings"}),j&&!P?(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"requests"}):null,P?null:(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"teams"}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"members"}),P?(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"teams"}):null,P?(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"security"}):null,P?(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"identity_provisioning"}):null,!f.device.isMobile&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"analytics"}),!f.device.isMobile&&P&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"admin_content_search"}),!f.device.isMobile&&P&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"audit_log"}),P?(0,se.jsx)(ns().Z,{size:16,dividerColor:d.stroke.secondary}):null,x&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"subscription"}),D&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"verified_pages"}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"sites"}),A&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"custom_emoji"}),P?null:(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"security"}),P?null:(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"identity_provisioning"}),!f.device.isMobile&&!P&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"admin_content_search"}),(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"integrations"}),!f.device.isMobile&&(0,se.jsx)("span",{onClick:()=>{const e=c().Il();it().Z.setState({flowId:e}),y().Sy(f,{from:"settings",flowId:e})},children:(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"imports"})}),!f.device.isMobile&&!P&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"audit_log"}),P?(0,se.jsx)(ns().Z,{size:16,dividerColor:d.stroke.secondary}):null,j&&P?(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"requests"}):null,b?(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"billing"}):null,P||C?(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"plans"}):null,M&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ns().Z,{size:18,isHidden:!0}),(0,se.jsx)("div",{style:Uh(d),children:(0,se.jsx)(m()._H,{id:"spaceSettings.sidebar.developmentSettingsSection.title",defaultMessage:"Development"})}),T&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"experiments"}),I&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"performance_toolbar"}),_&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"user_similarity_scores"}),T&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"collection_debug"}),k&&(0,se.jsx)(qh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,tab:"offline_mode_debug"})]})]})}),(0,se.jsx)(Vh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:a,spaceDomainSettingsStore:l,renderBelowPrompt:v?(0,se.jsx)(At,{currentSettingsTab:S}):null})]})}function Fh(e){let{spaceStore:t,userStore:i,spaceBasicSettingsStore:a,spaceProfileSettingsStore:r,securitySettingsStore:l,samlSettingsStore:d,spaceDomainSettingsStore:c}=e;const{organizationOverrides:u,organizationInfo:g,isOrganizationOwner:p}=(0,Us().u)({spaceId:t.id}),{onboardingInfo:m}=function(e){let{spaceId:t,allowSecondaryWorkspace:i}=e;const a=(0,n().O7)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(Vd().V),[{status:r,value:l},d]=(0,Cn().r5)((async()=>{const e=await Z().callApi({eventName:"getOrganizationOnboardingInfo",environment:a,data:{spaceId:t,allowSecondaryWorkspace:i}});return"success"===e.type?(o({data:e.data}),e.data.result):"failed"===e.type?{onboardingStatus:"ineligible"}:(0,vi().t1)(e)}),[a,t,o,i]);return{loading:"pending"===r||"idle"===r,onboardingInfo:l,refresh:d}}({spaceId:t.id,allowSecondaryWorkspace:!0}),f=(0,o().VK)((()=>ct().default.state.currentTab),[]),h=(0,Wt().pQ)({spaceId:t.id}),S=(0,o().VK)((()=>function(e,t,i,s,n,a,o,r,l,d,c,u,g){const p={profile:()=>(0,se.jsx)(Eh,{spaceProfileSettingsStore:n,billingData:g}),notifications_and_settings:()=>(0,se.jsx)(Hd().Z,{isMobile:!1,isMobileNative:!1,billingData:g}),user_settings:()=>(0,se.jsx)(yh,{billingData:g}),notifications:()=>(0,se.jsx)(qd,{}),language_and_region:()=>(0,se.jsx)(Bd,{}),connected_apps:()=>(0,se.jsx)(dh().Z,{location:"settings-page"}),offline:()=>(0,se.jsx)(Qe,{}),settings:()=>(0,se.jsx)(zc().ZP,{spaceStore:t,spaceBasicSettingsStore:s,securitySettingsStore:a,organizationOverrides:l}),requests:()=>(0,se.jsx)(Sn,{securitySettingsStore:a,spaceStore:t}),teams:()=>(0,se.jsx)(lh,{}),members:()=>(0,se.jsx)(Rh,{spaceStore:t}),analytics:()=>(0,se.jsx)(Wc,{spaceStore:t}),plans:()=>(0,se.jsx)(Yt().Y,{}),billing:()=>(0,se.jsx)(Bh,{spaceStore:t}),subscription:()=>(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(of().y,{})}),security:()=>(0,se.jsx)(xs,{spaceStore:t,userStore:i,securitySettingsStore:a,organizationOverrides:l}),identity_provisioning:()=>(0,se.jsx)(Sd,{spaceStore:t,userStore:i,samlConfigStore:o,domainSettingsStore:r,organizationInfo:d,isOrganizationOwner:c,organizationOnboardingInfo:u}),admin_content_search:()=>(0,se.jsx)(Zn,{spaceStore:t,userStore:i}),integrations:()=>(0,se.jsx)(Fa,{spaceStore:t,userStore:i,organizationOverrides:l}),audit_log:()=>(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(De,{spaceStore:t})}),imports:()=>(0,se.jsx)(Zh,{}),sites:()=>(0,se.jsx)(Oe,{spaceStore:t}),custom_emoji:()=>(0,se.jsx)(Ue,{spaceStore:t}),verified_pages:()=>(0,se.jsx)(vn,{spaceStore:t}),experiments:()=>(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(Ga().U,{})}),performance_toolbar:()=>(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(Je().IG,{})}),user_similarity_scores:()=>(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(Ch,{store:t})}),collection_debug:()=>(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(Be,{})}),offline_mode_debug:()=>(0,se.jsx)(Pt().ZP,{children:(0,se.jsx)(Ye,{})})};if(Ih(e,t))return p[e];{const e=j().CT(t);return j().r$({currentTab:e}),p[e]}}(f,t,i,a,r,l,d,c,u,g,p,m,h)),[f,d,l,a,c,r,t,i,u,g,p,m,h]);return(0,se.jsx)(za().Z,{capture:!0,allowEsc:!0,render:e=>(0,se.jsx)(Wd,{sidebar:(0,se.jsx)(Nh,{spaceStore:t,spaceBasicSettingsStore:a,spaceProfileSettingsStore:r,securitySettingsStore:l,spaceDomainSettingsStore:c}),...e,children:S()})})}const Kh=s.memo(kh)},322983:(e,t,i)=>{i.d(t,{T2:()=>ce,xJ:()=>ne,tc:()=>ae,ap:()=>de,mY:()=>oe,j7:()=>le,sY:()=>se});i(667294);var s=()=>i(827282),n=i(785893);const a={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M6.575 10A3.425 3.425 0 0 1 10 6.575v-.64c0-.445.533-.664.847-.35l1.328 1.329a.49.49 0 0 1 0 .7l-1.328 1.329a.495.495 0 0 1-.847-.35v-.918A2.325 2.325 0 1 0 12.325 10a.55.55 0 1 1 1.1 0 3.425 3.425 0 0 1-6.85 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},o=(0,s().IU)("arrowInCircleClockwiseInCircle",a);var r=()=>i(102445);const l={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M13.042 9.554a.625.625 0 0 1-.884 0l-1.533-1.533v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 0 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"}),(0,n.jsx)("path",{d:"M17.625 10a7.625 7.625 0 1 1-15.25 0 7.625 7.625 0 0 1 15.25 0M10 16.375a6.375 6.375 0 1 0 0-12.75 6.375 6.375 0 0 0 0 12.75"})]})},d=(0,s().IU)("arrowInCircleUp",l),c={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},u=(0,s().IU)("arrowInCircleUpFill",c);const g={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,n.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},p=(0,s().IU)("arrowUpRightSquare",g),m={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.806 8.074a.625.625 0 1 0-1.072-.643l-2.512 4.185-1.407-1.642a.625.625 0 1 0-.95.814l1.973 2.3a.625.625 0 0 0 1.01-.085z"}),(0,n.jsx)("path",{d:"M10.405 1.724a.625.625 0 0 0-.81 0L7.36 3.628l-2.926.233a.625.625 0 0 0-.573.574L3.628 7.36 1.724 9.595a.624.624 0 0 0 0 .81l1.904 2.234.233 2.926a.625.625 0 0 0 .574.573l2.926.234 2.234 1.904a.624.624 0 0 0 .81 0l2.234-1.904 2.926-.234a.625.625 0 0 0 .573-.573l.234-2.926 1.904-2.234a.624.624 0 0 0 0-.81L16.372 7.36l-.234-2.926a.625.625 0 0 0-.573-.573l-2.926-.234zM8.017 4.711 10 3.02l1.983 1.69c.1.085.224.136.355.147l2.597.207.207 2.597c.01.13.062.255.147.355L16.98 10l-1.69 1.983a.63.63 0 0 0-.147.355l-.207 2.597-2.597.207a.63.63 0 0 0-.355.147L10 16.98l-1.983-1.69a.63.63 0 0 0-.355-.147l-2.597-.207-.207-2.597a.63.63 0 0 0-.147-.355L3.02 10l1.69-1.983a.63.63 0 0 0 .147-.355l.207-2.597 2.597-.207a.63.63 0 0 0 .355-.147"})]})},f=(0,s().IU)("badgeCheck",m);const h={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v6.04l-1.25-.632V7.5H3.625v6.25c0 .483.392.875.875.875h7.213l.454 1.25H4.5a2.125 2.125 0 0 1-2.125-2.125zm2.258.184a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"}),(0,n.jsx)("path",{d:"m17.426 14.65.474-.17a.433.433 0 0 0 .047-.796l-5.644-2.85a.433.433 0 0 0-.604.533l2.268 6.239a.435.435 0 0 0 .815.007l.574-1.509 2.225 2.433a.758.758 0 1 0 1.122-1.022l-2.287-2.501z"})]})},S=(0,s().IU)("browserClick",h),x={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.876 7.978a.625.625 0 1 0-1.072-.643L9.25 11.59 7.815 9.916a.625.625 0 0 0-.95.814l2 2.333a.625.625 0 0 0 1.01-.085z"}),(0,n.jsx)("path",{d:"M10.28 2.241a.63.63 0 0 0-.56 0l-1.89.945a7.5 7.5 0 0 1-3.342.789H3.7a.625.625 0 0 0-.625.625v6.933a5.13 5.13 0 0 0 3.106 4.71l3.573 1.532a.63.63 0 0 0 .492 0l3.573-1.532a5.13 5.13 0 0 0 3.106-4.71V4.6a.625.625 0 0 0-.625-.625h-.788c-1.16 0-2.305-.27-3.343-.79zM8.39 4.304 10 3.499l1.61.805a8.7 8.7 0 0 0 3.902.921h.163v6.308c0 1.55-.924 2.95-2.349 3.562L10 16.52l-3.326-1.425a3.88 3.88 0 0 1-2.349-3.562V5.225h.163c1.354 0 2.69-.315 3.902-.921"})]})},y=(0,s().IU)("checkmarkShield",x),b={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 2.375c-1.778 0-3.415.256-4.63.69-.604.216-1.138.488-1.532.82-.391.331-.713.784-.713 1.347q0 .157.032.304h-.032v9.232c0 .563.322 1.016.713 1.346.394.333.928.605 1.532.82 1.215.435 2.852.691 4.63.691s3.415-.256 4.63-.69c.604-.216 1.138-.488 1.532-.82.391-.331.713-.784.713-1.347V5.536h-.032q.031-.147.032-.304c0-.563-.322-1.016-.713-1.346-.394-.333-.928-.605-1.532-.82-1.215-.435-2.852-.691-4.63-.691M4.375 5.232c0-.053.028-.188.27-.391.238-.201.62-.41 1.146-.599 1.047-.374 2.535-.617 4.209-.617s3.162.243 4.21.617c.526.188.907.398 1.146.599.24.203.269.338.269.391s-.028.188-.27.391c-.238.202-.62.41-1.146.599-1.047.374-2.535.617-4.209.617s-3.162-.243-4.21-.617c-.526-.188-.907-.397-1.146-.599-.24-.203-.269-.338-.269-.39m11.25 1.718V10c0 .053-.028.188-.27.391-.238.201-.62.41-1.146.599-1.047.374-2.535.617-4.209.617s-3.162-.243-4.21-.617c-.526-.188-.907-.398-1.146-.599-.24-.203-.269-.338-.269-.391V6.95c.297.17.633.32.995.45 1.215.433 2.852.69 4.63.69s3.415-.257 4.63-.69c.362-.13.698-.28.995-.45m-11.25 7.818v-3.05c.297.17.633.32.995.449 1.215.434 2.852.69 4.63.69s3.415-.256 4.63-.69c.362-.13.698-.279.995-.45v3.05c0 .054-.028.189-.27.392-.238.201-.62.41-1.146.599-1.047.374-2.535.617-4.209.617s-3.162-.243-4.21-.617c-.526-.188-.907-.398-1.146-.599-.24-.203-.269-.338-.269-.391"})},v=(0,s().IU)("collection",b);const j={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.5 11.031a.5.5 0 0 0-.5.5v1.219a.5.5 0 0 0 .5.5h2.011a.5.5 0 0 0 .5-.5v-1.219a.5.5 0 0 0-.5-.5z"}),(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zM4.5 5.375a.875.875 0 0 0-.875.875v.825h12.75V6.25a.875.875 0 0 0-.875-.875zm-.875 8.375c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875V8.175H3.625z"})]})},C=(0,s().IU)("creditCard",j);const w={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0m3.123-4.514c.55.252 1.21.463 1.953.612q.135-.585.308-1.086a6.6 6.6 0 0 1 .512-1.15 6.4 6.4 0 0 0-2.773 1.624m-.814.994a6.34 6.34 0 0 0-1.029 2.895h3.396c.022-.715.081-1.403.173-2.048-.962-.191-1.827-.48-2.54-.847m-1.029 4.145a6.34 6.34 0 0 0 1.03 2.895c.712-.367 1.577-.656 2.54-.848a19 19 0 0 1-.174-2.047zm4.647 0c.021.657.076 1.283.158 1.862a15 15 0 0 1 3.08 0c.082-.58.137-1.205.158-1.862zm4.647 0a19 19 0 0 1-.173 2.048c.845.169 1.615.412 2.274.717a.6.6 0 0 1 .23.182 6.34 6.34 0 0 0 1.065-2.947zm3.396-1.25a6.34 6.34 0 0 0-1.03-2.895c-.712.367-1.577.656-2.54.847.093.645.152 1.333.174 2.048zm-4.647 0a17 17 0 0 0-.158-1.862 15 15 0 0 1-3.08 0c-.082.58-.137 1.205-.158 1.862zm-6.2 5.139a6.4 6.4 0 0 0 2.773 1.624 6.6 6.6 0 0 1-.512-1.15 11 11 0 0 1-.308-1.086 9 9 0 0 0-1.953.612m9.004 0a9 9 0 0 0-1.953-.611q-.135.584-.308 1.085a6.6 6.6 0 0 1-.512 1.15 6.4 6.4 0 0 0 2.773-1.624m-3.443.067q.136-.395.249-.86a13.7 13.7 0 0 0-2.615-.001q.111.466.248.861c.198.575.42.995.635 1.259.22.269.366.302.424.302s.205-.033.424-.302c.215-.264.437-.684.635-1.259m3.443-9.095a6.4 6.4 0 0 0-2.773-1.624c.196.337.366.726.512 1.15q.173.501.308 1.086a9 9 0 0 0 1.953-.612M10 6.342q.676-.001 1.308-.062a9 9 0 0 0-.249-.861c-.198-.575-.42-.995-.635-1.259-.22-.269-.366-.302-.424-.302s-.204.033-.424.302c-.215.264-.437.684-.635 1.259q-.136.395-.248.861.631.061 1.307.062"})},M=(0,s().IU)("globe",w),T={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.86 6.61a.969.969 0 1 0 0-1.938.969.969 0 0 0 0 1.937"}),(0,n.jsx)("path",{d:"M9.86 1.625a4.984 4.984 0 0 0-2.563 9.26v5.17c0 .18.078.351.213.47l1.938 1.695a.625.625 0 0 0 .823 0l1.937-1.695a.625.625 0 0 0 .063-.877l-1.104-1.289 1.104-1.288a.63.63 0 0 0 .15-.407v-1.779a4.984 4.984 0 0 0-2.563-9.26M6.124 6.609a3.734 3.734 0 1 1 5.394 3.347.63.63 0 0 0-.347.56v1.917l-1.303 1.52c-.2.234-.2.58 0 .813l1.05 1.226-1.06.927-1.312-1.148v-5.255a.63.63 0 0 0-.347-.56 3.73 3.73 0 0 1-2.075-3.347"})]})},_=(0,s().IU)("key",T),k={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},I=(0,s().IU)("lightning",k),A={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},D=(0,s().IU)("magnifyingGlass",A),P={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"m3.246 16.825 4.42-1.895 4.41 1.89a.63.63 0 0 0 .514 0l4.656-1.995a.63.63 0 0 0 .379-.575V3.75a.625.625 0 0 0-.871-.574l-4.42 1.894-4.421-1.894a.63.63 0 0 0-.493 0l-4.666 2a.63.63 0 0 0-.379.574v10.5a.625.625 0 0 0 .871.575m9.713-1.523v-9.14l3.416-1.464v9.14zm-1.25-9.14v9.14l-3.417-1.464v-9.14zm-8.084 0 3.417-1.464v9.14l-3.417 1.464z"})},R=(0,s().IU)("map",P),B={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M13 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m-2.324 4.066c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M13 11.63c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.054 3.818C9.59 13.955 11.153 12.88 13 12.88s3.409 1.075 4.054 2.57a.52.52 0 0 1-.1.59c-.166.19-.461.336-.804.336h-6.3c-.343 0-.638-.146-.805-.336a.52.52 0 0 1-.1-.59M5.6 4.742c-.871 0-1.582.361-2.062.96-.468.582-.686 1.35-.686 2.142s.218 1.56.686 2.143c.48.598 1.19.959 2.062.959.87 0 1.582-.361 2.062-.96.468-.582.686-1.35.686-2.142S8.13 6.284 7.662 5.7c-.48-.598-1.191-.96-2.062-.96M4.102 7.844c0-.576.159-1.047.41-1.36.24-.299.59-.492 1.088-.492.497 0 .847.193 1.087.492.251.313.41.784.41 1.36s-.159 1.047-.41 1.36c-.24.299-.59.492-1.087.492s-.848-.193-1.087-.492c-.252-.313-.411-.784-.411-1.36m1.498 3.56a4.33 4.33 0 0 1 2.72.949 6.6 6.6 0 0 0-.831.937 3.08 3.08 0 0 0-1.89-.636c-1.099 0-2.047.558-2.561 1.372a.38.38 0 0 0-.07.244.4.4 0 0 0 .104.223c.147.176.437.328.778.328h2.825c-.133.428-.16.851-.103 1.25H3.85c-.68 0-1.334-.293-1.738-.777-.427-.513-.566-1.246-.131-1.935.744-1.179 2.092-1.955 3.619-1.955"})},Z=(0,s().IU)("people",B),U={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.755 6.169C8.277 5.519 9.05 5.125 10 5.125s1.723.393 2.245 1.044c.51.635.75 1.474.75 2.346s-.24 1.71-.75 2.346c-.522.65-1.294 1.044-2.245 1.044-.95 0-1.723-.394-2.245-1.044-.51-.635-.75-1.474-.75-2.346s.24-1.711.75-2.346m.975.782c-.293.365-.475.909-.475 1.564s.182 1.198.475 1.564c.281.35.694.576 1.27.576s.989-.226 1.27-.576c.294-.366.475-.909.475-1.564s-.181-1.199-.475-1.564c-.281-.35-.693-.576-1.27-.576-.576 0-.989.225-1.27.576"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 0 0-4.087 11.267c.789-1.397 2.333-2.33 4.087-2.33s3.298.933 4.087 2.33A6.375 6.375 0 0 0 10 3.625M13.049 15.6c-.547-1.049-1.697-1.789-3.05-1.789-1.351 0-2.501.74-3.048 1.789a6.35 6.35 0 0 0 3.049.775 6.34 6.34 0 0 0 3.049-.775"})]})},H=(0,s().IU)("personCircle",U);var O=()=>i(429617);const E={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.387 5.933c.115-.523.861-.523.976 0l.202.918a1.75 1.75 0 0 0 1.334 1.334l.918.202c.523.115.523.861 0 .976l-.918.202a1.75 1.75 0 0 0-1.334 1.334l-.202.918c-.115.523-.861.523-.976 0l-.202-.918a1.75 1.75 0 0 0-1.334-1.334l-.918-.202c-.523-.115-.523-.861 0-.976l.918-.202a1.75 1.75 0 0 0 1.334-1.334z"}),(0,n.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},L=(0,s().IU)("sparkleMagnifyingGlass",E);const q={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M4 3.375c-.897 0-1.625.728-1.625 1.625v2.5c0 .897.728 1.625 1.625 1.625h3.5c.897 0 1.625-.728 1.625-1.625V5c0-.897-.728-1.625-1.625-1.625zM3.625 5c0-.207.168-.375.375-.375h3.5c.207 0 .375.168.375.375v2.5a.375.375 0 0 1-.375.375H4a.375.375 0 0 1-.375-.375zM4 10.875c-.897 0-1.625.727-1.625 1.625V15c0 .898.728 1.625 1.625 1.625h3.5c.897 0 1.625-.727 1.625-1.625v-2.5c0-.898-.728-1.625-1.625-1.625zM3.625 12.5c0-.207.168-.375.375-.375h3.5c.207 0 .375.168.375.375V15a.375.375 0 0 1-.375.375H4A.375.375 0 0 1 3.625 15zm7.25-7.5c0-.897.727-1.625 1.625-1.625H16c.898 0 1.625.728 1.625 1.625v2.5c0 .897-.727 1.625-1.625 1.625h-3.5A1.625 1.625 0 0 1 10.875 7.5zm1.625-.375a.375.375 0 0 0-.375.375v2.5c0 .207.168.375.375.375H16a.375.375 0 0 0 .375-.375V5A.375.375 0 0 0 16 4.625zm0 6.25c-.898 0-1.625.727-1.625 1.625V15c0 .898.727 1.625 1.625 1.625H16c.898 0 1.625-.727 1.625-1.625v-2.5c0-.898-.727-1.625-1.625-1.625zm-.375 1.625c0-.207.168-.375.375-.375H16c.207 0 .375.168.375.375V15a.375.375 0 0 1-.375.375h-3.5a.375.375 0 0 1-.375-.375z"})},V=(0,s().IU)("squareGrid2X2",q),N={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.95 7.3a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M5.95 11.8a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m3.825-5.175a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M9.1 9.55a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0"}),(0,n.jsx)("path",{d:"M1.95 5.425c0-1.174.951-2.125 2.125-2.125h6.9c1.174 0 2.125.951 2.125 2.125v3.5h2.825c1.174 0 2.125.951 2.125 2.125v5.7c0 .345-.28.625-.625.625H2.575a.625.625 0 0 1-.625-.625zm2.125-.875a.875.875 0 0 0-.875.875v10.7h1.975V13.6a.55.55 0 0 1 .55-.55h3.6a.55.55 0 0 1 .55.55v2.525h1.975v-10.7a.875.875 0 0 0-.875-.875zm4.7 11.575V14.15h-2.5v1.975zm6.738-4.1a.675.675 0 1 0-1.35 0 .675.675 0 0 0 1.35 0m-.675 2.925a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35"})]})},F=(0,s().IU)("teamspace",N);var K=()=>i(788860),W=()=>i(718959),z=()=>i(286338),G=()=>i(527278),Y=()=>i(548812),$=()=>i(18281),Q=()=>i(897257),J=()=>i(846550),X=()=>i(12530),ee=()=>i(218835);function te(){const e=(0,i(142735).VK)((()=>i(876822).default.state.currentSpaceStore),[]);return e?(0,n.jsx)(ie,{spaceStore:e}):null}function ie(e){let{spaceStore:t}=e;const i=((0,ee().O4)({spaceStore:t,requestType:"guest"})??0)+((0,ee().O4)({spaceStore:t,requestType:"member"})??0),s=(0,J().yK)((e=>({container:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",right:6,top:6},badge:{top:-3,right:-5}})),[]);return 0===i?null:(0,n.jsx)("div",{style:s.container,children:(0,n.jsx)(X().Z,{count:i,style:s.badge,color:X().N.Red})})}const se=(0,K().vU)({offlineModeDebugTab:{id:"spaceSettingsSidebar.offlineModeDebugTab.title",defaultMessage:"Offline Mode"},offlineTab:{id:"spaceSettingsSidebar.offlineTab.title",defaultMessage:"Offline"},accountTab:{id:"spaceSettingsSidebar.accountTab.title",defaultMessage:"My account"},generalTab:{id:"spaceSettingsSidebar.generalTab.title",defaultMessage:"General"},settingsTab:{id:"spaceSettingsSidebar.settingsTab.title",defaultMessage:"Settings"},teamsTab:{id:"spaceSettingsSidebar.teamsTab.title",defaultMessage:"Teamspaces"},peopleTab:{id:"spaceSettingsSidebar.peopleTab.title",defaultMessage:"People"},membersTab:{id:"spaceSettingsSidebar.membersTab.title",defaultMessage:"Members"},explorePlansTab:{id:"spaceSettingsSidebar.explorePlansTab.title",defaultMessage:"Explore plans"},upgradePlanTab:{id:"spaceSettingsSidebar.upgradePlanTab.title",defaultMessage:"Upgrade plan"},billingTab:{id:"spaceSettingsSidebar.billingTab.title",defaultMessage:"Billing"},subscriptionTab:{id:"spaceSettingsSidebar.subscriptionTab.title",defaultMessage:"Subscription"},connectedAppsTab:{id:"spaceSettingsSidebar.connectedAppsTab.title",defaultMessage:"My connected apps"},connectionsTab:{id:"spaceSettingsSidebar.connectionsTab.title",defaultMessage:"Connections"},userConnectionsTab:{id:"spaceSettingsSidebar.userConnectionsTab.title",defaultMessage:"My connections"},securityTab:{id:"spaceSettingsSidebar.securityTab.title",defaultMessage:"Security"},securityAndDataTab:{id:"spaceSettingsSidebar.securityAndDataTab.title",defaultMessage:"Security & data"},identityTab:{id:"spaceSettingsSidebar.identityTab.title",defaultMessage:"Identity"},identityProvisioningTab:{id:"spaceSettingsSidebar.identity&ProvisioningTab.title",defaultMessage:"Identity & provisioning"},sitesTab:{id:"spaceSettingsSidebar.sites.title",defaultMessage:"Sites"},customEmojiTab:{id:"spaceSettingsSidebar.emoji.title",defaultMessage:"Emoji"},adminContentSearchTab:{id:"spaceSettingsSidebar.adminContentSearch.title",defaultMessage:"Content search"},languageAndRegionTab:{id:"spaceSettingsSidebar.languageAndRegionTab.title",defaultMessage:"Language & region"},integrationsTab:{id:"spaceSettingsSidebar.integrationsTab.title",defaultMessage:"Integrations"},spaceConnectionsTab:{id:"spaceSettingsSidebar.spaceConnectionsTab.title",defaultMessage:"Connections"},auditLogTab:{id:"spaceSettingsSidebar.auditLogTab.title",defaultMessage:"Audit log"},notificationsAndSettings:{id:"spaceSettingsSidebar.notificationsAndSettings.title",defaultMessage:"My notifications & settings"},preferences:{id:"spaceSettingsSidebar.preferences.title",defaultMessage:"Preferences"},mySettings:{id:"spaceSettingsSidebar.mySettings.title",defaultMessage:"My settings"},notifications:{id:"spaceSettingsSidebar.notifications.title",defaultMessage:"Notifications"},myNotifications:{id:"spaceSettingsSidebar.myNotifications.title",defaultMessage:"My notifications"},analyticsTab:{id:"spaceSettingsSidebar.analyticsTab.title",defaultMessage:"Analytics"},importTab:{id:"spaceSettingsSidebar.importsTab.title",defaultMessage:"Import"},verifiedPagesTab:{id:"spaceSettingsSidebar.verifiedPagesTab.title",defaultMessage:"Verified pages"},requestsTab:{id:"spaceSettingsSidebar.requestsTab.title",defaultMessage:"Requests"},experimentsTab:{id:"spaceSettingsSidebar.experimentsTab.title",defaultMessage:"Experiments"},performanceToolbarTab:{id:"spaceSettingsSidebar.performanceToolbarTab.title",defaultMessage:"Performance Toolbar"},userSimilarityScoresTab:{id:"spaceSettingsSidebar.userSimilarityScoresTab.title",defaultMessage:"User Similarity Scores"},collectionsDebugTab:{id:"spaceSettingsSidebar.collectionsDebug.title",defaultMessage:"Collections"}});function ne(e,t){return{width:20,height:20,marginRight:8,color:t?e.text.uiBluePrimary:e.regularIconColor,fill:t?e.text.uiBluePrimary:e.regularIconColor}}function ae(e){return{width:14,height:14,color:e.regularIconColor}}const oe={profile:(e,t)=>{const s=(0,W().B7)(e);return(0,Y().t_)(e)&&s?(0,n.jsx)("div",{style:ne(t),children:(0,n.jsx)(i(981583).Z,{size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:s})}):H()},notifications_and_settings:()=>(0,O().m)(),user_settings:()=>(0,O().m)(),notifications:()=>(0,i(844409).t)(),connected_apps:()=>p(),language_and_region:()=>M(),offline:()=>(0,r().D)(),settings:()=>(0,i(809461).w)(),teams:()=>F(),members:()=>Z(),plans:e=>{const t=Q().subscriptionDataStoreInstance.state;return t&&$().YK(t)?R():(0,Y().t_)(e)?u():d()},billing:()=>C(),subscription:()=>o(),requests:()=>(0,i(661556).Q)(),security:()=>_(),identity_provisioning:()=>y(),admin_content_search:()=>D(),integrations:()=>V(),audit_log:()=>(0,i(249017).h)(),analytics:()=>L(),imports:()=>(0,i(934590).s)(),sites:()=>S(),custom_emoji:()=>(0,i(949558).emojiFaceIcon)(),experiments:()=>(0,i(47100).t)(),performance_toolbar:()=>I(),user_similarity_scores:()=>Z(),collection_debug:()=>v(),offline_mode_debug:()=>(0,r().D)(),verified_pages:()=>f()};function re(e){const t=(0,W().B7)(e);return(0,Y().t_)(e)?t?(0,n.jsx)(i(139428).UserName,{userStore:t}):(0,n.jsx)(K()._H,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"}):`${G().Z.formatMessage(se.accountTab)}`}const le={profile:e=>re(e),notifications_and_settings:()=>G().Z.formatMessage(se.notificationsAndSettings),user_settings:e=>(0,Y().t_)(e)?G().Z.formatMessage(se.preferences):G().Z.formatMessage(se.mySettings),notifications:e=>(0,Y().t_)(e)?G().Z.formatMessage(se.notifications):G().Z.formatMessage(se.myNotifications),connected_apps:e=>(0,Y().t_)(e)?G().Z.formatMessage(se.connectionsTab):G().Z.formatMessage(se.userConnectionsTab),language_and_region:()=>G().Z.formatMessage(se.languageAndRegionTab),offline:()=>G().Z.formatMessage(se.offlineTab),settings:e=>(0,Y().t_)(e)?G().Z.formatMessage(se.generalTab):G().Z.formatMessage(se.settingsTab),teams:()=>G().Z.formatMessage(se.teamsTab),members:e=>(0,z().F$)()||(0,z().wE)(e)?G().Z.formatMessage(se.peopleTab):G().Z.formatMessage(se.membersTab),plans:()=>function(){const e=Q().subscriptionDataStoreInstance.state;if($().YK(e))return G().Z.formatMessage(se.explorePlansTab);return G().Z.formatMessage(se.upgradePlanTab)}(),billing:()=>G().Z.formatMessage(se.billingTab),subscription:()=>G().Z.formatMessage(se.subscriptionTab),requests:()=>G().Z.formatMessage(se.requestsTab),security:e=>(0,Y().t_)(e)?G().Z.formatMessage(se.securityTab):G().Z.formatMessage(se.securityAndDataTab),identity_provisioning:e=>(0,Y().t_)(e)?G().Z.formatMessage(se.identityTab):G().Z.formatMessage(se.identityProvisioningTab),admin_content_search:()=>G().Z.formatMessage(se.adminContentSearchTab),integrations:()=>G().Z.formatMessage(se.spaceConnectionsTab),audit_log:()=>G().Z.formatMessage(se.auditLogTab),analytics:()=>G().Z.formatMessage(se.analyticsTab),imports:()=>G().Z.formatMessage(se.importTab),sites:()=>G().Z.formatMessage(se.sitesTab),custom_emoji:()=>G().Z.formatMessage(se.customEmojiTab),verified_pages:()=>G().Z.formatMessage(se.verifiedPagesTab),experiments:()=>G().Z.formatMessage(se.experimentsTab),performance_toolbar:()=>G().Z.formatMessage(se.performanceToolbarTab),user_similarity_scores:()=>G().Z.formatMessage(se.userSimilarityScoresTab),collection_debug:()=>G().Z.formatMessage(se.collectionsDebugTab),offline_mode_debug:()=>G().Z.formatMessage(se.offlineModeDebugTab)},de={profile:()=>null,notifications_and_settings:()=>null,user_settings:()=>null,notifications:()=>null,connected_apps:()=>null,language_and_region:()=>null,offline:()=>null,settings:()=>null,teams:()=>null,members:e=>(0,z().wE)(e)&&(0,n.jsx)(te,{}),plans:()=>null,billing:()=>null,subscription:()=>null,requests:()=>null,security:()=>null,identity_provisioning:()=>null,sites:()=>null,custom_emoji:()=>null,admin_content_search:()=>null,integrations:()=>null,audit_log:()=>null,analytics:()=>null,imports:()=>null,verified_pages:()=>null,experiments:()=>null,performance_toolbar:()=>null,user_similarity_scores:()=>null,collection_debug:()=>null,offline_mode_debug:()=>null};function ce(e){switch(e){case"profile":case"notifications_and_settings":case"user_settings":case"notifications":case"connected_apps":case"language_and_region":case"offline":case"settings":case"members":case"plans":case"billing":case"subscription":case"security":case"identity_provisioning":case"admin_content_search":case"integrations":case"imports":case"teams":case"audit_log":case"analytics":case"sites":case"custom_emoji":case"verified_pages":case"requests":case"experiments":case"performance_toolbar":case"user_similarity_scores":case"collection_debug":case"offline_mode_debug":return e;default:return}}},260599:(e,t,i)=>{i.d(t,{B:()=>r});var s=()=>i(696459),n=()=>i(308186),a=()=>i(443269),o=()=>i(527278);async function r(e){let{onRequest:t,onSuccess:i}=e;const r=await t();switch(r.type){case"success":i&&await i(r);break;case"failed":n().UW((0,a().wf)(o().Z.getIntl(),r));break;default:(0,s().t1)(r)}}},454598:(e,t,i)=>{i.d(t,{u:()=>l});var s=()=>i(219727),n=()=>i(801812),a=()=>i(696459),o=()=>i(824462);const r={};function l(e){let{spaceId:t}=e;const i=(0,s().O7)(),[{status:l,error:d,value:c}]=(0,n().r5)((async()=>{if(!t)return{overrides:{},organizationInfo:void 0,isOrganizationOwner:!1};const e=await o().callApi({eventName:"getOrganizationSettingsOverrides",environment:i,data:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,a().t1)(e)}),[i,t]);return{organizationOverrides:(null==c?void 0:c.overrides)??r,organizationInfo:null==c?void 0:c.organizationInfo,isOrganizationOwner:null==c?void 0:c.isOrganizationOwner,loading:"pending"===l||"idle"===l,error:d}}},213004:(e,t,i)=>{i.d(t,{Z:()=>a});i(667294);var s=()=>i(846550),n=i(785893);function a(e){let{isPrimary:t,leftIcon:i,rightIcon:a,onClick:o,content:r,style:l}=e;const d=(0,s().yK)((e=>({container:{display:"flex",width:"100%",padding:8,justifyContent:"flex-start",alignItems:"center",borderRadius:8,background:e.onboardingPreviewBackground,...l},iconContainer:{display:"flex",width:20,height:20,paddingTop:1,flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10},title:{display:"flex",fontSize:14,fontWeight:500,color:t?e.text.primary:e.text.secondary,paddingLeft:6,paddingRight:2,height:18,cursor:o?"pointer":"default",width:"100%"},ctaIconContainer:{display:"flex",width:16,height:16,paddingTop:1,flexDirection:"column",alignItems:"center",gap:10,paddingLeft:2,paddingRight:0,cursor:o?"pointer":"default"}})),[o,t,l]);return(0,n.jsxs)("div",{style:d.container,children:[i&&(0,n.jsx)("div",{style:d.iconContainer,onClick:o,children:i}),(0,n.jsx)("div",{style:d.title,onClick:o,children:r}),a&&(0,n.jsx)("div",{style:d.ctaIconContainer,onClick:o,children:a})]})}},218835:(e,t,i)=>{i.d(t,{Mu:()=>b,O4:()=>v,bn:()=>j,oE:()=>x,tA:()=>y});i(267602),i(653476),i(241792),i(228244);var s=i(667294),n=()=>i(219727),a=()=>i(142735),o=()=>i(801812),r=()=>i(989478),l=()=>i(703976),d=()=>i(513670),c=()=>i(326966),u=()=>i(509417),g=()=>i(824462),p=()=>i(269299),m=()=>i(286338),f=()=>i(613119),h=()=>i(876822),S=()=>i(826955);function x(e){let{spaceStore:t,requestType:i}=e;const s=y({spaceStore:t}),r=(0,n().O7)(),[{value:l=[]}]=(0,o().r5)((async()=>{if(!s)return;const e=await g().callApi({eventName:"getAccessRequests",environment:r,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)throw e.error;const i=e.data.accessRequestIds;return u().Vy(r,t,i)}),[t,r,s]),c=(0,a().VK)((()=>l.filter((e=>"pending"===e.accessRequest.status))),[l]),p=(0,f().E)({spaceStore:t,requests:c}),m=(0,a().VK)((()=>(0,d().$R)(c,p??[]).filter((e=>{const[t,s]=e;return"member"===i&&"space_membership_request"===s||("guest"===i&&"guest_invite_request"===s||"member_or_guest"===i&&("guest_invite_request"===s||"space_membership_request"===s))})).map((e=>{let[t]=e;return t}))),[i,p,c]);return(0,d().oA)(m)}function y(e){let{spaceStore:t}=e;return(0,a().VK)((()=>t.canEditMembership()&&(0,m().p1)()),[t])}function b(e){let{spaceStore:t,guests:i,internalDomains:s}=e;return(0,a().VK)((()=>{const e=i.map((e=>S().U6.createChildStore(t,{table:r().KJ,id:e.userId}).getModel())).some((e=>(0,l().dr)(e,s)));return t.canEditMembership()&&e&&"enterprise"!==t.getSubscriptionTier()}),[i,s,t])}function v(e){let{requestType:t,spaceStore:i}=e;const s=x({spaceStore:i,requestType:t});return(0,a().VK)((()=>{const{currentSpaceViewStore:e}=h().default.state;if(e)return s.filter((i=>{const s=function(e){var t,i;let{requestType:s,currentSpaceViewStore:n}=e;const a=Date.now()-10*c()._I,o="member"===s?null===(t=n.getSettings())||void 0===t?void 0:t.last_opened_member_request_tab:null===(i=n.getSettings())||void 0===i?void 0:i.last_opened_guest_request_tab;return o??a}({requestType:t,currentSpaceViewStore:e});return s<i.accessRequest.created_time})).length}),[t,s])}function j(e){let{requestType:t,spaceStore:i}=e;const a=(0,n().O7)(),o=y({spaceStore:i});(0,s.useEffect)((()=>{const{currentSpaceViewStore:e}=h().default.state;e&&o&&"member"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_guest_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,o]),(0,s.useEffect)((()=>()=>{const{currentSpaceViewStore:e}=h().default.state;e&&o&&"guest"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_member_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,o])}},594777:(e,t,i)=>{i.d(t,{U:()=>o});i(241792);var s=()=>i(219727),n=()=>i(142735),a=()=>i(779522);function o(e){const t=(0,s().O7)();return(0,n().VK)((()=>{var i;const s=null==e?void 0:e.id;if(s)return null===(i=a().Z.getData(t,{spaceId:s}))||void 0===i?void 0:i.map((e=>e.domain))}),[t,e])}},613119:(e,t,i)=>{i.d(t,{v:()=>m,E:()=>f});i(492176),i(7961),i(241792);var s=()=>i(219727),n=()=>i(142735),a=()=>i(217388),o=()=>i(989478),r=()=>i(513670),l=i(667294),d=()=>i(429490);var c=()=>i(826955),u=()=>i(367246),g=()=>i(897257),p=()=>i(591914);function m(e){var t;let{spaceStore:i,request:a}=e;const l=(0,s().O7)(),d=(0,n().VK)((()=>{if(a)return new(c().U6)(l,{id:a.getForActorId(),table:o().KJ}).getModel()}),[a,l]),u=a&&d?{accessRequest:a,forActor:d}:void 0;return null===(t=f({spaceStore:i,requests:(0,r().oA)([u])}))||void 0===t?void 0:t.at(0)}function f(e){let{spaceStore:t,requests:i}=e;const o=function(e){let{spaceStore:t,requests:i}=e;const a=(0,s().O7)(),o=function(e){const t=(0,d().U)(e);return(0,l.useCallback)((e=>t.memberEmails.has(e)?"member":t.guestEmails.has(e)?"guest":void 0),[t])}(g().subscriptionDataStoreInstance),r=(0,n().VK)((()=>null==i?void 0:i.map((e=>({email:e.forActor.email,currentRole:o(e.forActor.email)})))),[i,o]),c=a.currentUser.id,m=c?(0,p().VK)(t,c):void 0;return(0,u().WT)({space:t,spaceUser:m,team:void 0,optimism:"optimistic",invitees:r??[],publicPageDataGuestSetting:void 0})}({spaceStore:t,requests:i});return(0,n().VK)((()=>null==i?void 0:i.map((e=>{var t;const i=(0,a().Z)(e.accessRequest),s=null==o||null===(t=o[e.forActor.email])||void 0===t?void 0:t.type;return"guest_invite_request"!==i?i:"cannot_add"===s?"space_membership_request":"guest_invite_request"}))),[i,o])}},847354:(e,t,i)=>{i.d(t,{u:()=>l});var s=()=>i(219727),n=()=>i(142735),a=()=>i(658096),o=()=>i(749826);const r=new(i(168469).q)((e=>{if("block-space"===e.type)return`${e.type}-${e.blockId}-${e.spaceId}`;(0,i(696459).t1)(e.type)}),(async(e,t)=>{const s=await Promise.resolve().then(i.bind(i,824462)),n={[i(547913).YM]:t.spaceId},a=await s.callApi({eventName:"getPublicPageData",environment:e,data:t,headers:n});return"success"===a.type?a.data:void 0}));function l(e){const{blockStore:t}=e,i=(0,s().O7)();return(0,n().VK)((()=>{const e=t.id,s=t.getSpaceId(),n=a().default.state.publicPageData;if(o().default.checkGate({gateName:"ui_guest_disable_changes"})){var l;if((null==n?void 0:n.pageId)===e)return(null==n||null===(l=n.securitySettings)||void 0===l?void 0:l.guestSetting)??{type:"can_add"};{var d;const t=r.getData(i,{type:"block-space",blockId:e,spaceId:s});return(null==t||null===(d=t.securitySettings)||void 0===d?void 0:d.guestSetting)??{type:"can_add"}}}}),[t,i])}},429490:(e,t,i)=>{i.d(t,{U:()=>d});i(122556),i(582845),i(250570),i(533019),i(721473),i(788208),i(22624),i(267602),i(653476),i(241792);var s=()=>i(219727),n=()=>i(142735),a=()=>i(989478),o=()=>i(696459),r=()=>i(826955),l=()=>i(18281);function d(e){const t=(0,s().O7)();return(0,n().VK)((()=>{const i=e.state;if(!i)return{memberEmails:new Set,guestEmails:new Set};const s=l().hn(i),n=l().ND(i),d=e=>new(r().U6)(t,{table:a().KJ,id:e.userId}).getEmail();return{memberEmails:new Set(s.map(d).filter(o().$K)),guestEmails:new Set(n.map(d).filter(o().$K))}}),[t,e])}},202787:(e,t,i)=>{i.d(t,{Z:()=>n});class s extends(()=>i(263184))().default{getInitialState(){return{open:!1}}}const n=new s},367246:(e,t,i)=>{i.d(t,{AW:()=>c,WT:()=>u});var s=()=>i(219727),n=()=>i(142735),a=()=>i(557876),o=()=>i(594777),r=()=>i(847354),l=()=>i(458335),d=()=>i(815277);function c(e){let{space:t,team:i,spaceUser:s,invitees:l,blockStore:c}=e;const u=(0,n().VK)((()=>null==s?void 0:s.getUserId()),[s]),f=(0,d().oo)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),h=(0,d().oo)({name:"guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),S=(0,r().u)({blockStore:c}),x=g(t),y=p(s),b=m(y,i),v=(0,o().U)(t);return(0,n().VK)((()=>{if(x&&y&&h&&f&&v)return(0,a().CR)({space:x,domains:v,team:b,spaceUser:y,invitees:l,internalGuestFeatureAvailability:f,guestFeatureAvailability:h,publicPageDataGuestSetting:S})}),[x,b,f,h,y,l,v,S])}function u(e){let{space:t,team:i,spaceUser:s,invitees:r,optimism:l="pessimistic",publicPageDataGuestSetting:c}=e;const u=(0,n().VK)((()=>null==s?void 0:s.getUserId()),[s]),f=(0,d().oo)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),h=(0,d().oo)({name:"guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),S=g(t),x=p(s),y=m(x,i),b=(0,o().U)(t);return(0,n().VK)((()=>{if(S&&x&&h&&f&&b)return(0,a().Lw)({space:S,domains:b,team:y,spaceUser:x,invitees:r,optimism:l,guestFeatureAvailability:h,internalGuestFeatureAvailability:f,publicPageDataGuestSetting:c})}),[S,x,b,y,r,h,f,l,c])}function g(e){const t=(0,s().O7)(),i=(0,n().VK)((()=>null==e?void 0:e.getModel()),[e]),a=(0,n().VK)((()=>{if(null==e||!e.id)return;const i=l().Z.getData(t,{spaceId:e.id});return i?{id:i.id,disable_guests:i.disableGuests,getSettings:()=>({disable_membership_requests:!1,enable_guest_invite_requests:i.enableGuestInviteRequest})}:void 0}),[e,t]);return i??a}function p(e){return(0,n().VK)((()=>null==e?void 0:e.getModel()),[e])??{isMember:()=>!1,isWorkspaceOwner:()=>!1}}function m(e,t){const i=(0,n().VK)((()=>null==t?void 0:t.getModel()),[t]);return(0,n().VK)((()=>null==e?void 0:e.isMember()),[e])?i:{getDisableGuests:()=>!1}}},645491:(e,t,i)=>{i.d(t,{F:()=>u,g:()=>c});i(241792);var s=()=>i(464140),n=()=>i(696459),a=()=>i(91502),o=()=>i(591914),r=()=>i(876822),l=()=>i(162213),d=()=>i(606021);function c(){l().Z.reset(),d().Z.reset()}async function u(e){let{environment:t,messageStoreEmitValue:i,spaceStore:l}=e;if(!function(e){const t=d().Z.state;switch(t.loadingState){case"uninitialized":return!0;case"loading":return!1;case"loaded":return-1===e||e!==t.messageStoreEmitValue;default:(0,n().t1)(t)}}(i))return!1;const{currentSpaceStore:c,currentUserStore:u}=r().default.state,g=c||l;if(!g||!u)return!1;"uninitialized"===d().Z.state.loadingState&&d().Z.setState({loadingState:"loading"});const p=await async function(e){let{environment:t,currentSpaceStore:i,currentUserStore:n}=e;const r=i.getModel(),l=n.id,d=(0,o().VK)(i,l).getModel();if(void 0===r||void 0===d)return;if((0,s().RI)({space:r,spaceUser:d})){return await(0,a().sj)({environment:t,spaceStore:i,includeArchived:!0,currentUserId:l,minRoleOnTeamStores:"reader"})}return await(0,a().qX)({environment:t,spaceStore:i,includeArchived:!0,currentUserId:n.id})}({environment:t,currentSpaceStore:g,currentUserStore:u});if(!(0,n().$K)(p))return d().Z.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:m,unarchivedTeams:f}=(0,a().tV)(p);return d().Z.setState({loadingState:"loaded",archivedTeamIds:m.map((e=>e.id)),unarchivedTeamIds:f.map((e=>e.id)),messageStoreEmitValue:i}),!0}},626360:(e,t,i)=>{i.r(t),i.d(t,{OutlinerTeamOverflow:()=>se,TeamOverflowMenu:()=>ne});i(267602),i(653476),i(241792);var s=i(667294),n=()=>i(219727),a=()=>i(142735),o=()=>i(846550),r=()=>i(440424),l=()=>i(297565),d=()=>i(641772),c=()=>i(44037),u=()=>i(827282),g=i(785893);const p=(0,u().IU)("factoryBlockSettings",{viewBox:"0 0 24 24",svg:(0,g.jsx)("path",{d:"M12,8c-2.209,0-4,1.791-4,4s1.791,4,4,4s4-1.791,4-4S14.209,8,12,8z M12,14c-1.104,0-2-0.896-2-2s0.896-2,2-2s2,0.896,2,2 S13.104,14,12,14z M24,15V9h-3.523c-0.105-0.299-0.227-0.589-0.361-0.872l2.491-2.492l-4.243-4.243l-2.491,2.491 C15.59,3.75,15.299,3.629,15,3.523V0H9v3.523C8.701,3.629,8.411,3.75,8.128,3.885L5.636,1.394L1.394,5.636l2.491,2.492 C3.75,8.411,3.629,8.701,3.523,9H0v6h3.523c0.106,0.299,0.227,0.589,0.362,0.872l-2.492,2.491l4.243,4.243l2.492-2.491 C8.411,20.25,8.701,20.371,9,20.477V24h6v-3.523c0.299-0.105,0.59-0.227,0.872-0.361l2.491,2.491l4.243-4.243l-2.491-2.491 c0.135-0.283,0.256-0.573,0.361-0.872H24z M19.778,18.363l-1.415,1.415l-2.077-2.077c-0.896,0.502-2.271,1.049-3.286,1.363V22h-2 v-2.936c-1.016-0.314-2.391-0.861-3.286-1.363l-2.078,2.077l-1.415-1.415L6.3,16.285C5.781,15.359,5.234,13.953,4.936,13H2v-2h2.936 C5.234,10.047,5.781,8.641,6.3,7.714L4.222,5.636l1.415-1.415l2.078,2.077C8.609,5.797,9.984,5.25,11,4.936V2h2v2.936 c1.016,0.314,2.391,0.861,3.286,1.363l2.077-2.077l1.415,1.415L17.7,7.714c0.519,0.926,1.065,2.333,1.364,3.286H22v2h-2.936 c-0.299,0.953-0.846,2.359-1.364,3.285L19.778,18.363z"})});var m=()=>i(833437);const f=(0,u().IU)("personAdmin",{viewBox:"0 0 15 16",svg:(0,g.jsx)("path",{d:"M6.082 7.215a2.71 2.71 0 001.504-.438c.451-.296.811-.69 1.08-1.182a3.352 3.352 0 00.403-1.634 3.21 3.21 0 00-.403-1.6 3.059 3.059 0 00-1.08-1.141A2.776 2.776 0 006.082.796c-.547 0-1.048.143-1.504.43a3.153 3.153 0 00-1.087 1.156 3.195 3.195 0 00-.403 1.593 3.39 3.39 0 00.41 1.627c.269.487.629.88 1.08 1.175a2.71 2.71 0 001.504.438zm0-1.19c-.314 0-.606-.088-.875-.266a1.974 1.974 0 01-.636-.738 2.247 2.247 0 01-.239-1.046c0-.379.08-.718.24-1.019.159-.3.37-.538.635-.71.264-.179.556-.267.875-.267.319 0 .61.086.875.26.264.172.476.41.636.71.16.296.239.634.239 1.012 0 .387-.08.738-.24 1.053-.159.31-.37.556-.635.738a1.508 1.508 0 01-.875.273zm-4.266 7.54h5.948a3.113 3.113 0 01-.082-.752v-.43H1.59c-.082 0-.141-.014-.178-.041-.032-.027-.048-.073-.048-.137 0-.26.105-.56.315-.902.21-.342.512-.673.909-.992.4-.323.893-.59 1.476-.8.588-.213 1.26-.32 2.017-.32a5.648 5.648 0 011.92.328c.17-.42.466-.732.89-.937a6.605 6.605 0 00-1.313-.417 6.856 6.856 0 00-1.497-.157c-.92 0-1.75.139-2.488.417-.739.273-1.372.631-1.9 1.073-.525.442-.928.918-1.21 1.429-.279.51-.418.998-.418 1.463 0 .784.584 1.175 1.75 1.175zm6.843-.731c0 .438.091.804.274 1.1.182.297.469.58.861.848.392.274.907.588 1.545.944a.6.6 0 00.294.082.62.62 0 00.335-.082c.638-.36 1.153-.675 1.545-.944.392-.269.679-.551.861-.847.182-.297.274-.664.274-1.101v-2.468a.979.979 0 00-.137-.54c-.087-.141-.24-.26-.458-.355a17.47 17.47 0 00-.417-.15c-.182-.069-.38-.14-.595-.213-.21-.077-.403-.145-.581-.205a13.002 13.002 0 01-.403-.15 1.263 1.263 0 00-.417-.055c-.146 0-.292.028-.438.082-.077.028-.205.07-.383.13l-.574.198c-.205.073-.399.144-.58.212-.183.064-.32.114-.411.15-.219.096-.374.215-.465.356a1.02 1.02 0 00-.13.54v2.468zm2.598 1.326a.601.601 0 01-.212-.04.416.416 0 01-.178-.124l-1.155-1.244a.671.671 0 01-.096-.178.492.492 0 01-.034-.178c0-.145.048-.264.144-.355a.492.492 0 01.341-.13.485.485 0 01.363.15l.793.869 1.613-2.229a.484.484 0 01.41-.219c.132 0 .246.048.342.144.1.091.15.205.15.342 0 .04-.009.086-.027.136a.463.463 0 01-.075.15l-1.983 2.722c-.086.123-.218.184-.396.184z"})});var h=()=>i(159732);const S=(0,u().IU)("restore",{viewBox:"0 0 18 15",svg:(0,g.jsx)("path",{d:"M8.61427 3.17871C8.292 3.17871 8.02833 3.43506 8.02833 3.75732L8.02833 7.84424C8.02833 8.0127 8.0796 8.15918 8.20411 8.32031L10.0132 10.708C10.2549 11.0229 10.5918 11.0742 10.8921 10.8691C11.1631 10.6787 11.1851 10.3345 10.9653 10.0342L8.52638 6.74561L9.19288 8.79639L9.19288 3.75732C9.19288 3.43506 8.93654 3.17871 8.61427 3.17871ZM8.89259 0C5.28907 0 2.22755 2.62939 1.56105 6.05713L0.521008 6.05713C-0.00633599 6.05713-0.138172 6.41602 0.147473 6.82617L1.7881 9.15527C2.0298 9.49219 2.38136 9.48486 2.61573 9.15527L4.25636 6.81885C4.53468 6.41602 4.40284 6.05713 3.88282 6.05713L2.82814 6.05713C3.45802 3.28857 5.91896 1.25244 8.89259 1.25244C10.98 1.25977 12.811 2.26318 13.9317 3.82324C14.1514 4.12354 14.5029 4.21875 14.8032 4.02832C15.1035 3.85254 15.1841 3.44971 14.9351 3.12744C13.5435 1.25977 11.3609 0 8.89259 0ZM8.89259 14.9414C12.4961 14.9414 15.5576 12.3047 16.2241 8.88428L17.2568 8.88428C17.7842 8.88428 17.9234 8.52539 17.6304 8.11523L15.9971 5.78613C15.7554 5.44922 15.4038 5.45654 15.1694 5.78613L13.5288 8.12256C13.2432 8.52539 13.3823 8.88428 13.9024 8.88428L14.9644 8.88428C14.3272 11.6455 11.8589 13.6963 8.89259 13.6963C6.80519 13.689 4.97413 12.6782 3.85353 11.1182C3.62648 10.8179 3.28224 10.7227 2.97462 10.9058C2.68165 11.0889 2.60109 11.4917 2.85011 11.814C4.24171 13.6816 6.42433 14.9414 8.89259 14.9414Z"})});var x=()=>i(224604),y=()=>i(122792),b=()=>i(542487),v=()=>i(788860),j=()=>i(696459),C=()=>i(313351),w=()=>i(465755),M=()=>i(855238),T=()=>i(149809),_=()=>i(154186),k=()=>i(448419),I=()=>i(198829),A=()=>i(388284),D=()=>i(654133),P=()=>i(966296),R=()=>i(247724),B=()=>i(352230),Z=()=>i(91502),U=()=>i(270895),H=()=>i(998901),O=()=>i(876822),E=()=>i(529048),L=()=>i(619779),q=()=>i(296631),V=()=>i(645491),N=()=>i(174896),F=()=>i(44556);i(122556),i(582845),i(250570),i(533019),i(721473),i(788208),i(22624);function K(e){let{adminStatus:t,accessLevel:i,isArchivedTeam:s}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(s)switch(t){case"none":return new Set;case"admin":return new Set("open"===i?["join"]:[]);default:(0,j().t1)(t)}switch(i){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,j().t1)(i)}}var W=()=>i(558999),z=()=>i(428097),G=()=>i(895192),Y=()=>i(617111),$=()=>i(1038),Q=()=>i(132222),J=()=>i(463807);const X=["join","view","add","duplicate","leave","archive","restore"],ee=["add"],te=["join","joinAsOwner","upgradeSelfToOwner","leave"],ie=(0,v().vU)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function se(e){let{teamStore:t,style:i,from:s,hideJoin:r,onPopupClick:l,onPopupClose:c}=e;const u=(0,n().Fy)(),p=(0,v().YB)(),m=(0,a().qz)(void 0,q().Z),f=(0,a().VK)((()=>O().default.state.currentSpaceStore),[]),h=(0,a().qz)(void 0,E().Z),S=(0,o().yK)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...i},icon:{fill:e.mediumIconColor,width:14,height:14}})),[i]),x=p.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return f?u.isMobile?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(D().Z,{textWrap:!1,renderTooltip:()=>x,placement:H().Placement.Bottom,render:e=>(0,g.jsx)(k().ZP,{popupType:k().Z4.Popup,buttonPopupStore:h,alignmentToOrigin:k().vR.Start,originGap:2,renderOrigin:t=>(0,g.jsx)(_().Z,{ariaLabel:x,className:R().qxR,style:S.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,d().o)(S.icon)}),render:e=>(0,g.jsx)(ne,{teamStore:t,permissionsInviteStore:m,onDismiss:e.close,from:s,hideJoin:r,buttonPopupStore:h}),onClick:l,onClose:c})}),(0,g.jsx)(P().B,{permissionsInviteStore:m,store:t})]}):null}function ne(e){const{teamStore:t,permissionsInviteStore:i,onDismiss:d,from:u,hideJoin:_,buttonPopupStore:k}=e,P=(0,o().Fg)(),E=(0,n().O7)(),q=(0,o().yK)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),se=(0,a().VK)((()=>O().default.state.currentSpaceStore),[]),ne=(0,Q().e)(t),ae=(0,a().VK)((()=>(0,b().m4)({archived_by:t.getArchivedBy()})),[t]),oe=(0,a().VK)((()=>L().Z.state.spacePermissionGroupIds),[]),re=E.currentUser.id,le=(0,a().VK)((()=>re?t.getTeamRoleForUser(re,oe)??"none":"none"),[re,t,oe]),de=(0,a().VK)((()=>!(!t.isDefined()||!re)&&Boolean(t.isOwner(re))),[re,t]),ce=(0,$().y)(t.id),ue=(0,W().e)(t),{id:ge,name:pe,isDefault:me}=(0,a().VK)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),fe=(0,z().n)(),he=(0,a().VK)((()=>(0,Z().Xq)({environment:E,spaceStore:se})),[se,E]),Se=(0,G().r)(u),xe=function(e){const{isDefault:t,accessLevel:i,settings:s}=(0,a().VK)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),n="private"===i,o=(0,Y().P)(),r=n&&!o?"business":void 0,l=(null==s?void 0:s.disable_public_access)||(null==s?void 0:s.disable_export)||(null==s?void 0:s.disable_guests),d=(0,Y().z)(),c=l&&!d?"enterprise":void 0,u=(0,y().bo)([c,r]);if(t)return"isDefault";if(u)return u}(t),ye="isDefault"===(be=xe)?(0,g.jsx)(v()._H,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===be?(0,g.jsx)(v()._H,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===be?(0,g.jsx)(v()._H,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===be?void 0:(0,j().t1)(be);var be;const ve=(0,a().VK)((()=>t.getTeamAccessLevel()),[t]),je=(0,J().l)(t),Ce=(0,s.useCallback)((e=>{w().z(E,{store:t,from:u,option:e})}),[E,t,u]),we=ce&&!fe,Me=(0,a().VK)((()=>Boolean(null==se?void 0:se.canAdmin())),[se]),{joinLeaveOptionsToShow:Te,leaveOptionDisabledState:_e}=function(e){let{teamRole:t,adminStatus:i,isDefaultTeam:s,accessLevel:n,isArchivedTeam:a}=e;switch(t){case"owner":case"member":const e=new Set,o=!a;return o&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===i&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:o&&s?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:K({adminStatus:i,accessLevel:n,isArchivedTeam:a}),leaveOptionDisabledState:void 0};default:(0,j().t1)(t)}}({teamRole:le,adminStatus:Se?"adminThatCanPerformPrivilegedActions":Me?"admin":"none",isArchivedTeam:ae,isDefaultTeam:me,accessLevel:ve}),ke=Te.has("joinAsOwner"),Ie=Se&&!(1===Te.size&&Te.has("leave")),Ae=(0,a().VK)((()=>(0,Z().VB)(t)),[t]),De={add:{type:"action",show:!ae&&ue,handle:()=>{i.update((e=>({...e,modalOpen:!0})))},title:ie.add,icon:(0,r().a)({width:17})},leave:{type:"action",...Ie&&{colorOverride:P.redBadgeBackground},show:Te.has("leave"),handle:()=>{F().s({environment:E,teamStore:t,from:u,userGroupsInTeam:je})},title:ie.leave,disabled:Boolean(null==_e?void 0:_e.disabled),icon:(0,m().V)({width:17}),disabledTooltipText:"defaultTeam"===(null==_e?void 0:_e.disabledReasonKey)&&(0,g.jsx)(v()._H,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!_&&Te.has("join"),handle:async()=>{if(se)switch(ve){case"open":await F().um({environment:E,teamStore:t,currentSpaceStore:se,from:u,andNavigateToTeamHome:!1});break;case"closed":case"private":await F().wT({environment:E,teamStore:t,currentSpaceStore:se,from:u,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,j().t1)(ve)}},title:ke?ie.joinAsMember:ie.joinTeamspace,icon:(0,h().R)({width:17})},joinAsOwner:{type:"action",show:ke,handle:()=>F().wT({environment:E,teamStore:t,currentSpaceStore:se,from:u,action:"joinTeamAsOwner"}),title:ie.joinAsOwner,icon:f({width:17})},upgradeSelfToOwner:{type:"action",show:Te.has("upgradeSelfToOwner"),handle:()=>F().wT({environment:E,teamStore:t,currentSpaceStore:se,from:u,action:"upgradeToOwner"}),title:ie.upgradeSelfToOwner,icon:f({width:17})},archive:{type:"action",show:!ae&&de,colorOverride:P.redBadgeBackground,handle:async()=>{we||(await F().aQ({teamStore:t,environment:E,from:u}),V().F({environment:E,messageStoreEmitValue:-1}))},title:ie.archive,disabled:we,disabledTooltipText:(0,g.jsx)("div",{style:{whiteSpace:"normal"},children:(0,g.jsx)(v()._H,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"There must only be one member in the workspace to archive this teamspace"})}),icon:(0,l().H)({width:17})},restore:{type:"action",show:ae,handle:async()=>{de&&Ae&&(await F().YH({environment:E,teamStore:t,teamName:pe,from:u}),V().F({environment:E,messageStoreEmitValue:-1}))},title:ie.restore,icon:S({width:17}),disabled:!Ae||!de,disabledTooltipText:Ae?(0,g.jsx)(v()._H,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.notOwner",defaultMessage:"Only teamspace owners can restore archived teamspaces."}):(0,g.jsx)(v()._H,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.noDefaultTeam",defaultMessage:"You must have an active default teamspace to restore this {accessLevel} teamspace.",values:{accessLevel:ve}})},duplicate:{type:"action",show:!ae&&he,handle:()=>{N().tW({environment:E,teamStore:t,from:u,buttonPopupStore:k})},title:ie.duplicate,disabled:void 0!==xe,icon:(0,c().a)({width:17}),disabledTooltipText:ye,caption:(0,g.jsx)(v()._H,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!ae,handle:()=>F().RF({environment:E,teamId:ge,tab:U().a.Members,from:u}),title:ne&&!ae?ie.teamspaceSettings:ie.viewMembers,icon:ne?p({width:15}):(0,x().n)({width:17})}},Pe=(Ie?[{sectionName:"join/leave section",orderedOptions:te},{sectionName:"other actions",orderedOptions:X.filter((e=>!te.includes(e)))}]:[{sectionName:"add section",orderedOptions:ee},{sectionName:"other actions section",orderedOptions:X.filter((e=>!ee.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>De[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(j().$K).map((e=>{const t=e.filteredOptions.map((e=>{const t=De[e],{type:i}=t;return"action"===i?(0,C().cN)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{d(),Ce(e),t.handle()},render:e=>(0,g.jsx)(D().Z,{placement:H().Placement.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:i=>(0,g.jsx)(M().Z,{...e,...i,svg:()=>t.icon,title:(0,g.jsx)(v()._H,{...t.title}),buttonStyle:{...q.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:P.regularIconColor,color:P.regularTextColor}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:q.caption,shouldWrapCaption:!0})})}):"extensionAction"===i?(0,C().MV)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:i=>{d(),Ce(e),t.action(i)}})))})))}):void(0,j().t1)(i)}));return(0,C().$J)({key:e.sectionName,render:e=>(0,g.jsx)(A().Z,{...e}),actions:t})}));return(0,g.jsx)(I().Z,{className:R().Mdu,menuType:B().o.Popup,minWidth:"100%",children:(0,g.jsx)(T().Z,{context:{blocks:[],environment:E,publicEditMode:void 0},sections:Pe,initialFocus:void 0})})}},509695:(e,t,i)=>{i.d(t,{O:()=>o});i(667294);var s=()=>i(471645),n=()=>i(67961),a=i(785893);function o(e){let{title:t,description:i,disabled:o=!1,selected:r,onChange:l=(()=>{})}=e;return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>!o&&l(!r),children:[(0,a.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[t,i&&(0,a.jsx)(n().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:i})]}),(0,a.jsx)("div",{style:{marginTop:5},children:(0,a.jsx)(s().Z,{on:r,disabled:o})})]})}},558999:(e,t,i)=>{i.d(t,{e:()=>l});var s=()=>i(142735),n=()=>i(696459),a=()=>i(697623),o=()=>i(132222),r=()=>i(936968);function l(e){const t=(0,r().q)(e),i=(0,o().e)(e);return(0,s().VK)((()=>{if(!(0,a().Mk)())return!1;const s=e.getSetting("invite_access");switch(s){case void 0:return!1;case"team_members":return i;case"team_owners":return t;default:(0,n().t1)(s)}}),[e,t,i])}},428097:(e,t,i)=>{i.d(t,{n:()=>c});i(267602),i(653476),i(241792);var s=()=>i(219727),n=()=>i(142735),a=()=>i(528514),o=()=>i(696459),r=()=>i(876822),l=()=>i(30795),d=()=>i(897257);function c(){const e=(0,s().O7)().currentUser.id,t=(0,n().VK)((()=>r().default.state.currentSpaceViewStore),[]),i=(0,n().Kw)(d().subscriptionDataStoreInstance),c=(0,l().V)(i);return(0,n().VK)((()=>!(!e||null==t||!t.isDefined())&&(0,a().wN)({userId:e,teamsThatUserIsANonGuestMemberOf:t.getNonGuestTeamsStores().map((e=>e.getModel())).filter(o().$K),spaceMembersCount:c})),[e,t,c])}},999582:(e,t,i)=>{i.d(t,{Z:()=>a});class s extends(()=>i(263184))().default{getInitialState(){return{}}}const n=new s;i(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const a=n},217388:(e,t,i)=>{i.d(t,{Z:()=>n});var s=()=>i(696459);function n(e){return e.isGuestInviteRequest()?"guest_invite_request":e.isPageAccessRequest()?"page_access_request":e.isSpaceMembershipRequest()?"space_membership_request":e.isTeamMembershipRequest()?"team_membership_request":void(0,s().t1)(e)}},29488:(e,t,i)=>{function s(e){return`${e.table}:${e.id}`}i.d(t,{O:()=>s})},157955:(e,t,i)=>{i.r(t),i.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>I,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>j,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>v,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>S,RRULE_WEEKDAYS_MAP:()=>f,convertFromUnpersistedRecurrenceConfig:()=>R,convertToUnpersistedRecurrenceConfig:()=>A,getFormattedEndCondition:()=>k,getFormattedNextRecurrenceTime:()=>_,getNewEndTimestamp:()=>D,getNextDateUtc:()=>T,getRecurrenceAfter:()=>w,isRunningBetweenMidnightAnd3AM:()=>M,isValidRecurrenceInterval:()=>x,isValidRecurrenceNumberOfRuns:()=>y,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>C});i(267602),i(653476),i(241792);var s=()=>i(730120);i(670560);function n(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];if(0===i.length)return e.map((e=>[e]));const a=[];for(const o of e)a.push(...n(i[0],...i.slice(1)).map((e=>[o,...e])));return a}var a=()=>i(696459),o=()=>i(326966),r=()=>i(803021),l=()=>i(646574),d=()=>i(998411),c=()=>i(578292);class u extends(()=>i(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var g=()=>i(494616);const p=(0,i(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),m={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},f={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},h=99,S=999;function x(e){return(0,o().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function y(e){return(0,o().hj)(e)&&Number.isInteger(e)&&e>0&&e<=S}function b(e){const{start_date:t,frequency:i,interval:s,weekdays:o,timezone:l,hour:d,minute:c}=e,g="week"===i&&o?o.map((e=>f[e])):void 0,p={};return(0,a().$K)(e.end_condition)&&("date"===e.end_condition.type?p.until=(0,r().pd)(e.end_condition.end_at):"number"===e.end_condition.type?p.count=e.end_condition.number_of_occurrences:(0,a().t1)(e.end_condition)),"month"===e.frequency&&(0,a().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?p.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?p.byweekday=n(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,i]=e;return f[t].nth(i)})):(0,a().t1)(e.monthly_restriction)),new u({freq:m[i],dtstart:(0,r().pd)(t),interval:s,byweekday:g,tzid:l,byhour:d??0,byminute:c??0,bysecond:0,...p})}const v=1,j=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const i=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),s=e.length,n=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,a=s>v,o=i.length>=j;return{violatesConstraint:a||o,templateNestingExceedsMaxDepth:a,ancestorHasDailyTemplate:o,nestedDepthOfAutomationAncestors:s,immediateAncestorRecurrenceType:n}}function w(e){const{recurrence:t,afterDate:i}=e;if((0,g().nA)(t)){const e=(0,r().kq)(i);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(t).after((0,r().pd)(i));if(!e)return;return(0,r().YL)(e)}}function M(e){return 0===e.hour||1===e.hour||2===e.hour}function T(e){return b(e).after((0,r().pd)((0,r().Jh)()))||void 0}function _(e){const{recurrence:t,intl:i}=e,n=T(R(t));if(!n)return;const a=M(t),o=s().ou.fromJSDate(n).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,c().E2)(i)).setZone(t.timezone),r=(0,l().p6)({date:o,dateFormat:"relative",allowRelativeDates:!0,intl:i,shortenDate:!0});if(a)return i.formatMessage(p.dateBetweenMidnightAnd3AM,{date:r});{let e=o.toLocaleString(s().ou.TIME_SIMPLE);return t.timezone!==(0,d().r)()&&(e+=` ${o.toFormat("ZZZZ")}`),i.formatMessage(p.dateAtTime,{date:r,time:e})}}function k(e,t){return(0,a().$K)(e)?"number"===e.type?t.formatMessage(p.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().p6)({date:s().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().t1)(e):t.formatMessage(p.noEndCondition)}const I=100;function A(e){return{...e,start_date:(0,r().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,r().kq)(e.end_condition.end_at)}:(0,a().t1)(e.end_condition):void 0}}function D(e,t,i){return e.plus(i-t)}function P(e,t){const i=s().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,r().Jh)(i.toJSDate())}}function R(e){return{...e,start_date:(0,r().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?P(e,e.end_condition):(0,a().t1)(e.end_condition):void 0}}},983653:(e,t,i)=>{i.d(t,{t:()=>s});const s=(0,i(827282).CZ)("checkmarkShieldFill",{default:{loader:()=>i.e(69449).then(i.bind(i,169449))},small:{loader:()=>i.e(48227).then(i.bind(i,448227))},mini:{loader:()=>i.e(8854).then(i.bind(i,908854))},large:{loader:()=>i.e(35833).then(i.bind(i,735833))}})},297565:(e,t,i)=>{i.d(t,{H:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("archive",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M6.24707 16.4561C5.54069 16.4561 5.00065 16.2738 4.62695 15.9092C4.25781 15.5446 4.07324 15.0091 4.07324 14.3027V7.07031H5.41309V14.2822C5.41309 14.5693 5.48828 14.7904 5.63867 14.9453C5.79362 15.0957 6.01465 15.1709 6.30176 15.1709H13.6914C13.974 15.1709 14.1904 15.0957 14.3408 14.9453C14.4958 14.7904 14.5732 14.5693 14.5732 14.2822V7.07031H15.9199V14.3027C15.9199 15.0046 15.7331 15.5378 15.3594 15.9023C14.9857 16.2715 14.4479 16.4561 13.7461 16.4561H6.24707ZM7.79199 10.5156C7.63249 10.5156 7.50033 10.4632 7.39551 10.3584C7.29069 10.2536 7.23828 10.1169 7.23828 9.94824V9.72949C7.23828 9.56087 7.28841 9.42643 7.38867 9.32617C7.49349 9.22591 7.62793 9.17578 7.79199 9.17578H12.208C12.3721 9.17578 12.5042 9.22591 12.6045 9.32617C12.7093 9.42643 12.7617 9.56087 12.7617 9.72949V9.94824C12.7617 10.1169 12.7093 10.2536 12.6045 10.3584C12.4997 10.4632 12.3675 10.5156 12.208 10.5156H7.79199ZM4.53125 7.72656C4.06641 7.72656 3.7041 7.58984 3.44434 7.31641C3.18913 7.03841 3.06152 6.66927 3.06152 6.20898V5.21094C3.06152 4.74609 3.19368 4.37695 3.45801 4.10352C3.72233 3.83008 4.08008 3.69336 4.53125 3.69336H15.4688C15.929 3.69336 16.2868 3.83008 16.542 4.10352C16.8018 4.37695 16.9316 4.74609 16.9316 5.21094V6.20898C16.9316 6.66927 16.8018 7.03841 16.542 7.31641C16.2868 7.58984 15.929 7.72656 15.4688 7.72656H4.53125ZM4.79102 6.48926H15.209C15.3685 6.48926 15.4824 6.4528 15.5508 6.37988C15.6191 6.30241 15.6533 6.1862 15.6533 6.03125V5.38867C15.6533 5.22917 15.6191 5.11296 15.5508 5.04004C15.4824 4.96712 15.3685 4.93066 15.209 4.93066H4.79102C4.63151 4.93066 4.5153 4.96712 4.44238 5.04004C4.37402 5.11296 4.33984 5.22917 4.33984 5.38867V6.03125C4.33984 6.1862 4.37402 6.30241 4.44238 6.37988C4.5153 6.4528 4.63151 6.48926 4.79102 6.48926Z"})})},934590:(e,t,i)=>{i.d(t,{s:()=>n});i(667294);const s={viewBox:"0 0 20 20",svg:(0,i(785893).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},n=(0,i(827282).IU)("arrowLineDown",s)},679547:(e,t,i)=>{i.d(t,{l:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},775404:(e,t,i)=>{i.d(t,{p:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("at",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"})})},844409:(e,t,i)=>{i.d(t,{t:()=>n});i(667294);const s={viewBox:"0 0 20 20",svg:(0,i(785893).jsx)("path",{d:"M10 2.355a2.35 2.35 0 0 0-2.253 1.686 5.06 5.06 0 0 0-2.803 4.527v1.189c0 .919-.334 1.806-.939 2.498l-.818.935c-.881 1.007-.166 2.583 1.173 2.583h3.02a2.65 2.65 0 0 0 5.24 0h3.02c1.339 0 2.054-1.576 1.173-2.583l-.818-.935a3.8 3.8 0 0 1-.939-2.498v-1.19a5.06 5.06 0 0 0-2.803-4.526A2.35 2.35 0 0 0 10 2.355m1.5 13.418a1.55 1.55 0 0 1-2.998 0zM8.909 4.564A1.104 1.104 0 0 1 10 3.605c.556 0 1.017.415 1.091.96l.049.353.329.138a3.81 3.81 0 0 1 2.337 3.512v1.189c0 1.221.444 2.401 1.248 3.32l.818.936a.307.307 0 0 1-.232.51H4.36a.308.308 0 0 1-.232-.51l.818-.935a5.04 5.04 0 0 0 1.248-3.321v-1.19c0-1.58.963-2.936 2.337-3.511l.33-.138z"})},n=(0,i(827282).IU)("bell",s)},313084:(e,t,i)=>{i.d(t,{S:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("logout",{viewBox:"0 0 30 30",svg:(0,s.jsx)("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},698072:(e,t,i)=>{i.d(t,{M:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("peopleFillCheckmark",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M14.5391 10.3174C14.4115 10.3174 14.2975 10.29 14.1973 10.2354C14.097 10.1807 13.999 10.0964 13.9033 9.98242L12.29 8.01367C12.1715 7.86328 12.1123 7.70833 12.1123 7.54883C12.1123 7.38021 12.1693 7.23665 12.2832 7.11816C12.4017 6.99967 12.5452 6.94043 12.7139 6.94043C12.8141 6.94043 12.9053 6.96322 12.9873 7.00879C13.0739 7.0498 13.1582 7.12272 13.2402 7.22754L14.5117 8.84082L17.2188 4.51367C17.3555 4.28581 17.5309 4.17188 17.7451 4.17188C17.9046 4.17188 18.0482 4.22428 18.1758 4.3291C18.3034 4.42936 18.3672 4.56608 18.3672 4.73926C18.3672 4.81673 18.349 4.89648 18.3125 4.97852C18.2806 5.05599 18.2419 5.12891 18.1963 5.19727L15.1406 9.97559C14.9948 10.2035 14.7943 10.3174 14.5391 10.3174ZM2.85645 16.2441C2.47363 16.2441 2.17285 16.1576 1.9541 15.9844C1.73535 15.8112 1.62598 15.5742 1.62598 15.2734C1.62598 14.8314 1.75814 14.3688 2.02246 13.8857C2.29134 13.4027 2.67643 12.9492 3.17773 12.5254C3.68359 12.1016 4.29199 11.7575 5.00293 11.4932C5.71387 11.2288 6.51139 11.0967 7.39551 11.0967C8.28418 11.0967 9.08398 11.2288 9.79492 11.4932C10.5059 11.7575 11.112 12.1016 11.6133 12.5254C12.1191 12.9492 12.5065 13.4027 12.7754 13.8857C13.0443 14.3688 13.1787 14.8314 13.1787 15.2734C13.1787 15.5742 13.0693 15.8112 12.8506 15.9844C12.6318 16.1576 12.3311 16.2441 11.9482 16.2441H2.85645ZM7.40234 9.87988C6.9056 9.87988 6.44759 9.74544 6.02832 9.47656C5.61361 9.20768 5.27865 8.84538 5.02344 8.38965C4.77279 7.93392 4.64746 7.4235 4.64746 6.8584C4.64746 6.30241 4.77279 5.80111 5.02344 5.35449C5.27865 4.90332 5.61589 4.54557 6.03516 4.28125C6.45443 4.01693 6.91016 3.88477 7.40234 3.88477C7.89909 3.88477 8.3571 4.01465 8.77637 4.27441C9.19564 4.53418 9.5306 4.88965 9.78125 5.34082C10.0365 5.78743 10.1641 6.28874 10.1641 6.84473C10.1641 7.41439 10.0365 7.92936 9.78125 8.38965C9.5306 8.84538 9.19564 9.20768 8.77637 9.47656C8.3571 9.74544 7.89909 9.87988 7.40234 9.87988Z"})})},513602:(e,t,i)=>{i.d(t,{u:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},47100:(e,t,i)=>{i.d(t,{t:()=>n});i(667294);const s={viewBox:"0 0 20 20",svg:(0,i(785893).jsx)("path",{d:"M8.27 4.067c.195-.89 1.465-.89 1.66 0l.027.122a7.03 7.03 0 0 0 5.355 5.354l.121.027c.89.195.89 1.465 0 1.66l-.121.027a7.03 7.03 0 0 0-5.355 5.355l-.027.122c-.195.89-1.465.89-1.66 0l-.027-.122a7.03 7.03 0 0 0-5.355-5.355l-.121-.027c-.89-.195-.89-1.465 0-1.66l.121-.027A7.03 7.03 0 0 0 8.243 4.19zm.83 1.599A8.28 8.28 0 0 1 4.366 10.4 8.28 8.28 0 0 1 9.1 15.134a8.28 8.28 0 0 1 4.734-4.734A8.28 8.28 0 0 1 9.1 5.666m5.84-4.213c-.104-.472-.776-.472-.88 0l-.18.826a1.58 1.58 0 0 1-1.201 1.2l-.827.182c-.47.103-.47.775 0 .879l.827.181c.6.132 1.068.6 1.2 1.2l.181.827c.104.471.776.471.88 0l.181-.826c.132-.6.6-1.07 1.2-1.2l.827-.182c.47-.104.47-.776 0-.88l-.826-.18a1.58 1.58 0 0 1-1.201-1.201z"})},n=(0,i(827282).IU)("sparkles",s)},460561:(e,t,i)=>{i.d(t,{z:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("speechBubble",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M4.32 15.424c.39 0 .677-.192 1.149-.609l2.344-2.064h4.116c2.057 0 3.213-1.19 3.213-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.22h.28v1.675c0 .608.322.998.875.998zm.342-1.531v-1.949c0-.403-.178-.56-.56-.56H3.26c-1.285 0-1.9-.65-1.9-1.894V4.26c0-1.243.615-1.893 1.9-1.893h8.627c1.278 0 1.893.65 1.893 1.894v5.23c0 1.243-.615 1.893-1.893 1.893h-4.15c-.417 0-.622.068-.909.369l-2.167 2.14z"})})},557876:(e,t,i)=>{i.d(t,{CR:()=>r,I2:()=>p,Lw:()=>l,tV:()=>g,tX:()=>u});i(267602),i(653476),i(241792),i(228244);var s=()=>i(513670),n=()=>i(696459),a=()=>i(446866),o=()=>i(703976);function r(e){let{space:t,domains:i,team:a,spaceUser:o,invitees:r,internalGuestFeatureAvailability:d,guestFeatureAvailability:u,publicPageDataGuestSetting:g}=e;const p=l({domains:i,internalGuestFeatureAvailability:d,guestFeatureAvailability:u,invitees:r,space:t,spaceUser:o,team:a,publicPageDataGuestSetting:g}),f=c({domains:i,internalGuestFeatureAvailability:d,guestFeatureAvailability:u,invitees:r,space:t,spaceUser:o,team:a,publicPageDataGuestSetting:g}),h=r.some((e=>{const t=f[e.email],i=p[e.email];return"can_autojoin"!==t.type&&m(i)}));return(0,s().Pe)(r.map((e=>{const{email:t,currentRole:i}=e,s=f[t],a=p[t];if("member"===i)return[t,{type:"member_page_add"}];if("guest"===i&&"can_add"===a.type)return[t,{type:"guest_page_add"}];if("can_autojoin"===s.type)return[t,{type:"member",reason:"autojoin_domain"}];if("cannot_add"===(o=p[t]).type&&"over_general_guest_limit"===o.reason)return[t,{type:"none",reason:"must_upgrade"}];if("can_add"===s.type&&h)return[t,{type:"member",reason:"over_internal_guest_limit"}];if("can_add"===a.type)return[t,{type:"guest"}];if("can_request"===a.type)return[t,{type:"guest_request"}];if("can_add"===s.type)return[t,{type:"member",reason:"guests_disabled"}];if("can_request"===s.type)return[t,{type:"member_request"}];if("cannot_add"===s.type&&"not_authorized_domain"===s.reason)return[t,{type:"none",reason:"not_authorized_domain"}];if("cannot_add"===a.type){return[t,{type:"none",reason:a.reason}]}if("cannot_add"===s.type){return[t,{type:"none",reason:s.reason}]}return(0,n().t1)(s)&&(0,n().t1)(a);var o})))}function l(e){let{space:t,domains:i,team:n,internalGuestFeatureAvailability:a,guestFeatureAvailability:r,optimism:l="pessimistic",spaceUser:c,invitees:g,publicPageDataGuestSetting:m}=e;const f=u({space:t,team:n,spaceUser:c,publicPageDataGuestSetting:m}),h=d(l,r,p(g)),S=function(e,t){return e.filter((e=>(0,o().is)(e.email,t)&&!e.currentRole)).length}(g,i),x=d(l,a,S);return(0,s().Pe)(g.map((e=>{const t=(0,o().is)(e.email,i),s=void 0!==e.currentRole;let n;return n=s||h?!t||s||x?"cannot_add"===f.type?{type:"cannot_add",reason:"disabled_by_admins"}:f:{type:"cannot_add",reason:"over_internal_guest_limit"}:{type:"cannot_add",reason:"over_general_guest_limit"},[e.email,n]})))}function d(e,t,i){const s=t.limit,n="unlimited"===s.total?"unlimited":s.total-s.current;return"optimistic"===e?"unlimited"===n||n>=1:"unlimited"===n||n>=i}function c(e){let{space:t,team:i,domains:o,spaceUser:r,invitees:d,internalGuestFeatureAvailability:c,guestFeatureAvailability:u,publicPageDataGuestSetting:p}=e;const f=g({space:t,domains:o,spaceUser:r}),h=l({space:t,domains:o,internalGuestFeatureAvailability:c,guestFeatureAvailability:u,team:i,spaceUser:r,invitees:d,publicPageDataGuestSetting:p}),S=!r.isMember();return(0,s().Pe)(d.map((e=>{const t=(0,a().Gd)(e.email);if(!t)return[e.email,{type:"cannot_add",reason:"invalid_email"}];const i=m(h[e.email]),s=f.autojoinDomains;let o;return s.includes(t)?o={type:"can_autojoin"}:"can_add"===f.type?o={type:"can_add"}:"can_request"===f.type||i&&!S?o={type:"can_request"}:s.length>0?o={type:"cannot_add",reason:"not_authorized_domain"}:"cannot_add"===f.type?o={type:"cannot_add",reason:"disabled_by_admins"}:(0,n().t1)(f),[e.email,o]})))}function u(e){let{space:t,team:i,spaceUser:s,publicPageDataGuestSetting:a}=e;const o=s.isWorkspaceOwner(),r=(0,n().$K)(a)?a:function(e){let t,i,{space:s,team:n}=e;t=n&&n.getDisableGuests()?"cannot_add":n&&!n.getDisableGuests()?"can_add":void 0;const a=s.disable_guests,o=s.getSettings().enable_guest_invite_requests;i=o?"can_request":a?"cannot_add":"can_add";return"can_request"===i?{type:"can_request"}:void 0!==t?{type:t}:{type:i}}({space:t,team:i});return o&&"can_request"===r.type?{type:"can_add"}:r}function g(e){let{space:t,domains:i,spaceUser:s}=e;const n=!s.isMember(),a=function(e){let{space:t,domains:i}=e;const s=i.filter((e=>e.isAutojoinable)).map((e=>e.url));return t.getSettings().disable_membership_requests?{type:"cannot_add",autojoinDomains:s}:{type:"can_request",autojoinDomains:s}}({space:t,domains:i});return n?{type:"cannot_add",autojoinDomains:[]}:s.isWorkspaceOwner()?{...a,type:"can_add"}:a}function p(e){return e.filter((e=>!e.currentRole)).length}function m(e){return"cannot_add"===e.type&&"over_internal_guest_limit"===e.reason}},703976:(e,t,i)=>{i.d(t,{TC:()=>o,dr:()=>n,is:()=>a});i(267602),i(470928);var s=()=>i(446866);function n(e,t){return!!e&&a(e.getEmail(),t)}function a(e,t){return void 0!==o(e,t)}function o(e,t){if(!e)return;const i=(0,s().Gd)(e);return t.find((e=>e.url===i))}}}]);