"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[53936],{594134:(e,t,o)=>{o.d(t,{V:()=>c});o(241792);var n=()=>o(820271),r=()=>o(790300),i=()=>o(139224),l=()=>o(636340),a=()=>o(269299),s=()=>o(887430),u=()=>o(714966);async function c(e){var t;const{environment:o,collectionStore:c,collectionContextStore:p,collectionSettingsStore:d,shouldSkipViewSelection:g}=e,m=p.collectionViewBlockStore(),h=p.collectionViewStore(),y=c.getParentBlockStore();if(!m||!y||!h)return;const f=null===(t=c.getModel())||void 0===t?void 0:t.getNormalizedSchema();if("chart"===h.getType()&&f){const e=h.getFormat(),t=e.chart_config;if(!t)return;const i="placeholder"===t.type?t.placeHolderType:t.type;let s;return(0,r().F)(i)?s=(0,n().K0)({collectionSchema:f,axisChartType:i}):"donut"===i&&(s=(0,n().dq)({collectionSchema:f})),a().createAndCommit({userAction:"slashMenu.create.chartViewExistingSource",environment:o,canUndo:!0,perform:t=>{l().sW({store:h.getFormatStore(),transaction:t,data:{...e,hide_linked_collection_name:!0,subitem_display_mode:"flattened",chart_config:s||null}})}}),void d.setState({open:!0,stack:[{type:"main"}]})}if(g)i().H4({collectionSettingsStore:d,item:{type:"main"}});else{await Promise.all([...y.getCollectionViewStores().map((e=>e.load())),...m.getCollectionViewStores().map((e=>e.load()))]);(0,s().gL)({collectionStore:c,sourceCollectionViewBlockStore:y,currentCollectionViewBlockStore:m,currentCollectionViewStore:h,constraints:(0,u().x)(h.id)}).length>0?i().H4({collectionSettingsStore:d,item:{type:"duplicateExistingView"}}):i().H4({collectionSettingsStore:d,item:{type:"createView"}})}}},272597:(e,t,o)=>{o.d(t,{V:()=>l});var n=()=>o(636340),r=()=>o(269299),i=()=>o(973792);function l(e){const{viewToDuplicateStore:t,collectionContextStore:o,collectionViewStore:l,environment:a,temporaryStore:s}=e,u=o.collectionStore(),c=t.getType();if(!c||!u)return;const p=t.getName(),d=t.getPageSort(),g=t.getFormat(),m=t.getKeyStore("query2").getValue();r().createAndCommit({userAction:"CollectionSettingsDuplicateExistingView.duplicateViewSettings",environment:a,canUndo:!0,perform:e=>{n().sW({store:s??l,data:{name:p,type:c,page_sort:d,format:{...g,collection_pointer:u.pointer},query2:m},transaction:e})}}),(0,i().I)({collectionContextStore:o})}},384525:(e,t,o)=>{o.d(t,{W:()=>l});var n=()=>o(990966),r=()=>o(876822),i=()=>o(826955);function l(e){const{environment:t,collectionContextStore:o}=e;let l=o.collectionStore();const a=o.collectionViewBlockStore();if(!l||!a)return;const{mainEditorCurrentBlockStore:s}=r().default.state;s&&o.isFullScreenStore.state&&(l=i().NW.createChildStore(s,l.pointer)),n().selectAllText({environment:t,store:l.getNameStore(),canSelectAllBlocks:!1})}},747589:(e,t,o)=>{function n(e){const{dateRangeStart:t,dateRangeEnd:o,collectionContextStore:n}=e;n.dateRangeStartStore.setState(t),n.dateRangeEndStore.setState(o)}o.d(t,{I:()=>n})},900596:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=()=>o(788860),r=o(785893);const i=function(e){let{collectionViewName:t,collectionViewType:i}=e;return t?(0,r.jsx)(o(827618).Z,{children:t}):"page"===i?(0,r.jsx)(n()._H,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(n()._H,{...o(887430).b1[i]})}},69222:(e,t,o)=>{o.d(t,{Q:()=>H});o(267602),o(241792),o(228244);var n=o(667294),r=()=>o(219727),i=()=>o(142735),l=()=>o(846550),a=()=>o(816512),s=()=>o(608352),u=()=>o(226413),c=()=>o(754048),p=()=>o(605974),d=()=>o(396136),g=()=>o(752778),m=()=>o(788860),h=()=>o(513670),y=()=>o(696459),f=()=>o(707513),x=()=>o(308186),v=()=>o(125659),S=()=>o(487270),C=()=>o(352230),j=()=>o(828946),b=()=>o(98228),V=()=>o(692304),M=()=>o(826955),w=()=>o(154439),Z=()=>o(573357),k=()=>o(291198),P=()=>o(740046),G=()=>o(198829),B=()=>o(255577),F=()=>o(838367),T=()=>o(906651),I=()=>o(231219),R=()=>o(388284),_=()=>o(249392),L=()=>o(523516),A=o(785893);function H(e){const{onChange:t,currentGroups:o,groupBy:l,groupFormat:a,onClose:u,schema:c,parentStore:p}=e,[d,g]=(0,n.useState)(""),h=(0,i().qz)(void 0,V().Z),y=(0,r().Fy)(),f=(0,n.useCallback)((()=>{O({onChange:t,currentGroups:o,groupBy:l,groupFormat:a,inputValue:d,onClose:u})}),[o,l,a,d,t,u]);let x;return(0,n.useEffect)((()=>{var e;a&&("select"===a.value.type||"multi_select"===a.value.type)&&a.value.value?g(a.value.value):a&&(0,s().R7)(a.value)&&"exact"===(null===(e=a.value.value)||void 0===e?void 0:e.type)&&g(a.value.value.value)}),[a]),x=y.isMobile?{menuType:C().o.Modal,title:a?(0,A.jsx)(m()._H,{defaultMessage:"Rename group",id:"codeBlock.databaseEditGroupMenu.renameGroupTitle"}):(0,A.jsx)(m()._H,{defaultMessage:"Add a group",id:"codeBlock.databaseEditGroupMenu.addGroupTitle"}),left:(0,A.jsx)(m()._H,{defaultMessage:"Cancel",id:"codeBlock.databaseEditGroupMenu.cancelButton.label"}),right:(0,A.jsx)(m()._H,{defaultMessage:"Done",id:"codeBlock.databaseEditGroupMenu.doneButton.label"}),onClickRight:f,onClickLeft:u}:{menuType:C().o.Popup,width:N(l)?300:240,maxHeight:"50vh"},(0,A.jsx)(Z().Z,{capture:!0,render:e=>(0,A.jsx)(G().Z,{...x,...e,children:(0,A.jsx)(q,{groupBy:l,schema:c,onChange:t,currentGroups:o,groupFormat:a,onClose:u,parentStore:p,inputValue:d,setInputValue:g,menuListStore:h})})})}function U(){return(0,A.jsx)(m()._H,{defaultMessage:"Group already exists.",id:"database.groupExistsAlreadyError.message"})}function N(e){return"select"===e.type||"multi_select"===e.type||(0,s().HB)(e.type)}function W(e){let{currentGroups:t,onChange:o,groupFormat:l,onClose:u,inputValue:c,menuListStore:p}=e;const d=(0,r().O7)(),g=(0,m().YB)(),y=(0,i().qz)(p,V().Z),[f,v]=(0,n.useState)(c);return(0,A.jsx)(w().Z,{request:f,performRequest:e=>async function(e,t){const o=await j().x.searchActions.load();return(await o.searchVisibleSpaceUsers({environment:t,query:e,membersOnly:!1})).slice(0,20)}(e,d),debounce:b().vp,render:(e,n,r)=>{n||(n=[]);const i=h().oA(n.map((e=>({key:e.id,render:t=>(0,A.jsx)(L().Z,{actor:(0,a().dp)(e),...t}),action:()=>{const n={type:"person",value:{table:"notion_user",id:e.id}};return l&&h().Xy(n,l.value)?(null==u||u(),null):t.some((e=>(0,s().we)(n,e.value)))?(x().UW((0,A.jsx)(U,{})),null):void o({newGroupValue:n})}}))));let c;return c=r&&n&&0===i.length?(0,A.jsx)(R().Z,{children:(0,A.jsx)(F().Z,{title:(0,A.jsx)(m()._H,{defaultMessage:"No results",id:"database.noPersonSearchResults.message"})})}):(0,A.jsx)(B().ZP,{type:B().iW.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,A.jsx)(R().Z,{...e}),items:i}],store:y}),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(R().Z,{children:(0,A.jsx)(P().ZP,{value:f,focus:!0,placeholder:g.formatMessage({defaultMessage:"Search for a personâ€¦",id:"database.searchPerson.placeholder"}),onChange:e=>{v(e.target.value),y.setState({...y.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),c]})}})}function E(e,t,o,n,r,i){const l=o[n.property];if(!l||"relation"!==l.type)return null;const a=u().j0(l);if(!a)return null;const s=M().NW.createChildStore(t,a);return s.isDefined()&&i.length>0?{key:"new-page",render:e=>(0,A.jsx)(_().Z,{targetCollectionStore:s,pageName:i,...e}),action:()=>{const t=(0,S().TS)({environment:e,table:d().iU,spaceId:s.getSpaceId()}),o={table:d().iU,id:t,spaceId:s.getSpaceId()};r({newGroupValue:{type:"relation",value:o},newPage:{id:o.id,spaceId:o.spaceId,name:i}})}}:null}function O(e){let{onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:i,onClose:l}=e;const a=i.trim().replace(/,/g,"");let u;"select"===n.type||"multi_select"===n.type?u={type:n.type,value:a}:(0,s().aB)(n)&&(u={type:n.type,value:{type:"exact",value:a}}),u&&a?r&&h().Xy(u,r.value)?null==l||l():o.some((e=>u&&(0,s().we)(u,e.value)))?x().UW((0,A.jsx)(U,{})):t({newGroupValue:u}):null==l||l()}function K(e,t,o,n,r,i,l,a,u){const c=null==u?void 0:u.relativeVariableStore.state,d=c&&c[t.id],g=(e,o)=>{const r=M().NW.createChildStore(n,t);if(!r.isDefined())return;const i=r.getFormat().app_config_uri;return i&&o?e.formatMessage(p().qB[i][o].messageDescriptor):void 0};return e.map((e=>{const t=M().G.createChildStore(n,e);if(t.isTemplate())return;const u=d?(0,p().P8)(t.id,d):void 0;return{key:t.id,render:e=>(0,A.jsx)(I().Z,{store:t,titlePrefix:g(r,u),...e}),action:()=>{let t={type:"relation",value:e};u&&(t={type:"relation",value:{type:"relative",value:{type:"builtin",variable:u}}}),l&&h().Xy(t,l.value)?null==a||a():o.some((e=>(0,s().we)(t,e.value)))?x().UW((0,A.jsx)(U,{})):i({newGroupValue:t})}}}))}function D(e){let{onChange:t,currentGroups:o,groupBy:i,groupFormat:a,onClose:s,inputValue:u,setInputValue:p,menuListStore:d}=e;const g=(0,m().YB)(),h=(0,l().Fg)(),y=(0,n.useCallback)((()=>O({onChange:t,currentGroups:o,groupBy:i,groupFormat:a,inputValue:u,onClose:s})),[t,o,i,a,u,s]),x=(0,n.useCallback)((e=>function(e,t,o,n,r,i,l){13===e.keyCode?O({onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:i,onClose:l}):27===e.keyCode&&(null==l||l())}(e,t,o,i,a,u,s)),[t,o,i,a,u,s]),v=(0,n.useCallback)((e=>function(e,t,o){t(e.target.value),o.setState({...o.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}(e,p,d)),[d,p]),S=(0,r().MO)(),C=a?g.formatMessage({id:"database.collectionEditGroupMenu.renameGroupLabel.placeholder",defaultMessage:"Rename group"}):g.formatMessage({id:"database.collectionEditGroupMenu.newGroupLabel.placeholder",defaultMessage:"New group"});return S?(0,A.jsx)(R().Z,{children:(0,A.jsx)(P().ZP,{value:u,focus:!0,selectAll:!0,showClearButton:!1,focusInitial:!0,placeholder:C,onChange:v,onKeyDown:x})}):(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:6,width:"100%",background:h.inputBackground},children:[(0,A.jsx)(k().Z,{value:u,focus:!0,selectAll:!0,focusInitial:!0,placeholder:C,onChange:v,onKeyDown:x,format:k().B.Transparent,style:{fontSize:f().JB.UIRegular.desktop}}),(0,A.jsxs)(T().Z,{onClick:y,children:[(0,A.jsx)(m()._H,{defaultMessage:"Done",id:"database.collectionEditGroupMenu.submitButton.label"}),(0,c().U)({height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2})]})]})}function z(e){let{parentStore:t,schema:o,groupBy:l,currentGroups:a,onChange:s,groupFormat:c,onClose:p,inputValue:m,setInputValue:h,menuListStore:y}=e;const f=(0,r().O7)(),x=(0,n.useMemo)((()=>{const e=o[l.property];return!(!e||"relation"!==e.type)&&u().j0(e)}),[l.property,o]);return(0,i().VK)((()=>{if(!x)return!1;return M().NW.createChildStore(t,x).isDefined()}),[x,t])&&x?(0,A.jsx)(w().Z,{request:m,performRequest:e=>async function(e,t,o,n,r){const i=o[t.property];if(!i||!(0,u().p_)(i))return;const l=i.collection_pointer;if(!l)return;const a=M().NW.createChildStore(n,{table:g().vF,id:l.id});if(await a.load(),!a.isDefined())return;const s=a.getSpaceId(),c=await j().x.searchActions.load();return(await c.searchPagesInCollection({environment:r,query:e,collectionId:l.id,spaceId:s,excludeTemplates:!0,source:"collection_group_value",limit:20,includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1})).results.map((e=>({table:d().iU,id:e,spaceId:s})))}(e,l,o,t,f),debounce:b().vp,render:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return(0,A.jsx)($,{ready:r,results:n,parentStore:t,schema:o,groupBy:l,currentGroups:a,onChange:s,groupFormat:c,onClose:p,inputValue:m,setInputValue:h,menuListStore:y,collectionPointer:x,environment:f})}}):null}function $(e){let{parentStore:t,schema:o,groupBy:r,currentGroups:l,onChange:a,groupFormat:s,onClose:u,inputValue:c,setInputValue:p,menuListStore:d,results:g,ready:y,collectionPointer:f,environment:x}=e;const S=(0,m().YB)(),C=(0,n.useContext)(v().cu),j=(0,i().VK)((()=>h().oA([...K(g,f,l,t,S,a,s,u,C),E(x,t,o,r,a,c)])),[x,C,f,l,r,s,c,S,a,u,t,g,o]);let b;return b=y&&g&&0===j.length?(0,A.jsx)(R().Z,{children:(0,A.jsx)(F().Z,{title:(0,A.jsx)(m()._H,{defaultMessage:"No results",id:"database.noRelationSearchResults.message"})})}):(0,A.jsx)(B().ZP,{type:B().iW.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,A.jsx)(R().Z,{...e}),items:j}],store:d}),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(R().Z,{children:(0,A.jsx)(P().ZP,{value:c,focus:!0,placeholder:S.formatMessage({defaultMessage:"Type to search...",id:"database.searchRelation.placeholder"}),onChange:e=>{p(e.target.value),d.setState({...d.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),b]})}function q(e){let{groupBy:t,schema:o,onChange:n,currentGroups:r,groupFormat:i,onClose:l,parentStore:a,inputValue:u,setInputValue:c,menuListStore:p}=e;return o[t.property]?"select"===t.type||"multi_select"===t.type?(0,A.jsx)(D,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:l,inputValue:u,setInputValue:c,menuListStore:p}):"person"===t.type?(0,A.jsx)(W,{currentGroups:r,onChange:n,groupFormat:i,onClose:l,inputValue:u,menuListStore:p}):"relation"===t.type?(0,A.jsx)(z,{parentStore:a,schema:o,groupBy:t,currentGroups:r,onChange:n,groupFormat:i,onClose:l,inputValue:u,setInputValue:c,menuListStore:p}):(0,s().HB)(t.type)?(0,A.jsx)(D,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:l,inputValue:u,setInputValue:c,menuListStore:p}):"number"===t.type||"status"===t.type||"date"===t.type||"formula"===t.type||"checkbox"===t.type||"created_time"===t.type||"last_edited_time"===t.type||"created_by"===t.type||"last_edited_by"===t.type||"last_visited_time"===t.type||"location"===t.type?null:void(0,y().t1)(t.type):null}},157593:(e,t,o)=>{o.d(t,{Z:()=>W});o(267602),o(470928);var n=o(667294),r=()=>o(219727),i=()=>o(142735),l=()=>o(846550),a=()=>o(816512),s=()=>o(506347),u=()=>o(608352),c=()=>o(226413),p=()=>o(532850),d=()=>o(38883),g=()=>o(916539),m=()=>o(996106),h=()=>o(605974),y=()=>o(788860),f=()=>o(696459),x=()=>o(707513),v=()=>o(139224),S=()=>o(253335),C=()=>o(887430),j=()=>o(718959),b=()=>o(559729),V=()=>o(521045),M=()=>o(731738),w=()=>o(429725),Z=()=>o(876822),k=()=>o(826955),P=()=>o(69222),G=()=>o(709917),B=()=>o(154186),F=()=>o(448419),T=()=>o(715139),I=()=>o(729775),R=()=>o(943620),_=()=>o(384241),L=()=>o(654133),A=()=>o(864832),H=()=>o(328094),U=()=>o(246471),N=o(785893);const W=function(e){let{schema:t,groupFormat:n,collectionContextStore:r,isHiddenGroup:l,style:a,uncategorizedIconStyle:s,currentGroups:u,groupBy:p,onChange:d,onClose:g,disabled:m}=e;const h=(0,i().qz)(void 0,o(529048).Z),y=(0,i().VK)((()=>{const e=r.groupsStore.getGroupState(n);return null==e?void 0:e.groupUiParentStore}),[r,n]),f=(0,i().VK)((()=>{const e=t[n.property];if(e&&(0,c().p_)(e)&&y)return(0,o(129338).ke)(e,y)}),[t,n,y]),x=n.value,v=void 0===x.value,S=t[n.property];if(!S)return null;if(v)return(0,N.jsx)(ee,{groupFormat:n,schema:t,isHiddenGroup:l,collectionContextStore:r,style:a,uncategorizedIconStyle:s,parentStore:y});if("formula"===x.type){if("formula"!==x.type)return null;const e=x.value;return e?(0,N.jsx)(ue,{schema:t,currentGroups:u,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:a,isHiddenGroup:l,collectionContextStore:r,buttonPopupStore:h,parentStore:y,relatedCollectionAppConfigUri:f,groupValue:e,propertySchema:S}):null}return(0,N.jsx)(ue,{schema:t,currentGroups:u,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:a,isHiddenGroup:l,collectionContextStore:r,buttonPopupStore:h,parentStore:y,relatedCollectionAppConfigUri:f,groupValue:x,propertySchema:S})},E={overflow:"hidden",padding:3,borderRadius:4,fontWeight:x().Ue.medium};function O(e){const{isHiddenGroup:t}=e;return t?(0,N.jsx)(K,{...e,tooltipEvents:void 0}):(0,N.jsx)(L().Z,{renderTooltip:()=>(0,N.jsx)(y()._H,{defaultMessage:"Any items with an empty <b>{name}</b> property will go here. This group cannot be removed.",values:{name:null,b:e=>(0,N.jsx)("span",{style:{fontWeight:x().Ue.semibold},children:e})},id:"database.boardView.uncategorizedColumnTooltip"}),style:{width:240},textWrap:!0,render:t=>(0,N.jsx)(K,{...e,tooltipEvents:t})})}function K(e){const t={display:"flex",alignItems:"center",fontSize:14,lineHeight:1.2,paddingLeft:2,paddingRight:4,whiteSpace:"nowrap",overflow:"hidden",fontWeight:x().Ue.medium},{style:o,uncategorizedIconStyle:n,tooltipEvents:r,formattedLabelMessage:i}=e;return(0,N.jsxs)("div",{style:{...t,paddingLeft:0,...o},...r,children:[(0,g().R)({width:14,marginLeft:6,marginRight:6,...n}),(0,N.jsx)("span",{style:{marginLeft:4,...x().Yu},children:i})]})}function D(e){let{value:t}=e;return"other"===t.type?(0,N.jsx)(y()._H,{defaultMessage:"Other",id:"database.collectionGroupValue.textGroup.other"}):"alphabet_prefix"===t.type||"exact"===t.type?(0,N.jsx)(N.Fragment,{children:t.value}):void(0,f().t1)(t)}function z(e){let{groupFormat:t,schema:o}=e;const n=o[t.property];if(!n||"status"!==n.type)return null;const r=t.value;if(r.type!==n.type)return null;const{value:i}=r;if(!i)return null;const l=n.options??[],a=n.groups??[];if("by_group"===i.type){const e=a.find((e=>e.name===i.group));return e?(0,N.jsx)(G().r_,{group:e,style:{fontWeight:500},showIcon:!0,showColor:!0}):null}if("by_option"===i.type){const e=(0,p().i7)(l,i.option),t=e&&a.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)}));return e?(0,N.jsx)("span",{style:{fontWeight:500,lineHeight:"normal",overflow:"hidden",paddingRight:6},children:(0,N.jsx)(U().F,{format:d().lo.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1,groupColor:null==t?void 0:t.color})}):null}(0,f().t1)(i)}function $(e){let{value:t}=e;const o=(0,y().YB)();return(0,N.jsx)(N.Fragment,{children:(0,b().fZ)({intl:o,value:t})})}function q(e){let{value:t,format:o}=e;const n=(0,y().YB)();return(0,N.jsx)(N.Fragment,{children:(0,b().xg)({intl:n,value:t,format:o})})}function Y(e){let{groupValue:t,propertySchema:o,style:n}=e;const r=(0,l().yK)((()=>({checkboxStyle:{display:"inline-flex",marginRight:6},wrapperStyle:{fontWeight:x().Ue.medium,marginRight:3,display:"flex",alignItems:"center"}})),[]);return"checkbox"!==t.type?null:(0,N.jsxs)("div",{style:{...x().Yu,...r.wrapperStyle,...n},children:[(0,N.jsx)(T().Z,{checked:t.value,checkSize:10,size:14,disabled:!0,style:r.checkboxStyle}),(0,N.jsx)("span",{children:null==o?void 0:o.name})]})}function X(e){let{groupValue:t,style:o}=e;return(0,u().Mc)(t)&&t.value?(0,N.jsx)("div",{style:{...J,...x().Yu,...o},children:(0,N.jsx)($,{value:t.value})}):null}function Q(e){let{groupValue:t,propertySchema:o,style:n}=e;if("number"!==t.type||!t.value)return null;const r=(null==o?void 0:o.number_format)||m().dk;return(0,N.jsx)("div",{style:{...J,...n},children:(0,N.jsx)(q,{value:t.value,format:r})})}const J={overflow:"hidden",padding:3,paddingRight:6,borderRadius:4,fontWeight:x().Ue.medium};function ee(e){let{groupFormat:t,schema:o,isHiddenGroup:n,collectionContextStore:r,style:l,uncategorizedIconStyle:a,parentStore:s}=e;const u=o[t.property],p=(0,i().VK)((()=>r.collectionStore()),[r]),d=(0,i().VK)((()=>{let e=!1;return null!=p&&p.isDefined()&&u&&(0,c().p_)(u)&&s&&(e=(0,M().OG)({collectionStore:p,property:t.property,propertySchema:u,parentStore:s})),e}),[p,t,u,s]);if(!u)return null;const{name:g}=u;return d?(0,N.jsx)(O,{style:l,uncategorizedIconStyle:a,isHiddenGroup:n,formattedLabelMessage:(0,N.jsx)(y()._H,{...M().uL.sprintUncategorizedGroup,values:{name:g}})}):(0,N.jsx)(O,{style:l,uncategorizedIconStyle:a,isHiddenGroup:n,formattedLabelMessage:(0,N.jsx)(y()._H,{...b().nX.emptyGroupLabel,values:{name:g}})})}function te(e){let{style:t,collectionContextStore:o,groupValue:n,parentStore:r}=e;const l=(0,i().VK)((()=>{var e;return null===(e=o.collectionViewBlockStore())||void 0===e?void 0:e.id}),[o]),a=r&&"location"===n.type&&n.value?k().NW.createChildStore(r,n.value):void 0,u=(0,i().VK)((()=>null==a?void 0:a.getParentBlockStore()),[a]),c=(0,i().VK)((()=>{let e=s().tY.LocationProperty;return l?((0,j().qG)(l)&&(e=o.isInHomeWidgetStore.state?s().tY.PersonalHomeTileTasks:s().tY.PersonalHomePageTasks),e):e}),[l,o]),p=(0,i().VK)((()=>u?(0,w().ZP)({store:u,fullyQualified:!1,pageVisitSource:c}):void 0),[u,c]),d=(0,i().VK)((()=>null==a?void 0:a.getIcon()),[a]);return"location"===n.type&&n.value&&r&&a?(0,N.jsxs)(I().Z,{href:p,style:{...t,display:"flex"},ignoreLocalHoverState:!0,children:[(0,N.jsx)(R().Z,{disabled:!0,icon:d,size:20,isEmptyPage:!1,style:{marginTop:2,marginRight:6}}),(0,N.jsx)(_().Z,{store:a,underline:!0,style:{fontWeight:x().Ue.medium}})]}):null}function oe(e){let{groupValue:t,schema:o,groupFormat:n,collectionContextStore:r,style:l,parentStore:a,relatedCollectionAppConfigUri:s}=e;const p=o[n.property],d=p&&"relation"===p.type?c().j0(p):void 0,g=a&&d?k().NW.createChildStore(a,d):void 0,m=(0,i().VK)((()=>null==g?void 0:g.isDefined()),[g]);return a&&"relation"===t.type&&p&&"relation"===p.type&&d&&g&&m&&t.value?(0,u().t2)(t.value)?s?(0,N.jsx)(ne,{relatedCollectionAppUri:s,groupValueInner:t.value,collectionContextStore:r,collectionPointer:d,targetCollectionStore:g,parentStore:a,style:l,relationPropertySchema:p}):null:(0,u().RA)(t.value)?(0,N.jsx)(re,{parentStore:a,groupValueInner:t.value,collectionContextStore:r,propertySchema:p}):null:null}function ne(e){var t;let{relatedCollectionAppUri:o,groupValueInner:n,collectionContextStore:l,collectionPointer:a,targetCollectionStore:u,relationPropertySchema:c,parentStore:p,style:d}=e;const g=(0,y().YB)(),m=(0,r().O7)(),j=n.value.variable,b=(0,i().VK)((()=>u.isDefined()),[u]),M=(0,i().VK)((()=>(0,V().As)(l,j,a,u)),[l,j,a,u]),k=(0,i().VK)((()=>Z().default.state.mainEditorCurrentBlockStore),[]),P=(0,i().VK)((()=>M?C().mb({environment:m,store:M,mainEditorCurrentBlockStore:k,collectionContextStore:l})??(0,w().ZP)({store:M,pageVisitSource:s().tY.LinkInPage}):void 0),[m,M,k,l]);let G;"current"===j?G=g.formatMessage(S().sY.tasksCurrentSprintV2ViewNamePrefix):"next"===j?G=g.formatMessage(S().sY.tasksNextSprintV2ViewNamePrefix):"last"===j?G=g.formatMessage(S().sY.tasksLastSprintV2ViewNamePrefix):(0,f().t1)(j);const B=null===(t=h().qB[o])||void 0===t?void 0:t[j];if(b){if(!M)return(0,N.jsx)("div",{style:{fontWeight:x().Ue.medium},children:(0,N.jsx)(y()._H,{...null==B?void 0:B.messageDescriptor})});if(M)return(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,N.jsxs)("div",{style:{fontWeight:x().Ue.medium,marginBottom:.25},children:[G,":"]}),(0,N.jsx)(I().Z,{style:{...d,marginLeft:1},innerStyle:{...J},href:P,onClick:()=>{v().E3({collectionSettingsStore:l.settingsStore})},children:(0,N.jsx)(H().Z,{format:A().ZP.Format.Medium,blockId:M.id,isSingle:!0,shouldShrink:!0,parentStore:p,relationPropertySchema:c})})]})}return(0,N.jsx)("div",{style:{fontWeight:x().Ue.medium,marginBottom:.25},children:(0,N.jsx)(y()._H,{...null==B?void 0:B.messageDescriptor})})}function re(e){let{parentStore:t,groupValueInner:o,collectionContextStore:n,propertySchema:l,style:a}=e;const u=(0,r().O7)(),c=k().G.createChildStore(t,o),p=(0,i().VK)((()=>Z().default.state.mainEditorCurrentBlockStore),[]),d=(0,i().VK)((()=>C().mb({environment:u,store:c,mainEditorCurrentBlockStore:p,collectionContextStore:n})??(0,w().ZP)({store:c,pageVisitSource:s().tY.LinkInPage})),[u,c,p,n]);return(0,N.jsx)(I().Z,{style:a,innerStyle:{...J},href:d,onClick:()=>{v().E3({collectionSettingsStore:n.settingsStore})},children:(0,N.jsx)(H().Z,{format:A().ZP.Format.Medium,blockId:o.id,isSingle:!0,shouldShrink:!0,parentStore:t,relationPropertySchema:l})})}function ie(e){let{schema:t,currentGroups:o,groupBy:n,groupFormat:r,onChange:i,onClose:l,buttonPopupStore:a,parentStore:s}=e;return s?(0,N.jsx)(P().Q,{groupFormat:r,groupBy:n,currentGroups:o,schema:t,onChange:e=>{a.reset(),null==i||i(e)},onClose:()=>{a.reset(),null==l||l()},parentStore:s}):null}function le(e){var t;let{schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:u,disabled:g,style:m,buttonPopupStore:h,parentStore:y}=e;const f=(0,r().O7)(),x=(0,n.useCallback)((()=>(0,N.jsx)(ie,{schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:u,buttonPopupStore:h,parentStore:y})),[o,i,l,a,s,u,h,y]),v=o[a.property];if(!v||!c().cu(v))return null;const S=a.value;if(null===(t=v.options)||void 0===t||!t.length||void 0===S.value||S.type!==v.type)return null;const C=(0,p().i7)(v.options,S.value);return C?(0,N.jsx)(F().ZP,{render:x,disabled:g,buttonPopupStore:h,popupType:f.device.isMobile?F().Z4.SlideUp:F().Z4.Popup,originGap:4,renderOrigin:e=>(0,N.jsx)(B().Z,{style:{...J,...m},disabled:g,...e,children:(0,N.jsx)(U().a,{format:d().lo.Medium,isSingle:!0,value:C.value,color:C.color,showRemoveButton:!1})})}):null}function ae(e){let{groupValue:t,schema:o,currentGroups:l,groupBy:s,groupFormat:c,onChange:p,onClose:d,disabled:g,style:m,isHiddenGroup:h,buttonPopupStore:y,parentStore:f}=e;const x=(0,r().O7)(),v=(0,n.useCallback)((()=>(0,N.jsx)(ie,{schema:o,currentGroups:l,groupBy:s,groupFormat:c,onChange:p,onClose:d,buttonPopupStore:y,parentStore:f})),[o,l,s,c,p,d,y,f]),{value:S}=t,C=(0,i().VK)((()=>t.value&&(0,u().q6)(t)&&f?(0,a().Hl)({pointer:t.value,getRecordValue:f.getRecordValue}):void 0),[t,f]);return(0,u().q6)(t)&&S&&f&&null!=C&&C.asActor?(0,N.jsx)(F().ZP,{render:v,disabled:g,buttonPopupStore:y,popupType:x.device.isMobile?F().Z4.SlideUp:F().Z4.Popup,originGap:4,renderOrigin:e=>(0,N.jsx)(B().Z,{style:{...J,...m},disabled:g,...e,children:(0,N.jsx)(A().ZP,{format:A().ZP.Format.Medium,actor:C,showRemoveButton:!1,isSingle:!0,disableAvatarTooltip:h,shouldShrink:!0})})}):null}function se(e){let{groupValue:t,schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:c,disabled:p,style:d,buttonPopupStore:g,parentStore:m}=e;const h=(0,r().O7)(),y=(0,n.useCallback)((()=>(0,N.jsx)(ie,{schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:c,buttonPopupStore:g,parentStore:m})),[o,i,l,a,s,c,g,m]);if(!(0,u().R7)(t))return null;if(void 0!==t.value){const e=(0,N.jsx)(D,{value:t.value});return"exact"===t.value.type?(0,N.jsx)(F().ZP,{render:y,disabled:p,buttonPopupStore:g,popupType:h.device.isMobile?F().Z4.SlideUp:F().Z4.Popup,originGap:4,renderOrigin:t=>(0,N.jsx)(B().Z,{style:{...E,...x().Yu,...d},disabled:p,...t,children:e})}):(0,N.jsx)("div",{style:E,children:e})}return null}function ue(e){let{groupValue:t,propertySchema:o,schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:c,style:p,isHiddenGroup:d,collectionContextStore:g,buttonPopupStore:m,parentStore:h,relatedCollectionAppConfigUri:y}=e;return"select"===t.type||"multi_select"===t.type?(0,N.jsx)(le,{schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:c,style:p,buttonPopupStore:m,parentStore:h}):"status"===t.type?(0,N.jsx)(z,{groupFormat:l,schema:n}):(0,u().pd)(t.type)?(0,N.jsx)(ae,{schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:c,style:p,isHiddenGroup:d,buttonPopupStore:m,parentStore:h,groupValue:t}):"relation"===t.type?(0,N.jsx)(oe,{schema:n,groupFormat:l,collectionContextStore:g,style:p,parentStore:h,relatedCollectionAppConfigUri:y,groupValue:t}):"location"===t.type?(0,N.jsx)(te,{style:p,collectionContextStore:g,parentStore:h,groupValue:t}):(0,u().A1)(t.type)?(0,N.jsx)(X,{style:p,groupValue:t}):(0,u().HB)(t.type)?(0,N.jsx)(se,{schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:c,style:p,buttonPopupStore:m,parentStore:h,groupValue:t}):"number"===t.type?(0,N.jsx)(Q,{style:p,groupValue:t,propertySchema:"number"===o.type?o:void 0}):"checkbox"===t.type?(0,N.jsx)(Y,{style:p,propertySchema:o,groupValue:t}):void(0,f().t1)(t.type)}},249392:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(667294),r=o(785893);function i(e){const{pageName:t,targetCollectionStore:n,...i}=e,l=(0,o(219727).Fy)(),a=(0,o(142735).VK)((()=>n.getIcon()),[n]),s=(0,o(846550).yK)((e=>({medium:{color:e.mediumTextColor},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:o(820748).Qi*(l.isRetina?.5:1)},icon:{width:16,fill:e.mediumIconColor}})),[l.isRetina]),u=(0,r.jsxs)("div",{style:s.dbName,children:[(0,r.jsx)(o(943620).Z,{disabled:!0,icon:a,isEmptyPage:!1,size:l.isMobile?24:20}),(0,r.jsx)(o(384241).Z,{store:n,style:s.title})]});return(0,r.jsx)(o(827973).Z,{title:(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)(o(788860)._H,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,r.jsx)("span",{style:s.medium,children:e}),pageName:(0,r.jsx)("span",{style:{marginLeft:4,marginRight:4},children:t}),databaseNameWithIcon:u}})}),icon:(0,o(159732).R)(s.icon),...i})}const l=n.memo(i)},103163:(e,t,o)=>{o.d(t,{Z:()=>C});o(670560),o(267602),o(30005),o(241792),o(667294);var n=()=>o(332143),r=()=>o(788860),i=()=>o(513670),l=()=>o(921743),a=()=>o(667247),s=()=>o(352230),u=()=>o(164079),c=()=>o(998901),p=()=>o(461843),d=()=>o(827973),g=()=>o(198829),m=()=>o(255577),h=()=>o(470386),y=()=>o(388284),f=()=>o(654133),x=()=>o(868744),v=o(785893);const S=(0,r().vU)({noneText:{defaultMessage:"None",id:"database.propertyAggregationMenu.noneText"}});const C=(0,r().XN)((function(e){let{onClose:t,property:i,schema:l,currentAggregation:u,source:c,noneText:p,intl:f,onChange:C}=e;const j=(0,o(219727).O7)(),{device:w}=j;let Z;Z=w.isMobile?{menuType:s().o.Modal,title:(0,v.jsx)(r()._H,{defaultMessage:"Table aggregation",id:"database.mobilePropertyAggregationMenu.title"}),right:(0,v.jsx)(h().DoneMenuText,{}),onClickRight:t}:{menuType:s().o.Popup,width:200};const[k,P]=function(e,t,o,r,i,l,u,c){const p=[];let f=0,C=0;const{device:j}=l,w=function(e,t,o,r,i){const l={},a=null==i?void 0:i.enforceMaxAggregationLimit,s=null==i?void 0:i.aggregator,u=t[e];if(!u)return{};const c=e=>o(e,a);for(const p of n().o5)l[p]=b(p===s,p,c);if((0,n().iV)(u))for(const p of n().Sy)l[p]=b(p===s,p,c);if((0,n().O4)(u))for(const p of n().k$)l[p]=b(p===s,p,c);if((0,n().dN)(u))for(const p of n().f8)l[p]=b(p===s,p,c);if((0,n().Mv)(u))for(const p of n().gC)l[p]=b(p===s,p,c);if((0,n().Ei)(u))for(const p of n().OK)l[p]=V(e,p,i,t,o,r);if((0,n().FN)(u))for(const p of n().tD)l[p]=b(p===s,p,c);return l}(e,t,i,l,u);p.push({key:"none",render:e=>(0,v.jsx)(d().Z,{...e,checkState:!u,title:c||r.formatMessage(S.noneText)}),action:()=>i(void 0)});let Z="tableAggregation"===o?1:2;return Object.entries(n().cY).forEach((e=>{let[t,r]=e;const l=[];for(const i of r)if(w[i]){if("show_unique"===i)switch(o){case"tableAggregation":continue;case"rollupPropertyMenu":p.splice(1,0,w[i]),(null==u?void 0:u.aggregator)===i&&(f=1);continue}l.push(w[i]),(u&&(0,n().en)(null==u?void 0:u.aggregator)&&u.aggregator.operator===i||(null==u?void 0:u.aggregator)===i)&&(f=Z,C=l.length-1)}const c=[];if("count_aggregations"===t&&c.push({key:"limitToggleSection",render:e=>(0,v.jsx)(y().Z,{...e}),items:[M(u,i)]}),c.push({key:"aggregations",render:e=>(0,v.jsx)(y().Z,{topBorder:!0,...e}),items:l}),l.length>0){Z++;const e=a().nL[t],o={key:e,render:(t,o)=>(0,v.jsx)(x().Z,{...t,disableDefaultClick:!0,onFocus:o.onFocus,renderOrigin:(t,o)=>(0,v.jsx)(d().Z,{...t,ref:o,title:e}),renderExtension:(t,n)=>{let r;return r=j.isMobile?{menuType:s().o.Modal,title:e,right:(0,v.jsx)(h().DoneMenuText,{}),onClickRight:n.close,...t}:{menuType:s().o.Popup,width:250,...t},(0,v.jsx)(g().Z,{...r,children:(0,v.jsx)(m().ZP,{type:m().iW.Vertical,initialFocus:C,sections:c,onAccept:(e,t,r)=>{n.close(),o.onAccept&&o.onAccept(e,t,r)}})})}}),action:()=>null};p.push(o)}})),[p,f]}(i,l,c,f,C,j,u,p);return(0,v.jsx)(g().Z,{...Z,children:(0,v.jsx)(m().ZP,{type:m().iW.Vertical,initialFocus:P??0,sections:[{key:0,render:e=>(0,v.jsx)(y().Z,{...e}),items:k}],onAccept:t})})}));function j(e){let{isSelected:t,aggregationType:o,label:n,props:r}=e;const i=a().Sn[o];return(0,v.jsx)(f().Z,{placement:c().Placement.Right,delayThreshold:0,render:e=>(0,v.jsx)(d().Z,{title:n,checkState:t,...(0,u().Z)(e,r)}),renderTooltip:()=>(0,v.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[i&&(0,v.jsx)("img",{src:(0,l().D)(i),style:{borderRadius:4,width:140,marginTop:4}}),a().BG[o]]})},r.key)}function b(e,t,o){const n=a().VN[t],r=a().Sn[t];return{key:n,render:o=>(0,v.jsx)(f().Z,{placement:c().Placement.Right,delayThreshold:0,render:t=>(0,v.jsx)(d().Z,{title:n,checkState:e,...(0,u().Z)(t,o)}),renderTooltip:()=>(0,v.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[r&&(0,v.jsx)("img",{src:(0,l().D)(r),style:{borderRadius:4,width:140,marginTop:4}}),a().BG[t]]})},o.key),action:()=>{o(t)}}}function V(e,t,o,r,l,u){const{device:c}=u,p=a().VN[t],f=i().oA(function(e,t,o,r,i){const l=r[t];if(!l||"status"!==l.type)return;const a=l.groups;return a?a.map((t=>{const r=(e&&(0,n().en)(e.aggregator)&&e.aggregator.operator===o&&e.aggregator.groupName===t.name)??!1;return{key:`${o}${t.name}`,render:e=>(0,v.jsx)(j,{isSelected:r,aggregationType:o,label:t.name,props:e}),action:()=>{i({operator:o,groupName:t.name})}}})):void 0}(o,e,t,r,l));let S=0;if(o&&(0,n().en)(null==o?void 0:o.aggregator)&&o.aggregator.operator===t){const e=o.aggregator.groupName,n=f.findIndex((o=>o.key===`${t}${e}`));-1!==n&&(S=n)}return{key:t,render:(e,t)=>(0,v.jsx)(x().Z,{...e,onFocus:t.onFocus,renderOrigin:e=>(0,v.jsx)(d().Z,{...e,title:p}),renderExtension:(e,o)=>{let n;return n=c.isMobile?{menuType:s().o.Modal,title:p,right:(0,v.jsx)(h().DoneMenuText,{}),onClickRight:o.close,...e}:{menuType:s().o.Popup,width:200,...e},(0,v.jsx)(g().Z,{...n,children:(0,v.jsx)(m().ZP,{type:m().iW.Vertical,initialFocus:S,sections:[{key:"groups",render:e=>(0,v.jsx)(y().Z,{...e}),items:f}],onAccept:t.onAccept})})}}),action:()=>null}}function M(e,t){const o=Boolean(null==e?void 0:e.enforceMaxAggregationLimit);return{key:"aggregationLimitToggle",render:e=>(0,v.jsx)(p().Z,{on:o,menuListItemProps:e}),action:()=>{t(e?e.aggregator:"count",!o)}}}},129636:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var n=()=>o(219727),r=()=>o(846550),i=()=>o(568017),l=o(785893);const a=function(e){const{color:t}=e;return(0,l.jsx)(o(827973).Z,{...e,icon:(0,l.jsx)(s,{color:t}),title:(0,o(527511).Vn)(t)})};function s(e){let{color:t}=e;const o=(0,r().Fg)(),a=(0,n().O7)(),s=(0,i().KR)(o,t);return(0,l.jsx)("div",{style:{width:a.device.isMobile?24:18,height:a.device.isMobile?24:18,background:s.menuBackgroundColor,color:s.textColor,boxShadow:o.innerBorderBoxShadow,borderRadius:4}})}},461843:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=()=>o(788860),r=o(785893);const i=function(e){let{on:t,menuListItemProps:i}=e;return(0,r.jsx)(o(667637).Z,{...i,on:t,style:{alignItems:"flex-start",paddingTop:8,paddingBottom:8},title:(0,r.jsx)(n()._H,{defaultMessage:"Show large counts as 99+",id:"BoardAggregations.aggregationLimitToggle.title"}),captionStyle:{marginTop:6},shouldWrapCaption:!0,caption:(0,r.jsx)(n()._H,{defaultMessage:"This improves performance for large databases.",id:"BoardAggregations.aggregationLimitToggle.description"})})}},473604:(e,t,o)=>{o.d(t,{Z:()=>l});o(667294);var n=()=>o(701182);o(670560),o(267602),o(731107);var r=o(785893);const i=16;function l(e){const{startPoint:t,endPoint:o,style:i,showArrowHead:l,useRightAngles:u,cornerRadiusOverride:c,handleMouseMove:p,handleMouseLeave:d}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{startPoint:t,startCurvePoint:u?void 0:{x:t.x+n().i2,y:t.y},endPoint:l?{x:o.x-1.5,y:o.y}:o,endCurvePoint:u?void 0:{x:o.x-n().i2,y:o.y},cornerRadiusOverride:c,style:i,handleMouseMove:p,handleMouseLeave:d,children:e.children}),l&&(0,r.jsx)(a,{endPoint:o,style:i})]})}function a(e){const{endPoint:t,style:o}=e;return(0,r.jsx)("polyline",{points:`${t.x-5},${t.y-6} ${t.x},${t.y} ${t.x-5},${t.y+6}`,style:o,fill:"transparent"})}function s(e){const{startPoint:t,startCurvePoint:o,endPoint:n,endCurvePoint:l,style:a,cornerRadiusOverride:s,handleMouseMove:u,handleMouseLeave:c}=e;let p="";p=o&&l?`M ${t.x} ${t.y} L ${o.x} ${o.y} L ${l.x} ${l.y} L ${n.x} ${n.y}`:`M ${t.x} ${t.y} L ${t.x} ${n.y} L ${n.x} ${n.y}`;const d=function(e,t){function o(e,t,o){const r=t.x-e.x,i=t.y-e.y,l=Math.sqrt(r*r+i*i);return n(e,t,Math.min(1,o/l))}function n(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function r(e,t){e.length>2&&(e[e.length-2]=t.x.toString(),e[e.length-1]=t.y.toString())}function i(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}const l=e.split(/[,\s]/).reduce(((e,t)=>{const o=t.match("([a-zA-Z])(.+)");return o?(e.push(o[1]),e.push(o[2])):e.push(t),e}),[]).reduce((function(e,t){return!isNaN(parseFloat(t))&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]);let a=[];if(l.length>1){const e=i(l[0]);let s=null;"Z"===l[l.length-1][0]&&l[0].length>2&&(s=["L",e.x.toString(),e.y.toString()],l[l.length-1]=s),a.push(l[0]);for(let u=1;u<l.length;u++){const e=a[a.length-1],c=l[u],p=c===s?l[1]:l[u+1];if(p&&e&&e.length>2&&"L"===c[0]&&p.length>2&&"L"===p[0]){const l=i(e),s=i(c),u=i(p),d=o(s,l,t),g=o(s,u,t);r(c,d),a.push(c);const m=n(d,s,.5),h=n(s,g,.5),y=["C",m.x.toString(),m.y.toString(),h.x.toString(),h.y.toString(),g.x.toString(),g.y.toString()];a.push(y)}else a.push(c)}if(s){const e=i(a[a.length-1]);a.push(["Z"]),r(a[0],e)}}else a=l;return a.reduce((function(e,t){return`${e}${t.join(" ")} `}),"")}(p,s||i);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d,style:a,fill:"transparent"}),(u||c)&&(0,r.jsxs)("g",{onMouseMove:u,onMouseLeave:c,children:[(0,r.jsx)("path",{d,style:{strokeOpacity:0,strokeWidth:16,pointerEvents:"stroke",cursor:"default"},fill:"transparent"}),e.children]})]})}},817870:(e,t,o)=>{o.d(t,{C:()=>l,g:()=>a});o(821057);var n=o(667294),r=o(785893);const i=n.createContext(void 0);function l(e){return(0,r.jsx)(i.Provider,{value:e.value,children:e.children})}function a(){const e=n.useContext(i);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}i.displayName="ChartContext"},412511:(e,t,o)=>{o.d(t,{$G:()=>a,AN:()=>u,Xq:()=>p,du:()=>l});o(670560),o(267602),o(916054),o(653476),o(470928);var n=()=>o(730120),r=()=>o(803021),i=()=>o(526243);function l(e){const t=n().ou.fromMillis(e.startUnixTimestampMS),o=e.endUnixTimestampMS?n().ou.fromMillis(e.endUnixTimestampMS):void 0,r=n().ou.fromMillis(e.startOfWeekUnixTimestampMS),i=n().ou.fromMillis(e.endOfWeekUnixTimestampMS),l=t.startOf("day"),a=n().ou.max(r,l),s=Math.ceil(a.diff(r,"days").get("days"));let u=1;if(o){const e=o.endOf("day"),t=n().ou.min(i,e);u=Math.ceil(t.diff(a,"days").get("days"))}return{start:t,end:o,startOfWeek:r,endOfWeek:i,startColumn:s,columnCount:u}}function a(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const s={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15};function u(e){const t=e.filter((e=>{var t;if(!e.conferencing)return!1;return!function(e){if("declined"===e)return!0;return!1}((null===(t=e.attendees)||void 0===t?void 0:t.find((e=>e.self)))?e.responseStatus??"accepted":"accepted")&&!e.isAllDay}));if(0===t.length)return;const{upcomingMinsThreshold:o,startingMinsThreshold:r,startedMinsThreshold:i}=s,l=[],a=[],u=[],p=[],d=[];for(const s of t){if(s.isAllDay)continue;const e=c(s),t=n().ou.now(),g=e.start.diff(t,"minutes").minutes;g>=0&&g<=o?l.push(s):-g>=r?u.push(s):-g>=i?p.push(s):e.contains(t)?a.push(s):d.push(s)}return[...l,...u,...p,...a,...d][0]}function c(e){const t=n().ou.fromISO(e.start.dateTime,{zone:e.start.timeZone}),o=n().ou.fromISO(e.end.dateTime,{zone:e.end.timeZone});return n().Xp.fromDateTimes(t,o)}function p(e){let{newCalendarStart:t,newCalendarEnd:o,collectionViewId:n,currentUserId:l="0"}=e;(0,r().nQ)(t,o,Date.now())?i().ZP.clearLocalDateRangeStart({collectionViewId:n,currentUserId:l}):i().ZP.setLocalDateRangeStart({collectionViewId:n,currentUserId:l,dateRangeStart:t})}},731738:(e,t,o)=>{o.d(t,{Dl:()=>s,OG:()=>a,uL:()=>l});var n=()=>o(926724),r=()=>o(605974),i=()=>o(129338);const l=(0,o(788860).vU)({sprintUncategorizedGroup:{defaultMessage:"Backlog (No {name})",id:"database.sprintDatabaseView.uncategorizedGroupLabel"}});function a(e){const{collectionStore:t,property:o,propertySchema:r,parentStore:l}=e;let a=!1;if(null!=t&&t.isDefined()){const e=t.getPropertyMapping();a=(null==e?void 0:e[n().Es.TaskToSprintRelation])===o}return(0,i().ke)(r,l)===n().p$||a}function s(e){return(0,r().PB)({appUri:e.getFormatStore().getKeyStore("app_config_uri").getValue(),collectionSchema:e.getSchema()})}},95804:(e,t,o)=>{o.d(t,{P:()=>l});o(670560),o(267602),o(653476),o(30005);var n=()=>o(142735),r=()=>o(608352),i=()=>o(559729);function l(e){let{collectionContextStore:t,groupBy:o,groupsFormatKey:l,reducerResult:a,groupsLimit:s,renderGroupsFromAggregationArgs:u,removeUncategorized:c}=e;return(0,n().yR)((()=>{var e;const n=t.normalizedFormatStore.state,p=t.normalizedSchemaStore.state,d=t.collectionViewBlockStore();if("v2"===(null==a?void 0:a.version)){if(!o)return{version:"v2",currentGroups:[],visibleGroups:[],hiddenGroups:[],hasMore:!1};const e=[],t=[];return a.results.forEach((n=>{n.visible?e.push({property:o.property,value:n.value}):t.push({property:o.property,value:n.value,hidden:!0})})),{version:"v2",currentGroups:[...e,...t],visibleGroups:e,hiddenGroups:t,hasMore:a.hasMore}}if(!o||!d)return{version:"v1",currentGroups:[],visibleGroups:[],hiddenGroups:[],total:0};const g=(0,r().Qq)({schema:p,groupBy:o}),m="chart_subgroups"===l&&null!=a&&a.subGroupResults?a.subGroupResults:null==a?void 0:a.results,h=(0,i().Cz)({groupBy:o,schema:p,formatGroups:n[l]||[],schemaGroups:g,reducerResults:m,getRecordModel:d.getRecordModel,relativeVariableResult:t.relativeVariableStore.state,viewAppConfigUri:null===(e=t.collectionViewStore())||void 0===e?void 0:e.getFormat().app_config_uri,allowedCollectionStores:t.collectionStoresStore.state,renderGroupsFromAggregationArgs:u,removeUncategorized:c}),y=h.filter((e=>!(0,r().eF)(e))).slice(0,s),f=h.filter((e=>(0,r().eF)(e))),x=a?a.total:0;return{version:"v1",currentGroups:[...y,...f],visibleGroups:y,hiddenGroups:f,total:x}}),[t,o,a,l,s,u,c])}},452404:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return!1}}const r=new n},804097:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(470928);class n extends(()=>o(442))().Z{findTableHeaderCell(e,t){return this.find((o=>o.collectionContextStore===e&&o.property===t))}}const r=new n},932200:(e,t,o)=>{o.d(t,{Y:()=>y,j:()=>f});var n=()=>o(219727),r=()=>o(142735),i=()=>o(29488),l=()=>o(801812),a=()=>o(255933),s=()=>o(293307),u=()=>o(824462),c=()=>o(677559),p=()=>o(876822),d=()=>o(985866),g=()=>o(601952),m=()=>o(999582);const h=!1;function y(e){var t;const o=null===(t=(0,c().XJ)(s().iL).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().VK)((()=>{if(!o)return;const t=e instanceof d().Z?e.collectionStore():e;t&&o(t)}),[o,e])}function f(){const e=(0,n().O7)(),t=(0,r().VK)((()=>{var e;if(function(){const e=g().default.state.initialRenderCompleted;h&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,l().r5)((async()=>{if(!t)return;(m().Z.debug||h)&&console.log("Refreshing workflow template instance map for space",t);const o={table:a().bx,id:t,spaceId:t},n=await u().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,i().O)(o);m().Z.setState({...m().Z.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},330814:(e,t,o)=>{o.d(t,{z:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("flag",{viewBox:"0 0 13 14",svg:(0,n.jsx)("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},209980:(e,t,o)=>{o.d(t,{K:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("myTasksLarge",{viewBox:"0 0 48 48",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M21.693 39.17a9.05 9.05 0 0 1-.73 1.238H39.52c1.65 0 2.892-.413 3.727-1.238.835-.824 1.253-2.05 1.253-3.68V19.203c0-1.628-.418-2.855-1.253-3.68-.835-.824-2.078-1.236-3.727-1.236H16.253c-1.66 0-2.908.412-3.744 1.237-.824.814-1.237 2.04-1.237 3.68v5.28c.212-.02.423-.036.635-.047a6.387 6.387 0 0 1 1.269 0c.222.01.438.027.65.048v-5.14c0-.824.211-1.448.634-1.87.423-.424 1.031-.635 1.824-.635h23.188c.783 0 1.39.212 1.824.634.434.423.65 1.047.65 1.872v16.003c0 .825-.216 1.449-.65 1.872-.433.423-1.041.634-1.824.634H22.248a8.47 8.47 0 0 1-.555 1.316ZM15.364 10.082c-.38.381-.629.93-.745 1.65h26.55c-.127-.72-.38-1.269-.761-1.65-.37-.39-.952-.586-1.745-.586H17.125c-.793 0-1.38.195-1.76.586ZM18.52 5.816c-.38.338-.591.846-.634 1.523h20.016c-.053-.677-.275-1.185-.666-1.523-.38-.349-.936-.523-1.665-.523H20.2c-.729 0-1.29.174-1.68.523Z"}),(0,n.jsx)("path",{d:"M9.448 42.073a7.71 7.71 0 0 0 3.11.634c1.088 0 2.12-.211 3.092-.634a8.253 8.253 0 0 0 2.57-1.745 8.123 8.123 0 0 0 1.76-2.57 7.712 7.712 0 0 0 .634-3.108 7.75 7.75 0 0 0-.634-3.124 8.032 8.032 0 0 0-1.729-2.57 8.03 8.03 0 0 0-2.57-1.728 7.75 7.75 0 0 0-3.124-.635 7.71 7.71 0 0 0-3.109.635 7.907 7.907 0 0 0-2.569 1.744 8.253 8.253 0 0 0-1.745 2.57A7.639 7.639 0 0 0 4.5 34.65c0 1.11.211 2.152.634 3.125a8.254 8.254 0 0 0 1.745 2.57 8.03 8.03 0 0 0 2.57 1.728Zm3.807-2.649c-.17.18-.402.27-.698.27-.296 0-.534-.09-.714-.27-.169-.18-.253-.412-.253-.698v-3.108H8.48c-.286 0-.518-.09-.698-.27-.18-.17-.27-.402-.27-.698 0-.296.09-.528.27-.698.18-.18.412-.27.698-.27h3.109v-3.108c0-.285.084-.518.253-.698.18-.18.418-.27.714-.27s.529.09.698.27c.18.18.27.413.27.698v3.109h3.108c.286 0 .518.09.698.27.18.169.27.401.27.697 0 .296-.09.529-.27.698-.18.18-.412.27-.698.27h-3.108v3.108c0 .286-.09.519-.27.698ZM27.229 32.326c.292.341.664.512 1.116.512.514 0 .903-.198 1.166-.592l5.693-8.58c.095-.14.164-.277.21-.413a1.3 1.3 0 0 0 .068-.401c0-.354-.124-.646-.37-.876a1.246 1.246 0 0 0-.901-.352c-.247 0-.456.05-.63.149-.168.094-.328.259-.48.493l-4.78 7.506-2.394-2.868c-.259-.3-.584-.45-.974-.45-.366 0-.668.117-.907.351a1.186 1.186 0 0 0-.357.883c0 .16.024.312.073.456.054.14.15.286.29.438l3.177 3.744Z"})]})})}}]);