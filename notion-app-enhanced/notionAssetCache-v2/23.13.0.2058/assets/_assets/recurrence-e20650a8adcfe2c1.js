"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[90653],{832024:(e,t,n)=>{n.d(t,{AK:()=>p,Mc:()=>r,OS:()=>u,Td:()=>g,Uu:()=>c,XC:()=>s,ZK:()=>h,e8:()=>m,gV:()=>d,hc:()=>y,n0:()=>v,u0:()=>f,xi:()=>l});var o=()=>n(594546),a=()=>n(572623),i=()=>n(697623);function r(e){o().K4(e,"add_slack_integration")}function c(e){o().K4(e,"remove_slack_integration")}function s(e,t){o().K4(e,"slack_notification_create",t)}function l(e,t){o().K4(e,"slack_notification_delete",t)}function u(e,t){o().K4(e,"slack_notification_update",t)}function d(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_render_button",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function m(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function p(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function f(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function g(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function y(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function v(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function h(e,t){const n=i().zt(),r=a().JF();o().K4(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success})}},49396:(e,t,n)=>{n.r(t),n.d(t,{addAutomationAction:()=>q,clearInvalidVariables:()=>L,createAutomation:()=>Z,deleteAutomation:()=>Y,disableAutomation:()=>J,duplicateAutomation:()=>H,duplicateAutomationAction:()=>O,enableAutomation:()=>G,insertEmptyTextInDuplicateBlockAction:()=>X,messages:()=>E,removeAutomationAction:()=>$,reorderAutomationActions:()=>U,restartAutomation:()=>V});n(821057),n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(653476),n(470928),n(30005),n(241792);var o=n.n(n(369282)),a=()=>n(730120),i=()=>n(492788),r=()=>n(912203),c=()=>n(271896),s=()=>n(764052),l=()=>n(157955),u=()=>n(559102),d=()=>n(92960),m=()=>n(481529),p=()=>n(827370),f=()=>n(494616),g=()=>n(922713),y=()=>n(81954),v=()=>n(955620),h=()=>n(513670),_=()=>n(543172),b=()=>n(855741),M=()=>n(696459),S=()=>n(832024),k=()=>n(282662),x=()=>n(332542),w=()=>n(636340),C=()=>n(990966),R=()=>n(269299),T=()=>n(205228),I=()=>n(872308),A=()=>n(594546),j=()=>n(615676),P=()=>n(487270),F=()=>n(32969),W=()=>n(637118),B=()=>n(309841),D=()=>n(658517),K=()=>n(807629);const E=(0,n(788860).vU)({genericErrorMessage:{id:"automations.buttonTrigger.genericErrorMessage",defaultMessage:"Button failed to execute"},open:{defaultMessage:"Open",id:"automations.buttonTrigger.open"},undo:{defaultMessage:"Undo",id:"automations.buttonTrigger.undo"},defaultConfirmationWorkflowText:{defaultMessage:"Are you sure you want to continue?",id:"automations.buttonTrigger.defaultConfirmationWorkflowText"},defaultContinueWorkflowMessage:{defaultMessage:"Continue",id:"automations.buttonTrigger.defaultContinueWorkflowMessage"},defaultStopWorkflowMessage:{defaultMessage:"Cancel",id:"automations.buttonTrigger.defaultStopWorkflowMessage"},errorQueryCollectionTooManyPages:{defaultMessage:"Button impacts too many pages",id:"automations.buttonTrigger.errorQueryCollectionTooManyPages"},errorRecordInTrash:{id:"automations.buttonTrigger.errorRecordInTrash",defaultMessage:"Button is editing a page in trash"}});function Z(e){const{actionIds:t,automationId:n,automationName:a,environment:i,inMemoryRecordCache:r,parentPointer:c,transaction:s,trigger:l}=e,u=n??(0,P().TS)({environment:i,table:f().cv,spaceId:c.spaceId}),d=w().ae({environment:i,inMemoryRecordCache:r??i.defaultRecordCache.inMemoryRecordCache,table:f().cv,transaction:s,value:{action_ids:t,alive:!0,id:u,parent_id:c.id,parent_table:c.table,properties:{name:a},space_id:c.spaceId,status:"active",trigger:l}});return o()(d.isTriggerType(l.type),"Trigger type mismatch"),d}function q(e){const{actionId:t,environment:n,intl:a,automationStore:r,actionType:s,transaction:l,insertionPoint:u,config:d,createDuplicateBlocksContainer:m=!0,builderType:y="sidebar"}=e,h=r.getSpaceId();if(!h)return;let b;if("duplicate_blocks"===s&&m){b=w().j4({environment:n,inMemoryRecordCache:r.inMemoryRecordCache,transaction:l,type:"text"});const e=X({environment:n,contentStore:b.getContentStore(),transaction:l});i().default.afterNextFlush((()=>{const t=F().C.find((t=>p().dr.isEqual(t.props.store.pointer,e.pointer)));t&&C().setSelectionAtStart({store:t.props.store.getBlockTitleStore()})}))}const S=d??function(e){const{actionType:t,automationStore:n,intl:o}=e;if("modal_confirmation"===t)return{continue_button:{text:o.formatMessage(E.defaultContinueWorkflowMessage)},cancel_button:{text:o.formatMessage(E.defaultStopWorkflowMessage)},text:{type:"simple",value:(0,v().TPx)(o.formatMessage(E.defaultConfirmationWorkflowText))}};if("define_variables"===t){const e=(0,_().ZP)();return{values:{[e]:{name:(0,D().h)(n.getActionStores(),o.formatMessage(g().eC)),value:{type:"simple",value:[[""]]}}},variableIds:[e]}}}({actionType:s,automationStore:r,intl:a})??{},x=w().ae({environment:n,inMemoryRecordCache:r.inMemoryRecordCache,table:g().Xj,transaction:l,value:{id:t,type:s,parent_id:r.id,parent_table:f().cv,alive:!0,space_id:h,config:S,blocks:b?[b.id]:[]}});return b&&k().R3({transaction:l,parentStore:x.getKeyStore("blocks"),appendStore:b}),!u||"afterActionId"in u?k().R3({transaction:l,parentStore:r.getActionIdsStore(),appendStore:x,after:null==u?void 0:u.afterActionId}):"beforeActionId"in u?k().Ce({transaction:l,parentStore:r.getActionIdsStore(),prependStore:x,before:u.beforeActionId}):(0,M().t1)(u),z({transaction:l,automationStore:r}),(0,B().GV)(((e,t,o)=>{const a=(0,A().mc)(n),i=(0,B().TI)({automationActionStore:x,formulaAnalyticsModule:t,formulasModule:e,simpleFormulasModule:o});(0,M().$K)(i)&&(0,c().A2)(a,{automation_action:i,automation_action_id:x.id,automation_id:x.getParentId(),builder_type:y}),x.isDefined()&&(0,c().eI)(a,{automation_action_id:x.id,automation_action_type:x.getType(),automation_id:r.id,builder_type:y})})),o()(x.isType(s),"Action type mismatch"),x}function V(e){var t,n;const{automationStore:o,transaction:i}=e,r=o.getRecurrence();if(!r)return;const c=a().ou.now().plus({day:1}).startOf("day"),s={...r,start_date:c.toMillis(),end_condition:"date"===(null===(t=r.end_condition)||void 0===t?void 0:t.type)?{type:"date",end_at:(0,l().getNewEndTimestamp)(c,r.start_date,null===(n=r.end_condition)||void 0===n?void 0:n.end_at).toMillis()}:r.end_condition};w().sW({store:o,transaction:i,data:{status:"active"}}),w().sW({store:o.getKeyStore("trigger"),transaction:i,data:{recurrence:(0,l().convertFromUnpersistedRecurrenceConfig)(s)}})}function H(e){const{actorPointer:t,environment:n,includeParenting:o,sourceAutomationStore:a,targetAutomationId:i,transaction:r}=e,c=a.getParentStore();if(!c||!c.isReady())throw new Error("Automation parent store not ready");const s=a.getValue(),l=a.getSpaceId();if(!(0,M().$K)(s)||!(0,M().$K)(l))throw new Error("Undefined automation value or space id");const d={},m={...(0,h().Xh)(s),id:i??(0,P().TS)({environment:n,table:f().cv,spaceId:(0,y().J)(l)})};d[a.id]=m.id,(0,M().$K)(m.action_ids)&&(0,M().Of)(m.action_ids)&&m.action_ids.forEach((e=>d[e]=(0,P().TS)({environment:n,table:g().Xj,spaceId:(0,y().J)(l)})));const p=e=>{let{requested:t}=e;const n=d[t.id];return(0,M().$K)(n)?{...t,id:n}:t};(0,u().J_)({actor:t,duplicateRecord:m,options:{},mapper:p,originalRecord:s});const v=w().ae({environment:n,inMemoryRecordCache:a.inMemoryRecordCache,table:f().cv,transaction:r,value:m});o&&x().jG({childStore:v,parentStore:c,transaction:r});const _=a.getActionStores(),b=Promise.all(_.map((e=>{const t=d[e.id],{automationActionStore:o,onComplete:a}=O({environment:n,includeParenting:!1,mapper:p,sourceActionStore:e,targetAutomationActionId:t,transaction:r});return x().jG({childStore:o,parentStore:v,transaction:r}),a}))),S=b.then((e=>e.flat()));return{automationStore:v,onComplete:S}}function O(e){const{environment:t,includeParenting:n,insertionPoint:o,mapper:a,sourceActionStore:i,targetAutomationActionId:r,transaction:s}=e,l=i.getParentStore();if(!l||!l.isReady())throw new Error("Automation store is not ready");const d=i.getValue(),m=i.getSpaceId();if(!(0,M().$K)(d)||!(0,M().$K)(m))throw new Error("Undefined action value or space id");const p={...(0,h().Xh)(d),id:r??(0,P().TS)({environment:t,table:g().Xj,spaceId:(0,y().J)(m)})},f=t.currentUser.id,v=i.inMemoryRecordCache.makeGetRecordRoleFn(f);(0,u().XJ)({duplicateRecord:p,getRecordRole:v,originalRecord:d,mapper:e=>(null==a?void 0:a(e))??e.requested,options:{},originOptions:{baseUrl:T().default.domainBaseUrl,publicDomainName:T().default.publicDomainName},duplicateBlocks:!1});const _=w().ae({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,table:g().Xj,transaction:s,value:p});n&&(!o||"afterActionId"in o?x().jG({after:null==o?void 0:o.afterActionId,childStore:_,parentStore:l,transaction:s}):"beforeActionId"in o?x().SH({before:null==o?void 0:o.beforeActionId,childStore:_,parentStore:l,transaction:s}):(0,M().t1)(o),z({transaction:s,automationStore:l}));const b=Promise.all(i.getBlockStores().map((e=>{const[n,o]=I().duplicateBlock({addCopyName:!1,baseUrl:T().default.domainBaseUrl,deepCopyTransclusionContainers:!1,environment:t,preferDuplicateLocation:"local",publicDomainName:T().default.publicDomainName,resolveTemplateVariables:!1,stores:[e],targetSpaceId:(0,y().J)(e.pointer.spaceId),transaction:s}),a=n[0];return x().jG({childStore:a,parentStore:_,transaction:s}),o}))),S=_.getModel();return(0,M().$K)(S)&&(0,B().GV)(((e,n,o)=>{const a=(0,A().mc)(t),i=(0,B().TI)({automationActionStore:_,formulaAnalyticsModule:n,formulasModule:e,simpleFormulasModule:o});(0,M().$K)(i)&&(0,c().A2)(a,{automation_action:i,automation_action_id:S.id,automation_id:S.parent_id,from:"duplicate"}),(0,c().eI)(a,{automation_action_id:S.id,automation_action_type:S.type,automation_id:l.id,from:"duplicate"})})),{automationActionStore:_,onComplete:b}}function U(e){const{environment:t,automationStore:n,automationTypecheckModule:o,contextType:a,formulasModule:i,intl:r,newActionIds:c,transaction:s,from:l,movedActionId:u}=e;w().sW({store:n,transaction:s,data:{action_ids:c}}),z({automationStore:n,transaction:s});N({automationStore:n,transaction:s,typecheckResult:(0,K().k)({environment:t,automationStore:n,automationTypecheckModule:o,contextType:a,formulasModule:i,intl:r})}),(0,A().j)({environment:t,event:{eventName:"automation_action_move",eventProperties:{automation_id:n.id,automation_action_id:u,from:l}}})}function $(e){const{actionStore:t,automationStore:n,automationTypecheckModule:o,contextType:a,environment:i,formulasModule:r,intl:s,transaction:l}=e,u=(0,K().k)({environment:i,automationStore:n,automationTypecheckModule:o,contextType:a,formulasModule:r,intl:s});!function(e){const{automationActionStore:t,automationStore:n,environment:o,transaction:a,hasError:i=!1}=e;let r=t.getParentStore();if((0,M().$K)(n)){const e=t.getParentPointer();if(!(0,M().$K)(e))throw new Error("Automation action does not have a parent pointer");if(!p().dr.isEqual(e,n.pointer))throw new Error(`Automation action parent pointer does not match argument: ${p().dr.toKey(e)}, ${p().dr.toKey(n.pointer)}`);r=n}else if(!(0,M().$K)(r))throw new Error("Automation store is undefined");x().hr({childStore:t,parentStore:r,transaction:a});const s=t.getModel();(0,M().$K)(s)&&(0,B().GV)(((e,n,a)=>{const l=(0,A().mc)(o),u=(0,B().TI)({automationActionStore:t,formulaAnalyticsModule:n,formulasModule:e,simpleFormulasModule:a});(0,M().$K)(u)&&(0,c().OK)(l,{automation_action:u,automation_action_id:s.id,automation_id:s.parent_id,has_error:i}),(0,c().co)(l,{automation_action_id:s.id,automation_action_type:s.type,automation_id:r.id,has_error:i})}))}({automationActionStore:t,environment:i,transaction:l,hasError:(b().x.isSuccess(u)&&u.value.actionValidationFailures[t.id]||[]).length>0}),N({automationStore:n,transaction:l,typecheckResult:u})}function L(e){const{environment:t,automationStore:n,automationTypecheckModule:o,contextType:a,formulasModule:i,intl:r,transaction:c}=e;N({automationStore:n,transaction:c,typecheckResult:(0,K().k)({environment:t,automationStore:n,automationTypecheckModule:o,contextType:a,formulasModule:i,intl:r})})}function z(e){const{automationStore:t,transaction:n}=e;t.getSpaceId()&&t.getActionStores().forEach(((e,t)=>{var o;if(!e.isDefined())return;const a=e.getModel();a.isType("open_page")&&"url"===(null===(o=a.getConfig())||void 0===o||null===(o=o.target)||void 0===o?void 0:o.type)&&!(0,r().GQ)(t)&&w().sW({store:e.getConfigStore(),transaction:n,data:{target:null}})}))}function N(e){const{automationStore:t,transaction:n,typecheckResult:o}=e,a=t.getSpaceId(),i=t.getModel();if(a&&i&&!b().x.isFail(o))for(const r of i.getActionIds()){const e=t.getRecordStore(t,{table:g().Xj,id:r,spaceId:a});if(!e.isDefined())continue;const i=e.getModel(),c=new Set(o.value.actionInputValueTypes[r].map((e=>{if(e.kind===d().FormulaContextValueKind.Binding||e.kind===d().FormulaContextValueKind.ContextValue)return e.id;e.kind!==d().FormulaContextValueKind.ThisRow&&(0,M().t1)(e)})).filter(M().$K)),{value:l}=(0,s().e)({automationActionModel:i,baseUrl:T().default.domainBaseUrl,preventClearingConfig:!0,publicDomainName:T().default.publicDomainName,sourceSpaceId:a,visitors:{visitCollectionProperty:void 0,visitCollectionPropertyPointer:void 0,visitFormulaContextValue:e=>c.has(e)?{type:"keep"}:{type:"replace",value:void 0},visitFormulaPageProperty:void 0,visitRecordPointer:void 0}}),u=m().op.update({pointer:e.pointer,path:["config"],args:l.getConfig()??{}});R().applyOperation({store:e,operation:u,transaction:n})}}function X(e){const{environment:t,contentStore:n,transaction:o}=e,a=w().j4({environment:t,type:"text",inMemoryRecordCache:n.inMemoryRecordCache,transaction:o,spaceId:n.pointer.spaceId});return k().R3({parentStore:n,appendStore:a,transaction:o}).childStore}function G(e){const{automationStore:t,environment:n,transaction:o}=e;w().sW({store:t,data:{status:"active"},transaction:o});const a=t.getModel();(0,M().$K)(a)&&(0,B().GV)(((e,o,i)=>{const r=(0,W().Ep)(t);let s=[];r&&b().x.isSuccess(r)&&(s=r.value.valueTypes);const l=(0,A().mc)(n),u=(0,c().TY)({automationModel:a,formulaAnalyticsModule:o,formulasModule:e,formulaTypecheckContextValues:s,getRecordModel:t.getRecordModel,featureGates:(0,j().W)(),simpleFormulasModule:i});(0,c().Rt)(l,u)}))}function J(e){const{automationStore:t,environment:n,status:o,transaction:a}=e,i=o??"disabled";w().sW({store:t,data:{status:i},transaction:a}),t.isTriggerType("recurrence")&&w().sW({store:t,data:{run_at:void 0},transaction:a});const r=t.getModel();(0,M().$K)(r)&&(0,B().GV)(((e,o,a)=>{const i=(0,W().Ep)(t);let s=[];i&&b().x.isSuccess(i)&&(s=i.value.valueTypes);const l=(0,A().mc)(n),u=(0,c().TY)({automationModel:r,formulaAnalyticsModule:o,formulasModule:e,formulaTypecheckContextValues:s,getRecordModel:t.getRecordModel,featureGates:(0,j().W)(),simpleFormulasModule:a});(0,c().ai)(l,u)}))}function Y(e){const{automationStore:t,environment:n,transaction:o}=e;w().sW({store:t,data:{alive:!1},transaction:o});const a=t.getModel();(0,M().$K)(a)&&(0,B().GV)(((e,o,i)=>{const r=(0,W().Ep)(t);let s=[];r&&b().x.isSuccess(r)&&(s=r.value.valueTypes);const l=(0,A().mc)(n),u=(0,c().TY)({automationModel:a,formulaAnalyticsModule:o,formulasModule:e,formulaTypecheckContextValues:s,getRecordModel:t.getRecordModel,featureGates:(0,j().W)(),simpleFormulasModule:i});(0,c().uO)(l,u),a.isNotificationType()&&S().xi(n,{type:"granular",source:"collection_view_settings",collection_id:a.parent_id})}))}},857205:(e,t,n)=>{n.r(t),n.d(t,{addRecurrence:()=>v,createRecurrenceInner:()=>_,deleteRecurrence:()=>h});var o=()=>n(157955),a=()=>n(956057),i=()=>n(494616),r=()=>n(922713),c=()=>n(752778),s=()=>n(696459),l=()=>n(421654),u=()=>n(636340),d=()=>n(269299),m=()=>n(594546),p=()=>n(487270),f=()=>n(876822),g=()=>n(826955),y=()=>n(49396);function v(e){let{environment:t,blockStore:n,recurrence:a}=e;const s=n.getAutomationId(),l=(0,o().convertFromUnpersistedRecurrenceConfig)(a);s?function(e,t,n,o){const a=n.getParentStore();if(!a||a.table!==c().vF)return;const s=n.getSpaceId(),l={table:i().cv,id:t,spaceId:s},m=g().Mz.createChildStore(n,l),f=m.getTrigger();if(!f)return;const y=m.getActionStores()[0];d().createAndCommit({environment:e,userAction:"recurrenceActions.updateRecurrence",canUndo:!0,perform:t=>{const i=b({automationId:m.id,spaceId:s,collectionPointer:a.getSpaceShardedPointer(),templatePageId:n.id});let c;y?(c=y.id,u().sW({store:y,data:i,transaction:t})):(c=(0,p().TS)({environment:e,table:r().Xj,spaceId:s}),u().ae({environment:e,table:r().Xj,inMemoryRecordCache:m.inMemoryRecordCache,transaction:t,value:{id:c,...i}})),u().sW({store:m,data:{alive:!0,status:"active",trigger:{id:f.id,type:"recurrence",recurrence:o},action_ids:[c]},transaction:t})}}),M(e,{type:"updated",frequency:o.frequency})}(t,s,n,l):function(e,t,n){d().createAndCommit({environment:e,userAction:"recurrenceActions.createRecurrence",canUndo:!0,perform:o=>{_(o,e,t,n)}})}(t,n,l)}function h(e){let{environment:t,blockStore:n}=e;const o=n.getAutomationStore();(0,s().$K)(o)&&(d().createAndCommit({environment:t,userAction:"recurrenceActions.deleteRecurrence",canUndo:!0,perform:e=>{y().disableAutomation({automationStore:o,environment:t,transaction:e}),y().deleteAutomation({automationStore:o,environment:t,transaction:e}),l().FH({stores:[n],update:{automation_id:void 0},transaction:e})}}),M(t,{type:"deleted"}))}function _(e,t,n,o){const{currentUserRootStore:s}=f().default.state;if(!s)return;const d=n.getParentStore();if(!d||d.table!==c().vF)return;if(!d.getParentBlockStore())return;const m=n.getSpaceId(),g=(0,p().TS)({environment:t,table:r().Xj,spaceId:m}),y=u().ae({environment:t,table:i().cv,inMemoryRecordCache:n.inMemoryRecordCache,value:{parent_id:n.id,parent_table:n.table,alive:!0,space_id:m,status:"active",trigger:{id:a().Il(),type:"recurrence",recurrence:o},action_ids:[g]},transaction:e}).pointer.id;l().FH({stores:[n],update:{automation_id:y},transaction:e}),u().ae({environment:t,table:r().Xj,inMemoryRecordCache:n.inMemoryRecordCache,transaction:e,value:{id:g,...b({automationId:y,spaceId:m,collectionPointer:d.getSpaceShardedPointer(),templatePageId:n.id})}}),M(t,{type:"created",frequency:o.frequency})}function b(e){const{automationId:t,spaceId:n,collectionPointer:o,templatePageId:a}=e;return{parent_id:t,parent_table:i().cv,type:"create_page",alive:!0,space_id:n,config:{collection:o,template_page_id:a}}}function M(e,t){m().K4(e,"recurrence_saved",t)}},5485:(e,t,n)=>{n.d(t,{k:()=>k});var o=n(667294),a=()=>n(732811),i=()=>n(142735),r=()=>n(157955),c=()=>n(529048),s=()=>n(166312),l=()=>n(158548),u=(n(241792),()=>n(788860)),d=()=>n(696459),m=()=>n(827973),p=()=>n(198829),f=()=>n(255577),g=()=>n(388284),y=()=>n(918745),v=n(785893);const h=(0,u().vU)({day:{id:"automations.RecurrencePresetMenu.day",defaultMessage:"Day"},weekday:{id:"automations.RecurrencePresetMenu.weekday",defaultMessage:"Weekday"},week:{id:"automations.RecurrencePresetMenu.week",defaultMessage:"Week"},twoWeeks:{id:"automations.RecurrencePresetMenu.twoWeeks",defaultMessage:"2 Weeks"},month:{id:"automations.RecurrencePresetMenu.month",defaultMessage:"Month"},threeMonths:{id:"automations.RecurrencePresetMenu.threeMonths",defaultMessage:"3 Months"},sixMonths:{id:"automations.RecurrencePresetMenu.sixMonths",defaultMessage:"6 Months"},year:{id:"automations.RecurrencePresetMenu.year",defaultMessage:"Year"}}),_={day:h.day,weekday:h.weekday,week:h.week,twoWeeks:h.twoWeeks,month:h.month,threeMonths:h.threeMonths,sixMonths:h.sixMonths,year:h.year};function b(e){const{onSelect:t}=e,n=(0,y().F)(),o=[{key:"default",items:(0,d().qP)(_).map((e=>{let[n]=e;return{key:n,action:()=>{t(function(e){const t=(0,s().dF)();switch(e){case"day":return{...t,frequency:"day"};case"weekday":return{...t,frequency:"week",weekdays:["MO","TU","WE","TH","FR"]};case"week":return{...t,frequency:"week",weekdays:["MO"]};case"twoWeeks":return{...t,frequency:"week",interval:2,weekdays:["MO"]};case"month":return{...t,frequency:"month"};case"threeMonths":return{...t,frequency:"month",interval:3};case"sixMonths":return{...t,frequency:"month",interval:6};case"year":return{...t,frequency:"year"};default:(0,d().t1)(e)}}(n))},render:e=>(0,v.jsx)(m().Z,{...e,title:(0,v.jsx)(u()._H,{..._[n]})})}})),render:e=>(0,v.jsx)(g().Z,{...e})}];return(0,v.jsx)(p().Z,{...n,children:(0,v.jsx)(f().ZP,{type:f().iW.Vertical,sections:o,initialFocus:0})})}var M=()=>n(25303);const S=150;function k(e){const{recurrence:t,onChange:n,disabled:u,autoFocusIfNew:d,allowDelete:m,buttonPopupStore:p}=e,f=(0,i().qz)(p,c().Z);(0,a().K)((()=>{d&&!t&&setTimeout((()=>{f.setState({open:!0})}),S)}));const[g,y]=(0,o.useState)(),h=(0,o.useMemo)((()=>g||(t?{...(0,r().convertToUnpersistedRecurrenceConfig)(t),hour:t.hour??0,minute:t.minute??0}:(0,s().dF)())),[g,t]),[_,k]=(0,o.useState)(!1);(0,o.useEffect)((()=>{k((e=>e||Boolean(t)))}),[t]);const x=(0,o.useCallback)((e=>{y(e);const t=(0,M().h)(e)&&void 0!==(0,r().getNextDateUtc)((0,r().convertFromUnpersistedRecurrenceConfig)(e));n(t?e:void 0)}),[n]),w=(0,o.useCallback)((()=>{n(void 0),k(!1),f.setState({open:!1})}),[n,f]),C=(0,o.useCallback)((e=>{y(e),n(e),f.setState({open:!1}),setTimeout((()=>{k(!0),f.setState({open:!0})}),S)}),[n,f]),R=(0,o.useCallback)((()=>{y(void 0),k(Boolean(t))}),[t]);return{render:(0,o.useCallback)((()=>_||t?(0,v.jsx)(l().w,{currentValue:h,onChange:x,onDelete:m?w:void 0,disabled:u}):(0,v.jsx)(b,{onSelect:C})),[_,t,h,x,m,w,u,C]),onClose:R,buttonPopupStore:f}}},788171:(e,t,n)=>{n.r(t),n.d(t,{RecurrenceConfigMenu:()=>O});n(241792);var o=n(667294),a=()=>n(219727),i=()=>n(846550),r=()=>n(157955),c=()=>n(788860),s=()=>n(513670),l=()=>n(696459),u=()=>n(827973),d=()=>n(448419),m=()=>n(94967),p=()=>n(255577),f=()=>n(388284),g=()=>n(352230),y=()=>n(166312),v=()=>n(730120),h=()=>n(374289),_=()=>n(265640),b=()=>n(431652),M=()=>n(291198),S=()=>n(67961),k=()=>n(312117),x=()=>n(654133),w=()=>n(998901),C=n(785893);function R(e){const t=(0,a().O7)(),{device:n}=t,r=(0,c().YB)(),[s,l]=(0,o.useState)(e.value),[u,d]=(0,o.useState)(void 0),m=t=>{const n=(0,k().TD)(t,r),o=v().ou.fromFormat(n??"","T");return o.isValid?(d(void 0),e.onUpdate({hour:o.hour,minute:o.minute})):(d("invalid"),e.onError&&e.onError()),o},p=e=>{const t=e.target.value;l(t),m(t)},f=()=>{const e=m(s);e.isValid&&l(e.toLocaleString(v().ou.TIME_SIMPLE))},g=(0,i().yK)((e=>({input:{textAlign:"right"},error:{boxShadow:e.outlineRedInputBoxShadow}})),[]);return(0,C.jsx)(x().Z,{renderTooltip:()=>function(e){if("invalid"===e)return(0,C.jsx)(c()._H,{defaultMessage:"Invalid time",id:"timeInput.invalid"})}(u),forceVisibleState:void 0!==u,placement:w().Placement.Bottom,render:()=>(0,C.jsx)(M().Z,{type:"text",onChange:p,onSubmit:f,onBlur:f,value:s,size:1,style:{...e.style,...u?g.error:{},fontSize:n.isMobile?16:14},inputStyle:g.input})})}n(267602),n(653476);var T=()=>n(567149),I=()=>n(646574),A=()=>n(154186);function j(e){const{weekdays:t,onChange:n}=e,o=e.minimumSelection??0,a=(0,c().YB)(),r=(0,i().yK)((e=>({wrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"center"},selectedDay:{...P,background:e.blueButtonBackground,color:e.regularInvertedTextColor},unselectedDay:{...P,background:e.accentColors.gray[75],color:e.mediumTextColor},selectedDayHover:{background:e.blueButtonHoveredBackground},unselectedDayHover:{background:e.accentColors.gray[100]},selectedDayPressed:{background:e.blueButtonPressedBackground},unselectedDayPressed:{background:e.accentColors.gray[200]}})),[]);return(0,C.jsx)(m().Z,{debugName:"WeekdaySelector",capture:!0,children:(0,C.jsx)("div",{style:{...r.wrapper,...e.style},children:T().Z.map(((i,c)=>(0,C.jsx)(A().Z,{...e,onClick:()=>{const e=t.includes(i)?t.length>o?t.filter((e=>e!==i)):t:[...t,i];n(e)},style:t.includes(i)?r.selectedDay:r.unselectedDay,hoveredStyle:t.includes(i)?r.selectedDayHover:r.unselectedDayHover,pressedStyle:t.includes(i)?r.selectedDayPressed:r.unselectedDayPressed,children:(0,I().er)(a,c+1)},i)))})})}const P={borderRadius:"50%",marginLeft:3,marginRight:3,height:25,width:25,fontSize:14,paddingTop:2};function F(e){const{customRecurrence:t,setCustomRecurrence:o,isValid:l,setIsValid:p,onSave:g,onDisable:k}=e,x=(0,a().O7)(),{device:w}=x,T=(0,c().YB)(),I=w.isMobile?d().Z4.SlideUp:d().Z4.Popup,A=function(){const{isMobile:e}=(0,a().Fy)();return(0,i().yK)((t=>({iconStyle:{fill:t.regularIconColor,width:e?18:16},customFrequencySelectButton:{color:t.mediumTextColor,fill:t.lightIconColor,fontWeight:500,fontSize:12},weekdayWrapper:{padding:10},inputLabel:{display:"flex",alignItems:"center",...e?{padding:"10px 14px",fontSize:16,background:t.cardBackground}:{paddingLeft:8}},intervalFrequencyLabel:{color:t.lightTextColor},intervalInputWrapper:{width:70,marginLeft:10,marginRight:10},intervalInput:{textAlign:"right"},timeInputWrapper:{width:90,marginLeft:10,marginRight:10},inputSection:{...W,alignItems:"center",justifyContent:"flex-start",padding:8},chevron:{width:e?14:10,fill:t.lightIconColor,marginLeft:4}})),[e])}(),P=w.isMobile?"number":"text",F=(0,C.jsx)(m().Z,{debugName:"RecurrenceConfigMenu",capture:!0,onLeft:s().yR,onRight:s().yR,onSelectAll:s().yR,onRedo:s().yR,onUndo:s().yR,onCut:s().yR,onCopy:s().yR,onPaste:s().yR,onKeypress:s().yR,onDelete:s().yR,onBackspace:s().yR,onTab:s().yR,children:(0,C.jsx)(M().Z,{value:t.interval.toString(),style:A.intervalInputWrapper,inputStyle:A.intervalInput,type:P,maxlength:3,onChange:e=>{const n=parseInt(e.target.value);(0,r().isValidRecurrenceInterval)(n)&&o({...t,interval:n})},onBlur:e=>{e.target.value=t.interval.toString()}})});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(f().Z,{style:W,children:[(0,C.jsx)(n(522319).Z,{innerButtonStyle:{...!w.isMobile&&A.customFrequencySelectButton},selectedTitle:(0,y().z$)(t.frequency),renderMenuSections:e=>[{key:"repeatOptionsSection",render:e=>(0,C.jsx)(f().Z,{...e}),items:s().oA([...E({parent:e,updateFrequencyFn:e=>{o((0,y().WP)(t,e))}}),k?{key:"disable",action:()=>{k(),e.close()},render:e=>(0,C.jsx)(u().Z,{...e,title:D})}:void 0])}]}),!w.isMobile&&(0,C.jsx)(_().D,{isBlue:l,isLightGray:!l,onClick:e=>{g()},disabled:!l,children:B})]}),(0,C.jsx)(f().Z,{style:A.inputSection,shouldShowBottomDivider:!0,children:(0,C.jsx)(S().Z,{style:A.inputLabel,children:K(F,t.frequency,A.intervalFrequencyLabel)})}),"week"===t.frequency&&(0,C.jsx)(f().Z,{children:(0,C.jsx)(j,{style:A.weekdayWrapper,focused:!0,weekdays:t.weekdays||[],minimumSelection:1,onChange:e=>{o({...t,weekdays:e})}})}),(0,C.jsx)(f().Z,{topBorder:!0,children:(0,C.jsx)(d().ZP,{popupType:I,renderOrigin:e=>(0,C.jsx)(b().X,{...e,title:(0,C.jsx)(c()._H,{defaultMessage:"Starts",id:"database.templatePickerItem.repeatMenu.starts"}),focused:!1,showExtensionArrow:w.isMobile,right:v().ou.fromMillis(t.start_date).setLocale((0,n(578292).E2)(T)).toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}),render:e=>(0,C.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,C.jsx)(n(296034).Z,{firstDayOfWeek:n(718959).AK.state,value:Math.max(t.start_date,Date.now()),onChange:n=>{o({...t,start_date:n}),e.close()},disabledDays:{before:new Date}})})})}),(0,C.jsx)(f().Z,{style:A.inputSection,shouldShowBottomDivider:!0,children:(0,C.jsxs)(S().Z,{style:A.inputLabel,children:[(0,C.jsx)(c()._H,{defaultMessage:"Create at",id:"database.templatePickerItem.repeatMenu.createAt"}),(0,C.jsx)(m().Z,{debugName:"RecurrenceConfigMenu",capture:!0,onLeft:s().yR,onRight:s().yR,onSelectAll:s().yR,onRedo:s().yR,onUndo:s().yR,onCut:s().yR,onCopy:s().yR,onPaste:s().yR,onKeypress:s().yR,onDelete:s().yR,onBackspace:s().yR,onTab:s().yR,children:(0,C.jsx)(R,{value:v().ou.local().set({hour:t.hour,minute:t.minute}).toLocaleString(v().ou.TIME_SIMPLE),style:A.timeInputWrapper,onUpdate:e=>{o({...t,...e}),p(!0)},onError:()=>{p(!1)}})}),(0,C.jsx)(n(91253).X,{enableRecents:!0,currentValue:t.timezone,renderOrigin:e=>(0,C.jsxs)(_().D,{...e,children:[(0,n(874459).er)(t.timezone),(0,h().i)(A.chevron)]}),onSelect:e=>{o({...t,timezone:e})}})]})})]})}const W={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px",flexDirection:"row"};const B=(0,C.jsx)(c()._H,{defaultMessage:"Save",id:"database.templatePickerItem.customRecurrence.save"}),D=(0,C.jsx)(c()._H,{defaultMessage:"Off",id:"database.templatePickerItem.quickOptionMenuItem.off"});function K(e,t,n){switch(t){case"day":return(0,C.jsx)(c()._H,{defaultMessage:"Every {interval} <label>days</label>",id:"database.templatePickerItem.recurrenceInterval.everyXdays",values:{label:e=>(0,C.jsx)("label",{style:n,children:e}),interval:e}});case"week":return(0,C.jsx)(c()._H,{defaultMessage:"Every {interval} <label>weeks</label>",id:"database.templatePickerItem.recurrenceInterval.everyXweeks",values:{label:e=>(0,C.jsx)("label",{style:n,children:e}),interval:e}});case"month":return(0,C.jsx)(c()._H,{defaultMessage:"Every {interval} <label>months</label>",id:"database.templatePickerItem.recurrenceInterval.everyXmonths",values:{label:e=>(0,C.jsx)("label",{style:n,children:e}),interval:e}});case"year":return(0,C.jsx)(c()._H,{defaultMessage:"Every {interval} <label>years</label>",id:"database.templatePickerItem.recurrenceInterval.everyXyears",values:{label:e=>(0,C.jsx)("label",{style:n,children:e}),interval:e}});default:(0,l().t1)(t)}}function E(e){let{parent:t,updateFrequencyFn:n}=e;return y().mq.map((e=>({key:e.frequency,action:()=>{n(e.frequency),t.close()},render:t=>(0,C.jsx)(u().Z,{...t,title:(0,y().z$)(e.frequency)})})))}var Z=()=>n(229010),q=()=>n(164079);function V(e){const{buttonPopupEvents:t,focused:o,tooltipLabel:r,recurrence:l,showTooltip:u,variant:d="dropdown"}=e,m=(0,a().O7)(),{device:p}=m,f=(0,i().Fg)(),g=(0,c().YB)(),y=function(){const{isMobile:e}=(0,a().Fy)();return(0,i().yK)((t=>({iconStyle:{fill:t.regularIconColor,width:e?18:16}})),[e])}(),v=Boolean(l);return(0,C.jsx)(x().Z,{disableTooltip:!u,delayThreshold:300,renderTooltip:()=>r,render:e=>{switch(d){case"dropdown":return(0,C.jsx)(b().X,{...(0,q().Z)(e,t),focused:o,icon:(0,Z().N)(y.iconStyle),title:(0,C.jsx)(c()._H,{defaultMessage:"Repeat",id:"database.templatePickerItem.actionMenu.repeat"}),showExtensionArrow:p.isMobile,right:H({isActive:v,recurrence:l,intl:g})});case"icon":return(0,C.jsx)(_().D,{...s().CE((0,q().Z)(e,t),["focused","ignoreLocalHoverState"]),disallowTabbing:!1,size:"sm",role:"button",children:(0,Z().N)({color:n(568017).ZP.blue,width:14})});case"label":return(0,C.jsxs)(_().D,{...(0,q().Z)(e,t),children:[H({isActive:v,recurrence:l,intl:g}),(0,h().i)({fill:f.lightIconColor,marginLeft:4,width:10})]})}}})}function H(e){let{isActive:t,recurrence:n,intl:o}=e;return t?n?(0,C.jsx)(C.Fragment,{children:(0,s().kC)((0,y().De)({recurrence:n,intl:o}))}):void 0:(0,C.jsx)(c()._H,{defaultMessage:"Off",id:"database.templatePickerItem.recurrenceConfigMenuLabel.off"})}const O=(0,o.forwardRef)((function(e,t){const{recurrence:l,onChange:g,disabled:v,buttonPopupStore:h}=e,_=(0,a().O7)(),{device:b}=_,M=(0,i().Fg)(),S=(0,c().YB)(),[k,x]=(0,o.useState)(void 0),[w,R]=(0,o.useState)((0,y().dF)()),[T,I]=(0,o.useState)(!0),A=(0,n(466970).E)("automation_generalized_recurrence");(0,o.useEffect)((()=>{A&&R(l?(0,r().convertToUnpersistedRecurrenceConfig)(l):(0,y().dF)())}),[A,l]),void 0===k&&(void 0!==l?(R({...(0,r().convertToUnpersistedRecurrenceConfig)(l),hour:l.hour??0,minute:l.minute??0}),x(!0)):x(!1));const j=(0,o.useCallback)((()=>{g(w)}),[g,w]),P=b.isMobile?d().Z4.SlideUp:d().Z4.Popup,W=y().mq.map((e=>{const t={key:e.frequency,action:()=>{var t;t=e.frequency,R((0,y().WP)(w,t)),x(!0)},render:t=>(0,C.jsx)(u().Z,{...t,title:U(e.frequency)})};return t})),B=(0,o.useCallback)((e=>(0,C.jsx)(m().Z,{debugName:"RecurrenceConfigMenu",capture:!0,onEnter:s().yR,children:(0,C.jsxs)(n(198829).Z,{...$(e,b.isMobile,T,j),children:[k?(0,C.jsx)(F,{customRecurrence:w,setCustomRecurrence:R,isValid:T,setIsValid:I,onSave:()=>{j(),e.close()},onDisable:()=>{g(void 0),x(!1),e.close()}}):(0,C.jsx)(p().ZP,{type:p().iW.Vertical,sections:[{key:"repeatOptionsSection",render:e=>(0,C.jsx)(f().Z,{...e}),items:[...W,z({parent:e,onChange:g})]}],initialFocus:void 0}),k&&L(S,w,M)]})})),[b.isMobile,T,j,k,w,W,g,S,M]),D=(0,n(5485).k)({recurrence:e.recurrence,onChange:g,disabled:v,allowDelete:!0,buttonPopupStore:h});return(0,C.jsx)(n(838003).Z,{...e,popupType:P,ref:t,stopClickPropagation:!0,buttonPopupStore:D.buttonPopupStore,disabled:!A&&v,onClose:D.onClose,renderOrigin:t=>(0,C.jsx)(V,{buttonPopupEvents:t,focused:e.focused,tooltipLabel:l&&(0,y().z$)(l.frequency),recurrence:e.recurrence,showTooltip:e.showTooltip,variant:e.variant}),render:A?D.render:B})}));function U(e){switch(e){case"day":return(0,C.jsx)(c()._H,{defaultMessage:"Daily",id:"database.templatePickerItem.quickOptionMenuItem.day"});case"week":return(0,C.jsx)(c()._H,{defaultMessage:"Weekly",id:"database.templatePickerItem.quickOptionMenuItem.week"});case"month":return(0,C.jsx)(c()._H,{defaultMessage:"Monthly",id:"database.templatePickerItem.quickOptionMenuItem.month"});case"year":return(0,C.jsx)(c()._H,{defaultMessage:"Yearly",id:"database.templatePickerItem.quickOptionMenuItem.year"});default:(0,l().t1)(e)}}function $(e,t,n,o){return t?{menuType:g().o.Modal,title:(0,C.jsx)(c()._H,{defaultMessage:"Repeat",id:"database.templatePickerItem.mobileRepeatModal.title"}),left:(0,C.jsx)(c()._H,{defaultMessage:"Cancel",id:"database.templatePickerItem.customRecurrence.cancel"}),right:B,rightDisabled:!n,onClickRight:()=>{n&&(o(),e.close())},onClickLeft:()=>{e.close()}}:{menuType:g().o.Popup}}function L(e,t,o){const a=(0,r().getFormattedNextRecurrenceTime)({recurrence:t,intl:e});return a?(0,C.jsx)(f().Z,{topBorder:!0,children:(0,C.jsx)(n(18748).ZP,{caption:(0,C.jsx)("span",{style:{color:o.lightTextColor},children:(0,C.jsx)(c()._H,{defaultMessage:"Next: {time}",id:"database.templatePickerItem.recurrenceConfigMenuLabel.nextAtMidnightMessage",values:{time:a}})})})}):null}function z(e){const{parent:t,onChange:n,onClose:o}=e;return{key:"disable",action:()=>{n(void 0),t.close(),o&&o()},render:e=>(0,C.jsx)(u().Z,{...e,title:D})}}},309841:(e,t,n)=>{n.d(t,{GV:()=>m,TI:()=>u,yE:()=>d});n(267602),n(653476),n(241792);var o=()=>n(271896),a=()=>n(855741),i=()=>n(696459),r=()=>n(141735),c=()=>n(594546),s=()=>n(615676),l=()=>n(637118);function u(e){const{automationActionStore:t,automationStore:n,formulaAnalyticsModule:r,formulasModule:c,simpleFormulasModule:u}=e,d=t.getModel(),m=n??t.getParentStore();if(!d||!m)return;const p=m.getActionStores().map((e=>e.getModel())).filter(i().$K),f=(0,l().Ep)(m);let g=[];return f&&a().x.isSuccess(f)&&(g=f.value.valueTypes),(0,o().Bj)({automationActionModel:d,automationActionModels:p,formulaAnalyticsModule:r,formulasModule:c,simpleFormulasModule:u,formulaTypecheckContextValues:g,getRecordModel:t.getRecordModel,featureGates:(0,s().W)()})}function d(e,t){const{automationStore:n,automationActionStore:o}=t;n.isTriggerType("event")||n.isTriggerType("notification_event")||m(((t,a,i)=>{const r=u({automationActionStore:o,automationStore:n,formulaAnalyticsModule:a,formulasModule:t,simpleFormulasModule:i});r&&(0,c().A3)(e,"automation_action_update",o.id,1,{automation_action:r,automation_action_id:o.id,automation_id:n.id})}))}function m(e){return Promise.all([r().F.formulas.load(),r().F.formulaAnalytics.load(),r().F.simpleFormulas.load()]).then((t=>{let[n,o,a]=t;e(n,o,a)})).catch((e=>{console.error("Error sending analytics for automations",e)}))}},658517:(e,t,n)=>{n.d(t,{h:()=>o});n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(731107);function o(e,t){const n=e.reduce(((e,t)=>{if(t.isType("define_variables")){var n;const o=null===(n=t.getModel())||void 0===n?void 0:n.getVariables();if(o)for(const t of Object.values(o))e.add(t.name)}return e}),new Set),o=t.replace(/\s*\d+$/,"");let a=1,i=`${o} ${a}`;for(;n.has(i);)i=`${o} ${a}`,a++;return i}},918745:(e,t,n)=>{n.d(t,{F:()=>c,U:()=>r});var o=()=>n(219727),a=()=>n(142735),i=()=>n(352230);function r(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:i().o.ActionSheet}:{menuType:i().o.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function c(e){const t=(0,o().Fy)();return(0,a().VK)((()=>r({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},296034:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(667294),a=n(785893);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:r=!0,onChange:c,onFocus:s,onBlur:l,disabledDays:u}=e;const d=(0,o.useMemo)((()=>new Date(i)),[i]),[m,p]=(0,o.useState)(d),f=(0,o.useRef)(i);(0,o.useLayoutEffect)((()=>{f.current!==i&&(p(new Date(i)),f.current=i)}),[i]);const g=(0,o.useCallback)(((e,t,n)=>{c(e.getTime())}),[c]);return(0,a.jsx)(n(933696).y,{locale:n(146947).locale,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:r?{value:d}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:g,onMonthSelected:p,disabled:u,month:m,onDayBlur:l,onDayFocus:s})}},933696:(e,t,n)=>{n.d(t,{y:()=>i});var o=()=>n(677559);const a=new(o().Ss)("react-day-picker",(async()=>await Promise.all([n.e(59897),n.e(81369)]).then(n.bind(n,712627)))),i=(0,o().kF)(a,(e=>e.default))},863606:(e,t,n)=>{n.d(t,{W:()=>a});var o=n(667294);function a(e,t,n){const a=(0,o.useRef)(e),i=(0,o.useRef)(null);(0,o.useEffect)((()=>{a.current=e}),[e]),(0,o.useEffect)((()=>{const e=async()=>{i.current&&(clearTimeout(i.current),i.current=null),n&&(await a.current(),i.current=setTimeout(e,t))};return n&&e(),()=>{i.current&&(clearTimeout(i.current),i.current=null)}}),[n,t])}},179378:(e,t,n)=>{n.d(t,{Z:()=>a});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const a=o},229010:(e,t,n)=>{n.d(t,{N:()=>a});n(667294);var o=n(785893);const a=(0,n(827282).IU)("repeat",{viewBox:"0 0 16 14",svg:(0,o.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})}}]);