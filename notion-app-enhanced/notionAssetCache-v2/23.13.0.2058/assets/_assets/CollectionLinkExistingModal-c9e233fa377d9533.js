"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9587,95986],{158792:(e,t,n)=>{n.d(t,{Dw:()=>R,P0:()=>T,RN:()=>A,VG:()=>B,Yw:()=>M,jX:()=>L,k2:()=>P,lz:()=>I,v2:()=>j});n(267602),n(653476),n(30005);var o=()=>n(741633),i=()=>n(528514),r=()=>n(933868),a=()=>n(217465),s=()=>n(396136),d=()=>n(696056),c=()=>n(255933),l=()=>n(989478),u=()=>n(696459),p=()=>n(308186),m=()=>n(577041),g=()=>n(527278),h=()=>n(122479),f=()=>n(826955),S=()=>n(824462),v=()=>n(528918),y=()=>n(784234),b=()=>n(636340),C=()=>n(102182),x=()=>n(269299),k=()=>n(423402);const _=(0,n(788860).vU)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function w(e,t){const{environment:n,spaceStore:o,spaceRole:i}=t,r=function(e){const{name:t,spaceStore:n,userId:o,icon:i,type:r}=e,a=Date.now(),s={name:t,created_at:a,created_by_table:l().KJ,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:l().KJ};switch(r){case"guest":return{...s,type:"guest",capabilities:e.capabilities,parent_table:c().bx,parent_id:n.id,integration_id:void 0};case"scim":return{...s,type:"scim",parent_table:l().KJ,parent_id:o};default:(0,u().t1)(r)}}(t),a=b().ae({environment:n,table:d().cZ,value:r,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return y().tQ({environment:n,spaceStore:o,permissionItems:[{type:"bot_permission",role:i,bot_id:a.id}],transaction:e}),{botStore:a}}function I(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=x().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>w(t,e)});return{botStore:o,transactionPromise:n}}async function T(e){const{environment:t,botId:n,onSuccess:o}=e,i=await S().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===i.type?p().x2(i):"success"===i.type&&o&&(await k().pJ({environment:t}),o())}async function M(e){const{environment:t,table:n,id:i,type:r}=e,a=await S().callApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:r},headers:(0,o().Bb)({spaceId:n===c().bx?i:void 0})});if("failed"===a.type)throw p().x2(a),a;return{botIds:a.data.botIds,recordMap:a.data.recordMap}}async function R(e){const{environment:t,currentSpaceStore:n,botIds:o}=e;if(!n)return;const i=await S().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==i.type)return i.data;p().x2(i)}async function B(e){const{environment:t,botId:n}=e,o=await S().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;p().x2(o)}function j(e){const{botValue:t,store:n,environment:o}=e,{id:r,parent_id:a,parent_table:s,capabilities:d}=t,c={type:"bot_permission",bot_id:r,parent_id:a,parent_table:s,role:(0,i().uH)(d)};x().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{y().l3({environment:o,store:n,permissionItems:[c],transaction:e})}})}function A(e){const{botId:t,store:n,environment:o}=e,i=n.getPermissionItems().filter((0,u().AO)((e=>(0,r().FB)(e)?{true:e}:{false:e})));for(const r of i)if(r.bot_id===t){const e={...r,role:"none"};x().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{y().l3({environment:o,store:n,permissionItems:[e],transaction:t})}})}}function L(e){const{currentSpaceStore:t,environment:n,pages:o,botStore:i,addPermission:r}=e;if(!t)return;const a=(0,h().zT)({botStore:i,addPermission:r});o.forEach((e=>{const o=f().t1.createChildStore(t,{table:s().iU,id:e});x().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{y().l3({environment:n,store:o,permissionItems:[a],transaction:e})}})}))}async function P(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:i,botValue:r,pages:s}=e;if(!n)return;const c=f().t1.createChildStore(n,{table:d().cZ,id:r.id});if(i)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:i,botStore:r}=e;if(!n||!o)return;try{v().j({message:_.duplicatingTemplate});const e=await S().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:i,spaceId:n.id},shallow:!1}});if("failed"===e.type)return;const s=a().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,m().uP)(),{performResult:c}=x().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const a=d({environment:t,recordMap:s,copyPageId:i,isPrivate:!0,spaceStore:n,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),c=o.getPrivatePageIds();c.length>0&&b().sW({store:o,data:{private_pages:[a.id,...c]},transaction:e});const l=(0,h().zT)({botStore:r,addPermission:!0});return y().l3({environment:t,store:a,permissionItems:[l],transaction:e}),a}});return c}catch(s){C().oV({label:g().Z.formatMessage(_.duplicatingTemplateError)})}finally{v().x()}}({environment:t,templatePageId:i,botStore:c,spaceStore:n,spaceViewStore:o});L({environment:t,currentSpaceStore:n,botStore:c,pages:s,addPermission:!0})}},86609:(e,t,n)=>{n.d(t,{KV:()=>K,Rh:()=>X,U6:()=>Y,Wu:()=>te,Xx:()=>F,YD:()=>ee,g9:()=>z,jc:()=>$,m8:()=>G,ys:()=>J,zX:()=>Q});n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(30005),n(241792),n(228244);var o=()=>n(730120),i=()=>n(506347),r=()=>n(926724),a=()=>n(271896),s=()=>n(226413),d=()=>n(803021),c=()=>n(874459),l=()=>n(956057),u=()=>n(528514),p=()=>n(494616),m=()=>n(922713),g=()=>n(396136),h=()=>n(752778),f=()=>n(255933),S=()=>n(306164),v=()=>n(856466),y=()=>n(126301),b=()=>n(955620),C=()=>n(253335),x=()=>n(110232),k=()=>n(285755),_=()=>n(23151),w=()=>n(757216),I=()=>n(544903),T=()=>n(594546),M=()=>n(487270),R=()=>n(527278),B=()=>n(876822),j=()=>n(826955),A=()=>n(250303),L=()=>n(824462),P=()=>n(984871),E=()=>n(139224),D=()=>n(421654),W=()=>n(636340),Z=()=>n(511614),U=()=>n(269299),V=()=>n(663366),O=()=>n(348141);const N="week";function F(e){var t;const{environment:n,transaction:o,tasksBlockStore:i,sprintsBlockStore:r}=e,a=null===(t=r.getFormat())||void 0===t?void 0:t.collection_pointer,s=i.getFormat().collection_pointer;if(!a||!s)return;const d=j().NW.createChildStore(r,a),c=d.getRole()??"none";if(!(0,u().yY)(c,"editor"))return;d.getAutomationStores().some((e=>e.isCompleteSprintAutomation()))||H({environment:n,transaction:o,sprintCollectionStore:d,taskCollectionStore:j().NW.createChildStore(i,s),sprintSettingsConfig:v().iZ})}function H(e){const{environment:t,sprintSettingsConfig:n,transaction:o,sprintCollectionStore:i,taskCollectionStore:r}=e,a=i.getSpaceId(),s=(0,M().TS)({environment:t,table:p().cv,spaceId:a}),d=(0,M().TS)({environment:t,table:m().Xj,spaceId:a});W().ae({environment:t,table:p().cv,inMemoryRecordCache:i.inMemoryRecordCache,value:{id:s,parent_id:i.id,parent_table:i.table,alive:!0,space_id:a,status:n.autoCompleteSprints?"active":"disabled",trigger:{id:l().Il(),type:"recurrence",recurrence:oe(n)},action_ids:[d]},transaction:o}),D().FH({stores:[i],update:{automation_ids:[...i.getFormat().automation_ids??[],s]},transaction:o}),W().ae({environment:t,table:m().Xj,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,value:{id:d,parent_id:s,parent_table:p().cv,type:"complete_sprint",alive:!0,space_id:a,config:{sprint_collection:i.getSpaceShardedPointer(),task_collection:r.getSpaceShardedPointer(),complete_sprint_action:n.actionConfig.complete_sprint_action}}})}function K(e){const{environment:t,automationStore:n,transaction:o,newDuration:i,currentSprintBlockStore:r}=e;W().sW({store:n.getTriggerStore().getKeyStore("recurrence"),data:{interval:i},transaction:o}),q({environment:t,transaction:o,automationStore:n,currentSprintBlockStore:r})}function z(e){const{environment:t,automationStore:n,transaction:o,newWeekday:i,currentSprintBlockStore:r}=e;W().sW({store:n.getTriggerStore().getKeyStore("recurrence"),data:{weekdays:[i]},transaction:o}),q({environment:t,transaction:o,automationStore:n,currentSprintBlockStore:r})}function $(e){const{environment:t,actionStore:n,automationStore:o,transaction:i,newAutocompleteStatus:r,currentSprintBlockStore:s}=e;W().sW({store:o,data:{status:r?"active":"disabled"},transaction:i}),q({environment:t,transaction:i,automationStore:o,currentSprintBlockStore:s});const d=o.getParentPointer();if(!d||d.table!==h().vF)return;const c=(0,T().mc)(t),l={automation_id:o.id,automation_actions:[{automation_action_id:n.id,type:"complete_sprint"}],automation_triggers:[{type:"recurrence"}],collection_id:d.id};r?(0,a().Rt)(c,l):(0,a().ai)(c,l)}function q(e){const{automationStore:t,currentSprintBlockStore:n,transaction:i,environment:a}=e;if(!t.isActive())return;const s=t.getRecurrence();if(!s)return;const c=(0,y().Su)(s);if(!c)return;const l=n.getPropertyValue(r().b0.Dates);if(!l)return;const u=(0,b().nai)(l)[0];if(!u||"daterange"!==u.type)return;const p=u.start_date,{start_date:m,end_date:g}=(0,y().DW)({currentSprintStartDate:p,sprintSchedule:c});W().sW({store:t.getTriggerStore().getKeyStore("recurrence"),data:{start_date:(0,d().Jh)(o().ou.fromISO(m).plus({minutes:1}).toJSDate())},transaction:i}),_().xD({store:n,propertyId:r().b0.Dates,transaction:i,environment:a,type:"dateValue",dateValue:{type:"daterange",start_date:p,end_date:g}})}function Y(e){const{transaction:t,newRemainingTasksBehavior:n,actionStore:o}=e;W().sW({store:o.getConfigStore(),data:{complete_sprint_action:n},transaction:t})}async function J(e){var t;const{appTemplatesSetupActions:n,appTemplatesSprintBoardActions:o,appConfigs:a}=await I().vF.load(),{environment:s,collectionContextStore:d,from:c}=e,{currentSpaceViewStore:l}=B().default.state,u=d.collectionStore(),p=null==u?void 0:u.getParentBlockStore(),m=null==p?void 0:p.getParentStore(),h=null==u||null===(t=u.getFormat())||void 0===t?void 0:t.app_config_uri,v=h&&(0,x().YB)(a(),h);if(!u||!p||!m||!l||m.table!==f().bx&&m.table!==g().iU&&m.table!==S().e0||!v)return;const y=p.getFormat().app_id,b=y?await L().callApi({eventName:"getCollectionViewBlocksByAppId",environment:s,data:{spaceId:p.getSpaceId(),appId:y}}):void 0,k="success"===(null==b?void 0:b.type)&&b.data.result.length?b.data.result.map((e=>j().G.createChildStore(m,{table:g().iU,id:e.blockId,spaceId:p.getSpaceId()}))):[p];await ne({environment:s,taskCollectionStore:u,executeFn:()=>{const e=U().createAndCommit({userAction:"sprintSettingsActions.handleTurnOnSprints",environment:s,canUndo:!0,perform:e=>{const t=(0,C().eu)(),i=n.applyTypedFeatures({environment:s,spaceViewStore:l,appParentStore:m,appUri:v.uri,features:[{type:"simple",featureUri:t.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:k}),a=o.createSprintPage({environment:s,spaceViewStore:l,appParentStore:m,transaction:e,blockStores:i,creationEntryPoint:{type:"sprint_settings"}});if(E().E3({collectionSettingsStore:d.settingsStore}),!a)return;const u=c?{feature:{id:r().Es.TaskToSprintRelation,from:c,type:"notion://projects/tasks_with_sprints_feature"}}:{};return A()._H({environment:s,collectionContextStore:d,from:"view_settings",property:r().Es.TaskToSprintRelation,property_type:"relation",is_suggested_property:!0,...u}),a}});e.serverCommitResult.then((()=>{const t=e.performResult;t&&Z().r({environment:s,store:t,pageVisitSource:i().tY.Create})}))}})}async function G(e){const{environment:t,collectionContextStore:n,sprintSettingsContext:o,sprintBoardViewBlockIds:a}=e,{sprintCollectionStore:s,automationContext:d,currentCollectionViewBlockStore:c,sprintCollectionViewBlockStore:l,taskCollectionStore:u,taskCollectionViewBlockStore:p}=o;if(!s||!l||!d)return;const m=p.getSpaceId(),h=[l,...a.map((e=>new(j().G)(t,{id:e,table:g().iU,spaceId:m})))];c.id===p.id?E().E3({collectionSettingsStore:n.settingsStore}):Z().r({environment:t,store:p,pageVisitSource:i().tY.LeaveOrRemove});const{automationActions:f}=await k().Sm.automations.load(),{automationStore:S}=d;await ne({environment:t,taskCollectionStore:u,executeFn:()=>{U().createAndCommit({userAction:"sprintSettingsActions.handleTurnOffSprints",environment:t,canUndo:!0,perform:e=>{!function(e){const{transaction:t,blocksToDelete:n,environment:o,taskCollectionStore:i,sprintCollectionStore:a}=e;W().sW({store:a,transaction:t,data:{alive:!1}}),P().E2({environment:o,collectionStore:i,schema:i.getSchema(),property:r().Es.TaskToSprintRelation,transaction:t,permanentlyDelete:!0}),V().y8({environment:o,blocks:n,transaction:t,permanentlyDelete:!0})}({environment:t,transaction:e,blocksToDelete:h,sprintCollectionStore:s,taskCollectionStore:u}),f.disableAutomation({automationStore:S,environment:t,transaction:e}),f.deleteAutomation({automationStore:S,environment:t,transaction:e})}}),A().y9({environment:t,collectionContextStore:n,property_type:"relation",from:"view_settings",property:r().Es.TaskToSprintRelation})}})}function Q(e){const{environment:t,userSettingsStore:n}=e;U().createAndCommit({userAction:"sprintSettingsActions.handleSeenSprintsEngagementBanner",environment:t,canUndo:!0,perform:e=>{O().d2({userSettingsStore:n,data:{seen_sprint_settings_engagement_banner:!0},transaction:e})}})}function X(e){e.settingsStore.setState({open:!0,stack:[{type:"main"},{type:"sprintSettings"}]})}function ee(e){const{environment:t,collectionContextStore:n,currentViewBlockStore:o,taskCollectionViewBlockStore:i}=e,a=n.collectionViewStore();if(!a)return;const s=a.getFormat(),d=a.getRawQuery();U().createAndCommit({userAction:"sprintSettingsActions.handleManageSprintFromThisView",environment:t,canUndo:!0,perform:e=>{if((0,w().i)({collectionViewStore:a,transaction:e,update:{name:R().Z.formatMessage(C().sY.tasksCurrentSprintV2ViewName),query2:{...d,filter:void 0},format:{...s,collection_view_icon:"/icons/playback-play-button_gray.svg",property_filters:C().Jt,app_config_uri:r().g3,hide_linked_collection_name:!0}}}),o.id===i.id){var t;const n=(null===(t=o.getFormat())||void 0===t?void 0:t.app_uri_map)??{},d=s.app_config_uri;d&&delete n[d],D().FH({stores:[i],update:{app_uri_map:{...n,[r().g3]:a.id}},transaction:e})}}})}function te(e){const{environment:t,sprintSettingsContext:n}=e;if(!n)return;const o=n.sprintCollectionStore,i=(null==o?void 0:o.getRole())??"none";o&&(0,u().yY)(i,"editor")&&n.automationContextLoaded&&!n.automationContext&&U().createAndCommit({userAction:"sprintSettingsActions.ensureCompleteSprintAutomation",environment:t,canUndo:!0,perform:e=>{H({environment:t,transaction:e,sprintCollectionStore:o,taskCollectionStore:n.taskCollectionStore,sprintSettingsConfig:v().iZ})}})}async function ne(e){const{executeFn:t,environment:n,taskCollectionStore:o}=e;await async function(e){var t;const{environment:n,taskCollectionStore:o}=e,i=o.getFormat().app_uri_map,a=r().Es.TaskToSprintRelation,d=o.getSchema(),c=(null==i?void 0:i[a])??a,l=d[c];if(!l||!(0,s().p_)(l))return;const u=null===(t=(0,s().j0)(l))||void 0===t?void 0:t.id;if(!u)return;const p=new Set([c]);Object.entries(d).forEach((e=>{var t;let[n,o]=e;o&&(0,s().p_)(o)&&(null===(t=(0,s().j0)(o))||void 0===t?void 0:t.id)===u&&p.add(n)}));const{serverCommitResult:m}=U().createAndCommit({userAction:"sprintSettingsActions.clearSprintRelationDataFromTaskCollection",environment:n,canUndo:!0,perform:e=>{for(const t of p)P().E2({environment:n,transaction:e,permanentlyDelete:!0,collectionStore:o,schema:d,property:t});null==i||delete i[a],i&&D().FH({stores:[o],transaction:e,update:{app_uri_map:i}})}});await m}({environment:n,taskCollectionStore:o}),t()}function oe(e){return{frequency:N,interval:e.recurrenceConfig.interval,weekdays:e.recurrenceConfig.weekdays,start_date:(0,d().Jh)(o().ou.local().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate()),timezone:(0,c().Sv)(),hour:0,minute:0}}},10053:(e,t,n)=>{n.r(t),n.d(t,{CollectionLinkExistingModal:()=>U});n(267602),n(653476),n(241792);var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(855855),d=()=>n(577223),c=()=>n(455947),l=()=>n(998411),u=()=>n(159732),p=()=>n(989478),m=()=>n(899133),g=()=>n(788860),h=()=>n(707513),f=()=>n(384667),S=()=>n(269299),v=()=>n(154186),y=()=>n(827973),b=()=>n(78078),C=()=>n(1910),x=()=>n(573357),k=()=>n(291198),_=()=>n(668001),w=()=>n(198829),I=()=>n(255577),T=()=>n(943620),M=()=>n(384241),R=()=>n(388284),B=()=>n(576808),j=()=>n(141735),A=()=>n(718959),L=()=>n(576868),P=()=>n(352230),E=()=>n(766463),D=()=>n(677559),W=()=>n(749826),Z=n(785893);function U(e){let{collectionContextStore:t,groupFormat:n,onClose:d,onAddOrLink:u}=e;const h=(0,g().YB)(),f=(0,i().O7)(),S=(0,r().VK)((()=>t.collectionStore()),[t]),[v,y]=o.useState(""),b=(0,o.useMemo)((()=>n?[n]:[]),[n]),C=(0,r().VK)((()=>{var e;const n=(0,L().ze)(t,!1);if(!n)return;const o=t.collectionStore();if(!o)return;const i=f.currentUser.id;return(0,c().q)({context:{schema:o.getSchema(),userId:i,userTimeZone:(0,l().r)(),userStartOfWeek:A().AK.state,relativeVariableResult:t.relativeVariableStore.state,currentPageInRelatedCollection:null===(e=t.viewsModuleContextStore.currentPageStore())||void 0===e?void 0:e.id,intl:h,collectionFeatureGates:(0,s().Q)({experimentService:W().default,actor:i?{table:p().KJ,id:i}:void 0,spaceId:o.getSpaceId()})},propertyMapping:o.getPropertyMapping(),filter:n})}),[t,f.currentUser.id,h]),{results:k,isResultsLoading:_}=(0,E().s)({searchQuery:v,limit:50,disable:!1,source:"link_existing_menu",type:m().n8.BlocksInCollection,filters:{requireEditPermissions:!0,excludeTemplates:!0,navigableBlockContentOnly:!0,parentId:null==S?void 0:S.id}}),{value:I}=(0,D().XJ)(j().F.formulas),T=(0,r().VK)((()=>{const e=new Map,t=new Map;return k.filter((n=>{let{store:o}=n;const i=o.getModel();return!C||!i||!C({block:i,getRecordModel:o.getRecordModel,propertyMapping:null==S?void 0:S.getPropertyMapping(),resultCache:e,regExpCache:t,experimentService:W().default,formulasModule:I})})).slice(0,10)}),[S,C,k,I]),M=(0,a().yK)((()=>({menuContent:{maxHeight:180,width:400}})),[]);return(0,Z.jsx)(x().Z,{capture:!0,allowMenuList:!0,allowEsc:!0,allowUndo:!0,allowTabUntab:!0,render:()=>(0,Z.jsx)(w().Z,{menuType:P().o.Popup,header:(0,Z.jsx)(N,{searchQuery:v,onSearchQueryChange:y}),footer:v&&(0,Z.jsx)(F,{searchQuery:v,collectionContextStore:t,groupsPointer:b,onClose:d,onAddOrLink:u}),children:(0,Z.jsx)("div",{style:M.menuContent,children:_?(0,Z.jsx)(H,{}):(0,Z.jsx)(V,{searchResults:T,collectionContextStore:t,groupsPointer:b,onClose:d,onAddOrLink:u})})})})}function V(e){let{searchResults:t,collectionContextStore:n,groupsPointer:o,onClose:s,onAddOrLink:c}=e;const u=(0,i().O7)(),p=(0,g().YB)(),{collectionStore:m,icon:h}=(0,r().VK)((()=>{const e=n.collectionStore();return{collectionStore:e,icon:null==e?void 0:e.getIcon()}}),[n]),f=(0,a().yK)((e=>({sectionTitleWrapper:{display:"flex",alignItems:"center",gap:4},collectionTitleWrapper:{display:"flex",alignItems:"center",color:e.text.primary,gap:2}})),[]),v=(0,Z.jsx)("div",{style:f.sectionTitleWrapper,children:(0,Z.jsx)(g()._H,{id:"CollectionLinkExistingModal.resultsSection",defaultMessage:"Link a page from {relationName}",values:{relationName:(0,Z.jsxs)("div",{style:f.collectionTitleWrapper,children:[(0,Z.jsx)(T().Z,{icon:h,disabled:!0,isEmptyPage:!0,size:12}),m&&(0,Z.jsx)(M().Z,{store:m})]})}})});return(0,Z.jsx)(I().ZP,{type:I().iW.Vertical,initialFocus:0,sections:[{key:"results",showNoResultMessage:!0,items:t.map((e=>{let{store:t}=e;return function(e){let{blockStore:t,collectionContextStore:n,groupsPointer:o,onClose:i,onAddOrLink:r,environment:a,intl:s}=e;return{key:t.id,action:()=>{const e=n.collectionStore();if(!e)return;const i=t.getModel();i&&S().createAndCommit({userAction:"CollectionLinkExistingModal.onLinkExisting",environment:a,canUndo:!0,perform:c=>{var u;const{update:p}=d().RA({block:i,schema:e.getSchema(),propertyMapping:e.getPropertyMapping(),userFilterContext:{userId:a.currentUser.id,userTimeZone:(0,l().r)(),userStartOfWeek:A().AK.state},filter:(0,L().ze)(n,!1),groupBy:n.getGroupByAndGroupFormats().groupBy,groupsPointer:o,relativeVariableResult:n.relativeVariableStore.state,currentPageInRelatedCollection:null===(u=n.viewsModuleContextStore.currentPageStore())||void 0===u?void 0:u.id,getRecordModel:e.getRecordModel,intl:s,resultCache:new Map,regExpCache:new Map,experimentService:W().default});B().b({environment:a,store:t,properties:p,transaction:c}),r&&r(c,t,p)}}).performResult},render:e=>{let{ref:n,...o}=e;return(0,Z.jsx)(O,{blockStore:t,...o})}}}({blockStore:t,collectionContextStore:n,groupsPointer:o,onClose:s,onAddOrLink:c,environment:u,intl:p})})),render:e=>(0,Z.jsx)(R().Z,{title:v,children:e.children})}]})}function O(e){let{blockStore:t,...n}=e;const{focused:o,onClick:i}=n,s=(0,g().YB)(),d=(0,r().VK)((()=>t.getIcon()),[t]),c=(0,a().yK)((e=>({item:{height:32},itemRight:{marginRight:4},pageTitleWrapper:{display:"flex",alignItems:"center"},icon:{marginRight:4},title:{...h().Yu,maxWidth:"100%",fontWeight:500},iconButton:{right:6,background:e.popoverBackground,boxShadow:e.shadowSM,padding:2},iconButtonHover:{borderRadius:4}})),[]);return(0,Z.jsx)(y().Z,{...n,textWrapperStyle:{marginLeft:6},title:(0,Z.jsxs)("div",{style:c.pageTitleWrapper,children:[(0,Z.jsx)(T().Z,{icon:d,style:c.icon,disabled:!0,isEmptyPage:!0,size:20}),(0,Z.jsx)(M().Z,{underline:!0,enableHover:!0,store:t,style:c.title})]}),right:o?(0,Z.jsx)(C().Z,{hasBackground:!1,ariaLabel:s.formatMessage({id:"CollectionLinkExistingModal.linkButton.ariaLabel",defaultMessage:"Link page"}),icon:u().R,onClick:i,hoveredStyle:c.iconButtonHover,style:c.iconButton}):void 0,style:c.item,rightStyle:c.itemRight})}function N(e){let{searchQuery:t,onSearchQueryChange:n}=e;const{device:o}=(0,i().O7)(),r=(0,g().YB)(),s=(0,a().yK)((e=>({headerWrap:{display:"flex",width:"100%",position:"relative",padding:"6px 10px",fontSize:o.isMobile?h().JB.UIRegular.mobile:h().JB.UIRegular.desktop,boxShadow:`\n\t\t\t\t\t0 1px 0 ${e.darkDividerColor}\n\t\t\t\t`},input:{flexGrow:1}})),[o]);return(0,Z.jsx)("div",{style:s.headerWrap,children:(0,Z.jsx)(k().Z,{style:s.input,value:t,placeholder:r.formatMessage({id:"CollectionLinkExistingModal.searchPlaceholder",defaultMessage:"Link a page…"}),forceShowClearButton:Boolean(t),focus:!0,onChange:e=>n(e.target.value),onClearButtonClick:()=>{n("")},format:k().B.Transparent})})}function F(e){let{searchQuery:t,collectionContextStore:n,groupsPointer:r,onClose:s,onAddOrLink:d}=e;const c=(0,i().O7)(),l=(0,a().yK)((e=>({button:{display:"flex",alignItems:"center",gap:6,width:"100%",paddingInline:12,paddingBlock:8,fontSize:c.device.isMobile?h().JB.UIRegular.mobile:h().JB.UIRegular.desktop,boxShadow:`\n\t\t\t\t\t0 -1px 0 ${e.darkDividerColor}\n\t\t\t\t`,color:e.text.secondary},pageTitle:{color:e.text.primary}})),[c.device]),p=(0,o.useCallback)((()=>{S().createAndCommit({userAction:"CollectionLinkExistingModal.onLinkExisting",environment:c,canUndo:!0,perform:e=>{const{newStore:o}=f().IW({environment:c,collectionContextStore:n,groupsPointer:r,shouldCoerce:!0,from:{createBlock:"relation_link_existing"},transaction:e,inMemoryRecordCache:c.defaultRecordCache.inMemoryRecordCache,title:t});d&&d(e,o)}}).performResult,s()}),[n,c,r,d,s,t]);return(0,Z.jsxs)(v().Z,{style:l.button,onClick:p,children:[(0,u().R)({width:14}),(0,Z.jsx)("div",{children:(0,Z.jsx)(g()._H,{id:"CollectionLinkExistingModal.addPageButton",defaultMessage:"Create {pageTitle}",values:{pageTitle:(0,Z.jsx)("span",{style:l.pageTitle,children:t})}})})]})}const H=(0,o.memo)((function(){const e=(0,a().yK)((e=>({wrapper:{display:"flex",flexDirection:"column",gap:8,paddingBottom:12},resultsWrapper:{marginRight:8,marginLeft:12},icon:{height:16,width:16,borderRadius:4},pageName:{height:15,borderRadius:4,marginLeft:-1},sectionName:{height:12,borderRadius:4,width:"20%",marginTop:15,marginLeft:13,marginBottom:6}})),[]);return(0,Z.jsxs)("div",{style:e.wrapper,children:[(0,Z.jsx)(_().Z,{style:e.sectionName}),(0,Z.jsx)("div",{style:e.resultsWrapper,children:(0,Z.jsx)(b().sg,{gap:12,children:Array.from({length:3},((t,o)=>(0,Z.jsx)("div",{children:(0,Z.jsxs)(b().X2,{gap:8,alignItems:"center",children:[(0,Z.jsx)(_().Z,{style:e.icon}),(0,Z.jsx)(_().Z,{style:{...e.pageName,width:n(513670).UP(["30%","40%","43%","45%","48%","50%","54%","55%","60%"])}})]})},`relation-result-shimmer-${o}`)))})})]})}))},632599:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(667294),i=()=>n(846550),r=()=>n(729201),a=()=>n(312578),s=n(785893);function d(e){let{loadingMessage:t}=e;const n=(0,i().Fg)(),d=(0,r().Z)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:d&&(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(a().Z,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},178498:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(667294),i=n(785893);function r(e,t){return(0,i.jsx)(n(18748).ZP,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const a=(0,o.forwardRef)(r)},233405:(e,t,n)=>{n.d(t,{Z:()=>i});n(667294);var o=n(785893);const i=function(e){const{style:t}=(0,n(846550).yK)((t=>({style:{display:"inline-block",textAlign:"center",color:e.disabled?t.lightTextColor:t.mediumTextColor,userSelect:"none",WebkitUserSelect:"none",width:8,...e.style}})),[e.disabled,e.style]);return(0,o.jsx)("div",{style:t,children:"·"})}},504117:(e,t,n)=>{n.d(t,{Um:()=>a,ZP:()=>s,kN:()=>r});n(667294);var o=()=>n(666414),i=n(785893);function r(e){return e?18:60}function a(){return(0,i.jsx)(o().Z,{size:37})}const s=function(e){let{children:t,controlRow:o,bannerText:a,controlRowPaddingTopBottom:s,removeBoxShadow:d,contentPaddingLeftRight:c,controlRowPaddingLeftRight:l,getPaddingTopBottom:u,disableScroller:p,maxWidth:m}=e;const g=(0,n(219727).O7)(),{device:h}=g,f=u?u():h.isMobile?18:36,S=(0,n(846550).yK)((e=>({containerWithScroller:{display:"flex",flexDirection:"column",width:"100%",height:"100%",maxWidth:m??void 0,backgroundColor:e.cardContentBackground},scroller:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:c??r(h.isMobile),paddingRight:c??r(h.isMobile),paddingTop:a?15:f,paddingBottom:a?22:f},controlRowWithScroller:{flexGrow:0,flexShrink:0,paddingLeft:l??r(h.isMobile),paddingRight:l??r(h.isMobile),paddingTop:s,paddingBottom:s,boxShadow:d?void 0:`0 -1px 0 ${e.regularDividerColor}`},containerWithoutScroller:{paddingLeft:r(h.isMobile),paddingRight:r(h.isMobile)},childrenWithoutScroller:{paddingTop:f,paddingBottom:f},controlRowWithoutScroller:{paddingTop:s,paddingBottom:s,boxShadow:`0 -1px 0 ${e.regularDividerColor}`}})),[m,c,h.isMobile,a,f,l,s,d]);return p?(0,i.jsxs)("div",{style:S.containerWithoutScroller,children:[(0,i.jsx)("div",{style:S.childrenWithoutScroller,children:t}),o&&(0,i.jsx)("div",{style:S.controlRowWithoutScroller,children:o})]}):(0,i.jsxs)("div",{style:S.containerWithScroller,children:[a&&(0,i.jsx)(n(610146).Z,{styleKey:n(500174).v.Blue,isMobile:!1,children:a}),(0,i.jsx)(n(842574).T,{type:n(520849).Z.All,style:S.scroller,children:t}),o&&(0,i.jsx)("div",{style:S.controlRowWithScroller,children:o})]})}},868614:(e,t,n)=>{n.d(t,{Z:()=>i});n(667294);var o=n(785893);const i=function(e){const t=(0,n(846550).Fg)(),{divider:i,large:r,block:a,children:s,hasMarginTop:d,small:c,style:l,smallMarginBottom:u,isCritical:p}=e,m="full"===i;return(0,o.jsx)("div",{style:{borderBottom:m?`1px solid ${t.regularDividerColor}`:0,marginBottom:m?16:u?2:8,marginTop:d?16:0,paddingBottom:m?12:0,fontSize:m?16:r?14:c?12:14,fontWeight:m?n(707513).Ue.medium:400,width:a?"100%":"auto",color:p?n(568017).ZP.red:t.regularTextColor,...l},children:s})}},579807:(e,t,n)=>{n.d(t,{L:()=>U,Z:()=>E});n(670560),n(267602),n(470928),n(241792);var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(286977),d=()=>n(374289),c=()=>n(667067),l=()=>n(788860),u=()=>n(696459),p=()=>n(844085),m=()=>n(939513),g=()=>n(352230),h=()=>n(332504),f=()=>n(439871),S=()=>n(998901),v=()=>n(965014),y=()=>n(188296),b=()=>n(265640),C=()=>n(827973),x=()=>n(448419),k=()=>n(198829),_=()=>n(18748),w=()=>n(255577),I=()=>n(661641),T=()=>n(661297),M=()=>n(388284),R=()=>n(471645),B=()=>n(667637),j=()=>n(654133),A=()=>n(504117),L=()=>n(91253),P=n(785893);function E(e){const{isMobile:t,title:n,caption:s,captionStyle:d,upsellOptions:c,type:l,shouldHighlight:u}=e,g=(0,i().O7)(),{paddingLeftCSS:b,paddingRightCSS:C}=(0,r().VK)((()=>{const{paddingLeftCSS:e,paddingRightCSS:t}=g.WindowSizeStore.state;return{paddingLeftCSS:e,paddingRightCSS:t}}),[g]),[x,k]=(0,o.useState)(!1),_=(0,o.useCallback)((()=>k(!0)),[k]),w=(0,o.useCallback)((()=>k(!1)),[k]),T=(0,o.useContext)(m().U),M=(0,o.useRef)(null);(0,o.useEffect)((()=>{u&&M.current&&p().bx({element:M.current,environment:g,scrollerContext:T,vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[g,u,M,T]);const R="toggleToButton"===e.type?e.isOn:void 0,B="custom"===e.type?e.useFlexboxStyle:void 0,L=(0,o.useMemo)((()=>{if(t){if("dropdown"===l)return{display:"flex",flexDirection:"column"};if(R||B)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[t,l,R,B]),E=(0,a().yK)((n=>({container:{...L,paddingLeft:t?b:void 0,paddingRight:t?C:void 0,cursor:x&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...u?{backgroundColor:n.buttonHoveredBackground,marginLeft:-1*(0,A().kN)(t),marginRight:-1*(0,A().kN)(t),paddingLeft:(0,A().kN)(t),paddingRight:(0,A().kN)(t),marginTop:-1*(0,h().f)(t)/2,marginBottom:-1*(0,h().f)(t)/2,paddingTop:(0,h().f)(t)/2,paddingBottom:(0,h().f)(t)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"5%",width:"65%",gap:6},captionStyle:{...d},title:{display:"flex",flexDirection:"row"}})),[t,b,C,u,x,d,e.disabled,L]),W="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,Z=(0,f().M)(),U=(0,f().M)(),V=(0,P.jsxs)("div",{ref:M,style:E.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return c&&c.shouldUpsell?v().y(g,{from:c.analyticsName,upsell:{type:"product",product:c.subscriptionTier,limit:{type:"none"}}}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&o.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:W?_:void 0,onMouseLeave:W?w:void 0,children:[(0,P.jsxs)("div",{style:E.description,children:[(0,P.jsx)(I().q,{styleName:"UIRegular-14px/Regular",colorName:e.isCritical?"uiRedPrimary":"primary",children:(0,P.jsxs)("div",{id:Z,style:E.title,children:[n,e.badge,c&&c.shouldUpsell&&(0,P.jsx)(y().Z,{subscriptionTier:c.subscriptionTier,analyticsName:c.analyticsName,onClick:()=>v().y(g,{from:c.analyticsName,upsell:{type:"product",product:c.subscriptionTier,limit:{type:"none"}}}),desktopStyle:{display:"flex",marginLeft:8}})]})}),(0,P.jsx)(I().q,{id:U,styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:E.captionStyle,children:s})]}),(0,P.jsx)(D,{titleId:Z,captionId:U,...e})]});return e.tooltipLabel?(0,P.jsx)(j().Z,{placement:S().Placement.Bottom,alignment:S().Alignment.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>(0,P.jsx)("div",{...e,children:V})}):V}function D(e){const{titleId:t,captionId:n}=e;if("toggle"===e.type)return(0,P.jsx)(R().Z,{"aria-labelledby":t,"aria-describedby":n,on:e.isOn,disabled:e.disabled,isLocked:e.isLocked,lockedTooltip:e.lockedTooltip});if("dropdown"===e.type)return(0,P.jsx)(U,{...e});if("custom"===e.type)return(0,P.jsx)(P.Fragment,{children:e.customButton});if("toggleToButton"===e.type)return e.isOn?(0,P.jsx)("div",{style:{marginTop:12},children:(0,P.jsx)(T().Z,{size:"lg",onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled,children:e.buttonLabel})}):(0,P.jsx)(R().Z,{"aria-labelledby":t,"aria-describedby":n,on:!1,onClick:e.onClick,disabled:e.disabled});if("timezonePicker"===e.type){const{currentTimeZone:t,...n}=e;return(0,P.jsx)(L().X,{...n,currentValue:t,enableRecents:!1})}(0,u().t1)(e)}const W=12,Z=4;function U(e){var t;const{title:n,isMobile:o,upsellOptions:i,currentOption:r,options:u,info:p,switcherButtons:m,onSelectOption:h,menuStyle:f,buttonStyle:v,buttonHoverStyle:y,isLocked:I,lockedTooltip:T,placementToOrigin:R}=e,A=null===(t=u.find((e=>{let{key:t}=e;return t===r})))||void 0===t?void 0:t.label,L=(0,a().yK)((e=>({button:{marginTop:W,marginBottom:Z,marginRight:o?"auto":void 0,paddingLeft:o?12:8,paddingRight:o?12:8,height:o?44:28,border:o?`1px solid ${e.outlineButtonBorder}`:void 0,...v},icon:{width:10,marginLeft:4,fill:e.lightIconColor},lockedContainer:{display:"flex",alignItems:"center",justifyContent:"center"},lockedIcon:{marginTop:W,marginBottom:Z,height:16,width:16,color:e.grayButtonBackground}})),[o,v]),E=Boolean(i&&i.shouldUpsell)||e.disabled||I,D=(0,P.jsx)(x().ZP,{popupType:o?x().Z4.SlideUp:x().Z4.Popup,placementToOrigin:R??x().pO.Bottom,originGap:8,renderOrigin:e=>(0,P.jsxs)(b().D,{...e,size:"lg",style:{opacity:E?.4:1,...L.button},hoveredStyle:y,disabled:E,children:[A,(0,d().i)(L.icon)]}),render:e=>{let t;t=o?{menuType:g().o.Modal,title:n,right:(0,P.jsx)(l()._H,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:g().o.Popup,width:250,maxHeight:400,...f};const i=[],r=u.map((t=>{let{key:n,label:i,caption:r}=t;return{key:n,action:()=>{h(n),e.close()},render:e=>(0,P.jsx)(C().Z,{...e,title:i,caption:r,shouldWrapCaption:!0,right:A===i?(0,P.jsx)("div",{style:{width:o?16:14},children:(0,s().e)()}):void 0})}}));if(i.push({key:"settings-item-section",render:e=>(0,P.jsx)(M().Z,{...e}),items:r}),p){const e=p.map((e=>{let{key:t,label:n}=e;return{key:t,action:()=>{},render:e=>(0,P.jsx)(_().ZP,{...e,shouldWrapCaption:!0,caption:n})}}));i.push({key:"info-item-section",render:e=>(0,P.jsx)(M().Z,{...e,topBorder:!0}),items:e})}if(m&&m.length){const e=m.map((e=>{let{key:t,props:n}=e;return{key:t,action:()=>{},render:()=>(0,P.jsx)(B().Z,{...n})}}));i.push({key:"switcher-item-section",render:e=>(0,P.jsx)(M().Z,{...e,topBorder:!0}),items:e})}return(0,P.jsx)(k().Z,{...t,children:(0,P.jsx)(w().ZP,{type:w().iW.Vertical,sections:i,initialFocus:void 0})})}});return I?(0,P.jsx)(j().Z,{placement:S().Placement.Left,alignment:S().Alignment.Start,disableTooltip:!T,renderTooltip:()=>T,render:e=>(0,P.jsxs)("div",{style:L.lockedContainer,...e,children:[(0,c().Q)(L.lockedIcon),D]})}):D}},29090:(e,t,n)=>{n.d(t,{Z:()=>d});n(667294);var o=()=>n(219727),i=()=>n(568017),r=()=>n(154186),a=()=>n(906651),s=n(785893);const d=function(e){let{onClick:t,disabled:o,title:i}=e;return(0,s.jsx)(n(18748).ZP,{title:(0,s.jsx)(c,{onClick:t,disabled:o,title:i})})};function c(e){let{onClick:t,disabled:n,title:d}=e;const c=(0,o().O7)(),{isMobile:l}=c.device,u={width:"100%",color:i().ZP.blue};return l?(0,s.jsx)(r().Z,{onClick:t,mobileFeedback:!0,disabled:n,style:u,children:d}):(0,s.jsx)(a().Z,{onClick:t,disabled:n,style:{width:"100%",maxWidth:300,display:"flex",margin:"auto"},children:d})}},539245:(e,t,n)=>{n.d(t,{Qr:()=>d,ZP:()=>c,pQ:()=>s});n(241792);var o=n(667294),i=()=>n(352230),r=n(785893);function a(e){let{tabs:t,selectedIndex:a,onChange:c,separatorIndexes:l,right:u,style:p,rightStyle:m,tabStyle:g,tabTitleStyle:h,selectedTabTitleStyle:f,tabBorderStyle:S,selectedTabStyle:v,readOnly:y,hideTabBorder:b,idPrefix:C}=e;const x=(0,o.useContext)(i().p),{device:k,WindowSizeStore:_}=(0,n(219727).O7)(),{safePaddingLeft:w,safePaddingRight:I}=(0,n(142735).VK)((()=>({safePaddingLeft:_.getSafePaddingLeftCSS(16),safePaddingRight:_.getSafePaddingRightCSS(16)})),[_]),T=(0,n(846550).yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...g},n=`inset 0 -1px 0 ${e.regularDividerColor}`,o=x.menuType===i().o.Popup,r={fontSize:16,paddingTop:2,paddingLeft:o?16:w,paddingRight:o?16:I,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:b?void 0:n,...k.isMobile?r:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...p},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...v},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...S},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...m}}}),[x.menuType,k.isMobile,m,w,I,v,p,S,g,b]);return(0,r.jsxs)("div",{className:"hide-scrollbar",style:T.container,role:"tablist",children:[t.map(((e,t)=>{const i=t===a;return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsxs)("div",{style:i?T.selectedTab:T.tab,children:[(0,r.jsx)(n(265640).D,{style:{...h,...i?f:{}},onClick:()=>c(t),disabled:y,mobileFeedback:k.isMobile,isLightGray:!Boolean(i),role:"tab","aria-selected":i,id:s(C,t),"aria-controls":d(C,t),children:e}),i&&(0,r.jsx)("div",{style:T.border})]},`tabButton-${t}`),l&&l.includes(t)&&(0,r.jsx)("div",{style:T.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),u&&(0,r.jsx)("div",{style:T.rightContainer,children:u})]})}function s(e,t){if(e)return`${e}-tab-${t}`}function d(e,t){if(e)return`${e}-tabpanel-${t}`}const c=o.memo(a)},521412:(e,t,n)=>{n.d(t,{X:()=>o});const o=new(n(677559).Ss)("pageCovers",(async()=>n.e(1642).then(n.bind(n,832783))))},761936:(e,t,n)=>{n.d(t,{L:()=>l});var o=()=>n(642240),i=()=>n(338530);const r={ko:()=>n.e(60692).then(n.bind(n,299435)),es:()=>n.e(20883).then(n.bind(n,960142)),de:()=>n.e(83224).then(n.bind(n,299606)),fr:()=>n.e(85038).then(n.bind(n,604240)),pt:()=>n.e(72138).then(n.bind(n,515748)),zh:()=>n.e(17835).then(n.bind(n,240169)),ja:()=>n.e(96377).then(n.bind(n,770488)),da:()=>n.e(57677).then(n.bind(n,317410)),fi:()=>n.e(66970).then(n.bind(n,266265)),nb:()=>n.e(93031).then(n.bind(n,189761)),nl:()=>n.e(62579).then(n.bind(n,360701)),sv:()=>n.e(60382).then(n.bind(n,575660))};let a=!1,s=!1;async function d(e){for(const[n,i]of Object.entries(e.emojiLocaleKeywords)){var t;o().Q4[n]={...o().Q4[n],keywords:[...i,...(null===(t=o().Q4[n])||void 0===t?void 0:t.keywords)||[]]}}await i().Z.waitUntilLoaded(),i().Z.update((t=>{let{emojiByName:n,...o}=t;return{...o,emojiByName:{...n,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=n(146947).locale.split("-");e in r&&(await d(await r[e]()),a=!0)}const l=(0,n(924665).Z)((async()=>{await async function(){s||(await d(await n.e(83552).then(n.bind(n,716373))),s=!0)}(),await c()}))},439871:(e,t,n)=>{n.d(t,{M:()=>i});var o=n(667294);function i(e){const t=(0,o.useId)();return e??t}},420406:(e,t,n)=>{n.d(t,{$:()=>o});function o(e,t){t.route.name;return!1}},341643:(e,t,n)=>{n.d(t,{DW:()=>v,IG:()=>h,J4:()=>S,hZ:()=>f,q9:()=>g,qq:()=>y,s4:()=>m});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(801812),s=()=>n(677559),d=()=>n(690664),c=()=>n(105649),l=()=>n(291335),u=()=>n(590972),p=()=>n(420406);const m=new(s().Ss)("PerformanceToolbar",(()=>Promise.all([n.e(62743),n.e(5242),n.e(4014),n.e(20919),n.e(93843),n.e(66283),n.e(54194)]).then(n.bind(n,674207)))),g=(0,s().kF)(m,(e=>e.PerformanceToolbar)),h=(0,s().kF)(m,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,i().O7)();return(0,r().VK)((()=>(0,p().$)(e,e.RouterStore.state)),[e])}function S(){const e=(0,i().O7)(),t=b("PerformanceToolbarStore"),n=b("isPerformanceToolbarVisible");return(0,r().VK)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function v(){const e=b("PerformanceToolbarStore");return(0,r().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function y(){const e=(0,i().O7)(),t=b("createPerformanceToolbarMouseListeners"),n=b("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:h}=(0,r().VK)((()=>({sidebarExpanded:l().sidebarExpandedStore.state,sidebarWidth:l().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:d().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,g,h)}),[t,e,n,a,s,p,m,g,h])}function b(e){const t=f(),[{value:n}]=(0,a().r5)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},188296:(e,t,n)=>{n.d(t,{Z:()=>u});n(667294);var o=()=>n(142735),i=()=>n(122792),r=()=>n(788860),a=()=>n(568017),s=()=>n(707513),d=()=>n(946563),c=()=>n(965014),l=n(785893);const u=function(e){let{subscriptionTier:t,mobileStyle:u,desktopStyle:p,analyticsName:m,onClick:g,disableTooltip:h}=e;const f=(0,n(846550).Fg)(),S=(0,n(219727).O7)(),{device:v}=S,y=(0,o().VK)((()=>{const{currentSpaceStore:e}=n(876822).default.state;return null==e?void 0:e.canAdmin()}),[]),b=(0,o().VK)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?a().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:s().Ue.medium};default:return{}}}(t,f)),[t,f]);if(v.isMobileNative)return null;let C;return"personal"===t?C=(0,l.jsx)(r()._H,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,i().eR)(t)?C=(0,l.jsx)(r()._H,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"}):(0,i().NG)(t)?C=(0,l.jsx)(r()._H,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"}):(0,i().wP)(t)?C=(0,l.jsx)(r()._H,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"}):(0,n(696459).t1)(t),v.isMobile||!y?(0,l.jsx)(d().Z,{mobileStyle:u,children:C}):(0,l.jsx)(n(654133).Z,{delayThreshold:120,disableTooltip:h,placement:n(998901).Placement.Bottom,renderTooltip:()=>(0,l.jsx)("div",{style:{maxWidth:500},children:(0,l.jsx)(r()._H,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,l.jsx)(d().Z,{desktopStyle:p,innerStyle:b,onClick:e=>function(e,t,n,o,i){c().y(o,{from:t,upsell:{type:"product",product:n,limit:{type:"none"}}}),i&&i(e)}(e,m,t,S,g),...e,children:C})})}},877727:(e,t,n)=>{n.d(t,{QZ:()=>a,SV:()=>i,mq:()=>r});var o=()=>n(749826);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"workflow_templates_settings_dev",disableExposureLogging:e.disableExposureLogging})&&o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function a(e){return!e.device.isPhone}},999582:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const i=new o;n(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},280210:(e,t,n)=>{n.d(t,{U_:()=>x,f6:()=>_,ii:()=>k});n(821057),n(409045),n(453627),n(994774),n(995194),n(520522),n(200082),n(379976),n(724224),n(761121),n(637133),n(241792);var o=n.n(n(402568)),i=()=>n(513670),r=()=>n(326966),a=()=>n(431595),s=()=>n(24945),d=()=>n(255933);const c={version:8,notion_version:0,variant:2},l={version:8,notion_version:1,variant:2},u=0,p=1,m=6,g=8,h=10,f=Date.UTC(2024,0,1);function S(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const n=Math.floor(((new Date).getTime()-f)/r().A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[u]=n>>4,t[u+1]=n<<4&240|15&t[u+1],t}function v(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let n=0;n<4;n++)t[p+1+n]=e/2**(24-8*n)&255;return t}function y(e,t){const n=e?1:0;return t[m]=c.version<<4&240|c.notion_version<<1&14|1&n,t[g]=c.variant<<6&192|63&t[g],t}function b(e,t){if("block"===e)return t[h]=(0,s().ym)(e)|63&t[h],t;const n=(0,s().ym)(e);return t[h]=n>>8&127,t[h+1]=255&n,t}function C(e,t){const n=(0,s().Nq)(e);return t[h]=127&n|128&t[h],t}function x(e,t,n,o){const i=new Uint8Array(16),r=globalThis.crypto.getRandomValues(i);return n!==d().bx&&S(e,r),v(t,r),y(o,r),b(n,r),T(r)}function k(e,t,n,o){return x(e,t,n,o)}function _(e,t,n){return w(e,t,n)}function w(e,t,n){const r=o()(n),d=i().yo(r,2).map((e=>parseInt(e.join(""),16)));if((0,s().LV)(t)){if(void 0===e)throw new(a().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(d);return e&&v(e,c),C(t,c),function(e){e[m]=240&l.version<<4|14&l.notion_version<<1|1&e[m],e[g]=192&l.variant<<6|63&e[g]}(c),T(c)}const I=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function T(e){let t=0;return I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]}},29488:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{O:()=>o})},924665:(e,t,n)=>{function o(e){let t,n,o;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(o=r,n||(n=t.then((()=>(n=void 0,t=e(...o),t))),n)):(t=e(...r),t)}}n.d(t,{Z:()=>o})},157955:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>R,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>C,MAX_RECURRENCE_INTERVAL:()=>f,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>S,RRULE_WEEKDAYS_MAP:()=>h,convertFromUnpersistedRecurrenceConfig:()=>L,convertToUnpersistedRecurrenceConfig:()=>B,getFormattedEndCondition:()=>M,getFormattedNextRecurrenceTime:()=>T,getNewEndTimestamp:()=>j,getNextDateUtc:()=>I,getRecurrenceAfter:()=>_,isRunningBetweenMidnightAnd3AM:()=>w,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>y,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>k});n(267602),n(653476),n(241792);var o=()=>n(730120);n(670560);function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const r=[];for(const a of e)r.push(...i(n[0],...n.slice(1)).map((e=>[a,...e])));return r}var r=()=>n(696459),a=()=>n(326966),s=()=>n(803021),d=()=>n(646574),c=()=>n(998411),l=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(494616);const m=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},h={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},f=99,S=999;function v(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=f}function y(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=S}function b(e){const{start_date:t,frequency:n,interval:o,weekdays:a,timezone:d,hour:c,minute:l}=e,p="week"===n&&a?a.map((e=>h[e])):void 0,m={};return(0,r().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().t1)(e.end_condition)),"month"===e.frequency&&(0,r().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return h[t].nth(n)})):(0,r().t1)(e.monthly_restriction)),new u({freq:g[n],dtstart:(0,s().pd)(t),interval:o,byweekday:p,tzid:d,byhour:c??0,byminute:l??0,bysecond:0,...m})}const C=1,x=1;function k(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=o>C,a=n.length>=x;return{violatesConstraint:r||a,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:i}}function _(e){const{recurrence:t,afterDate:n}=e;if((0,p().nA)(t)){const e=(0,s().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(t).after((0,s().pd)(n));if(!e)return;return(0,s().YL)(e)}}function w(e){return 0===e.hour||1===e.hour||2===e.hour}function I(e){return b(e).after((0,s().pd)((0,s().Jh)()))||void 0}function T(e){const{recurrence:t,intl:n}=e,i=I(L(t));if(!i)return;const r=w(t),a=o().ou.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,l().E2)(n)).setZone(t.timezone),s=(0,d().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(r)return n.formatMessage(m.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().ou.TIME_SIMPLE);return t.timezone!==(0,c().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(m.dateAtTime,{date:s,time:e})}}function M(e,t){return(0,r().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().p6)({date:o().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().t1)(e):t.formatMessage(m.noEndCondition)}const R=100;function B(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,r().t1)(e.end_condition):void 0}}function j(e,t,n){return e.plus(n-t)}function A(e,t){const n=o().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(n.toJSDate())}}function L(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?A(e,e.end_condition):(0,r().t1)(e.end_condition):void 0}}},682890:(e,t,n)=>{n.d(t,{M:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},889919:(e,t,n)=>{n.d(t,{k:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},29248:(e,t,n)=>{n.d(t,{K:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},114066:(e,t,n)=>{n.d(t,{H:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("copyPadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M4.89062 18.5107C4.89062 19.9873 5.64941 20.7529 7.1123 20.7529H13.5107C14.9736 20.7529 15.7256 19.9805 15.7256 18.5107V17.2461H16.8877C18.3506 17.2461 19.1094 16.4805 19.1094 15.0039V9.58984C19.1094 8.69434 18.9248 8.12012 18.3848 7.56641L14.9736 4.09375C14.4609 3.56738 13.8525 3.36914 13.0664 3.36914H10.4893C9.0332 3.36914 8.26758 4.13477 8.26758 5.61133V6.86914H7.1123C5.64941 6.86914 4.89062 7.6416 4.89062 9.11133V18.5107ZM15.042 11.3262L11.3369 7.55957C10.8105 7.02637 10.3662 6.88281 9.60742 6.87598V5.68652C9.60742 5.05762 9.94238 4.70898 10.6055 4.70898H13.4629V7.97656C13.4629 8.82422 13.9141 9.26172 14.7549 9.26172H17.7695V14.9219C17.7695 15.5576 17.4414 15.9062 16.7715 15.9062H15.7256V13.2539C15.7256 12.3311 15.6162 11.9072 15.042 11.3262ZM14.584 7.80566V5.2627L17.4209 8.14062H14.9189C14.6865 8.14062 14.584 8.04492 14.584 7.80566ZM6.23047 18.4287V9.19336C6.23047 8.56445 6.55859 8.20898 7.22168 8.20898H9.32031V11.9551C9.32031 12.9326 9.80566 13.4111 10.7764 13.4111H14.3857V18.4287C14.3857 19.0645 14.0576 19.4131 13.3945 19.4131H7.22168C6.55859 19.4131 6.23047 19.0645 6.23047 18.4287ZM10.9062 12.2285C10.626 12.2285 10.5029 12.1055 10.5029 11.8252V8.46875L14.2012 12.2285H10.9062Z"})})},1723:(e,t,n)=>{n.d(t,{l:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("import",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},490670:(e,t,n)=>{n.d(t,{f:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("plusThick",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},46581:(e,t,n)=>{n.d(t,{U:()=>a});var o=n.n(n(389539)),i=()=>n(280210),r=()=>n(956057);class a{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:o}=this.getSettings();return o&&e!==n(363777).uK?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,i().ii)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:r}=this.getSettings();if(!r||"space"===t)return this.legacyId(t,"disabled");const a=this.mapSpaceIdToShortId(e),s=o().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),(0,i().U_)(n,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:o}=this.getSettings();return o&&"space"!==t?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,i().U_)(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),r().Il()}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:a,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),r().Ul(n);const d=this.mapSpaceIdToShortId(e),c=o().types.isPromise(d)?await d:d;return c?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema"),(0,i().f6)(c,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),r().Ul(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:o,enableIdSchema:a}=this.getSettings();return a?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,i().f6)(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),r().Ul(n))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),i=o().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,i)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),i=o().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,i)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new d(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),r().Il()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),r().Il()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),r().Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class d{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},856466:(e,t,n)=>{n.d(t,{$X:()=>a,F_:()=>s,iZ:()=>r});n(267602),n(470928);var o=()=>n(926724),i=()=>n(295617);const r={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function a(e){const{eventTracker:t,properties:n}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:n})}function s(e,t){var n;return null===(n=t.groups)||void 0===n||null===(n=n.find((t=>t.id===o().nl||(null==t?void 0:t.name)===i().RW||(null==t?void 0:t.name)===e.formatMessage(i().ct.statusGroupNameComplete))))||void 0===n?void 0:n.name}},126301:(e,t,n)=>{n.d(t,{DW:()=>s,IX:()=>a,Su:()=>i,rP:()=>r});var o=()=>n(730120);function i(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function r(e){const{currentSprintEndDate:t,sprintSchedule:n}=e;return d({startDate:l({dateToAdjust:o().ou.fromISO(t),weekday:n.weekday,wrapForEqualDays:!0}),duration:n.duration})}function a(e){const{userTimeZone:t,sprintSchedule:n}=e;return d({startDate:o().ou.local({zone:t}),duration:n.duration})}function s(e){const{currentSprintStartDate:t,sprintSchedule:n}=e,i=l({dateToAdjust:o().ou.fromISO(t),weekday:n.weekday,wrapForEqualDays:!1}),{end_date:r}=d({startDate:i,duration:n.duration});let a=o().ou.fromISO(r);const s=o().ou.now().startOf("day");for(;a.diff(s,"days").days<0;)a=a.plus({weeks:1});return{type:"daterange",start_date:a.plus({days:1}).minus({weeks:n.duration}).toISODate(),end_date:a.toISODate()}}function d(e){const{startDate:t,duration:n}=e,o=t.plus({weeks:n}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:o.toISODate()}}const c={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function l(e){const{dateToAdjust:t,weekday:n,wrapForEqualDays:o}=e,i=u({currentWeekday:t.weekday%7,nextWeekday:c[n],wrapForEqualDays:o});return t.plus({days:i})}function u(e){const{currentWeekday:t,nextWeekday:n,wrapForEqualDays:o}=e,i="number"==typeof t?t:c[t],r="number"==typeof n?n:c[n];if(i===r)return o?7:0;let a=i,s=0;for(;a!==r;)a===c.SA?a=0:a+=1,s+=1;return s}},971095:(e,t,n)=>{n.d(t,{A:()=>o});const o=(0,n(830742).LS)("importEvernote")}}]);