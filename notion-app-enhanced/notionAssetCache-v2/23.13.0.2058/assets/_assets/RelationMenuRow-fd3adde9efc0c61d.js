"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39453],{290950:(e,t,o)=>{o.d(t,{RelationMenuRow:()=>X,Z:()=>ne});o(267602),o(653476),o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(98642),a=()=>o(142735),l=()=>o(846550),s=()=>o(506347),d=()=>o(926724),c=()=>o(38883),u=()=>o(494345),p=()=>o(328714),g=()=>o(982421),y=()=>o(159732),S=()=>o(882888),f=()=>o(235605),h=()=>o(788860),b=()=>o(513670),m=()=>o(696459),k=()=>o(707513),C=()=>o(491927),x=()=>o(794586),M=()=>o(589024),w=()=>o(605890),v=()=>o(250625),B=()=>o(949842),R=()=>o(527278),P=()=>o(154057),I=()=>o(129338),L=()=>o(173113),T=()=>o(973837),j=()=>o(121700),E=()=>o(482162),H=()=>o(679791),A=()=>o(692102),O=()=>o(356321),V=()=>o(603885),Z=()=>o(154186),_=()=>o(9641),K=()=>o(864266),U=()=>o(1910),D=()=>o(18748),F=()=>o(231219),N=()=>o(654133),W=()=>o(328094),G=o(785893);const z=(0,h().vU)({dragRowHandleAriaLabel:{defaultMessage:"Drag to move a related page",id:"database.relationMenuRow.dragRowHandle.ariaLabel"},floatingInsertButtonAriaLabel:{defaultMessage:"Create a new related page",id:"database.relationMenuRow.floatingInsertButton.ariaLabel"},defaultIsSelectedPrimaryButtonAriaLabel:{defaultMessage:"Unlink page",id:"database.relationMenuRow.button.primary.default.isSelected.ariaLabel"},defaultIsNotSelectedPrimaryButtonAriaLabel:{defaultMessage:"Link page",id:"database.relationMenuRow.button.primary.default.isNotSelected.ariaLabel"},sprintIsSelectedPrimaryButtonAriaLabel:{defaultMessage:"Remove this sprint",id:"database.relationMenuRow.button.primary.sprint.isSelected.ariaLabel"},sprintIsNotSelectedPrimaryButtonAriaLabel:{defaultMessage:"Add this sprint",id:"database.relationMenuRow.button.primary.sprint.isNotSelected.ariaLabel"},defaultIsSelectedSecondaryButtonAriaLabel:{defaultMessage:"Insert new page",id:"database.relationMenuRow.button.secondary.default.isSelected.ariaLabel"},defaultIsNotSelectedSecondaryButtonAriaLabel:{defaultMessage:"Link another page",id:"database.relationMenuRow.button.secondary.default.isNotSelected.ariaLabel"},sprintIsSelectedSecondaryButtonAriaLabel:{defaultMessage:"Insert new page",id:"database.relationMenuRow.button.secondary.sprint.isSelected.ariaLabel"},sprintIsNotSelectedSecondaryButtonAriaLabel:{defaultMessage:"Move to a different sprint",id:"database.relationMenuRow.button.secondary.sprint.isNotSelected.ariaLabel"},openPageSidePeekAriaLabel:{defaultMessage:"Open in side peek",id:"database.relationMenuRow.button.openPageSidePeek.ariaLabel"},openPageCenterPeekAriaLabel:{defaultMessage:"Open in center peek",id:"database.relationMenuRow.button.openPageCenterPeek.ariaLabel"},openPageFullPageAriaLabel:{defaultMessage:"Open as page",id:"database.relationMenuRow.button.openPageFullPage.ariaLabel"}}),Y=48;function X(e){const{collectionStore:t,collectionId:o,schema:l,propertySchema:c,targetCollectionStore:u,relatedPageStore:p,isSelected:g,disabled:y,locked:S,canDrag:f,pageStore:h,property:b,propertyLimit:m,limitReached:k,rowType:M,onActionButtonClick:B,onSecondaryButtonClick:R,onOpenPageButtonClick:P,onMouseEnter:I,onMouseLeave:H,blockPropertyValueOverlayStore:A,onInsertInline:O,onTitleEsc:V,index:Z,focused:_,disableClickToNavigateToPage:K}=e,[U,D]=n.useState(!1),F=(0,i().O7)(),N=(0,i().Fy)(),W=n.useRef(null),z=n.useRef(null);(0,r().c)(T().Z,(()=>({relatedPageStoreId:p.id,rowType:M,property:b,relationTokenBlockStoreRef:W,getNode:()=>z.current})),[p,M,b]);const Y=(0,a().VK)((()=>{if(E().default.state.open)return E().default.state.mode;const e=null==A?void 0:A.state;if(null==e||!e.isOpen||null==e||!e.collectionContextStore)return E().default.state.mode;const t=e.collectionContextStore,o=null==t?void 0:t.collectionViewStore(),n=null==o?void 0:o.getType();return o&&n?o.getFormat().collection_peek_mode??w().Ls[n]:E().default.state.mode}),[A]),X=(0,a().VK)((()=>u.getDatabaseType()),[u]),ee=(0,L().a)(c);if(N.isPhone&&"popup"===M)return ee?(0,G.jsx)(re,{...e}):(0,G.jsx)(ae,{...e});if(ee){const e=(0,G.jsx)($,{canDrag:f,rowType:M,focused:_,disabled:y,locked:S,relatedPageStore:p,pageStore:h,onInsertInline:O,index:Z,blockPropertyValueOverlayStore:A,collectionStore:t,targetCollectionStore:u,property:b,propertySchema:c,relationTokenBlockStoreRef:W});return(0,G.jsx)(oe,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n){o||n||t(e)}(e,B,y,g),canDrag:f,rowType:M,focused:_,disabled:y,limitReached:k,propertyLimit:m,hasMouseEntered:U,sectionOnClick:e=>pe(e,F,o,u,g,p,B,y,Y),outerRef:z,onSecondaryButtonClick:R,onMouseEnter:I,onMouseLeave:H})}if(X===d().p$){const e=(0,G.jsx)(Q,{canDrag:f,rowType:M,focused:_,disabled:y,locked:S,isSelected:g,onSecondaryButtonClick:R,onOpenPageButtonClick:P,onActionButtonClick:B,propertyLimit:m,relatedPageStore:p,pageStore:h,onInsertInline:O,index:Z,blockPropertyValueOverlayStore:A,collectionStore:t,targetCollectionStore:u,property:b,propertySchema:c,relationTokenBlockStoreRef:W,outerRef:z,peekMode:Y});return(0,G.jsx)(oe,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n){o||n||t(e)}(e,B,y,g),canDrag:f,rowType:M,focused:_,disabled:y,limitReached:k,propertyLimit:m,hasMouseEntered:U,sectionOnClick:e=>pe(e,F,o,u,g,p,B,y,Y),outerRef:z,onSecondaryButtonClick:R,onMouseEnter:I,onMouseLeave:H})}{const e=(0,G.jsx)(J,{canDrag:f,rowType:M,focused:_,disabled:y,locked:S,propertyLimit:m,limitReached:k,isSelected:g,onSecondaryButtonClick:R,onOpenPageButtonClick:P,onActionButtonClick:B,relatedPageStore:p,pageStore:h,onInsertInline:O,onTitleEsc:V,index:Z,blockPropertyValueOverlayStore:A,collectionStore:t,schema:l,targetCollectionStore:u,property:b,propertySchema:c,relationTokenBlockStoreRef:W,outerRef:z,peekMode:Y}),n=(0,G.jsx)(oe,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n,i,r,a,l,d,c,u,p){if(a||d){if(p)return;const r=v().DJ(e),a=o===n.id?E().default.state.resultsStore:void 0,d=o===n.id?E().default.state.collectionContextStore:void 0,g=E().default.isSidePeekOpen();if(x().CH({environment:t,store:i,peekMode:c,openInNew:r,resultsStore:a,collectionContextStore:d,pageVisitSource:s().tY.PeekOpen}),C().XX(t,{from:"inline"===l||"section"===l?"property_value":"configure_relation_modal",meta_click:Boolean(r)}),"popup"===l&&!g){(u??j().Z).setState({isOpen:!1})}}else r(e)}(e,F,o,u,p,B,y,M,g,Y,A,K),canDrag:f,rowType:M,focused:_,disabled:y,limitReached:k,propertyLimit:m,hasMouseEntered:U,sectionOnClick:e=>pe(e,F,o,u,g,p,B,y,Y),outerRef:z,onMouseEnter:I,onMouseLeave:H});return(0,G.jsx)(q,{rowContainer:n,disabled:y,locked:S,canDrag:f,rowType:M,targetCollectionStore:u,propertyLimit:m,hasMouseEntered:U,outerRef:z,handleMouseEnter:()=>D(!0),handleMouseLeave:()=>D(!1),onInsertInline:O})}}function J(e){const{canDrag:t,rowType:o,focused:n,disabled:r,locked:s,propertyLimit:d,limitReached:c,isSelected:p,onSecondaryButtonClick:g,onOpenPageButtonClick:S,onActionButtonClick:f,relatedPageStore:m,pageStore:k,onInsertInline:C,onTitleEsc:x,index:w,blockPropertyValueOverlayStore:v,collectionStore:B,targetCollectionStore:P,schema:L,property:T,propertySchema:j,relationTokenBlockStoreRef:E,outerRef:H,peekMode:A}=e,O=(0,i().Fy)(),V=(0,l().yK)((e=>({dragHandle:{marginLeft:2,height:20}})),[]),Z=(0,a().VK)((()=>"section"===o&&!r&&m.canEdit()&&!O.isMobile),[o,r,m,O.isMobile]),K=(0,a().VK)((()=>m.canRead()),[m]),U=O.isPhone?(0,G.jsx)(te,{relatedPageStore:m,relationPropertySchema:j,rowType:o,pageStore:k,canEditTitle:Z,shouldShowOverflow:!1,noUnderline:!1,relationTokenBlockStoreRef:E,onInsertInline:C,onTitleEsc:x,index:w}):(0,G.jsx)(ee,{collectionStore:B,property:T,relationPropertySchema:j,relatedPageStore:m,targetCollectionStore:P,blockPropertyValueOverlayStore:v,rowType:o,pageStore:k,index:w,onInsertInline:C,onTitleEsc:x,canEditTitle:Z,shouldShowOverflow:!1,noUnderline:!1,disabled:r,relationTokenBlockStoreRef:E}),D=(0,a().VK)((()=>I().BI(L,T)),[L,T]),F=(0,a().VK)((()=>{const e=null==v?void 0:v.state;if(e&&e.isOpen)return e.format}),[v]),N=function(e){const{device:t,rowType:o,focused:n,disabled:i,locked:r,propertyLimit:a,limitReached:l,onSecondaryButtonClick:s,onOpenPageButtonClick:d,onActionButtonClick:c,isSelected:p,isGithubRelationProperty:g,peekMode:S,onClick:f,format:m}=e,k=!t.isMobile&&n&&!i&&"section"===o&&!b().o8(d),C=(t.isMobile||n)&&!r&&!i&&!l&&(void 0===a||a>1),x=!t.isMobile&&!r&&n&&!i&&"inline"===o&&!b().o8(s),w=C?function(e){const{isSelected:t,isGithubRelationProperty:o,onActionButtonClick:n,format:i}=e,r=t?z.defaultIsSelectedPrimaryButtonAriaLabel:z.defaultIsNotSelectedPrimaryButtonAriaLabel;let a;const l=t?u().g:y().R;a=i&&(0,M().xE)(i)?void 0:t?o?(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.removePR.message",defaultMessage:"Unlink PR"}):(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.removePage.message",defaultMessage:"Unlink page"}):o?(0,G.jsx)(h()._H,{defaultMessage:"Link PR",id:"database.relationMenuRow.tooltip.addPR.message"}):(0,G.jsx)(h()._H,{defaultMessage:"Link page",id:"database.relationMenuRow.tooltip.addPage.message"});return(0,G.jsx)(ne,{ariaLabel:R().Z.formatMessage(r),onClick:n,style:{borderRadius:3},icon:l,tooltipMessage:a})}({isSelected:p,isGithubRelationProperty:g,onActionButtonClick:c,format:m}):void 0,v=x?function(e){const{rowType:t,isSelected:o,isGithubRelationProperty:n,onClick:i}=e;let r;r="section"===t&&o?n?(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.insertPRInline.message",defaultMessage:"Insert new PR"}):(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):n?(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.insertPR.message",defaultMessage:"Link another PR"}):(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.insertPage.message",defaultMessage:"Link another page"});const a="section"===t&&o?z.defaultIsSelectedSecondaryButtonAriaLabel:z.defaultIsNotSelectedSecondaryButtonAriaLabel;return(0,G.jsx)(ne,{ariaLabel:R().Z.formatMessage(a),onClick:i,style:{borderRadius:0},icon:y().R,tooltipMessage:r})}({rowType:o,isSelected:p,isGithubRelationProperty:g,onClick:f}):void 0,B=k&&void 0!==d?(0,G.jsx)(ue,{peekMode:S,showPrimaryButton:void 0!==w,showSecondaryButton:void 0!==v,onOpenPageButtonClick:d}):void 0;return(0,G.jsx)(ce,{primaryButton:w,secondaryButton:v,openPageButton:B})}({device:O,rowType:o,focused:n,disabled:!K||r,locked:s,propertyLimit:d,limitReached:c,isSelected:p,onSecondaryButtonClick:g,onOpenPageButtonClick:S,onActionButtonClick:f,isGithubRelationProperty:D,peekMode:A,onClick:()=>null==g?void 0:g(H.current),format:F});return(0,G.jsxs)(G.Fragment,{children:[t&&"popup"===o&&(0,G.jsx)(_().Z,{iconSize:12,style:V.dragHandle}),U,N]})}function $(e){const{canDrag:t,rowType:o,disabled:n,relatedPageStore:r,pageStore:s,onInsertInline:d,onTitleEsc:c,index:u,blockPropertyValueOverlayStore:p,collectionStore:g,targetCollectionStore:y,property:f,relationTokenBlockStoreRef:h,propertySchema:b}=e,m=(0,i().Fy)(),k=(0,l().yK)((e=>({dragHandle:{marginLeft:2,height:20},iconWrapper:{display:"flex",alignItems:"center",marginLeft:"auto",height:24,padding:0,paddingRight:4},membersIcon:{width:16,height:16,fill:e.mediumIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"},permissionsListContainer:{paddingTop:8,paddingBottom:8,width:400}})),[]),C=(0,a().VK)((()=>"section"===o&&!n&&r.canEdit()&&!m.isMobile),[o,n,r,m.isMobile]),x=(0,G.jsxs)(G.Fragment,{children:[t&&"popup"===o&&(0,G.jsx)(_().Z,{iconSize:12,style:k.dragHandle}),(0,G.jsx)(te,{relatedPageStore:r,rowType:o,pageStore:s,relationPropertySchema:b,canEditTitle:C,shouldShowOverflow:!0,noUnderline:!0,relationTokenBlockStoreRef:h,onInsertInline:d,onTitleEsc:c,index:u})]}),M=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ee,{collectionStore:g,property:f,relationPropertySchema:b,relatedPageStore:r,targetCollectionStore:y,blockPropertyValueOverlayStore:p,rowType:o,pageStore:s,index:u,onInsertInline:d,onTitleEsc:c,canEditTitle:C,shouldShowOverflow:!0,noUnderline:!0,disabled:n,relationTokenBlockStoreRef:h}),(0,G.jsx)("div",{style:k.iconWrapper,children:(0,S().x)(k.membersIcon)})]}),w=(0,G.jsxs)(G.Fragment,{children:[t&&(0,G.jsx)(_().Z,{iconSize:12,style:k.dragHandle}),M]}),v="popup"===o?w:M;return m.isPhone?x:v}function Q(e){const{canDrag:t,rowType:o,focused:n,disabled:r,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:p,onActionButtonClick:g,propertyLimit:S,relatedPageStore:m,pageStore:k,propertySchema:C,onInsertInline:x,onTitleEsc:M,index:w,blockPropertyValueOverlayStore:v,collectionStore:B,targetCollectionStore:P,property:I,relationTokenBlockStoreRef:L,outerRef:T,peekMode:j}=e,E=(0,i().Fy)(),H=(0,l().yK)((e=>({dragHandle:{marginLeft:2,height:20},iconWrapper:{display:"flex",marginLeft:"auto",alignItems:"center",justifyContent:"center",padding:0,height:24},icon:{width:16,height:16,fill:e.regularIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"}})),[]),A=(0,a().VK)((()=>"section"===o&&!r&&m.canEdit()&&!E.isMobile),[o,r,m,E.isMobile]),O=function(e){const{device:t,rowType:o,focused:n,disabled:i,locked:r,onSecondaryButtonClick:a,onOpenPageButtonClick:l,onActionButtonClick:s,isSelected:d,propertyLimit:c,peekMode:p,onClick:g}=e,S=!t.isMobile&&n&&!i&&("section"===o||"inline"===o)&&!b().o8(l),f=(t.isMobile||n)&&!r&&!i,m="section"!==o?(t.isMobile||n)&&!r&&!i&&1!==c&&"popup"===o&&d:f,k=!t.isMobile&&!r&&n&&!i&&!S&&"section"!==o&&!b().o8(a),C=m?function(e){const{isSelected:t,onActionButtonClick:o}=e,n=t?z.sprintIsSelectedPrimaryButtonAriaLabel:z.sprintIsNotSelectedPrimaryButtonAriaLabel,i=t?(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.removePage.messageSprints",defaultMessage:"Remove this sprint"}):(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.addPage.messageSprints",defaultMessage:"Add this sprint"});return(0,G.jsx)(ne,{ariaLabel:R().Z.formatMessage(n),onClick:o,style:{borderRadius:3},icon:t?u().g:y().R,tooltipMessage:i})}({isSelected:d,onActionButtonClick:s}):void 0,x=k?function(e){const{rowType:t,isSelected:o,onClick:n}=e,i="section"===t&&o?z.sprintIsSelectedSecondaryButtonAriaLabel:z.sprintIsNotSelectedSecondaryButtonAriaLabel,r="section"===t&&o?(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):(0,G.jsx)(h()._H,{id:"database.relationMenuRow.tooltip.insertPage.messageSprints",defaultMessage:"Move to a different sprint"});return(0,G.jsx)(ne,{ariaLabel:R().Z.formatMessage(i),onClick:n,style:{borderRadius:0},icon:y().R,tooltipMessage:r})}({rowType:o,isSelected:d,onClick:g}):void 0,M=S&&void 0!==l?(0,G.jsx)(ue,{peekMode:p,showPrimaryButton:void 0!==C,showSecondaryButton:void 0!==x,onOpenPageButtonClick:l}):void 0;return(0,G.jsx)(ce,{primaryButton:C,secondaryButton:x,openPageButton:M})}({device:E,rowType:o,focused:n,disabled:r,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:p,onActionButtonClick:g,propertyLimit:S,peekMode:j,onClick:()=>null==c?void 0:c(T.current)});return(0,G.jsxs)(G.Fragment,{children:[t&&"popup"===o&&(0,G.jsx)(_().Z,{iconSize:12,style:H.dragHandle}),E.isPhone?(0,G.jsx)(te,{relatedPageStore:m,rowType:o,pageStore:k,relationPropertySchema:C,canEditTitle:A,shouldShowOverflow:!0,noUnderline:!0,relationTokenBlockStoreRef:L,onInsertInline:x,onTitleEsc:M,index:w}):(0,G.jsx)(ee,{collectionStore:B,property:I,relatedPageStore:m,targetCollectionStore:P,blockPropertyValueOverlayStore:v,rowType:o,pageStore:k,relationPropertySchema:C,index:w,onInsertInline:x,onTitleEsc:M,canEditTitle:A,shouldShowOverflow:!0,noUnderline:!0,disabled:r,relationTokenBlockStoreRef:L}),d&&"popup"===o&&(0,G.jsx)("div",{style:H.iconWrapper,children:(0,f().k)(H.icon)}),O]})}function q(e){const{rowContainer:t,disabled:o,locked:n,canDrag:r,rowType:s,targetCollectionStore:d,propertyLimit:c,hasMouseEntered:u,outerRef:p,handleMouseEnter:g,handleMouseLeave:S,onInsertInline:f}=e,b=(0,i().Fy)(),m=(0,l().yK)((e=>({menuItem:{display:"flex",alignItems:"center",width:`calc(100% + ${Y}px)`,paddingLeft:Y,position:"relative",left:-Y},tooltip:{color:e.mediumInvertedTextColor},icon:{width:16,height:16,fill:e.lightIconColor},iconHover:{borderRadius:4},iconButton:{marginLeft:r?-44:-22,position:"absolute",marginRight:4}})),[r]),k=(0,a().VK)((()=>d.canEdit()),[d]),C=!n&&!o&&"section"===s&&!b.isMobile&&!(1===c)&&k;return(0,G.jsxs)("div",{style:m.menuItem,onMouseEnter:g,onMouseLeave:S,ref:p,children:[u&&C&&(0,G.jsx)(N().Z,{renderTooltip:()=>(0,G.jsx)(h()._H,{defaultMessage:"Click <medium>to insert a page below</medium>",id:"database.relationMenuRow.tooltip.floatingAddPageButton.message",values:{medium:e=>(0,G.jsx)("span",{style:m.tooltip,children:e})}}),render:e=>(0,G.jsx)(U().Z,{hasBackground:!1,ariaLabel:R().Z.formatMessage(z.floatingInsertButtonAriaLabel),icon:y().R,iconStyle:m.icon,onClick:f,hoveredStyle:m.iconHover,style:m.iconButton,...e})}),t]})}function ee(e){const{relatedPageStore:t,targetCollectionStore:o,blockPropertyValueOverlayStore:r,rowType:s,pageStore:d,index:c,onInsertInline:u,onTitleEsc:p,canEditTitle:g,shouldShowOverflow:y,noUnderline:S,collectionStore:f,property:h,relationPropertySchema:m,disabled:C,relationTokenBlockStoreRef:x}=e,M=(0,i().Fy)(),w=(0,a().VK)((()=>{const e=o.getSchema();return e?f?I().U1({collectionStore:f,property:h}).filter((t=>t.visible&&("title"===t.property||e[t.property]))):[{property:"title",visible:!0}]:[]}),[o,f,h]),v=(0,a().VK)((()=>"section"!==s||(C||!t.canEdit()||M.isMobile)),[s,C,t,M.isMobile]),B=(0,l().yK)((e=>({wrapper:{display:"flex",marginRight:8,maxHeight:22,alignItems:"center",...k().Yu}})),[]);if(b().xb(w))return null;const R=w.map((e=>"title"===e.property?(0,G.jsx)(n.Fragment,{children:(0,G.jsx)(te,{relatedPageStore:t,relationPropertySchema:m,rowType:s,pageStore:d,canEditTitle:g,shouldShowOverflow:y,noUnderline:S,relationTokenBlockStoreRef:x,onInsertInline:u,onTitleEsc:p,index:c})},"title"):(0,G.jsx)(H().m,{store:t,property:e.property,disabled:v,locked:!1,format:"section"===s?O().C.RelationSection:O().C.Relation,tableWrap:!1,blockPropertyValueOverlayStore:r??j().Z,collectionStore:o},e.property)));return(0,G.jsx)("div",{style:B.wrapper,children:R})}function te(e){const{relatedPageStore:t,rowType:o,pageStore:n,relationPropertySchema:r,canEditTitle:a,shouldShowOverflow:s,noUnderline:d,relationTokenBlockStoreRef:u,onInsertInline:p,onTitleEsc:g,index:y}=e,S=(0,i().Fy)(),f=(0,l().yK)((e=>({wrapper:{display:"flex",alignItems:"center",flex:"0 1 auto",minHeight:0,...!s&&{minWidth:40},paddingLeft:"section"===o?4:6},relationToken:{display:"flex",alignItems:"center",margin:0,whiteSpace:"nowrap",marginRight:"section"===o?0:S.isTablet?8:0,minWidth:0},title:{...k().Yu,maxWidth:"100%"}})),[o,s,S.isTablet]);return(0,G.jsx)("div",{style:f.wrapper,children:(0,G.jsx)(W().Z,{ref:u,format:c().lo.Inline,blockId:t.id,isSingle:!0,parentStore:n,relationPropertySchema:r,noUnderline:d,style:f.relationToken,titleStyle:f.title,clickTitleBehavior:a?"edit":void 0,onTitleEnter:p,onTitleEsc:g,index:y},t.id)})}function oe(e){const{innerRelationMenuRow:t,handleButtonClick:o,canDrag:n,rowType:r,focused:a,disabled:s,limitReached:d,propertyLimit:c,hasMouseEntered:u,sectionOnClick:p,outerRef:y,onSecondaryButtonClick:S,onMouseEnter:f,onMouseLeave:b}=e,m=(0,i().O7)(),k=(0,l().yK)((e=>({container:{display:"flex",alignItems:"center",width:"100%"},tooltip:{color:e.mediumInvertedTextColor},icon:{width:14,height:14,fill:e.lightIconColor},iconHover:{borderRadius:4},iconButton:{cursor:"grab",width:K().C+4,marginLeft:-(K().C+4),height:24,borderRadius:4},row:le(r,e,a,d,c)})),[r,a,d,c]);return(0,G.jsxs)("div",{style:k.container,ref:y,children:["section"===r&&u&&n&&(0,G.jsx)(N().Z,{renderTooltip:()=>(0,G.jsx)(h()._H,{defaultMessage:"Drag <medium>to move</medium>",id:"database.relationMenuRow..dragPrompt.text",values:{medium:e=>(0,G.jsx)("span",{style:k.tooltip,children:e})}}),render:e=>(0,G.jsx)(U().Z,{hasBackground:!1,ariaLabel:R().Z.formatMessage(z.dragRowHandleAriaLabel),icon:g().D,iconStyle:k.icon,hoveredStyle:k.iconHover,style:k.iconButton,...e})}),"section"===r?(0,G.jsx)("div",{style:k.row,onContextMenu:e=>se(e,m),onMouseEnter:f,onMouseLeave:b,onClick:p,role:"button","aria-label":"Editable title","aria-disabled":s,tabIndex:s?-1:0,children:t}):(0,G.jsx)(N().Z,{disableTooltip:!(d&&c&&c>1),renderTooltip:()=>(0,G.jsx)(h()._H,{defaultMessage:"To select more, remove selection above",id:"database.relationMenuRow.limitReached"}),render:e=>(0,G.jsx)("div",{style:k.row,onContextMenu:e=>se(e,m),onMouseEnter:f,onMouseLeave:b,role:"button",tabIndex:s?-1:0,"aria-disabled":s,onClick:e=>{(0,B().ZP)({event:e,context:B().Af.EditorClick,callback:()=>{(0,P().uG)(e)||(S?S(y.current):o(e))}})},...e,children:t})})]})}function ne(e){const{caption:t,onClick:o,style:n,icon:i,tooltipMessage:r,ariaLabel:a}=e;return(0,G.jsx)(N().Z,{renderTooltip:()=>r,disableTooltip:(0,m().Rw)(r),render:e=>(0,G.jsx)(U().Z,{hasBackground:!1,ariaLabel:a,icon:i,onClick:o,caption:t,hoveredStyle:{borderRadius:4},style:{height:20,width:20,flex:"0 0 auto",...n},...e})})}function ie(e){let{onActionButtonClick:t}=e;return(0,G.jsx)(Z().Z,{mobileFeedback:!0,onClick:t,style:{padding:12,marginRight:-12},children:(0,p().U)({width:20,height:20})})}function re(e){const{rowType:t,relatedPageStore:o,pageStore:i,onInsertInline:r,onTitleEsc:a,index:s,disabled:d,isSelected:c,propertySchema:u,...p}=e,g=n.useRef(null),y=(0,l().yK)((e=>({container:{display:"flex",alignItems:"center"},iconWrapper:{display:"flex",alignItems:"center",marginLeft:"auto",height:24,padding:0},titleWrapper:{flex:1,overflow:"hidden",paddingRight:16},membersIcon:{width:16,height:16,fill:e.mediumIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"}})),[]),f=!d&&c,h=!d&&!c;return(0,G.jsx)(D().ZP,{...p,title:(0,G.jsxs)("div",{style:y.container,children:[(0,G.jsx)("div",{style:y.titleWrapper,children:(0,G.jsx)(te,{relatedPageStore:o,relationPropertySchema:u,rowType:t,pageStore:i,canEditTitle:!1,shouldShowOverflow:!0,noUnderline:!0,relationTokenBlockStoreRef:g,onInsertInline:r,onTitleEsc:a,index:s})}),f&&(0,G.jsx)(ie,{onActionButtonClick:t=>{e.onActionButtonClick(t),t.stopPropagation()}}),h&&(0,G.jsx)("div",{style:y.iconWrapper,children:(0,S().x)(y.membersIcon)})]})})}function ae(e){const t=!e.disabled&&e.isSelected;return(0,G.jsx)(F().Z,{...e,store:e.relatedPageStore,hidePath:!0,right:t?(0,G.jsx)(ie,{onActionButtonClick:e.onActionButtonClick}):void 0})}function le(e,t,o,n,i){const r=n&&i&&i>1;return{...k().Yu,display:"flex",alignItems:"center",position:"relative",borderRadius:4,width:"100%",height:I().Mu,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:"popup"!==e?2:0,fontSize:V().z6,margin:"popup"===e?"0px 4px":0,cursor:r?"default":"pointer",background:o&&!r?t.buttonHoveredBackground:void 0,userSelect:"none",opacity:r?.4:1}}function se(e,t){const{device:o}=t;o.isAndroid&&o.isPhone&&e.preventDefault()}const de={position:"absolute",top:4,display:"inline-flex",flexShrink:0,borderRadius:4,overflow:"hidden",padding:2,gap:1};function ce(e){const{primaryButton:t,secondaryButton:o,openPageButton:n}=e,i=(0,l().yK)((e=>({relationButtonWrapperStyle:{right:6,background:e.popoverBackground,boxShadow:e.shadowSM,...de}})),[]);return(0,G.jsxs)(G.Fragment,{children:[(t||o)&&(0,G.jsxs)("div",{style:i.relationButtonWrapperStyle,children:[t,o]}),n]})}function ue(e){const t=(0,l().yK)((t=>({relationButtonWrapperStyle:{position:"absolute",right:e.showPrimaryButton||e.showSecondaryButton?36:6,background:t.popoverBackground,boxShadow:t.shadowSM,...de}})),[e.showPrimaryButton,e.showSecondaryButton]);return(0,G.jsx)("div",{style:t.relationButtonWrapperStyle,children:(0,G.jsx)(A().Z,{...e})})}function pe(e,t,o,n,i,r,a,l,d){(0,B().ZP)({event:e,context:B().Af.EditorClick,callback:()=>{if(!(0,P().uG)(e))if(i||l){const i=v().DJ(e),a=o===n.id?E().default.state.resultsStore:void 0,l=o===n.id?E().default.state.collectionContextStore:void 0;x().CH({environment:t,store:r,peekMode:d,openInNew:i,resultsStore:a,collectionContextStore:l,pageVisitSource:s().tY.PeekOpen}),C().XX(t,{from:"relation_section",meta_click:Boolean(i)})}else a(e)}})}},330404:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("openAsPageThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.16895 7.19629C2.59277 7.19629 2.90723 6.88867 2.90723 6.45801V5.96582L2.75684 3.81934L4.35645 5.50098L6.3252 7.4834C6.46875 7.63379 6.65332 7.70215 6.85156 7.70215C7.30957 7.70215 7.6377 7.39453 7.6377 6.93652C7.6377 6.72461 7.55566 6.54004 7.41211 6.39648L5.43652 4.4209L3.74805 2.82129L5.91504 2.96484H6.44141C6.86523 2.96484 7.18652 2.65723 7.18652 2.22656C7.18652 1.7959 6.87207 1.48145 6.44141 1.48145L2.64746 1.48145C1.86816 1.48145 1.41699 1.93262 1.41699 2.71875L1.41699 6.45801C1.41699 6.88184 1.73828 7.19629 2.16895 7.19629ZM9.55176 14.6543H13.3389C14.125 14.6543 14.5762 14.2031 14.5762 13.417V9.67773C14.5762 9.25391 14.2549 8.93945 13.8242 8.93945C13.4004 8.93945 13.0859 9.24707 13.0859 9.67773V10.1699L13.2295 12.3164L11.6299 10.6348L9.66113 8.65234C9.52441 8.50195 9.33984 8.43359 9.1416 8.43359C8.68359 8.43359 8.35547 8.74121 8.35547 9.19922C8.35547 9.41113 8.43066 9.5957 8.57422 9.73926L10.5566 11.7148L12.2383 13.3145L10.0781 13.1709H9.55176C9.12793 13.1709 8.80664 13.4785 8.80664 13.9092C8.80664 14.3398 9.12109 14.6543 9.55176 14.6543Z"})})},483269:(e,t,o)=>{o.d(t,{Q:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("peekModeCenter",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.1416 14.4492H13.8516C15.3281 14.4492 16.0938 13.6904 16.0938 12.2344V3.9082C16.0938 2.45215 15.3281 1.69336 13.8516 1.69336H2.1416C0.665039 1.69336 -0.100586 2.44531 -0.100586 3.9082V12.2344C-0.100586 13.6904 0.665039 14.4492 2.1416 14.4492ZM2.22363 13.1094C1.58789 13.1094 1.23926 12.7812 1.23926 12.1182V4.02441C1.23926 3.36133 1.58789 3.02637 2.22363 3.02637H13.7695C14.3984 3.02637 14.7539 3.36133 14.7539 4.02441V12.1182C14.7539 12.7812 14.3984 13.1094 13.7695 13.1094H2.22363ZM4.33594 11.0654H11.6504C12.0742 11.0654 12.2588 10.8809 12.2588 10.4502V5.69238C12.2588 5.25488 12.0742 5.07715 11.6504 5.07715H4.33594C3.91211 5.07715 3.72754 5.25488 3.72754 5.69238V10.4502C3.72754 10.8809 3.91211 11.0654 4.33594 11.0654Z"})})},695296:(e,t,o)=>{o.d(t,{y:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("peekModeSide",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.1416 14.4492H13.8516C15.3281 14.4492 16.0938 13.6904 16.0938 12.2344V3.9082C16.0938 2.45215 15.3281 1.69336 13.8516 1.69336H2.1416C0.665039 1.69336 -0.100586 2.44531 -0.100586 3.9082V12.2344C-0.100586 13.6904 0.665039 14.4492 2.1416 14.4492ZM2.22363 13.1094C1.58789 13.1094 1.23926 12.7812 1.23926 12.1182V4.02441C1.23926 3.36133 1.58789 3.02637 2.22363 3.02637H13.7695C14.3984 3.02637 14.7539 3.36133 14.7539 4.02441V12.1182C14.7539 12.7812 14.3984 13.1094 13.7695 13.1094H2.22363ZM8.51953 12.1113H13.2158C13.5986 12.1113 13.7559 11.9541 13.7559 11.5645V4.57812C13.7559 4.18848 13.5986 4.02441 13.2158 4.02441H8.51953C8.13672 4.02441 7.98633 4.18848 7.98633 4.57812V11.5645C7.98633 11.9541 8.13672 12.1113 8.51953 12.1113Z"})})},882888:(e,t,o)=>{o.d(t,{x:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("settingsMembersFilled",{viewBox:"0 0 20 13",svg:(0,n.jsx)("path",{d:"M13.582 6.00293C15.0723 6.00293 16.3369 4.67676 16.3369 2.96094C16.3369 1.28613 15.0654 0.0078125 13.582 0.0078125C12.0986 0.0078125 10.8203 1.30664 10.8271 2.97461C10.8271 4.67676 12.0918 6.00293 13.582 6.00293ZM5.67969 6.16016C6.97852 6.16016 8.0791 4.99805 8.0791 3.50781C8.0791 2.04492 6.97168 0.9375 5.67969 0.9375C4.3877 0.9375 3.27344 2.06543 3.28027 3.52148C3.28027 4.99805 4.38086 6.16016 5.67969 6.16016ZM1.91309 12.3604H7.0332C6.30859 11.3145 7.1084 9.25 8.64648 8.04688C7.89453 7.55469 6.91016 7.19922 5.67969 7.19922C2.62402 7.19922 0.648438 9.44824 0.648438 11.3076C0.648438 11.9775 0.990234 12.3604 1.91309 12.3604ZM9.31641 12.3604H17.8408C18.9619 12.3604 19.3516 12.0186 19.3516 11.3965C19.3516 9.63281 17.123 7.21289 13.5752 7.21289C10.0342 7.21289 7.80566 9.63281 7.80566 11.3965C7.80566 12.0186 8.19531 12.3604 9.31641 12.3604Z"})})}}]);