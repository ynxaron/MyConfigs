"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[80730],{998484:(e,t,o)=>{o.d(t,{w1:()=>M,XP:()=>P,y2:()=>F,Np:()=>L,bA:()=>B,ZV:()=>Z,T_:()=>V,LH:()=>A,h7:()=>R,B3:()=>_});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(241792);var a=()=>o(926724),s=()=>o(799891),n=()=>o(956057),r=()=>o(54193),i=()=>o(81954),l=()=>o(513670),c=()=>o(696459),d=()=>o(916673);const p=(0,o(830742).LS)("parallelAsanaImport");var u=()=>o(110232),m=()=>o(205228),g=()=>o(544903),f=()=>o(848643),h=()=>o(876822),y=()=>o(199114),x=()=>o(623521),I=()=>o(286310),j=()=>o(824462),v=()=>o(308186),S=()=>o(231077),w=()=>o(782646),k=()=>o(684715),T=()=>o(402269),b=()=>o(269299);const C=(0,o(788860).vU)({authenticatingWithAsana:{id:"asanaActions.authenticatingWithAsana.loadingMessage",defaultMessage:"Authenticating with Asanaâ€¦"},titleMessage:{id:"asanaActions.loginWithAsanaPopupModal.title",defaultMessage:"Asana login"}});async function M(e){const{environment:t,flowId:o}=e;await j().callApi({eventName:"disconnectAsana",environment:t,data:{}});const a=(0,f().eC)(t);let s=(0,r().s1)(m().default.domainBaseUrl,{authType:a,userId:t.currentUser.id});if(s=a.redirectToAuth?s:await(0,f().HU)(t,s),t.device.isElectron)return y().default.setState({...y().default.state,isAccountLinkingInProgress:!0}),void S().openExternalUrl(s);const n=await T().M(t,{width:580,height:800,url:s,titleMessage:C.titleMessage});if(!n)return;const i=d().Qc(n);if(!i.query.code||!i.query.state)return;y().default.setState({...y().default.state,isAccountLinkingInProgress:!0});const l=await j().callApi({eventName:"authWithAsana",environment:t,data:{code:i.query.code,encryptedState:i.query.state}}),c=await j().callApi({eventName:"getAsanaWorkspacesNames",environment:t,data:{}});if("failed"===l.type)I().a1(t,{import_source:"asana",data:{import_type:"api",status:"failure",error:l.error},flowId:o}),console.error(l.error),v().x2(l);else if(I().a1(t,{import_source:"asana",data:{import_type:"api",status:"success"},flowId:o}),"success"===c.type){const{data:{account:e,workspaces:t}}=c;y().default.setState({...y().default.state,isAccountLinkingInProgress:!1,account:e,workspaces:t,currentTab:"selectData",isModalOpen:!0})}}async function P(e){const{environment:t}=e;y().default.setState({...y().default.state,isAccountDelinkingInProgress:!0});const o=await j().callApi({eventName:"disconnectAsana",environment:t,data:{}});"failed"===o.type?(console.error(o.error),v().x2(o)):(I().qJ(t,{integration_name:"asana"}),"success"===o.type&&y().default.setState({...y().default.state,isAccountDelinkingInProgress:!1,account:void 0,workspaces:[]}))}async function F(e){const{selectedWorkspace:t,environment:o,forceReload:a=!0}=e;if(a||!y().default.state.teamsAndProjects.length){y().default.setState({...y().default.state,isLoadingProjects:!0});const e=await j().callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:t,size:5}});"success"===e.type&&y().default.setState({...y().default.state,teamsAndProjects:e.data,isLoadingProjects:!1})}}async function A(e){const{team:t,environment:o}=e,a=y().default.getState(),{selectedWorkspace:s,teamsAndProjects:n,loadMoreClicks:r}=a;if(!s)return;const i=await j().callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:s,teamId:t.gid,size:5,nextPage:t.nextPage}}),l=n.findIndex((e=>e.gid===t.gid));if(-1!==l){if("success"===i.type){const e=i.data.find((e=>e.gid===t.gid));if(!e)return;const o={...n[l],projects:[...n[l].projects,...e.projects],nextPage:e.nextPage},s=n.slice(0,l).concat(o,n.slice(l+1));y().default.setState({...a,teamsAndProjects:s,loadMoreClicks:r+1})}return i}}async function Z(e,t){const o=[];for(const s of Object.keys(t)){const{notionTeamspaceId:e,projects:a}=t[s];!(0,l().HD)(a)&&(0,c().$K)(e)&&o.push({asanaTeamId:s,projectIds:a,notionTeamSpaceId:e})}const a=await j().callApi({eventName:"getAsanaTaskProperties",environment:e,data:o});if("success"===a.type){const{selectedTeamspacesAndProperties:e}=y().default.state;for(const{notionTeamSpaceId:t,properties:o}of a.data.data)o&&(e[t]={selectionMode:"all",properties:o.map((e=>({...e,isSelected:!0})))});y().default.setState({...y().default.state,selectedTeamspacesAndProperties:e})}}async function B(e){let{environment:t}=e;y().default.setState({...y().default.state,isLoadingAsanaWorkspaces:!0});const o=await j().callApi({eventName:"getAsanaWorkspacesNames",environment:t,data:{}});var a;"success"===o.type&&y().default.setState({...y().default.state,account:o.data.account,workspaces:o.data.workspaces,selectedWorkspace:null===(a=o.data)||void 0===a||null===(a=a.workspaces[0])||void 0===a?void 0:a.gid,isLoadingAsanaWorkspaces:!1})}async function V(e){let{environment:t,spaceStore:o,currentSpaceViewStore:r,teamsStores:l,flowId:c,navigateBeforeTemplateCreation:d}=e;const{appTemplatesSetupActions:m,appConfigs:f}=await g().vF.load(),j=y().default.state.selectedWorkspace;if(!j)return;y().default.setState({...y().default.state,...d&&{currentTab:"importingData"},templateCreationInProgress:!0});const v={},S={};try{for(const e in y().default.state.selectedProjectsAndTeamspaces){if(0===y().default.state.selectedProjectsAndTeamspaces[e].projects.length)continue;let s;const n=y().default.state.selectedProjectsAndTeamspaces[e],{notionTeamspaceId:i}=n;if(!i)continue;const c=l.find((e=>e.id===n.notionTeamspaceId));if(s=c||o,S[i])v[e]=S[i];else{const{serverCommitResult:o,performResult:n}=b().createAndCommit({environment:t,perform:e=>{const o={type:"preset",uri:a().T3};if("preset"!==o.type||o.uri.startsWith("notion://wiki"));else{var n;const a=o.uri,i=null===(n=(0,u().iX)(f(),a))||void 0===n?void 0:n.uri;if(!i)return;const l=f().find((e=>e.uri===i));if(null==l?void 0:l.presets.find((e=>e.uri===a))){const o=m.initializeApp({environment:t,spaceViewStore:r,appParentStore:s,appUri:i,presetUri:a,transaction:e,from:"asana_import"});if(2!==(null==o?void 0:o.length))return;return o}}},canUndo:!0,userAction:"importActions.importAsana"});v[e]=n,S[i]=n,await o}}}catch(_){return void y().default.setState({...y().default.state,templateCreationInProgress:!1,currentTab:"failure"})}const T=[],C=h().default.state.currentSpaceViewStore;if(!C)return;const M=k().Ym({environment:t,spaceStore:o,spaceViewStore:C,append:!0});await M.deferred.promise;const P=M.pageId;y().default.setState({...y().default.state,loggerPageId:P});const F=new Set,A=[],Z=[];for(const a in v){const e=y().default.state.selectedProjectsAndTeamspaces[a],t=v[a];if(!(t&&e.notionTeamspaceId&&e.projects.length))continue;const s="string"==typeof e.projects?[]:e.projects;A.push(...s);const n=y().default.state.selectedTeamspacesAndProperties[e.notionTeamspaceId];n&&(n.useSectionAsStatus=y().default.state.useSectionAsStatus),F.add(e.notionTeamspaceId),Z.push(a),T.push({collectionViewBlocks:[{id:t[0].id,spaceId:(0,i().J)(o.id)},{id:t[1].id,spaceId:(0,i().J)(o.id)}],projectIds:s,asanaTeamId:a,notionTeamSpaceId:e.notionTeamspaceId,propertySelection:n,importAllProjects:"all"===e.projects,importOnlyIncompleteProjects:"in_complete"===e.projects})}I().G7(t,{integration_name:"asana"});const B=(0,w().Lj)(t,p,{importParams:T,spaceId:(0,i().J)(o.id),asanaWorkspaceId:j,importCompletedTasks:y().default.state.importCompletedTasks,loggerPageId:P,flowId:c||n().Il()});y().default.setState({...y().default.state,templateCreationInProgress:!1,currentTab:"importingData",choosingWorkspacesCompleted:!0}),x().Z.reset();const V=y().default.state.workspaces.find((e=>e.gid===j));V&&function(e,t,o){try{I().qy(e,{import_source:"asana",data:t,flowId:o})}catch(a){s().log({level:"error",from:"asanaV2Actions",type:"parallelAsanaImport",error:{miscDataString:JSON.stringify({error:a,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceName:V.name,teams:Z,projects:A,numberOfTeamspacesUsed:F.size,completedTasks:y().default.state.importCompletedTasks,userId:t.currentUser.id,spaceId:(0,i().J)(o.id)},c);for await(const a of B){if(!y().default.state.isModalOpen)break;if(a.error)return void y().default.setState({...y().default.state,currentTab:"failure"});"success"===a.taskStatus&&y().default.setState({...y().default.state,currentTab:"confirm",result:a.value.status,isComplete:!0})}}function _(e){var t;let{teamId:o,spaceId:a}=e;y().default.setState({...y().default.state,selectedProjectsAndTeamspaces:{...y().default.state.selectedProjectsAndTeamspaces,[o]:{projects:(null===(t=y().default.state.selectedProjectsAndTeamspaces[o])||void 0===t?void 0:t.projects)||[],notionTeamspaceId:a||void 0}}})}function L(){y().default.setState({...y().default.state,currentTab:"selectProperties"})}function R(){y().default.setState({...y().default.state,isModalOpen:!0})}},481476:(e,t,o)=>{o.d(t,{C:()=>l,DP:()=>p,LN:()=>i,Lm:()=>d,Ow:()=>c,YX:()=>u});var a=()=>o(286310),s=()=>o(308939),n=()=>o(824462),r=()=>o(158792);async function i(e,t){const o=await n().callApi({eventName:"getConnectedAppsStatus",environment:e,data:{spaceId:t}});if("failed"===o.type){const e=o.error;return console.error(e),{drive:[],evernote:void 0,trello:void 0,asana:void 0,confluence:void 0}}return o.data}async function l(e,t){await n().callApi({eventName:"disconnectTrello",environment:e,data:{}}),await t.refresh(),a().qJ(e,{integration_name:"trello"})}async function c(e,t){await n().callApi({eventName:"disconnectAsana",environment:e,data:{}}),await t.refresh(),a().qJ(e,{integration_name:"asana"})}async function d(e,t){await n().callApi({eventName:"disconnectEvernote",environment:e,data:{}}),await t.refresh(),a().qJ(e,{integration_name:"evernote"})}async function p(e,t,o){await n().callApi({eventName:"disconnectConfluence",environment:e,data:{spaceId:o}}),await t.refresh(),a().qJ(e,{integration_name:"confluence"})}async function u(e){const{environment:t,requestStore:o,botId:n}=e;await r().P0({environment:t,botId:n,onSuccess:()=>async function(e){const{environment:t,requestStore:o}=e;await o.refresh();const n=s().ZP.getInitialState();s().ZP.setState(n),a().qJ(t,{integration_name:"jira"})}({environment:t,requestStore:o})})}},585558:(e,t,o)=>{o.d(t,{B:()=>I,e:()=>x});var a=()=>o(54193),s=()=>o(916673),n=()=>o(286310),r=()=>o(308186),i=()=>o(205228),l=()=>o(848643),c=()=>o(451378),d=()=>o(145607),p=()=>o(623521),u=()=>o(838266),m=()=>o(824462),g=()=>o(231077),f=()=>o(528918),h=()=>o(402269);const y=(0,o(788860).vU)({authenticatingWithEvernote:{id:"evernoteActions.authenticatingWithEvernote.loadingMessage",defaultMessage:"Authenticating with Evernoteâ€¦"},titleMessage:{defaultMessage:"Evernote login",id:"evernoteActions.loginPopupModal.title"}});async function x(e){const{environment:t,requestStore:o}=e,x=(0,l().eC)(t);let j=(0,a().Qp)(i().default.domainBaseUrl,{authType:x,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(j=x.redirectToAuth?j:await(0,l().HU)(t,j),t.device.isElectron)return f().j({message:y.authenticatingWithEvernote}),c().Z.setState({...c().Z.state,linkingAccount:!0,showLoader:!0}),void g().openExternalUrl(j);const v=await h().M(t,{width:580,height:700,url:j,titleMessage:y.titleMessage});if(!v)return;const S=s().Qc(v),w=S.query.oauth_token,k=S.query.oauth_verifier;if(!w||!k)return;f().j({message:y.authenticatingWithEvernote});const T=await m().callApi({eventName:"authWithEvernote",environment:t,data:{requestToken:w,verifier:k}}),b=p().Z.getOrCreateFlowId();if("failed"===T.type)return n().a1(t,{import_source:"evernote",data:{import_type:"api",status:"failure",error:T.error,userId:t.currentUser.id},flowId:b}),console.error(T.error),r().x2(T),void f().x();n().a1(t,{import_source:"evernote",data:{import_type:"api",status:"success",userId:t.currentUser.id},flowId:b}),n().L3(t,{integration_name:"evernote"}),await o.refresh(),d().Z.setState({open:!0}),u().default.setState({...u().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await I({environment:t,requestStore:o}),f().x()}async function I(e){const{environment:t,requestStore:o}=e;try{c().Z.setState({...c().Z.state,isFetchingNotebooks:!0,showLoader:!0});const e=await m().callApi({eventName:"getEvernoteNotebooks",environment:t,data:{}});if(await o.refresh(),"success"===e.type){c().Z.setState({...c().Z.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1});const{userInfo:t,notebooks:o}=e.data;return{userInfo:t,notebooks:o}}return console.error(e.error),{notebooks:[],userInfo:void 0}}catch(a){return console.error(a),{notebooks:[],userInfo:void 0}}}},684715:(e,t,o)=>{o.d(t,{Ym:()=>re,A1:()=>ce,am:()=>le,ro:()=>ae,xG:()=>ne,su:()=>ie,Pv:()=>oe});o(821057),o(670560),o(267602),o(653476),o(30005),o(241792);var a=()=>o(146947),s=()=>o(506347),n=()=>o(156642),r=()=>o(646574),i=()=>o(799891),l=()=>o(998411),c=()=>o(431595),d=()=>o(956057),p=()=>o(840156),u=()=>o(996106),m=()=>o(396136),g=()=>o(81954),f=()=>o(720866),h=()=>o(513670),y=()=>o(792409),x=()=>o(839002),I=()=>o(971095),j=()=>o(576441),v=()=>o(830742);const S=(0,v().LS)("importGoogleDoc"),w=(0,v().LS)("importTrello"),k=(0,v().LS)("parallelImportConfluenceExport"),T=(0,v().LS)("parallelImportConfluenceViaApi"),b=(0,v().LS)("partitionedUniversalImport");var C=()=>o(497065),M=()=>o(594546),P=()=>o(726046),F=()=>o(443269),A=()=>o(849668),Z=()=>o(429725),B=()=>o(709344),V=()=>o(749826);const _=1073741824;var L=()=>o(527278),R=()=>o(505006),D=()=>o(185717),O=()=>o(145607),q=()=>o(479694),H=()=>o(482162),W=()=>o(826955),N=()=>o(838266),U=()=>o(286310),E=()=>o(824462),z=()=>o(308186),K=()=>o(782646),G=()=>o(282662),Y=()=>o(528918),$=()=>o(636340),Q=()=>o(145284),J=()=>o(269299),X=()=>o(109757);const ee=(0,o(788860).vU)({uploadingOneFile:{id:"importActions.uploadingOneFile.loadingMessage",defaultMessage:"Uploadingâ€¦ ({percentComplete}%)"},uploadingMultipleFilesNotStarted:{id:"importActions.uploadingMultipleFilesNotStarted.loadingMessage",defaultMessage:"Uploaded 0 of {totalNumberOfFiles}"},uploadingMultipleFilesInProgress:{id:"importActions.uploadingMultipleFilesInProgress.loadingMessage",defaultMessage:"Uploaded {numberOfUploadedFiles} of {totalNumberOfFiles}"},uploadingMultipleFilesComplete:{id:"importActions.uploadingMultipleFilesComplete.loadingMessage",defaultMessage:"Uploaded {totalNumberOfFiles} of {totalNumberOfFiles}"},importingOneFile:{id:"importActions.importingOneFile.loadingMessage",defaultMessage:"Importingâ€¦"},importingMultipleFilesNotStarted:{id:"importActions.importingMultipleFilesNotStarted.loadingMessage",defaultMessage:"Imported 0 of {totalNumberOfFiles}"},importingMultipleFilesInProgress:{id:"importActions.importingMultipleFilesInProgress.loadingMessage",defaultMessage:"Imported {numberOfImportedFiles} of {totalNumberOfFiles}"},importingMultipleFilesComplete:{id:"importActions.importingMultipleFilesComplete.loadingMessage",defaultMessage:"Imported {totalNumberOfFiles} of {totalNumberOfFiles}"},importingFromTrelloMessage:{id:"importActions.importingFromTrello.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} board from Trello} other {Importing {importingCount} boards from Trello}}"},importingFromAsanaMessage:{id:"importActions.importingFromAsana.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} project from Asana} other {Importing {importingCount} projects from Asana}}"},importingFromEvernoteMessage:{id:"importActions.importingFromEvernote.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} notebook from Evernote} other {Importing {importingCount} notebooks from Evernote}}"},importingFromConfluenceViaAPIMessage:{id:"importActions.importingFromConfluenceViaAPI.loadingMessage",defaultMessage:"Importing confluence space: {confluenceSpaceKey}."},importFailed:{id:"importActions.importFailedError.message",defaultMessage:"Import failed"},importFailedWithError:{id:"importActions.importFailedWithError.message",defaultMessage:"Import failed: {error}"},fileImportFailedSizeTooLarge:{id:"importActions.fileImportFailedError.sizeTooLarge.message",defaultMessage:"Import failed: file exceeds 5MB."},fileImportFailedCustomSizeTooLarge:{id:"importActions.fileImportFailedError.customSizeTooLarge.message",defaultMessage:"Import file cannot exceed {maxSize}."},trelloImportFailed:{id:"importActions.trelloImportFailedError.message",defaultMessage:"Trello import failed."},asanaImportFailed:{id:"importActions.asanaImportFailedError.message",defaultMessage:"Asana import failed."},evernoteImportFailed:{id:"importActions.evernoteImportFailedError.message",defaultMessage:"Evernote import failed."},confluenceImportViaAPIFailed:{id:"importActions.confluenceImportViaAPIFailedError.message",defaultMessage:"Confluence space import failed."},importTitle:{id:"importActions.importTitle",defaultMessage:"Import {date}"},importTitleWithImportName:{id:"importActions.importTitleWithImportName",defaultMessage:"{name}"},importTitleForGenericFileImporter:{id:"importActions.importTitleForGenericFileImporter",defaultMessage:"{fileName} Import {date}"},importTitleForMondayV2:{id:"importActions.importTitleForMondayV2",defaultMessage:"Import from Monday - {date}"},onlyDocxExtensionSupported:{id:"importErrors.onlyDocxExtensionSupported.message",defaultMessage:"Import failed: file type not supported."},csvImportFailedColumnsTooLarge:{id:"importActions.csvImportFailedColumnsTooLargeError.message",defaultMessage:"Import failed: CSV file has too many columns."},csvImportFailedRowsTooLarge:{id:"importActions.csvImportFailedRowsTooLargeError.message",defaultMessage:"Import failed: CSV file has too many rows."},xlsxImportFailedColumnsTooLarge:{id:"importActions.xlsxImportFailedColumnsTooLargeError.message",defaultMessage:"Import failed: XLSX file has too many columns."},xlsxImportFailedRowsTooLarge:{id:"importActions.xlsxImportFailedRowsTooLargeError.message",defaultMessage:"Import failed: XLSX file has too many rows."}}),te=1073741824;async function oe(e){const{uploadType:t,allowMultiple:o}=e;return ae(e,await X().y({multiple:o??!0,accept:p().by[t].join(",")}))}async function ae(e,t){const{environment:o,pageStore:a,spaceStore:n,isTeamPage:r,spaceViewStore:p,uploadType:g,flowId:h,analyticsFrom:x}=e;let I;try{if(0===t.length)return;const f=1===t.length,y=performance.now(),v={};if("confluence"===g){const a=(Number((0,P().$6)(o))||15)*te;if(t[0].size>a)throw U().a1(e.environment,{import_source:"confluence",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:t[0].size},flowId:h}),new(c().nY)("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:u().td(a,1)}}})}else if("genericImporter"===g){const a=(0,A().bk)(o)||15,s=a*te;if(t[0].size>s)throw U().a1(e.environment,{import_source:"file",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:t[0].size},flowId:h}),new(c().p8)("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:`${a} GB}`}}})}else if("pdf"===g){const o=Number(V().default.getEligibleGroup({experimentId:"special_case_pdf_file_size",defaultGroup:_.toString()})),a=o;for(const s of t)if(s.size>a)throw U().a1(e.environment,{import_source:"file",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:s.size},flowId:h}),new(c().p8)("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:`${o} GB}`}}})}const S=await new Promise(((e,a)=>{X().IL({environment:o,uploadType:g,files:t,bucket:"temporary",bypassFreeFileUploadLimitCheck:!0,flowId:h,spaceId:n.id,onBatchStart:()=>{Y().j({message:f?ee.uploadingOneFile:ee.uploadingMultipleFilesNotStarted,interpolatedValues:{totalNumberOfFiles:t.length,percentComplete:0}})},onBatchProgress:e=>{let{uploadedFiles:o,progressPercent:a}=e;Y().j({message:f?ee.uploadingOneFile:ee.uploadingMultipleFilesInProgress,interpolatedValues:{numberOfUploadedFiles:o,totalNumberOfFiles:t.length,percentComplete:a}})},onBatchCompleteWithToken:o=>{Y().j({message:f?ee.uploadingOneFile:ee.uploadingMultipleFilesComplete,interpolatedValues:{totalNumberOfFiles:t.length,percentComplete:100}}),e(o)},onBatchError:a})})),w=performance.now();v.uploadTimeTaken=w-y;const T="slash_command"===x&&!["gdocs","confluence","genericImporter"].includes(g),F=await se(o,n,p,g,(null==t?void 0:t.length)??0,null==t?void 0:t[0].name,a,r,T);I=F.createdPage;const B=F.importType,L=F.pageId,R=S.map(((e,o)=>({fileURL:e.fileUrl,fileName:t[o].name,signedToken:e.signedToken}))),D=V().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let O=0;Y().j({message:f?ee.importingOneFile:ee.importingMultipleFilesInProgress,interpolatedValues:{numberOfImportedFiles:O,totalNumberOfFiles:t.length}});const q=(0,l().r)();if(D&&("ReplaceBlock"===B||"AppendToBlock"===B)&&"csv"===g){const e=W().G.createChildStore(n,{table:m().iU,id:L}),t=(0,Z().ZP)({store:e,preferPublicLink:!1,pageVisitSource:s().tY.Import});C().navigateOnBaseUrl({environment:o,url:t})}for(const{fileURL:e,fileName:a,signedToken:s}of R){if("confluence"===g){U().a1(o,{import_source:"confluence",data:{import_type:"file",status:"success",fileSize:t[0].size},flowId:h});const r=re({environment:o,spaceStore:n,spaceViewStore:p});await r.deferred.promise;const i=r.pageId;U().G7(o,{integration_name:"confluence"});const l=K().Lj(o,k,{fileURL:e,fileName:a,page:{id:L,spaceId:n.id},loggerPageId:i,flowId:h||d().Il(),signedToken:s});for await(const e of l){if(e.error)throw e.error;e.value.isComplete||Y().j(e.value.status)}}else if("AppendToBlock"===B){const t={fileURL:e,fileName:a,importType:B,block:{id:L,spaceId:n.id},spaceId:n.id,flowId:h,userTimeZone:q,signedToken:s,importEntryPoint:x};U().qy(o,{import_source:"file",data:t,flowId:h});const r=V().default.checkGate({gateName:"partitioned_universal_importer"}),i={fileURL:e,fileName:a,importType:"ReplaceBlock",spaceId:n.id,rootId:L,userTimeZone:q,signedToken:s};U().G7(o,{integration_name:"genericImporter"===g?"universal":g});const l="genericImporter"===g&&r?K().Lj(o,b,i):K().Lj(o,j().E,t);let c=!1;for await(const e of l){if(e.error)throw e.error;D&&"csv"===g&&"status"in e.value&&"created_collection"===e.value.status.message&&!c&&(c=!0,Y().x(),N().default.reset(),v.importingSpinnerSpan||=performance.now()-w)}}else if("ReplaceBlock"===B){const t={fileURL:e,fileName:a,importType:B,block:{id:L,spaceId:n.id},flowId:h,spaceId:n.id,userTimeZone:q,signedToken:s,importEntryPoint:x};U().qy(o,{import_source:"file",data:t,flowId:h}),U().G7(o,{integration_name:"genericImporter"===g?"universal":"file"});const r=V().default.checkGate({gateName:"partitioned_universal_importer"}),i={fileURL:e,fileName:a,importType:"ReplaceBlock",spaceId:n.id,rootId:L,userTimeZone:q,signedToken:s},l="genericImporter"===g&&r?K().Lj(o,b,i):K().Lj(o,j().E,t);let c=!1;for await(const e of l){if(e.error)throw e.error;D&&"csv"===g&&"status"in e.value&&"created_collection"===e.value.status.message&&(c||(c=!0,Y().x(),N().default.reset(),v.importingSpinnerSpan||=performance.now()-w))}}O++,D&&"csv"===g||Y().j({message:f?ee.importingOneFile:ee.importingMultipleFilesInProgress,interpolatedValues:{numberOfImportedFiles:O,totalNumberOfFiles:t.length}})}return Y().x(),v.overallTimeTaken=performance.now()-y,function(e,t){const{uploadType:o,importType:a,importLatencies:s,fileNames:n}=t;if(("ReplaceBlock"===a||"AppendToBlock"===a)&&"csv"===o){const e=s.uploadTimeTaken,t=s.importingSpinnerSpan,o=t&&e?t+e:s.overallTimeTaken;s.firstTimeNavigateToCollection=o}i().log({level:"info",from:"importActions",type:"importFiles",data:{miscDataToConvertToString:{fileNames:n,importLatencies:s,uploadType:o,importType:a},message:"Finished importing file"}});for(const[r,i]of Object.entries(s))(0,M().j)({environment:e,event:{eventName:"import_file_finished",eventProperties:{importUploadType:o,importType:a,importLatency:i,importSource:"file",importLatencyType:r,importFileCount:n.length}}})}(o,{uploadType:g,importType:B,importLatencies:v,fileNames:t.map((e=>e.name))}),W().G.createChildStore(n,{table:m().iU,id:L})}catch(S){var v;let e;i().log({level:"error",from:"importFiles",type:"importFilesFailure",error:(0,y().Ui)(S),data:{spaceId:n.id}}),Y().x(),J().createAndCommit({userAction:"importActions.importFiles",environment:o,canUndo:!0,perform:e=>{I&&G().Od({parentStore:n.getPagesStore(),childToRemoveStore:I,transaction:e})}});let t=null,a=null;if(S instanceof c().hm&&S.clientData?(t=S.clientData,F().Em[S.clientData.type]&&"ImportFileSizeTooLargeError"===(0,f().t)(S).message?a=F().Em[S.clientData.type]:F().$5[S.clientData.type]&&"CsvImportError"===(0,f().t)(S).message?a=F().$5[S.clientData.type]:F().zP[S.clientData.type]?a=F().zP[S.clientData.type]:F().Uh[S.clientData.type]&&(a=F().Uh[S.clientData.type])):S instanceof c().nY&&"upload_file_size_exceeded"===(null===(v=S.body)||void 0===v||null===(v=v.clientData)||void 0===v?void 0:v.type)&&F().zP[S.body.clientData.type]?(t=S.body.clientData,a=F().zP[t.type]):S instanceof B().G&&(t={messageValues:{error:"You've reached the maximum number of file uploads for a 12-hour period. We suggest uploading a ZIP file that includes all your files."}},a=ee.importFailedWithError),t&&a){const o="messageValues"in t?t.messageValues:void 0;e=L().Z.formatMessage(a,o)}else e=t&&"code"in t&&("fileImportError"===t.code||"confluenceImportError"===t.code)?L().Z.formatMessage(ee.importFailedWithError,{error:(0,f().t)(S).message}):"ImportFileSizeTooLargeError"===(0,f().t)(S).message?L().Z.formatMessage(ee.fileImportFailedSizeTooLarge):"ImportcsvTooManyColumns"===(0,f().t)(S).message?L().Z.formatMessage(ee.csvImportFailedColumnsTooLarge):"ImportcsvTooManyRows"===(0,f().t)(S).message?L().Z.formatMessage(ee.csvImportFailedRowsTooLarge):"ImportxlsxTooManyColumns"===(0,f().t)(S).message?L().Z.formatMessage(ee.xlsxImportFailedColumnsTooLarge):"ImportxlsxTooManyRows"===(0,f().t)(S).message?L().Z.formatMessage(ee.xlsxImportFailedRowsTooLarge):L().Z.formatMessage(ee.importFailed);throw z().UW(e),S}}async function se(e,t,o,s,n,i,l,c,d){var p;let u,m,g;if(H().default.isSidePeekOpen()&&null!==(p=H().default.peekTargetStore.state)&&void 0!==p&&p.isEmptyPage())m=H().default.peekTargetStore.state.id,g="ReplaceBlock";else if(l&&(l.isEmptyPage()||d))n>1||l.isInsideCollection()||d?(m=l.id,g="AppendToBlock"):(m=l.id,g="ReplaceBlock");else{const l={date:(0,r().Yx)(Date.now(),"medium",a().locale)};"genericImporter"===s&&(l.fileName=i?i.replace(".zip",""):"Universal File");const{performResult:d}=J().createAndCommit({userAction:"importActions.result",environment:e,canUndo:!0,perform:a=>{const r=L().Z.formatMessage("genericImporter"===s?ee.importTitleForGenericFileImporter:ee.importTitle,l),i=Q().KE({environment:e,spaceStore:t,spaceViewStore:o,isPrivate:!c,prepend:!c,title:r,transaction:a}),d=n>1?"AppendToBlock":"ReplaceBlock",p=x().UZ();return a.postSubmitCallbacks.push((e=>{e?p.reject(e):p.resolve()})),{deferred:p,createdPage:i,pageId:i.id,importType:d}}});u=d.createdPage,m=d.pageId,g=d.importType,await d.deferred.promise}return{createdPage:u,pageId:m,importType:g}}async function ne(e){const{environment:t,fileId:o,token:a,spaceStore:s,spaceViewStore:n,pageStore:r,analyticsFrom:i}=e;let l;try{Y().j({message:ee.importingOneFile});const e="link_paste"===i||"slash_command"===i,c=await se(t,s,n,"gdocs",1,void 0,r,void 0,e);l=c.createdPage;const d=c.importType,p=c.pageId,u={fileId:o,tokenId:a.id,importType:d,block:{id:p,spaceId:s.id}};U().qy(t,{import_source:"gDocs",data:u}),U().G7(t,{integration_name:"gDocs"});const{value:g}=await K().Lj(t,S,u).next();if(g.error)throw g.error;return Y().x(),W().G.createChildStore(s,{table:m().iU,id:p})}catch(d){J().createAndCommit({userAction:"importActions.importFiles",environment:t,canUndo:!0,perform:e=>{l&&G().Od({parentStore:s.getPagesStore(),childToRemoveStore:l,transaction:e})}});let e=L().Z.formatMessage(ee.importFailed);throw d instanceof c().hm&&d.clientData&&("only_docx_extension_supported"===d.clientData.type?e=L().Z.formatMessage(ee.onlyDocxExtensionSupported):"file_size_exceeded"===d.clientData.type&&(e=L().Z.formatMessage(ee.fileImportFailedCustomSizeTooLarge,{maxSize:d.clientData.messageValues.maxSize}))),z().UW(e),Y().x(),new Error((0,f().t)(d).message)}}function re(e){const{environment:t,spaceStore:o,spaceViewStore:s,append:n,mondayV2:i}=e,{performResult:l}=J().createAndCommit({userAction:"importActions.result",environment:t,canUndo:!0,perform:e=>{const l=i?L().Z.formatMessage(ee.importTitleForMondayV2,{date:(0,r().Yx)(Date.now(),"medium",a().locale)}):L().Z.formatMessage(ee.importTitle,{date:(0,r().Yx)(Date.now(),"medium",a().locale)}),c=Q().KE({environment:t,spaceStore:o,spaceViewStore:s,isPrivate:!0,prepend:!n,title:i?l:`${l} Logs`,transaction:e}),d=x().UZ();return e.postSubmitCallbacks.push((e=>{e?d.reject(e):d.resolve()})),{deferred:d,pageId:c.id}}});return l}async function ie(e){const{environment:t,boards:o,spaceStore:a,spaceViewStore:s}=e;Y().j({message:ee.importingFromTrelloMessage,interpolatedValues:{importingCount:o.length}}),q().Z.setState({open:!1});const{performResult:{deferred:n,pages:r}}=J().createAndCommit({userAction:"importActions.importTrello",environment:t,canUndo:!0,perform:e=>{const n=o.map((o=>Q().KE({environment:t,spaceStore:a,spaceViewStore:s,isPrivate:!0,prepend:!0,loading:!0,title:o.name,transaction:e}))),r=x().UZ();return e.postSubmitCallbacks.push((e=>{e?r.reject(e):r.resolve()})),{deferred:r,pages:n}}});await n.promise;try{return await Promise.all(r.map((async(e,a)=>{const s=o[a],{value:n}=await K().Lj(t,w,{boardId:s.id,block:{id:e.id,spaceId:(0,g().J)(e.pointer.spaceId)}}).next();if(n.error)throw n.error}))),Y().x(),r[0]}catch(i){throw J().createAndCommit({userAction:"importActions.importTrello",environment:t,canUndo:!0,perform:e=>{for(const t of r)G().Od({parentStore:a.getPagesStore(),childToRemoveStore:t,transaction:e})}}),z().UW(L().Z.formatMessage(ee.trelloImportFailed)),Y().x(),new Error((0,f().t)(i).message)}}async function le(e){const{environment:t,spaceStore:o,spaceViewStore:a,notebooks:s,userSettingsStore:r}=e;if(0===s.length)throw new Error("Expected at least one notebook");Y().j({message:ee.importingFromEvernoteMessage,interpolatedValues:{importingCount:s.length}}),O().Z.setState({open:!1});const i=await async function(e){const{environment:t,spaceStore:o,spaceViewStore:a,notebooks:s}=e,{serverCommitResult:r,performResult:{blockStores:i}}=J().createAndCommit({userAction:"importActions.createStacks",environment:t,canUndo:!0,perform:e=>{const r=h().jj(h().oA(s.map((e=>e.stack)))).sort().reverse(),i={};let l=e=>!0;return s.length>1&&r.length>0&&(r.forEach((r=>{const l=Q().KE({environment:t,spaceStore:o,spaceViewStore:a,isPrivate:!0,prepend:!0,loading:!1,title:r,transaction:e}),c=l.getContentStore();s.filter((e=>e.stack===r)).forEach((o=>{const a=$().j4({environment:t,type:n().Ti.copyIndicator,inMemoryRecordCache:l.inMemoryRecordCache,transaction:e,spaceId:c.pointer.spaceId});G().R3({parentStore:c,appendStore:a,transaction:e}),i[o.guid]=a}))})),l=e=>!Boolean(e.stack)),s.filter(l).reverse().forEach((s=>{const n=Q().KE({environment:t,spaceStore:o,spaceViewStore:a,isPrivate:!0,prepend:!0,loading:!0,title:s.title,transaction:e});i[s.guid]=n})),{blockStores:i}}});return await r,i}({environment:t,spaceStore:o,spaceViewStore:a,notebooks:s}),l=i[s[0].guid];try{return await async function(e){const{environment:t,spaceStore:o,spaceViewStore:a,notebooks:s,waitForNotebookStore:n,notebookMapping:r,userSettingsStore:i}=e;let l;if(x().jl(s,de,(async e=>{await Promise.all(e.map((async e=>{const o=r[e.guid];if(!o)throw new Error(`Missing notebook page ${e.guid}`);const a=x().UZ();o===n&&(l=a),await async function(e){const{environment:t,notebookStore:o,notebook:a,firstCompleted:s}=e,n=K().Lj(t,I().A,{notebookId:a.guid,block:{id:o.id,spaceId:(0,g().J)(o.pointer.spaceId)},timestamp:Date.now(),parentTable:m().iU}),{value:r}=await n.next();r.error&&(console.error(r.error),J().createAndCommit({userAction:"importActions.importEvernoteNotebook",environment:t,canUndo:!0,perform:e=>{const t=o.getParentBlockStore();if(t){const a=t.getContentStore();G().Od({parentStore:a,childToRemoveStore:o,transaction:e})}}}),z().UW(L().Z.formatMessage(ee.evernoteImportFailed)));s.resolve(void 0)}({environment:t,notebookStore:o,notebook:e,firstCompleted:a})})))})),!l)throw new Error("waitForNotebookFirstCompleted not defined.");const c=i.getSettings();null!=c&&c.created_evernote_getting_started||await R().createGettingStartedPageInSpace({environment:t,type:"evernote",spaceStore:o,spaceViewStore:a,userSettingsStore:i});await l.promise}({environment:t,waitForNotebookStore:l,notebookMapping:i,notebooks:s,spaceStore:o,spaceViewStore:a,userSettingsStore:r}),Y().x(),l}catch(c){throw Y().x(),z().UW(L().Z.formatMessage(ee.evernoteImportFailed)),c}}async function ce(e){const{environment:t,spaceStore:o,spaceViewStore:a,space:s,flowId:n}=e;if(!t.currentUser.id)throw new Error("User does not exist.");Y().j({message:ee.importingFromConfluenceViaAPIMessage,interpolatedValues:{confluenceSpaceKey:s.name}}),D().Z.setState({open:!1});const r=re({environment:t,spaceStore:o,spaceViewStore:a});await r.deferred.promise;const l=r.pageId;let d;if((0,P().SL)(t)){const e=await E().callApi({eventName:"createTeam",environment:t,data:{spaceId:o.id,name:s.name,accessLevel:"closed"}});if("failed"===e.type)throw new Error("Cannot create teamspace");d=e.data.teamId}const{performResult:p}=J().createAndCommit({userAction:"importActions.importConfluenceViaApi",environment:t,canUndo:!0,perform:e=>{const n=L().Z.formatMessage(ee.importTitleWithImportName,{name:s.name}),r=Q().KE({environment:t,spaceStore:o,spaceViewStore:a,isPrivate:!0,prepend:!0,title:n,transaction:e}),i=x().UZ();return e.postSubmitCallbacks.push((e=>{e?i.reject(e):i.resolve()})),{deferred:i,createdPage:r,pageId:r.id}}});await p.deferred.promise;const u=p.createdPage;try{if(!u)throw new Error("No root page");U().G7(t,{integration_name:"confluence"});const e=K().Lj(t,T,{userId:t.currentUser.id,confluenceSpaceKey:s.key,confluenceSpaceId:s.id,confluenceSpaceName:s.name,page:{id:p.pageId,spaceId:o.id},loggerPageId:l,flowId:n,teamId:d});for await(const t of e){if(t.error)throw t.error;t.value.isComplete||Y().j(t.value.status)}return Y().x(),u}catch(m){i().log({level:"error",from:"importConfluenceViaAPI",type:"importConfluenceViaAPIFailure",error:(0,y().Ui)(m),data:{spaceId:o.id}}),J().createAndCommit({userAction:"importActions.importConfluenceViaApi",environment:t,canUndo:!0,perform:e=>{u&&G().Od({parentStore:o.getPagesStore(),childToRemoveStore:u,transaction:e})}});let e=L().Z.formatMessage(ee.confluenceImportViaAPIFailed);const a=m instanceof c().nY?m.body.clientData:void 0;throw a&&"code"in a&&"confluenceImportError"===a.code&&(e=L().Z.formatMessage(ee.importFailedWithError,{error:(0,f().t)(m).message})),z().UW(e),Y().x(),new Error((0,f().t)(m).message)}}const de=2},651275:(e,t,o)=>{o.d(t,{qF:()=>V,sC:()=>_,IO:()=>R,HS:()=>q,KH:()=>Z,FM:()=>L,x:()=>K,Nu:()=>z,XE:()=>$,$9:()=>Q,C8:()=>O,Hl:()=>G,VE:()=>A,h7:()=>B,hm:()=>U,M3:()=>J,eL:()=>D,e_:()=>W});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(749411),o(30005),o(241792);var a=()=>o(506347),s=()=>o(926724),n=()=>o(135857),r=()=>o(718162),i=()=>o(799891),l=()=>o(396136),c=()=>o(81954),d=()=>o(255933),p=()=>o(830742);const u=(0,p().LS)("mondayFullImport"),m=(0,p().LS)("parallelMondayImport");var g=()=>o(308186),f=()=>o(497065),h=()=>o(110232),y=()=>o(205228),x=()=>o(544903),I=()=>o(527278),j=()=>o(458121),v=()=>o(876822),S=()=>o(623521),w=()=>o(698850),k=()=>o(838266),T=()=>o(286310),b=()=>o(824462),C=()=>o(782646),M=()=>o(684715),P=()=>o(528918),F=()=>o(269299);const A=(0,o(788860).vU)({projectsAndTasksCountTooltip:{id:"mondayImport.importsTab.selectData.tooltipForProjectsAndTasksCount",defaultMessage:"Counts each item in the project board and each task board as a separate project"},boardsKeyWord:{id:"mondayImport.importsTab.selectData.boardsKeyWord",defaultMessage:" boards"},projectsKeyWord:{id:"mondayImport.importsTab.selectData.projectsKeyWord",defaultMessage:" projects"},projectsAndTasksExcludedToolTip:{id:"mondayImport.importsTab.selectData.tooltipForDisabledProjectsAndTasks",defaultMessage:"Project and task boards are excluded."},noBoardsTooltipMessage:{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolderV2",defaultMessage:"This folder has no boards."},successfullyConnected:{id:"mondayActions.successfullyConnected.message",defaultMessage:"Successfully connected monday.com instance."},fullImport:{defaultMessage:"Full Import",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport"},fullImportDescription:{defaultMessage:"Import all Monday board types as Notion databases. Recommended for a full migration.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport.description"},projectsAndTasks:{defaultMessage:"Projects & Tasks only",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks"},projectsAndTasksDescription:{defaultMessage:"Import project and task boards from Monday into Notion Projects. Recommended for Project management only.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks.description"},newTeamspaceLabel:{id:"mondayImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"mondayImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"},selectBoardsHeading:{id:"mondayImport.importsTab.chooseWorkspace.selectBoards",defaultMessage:"Choose boards to import"},selectWorkspaceV2:{id:"mondayImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"},chooseImportType:{id:"mondayImport.importsTab.chooseWorkspace.chooseImportType",defaultMessage:"Choose Import Type"},mapTeamspacesDescription:{id:"mondayImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Monday folder a Notion teamspace to collaborate in."},searchWorkspaces:{id:"mondayImport.importsTab.chooseWorkspace.searchWorkspaces",defaultMessage:"Search workspaces..."},chooseWorkSpace:{id:"mondayImport.importsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Monday workspace"},chooseTeamspace:{id:"mondayImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"},excludeProjectsAndTasks:{id:"mondayImport.importsTab.selectData.excludeProjectsAndTasks",defaultMessage:"Exclude projects & tasks boards"},selectWorkSpaceV1:{id:"MondayImport.importsTab.selectData.tabTitle",defaultMessage:"Select Monday.com workspace"},backButton:{id:"mondayImport.selectData.backButtonText",defaultMessage:"Back"},creatingTemplate:{id:"importsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"},nextButton:{id:"importsTab.selectData.nextButtonText",defaultMessage:"Next"}});function Z(){return{ProjectsAndTasks:{title:A.projectsAndTasks,description:A.projectsAndTasksDescription},FullImport:{title:A.fullImport,description:A.fullImportDescription}}}function B(){w().default.setState({...w().default.state,isModalOpen:!0})}async function V(e){const{environment:t,userEmail:o,APIToken:a,flowId:s,spaceId:n}=e;if(!t.currentUser.id||!o||!a)return g().PV({message:"Invalid details"}),void P().x();const r=await b().callApi({eventName:"authenticateMondayUser",environment:t,data:{userId:t.currentUser.id,spaceId:n,userEmail:o,APIToken:a}});"failed"===r.type?(T().a1(t,{import_source:"monday.com",data:{import_type:"api",status:"failure",error:r.error},flowId:s}),console.error(r.error),g().x2(r)):(T().a1(t,{import_source:"monday.com",data:{import_type:"api",status:"success"},flowId:s}),w().default.setState({...w().default.state,account:o}),g().PV({message:I().Z.formatMessage(A.successfullyConnected)})),P().x()}async function _(e){const{environment:t,spaceId:o}=e,a=await b().callApi({eventName:"disconnectMonday",environment:t,data:{spaceId:o}});"failed"===a.type?g().x2(a):(T().qJ(t,{integration_name:"monday.com"}),"success"===a.type&&w().default.setState({...w().default.state,account:void 0,workspaces:[]}))}async function L(e){const{environment:t,spaceId:o}=e;w().default.setState({...w().default.state,isLoadingMondayWorkspaces:!0});const a=await b().callApi({eventName:"getMondayWorkspaces",environment:t,data:{spaceId:o}});"success"===a.type&&w().default.setState({...w().default.state,workspaces:a.data.workspaces,isLoadingMondayWorkspaces:!1})}async function R(e){const{environment:t,spaceId:o,selectedWorkspace:a}=e;if(!o)return;w().default.setState({...w().default.state,isLoadingProjects:!0});const s=await b().callApi({eventName:"getMondayFoldersAndBoards",environment:t,data:{spaceId:o,selectedWorkspace:a}});"success"===s.type&&w().default.setState({...w().default.state,mondayFoldersAndBoards:s.data.mondayFoldersAndBoards,isLoadingProjects:!1})}function D(e){var t,o;let{folderId:a,spaceId:s}=e;const n=w().default.state.selectedProjectsAndTeamspaces;w().default.setState({...w().default.state,selectedProjectsAndTeamspaces:{...n,[a]:{projects:(null===(t=n[a])||void 0===t?void 0:t.projects)||[],notionTeamspaceId:s,isEntireFolderSelected:null===(o=n[a])||void 0===o?void 0:o.isEntireFolderSelected}}})}async function O(e){const{environment:t,spaceStore:o,currentSpaceViewStore:a,teamsStores:n,flowId:r}=e,{appTemplatesSetupActions:l,appConfigs:d}=await x().vF.load(),p=w().default.state.selectedWorkspace;if(!p)return;w().default.setState({...w().default.state,templateCreationInProgress:!0});const u={},g={},f=[],y=new Set;try{for(const e in w().default.state.selectedProjectsAndTeamspaces){const r=w().default.state.selectedProjectsAndTeamspaces[e].projects;if(0===r.length)continue;let i;f.push(...r.map((e=>e.mondayProjectId)));const c=w().default.state.selectedProjectsAndTeamspaces[e],{notionTeamspaceId:p}=c;if(!p)continue;y.add(p);const m=n.find((e=>e.id===c.notionTeamspaceId));if(i=m||o,!u[p]){const{serverCommitResult:e,performResult:o}=F().createAndCommit({environment:t,perform:e=>{const o={type:"preset",uri:s().T3};if("preset"===o.type&&!o.uri.startsWith("notion://wiki")){var n;const s=o.uri,r=null===(n=(0,h().iX)(d(),s))||void 0===n?void 0:n.uri;if(!r)return;const c=d().find((e=>e.uri===r));if(null==c?void 0:c.presets.find((e=>e.uri===s))){return l.initializeApp({environment:t,spaceViewStore:a,appParentStore:i,appUri:r,presetUri:s,transaction:e,from:"monday_import"})}return[]}},canUndo:!0,userAction:"importActions.importMonday"});u[p]=o,await e}g.hasOwnProperty(p)?g[p]=[...g[p],{mondayFolderId:e,projects:r}]:g[p]=[{mondayFolderId:e,projects:r}]}}catch(Z){return void w().default.setState({...w().default.state,templateCreationInProgress:!1,currentTab:"failure"})}const I=[],k=v().default.state.currentSpaceViewStore;if(!k)return;const b=M().Ym({environment:t,spaceStore:o,spaceViewStore:k,append:!0,mondayV2:(0,j().u)()});await b.deferred.promise;const P=b.pageId;w().default.setState({...w().default.state,loggerPageId:P});for(const[s,i]of Object.entries(g)){const e=u[s];e&&I.push({collectionViewBlocks:e.map((e=>({id:e.id,spaceId:(0,c().J)(o.id)}))),notionTeamSpaceId:s,mondayProjectsAndFolders:i})}T().G7(t,{integration_name:"monday.com"});const A=(0,C().Lj)(t,m,{importParams:I,loggerPageId:P,spaceId:o.id,flowId:r});w().default.setState({...w().default.state,templateCreationInProgress:!1,currentTab:"importingData"}),S().Z.reset(),p&&function(e,t,o){try{T().qy(e,{import_source:"monday.com",data:t,flowId:o})}catch(a){i().log({level:"error",from:"mondayActions",type:"parallelMondayImport",error:{miscDataString:JSON.stringify({error:a,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceId:p,projects:f,numberOfTeamspacesUsed:y.size,userId:t.currentUser.id,spaceId:(0,c().J)(o.id)},r);for await(const s of A){if(!w().default.state.isModalOpen)break;if(s.error)return void w().default.setState({...w().default.state,currentTab:"failure"});"success"===s.taskStatus&&w().default.setState({...w().default.state,currentTab:"confirm",result:s.value.status,isComplete:!0})}}async function q(e){const{environment:t,spaceId:o,selectedWorkspace:a}=e;w().default.setState({...w().default.state,isLoadingHierarchy:!0,isLoadingBoards:!0});try{const e=await b().callApi({eventName:"getMondayFoldersWithHierarchy",environment:t,data:{spaceId:o,selectedWorkspace:a},headers:{}});if("success"===e.type){const s=e.data.mondayFoldersDetailsMap;let n,r={},i=1,l=!0,c=w().default.getState();for(;l&&c.selectedWorkspace===a&&"FullImport"===c.selectedImportType&&!c.templateCreationInProgress;){const e=await b().callApi({eventName:"getMondayBoards",environment:t,data:{spaceId:o,selectedWorkspace:a,page:i},headers:{}});if("success"!==e.type){H();break}n=e.data.mondayBoardsDetailsMap,r={...r,...n},l=e.data.hasMoreBoards;for(const[t,o]of Object.entries(n))s[o.folderId].boards.push(t);w().default.setState({...w().default.state,isLoadingHierarchy:!1,fetchedHierarchy:!0,mondayBoardsDetailsMap:r,mondayFoldersDetailsMap:s}),i++,c=w().default.getState()}w().default.setState({...w().default.state,isLoadingBoards:!1})}else H()}catch(s){H()}}function H(){w().default.setState({...w().default.state,isLoadingHierarchy:!1,isLoadingBoards:!1,fetchedHierarchy:!1})}function W(e){let{folderId:t,notionTeamspaceId:o,notionRootTableName:a}=e;w().default.setState({...w().default.state,selectedTeamspacesForFullImport:{...w().default.state.selectedTeamspacesForFullImport,[t]:{notionTeamspaceId:o,notionRootTableName:a}}})}function N(e){const{mondayFolderDetails:t,currentfolderId:o}=e,a=[],s=[o];for(;s.length>0;){const e=s.pop();if(!e)continue;const o=t[e];if(o&&o.subFolders)for(const t of o.subFolders)a.push(t),s.push(t)}return a}function U(e){const{excludeProjectsAndTasks:t,board:o}=e;return t&&("task"===o.boardType||"project"===o.boardType)}function E(e){const{mondayFolderDetails:t,folderIds:o,excludeProjectsAndTasks:a,mondayBoardDetails:s}=e,n=[];for(;o.length>0;){const e=o.pop();if(!e)continue;const r=t[e];if(r&&r.boards)for(const t of r.boards)U({excludeProjectsAndTasks:a,board:s[t]})||n.push(t)}return n}function z(e,t,o,a){return E({folderIds:[e,...N({currentfolderId:e,mondayFolderDetails:t})],mondayFolderDetails:t,mondayBoardDetails:o,excludeProjectsAndTasks:a}).length}function K(e,t,o,a,s){const n=E({folderIds:[e,...N({currentfolderId:e,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:a,excludeProjectsAndTasks:s});let r=0;return n.forEach((e=>{t.has(e)&&(r+=1)})),r}async function G(e){const{environment:t,spaceStore:o,flowId:s,spaceViewStore:i}=e,c=w().default.state;if(!c.selectedWorkspace||!c.mondayFoldersDetailsMap)return;w().default.setState({...w().default.state,templateCreationInProgress:!0});const{selectedFolderIdsForFullImport:p,selectedBoardIdsForFullImport:m,mondayFoldersDetailsMap:g,mondayBoardsDetailsMap:h,excludeProjectsAndTasks:x}=c,I=Object.entries(c.mondayFoldersDetailsMap).flatMap((e=>{let[t,o]=e;return o.parent?[]:[t]})),j=new Map,v={notionTeamspaceId:o.getSpaceId(),notionRootTableName:d().bx},b=(e,t,o)=>{o.forEach((t=>{const o=p.has(t),a=g[t];if(o){const o={id:t,name:a.folderName,boards:[],folders:[]};b(o,a.boards,a.subFolders),e.folders.push(o)}else b(e,a.boards,a.subFolders)})),t.forEach((t=>{if(!m.has(t))return;const o=h[t];e.boards.push({id:t,name:o.name})}))};try{for(;I.length;){const e=I.pop();if(!e)break;const t=g[e];if(p.has(e)&&"null"!==e){const t=g[e],o={id:e,name:t.folderName,boards:[],folders:[]};b(o,t.boards,t.subFolders);const a=Y(e,v),s=j.get(a)??{boards:new Array,folders:new Array};s.folders.push(o),j.set(a,s)}else{for(const e of t.boards){if(!m.has(e))continue;const o=h[e],a=Y(t.folderId,v),s=j.get(a)??{boards:new Array,folders:new Array},n={id:e,name:o.name};s.boards.push(n),j.set(a,s)}I.push(...t.subFolders)}}}catch(B){return void w().default.setState({...w().default.state,templateCreationInProgress:!1,currentTab:"failure"})}const P=Array.from(j.entries(),(e=>{let[t,o]=e;return{notionRootTableId:t.notionTeamspaceId,notionRootTableName:t.notionRootTableName,mondayBoards:o.boards,mondayFolders:o.folders}})),F=M().Ym({environment:t,spaceStore:o,spaceViewStore:i,append:!0,mondayV2:!0});await F.deferred.promise;const A=F.pageId;w().default.setState({...w().default.state,loggerPageId:A}),T().G7(t,{integration_name:"monday.com"});const Z=(0,C().Lj)(t,u,{importParams:P,loggerPageId:A,spaceId:o.id,flowId:s,excludeProjectsAndTasks:x});w().default.setState({...w().default.state,templateCreationInProgress:!1,currentTab:"importingData"}),S().Z.reset();for await(const a of Z){if(!w().default.state.isModalOpen)break;if(a.error)return void w().default.setState({...w().default.state,currentTab:"failure",loggerPageId:A})}f().c4({url:(0,n().Z)({pageId:A,pageModel:(0,r().lA)({table:l().iU,id:A}),baseUrl:y().default.domainBaseUrl,pageVisitSource:a().tY.Import}),environment:t}),w().default.resetImport(),k().default.reset()}function Y(e,t){const{selectedTeamspacesForFullImport:o,mondayFoldersDetailsMap:a}=w().default.state;let s=e;for(;s;){var n;if(s in o)return o[s];s=null===(n=a[s])||void 0===n?void 0:n.parent}return t}function $(e){const t=new Set(w().default.state.selectedBoardIdsForFullImport);t.has(e)?t.delete(e):t.add(e),w().default.setState({...w().default.state,selectedBoardIdsForFullImport:t})}function Q(e,t,o,a){const s=w().default.state.selectedFolderIdsForFullImport.has(e);!function(e){const{mondayFolderDetails:t,currentfolderId:o,select:a,mondayBoardDetails:s,excludeProjectsAndTasks:n}=e,r=N({currentfolderId:o,mondayFolderDetails:t}),i=E({folderIds:[o,...r],mondayFolderDetails:t,mondayBoardDetails:s,excludeProjectsAndTasks:n}),{selectedFolderIdsForFullImport:l,selectedBoardIdsForFullImport:c}=w().default.state,d=(e,t)=>{t.forEach((t=>{a?e.add(t):e.delete(t)}))};d(l,r),d(c,i),w().default.setState({...w().default.state,selectedBoardIdsForFullImport:c,selectedFolderIdsForFullImport:l})}({currentfolderId:e,mondayFolderDetails:t,mondayBoardDetails:o,select:!s,excludeProjectsAndTasks:a});const n=new Set(w().default.state.selectedFolderIdsForFullImport);s?n.delete(e):n.add(e),w().default.setState({...w().default.state,selectedFolderIdsForFullImport:n})}function J(e){const{currentfolderId:t,mondayFolderDetails:o,mondayBoardDetails:a,excludeProjectsAndTasks:s}=e,n=E({folderIds:[t,...N({currentfolderId:t,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:a,excludeProjectsAndTasks:s});let r=!1;return n.forEach((e=>{U({excludeProjectsAndTasks:s,board:a[e]})||(r=!0)})),r}},306558:(e,t,o)=>{o.d(t,{M:()=>y,u:()=>x});var a=()=>o(54193),s=()=>o(916673),n=()=>o(286310),r=()=>o(308186),i=()=>o(205228),l=()=>o(848643),c=()=>o(479694),d=()=>o(838266),p=()=>o(405177),u=()=>o(824462),m=()=>o(231077),g=()=>o(528918),f=()=>o(402269);const h=(0,o(788860).vU)({authenticatingWithTrello:{id:"trelloActions.authenticatingWithTrello.loadingMessage",defaultMessage:"Authenticating with Trelloâ€¦"},titleMessage:{defaultMessage:"Trello login",id:"trelloActions.loginPopupModal.title"}});async function y(e){const{environment:t,requestStore:o}=e,p=(0,l().eC)(t);let y=(0,a().ae)(i().default.domainBaseUrl,{authType:p,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(y=p.redirectToAuth?y:await(0,l().HU)(t,y),t.device.isElectron)return void m().openExternalUrl(y);const I=await f().M(t,{width:580,height:700,url:y,titleMessage:h.titleMessage});if(!I)return;const j=s().Qc(I),v=j.query.oauth_token,S=j.query.oauth_verifier;if(!v||!S)return;g().j({message:h.authenticatingWithTrello});const w=await u().callApi({eventName:"authWithTrello",environment:t,data:{requestToken:v,verifier:S}});"failed"===w.type?(n().a1(t,{import_source:"trello",data:{import_type:"api",status:"failure",error:w.error,userId:t.currentUser.id}}),console.error(w.error),r().x2(w),g().x()):(n().a1(t,{import_source:"trello",data:{import_type:"api",status:"success",userId:t.currentUser.id}}),n().L3(t,{integration_name:"trello"}),await o.refresh(),c().Z.setState({open:!0}),d().default.setState({...d().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await x(t,o),g().x())}async function x(e,t){p().default.setState({...p().default.state,isFetchingBoards:!0,showLoader:!0});const o=await u().callApi({eventName:"getTrelloBoards",environment:e,data:{}});return await t.refresh(),"success"===o.type?(p().default.setState({...p().default.state,boardsResponse:o.data,isFetchingBoards:!1,showLoader:!1}),o.data):(console.error(o.error),{boards:[]})}},129824:(e,t,o)=>{o.d(t,{f:()=>Me,Z:()=>Pe});o(267602),o(916054),o(470928),o(241792),o(228244);var a=o(667294),s=()=>o(219727),n=()=>o(142735),r=()=>o(846550),i=()=>o(506347),l=()=>o(714230),c=()=>o(135857),d=()=>o(718162),p=()=>o(116223),u=()=>o(396136),m=()=>o(788860),g=()=>o(696459),f=()=>o(707513),h=()=>o(998484),y=()=>o(497065),x=()=>o(205228),I=()=>o(148126),j=()=>o(998901),v=()=>o(876822),S=()=>o(199114),w=()=>o(838266),k=()=>o(374844),T=()=>o(382850),b=()=>o(667067),C=()=>o(417387),M=()=>o(568017),P=()=>o(383694),F=()=>o(1910),A=()=>o(67961),Z=()=>o(251932),B=()=>o(378907),V=o(785893);const _=function(){const e=(0,n().Kw)(S().default);return e.result?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(A().Z,{isMultiline:!0,children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,V.jsx)("div",{style:{marginTop:32},children:e.result.map((e=>(0,V.jsx)(L,{importStatus:e},e.asanaTeamId)))})]}):(0,V.jsx)(V.Fragment,{})};function L(e){let{importStatus:t}=e;const o=(0,r().Fg)(),[s,i]=(0,a.useState)(!1),l=(0,n().VK)((()=>v().default.state.currentSpaceStore),[]),c=(0,n().VK)((()=>S().default.state.teamsAndProjects),[]),d=(0,n().VK)((()=>v().default.state.currentSpaceViewStore),[]),p=(0,n().VK)((()=>{if(!d)return;const e=d.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,V.jsx)(P().p,{disabled:!0,store:e})})));return l?(e||[]).concat({id:d.id,name:"Private",icon:(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:M().FN.light.gray[75]},children:(0,b().Q)({color:o.mediumIconColor,width:12.5,height:12.5})})}):e}),[d,l,o]),{notionTeamspaceName:u,notionTeamspaceIcon:g}=(0,a.useMemo)((()=>{const e=null==p?void 0:p.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[p,t]),f=(0,a.useMemo)((()=>{const e=c.find((e=>e.gid===t.asanaTeamId));return null==e?void 0:e.name}),[c,t]);return(0,V.jsxs)(Z().gq,{style:{marginTop:16},children:[(0,V.jsx)(F().Z,{ariaLabel:"collapse toggle",icon:C().L,onClick:()=>i((e=>!e)),style:{transform:s?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:4},iconStyle:{width:8,height:8}}),(0,V.jsx)(B().Z,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,V.jsx)(Z().gq,{alignItems:"center",gap:2,children:(0,V.jsx)(A().Z,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:f})}),style:{width:300}},{key:"importedInto",header:(0,V.jsxs)(Z().gq,{gap:4,children:[(0,V.jsxs)(Z().gq,{style:{alignItems:"center",gap:4},children:[(0,V.jsx)(A().Z,{isSmall:!0,children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,k().n)({width:12})]}),(0,V.jsxs)(Z().gq,{style:{alignItems:"center",gap:4},children:[g,u]})]}),style:{width:300}}],rows:function(e){let{collapsed:o}=e;return o?[]:t.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,V.jsxs)(Z().gq,{gap:8,alignItems:"center",children:[(0,T().r)({width:12,color:M().FN.dark.green[600]}),(0,V.jsx)(A().Z,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId),(0,V.jsxs)(A().Z,{isSmall:!0,children:[e.numberOfTasks,(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})))}({collapsed:s})})]})}o(30005);var R=()=>o(430366),D=()=>o(545914),O=()=>o(765513);const q=function(){const e=(0,n().Kw)(S().default);if(!e.result)return(0,V.jsx)(V.Fragment,{});const t=e.result;let o=0;return t.forEach((e=>{o+=e.numberOfProjects})),(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[(0,V.jsx)(A().Z,{isMultiline:!0,style:{font:"SF Pro",fontWeight:f().Ue.semibold,fontSize:f().JB.UIRegular.mobile,paddingTop:8},children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.importComplete.subtitle",defaultMessage:"Imported {projectCount} projects into Notion",values:{projectCount:o}})}),(0,V.jsx)("div",{style:{marginTop:20},children:e.result.map((e=>(0,V.jsx)(H,{importStatus:e},e.asanaTeamId)))})]})};function H(e){let{importStatus:t}=e;const o=(0,r().Fg)(),s=(0,n().VK)((()=>v().default.state.currentSpaceStore),[]),l=(0,n().VK)((()=>S().default.state.teamsAndProjects),[]),p=(0,n().VK)((()=>v().default.state.currentSpaceViewStore),[]),g=(0,n().VK)((()=>{if(!p)return;const e=p.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,V.jsx)(P().p,{disabled:!0,store:e})})));return s?(e||[]).concat({id:p.id,name:"Private",icon:(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:M().FN.light.gray[75]},children:(0,b().Q)({color:o.mediumIconColor,width:12.5,height:12.5})})}):e}),[p,s,o]),{notionTeamspaceName:h,notionTeamspaceIcon:y}=(0,a.useMemo)((()=>{const e=null==g?void 0:g.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[g,t]),I=(0,a.useMemo)((()=>{const e=l.find((e=>e.gid===t.asanaTeamId));return null==e?void 0:e.name}),[l,t]);return(0,V.jsx)(Z().gq,{style:{marginTop:16},children:(0,V.jsx)(B().Z,{tableStyle:{borderTop:0,gap:10},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,V.jsx)(Z().gq,{children:(0,V.jsx)(Z().gq,{alignItems:"center",gap:2,children:(0,V.jsx)(A().Z,{isSmall:!0,style:{width:280,textOverflow:"ellipsis",font:"SF Pro",fontWeight:f().Ue.regular,fontSize:f().JB.UIRegular.desktop},children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.importComplete.importFrom",defaultMessage:"From {asanaTeamName} in Asana",values:{asanaTeamName:I}})})})}),style:{width:300}},{key:"seperator",header:(0,V.jsx)(Z().gq,{style:{alignItems:"center",gap:4},children:(0,V.jsx)(A().Z,{isMultiline:!0,style:{fontWeight:f().Ue.regular,font:"SF Pro",fontSize:f().JB.UIRegular.desktop,color:"rgba(172, 171, 169, 1)"},children:"â†’"})}),style:{width:13,height:18,paddingRight:20}},{key:"importedInto",header:(0,V.jsxs)(Z().gq,{style:{alignItems:"center",gap:4},children:[y,(0,V.jsx)(A().Z,{style:{font:"SF Pro",fontWeight:f().Ue.medium,fontSize:f().JB.UIRegular.desktop},children:h}),(0,V.jsx)(A().Z,{style:{fontWeight:f().Ue.regular,fontSize:f().JB.UIRegular.desktop,font:"SF Pro Text",color:"rgba(172, 171, 169, 1)"},children:"/"}),(0,V.jsx)(V.Fragment,{children:(0,R().D)({width:"16px",height:"16px",color:o.mediumIconColor})}),(0,V.jsx)(A().Z,{style:{font:"SF Pro",fontWeight:f().Ue.medium,fontSize:f().JB.UIRegular.desktop},children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.importComplete.projectLabel",defaultMessage:"Projects"})})]}),style:{width:300}}],rows:t.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,V.jsxs)(Z().gq,{gap:8,alignItems:"start",flexDirection:"column",children:[(0,V.jsx)(A().Z,{isMultiline:!0,style:{wordWrap:"break-word",width:300,fontWeight:f().Ue.medium,font:"SF Pro",fontSize:f().JB.UIRegular.desktop},children:e.name}),(0,V.jsxs)(A().Z,{isSmall:!0,children:[e.numberOfTasks,(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]},e.projectId),(0,V.jsx)(Z().gq,{},`${e.projectId}-seperator`),(0,V.jsx)(Z().gq,{children:(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{style:{display:"flex",gap:4,paddingBottom:6},children:[(0,R().D)({width:20,height:20,color:o.mediumIconColor}),(0,V.jsx)(O().Z,{href:e.notionProjectId?(0,c().Z)({pageId:e.notionProjectId,pageModel:(0,d().lA)({table:u().iU,id:e.notionProjectId}),baseUrl:x().default.domainBaseUrl,pageVisitSource:i().tY.Import}):void 0,style:{wordWrap:"break-word",fontWeight:f().Ue.medium,font:"SF Pro",fontSize:f().JB.UIRegular.desktop,textDecorationLine:"underline",textDecorationColor:"rgba(227, 226, 224, 1)"},disableHover:!0,children:e.name})]}),(0,V.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,D().v)({width:14,height:14,color:o.mediumIconColor}),(0,V.jsxs)(O().Z,{href:e.notionProjectId?(0,c().Z)({pageId:e.notionProjectId,pageModel:(0,d().lA)({table:u().iU,id:e.notionProjectId}),baseUrl:x().default.domainBaseUrl,pageVisitSource:i().tY.Import}):void 0,style:{color:"rgba(120, 119, 116, 1)",font:"SF Pro",fontSize:f().JB.UISmall.desktop,fontWeight:f().Ue.regular},disableUnderline:!0,disableHover:!0,children:[e.numberOfTasks,(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})]})},`${e.projectId}-notionProjects`)]})))})})}o(670560),o(653476);var W=()=>o(286977),N=()=>o(374289),U=()=>o(490670),E=()=>o(352230),z=()=>o(44556),K=()=>o(745740),G=()=>o(265640),Y=()=>o(827973),$=()=>o(448419),Q=()=>o(715139),J=()=>o(312578),X=()=>o(198829),ee=()=>o(255577),te=()=>o(388284),oe=()=>o(819792);const ae=function(){const e=(0,s().O7)(),t=(0,m().YB)(),o=(0,n().VK)((()=>S().default.getState()),[]),{isLoadingProjects:r,workspaces:i,selectedWorkspace:l,teamsAndProjects:c}=o;return(0,a.useEffect)((()=>{l&&h().y2({selectedWorkspace:l,environment:e}).catch((()=>{}))}),[l,e]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(A().Z,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,V.jsx)(ne,{onSelectOption:e=>{S().default.setState({...o,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:i.map((e=>({key:e.gid,label:e.name}))),currentOption:l,placeHolder:t.formatMessage({id:"asanaImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"})}),l?(0,V.jsx)(A().Z,{style:{fontWeight:f().Ue.semibold,marginTop:18},children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):(0,V.jsx)(V.Fragment,{}),r?(0,V.jsxs)(Z().gq,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,V.jsx)(J().Z,{size:"sm"}),(0,V.jsx)(A().Z,{isSmall:!0,style:{color:M().FN.light.gray[400]},children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):c.filter((e=>0!==e.projects.length)).map((e=>(0,V.jsx)(se,{team:e,selectedWorkspace:l},`${e.gid}-table`)))]})};function se(e){var t;let{team:o,selectedWorkspace:i}=e;const c=(0,s().O7)(),d=(0,m().YB)(),p=(0,r().Fg)(),[u,g]=(0,a.useState)(!1),[y,x]=(0,a.useState)(!1),[I,j]=(0,a.useState)(),w=(0,n().VK)((()=>S().default.getState()),[]),{importCompletedTasks:T,selectedProjectsAndTeamspaces:_}=w,L=(0,n().VK)((()=>v().default.state.currentSpaceViewStore),[]),R=(0,n().VK)((()=>{const e=null==L?void 0:L.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,V.jsx)(P().p,{disabled:!0,store:e})})))}),[L]);(0,a.useEffect)((()=>{if(!R||!L)return;if(!_[o.gid]){j("private"),h().B3({teamId:o.gid,spaceId:null==L?void 0:L.id});for(const a of R){var e,t;if((null===(e=a.name)||void 0===e?void 0:e.toLowerCase())===(null===(t=o.name)||void 0===t?void 0:t.toLowerCase())){j(a.id),h().B3({teamId:o.gid,spaceId:a.id});break}}}}),[R,o,L,_]);const D=(0,a.useCallback)((e=>{h().B3({teamId:o.gid,spaceId:e}),j(e)}),[o.gid]),O=(0,a.useCallback)((e=>{if("create"===e)return void z().lo("asana_importer",{onClose:D});let t;if("private"===e){if(null==L||!L.id)return;t=L.id}else t=e;h().B3({teamId:o.gid,spaceId:t}),j(e)}),[null==L?void 0:L.id,o.gid,D]),q=[{key:"private",searchTerm:"private",label:(0,V.jsxs)(Z().gq,{alignItems:"center",style:{gap:8},children:[(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:M().FN.light.gray[75]},children:(0,b().Q)({color:p.mediumIconColor,width:12.5,height:12.5})}),(0,V.jsx)(A().Z,{style:{fontWeight:f().Ue.regular},children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"})})]})}];return R&&q.push(...R.map((e=>({key:e.id,searchTerm:e.name,label:(0,V.jsxs)(Z().gq,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),q.push({key:"create",searchTerm:"New teamspace",label:(0,V.jsxs)(Z().gq,{alignItems:"center",style:{gap:4},children:[(0,U().f)({color:p.mediumIconColor,width:16,height:16}),(0,V.jsx)(A().Z,{children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"})})]})}),(0,V.jsxs)(Z().gq,{style:{marginLeft:-18},children:[(0,V.jsx)(F().Z,{ariaLabel:"collapse toggle",icon:C().L,onClick:()=>g((e=>!e)),style:{transform:u?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:24,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:10,height:10}}),(0,V.jsx)(B().Z,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,V.jsxs)(Z().gq,{alignItems:"center",gap:2,children:[(0,V.jsx)(re,{onSelectOption:e=>{var t;S().default.setState({...w,selectedProjectsAndTeamspaces:{..._,[o.gid]:{notionTeamspaceId:null===(t=_[o.gid])||void 0===t?void 0:t.notionTeamspaceId,projects:e}}})},options:[{key:"in_complete",label:"Exclude completed projects"},{key:"all",label:"Select all projects"}],currentOption:(e=>{const t=null===(e=_[o.gid])||void 0===e?void 0:e.projects;return"string"==typeof t?t:null!=t&&t.length?"specific":void 0})()}),(0,V.jsx)(A().Z,{style:{width:280,textOverflow:"ellipsis"},children:o.name})]}),style:{width:300}},{key:"importInto",header:(0,V.jsxs)(Z().gq,{style:{alignItems:"center"},children:[(0,V.jsx)("div",{children:(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,V.jsx)("div",{style:{marginRight:16,marginLeft:8},children:(0,k().n)({width:12})}),(0,V.jsxs)(Z().gq,{style:{alignItems:"center",gap:8},children:[(0,V.jsx)("img",{src:l().Z.emails.notionLogoBlackSmallPng,height:18}),(0,V.jsx)(ne,{options:q,onSelectOption:O,currentOption:null===(t=q.find((e=>e.key===I)))||void 0===t?void 0:t.key,narrow:!0,allowSearch:!0,placeHolder:d.formatMessage({id:"asanaImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"})})]})]}),style:{width:"50%"}}],rows:function(e){let{collapsed:t}=e;if(t)return[];const a=o.projects.map((e=>({key:e.gid,columns:[(0,V.jsxs)(Z().gq,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,V.jsx)(Q().Z,{style:{marginRight:2},onClick:()=>{const t={..._[o.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:a,projects:s}=t;let n;n="all"===s||"in_complete"===s?[]:s.includes(e.gid)?s.filter((t=>t!==e.gid)):s.concat(e.gid),S().default.setState({...w,selectedProjectsAndTeamspaces:{..._,[o.gid]:{notionTeamspaceId:a,projects:n}}})},checked:(()=>{const t={..._[o.gid]||{projects:[],notionTeamspaceId:void 0}};return"all"===t.projects||"in_complete"===t.projects&&!1===e.completed||t.projects.includes(e.gid)})(),size:14,checkSize:8}),(0,V.jsx)(oe().z,{color:e.color,size:6}),(0,V.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:e.completed?(0,V.jsxs)(A().Z,{isMultiline:!0,style:{color:p.lightTextColor},children:[e.name,(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.completedHelperText",defaultMessage:" (Completed)"})]}):(0,V.jsx)(A().Z,{isMultiline:!0,children:e.name})})]},`${e.gid}-container`),(0,V.jsxs)(A().Z,{isSmall:!0,children:[T?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${o.gid}-tasks-count`)]})));return o.nextPage&&a.push({key:"loadMore",columns:[(0,V.jsx)(K().Z,{disabled:y,style:{marginLeft:20,color:M().FN.light.gray[400]},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},onClick:async()=>{i&&(x(!0),await h().LH({team:o,environment:c}),x(!1))},children:y?(0,V.jsxs)(Z().gq,{alignItems:"center",gap:8,children:[(0,V.jsx)(J().Z,{size:"sm"}),(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.loadingMoreProjects",defaultMessage:"Loading more projects..."})]}):(0,V.jsx)(m()._H,{id:"asanaImport.importsTab.selectData.loadMoreProjects",defaultMessage:"Load more projects..."})},`${o.gid}-loadmore`)]}),a}({collapsed:u})})]})}function ne(e){var t;const{onSelectOption:o,options:s,currentOption:n,placeHolder:i,narrow:l,allowSearch:c}=e,d=(0,m().YB)(),[p,u]=(0,a.useState)(""),g=null===(t=s.find((e=>{let{key:t}=e;return t===n})))||void 0===t?void 0:t.label,h=(0,r().yK)((e=>({icon:{width:12,height:12,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,V.jsx)($().ZP,{popupType:$().Z4.Popup,placementToOrigin:$().pO.Bottom,renderOrigin:e=>(0,V.jsxs)(G().D,{...e,style:{paddingTop:l?2:8,paddingBottom:l?2:8,paddingLeft:8,paddingRight:8,opacity:1,width:250,border:`1px solid ${M().FN.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:n?void 0:M().FN.light.gray[75],color:n?void 0:M().FN.light.gray[300]},disabled:!1,children:[(0,V.jsx)(A().Z,{style:{textOverflow:"ellipsis"},children:g||i}),(0,N().i)(h.icon)]}),render:e=>{const t={menuType:E().o.Popup,width:250,left:50},a=[{key:"asanaImport.dropdown.menuList",render:e=>(0,V.jsx)(te().Z,{...e}),items:(p.trim()?s.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase())})):s).map((t=>{let{key:a,label:s}=t;return{key:a,action:()=>{o(a),e.close()},render:e=>(0,V.jsx)(Y().Z,{...e,title:s,shouldWrapCaption:!0,right:g===s?(0,V.jsx)("div",{style:{width:14},children:(0,W().e)()}):void 0})}}))}];return(0,V.jsxs)(V.Fragment,{children:[c?(0,V.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:M().FN.light.gray[200],paddingTop:2,paddingBottom:2,paddingLeft:8,paddingRight:8,opacity:1,border:`1px solid ${M().FN.light.gray[100]}`,justifyContent:"space-between",background:M().FN.light.gray[75],fontSize:f().JB.UIRegular.desktop,textOverflow:"ellipses"},placeholder:d.formatMessage({id:"asanaImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"}),onChange:e=>u(e.target.value),value:p}):(0,V.jsx)(V.Fragment,{}),(0,V.jsx)(X().Z,{...t,children:(0,V.jsx)(ee().ZP,{type:ee().iW.Vertical,sections:a,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}function re(e){var t;const{onSelectOption:o,options:s,currentOption:n}=e,r=null===(t=s.find((e=>{let{key:t}=e;return t===n})))||void 0===t?void 0:t.label,i=(0,a.useMemo)((()=>void 0!==n&&"specific"!==n&&("all"===n||"partial")),[n]);return(0,V.jsx)($().ZP,{popupType:$().Z4.Popup,placementToOrigin:$().pO.Bottom,alignmentToOrigin:$().vR.Start,renderOrigin:e=>(0,V.jsx)(G().D,{...e,style:{padding:0,margin:0,marginRight:4,height:14},hoveredStyle:{},children:(0,V.jsx)(Q().Z,{checked:i,disabled:!0,size:14,checkSize:8})}),render:e=>{const t={menuType:E().o.Popup,width:250,left:50},a=[{key:"asanaImport.checkboxDropdown.menuList",render:e=>(0,V.jsx)(te().Z,{...e}),items:s.map((t=>{let{key:a,label:s}=t;return{key:a,action:()=>{o(a),e.close()},render:e=>(0,V.jsx)(Y().Z,{...e,title:s,shouldWrapCaption:!0,right:r===s?(0,V.jsx)("div",{style:{width:14},children:(0,W().e)()}):void 0})}}))}];return(0,V.jsx)(X().Z,{...t,children:(0,V.jsx)(ee().ZP,{type:ee().iW.Vertical,sections:a,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}var ie=()=>o(661297),le=()=>o(906651),ce=()=>o(471645),de=()=>o(654133),pe=()=>o(360964),ue=()=>o(5234),me=()=>o(766933),ge=()=>o(961033),fe=()=>o(491629);const he=(0,m().vU)({selectProperties:{id:"asanaImport.selectProperties.subtitleForSelectPropertiesTab",defaultMessage:"By default, all Asana task properties will be imported. You can customize this for each teamspace below"},keepAllPropertiesDescription:{id:"asanaImport.selectProperties.keepAllPropertiesDescription",defaultMessage:"Add {count} properties from Asana into your Notion tasks"},customPropertiesLabel:{id:"asanaImport.selectProperties.customPropertiesLabel",defaultMessage:"Custom Properties"},defaultPropertiesLabel:{id:"asanaImport.selectProperties.defaultPropertiesLabel",defaultMessage:"Default Properties"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"}});function ye(e){let{propertiesLoadStatus:t,currentTeamSpaceId:o}=e;const s=(0,m().YB)(),{selectionMode:r,properties:i}=(0,n().VK)((()=>{if("resolved"!==t||!o)return{selectionMode:"all",properties:[]};const e=S().default.state.useSectionAsStatus,{selectionMode:a,properties:s}=S().default.state.selectedTeamspacesAndProperties[o],n=s.slice(),r=n.find((e=>"Completed?"===e.asanaFieldName)),i=n.find((e=>"Section"===e.asanaFieldName));return r&&i&&(e?(r.notionFieldType="checkbox",i.notionFieldType="status"):(r.notionFieldType="status",i.notionFieldType="select")),{selectionMode:a,properties:n}}),[o,t]),l=(0,a.useCallback)((e=>{const t=S().default.state;S().default.setState({...t,selectedTeamspacesAndProperties:{...t.selectedTeamspacesAndProperties,[o]:{...t.selectedTeamspacesAndProperties[o],properties:e}}})}),[o]),c=(0,a.useCallback)((e=>{S().default.setState({...S().default.state,selectedTeamspacesAndProperties:{...S().default.state.selectedTeamspacesAndProperties,[o]:{selectionMode:e,properties:i.map((t=>({...t,isSelected:t.isDefault||"all"===e})))}}})}),[o,i]),d=(0,a.useCallback)((e=>{const t=i.map((t=>t.asanaFieldName===e.asanaFieldName?{...t,isSelected:!t.isSelected}:t));l(t)}),[i,l]),p=(0,a.useCallback)((e=>{let t=!0,o=!0;const a=i.filter((t=>t.isDefault===("default"===e)));return a.length>0&&(a.forEach((e=>{e.isSelected?o=!1:t=!1})),!!t||!o&&"partial")}),[i]),u=(0,a.useCallback)((e=>{const t=!0===p(e),o=i.map((e=>({...e,isSelected:e.isDefault||!t})));l(o)}),[p,i,l]),[g,f]=(0,a.useState)(!1),[h,y]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{"resolved"===t&&0===(null==i?void 0:i.filter((e=>!e.isDefault)).length)&&f(!0)}),[t,i]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(Z().gq,{gap:8,style:{marginTop:10,width:"100%"},children:[(0,V.jsx)(ge().n,{name:"select-all-properties",selectType:"radio",label:"Select all properties",disabled:"pending"===t,value:"all",description:s.formatMessage(he.keepAllPropertiesDescription,{count:Object.keys(i).length||"all"}),isSelected:"all"===r,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>c("all")}),(0,V.jsx)(ge().n,{name:"customise-properties",selectType:"radio",disabled:"pending"===t,label:"Customize properties",value:"custom",description:"Choose which properties you want to keep",isSelected:"custom"===r,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>c("custom")})]}),(0,V.jsx)("div",{style:{marginTop:8},children:(0,V.jsx)(fe().Z,{title:(0,V.jsx)(Z().gq,{gap:4,children:(0,V.jsx)(A().Z,{children:(0,V.jsx)(m()._H,{...he.defaultPropertiesLabel})})}),rows:i.filter((e=>e.isDefault)),loading:"pending"===t,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>f((e=>!e)),collapsed:!g,onSelectGroup:()=>{},onSelectRow:()=>{},groupCheckedState:!0,rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,V.jsx)(xe,{property:e}),rowsContainerStyles:{display:"grid",gap:6},disabled:!0,rowStyles:{marginTop:4,height:24}})}),(0,V.jsx)("div",{style:{marginTop:8},children:(null==i?void 0:i.filter((e=>!e.isDefault)).length)>0&&(0,V.jsx)(fe().Z,{title:(0,V.jsx)(Z().gq,{gap:4,children:(0,V.jsx)(A().Z,{children:(0,V.jsx)(m()._H,{...he.customPropertiesLabel})})}),rows:i.filter((e=>!e.isDefault)),loading:"pending"===t,disabled:"all"===r,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>y((e=>!e)),collapsed:!h,onSelectGroup:()=>u("custom"),onSelectRow:e=>d(e),groupCheckedState:p("custom"),rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,V.jsx)(xe,{property:e}),rowsContainerStyles:{display:"grid",gap:6},rowStyles:{marginTop:4,height:24}})})]})}function xe(e){let{property:t,style:o}=e;const s=Ie();return(0,V.jsxs)(a.Fragment,{children:[(0,V.jsx)(Z().gq,{gap:12,alignItems:"center",style:{marginLeft:2,width:"250px",padding:"6px 0px 6px 0px",...o},children:(0,V.jsx)("span",{style:s.propertyLabel,children:t.asanaFieldName})}),(0,V.jsxs)(Z().gq,{style:{padding:"6px 6px"},gap:8,alignItems:"center",children:[(0,V.jsx)(je,{}),me().wG[t.notionFieldType]({width:14,fill:M().ZP.uiGray}),(0,V.jsx)("span",{style:s.propertyLabel,children:t.notionFieldType.split("_").map(ue().Z).join(" ")})]})]},t.asanaFieldName)}function Ie(){return(0,r().yK)((e=>({teamSpaceLabel:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4},header:{font:"SF Pro",fontWeight:f().Ue.regular,fontSize:f().JB.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},propertyLabel:{fontSize:f().JB.UIRegular.desktop,color:e.regularTextColor,lineHeight:"19.6px"},lockedIcon:{color:e.mediumIconColor,width:12.5,height:12.5}})),[])}function je(e){let{styles:t}=e;return(0,k().n)({width:10,marginTop:2,marginRight:12,fill:M().ZP.uiLightGray,...t})}const ve=function(){var e;const t=(0,s().O7)(),r=(0,m().YB)(),i=Ie(),[l,c]=(0,a.useState)(0),[{status:d}]=(0,o(801812).r5)((async()=>h().ZV(t,S().default.state.selectedProjectsAndTeamspaces)),[t]),p=(0,n().VK)((()=>{var e,t;const a=(0,o(513670).jj)(Object.values(S().default.state.selectedProjectsAndTeamspaces).filter((e=>e.projects.length>0)).map((e=>e.notionTeamspaceId)).filter(g().$K)),s=null===(e=v().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores(),n=null===(t=v().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id;return a.map((e=>{const t=null==s?void 0:s.find((t=>t.id===e));return t||e!==n?{teamSpaceId:e,name:null==t?void 0:t.getName(),icon:(0,V.jsx)(P().p,{disabled:!0,store:t})}:{teamSpaceId:n,icon:(0,b().Q)(i.lockedIcon),name:r.formatMessage(he.privateSpaceLabel)}}))}),[i.lockedIcon,r]);return(0,V.jsxs)("div",{style:{paddingBottom:20},children:[(0,V.jsx)(A().Z,{style:i.header,children:(0,V.jsx)(m()._H,{...he.selectProperties})}),(0,V.jsx)(o(539245).ZP,{style:{padding:0},tabs:p.map((e=>(0,V.jsxs)(Z().gq,{alignItems:"center",gap:8,children:[e.icon,e.name]},e.name))),selectedIndex:l,onChange:c}),(0,V.jsx)(ye,{propertiesLoadStatus:d,currentTeamSpaceId:null===(e=p[l])||void 0===e?void 0:e.teamSpaceId})]})};const Se=(0,m().vU)({failed:{defaultMessage:"Some problems occurred while importing data from your Asana workspace.",id:"Asanaimport.importingData.failed.problemsOccured"},chooseWorkspaceTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.chooseWorkspaceTab",defaultMessage:"Choose what to import"},importTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.importTab",defaultMessage:"Import"},customizeTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.selectPropertiesTab",defaultMessage:"Customize"},chooseWorkspaceNextButtonLabel:{id:"asanaImportsTab.chooseWorkspace.nextButtonText",defaultMessage:"Next"},chooseWorkspaceBackButtonLabel:{id:"asanaImport.chooseWorkspace.backButtonText",defaultMessage:"Back"},selectPropertiesBackButtonText:{id:"asanaImportsTab.selectProperties.backButtonText",defaultMessage:"Back"},startImportButtonText:{id:"asanaImportsTab.selectProperties.nextButtonText",defaultMessage:"Import"}});function we(e){switch(e){case"selectData":return(0,V.jsx)(A().Z,{style:{paddingBottom:8,fontSize:18,fontWeight:f().Ue.semibold,width:"100%"},children:(0,V.jsx)(m()._H,{id:"asanaImport.asanaImportsTab.selectData.tabHeader",defaultMessage:"Select Asana workspace"})});case"chooseWorkspace":return(0,V.jsx)(A().Z,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,V.jsx)(m()._H,{id:"asanaImport.asanaImportsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Asana workspace"})});case"selectProperties":return(0,V.jsx)(A().Z,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,V.jsx)(m()._H,{id:"asanaImport.asanaImportsTab.selectProperties.tabTitle",defaultMessage:"Select properties"})});default:return(0,V.jsx)(V.Fragment,{})}}function ke(){let{useV2Styles:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useV2Styles:!1};return(0,r().yK)((e=>({stepIndicatorLabel:{font:"SF Pro",fontWeight:f().Ue.medium,fontSize:f().JB.UIRegular.desktop},stepIndicatorContainer:{height:32,borderRadius:6,padding:"6px"},verificationCheck:{width:14,height:14,padding:"0.5px, 0px, 0px, 0px",color:e.lightIconColor},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},helpCenterButtonStytles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:f().JB.UIRegular.desktop,padding:"6px, 0px, 0px, 0px",borderRadius:6,color:e.mediumTextColor,marginTop:2,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:"16px",height:"16px",padding:"0.5px, 0px, 0px, 0px",gap:"8px"},tabNotStarted:{color:e.lightTextColor},tabInProgress:{background:e.buttonHoveredBackground,color:e.regularTextColor},tabDone:{color:e.mediumTextColor}})),[])}const Te=[["chooseWorkspace",Se.chooseWorkspaceTabLabel],["selectProperties",Se.customizeTabLabel],["importingData",Se.importTabLabel],["importComplete",null]];function be(e){let{tab:t}=e;const o=ke(),s=(0,a.useCallback)((e=>{const o=Te.findIndex((e=>{let[o,a]=e;return o===t})),a=Te.findIndex((t=>{let[o,a]=t;return o===e}));return(0,g().$K)(o)?a<o?"done":a===o?"in-progress":"not-started":"not-started"}),[t]),n=(0,a.useCallback)((e=>{switch(e){case"done":return o.tabDone;case"in-progress":return o.tabInProgress;default:return o.tabNotStarted}}),[o]);return(0,V.jsx)(Z().gq,{gap:12,alignContent:"center",alignItems:"center",style:{marginTop:10,marginBottom:10},children:Te.map((e=>{let[t,a]=e;const r=s(t);return a?(0,V.jsxs)(Z().gq,{alignContent:"center",alignItems:"center",justifyContent:"center",style:{...o.stepIndicatorContainer,...n(r)},gap:8,children:["done"===r&&(0,p().X)(o.verificationCheck),(0,V.jsx)(A().Z,{style:{...o.stepIndicatorLabel},children:(0,V.jsx)(m()._H,{...a})})]},t):null}))})}function Ce(){return(0,V.jsx)(pe().Z,{buttonStyle:{height:28},title:(0,V.jsx)(m()._H,{id:"asanaImportsTab.confirm.helpCenter",defaultMessage:"Learn more about importing from Asana"}),href:(0,I().UY)("guides.importAsana"),analyticsFrom:"import"})}function Me(e){let{left:t,next:o,back:a,children:s}=e;return(0,V.jsxs)(Z().gq,{justifyContent:"space-between",alignItems:"center",children:[t,(0,V.jsxs)(Z().gq,{alignItems:"center",gap:12,children:[s,(0,V.jsxs)("div",{style:{gap:2},children:[(0,V.jsx)(de().Z,{placement:j().Placement.Top,alignment:j().Alignment.End,render:e=>(0,V.jsx)(ie().Z,{style:{border:0},disabled:a.disabled,onClick:a.onClick,...e,children:a.message}),disableTooltip:!a.renderTooltip,renderTooltip:a.renderTooltip||(()=>(0,V.jsx)(V.Fragment,{}))}),(0,V.jsx)(de().Z,{placement:j().Placement.Top,alignment:j().Alignment.End,render:e=>(0,V.jsx)(le().Z,{style:{marginLeft:16},disabled:o.disabled,onClick:o.onClick,...e,children:o.message}),disableTooltip:!o.renderTooltip,renderTooltip:o.renderTooltip||(()=>(0,V.jsx)(V.Fragment,{}))})]})]})]})}const Pe=function(e){let{tab:t,fetchActiveImportTasks:r}=e;const p=o(527278).Z.getIntl(),g=(0,s().O7)(),f=(0,n().VK)((()=>v().default.state.currentSpaceStore),[]),I=(0,n().VK)((()=>v().default.state.currentSpaceViewStore),[]),j=(0,n().VK)((()=>o(700696).default.state.teams),[]),k=(0,n().Kw)(S().default),T=(0,n().Kw)(o(623521).Z).flowId||o(956057).Il(),{importCompletedTasks:b,useSectionAsStatus:C,loggerPageId:M,selectedProjectsAndTeamspaces:P,selectedWorkspace:F,templateCreationInProgress:B,result:L,workspaces:R}=k,D=(0,a.useCallback)((e=>{switch(e){case"selectProperties":return!0;case"chooseWorkspace":const e=Object.values(P);return e.length&&!e.every((e=>0===e.projects.length&&void 0===e.notionTeamspaceId))&&!e.some((e=>0!==e.projects.length&&!e.notionTeamspaceId))&&!e.some((e=>e.notionTeamspaceId&&0===e.projects.length));case"selectData":return Object.values(P).some((e=>0!==e.projects.length));default:return!1}}),[P]),O=ke();let H=t;return"selectData"===t?H="chooseWorkspace":"confirm"===t&&(H="importComplete"),(0,V.jsxs)(o(504117).ZP,{controlRow:(e=>"selectData"===e?(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,V.jsx)(ie().Z,{style:{border:0},disabled:!R.length,onClick:()=>{r(),S().default.resetImport()},children:(0,V.jsx)(m()._H,{id:"asanaImport.selectData.backButtonText",defaultMessage:"Back"})}),(0,V.jsxs)(Z().gq,{alignItems:"center",gap:8,children:[F&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ce().Z,{on:b,onClick:()=>S().default.setState({...k,importCompletedTasks:!b})}),(0,V.jsx)(A().Z,{children:(0,V.jsx)(m()._H,{id:"asanaImportsTab.selectData.importCompletedTasks",defaultMessage:"Import completed tasks"})})]}),(0,V.jsx)("div",{style:{gap:2},children:(0,V.jsx)(le().Z,{style:{marginLeft:16},disabled:!D(e),onClick:()=>{f&&I&&h().T_({environment:g,currentSpaceViewStore:I,spaceStore:f,teamsStores:j,flowId:T}).catch((()=>{}))},children:B?(0,V.jsxs)(Z().gq,{alignItems:"center",gap:2,children:[(0,V.jsx)(J().Z,{onDarkBackground:!0}),(0,V.jsx)(m()._H,{id:"asanaImportsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"})]}):(0,V.jsx)(m()._H,{id:"asanaImportsTab.selectData.nextButtonText",defaultMessage:"Import"})})})]})]}):"chooseWorkspace"===e?(0,V.jsx)(Me,{left:(0,V.jsx)(Ce,{}),next:{disabled:!D(e),onClick:h().Np,message:p.formatMessage(Se.chooseWorkspaceNextButtonLabel),renderTooltip:D(e)?void 0:()=>(0,V.jsx)(m()._H,{id:"asanaImportsTab.selectData.ImportConfirmationTooltip",defaultMessage:"Please select projects and a teamspace to import into"})},back:{disabled:!1,onClick:()=>{r(),S().default.resetImport()},message:p.formatMessage(Se.chooseWorkspaceBackButtonLabel)},children:F&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ce().Z,{on:b,onClick:()=>S().default.setState({...k,importCompletedTasks:!b})}),(0,V.jsx)(A().Z,{children:(0,V.jsx)(m()._H,{id:"asanaImportsTab.chooseWorkspace.chooseImportCompletedTasks",defaultMessage:"Import completed tasks"})})]})}):"selectProperties"===e?(0,V.jsx)(Me,{left:(0,V.jsx)(Ce,{}),next:{disabled:!D(e),onClick:()=>{f&&I&&h().T_({environment:g,currentSpaceViewStore:I,navigateBeforeTemplateCreation:!0,spaceStore:f,teamsStores:j,flowId:T}).catch((()=>{}))},message:p.formatMessage(Se.startImportButtonText)},back:{disabled:!1,onClick:()=>{S().default.setState({...k,currentTab:"chooseWorkspace"})},message:p.formatMessage(Se.selectPropertiesBackButtonText)},children:(0,V.jsx)(de().Z,{textWrap:!0,renderTooltip:e=>(0,V.jsx)(m()._H,{...e,id:"asanaImportsTab.selectProperties.selectPropertiesTooltip",defaultMessage:"Asana completed field is imported as status in Notion. Switch to importing sections as status and completed as checkboxes.",description:"Tooltip explaining the switcher to map completion to status."}),render:e=>(0,V.jsxs)("div",{...e,style:{display:"flex",gap:8},children:[(0,V.jsx)(ce().Z,{on:C,onClick:()=>S().default.setState({...k,useSectionAsStatus:!C})}),(0,V.jsx)(A().Z,{children:(0,V.jsx)(m()._H,{id:"asanaImportsTab.selectProperties.selectPropertiesStatusMapping",defaultMessage:"Import Section as Status"})})]})})}):"importingData"===e?(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,V.jsx)(Ce,{}),(0,V.jsx)(ie().Z,{disabled:!R.length||B,onClick:()=>{r(),S().default.resetImport()},children:(0,V.jsx)(m()._H,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})]}):"confirm"===e?(0,V.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,V.jsx)(le().Z,{onClick:()=>{M&&y().c4({url:(0,c().Z)({pageId:M,pageModel:(0,d().lA)({table:u().iU,id:M}),baseUrl:x().default.domainBaseUrl,pageVisitSource:i().tY.Import}),environment:g}),S().default.resetImport(),w().default.reset()},children:(0,V.jsx)(m()._H,{id:"asanaImportsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,V.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,V.jsx)(ie().Z,{disabled:!R.length,onClick:()=>{r(),S().default.resetImport()},children:(0,V.jsx)(m()._H,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"importComplete"===e?(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",height:48,paddingTop:35,paddingBottom:28,border:"1px, 0px, 0px, 0px"},children:[(0,V.jsx)(Ce,{}),(0,V.jsx)(le().Z,{style:{width:"181px",height:"32px",padding:"0px, 0px, 0px, 8px",borderRadius:"4px",gap:"4px"},onClick:()=>{if(null!=L&&L.length&&M){const e=L.find((e=>void 0!==e.projectCollectionPageId));y().c4({url:(0,c().Z)({pageId:(null==e?void 0:e.projectCollectionPageId)||M,pageModel:(0,d().lA)({table:u().iU,id:(null==e?void 0:e.projectCollectionPageId)||M}),baseUrl:x().default.domainBaseUrl,pageVisitSource:i().tY.Import}),environment:g})}S().default.resetImport(),w().default.reset()},children:(0,V.jsx)(m()._H,{id:"asanaImportsTab.confirm.viewImportedProjects",defaultMessage:"View imported projects"})})]}):void 0)(H),controlRowPaddingTopBottom:"confirm"===t?0:10,removeBoxShadow:"confirm"===t,contentPaddingLeftRight:25,controlRowPaddingLeftRight:15,getPaddingTopBottom:()=>2,children:[(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,V.jsx)(be,{tab:H}),(0,V.jsx)("div",{style:{position:"absolute",top:12,right:12},children:(0,V.jsx)(K().Z,{onClick:()=>{r(),S().default.resetImport()},style:O.closeButton,hoveredStyle:O.closeButtonHover,children:(0,o(205248).D)(O.closeButtonIcon)})})]}),we(H),(e=>"selectData"===e?(0,V.jsx)(ae,{}):"importingData"===e?(0,V.jsx)(o(243818).Z,{assetSrc:l().Z.images.import.asanaPng}):"confirm"===e?(0,V.jsx)(_,{}):"failure"===e?(0,V.jsx)(o(996185).Z,{assetSrc:l().Z.images.import.asanaPng,loggerPageId:M,failedMessage:p.formatMessage(Se.failed)}):"chooseWorkspace"===e?(0,V.jsx)(o(866747).ZP,{}):"selectProperties"===e?(0,V.jsx)(ve,{}):"importComplete"===e?(0,V.jsx)(q,{}):void 0)(H)]})}},667413:(e,t,o)=>{o.d(t,{Z:()=>uo});o(241792);var a=o(667294),s=()=>o(219727),n=()=>o(142735),r=()=>o(846550),i=()=>o(714230),l=()=>o(801812),c=()=>o(641772),d=()=>o(456681),p=()=>o(1723),u=()=>o(956057),m=()=>o(840156),g=()=>o(788860),f=()=>o(54512),h=()=>o(286310),y=()=>o(998484),x=()=>o(308186),I=()=>o(263184);class j extends I().default{getInitialState(){return{}}}const v=new j;var S=()=>o(824462),w=()=>o(528918);async function k(e){const{environment:t,spaceId:o,requestStore:a}=e;if(!t.currentUser.id)return x().PV({message:"Invalid details"}),void w().x();v.setState({...v.state,[o]:{...v.state[o],showLoader:!0}});const s=await S().callApi({eventName:"getConfluenceSpaces",environment:t,data:{spaceId:o}});if(await(null==a?void 0:a.refresh()),v.setState({...v.state,[o]:{...v.state[o],showLoader:!1}}),"failed"!==s.type)return v.setState({...v.state,[o]:{...v.state[o],spacesResult:s.data}}),s.data;console.error(s.error),x().x2(s),w().x()}var T=()=>o(585558),b=()=>o(684715),C=()=>o(651275),M=()=>o(306558),P=()=>o(594546),F=()=>o(726046),A=()=>o(849668),Z=()=>o(667009),B=()=>o(472719),V=()=>o(148976),_=()=>o(352230),L=()=>o(458121),R=()=>o(189629),D=()=>o(749826);var O=()=>o(148126),q=()=>o(345918),H=()=>o(998901),W=()=>o(199114),N=()=>o(804217),U=()=>o(185717),E=()=>o(145607),z=()=>o(623521),K=()=>o(479694),G=()=>o(308939),Y=()=>o(698850),$=()=>o(853648),Q=()=>o(838266),J=()=>o(405177),X=()=>o(568017),ee=()=>o(876822),te=()=>o(529048);const oe=new(te().Z);var ae=()=>o(855238),se=()=>o(448419),ne=()=>o(1910),re=()=>o(108714),ie=()=>o(312578),le=()=>o(198829),ce=()=>o(255577),de=()=>o(967092),pe=()=>o(388284),ue=()=>o(654133),me=()=>o(67961),ge=()=>o(707513),fe=()=>o(154186),he=o(785893);const ye={fontSize:16,fontWeight:ge().Ue.medium},xe=28,Ie={flexShrink:0,width:xe,height:xe,borderRadius:4,marginRight:10,background:X().O9.white};const je=function(e){let{title:t,actionButton:a,onClick:s,tooltipEvents:n,icon:i,logo:l,caption:c,shouldWrapCaption:d,showSyncBadge:p,showNewBadge:u,showBetaBadge:m}=e;const g=(0,r().Fg)();return(0,he.jsxs)(fe().Z,{...n,onClick:s,style:ve(g),children:[(0,he.jsx)(ke,{icon:i,logo:l}),(0,he.jsxs)("div",{style:{minWidth:0,width:"100%"},children:[(0,he.jsxs)("div",{style:{display:"flex"},children:[(0,he.jsx)("div",{style:ye,children:t}),p&&(0,he.jsx)(o(452210).Z,{}),u&&(0,he.jsx)(o(663631).Z,{}),m&&(0,he.jsx)(o(447832).Z,{}),(0,he.jsx)("div",{style:{marginLeft:"auto"},children:a})]}),(0,he.jsx)(Te,{caption:c,shouldWrapCaption:d})]})]})};function ve(e){return{display:"flex",alignItems:"center",padding:10,paddingRight:8,borderRadius:4,marginBottom:12,cursor:"pointer",boxShadow:e.shadowSM,transition:"background 200ms ease-out",background:e.importOptionsButtonBackground}}function Se(e){return{display:"flex",alignItems:"center",justifyContent:"center",width:xe,height:xe,borderRadius:4,marginRight:8,color:e.mediumTextColor,background:e.importOptionsIconWrapBackground}}function we(e,t){return{fontSize:12,color:e.mediumTextColor,wordBreak:"keep-all",...!t&&{...ge().Yu}}}function ke(e){let{icon:t,logo:o}=e;const a=(0,r().Fg)();return o?(0,he.jsx)("img",{style:Ie,src:o}):t?(0,he.jsx)("div",{style:Se(a),children:t({flexShrink:0,width:xe,height:xe})}):null}function Te(e){let{caption:t,shouldWrapCaption:o}=e;const a=(0,r().Fg)();return t?(0,he.jsx)("div",{style:we(a,o),children:t}):null}const be={whiteSpace:"pre-wrap"};function Ce(e,t){return(0,he.jsx)(ue().Z,{renderTooltip:()=>(0,he.jsx)(me().Z,{style:{color:X().ZP.white},isSmall:!0,children:(0,he.jsx)(g()._H,{id:"AsanaImportOption.helpButton.tooltip",defaultMessage:"Learn about how to import"})}),render:o=>(0,he.jsx)(re().Z,{...o,external:!0,href:e,style:{marginLeft:"auto"},children:(0,he.jsx)(ne().Z,{icon:d().m,ariaLabel:t.formatMessage({id:"AsanaImportOption.helpButton.ariaLabel",defaultMessage:"Learn about how to asana import help icon"})})})})}const Me=function(){const e=(0,n().Kw)(W().default),{account:t,isLoadingAsanaWorkspaces:o,isAccountDelinkingInProgress:r,isAccountLinkingInProgress:l}=e,d=(0,s().O7)(),p=(0,g().YB)(),{device:m}=d,f=(0,n().Kw)(z().Z),x=f.flowId||u().Il();(0,a.useEffect)((()=>{f.flowId||z().Z.setState({flowId:x})}),[x,f]);const I={title:p.formatMessage({id:"asanaImportOption.asanaButton.title",defaultMessage:"Asana"}),logo:i().Z.images.import.asanaPng,caption:l?p.formatMessage({id:"asanaImportOption.asanaButton.accountLinkingInProgress",defaultMessage:"Authenticating..."}):r?p.formatMessage({id:"asanaImportOption.asanaButton.accountDelinkingInProgress",defaultMessage:"Removing account..."}):t,actionButton:t?(j=[{name:p.formatMessage({id:"asanaImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),captionText:p.formatMessage({id:"asanaImportOption.connectAnotherAccount.captionText",defaultMessage:"Ensure you are logged into the new Asana account in your browser"}),action:()=>y().w1({environment:d,flowId:x}).catch((()=>{}))},{name:p.formatMessage({id:"asanaImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>y().XP({environment:d})}],(0,he.jsx)(se().ZP,{popupType:de().kQ.Popup,renderOrigin:e=>o?(0,he.jsx)(ie().Z,{}):(0,he.jsx)(ne().Z,{ariaLabel:p.formatMessage({id:"asanaImportOption.asanaButton.ariaLabel",defaultMessage:"Import from Asana button"}),icon:c().o,...e}),render:e=>{const t={key:"section",render:e=>(0,he.jsx)(pe().Z,{...e}),items:j.map((t=>{let{name:o,captionText:a,action:s}=t;return{key:o,render:e=>(0,he.jsx)(ae().Z,{...e,title:o,caption:a,captionStyle:a?be:void 0}),action:()=>{s(),e.close()}}}))};return(0,he.jsx)(le().Z,{menuType:_().o.Popup,width:200,children:(0,he.jsx)(ce().ZP,{type:ce().iW.Vertical,initialFocus:void 0,sections:[t]})})}})):Ce((0,O().UY)("guides.importAsana"),p),onClick:()=>{}};var j;return(0,he.jsx)(se().ZP,{onClick:async()=>{var e;W().default.resetImport(),o||l||r||(t?(h().ay(d,{import_source:"asana",from:"settings_modal",userId:d.currentUser.id,spaceId:null===(e=ee().default.state.currentSpaceStore)||void 0===e?void 0:e.id,flowId:x}),await y().bA({environment:d}),y().h7()):y().w1({environment:d,flowId:x}).catch((()=>{})))},popupType:m.isMobile?se().Z4.SlideUp:se().Z4.Popup,buttonPopupStore:oe,renderOrigin:e=>{let{onClick:t}=e;return(0,he.jsx)(je,{...I,onClick:t})},render:()=>null})};var Pe=()=>o(154439),Fe=(o(267602),o(470928),()=>o(286977)),Ae=()=>o(374289),Ze=()=>o(409873),Be=()=>o(481476),Ve=()=>o(265640),_e=()=>o(827973),Le=()=>o(666414),Re=()=>o(206352),De=()=>o(291198),Oe=()=>o(708518),qe=()=>o(661297),He=()=>o(906651),We=()=>o(360964),Ne=(o(653476),o(30005),()=>o(732811)),Ue=()=>o(619186);o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class Ee extends I().default{getInitialState(){return{searchQuery:"",selection:new Set}}}const ze=Ee;var Ke=()=>o(740046),Ge=()=>o(838367),Ye=()=>o(251932);const $e=function(e){let{searchInputPlaceholder:t,sections:o,noSearchResultsPlaceholder:a,handleClickImportConfluenceWorkspace:s,onComplete:r}=e;const i=(0,n().qz)(void 0,ze);return(0,Ne().K)((()=>{const e=i.state.selection,[t]=o;if(t){const[o]=t.items;o&&e.add(o.key)}i.emit()})),(0,he.jsx)(le().Z,{menuType:_().o.Popup,header:(0,he.jsx)(Qe,{searchInputPlaceholder:t,store:i}),width:280,maxHeight:350,children:(0,he.jsx)(Je,{sections:o,noSearchResultsPlaceholder:a,handleClickImportConfluenceWorkspace:s,onComplete:r,store:i})})};function Qe(e){let{searchInputPlaceholder:t,store:o}=e;const a=(0,n().qz)(o,ze),s=(0,n().VK)((()=>a.state.searchQuery),[a]);return(0,he.jsx)(pe().Z,{isInput:!0,desktopStyle:{paddingBottom:2},children:(0,he.jsx)(Ke().ZP,{focus:!0,focusAfterAnimation:!0,value:s,onChange:e=>{a.setState({...a.state,searchQuery:e.target.value})},placeholder:t})})}function Je(e){let{sections:t,noSearchResultsPlaceholder:o,handleClickImportConfluenceWorkspace:a,onComplete:s,store:r}=e;const i=(0,n().qz)(r,ze),l=(0,n().VK)((()=>i.state.searchQuery),[i]),c=t.map((e=>{const t=(0,Ue().ZP)(l,e.items,(t=>`${t.key} ${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===c.length)return(0,he.jsx)(pe().Z,{children:(0,he.jsx)(Ge().Z,{title:o})});const d=c.map((e=>{const o=e.items.map((e=>e.name)),n={};return o.forEach((e=>{n[e]=n[e]?n[e]+1:1})),{key:e.name,render:o=>(0,he.jsx)(pe().Z,{...o,title:t.length>1?e.name:void 0}),items:e.items.map((e=>({key:e.key,render:t=>(0,he.jsx)(_e().Z,{...t,title:(0,he.jsxs)(Ye().gq,{gap:2,alignItems:"center",children:[e.name,n[e.name]>1&&(0,he.jsx)(ue().Z,{placement:H().Placement.Right,renderTooltip:()=>e.key,render:t=>(0,he.jsx)(ne().Z,{ariaLabel:`Associated space key is ${e.key}`,disableBackground:!0,icon:Ze().D,...t})})]}),right:void 0!==e.count&&(0,he.jsx)(me().Z,{isSmall:!0,children:e.count})}),action:()=>{a(e.key,e.name),function(e,t){t(e)}(e,s)}})))}}));return(0,he.jsx)(ce().ZP,{type:ce().iW.Vertical,initialFocus:void 0,sections:d})}const Xe={whiteSpace:"pre-wrap"};function et(e){const{key:t,value:o,spaceId:a}=e;v.setState({...v.state,[a]:{...v.state[a],[t]:o}})}function tt(e){var t;const{onSelectOption:o,options:a,currentOption:s}=e,n=null===(t=a.find((e=>{let{key:t}=e;return t===s})))||void 0===t?void 0:t.label,i=(0,r().yK)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,he.jsx)(se().ZP,{popupType:se().Z4.Popup,placementToOrigin:se().pO.Left,renderOrigin:e=>(0,he.jsxs)(Ve().D,{...e,size:"lg",style:{opacity:1},disabled:!1,children:[n,(0,Ae().i)(i.icon)]}),render:e=>{const t={menuType:_().o.Popup,width:250,left:50},s=[{key:"settings-item-section",render:e=>(0,he.jsx)(pe().Z,{...e}),items:a.map((t=>{let{key:a,label:s}=t;return{key:a,action:()=>{o(a),e.close()},render:e=>(0,he.jsx)(_e().Z,{...e,title:s,shouldWrapCaption:!0,right:n===s?(0,he.jsx)("div",{style:{width:14},children:(0,Fe().e)()}):void 0})}}))}];return(0,he.jsx)(le().Z,{...t,children:(0,he.jsx)(ce().ZP,{type:ce().iW.Vertical,sections:s,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}async function ot(e){await async function(e){const{environment:t,requestStore:o,userEmail:a,site:s,access_token:n,instance:r,spaceId:i,username:l,password:c,flowId:d}=e;if(!t.currentUser.id)return x().PV({message:"Invalid details"}),void w().x();const p=await S().callApi({eventName:"authenticateConfluenceUser",environment:t,data:{userEmail:a,site:s,access_token:n,instance:r,userId:t.currentUser.id,spaceId:i,username:l,password:c}});await o.refresh(),"failed"===p.type?(h().a1(t,{import_source:"confluence",data:{import_type:"api",status:"failure",error:p.error},flowId:d}),console.error(p.error),x().x2(p)):(h().a1(t,{import_source:"confluence",data:{import_type:"api",status:"success"},flowId:d}),x().PV({message:"Successfully connected confluence instance."}),await k({environment:t,requestStore:o,spaceId:i})),w().x()}(e)}function at(e){let{environment:t,title:o,email:a,accountType:s,site:i,APIToken:l,personalAccessToken:c,confluenceVersion:d,username:p,password:u,hidePopup:m,spaceId:f,flowId:h,requestStore:y}=e;const x=(0,n().VK)((()=>v.getState()),[]),I=(0,r().yK)((e=>({title:{fontWeight:ge().Ue.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor}})),[]);return(0,he.jsx)(Re().Z,{debugName:"ConfluenceImportOption",capture:!0,children:(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,he.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,he.jsxs)("div",{style:{marginBottom:24},children:[(0,he.jsx)("div",{style:I.title,children:o}),(0,he.jsx)(We().Z,{title:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Confluence"}),href:"https://www.notion.so/help/import-from-confluence",analyticsFrom:"import",style:{marginTop:8}})]}),(0,he.jsxs)("div",{children:[(0,he.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,he.jsx)("label",{htmlFor:"accountType",style:{...I.inputLabels},children:s}),(0,he.jsx)(tt,{onSelectOption:e=>{et({key:"instanceValue",value:e,spaceId:f})},options:[{key:"Cloud",label:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.accountTypeDropdownCloudOption.label",defaultMessage:"Cloud"})},{key:"Server",label:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.accountTypeDropdownServerOption.label",defaultMessage:"Server/On-Premise"})}],currentOption:x[f].instanceValue??"Cloud"})]}),(0,he.jsx)(Le().Z,{size:12,isHidden:!0}),(0,he.jsx)("div",{children:"Server"===x[f].instanceValue?(0,he.jsxs)("div",{children:[(0,he.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center"},children:[(0,he.jsx)("label",{htmlFor:"confluenceVersion",style:{...I.inputLabels},children:d}),(0,he.jsx)(tt,{onSelectOption:e=>{et({key:"confluenceAuthenticationTypeValue",value:e,spaceId:f})},options:[{key:"OAuth2.0",label:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.confluenceVersionDropdownNewVersionOption.label",defaultMessage:"7.9 or later"})},{key:"Basic",label:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.confluenceVersionDropdownOlderVersionOption.label",defaultMessage:"Prior to 7.9"})}],currentOption:x[f].confluenceAuthenticationTypeValue??"OAuth2.0"})]}),(0,he.jsx)(Le().Z,{size:12,isHidden:!0})]}):void 0}),(0,he.jsx)("label",{htmlFor:"email",style:{...I.inputLabels},children:a}),(0,he.jsx)(De().Z,{id:"email",value:x[f].emailValue,autoComplete:"off",autoCapitalize:"off",onChange:e=>{et({key:"emailValue",value:e.target.value,spaceId:f})},showClearButton:!0,placeholder:"sample@gmail.com",inputElementAttributes:{minLength:4}}),(0,he.jsx)(Le().Z,{size:12,isHidden:!0}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"site",style:{...I.inputLabels},children:i}),(0,he.jsx)(De().Z,{id:"site",value:x[f].siteValue,onChange:e=>et({key:"siteValue",value:e.target.value,spaceId:f}),showClearButton:!0,placeholder:"Cloud"===x[f].instanceValue?"https://confluence.atlassian.net":"https://domain.com",inputElementAttributes:{minLength:4}}),(0,he.jsx)(Le().Z,{size:12,isHidden:!0}),"Cloud"===x[f].instanceValue?(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"APIToken",style:{...I.inputLabels},children:l}),(0,he.jsx)(De().Z,{id:"AccessToken",type:"password",value:x[f].tokenValue,onChange:e=>{et({key:"tokenValue",value:e.target.value,spaceId:f})},showClearButton:!0,placeholder:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABC7h",inputElementAttributes:{minLength:4}})]}):(0,he.jsx)("div",{children:(0,he.jsx)("div",{children:"Basic"===x[f].confluenceAuthenticationTypeValue?(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"username",style:{...I.inputLabels},children:p}),(0,he.jsx)(De().Z,{id:"username",value:x[f].usernameValue,onChange:e=>{et({key:"usernameValue",value:e.target.value,spaceId:f})},showClearButton:!0,placeholder:"confluenceUser",inputElementAttributes:{minLength:1}}),(0,he.jsx)(Le().Z,{size:12,isHidden:!0}),(0,he.jsx)("label",{htmlFor:"password",style:{...I.inputLabels},children:u}),(0,he.jsx)(De().Z,{type:"password",id:"password",value:x[f].passwordValue,onChange:e=>{et({key:"passwordValue",value:e.target.value,spaceId:f})},showClearButton:!0,placeholder:"P@S$w0rd",inputElementAttributes:{minLength:1}})]}):(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"AccessToken",style:{fontSize:"14px",fontWeight:"400"},children:c}),(0,he.jsx)(De().Z,{id:"AccessToken",type:"password",value:x[f].tokenValue,onChange:e=>{et({key:"tokenValue",value:e.target.value,spaceId:f})},showClearButton:!0,placeholder:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABCi7h",inputElementAttributes:{minLength:4}})]})})})]})]})]}),(0,he.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,he.jsx)(Le().Z,{size:24}),(0,he.jsx)(He().Z,{isLarge:!0,onClick:async()=>{const e=x[f].instanceValue??"Cloud",o=x[f].confluenceAuthenticationTypeValue??"OAuth2.0";await ot({environment:t,userEmail:x[f].emailValue,site:"/"===x[f].siteValue[x[f].siteValue.length-1]?x[f].siteValue.slice(0,-1):x[f].siteValue,access_token:"Server"===e&&"Basic"===o?void 0:x[f].tokenValue,instance:x[f].instanceValue??"Cloud",username:"Basic"===o?x[f].usernameValue:void 0,password:"Basic"===o?x[f].passwordValue:void 0,spaceId:f,flowId:h,requestStore:y}),m()},children:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,he.jsx)(qe().Z,{size:"lg",style:{marginLeft:12},onClick:()=>{m()},children:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}const st=(0,g().XN)((function(e){var t,o;const a=(0,n().VK)((()=>v.getState()),[]),{spaceStore:r,flowId:l}=e,c=[{name:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi",defaultMessage:"Import via API"}),captionText:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi.message",defaultMessage:"Recommended for the best import experience"}),action:()=>{e.handleApiImportClick("confluence",l),et({key:"open",value:!0,spaceId:r.id})}},{name:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),captionText:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile.message",defaultMessage:"Best for importing partial workspace content"}),action:()=>e.handleFileUploadClick("confluence",l)}],d=(0,s().O7)(),{device:p}=d,{confluenceResult:m,onComplete:f,intl:y,requestStore:x,spaceViewStore:I}=e,{account:j}=m,S={spacesResult:void 0,showLoader:!1},{showLoader:w}=a[r.id]||S;function T(e,t){h().qy(d,{import_source:"confluence",data:{spaceKey:e,spaceName:t},flowId:l})}function C(e){return(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{style:{fontSize:"12px",color:"rgba(55, 53, 47, 0.65)",paddingLeft:"12px"},children:(0,he.jsx)(g()._H,{id:"confluenceImportOption.search.title",defaultMessage:"Select a space to import"})}),(0,he.jsx)($e,{searchInputPlaceholder:y.formatMessage({id:"confluenceImportOption.search.placeholder",defaultMessage:"Search for a Space"}),noSearchResultsPlaceholder:y.formatMessage({id:"confluenceImportOption.search.noResultsPlaceholder",defaultMessage:"No Spaces"}),sections:[e],onComplete:async e=>{await async function(e){const{environment:t,onComplete:o,selectedSpace:a,spaceStore:s,spaceViewStore:n,flowId:r}=e,i=await b().A1({environment:t,spaceStore:s,spaceViewStore:n,space:a,flowId:r||u().Il()});o(i)}({environment:d,onComplete:f,selectedSpace:e,spaceStore:r,spaceViewStore:I,flowId:l})},handleClickImportConfluenceWorkspace:T})]})}const M={title:"Confluence",logo:i().Z.images.import.confluencePng,caption:j,actionButton:j&&w?(0,he.jsx)(ie().Z,{}):j&&e.renderItemActionsButton([{name:y.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),action:()=>e.handleFileUploadClick("confluence",l)},{name:y.formatMessage({id:"confluenceImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{e.handleApiImportClick("confluence",l),et({key:"open",value:!0,spaceId:r.id})}},{name:y.formatMessage({id:"confluenceImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e){const{environment:t,spaceId:o,requestStore:a}=e;v.setState({...v.state,[o]:{...v.state[o],showLoader:!1}}),await Be().DP(t,a,o)}({environment:d,spaceId:r.id,requestStore:x})}]),onClick:()=>{}},P=(null===(t=a[r.id])||void 0===t||null===(t=t.spacesResult)||void 0===t?void 0:t.spaces)||[],F={key:"default",name:y.formatMessage({id:"confluenceImportOption.spacesProperty.defaultName",defaultMessage:"Spaces"}),items:P.map((e=>({id:e.id,key:e.key,name:e.name})))},A={key:"section",render:e=>(0,he.jsx)(pe().Z,{...e}),items:c.map((e=>{let{name:t,captionText:o,action:a}=e;const s={key:t,render:e=>(0,he.jsx)(ae().Z,{...e,title:t,caption:o,captionStyle:o?Xe:void 0}),action:a};return s}))};return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(se().ZP,{popupType:p.isMobile?se().Z4.SlideUp:se().Z4.Popup,onClick:()=>{h().ay(d,{import_source:"confluence",from:"settings_modal",userId:d.currentUser.id,spaceId:r.id,flowId:l}),j&&k({environment:d,requestStore:x,spaceId:r.id}).catch((()=>{}))},buttonPopupStore:U().Z,render:e=>j?function(e){return w?(0,he.jsx)(he.Fragment,{}):C(e)}(F):(0,he.jsx)(le().Z,{menuType:_().o.Popup,width:200,children:(0,he.jsx)(ce().ZP,{onAccept:e.close,type:ce().iW.Vertical,initialFocus:void 0,sections:[A]})}),renderOrigin:e=>{let{onClick:t}=e;return(0,he.jsx)(je,{...M,onClick:t})}}),(0,he.jsx)(Oe().Z,{open:null===(o=a[r.id])||void 0===o?void 0:o.open,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{et({key:"open",value:!1,spaceId:r.id})},render:()=>(0,he.jsx)(at,{hidePopup:()=>{et({key:"open",value:!1,spaceId:r.id})},environment:d,title:(0,he.jsx)(g()._H,{id:"confluenceAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.emailMessage",defaultMessage:"Email"}),(0,he.jsx)(ue().Z,{placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.emailHelpText",defaultMessage:"Email address of the Confluence user importing the data"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Email help text button",disableBackground:!0,icon:Ze().D,...e})})]}),accountType:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.instanceMessage",defaultMessage:"Confluence instance"}),(0,he.jsx)(ue().Z,{style:{width:300,whiteSpace:"normal"},placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.instanceHelperText",defaultMessage:"On Confluence, click 'Help', the (?) next to your profile, then click on 'About Confluence' this will tell you if it is a Server, Cloud or Data Center"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Confluence instance type help text button",disableBackground:!0,icon:Ze().D,...e})})]}),site:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.siteMessage",defaultMessage:"Site"}),(0,he.jsx)(ue().Z,{style:{width:300,whiteSpace:"normal"},placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.siteHelperText",defaultMessage:"The base URL that is used to access Confluence. If you are running on a non-standard port, please provide the input in host:port format"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Confluence site help text button",disableBackground:!0,icon:Ze().D,...e})})]}),APIToken:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,he.jsx)(ue().Z,{placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.stepsToGetConfluenceAccessToken.captions",defaultMessage:"Click to learn how to get access token from Confluence cloud"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Confluence access token help text button",onClick:()=>{window.open("https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account","_blank")},icon:Ze().D,...e})})]}),personalAccessToken:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"}),(0,he.jsx)(ue().Z,{placement:H().Placement.Right,style:{width:300,whiteSpace:"normal"},renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.stepsToGetConfluencePAT.caption",defaultMessage:"Click to learn how to get personal authentication token from Confluence server"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Confluence personal access token help text button",onClick:()=>{window.open("https://confluence.atlassian.com/enterprise/using-personal-access-tokens-1026032365.html","_blank")},icon:Ze().D,...e})})]}),confluenceVersion:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.confluenceVersion",defaultMessage:"Confluence version"}),(0,he.jsx)(ue().Z,{style:{width:300,whiteSpace:"normal"},placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.stepsToGetConfluenceVersion.captions",defaultMessage:"Click to learn how to know the version of Confluence you are running"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Confluence version help text button",onClick:()=>{window.open("https://confluence.atlassian.com/confkb/how-do-i-know-what-version-of-confluence-is-running-179441565.html","_blank")},icon:Ze().D,...e})})]}),username:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.username",defaultMessage:"Username"}),(0,he.jsx)(ue().Z,{placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.usernameHelpText",defaultMessage:"Username of the Confluence user importing the data"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Confluence user's username help text button",disableBackground:!0,icon:Ze().D,...e})})]}),password:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"confluenceAuthentication.password",defaultMessage:"Password"}),(0,he.jsx)(ue().Z,{placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"confluenceAuthentication.passwordHelpText",defaultMessage:"Password of the Confluence user importing the data"}),render:e=>(0,he.jsx)(ne().Z,{ariaLabel:"Confluence user's password help text button",disableBackground:!0,icon:Ze().D,...e})})]}),spaceId:r.id,flowId:l,requestStore:x})})]})}));var nt=()=>o(81954),rt=()=>o(513670),it=()=>o(752127),lt=()=>o(451378),ct=(o(670560),()=>o(715139)),dt=()=>o(18748),pt=()=>o(777346),ut=()=>o(233405);const mt=function(e){let{analyticsName:t,sections:o,searchInputPlaceholder:a,onComplete:s,noSearchResultsPlaceholder:r}=e;const i=(0,n().qz)(void 0,ze);return(0,Ne().K)((()=>{const e=i.state.selection,[t]=o;if(t){const[o]=t.items;o&&e.add(o.key)}i.emit()})),(0,he.jsx)(le().Z,{menuType:_().o.Popup,header:(0,he.jsx)(gt,{analyticsName:t,sections:o,searchInputPlaceholder:a,store:i}),footer:(0,he.jsx)(ft,{sections:o,onComplete:s,store:i}),width:280,maxHeight:350,children:(0,he.jsx)(ht,{sections:o,noSearchResultsPlaceholder:r,analyticsName:t,store:i})})};function gt(e){let{analyticsName:t,sections:o,searchInputPlaceholder:r,store:i}=e;const l=(0,s().O7)(),c=(0,a.useCallback)((()=>function(e,t,o){const{selection:a}=o.state;a.clear(),o.emit(),h().FI(e,{integration_name:t})}(l,t,i)),[l,t,i]),d=(0,a.useCallback)((()=>function(e,t,o,a){const{selection:s}=a.state;for(const n of t)for(const e of n.items)s.add(e.key);a.emit(),h().Vf(e,{integration_name:o})}(l,o,t,i)),[l,o,t,i]),p=(0,n().VK)((()=>i.state.searchQuery),[i]),u=Boolean(p);return(0,he.jsxs)(pe().Z,{isInput:!0,desktopStyle:{paddingBottom:2},children:[(0,he.jsx)(Ke().ZP,{focus:!0,focusAfterAnimation:!0,value:p,onChange:e=>{i.setState({...i.state,searchQuery:e.target.value})},placeholder:r}),(0,he.jsx)(dt().ZP,{isTokenTitle:!0,style:{marginTop:2},title:(0,he.jsxs)("div",{style:{marginLeft:-3},children:[(0,he.jsx)(pt().Z,{onClick:d,disabled:u,disabledFeedback:!0,children:(0,he.jsx)(g()._H,{id:"importPopup.selectAll",defaultMessage:"Select all"})}),(0,he.jsx)(ut().Z,{disabled:u}),(0,he.jsx)(pt().Z,{onClick:c,disabled:u,disabledFeedback:!0,children:(0,he.jsx)(g()._H,{id:"importPopup.deselectAll",defaultMessage:"Deselect all"})})]})})]})}function ft(e){let{sections:t,onComplete:o,store:s}=e;const r=(0,a.useCallback)((()=>function(e,t,o){const{selection:a}=o.state,s=rt().xH(e.map((e=>e.items))),n=[];a.forEach((e=>{const t=s.find((t=>t.key===e));t&&n.push(t)})),t(n)}(t,o,s)),[t,o,s]),i=0===(0,n().VK)((()=>s.state.selection.size),[s]);return(0,he.jsx)(pe().Z,{topBorder:!0,desktopStyle:{paddingTop:8,paddingBottom:8},children:(0,he.jsx)(dt().ZP,{title:(0,he.jsx)(He().Z,{disabled:i,onClick:r,children:(0,he.jsx)(g()._H,{id:"integrationImportPopup.importButton.label",defaultMessage:"Import"})})})})}function ht(e){let{sections:t,noSearchResultsPlaceholder:o,analyticsName:a,store:r}=e;const i=(0,s().O7)(),{searchQuery:l,selection:c}=(0,n().VK)((()=>{const{searchQuery:e,selection:t}=r.state;return{searchQuery:e,selection:t}}),[r]),d=t.map((e=>{const t=(0,Ue().ZP)(l,e.items,(t=>`${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===d.length)return(0,he.jsx)(pe().Z,{children:(0,he.jsx)(Ge().Z,{title:o})});const p=d.map((e=>({key:e.name,render:o=>(0,he.jsx)(pe().Z,{...o,title:t.length>1?e.name:void 0}),items:e.items.map((e=>{const t=()=>function(e,t,o,a){const{selection:s}=a.state;s.has(e.key)?(s.delete(e.key),h().Z3(t,{integration_name:o})):(s.add(e.key),h().Gl(t,{integration_name:o})),a.emit()}(e,i,a,r);return{key:e.key,render:o=>(0,he.jsx)(_e().Z,{...o,title:e.name,icon:(0,he.jsx)(ct().Z,{checked:c.has(e.key),size:16,onClick:t}),right:void 0!==e.count&&(0,he.jsx)(me().Z,{isSmall:!0,children:e.count})}),action:t}}))})));return(0,he.jsx)(ce().ZP,{type:ce().iW.Vertical,initialFocus:void 0,sections:p})}const yt=function(e){let{requestStore:t,analyticsFrom:o,evernoteResult:r,renderItemActionsButton:c,defaultActionButton:d,spaceStore:p,spaceViewStore:u,userSettingsStore:m,onComplete:f}=e;const y=(0,s().O7)(),x=(0,g().YB)(),I=(0,n().VK)((()=>lt().Z.getState()),[]),j=(0,a.useCallback)((()=>async function(e,t,o,a){var s;const{isFetchingNotebooks:n}=a;n&&await T().B({environment:e,requestStore:t});const r=z().Z.getOrCreateFlowId();h().ay(e,{import_source:"evernote",from:o,flowId:r,userId:e.currentUser.id,spaceId:null===(s=ee().default.state.currentSpaceStore)||void 0===s?void 0:s.id})}(y,t,o,I)),[y,t,o,I]),{device:v}=y,{userInfo:k}=r,{notebooksResponse:C,showLoader:M}=I,P=(null==C?void 0:C.notebooks)||[],F=rt().vM(P,(e=>e.stack||""));(0,l().r5)((async()=>{I.linkingAccount||(await t.refresh(),w().x())}),[I.linkingAccount,t]);const A=Object.keys(F).map((e=>{const t=e||"Top-Level";return{key:t,name:t,items:(F[e]||[]).map((e=>({key:e.guid,name:e.title,count:e.noteCount})))}})),Z={title:"Evernote",logo:i().Z.images.import.evernotePng,shouldWrapCaption:!k,caption:k?k.name||k.username||k.email:void 0,actionButton:k&&M?(0,he.jsx)(ie().Z,{}):k?c([{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.learnMore",defaultMessage:"Learn more"}),action:()=>function(e){it().D({environment:e,url:(0,O().UY)("guides.importEvernote")})}(y)},{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>E().Z.setState({open:!0})},{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>xt(t,y)},{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e,t){await S().callApi({eventName:"disconnectEvernote",environment:t,data:{}}),lt().Z.setState({notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1}),await e.refresh(),h().qJ(t,{integration_name:"evernote"})}(t,y)}]):d,onClick:()=>{}};return(0,he.jsx)(se().ZP,{popupType:v.isMobile?se().Z4.SlideUp:se().Z4.Popup,buttonPopupStore:E().Z,onClick:j,render:()=>M?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(mt,{searchInputPlaceholder:x.formatMessage({id:"evernoteImportOption.search.placeholder",defaultMessage:"Search for a notebookâ€¦"}),noSearchResultsPlaceholder:x.formatMessage({id:"evernoteImportOption.search.noResultsPlaceholder",defaultMessage:"No notebooks"}),analyticsName:"evernote",sections:A,onComplete:e=>async function(e,t,o,a,s,n,r){const{notebooks:i}=e,l=i.filter((e=>Boolean(t.find((t=>t.key===e.guid)))));h().G7(r,{integration_name:"evernote",count:t.length});const c=await b().am({environment:r,spaceStore:o,spaceViewStore:a,userSettingsStore:s,notebooks:l});h().qy(r,{import_source:"evernote",data:{notebooks:l.map((e=>e.guid)),userId:r.currentUser.id,spaceId:(0,nt().J)(o.id)},flowId:z().Z.getOrCreateFlowId()}),n(c)}(C,e,p,u,m,f,y)}),renderOrigin:e=>{let{onClick:o}=e;return(0,he.jsx)(je,{...Z,onClick:k?o:()=>xt(t,y)})}})};async function xt(e,t){await T().e({environment:t,requestStore:e})}var It=()=>o(819026),jt=()=>o(691752),vt=()=>o(862059);const St=new(te().Z);const wt=function(e){let{requestStore:t,renderItemActionsButton:o,spaceStore:r,spaceViewStore:l,pageStore:c,analyticsFrom:d,onComplete:p}=e;const u=(0,s().O7)(),m=(0,g().YB)(),{loading:f,areAccountsFetched:y,accountsResponse:x,selectedFileId:I}=(0,n().VK)((()=>{const{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:a}=vt().default.state;return{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:a}}),[]),j=(0,n().VK)((()=>St.state.open),[]),{device:v}=u,w=x.accounts,k=(0,a.useCallback)((async()=>{await Tt({environment:u,requestStore:t,areAccountsFetched:y,analyticsFrom:d,googleDriveResponse:x,pageStore:c,spaceStore:r,spaceViewStore:l,onComplete:p,selectedFileId:I})}),[u,t,y,d,c,p,l,r,x,I]),T={title:"Google Docs",logo:i().Z.images.import.googleDocsPng,actionButton:w&&w.length>0&&o([{name:m.formatMessage({id:"googleDocImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:a,environment:s,analyticsFrom:n,pageStore:r,onComplete:i}=e,l=await It().qN(s);l?(h().a1(s,{import_source:"gDocs",data:{import_type:"api",status:"success"}}),await t.refresh(),Q().default.setState({...Q().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await Tt({environment:s,requestStore:t,areAccountsFetched:!1,analyticsFrom:n,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:a,onComplete:i,pageStore:r})):h().a1(s,{import_source:"gDocs",data:{import_type:"api",status:"failure"}})}({environment:u,requestStore:t,analyticsFrom:d,pageStore:c,spaceStore:r,spaceViewStore:l,onComplete:p})},{name:m.formatMessage({id:"googleDocImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove All Accounts"}),action:()=>async function(e,t,o){if(!o||0===o.length)return;o.forEach((async e=>{await S().callApi({eventName:"disconnectDrive",environment:t,data:{googleUserId:e.accountId}})})),vt().default.setState({...vt().default.state,accountsResponse:{accounts:[]},loading:!1}),await e.refresh()}(t,u,w)}]),onClick:()=>{}},b={type:"drive",title:(0,he.jsx)(g()._H,{defaultMessage:"Browse Google Drive",id:"googleDriveBlock.mediaPicker.googleDriveTab.title"}),onSelect:async e=>await kt({account:e,onComplete:p,requestStore:t,spaceStore:r,spaceViewStore:l,analyticsFrom:d,pageStore:c,environment:u,selectedFileId:I})};return(0,he.jsx)(se().ZP,{open:j,popupType:v.isMobile?se().Z4.SlideUp:se().Z4.Popup,buttonPopupStore:St,onClick:k,onClose:()=>{vt().default.setState({...vt().default.state,selectedFileId:void 0})},render:()=>f?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(jt().v3,{tab:b,accounts:w,type:jt().s5.Docs}),renderOrigin:e=>{let{onClick:t}=e;return(0,he.jsx)(je,{...T,onClick:t})}})};async function kt(e){const{account:t,requestStore:o,spaceStore:a,spaceViewStore:s,environment:n,analyticsFrom:r,pageStore:i,onComplete:l,selectedFileId:c}=e;t&&t.token||await async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:a,environment:s,analyticsFrom:n,pageStore:r,onComplete:i,selectedFileId:l}=e;await It().qN(s),await t.refresh(),await Tt({environment:s,requestStore:t,areAccountsFetched:!1,analyticsFrom:n,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:a,onComplete:i,pageStore:r,selectedFileId:l})}({environment:n,requestStore:o,analyticsFrom:r,spaceStore:a,spaceViewStore:s,onComplete:l,pageStore:i,selectedFileId:c}),t&&t.token&&(c?await bt({fileId:c,token:t.token,environment:n,spaceStore:a,spaceViewStore:s,analyticsFrom:r,onComplete:l,pageStore:i}):await(0,Z().v)({environment:n,accessToken:t.token.accessToken,viewType:"documents",from:"import_google_doc",callback:async e=>{await bt({fileId:e,token:t.token,environment:n,spaceStore:a,spaceViewStore:s,analyticsFrom:r,onComplete:l,pageStore:i})}}),St.setState({...St.state,open:!1}))}async function Tt(e){var t;const{requestStore:o,spaceStore:a,spaceViewStore:s,environment:n,analyticsFrom:r,pageStore:i,onComplete:l,googleDriveResponse:c,areAccountsFetched:d,selectedFileId:p}=e;let u=c;d||(vt().default.setState({...vt().default.state,loading:!0}),u=await It().vQ(n),u&&u.accounts&&vt().default.setState({...vt().default.state,accountsResponse:u,areAccountsFetched:!0,loading:!1})),h().ay(n,{import_source:"gdocs",from:r,userId:n.currentUser.id,spaceId:null===(t=ee().default.state.currentSpaceStore)||void 0===t?void 0:t.id});const m=u&&1===u.accounts.length?u.accounts[0]:void 0;return m?await kt({account:m,onComplete:l,requestStore:o,spaceStore:a,spaceViewStore:s,analyticsFrom:r,pageStore:i,environment:n,selectedFileId:p}):(St.setState({...St.state,open:!0}),await o.refresh()),u}async function bt(e){const{fileId:t,token:o,environment:a,spaceStore:s,spaceViewStore:n,analyticsFrom:r,onComplete:i,pageStore:l}=e;l&&(vt().default.setState({...vt().default.state,loading:!0}),await b().xG({environment:a,fileId:t,token:o,spaceStore:s,spaceViewStore:n,pageStore:l,analyticsFrom:r}).then((e=>{e&&(f().W(a,{from:"import",type:"page",new_page_id:e.id,creating_block_id:e.id,parent_collection_id:e.getParentCollectionIdUpToTwoLevels()}),i(e))})).catch((()=>{})),vt().default.setState({...vt().default.state,loading:!1,selectedFileId:void 0}))}o(228244);var Ct=()=>o(887274);const Mt=function(e){const t=(0,s().O7)(),{device:a}=t,{jiraResult:r,spaceStore:l,requestStore:c}=e,d=(0,n().VK)((()=>q().lQ(l)),[l]),p=(0,n().VK)((()=>q().Cx(l)),[l]),{account:m,isOwner:f}=(0,n().VK)((()=>{const e=r.account;if(e){const t=o(138912).default.state;if(t.loaded){const o=e.find((e=>t.externalAuthentications.some((t=>t.id===e.id))));return o?{account:o,isOwner:Boolean(o)}:{account:e[0],isOwner:!1}}}return{}}),[r]),h=(0,g().YB)(),y=[{name:h.formatMessage({id:"jiraImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{Ct().jW({environment:t,from:"import_settings",action:"add_account"});const e=G().ZP.createNewFlowId();(0,P().j)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:e}}})}}];m&&f&&y.push({name:h.formatMessage({id:"jiraImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>{Be().YX({environment:t,requestStore:c,botId:m.id})}});const x={title:"Jira",logo:i().Z.images.externalIntegrations.jiraIconPng,onClick:()=>{},caption:null==m?void 0:m.site,actionButton:d&&m?e.renderItemActionsButton(y):null,showNewBadge:e.showNewBadge,showSyncBadge:e.showSyncBadge};return p?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(se().ZP,{renderOrigin:e=>{let{onClick:o}=e;return(0,he.jsx)(je,{...x,onClick:()=>{const e=u().Il();G().ZP.setState({...G().ZP.state,flowId:e,spaceId:l.id,botId:null==m?void 0:m.id}),Ct().jW({environment:t,from:"import_settings",action:"show_teamspaces"}),(0,P().j)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:e}}})}})},popupType:a.isMobile?se().Z4.SlideUp:se().Z4.Popup,render:()=>(0,he.jsx)(he.Fragment,{})})};var Pt=()=>o(454315);const Ft={whiteSpace:"pre-wrap"};function At(e){const t=(0,n().Kw)(Y().default),{environment:o,spaceStore:a,flowId:s}=e;return(0,he.jsx)(Oe().Z,{open:t.showAuthPopup,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{Y().default.setState({...Y().default.state,showAuthPopup:!1})},render:()=>(0,he.jsx)(Zt,{hidePopup:()=>{Y().default.setState({...Y().default.state,showAuthPopup:!1})},environment:o,title:(0,he.jsx)(g()._H,{id:"mondayAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"mondayAuthentication.emailMessage",defaultMessage:"Email"}),(0,he.jsx)(ue().Z,{placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"mondayAuthentication.emailHelpText",defaultMessage:"Email address of the Monday.com user importing the data"}),render:e=>(0,he.jsx)(ne().Z,{...e,ariaLabel:"Email help text button",disableBackground:!0,icon:Ze().D})})]}),APIToken:(0,he.jsxs)(Ye().gq,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(g()._H,{id:"mondayAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,he.jsx)(ue().Z,{placement:H().Placement.Right,renderTooltip:()=>(0,he.jsx)(g()._H,{id:"mondayAuthentication.stepsToGetMondayAPIToken.captions",defaultMessage:"Click to learn how to get API token from Monday.com"}),render:e=>(0,he.jsx)(ne().Z,{...e,ariaLabel:"Monday.com API token help text button",onClick:()=>{window.open("https://developer.monday.com/api-reference/docs/authentication#accessing-api-tokens","_blank")},icon:Ze().D})})]}),flowId:s,spaceStore:a})})}function Zt(e){let{environment:t,title:o,email:a,APIToken:s,hidePopup:i,flowId:l,spaceStore:c}=e;const d=(0,n().Kw)(Y().default),p=(0,r().yK)((e=>({title:{fontWeight:ge().Ue.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor}})),[]);return(0,he.jsx)(Re().Z,{debugName:"MondayImportOption",capture:!0,children:(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,he.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,he.jsxs)("div",{style:{marginBottom:24},children:[(0,he.jsx)("div",{style:p.title,children:o}),(0,he.jsx)(Pt().u,{})]}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"email",style:{...p.inputLabels},children:a}),(0,he.jsx)(De().Z,{id:"email",value:d.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{Y().default.setState({...Y().default.state,email:e.target.value})},showClearButton:!0,placeholder:"sample@gmail.com",inputElementAttributes:{minLength:4}}),(0,he.jsx)(Le().Z,{size:12,isHidden:!0}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"APIToken",style:{...p.inputLabels},children:s}),(0,he.jsx)(De().Z,{id:"AccessToken",type:"password",value:d.APIToken,onChange:e=>{Y().default.setState({...Y().default.state,APIToken:e.target.value})},showClearButton:!0,placeholder:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABC7h",inputElementAttributes:{minLength:4}})]})]})]}),(0,he.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,he.jsx)(Le().Z,{size:24}),(0,he.jsx)(He().Z,{isLarge:!0,onClick:async()=>{await C().qF({environment:t,userEmail:d.email,APIToken:d.APIToken,flowId:l,spaceId:c.id}),i()},children:(0,he.jsx)(g()._H,{id:"mondayAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,he.jsx)(qe().Z,{size:"lg",style:{marginLeft:12},onClick:()=>{i()},children:(0,he.jsx)(g()._H,{id:"mondayAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}const Bt=function(e){const t=(0,n().Kw)(Y().default),o=(0,n().Kw)(z().Z),{account:r,isLoadingMondayWorkspaces:l}=t,{spaceStore:d}=e,p=(0,s().O7)(),m=(0,g().YB)(),{device:f}=p,y=o.flowId||u().Il();(0,a.useEffect)((()=>{o.flowId||z().Z.setState({flowId:y})}),[y,o]);const x={title:m.formatMessage({id:"mondayImportOption.mondayButton.title",defaultMessage:"Monday.com"}),logo:i().Z.images.import.mondayPng,showNewBadge:!0,caption:r,actionButton:r?(I=[{name:m.formatMessage({id:"mondayImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{Y().default.setState({...Y().default.state,showAuthPopup:!0})}},{name:m.formatMessage({id:"mondayImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>C().sC({environment:p,spaceId:d.id})}],(0,he.jsx)(se().ZP,{popupType:de().kQ.Popup,renderOrigin:e=>l?(0,he.jsx)(ie().Z,{}):(0,he.jsx)(ne().Z,{ariaLabel:m.formatMessage({id:"mondayImportOption.mondayButton.ariaLabel",defaultMessage:"Import from Monday.com button"}),icon:c().o,...e}),render:e=>{const t=I.map((t=>{let{name:o,captionText:a,action:s}=t;const n={key:o,render:e=>(0,he.jsx)(ae().Z,{...e,title:o,caption:a,captionStyle:a?Ft:void 0}),action:()=>{s(),e.close()}};return n})),o={key:"section",render:e=>(0,he.jsx)(pe().Z,{...e}),items:t};return(0,he.jsx)(le().Z,{menuType:_().o.Popup,width:200,children:(0,he.jsx)(ce().ZP,{type:ce().iW.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var I;return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(se().ZP,{onClick:async()=>{Y().default.resetImport(),r?(h().ay(p,{import_source:"monday.com",from:e.analyticsFrom,userId:p.currentUser.id,spaceId:d.id,flowId:y}),await C().FM({environment:p,spaceId:d.id}),C().h7()):Y().default.setState({...Y().default.state,showAuthPopup:!0})},popupType:f.isMobile?se().Z4.SlideUp:se().Z4.Popup,buttonPopupStore:oe,renderOrigin:e=>{let{onClick:t}=e;return(0,he.jsx)(je,{...x,onClick:t})},render:()=>null}),(0,he.jsx)(At,{environment:p,spaceStore:d,flowId:y})]})};var Vt=()=>o(889919),_t=()=>o(205248),Lt=()=>o(968061),Rt=()=>o(225771),Dt=(o(821057),()=>o(396136)),Ot=()=>o(720866);const qt=(0,o(830742).LS)("importQuip");var Ht=()=>o(527278);class Wt extends I().default{getInitialState(){return{showAuthPopup:!1,email:void 0,spaceId:void 0,personalAccessToken:void 0,companyId:void 0,account:void 0,accountEmail:void 0,isFetchingAccount:!1,authResponse:void 0,invalidFields:[]}}resetImport(){const{account:e,accountEmail:t}=this.getState();this.setState({...this.getInitialState(),account:e,accountEmail:t})}}const Nt=new Wt;var Ut=()=>o(826955),Et=()=>o(782646);const zt=(0,g().vU)({importFailed:{id:"quipActions.importFailedError.message",defaultMessage:"Import failed"},importingFromQuipMessage:{id:"quipActions.importingFromQuip.loadingMessage",defaultMessage:"Importing from quip."},importRootPageTitle:{id:"quipImport.importRootPageTitle",defaultMessage:"Import {date}"}});async function Kt(e){const{environment:t,spaceStore:o}=e;if(!t.currentUser.id)throw new Error("User does not exist");let a,s;w().j({message:zt.importingFromQuipMessage}),Nt.setState({...Nt.state});try{const e=await S().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o.id}});if("success"!==e.type)throw new Error("User account does not exist");a=e.data.email;const n=(0,Et().Lj)(t,qt,{userId:t.currentUser.id,email:a,page:{spaceId:o.id}});for await(const t of n){if(t.error)throw t.error;t.value.isComplete||(t.value.rootPageId&&(s=t.value.rootPageId),w().j(t.value.status))}if(!s)throw new Error("No root page");w().x();return Ut().G.createChildStore(o,{id:s,table:Dt().iU,spaceId:o.id})}catch(n){throw x().UW(Ht().Z.formatMessage(zt.importFailed)),w().x(),new Error((0,Ot().t)(n).message)}}var Gt=()=>o(765513);const Yt={whiteSpace:"pre-wrap"},$t=(0,g().vU)({successfullyConnected:{id:"quipActions.successfullyConnected.message",defaultMessage:"Successfully connected quip instance"},authenticationFailed:{id:"quipActions.authenticationFailed.message",defaultMessage:"Authentication Failed (Please check user details)"},disconnectFailed:{id:"quipActions.disconnectFailed.message",defaultMessage:"Disconnect Account Failed"},headerTitle:{id:"quipActions.header.title",defaultMessage:"Import from Quip"},importCta:{id:"quipActions.importCta",defaultMessage:"Import"}});function Qt(){return(0,r().yK)((e=>({title:{fontWeight:ge().Ue.semibold},inputLabels:{fontSize:ge().JB.UISmall.desktop,fontWeight:ge().Ue.semibold,font:"SF Pro",lineHeight:ge().Nv.UISmall.desktop,color:e.lightTextColor},placeHolder:{font:"SF Pro",fontWeight:ge().Ue.regular,fontSize:ge().JB.UIRegular.desktop,lineHeight:ge().Nv.UISmall.desktop},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor},inputBox:{width:"100%",height:28,padding:4,gap:4,radius:"default"},captionText:{font:"SF Pro",fontWeight:ge().Ue.regular,lineHeight:ge().Nv.UISmall.desktop,fontSize:ge().JB.UISmall.desktop,color:e.lightTextColor},spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,left:0},wrapper:{padding:"20px 14px 10px 14px",height:"100%",display:"flex",flexDirection:"column"},header:{fontWeight:ge().Ue.medium,fontSize:17,textAlign:"center",marginTop:8},description:{fontWeight:ge().Ue.regular,color:e.mediumTextColor,fontSize:ge().JB.UIRegular.desktop,maxHeight:72,textAlign:"center",padding:"0px 68px",marginBottom:24},icon:{height:40,width:40},iconGroup:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gridColumnGap:9,marginBottom:9},arrowRight:{width:20,height:20,opacity:.4,fontWeight:ge().Ue.bold,padding:3},notionLogo:{height:40,width:40,color:e.regularIconColor},closeButton:{position:"absolute",top:14,right:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.mediumTextColor},headerWrapper:{marginBottom:18},invalidInput:{boxShadow:e.outlineRedInputBoxShadow},buttonItem:{color:e.mediumTextColor}})),[])}function Jt(e){const t=(0,n().Kw)(Nt),o=Qt(),{isFetchingAccount:a}=t,{environment:s,spaceStore:r,onComplete:i}=e;return(0,he.jsx)(Oe().Z,{open:t.showAuthPopup,innerStyle:{width:450,height:"fit-content",overflow:"scroll",borderRadius:5,maxHeight:675,minHeight:300,padding:6},onDismiss:()=>{Nt.setState({...Nt.state,invalidFields:[],showAuthPopup:!1,personalAccessToken:"",email:""})},render:()=>a?(0,he.jsx)(Xt,{loading:t.isFetchingAccount}):(0,he.jsxs)("div",{style:o.wrapper,children:[(0,he.jsx)(to,{handleModalClose:()=>{Nt.setState({...Nt.state,showAuthPopup:!1})}}),(0,he.jsx)(eo,{email:(0,he.jsx)(Ye().gq,{style:{alignItems:"center",gap:2},children:(0,he.jsx)(g()._H,{id:"quipAuthentication.emailMessage",defaultMessage:"Email"})}),personalAccessToken:(0,he.jsx)(Ye().gq,{style:{alignItems:"center",gap:2},children:(0,he.jsx)(g()._H,{id:"quipAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"})})}),(0,he.jsx)(oo,{children:(0,he.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,he.jsx)(He().Z,{onClick:async()=>{await async function(e){const{environment:t,email:o,personalAccessToken:a,spaceStore:s,companyId:n,account:r}=e,i=function(e){const{email:t,personalAccessToken:o}=e,a=[];t&&Rt().B(t,"email")||a.push("email");o||a.push("personalAccessToken");return a}({email:o,personalAccessToken:a});if(i.length)return void Nt.setState({...Nt.state,showAuthPopup:!0,isFetchingAccount:!1,invalidFields:i});if(r){if(!(await no({environment:t,spaceStore:s})))return}const l=await async function(e){const{environment:t,email:o,personalAccessToken:a,spaceId:s,companyId:n}=e;if(Nt.setState({...Nt.state,isFetchingAccount:!0}),!(t.currentUser.id&&o&&s&&a))return;const r=await S().callApi({eventName:"authenticateQuipUser",environment:t,data:{userId:t.currentUser.id,email:o,personalAccessToken:a,spaceId:s,companyId:n}});return r&&"failed"!==r.type?r.data:void 0}({environment:t,email:o,personalAccessToken:a,spaceId:s.id,companyId:n});void 0===l?(x().PV({message:Ht().Z.formatMessage($t.authenticationFailed)}),Nt.setState({...Nt.state,showAuthPopup:!0,isFetchingAccount:!1})):Nt.setState({...Nt.state,showAuthPopup:!1,isFetchingAccount:!1})}({environment:s,email:t.email,spaceStore:r,personalAccessToken:t.personalAccessToken,companyId:t.companyId,account:t.account});const e=await Kt({environment:s,spaceStore:r});i(e)},children:(0,he.jsx)(g()._H,{...$t.importCta})})})})]})})}function Xt(e){const t=Qt();return(0,he.jsx)(he.Fragment,{children:e.loading&&(0,he.jsx)("div",{style:t.spinner,children:(0,he.jsx)(ie().Z,{style:{position:"absolute",top:"50%",left:"50%"}})})})}function eo(e){let{email:t,personalAccessToken:o}=e;const a=(0,n().Kw)(Nt),s=Qt();return(0,he.jsx)(Re().Z,{debugName:"QuipImportOption",capture:!0,children:(0,he.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%"},children:(0,he.jsx)("div",{style:{overflowY:"scroll"},children:(0,he.jsxs)("div",{style:{padding:2},children:[(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"email",style:{...s.inputLabels},children:t}),(0,he.jsx)(Le().Z,{size:8,isHidden:!0}),(0,he.jsx)(De().Z,{id:"email",value:a.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{Nt.setState({...Nt.state,email:e.target.value,invalidFields:[]})},showClearButton:!0,placeholder:"sample@gmail.com",style:{...s.inputBox,...a.invalidFields.includes("email")&&s.invalidInput}})]}),(0,he.jsx)(Le().Z,{size:14,isHidden:!0}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"personalAccessToken",style:{...s.inputLabels},children:o}),(0,he.jsx)(Le().Z,{size:8,isHidden:!0}),(0,he.jsx)(De().Z,{id:"personalAccessToken",type:"password",value:a.personalAccessToken,showClearButton:!0,onChange:e=>{Nt.setState({...Nt.state,personalAccessToken:e.target.value,invalidFields:[]})},placeholder:"Paste your token here",inputElementAttributes:{minLength:4},style:{...s.inputBox,...a.invalidFields.includes("personalAccessToken")&&s.invalidInput}}),(0,he.jsx)(Le().Z,{size:8,isHidden:!0}),(0,he.jsx)("div",{style:{...s.captionText,marginBottom:18},children:(0,he.jsx)(g()._H,{id:"quipAuthentication.stepsToGetPersonalAccessToken",defaultMessage:"<getapitokenlink>Get Personal Access Token</getapitokenlink>",values:{getapitokenlink:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,he.jsx)(Gt().Z,{external:!0,href:"https://quip.com/dev/token",onClick:()=>{},children:t})}}})})]})]})})})})}function to(e){let{handleModalClose:t,caption:o,title:a}=e;const s=Qt(),n=a||$t.headerTitle;return(0,he.jsxs)("div",{style:s.headerWrapper,children:[(0,he.jsx)(fe().Z,{onClick:t,style:s.closeButton,hoveredStyle:s.closeButtonHover,children:(0,_t().D)(s.closeButtonIcon)}),(0,he.jsxs)("div",{style:s.iconGroup,children:[(0,he.jsx)("img",{style:s.icon,src:i().Z.images.import.quipPng,alt:"Quip Icon"}),(0,Vt().k)(s.arrowRight),(0,Lt().h)(s.notionLogo)]}),(0,he.jsx)("div",{style:s.header,children:(0,he.jsx)(g()._H,{...n})}),o]})}function oo(e){return(0,he.jsx)("div",{children:e.children})}const ao=function(e){const t=(0,n().Kw)(z().Z),o=(0,n().Kw)(Nt),{spaceStore:r,onComplete:l}=e,{account:d,authResponse:p,accountEmail:m}=o,f=(0,s().O7)(),h=(0,g().YB)(),{device:y}=f,x=Qt(),I=(0,a.useCallback)((async()=>{await async function(e){const{environment:t,spaceStore:o,account:a,authResponse:s}=e;if(a)Nt.setState({...Nt.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0});else{Nt.setState({...Nt.state,isFetchingAccount:!0});let e=s;void 0===e&&(e=await async function(e){const{environment:t,spaceId:o}=e;let a={account:"",email:""};try{const e=await S().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o}});"success"===e.type&&(a=e.data)}catch(s){}finally{return a}}({environment:t,spaceId:o.id})),e&&""!==e.account?Nt.setState({...Nt.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0,account:e.account,accountEmail:e.email}):Nt.setState({...Nt.state,isFetchingAccount:!1,showAuthPopup:!0})}}({environment:f,account:d,spaceStore:r,authResponse:p})}),[f,d,r,p]),j=t.flowId||u().Il();(0,a.useEffect)((()=>{t.flowId||z().Z.setState({flowId:j})}),[j,t]);const v={title:h.formatMessage({id:"quipImportOption.quipButton.title",defaultMessage:"Quip"}),logo:i().Z.images.import.quipPng,actionButton:d?(w=[{name:h.formatMessage({id:"quipImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{so({})}},{name:h.formatMessage({id:"quipImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove account"}),action:async()=>{await no({environment:f,spaceStore:r})}}],(0,he.jsx)(se().ZP,{popupType:de().kQ.Popup,renderOrigin:e=>(0,he.jsx)(ne().Z,{ariaLabel:h.formatMessage({id:"quipImportOption.quipButton.ariaLabel",defaultMessage:"Import from Quip.com button"}),icon:c().o,...e}),render:e=>{const t=w.map((t=>{let{name:o,captionText:a,action:s}=t;const n={key:o,render:e=>(0,he.jsx)(ae().Z,{...e,title:o,caption:a,captionStyle:a?Yt:void 0}),action:()=>{s(),e.close()}};return n})),o={key:"section",render:e=>(0,he.jsx)(pe().Z,{...e}),items:t};return(0,he.jsx)(le().Z,{menuType:_().o.Popup,width:200,children:(0,he.jsx)(ce().ZP,{type:ce().iW.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var w;return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(se().ZP,{onClick:I,popupType:y.isMobile?se().Z4.SlideUp:se().Z4.Popup,renderOrigin:e=>{let{onClick:t}=e;return(0,he.jsx)(je,{...v,onClick:t})},render:()=>d?(0,he.jsxs)(a.Fragment,{children:[(0,he.jsx)(pe().Z,{children:(0,he.jsx)(_e().Z,{title:(0,he.jsx)(g()._H,{defaultMessage:"Import from {email}",id:"quipImportOption.menuItem.email.label",values:{email:m}}),onClick:async()=>{const e=await Kt({environment:f,spaceStore:r});l(e)},focused:!1})}),(0,he.jsx)(pe().Z,{topBorder:!0,children:(0,he.jsx)(_e().Z,{title:(0,he.jsx)(g()._H,{defaultMessage:"Connect another account",id:"quipImportOption.menuItem.connectAnotherQuipAccount.label"}),onClick:()=>so({}),style:x.buttonItem,focused:!1})})]}):null}),(0,he.jsx)(Jt,{environment:f,spaceStore:r,flowId:j,onComplete:l})]})};function so(e){Nt.setState({...Nt.state,isFetchingAccount:!1,showAuthPopup:!0,personalAccessToken:void 0,email:void 0,companyId:void 0})}async function no(e){const{environment:t,spaceStore:o}=e,a=await async function(e){const{environment:t,spaceId:o}=e,a=await S().callApi({eventName:"disconnectQuipAccount",environment:t,data:{spaceId:o}});if(a&&"failed"!==a.type)return a.data}({environment:t,spaceId:o.id});return void 0===a?(x().PV({message:Ht().Z.formatMessage($t.disconnectFailed)}),!1):(Nt.setState({...Nt.state,account:void 0,accountEmail:void 0}),!0)}const ro=function(e){let{requestStore:t,analyticsFrom:o,trelloResult:r,renderItemActionsButton:l,spaceStore:c,spaceViewStore:d,onComplete:p}=e;const u=(0,s().O7)(),m=(0,g().YB)(),{boardsResponse:f,showLoader:y,isFetchingBoards:x}=(0,n().VK)((()=>{const{boardsResponse:e,showLoader:t,isFetchingBoards:o}=J().default.state;return{boardsResponse:e,showLoader:t,isFetchingBoards:o}}),[]),I=(0,a.useCallback)((()=>async function(e,t,o,a){a&&await M().u(e,t);h().ay(e,{import_source:"trello",from:o})}(u,t,o,x)),[u,t,o,x]),{device:j}=u,{account:v}=r,w=f.boards,k={key:"default",name:m.formatMessage({id:"trelloImportOption.boardProperty.defaultName",defaultMessage:"Boards"}),items:w.map((e=>({key:e.id,name:e.name})))},T={title:"Trello",logo:i().Z.images.import.trelloPng,actionButton:v&&y?(0,he.jsx)(ie().Z,{}):v&&l([{name:m.formatMessage({id:"trelloImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>K().Z.setState({open:!0})},{name:m.formatMessage({id:"trelloImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>io(t,u)},{name:m.formatMessage({id:"trelloImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e,t){await S().callApi({eventName:"disconnectTrello",environment:t,data:{}}),J().default.setState({boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}),await e.refresh(),h().qJ(t,{integration_name:"trello"})}(t,u)}]),onClick:()=>{}};return(0,he.jsx)(se().ZP,{popupType:j.isMobile?se().Z4.SlideUp:se().Z4.Popup,buttonPopupStore:K().Z,onClick:I,render:()=>y?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(mt,{searchInputPlaceholder:m.formatMessage({id:"trelloImportOption.search.placeholder",defaultMessage:"Search for a boardâ€¦"}),noSearchResultsPlaceholder:m.formatMessage({id:"trelloImportOption.search.noResultsPlaceholder",defaultMessage:"No boards found."}),analyticsName:"trello",sections:[k],onComplete:e=>async function(e,t,o,a,s,n){const{boards:r}=e,i=r.filter((e=>Boolean(t.find((t=>t.key===e.id)))));h().G7(n,{integration_name:"trello",count:t.length});const l=await b().su({environment:n,spaceStore:o,spaceViewStore:a,boards:i});h().qy(n,{import_source:"trello",data:{notebooks:i.map((e=>e.id)),userId:n.currentUser.id,spaceId:(0,nt().J)(o.id)}}),s(l)}(f,e,c,d,p,u)}),renderOrigin:e=>{let{onClick:o}=e;return(0,he.jsx)(je,{...T,onClick:v?o:()=>io(t,u)})}})};async function io(e,t){await M().M({environment:t,requestStore:e})}const lo={display:"flex",alignItems:"center",justifyContent:"center",minHeight:240,width:"100%",overflow:"hidden"};function co(e){let{analyticsFrom:t,spaceStore:o,onComplete:i,spaceViewStore:l,userSettingsStore:c,pageStore:d}=e;const p=(0,s().O7)(),u=(0,r().Fg)(),[m,f]=(0,a.useState)(!1),h=(0,n().qz)(void 0,$().Z),y=(0,n().qz)(void 0,$().Z),x=(0,n().qz)(void 0,$().Z),I=(0,n().qz)(void 0,$().Z),j=(0,n().qz)(void 0,$().Z),v=(0,n().VK)((()=>N().default.state.online),[]),S=(0,n().VK)((()=>Q().default.getState()),[]),w=(0,a.useCallback)((e=>{y.refresh=e.confluence,x.refresh=e.evernote,j.refresh=e.googleDoc,h.refresh=e.jira,I.refresh=e.trello}),[y,x,j,h,I]),k=(0,n().VK)((()=>ho()),[]),T=(0,a.useCallback)((e=>{if(e){const{defaultSubtab:a}=S;return m||(f(!0),mo({defaultSubtab:a,pageStore:d,spaceStore:o,spaceViewStore:l,trelloRequestStore:I,evernoteRequestStore:x,confluenceRequestStore:y,googleDocRequestStore:j,result:e,environment:p,onComplete:i,analyticsFrom:t,flowId:k})),Q().default.setState({...Q().default.state,defaultSubtab:void 0}),(0,he.jsx)("div",{style:lo,children:(0,he.jsx)(bo,{analyticsFrom:t,onComplete:i,spaceStore:o,spaceViewStore:l,userSettingsStore:c,pageStore:d,trelloRequestStore:I,evernoteRequestStore:x,confluenceRequestStore:y,jiraRequestStore:h,googleDocRequestStore:j,result:e})})}return(0,he.jsx)("div",{style:"onboarding"===t?{}:lo,children:(0,he.jsx)(ie().Z,{})})}),[t,y,p,x,k,j,h,i,d,S,o,l,I,c,m]);return v?(0,he.jsx)(jo,{spaceStore:o,setRefreshers:w,renderChildren:T}):(0,he.jsx)("div",{style:{...lo,fontSize:14,color:u.mediumTextColor},children:(0,he.jsx)(g()._H,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}function po(e){let{analyticsFrom:t,spaceStore:o,onComplete:a,spaceViewStore:i,userSettingsStore:l,pageStore:c}=e;const d=(0,s().O7)(),p=(0,r().Fg)(),u=(0,n().qz)(void 0,$().Z),m=(0,n().qz)(void 0,$().Z),f=(0,n().qz)(void 0,$().Z),h=(0,n().qz)(void 0,$().Z),y=(0,n().qz)(void 0,$().Z),x=(0,n().qz)(void 0,$().Z),I=(0,n().qz)(void 0,$().Z),j=(0,n().VK)((()=>N().default.state.online),[]),v=(0,n().VK)((()=>Q().default.getState()),[]),S=(0,n().VK)((()=>ho()),[]);return j?(0,he.jsx)(vo,{spaceStore:o,trelloRequestStore:x,asanaRequestStore:y,evernoteRequestStore:h,confluenceRequestStore:f,mondayRequestStore:m,jiraRequestStore:u,googleDocRequestStore:I,renderChildren:e=>{if(e){const{defaultSubtab:s}=v;return mo({defaultSubtab:s,pageStore:c,spaceStore:o,spaceViewStore:i,trelloRequestStore:x,evernoteRequestStore:h,confluenceRequestStore:f,googleDocRequestStore:I,result:e,environment:d,onComplete:a,analyticsFrom:t,flowId:S}),Q().default.setState({...Q().default.state,defaultSubtab:void 0}),(0,he.jsx)("div",{style:lo,children:(0,he.jsx)(bo,{analyticsFrom:t,onComplete:a,spaceStore:o,spaceViewStore:i,userSettingsStore:l,pageStore:c,trelloRequestStore:x,evernoteRequestStore:h,confluenceRequestStore:f,jiraRequestStore:u,googleDocRequestStore:I,result:e})})}return(0,he.jsx)("div",{style:"onboarding"===t?{}:lo,children:(0,he.jsx)(ie().Z,{})})}}):(0,he.jsx)("div",{style:{...lo,fontSize:14,color:p.mediumTextColor},children:(0,he.jsx)(g()._H,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}const uo=function(e){return(0,o(466970).E)("use_new_import_options")?(0,he.jsx)(co,{...e}):(0,he.jsx)(po,{...e})};function mo(e){let{defaultSubtab:t,environment:o,pageStore:a,spaceStore:s,spaceViewStore:n,trelloRequestStore:r,evernoteRequestStore:i,confluenceRequestStore:l,googleDocRequestStore:c,result:d,onComplete:p,analyticsFrom:g,flowId:x}=e;if(t){if(!m().UP.includes(t)||"gdocs"===t&&d.googleDocResult.isGoogleDocImporterEnabled)switch(t){case"trello":!function(e,t,o){const a=o.account;a?M().u(e,t).then((()=>{K().Z.setState({open:!0})})).catch((()=>{J().default.setState({...J().default.state,isFetchingBoards:!1,showLoader:!1})})):M().M({environment:e,requestStore:t}).then((()=>{})).catch((()=>{}))}(o,r,d.trelloResult);break;case"evernote":!function(e,t,o){const{userInfo:a}=o;a?T().B({environment:e,requestStore:t}).then((()=>{E().Z.setState({open:!0})})).catch((()=>{})):T().e({environment:e,requestStore:t}).then((()=>{})).catch((()=>{}))}(o,i,d.evernoteResult);break;case"monday":!function(e,t,o){t.user?C().FM({environment:e,spaceId:o}).then((()=>{Y().default.setState({...Y().default.state,currentTab:"selectData",isModalOpen:!0})})).catch((()=>{})):Y().default.setState({...Y().default.state,showAuthPopup:!0})}(o,d.mondayResult,s.id);break;case"confluenceApi":!function(e,t,o,a){const{account:s}=t;Q().default.setState({...Q().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),s?k({environment:e,requestStore:a,spaceId:o}).then((()=>{U().Z.setState({open:!0})})).catch((()=>{v.setState({...v.state,[o]:{...v.state[o],showLoader:!1}})})):v.setState({...v.state,[o]:{...v.state[o],open:!0}})}(o,d.confluenceResult,s.id,l);break;case"asana":!function(e,t){const{account:o}=t;o?y().bA({environment:e}).then((()=>{W().default.setState({...W().default.state,isModalOpen:!0})})).catch((()=>{W().default.setState({...W().default.state,isAccountLinkingInProgress:!1,isModalOpen:!1})})):y().w1({environment:e,flowId:u().Il()}).then((()=>{})).catch((()=>{}))}(o,d.asanaResult);break;case"jira":!function(e,t){const{account:o}=t;if(!o)return;const a=G().ZP.getState(),s=G().ZP.createNewFlowId();o.length?(G().ZP.setState({...a,type:"teamspace-selection",open:!0}),(0,P().j)({environment:e,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:s}}})):(G().ZP.setState({...a,type:"auth",open:!0}),(0,P().j)({environment:e,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:s}}}));Q().default.setState(Q().default.getInitialState())}(o,d.jiraResult);break;case"gdocs":!function(e){const{requestStore:t,spaceStore:o,spaceViewStore:a,environment:s,analyticsFrom:n,pageStore:r,onComplete:i,areAccountsFetched:l,googleDriveResponse:c,selectedFileId:d}=e;Tt({environment:s,requestStore:t,areAccountsFetched:l,analyticsFrom:n,googleDriveResponse:c,pageStore:r,spaceStore:o,spaceViewStore:a,selectedFileId:d,onComplete:i}).then((()=>{})).catch((()=>{}))}({environment:o,requestStore:c,analyticsFrom:g,pageStore:a,onComplete:p,spaceStore:s,spaceViewStore:n,areAccountsFetched:d.googleDocResult.areAccountsFetched,googleDriveResponse:d.googleDocResult.accountsResponse,selectedFileId:d.googleDocResult.selectedFileId})}else!function(e){let{environment:t,pageStore:o,spaceStore:a,spaceViewStore:s,uploadType:n,onComplete:r,analyticsFrom:i}=e;if(!o)return;b().Pv({environment:t,pageStore:o,spaceStore:a,spaceViewStore:s,analyticsFrom:i,uploadType:n,flowId:u().Il()}).then((e=>{e&&(f().W(t,{from:"import",type:"page",new_page_id:e.id,creating_block_id:e.id,parent_collection_id:e.getParentCollectionIdUpToTwoLevels()}),r(e))})).catch((()=>{}))}({pageStore:a,spaceStore:s,spaceViewStore:n,environment:o,uploadType:t,onComplete:p,analyticsFrom:g});h().ay(o,{import_source:t,from:g,flowId:x,userId:o.currentUser.id,spaceId:s.id})}}function go(e){let{url:t,helpButtonMessage:o,helpMessageWidth:a,disableBackground:s}=e;return(0,he.jsx)(ue().Z,{renderTooltip:()=>o??(0,he.jsx)(g()._H,{id:"importOptions.helpButton.tooltip",defaultMessage:"Learn about how to import"}),style:{width:a??"max-content"},textWrap:!0,render:e=>(0,he.jsx)(re().Z,{external:!0,href:t,style:{marginLeft:"auto"},...e,children:(0,he.jsx)(ne().Z,{icon:d().m,disableBackground:s??!1})})})}function fo(e){let{actions:t}=e;return(0,he.jsx)(se().ZP,{popupType:de().kQ.Popup,renderOrigin:e=>(0,he.jsx)(ne().Z,{icon:c().o,...e}),render:e=>{const o={key:"section",render:e=>(0,he.jsx)(pe().Z,{...e}),items:t.map((t=>{let{name:o,action:a}=t;return{key:o,render:e=>(0,he.jsx)(_e().Z,{...e,title:o}),action:()=>{a(),e.close()}}}))};return(0,he.jsx)(le().Z,{menuType:_().o.Popup,width:200,children:(0,he.jsx)(ce().ZP,{type:ce().iW.Vertical,initialFocus:void 0,sections:[o]})})}})}function ho(){return z().Z.state.flowId||u().Il()}async function yo(e,t,o,a,s,n,r,i){h().ay(n,{import_source:e,from:t,import_type:"file",flowId:i});const l=await b().Pv({environment:n,pageStore:r,spaceStore:o,spaceViewStore:a,analyticsFrom:t,uploadType:e,flowId:i});l&&(f().W(n,{from:"import",type:"page",new_page_id:l.id,creating_block_id:l.id,parent_collection_id:l.getParentCollectionIdUpToTwoLevels()}),s(l))}function xo(e){let{flowId:t,analyticsFrom:o,spaceStore:a,spaceViewStore:n,onComplete:r,pageStore:l}=e;const c=(0,s().O7)();return(0,he.jsx)(je,{title:"Confluence",logo:i().Z.images.import.confluencePng,onClick:()=>yo("confluence",o,a,n,r,c,l,t),actionButton:(0,he.jsx)(go,{url:(0,O().UY)("guides.importConfluence")})})}function Io(e){let{analyticsFrom:t,spaceStore:o,spaceViewStore:a,onComplete:n,pageStore:r}=e;const l=(0,s().O7)();return(0,he.jsx)(ue().Z,{placement:H().Placement.Bottom,render:e=>(0,he.jsx)(je,{tooltipEvents:e,title:"CSV",logo:i().Z.images.import.csvPng,onClick:()=>yo("csv",t,o,a,n,l,r)}),renderTooltip:()=>(0,he.jsx)(g()._H,{id:"importOptions.csvImport.tooltip",defaultMessage:"Ensure first row in the CSV is the header"})})}function jo(e){const{renderChildren:t,spaceStore:o,setRefreshers:r}=e,i=(0,s().O7)(),c=o.id,[d,p]=(0,l().r5)((()=>(0,B().z_)(i)),[i]),[u,m]=(0,l().r5)((()=>(0,B().Cz)(i,c)),[i,c]),[g,f]=(0,l().r5)((()=>(0,B().Gq)(i)),[i]),[h,y]=(0,l().r5)((()=>(0,B().hi)()),[]),[x,I]=(0,l().r5)((()=>(0,B().jl)(i,c)),[i,c]),[j,v]=(0,l().r5)((()=>(0,B().az)(i,c)),[i,c]),[S,w]=(0,l().r5)((()=>(0,B().eT)(i)),[i]);(0,a.useEffect)((()=>{r({confluence:async()=>{await m()},evernote:async()=>{await f()},googleDoc:async()=>{await y()},jira:async()=>{await I()},trello:async()=>{await w()}})}),[r,p,m,f,y,I,v,w]);return(0,n().VK)((()=>t(S.value&&d.value&&g.value&&u.value&&j.value&&x.value&&h.value?{trelloResult:S.value,asanaResult:d.value,evernoteResult:g.value,confluenceResult:u.value,mondayResult:j.value,jiraResult:x.value,googleDocResult:h.value}:void 0)),[t,S,d,g,u,j,x,h])}function vo(e){let{renderChildren:t,spaceStore:o,trelloRequestStore:a,asanaRequestStore:n,evernoteRequestStore:r,confluenceRequestStore:i,mondayRequestStore:l,jiraRequestStore:c,googleDocRequestStore:d}=e;const p=(0,s().O7)();return(0,he.jsx)(Pe().Z,{request:p,performRequest:B().eT,requestStore:a,render:(e,a)=>(0,he.jsx)(Pe().Z,{request:p,performRequest:B().z_,requestStore:n,render:(e,s)=>(0,he.jsx)(Pe().Z,{request:p,performRequest:B().Gq,requestStore:r,render:(e,n)=>(0,he.jsx)(Pe().Z,{request:p,performRequest:()=>(0,B().Cz)(p,o.id),requestStore:i,render:(e,r)=>(0,he.jsx)(Pe().Z,{request:p,performRequest:()=>(0,B().az)(p,o.id),requestStore:l,render:(e,i)=>(0,he.jsx)(Pe().Z,{request:p,performRequest:()=>(0,B().jl)(p,o.id),requestStore:c,render:(e,o)=>(0,he.jsx)(Pe().Z,{request:p,performRequest:B().hi,requestStore:d,render:(e,l)=>t(a&&s&&n&&r&&i&&o&&l?{trelloResult:a,asanaResult:s,evernoteResult:n,confluenceResult:r,mondayResult:i,jiraResult:o,googleDocResult:l}:void 0)})})})})})})})}function So(e){let{analyticsFrom:t,onComplete:o,spaceStore:a,spaceViewStore:s,userSettingsStore:n,googleDocRequestStore:r,pageStore:i}=e;return(0,he.jsx)(wt,{renderItemActionsButton:e=>(0,he.jsx)(fo,{actions:e}),onComplete:o,requestStore:r,spaceStore:a,spaceViewStore:s,userSettingsStore:n,pageStore:i,analyticsFrom:t})}function wo(e){let{trelloResult:t,analyticsFrom:o,onComplete:a,spaceStore:s,spaceViewStore:n,userSettingsStore:r,trelloRequestStore:i}=e;return(0,he.jsx)(ro,{trelloResult:t,analyticsFrom:o,renderItemActionsButton:e=>(0,he.jsx)(fo,{actions:e}),onComplete:a,requestStore:i,spaceStore:s,spaceViewStore:n,userSettingsStore:r})}function ko(e){let{confluenceResult:t,flowId:o,analyticsFrom:a,onComplete:n,spaceStore:r,spaceViewStore:i,userSettingsStore:l,pageStore:c,confluenceRequestStore:d}=e;const p=(0,s().O7)();return(0,he.jsx)(st,{confluenceResult:t,analyticsFrom:a,flowId:o,renderItemActionsButton:e=>(0,he.jsx)(fo,{actions:e}),onComplete:n,spaceStore:r,requestStore:d,spaceViewStore:i,userSettingsStore:l,handleFileUploadClick:(e,t)=>yo(e,a,r,i,n,p,c,t),handleApiImportClick:(e,t)=>function(e,t,o,a,s,n){k({environment:s,requestStore:t,spaceId:o.id}).catch((()=>{})),h().ay(s,{import_source:e,from:a,import_type:"api",flowId:n})}(e,d,r,a,p,t)})}function To(e){let{evernoteResult:t,onComplete:o,spaceStore:a,spaceViewStore:s,userSettingsStore:n,evernoteRequestStore:r}=e;return(0,he.jsx)(yt,{evernoteResult:t,analyticsFrom:"onboarding",renderItemActionsButton:e=>(0,he.jsx)(fo,{actions:e}),defaultActionButton:(0,he.jsx)(go,{url:(0,O().UY)("guides.importEvernote")}),onComplete:o,requestStore:r,spaceStore:a,spaceViewStore:s,userSettingsStore:n})}function bo(e){let{result:t,analyticsFrom:o,onComplete:a,spaceStore:r,spaceViewStore:l,userSettingsStore:c,pageStore:d,trelloRequestStore:u,evernoteRequestStore:m,confluenceRequestStore:f,jiraRequestStore:h,googleDocRequestStore:y}=e;const x=(0,s().O7)(),I=(0,n().VK)((()=>ho()),[]),j=(0,n().VK)((()=>(0,F().Tc)(x)),[x]),v=(0,n().VK)((()=>(0,L().d)()),[]),S=(0,n().VK)((()=>D().default.checkGate({gateName:"quip_importer"})),[]),w=(0,n().VK)((()=>(0,A().tt)()),[]),k=(0,n().VK)((()=>(0,A().RT)()),[]),T=(0,n().VK)((()=>(0,V().K6)()),[]),b=(0,n().VK)((()=>(0,q().lQ)(r)),[r]),C=(0,n().VK)((()=>(0,V().Eg)()),[])&&!b,M=(0,n().VK)((()=>(0,R().n)()),[]),P=(0,n().VK)((()=>(0,Z().I)()),[]);return(0,he.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",overflow:"hidden",gridAutoRows:"1fr",gap:"4px 20px",padding:2,width:"100%"},children:[(0,he.jsx)(Me,{}),j?(0,he.jsx)(ko,{analyticsFrom:o,onComplete:a,spaceStore:r,spaceViewStore:l,userSettingsStore:c,pageStore:d,confluenceRequestStore:f,confluenceResult:t.confluenceResult,flowId:I}):(0,he.jsx)(xo,{analyticsFrom:o,spaceStore:r,spaceViewStore:l,onComplete:a,pageStore:d,flowId:I}),P?(0,he.jsx)(So,{onComplete:a,spaceStore:r,spaceViewStore:l,userSettingsStore:c,googleDocRequestStore:y,pageStore:d,analyticsFrom:o}):(0,he.jsx)(je,{title:"Google Docs",logo:i().Z.images.import.googleDocsPng,actionButton:(0,he.jsx)(go,{url:(0,O().UY)("guides.importGoogleDocs")}),onClick:()=>yo("gdocs",o,r,l,a,x,d)}),M&&(0,he.jsx)(je,{title:"PDF",showBetaBadge:!0,logo:i().Z.images.import.pdfSvg,onClick:()=>yo("pdf",o,r,l,a,x,d)}),(0,he.jsx)(Io,{analyticsFrom:o,spaceStore:r,spaceViewStore:l,onComplete:a,pageStore:d}),(0,he.jsx)(je,{title:(0,he.jsx)(g()._H,{id:"importOptions.textMarkdown.title",defaultMessage:"Text & Markdown"}),logo:i().Z.images.import.textPng,onClick:()=>yo("markdown",o,r,l,a,x,d)}),(0,he.jsx)(je,{title:"HTML",logo:i().Z.images.import.htmlPng,onClick:()=>yo("html",o,r,l,a,x,d)}),(0,he.jsx)(je,{title:"Word",logo:i().Z.images.import.wordPng,onClick:()=>yo("docx",o,r,l,a,x,d)}),(0,he.jsx)(je,{title:"Dropbox Paper",logo:i().Z.images.import.dropboxPaperPng,actionButton:(0,he.jsx)(go,{url:(0,O().UY)("guides.importDropboxPaper")}),onClick:()=>yo("dropbox",o,r,l,a,x,d)}),(0,he.jsx)(wo,{analyticsFrom:o,onComplete:a,spaceStore:r,spaceViewStore:l,userSettingsStore:c,trelloRequestStore:u,trelloResult:t.trelloResult}),(0,he.jsx)(To,{onComplete:a,spaceStore:r,spaceViewStore:l,userSettingsStore:c,evernoteRequestStore:m,evernoteResult:t.evernoteResult}),v&&(0,he.jsx)(Bt,{spaceStore:r,analyticsFrom:o,flowId:I}),S&&(0,he.jsx)(ao,{spaceStore:r,analyticsFrom:o,flowId:I,onComplete:a}),!S&&(0,he.jsx)(je,{title:"Quip",logo:i().Z.images.import.quipPng,actionButton:(0,he.jsx)(go,{url:(0,O().UY)("guides.importQuip")}),onClick:()=>yo("quip",o,r,l,a,x,d)}),(0,he.jsx)(je,{title:"Workflowy",logo:i().Z.images.import.workflowyPng,actionButton:(0,he.jsx)(go,{url:(0,O().UY)("guides.importWorkflowy")}),onClick:()=>yo("workflowy",o,r,l,a,x,d)}),w&&!k&&(0,he.jsx)(je,{title:(0,he.jsx)(g()._H,{id:"importOptions.genericImporter.title",defaultMessage:"Universal import"}),icon:p().l,onClick:()=>yo("genericImporter",o,r,l,a,x,d,I),actionButton:(0,he.jsx)(go,{url:"",helpButtonMessage:(0,he.jsx)(g()._H,{id:"importOptions.universalImport.tooltip",defaultMessage:"Import any ZIP file that contains text, Markdown, CSV, HTML, and other files"}),helpMessageWidth:240,disableBackground:!0})}),T&&!C&&(0,he.jsx)(Mt,{flowId:I,spaceStore:r,showNewBadge:!1,showSyncBadge:!0,requestStore:h,jiraResult:t.jiraResult,renderItemActionsButton:e=>(0,he.jsx)(fo,{actions:e})})]})}},996185:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var a=()=>o(291184),s=()=>o(788860),n=()=>o(67961),r=o(785893);const i=function(e){var t;const i=(0,o(846550).yK)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor},closeIconStyle:{width:16,height:16,fill:e.redBadgeBackground},lightText:{color:e.lightTextColor}})),[]);return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,r.jsxs)(o(251932).gq,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,r.jsx)("img",{style:{width:32,height:32,marginRight:8},src:e.assetSrc}),(0,a().h)(i.iconStyle),(0,a().h)(i.iconStyle),(0,a().h)(i.iconStyle),(0,o(80122).X)(i.closeIconStyle),(0,a().h)(i.iconStyle),(0,a().h)(i.iconStyle),(0,a().h)(i.iconStyle),(0,r.jsx)("img",{style:{width:32,height:32,marginLeft:8},src:o(714230).Z.images.notionLogoPng})]}),(0,r.jsx)(n().Z,{style:i.lightText,children:e.failedMessage}),(0,r.jsx)(n().Z,{style:i.lightText,children:(0,r.jsx)(s()._H,{id:"import.importingData.failed.viewLoggerPage",defaultMessage:"Please try again or read the {link} to troubleshoot.",values:{link:(0,r.jsx)("a",{style:{color:o(568017).ZP.black,cursor:"pointer"},href:`/${null===(t=e.loggerPageId)||void 0===t?void 0:t.replaceAll("-","")}`,children:(0,r.jsx)(s()._H,{id:"import.importingData.failed.linkText",defaultMessage:"import logs"})})}})})]})}},243818:(e,t,o)=>{o.d(t,{Z:()=>d});var a=o(667294),s=()=>o(846550),n=()=>o(788860),r=()=>o(67961),i=()=>o(251932),l=(o(241792),o(785893));const c=function(e){const{dotCount:t=6,speed:n=800}=e,[r,c]=(0,a.useState)(1),d=(0,s().yK)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor,opacity:.5},iconStyleBold:{width:6,height:6,fill:e.lightIconColor}})),[]);return(0,a.useEffect)((()=>{const e=setInterval((()=>c((e=>e<t?e+1:1))),n);return()=>clearInterval(e)}),[t,n]),(0,l.jsx)(i().gq,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:Array.from({length:t},((e,t)=>t+1)).map((e=>(0,l.jsx)("div",{children:(0,o(291184).h)(r===e?d.iconStyleBold:d.iconStyle)},e)))})};const d=function(e){const t=(0,o(142735).VK)((()=>o(199114).default.state.templateCreationInProgress),[]),a=(0,s().yK)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor},iconStyleBold:{width:8,height:8,fill:e.mediumIconColor},lightText:{color:e.lightTextColor}})),[]);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,l.jsxs)(i().gq,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,l.jsx)("img",{style:{width:32,height:32,marginRight:8},src:e.assetSrc}),(0,l.jsx)(c,{}),(0,l.jsx)("img",{style:{width:32,height:32,marginLeft:8},src:o(714230).Z.images.notionLogoPng})]}),t?(0,l.jsx)(r().Z,{style:a.lightText,children:(0,l.jsx)(n()._H,{id:"import.importingData.settingUpWorkspace",defaultMessage:"Creating templates for your projects and tasks."})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i().gq,{children:(0,l.jsx)(r().Z,{style:a.lightText,children:(0,l.jsx)(n()._H,{id:"import.importingData.feelFreeToLeave",defaultMessage:"Data is being imported. Feel free to leave this window."})})}),(0,l.jsx)(i().gq,{children:(0,l.jsx)(r().Z,{style:a.lightText,children:(0,l.jsx)(n()._H,{id:"import.importingData.sendEmail",defaultMessage:"We will send you an email when the import is complete or if any problems occur."})})})]})]})}},3315:(e,t,o)=>{o.d(t,{Z:()=>O,M:()=>D});o(241792);var a=o(667294),s=()=>o(219727),n=()=>o(142735),r=()=>o(846550),i=()=>o(646574),l=()=>o(788860),c=()=>o(568017),d=()=>o(707513),p=()=>o(824462),u=()=>o(527278),m=()=>o(876822),g=()=>o(199114),f=()=>o(451378),h=()=>o(838266),y=()=>o(573357),x=()=>o(708518),I=o(785893);const j=function(e){let{fetchActiveImportTasks:t}=e;const s=(0,n().Kw)(g().default),{isModalOpen:r}=s,i=(0,a.useCallback)((()=>{g().default.resetImport()}),[]),l=(0,a.useCallback)((()=>{const{currentTab:e}=s;return(0,I.jsx)(o(129824).Z,{fetchActiveImportTasks:t,tab:e})}),[s,t]);return(0,I.jsx)(x().Z,{open:r,innerStyle:{height:"calc(100vh - 100px)",overflow:"hidden",maxHeight:675,borderRadius:12,width:900},render:()=>(0,I.jsx)(y().Z,{capture:!0,allowEsc:!0,render:()=>l()}),onDismiss:i})};var v=()=>o(67961),S=()=>o(698850);const w=function(e){let{fetchActiveImportTasks:t}=e;const s=(0,n().Kw)(S().default),r=(0,a.useCallback)((()=>{S().default.resetImport()}),[]),i=(0,n().VK)((()=>(0,o(458121).u)()),[]),l=(0,a.useCallback)((()=>{let{currentTab:e}=s;return i?"selectData"===e&&(e="chooseWorkspace"):S().default.setState({...s,selectedImportType:"ProjectsAndTasks"}),(0,I.jsx)(o(454315).Z,{fetchActiveImportTasks:t,tab:e})}),[i,t,s]);return(0,I.jsx)(x().Z,{open:s.isModalOpen,innerStyle:{width:800,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:5,maxHeight:675,...i?{borderRadius:12,width:900}:{}},render:()=>(0,I.jsx)(y().Z,{capture:!0,allowEsc:!0,render:()=>l()}),onDismiss:r})};var k=()=>o(431595),T=()=>o(956057),b=()=>o(54512),C=()=>o(286310),M=()=>o(308186),P=()=>o(684715),F=()=>o(623521);class A extends(()=>o(263184))().default{getInitialState(){return{isDragOverActive:!1}}}const Z=new A;const B=(0,l().vU)({invalidFileFormat:{id:"zipImportOptions.invalidFile",defaultMessage:"Unsupported file format, Please drag and drop a ZIP file"}});const V=function(e){const t=(0,s().O7)(),a=(0,n().VK)((()=>Z.state.isDragOverActive),[]),i=(0,r().yK)((e=>({buttonStyle:{display:"flex",alignItems:"center",paddingLeft:12,paddingRight:12,paddingTop:2,paddingBottom:2,borderColor:e.outlineButtonBorder,border:1,borderWidth:1,borderRadius:4,height:32,gap:4,background:e.importOptionsButtonBackground},titleStyle:{fontSize:14,fontWeight:"medium",font:"SF Pro",color:e.text.primary,width:183,height:18,textAlign:"center"},divTitleStyle:{color:e.text.secondary,display:"flex",background:a?e.fill.grayPrimary:e.fill.lightGraySecondary,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,border:a?"2px solid":"none",borderColor:a?e.stroke.uiBlueSecondary:e.fill.lightGraySecondary},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:e.text.secondary,font:"SF Pro",fontWeight:400,fontSize:14}})),[a]),c=e=>{Z.setState({...Z.state,isDragOverActive:e})};return(0,I.jsx)("div",{onDrop:o=>{o.preventDefault(),c(!1);const a=o.dataTransfer.files[0];(async function(e,t,o,a){var s;if(1!==t.length)return;if("zip"!==(null===(s=t[0].name.split(".").pop())||void 0===s?void 0:s.toLowerCase())){const e=u().Z.formatMessage(B.invalidFileFormat);throw M().UW(e),new(k().p8)("Invalid file format, please upload it as a zip file")}const{mainEditorCurrentBlockStore:n,currentSpaceStore:r,currentSpaceViewStore:i}=m().default.state;if(!r||!i||!n)return;const l=_();C().ay(e,{import_source:"genericImporter",from:a,import_type:"file",flowId:l});const c=await P().ro({environment:e,pageStore:n,spaceStore:r,spaceViewStore:i,analyticsFrom:a,uploadType:"genericImporter",flowId:_()},t);c&&(b().W(e,{from:"import",type:"page",new_page_id:c.id,creating_block_id:c.id,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()}),o(c))})(t,[a],e.onComplete,e.analyticsFrom).then((()=>{})).catch((()=>{}))},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),c(!0)},onDragLeave:e=>{e.preventDefault(),c(!1)},style:i.divStyle,children:(0,I.jsxs)("div",{style:i.divTitleStyle,children:[(0,I.jsx)(R,{icon:o(591514).s}),(0,I.jsx)(v().Z,{isSecondaryColor:!0,style:i.UiLabelStyle,children:(0,I.jsx)(l()._H,{id:"zipImport.dragAndDrop",defaultMessage:"Drag and drop your ZIP files here, or"})}),(0,I.jsx)(o(745740).Z,{onClick:()=>async function(e,t,o,a){const s=m().default.state,{mainEditorCurrentBlockStore:n,currentSpaceStore:r,currentSpaceViewStore:i}=s;if(!r||!i||!n)return;const l=_();C().ay(e,{import_source:"genericImporter",from:a,import_type:"file",flowId:l});const c=await P().Pv({environment:e,pageStore:n,spaceStore:r,spaceViewStore:i,analyticsFrom:a,uploadType:t,flowId:l,allowMultiple:!1});c&&(b().W(e,{from:"import",type:"page",new_page_id:c.id,creating_block_id:c.id,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()}),o(c))}(t,"genericImporter",e.onComplete,e.analyticsFrom),style:i.buttonStyle,children:(0,I.jsx)("div",{style:{minWidth:0,width:"100%"},children:(0,I.jsx)("div",{style:{display:"flex"},children:(0,I.jsx)("div",{style:i.titleStyle,children:(0,I.jsx)(l()._H,{id:"zipImport.uploadFile",defaultMessage:"Upload from your computer"})})})})})]})})};function _(){return F().Z.state.flowId||T().Il()}const L=20;function R(e){let{icon:t}=e;return(0,I.jsx)("div",{children:t({flexShrink:0,width:L,height:L,gap:10})})}const D=(0,l().vU)({tabTitle:{id:"importsTab.title",defaultMessage:"Import data"},tabSubtitle:{id:"importsTab.subtitle",defaultMessage:"Import data from other apps and files into Notion"},unsupportedImportsHelperText:{id:"importsTab.unsupportedImportsHelperText",defaultMessage:"If your data is located somewhere we don't support yet, you can try importing it via CSV file."},zipImportTitle:{id:"importsTab.zipImport.title",defaultMessage:"Donâ€™t see the app you use? Import a ZIP file, and Notion will convert DOCX, CSV, Text, Markdown, HTML and EPUB files into Notion pages."},activeImportsAndSyncsTitle:{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"},activeImportsTitle:{id:"importsTab.activeImports.title",defaultMessage:"Active Imports"},activeImportsImportTime:{id:"importsTab.activeImports.importTime",defaultMessage:"Time"},activeImportsImportFrom:{id:"importsTab.activeImports.importFrom",defaultMessage:"From"},activeImportsImportStatus:{id:"importsTab.activeImports.importStatus",defaultMessage:"Status"},activeImportsTableNoActiveImports:{id:"importsTab.activeImportsTable.noActiveImports",defaultMessage:"There are no ongoing imports associated with your account."},activeImportsStatusInProgress:{id:"activeImports.status.inProgress",defaultMessage:"In progress"}}),O=function(e){const t=(0,n().Kw)(m().default),y=(0,n().Kw)(h().default),x=(0,n().Kw)(g().default),S=(0,n().Kw)(f().Z),{currentSpaceStore:k,mainEditorCurrentBlockStore:T,currentSpaceViewStore:b,currentUserSettingsStore:C}=t,M=(0,s().O7)(),{device:P}=(0,s().O7)(),F=(0,l().YB)(),A=(0,n().VK)((()=>"dark"===M.ThemeStore.state.mode),[M]),[Z,B]=(0,a.useState)([]),_=(0,n().VK)((()=>(0,o(148976).K6)()),[]),L=(0,a.useCallback)((async()=>{if(null==k||!k.id)return;const e=await p().callApi({eventName:"getActiveImportTasks",environment:M,data:{spaceId:k.id}});"success"===e.type&&B(e.data)}),[k,M]);(0,a.useEffect)((()=>{L().catch((()=>{}));const e=setInterval(L,6e4);return()=>clearInterval(e)}),[k,M,L]),(0,a.useEffect)((()=>{let e;const t=async a=>{const s=await p().callApi({eventName:"getAsanaWorkspacesNames",environment:M,data:{}});if(a+=1,"success"===s.type)if(null!=s&&s.data.account){var n;g().default.setState({...g().default.state,account:s.data.account,workspaces:s.data.workspaces,isLoadingAsanaWorkspaces:!1,isAccountLinkingInProgress:!1,currentTab:"selectData",selectedWorkspace:(null===(n=s.data)||void 0===n||null===(n=n.workspaces[0])||void 0===n?void 0:n.gid)||void 0,isModalOpen:!0})}else{if(a>o)return;e=setTimeout((()=>t(a)),2e3)}},o=180;if(x.isAccountLinkingInProgress){t(0).catch((()=>{}))}return()=>{clearTimeout(e)}}),[x.isAccountLinkingInProgress,M]),(0,o(801812).r5)((async()=>{let e;const t=async s=>{var n;const r=await p().callApi({eventName:"getEvernoteAccount",environment:M,data:{}});if(s+=1,"success"===r.type)if(null!=r&&r.data&&null!==(n=r.data)&&void 0!==n&&n.userInfo){f().Z.setState({...f().Z.state,isFetchingNotebooks:!0,showLoader:!0,linkingAccount:!1});const e=await p().callApi({eventName:"getEvernoteNotebooks",environment:M,data:{}});"success"===e.type&&f().Z.setState({...f().Z.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1}),o(145607).Z.setState({open:!0})}else{if(s>a)return;e=setTimeout((async()=>await t(s)),2e3)}},a=180;if(S.linkingAccount){const e=0;await t(e).catch((()=>{}))}return()=>{clearTimeout(e)}}),[S.linkingAccount,M]);const R=(0,r().yK)((e=>({activeImportAndSyncTitle:{fontSize:d().JB.UIRegular.mobile,fontWeight:d().Ue.medium,lineHeight:d().Nv.UIRegular.mobile},arrowDownIcon:{width:11,height:12,gap:10,radius:3,fill:"#ACABA9"},activeImportsStatusTimeDiv:{display:"flex",alignItems:"center",flexDirection:"row",gap:4}})),[]),O=_?(0,I.jsx)(l()._H,{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"}):(0,I.jsx)(l()._H,{id:"importsTab.activeImports.title",defaultMessage:"Active Imports"}),q=e=>{o(47443)._c({environment:M,store:e,pageVisitSource:o(506347).tY.Import}),h().default.reset()};return k&&b&&b&&C?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o(868614).Z,{large:!P.isMobile||void 0,divider:P.isMobile?void 0:"full",children:F.formatMessage(D.tabTitle)}),(0,I.jsx)(v().Z,{children:F.formatMessage(D.tabSubtitle)}),(0,I.jsx)(v().Z,{isSmall:!0,children:e.genericImporterEnabled&&!e.zipImporterEnabled?(0,I.jsx)(l()._H,{id:"importsTab.unsupportedImportsHelperTextForUniversalImport",defaultMessage:"If the app youâ€™re using isnâ€™t listed below, try the <boldtext>Universal import</boldtext> ",values:{boldtext:e=>(0,I.jsx)("span",{style:{fontWeight:600},children:e})}}):F.formatMessage(D.unsupportedImportsHelperText)}),(0,I.jsxs)("div",{style:{marginTop:16,width:"100%",overflow:"hidden"},children:[(0,I.jsx)(o(667413).Z,{pageStore:T,spaceStore:k,spaceViewStore:b,userSettingsStore:C,analyticsFrom:y.openedFrom??"modal",onComplete:q,readOnlyCreditButton:!1}),(0,I.jsx)(j,{fetchActiveImportTasks:L}),(0,I.jsx)(w,{fetchActiveImportTasks:L})]}),e.zipImporterEnabled?(0,I.jsxs)("div",{style:{marginTop:32,width:"100%",gap:10,overflow:"hidden"},children:[(0,I.jsx)(v().Z,{isSecondaryColor:!0,isMultiline:!0,style:{font:"SF Pro",fontWeight:400,fontSize:14},children:F.formatMessage(D.zipImportTitle)}),(0,I.jsx)(V,{onComplete:q,analyticsFrom:y.openedFrom??"modal"})]}):(0,I.jsx)(I.Fragment,{}),(null==Z?void 0:Z.length)>0?(0,I.jsxs)("div",{style:{marginTop:32},children:[(0,I.jsx)(v().Z,{isMultiline:!0,style:R.activeImportAndSyncTitle,children:O}),(0,I.jsx)(o(378907).Z,{tableStyle:{borderTop:0},columns:[{key:"importTime",header:(0,I.jsxs)("div",{style:R.activeImportsStatusTimeDiv,children:[F.formatMessage(D.activeImportsImportTime),(0,o(682890).M)(R.arrowDownIcon)]})},{key:"importFrom",header:F.formatMessage(D.activeImportsImportFrom)},{key:"importStatus",header:F.formatMessage(D.activeImportsImportStatus)}],rows:Z.map((e=>({key:`table-${e.taskId}`,columns:[e.startedAt?`${(0,i().Yx)(e.startedAt,"long",u().Z.getIntl().locale)} ${(0,i().Yx)(e.startedAt,"time",u().Z.getIntl().locale)}`:"",(0,o(513670).kC)(e.source),(0,I.jsx)(o(78014).Z,{isRound:!0,showRemoveButton:!1,value:(0,I.jsx)(v().Z,{children:F.formatMessage(D.activeImportsStatusInProgress)}),backgroundColor:A?c().FN.dark.blue[200]:c().FN.light.blue[200],showColoredDot:"blue",format:o(38883).lo.Small,isSingle:!0},`progress-${e.taskId}`)]})))}),Z.length?(0,I.jsx)(I.Fragment,{}):(0,I.jsx)(v().Z,{isSmall:!0,style:{marginTop:16},children:F.formatMessage(D.activeImportsTableNoActiveImports)})]}):(0,I.jsx)(I.Fragment,{})]}):(0,I.jsx)(I.Fragment,{})}},12530:(e,t,o)=>{o.d(t,{N:()=>n,Z:()=>i});o(667294);var a=o(785893);const s={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:o(707513).Ue.semibold,borderRadius:4,color:o(568017).ZP.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let n=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function r(e){return!!e&&e>0}const i=function(e){let{count:t,color:i,style:c,numberStyle:d,fadeIn:p}=e;const u=i===n.Red,m=(0,o(846550).yK)((e=>({badge:{...s,...c,...(t??0)>99&&{width:void 0,padding:2},background:u?e.redBadgeBackground:e.lightIconColor,...p&&{transition:"opacity 0.1s",opacity:r(t)?1:0}}})),[t,p,u,c]);return p||r(t)?(0,a.jsx)("div",{style:m.badge,children:(0,a.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:o}=e;return t?1===t?(0,a.jsx)("span",{style:{marginLeft:-.5,...o},children:"1"}):t>99?(0,a.jsx)("span",{style:{letterSpacing:-.5,...o},children:"99+"}):t>9?(0,a.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...o},children:t}):(0,a.jsx)("span",{style:{...o},children:t}):null}},454315:(e,t,o)=>{o.d(t,{u:()=>le,Z:()=>ce});o(267602),o(470928),o(228244);var a=o(667294),s=()=>o(219727),n=()=>o(142735),r=()=>o(846550),i=()=>o(714230),l=()=>o(788860),c=()=>o(707513),d=()=>o(651275),p=()=>o(876822),u=()=>o(698850),m=()=>o(312578),g=()=>o(661297),f=()=>o(906651),h=()=>o(67961),y=()=>o(360964),x=(o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792),()=>o(251932)),I=(o(653476),o(731107),()=>o(5837)),j=()=>o(452024),v=()=>o(667067),S=()=>o(490670),w=()=>o(568017),k=()=>o(44556),T=()=>o(383694),b=()=>o(265640),C=()=>o(715139),M=()=>o(356641),P=()=>o(654133),F=()=>o(866747),A=()=>o(374844),Z=()=>o(417387),B=()=>o(1910),V=()=>o(286977),_=()=>o(374289),L=()=>o(352230),R=()=>o(827973),D=()=>o(448419),O=()=>o(198829),q=()=>o(255577),H=()=>o(388284),W=o(785893);const N=function(){const e=(0,s().O7)(),t=(0,l().YB)(),o=(0,n().VK)((()=>p().default.state.currentSpaceStore),[]),r=(0,n().VK)((()=>u().default.getState()),[]),{workspaces:i,selectedWorkspace:c,selectedImportType:m}=r;return(0,a.useEffect)((()=>{}),[m,c,e,null==o?void 0:o.id]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(h().Z,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,W.jsx)(U,{onSelectOption:e=>{u().default.setState({...r,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:i.map((e=>({key:e.id,label:e.name}))),currentOption:r.selectedWorkspace,placeHolder:t.formatMessage(d().VE.selectWorkSpaceV1)}),(0,W.jsx)(z,{})]})};function U(e){var t;const{onSelectOption:o,options:s,currentOption:n,placeHolder:i,narrow:p,allowSearch:u,shouldBeDisabled:m}=e,g=(0,l().YB)(),[f,y]=(0,a.useState)(""),x=null===(t=s.find((e=>{let{key:t}=e;return t===n})))||void 0===t?void 0:t.label,I=(0,r().yK)((e=>({icon:{width:12,height:12,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,W.jsx)(D().ZP,{popupType:D().Z4.Popup,placementToOrigin:D().pO.Bottom,disabled:m,renderOrigin:e=>(0,W.jsxs)(b().D,{...e,style:{paddingTop:p?2:8,paddingBottom:p?2:8,paddingLeft:8,paddingRight:8,opacity:1,width:250,border:`1px solid ${w().FN.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:n?void 0:w().FN.light.gray[75],color:n?void 0:w().FN.light.gray[300]},disabled:!1,children:[(0,W.jsx)(h().Z,{style:{textOverflow:"ellipsis"},children:x||i}),(0,_().i)(I.icon)]}),render:e=>{const t={menuType:L().o.Popup,width:250,left:50},a=[{key:"mondayImport.dropdown.menuList",render:e=>(0,W.jsx)(H().Z,{...e}),items:(f.trim()?s.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase())})):s).map((t=>{let{key:a,label:s}=t;return{key:a,action:()=>{o(a),e.close()},render:e=>(0,W.jsx)(R().Z,{...e,title:s,shouldWrapCaption:!0,right:x===s?(0,W.jsx)("div",{style:{width:14},children:(0,V().e)()}):void 0})}}))}];return(0,W.jsxs)(W.Fragment,{children:[u?(0,W.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:w().FN.light.gray[200],paddingTop:2,paddingBottom:2,paddingLeft:8,paddingRight:8,opacity:1,border:`1px solid ${w().FN.light.gray[100]}`,justifyContent:"space-between",background:w().FN.light.gray[75],fontSize:c().JB.UIRegular.desktop,textOverflow:"ellipses"},placeholder:g.formatMessage(d().VE.chooseTeamspace),onChange:e=>y(e.target.value),value:f}):(0,W.jsx)(W.Fragment,{}),(0,W.jsx)(O().Z,{...t,children:(0,W.jsx)(q().ZP,{type:q().iW.Vertical,sections:a,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}var E=()=>o(378907);const z=function(){const e=(0,s().O7)(),t=(0,n().VK)((()=>p().default.state.currentSpaceStore),[]),o=(0,n().VK)((()=>u().default.getState()),[]),{selectedWorkspace:r,mondayFoldersAndBoards:i}=o;return(0,a.useEffect)((()=>{r&&d().IO({environment:e,spaceId:null==t?void 0:t.id,selectedWorkspace:r}).catch((()=>{}))}),[r,e,null==t?void 0:t.id]),(0,W.jsxs)(W.Fragment,{children:[o.selectedWorkspace?(0,W.jsx)(h().Z,{style:{fontWeight:c().Ue.semibold,marginTop:18},children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):(0,W.jsx)(W.Fragment,{}),o.isLoadingProjects?(0,W.jsxs)(x().gq,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,W.jsx)(m().Z,{size:"sm"}),(0,W.jsx)(h().Z,{isSmall:!0,style:{color:w().FN.light.gray[400]},children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):null==i?void 0:i.map((e=>(0,W.jsx)(K,{mondayFolderAndBoards:e},`${e.folderId}-table`)))]})};function K(e){let{mondayFolderAndBoards:t}=e;const o=(0,r().Fg)(),s=(0,l().YB)(),i=(0,n().VK)((()=>u().default.getState()),[]),[m,g]=(0,a.useState)(),f=(0,n().VK)((()=>p().default.state.currentSpaceViewStore),[]),y=(0,n().VK)((()=>{const e=null==f?void 0:f.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,W.jsx)(T().p,{disabled:!0,store:e})})))}),[f]);(0,a.useEffect)((()=>{if(!y||!f)return;if(!i.selectedProjectsAndTeamspaces[t.folderId]){g("private"),d().eL({folderId:t.folderId,spaceId:null==f?void 0:f.id});for(const a of y){var e,o;if((null===(e=a.name)||void 0===e?void 0:e.toLowerCase())===(null===(o=t.folderName)||void 0===o?void 0:o.toLowerCase())){g(a.id),d().eL({folderId:t.folderId,spaceId:a.id});break}}}}),[y,t,f,i.selectedProjectsAndTeamspaces,g]);const I=[{key:"private",searchTerm:"private",label:(0,W.jsxs)(x().gq,{alignItems:"center",style:{gap:8},children:[(0,W.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:w().FN.light.gray[75]},children:(0,v().Q)({color:o.mediumIconColor,width:12.5,height:12.5})}),(0,W.jsx)(h().Z,{style:{fontWeight:c().Ue.regular},children:s.formatMessage(d().VE.privateSpaceLabel)})]})}];y&&I.push(...y.map((e=>({key:e.id,searchTerm:e.name,label:(0,W.jsxs)(x().gq,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),I.push({key:"create",searchTerm:"New teamspace",label:(0,W.jsxs)(x().gq,{alignItems:"center",style:{gap:4},children:[(0,S().f)({color:o.mediumIconColor,width:16,height:16}),(0,W.jsx)(h().Z,{children:s.formatMessage(d().VE.newTeamspaceLabel)})]})});const j=!(t.projects.length||t.taskBoards.length);return(0,W.jsx)(P().Z,{disableTooltip:!j,renderTooltip:()=>(0,W.jsx)(h().Z,{style:{color:w().ZP.white},isSmall:!0,children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:e=>(0,W.jsx)("div",{...e,children:(0,W.jsx)(Y,{mondayFolderAndBoards:t,teamsOptions:I,setSelectedTeam:g,selectedTeam:m,mondayImportStoreState:i})})})}function G(e){let{collapsed:t,mondayFolderAndBoards:o,mondayImportStoreState:a,isMondayV2Flow:s}=e;if(t)return[];const n=o.projects.map((e=>({key:e.id,columns:[(0,W.jsxs)(x().gq,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,W.jsx)(C().Z,{style:{marginRight:2},onClick:()=>{const t={...a.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:s,projects:n}=t;let r;r=n.find((t=>t.mondayProjectId===e.id))?n.filter((t=>t.mondayProjectId!==e.id)):n.concat({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}),u().default.setState({...a,selectedProjectsAndTeamspaces:{...a.selectedProjectsAndTeamspaces,[o.folderId]:{notionTeamspaceId:s,projects:r}}})},checked:{...a.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14,checkSize:8}),(0,W.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,W.jsx)(h().Z,{isMultiline:!0,style:s?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]}))),r=o.taskBoards.map((e=>({key:e.id,columns:[(0,W.jsxs)(x().gq,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,W.jsx)(C().Z,{style:{marginRight:2},onClick:()=>{const t={...a.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:s,projects:n}=t;let r;r=n.find((t=>t.mondayProjectId===e.id))?n.filter((t=>t.mondayProjectId!==e.id)):n.concat({name:e.name,mondayProjectId:e.id,collectionType:"tasks"}),u().default.setState({...a,selectedProjectsAndTeamspaces:{...a.selectedProjectsAndTeamspaces,[o.folderId]:{notionTeamspaceId:s,projects:r}}})},checked:{...a.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14,checkSize:8}),(0,W.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,W.jsx)(h().Z,{isMultiline:!0,style:s?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]})));return[...n,...r]}function Y(e){var t;let{mondayFolderAndBoards:o,selectedTeam:s,setSelectedTeam:c,teamsOptions:m,mondayImportStoreState:g}=e;const[f,y]=(0,a.useState)(!1),I=!(o.projects.length||o.taskBoards.length),j=(0,n().VK)((()=>p().default.state.currentSpaceViewStore),[]),v=(0,r().Fg)(),S=(0,l().YB)(),w=(0,a.useCallback)((e=>{d().eL({folderId:o.folderId,spaceId:e}),c(e)}),[o.folderId,c]),T=(0,a.useCallback)((e=>{if("create"===e)return void k().lo("monday_importer",{onClose:w});let t;if("private"===e){if(null==j||!j.id)return;t=j.id}else t=e;d().eL({folderId:o.folderId,spaceId:t}),c(e)}),[o.folderId,c,w,null==j?void 0:j.id]);return(0,W.jsxs)(x().gq,{style:I?{color:v.mediumTextColor,fill:v.mediumIconColor,opacity:.4,marginLeft:-18}:{marginLeft:-18},children:[(0,W.jsx)(B().Z,{ariaLabel:"collapse toggle",icon:Z().L,onClick:()=>y((e=>!e)),style:{transform:f?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:15,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:10,height:10}}),(0,W.jsx)(E().Z,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,W.jsxs)(x().gq,{alignItems:"center",gap:2,children:[(0,W.jsx)(C().Z,{style:{marginRight:4,height:14},disabled:I,checked:(()=>{const e={...g.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(e.isEntireFolderSelected)})(),size:14,checkSize:8,onClick:()=>{const e={...g.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:t,isEntireFolderSelected:a}=e;let s,n;if(a)s=[],n=!1;else{s=[...o.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...o.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],n=!0}u().default.setState({...g,selectedProjectsAndTeamspaces:{...g.selectedProjectsAndTeamspaces,[o.folderId]:{notionTeamspaceId:t,projects:s,isEntireFolderSelected:n}}})}}),(0,W.jsx)(h().Z,{style:{width:280,textOverflow:"ellipsis"},children:o.folderName})]}),style:{width:300}},...m?[{key:"importInto",header:(0,W.jsxs)(x().gq,{style:{alignItems:"center"},children:[(0,W.jsx)("div",{children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,W.jsx)("div",{style:{marginRight:16,marginLeft:8},children:(0,A().n)({width:12})}),(0,W.jsxs)(x().gq,{style:{alignItems:"center",gap:8},children:[(0,W.jsx)("img",{src:i().Z.emails.notionLogoBlackSmallPng,height:18}),(0,W.jsx)(U,{options:m,onSelectOption:T,currentOption:null===(t=m.find((e=>e.key===s)))||void 0===t?void 0:t.key,narrow:!0,allowSearch:!0,placeHolder:S.formatMessage({id:"mondayImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"}),shouldBeDisabled:I})]})]}),style:{width:"50%"}}]:[]],rows:G({collapsed:f,mondayFolderAndBoards:o,mondayImportStoreState:g,isMondayV2Flow:!1})})]})}var $=()=>o(167705);function Q(){const e=(0,n().VK)((()=>u().default.getState()),[]),t=(0,F().x3)(),o=(0,l().YB)(),a=(0,n().VK)((()=>{var e;const a=null===(e=p().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getTeamsStores())||void 0===e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,W.jsx)(T().p,{disabled:!0,store:e})}))),s=[];return a&&s.push(...a.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),s.push({key:"private",searchTerm:["private"],icon:(0,v().Q)(t.lockedIcon),name:o.formatMessage(d().VE.privateSpaceLabel)}),s.push({key:"create",searchTerm:["New"],icon:(0,S().f)(t.plusIcon),name:o.formatMessage(d().VE.newTeamspaceLabel)}),s}),[o,t.lockedIcon,t.plusIcon]),{mondayFoldersDetailsMap:s,selectedImportType:r,isLoadingHierarchy:i,mondayFoldersAndBoards:c,isLoadingProjects:g}=e;return"FullImport"===r?i?(0,W.jsxs)(x().gq,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,W.jsx)(m().Z,{size:"sm"}),(0,W.jsx)(h().Z,{isSmall:!0,style:{color:w().FN.light.gray[400]},children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.loadingBoardsHelperText",defaultMessage:"Loading boards in the workspace..."})})]}):(0,W.jsx)(W.Fragment,{children:Object.entries(s).filter((e=>{let[,t]=e;return!t.parent})).map((e=>{let[t,o]=e;return(0,W.jsx)(X,{currentFolderId:o.folderId,notionTeamspaceOptions:a},`${t}-table`)}))}):"ProjectsAndTasks"===r?g?(0,W.jsxs)(x().gq,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,W.jsx)(m().Z,{size:"sm"}),(0,W.jsx)(h().Z,{isSmall:!0,style:{color:w().FN.light.gray[400]},children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):(0,W.jsx)(W.Fragment,{children:null==c?void 0:c.map((e=>(0,W.jsx)(ee,{mondayFolderAndBoards:e,notionTeamspaceOptions:a},e.folderId)))}):null}const J=function(){const e=(0,s().O7)(),t=(0,n().VK)((()=>p().default.state.currentSpaceStore),[]),a=(0,n().VK)((()=>u().default.getState()),[]),{selectedWorkspace:r,fetchedHierarchy:i,selectedImportType:l,isLoadingHierarchy:c}=a;return(0,o(801812).r5)((async()=>{if(r&&l&&t)if("FullImport"===l){if(c||i)return;await d().HS({environment:e,spaceId:t.getSpaceId(),selectedWorkspace:r})}else"ProjectsAndTasks"===l&&await d().IO({environment:e,spaceId:null==t?void 0:t.id,selectedWorkspace:r})}),[e,i,c,l,r,t]),(0,W.jsx)(Q,{})};function X(e){let{currentFolderId:t,notionTeamspaceOptions:o}=e;const s=(0,r().Fg)(),i=(0,l().YB)(),[c,g]=(0,a.useState)(!1),[f,y]=(0,a.useState)(),v=(0,n().VK)((()=>u().default.getState()),[]),{mondayFoldersDetailsMap:S,mondayBoardsDetailsMap:T,excludeProjectsAndTasks:b,selectedBoardIdsForFullImport:A,selectedFolderIdsForFullImport:Z,isLoadingBoards:B}=v,V=null==S?void 0:S[t],_=(0,n().VK)((()=>p().default.state.currentSpaceViewStore),[]);(0,a.useEffect)((()=>{if(!_||!V||!_.getSpaceId())return;v.selectedFolderIdsForFullImport.has(V.folderId)||y("private")}),[V,_,v.selectedFolderIdsForFullImport]);const L=(0,a.useCallback)((e=>{V&&(d().e_({folderId:V.folderId,notionTeamspaceId:e,notionRootTableName:"team"}),y(e))}),[V]),R=(0,a.useCallback)((e=>{if(V)if("create"!==e){if("private"===e){if(null==_||!_.getSpaceId()||!V)return;d().e_({folderId:V.folderId,notionTeamspaceId:_.getSpaceId(),notionRootTableName:"space"})}else d().e_({folderId:V.folderId,notionTeamspaceId:e,notionRootTableName:"team"});y(e)}else k().lo("monday_importer",{onClose:L})}),[V,L,_]),D=(0,a.useMemo)((()=>Z?{boardsCount:d().x(t,A,S,T,b)}:{boardsCount:0}),[t,b,T,S,A,Z]),O=(0,a.useMemo)((()=>({boardsCount:d().Nu(t,S,T,b)})),[t,b,T,S]),q=!(V.boards.length||V.subFolders.length),H=(0,a.useMemo)((()=>d().M3({currentfolderId:t,mondayFolderDetails:S,mondayBoardDetails:T,excludeProjectsAndTasks:b})),[t,b,T,S]),N={color:s.mediumTextColor,fill:s.mediumIconColor,opacity:.4};function U(e){let{mondayFoldersMap:t,mondayBoardsMap:o,currentFolderId:a,excludeProjectsAndTasks:n}=e;if(c)return[];const r=t[a];return[...r.boards.map((e=>{const t=o[e];if(!t||!r)return null;const a=d().hm({excludeProjectsAndTasks:n,board:t});return{key:e,columns:[(0,W.jsxs)(x().gq,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,W.jsx)(C().Z,{style:a?{color:s.mediumTextColor,fill:s.mediumIconColor,opacity:.4,marginRight:2}:{marginRight:2},onClick:()=>{d().XE(e)},checked:A.has(e),size:14,checkSize:8,disabled:a}),(0,W.jsx)(P().Z,{disableTooltip:!a,renderTooltip:()=>(0,W.jsx)(h().Z,{style:{color:w().ZP.white},isSmall:!0,children:i.formatMessage(d().VE.projectsAndTasksExcludedToolTip)}),render:e=>(0,W.jsx)("div",{...e,children:(0,W.jsx)("div",{style:a?{color:s.mediumTextColor,fill:s.mediumIconColor,opacity:.4,width:240,wordWrap:"break-word"}:{width:240,wordWrap:"break-word"},children:(0,W.jsxs)(h().Z,{style:{lineHeight:"20px",fontSize:"14px"},children:[(0,W.jsx)("div",{style:{display:"inline-block",paddingRight:"4px"},children:(0,I().i)({display:"inline-block",color:s.mediumIconColor,width:12.5,height:12.5})}),t.name]})})})})]},`${e}-container`)]}})).filter((e=>null!==e)),...r.subFolders.map((e=>{const a=t[e];return a?{key:e,columns:[(0,W.jsx)(x().gq,{alignItems:"center",gap:6,style:{marginLeft:20,marginTop:"4px"},children:(0,W.jsx)(E().Z,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:[{key:"team",header:(0,W.jsxs)(x().gq,{alignItems:"center",gap:2,children:[(0,W.jsx)(C().Z,{style:B?{...N,marginRight:4,height:14}:{marginRight:4,height:14},checked:Z.has(e),size:14,checkSize:8,disabled:B,onClick:()=>d().$9(e,t,o,n)}),(0,j().v)({display:"inline-block",color:s.mediumIconColor,width:12.5,height:12.5}),(0,W.jsx)(h().Z,{style:{width:280,textOverflow:"ellipsis"},children:a.folderName})]}),style:{width:300,paddingBottom:0}}],rows:U({mondayFoldersMap:t,mondayBoardsMap:o,currentFolderId:e,excludeProjectsAndTasks:n})})},`${e}-container`)]}:null})).filter((e=>null!==e)).flat()]}return V&&T&&H?(0,W.jsx)(P().Z,{disableTooltip:!q,renderTooltip:()=>(0,W.jsx)(h().Z,{style:{color:w().ZP.white},isSmall:!0,children:i.formatMessage(d().VE.noBoardsTooltipMessage)}),render:e=>{var t;return(0,W.jsx)("div",{...e,children:(0,W.jsx)("div",{style:{marginBottom:10},children:(0,W.jsxs)(M().rj,{gap:8,children:[(0,W.jsx)(M().r8,{row:1,col:1,children:(0,W.jsx)(te,{shouldBeDisabled:q,collapsed:c,onCollapse:()=>g((e=>!e)),columns:[{key:"team",header:(0,W.jsxs)(x().gq,{alignItems:"center",gap:2,children:[(0,W.jsx)(C().Z,{style:{marginRight:4,height:14},disabled:q||B,checked:v.selectedFolderIdsForFullImport.has(V.folderId),size:14,checkSize:8,onClick:()=>d().$9(V.folderId,S,T,b)}),(0,j().v)({height:12,width:12,display:"inline-block"}),(0,W.jsxs)(x().gq,{alignItems:"center",gap:6,children:[(0,W.jsx)(h().Z,{style:B?{...N,textOverflow:"ellipsis"}:{textOverflow:"ellipsis"},children:V.folderName}),B&&(0,W.jsx)(m().Z,{size:"sm"}),(0,W.jsxs)(h().Z,{isSmall:!0,children:[O.boardsCount,i.formatMessage(d().VE.boardsKeyWord)]})]})]}),style:{width:300,paddingBottom:0}}],rows:U({mondayFoldersMap:S,mondayBoardsMap:T,currentFolderId:V.folderId,excludeProjectsAndTasks:b})})}),(0,W.jsx)(M().r8,{row:1,col:2,children:(0,W.jsx)(F().OO,{onSelectOption:R,options:o,currentOption:null===(t=o.find((e=>e.key===f)))||void 0===t?void 0:t.key,style:c?"compact":"full",children:(0,W.jsx)(h().Z,{style:{fontSize:"14px",paddingLeft:c?"8px":0},children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.chooseWorkspace.totalBoards",defaultMessage:"Import {boardsCount} boards to",values:{boardsCount:D.boardsCount}})})})})]})})})}}):null}function ee(e){let{mondayFolderAndBoards:t,notionTeamspaceOptions:o}=e;const s=(0,F().x3)(),[r,i]=(0,a.useState)(!1),[c,m]=(0,a.useState)(),g=(0,n().VK)((()=>u().default.getState()),[]),f=(0,n().VK)((()=>p().default.state.currentSpaceViewStore),[]),y=(0,n().VK)((()=>{const e=null==f?void 0:f.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,W.jsx)(T().p,{disabled:!0,store:e})})))}),[f]);(0,a.useEffect)((()=>{if(!y||!f)return;if(!g.selectedProjectsAndTeamspaces[t.folderId]){m("private"),d().eL({folderId:t.folderId,spaceId:null==f?void 0:f.id});for(const a of y){var e,o;if((null===(e=a.name)||void 0===e?void 0:e.toLowerCase())===(null===(o=t.folderName)||void 0===o?void 0:o.toLowerCase())){m(a.id),d().eL({folderId:t.folderId,spaceId:a.id});break}}}}),[t,f,g.selectedProjectsAndTeamspaces,y]);const I=!(t.projects.length||t.taskBoards.length),j=(0,a.useCallback)((e=>{d().eL({folderId:t.folderId,spaceId:e}),m(e)}),[t.folderId]),v=(0,a.useCallback)((e=>{if("create"===e)return void k().lo("monday_importer",{onClose:j});let o;if("private"===e){if(null==f||!f.id)return;o=f.id}else o=e;d().eL({folderId:t.folderId,spaceId:o}),m(e)}),[null==f?void 0:f.id,t.folderId,j]),S=(0,l().YB)(),b=(0,a.useMemo)((()=>({projectsCount:t.projects.length,tasksCount:t.taskBoards.length})),[t.projects.length,t.taskBoards.length]),A=(0,a.useMemo)((()=>{var e;const o=null===(e=g.selectedProjectsAndTeamspaces[t.folderId])||void 0===e?void 0:e.projects,[a,s]=o?o.reduce(((e,t)=>{let[o,a]=e;return"projects"===t.collectionType?[o+1,a]:[o,a+1]}),[0,0]):[0,0];return{projectsCount:a,tasksCount:s}}),[t.folderId,g.selectedProjectsAndTeamspaces]);return(0,W.jsx)(P().Z,{disableTooltip:!I,renderTooltip:()=>(0,W.jsx)(h().Z,{style:{color:w().ZP.white},isSmall:!0,children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:e=>{var a;return(0,W.jsx)("div",{...e,children:(0,W.jsx)("div",{style:s.asanaTeamSectionContainer,children:(0,W.jsxs)(M().rj,{gap:8,children:[(0,W.jsx)(M().r8,{row:1,col:1,children:(0,W.jsx)(te,{shouldBeDisabled:I,collapsed:r,onCollapse:()=>i((e=>!e)),columns:[{key:"team",header:(0,W.jsxs)(x().gq,{alignItems:"center",gap:2,children:[(0,W.jsx)(C().Z,{style:{marginRight:4,height:14},disabled:I,checked:(()=>{const e={...g.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(e.isEntireFolderSelected)})(),size:14,checkSize:8,onClick:()=>{const e={...g.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:o,isEntireFolderSelected:a}=e;let s,n;if(a)s=[],n=!1;else{s=[...t.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...t.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],n=!0}u().default.setState({...g,selectedProjectsAndTeamspaces:{...g.selectedProjectsAndTeamspaces,[t.folderId]:{notionTeamspaceId:o,projects:s,isEntireFolderSelected:n}}})}}),(0,W.jsxs)(x().gq,{alignItems:"center",gap:6,children:[(0,W.jsx)(h().Z,{style:{textOverflow:"ellipsis"},children:t.folderName}),(0,W.jsx)(P().Z,{renderTooltip:()=>(0,W.jsx)(h().Z,{style:{color:w().ZP.white},isSmall:!0,children:S.formatMessage(d().VE.projectsAndTasksCountTooltip)}),render:e=>(0,W.jsx)("div",{...e,children:(0,W.jsxs)(h().Z,{isSmall:!0,children:[b.projectsCount+b.tasksCount,S.formatMessage(d().VE.projectsKeyWord)]})})})]})]}),style:{width:300,paddingBottom:0}}],rows:G({collapsed:r,mondayFolderAndBoards:t,mondayImportStoreState:g,isMondayV2Flow:!0})})}),(0,W.jsx)(M().r8,{row:1,col:2,children:(0,W.jsx)(F().OO,{onSelectOption:v,options:o,currentOption:null===(a=o.find((e=>e.key===c)))||void 0===a?void 0:a.key,style:r?"compact":"full",children:(0,W.jsx)(h().Z,{style:{fontSize:"14px",paddingLeft:r?"8px":0},children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.chooseWorkspace.totalprojectsAnsTasks",defaultMessage:"Import {projectsCount} Projects to",values:{projectsCount:A.projectsCount+A.tasksCount}})})})})]})})})}})}function te(e){let{columns:t,rows:o,shouldBeDisabled:a,collapsed:s,onCollapse:n}=e;const i=(0,r().Fg)(),l=(0,F().x3)();return(0,W.jsx)("div",{style:l.teamAndProjectsCollapse,children:(0,W.jsxs)(x().gq,{style:a?{color:i.mediumTextColor,fill:i.mediumIconColor,opacity:.4}:{},children:[(0,W.jsx)(b().D,{onClick:()=>n(),style:{gap:12},pressedStyle:{background:"transparent"},iconStyle:{marginRight:0,marginTop:10},ignoreLocalHoverState:!0,icon:e=>(0,W.jsx)($().Z,{disabled:!0,style:{...e,pointerEvents:"none"},isSidebar:!1,open:!s,fill:!1,onClick:e=>{e.stopPropagation(),n()},icon:"chevron"})}),(0,W.jsx)(E().Z,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:t,rows:o})]})})}const oe=function(){const e=(0,l().YB)(),t=(0,F().x3)(),a=(0,n().VK)((()=>u().default.getState()),[]),r=d().KH(),{selectedWorkspace:i,workspaces:p,selectedImportType:m,excludeProjectsAndTasks:g}=a,f=(0,s().O7)().device.isMobile,y="FullImport"===m?{on:g,title:e.formatMessage(d().VE.excludeProjectsAndTasks),focused:!0,onClick:()=>u().default.setState({...a,excludeProjectsAndTasks:!g,selectedFolderIdsForFullImport:new Set,selectedBoardIdsForFullImport:new Set,selectedTeamspacesForFullImport:{}})}:void 0,I=[];return y&&I.push({key:"monday-exclude-projects-and-asks",props:y}),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(x().gq,{alignItems:"center",gap:8,children:(0,W.jsx)(o(854577).Z,{searchThreshold:5,onSelectOption:e=>{u().default.setState({...a,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:p.map((e=>({key:e.id,name:e.name,searchTerm:[e.name,...e.name.split(" ")]}))),currentOption:i,placeHolder:e.formatMessage(d().VE.selectWorkspaceV2),inputProps:{placeholder:e.formatMessage(d().VE.searchWorkspaces)},buttonStyles:t.workspaceSelectorButton,iconStyles:t.menuChevonDownIcon})}),i&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(h().Z,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:e.formatMessage(d().VE.chooseImportType)}),(0,W.jsx)(x().gq,{alignItems:"left",gap:8,children:(0,W.jsx)(o(579807).Z,{isMobile:f,type:"dropdown",currentOption:m,options:Object.entries(r).map((t=>{let[o,a]=t;return{key:o,label:e.formatMessage(a.title),caption:e.formatMessage(a.description)}})),buttonStyle:{paddingLeft:"0px",marginLeft:"0px"},menuStyle:{width:"300px"},onSelectOption:e=>{u().default.setState({...a,selectedImportType:e,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{}})},switcherButtons:I})})]}),i&&m&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(h().Z,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:e.formatMessage(d().VE.selectBoardsHeading)}),(0,W.jsx)(h().Z,{style:{font:"SF Pro",fontWeight:c().Ue.regular,fontSize:c().JB.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:e.formatMessage(d().VE.mapTeamspacesDescription)})]}),(0,W.jsx)(J,{})]})};var ae=()=>o(382850);const se=function(){const e=(0,n().Kw)(u().default);return e.result?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(h().Z,{isMultiline:!0,children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,W.jsx)("div",{style:{marginTop:32},children:e.result.map((e=>(0,W.jsx)(ne,{importStatus:e},e.mondayFolderId)))})]}):(0,W.jsx)(W.Fragment,{})};function ne(e){let{importStatus:t}=e;const o=(0,r().Fg)(),[s,i]=(0,a.useState)(!1),c=(0,n().VK)((()=>p().default.state.currentSpaceStore),[]),d=(0,n().VK)((()=>u().default.state.mondayFoldersAndBoards),[]),m=(0,n().VK)((()=>p().default.state.currentSpaceViewStore),[]),g=(0,n().VK)((()=>{if(!m)return;const e=m.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,W.jsx)(T().p,{disabled:!0,store:e})})));return c?(e||[]).concat({id:m.id,name:"Private",icon:(0,W.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:w().FN.light.gray[75]},children:(0,v().Q)({color:o.mediumIconColor,width:12.5,height:12.5})})}):e}),[m,c,o]),{notionTeamspaceName:f,notionTeamspaceIcon:y}=(0,a.useMemo)((()=>{const e=null==g?void 0:g.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[g,t]),I=(0,a.useMemo)((()=>{var e;return null==d||null===(e=d.find((e=>e.folderId===t.mondayFolderId)))||void 0===e?void 0:e.folderName}),[d,t]);return(0,W.jsxs)(x().gq,{style:{marginTop:16},children:[(0,W.jsx)(B().Z,{ariaLabel:"collapse toggle",icon:Z().L,onClick:()=>i((e=>!e)),style:{transform:s?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:4},iconStyle:{width:8,height:8}}),(0,W.jsx)(E().Z,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,W.jsx)(x().gq,{alignItems:"center",gap:2,children:(0,W.jsx)(h().Z,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:I})}),style:{width:300}},{key:"importedInto",header:(0,W.jsxs)(x().gq,{gap:4,children:[(0,W.jsxs)(x().gq,{style:{alignItems:"center",gap:4},children:[(0,W.jsx)(h().Z,{isSmall:!0,children:(0,W.jsx)(l()._H,{id:"mondayImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,A().n)({width:12})]}),(0,W.jsxs)(x().gq,{style:{alignItems:"center",gap:4},children:[y,f]})]}),style:{width:300}}],rows:function(e){let{collapsed:o}=e;return o?[]:t.projects.map((e=>({key:e.projectId,columns:[(0,W.jsxs)(x().gq,{gap:8,alignItems:"center",children:[(0,ae().r)({width:12,color:w().FN.dark.green[600]}),(0,W.jsx)(h().Z,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId)]})))}({collapsed:s})})]})}const re=(0,l().vU)({failed:{defaultMessage:"Some problems occurred while importing data from your Monday workspace.",id:"Mondayimport.importingData.failed.problemsOccured"}});function ie(e,t){switch(e){case"selectData":return(0,W.jsx)(h().Z,{style:{paddingBottom:8,fontSize:18,width:"100%",fontWeight:c().Ue.semibold},children:t.formatMessage(d().VE.selectWorkSpaceV1)});case"chooseWorkspace":return(0,W.jsx)(h().Z,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:t.formatMessage(d().VE.chooseWorkSpace)});default:return(0,W.jsx)(W.Fragment,{})}}function le(){return(0,W.jsx)(y().Z,{title:(0,W.jsx)(l()._H,{id:"mondayAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Monday.com"}),href:"https://www.notion.so/help/monday",analyticsFrom:"import",style:{marginTop:8}})}const ce=function(e){let{tab:t,fetchActiveImportTasks:c}=e;const h=o(527278).Z.getIntl(),y=(0,s().O7)(),I=(0,n().VK)((()=>p().default.state.currentSpaceStore),[]),j=(0,n().VK)((()=>p().default.state.currentSpaceViewStore),[]),v=(0,n().VK)((()=>o(700696).default.state.teams),[]),S=(0,n().Kw)(u().default),w=(0,n().Kw)(o(623521).Z).flowId||o(956057).Il(),{workspaces:k}=S,T=(0,a.useCallback)((()=>{if("FullImport"===S.selectedImportType)return S.selectedBoardIdsForFullImport.size>0||S.selectedFolderIdsForFullImport.size>0;return Object.values(S.selectedProjectsAndTeamspaces).some((e=>0!==e.projects.length))}),[S.selectedProjectsAndTeamspaces,S.selectedFolderIdsForFullImport,S.selectedBoardIdsForFullImport,S.selectedImportType]),b=(0,a.useCallback)((()=>{I&&j&&("FullImport"===S.selectedImportType?d().Hl({environment:y,spaceStore:I,flowId:w,spaceViewStore:j}).catch((()=>{})):d().C8({environment:y,spaceStore:I,currentSpaceViewStore:j,teamsStores:v,flowId:w}).catch((()=>{})))}),[j,y,w,S.selectedImportType,I,v]),C=(0,r().yK)((e=>({closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor}})),[]),M=(0,a.useMemo)((()=>"chooseWorkspace"===t),[t]);return(0,W.jsxs)(o(504117).ZP,{controlRow:(e=>"chooseWorkspace"===e?(0,W.jsx)(o(129824).f,{left:(0,W.jsx)(le,{}),next:{disabled:!T()||S.templateCreationInProgress,onClick:b,message:h.formatMessage(d().VE.nextButton)},back:{disabled:!k.length,onClick:()=>{c(),u().default.resetImport()},message:h.formatMessage(d().VE.backButton)}}):"selectData"===e?(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,W.jsx)(g().Z,{style:{border:0},disabled:!k.length,onClick:()=>{c(),u().default.resetImport()},children:h.formatMessage(d().VE.backButton)}),(0,W.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,W.jsx)(x().gq,{alignItems:"center",gap:8,children:(0,W.jsx)(f().Z,{style:{marginLeft:16},disabled:!T()||S.templateCreationInProgress,onClick:()=>{b()},children:S.templateCreationInProgress?(0,W.jsxs)(x().gq,{alignItems:"center",gap:2,children:[(0,W.jsx)(m().Z,{onDarkBackground:!0}),h.formatMessage(d().VE.creatingTemplate)]}):(0,W.jsx)(W.Fragment,{children:h.formatMessage(d().VE.nextButton)})})})})]}):"importingData"===e?(0,W.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,W.jsx)(g().Z,{disabled:!k.length,onClick:()=>{c(),u().default.resetImport()},children:(0,W.jsx)(l()._H,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"confirm"===e?(0,W.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,W.jsx)(f().Z,{onClick:()=>{var e;if(null!==(e=S.result)&&void 0!==e&&e.length&&S.loggerPageId){const e=S.result.find((e=>void 0!==e.projectCollectionPageId));o(497065).c4({url:(0,o(135857).Z)({pageId:(null==e?void 0:e.projectCollectionPageId)||S.loggerPageId,pageModel:(0,o(718162).lA)({table:o(396136).iU,id:(null==e?void 0:e.projectCollectionPageId)||S.loggerPageId}),baseUrl:o(205228).default.domainBaseUrl,pageVisitSource:o(506347).tY.Import}),environment:y})}u().default.resetImport(),o(838266).default.reset()},children:(0,W.jsx)(l()._H,{id:"importsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,W.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,W.jsx)(g().Z,{disabled:!k.length,onClick:()=>{c(),u().default.resetImport()},children:(0,W.jsx)(l()._H,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):void 0)(t),controlRowPaddingTopBottom:M?10:20,contentPaddingLeftRight:M?25:void 0,controlRowPaddingLeftRight:M?15:void 0,getPaddingTopBottom:M?()=>2:void 0,children:[(0,W.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:(0,W.jsx)("div",{style:{position:"absolute",top:12,right:12},children:(0,W.jsx)(o(745740).Z,{onClick:()=>{c(),u().default.resetImport()},style:C.closeButton,hoveredStyle:C.closeButtonHover,children:(0,o(205248).D)(C.closeButtonIcon)})})}),ie(t,h),(e=>"selectData"===e?(0,W.jsx)(N,{}):"chooseWorkspace"===e?(0,W.jsx)(oe,{}):"importingData"===e?(0,W.jsx)(o(243818).Z,{assetSrc:i().Z.images.import.mondayPng}):"confirm"===e?(0,W.jsx)(se,{}):"failure"===e?(0,W.jsx)(o(996185).Z,{assetSrc:i().Z.images.import.mondayPng,loggerPageId:S.loggerPageId,failedMessage:h.formatMessage(re.failed)}):void 0)(t)]})}},819792:(e,t,o)=>{o.d(t,{z:()=>i});o(667294);var a=()=>o(846550),s=()=>o(788860),n=o(785893);const r=8;function i(e){let{color:t,size:o,style:i}=e;const l=(0,s().YB)(),c=(0,a().yK)((e=>({dot:{height:o||r,width:o||r,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...i}})),[o,t,i]);return(0,n.jsx)("div",{role:"img","aria-label":l.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:c.dot})}},866747:(e,t,o)=>{o.d(t,{OO:()=>Z,ZP:()=>_,x3:()=>B});o(670560),o(267602),o(653476),o(241792),o(731107),o(443261);var a=o(667294),s=()=>o(219727),n=()=>o(142735),r=()=>o(846550),i=()=>o(682890),l=()=>o(374844),c=()=>o(667067),d=()=>o(490670),p=()=>o(788860),u=()=>o(568017),m=()=>o(696459),g=()=>o(707513),f=()=>o(998484),h=()=>o(876822),y=()=>o(199114),x=()=>o(44556),I=()=>o(383694),j=()=>o(265640),v=()=>o(356641),S=()=>o(668001),w=()=>o(67961),k=()=>o(251932),T=()=>o(819792),b=()=>o(491629),C=()=>o(854577),M=o(785893);const P=(0,p().vU)({selectWorkspace:{id:"asanaImporter.chooseWorkspace.chooseWorkspacePlaceholder",defaultMessage:"Choose a workspace"},selectProjectHeading:{id:"asanaImport.importsTab.chooseWorkspace.selectProjects",defaultMessage:"Choose projects to import"},mapTeamspacesDescription:{id:"asanaImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Asana team a Notion teamspace to collaborate in. Each teamspace has a Projects database, where your imported projects will live."},loadingProjectsPlaceholder:{id:"asanaImport.importsTab.chooseWorkspace.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."},chooseTeamspaceOption:{id:"asanaImport.importsTab.chooseWorkspace.selectTeamspace",defaultMessage:"Choose a teamspace"},filterTeams:{id:"asanaImport.importsTab.chooseWorkspace.filterTeams",defaultMessage:"Filter teamspaces..."},filterWorkspaces:{id:"asanaImport.importsTab.chooseWorkspace.searchAsanaWorkspaces",defaultMessage:"Filter workspaces..."},newTeamspaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"},completedProjectLabel:{id:"asanaImport.importsTab.chooseWorkspace.completedHelperText",defaultMessage:" (Completed)"}});function F(e){let{asanaTeam:t}=e;const o=B(),s=(0,p().YB)(),r=(0,n().VK)((()=>y().default.getState()),[]),i=(0,n().VK)((()=>{var e;const t=null===(e=h().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getTeamsStores())||void 0===e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,M.jsx)(I().p,{disabled:!0,store:e})}))),a=[];return t&&a.push(...t.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),a.push({key:"private",searchTerm:["private"],icon:(0,c().Q)(o.lockedIcon),name:s.formatMessage(P.privateSpaceLabel)}),a.push({key:"create",searchTerm:["New"],icon:(0,d().f)(o.plusIcon),name:s.formatMessage(P.newTeamspaceLabel)}),a}),[s,o.lockedIcon,o.plusIcon]),{importCompletedTasks:l,selectedProjectsAndTeamspaces:u}=r,m=(0,a.useMemo)((()=>u[t.gid]||{projects:[],notionTeamspaceId:void 0}),[u,t.gid]),[g,j]=(0,a.useState)(m.notionTeamspaceId),S=(0,n().VK)((()=>h().default.state.currentSpaceViewStore),[]),k=(0,a.useCallback)((e=>{if(g===e)return f().B3({teamId:t.gid,spaceId:null}),void j(void 0);if("create"===e)return void x().lo("asana_importer",{onClose:e=>{f().B3({teamId:t.gid,spaceId:e}),j(e)}});let o;if("private"===e){if(null==S||!S.id)return;o=S.id}else o=e;f().B3({teamId:t.gid,spaceId:o}),j(e)}),[null==S?void 0:S.id,t.gid,g]),T=(0,a.useCallback)((e=>{const o={...u[t.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:a,projects:s}=o;let n=s;"all"===n&&(n=t.projects.map((e=>e.gid))),"in_complete"===n&&(n=t.projects.filter((e=>!e.completed)).map((e=>e.gid))),n=n.includes(e.gid)?n.filter((t=>t!==e.gid)):n.concat(e.gid),y().default.setState({...r,selectedProjectsAndTeamspaces:{...u,[t.gid]:{notionTeamspaceId:a,projects:n}}})}),[t.gid,t.projects,r,u]),b=(0,a.useMemo)((()=>{const{projects:e}=m;return 0!==e.length&&(e.length===t.projects.length||"partial")}),[m,t.projects]),C=(0,a.useCallback)((()=>{var e;let o=[];0===m.projects.length?(o=t.projects.filter((e=>!e.completed)).map((e=>e.gid)),0===o.length&&(o=t.projects.map((e=>e.gid)))):o=m.projects.length===t.projects.length?[]:t.projects.map((e=>e.gid)),y().default.setState({...r,selectedProjectsAndTeamspaces:{...u,[t.gid]:{notionTeamspaceId:null===(e=u[t.gid])||void 0===e?void 0:e.notionTeamspaceId,projects:o}}})}),[m.projects,t.projects,t.gid,r,u]),F=(0,a.useMemo)((()=>{const e=r.importCompletedTasks;let o=t.projects;return"in_complete"===m.projects?o=o.filter((e=>!e.completed)):"all"!==m.projects&&m.projects.length!==o.length&&(o=o.filter((e=>m.projects.includes(e.gid)))),{projects:o.length,tasks:o.reduce(((t,o)=>t+(e?o.task_counts.num_tasks:o.task_counts.num_incomplete_tasks)),0)}}),[m.projects,t.projects,r.importCompletedTasks]),[V,_]=(0,a.useState)(!1);return(0,M.jsx)("div",{style:o.asanaTeamSectionContainer,children:(0,M.jsxs)(v().rj,{gap:8,children:[(0,M.jsx)(v().r8,{row:1,col:1,children:(0,M.jsx)("div",{style:o.teamAndProjectsCollapse,children:(0,M.jsx)(A,{team:t,importCompletedTasks:l,collapsed:V,onToggle:()=>_((e=>!e)),checked:e=>"all"===m.projects||"in_complete"===m.projects&&!1===e.completed||m.projects.includes(e.gid),onSelectProject:T,onSelectGroup:C,groupCheckState:b})})}),(0,M.jsx)(v().r8,{row:1,col:2,children:(0,M.jsx)(Z,{onSelectOption:k,options:i,currentOption:g,style:V?"compact":"full",children:(0,M.jsx)(w().Z,{style:{fontSize:"14px",paddingLeft:V?"8px":0},children:(0,M.jsx)(p()._H,{id:"asanaImport.importsTab.chooseWorkspace.totalProjectsAndTasks",defaultMessage:"Import {nProjects} projects, {nTasks} tasks to",values:{nProjects:F.projects,nTasks:F.tasks}})})})})]})})}function A(e){let{team:t,collapsed:o,onToggle:n,importCompletedTasks:r,onSelectProject:l,onSelectGroup:c,groupCheckState:d,checked:g}=e;const h=B(),y=(0,p().YB)(),x=(0,s().O7)(),[I,v]=(0,a.useState)(!1);return(0,M.jsx)(b().Z,{getIdentifier:e=>e.gid,onSelectRow:l,rows:t.projects,loadMoreButton:(0,m().$K)(t.nextPage)&&(0,M.jsx)(j().D,{style:{padding:0,width:"60%",height:20},hoveredStyle:{background:"transparent"},onClick:async()=>{v(!0),await f().LH({team:t,environment:x}),v(!1)},children:I?(0,M.jsx)(S().Z,{style:{height:14,width:"100%"}}):(0,M.jsxs)(M.Fragment,{children:[(0,i().M)(h.loadMoreArrowStyles),(0,M.jsx)(w().Z,{style:h.loadMoreLabel,children:(0,M.jsx)(p()._H,{id:"asanaImport.importsTab.chooseWorkspace.loadMoreProjects",defaultMessage:"Load more projects"})})]})}),title:(0,M.jsx)("div",{style:{lineHeight:"20px",fontSize:"14px"},children:t.name}),renderRow:e=>(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(T().z,{color:e.color,size:14,style:{borderRadius:"15%"}}),(0,M.jsxs)(w().Z,{style:{...e.completed?h.projectNameCompleted:{},maxWidth:220},children:[e.name,e.completed&&y.formatMessage(P.completedProjectLabel)]}),(0,M.jsxs)(w().Z,{isSmall:!0,style:{color:u().FN.light.gray[400]},children:[r?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,(0,M.jsx)(p()._H,{id:"asanaImport.importsTab.chooseWorkspace.tasksHelperText",defaultMessage:" tasks"})]})]}),onToggleGroup:n,onSelectGroup:c,collapsed:o,groupCheckedState:d,rowCheckedState:g})}function Z(e){let{onSelectOption:t,options:o,currentOption:a,children:s,style:n}=e;const r=(0,p().YB)(),i=B();return(0,M.jsxs)(k().gq,{flexDirection:"compact"===n?"row":"column",alignItems:"center",justifyContent:"center",style:i.teamSpaceContainer,children:[(0,l().n)(i.arrowIconStyles),s,(0,M.jsx)(C().Z,{onSelectOption:t,options:o,iconOnly:"compact"===n,currentOption:a,placeHolder:r.formatMessage(P.chooseTeamspaceOption),searchThreshold:5,buttonStyles:{maxWidth:300},iconStyles:i.menuChevonDownIcon,menuProps:{maxWidth:300,maxHeight:400,left:50},inputProps:{placeholder:r.formatMessage(P.filterTeams)}})]})}function B(){return(0,r().yK)((e=>({loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6},workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,opacity:1,width:376,border:`1px solid ${u().FN.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},projectNameCompleted:{color:e.lightTextColor},menuChevonDownIcon:{width:12,height:12,marginLeft:4,fill:e.lightIconColor},plusIcon:{color:e.mediumIconColor,width:16,height:16},lockedIcon:{color:e.mediumIconColor,width:12.5,height:12.5},asanaTeamSectionContainer:{marginBottom:20},teamAndProjectsCollapse:{paddingTop:8,paddingBottom:8},teamSpaceContainer:{height:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:"8px 2px",gap:8,position:"relative"},arrowIconStyles:{position:"absolute",top:"50%",left:0,transform:"translate(-64%, -50%)",width:12,height:28,color:e.selectLightGray[700],backgroundColor:e.modalBackground},loadMoreLabel:{color:e.selectLightGray[700]},loadMoreArrowStyles:{width:12,color:e.selectLightGray[700],marginRight:8,marginLeft:1},teamSpaceLabel:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:u().FN.light.gray[75]}})),[])}function V(){const e=B();return(0,M.jsxs)(v().rj,{gap:8,children:[(0,M.jsxs)(v().r8,{row:1,col:1,children:[(0,M.jsxs)(k().gq,{style:{paddingLeft:6,paddingRight:8,...e.loadingRow},children:[(0,M.jsx)(S().Z,{style:{height:14,width:34}}),(0,M.jsx)(S().Z,{style:{height:14,width:200}})]}),(0,M.jsx)(S().Z,{style:{marginLeft:40,marginTop:10,height:14,width:180}}),(0,M.jsx)(S().Z,{style:{marginLeft:40,marginTop:12,height:14,width:240}})]}),(0,M.jsx)(v().r8,{row:1,col:2,children:(0,M.jsxs)(k().gq,{flexDirection:"column",alignItems:"center",children:[(0,M.jsx)(S().Z,{style:{marginLeft:40,marginTop:12,height:14,width:200}}),(0,M.jsx)(S().Z,{style:{marginLeft:40,marginTop:12,height:14,width:140}})]})})]})}const _=function(){const e=(0,s().O7)(),t=(0,p().YB)(),r=B(),i=(0,n().VK)((()=>y().default.getState()),[]),{isLoadingProjects:l,selectedWorkspace:c,teamsAndProjects:d,workspaces:u}=i;return(0,a.useEffect)((()=>{c&&f().y2({selectedWorkspace:c,environment:e}).catch((()=>{}))}),[c,e]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(k().gq,{alignItems:"center",gap:8,children:[(0,M.jsx)("img",{src:o(714230).Z.images.import.asanaPng,width:16,height:16}),(0,M.jsx)(C().Z,{searchThreshold:5,onSelectOption:e=>{y().default.setState({...i,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:u.map((e=>({key:e.gid,name:e.name,searchTerm:e.name.split(" ")}))),currentOption:c,placeHolder:t.formatMessage(P.selectWorkspace),inputProps:{placeholder:t.formatMessage(P.filterWorkspaces)},buttonStyles:r.workspaceSelectorButton,iconStyles:r.menuChevonDownIcon})]}),c&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w().Z,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,M.jsx)(p()._H,{...P.selectProjectHeading})}),(0,M.jsx)(w().Z,{style:{font:"SF Pro",fontWeight:g().Ue.regular,fontSize:g().JB.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:(0,M.jsx)(p()._H,{...P.mapTeamspacesDescription})})]}),l?(0,M.jsx)(V,{}):d.filter((e=>0!==e.projects.length)).map((e=>(0,M.jsx)(F,{asanaTeam:e},`${e.gid}-table`)))]})}},491629:(e,t,o)=>{o.d(t,{Z:()=>p});o(241792),o(667294);var a=()=>o(846550),s=()=>o(568017),n=()=>o(265640),r=()=>o(715139),i=()=>o(668001),l=()=>o(251932),c=()=>o(167705),d=o(785893);function p(e){let{getIdentifier:t,onSelectRow:o,rows:p,title:u,renderRow:m,onToggleGroup:g,onSelectGroup:f,collapsed:h,groupCheckedState:y,rowCheckedState:x,disabled:I,rowStyles:j={},rowsContainerStyles:v={},loadMoreButton:S,checkboxStyles:w={},loading:k}=e;const T=(0,a().yK)((e=>({row:{display:"flex",cursor:"pointer",alignItems:"center",gap:6,height:24,marginTop:4,marginLeft:40},loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6}})),[]);if(k){const e=(null==j?void 0:j.lineHeight)||14;return(0,d.jsxs)("div",{children:[(0,d.jsxs)(l().gq,{style:{paddingLeft:6,paddingRight:8,...T.loadingRow},children:[(0,d.jsx)(i().Z,{style:{height:14,width:34}}),(0,d.jsx)(i().Z,{style:{height:e,width:200}})]}),(0,d.jsxs)("div",{style:{...T.row,...j},children:[(0,d.jsx)(i().Z,{style:{height:14,width:14}}),(0,d.jsx)(i().Z,{style:{height:e,width:64}})]}),(0,d.jsxs)("div",{style:{...T.row,...j},children:[(0,d.jsx)(i().Z,{style:{height:14,width:14}}),(0,d.jsx)(i().Z,{style:{height:e,width:96}})]})]})}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n().D,{onClick:g,style:{gap:6},pressedStyle:{background:"transparent"},iconStyle:{marginRight:0},ignoreLocalHoverState:!0,icon:e=>(0,d.jsx)(c().Z,{disabled:!0,style:{...e,pointerEvents:"none"},isSidebar:!1,open:!h,fill:!1,onClick:e=>{e.stopPropagation(),g()},icon:"chevron"}),children:[(0,d.jsx)(r().Z,{disabled:I,onClick:f,checked:y,style:{borderRadius:2,...w},size:14,checkSize:8,checkedColor:I?s().ZP.blueWithAlpha(.3):s().ZP.blue}),u]}),!h&&(0,d.jsxs)("div",{style:v,children:[p.map((e=>(0,d.jsxs)("div",{style:{...T.row,...j},onClick:I?void 0:()=>{o(e)},children:[(0,d.jsx)(r().Z,{style:{marginRight:1,borderRadius:2,...w},onClick:t=>{t.stopPropagation(),o(e)},disabled:I,checked:x(e),size:14,checkSize:8,checkedColor:I?s().ZP.blueWithAlpha(.3):s().ZP.blue}),m(e)]},t(e)))),S&&!I&&(0,d.jsx)("div",{style:T.row,children:S})]})]})}},854577:(e,t,o)=>{o.d(t,{Z:()=>j});o(267602),o(470928),o(241792);var a=o(667294),s=()=>o(286977),n=()=>o(374289),r=()=>o(568017),i=()=>o(696459),l=()=>o(352230),c=()=>o(265640),d=()=>o(827973),p=()=>o(448419),u=()=>o(320123),m=()=>o(740046),g=()=>o(198829),f=()=>o(255577),h=()=>o(388284),y=()=>o(67961),x=()=>o(251932),I=o(785893);function j(e){const{onSelectOption:t,options:o,currentOption:j,placeHolder:v,buttonStyles:S,initialFocus:w,menuProps:k,iconOnly:T,inputProps:b,iconStyles:C,searchThreshold:M}=e,[P,F]=(0,a.useState)(""),A=o.find((e=>{let{key:t}=e;return t===j}));function Z(e){return(0,I.jsxs)(x().gq,{alignItems:"center",style:{gap:4},children:[e.icon,(0,I.jsx)(y().Z,{children:e.name})]})}return(0,I.jsx)(p().ZP,{popupType:p().Z4.Popup,placementToOrigin:p().pO.Bottom,renderOrigin:e=>(0,I.jsxs)(c().D,{...e,style:{color:j?void 0:r().FN.light.gray[300],...S},children:[(0,I.jsx)(y().Z,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:j?void 0:"#ACABA9",lineHeight:"19.6px"},children:(T?null==A?void 0:A.icon:A&&Z(A))??v}),(0,n().i)(C)]}),render:e=>{const a=(0,I.jsx)(m().ZP,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>F(e.target.value),value:P,...b}),n={menuType:l().o.Popup,width:376,left:50,header:(0,i().$K)(M)&&o.length>M?a:null,...k},r=o.map((o=>{let{key:a,name:n,icon:r,searchTerm:i}=o;return{key:a,keywords:i??[],action:()=>{t(a),e.close()},render:e=>(0,I.jsx)(d().Z,{...e,title:Z({name:n,icon:r}),shouldWrapCaption:!0,right:j===a?(0,I.jsx)("div",{style:{width:14},children:(0,s().e)()}):void 0})}}));return(0,I.jsx)(g().Z,{...n,children:(0,I.jsx)(u().f,{type:f().iW.Vertical,filterQuery:P,sections:[{key:"asanaImport.dropdown.menuList",render:e=>(0,I.jsx)(h().Z,{...e}),items:r}],initialFocus:w,style:{position:"relative",alignItems:"flex-end"}})})}})}},778265:(e,t,o)=>{o.d(t,{P:()=>n});var a=()=>o(219727),s=()=>o(466970);function n(){const{device:e}=(0,a().O7)(),t=e.isElectron||e.isMobileNative;return(0,s().E)("download_for_offline")&&t}},451378:(e,t,o)=>{o.d(t,{Z:()=>s});class a extends(()=>o(263184))().default{getInitialState(){return{notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1,linkingAccount:!1}}}const s=new a},185717:(e,t,o)=>{o.d(t,{Z:()=>a});const a=new(o(529048).Z)},145607:(e,t,o)=>{o.d(t,{Z:()=>a});const a=new(o(529048).Z)},479694:(e,t,o)=>{o.d(t,{Z:()=>a});const a=new(o(529048).Z)},623521:(e,t,o)=>{o.d(t,{Z:()=>s});class a extends(()=>o(263184))().default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||o(956057).Il();return this.state.flowId&&this.setState({flowId:e}),e}}const s=new a},405177:(e,t,o)=>{o.d(t,{default:()=>s});class a extends(()=>o(263184))().default{getInitialState(){return{boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}}}const s=new a},382850:(e,t,o)=>{o.d(t,{r:()=>s});o(667294);var a=o(785893);const s=(0,o(827282).IU)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},452024:(e,t,o)=>{o.d(t,{v:()=>s});o(667294);var a=o(785893);const s=(0,o(827282).IU)("folder",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M2.4082 14.3672H13.7627C15.0684 14.3672 15.8271 13.6084 15.8271 12.1455V5.11816C15.8271 3.65527 15.0615 2.89648 13.585 2.89648H7.22754C6.73535 2.89648 6.44824 2.78027 6.07227 2.47266L5.67578 2.1582C5.19727 1.76172 4.8418 1.63184 4.13086 1.63184H2.19629C0.917969 1.63184 0.166016 2.37695 0.166016 3.8125V12.1455C0.166016 13.6084 0.931641 14.3672 2.4082 14.3672ZM1.50586 3.92871C1.50586 3.2998 1.84766 2.97168 2.46289 2.97168H3.77539C4.26074 2.97168 4.54102 3.08105 4.92383 3.39551L5.32031 3.7168C5.79199 4.10645 6.16113 4.23633 6.87207 4.23633H13.5098C14.1387 4.23633 14.4873 4.56445 14.4873 5.23438V5.63086H1.50586V3.92871ZM2.49023 13.0273C1.85449 13.0273 1.50586 12.6992 1.50586 12.0361V6.81348H14.4873V12.0361C14.4873 12.6992 14.1387 13.0273 13.5098 13.0273H2.49023Z"})})},591514:(e,t,o)=>{o.d(t,{s:()=>s});o(667294);var a=o(785893);const s=(0,o(827282).IU)("iOSShare",{viewBox:"0 0 26 26",svg:(0,a.jsx)("path",{d:"M16.2498 7.04938C15.8356 7.04938 15.4998 7.38517 15.4998 7.79938C15.4998 8.2136 15.8356 8.54938 16.2498 8.54938V7.04938ZM9.74984 8.54938C10.164 8.54938 10.4998 8.2136 10.4998 7.79938C10.4998 7.38517 10.164 7.04938 9.74984 7.04938V8.54938ZM12.2499 15.5994C12.2499 16.0136 12.5857 16.3494 12.9999 16.3494C13.4141 16.3494 13.7499 16.0136 13.7499 15.5994H12.2499ZM13.7499 1.29938C13.7499 0.88517 13.4141 0.549384 12.9999 0.549384C12.5857 0.549384 12.2499 0.88517 12.2499 1.29938H13.7499ZM8.89451 4.01942C8.60161 4.31231 8.60161 4.78718 8.89451 5.08008C9.1874 5.37297 9.66227 5.37297 9.95517 5.08008L8.89451 4.01942ZM12.9998 0.974747L13.5302 0.444417C13.2373 0.151523 12.7624 0.151523 12.4695 0.444417L12.9998 0.974747ZM16.0445 5.08008C16.3374 5.37297 16.8123 5.37297 17.1052 5.08008C17.3981 4.78718 17.3981 4.31231 17.1052 4.01942L16.0445 5.08008ZM16.2498 8.54938H18.8498V7.04938H16.2498V8.54938ZM18.8498 8.54938C19.8716 8.54938 20.6998 9.37766 20.6998 10.3994H22.1998C22.1998 8.54923 20.7 7.04938 18.8498 7.04938V8.54938ZM20.6998 10.3994V19.8244H22.1998V10.3994H20.6998ZM20.6998 19.8244C20.6998 20.8461 19.8716 21.6744 18.8498 21.6744V23.1744C20.7 23.1744 22.1998 21.6745 22.1998 19.8244H20.6998ZM18.8498 21.6744H7.14984V23.1744H18.8498V21.6744ZM7.14984 21.6744C6.12811 21.6744 5.29984 20.8461 5.29984 19.8244H3.79984C3.79984 21.6745 5.29968 23.1744 7.14984 23.1744V21.6744ZM5.29984 19.8244V10.3994H3.79984V19.8244H5.29984ZM5.29984 10.3994C5.29984 9.37766 6.12811 8.54938 7.14984 8.54938V7.04938C5.29968 7.04938 3.79984 8.54923 3.79984 10.3994H5.29984ZM7.14984 8.54938H9.74984V7.04938H7.14984V8.54938ZM13.7499 15.5994V1.29938H12.2499V15.5994H13.7499ZM9.95517 5.08008L13.5302 1.50508L12.4695 0.444417L8.89451 4.01942L9.95517 5.08008ZM12.4695 1.50508L16.0445 5.08008L17.1052 4.01942L13.5302 0.444417L12.4695 1.50508Z"})})},840156:(e,t,o)=>{o.d(t,{UP:()=>r,by:()=>n});const a=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],s=["text/plain",".md",".mdown",".markdown",".mkdn",".mkd",".Rmd",".md.txt"],n={markdown:s,csv:["text/plain",".csv"],html:["text/html"],docx:a,gdocs:a,dropbox:a,quip:["text/html",s],workflowy:["text/plain"],confluence:["application/zip"],genericImporter:["application/zip"],pdf:["application/pdf"]},r=Object.keys(n)},576441:(e,t,o)=>{o.d(t,{E:()=>a});const a=(0,o(830742).LS)("importFile")}}]);