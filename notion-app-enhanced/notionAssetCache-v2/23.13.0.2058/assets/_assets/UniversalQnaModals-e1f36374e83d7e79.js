"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[58183],{960872:(e,n,t)=>{t.r(n),t.d(n,{UniversalQnaModals:()=>pt});t(241792);var o=t(667294),i=()=>t(219727),s=()=>t(142735),a=()=>t(801812),r=()=>t(824462),l=()=>t(343353),c=()=>t(36560),d=()=>t(261369),g=()=>t(876822),u=()=>t(524434),p=()=>t(749826),h=()=>t(487985),m=()=>t(25694),v=()=>t(897257),x=()=>t(68247),f=()=>t(993261),_=()=>t(846550),y=()=>t(605305),j=()=>t(138531),S=()=>t(788860),C=()=>t(707513),b=()=>t(231077),k=()=>t(154186),w=()=>t(738217),I=()=>t(708518),M=()=>t(251932),T=()=>t(594546),H=()=>t(148126),D=()=>t(863606),A=()=>t(689271),U=()=>t(968061),W=t(785893);function B(e){const{integrationLogoIcon:n,title:t,subtext:o}=e,i=(0,_().yK)((e=>({logoSection:{padding:"40px 20px 24px 20px",gap:8,justifyContent:"center",alignItems:"center"},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",textAlign:"center",alignItems:"center"},title:{fontSize:16,width:352,fontWeight:C().Ue.medium,lineHeight:"22px",marginBottom:"2px",justifyContent:"center",textWrap:"balance"},subtext:{fontSize:14,fontWeight:C().Ue.regular,color:`${e.text.secondary}`,textAlign:"center",alignItems:"center",justifyContent:"center",paddingLeft:20,paddingRight:20,textWrap:"balance"},wrapper:{paddingBottom:16}})),[]);return(0,W.jsxs)("div",{style:i.wrapper,children:[(0,W.jsxs)(M().gq,{style:i.logoSection,children:[(0,U().h)(i.logos),(0,A().O)(i.arrowLogo),n(i.logos)]}),(0,W.jsxs)(M().Ht,{style:i.titleWrapper,children:[(0,W.jsx)(M().gq,{style:i.title,children:t}),o?(0,W.jsx)(M().gq,{style:i.subtext,children:o}):(0,W.jsx)(W.Fragment,{})]})]})}function N(){const e=(0,i().O7)(),n=(0,_().yK)((e=>({wrapper:{width:400,gap:16,alignContent:"center"},waitingForConnectionWrapper:{gap:4},note:{fontWeight:C().Ue.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:C().Ue.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px"},learnMoreButton:{gap:4,alignItems:"center",fontSize:14,color:e.text.secondary,justifyContent:"center",padding:4},buttonContainer:{justifyContent:"center"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"}})),[]),t=(0,s().VK)((()=>"connecting"===c().W.state.currentScreen),[]),a=(0,s().VK)((()=>{var e;return null===(e=g().default.getState().currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,D().W)((async()=>{if(!a)return;if("connecting"!==c().W.state.currentScreen)return;const n=await r().callApi({eventName:"getGithubAIConnectorStatus",environment:e,data:{spaceId:a}});"success"===n.type&&n.data.isConnected&&c().W.setState({...c().W.state,currentScreen:"confirmation"})}),1e3,!0);const l=(0,o.useCallback)((()=>[(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:n.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalQna.github.waitingForConnectionNoteHeading1",defaultMessage:"GitHub should open automatically on a new tab."},"note1-1")}),(0,W.jsx)("div",{style:n.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.github.waitingForConnectionNoteBody1",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,W.jsx)("a",{style:n.link,href:c().W.state.authUrl,target:"_blank",children:(0,W.jsx)(S()._H,{id:"universalQna.github.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:n.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.github.workspaceAdminHeading",defaultMessage:"If you are a GitHub organization administrator:"},"note2-2")}),(0,W.jsx)("div",{style:n.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.github.workspaceAdminBody",defaultMessage:"Follow GitHub's instructions to connect. Return to this window, and the process will continue automatically."},"note2-3")}),(0,W.jsxs)(M().Ht,{style:{marginTop:16,gap:4},children:[(0,W.jsx)("div",{style:n.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.github.notWorkspaceAdminHeading",defaultMessage:"If you are not authorized to install external apps:"},"note2-4")}),(0,W.jsx)("div",{style:n.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.github.notWorkspaceAdminBody",defaultMessage:"Follow the instructions to request access to install the app. Then, revisit the connect menu to continue setup."},"note2-5")})]})]},"note-2")]),[n]),d=(0,o.useCallback)((()=>{const n=(0,H().UY)("guides.aiConnectorGithub");(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"learn_more_click_connecting_modal",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),e.device.isElectron?b().openExternalUrl(n):window.open(n,"_blank")}),[e]),u=(0,o.useCallback)((()=>{c().W.reset(),(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_github_connecting_modal",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}})}),[e]);return(0,W.jsx)(I().Z,{open:t,showCloseIcon:!0,onDismiss:u,render:()=>(0,W.jsxs)(M().Ht,{style:n.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:j().f,title:(0,W.jsx)(S()._H,{id:"universalQnA.github.followInstructionsFromGithub",defaultMessage:"Follow instructions from GitHub in your browser"})}),(0,W.jsxs)(M().Ht,{style:n.waitingForConnectionWrapper,children:[l().map(((e,t)=>(0,W.jsxs)(M().gq,{gap:8,style:{marginTop:4,marginBottom:6,justifyContent:"center"},children:[(0,W.jsx)(w().Z,{number:t+1}),(0,W.jsx)("div",{style:n.note,children:e})]},t))),(0,W.jsx)(M().gq,{style:n.buttonContainer,children:(0,W.jsx)(k().Z,{style:{marginTop:16,marginBottom:16,width:120,borderRadius:4},onClick:d,children:(0,W.jsxs)(M().gq,{style:n.learnMoreButton,children:[(0,W.jsx)(S()._H,{id:"universalSearch.github.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,y().K)({width:16,height:16})]})})})]})]})})}var F=()=>t(525372),Z=()=>t(857525),K=()=>t(906651),P=()=>t(67961);const L=function(e){const{title:n,open:t,notes:o,titleWidth:i,integrationIcon:s,onDismiss:a,onConnect:r,onLearnMore:l,isLoading:c,overridePrimaryMessage:d,centerNotes:g,noteStyleOverrides:u,subtitle:p}=e,h=(0,_().yK)((e=>({wrapper:{width:400,paddingTop:8},title:{fontSize:17,width:i,fontWeight:C().Ue.medium,lineHeight:"22px",marginBottom:"2px"},dataSafetyWrapper:{width:"100%",justifyContent:"center",marginTop:8},dataSafetyContainer:{width:"352px",font:C().Gl.sans},integrationSecurityHeading:{gap:10,display:"flex",alignItems:"center"},integrationSecurityHeadingText:{fontWeight:C().Ue.medium,fontSize:14,lineHeight:"18px"},notes:{display:"flex",flexDirection:"column",marginTop:12,gap:12,font:C().Gl.sans,listStylePosition:"outside",paddingLeft:2,listStyleType:"none",...g&&{textAlign:"center",justifyContent:"center"}},note:{display:"flex",alignItems:"start",fontSize:C().JB.UIRegular.desktop,lineHeight:C().Nv.UIRegular.desktop,color:`${e.text.secondary}`,padding:2,gap:12,listStylePosition:"outside",marginBottom:4,...g&&{alignItems:"center",textAlign:"center",justifyContent:"center"},...u},noteIconWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},noteTextWrapper:{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center",gap:4},noteIcon:{width:20,height:20,color:e.accentColors.uiBlue[600]},noteTitle:{fontWeight:C().Ue.medium},footer:{justifyContent:"center",alignItems:"center",bottom:0,width:"100%",height:80,boxShadow:"0px 9px 24px 0px #0F0F0F33",padding:"20px 20px 20px 20px",gap:6,marginTop:12},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:"100%"},learnMoreButton:{fontSize:14,fontWeight:C().Ue.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:C().Ue.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${e.text.secondary}`},externalLinkIcon:{width:16,height:16},sampleText:{display:"flex",width:"100%",color:e.text.secondary,fontWeight:C().Ue.medium,fontSize:C().JB.UISmall.desktop}})),[i,g,u]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:a,open:t,render:()=>(0,W.jsxs)("div",{style:h.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:s,title:n,subtext:p}),o&&(0,W.jsx)(M().gq,{style:h.dataSafetyWrapper,children:(0,W.jsx)("div",{style:h.dataSafetyContainer,children:(0,W.jsx)("ul",{style:h.notes,children:o.map(((e,n)=>(0,W.jsxs)("li",{style:h.note,children:[(0,W.jsx)("div",{style:h.noteIconWrapper,children:e.icon&&e.icon(h.noteIcon)}),(0,W.jsxs)("div",{style:h.noteTextWrapper,children:[(0,W.jsx)(P().Z,{isMultiline:!0,style:h.noteTitle,children:e.title}),e.description&&(0,W.jsx)(P().Z,{isMultiline:!0,isSecondaryColor:!0,children:e.description})]})]},`note-${n}`)))})})}),(0,W.jsxs)(M().Ht,{style:h.footer,children:[(0,W.jsx)(K().Z,{isLoading:c,disabled:c,style:h.connectButton,onClick:r,children:d||(0,W.jsx)(S()._H,{id:"universalSearch.integration.connect",defaultMessage:"Connect"})}),l&&(0,W.jsx)(k().Z,{style:h.learnMoreButton,onClick:l,children:(0,W.jsxs)(M().gq,{style:h.learnMoreText,children:[(0,W.jsx)(S()._H,{id:"universalSearch.integrations.learnMore",defaultMessage:"Learn more about AI Connectors"}),(0,y().K)({width:20,height:20})]})})]})]})})};function q(){const e=(0,s().VK)((()=>Z().X.state.open&&"progress"===Z().X.state.modal),[]),n=()=>{Z().X.setState({open:!1})};return(0,W.jsx)(L,{onConnect:n,onDismiss:n,title:(0,W.jsx)(S()._H,{id:"universalSearchProgressModal.title",defaultMessage:"Slack is connecting to Notion AI"}),integrationIcon:F().P,titleWidth:210,subtitle:(0,W.jsx)(S()._H,{id:"universalSearchProgressModal.subtitle",defaultMessage:"This can take up to 36hr.{br}You’ll be able to get answers soon.",values:{br:(0,W.jsx)("br",{})}}),overridePrimaryMessage:(0,W.jsx)(S()._H,{id:"universalSearchProgressModal.ctaMessage",defaultMessage:"Got it"}),centerNotes:!0,noteStyleOverrides:{fontSize:"14px"},open:e})}var z=()=>t(454393),G=()=>t(402269),V=()=>t(312578),Q=()=>t(616433),O=()=>t(669086);const E=(0,t(827282).IU)("keyLarge",{viewBox:"0 0 30 30",svg:(0,W.jsx)("g",{children:(0,W.jsx)("path",{d:"M15.005 2.979c.923 0 1.788.174 2.594.522.814.342 1.528.82 2.143 1.436a6.518 6.518 0 011.436 2.133c.349.806.523 1.671.523 2.594a6.229 6.229 0 01-1.24 3.774c-.821 1.12-2 2.006-3.538 2.655l2.543 2.553c.143.15.215.318.215.503a.641.641 0 01-.205.492l-2.615 2.605 1.877 1.856a.693.693 0 01.205.492.653.653 0 01-.206.502l-3.24 3.24a.593.593 0 01-.482.185.67.67 0 01-.44-.185L12.8 26.604a1.125 1.125 0 01-.247-.36 1.124 1.124 0 01-.071-.41v-9.946a6.754 6.754 0 01-2.225-1.456 6.704 6.704 0 01-1.959-4.768c0-.93.171-1.798.513-2.604a6.738 6.738 0 011.435-2.133A6.665 6.665 0 0112.38 3.49a6.707 6.707 0 012.625-.512zm0 6.06a1.65 1.65 0 001.21-.503 1.65 1.65 0 00.503-1.21c0-.478-.168-.882-.503-1.21a1.65 1.65 0 00-1.21-.502 1.64 1.64 0 00-1.22.502 1.645 1.645 0 00-.492 1.21c0 .472.164.875.492 1.21.335.335.742.503 1.22.503z"})})});var R=()=>t(667067),J=()=>t(269309);function $(e){switch(e){case"slack":return(0,W.jsx)(S()._H,{id:"universalQna.slack.introModalTitle",defaultMessage:"Get answers from Slack in Notion"});case"github":return(0,W.jsx)(S()._H,{id:"universalQna.github.introModalTitle",defaultMessage:"Get answers from GitHub in Notion"});case"googleDrive":return(0,W.jsx)(S()._H,{id:"universalQna.googleDrive.introModalTitle",defaultMessage:"Get answers from Google Drive in Notion"});case"jira":return(0,W.jsx)(S()._H,{id:"universalQna.jira.introModalTitle",defaultMessage:"Get answers from Jira in Notion"});case"microsoftTeams":return(0,W.jsx)(S()._H,{id:"universalQna.microsoftTeams.introModalTitle",defaultMessage:"Get answers from Microsoft Teams in Notion"});default:return(0,W.jsx)("span",{})}}function Y(e){switch(e){case"slack":return(0,W.jsx)(S()._H,{id:"universalSearchNonAdmin.slack.nonAdminModalNote",defaultMessage:"To connect Slack, contact your workspace owners."});case"github":return(0,W.jsx)(S()._H,{id:"universalSearchNonAdmin.github.nonAdminModalNote",defaultMessage:"To connect GitHub, contact your workspace owners."});case"googleDrive":return(0,W.jsx)(S()._H,{id:"universalSearchNonAdmin.googleDrive.nonAdminModalNote",defaultMessage:"To connect Google Drive, contact your workspace owners."});case"jira":return(0,W.jsx)(S()._H,{id:"universalSearchNonAdmin.jira.nonAdminModalNote",defaultMessage:"To connect Jira, contact your workspace owners."});case"microsoftTeams":return(0,W.jsx)(S()._H,{id:"universalSearchNonAdmin.microsoftTeams.nonAdminModalNote",defaultMessage:"To connect Microsoft Teams, contact your workspace owners."});default:return(0,W.jsx)("span",{})}}function X(e){switch(e){case"slack":return[{icon:E,title:(0,W.jsx)(S()._H,{id:"universalQna.slack.introModalNote1",defaultMessage:"Slack permissions are strictly respected"},"note1"),description:(0,W.jsx)(S()._H,{id:"universalQna.slack.introModalNote1Description",defaultMessage:"Notion members can only get AI answers about content they are authorized to see in Slack."},"note1description")},{icon:R().Q,title:(0,W.jsx)(S()._H,{id:"universalQna.slack.introModalNote2",defaultMessage:"Notion does not train models on Slack data"},"note2")},{icon:J().A,title:(0,W.jsx)(S()._H,{id:"universalQna.slack.introModalNote3",defaultMessage:"AI answers always cite sources for verification"},"note3")}];case"github":return[{icon:E,title:(0,W.jsx)(S()._H,{id:"universalQna.github.introModalNote1",defaultMessage:"GitHub permissions are strictly respected"},"note1"),description:(0,W.jsx)(S()._H,{id:"universalQna.github.introModalNote1Description",defaultMessage:"Notion members can only get AI answers about content they are authorized to see in GitHub."},"note2")},{icon:R().Q,title:(0,W.jsx)(S()._H,{id:"universalQna.github.introModalNote2",defaultMessage:"Notion does not train models on GitHub data"},"note2")},{icon:J().A,title:(0,W.jsx)(S()._H,{id:"universalQna.github.introModalNote3",defaultMessage:"AI answers always cite sources for verification"},"note3")}];case"googleDrive":return[{icon:E,title:(0,W.jsx)(S()._H,{id:"universalQna.googleDrive.introModalNote1",defaultMessage:"Google Drive permissions are strictly respected"},"note1"),description:(0,W.jsx)(S()._H,{id:"universalQna.googleDrive.introModalNote1Description",defaultMessage:"Members can only get AI answers about content they are authorized to see in Google Drive."},"note2")},{icon:R().Q,title:(0,W.jsx)(S()._H,{id:"universalQna.googleDrive.introModalNote2",defaultMessage:"Notion does not train models on Drive data"},"note2")},{icon:J().A,title:(0,W.jsx)(S()._H,{id:"universalQna.googleDrive.introModalNote3",defaultMessage:"AI answers always cite sources for verification"},"note1")}];case"jira":return[{icon:E,title:(0,W.jsx)(S()._H,{id:"universalQna.jira.introModalNote1",defaultMessage:"Jira permissions are strictly respected"},"note1"),description:(0,W.jsx)(S()._H,{id:"universalQna.jira.introModalNote1Description",defaultMessage:"Members can only get AI answers about content they are authorized to see in Jira."},"note2")},{icon:R().Q,title:(0,W.jsx)(S()._H,{id:"universalQna.jira.introModalNote2",defaultMessage:"Notion does not train AI models on your Jira data"},"note2")},{icon:J().A,title:(0,W.jsx)(S()._H,{id:"universalQna.jira.introModalNote3",defaultMessage:"AI answers always cite sources for verification"},"note3")}];case"microsoftTeams":return[{icon:E,title:(0,W.jsx)(S()._H,{id:"universalQna.microsoftTeams.introModalNote1",defaultMessage:"Microsoft Teams permissions are strictly respected"},"note1"),description:(0,W.jsx)(S()._H,{id:"universalQna.microsoftTeams.introModalNote1Description",defaultMessage:"Notion members can only get AI answers about content they are authorized to see in Microsoft Teams."},"note1description")},{icon:R().Q,title:(0,W.jsx)(S()._H,{id:"universalQna.microsoftTeams.introModalNote2",defaultMessage:"Notion does not train models on Microsoft Teams data"},"note2")},{icon:J().A,title:(0,W.jsx)(S()._H,{id:"universalQna.microsoftTeams.introModalNote3",defaultMessage:"AI answers always cite sources for verification"},"note3")}];default:return[]}}function ee(e){const{logo:n,appName:t,open:o,onClosed:s,learnMoreUrl:a}=e,r=(0,_().yK)((e=>({wrapper:{width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center"},container:{gap:16,alignItems:"center"},learnMoreText:{gap:4,alignItems:"center",fontSize:14,color:e.text.secondary,justifyContent:"center"},actionsContainer:{gap:4,width:240,alignItems:"center"},learnMoreButton:{marginTop:16,borderRadius:6,width:"100%"},primaryButton:{width:"100%"},learnMoreWrapper:{width:"100%"}})),[]);return(0,i().O7)().device.isMobile?(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:s,open:o,render:()=>(0,W.jsx)(M().gq,{style:r.wrapper,children:(0,W.jsxs)(M().Ht,{style:r.container,children:[(0,W.jsx)(B,{integrationLogoIcon:n,title:(0,W.jsx)(S()._H,{id:"universalQna.notAvailableOnMobile.heading",defaultMessage:"Connecting {appName} and Notion is only available on desktop",values:{appName:t}})}),(0,W.jsxs)(M().Ht,{style:r.actionsContainer,children:[(0,W.jsx)(K().Z,{style:r.primaryButton,onClick:s,children:(0,W.jsx)(S()._H,{id:"universalQna.notAvailableOnMobile.close",defaultMessage:"Got it"})}),(0,W.jsx)(M().gq,{style:r.learnMoreWrapper,children:(0,W.jsx)(k().Z,{style:r.learnMoreButton,onClick:()=>{window.open(a,"_blank")},children:(0,W.jsxs)(M().gq,{style:r.learnMoreText,children:[(0,W.jsx)(S()._H,{id:"universalSearch.slack.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,y().K)({width:16,height:16})]})})})]})]})})}):(0,W.jsx)(W.Fragment,{})}function ne(e){const{onConnect:n,onDismiss:t,open:o,integrationIcon:i,message:s}=e;return(0,W.jsx)(L,{onConnect:n,onDismiss:t,title:(0,W.jsx)(S()._H,{id:"universalSearchNonAdmin.nonAdmin.nonAdminModalTitle",defaultMessage:"You're almost there!"}),integrationIcon:i,titleWidth:210,subtitle:s,overridePrimaryMessage:(0,W.jsx)(S()._H,{id:"universalSearchNonAdmin.nonAdmin.findAdmins",defaultMessage:"Find them here{space}{learnMoreIcon}",values:{space:(0,W.jsx)("span",{style:{marginLeft:4}}),learnMoreIcon:(0,y().K)({width:20,height:20})}}),centerNotes:!0,noteStyleOverrides:{fontSize:"14px"},open:o})}var te=()=>t(661297),oe=()=>t(551576);const ie=(0,S().vU)({primedTextInput:{id:"aiConnectors.github.primedTextInput",defaultMessage:"Find a GitHub PR/Issue/Code file about: "}});function se(e){const{open:n}=e,t=(0,i().O7)(),s=(0,S().YB)(),a=(0,_().yK)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:16}})),[]),r=(0,o.useCallback)((()=>{c().W.setState({...c().W.state,currentScreen:"none"}),oe().assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"github_ai_connector_already_connected",primeTextInput:s.formatMessage(ie.primedTextInput)})}),[t,s]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>{c().W.reset()},open:n,render:()=>(0,W.jsxs)(M().Ht,{style:a.container,children:[(0,W.jsx)(B,{integrationLogoIcon:j().f,title:(0,W.jsx)(S()._H,{id:"aiConnectors.github.alreadyConnected",defaultMessage:"GitHub is already connected to Notion AI"})}),(0,W.jsxs)(M().Ht,{gap:2,style:a.body,children:[(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"aiConnectors.github.githubConnectedDescription",defaultMessage:"You're fully set up."})}),(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"aiConnectors.github.tryIt",defaultMessage:"Try asking AI about your GitHub repositories!"})})]}),(0,W.jsx)(te().Z,{style:a.tryItButton,onClick:r,children:(0,W.jsx)(S()._H,{id:"aiConnectors.github.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]})})}const ae=(0,S().vU)({githubAIConnectorOauthPopupTitle:{defaultMessage:"Connect GitHub AI Connector",id:"githubAIConnector.oauthPopupTitle"}});function re(){const e=(0,o.useMemo)((()=>$("github")),[]),n=(0,o.useMemo)((()=>X("github")),[]),t=(0,i().O7)(),l=(0,o.useMemo)((()=>Y("github")),[]),[d,u]=(0,o.useState)("CLOSED"),p=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),h=(0,s().Kw)(c().W),m=(0,s().VK)((()=>c().W.state.sessionId),[]),v=(0,s().VK)((()=>c().W.state.analyticsFrom),[]),x=(0,_().yK)((()=>({loadingWrapper:{padding:20,fontSize:12,fontWeight:C().Ue.regular,justifyContent:"center",gap:8,alignItems:"center"}})),[]),f=(0,Q().J)(),y=(0,O().y)(),k=(0,o.useCallback)((()=>{const e=(0,H().UY)("guides.aiConnectorGithub");(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"learn_more_click_intro_modal",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),t.device.isElectron?b().openExternalUrl(e):window.open(e,"_blank")}),[t]),w=(0,o.useCallback)((async()=>{if(!p)return;const e=await r().callApi({eventName:"getGithubOrgAuthUrl",environment:t,data:{spaceId:p,isDesktop:t.device.isElectron,sessionId:c().W.state.sessionId}});if("success"!==e.type)return;const n=e.data.url;t.device.isElectron?b().openExternalUrl(n):G().M(t,{width:800,height:600,url:n,titleMessage:ae.githubAIConnectorOauthPopupTitle}),c().W.setState({...c().W.state,authUrl:n,currentScreen:"connecting"})}),[p,t]),[D]=(0,a().r5)((async()=>{if(!p||"introduction"!==h.currentScreen)return;if(h.githubOrg)return{isGithubConnected:!0};const e=await r().callApi({eventName:"getGithubAIConnectorStatus",environment:t,data:{spaceId:p}});return"success"===e.type?{isGithubConnected:e.data.isConnected}:void 0}),[t,h.currentScreen,h.githubOrg,p]);(0,o.useEffect)((()=>{"introduction"===h.currentScreen?"resolved"===D.status?u("OPEN"):u("LOADING"):u("CLOSED")}),[D.status,h.currentScreen]);const A=(0,o.useRef)(!1),U=(0,o.useCallback)((()=>{c().W.reset(),(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_github_intro_modal",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),A.current=!1}),[t]),B=(0,o.useCallback)((async()=>{await w(),(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"github_ai_connector_auth_url_open",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),c().W.setState({...c().W.state,currentScreen:"connecting"})}),[t,w]);return(0,o.useEffect)((()=>{p&&f&&"resolved"===D.status&&"introduction"===h.currentScreen&&(A.current||((0,T().j)({environment:t,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"github",setup_session_id:h.sessionId,from:h.analyticsFrom,is_space_admin:f,is_ai_eligible:y}}}),A.current=!0))}),[p,t,D.status,h.sessionId,h.analyticsFrom,f,y,h.currentScreen]),p&&"CLOSED"!==d?t.device.isMobile?(0,W.jsx)(ee,{logo:j().f,appName:"GitHub",open:"introduction"===h.currentScreen,onClosed:()=>{c().W.reset()},learnMoreUrl:(0,H().UY)("guides.aiConnectorGithub")}):"LOADING"===d?(0,W.jsx)(I().Z,{open:"LOADING"===d,render:()=>(0,W.jsxs)(M().gq,{style:x.loadingWrapper,children:[(0,W.jsx)(S()._H,{id:"universalQna.github.isFetchingConnection",defaultMessage:"Getting connection status"}),(0,W.jsx)(V().Z,{})]})}):h.isConnected?(0,W.jsx)(se,{open:!0}):f?(0,W.jsx)(L,{onConnect:B,onDismiss:U,onLearnMore:k,title:e,integrationIcon:j().f,notes:n,open:"OPEN"===d,titleWidth:210}):(0,W.jsx)(ne,{message:l,integrationIcon:j().f,onConnect:()=>{c().W.reset(),(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"contact_workspace_owners",integration_type:"github",setup_session_id:m,from:v}}}),z().r$({openedFrom:"github_connect_nonadmin_modal",currentTab:"members"})},onDismiss:U,open:"OPEN"===d}):(0,W.jsx)(W.Fragment,{})}var le=()=>t(323218),ce=()=>t(102182),de=()=>t(527278);const ge=function(){const e=(0,s().Kw)(c().W),[n,t]=(0,o.useState)(!1),a=(0,i().O7)(),l=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),d=(0,o.useCallback)((()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"close_settings",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),c().W.reset()}),[a]),u=(0,o.useCallback)((()=>{t(!1)}),[]),p=(0,_().yK)((e=>({wrapper:{width:400},channelDetailsContainer:{width:352,fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary},channelDetailsSubtitle:{textAlign:"center",marginBottom:"16px"},channelDetailsWrapper:{justifyContent:"center",paddingTop:"12px",paddingBottom:"12px"},channelNamesContainer:{gap:2,color:e.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",padding:"20px 20px 20px 20px",gap:8},disconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},moreChannelsContainer:{paddingTop:8},learnMoreButton:{fontSize:14,fontWeight:C().Ue.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:C().Ue.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${e.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:C().Ue.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:C().Ue.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,paddingBottom:40,justifyContent:"center",alignItems:"center"},editChannelsButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"}})),[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:u,open:n,render:()=>(0,W.jsx)("div",{style:p.confirmWrapper,children:(0,W.jsxs)("div",{style:p.confirmContainer,children:[(0,W.jsx)("div",{style:p.confirmModalTitle,children:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.confirmation.title",defaultMessage:"Are your sure?"})}),(0,W.jsx)("div",{style:p.confirmModalSubTitle,children:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.confirmation.subTitle",defaultMessage:"Your GitHub data will be permanently deleted from Notion."})}),(0,W.jsx)("div",{style:p.confirmModalDescription,children:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.confirmation.description",defaultMessage:"This process can take up to 3 hours, and you’ll only be able to reconnect after disconnecting is complete."})}),(0,W.jsxs)(M().Ht,{style:p.confirmModalActionButtons,children:[(0,W.jsx)(K().Z,{isRed:!0,style:p.confirmDisconnectButton,onClick:async()=>{l&&((0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"account_disconnect_confirmation",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),await r().callApi({eventName:"disconnectGithub",environment:a,data:{spaceId:l}}),c().W.reset(),t(!1),ce().oV({label:de().Z.getIntl().formatMessage({defaultMessage:"GitHub disconnected. This can take up to 3 hours.",id:"githubAIConnector.settings.confirmation.disconnected"}),position:"bottom"}))},children:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.confirmDisconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"})}),(0,W.jsx)(k().Z,{style:p.goBackButton,onClick:u,children:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.confirmDisconnectModal.goBack",defaultMessage:"Go back"})})]})]})})}),(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:d,open:"settings"===e.currentScreen,render:()=>(0,W.jsxs)("div",{style:p.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:j().f,title:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.settingsModalTitle",defaultMessage:"GitHub is connected to Notion AI"}),subtext:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.canAnswerFrom",defaultMessage:"Notion AI can answer questions about your GitHub repositories."})}),(0,W.jsxs)(M().Ht,{style:p.footer,children:[(0,W.jsx)(te().Z,{style:p.editChannelsButton,onClick:()=>{var n,t;(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"open_github_for_edit_selection",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),window.open(`https://github.com/organizations/${null===(n=e.githubOrg)||void 0===n?void 0:n.name}/settings/installations/${null===(t=e.githubOrg)||void 0===t?void 0:t.installationId}`,"_blank")},children:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.editRepos",defaultMessage:"Edit Selected Repositories"})}),(0,W.jsx)(K().Z,{isGray:!0,style:p.disconnectButton,onClick:()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"account_disconnect",integration_type:"github",setup_session_id:c().W.state.sessionId,from:"connection_settings"}}}),t(!0)},children:(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.disconnectGithub",defaultMessage:"Disconnect"})}),(0,W.jsx)(k().Z,{style:p.learnMoreButton,onClick:()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"learn_more_click_settings_modal",integration_type:"github",setup_session_id:c().W.state.sessionId,from:"connection_settings"}}});const e=(0,H().UY)("guides.aiConnectorGithub");window.open(e,"_blank")},children:(0,W.jsxs)(M().gq,{style:p.learnMoreText,children:[(0,W.jsx)(S()._H,{id:"githubAIConnector.settings.learnMore",defaultMessage:"Learn more"}),(0,le().g)(p.externalLinkIcon)]})})]})]})})]})};var ue=()=>t(242550),pe=()=>t(265640);const he=function(e){const{open:n,subText:a,integrationIcon:r,notes:l,onDismiss:c,onPrimaryButtonClick:d,onCopiedClick:u,title:p,copyTextMessage:h,primaryButtonText:m}=e,[v,x]=(0,o.useState)(!0),[f,y]=(0,o.useState)(!1),j=(0,i().O7)(),b=(0,S().YB)(),k=(0,_().yK)((e=>({wrapper:{width:400},subText:{display:"flex",width:"100%",color:e.text.secondary,fontWeight:C().Ue.regular,fontSize:C().JB.UIRegular.desktop,justifyContent:"center",alignItems:"center"},notesContainer:{marginTop:24,font:C().Gl.sans,paddingLeft:20,paddingRight:20,textAlign:"left",justifyContent:"center"},copyTextContainer:{borderRadius:6,border:`1px solid ${e.stroke.secondary}`,margin:20},copyTextIcon:{margin:8},copyTextMessage:{fontSize:C().JB.UISmall.desktop,fontWeight:C().Ue.regular,color:`${e.text.secondary}`,width:"fit-content",margin:8,marginLeft:4},buttonContainer:{justifyContent:"center",borderTop:`1px solid ${e.stroke.secondary}`,paddingTop:5,paddingBottom:5},copyButton:{borderRadius:17,opacity:.8,fontSize:15,fontWeight:C().Ue.medium,minWidth:68,height:34,padding:"0px 12px 0px 6px",justifyContent:"center",alignItems:"center",gap:2},clipboardText:{paddingRight:6,color:`${e.text.tertiary}`,height:34}})),[]),w=(0,s().VK)((()=>g().default.state.currentUserStore),[]);return(0,W.jsx)(I().Z,{open:n,onDismiss:()=>{x(!0),c()},render:()=>(0,W.jsxs)("div",{style:k.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:r,title:p}),(0,W.jsx)(M().gq,{style:k.subText,children:a}),(0,W.jsx)(M().Ht,{style:k.notesContainer,className:"notes-Container",children:l.map(((e,n)=>e))}),(0,W.jsxs)(M().Ht,{style:k.copyTextContainer,className:"CopyTextContainer",children:[(0,W.jsxs)(M().gq,{children:[(0,W.jsx)(t(981583).Z,{style:k.copyTextIcon,size:24,userStore:w,avatarShouldShowShadow:!1,hasTooltip:!1}),(0,W.jsx)("div",{style:k.copyTextMessage,children:b.formatMessage(h)})]}),(0,W.jsx)(M().gq,{style:k.buttonContainer,children:v?(0,W.jsx)(pe().D,{isBlue:!0,onClick:async()=>{x(!1);(await t(959137).F.clipboardActions.load()).copyString({environment:j,stringValue:b.formatMessage(h)}),u()},style:k.copyButton,icon:t(524052).U,children:(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.UniversalQna.connectionComplete.copyButton",defaultMessage:"Copy"})}):(0,W.jsx)(pe().D,{style:k.clipboardText,icon:ue().A,children:(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.UniversalQna.connectionComplete.copyButtonSuccess",defaultMessage:"Copied to clipboard"})})})]}),d&&(0,W.jsx)(M().gq,{style:{margin:20},children:(0,W.jsx)(K().Z,{isLoading:f,style:{fontSize:14,fontWeight:C().Ue.semibold,width:"100%"},onClick:async()=>{y(!0),await d(),y(!1)},children:m})})]})})},me=(0,S().vU)({copyTextMessage:{id:"githubAIConnector.connectionComplete.copyMessage",defaultMessage:"Our Notion AI is now connecting to GitHub. When you ask Notion AI a question, it'll be able to reference info across our Repositories, Issues, and Pull Requests. Click the button at the bottom right of your Notion app to give it a try!"}});const ve=function(){const e=(0,i().O7)(),n=(0,s().Kw)(c().W),t=(0,o.useCallback)((n=>{c().W.setState({...c().W.getInitialState(),isPersonalAuthComplete:!1,status:"in_progress",isConnected:!0}),(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:`github_ai_connector_got_it_${n}_click`,integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}}),ce().oV({label:(0,W.jsx)(S()._H,{id:"aiConnectors.github.acknowledge",defaultMessage:"Started syncing from GitHub. This can take up to 72 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"aiConnectors.github.startedMessageDismiss",defaultMessage:"Close"})})})}),[e]),a=(0,_().yK)((e=>({headingText:{fontSize:C().JB.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.primary}`,paddingBottom:8,fontWeight:C().Ue.medium},subNoteText:{fontSize:C().JB.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.secondary}`,paddingBottom:8,fontWeight:C().Ue.regular},circle:{marginRight:8},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"-0.154px"}})),[]);return(0,W.jsx)(he,{open:"confirmation"===n.currentScreen,integrationIcon:j().f,notes:[(0,W.jsxs)(M().gq,{children:[(0,W.jsx)(w().Z,{number:1,style:a.circle}),(0,W.jsx)(M().Ht,{children:(0,W.jsx)("div",{style:a.headingText,children:(0,W.jsx)(S()._H,{id:"githubAIConnector.connectionComplete.listpoint1",defaultMessage:"Connecting GitHub content may take up to 72h."},"note1")})})]},"item1"),(0,W.jsxs)(M().gq,{style:a.headingText,children:[(0,W.jsx)(w().Z,{number:2,style:a.circle}),(0,W.jsxs)(M().Ht,{children:[(0,W.jsx)("div",{style:a.headingText,children:(0,W.jsx)(S()._H,{id:"githubAIConnector.connectionComplete.listpoint2",defaultMessage:"Each member of your workspace will be prompted to authenticate to GitHub."},"note2")}),(0,W.jsx)("div",{style:a.subNoteText,children:(0,W.jsx)(S()._H,{id:"githubAIConnector.connectionComplete.listsubpoint2",defaultMessage:"GitHub permissions are respected and members will only see content they have access to."},"subnote2")})]})]},"item2"),(0,W.jsxs)(M().gq,{style:a.headingText,children:[(0,W.jsx)(w().Z,{number:3,style:a.circle}),(0,W.jsx)(S()._H,{id:"githubAIConnector.connectionComplete.listpoint3",defaultMessage:"Copy the message below to let your team know!"})]},"item3")],onCopiedClick:()=>{(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"copy_button_clicked",integration_type:"github",setup_session_id:c().W.state.sessionId,from:c().W.state.analyticsFrom}}})},onDismiss:()=>t("dismiss"),title:(0,W.jsx)(S()._H,{id:"githubAIConnector.connectionComplete.title",defaultMessage:"You’re done!"}),subText:(0,W.jsx)(S()._H,{id:"githubAIConnector.connectionComplete.subText",defaultMessage:"What happens next:"}),copyTextMessage:me.copyTextMessage})};var xe=()=>t(679950),fe=()=>t(877153);function _e(e){const{open:n,title:t,tryItOutHandler:o,onDismiss:i,integrationIcon:s,subText1:a,subText2:r}=e,l=(0,_().yK)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:24}})),[]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:i,open:n,render:()=>(0,W.jsxs)(M().Ht,{style:l.container,children:[(0,W.jsx)(B,{integrationLogoIcon:s,title:t}),(0,W.jsxs)(M().Ht,{gap:2,style:l.body,children:[(0,W.jsx)("div",{children:a}),(0,W.jsx)("div",{children:r})]}),(0,W.jsx)(te().Z,{style:l.tryItButton,onClick:o,children:(0,W.jsx)(S()._H,{id:"universalQna.universal.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]})})}function ye(){const e=(0,S().YB)(),n=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),t=(0,i().O7)(),a=(0,o.useCallback)((()=>{h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,screenToShow:"none"}),oe().assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"google_drive_already_connected",primeTextInput:e.formatMessage(fe().o.primedTextInput)})}),[t,e]);return(0,W.jsx)(_e,{open:"already_connected"===n,tryItOutHandler:a,integrationIcon:xe().c,onDismiss:()=>{h().googleDriveConnectionStore.reset()},title:(0,W.jsx)(S()._H,{id:"universalQna.googleDrive.alreadyConnected",defaultMessage:"Google Drive is already connected to Notion AI"}),subText1:(0,W.jsx)(S()._H,{id:"universalQna.googleDrive.ConnectedDescription",defaultMessage:"You're fully set up."}),subText2:(0,W.jsx)(S()._H,{id:"universalQna.GoogleDrive.tryIt",defaultMessage:"Try asking AI about Google Drive content!"})})}var je=()=>t(521913);const Se=function(e){const{notes:n,integrationIcon:t,openLearnMoreUrl:i,open:s,onDismiss:a,title:r,subText:l,onClickPrimaryButton:c,primaryButtonText:d,warningMessage:g}=e,[u,p]=(0,o.useState)(!1),h=(0,_().yK)((e=>({wrapper:{width:400},selectionContainer:{padding:20,width:400,paddingTop:12},waitingForConnectionWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},note:{fontWeight:C().Ue.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},buttonContainer:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginTop:"16px"},primaryButton:{fontSize:14,fontWeight:C().Ue.regular,width:"100%"},learnMoreButton:{gap:4,alignItems:"center",fontSize:12,color:e.text.secondary,justifyContent:"center"}})),[]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,open:s,onDismiss:a,render:()=>(0,W.jsxs)("div",{style:h.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:t,title:r,subtext:l}),(0,W.jsx)(M().gq,{style:h.selectionContainer,children:(0,W.jsx)(M().Ht,{children:(0,W.jsxs)(M().Ht,{style:h.waitingForConnectionWrapper,children:[n.map(((e,n)=>(0,W.jsxs)(M().gq,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,W.jsx)(w().Z,{number:n+1}),(0,W.jsx)("div",{style:h.note,children:e})]},n))),(0,W.jsxs)(M().gq,{style:h.buttonContainer,children:[g,c&&(0,W.jsx)(K().Z,{isLoading:u,disabled:u,style:h.primaryButton,onClick:async()=>{p(!0),await c(),p(!1)},children:d}),(0,W.jsx)(k().Z,{style:{marginTop:10,width:100,borderRadius:6},onClick:i,children:(0,W.jsxs)(M().gq,{style:h.learnMoreButton,children:[(0,W.jsx)(S()._H,{id:"universalSearch.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,y().K)({width:14,height:14})]})})]})]})})})]})})};function Ce(){const[e,n]=o.useState(!1),t=(0,_().yK)((e=>({noteHeading:{fontWeight:C().Ue.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{width:18,height:17,color:"#D7813A",marginTop:2},warningText:{fontSize:14,lineHeight:"18px",color:"#D7813A",paddingLeft:14,fontweight:C().Ue.regular,letterSpacing:"-0.15px"},warningContainer:{marginLeft:5,marginRight:5,marginBottom:15}})),[]),a=(0,i().O7)(),c=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),d=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),u=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),m=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),v=(0,s().VK)((()=>p().default.getConfigKey("ingestion","googleDrive").googleAuthUrl),[]),x=(0,s().VK)((()=>p().default.getConfigKey("ingestion","googleDrive").troubleShootingUrl),[]),f=(0,s().VK)((()=>p().default.getConfigKey("ingestion","googleDrive").learnMoreUrl),[]),y=(0,o.useCallback)((async()=>{if(!c)return;var e;await(e=5e3,new Promise((n=>setTimeout(n,e))));const t=await r().callApi({eventName:"connectGoogleDriveForAIIngestion",environment:a,data:{spaceId:c}}),o=e=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:e,integration_type:"google_drive",setup_session_id:d,from:m}}})};var i,s,g;"success"===t.type?t.data.connectionSuccess?(o("auth_screen_connected"),h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,screenToShow:"connection_complete_screen",availableSyncControlOptions:t.data.syncControlOptions})):((e,t,i)=>{switch(e){case 401:o("auth_screen_not_connected_warning"),n(!0);break;case 403:o("info_screen_connect_not_admin_screen"),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"not_admin_screen",analyticsFrom:m,sessionId:d});break;case 400:"GOOGLE_MAPPING_EXIST"===t&&i?(o("workspace_already_connected"),h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,connectedSpaceId:i}),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"connection_exist_screen",analyticsFrom:m,sessionId:d})):(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:m,sessionId:d});break;default:(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:m,sessionId:d})}})(null==t||null===(i=t.data)||void 0===i||null===(i=i.errorResponse)||void 0===i?void 0:i.status,null==t||null===(s=t.data)||void 0===s||null===(s=s.errorResponse)||void 0===s?void 0:s.errorCode,null==t||null===(g=t.data)||void 0===g||null===(g=g.errorResponse)||void 0===g||null===(g=g.data)||void 0===g?void 0:g.spaceId):(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:m,sessionId:d})}),[m,a,d,c]),j=(0,o.useCallback)((()=>[(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:t.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.waitingForConnectionNoteHeading1",defaultMessage:"Google should open automatically on a new browser tab."},"note1-1")}),(0,W.jsx)("div",{style:t.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.authWaiting",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,W.jsx)("a",{style:t.link,href:v,target:"_blank",onClick:()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_open_auth_url",integration_type:"google_drive",setup_session_id:d,from:m}}})},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:t.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.workspaceAdminHeading",defaultMessage:"Follow Google’s setup instructions"},"note2-1")}),(0,W.jsx)("div",{style:t.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.workspaceAdminBody",defaultMessage:"For better AI answers, we recommend selecting the option “All users in my organization”. In the next steps, you’ll be able to exclude specific Drives and can always update your selection."},"note2-2")})]},"note-2"),(0,W.jsx)(M().Ht,{style:{gap:4},children:(0,W.jsx)("div",{style:t.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.done",defaultMessage:"When you’re done, click the button below"},"note3-1")})},"note-3")]),[t,v,a,d,m]),b=e?(0,W.jsxs)(M().gq,{style:t.warningContainer,children:[(0,je().t)(t.icon),(0,W.jsx)("div",{style:t.warningText,children:(0,W.jsx)(S()._H,{id:"universalQnA.googleDrive.AuthScreen.warning",defaultMessage:"We couldn’t connect to Google. Please review the instructions and try again, or check our {TroubleshootingGuide}",values:{TroubleshootingGuide:(0,W.jsx)("a",{style:{...t.link,color:"#D7813A"},href:x,target:"_blank",onClick:()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"troubleshooting_guide_opened",integration_type:"google_drive",setup_session_id:d,from:m}}})},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.troubleShootingLink",defaultMessage:"troubleshooting guide."})})}})})]}):void 0;return(0,W.jsx)(Se,{title:(0,W.jsx)(S()._H,{id:"universalQnA.googleDrive.AuthScreen",defaultMessage:"Follow instructions from Google in your browser"}),open:"auth_screen"===u,onDismiss:()=>{n(!1),(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_dismiss",integration_type:"google_drive",setup_session_id:d,from:m}}}),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:m,sessionId:d})},warningMessage:b,notes:j(),openLearnMoreUrl:()=>{window.open(f)},integrationIcon:xe().c,primaryButtonText:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.Button.finishedSetup",defaultMessage:"Confirm connection"},"note3-1"),onClickPrimaryButton:y})}var be=()=>t(741633),ke=()=>t(340531),we=(t(670560),t(267602),t(653476),t(470928),t(30005),()=>t(48826)),Ie=()=>t(696459),Me=()=>t(715139),Te=()=>t(666414),He=()=>t(573357);function De(e){const{onPrimaryButtonClick:n,setShowConfirmModal:t}=e,a=(0,i().O7)(),r=(0,s().Kw)(h().googleDriveConnectionStore),l=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),[c,d]=(0,o.useState)(!1),g=(0,_().yK)((e=>({confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:C().Ue.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:C().Ue.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20}})),[]),u=e=>{h().googleDriveConnectionStore.setState({...r,screenToShow:e})};return(0,W.jsx)(I().Z,{showCloseIcon:!0,open:"select_shared_drives_screen"===l,onDismiss:()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_confirm_modal_close",integration_type:"google_drive",setup_session_id:r.sessionId,from:r.analyticsFrom}}}),u("none"),t(!1)},render:()=>(0,W.jsx)("div",{style:g.confirmWrapper,children:(0,W.jsxs)("div",{style:g.confirmContainer,children:[(0,W.jsx)("div",{style:g.confirmModalTitle,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.confirmModal.title",defaultMessage:"Are your sure?"})}),(0,W.jsx)("div",{style:g.confirmModalSubTitle,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.confirmModal.subTitle",defaultMessage:"Google Drive content will be disconnected and re-connected. This can take up to 36h and AI answers will be unavailable until it’s complete."})}),(0,W.jsxs)(M().Ht,{style:g.confirmModalActionButtons,children:[(0,W.jsx)(K().Z,{isLoading:c,style:g.confirmDisconnectButton,disabled:r.isDisconnecting,onClick:async()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_modal_confirm_button",integration_type:"google_drive",setup_session_id:r.sessionId,from:r.analyticsFrom}}}),d(!0),await n(),d(!1),t(!1),u("none")},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.editModal.confirmDisconnect",defaultMessage:"Confirm"})}),(0,W.jsx)(k().Z,{style:g.goBackButton,onClick:()=>{(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_modal_cancel_button",integration_type:"google_drive",setup_session_id:r.sessionId,from:r.analyticsFrom}}}),t(!1)},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.editModal.cancel",defaultMessage:"Cancel"})})]})]})})})}function Ae(e){const{drive:n,styles:t,onToggle:o}=e;return(0,W.jsxs)(M().gq,{gap:8,style:{alignItems:"center",padding:"10px 18px 6px 0px"},children:[(0,W.jsx)(Me().Z,{checked:n.checked,checkSize:10,size:14,onClick:()=>o(n.id)}),(0,W.jsx)("div",{style:t.drivesRow,children:`${n.name}`},`${n.id}#3`)]})}function Ue(e){const{styles:n,onPrimaryButtonClick:t,setShowConfirmModal:a,isFutureItemsChecked:r,setDriveCheckboxItems:l,sharedDriveCheckboxItems:c,setFutureItemsChecked:d}=e,u=(0,s().Kw)(h().googleDriveConnectionStore),p=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),m=(0,s().VK)((()=>h().googleDriveConnectionStore.state.initialSyncState),[]),v=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),x=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),f=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),[_,y]=(0,o.useState)(!1),j=(0,i().O7)();if((0,o.useEffect)((()=>{const e=u.availableSyncControlOptions.filter((e=>"shared_drive"===e.type));0===e.length&&"select_shared_drives_screen"===x&&(0,T().j)({environment:j,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"no_shared_drives",integration_type:"google_drive",setup_session_id:p,from:v}}});const n=u.syncControlSelection;if(!n)return l(e.map((e=>({...e,checked:!0})))),void d(!0);l(e.map((e=>({...e,checked:!n.driveIds||n.driveIds.includes(e.id)})))),d(n.enableSyncingFutureUsersAndDrives)}),[v,j,u,x,l,d,p]),!f)return null;const C=c.find((e=>e.checked)),b=e=>{(0,T().j)({environment:j,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"individual_drive_checkbox",integration_type:"google_drive",setup_session_id:u.sessionId,from:u.analyticsFrom}}}),l(c.map((n=>n.id===e?{...n,checked:!n.checked}:n)))},k=c.map((e=>(0,W.jsx)(Ae,{drive:e,styles:n,onToggle:b},e.id))).filter(Ie().$K);return(0,W.jsxs)(M().Ht,{children:[(0,W.jsx)(M().gq,{style:n.selectionWrapper,children:(0,W.jsxs)(M().Ht,{style:n.scrollContainer,children:[(0,W.jsx)(Te().Z,{style:{paddingBottom:4},size:4}),(0,W.jsx)(M().gq,{style:n.rowTitle,children:(0,W.jsxs)(M().gq,{children:[(0,W.jsx)(M().Ht,{children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.allItemsTitle",defaultMessage:"Content owned by users"})}),(0,W.jsx)(M().Ht,{style:{paddingLeft:200},children:(0,ue().A)(n.checkMark)})]})}),(0,W.jsx)(M().gq,{style:n.rowAdditionalText,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.allItemsSubtext",defaultMessage:"Includes all files owned by users selected in Google Workspace Settings"})}),(0,W.jsx)(Te().Z,{style:{paddingTop:10,paddingBottom:10},size:4}),(0,W.jsx)(M().gq,{style:n.rowTitle,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.allSharedDrivesTitle",defaultMessage:"Content in Shared Drives"})}),(0,W.jsx)(M().gq,{style:n.rowAdditionalText,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.allSharedDrivesSubtext",defaultMessage:"Includes files in Shared Drives as long as they are owned by users selected in the setting above."})}),(0,W.jsx)(M().gq,{children:(0,W.jsx)(M().Ht,{children:0===k.length?(0,W.jsx)(M().gq,{style:{...n.rowAdditionalText,fontSize:14,paddingTop:10},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.noSharedDrivesSubtext",defaultMessage:"No Shared Drives found"})}):k})})]})}),(0,W.jsxs)(M().Ht,{style:n.footer,children:[(0,W.jsxs)(M().gq,{style:{gap:4,alignItems:"center",width:"inherit"},children:[(0,W.jsx)(Me().Z,{checked:r,checkSize:10,size:14,onClick:()=>{(0,T().j)({environment:j,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:`future_items_checkbox_${(!r).toString()}`,integration_type:"google_drive",setup_session_id:u.sessionId,from:u.analyticsFrom}}}),d(!r)}}),(0,W.jsx)("div",{style:{fontSize:12,lineHeight:"16px",paddingBottom:2},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.allSharedDrives",defaultMessage:"Include Drives created in the future"})})]}),(0,W.jsx)(K().Z,{style:n.continueButton,isLoading:_,disabled:!C,onClick:async()=>{y(!0),"completed"!==m?(await t(),y(!1)):a(!0)},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.confirm",defaultMessage:"Confirm selection"})})]})]})}async function We(e){const{environment:n,spaceId:t}=e,o=g().default.state.currentUserStore,{analyticsFrom:i,sessionId:s}=h().googleDriveConnectionStore.state;if("success"===(await r().callApi({eventName:"startGoogleDriveSyncForAIIngestion",environment:n,data:{spaceId:t,setupSessionId:s}})).type){var a;h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,initialSyncState:"in_progress",ingestionProgress:1});const e=x().Z.state.appsConnectionData.filter((e=>e.id!==we().V));return x().Z.setState({...x().Z.state,appsConnectionData:[...e,{connectionStatus:"in_progress",connectionLastEditedTimestamp:Date.now(),connectionType:"google-drive",connectorEmail:(null==o?void 0:o.getEmail())||"",id:we().V,connectorNotionId:null==o||null===(a=o.getModel())||void 0===a?void 0:a.id}]}),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:i,sessionId:s}),!0}return(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:i,sessionId:s}),!1}const Be=function(){const[e,n]=(0,o.useState)(!1),t=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),a=(0,i().O7)(),c=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),d=(0,s().Kw)(h().googleDriveConnectionStore),u=(0,_().yK)((e=>({wrapper:{width:400},scrollContainer:{overflow:"scroll",paddingRight:20,height:350},rowTitle:{fontSize:12,lineHeight:"16px",letterSpacing:"-0.15px",fontWeight:510,paddingBottom:4},rowAdditionalText:{fontSize:12,lineHeight:"16px",color:e.text.secondary},drivesRow:{fontSize:14,lineHeight:"18px",letterSpacing:"-0.15px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},footer:{justifyContent:"center",alignItems:"center",bottom:0,width:"100%",height:75,boxShadow:e.shadowMD,padding:"16px 20px 16px 20px",gap:6},continueButton:{fontSize:14,fontWeight:C().Ue.semibold,width:360},selectionWrapper:{marginTop:24,paddingLeft:20,justifyContent:"center",overflow:"auto"},selection:{width:360,height:263,marginBotton:12},checkMark:{width:14,color:e.text.secondary}})),[]),p=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),m=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),[v,x]=(0,o.useState)(!0),[f,y]=(0,o.useState)([]),j=()=>{h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,syncControlSelection:{driveIds:[],enableSyncingFutureUsersAndDrives:!1},availableSyncControlOptions:[]})},b=(0,o.useCallback)((async()=>{let e=!0;v&&(e=!1);const n=[];if(f.forEach((t=>{if(t.checked===e){const{checked:e,...o}=t;n.push({...o})}})),(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drive_and_user_selector_primary_button",integration_type:"google_drive",setup_session_id:d.sessionId,from:d.analyticsFrom}}}),!c)return;const t=n,o=await r().callApi({eventName:"patchSyncControlsForGoogleDriveAIIngestion",environment:a,data:{spaceId:c,exclusionList:v?t:[],inclusionList:v?[]:t}}),i="in_progress"===h().googleDriveConnectionStore.state.initialSyncState||"completed"===h().googleDriveConnectionStore.state.initialSyncState;if("failed"===o.type)return void ce().oV({label:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.failed",defaultMessage:"Cannot edit Google shared drives now. Please try again later."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.failedMessageDismiss",defaultMessage:"Close"})})});const s="success"===o.type&&o.data.syncControlsUpdated||!i&&"success"===o.type&&!o.data.syncControlsUpdated,g=i&&"success"===o.type&&!o.data.syncControlsUpdated;if(s){const e=await We({environment:a,spaceId:c});j(),e&&ce().oV({label:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.acknowledge",defaultMessage:"Started syncing from Google drive. This can take up to 36 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.startedMessageDismiss",defaultMessage:"Close"})})})}else g?(ce().oV({label:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.skip",defaultMessage:"No change made to Google Drive Connection."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.noConfigChangeDismiss",defaultMessage:"Close"})})}),j(),h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,initialSyncState:"completed"}),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:m,sessionId:p})):(j(),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:m,sessionId:p}))}),[m,a,d,v,p,f,c]);return e?(0,W.jsx)(De,{onPrimaryButtonClick:b,setShowConfirmModal:n}):(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>{(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",sessionId:p,analyticsFrom:m})},open:"select_shared_drives_screen"===t,render:()=>(0,W.jsxs)("div",{style:u.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:xe().c,title:(0,W.jsx)(S()._H,{defaultMessage:"Select Drives to Connect",id:"googleAiConnector.universalQnaSharedDriveSelectorPopup.selectDrivesToConnect"})}),(0,W.jsx)(He().Z,{capture:!0,allowEsc:!0,render:()=>(0,W.jsx)(Ue,{styles:u,onPrimaryButtonClick:b,setShowConfirmModal:n,isFutureItemsChecked:v,setFutureItemsChecked:x,sharedDriveCheckboxItems:f,setDriveCheckboxItems:y})})]})})},Ne=(0,S().vU)({copyTextMessage:{id:"universalSearch.googleDriveIngestion.googleDriveTitle.connectionComplete.copyMessage",defaultMessage:"Our Notion AI is now connecting to Google Drive. When you ask Notion AI a question, it'll be able to reference info across our Google Docs, Slides & Sheets. Click the button at the bottom right of your Notion app to give it a try!"}});function Fe(){const e=(0,_().yK)((e=>({headingText:{fontSize:C().JB.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.primary}`,paddingBottom:8,fontWeight:C().Ue.medium},circle:{marginRight:8},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"-0.154px"}})),[]),n=(0,i().O7)(),t=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),a=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),c=(0,s().VK)((()=>h().googleDriveConnectionStore.state.initialSyncState),[]),d=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),u=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),p=(0,o.useCallback)((()=>{(0,T().j)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_dismiss",integration_type:"google_drive",setup_session_id:t,from:u}}}),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:u,sessionId:t})}),[u,n,t]);if("completed"===c||!a)return(0,W.jsx)(W.Fragment,{});const m="in_progress"===c;return(0,W.jsx)(he,{open:"connection_complete_screen"===d,integrationIcon:xe().c,notes:[(0,W.jsxs)(M().gq,{style:e.headingText,children:[(0,W.jsx)(w().Z,{number:1,style:e.circle}),(0,W.jsxs)(M().Ht,{children:[(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.googleDriveIngestion.connectionComplete.listpoint1",defaultMessage:"Connecting your Drives may take up to 36h."},"note1"),!m&&(0,W.jsx)("div",{style:e.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.waitingForConnectionNoteBody1",defaultMessage:"If you want to choose Drives, {clickHere}",values:{clickHere:(0,W.jsx)("a",{style:e.link,onClick:async()=>{(0,T().j)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"shared_drive_settings",integration_type:"google_drive",setup_session_id:t,from:u}}});const e=await r().callApi({eventName:"getGoogleDriveSyncProgress",environment:n,data:{spaceId:a},headers:(0,be().Bb)({spaceId:a})});if("success"===e.type){var o;const n=(0,ke().pB)(null===(o=e.data)||void 0===o?void 0:o.status);h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,initialSyncState:n}),"in_progress"===n?(0,l().navigateToGoogleDriveUniversalScreen)({analyticsFrom:u,sessionId:t,screenToShow:"settings_screen"}):"not_started"===n?(0,l().navigateToGoogleDriveUniversalScreen)({analyticsFrom:u,sessionId:t,screenToShow:"select_shared_drives_screen"}):(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:u,sessionId:t})}else(0,l().navigateToGoogleDriveUniversalScreen)({analyticsFrom:u,sessionId:t,screenToShow:"error"})},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.settings",defaultMessage:"click here."})})}},"note1-1")})]})]},"item1"),(0,W.jsxs)(M().gq,{style:e.headingText,children:[(0,W.jsx)(w().Z,{number:2,style:e.circle}),(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.googleDriveIngestion.connectionComplete.listpoint2",defaultMessage:"Notion AI will be ready to answer questions across Notion and Google Drive knowledge."},"note2")]},"item2"),(0,W.jsxs)(M().gq,{style:e.headingText,children:[(0,W.jsx)(w().Z,{number:3,style:e.circle}),(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.googleDriveIngestion.connectionComplete.listpoint3",defaultMessage:"Copy the message below to let your team know!"})]},"item3")],onCopiedClick:()=>{(0,T().j)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"copy_button_clicked",integration_type:"google_drive",setup_session_id:t,from:u}}})},primaryButtonText:(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.googleDrive.connectionComplete.confirmConnection",defaultMessage:"Done"}),onPrimaryButtonClick:async()=>{if((0,T().j)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_done",integration_type:"google_drive",setup_session_id:t,from:u}}}),!a)return;if(m)return void(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:u,sessionId:t});await We({environment:n,spaceId:a})&&ce().oV({label:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.acknowledge",defaultMessage:"Started syncing from Google drive. This can take up to 36 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"googleIngestionConfirmation.ingestion.startedMessageDismiss",defaultMessage:"Close"})})})},onDismiss:p,title:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.connectionComplete.googleDriveTitle",defaultMessage:"You’re done!"}),subText:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.googleDriveTitle.connectionComplete.subText",defaultMessage:"Here’s what’s next:"}),copyTextMessage:Ne.copyTextMessage})}var Ze=()=>t(506347),Ke=()=>t(224597);function Pe(){const e=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),n=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),t=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),a=(0,s().VK)((()=>h().googleDriveConnectionStore.state.connectedSpaceId),[]),r=(0,i().O7)(),c=(0,_().yK)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]),d="connection_exist_screen"===e,u=(0,o.useCallback)((async()=>{const e=g().default.state.currentUserRootStore;if(!e)return;(0,T().j)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"visit_other_workspace",integration_type:"google_drive",setup_session_id:n,from:t}}});const o=e.getSpaceViewStores().filter((e=>e.getSpaceId()===a))[0];await Ke().y3({environment:r,navigationType:"switchingToOrLoadingSpace",pageVisitSource:Ze().tY.AIGoogleDriveQna,spaceViewStore:o,userRootStore:g().default.state.currentUserRootStore,userSettingsStore:g().default.state.currentUserSettingsStore}),h().googleDriveConnectionStore.reset(),h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,screenToShow:"settings_screen",analyticsFrom:"google_other_workspace",sessionId:n})}),[t,a,r,n]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:t,sessionId:n}),open:d,render:()=>(0,W.jsxs)("div",{style:c.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:xe().c,title:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.connectionExist.title",defaultMessage:"You’ve already connected Google Drive to another Notion workspace."}),subtext:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.connectionExist.description",defaultMessage:"Currently, only one workspace can be connected to Google Drive. To connect this workspace, please disconnect the existing connection."})}),(0,W.jsx)(M().Ht,{style:c.footer,children:(0,W.jsx)(K().Z,{style:c.connectButton,onClick:u,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.connectionExist.navigateButton",defaultMessage:"Visit the other workspace"})})})]})})}var Le=()=>t(214993);const qe=function(e){const{onDismiss:n,onClickGotItBtn:t,open:o,title:i,descriptionMessage:s,integrationIcon:a,message:r}=e,l=(0,_().yK)((e=>({modal:{width:400,alignItems:"center"},contentWrapper:{padding:"0 20px 24px 20px",gap:8},messageWrapper:{gap:19},gotItButton:{width:"100%"}})),[]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,open:o,onDismiss:n,render:()=>(0,W.jsxs)("div",{style:l.modal,children:[(0,W.jsx)(B,{integrationLogoIcon:a,title:i,subtext:s}),(0,W.jsxs)("div",{style:l.contentWrapper,children:[(0,W.jsx)("div",{style:l.messageWrapper,children:r}),(0,W.jsx)("div",{children:(0,W.jsx)(te().Z,{style:l.gotItButton,onClick:t,children:(0,W.jsx)(S()._H,{id:"aiConnectors.common.disconnectModal.confirmDisconnect",defaultMessage:"Got it"})})})]})]})})};function ze(){const e=(0,s().Kw)(h().googleDriveConnectionStore),n=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),t=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),a=(0,s().VK)((()=>p().default.getConfigKey("ingestion","googleDrive").marketplaceAppConfigureUrl),[]),l=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),c=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),d=(0,i().O7)(),u=async()=>{if(!t)return;const e=await async function(e){const{environment:n,spaceId:t}=e,o=await r().callApi({eventName:"disconnectGoogleDriveAIIngestion",environment:n,data:{spaceId:t,disconnectReason:"admin_disconnect"}}),i=g().default.state.currentUserStore;if("success"===o.type&&o.data.deletionInitiated){var s;h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,screenToShow:"none",isDisconnecting:!0});const e=x().Z.state.appsConnectionData.filter((e=>e.id!==we().V));return x().Z.setState({...x().Z.state,appsConnectionData:[...e,{connectionStatus:"disconnecting",connectionLastEditedTimestamp:Date.now(),connectionType:"google-drive",connectorEmail:(null==i?void 0:i.getEmail())||"",id:we().V,connectorNotionId:null==i||null===(s=i.getModel())||void 0===s?void 0:s.id}]}),!0}return h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,screenToShow:"error",isDisconnecting:!1}),!1}({environment:d,spaceId:t});e?ce().oV({label:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.acknowledgeDisconnect",defaultMessage:"Started disconnecting Google Drive. This can take up to 3 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.dismissAcknowledgeDisconnect",defaultMessage:"Close"})})}):ce().oV({label:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.disconnectError",defaultMessage:"Failed to disconnect Google Drive. Please try again later."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.closeSnackbarError",defaultMessage:"Close"})})})},m=n=>{h().googleDriveConnectionStore.setState({...e,screenToShow:n})},v=(0,_().yK)((e=>({confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:C().Ue.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:C().Ue.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},notesSectionWrapper:{padding:"12px 12px 12px 12px",gap:13},noteBlockWrapper:{marginBottom:12,gap:8},note:{fontWeight:C().Ue.regular,fontSize:14,lineHeight:"18px"},noteHeading:{fontWeight:C().Ue.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{rotate:"45deg",width:12,height:12,cursor:"pointer",display:"inline",padding:0,margin:0}})),[]),f=(0,o.useCallback)((()=>{const{noteBlockWrapper:e,noteHeading:n,noteBody:t,link:o}=v;return[(0,W.jsxs)(M().Ht,{style:e,children:[(0,W.jsx)("div",{style:n,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.post_disconnect_screen.note_1.heading",defaultMessage:"Google Drive data will be permanently deleted from Notion"},"note1-1")}),(0,W.jsx)("div",{style:t,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.post_disconnect_screen.note_1.body",defaultMessage:"This process can take up to 3 hours. You'll only be able to reconnect after disconnecting is complete."},"note1-2")})]},"note-1"),(0,W.jsxs)(M().Ht,{style:e,children:[(0,W.jsx)("div",{style:n,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.post_disconnect_screen.note_2.heading",defaultMessage:"Uninstall the Notion AI app from your Google Workspace (optional)"},"note2-1")}),(0,W.jsx)("div",{style:t,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.post_disconnect_screen.note_2.body",defaultMessage:"Go to your {NavigateToGoogleWorkspaceAppsSettings} and uninstall the Notion AI app.",values:{NavigateToGoogleWorkspaceAppsSettings:(0,W.jsx)("a",{style:o,href:a,target:"_blank",onClick:()=>{(0,T().j)({environment:d,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_screen_marketplace_app_disconnect_btn",integration_type:"google_drive",setup_session_id:l,from:c}}})},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.post_disconnect_screen.disconnect_google_marketplace_app",defaultMessage:"Google Workspace {ArrowIcon}",values:{ArrowIcon:(0,Le().Z)(v.icon)}})})}},"note2-2")})]},"note-2")]}),[v,a,d,l,c]);return"post_disconnect_screen"===n?(0,W.jsx)(qe,{onClickGotItBtn:()=>{m("none")},onDismiss:()=>{m("none")},open:"post_disconnect_screen"===n,integrationIcon:xe().c,title:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.post_disconnect_modal.title",defaultMessage:"Google Drive is Disconnecting from Notion"}),descriptionMessage:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.post_disconnect_modal.description",defaultMessage:"Here's what's next:"}),message:(0,W.jsx)("div",{style:v.notesSectionWrapper,children:f().map(((e,n)=>(0,W.jsxs)(M().gq,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,W.jsx)(w().Z,{number:n+1}),(0,W.jsx)("div",{style:v.note,children:e})]},n)))})}):(0,W.jsx)(I().Z,{showCloseIcon:!0,open:"disconnect_screen"===n,onDismiss:()=>{(0,T().j)({environment:d,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_close",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),m("none")},render:()=>(0,W.jsx)("div",{style:v.confirmWrapper,children:(0,W.jsxs)("div",{style:v.confirmContainer,children:[(0,W.jsx)("div",{style:v.confirmModalTitle,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.title",defaultMessage:"Are your sure?"})}),(0,W.jsx)("div",{style:v.confirmModalSubTitle,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.subTitle",defaultMessage:"Google Drive data will be permanently deleted from Notion."})}),(0,W.jsx)("div",{style:v.confirmModalDescription,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.description",defaultMessage:"This process can take up to 3 hours, and you'll only be able to reconnect after disconnecting is complete."})}),(0,W.jsxs)(M().Ht,{style:v.confirmModalActionButtons,children:[(0,W.jsx)(K().Z,{isRed:!0,style:v.confirmDisconnectButton,disabled:e.isDisconnecting,onClick:async()=>{(0,T().j)({environment:d,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_confirm_disconnect_button",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),await u(),m("post_disconnect_screen")},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"})}),(0,W.jsx)(k().Z,{style:v.goBackButton,onClick:()=>{(0,T().j)({environment:d,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_back_button",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),m("settings_screen")},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.disconnectModal.goBack",defaultMessage:"Go back"})})]})]})})})}function Ge(){const e=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),n=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),t=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),a=(0,i().O7)(),r=(0,_().yK)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]),c="error"===e;return(0,o.useEffect)((()=>{c&&(0,T().j)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_connect_error",integration_type:"google_drive",setup_session_id:n,from:t}}})}),[c,t,n,a]),(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:t,sessionId:n}),open:c,render:()=>(0,W.jsxs)("div",{style:r.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:xe().c,title:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.error.title",defaultMessage:"Oops! Something went wrong"}),subtext:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.error.description",defaultMessage:"Something went wrong, please try again later."})}),(0,W.jsx)(M().Ht,{style:r.footer,children:(0,W.jsx)(K().Z,{style:r.connectButton,onClick:()=>{(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:t,sessionId:n})},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.error.Dismiss",defaultMessage:"Close"})})})]})})}var Ve=()=>t(644329);function Qe(){const[e,n]=o.useState(!1),t=(0,i().O7)(),a=(0,o.useMemo)((()=>X("googleDrive")),[]),c=(0,o.useMemo)((()=>$("googleDrive")),[]),d=(0,o.useMemo)((()=>Y("googleDrive")),[]),m=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),v=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),x=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),f=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),_=(0,s().VK)((()=>u().KR.canShowUniversalGoogleDriveSearchScope()),[]),y=(0,s().VK)((()=>p().default.getConfigKey("ingestion","googleDrive").learnMoreUrl),[]),j=(0,Q().J)(),S=(0,O().y)(),C="info_screen"===x;return(0,o.useEffect)((()=>{C&&_&&(0,T().j)({environment:t,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"google_drive",setup_session_id:v,from:f,is_space_admin:j,is_ai_eligible:S}}})}),[f,t,S,C,j,v,_]),_?t.device.isMobile?(0,W.jsx)(ee,{logo:xe().c,appName:"Google Drive",open:C,onClosed:()=>{h().googleDriveConnectionStore.reset()},learnMoreUrl:y}):j?(0,W.jsx)(L,{integrationIcon:xe().c,notes:a,onLearnMore:()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),n=null==e?void 0:e.learnMoreUrl;window.open(n,"_blank")},onConnect:async()=>{m&&(n(!0),await async function(e,n,t,o){var i,s;if((0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_connect",integration_type:"google_drive",setup_session_id:t,from:o}}}),!(0,Ve().Hg)({environment:e,spaceId:n,connectorTriggeringUpsell:"google_drive",from:"google_drive_connect_button",openedFrom:"google_drive_connect_button"}))return;const a=await r().callApi({eventName:"getGoogleDriveSyncProgress",environment:e,data:{spaceId:n},headers:(0,be().Bb)({spaceId:n})});if("failed"===a.type)return void(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:o,sessionId:t});const c=null==a||null===(i=a.data)||void 0===i?void 0:i.status,d=(0,ke().pB)(c);if(h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,initialSyncState:d,ingestionProgress:null==a||null===(s=a.data)||void 0===s?void 0:s.ingestionProgress}),"success"===a.type&&"in_progress"===d)return(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"connection_complete_screen",integration_type:"google_drive",setup_session_id:t,from:o}}}),void(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:o,sessionId:t});if("success"===a.type&&"completed"===d)return(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"already_connected_screen",integration_type:"google_drive",setup_session_id:t,from:o}}}),void(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"already_connected",analyticsFrom:o,sessionId:t});(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen",integration_type:"google_drive",setup_session_id:t,from:o}}}),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"auth_screen",analyticsFrom:o,sessionId:t});const g=p().default.getConfigKey("ingestion","googleDrive");window.open(g.googleAuthUrl,"_blank"),r().callApi({eventName:"initiateGoogleDriveDelayedIngestion",environment:e,data:{spaceId:n,setupSessionId:t}})}(t,m,v,f),n(!1))},onDismiss:()=>{(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_dismiss",integration_type:"google_drive",setup_session_id:v,from:f}}}),(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:f,sessionId:v})},title:c,isLoading:e,titleWidth:352,open:C}):(0,W.jsx)(ne,{onConnect:()=>{h().googleDriveConnectionStore.reset(),(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"contact_workspace_owners",integration_type:"google_drive",setup_session_id:v,from:f}}}),z().r$({openedFrom:"google_drive_connect_nonadmin_modal",currentTab:"members"})},integrationIcon:xe().c,message:d,onDismiss:()=>h().googleDriveConnectionStore.reset(),open:C}):(0,W.jsx)(W.Fragment,{})}function Oe(){const e=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),n=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),t=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),o=(0,_().yK)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:t,sessionId:n}),open:"not_admin_screen"===e,render:()=>(0,W.jsxs)("div",{style:o.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:xe().c,title:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.notAdmin.title",defaultMessage:"Only Google Workspace Administrators can connect"}),subtext:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.notAdmin.description",defaultMessage:"We can't verify that this account is a Google Workspace Administrator. Please contact your admin to link Notion using their account."})}),(0,W.jsx)(M().Ht,{style:o.footer,children:(0,W.jsxs)(K().Z,{style:o.connectButton,onClick:()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),n=null==e?void 0:e.learnMoreUrl;window.open(n,"_blank")},children:[(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.notAdmin.learnMore",defaultMessage:"Learn more"}),(0,W.jsx)("div",{style:o.iconWrapper,children:(0,y().K)()})]})})]})})}var Ee=()=>t(452024),Re=()=>t(654133);function Je(e){const{styles:n,events:t,isEditButtonEnabled:o,navigateToScreen:a}=e,r=(0,i().O7)(),l=(0,s().Kw)(h().googleDriveConnectionStore);return(0,W.jsx)(te().Z,{...t,style:n,disabled:!o,onClick:()=>{(0,T().j)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_edit_drives_button",integration_type:"google_drive",setup_session_id:l.sessionId,from:l.analyticsFrom}}}),a("select_shared_drives_screen")},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.editSyncControls",defaultMessage:"Edit Drives"})})}function $e(e){const{styles:n,events:t,isDisconnectButtonEnabled:o,navigateToScreen:a}=e,l=(0,i().O7)(),c=(0,s().Kw)(h().googleDriveConnectionStore),d=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),u=(0,s().VK)((()=>h().googleDriveConnectionStore.state.initialSyncState),[]);return(0,W.jsx)(K().Z,{...t,isGray:!0,style:n,disabled:!o,onClick:async()=>{if(d)if((0,T().j)({environment:l,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_disconnect_button",integration_type:"google_drive",setup_session_id:c.sessionId,from:c.analyticsFrom}}}),"completed"!==u){if("not_started"===u){if("success"===(await r().callApi({eventName:"disconnectGoogleDriveAIIngestion",environment:l,data:{spaceId:d,disconnectReason:"admin_disconnect"}})).type)return void a("none")}a("error")}else a("disconnect_screen")},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.disconnectGoogleDrive",defaultMessage:"Disconnect"})})}const Ye=function(){const e=(0,s().Kw)(h().googleDriveConnectionStore),n=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),t=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),c=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),d=(0,s().VK)((()=>h().googleDriveConnectionStore.state.initialSyncState),[]),u=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),[m,v]=(0,o.useState)(!0),[x,f]=(0,o.useState)(!1),[y,j]=(0,o.useState)(!1),[b,w]=(0,o.useState)([]),H=(0,i().O7)();(0,a().r5)((async()=>{if(!n||!H||"settings_screen"!==c)return;v(!0);let e=d;if("none"===d){var o;const i=await r().callApi({eventName:"getGoogleDriveSyncProgress",environment:H,data:{spaceId:n},headers:(0,be().Bb)({spaceId:n})});if("failed"===i.type)return void(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:t,sessionId:u});const s=null==i||null===(o=i.data)||void 0===o?void 0:o.status;e=(0,ke().pB)(s),h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,initialSyncState:e})}}),[t,H,d,c,u,n]),(0,a().r5)((async()=>{if(n&&H&&"settings_screen"===c&&"none"!==d)if("in_progress"===d)v(!1),f(!1),j(!1);else if("completed"===d||"not_started"===d){const e=await r().callApi({eventName:"getSyncControlsForGoogleDriveAIIngestion",environment:H,data:{spaceId:n}});if("success"===(null==e?void 0:e.type)){const n=e.data;v(!1),f(!0),"not_started"===d?h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,availableSyncControlOptions:n.options}):(h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,availableSyncControlOptions:n.options,syncControlSelection:n.selection}),w(n.options.filter((e=>n.selection.driveIds.includes(e.id))))),h().googleDriveConnectionStore.state.isEditing||"in_progress"===h().googleDriveConnectionStore.state.initialSyncState||j(!0)}else f(!1),j(!1),ce().oV({label:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.userError",defaultMessage:"Cannot disconnect Google Drive. Please contact Notion workspace admin."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.closeSnackbarError",defaultMessage:"Close"})})})}}),[n,H,c,d]);const D=n=>{(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:n,analyticsFrom:e.analyticsFrom,sessionId:e.sessionId})},A=function(e){return(0,_().yK)((n=>({wrapper:{width:400,padding:"0 24px",minHeight:e?478:void 0},settingsWrapper:{justifyContent:"center",gap:12},googleDriveDetailsContainer:{fontSize:14,fontWeight:C().Ue.regular,color:n.text.secondary,gap:12},driveNamesContainer:{gap:2,color:n.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",gap:8},disconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},moreDrivesContainer:{padding:"4px 0px 4px 0px"},learnMoreSection:{padding:"24px 0"},learnMoreButton:{fontSize:14,fontWeight:C().Ue.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:C().Ue.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${n.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:C().Ue.semibold,color:n.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:C().Ue.regular,color:n.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:C().Ue.regular,color:n.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:C().Ue.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,justifyContent:"center",alignItems:"center"},driveItemWrapper:{width:"100%",padding:"4px 0px 4px 0px",alignItems:"center"},driveName:{fontSize:14},driveIcon:{width:20,color:n.text.secondary}})),[e])}(m);return(0,W.jsx)(I().Z,{showCloseIcon:!0,open:"settings_screen"===c,onDismiss:()=>{(0,T().j)({environment:H,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_close",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),w([]),D("none")},render:()=>{var n,t,o;return(0,W.jsxs)("div",{style:A.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:xe().c,title:"completed"===d?(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModalTitle",defaultMessage:"Google Drive is connected to Notion AI"}):(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModalTitle2",defaultMessage:"Google Drive is connecting to Notion AI"})}),m?(0,W.jsx)(M().gq,{style:A.spinner,children:(0,W.jsx)(V().Z,{})}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(M().gq,{style:A.settingsWrapper,children:(0,W.jsxs)(M().Ht,{style:A.googleDriveDetailsContainer,children:[(0,W.jsx)(M().Ht,{children:"completed"===d?(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.canAnswerFrom",defaultMessage:"Notion AI is connected and can answer questions with content from {driveCountMessage}{futureDrivesMessage}",values:{driveCountMessage:b.length?`${b.length} Google Drives`:"Google Drive",futureDrivesMessage:null!==(n=e.syncControlSelection)&&void 0!==n&&n.enableSyncingFutureUsersAndDrives?", including future drives and users.":"."}}):(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.canAnswerFrom2",defaultMessage:"This can take up to 36h. You can cancel or modify your settings when the connection is complete. "})}),(0,W.jsxs)(M().Ht,{children:[(0,W.jsxs)(M().Ht,{style:A.driveNamesContainer,children:[(null===(t=e.syncControlSelection)||void 0===t?void 0:t.enableSyncingFutureUsersAndDrives)&&(0,W.jsxs)(M().gq,{style:A.driveItemWrapper,children:[(0,W.jsx)(M().Ht,{style:A.driveIcon,children:(0,Ee().v)({width:14,height:14})}),(0,W.jsx)(M().Ht,{style:A.driveName,children:(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.includeCurrentAndFutureDrives",defaultMessage:"Includes current and future drives"})})})]}),null===(o=b.slice(0,4))||void 0===o?void 0:o.map((e=>(0,W.jsx)("div",{children:(0,W.jsxs)(M().gq,{style:A.driveItemWrapper,children:[(0,W.jsx)(M().Ht,{style:A.driveIcon,children:(0,Ee().v)({width:14,height:14})}),(0,W.jsx)(M().Ht,{style:A.driveName,children:`${e.name}`})]})},e.id)))]}),(0,W.jsx)(M().gq,{style:A.moreDrivesContainer,children:b.length-4>0?(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.settingsModal.moreDrives",defaultMessage:"... and {moreDriveCount} more",values:{moreDriveCount:b.length-4}}):(0,W.jsx)(W.Fragment,{})})]})]})}),(0,W.jsxs)(M().Ht,{style:A.footer,children:[y?(0,W.jsx)(Je,{styles:A.disconnectButton,isEditButtonEnabled:y,navigateToScreen:D}):(0,W.jsx)(Re().Z,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,W.jsx)("div",{style:{width:240},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.editDrive.tooltip",defaultMessage:"You can cancel or modify your settings when the connection is complete. "})}),render:e=>(0,W.jsx)(Je,{events:e,styles:A.disconnectButton,isEditButtonEnabled:y,navigateToScreen:D})}),x?(0,W.jsx)($e,{styles:A.disconnectButton,isDisconnectButtonEnabled:x,navigateToScreen:D}):(0,W.jsx)(Re().Z,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,W.jsx)("div",{style:{width:240},children:(0,W.jsx)(S()._H,{id:"universalSearch.googleDriveIngestion.editDrive.tooltip",defaultMessage:"You can cancel or modify your settings when the connection is complete. "})}),render:e=>(0,W.jsx)($e,{events:e,styles:A.disconnectButton,isDisconnectButtonEnabled:x,navigateToScreen:D})})]}),(0,W.jsx)(M().gq,{style:A.learnMoreSection,children:(0,W.jsx)(k().Z,{style:A.learnMoreButton,onClick:()=>{(0,T().j)({environment:H,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_learn_more_url_click",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),(()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),n=null==e?void 0:e.learnMoreUrl;n&&window.open(n,"_blank")})()},children:(0,W.jsxs)(M().gq,{style:A.learnMoreText,children:[(0,W.jsx)(S()._H,{id:"universalSearch.integration.learnMore",defaultMessage:"Learn more"}),(0,le().g)(A.externalLinkIcon)]})})})]})]})}})};function Xe(){const e=(0,s().VK)((()=>h().googleDriveConnectionStore.state.screenToShow),[]),n=(0,s().VK)((()=>h().googleDriveConnectionStore.state.sessionId),[]),t=(0,s().VK)((()=>h().googleDriveConnectionStore.state.analyticsFrom),[]),o=(0,_().yK)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>(0,l().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",sessionId:n,analyticsFrom:t}),open:"service_account_not_added"===e,render:()=>(0,W.jsxs)("div",{style:o.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:xe().c,title:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.accountNotAdded.title",defaultMessage:"First, get your Google Workspace ready"}),subtext:(0,W.jsx)(S()._H,{id:"universalSearch.googleDrive.accountNotAdded.description",defaultMessage:"Before linking Google Drive with Notion, you'll need to modify a few settings in your Google Workspace."})}),(0,W.jsx)(M().Ht,{style:o.footer,children:(0,W.jsxs)(K().Z,{style:o.connectButton,onClick:()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),n=null==e?void 0:e.learnMoreUrl;window.open(n,"_blank")},children:[(0,W.jsx)(S()._H,{id:"universalSearch.integration.seeInstruction",defaultMessage:"See instructions"}),(0,W.jsx)("div",{style:o.iconWrapper,children:(0,y().K)()})]})})]})})}var en=()=>t(108205);const nn=(0,S().vU)({primedTextInput:{id:"assistant.universalQna.jiraConnectedNotificationTooltip.tryItPrimedInput",defaultMessage:"Find a Jira issue about: "}});function tn(){const e=(0,S().YB)(),n=(0,_().yK)((e=>({jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),t=(0,s().VK)((()=>m().Z.state.screenToShow),[]),a=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),r=(0,s().VK)((()=>m().Z.state.sessionId),[]),l=(0,i().O7)(),c=(0,o.useCallback)((()=>{(0,T().j)({environment:l,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"try_it_out_button_clicked",integration_type:"jira",setup_session_id:r,from:a}}}),m().Z.setState({...m().Z.state,screenToShow:"none"}),oe().assistantMenuActions.openAssistantRightHandSideMenu({environment:l,from:"jira_already_connected",primeTextInput:e.formatMessage(nn.primedTextInput)})}),[l,e,a,r]);return(0,W.jsx)(_e,{open:"already_connected"===t,tryItOutHandler:c,integrationIcon:()=>(0,en().k)(n.jiraIcon),onDismiss:()=>{m().Z.reset()},title:(0,W.jsx)(S()._H,{id:"universalQna.jira.alreadyConnected",defaultMessage:"Jira is already connected to Notion AI"}),subText1:(0,W.jsx)(S()._H,{id:"universalQna.jira.ConnectedDescription",defaultMessage:"You're fully set up."}),subText2:(0,W.jsx)(S()._H,{id:"universalQna.jira.tryIt",defaultMessage:"Try asking AI about Jira issues or projects!"})})}function on(){const[e,n]=o.useState(!1),t=(0,i().O7)(),a=(0,_().yK)((e=>({noteHeading:{fontWeight:C().Ue.medium,fontSize:14,lineHeight:"18px"},jiraIcon:{fill:e.blueColor,width:40,height:40},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{width:18,height:17,color:"#D7813A",marginTop:2},warningText:{fontSize:14,lineHeight:"18px",color:"#D7813A",paddingLeft:14,fontweight:C().Ue.regular,letterSpacing:"-0.15px"},warningContainer:{marginLeft:5,marginRight:5,marginBottom:15}})),[]),c=(0,s().VK)((()=>m().Z.state.screenToShow),[]),d=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),u=(0,s().VK)((()=>m().Z.state.sessionId),[]),h=(0,s().VK)((()=>g().default.state.currentUserStore),[]),v=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),x=(0,o.useCallback)((async()=>{if(!v)return;var e;(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"check_connection_button_clicked",integration_type:"jira",setup_session_id:u,from:d}}}),await(e=5e3,new Promise((n=>setTimeout(n,e))));const o=await r().callApi({eventName:"checkNotionToJiraConnection",environment:t,data:{spaceId:v}});"success"===o.type&&o.data.isConnected?(m().Z.setState({...m().Z.state,screenToShow:"connection_complete_screen",jiraSiteId:o.data.jiraSiteId}),(0,l().navigateToJiraUniversalScreen)({screenToShow:"connection_complete_screen",analyticsFrom:d,sessionId:u})):n(!0)}),[d,t,u,v]),f=(0,s().VK)((()=>p().default.getConfigKey("jira_ai_ingestion_config","jiraMarketPlaceAppUrl")),[]),y=(0,s().VK)((()=>p().default.getConfigKey("jira_ai_ingestion_config","learnMoreUrl")),[]);if(!h||!v)return null;const j=e?(0,W.jsxs)(M().gq,{style:a.warningContainer,children:[(0,je().t)(a.icon),(0,W.jsx)("div",{style:a.warningText,children:(0,W.jsx)(S()._H,{id:"universalQnA.jira.AuthScreen.warning",defaultMessage:"We couldn’t connect to Jira. Please review the instructions and try again, or check our {TroubleshootingGuide}",values:{TroubleshootingGuide:(0,W.jsx)("a",{style:{...a.link,color:"#D7813A"},href:y,target:"_blank",onClick:()=>{(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"trouble_shooting_guide_clicked",integration_type:"jira",setup_session_id:u,from:d}}})},children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.troubleShootingLink",defaultMessage:"troubleshooting guide."})})}})})]}):void 0;return(0,W.jsx)(Se,{title:(0,W.jsx)(S()._H,{id:"universalQnA.jira.AuthScreen",defaultMessage:"Follow instructions from Jira in your browser"}),open:"check_connection"===c,onDismiss:()=>{n(!1),(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_dismiss",integration_type:"jira",setup_session_id:u,from:d}}}),(0,l().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:d,sessionId:u})},warningMessage:j,notes:[(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:a.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.waitingForConnectionNoteHeading1",defaultMessage:"Jira should open automatically on a new browser tab."},"note1-1")}),(0,W.jsx)("div",{style:a.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.authWaiting2",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,W.jsx)("a",{style:a.link,href:f,target:"_blank",onClick:()=>{(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_open_auth_url",integration_type:"jira",setup_session_id:u,from:d}}})},children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:a.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.workspaceAdminHeading",defaultMessage:"Follow Jira’s instructions to connect"},"note2")}),(0,W.jsx)("div",{style:a.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.authWaiting",defaultMessage:"Install the Notion connector in a Jira site of your choice and return to this window"},"note1-2")})]},"note-2"),(0,W.jsx)(M().Ht,{style:{gap:4},children:(0,W.jsx)("div",{style:a.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.workspaceAdminHeading2",defaultMessage:"When you’re done, click the button below"},"note3")})},"note-3")],openLearnMoreUrl:()=>{window.open(y,"_blank")},integrationIcon:()=>(0,en().k)(a.jiraIcon),primaryButtonText:(0,W.jsx)(S()._H,{id:"universalSearch.jira.Button.finishedSetup",defaultMessage:"Check connection"},"note3-1"),onClickPrimaryButton:x})}const sn=(0,S().vU)({copyTextMessage:{id:"universalSearch.jira.connectionComplete.jiraTitle.copyMessage",defaultMessage:"Our Notion AI is now connecting to Jira. When you ask Notion AI a question, it'll be able to reference info across your Jira site. Click the button at the bottom right of your Notion app to give it a try!"}});function an(){const e=(0,i().O7)(),n=(0,_().yK)((e=>({headingText:{fontSize:C().JB.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.primary}`,paddingBottom:8,fontWeight:C().Ue.medium},circle:{marginRight:8},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer",paddingLeft:2},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:C().JB.UIRegular.desktop,lineHeight:"18px",letterSpacing:"-0.154px",display:"flex"},jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),t=(0,s().VK)((()=>m().Z.state.screenToShow),[]),a=(0,s().VK)((()=>m().Z.state.sessionId),[]),r=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),c=(0,s().VK)((()=>m().Z.state.sessionId),[]),d=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);let u=(0,s().VK)((()=>m().Z.state.jiraSiteId),[]);const p=(0,s().VK)((()=>m().Z.state.jiraSyncState),[]),[h,v]=(0,o.useState)(!1),x="in_progress"===p;return(0,W.jsx)(he,{open:"connection_complete_screen"===t,onDismiss:()=>{(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_dismiss",integration_type:"jira",setup_session_id:a,from:r}}})},onCopiedClick:()=>{(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"copy_button_clicked",integration_type:"jira",setup_session_id:a,from:r}}})},title:(0,W.jsx)(S()._H,{id:"universalSearch.jira.connectionComplete.jiraTitle",defaultMessage:"You’re done!"}),integrationIcon:()=>(0,en().k)(n.jiraIcon),subText:(0,W.jsx)(S()._H,{id:"universalSearch.jira.connectionComplete.jiraTitle.subText",defaultMessage:"Here’s what’s next:"}),primaryButtonText:(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.confirmConnection",defaultMessage:"Done"}),notes:[(0,W.jsxs)(M().gq,{style:n.headingText,children:[(0,W.jsx)(w().Z,{number:1,style:n.circle}),(0,W.jsxs)(M().Ht,{children:[(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.listpoint1",defaultMessage:"Connecting your Jira site may take up to 36h."},"note1"),!x&&(0,W.jsx)("div",{style:n.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.selectJiraProjects",defaultMessage:"If you want to choose Jira projects, {clickHere}",values:{clickHere:h?(0,W.jsx)(V().Z,{}):(0,W.jsx)("a",{style:n.link,onClick:async()=>{if(!d)return;(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"jira_settings",integration_type:"jira",setup_session_id:a,from:r}}}),v(!0);const n=await(0,l().getJiraAIConnectionStatusAction)({environment:e,spaceId:d});if(n){var t;const e=null===(t=n.connectionState)||void 0===t?void 0:t.status;"in_progress"===e?(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:a,screenToShow:"settings_screen"}):"not_started"===e||"pending_selection"===e?(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:a,screenToShow:"select_projects"}):(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:a,screenToShow:"error"})}else(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:a,screenToShow:"error"});v(!1)},children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.settings",defaultMessage:"click here."})})}},"note1-1")})]})]},"item1"),(0,W.jsxs)(M().gq,{style:n.headingText,children:[(0,W.jsx)(w().Z,{number:2,style:n.circle}),(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.listpoint2",defaultMessage:"Notion AI will be ready to answer questions across Notion and Jira knowledge."},"note2")]},"item2"),(0,W.jsxs)(M().gq,{style:n.headingText,children:[(0,W.jsx)(w().Z,{number:3,style:n.circle}),(0,W.jsx)(S()._H,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.listpoint3",defaultMessage:"Copy the message below to let your team know!"})]},"item3")],copyTextMessage:sn.copyTextMessage,onPrimaryButtonClick:async()=>{var n,t;if(!d)return;if((0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_done",integration_type:"jira",setup_session_id:a,from:r}}}),x||"completed"===p)return void(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:c,screenToShow:"none"});const o=await(0,l().getJiraAIConnectionStatusAction)({environment:e,spaceId:d});if(u=(null==o?void 0:o.jiraSiteId)??"",u){if("in_progress"===(null==o||null===(n=o.connectionState)||void 0===n?void 0:n.status)||"completed"===(null==o||null===(t=o.connectionState)||void 0===t?void 0:t.status))return ce().oV({label:de().Z.getIntl().formatMessage({defaultMessage:"Jira sync started. This can take up to 36 hours.",id:"jira.sync.started.background.3"}),position:"bottom"}),void(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:c,screenToShow:"none"});await(0,l().startJiraBulkIngestionAction)({environment:e,spaceId:d,jiraSiteId:u,sessionId:c}),(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:c,screenToShow:"none"})}else(0,l().navigateToJiraUniversalScreen)({analyticsFrom:r,sessionId:c,screenToShow:"error"})}})}const rn=(0,S().vU)({note1Heading:{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_1.heading",defaultMessage:"Jira data will be permanently deleted from Notion"},note1Body:{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_1.body",defaultMessage:"This process can take up to 3 hours. You'll only be able to reconnect after disconnecting is complete."},note2Heading:{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_2.heading",defaultMessage:"Uninstall the Notion AI app from your Jira Site (optional)"},postDisconnectTitle:{id:"universalSearch.jiraIngestion.post_disconnect_modal.title",defaultMessage:"Jira is disconnecting from Notion AI"},postDisconnectDescription:{id:"universalSearch.jiraIngestion.post_disconnect_modal.description",defaultMessage:"Here's what's next:"},disconnectTitle:{id:"universalSearch.jiraIngestion.disconnectModal.title",defaultMessage:"Are your sure?"},disconnectSubTitle:{id:"universalSearch.jiraIngestion.disconnectModal.subTitle",defaultMessage:"Jira data will be permanently deleted from Notion."},disconnectDescription:{id:"universalSearch.jiraIngestion.disconnectModal.description",defaultMessage:"This process can take up to 3 hours, and you'll only be able to reconnect after disconnecting is complete."},primaryButtonLabel:{id:"universalSearch.jiraIngestion.disconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"},goBackButtonLabel:{id:"universalSearch.jiraIngestion.disconnectModal.goBack",defaultMessage:"Go back"}});function ln(){const e=(0,_().yK)((e=>({confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:C().Ue.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.medium,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},notesSectionWrapper:{padding:"12px 12px 12px 12px",gap:13},noteBlockWrapper:{marginBottom:12,gap:8},note:{fontWeight:C().Ue.regular,fontSize:C().JB.UIRegular.desktop,lineHeight:"18px"},noteHeading:{fontWeight:C().Ue.medium,fontSize:C().JB.UIRegular.desktop,lineHeight:"18px"},noteBody:{fontWeight:C().Ue.regular,color:e.text.secondary,fontSize:C().JB.UIRegular.desktop,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{rotate:"45deg",width:12,height:12,cursor:"pointer",display:"inline",padding:0,margin:0},jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),[n,t]=(0,o.useState)(!1),a=(0,s().Kw)(m().Z),c=(0,s().VK)((()=>a.jiraSiteId),[a]),d=(0,s().VK)((()=>a.jiraSiteUrl),[a]),u=(0,s().VK)((()=>m().Z.state.screenToShow),[]),p=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),h=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),v=(0,s().VK)((()=>m().Z.state.sessionId),[]),x=(0,i().O7)(),f=async()=>{if(!p)return;const e=await async function(e){const{environment:n,spaceId:t,jiraSiteId:o}=e,i=await r().callApi({eventName:"disconnectJiraConnector",environment:n,data:{spaceId:t,jiraSiteId:o}});if("success"===i.type)return ce().oV({label:de().Z.getIntl().formatMessage({defaultMessage:"Started disconnecting Jira. This can take up to 3 hours.",id:"jira.disconnect.started"}),position:"bottom",style:{width:"400px",display:"flex",justifyContent:"space-between"}}),!0;return!1}({environment:x,spaceId:p,jiraSiteId:c});e&&m().Z.setState({...a,jiraSyncState:"disconnecting",isDisconnecting:!0,screenToShow:"post_disconnect_screen"})},y=(0,o.useCallback)((()=>{const{noteBlockWrapper:n,noteHeading:t,noteBody:o,link:i}=e;return[(0,W.jsxs)(M().Ht,{style:n,children:[(0,W.jsx)("div",{style:t,children:(0,W.jsx)(S()._H,{...rn.note1Heading})}),(0,W.jsx)("div",{style:o,children:(0,W.jsx)(S()._H,{...rn.note1Body})})]},"note-1"),(0,W.jsxs)(M().Ht,{style:n,children:[(0,W.jsx)("div",{style:t,children:(0,W.jsx)(S()._H,{...rn.note2Heading})}),(0,W.jsx)("div",{style:o,children:(0,W.jsx)(S()._H,{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_2.body",defaultMessage:"Go to your {NavigateToJiraSiteSettings} and uninstall the Notion AI app.",values:{NavigateToJiraSiteSettings:(0,W.jsx)("a",{style:i,href:`${d}/plugins/servlet/upm`,target:"_blank",onClick:()=>{(0,T().j)({environment:x,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_screen_marketplace_app_disconnect_btn",integration_type:"jira",setup_session_id:v,from:h}}})},children:(0,W.jsx)(S()._H,{id:"universalSearch.jiraIngestion.post_disconnect_screen.disconnect_jira_marketplace_app",defaultMessage:"Jira Site {ArrowIcon}",values:{ArrowIcon:(0,Le().Z)(e.icon)}})})}},"note2-2")})]},"note-2")]}),[e,d,x,v,h]);return"post_disconnect_screen"===u?(0,W.jsx)(qe,{onClickGotItBtn:()=>{m().Z.setState({...a,screenToShow:"none"})},onDismiss:()=>{m().Z.setState({...a,screenToShow:"none"})},open:"post_disconnect_screen"===u,integrationIcon:()=>(0,en().k)(e.jiraIcon),title:(0,W.jsx)(S()._H,{...rn.postDisconnectTitle}),descriptionMessage:(0,W.jsx)(S()._H,{...rn.postDisconnectDescription}),message:(0,W.jsx)("div",{style:e.notesSectionWrapper,children:y().map(((n,t)=>(0,W.jsxs)(M().gq,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,W.jsx)(w().Z,{number:t+1}),(0,W.jsx)("div",{style:e.note,children:n})]},t)))})}):(0,W.jsx)(I().Z,{showCloseIcon:!0,open:"disconnect_screen"===u,onDismiss:()=>{m().Z.setState({...a,screenToShow:"none"})},render:()=>(0,W.jsx)("div",{style:e.confirmWrapper,children:(0,W.jsxs)("div",{style:e.confirmContainer,children:[(0,W.jsx)("div",{style:e.confirmModalTitle,children:(0,W.jsx)(S()._H,{...rn.disconnectTitle})}),(0,W.jsx)("div",{style:e.confirmModalSubTitle,children:(0,W.jsx)(S()._H,{...rn.disconnectSubTitle})}),(0,W.jsx)("div",{style:e.confirmModalDescription,children:(0,W.jsx)(S()._H,{...rn.disconnectDescription})}),(0,W.jsxs)(M().Ht,{style:e.confirmModalActionButtons,children:[(0,W.jsx)(K().Z,{isRed:!0,style:e.confirmDisconnectButton,isLoading:n,onClick:async()=>{(0,T().j)({environment:x,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_confirm_disconnect_button",integration_type:"jira",setup_session_id:v,from:h}}}),t(!0),await f(),t(!1)},children:(0,W.jsx)(S()._H,{...rn.primaryButtonLabel})}),(0,W.jsx)(k().Z,{style:e.goBackButton,onClick:()=>{(0,l().navigateToJiraUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:a.analyticsFrom,sessionId:a.sessionId})},children:(0,W.jsx)(S()._H,{...rn.goBackButtonLabel})})]})]})})})}function cn(){const e=(0,s().VK)((()=>m().Z.state.screenToShow),[]),n=(0,s().VK)((()=>m().Z.state.sessionId),[]),t=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),o=(0,_().yK)((e=>({jiraIcon:{fill:e.blueColor,width:40,height:40},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]),i="error"===e;return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>(0,l().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:t,sessionId:n}),open:i,render:()=>(0,W.jsxs)("div",{style:o.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:()=>(0,en().k)(o.jiraIcon),title:(0,W.jsx)(S()._H,{id:"universalSearch.jira.error.title",defaultMessage:"Oops! Something went wrong"}),subtext:(0,W.jsx)(S()._H,{id:"universalSearch.jira.error.description",defaultMessage:"Something went wrong, please try again later."})}),(0,W.jsx)(M().Ht,{style:o.footer,children:(0,W.jsx)(K().Z,{style:o.connectButton,onClick:()=>{(0,l().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:t,sessionId:n})},children:(0,W.jsx)(S()._H,{id:"universalSearch.jira.error.Dismiss",defaultMessage:"Close"})})})]})})}function dn(){const[e,n]=o.useState(!1),t=(0,o.useMemo)((()=>X("jira")),[]),a=(0,o.useRef)(!1),c=(0,_().yK)((e=>({jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),d=(0,i().O7)(),h=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),v=(0,o.useMemo)((()=>Y("jira")),[]),x=(0,s().VK)((()=>m().Z.state.screenToShow),[]),f=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),y=(0,s().VK)((()=>m().Z.state.sessionId),[]),j=(0,s().VK)((()=>u().KR.isJiraQnaEnabled()),[]),C=(0,O().y)(),b=(0,s().VK)((()=>g().default.state.currentUserStore),[]),k=(0,Q().J)(),w="info_screen"===x,I=(0,s().VK)((()=>p().default.getConfigKey("jira_ai_ingestion_config","learnMoreUrl")),[]);return(0,o.useEffect)((()=>{h&&k&&"info_screen"===x&&(a.current||((0,T().j)({environment:d,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"jira",setup_session_id:y,from:f,is_space_admin:k,is_ai_eligible:C}}}),a.current=!0))}),[h,d,x,y,f,k,C]),j?d.device.isMobile?(0,W.jsx)(ee,{logo:en().k,appName:"Jira",open:w,onClosed:()=>{m().Z.reset()},learnMoreUrl:I}):k?(0,W.jsx)(L,{integrationIcon:()=>(0,en().k)(c.jiraIcon),notes:t,onLearnMore:()=>{window.open(I,"_blank")},onConnect:async()=>{h&&b&&await async function(e,n,t,o,i,s){(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_connect",integration_type:"jira",setup_session_id:o,from:i}}}),s(!0);const a=await(0,l().getJiraAIConnectionStatusAction)({environment:e,spaceId:t});if(a){const{connectionState:n}=a;if("not_started"===n.status){(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"check_connection_screen_open",integration_type:"jira",setup_session_id:o,from:i}}});if("success"===(await r().callApi({eventName:"addNotionInfoForJiraAIConnection",environment:e,data:{spaceId:t}})).type){(0,l().navigateToJiraUniversalScreen)({screenToShow:"check_connection",analyticsFrom:i,sessionId:o});const n=p().default.getConfigKey("jira_ai_ingestion_config","jiraMarketPlaceAppUrl");n&&((0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"app_install_url_opened",integration_type:"jira",setup_session_id:o,from:i}}}),window.open(n,"_blank"))}}else"pending_selection"===n.status?((0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"project_selection_screen_open",integration_type:"jira",setup_session_id:o,from:i}}}),(0,l().navigateToJiraUniversalScreen)({screenToShow:"connection_complete_screen",analyticsFrom:i,sessionId:o})):"in_progress"===n.status||"editing"===n.status?((0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_open",integration_type:"jira",setup_session_id:o,from:i}}}),(0,l().navigateToJiraUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:i,sessionId:o})):"completed"===n.status?((0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"already_connected_screen_open",integration_type:"jira",setup_session_id:o,from:i}}}),(0,l().navigateToJiraUniversalScreen)({screenToShow:"already_connected",analyticsFrom:i,sessionId:o})):(0,l().navigateToJiraUniversalScreen)({screenToShow:"error",analyticsFrom:i,sessionId:o})}s(!1)}(d,0,h,y,f,n)},onDismiss:()=>{(0,T().j)({environment:d,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_dismiss",integration_type:"jira",setup_session_id:y,from:f}}}),(0,l().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:f,sessionId:y}),a.current=!1},title:(0,W.jsx)(S()._H,{id:"universalSearch.jiraIngestion.intro.jiraTitle",defaultMessage:"Get answers from Jira without leaving Notion"}),isLoading:e,titleWidth:352,open:w}):(0,W.jsx)(ne,{onConnect:()=>{m().Z.reset(),(0,T().j)({environment:d,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"contact_workspace_owners",integration_type:"jira",setup_session_id:y,from:f}}}),z().r$({openedFrom:"jira_connect_nonadmin_modal",currentTab:"members"})},integrationIcon:()=>(0,en().k)(c.jiraIcon),message:v,onDismiss:()=>m().Z.reset(),open:w}):(0,W.jsx)(W.Fragment,{})}var gn=()=>t(513670),un=()=>t(291198),pn=()=>t(998901);const hn=(0,S().vU)({searchForAProject:{id:"universalQnA.jira.searchForAProject",defaultMessage:"Search for a Project"},disabledTooltip:{id:"universalSearch.jira.disabledTooltip",defaultMessage:"You can only interact after all projects are loaded"}});function mn(){const[e,n]=o.useState(""),[t,c]=o.useState(!1),[d,u]=o.useState(!1),p=(0,s().VK)((()=>m().Z.state.syncControl),[]),[h,v]=o.useState([]),[x,f]=o.useState(!0),[y,j]=o.useState(!0),[b,k]=o.useState(0),[w,H]=o.useState(!1),D=function(e){return(0,_().yK)((n=>({wrapper:{width:400,display:"flex",flexDirection:"column",minHeight:530},jiraIcon:{fill:n.blueColor,width:40,height:40},jiraSmallIcon:{fill:n.blueColor,width:18,height:18},logoSection:{padding:"20px 20px 9px 20px",gap:8,justifyContent:"center",alignItems:"center",height:84},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:n.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"},title:{fontSize:17,fontWeight:C().Ue.medium,lineHeight:"22px",marginBottom:"9px"},subtext:{fontSize:12,lineHeight:"14.52px",color:n.text.secondary},footer:{position:"absolute",width:"100%",justifySelf:"flex-end",boxShadow:"0px 9px 24px 0px #0F0F0F33",padding:"16px 20px 16px 20px",gap:12,bottom:0},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:360},searchBarWrapper:{justifyContent:"center"},searchBar:{width:360,padding:4},selectionContainer:{marginTop:18,marginBottom:0,width:"100%",height:"100%",justifyContent:"center",padding:"0px 20px 0px"},selection:{width:"100%"},waitingForConnection:{fontSize:12,lineHeight:"16px",color:n.text.secondary},waitingForConnectionWrapper:{gap:4},tryAgainWrapper:{marginTop:16,gap:4},tryAgainSection:{gap:4,alignItems:"center",marginBottom:16,color:n.text.secondary},tryAgainText:{fontSize:14},channelItem:{gap:4,alignItems:"center"},channelsText:{fontSize:12,lineHeight:"16px",display:"flex",flexDirection:"row",gap:4},divider:{marginTop:5,marginBottom:5},alertIcon:{width:16,height:16},tryAgainButton:{fontSize:12,width:80},futureChannelsCheckboxWrapper:{gap:4,visibility:"visible"},loadingChannelsWrapper:{alignItems:"center",gap:8,fontSize:12,color:n.text.secondary,marginTop:8},selectionWrapper:{overflowY:"scroll",maxHeight:e?170:124},loadMoreButtonWrapper:{fontSize:12,paddingTop:8,paddingBottom:4},loadMoreButtonhoveredStyle:{background:"none"},channelItemWrapper:{marginTop:12},workspaceAdministratorHeading:{fontSize:14,fontWeight:C().Ue.regular,color:n.text.primary},orderedList:{paddingLeft:18,fontSize:14,fontWeight:C().Ue.regular,color:n.text.secondary},waitingForConnectionNote:{paddingBottom:4},note:{fontWeight:C().Ue.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:C().Ue.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:C().Ue.regular,color:n.text.secondary,fontSize:14,lineHeight:"18px"},learnMoreButton:{gap:4,alignItems:"center",fontSize:14,color:n.text.secondary,justifyContent:"center"},buttonContainer:{justifyContent:"center"},link:{color:n.text.secondary,textDecoration:"underline",cursor:"pointer"},loadingChannels:{color:n.text.secondary},loadingWrapper:{alignItems:"center",gap:4}})),[e])}(d),A=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),U=(0,s().VK)((()=>m().Z.state.sessionId),[]),N=(0,s().VK)((()=>m().Z.state.jiraSiteId),[]),F=(0,s().VK)((()=>m().Z.state.screenToShow),[]),Z=(0,i().O7)(),P=(0,s().VK)((()=>{var e;return null===(e=g().default.getState().currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),L=(0,s().Kw)(m().Z),q="completed"===(0,s().VK)((()=>m().Z.state.jiraSyncState),[]),z=(0,o.useCallback)((async()=>{if(!P)return;(0,T().j)({environment:Z,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"project_selection_connect_button_clicked",integration_type:"jira",setup_session_id:U,from:A}}});let e,n=[],t=[];if(y?t=h.filter((e=>!e.checked)).map((e=>({id:e.id,name:e.name}))):n=h.filter((e=>e.checked)).map((e=>({id:e.id,name:e.name}))),c(!0),q)e=await(0,l().startJiraEditFlow)({environment:Z,spaceId:P,jiraSiteId:N,inclusionList:n,exclusionList:t});else{var o,i;const s=await(0,l().getJiraAIConnectionStatusAction)({environment:Z,spaceId:P});if("in_progress"===(null==s||null===(o=s.connectionState)||void 0===o?void 0:o.status)||"completed"===(null==s||null===(i=s.connectionState)||void 0===i?void 0:i.status))return ce().oV({label:de().Z.getIntl().formatMessage({defaultMessage:"Jira is already syncing. This can take up to 36 hours.",id:"jira.sync.started.background.2"}),position:"bottom"}),void(0,l().navigateToJiraUniversalScreen)({analyticsFrom:A,sessionId:U,screenToShow:"none"});e=await(0,l().startJiraBulkIngestionAction)({environment:Z,spaceId:P,jiraSiteId:N,sessionId:U,inclusionList:n,exclusionList:t})}e?(0,l().navigateToJiraUniversalScreen)({analyticsFrom:A,screenToShow:"none",sessionId:U}):(0,l().navigateToJiraUniversalScreen)({analyticsFrom:A,screenToShow:"error",sessionId:U}),c(!1)}),[P,y,Z,N,h,A,U,q]),G=(0,o.useCallback)((()=>h.find((e=>e.checked))),[h]),Q=(0,o.useCallback)((e=>{const n=h.map((n=>n.id===e?{...n,checked:!n.checked}:n));v(n);const t=n.find((e=>e.checked)),o=n.find((e=>!e.checked));let i=!1;t&&o?i="partial":t&&(i=!0),f(i)}),[h]);(0,o.useEffect)((()=>{"select_projects"===F&&(0===p.inclusionList.length&&0===p.exclusionList.length?f(!0):f("partial"),j(0===p.inclusionList.length))}),[F,p]);const O=(0,o.useCallback)((()=>{f(!x),v((e=>e.map((e=>({...e,checked:!x})))))}),[x]),E=(0,o.useCallback)((e=>{const n=h.find((n=>n.id===e));return!(null==n||!n.checked)}),[h]),R=(0,o.useCallback)((async e=>{if(!P)return;H(!0);const n=await r().callApi({eventName:"getJiraProjects",environment:Z,data:{spaceId:P,jiraSiteId:N,startAt:e}});if("success"===n.type){v((e=>{const t=n.data.projects.map((e=>{let n=!1;return 0===p.inclusionList.length&&0===p.exclusionList.length?n=!0:p.inclusionList.length>0?n=!!p.inclusionList.find((n=>n.id===e.id)):p.exclusionList.length>0&&(n=!p.exclusionList.find((n=>n.id===e.id))),{...e,checked:n}}));return(0,gn().mN)([...e,...t],(e=>e.id))})),k(n.data.total);const t=e+n.data.projects.length;t>e?R(t):u(!0)}}),[Z,P,N,p]),J=(0,o.useCallback)((()=>(0,W.jsxs)(M().Ht,{children:[(0,W.jsxs)(M().gq,{style:D.channelItem,children:[(0,W.jsx)(Re().Z,{render:e=>(0,W.jsx)("div",{...e,children:(0,W.jsx)(Me().Z,{checked:x,checkSize:10,size:14,disabled:!d,onClick:()=>{(0,T().j)({environment:Z,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:x?"all_projects_deselected":"all_projects_selected",integration_type:"jira",setup_session_id:L.sessionId,from:L.analyticsFrom}}}),O()}})}),renderTooltip:()=>(0,W.jsx)("div",{style:{width:280},children:(0,W.jsx)(S()._H,{...hn.disabledTooltip})}),disableTooltip:d}),(0,W.jsxs)("div",{style:D.channelsText,children:[(0,en().k)(D.jiraSmallIcon),(0,W.jsx)(S()._H,{id:"universalSearch.integration.jiraIngestion.allProjects",defaultMessage:"All projects"})]})]}),(0,W.jsx)(Te().Z,{style:D.divider,size:4}),(0,W.jsxs)(W.Fragment,{children:[d?(0,W.jsx)(W.Fragment,{}):(0,W.jsxs)(M().gq,{style:D.loadingChannelsWrapper,children:[(0,W.jsx)(V().Z,{}),(0,W.jsxs)(M().Ht,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.jiraIngestion.loadedXProjects",defaultMessage:"{projectsCount} of {totalProjects} projects loaded",values:{projectsCount:h.length,totalProjects:b}})}),(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.jiraIngestion.loading1000PerMinute",defaultMessage:"This can take one minute per every 1,000 projects."})})]})]}),(0,W.jsx)(M().Ht,{style:D.selectionWrapper,children:(e?h.filter((n=>n.name.toLowerCase().includes(e.toLowerCase()))):h).map((e=>(0,W.jsxs)(M().gq,{gap:8,style:D.channelItemWrapper,children:[(0,W.jsx)(Re().Z,{render:n=>(0,W.jsx)("div",{...n,children:(0,W.jsx)(Me().Z,{checked:E(e.id),disabled:!d,onClick:()=>{(0,T().j)({environment:Z,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:E(e.id)?"specific_project_deselected":"specific_project_selected",integration_type:"jira",setup_session_id:L.sessionId,from:L.analyticsFrom}}}),Q(e.id)},checkSize:10,size:14},`${e.id}-checkbox`)}),renderTooltip:()=>(0,W.jsx)("div",{style:{width:280},children:(0,W.jsx)(S()._H,{...hn.disabledTooltip})}),disableTooltip:d}),(0,en().k)(D.jiraSmallIcon),(0,W.jsx)("div",{style:D.channelsText,children:` ${e.name}`},`${e.id}-label`)]},e.id)))})]})]})),[D,d,h,b,e,x,Z,L.sessionId,L.analyticsFrom,O,E,Q]);return(0,a().r5)((async()=>{P&&N&&"select_projects"===F&&!d&&!w&&await R(0)}),[P,R,F,N,d,w]),(0,W.jsx)(I().Z,{showCloseIcon:!0,open:"select_projects"===F,onDismiss:()=>{(0,T().j)({environment:Z,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_close",integration_type:"jira",setup_session_id:U,from:A}}}),(0,l().navigateToJiraUniversalScreen)({analyticsFrom:A,screenToShow:"none",sessionId:U})},render:()=>(0,W.jsxs)("div",{style:D.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:()=>(0,en().k)(D.jiraIcon),title:(0,W.jsx)(S()._H,{id:"universalQnA.jira.projectSelectionScreenTitle",defaultMessage:"Select projects to connect"}),subtext:(0,W.jsx)(S()._H,{id:"universalQnA.jira.projectSelectionScreenSubtext",defaultMessage:"Connecting more Jira projects will give you more relevant and useful Notion AI responses"})}),(0,W.jsx)(He().Z,{capture:!0,allowEsc:!0,render:()=>(0,W.jsx)(Re().Z,{textWrap:!0,placement:pn().Placement.Top,render:t=>(0,W.jsx)("div",{...t,children:(0,W.jsx)(M().gq,{...t,style:D.searchBarWrapper,children:(0,W.jsx)(un().Z,{id:"jiraUniversalQnASearchBar",style:D.searchBar,disabled:!d,placeholder:de().Z.formatMessage(hn.searchForAProject),value:e,onChange:e=>{n(e.target.value),(0,T().j)({environment:Z,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"filter_jira_projects",integration_type:"jira",setup_session_id:U,from:A}}})}},"jiraUniversalQnASearchBar")})}),renderTooltip:()=>(0,W.jsx)("div",{style:{width:280},children:(0,W.jsx)(S()._H,{...hn.disabledTooltip})}),disableTooltip:d})}),(0,W.jsx)(M().gq,{style:D.selectionContainer,children:(0,W.jsx)(M().Ht,{style:D.selection,children:J()})}),(0,W.jsxs)(M().Ht,{style:D.footer,children:[(0,W.jsxs)(M().gq,{style:D.futureChannelsCheckboxWrapper,children:[(0,W.jsx)(Re().Z,{render:e=>(0,W.jsx)("div",{...e,children:(0,W.jsx)(Me().Z,{checked:y,checkSize:10,disabled:!d,size:14,onClick:()=>{(0,T().j)({environment:Z,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:y?"dont_join_future_projects":"join_future_projects",integration_type:"jira",setup_session_id:L.sessionId,from:L.analyticsFrom}}}),j(!y)}})}),renderTooltip:()=>(0,W.jsx)("div",{style:{width:280},children:(0,W.jsx)(S()._H,{...hn.disabledTooltip})}),disableTooltip:d}),(0,W.jsx)("div",{style:D.channelsText,children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.jiraIngestion.allFutureProjects",defaultMessage:"Add projects created in future"})})]}),(0,W.jsx)(Re().Z,{render:e=>(0,W.jsx)("div",{...e,children:(0,W.jsx)(K().Z,{isLoading:t,style:D.connectButton,onClick:z,disabled:!G()||!d,children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.connect",defaultMessage:"Connect"})})}),renderTooltip:()=>(0,W.jsx)("div",{style:{width:280},children:(0,W.jsx)(S()._H,{...hn.disabledTooltip})}),disableTooltip:d})]})]})})}const vn=(0,S().vU)({settingsModalTitle:{id:"universalSearch.jiraIngestion.settingsModalTitle",defaultMessage:"Jira is connected to Notion AI"},settingsModalPendingTitle:{id:"universalSearch.jiraIngestion.settingsModalTitle2",defaultMessage:"Jira is connecting to Notion AI"},settingModalConnectionIsPending:{id:"universalSearch.jiraIngestion.settingsModal.connectionIsPending",defaultMessage:"This can take up to 36h. You can cancel or modify your settings when the connection is complete."},tooltipText:{id:"universalSearch.jiraIngestion.settingsModal.tooltipText",defaultMessage:"You can cancel or modify your settings when the connection is complete. "},learnMoreText:{id:"universalSearch.integration.learnMore",defaultMessage:"Learn more"},editProjectsButton:{id:"universalSearch.jiraIngestion.settingsModal.editSyncControls",defaultMessage:"Edit Projects"},disconnectJira:{id:"universalSearch.jiraIngestion.settingsModal.disconnectJira",defaultMessage:"Disconnect"}});function xn(){const[e,n]=(0,o.useState)(!0),[t,r]=(0,o.useState)([]),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(0),v=(0,s().Kw)(m().Z),x=(0,s().VK)((()=>m().Z.state.jiraSiteId),[]),f=(0,i().O7)(),y=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),j=(0,s().VK)((()=>m().Z.state.analyticsFrom),[]),b=(0,s().VK)((()=>m().Z.state.screenToShow),[]),w=(0,s().VK)((()=>m().Z.state.jiraSyncState),[]),H=(0,s().VK)((()=>p().default.getConfigKey("jira_ai_ingestion_config","learnMoreUrl")),[]),D="completed"===w;(0,a().r5)((async()=>{if(!y||"settings_screen"!==b)return;if(!D)return void n(!1);n(!0);const[e,t]=await Promise.all([(0,l().getJiraAIConnectionStatusAction)({environment:f,spaceId:y}),(0,l().getJiraSyncControlAction)({environment:f,spaceId:y,jiraSiteId:x})]);e&&t&&(r(t.data.sampleProjects),h(t.data.totalConnectedProjects),d(t.data.isFutureProjectsSyncEnabled),n(!1))}),[y,f,b,x,D]);const A=e=>{(0,l().navigateToJiraUniversalScreen)({screenToShow:e,analyticsFrom:v.analyticsFrom,sessionId:v.sessionId})},U=function(e){return(0,_().yK)((n=>({wrapper:{width:400,padding:"0 24px",minHeight:e?428:void 0},settingsWrapper:{justifyContent:"center",gap:12},jiraDetailsContainer:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.regular,color:n.text.secondary,gap:12,paddingBottom:12},projectNameContainer:{gap:2,color:n.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",gap:8},disconnectButton:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.medium,width:"100%"},moreProjectsContainer:{padding:"4px 0px 4px 0px"},learnMoreSection:{padding:"24px 0"},learnMoreButton:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:C().Ue.medium,fontSize:C().JB.UISmall.desktop,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${n.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:C().Ue.semibold,color:n.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.regular,color:n.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.regular,color:n.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:C().JB.UIRegular.desktop,fontWeight:C().Ue.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,justifyContent:"center",alignItems:"center"},projectItemWrapper:{width:"100%",padding:"2px 0px 2px 0px",alignItems:"center"},projectName:{fontSize:C().JB.UIRegular.desktop},projectIcon:{width:20,color:n.text.secondary},jiraIcon:{fill:n.blueColor,width:40,height:40},jiraIconSmall:{fill:n.blueColor,width:14,height:14}})),[e])}(e);return(0,W.jsx)(I().Z,{showCloseIcon:!0,open:"settings_screen"===b,onDismiss:()=>{(0,l().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:j,sessionId:v.sessionId}),r([]),h(0),d(!1)},render:()=>(0,W.jsxs)("div",{style:U.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:()=>(0,en().k)(U.jiraIcon),title:D?(0,W.jsx)(S()._H,{...vn.settingsModalTitle}):(0,W.jsx)(S()._H,{...vn.settingsModalPendingTitle})}),e?(0,W.jsx)(M().gq,{style:U.spinner,children:(0,W.jsx)(V().Z,{})}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(M().gq,{style:U.settingsWrapper,children:(0,W.jsxs)(M().Ht,{style:U.jiraDetailsContainer,children:[(0,W.jsx)(M().Ht,{children:D?(0,W.jsx)(S()._H,{id:"universalSearch.jiraIngestion.settingsModal.canAnswerFrom",defaultMessage:"Notion AI is connected and can answer questions with content from {jiraCountMessage}{futureProjectsMessage}",values:{jiraCountMessage:u?`${u} Jira Projects`:"Jira Project",futureProjectsMessage:c?", including future projects.":"."}}):(0,W.jsx)(S()._H,{...vn.settingModalConnectionIsPending})}),D?(0,W.jsx)(M().Ht,{children:c&&(0,W.jsxs)(M().gq,{style:U.projectItemWrapper,children:[(0,W.jsx)(M().Ht,{style:U.projectIcon,children:(0,en().k)(U.jiraIconSmall)}),(0,W.jsx)(M().Ht,{style:U.projectName,children:(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalSearch.jiraIngestion.settingsModal.includeCurrentAndFutureProjects",defaultMessage:"Includes current and future projects"})})})]})}):null,D&&t.map((e=>(0,W.jsx)("div",{children:(0,W.jsxs)(M().gq,{style:U.projectItemWrapper,children:[(0,W.jsx)(M().Ht,{style:U.projectIcon,children:(0,en().k)(U.jiraIconSmall)}),(0,W.jsx)(M().Ht,{style:U.projectName,children:e.name})]})},e.id))),D&&(0,W.jsx)(M().gq,{style:U.moreProjectsContainer,children:u-3>0?(0,W.jsx)(S()._H,{id:"universalSearch.jiraIngestion.settingsModal.moreProjects",defaultMessage:"... and {moreProjectCount} more",values:{moreProjectCount:u-3}}):(0,W.jsx)(W.Fragment,{})})]})}),(0,W.jsxs)(M().Ht,{style:U.footer,children:[D?(0,W.jsx)(fn,{styles:U.disconnectButton,isEditButtonEnabled:D,navigateToScreen:A}):(0,W.jsx)(Re().Z,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,W.jsx)("div",{style:{width:240},children:(0,W.jsx)(S()._H,{...vn.tooltipText})}),render:e=>(0,W.jsx)(fn,{events:e,styles:U.disconnectButton,isEditButtonEnabled:D,navigateToScreen:()=>{}})}),D?(0,W.jsx)(_n,{styles:U.disconnectButton,isDisconnectButtonEnabled:D,navigateToScreen:A}):(0,W.jsx)(Re().Z,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,W.jsx)("div",{style:{width:240},children:(0,W.jsx)(S()._H,{...vn.tooltipText})}),render:e=>(0,W.jsx)(_n,{events:e,styles:U.disconnectButton,isDisconnectButtonEnabled:D,navigateToScreen:A})})]}),(0,W.jsx)(M().gq,{style:U.learnMoreSection,children:(0,W.jsx)(k().Z,{style:U.learnMoreButton,onClick:()=>{(0,T().j)({environment:f,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_learn_more_url_click",integration_type:"jira",setup_session_id:v.sessionId,from:v.analyticsFrom}}}),window.open(H,"_blank")},children:(0,W.jsxs)(M().gq,{style:U.learnMoreText,children:[(0,W.jsx)(S()._H,{...vn.learnMoreText}),(0,le().g)(U.externalLinkIcon)]})})})]})]})})}function fn(e){const{styles:n,events:t,isEditButtonEnabled:o,navigateToScreen:a}=e,r=(0,i().O7)(),l=(0,s().Kw)(m().Z);return(0,W.jsx)(te().Z,{...t,style:n,disabled:!o,onClick:()=>{(0,T().j)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_edit_projects_button",integration_type:"jira",setup_session_id:l.sessionId,from:l.analyticsFrom}}}),a("select_projects")},children:(0,W.jsx)(S()._H,{...vn.editProjectsButton})})}function _n(e){const{styles:n,events:t,isDisconnectButtonEnabled:o,navigateToScreen:a}=e,r=(0,i().O7)(),l=(0,s().Kw)(m().Z),c=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,s().VK)((()=>m().Z.state.jiraSyncState),[]);return(0,W.jsx)(K().Z,{...t,isGray:!0,style:n,disabled:!o,onClick:()=>{c&&((0,T().j)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_disconnect_button",integration_type:"jira",setup_session_id:l.sessionId,from:l.analyticsFrom}}}),a("disconnect_screen"))},children:(0,W.jsx)(S()._H,{...vn.disconnectJira})})}var yn=()=>t(950786);const jn=(0,S().vU)({primedTextInput:{id:"aiConnectors.microsoftTeams.primedTextInput",defaultMessage:"Search for messages in Microsoft Teams"}});function Sn(e){const{open:n}=e,t=(0,i().O7)(),s=(0,S().YB)(),a=(0,_().yK)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:16}})),[]),r=(0,o.useCallback)((()=>{d().j.setState({...d().j.state,currentScreen:"none"}),oe().assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"microsoft_teams_ai_connector_already_connected",primeTextInput:s.formatMessage(jn.primedTextInput)})}),[t,s]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>{d().j.reset()},open:n,render:()=>(0,W.jsxs)(M().Ht,{style:a.container,children:[(0,W.jsx)(B,{integrationLogoIcon:yn().W,title:(0,W.jsx)(S()._H,{id:"aiConnectors.microsoftTeams.alreadyConnected",defaultMessage:"Microsoft Teams is already connected to Notion AI"})}),(0,W.jsxs)(M().Ht,{gap:2,style:a.body,children:[(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"aiConnectors.microsoftTeams.microsoftTeamsConnectedDescription",defaultMessage:"You're fully set up."})}),(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"aiConnectors.microsoftTeams.tryIt",defaultMessage:"Try asking AI about your Microsoft Teams messages!"})})]}),(0,W.jsx)(te().Z,{style:a.tryItButton,onClick:r,children:(0,W.jsx)(S()._H,{id:"aiConnectors.microsoftTeams.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]})})}const Cn=(0,S().vU)({microsoftTeamsAIConnectorOauthPopupTitle:{defaultMessage:"Connect Microsoft Teams AI Connector",id:"microsoftTeamsAIConnector.oauthPopupTitle"}});function bn(){const e=(0,o.useMemo)((()=>$("microsoftTeams")),[]),n=(0,o.useMemo)((()=>X("microsoftTeams")),[]),t=(0,i().O7)(),[l,c]=(0,o.useState)("CLOSED"),u=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),p=(0,s().Kw)(d().j),h=(0,_().yK)((()=>({loadingWrapper:{padding:20,fontSize:12,fontWeight:C().Ue.regular,justifyContent:"center",gap:8,alignItems:"center"}})),[]),m=(0,Q().J)(),v=(0,O().y)(),x=(0,o.useCallback)((()=>{const e="https://notion.so";(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"learn_more_click_intro_modal",integration_type:"microsoft_teams",setup_session_id:d().j.state.sessionId,from:d().j.state.analyticsFrom}}}),t.device.isElectron?b().openExternalUrl(e):window.open(e,"_blank")}),[t]),f=(0,o.useCallback)((async()=>{if(!u)return;const e=await r().callApi({eventName:"getAIConnectorAuthorizationUrl",environment:t,data:{connector:"microsoftTeams",authorizationType:"workspace",spaceId:u,sessionId:d().j.state.sessionId,client:t.device.isElectron?"desktop":"web"}});if("success"!==e.type)return;const n=e.data.authorizationUrl;t.device.isElectron?b().openExternalUrl(n):G().M(t,{width:800,height:600,url:n,titleMessage:Cn.microsoftTeamsAIConnectorOauthPopupTitle}),d().j.setState({...d().j.state,currentScreen:"connecting"})}),[u,t]),[y]=(0,a().r5)((async()=>{if(!u||"introduction"!==p.currentScreen)return;if(p.microsoftTenantId)return{isMicrosoftTeamsConnected:!0};const e=await r().callApi({eventName:"getMicrosoftTeamsAIConnectorStatus",environment:t,data:{spaceId:u}});return"success"===e.type?{isMicrosoftTeamsConnected:e.data.isConnected}:void 0}),[t,p.currentScreen,p.microsoftTenantId,u]);(0,o.useEffect)((()=>{"introduction"===p.currentScreen?"resolved"===y.status?c("OPEN"):c("LOADING"):c("CLOSED")}),[y.status,p.currentScreen]);const j=(0,o.useRef)(!1),k=(0,o.useCallback)((()=>{d().j.reset(),(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_microsoft_teams_intro_modal",integration_type:"microsoft_teams",setup_session_id:d().j.state.sessionId,from:d().j.state.analyticsFrom}}}),j.current=!1}),[t]),w=(0,o.useCallback)((async()=>{await f(),(0,T().j)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"microsoft_teams_ai_connector_auth_url_open",integration_type:"microsoft_teams",setup_session_id:d().j.state.sessionId,from:d().j.state.analyticsFrom}}}),d().j.setState({...d().j.state,currentScreen:"connecting"})}),[t,f]);return(0,o.useEffect)((()=>{u&&m&&"resolved"===y.status&&"introduction"===p.currentScreen&&(j.current||((0,T().j)({environment:t,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"microsoft_teams",setup_session_id:p.sessionId,from:p.analyticsFrom,is_space_admin:m,is_ai_eligible:v}}}),j.current=!0))}),[u,t,y.status,p.sessionId,p.analyticsFrom,m,v,p.currentScreen]),u&&"CLOSED"!==l?t.device.isMobile?(0,W.jsx)(ee,{logo:yn().W,appName:"Microsoft Teams",open:"introduction"===p.currentScreen,onClosed:()=>{d().j.reset()},learnMoreUrl:"https://notion.so"}):"LOADING"===l?(0,W.jsx)(I().Z,{open:"LOADING"===l,render:()=>(0,W.jsxs)(M().gq,{style:h.loadingWrapper,children:[(0,W.jsx)(S()._H,{id:"universalQna.microsoftTeams.isFetchingConnection",defaultMessage:"Getting connection status"}),(0,W.jsx)(V().Z,{})]})}):p.isConnected?(0,W.jsx)(Sn,{open:!0}):m?(0,W.jsx)(L,{onConnect:w,onDismiss:k,onLearnMore:x,title:e,integrationIcon:yn().W,notes:n,open:"OPEN"===l,titleWidth:210}):(0,W.jsx)("span",{}):(0,W.jsx)("span",{})}var kn=()=>t(732811),wn=()=>t(255393),In=()=>t(979614),Mn=()=>t(559155),Tn=()=>t(447832),Hn=()=>t(779300),Dn=()=>t(729775),An=()=>t(916095),Un=()=>t(110372),Wn=()=>t(838266),Bn=()=>t(965014),Nn=()=>t(714230),Fn=()=>t(640869),Zn=()=>t(140033),Kn=()=>t(319427),Pn=()=>t(442531),Ln=()=>t(677559),qn=()=>t(4503),zn=()=>t(403161);const Gn=(0,S().vU)({userMessage:{defaultMessage:"What’s the latest on project Polar Bear?",id:"slack.announcement.animation.userMessage"},aiResponse:{defaultMessage:"The team is working on app store listings.<numberCitation></numberCitation><slackCitation></slackCitation>",id:"slack.announcement.animation.aiResponse"},sourcesTitle:{defaultMessage:"2 sources found",id:"slack.announcement.animation.sourcesTitle"},sourceOne:{defaultMessage:"App Stores",id:"slack.announcement.animation.sourceOne"},sourceTwo:{defaultMessage:"Thread in #mobile-team",id:"slack.announcement.animation.sourceTwo"}}),Vn={y:50,maxHeight:0,opacity:0},Qn={y:0,maxHeight:90,opacity:1},On={type:"spring",duration:.62,bounce:.26},En=[0,.03,.2,.22,.35];function Rn(){const[e,n]=(0,o.useState)(0);(0,o.useEffect)((()=>{let e=0;const t=setInterval((()=>{e+=1,n(e),e>=4&&clearInterval(t)}),1500);return()=>clearInterval(t)}),[]);const t=(0,_().Fg)(),i="dark"===t.mode,s=(0,_().yK)((e=>({wrapper:{minHeight:"275px",width:"100%",maxWidth:420,backgroundColor:e.accentColors.gray[50],paddingLeft:20,paddingRight:20,display:"flex",alignItems:"center",overflow:"hidden"},innerWrapper:{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center",gap:12,width:"100%"},userMessageWrapper:{marginTop:24,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"max-content",padding:"8px 16px",backgroundColor:e.accentColors.gray[100],color:e.text.secondary,borderRadius:16,alignSelf:"end",fontWeight:C().Ue.medium,fontSize:C().JB.UIRegular.desktop},aiMessageWrapper:{alignSelf:"start",marginRight:24,alignItems:"center",justifyContent:"center",padding:"8px 16px",backgroundColor:i?e.accentColors.gray[100]:"white",boxShadow:e.shadowXS,color:e.text.primary,borderRadius:16,fontWeight:C().Ue.medium,fontSize:C().JB.UIRegular.desktop},citationTitleWrapper:{display:"flex",fontSize:C().JB.UISmall.desktop,fontWeight:C().Ue.medium,color:e.text.secondary,paddingLeft:16,marginTop:4,marginBottom:8},citationWrapper:{alignItems:"center",gap:6,display:"flex",fontSize:C().JB.UISmall.desktop,fontWeight:C().Ue.medium,paddingLeft:16,marginBottom:8},thinkingWrapper:{position:"absolute",paddingLeft:16},docsIcon:{color:e.accentColors.gray[500],width:16,height:16},slackCitationWrapper:{display:"inline-flex",flexWrap:"nowrap",width:"fit-content",whiteSpace:"nowrap",height:15,paddingRight:4,alignItems:"center",borderRadius:7,marginLeft:2,fontSize:10,gap:4,paddingLeft:5,background:e.accentColors.gray[300],color:"white",marginTop:1,cursor:"default",userSelect:"none"},slackCitationIcon:{marginLeft:-2,height:8,width:8,alignItems:"center",color:"white"},cursor:{width:24,height:24,position:"absolute",borderRadius:16,fill:"white"}})),[i]),{value:a}=(0,Ln().XJ)(Pn().io);if(!a)return null;const{AnimatePresence:r,motion:l}=a,c=(0,W.jsx)(l.div,{style:s.cursor,initial:{x:100,y:100,opacity:0},animate:{x:[100,8,8],y:[100,12,12],opacity:[0,1,1]},transition:{delay:2,duration:2,ease:"easeInOut"},children:(0,Fn()._)()}),d=(0,W.jsxs)(l.span,{initial:{background:t.accentColors.gray[300]},animate:{background:[t.accentColors.gray[300],t.accentColors.uiBlue[600],t.accentColors.uiBlue[600],t.accentColors.uiBlue[600],t.accentColors.uiBlue[600]],scale:[1,1.2,1.2,.9,1]},transition:{delay:3,duration:3,times:En},style:s.slackCitationWrapper,children:[(0,Zn().Q)(s.slackCitationIcon),2,c]}),g=(0,W.jsx)("span",{children:(0,W.jsx)(zn().gm,{number:1,isDeepFindUxActive:!1,style:{cursor:"default",userSelect:"none",background:t.accentColors.gray[300]}})});return(0,W.jsx)("div",{style:s.wrapper,children:(0,W.jsxs)(l.div,{style:s.innerWrapper,children:[(0,W.jsx)(r,{children:e>=0&&(0,W.jsx)(l.div,{initial:Vn,animate:Qn,transition:{...On,delay:.3},style:s.userMessageWrapper,children:(0,W.jsx)(S()._H,{...Gn.userMessage})},"userMessage")}),(0,W.jsxs)("div",{style:{position:"relative"},children:[(0,W.jsx)(r,{children:1===e&&(0,W.jsx)(l.div,{initial:Vn,animate:Qn,transition:On,exit:{opacity:0,maxHeight:0,y:-15},style:s.thinkingWrapper,children:(0,W.jsx)(qn().Q,{})},"aiThinking")}),(0,W.jsx)(r,{children:e>=2&&(0,W.jsx)(l.div,{initial:Vn,animate:Qn,transition:On,style:s.aiMessageWrapper,children:(0,W.jsx)(S()._H,{...Gn.aiResponse,values:{slackCitation:()=>d,numberCitation:()=>g}})},"aiResponse")})]}),(0,W.jsx)(r,{children:e>=3&&(0,W.jsxs)(l.div,{initial:Vn,animate:Qn,transition:On,children:[(0,W.jsx)("div",{style:s.citationTitleWrapper,children:(0,W.jsx)(S()._H,{...Gn.sourcesTitle})}),(0,W.jsxs)("div",{style:s.citationWrapper,children:[(0,Kn().e)(s.docsIcon),(0,W.jsx)(S()._H,{...Gn.sourceOne})]}),(0,W.jsxs)("div",{style:s.citationWrapper,children:[(0,W.jsx)("img",{src:Nn().Z.images.externalIntegrations.slackIconPng,style:s.docsIcon,alt:"slack icon"}),(0,W.jsx)(S()._H,{...Gn.sourceTwo})]})]},"citations")})]})})}const Jn=(0,S().vU)({titleWithAddon:{defaultMessage:"Get Slack answers in Notion",id:"slackUniversalQnaAnnouncementModal.titleWithAddon"},titleWithoutAddon:{defaultMessage:"Instant answers across apps",id:"slackUniversalQnaAnnouncementModal.titleWithoutAddon"},subtitleForAnnouncement:{defaultMessage:"Summarize threads, get answers, find information from public channels, and more.",id:"slackUniversalQnaAnnouncementModal.subtitleForAnnouncement"},betaDisclaimer:{defaultMessage:"Beta availability and pricing are subject to change.",id:"slackUniversalQnaAnnouncementModal.betaDisclaimer"},ctaButtonLabelWithAddon:{defaultMessage:"Try now",id:"slackUniversalQnaAnnouncementModal.ctaButtonLabelWithAddon"},ctaButtonLabelWithoutAddon:{defaultMessage:"Get unlimited AI",id:"slackUniversalQnaAnnouncementModal.ctaButtonLabelWithoutAddon"},learnMoreLink:{defaultMessage:"Learn more",id:"slackUniversalQnaAnnouncementModal.learnMoreLink"}});function $n(){const e=(0,i().O7)(),n=(0,s().VK)((()=>Z().X.state.open&&"onboarding"===Z().X.state.modal),[]),t=(0,o.useCallback)((n=>{let{source:t}=n;const o=g().default.state.currentSpaceViewStore,i=g().default.state.currentSpaceStore;if(!o||!i)return;const s=(0,Mn().$_)(e,i.id);switch(Z().X.setState({...Z().X.state,open:!1}),t){case"ctaHasAddon":(0,l().navigateToSlackUniversalQnAOnboarding)({analyticsFrom:"slack_universal_qna_announcement_modal"});break;case"ctaNoAddon":s?(Wn().default.setState({...Wn().default.state,open:!0,openedFrom:"slack_universal_qna_announcement_modal",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}),In().sA(e,{from:"slack_universal_qna_announcement_modal"})):Bn().y(e,{from:"slack_universal_qna_announcement_modal",upsell:{type:"product",product:"ai",limit:{type:"none"}}})}}),[e]);return(0,W.jsx)(I().Z,{open:n,render:()=>(0,W.jsx)(Xn,{onDismiss:t})})}function Yn(){return(0,_().yK)((e=>({title:{fontWeight:C().Ue.bold,fontSize:25,display:"flex"},betaBadge:{marginLeft:0},modalContainer:{width:420},animationContainer:{display:"grid",placeItems:"center",backgroundColor:e.accentColors.gray[50]},mainContent:{display:"grid",padding:"24px",gap:6,justifyItems:"flex-start"},footer:{borderTop:`1px solid ${e.tableLightDividerColor}`,padding:"18px 24px",display:"flex",justifyContent:"space-between",gap:20},learnMoreCopy:{color:e.lightTextColor,fontSize:12,maxWidth:225},learnMoreLink:{display:"inline-grid",gridAutoFlow:"column",placeItems:"center",paddingLeft:2,marginLeft:-2,borderRadius:2},ctaButton:{padding:"6px 12px",borderRadius:8,whiteSpace:"nowrap"},gpt4:{whiteSpace:"nowrap"}})),[])}function Xn(e){const n=(0,s().VK)((()=>{var e;const n=(null===(e=v().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,wn().de)(n)}),[]),{onDismiss:t}=e,a=(0,i().O7)();(0,kn().K)((()=>{(0,T().j)({environment:a,event:{eventName:"ai_slack_universal_qna_announcement_modal_shown",eventProperties:{type:n?"discovery":"upsell"}}})}));const r=(0,o.useCallback)((()=>{Un().lZ(a,{callout_key:"ai_slack_ai_connector_announcement",click_type:"primary_cta",variant:n?"has_addon":"no_addon"}),t({source:n?"ctaHasAddon":"ctaNoAddon"})}),[t,a,n]),l=(0,o.useCallback)((()=>{Un().bl(a,{callout_key:"ai_slack_ai_connector_announcement",dismiss_type:"modal_dismiss_clicked",variant:n?"has_addon":"no_addon"}),t({source:"closeButton"})}),[t,a,n]),c=Yn();return(0,W.jsxs)("div",{style:c.modalContainer,children:[(0,W.jsx)(An().U4,{onDismiss:l}),(0,W.jsx)("div",{style:c.animationContainer,children:(0,W.jsx)(Rn,{})}),(0,W.jsxs)("div",{style:c.mainContent,children:[(0,W.jsx)(Tn().Z,{style:c.betaBadge}),(0,W.jsx)("div",{style:c.title,children:(0,W.jsx)(S()._H,{...n?Jn.titleWithAddon:Jn.titleWithoutAddon})}),(0,W.jsx)(P().Z,{isSecondaryColor:!0,isMultiline:!0,children:(0,W.jsx)(S()._H,{...Jn.subtitleForAnnouncement})})]}),(0,W.jsxs)("div",{style:c.footer,children:[(0,W.jsx)(et,{hasAiAddOn:n}),(0,W.jsx)(Hn().h,{onClick:r,styles:c.ctaButton,children:(0,W.jsx)(S()._H,{...n?Jn.ctaButtonLabelWithAddon:Jn.ctaButtonLabelWithoutAddon})})]})]})}function et(e){const{hasAiAddOn:n}=e,t=(0,i().O7)(),s=Yn(),a=(0,o.useCallback)((()=>{Un().lZ(t,{callout_key:"ai_slack_ai_connector_announcement",click_type:"learn_more",variant:n?"has_addon":"no_addon"})}),[t,n]);return(0,W.jsxs)("div",{style:s.learnMoreCopy,children:[(0,W.jsx)(S()._H,{...Jn.betaDisclaimer})," ",(0,W.jsxs)(Dn().Z,{onClick:a,style:s.learnMoreLink,href:(0,H().UY)("guides.aiConnectorSlack"),external:!0,inline:!0,children:[(0,W.jsx)(S()._H,{...Jn.learnMoreLink}),(0,y().K)({width:16,height:16})]})]})}var nt=()=>t(308186);const tt=(0,S().vU)({searchForAChannel:{id:"universalQnA.slack.searchForAChannel",defaultMessage:"Search for a Channel"}});function ot(){const[e,n]=o.useState(""),[t,a]=o.useState(!1),[l,c]=o.useState(!0),[d,u]=o.useState([]),h=(0,o.useRef)(!1),m=(0,i().O7)(),v=(0,s().VK)((()=>{var e;return null===(e=g().default.getState().currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),j=(0,s().Kw)(f().slackUniversalQnAConnectionStore),b=(0,o.useCallback)((()=>{const e=p().default.getConfigKey("ingestion","slack");window.open(null==e?void 0:e.learnMoreUrl,"_blank")}),[]),H=(0,s().VK)((()=>g().default.getState().currentUserStore),[]),A=(0,o.useCallback)((()=>{h.current=!1,a(!1),n(""),c(!0),u([])}),[]),U=(0,o.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0;try{const o=await r().callApi({eventName:"getSlackPublicChannels",environment:m,data:{spaceId:e,cursor:t}});if("success"===o.type){u((e=>(0,gn().mN)([...e,...o.data.channels],(e=>e.id))));const n=o.data.cursor;f().slackUniversalQnAConnectionStore.state.isEditing&&(c(!1),f().slackUniversalQnAConnectionStore.setState({...f().slackUniversalQnAConnectionStore.state,isEditing:!1})),n?U(e,0,n):a(!0)}else{if(n>=10)return;setTimeout((()=>{U(e,n+1,t)}),3e4)}}catch{if(n>=10)return;setTimeout((()=>{U(e,n+1,t)}),3e4)}}),[m]),N=(0,o.useCallback)((async()=>{var e;if(f().slackUniversalQnAConnectionStore.setState({...j,currentScreen:"confirmation"}),A(),!v)return;await r().callApi({eventName:"ingestSlackPublicData",environment:m,data:{spaceId:v,selection:j.selection,setupSessionId:j.sessionId}});const n=x().Z.state.appsConnectionData.filter((e=>e.id!==we().aP));x().Z.setState({...x().Z.state,appsConnectionData:[...n,{connectionStatus:"in_progress",connectionLastEditedTimestamp:Date.now(),connectionType:"slack",connectorEmail:(null==H?void 0:H.getEmail())||"",id:we().aP,connectorNotionId:null==H||null===(e=H.getModel())||void 0===e?void 0:e.id}]}),(0,T().j)({environment:m,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"confirm_slack_public_data_ingestion",integration_type:"slack",setup_session_id:j.sessionId,from:j.analyticsFrom}}})}),[H,m,A,j,v]);(0,D().W)((async()=>{if(!v)return;if(!v||h.current||"data-selection"!==j.currentScreen)return;if(j.isEditing)return h.current=!0,void U(v);const e=await r().callApi({eventName:"getConnectedAppsForUniversalQna",environment:m,data:{spaceId:v,sessionId:j.sessionId},headers:(0,be().Bb)({spaceId:v})});if("success"===e.type&&e.data.isError)f().slackUniversalQnAConnectionStore.setState({...j,currentScreen:"alreadyConnected"});else if("success"===e.type&&e.data.connectedApps.includes("slack-admin")){if(j.isSlackGridAiConnectorEnabled){const e=await r().callApi({eventName:"getUrlForGridSetup",environment:m,data:{spaceId:v}});return void("success"===e.type&&f().slackUniversalQnAConnectionStore.setState({...j,currentScreen:"confirmation",gridSetupUrl:e.data.url}))}c(!1),h.current=!0,U(v)}}),1e3,"data-selection"===j.currentScreen);const Z=function(e,n){return(0,_().yK)((t=>({wrapper:{width:400,display:"flex",flexDirection:"column",minHeight:e?void 0:530},logoSection:{padding:"20px 20px 9px 20px",gap:8,justifyContent:"center",alignItems:"center",height:84},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:t.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"},title:{fontSize:17,fontWeight:C().Ue.medium,lineHeight:"22px",marginBottom:"9px"},subtext:{fontSize:12,lineHeight:"14.52px",color:t.text.secondary},footer:{position:"absolute",width:"100%",justifySelf:"flex-end",boxShadow:"0px 9px 24px 0px #0F0F0F33",padding:"16px 20px 16px 20px",gap:12,bottom:0},connectButton:{fontSize:14,fontWeight:C().Ue.semibold,width:360},searchBarWrapper:{justifyContent:"center"},searchBar:{width:360,padding:4},selectionContainer:{marginTop:18,marginBottom:e?24:0,width:"100%",height:"100%",justifyContent:"center",padding:"0px 20px 0px"},selection:{width:"100%"},waitingForConnection:{fontSize:12,lineHeight:"16px",color:t.text.secondary},waitingForConnectionWrapper:{gap:4},tryAgainWrapper:{marginTop:16,gap:4},tryAgainSection:{gap:4,alignItems:"center",marginBottom:16,color:t.text.secondary},tryAgainText:{fontSize:14},channelItem:{gap:4,alignItems:"center"},channelsText:{fontSize:12,lineHeight:"16px"},divider:{marginTop:5,marginBottom:5},alertIcon:{width:16,height:16},tryAgainButton:{fontSize:12,width:80},futureChannelsCheckboxWrapper:{gap:4,visibility:e?"hidden":"visible"},loadingChannelsWrapper:{alignItems:"center",gap:8,fontSize:12,color:t.text.secondary,marginTop:8},selectionWrapper:{overflowY:"scroll",maxHeight:n?170:124},loadMoreButtonWrapper:{fontSize:12,paddingTop:8,paddingBottom:4},loadMoreButtonhoveredStyle:{background:"none"},channelItemWrapper:{marginTop:12},workspaceAdministratorHeading:{fontSize:14,fontWeight:C().Ue.regular,color:t.text.primary},orderedList:{paddingLeft:18,fontSize:14,fontWeight:C().Ue.regular,color:t.text.secondary},waitingForConnectionNote:{paddingBottom:4},note:{fontWeight:C().Ue.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:C().Ue.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:C().Ue.regular,color:t.text.secondary,fontSize:14,lineHeight:"18px"},learnMoreButton:{gap:4,alignItems:"center",fontSize:14,color:t.text.secondary,justifyContent:"center"},buttonContainer:{justifyContent:"center"},link:{color:t.text.secondary,textDecoration:"underline",cursor:"pointer"},loadingChannels:{color:t.text.secondary},loadingWrapper:{alignItems:"center",gap:4}})),[e,n])}(l,t),P=(0,o.useCallback)((e=>{const{selection:n}=j;return n.allSelected?!n.excludedChannels.includes(e):!!n.selectedChannels.includes(e)}),[j]),L=(0,o.useCallback)((()=>{const{selection:e}=j;return e.allSelected?!(e.excludedChannels.length>0)||"partial":e.selectedChannels.length>0&&"partial"}),[j]),q=(0,o.useCallback)((()=>{const{selection:e}=j;return!!e.allSelected||(!!e.joinFutureChannels||e.selectedChannels.length>0)}),[j]),z=(0,o.useCallback)((()=>[(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:Z.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.waitingForConnectionNoteHeading1",defaultMessage:"Slack should open automatically on a new tab."},"note1-1")}),(0,W.jsx)("div",{style:Z.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.waitingForConnectionNoteBody1",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,W.jsx)("a",{style:Z.link,href:j.authUrl,target:"_blank",children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,W.jsxs)(M().Ht,{style:{gap:4},children:[(0,W.jsx)("div",{style:Z.noteHeading,children:j.isSlackGridAiConnectorEnabled?(0,W.jsx)(S()._H,{id:"universalSearch.slack.grid.workspaceOrAdminHeading",defaultMessage:"If you are a Slack organization owner or administrator:"},"gridNote2-2"):(0,W.jsx)(S()._H,{id:"universalSearch.slack.workspaceAdminHeading",defaultMessage:"If you are a Slack workspace administrator:"},"note2-2")}),(0,W.jsx)("div",{style:Z.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.workspaceAdminBody",defaultMessage:"Follow Slack’s instructions to connect. Return to this window, and the process will continue automatically."},"note2-3")}),(0,W.jsxs)(M().Ht,{style:{marginTop:16,gap:4},children:[(0,W.jsx)("div",{style:Z.noteHeading,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.notWorkspaceAdminHeading",defaultMessage:"If you are not authorized to install external apps:"},"note2-4")}),(0,W.jsx)("div",{style:Z.noteBody,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.notWorkspaceAdminBody",defaultMessage:"Follow the instructions to request access to the connection. Then, revisit the connect menu to continue setup."},"note2-5")})]})]},"note-2")]),[j,Z]),G=(0,o.useCallback)((()=>j.isEditing?(0,W.jsxs)(M().gq,{style:Z.loadingWrapper,children:[(0,W.jsx)(V().Z,{}),(0,W.jsx)("div",{style:Z.loadingChannels,children:(0,W.jsx)(S()._H,{defaultMessage:"Loading channels",id:"slackChannelSelection.isLoadingChannels"})})]}):l?(0,W.jsxs)(M().Ht,{style:Z.waitingForConnectionWrapper,children:[z().map(((e,n)=>(0,W.jsxs)(M().gq,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,W.jsx)(w().Z,{number:n+1}),(0,W.jsx)("div",{style:Z.note,children:e})]},n))),(0,W.jsx)(M().gq,{style:Z.buttonContainer,children:(0,W.jsx)(k().Z,{style:{marginTop:16,width:120,borderRadius:6},onClick:b,children:(0,W.jsxs)(M().gq,{style:Z.learnMoreButton,children:[(0,W.jsx)(S()._H,{id:"universalSearch.slack.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,y().K)({width:16,height:16})]})})})]}):(0,W.jsxs)(M().Ht,{children:[(0,W.jsxs)(M().gq,{style:Z.channelItem,children:[(0,W.jsx)(Me().Z,{checked:L(),checkSize:10,size:14,onClick:()=>{(0,T().j)({environment:m,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:j.selection.allSelected?"all_channels_deselected":"all_channels_selected",integration_type:"slack",setup_session_id:j.sessionId,from:j.analyticsFrom}}}),f().slackUniversalQnAConnectionStore.setState({...j,selection:{...j.selection,allSelected:!j.selection.allSelected,selectedChannels:[],excludedChannels:[]}})}}),(0,W.jsx)("div",{style:Z.channelsText,children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.slackIngestion.allPublicChannels",defaultMessage:"All public channels"})})]}),(0,W.jsx)(Te().Z,{style:Z.divider,size:4}),(0,W.jsxs)(W.Fragment,{children:[t?(0,W.jsx)(W.Fragment,{}):(0,W.jsxs)(M().gq,{style:Z.loadingChannelsWrapper,children:[(0,W.jsx)(V().Z,{}),(0,W.jsxs)(M().Ht,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.slackIngestion.loadedXChannels",defaultMessage:"{channelsCount} channels loaded...",values:{channelsCount:d.length}})}),(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.slackIngestion.loading1000PerMinute",defaultMessage:"This can take one minute per every 1,000 public channels."})})]})]}),(0,W.jsx)(M().Ht,{style:Z.selectionWrapper,children:(e?d.filter((n=>n.name.includes(e))):d).map((e=>(0,W.jsxs)(M().gq,{gap:8,style:Z.channelItemWrapper,children:[(0,W.jsx)(Me().Z,{checked:P(e.id),onClick:()=>{const{selection:n}=j;(0,T().j)({environment:m,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:P(e.id)?"specific_channel_deselected":"specific_channel_selected",integration_type:"slack",setup_session_id:j.sessionId,from:j.analyticsFrom}}}),n.allSelected?n.excludedChannels.includes(e.id)?f().slackUniversalQnAConnectionStore.setState({...j,selection:{...n,excludedChannels:n.excludedChannels.filter((n=>n!==e.id))}}):f().slackUniversalQnAConnectionStore.setState({...j,selection:{...n,excludedChannels:n.excludedChannels.concat(e.id)}}):f().slackUniversalQnAConnectionStore.setState({...j,selection:{...n,allSelected:!1,selectedChannels:n.selectedChannels.includes(e.id)?n.selectedChannels.filter((n=>n!==e.id)):n.selectedChannels.concat(e.id),excludedChannels:[]}})},checkSize:10,size:14},`${e.id}-checkbox`),(0,W.jsx)("div",{style:Z.channelsText,children:`# ${e.name}`},`${e.id}-label`)]},e.id)))})]})]})),[j,l,Z,L,e,d,t,z,b,m,P]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:async()=>{const{accept:e}=await nt().gt({message:(0,W.jsx)(S()._H,{id:"universalQna.slackChannelSelection.closeConfirm",defaultMessage:"Are you sure you want to dismiss? You will lose all the progress you made."}),acceptLabel:(0,W.jsx)(S()._H,{id:"universalQna.slackChannelSelection.dismiss",defaultMessage:"Dismiss"})});e&&(f().slackUniversalQnAConnectionStore.reset(),A(),(0,T().j)({environment:m,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_slack_data_selection",integration_type:"slack",setup_session_id:j.sessionId,from:j.analyticsFrom}}}))},open:"data-selection"===j.currentScreen,render:()=>(0,W.jsxs)("div",{style:Z.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:F().P,title:!l||j.isEditing?(0,W.jsx)(S()._H,{id:"universalQnA.slack.channelSelectionScreenTitle",defaultMessage:"Select channels to connect"}):(0,W.jsx)(S()._H,{id:"universalQnA.slack.channelSelectionWaitingScreenTitle",defaultMessage:"Follow instructions from Slack in your browser"}),subtext:!l||j.isEditing?(0,W.jsx)(S()._H,{id:"universalQnA.slack.channelSelectionScreenSubtext",defaultMessage:"Connecting more Slack channels will give you more relevant and useful Notion AI responses"}):(0,W.jsx)(W.Fragment,{})}),l?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(He().Z,{capture:!0,allowEsc:!0,render:()=>(0,W.jsx)(Re().Z,{textWrap:!0,placement:pn().Placement.Top,render:t=>(0,W.jsx)("div",{...t,children:(0,W.jsx)(M().gq,{...t,style:Z.searchBarWrapper,children:(0,W.jsx)(un().Z,{id:"slackUniversalQnASearchBar",style:Z.searchBar,placeholder:de().Z.formatMessage(tt.searchForAChannel),value:e,onChange:e=>{n(e.target.value),(0,T().j)({environment:m,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"filter_slack_channels",integration_type:"slack",setup_session_id:j.sessionId,from:j.analyticsFrom}}})}},"slackUniversalQnASearchBar")})}),renderTooltip:()=>(0,W.jsx)("div",{style:{width:250},children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.searchBarTooltip",defaultMessage:"All channels may not have been searched. Full search will be available once all channels are loaded."})}),disableTooltip:t})}),(0,W.jsx)(M().gq,{style:Z.selectionContainer,children:(0,W.jsx)(M().Ht,{style:Z.selection,children:G()})}),!l&&(0,W.jsxs)(M().Ht,{style:Z.footer,children:[(0,W.jsxs)(M().gq,{style:Z.futureChannelsCheckboxWrapper,children:[(0,W.jsx)(Me().Z,{checked:j.selection.joinFutureChannels,checkSize:10,size:14,onClick:()=>{(0,T().j)({environment:m,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:j.selection.joinFutureChannels?"dont_join_future_channels":"join_future_channels",integration_type:"slack",setup_session_id:j.sessionId,from:j.analyticsFrom}}}),f().slackUniversalQnAConnectionStore.setState({...j,selection:{...j.selection,joinFutureChannels:!j.selection.joinFutureChannels}})}}),(0,W.jsx)("div",{style:Z.channelsText,children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.slackIngestion.allFuturePublicChannels",defaultMessage:"Add public channels created in future"})})]}),(0,W.jsx)(K().Z,{style:Z.connectButton,onClick:N,disabled:!q(),children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.connect",defaultMessage:"Connect"})})]})]})})}const it=function(){const e=(0,i().O7)(),n=(0,s().Kw)(f().slackUniversalQnAConnectionStore),t=(0,_().yK)((e=>({wrapper:{width:400},logoSection:{paddingTop:"40px",paddingBottom:"16px",gap:8,justifyContent:"center",alignItems:"center"},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",textAlign:"center"},title:{fontSize:17,fontWeight:C().Ue.medium,lineHeight:"22px",marginBottom:"24px"},nextStepsWrapper:{width:"100%",justifyContent:"center"},nextStepsContainer:{padding:"16px 24px",width:"100%",font:C().Gl.sans},nextStepsHeading:{fontWeight:C().Ue.semibold,fontSize:14,lineHeight:"18px",marginBottom:"14px"},note:{fontWeight:C().Ue.regular,fontSize:14,lineHeight:"18px",marginLeft:"8px"},notes:{marginLeft:"8px",marginTop:"6px",alignItems:"center",gap:10,font:C().Gl.sans,listStylePosition:"outside",paddingLeft:"16px"},footer:{justifyContent:"center",alignItems:"center",bottom:0,width:"100%",padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},goBackButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},learnMoreText:{fontWeight:C().Ue.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${e.text.secondary}`},externalLinkIcon:{width:16,height:16},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"}})),[]),a=(0,o.useCallback)((()=>{if(n.isSlackGridAiConnectorEnabled)return[(0,W.jsx)(S()._H,{id:"universalSearch.slack.grid.confirmModalNote1",defaultMessage:"Select your workspaces on your Slack Admin Dashboard"},"gridNote1"),(0,W.jsx)(S()._H,{id:"universalSearch.slack.grid.confirmModalNote2",defaultMessage:"Notion AI will connect to your channels. This can take up to 36 hours."},"gridNote2"),(0,W.jsx)(S()._H,{id:"universalSearch.slack.grid.confirmModalNote3",defaultMessage:" Notion AI will be ready to answer questions across Notion and Slack Grid."},"gridNote3")];return[(0,W.jsx)(S()._H,{id:"universalSearch.slack.confirmModalNote1",defaultMessage:"Notion AI will join all public channels in Slack"},"note1"),(0,W.jsx)(S()._H,{id:"universalSearch.slack.confirmModalNote2",defaultMessage:"Connecting your channels may take up to 36 hours."},"note2"),(0,W.jsx)(S()._H,{id:"universalSearch.slack.confirmModalNote3",defaultMessage:"Notion AI will be ready to answer questions across Notion and Slack knowledge."},"note3")]}),[n.isSlackGridAiConnectorEnabled]),r=(0,o.useCallback)((()=>{f().slackUniversalQnAConnectionStore.setState({...n,isPublicSync:!0,inProgress:!0,currentScreen:"none",ingestionProgress:1}),ce().oV({label:(0,W.jsx)(S()._H,{id:"slackIngestionConfirmModal.ingestion.acknowledge",defaultMessage:"Started syncing from Slack. This can take up to 36 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"slackIngestionConfirmModal.ingestion.startedMessageDismiss",defaultMessage:"Close"})})})}),[n]),l=(0,o.useCallback)((()=>{const t=n.gridSetupUrl;t&&((0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"slack_grid_select_workspaces_clicked",integration_type:"slack",setup_session_id:n.sessionId,from:n.analyticsFrom}}}),e.device.isElectron?b().openExternalUrl(t):window.open(t,"_blank"))}),[e,n.analyticsFrom,n.gridSetupUrl,n.sessionId]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>{f().slackUniversalQnAConnectionStore.reset(),(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"slack_got_it_modal_dismissed",integration_type:"slack",setup_session_id:n.sessionId,from:n.analyticsFrom}}})},open:"confirmation"===n.currentScreen,render:()=>(0,W.jsxs)("div",{style:t.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:F().P,title:n.isSlackGridAiConnectorEnabled?(0,W.jsx)(S()._H,{id:"universalSearch.slack.heresWhatToDoNext",defaultMessage:"Here's what to do next"}):(0,W.jsx)(S()._H,{id:"universalSearch.slack.confirmModalTitle",defaultMessage:"We're getting you set up"})}),(0,W.jsx)(M().gq,{style:t.nextStepsWrapper,children:(0,W.jsxs)("div",{style:t.nextStepsContainer,children:[(0,W.jsx)(M().gq,{style:{alignItems:"center"},children:(0,W.jsx)("div",{style:t.nextStepsHeading,children:n.isSlackGridAiConnectorEnabled?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(S()._H,{id:"universalSearch.confirm.whatHappensNext",defaultMessage:"What happens next"})})}),(0,W.jsx)(M().Ht,{gap:8,children:a().map(((e,n)=>(0,W.jsxs)(M().gq,{gap:8,style:{marginBottom:6},children:[(0,W.jsx)(w().Z,{number:n+1}),(0,W.jsx)("div",{style:t.note,children:e})]},n)))})]})}),(0,W.jsx)(M().Ht,{style:t.footer,children:n.isSlackGridAiConnectorEnabled?(0,W.jsx)(K().Z,{style:t.connectButton,onClick:l,children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.girdConfirmIngestion",defaultMessage:"Select Slack workspaces"})}):(0,W.jsx)(K().Z,{style:t.connectButton,onClick:r,children:(0,W.jsx)(S()._H,{id:"universalSearch.integration.confirmIngestion",defaultMessage:"Got it"})})})]})})};const st=function(){const e=(0,s().Kw)(f().slackUniversalQnAConnectionStore),[n,t]=(0,o.useState)(!1),l=(0,i().O7)(),c=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),[d,u]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!0),[v,y]=(0,o.useState)([]),[j,w]=(0,o.useState)(!1);(0,a().r5)((async()=>{if(!c||"settings"!==e.currentScreen)return;m(!0);const n=await r().callApi({eventName:"getIngestedSlackChannels",environment:l,data:{spaceId:c}});"success"===n.type&&(m(!1),y(n.data.channels))}),[l,e.currentScreen,c]);const H=(0,o.useCallback)((()=>{const e=p().default.getConfigKey("ingestion","slack"),n=null==e?void 0:e.learnMoreUrl;n&&window.open(n,"_blank")}),[]),D=(0,o.useCallback)((()=>{f().slackUniversalQnAConnectionStore.reset()}),[]),A=(0,o.useCallback)((()=>{t(!1)}),[]),U=(0,o.useCallback)((async()=>{if(!c)return;u(!0);if("success"===(await r().callApi({eventName:"disconnectSlackIngestion",environment:l,data:{spaceId:c,disconnectForWorkspace:!0,disconnectReason:"admin_disconnect"}})).type){var e;f().slackUniversalQnAConnectionStore.setState({...f().slackUniversalQnAConnectionStore.state,isDisconnecting:!0});const n=x().Z.state.appsConnectionData.filter((e=>e.id!==we().aP)),o=g().default.state.currentUserStore;x().Z.setState({...x().Z.state,appsConnectionData:[...n,{connectionStatus:"disconnecting",connectionLastEditedTimestamp:Date.now(),connectionType:"slack",connectorEmail:(null==o?void 0:o.getEmail())||"",id:we().aP,connectorNotionId:null==o||null===(e=o.getModel())||void 0===e?void 0:e.id}]}),ce().oV({label:(0,W.jsx)(S()._H,{id:"slackIngestionConfirmModal.ingestion.acknowledgeDisconnect",defaultMessage:"Started disconnecting Slack. This can take up to 3 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"slackIngestionConfirmModal.ingestion.dismissAcknowledgeDisconnect",defaultMessage:"Close"})})}),t(!1),f().slackUniversalQnAConnectionStore.reset()}else u(!1),ce().oV({label:(0,W.jsx)(S()._H,{id:"slackIngestionConfirmModal.ingestion.disconnectError",defaultMessage:"Failed to disconnect Slack. Please try again later."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,W.jsx)(k().Z,{onClick:ce().rN,children:(0,W.jsx)(S()._H,{id:"slackIngestionConfirmModal.ingestion.closeSnackbarError",defaultMessage:"Close"})})})}),[l,c]),N=(0,_().yK)((e=>({wrapper:{width:400},channelDetailsContainer:{width:352,fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary},channelDetailsSubtitle:{textAlign:"center",marginBottom:"16px"},channelDetailsWrapper:{justifyContent:"center",paddingTop:"12px",paddingBottom:"12px"},channelNamesContainer:{gap:2,color:e.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",padding:"20px 20px 20px 20px",gap:8},disconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},moreChannelsContainer:{paddingTop:8},learnMoreButton:{fontSize:14,fontWeight:C().Ue.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:C().Ue.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${e.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:C().Ue.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:C().Ue.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:C().Ue.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,paddingBottom:40,justifyContent:"center",alignItems:"center"},editChannelsButton:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"}})),[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:A,open:n,render:()=>(0,W.jsx)("div",{style:N.confirmWrapper,children:(0,W.jsxs)("div",{style:N.confirmContainer,children:[(0,W.jsx)("div",{style:N.confirmModalTitle,children:(0,W.jsx)(S()._H,{id:"slackIngestionSettings.confirmation.title",defaultMessage:"Are your sure?"})}),(0,W.jsx)("div",{style:N.confirmModalSubTitle,children:(0,W.jsx)(S()._H,{id:"slackIngestionSettings.confirmation.subTitle",defaultMessage:"Your Slack data will be permanently deleted from Notion."})}),(0,W.jsx)("div",{style:N.confirmModalDescription,children:(0,W.jsx)(S()._H,{id:"slackIngestionSettings.confirmation.description",defaultMessage:"This process can take up to 3 hours, and you’ll only be able to reconnect after disconnecting is complete."})}),(0,W.jsxs)(M().Ht,{style:N.confirmModalActionButtons,children:[(0,W.jsx)(K().Z,{isRed:!0,style:N.confirmDisconnectButton,disabled:d,onClick:U,children:(0,W.jsx)(S()._H,{id:"slackIngestion.confirmDisconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"})}),(0,W.jsx)(k().Z,{style:N.goBackButton,onClick:A,children:(0,W.jsx)(S()._H,{id:"slackIngestion.confirmDisconnectModal.goBack",defaultMessage:"Go back"})})]})]})})}),(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:D,open:"settings"===e.currentScreen,render:()=>(0,W.jsxs)("div",{style:N.wrapper,children:[(0,W.jsx)(B,{integrationLogoIcon:F().P,title:(0,W.jsx)(S()._H,{id:"universalSearch.slack.settingsModalTitle",defaultMessage:"Slack is connected to Notion AI"}),subtext:h||e.isSlackGridAiConnectorEnabled?void 0:(0,W.jsx)(S()._H,{id:"universalSearch.slackIngestion.settingsModal.canAnswerFrom",defaultMessage:"Notion AI can answer questions about {channelsCount} public channels in Slack.",values:{channelsCount:v.length}})}),h?(0,W.jsx)(M().gq,{style:N.spinner,children:(0,W.jsx)(V().Z,{})}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(M().gq,{style:N.channelDetailsWrapper,children:e.isSlackGridAiConnectorEnabled?(0,W.jsx)(M().Ht,{style:N.channelDetailsContainer,children:(0,W.jsx)(S()._H,{id:"slackSettings.grid.note",defaultMessage:"This Notion workspace is connected to Slack Enterprise Grid. Settings can be only configured in the Slack Admin Dashboard."})}):(0,W.jsxs)(M().Ht,{style:N.channelDetailsContainer,children:[(0,W.jsx)(M().Ht,{style:N.channelNamesContainer,children:v.slice(0,4).map((e=>(0,W.jsx)("div",{children:`# ${e}`},e)))}),v.length-4>0?(0,W.jsx)(M().gq,{style:N.moreChannelsContainer,children:(0,W.jsx)(S()._H,{id:"universalSearch.slackIngestion.settingsModal.moreChannels",defaultMessage:"{moreChannelsCount} more",values:{moreChannelsCount:v.length-4}})}):(0,W.jsx)(W.Fragment,{})]})}),(0,W.jsxs)(M().Ht,{style:N.footer,children:[(0,W.jsx)(te().Z,{disabled:j,style:N.editChannelsButton,onClick:async()=>{if(!c)return;if(e.isSlackGridAiConnectorEnabled){w(!0);const e=await r().callApi({eventName:"getUrlForGridSetup",environment:l,data:{spaceId:c}});return"success"===e.type&&(l.device.isElectron?b().openExternalUrl(e.data.url):window.open(e.data.url,"_blank")),void w(!1)}w(!0);const n=await r().callApi({eventName:"getIngestionOptions",environment:l,data:{spaceId:c}});"success"===n.type&&((0,T().j)({environment:l,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_channels",integration_type:"slack",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),f().slackUniversalQnAConnectionStore.setState({...e,currentScreen:"data-selection",selection:{allSelected:n.data.selection.allSelected,selectedChannels:n.data.selection.selectedChannels,excludedChannels:n.data.selection.excludedChannels,joinFutureChannels:n.data.selection.joinFutureChannels},isEditing:!0})),w(!1)},children:j?(0,W.jsxs)(M().gq,{style:{alignItems:"center",gap:4,fontWeight:C().Ue.regular},children:[(0,W.jsx)(V().Z,{}),(0,W.jsx)(S()._H,{id:"slackUniversalSearch.integration.loadingPreviousSelection",defaultMessage:"Loading previous selection"})]}):e.isSlackGridAiConnectorEnabled?(0,W.jsx)(S()._H,{id:"slackUniversalSearch.integration.editTeams",defaultMessage:"Edit settings"}):(0,W.jsx)(S()._H,{id:"slackUniversalSearch.integration.editChannels",defaultMessage:"Edit channels"})}),(0,W.jsx)(K().Z,{isGray:!0,style:N.disconnectButton,onClick:()=>{t(!0)},children:(0,W.jsx)(S()._H,{id:"slackUniversalSearch.integration.disconnectSlack",defaultMessage:"Disconnect"})}),(0,W.jsx)(k().Z,{style:N.learnMoreButton,onClick:H,children:(0,W.jsxs)(M().gq,{style:N.learnMoreText,children:[(0,W.jsx)(S()._H,{id:"universalSearch.integration.learnMore",defaultMessage:"Learn more"}),(0,le().g)(N.externalLinkIcon)]})})]})]})]})})]})};var at=()=>t(345918);function rt(e){const{open:n}=e,t=(0,_().yK)((()=>({loadingWrapper:{padding:20,fontSize:C().JB.UISmall.desktop,fontWeight:C().Ue.regular,justifyContent:"center",gap:8,alignItems:"center"}})),[]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,open:n,render:()=>(0,W.jsxs)(M().gq,{style:t.loadingWrapper,children:[(0,W.jsx)(S()._H,{id:"aiConnectors.common.isFetchingConnection",defaultMessage:"Getting connection status"}),(0,W.jsx)(V().Z,{})]})})}var lt=()=>t(295425);function ct(e){const{open:n}=e,t=(0,i().O7)(),s=(0,S().YB)(),a=(0,_().yK)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:16}})),[]),r=(0,o.useCallback)((()=>{f().slackUniversalQnAConnectionStore.setState({...f().slackUniversalQnAConnectionStore.state,currentScreen:"none"}),oe().assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"slack_already_connected",primeTextInput:s.formatMessage(lt().tR.primedTextInput)})}),[t,s]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>{f().slackUniversalQnAConnectionStore.reset()},open:n,render:()=>(0,W.jsxs)(M().Ht,{style:a.container,children:[(0,W.jsx)(B,{integrationLogoIcon:F().P,title:(0,W.jsx)(S()._H,{id:"universalQna.slack.alreadyConnected",defaultMessage:"Slack is already connected to Notion AI"})}),(0,W.jsxs)(M().Ht,{gap:2,style:a.body,children:[(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalQna.slack.slackConnectedDescription",defaultMessage:"You're fully set up."})}),(0,W.jsx)("div",{children:(0,W.jsx)(S()._H,{id:"universalQna.slack.tryIt",defaultMessage:"Try asking AI about public Slack conversations!"})})]}),(0,W.jsx)(te().Z,{style:a.tryItButton,onClick:r,children:(0,W.jsx)(S()._H,{id:"universalQna.slack.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]})})}const dt=(0,S().vU)({slackUniversalSearchOauthPopupTitle:{id:"universalSearch.slack.slackOauthPopupTitle",defaultMessage:"Authenticate Slack"}});function gt(){var e;const n=(0,o.useMemo)((()=>$("slack")),[]),t=(0,o.useMemo)((()=>X("slack")),[]),l=(0,o.useMemo)((()=>Y("slack")),[]),c=(0,i().O7)(),d=(0,O().y)(),h=(0,s().VK)((()=>u().KR.state.isAiEnabled()),[]),m=(0,s().VK)((()=>g().default.state.currentSpaceStore),[]),v=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),x=(0,s().Kw)(f().slackUniversalQnAConnectionStore),_=(0,s().VK)((()=>p().default.getConfigKey("ingestion","slack").learnMoreUrl),[]),[y]=(0,a().r5)((async()=>{if(!v||"introduction"!==x.currentScreen)return;const e=await r().callApi({eventName:"getConnectedAppsForUniversalQna",environment:c,data:{spaceId:v},headers:(0,be().Bb)({spaceId:v})});return"success"===e.type?{isPublicConnected:e.data.connectedApps.includes("slack-admin")}:void 0}),[c,x.currentScreen,v]),j=(0,s().VK)((()=>m&&(0,at().j9)(m)),[m]),S=(0,Q().J)(),C=!m||!v||(null===(e=y.value)||void 0===e?void 0:e.isPublicConnected)||!h||!j,k="resolved"===y.status&&"introduction"===x.currentScreen,w=S?"proceed_to_slack_data_selection":"contact_workspace_owners";(0,o.useEffect)((()=>{!C&&k&&(S?(0,T().j)({environment:c,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"slack",setup_session_id:x.sessionId,from:x.analyticsFrom,is_space_admin:S,is_ai_eligible:d}}}):(0,T().j)({environment:c,event:{eventName:"universal_qna_request_modal_open",eventProperties:{integration_type:"slack",from:x.analyticsFrom,is_ai_eligible:d}}}))}),[c,C,x.sessionId,x.analyticsFrom,k,S,d]);const I=(0,o.useCallback)((()=>{f().slackUniversalQnAConnectionStore.reset(),(0,T().j)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_slack_intro_modal",integration_type:"slack",setup_session_id:x.sessionId,from:x.analyticsFrom}}})}),[c,x]);if(!v)return(0,W.jsx)(W.Fragment,{});if(!c.device.isMobile&&C){var M;const e=Boolean(null===(M=y.value)||void 0===M?void 0:M.isPublicConnected);return e?(0,W.jsx)(ct,{open:k&&e}):(0,W.jsx)(W.Fragment,{})}return c.device.isMobile?(0,W.jsx)(ee,{logo:F().P,appName:"Slack",open:"introduction"===x.currentScreen,onClosed:()=>{f().slackUniversalQnAConnectionStore.reset()},learnMoreUrl:_}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(rt,{open:"introduction"===x.currentScreen&&"resolved"!==y.status}),S?(0,W.jsx)(L,{onConnect:async()=>{if(!d)return(0,T().j)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"show_purchase_ai",integration_type:"slack",setup_session_id:x.sessionId,from:x.analyticsFrom}}}),z().r$({openedFrom:"slack_qna_intro_modal",currentTab:"plans"}),void f().slackUniversalQnAConnectionStore.reset();f().slackUniversalQnAConnectionStore.setState({...f().slackUniversalQnAConnectionStore.state,currentScreen:"data-selection"});const e=await r().callApi({eventName:"getSlackIngestionAuthorizeUrl",environment:c,data:{spaceId:v,isAdminAuth:!0,isDesktopApp:c.device.isElectron,sessionId:x.sessionId}});"success"===e.type&&(f().slackUniversalQnAConnectionStore.setState({...f().slackUniversalQnAConnectionStore.state,authUrl:e.data.url}),c.device.isElectron?b().openExternalUrl(e.data.url):await G().M(c,{width:800,height:600,url:e.data.url,titleMessage:dt.slackUniversalSearchOauthPopupTitle}),(0,T().j)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:w,integration_type:"slack",setup_session_id:x.sessionId,from:x.analyticsFrom}}}))},onDismiss:I,onLearnMore:()=>{window.open(_,"_blank")},title:n,integrationIcon:F().P,titleWidth:210,notes:t,open:k}):(0,W.jsx)(ne,{onConnect:()=>{f().slackUniversalQnAConnectionStore.reset(),(0,T().j)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:w,integration_type:"slack",setup_session_id:x.sessionId,from:x.analyticsFrom}}}),z().r$({openedFrom:"slack_connect_nonadmin_modal",currentTab:"members"})},message:l,integrationIcon:F().P,onDismiss:I,open:k})]})}const ut=function(){const e=(0,i().O7)(),n=(0,s().Kw)(f().slackUniversalQnAConnectionStore),t=(0,_().yK)((e=>({wrapper:{width:400,padding:24},logoSection:{paddingTop:"40px",paddingBottom:"16px",gap:8,justifyContent:"center",alignItems:"center"},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",textAlign:"center"},title:{fontSize:17,fontWeight:C().Ue.medium,lineHeight:"22px",marginBottom:"24px",textWrap:"balance"},nextStepsWrapper:{width:"100%",justifyContent:"center",color:e.text.secondary},footer:{justifyContent:"center",alignItems:"center",bottom:0,width:"100%",gap:12,marginTop:12},gotIt:{fontSize:14,fontWeight:C().Ue.medium,width:"100%"},pickAnother:{fontSize:14,fontWeight:C().Ue.medium,width:"100%",textAlign:"center"}})),[]),a=(0,o.useCallback)((()=>{f().slackUniversalQnAConnectionStore.reset()}),[]),r=(0,o.useCallback)((()=>{f().slackUniversalQnAConnectionStore.setState({...f().slackUniversalQnAConnectionStore.getInitialState(),currentScreen:"introduction"})}),[]);return(0,W.jsx)(I().Z,{showCloseIcon:!0,onDismiss:()=>{f().slackUniversalQnAConnectionStore.reset(),(0,T().j)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"slack_workspace_already_connected_modal_close",integration_type:"slack",setup_session_id:n.sessionId,from:n.analyticsFrom}}})},open:"alreadyConnected"===n.currentScreen,render:()=>(0,W.jsxs)("div",{style:t.wrapper,children:[(0,W.jsx)(M().gq,{style:t.logoSection,children:(0,je().t)({width:24,height:24})}),(0,W.jsx)(M().gq,{style:t.titleWrapper,children:(0,W.jsx)(M().gq,{style:t.title,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.workspaceAlreadyConnected",defaultMessage:"Slack is already connected to another Notion workspace"})})}),(0,W.jsx)(M().gq,{style:t.nextStepsWrapper,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.onlyOneWorkspaceCanBeConnected",defaultMessage:"Currently, Slack can be only connected to one workspace at a time"})}),(0,W.jsxs)(M().Ht,{style:t.footer,children:[(0,W.jsx)(te().Z,{style:t.gotIt,onClick:a,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.gotItOneWorkspaceConnected",defaultMessage:"Got it"})}),(0,W.jsx)(k().Z,{style:t.pickAnother,onClick:r,children:(0,W.jsx)(S()._H,{id:"universalSearch.slack.pickDifferentWorkspace",defaultMessage:"Pick a different Slack workspace"})})]})]})})};function pt(){const e=(0,s().VK)((()=>{var e;return((null===(e=v().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[]).map((e=>e.feature)).includes("ai")}),[]),n=(0,s().VK)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,i().O7)(),_=(0,s().Kw)(x().Z),y=(0,s().VK)((()=>u().KR.canUseUniversalGithubSearchScope()),[]),j=(0,s().VK)((()=>u().KR.isJiraQnaEnabled()),[]),S=(0,s().VK)((()=>u().KR.canUseMicrosoftTeamsSearchScope()),[]);return(0,a().r5)((async()=>{n&&j&&await(0,l().getJiraAIConnectionStatusAction)({environment:t,spaceId:n})}),[n,j,t]),(0,a().r5)((async()=>{var e,o;if(n&&("introduction"!==c().W.state.currentScreen&&c().W.reset(),y)){const i=await r().callApi({eventName:"getGithubAIConnectorStatus",environment:t,data:{spaceId:n}});"success"===i.type&&c().W.setState({...c().W.state,status:(e=i.data,null!==(o=e.githubOrg)&&void 0!==o&&o.isSyncComplete?"completed":e.isConnected?"in_progress":"not_started"),isConnected:i.data.isConnected,githubOrg:i.data.githubOrg,isPersonalAuthComplete:i.data.isPersonalAuthComplete,isDisconnecting:i.data.isDisconnecting})}}),[n,y,t]),(0,a().r5)((async()=>{if(!n||!S)return;"introduction"!==d().j.state.currentScreen&&d().j.reset();const e=await r().callApi({eventName:"getMicrosoftTeamsAIConnectorStatus",environment:t,data:{spaceId:n}});if("success"===e.type){const n=e.data.syncStatus,t=e.data.syncProgressPercentage,o=e.data.isConnected,i=o?"not_started"===n||"completed"===n?n:void 0===t?"not_started":100===t?"completed":t>0&&t<100?"in_progress":"authenticated":"unauthenticated";d().j.setState({...d().j.state,status:i,syncProgressPercentage:t??0,isConnected:o,isDisconnecting:e.data.isDisconnecting??!1,microsoftTenantId:e.data.microsoftTenantId})}}),[n,S,t]),(0,o.useEffect)((()=>{const{connectorTriggeringUpsell:n,upsellTriggeredAt:t}=_,o=p().default.getConfigKey("ingestion","upsellMaxDurationInSeconds")||36e5;if(e&&n&&t){if(Date.now()-t>o)return void x().Z.reset();switch(n){case"slack":f().slackUniversalQnAConnectionStore.setState({...f().slackUniversalQnAConnectionStore.state,currentScreen:"introduction"});break;case"google_drive":h().googleDriveConnectionStore.setState({...h().googleDriveConnectionStore.state,screenToShow:"info_screen"});break;case"microsoft_teams":d().j.setState({...d().j.state,currentScreen:"introduction"});break;case"jira":m().Z.setState({...m().Z.state,screenToShow:"info_screen"})}x().Z.reset()}}),[_,e]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)($n,{}),(0,W.jsx)(gt,{}),(0,W.jsx)(ot,{}),(0,W.jsx)(it,{}),(0,W.jsx)(st,{}),(0,W.jsx)(ut,{}),(0,W.jsx)(q,{}),(0,W.jsx)(Xe,{}),(0,W.jsx)(Ge,{}),(0,W.jsx)(Qe,{}),(0,W.jsx)(Oe,{}),(0,W.jsx)(Ye,{}),(0,W.jsx)(ze,{}),(0,W.jsx)(Fe,{}),(0,W.jsx)(ye,{}),(0,W.jsx)(Ce,{}),(0,W.jsx)(Be,{}),(0,W.jsx)(Pe,{}),y&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(re,{}),(0,W.jsx)(N,{}),(0,W.jsx)(ve,{}),(0,W.jsx)(ge,{})]}),j&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(dn,{}),(0,W.jsx)(on,{}),(0,W.jsx)(an,{}),(0,W.jsx)(ln,{}),(0,W.jsx)(xn,{}),(0,W.jsx)(tn,{}),(0,W.jsx)(mn,{}),(0,W.jsx)(cn,{})]}),S&&(0,W.jsx)(bn,{})]})}},681035:(e,n,t)=>{t.d(n,{S:()=>s});var o=()=>t(677559);const i=new(o().Ss)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([t.e(62743),t.e(37912)]).then(t.bind(t,682652));return{CollectionItemCover:e}})),s=(0,o().kF)(i,(e=>e.CollectionItemCover))},994875:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});class o extends(()=>t(263184))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},689271:(e,n,t)=>{t.d(n,{O:()=>i});t(667294);var o=t(785893);const i=(0,t(827282).IU)("arrowsLeftRight",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.7791 3.59799C13.9305 3.74539 14.004 3.9196 13.9998 4.1206C13.9998 4.32607 13.9263 4.50251 13.7791 4.64992L10.5317 8.0268C10.3888 8.1742 10.2269 8.24791 10.0462 8.24791C9.84861 8.24791 9.68676 8.1809 9.56065 8.0469C9.43874 7.91736 9.37779 7.74986 9.37779 7.54439C9.37779 7.34785 9.44295 7.18481 9.57326 7.05528L10.9227 5.66834L11.8937 4.77722L10.5506 4.83082L2.66857 4.83082C2.4752 4.83082 2.31546 4.76382 2.18935 4.62982C2.06323 4.49581 2.00018 4.32831 2.00018 4.1273C2.00018 3.91736 2.06323 3.74539 2.18935 3.61139C2.31546 3.48185 2.4752 3.41708 2.66857 3.41708L10.5506 3.41709L11.8937 3.47069L10.9227 2.57286L9.57326 1.19263C9.44295 1.05863 9.37779 0.893355 9.37779 0.696817C9.37779 0.491345 9.43874 0.323841 9.56065 0.194305C9.68676 0.0647681 9.84861 -1.81463e-07 10.0462 -1.72827e-07C10.2269 -1.64925e-07 10.3888 0.0737017 10.5317 0.221105L13.7791 3.59799ZM2.21457 12.4087C2.06744 12.2568 1.99597 12.0804 2.00018 11.8794C2.00018 11.6784 2.07164 11.5042 2.21457 11.3568L5.47459 7.9799C5.61331 7.8325 5.77516 7.75879 5.96012 7.75879C6.1577 7.75879 6.31744 7.82356 6.43935 7.9531C6.56126 8.0871 6.62222 8.25684 6.62222 8.46231C6.62222 8.65438 6.55916 8.81742 6.43305 8.95142L5.08364 10.3317L4.10626 11.2295L5.44937 11.1759L13.3314 11.1759C13.5248 11.1759 13.6845 11.2429 13.8107 11.3769C13.9368 11.5109 13.9998 11.6784 13.9998 11.8794C13.9998 12.0849 13.9368 12.2546 13.8107 12.3886C13.6845 12.5226 13.5248 12.5896 13.3314 12.5896L5.44937 12.5896L4.10626 12.536L5.08364 13.4338L6.43305 14.8141C6.55916 14.9436 6.62222 15.1066 6.62222 15.3032C6.62222 15.5087 6.56126 15.6762 6.43935 15.8057C6.31744 15.9352 6.1577 16 5.96012 16C5.77516 16 5.61331 15.9285 5.47459 15.7856L2.21457 12.4087Z"})})},29248:(e,n,t)=>{t.d(n,{K:()=>i});t(667294);var o=t(785893);const i=(0,t(827282).IU)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},242550:(e,n,t)=>{t.d(n,{A:()=>i});t(667294);var o=t(785893);const i=(0,t(827282).IU)("checkMarkLine",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M6.79297 13.2871C6.48047 13.2871 6.21484 13.1523 5.99609 12.8828L2.96094 9.14453C2.875 9.04297 2.8125 8.94336 2.77344 8.8457C2.73828 8.74805 2.7207 8.64648 2.7207 8.54102C2.7207 8.30664 2.79883 8.11328 2.95508 7.96094C3.11133 7.80859 3.30859 7.73242 3.54688 7.73242C3.81641 7.73242 4.04297 7.84766 4.22656 8.07812L6.76953 11.3008L11.7324 3.4375C11.834 3.28125 11.9395 3.17188 12.0488 3.10938C12.1582 3.04297 12.2949 3.00977 12.459 3.00977C12.6973 3.00977 12.8926 3.08398 13.0449 3.23242C13.1973 3.38086 13.2734 3.57031 13.2734 3.80078C13.2734 3.89453 13.2578 3.98828 13.2266 4.08203C13.1953 4.17578 13.1465 4.27344 13.0801 4.375L7.5957 12.8594C7.4082 13.1445 7.14062 13.2871 6.79297 13.2871Z"})})},640869:(e,n,t)=>{t.d(n,{_:()=>i});t(667294);var o=t(785893);const i=(0,t(827282).IU)("cursor",{viewBox:"0 0 21 22",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.11946 12.3088C3.83546 11.9498 3.49046 11.2158 2.87646 10.3248C2.52846 9.82078 1.66546 8.87178 1.40846 8.38978C1.18546 7.96378 1.20946 7.77278 1.26246 7.41978C1.35646 6.79178 2.00046 6.30278 2.68746 6.36878C3.20646 6.41778 3.64646 6.76078 4.04246 7.08478C4.28146 7.27978 4.57546 7.65878 4.75246 7.87278C4.91546 8.06878 4.95546 8.14978 5.12946 8.38178C5.35946 8.68878 5.43146 8.84078 5.34346 8.50278C5.27246 8.00678 5.15646 7.15978 4.98846 6.41078C4.86046 5.84278 4.82946 5.75378 4.70746 5.31778C4.57846 4.85378 4.51246 4.52878 4.39146 4.03678C4.30746 3.68878 4.15646 2.97778 4.11546 2.57778C4.05846 2.03078 4.02846 1.13878 4.37946 0.728782C4.65446 0.407782 5.28546 0.310782 5.67646 0.508782C6.18846 0.767782 6.47946 1.51178 6.61246 1.80878C6.85146 2.34278 6.99946 2.95978 7.12846 3.76978C7.29246 4.80078 7.59446 6.23178 7.60446 6.53278C7.62846 6.16378 7.53646 5.38678 7.60046 5.03278C7.65846 4.71178 7.92846 4.33878 8.26646 4.23778C8.55246 4.15278 8.88746 4.12178 9.18246 4.18278C9.49546 4.24678 9.82546 4.47078 9.94846 4.68178C10.3105 5.30578 10.3175 6.58078 10.3325 6.51278C10.4185 6.13678 10.4035 5.28378 10.6165 4.92878C10.7565 4.69478 11.1135 4.48378 11.3035 4.44978C11.5975 4.39778 11.9585 4.38178 12.2675 4.44178C12.5165 4.49078 12.8535 4.78678 12.9445 4.92878C13.1625 5.27278 13.2865 6.24578 13.3235 6.58678C13.3385 6.72778 13.3975 6.19478 13.6165 5.85078C14.0225 5.21178 15.4595 5.08778 15.5145 6.48978C15.5395 7.14378 15.5345 7.11378 15.5345 7.55378C15.5345 8.07078 15.5225 8.38178 15.4945 8.75578C15.4635 9.15578 15.3775 10.0598 15.2525 10.4978C15.1665 10.7988 14.8815 11.4758 14.6005 11.8818C14.6005 11.8818 13.5265 13.1318 13.4095 13.6948C13.2915 14.2568 13.3305 14.2608 13.3075 14.6598C13.2845 15.0578 13.4285 15.5818 13.4285 15.5818C13.4285 15.5818 12.6265 15.6858 12.1945 15.6168C11.8035 15.5538 11.3195 14.7758 11.1945 14.5378C11.0225 14.2098 10.6555 14.2728 10.5125 14.5148C10.2875 14.8978 9.80346 15.5848 9.46146 15.6278C8.79346 15.7118 7.40746 15.6588 6.32246 15.6478C6.32246 15.6478 6.50746 14.6368 6.09546 14.2898C5.79046 14.0308 5.26546 13.5058 4.95146 13.2298L4.11946 12.3088Z",fill:"white"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.11946 12.3088C3.83546 11.9498 3.49046 11.2158 2.87646 10.3248C2.52846 9.82078 1.66546 8.87178 1.40846 8.38978C1.18546 7.96378 1.20946 7.77278 1.26246 7.41978C1.35646 6.79178 2.00046 6.30278 2.68746 6.36878C3.20646 6.41778 3.64646 6.76078 4.04246 7.08478C4.28146 7.27978 4.57546 7.65878 4.75246 7.87278C4.91546 8.06878 4.95546 8.14978 5.12946 8.38178C5.35946 8.68878 5.43146 8.84078 5.34346 8.50278C5.27246 8.00678 5.15646 7.15978 4.98846 6.41078C4.86046 5.84278 4.82946 5.75378 4.70746 5.31778C4.57846 4.85378 4.51246 4.52878 4.39146 4.03678C4.30746 3.68878 4.15646 2.97778 4.11546 2.57778C4.05846 2.03078 4.02846 1.13878 4.37946 0.728782C4.65446 0.407782 5.28546 0.310782 5.67646 0.508782C6.18846 0.767782 6.47946 1.51178 6.61246 1.80878C6.85146 2.34278 6.99946 2.95978 7.12846 3.76978C7.29246 4.80078 7.59446 6.23178 7.60446 6.53278C7.62846 6.16378 7.53646 5.38678 7.60046 5.03278C7.65846 4.71178 7.92846 4.33878 8.26646 4.23778C8.55246 4.15278 8.88746 4.12178 9.18246 4.18278C9.49546 4.24678 9.82546 4.47078 9.94846 4.68178C10.3105 5.30578 10.3175 6.58078 10.3325 6.51278C10.4185 6.13678 10.4035 5.28378 10.6165 4.92878C10.7565 4.69478 11.1135 4.48378 11.3035 4.44978C11.5975 4.39778 11.9585 4.38178 12.2675 4.44178C12.5165 4.49078 12.8535 4.78678 12.9445 4.92878C13.1625 5.27278 13.2865 6.24578 13.3235 6.58678C13.3385 6.72778 13.3975 6.19478 13.6165 5.85078C14.0225 5.21178 15.4595 5.08778 15.5145 6.48978C15.5395 7.14378 15.5345 7.11378 15.5345 7.55378C15.5345 8.07078 15.5225 8.38178 15.4945 8.75578C15.4635 9.15578 15.3775 10.0598 15.2525 10.4978C15.1665 10.7988 14.8815 11.4758 14.6005 11.8818C14.6005 11.8818 13.5265 13.1318 13.4095 13.6948C13.2915 14.2568 13.3305 14.2608 13.3075 14.6598C13.2845 15.0578 13.4285 15.5818 13.4285 15.5818C13.4285 15.5818 12.6265 15.6858 12.1945 15.6168C11.8035 15.5538 11.3195 14.7758 11.1945 14.5378C11.0225 14.2098 10.6555 14.2728 10.5125 14.5148C10.2875 14.8978 9.80346 15.5848 9.46146 15.6278C8.79346 15.7118 7.40746 15.6588 6.32246 15.6478C6.32246 15.6478 6.50746 14.6368 6.09546 14.2898C5.79046 14.0308 5.26546 13.5058 4.95146 13.2298L4.11946 12.3088Z",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M12.3535 12.6641V9.20508",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round"}),(0,o.jsx)("path",{d:"M10.3383 12.6761L10.3223 9.20312",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round"}),(0,o.jsx)("path",{d:"M8.3418 9.23438L8.3628 12.6604",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round"})]})})},605305:(e,n,t)=>{t.d(n,{K:()=>i});t(667294);var o=t(785893);const i=(0,t(827282).IU)("externalLink",{viewBox:"0 0 17 16",svg:(0,o.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})},94250:(e,n,t)=>{t.d(n,{c:()=>i});t(667294);var o=t(785893);const i=(0,t(827282).IU)("eye",{viewBox:"0 0 32 32",svg:(0,o.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},269309:(e,n,t)=>{t.d(n,{A:()=>i});t(667294);var o=t(785893);const i=(0,t(827282).IU)("verified",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M18.125 10C18.125 8.73755 17.1875 7.69692 15.9719 7.52817C16.2875 7.10942 16.4781 6.59067 16.4781 6.02505C16.4781 4.6438 15.3594 3.52505 13.9781 3.52505C13.4125 3.52505 12.8938 3.71567 12.475 4.0313C12.3063 2.81567 11.2656 1.87817 10.0031 1.87817C8.74063 1.87817 7.70001 2.81567 7.53126 4.0313C7.11251 3.71567 6.59376 3.52505 6.02813 3.52505C4.64688 3.52505 3.52813 4.6438 3.52813 6.02505C3.52813 6.59067 3.71876 7.10942 4.03438 7.52817C2.81876 7.69692 1.88126 8.73755 1.88126 10C1.88126 11.2625 2.81876 12.3032 4.03438 12.4719C3.71876 12.8907 3.52813 13.4094 3.52813 13.975C3.52813 15.3563 4.64688 16.475 6.02813 16.475C6.59376 16.475 7.11251 16.2844 7.53126 15.9688C7.70001 17.1844 8.74063 18.1219 10.0031 18.1219C11.2656 18.1219 12.3063 17.1844 12.475 15.9688C12.8938 16.2844 13.4125 16.475 13.9781 16.475C15.3594 16.475 16.4781 15.3563 16.4781 13.975C16.4781 13.4094 16.2875 12.8907 15.9719 12.4719C17.1875 12.3032 18.125 11.2625 18.125 10ZM9.06251 13.8251L5.62501 10.3875L6.95001 9.06255L9.06251 11.175L13.3625 6.87505L14.6875 8.20005L9.06251 13.8251Z"})})}}]);