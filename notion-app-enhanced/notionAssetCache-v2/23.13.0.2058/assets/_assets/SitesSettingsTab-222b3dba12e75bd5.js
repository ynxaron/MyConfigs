"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[79582],{839821:(e,t,i)=>{i.d(t,{j:()=>p});var s=()=>i(685472),n=()=>i(774985),o=()=>i(308186),a=()=>i(421654),r=()=>i(762478),l=()=>i(269299),d=()=>i(109757);const c=1500,u=(0,i(788860).vU)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function p(e){let{environment:t,intl:i,store:s,rect:n}=e;r().$(t,{originGap:3,originRect:n,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:i.formatMessage(u.pageCover),onDelete:()=>{!function(e){let{environment:t,store:i}=e;r().Z(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{a().MF({store:i,transaction:e})}})}({environment:t,store:s})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:i,position:n}=e;g({environment:t,store:s,url:i,position:n})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:i.formatMessage(u.fileTypeCaption,{idealImageWidth:c}),onUpload:e=>{r().Z(),d().cT({environment:t,file:e[0],bucket:"secure",record:s.pointer,onStart:h,onProgress:f,onComplete:e=>{var i;i={environment:t,store:s,url:e},m({...i,position:.5})},onError:()=>{o().UW(i.formatMessage(u.uploadFailed))}})}},{type:"embed",title:i.formatMessage(u.embedTitle),inputPlaceholder:i.formatMessage(u.embedPlaceholder),caption:i.formatMessage(u.embedCaption),buttonText:i.formatMessage(u.embedSubmit),onChange:e=>{var i;i={environment:t,store:s,url:e},m({...i,position:.5}),r().Z()}},{type:"unsplash",onChange:e=>{let{url:i,position:n}=e;g({environment:t,store:s,url:i,position:n})}}]})}async function m(e){const{environment:t,store:i,url:o,position:r}=e,{serverCommitResult:d}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{a().fs({store:i,url:o,position:r||.5,transaction:e})}});await d,n().Z.state.loadingMode===s().NS&&n().Z.setState({loadingMode:s().EP,dataURL:n().Z.state.dataURL,uploadProgress:100})}function g(e){m(e),e.environment.device.isMobile&&r().Z()}function h(e){const{file:t,name:i,size:o}=e;if(r().Z(),n().Z.setState({loadingMode:s().SS,file:t,name:i,size:o}),t instanceof File&&t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{n().Z.state.loadingMode===s().SS&&n().Z.setState({...n().Z.state,uploadProgress:0,loadingMode:s().NS,dataURL:e.target.result})},e.readAsDataURL(t)}}function f(e){const{progressPercent:t}=e;n().Z.state.loadingMode===s().NS&&n().Z.setState({...n().Z.state,uploadProgress:t})}},681035:(e,t,i)=>{i.d(t,{S:()=>o});var s=()=>i(677559);const n=new(s().Ss)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([i.e(62743),i.e(37912)]).then(i.bind(i,682652));return{CollectionItemCover:e}})),o=(0,s().kF)(n,(e=>e.CollectionItemCover))},834758:(e,t,i)=>{i.d(t,{D7:()=>o,Ug:()=>n,vk:()=>a});var s=()=>i(677559);const n={publishSite:new(s().Ss)("PublishSite",(async()=>await Promise.all([i.e(39938),i.e(79289),i.e(18216),i.e(23006),i.e(63061)]).then(i.bind(i,760396)))),publishedSiteSettings:new(s().Ss)("PublishedSiteSettings",(async()=>await Promise.all([i.e(62743),i.e(52774),i.e(39938),i.e(37358),i.e(7312),i.e(31189),i.e(69343),i.e(2933),i.e(7678),i.e(52435),i.e(75066),i.e(37317),i.e(79289),i.e(41589),i.e(18216),i.e(23006),i.e(83837),i.e(78421)]).then(i.bind(i,367846))))},o=(0,s().kF)(n.publishedSiteSettings,(e=>e.default)),a=(0,s().kF)(n.publishSite,(e=>e.default))},266184:(e,t,i)=>{i.d(t,{Sl:()=>v,TA:()=>C,Zg:()=>x,a2:()=>w,eT:()=>j,mk:()=>S});i(821057),i(670560),i(267602),i(653476),i(667294);var s=()=>i(217465),n=()=>i(396136),o=()=>i(788860),a=()=>i(839002),r=()=>i(824462),l=()=>i(308186),d=()=>i(828946),c=()=>i(365872),u=()=>i(681832),p=()=>i(804217),m=()=>i(826955),g=()=>i(625820),h=()=>i(59864),f=()=>i(835374),b=i(785893);const y=50;function x(e){f().default.resetSitesForSpace(e.id)}async function S(e,t){const{spaceStore:i,currentUserId:o,limit:l}=t;if(!i.id)return;const[d]=await Promise.all([r().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:l||y,fetchPublishedMetadata:!0}}),(0,a().Vs)(1500)]);if("failed"===d.type)throw new Error("Failed to fetch published pages.");if(d.data.recordMap){const e=[],t=s().RecordMapWithRole.create(d.data.recordMap),a=d.data.publishedEdits;for(const{model:s}of t)if(s&&s.table===n().iU){const t=m().G.createChildStore(i,{table:n().iU,id:s.id}),o=a[t.id],r=o&&o.authors?o.authors[0]:void 0,l={publishedTime:null==o?void 0:o.timestamp,publishedBy:r};e.push({store:t,publishedMetadata:l})}let r=e;return o&&(r=h().S(e,o)),f().default.initializeSiteResultsForSpace(i.id,r),r}}async function v(e,t){const{spaceStore:i}=t,s=e.currentUser.id,n=await S(e,{spaceStore:i,currentUserId:s});return n?n.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===s})):[]}function C(e){c().lG(e),u().default.setState({...u().default.state,display:u().wV.Publish,tab:u().XF.Publish})}async function j(e){return new Promise(((t,i)=>{l().vC({message:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(o()._H,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(o()._H,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,b.jsx)(o()._H,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function w(e,t){if(!p().default.state.online)return[];const i=await d().x.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:g().Xv})}},666e3:(e,t,i)=>{i.d(t,{Z:()=>l});i(667294);var s=()=>i(142735),n=()=>i(846550),o=()=>i(707513),a=()=>i(663132),r=i(785893);function l(e){const{spaceStore:t,domainId:i,isRelative:l}=e,d=(0,s().VK)((()=>a().Co({spaceStore:t,domainId:i})),[t,i]),c=(0,n().yK)((e=>({tag:{width:"fit-content",maxWidth:"98%",paddingLeft:6,paddingRight:6,borderRadius:3,background:e.buttonHoveredBackground,...o().Yu},relativeUrl:{color:e.text.tertiary}})),[]);return(0,r.jsxs)("div",{style:c.tag,children:[d,l&&(0,r.jsx)("span",{style:c.relativeUrl,children:"/..."})]})}},865479:(e,t,i)=>{i.d(t,{Z:()=>x});var s=i(667294),n=()=>i(142735),o=()=>i(846550),a=()=>i(506347),r=()=>i(934935),l=()=>i(811977),d=()=>i(729775),c=()=>i(943620),u=()=>i(384241),p=()=>i(429725),m=()=>i(164079),g=()=>i(998901),h=i(785893);function f(e){let{store:t,...n}=e;const o=(0,s.useCallback)((e=>(0,h.jsx)(i(878517).E5,{store:t,events:e})),[t]);return(0,h.jsx)(i(654133).Z,{noStyle:!0,delayThreshold:400,placement:g().Placement.Bottom,alignment:g().Alignment.Start,renderTooltip:o,...n})}const b=s.memo(f);var y=()=>i(838266);function x(e){const{store:t,style:i,hideIcon:g}=e,f=(0,n().VK)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,p().Hu)({store:t,pageVisitSource:a().tY.SiteSettings})}}),[t]),x=(0,s.useCallback)((e=>{e.metaKey||y().default.setState({...y().default.state,open:!1})}),[]),S=(0,o().yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingRight:4,paddingLeft:4,...i},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[i]);if(!t||!f)return null;const v=(0,h.jsxs)("div",{style:S.pageRecordContainer,children:[!g&&(0,h.jsxs)("div",{style:S.iconContainer,children:[f.icon?(0,h.jsx)(c().Z,{icon:f.icon,store:t,disabled:!0,size:16,isEmptyPage:f.isEmptyPage,emojiSize:20}):(0,r().S)(S.emptyPageIcon),(0,l().Y)(S.linkIcon)]}),(0,h.jsx)(u().Z,{store:t,style:S.pageTitle})]});return(0,h.jsx)("div",{style:S.container,children:(0,h.jsx)(b,{store:t,render:e=>(0,h.jsx)(d().Z,{href:null==f?void 0:f.url,style:S.linkBox,...(0,m().Z)(e,{onClick:x}),children:v})})})}},113989:(e,t,i)=>{i.r(t),i.d(t,{SitesSettingsTab:()=>xe});var s=i(667294),n=()=>i(846550),o=()=>i(788860),a=()=>i(707513),r=()=>i(666414),l=()=>i(360964),d=()=>i(504117),c=()=>i(868614),u=()=>i(677559);const p=new(u().Ss)("SitesDomainsSection",(async()=>await Promise.all([i.e(89294),i.e(86707),i.e(15325),i.e(40226)]).then(i.bind(i,460573)))),m=(0,u().kF)(p,(e=>e.DomainsSection));var g=()=>i(148126),h=(i(670560),i(241792),()=>i(730120)),f=()=>i(219727),b=()=>i(142735),y=()=>i(646574),x=()=>i(721543),S=()=>i(456681),v=()=>i(154186),C=()=>i(668001),j=()=>i(654133),w=()=>i(67961),k=()=>i(239444),M=()=>i(378907),P=()=>i(772084),Z=()=>i(998901),I=()=>i(826955),U=()=>i(266184),A=()=>i(663132),T=()=>i(835374),B=()=>i(666e3),F=()=>i(865479),_=()=>i(159253),H=()=>i(448419),R=()=>i(1910),D=()=>i(921981),L=()=>i(314160),V=()=>i(836756),K=()=>i(506347),W=()=>i(168741),E=()=>i(155055),N=()=>i(959137),O=()=>i(827973),Y=()=>i(198829),z=()=>i(255577),$=()=>i(388284),G=()=>i(352230),X=()=>i(998470),q=()=>i(479875),J=i(785893);function Q(e){const{store:t,parent:i,isSettingsDisabled:s,onSettingsClick:o}=e,a=(0,f().O7)(),r=(0,n().yK)((()=>({actionIcon:{width:14,height:14}})),[]),l=[{key:"view",render:e=>(0,J.jsx)(ee,{...e,iconStyle:r.actionIcon}),action:()=>{X().wt({environment:a,store:t,pageVisitSource:K().tY.SiteSettings}),E().gV(a,{action:"view_site"}),i.close()}},{key:"copy",render:e=>(0,J.jsx)(te,{...e,iconStyle:r.actionIcon}),action:()=>{!async function(e,t){const i=q().$({store:t,pageVisitSource:K().tY.SiteSettings}),s=await N().F.clipboardActions.load();s.copyString({environment:e,stringValue:i,copiedMessage:s.clipboardMessages.copiedLinkToClipboard})}(a,t),E().gV(a,{action:"copy_site_link"}),i.close()}}],d={key:"settings",render:e=>(0,J.jsx)(ie,{...e,iconStyle:r.actionIcon,disabled:s}),action:()=>{o(t.id),E().gV(a,{action:"configure_site"}),i.close()}};return(0,J.jsx)(Y().Z,{menuType:G().o.Popup,width:160,children:(0,J.jsx)(z().ZP,{initialFocus:void 0,type:z().iW.Vertical,sections:[{key:"link",render:e=>(0,J.jsx)($().Z,{...e}),items:l},{key:"settings",render:e=>(0,J.jsx)($().Z,{...e,topBorder:!0}),items:[d]}]})})}const ee=s.forwardRef(((e,t)=>{const{iconStyle:s}=e;return(0,J.jsx)(O().Z,{...e,ref:t,icon:(0,i(81979).o)(s),title:(0,J.jsx)(o()._H,{id:"sites.siteActions.viewSite",defaultMessage:"View site"})})}));ee.displayName="ViewAction";const te=s.forwardRef(((e,t)=>{const{iconStyle:s}=e;return(0,J.jsx)(O().Z,{...e,ref:t,icon:(0,i(44037).a)(s),title:(0,J.jsx)(o()._H,{id:"sites.siteActions.copySiteLink",defaultMessage:"Copy site link"})})}));te.displayName="CopyAction";const ie=s.forwardRef(((e,t)=>{const{iconStyle:s,disabled:n}=e;return n?(0,J.jsx)(j().Z,{renderTooltip:()=>(0,J.jsx)(o()._H,{id:"sites.siteActions.noEditAccess",defaultMessage:"You do not have access to update the settings for this published site."}),placement:Z().Placement.Bottom,render:n=>(0,J.jsx)(O().Z,{...(0,i(164079).Z)(n,e),ref:t,icon:(0,W().H)(s),title:(0,J.jsx)(o()._H,{id:"sites.siteActions.settings",defaultMessage:"Settings"})})}):(0,J.jsx)(O().Z,{...e,ref:t,icon:(0,W().H)(s),title:(0,J.jsx)(o()._H,{id:"sites.siteActions.settings",defaultMessage:"Settings"})})}));ie.displayName="SettingsAction";var se=()=>i(647439),ne=()=>i(573369),oe=()=>i(396136),ae=()=>i(620768),re=()=>i(333023),le=()=>i(834758);function de(e){let{spaceStore:t,blockId:i,onClose:s,onUnpublish:n}=e;const o=(0,f().O7)(),a=I().G.createChildStore(t,{table:oe().iU,id:i}),r=(0,b().VK)((()=>re().mk({store:a,environment:o}).mostPermissivePublicItem),[o,a]);return"none"===r.permissionItem.role?(s(),null):(0,J.jsx)(ce,{store:a,mostPermissivePublicItem:r,onClose:s,onUnpublish:n})}function ce(e){const{store:t,mostPermissivePublicItem:i,onClose:r,onUnpublish:l}=e,d=(0,b().VK)((()=>"seo"===V().Z.state.siteSettingContentType),[]),c=(0,s.useCallback)((()=>{X().pn("initial")}),[]),u=(0,n().yK)((()=>({container:{flex:1,paddingBottom:8},titleContainer:{display:"flex",alignItems:"center",gap:4,padding:20,fontSize:14,lineHeight:1.25,fontWeight:a().Ue.semibold,paddingLeft:d?8:20},publishIcon:{height:16,width:16}})),[d]);return(0,J.jsxs)("div",{style:u.container,children:[(0,J.jsxs)("div",{style:u.titleContainer,children:[d&&(0,J.jsx)(ue,{onClick:c}),(0,J.jsx)(w().Z,{children:(0,J.jsx)(o()._H,{defaultMessage:"Publish settings",id:"publishSiteSettings.settings.title"})}),(0,ne().v)(u.publishIcon),(0,J.jsx)(ae().U,{onClick:r})]}),(0,J.jsx)(le().D7,{store:t,mostPermissivePublicItem:i,sudoModeStore:void 0,location:"published_site_settings",showManageAllDomains:!1,showAllPublishedSites:!1,onUnpublish:l,shouldAskForConfirmationOnPublish:!0})]})}function ue(e){const{onClick:t}=e,i=(0,o().YB)(),s=(0,n().yK)((()=>({topContainer:{display:"flex",alignItems:"center",width:"max-content"},backButtonPressedStyle:{backgroundColor:"transparent"},iconButton:{marginRight:6,height:24,width:24},arrowIcon:{height:16,width:16,strokeWidth:a().Ue.semibold}})),[]);return(0,J.jsx)("div",{style:s.topContainer,children:(0,J.jsx)(R().Z,{icon:se().W,iconStyle:s.arrowIcon,style:s.iconButton,onClick:t,ariaLabel:i.formatMessage({id:"publishSiteSettings.settings.backbutton.ariaLabel",defaultMessage:"Go back to publish settings."})})})}function pe(e){const{spaceStore:t,store:i,isSettingsDisabled:o}=e,a=(0,f().O7)(),[r,l]=(0,s.useState)(void 0),d=(0,s.useCallback)((e=>{l(e)}),[l]),c=(0,s.useCallback)((()=>{l(void 0),V().Z.reset()}),[l]),u=(0,n().yK)((()=>({settingButtonIcon:{width:18,height:18}})),[]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(H().ZP,{alignmentToOrigin:Z().Alignment.End,renderOrigin:e=>(0,J.jsx)(R().Z,{...e,ariaLabel:"Site settings",icon:_().O,iconStyle:u.settingButtonIcon}),popupType:H().Z4.Popup,render:e=>(0,J.jsx)(Q,{store:i,parent:e,isSettingsDisabled:o,onSettingsClick:d})}),(0,J.jsx)(D().c,{isOpen:Boolean(r),onDismiss:c,areaConstraint:{width:{type:"fixed",length:480}},render:()=>r?(0,J.jsx)(de,{spaceStore:t,blockId:r,onClose:c,onUnpublish:()=>{T().default.removeSiteFromSpace(t.id,r),(0,L().O$)(a,{target_block_id:i.id})}}):null})]})}const me=5e3;function ge(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"3px 5px":0;return[{key:"page",header:(0,J.jsx)(o()._H,{id:"sites.header.pageColumnHeader",defaultMessage:"Page"}),style:{width:"32%",padding:e}},{key:"domain",header:(0,J.jsx)(o()._H,{id:"sites.header.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"28%"}},{key:"published-by",header:(0,J.jsx)(o()._H,{id:"sites.home.publishedByColumnHeader",defaultMessage:"Published by"}),style:{width:"20%",padding:e}},{key:"published-date",header:(0,J.jsx)(o()._H,{id:"sites.home.publishedDateColumnHeader",defaultMessage:"Published date"}),style:{width:"16%",padding:e}},{key:"edit",header:(0,J.jsx)(J.Fragment,{}),style:{width:"4%"}}]}function he(e){let{column:t,onSortableColumnClick:i,header:s}=e;const o=(0,n().yK)((e=>({wrapper:{display:"flex"},text:{fontSize:a().JB.UISmall.desktop,fontWeight:a().Ue.regular,color:e.mediumTextColor},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[]),{sortColumn:r,sortAscending:l}=(0,b().VK)((()=>{const{sortColumn:e,sortAscending:t}=T().default.state;return{sortColumn:e,sortAscending:t}}),[]),d=["page","published-or-created-by","published-date"].includes(t),c=()=>{if(t===r)return(0,x().K)({...o.sortIcon,...!l&&{transform:"rotate(180deg)"}})};return s&&d?(0,J.jsx)("div",{style:o.wrapper,children:(0,J.jsxs)(v().Z,{style:o.sortButton,onClick:()=>i(t),children:[s,c()]})}):s?(0,J.jsx)("div",{style:o.wrapper,children:s}):(0,J.jsx)(J.Fragment,{children:s})}function fe(e){const{spaceStore:t}=e,i=(0,f().O7)(),a=i.currentUser.id,r=(0,o().YB)();(0,s.useEffect)((()=>(U().mk(i,{spaceStore:t,currentUserId:a,limit:me}),()=>{U().Zg(t)})),[i,t,a]);const l=(0,n().yK)((e=>({headerContainer:{display:"flex",alignItems:"center",gap:4,marginBottom:12},helpIcon:{height:14,width:15,color:e.icon.tertiary},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},shimmerBox:{height:12,gap:16,display:"flex",borderRadius:6}})),[]),d=(0,b().VK)((()=>{const e=T().default.getSortedSitesForSpace(t.id,r);if(!e)return;const i=[];for(const s of e){const{store:e,publishedMetadata:n}=s,o=e.id,a=e.canAdmin(),l=P().UM(e),d=A().Nc(e.getSpaceStore(),l),c=n.publishedTime?(0,y().ZW)({value:h().ou.fromMillis(n.publishedTime),preset:"medium"}):"",u=n.publishedBy,p=u?I().t1.createChildStore(e,u):void 0,m=null==p?void 0:p.getDisplayName(r),g=p instanceof I().U6?(0,J.jsx)(k().Z,{userStore:p,avatarSize:20,style:{width:"fit-content",maxWidth:"98%"}},`${o}-published-by`):(0,J.jsx)(be,{text:m},`${o}-published-by`);i.push({key:o,columns:[(0,J.jsx)(F().Z,{store:e},o),(0,J.jsx)(B().Z,{spaceStore:t,domainId:null==d?void 0:d.id,isRelative:!0},`${o}-domain`),g,(0,J.jsx)(be,{text:c},`${o}-published-on`),(0,J.jsx)(pe,{spaceStore:t,store:e,isSettingsDisabled:!a},`${o}-actions`)]})}return i}),[t,r]),u=(0,s.useMemo)((()=>Array.from({length:9}).map(((e,t)=>({columns:Array.from({length:5}).map(((e,t)=>(0,J.jsx)(C().Z,{style:l.shimmerBox},t))),key:`shimmerRow-${t}`})))),[l.shimmerBox]),p=!d,m=d&&0===d.length,g=(0,s.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=T().default.state,s=e!==t||!i;T().default.setState({...T().default.state,sortAscending:s,sortColumn:e})}),[]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(c().Z,{style:l.headerContainer,children:[(0,J.jsx)(o()._H,{id:"sites.home.title",defaultMessage:"All published sites"}),(0,J.jsx)(j().Z,{renderTooltip:()=>(0,J.jsx)(o()._H,{id:"sites.home.tooltip",defaultMessage:"Notion pages that have been published as a site"}),render:e=>(0,J.jsx)("div",{...e,children:(0,S().m)(l.helpIcon)}),placement:Z().Placement.Bottom,alignment:Z().Alignment.Center})]}),p?(0,J.jsx)(M().Z,{columns:ge(!0),rows:u,tableStyle:l.tableBox,cellStyle:l.cell}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(M().Z,{columns:ge(!1).map((e=>({key:e.key,header:(0,J.jsx)(he,{column:e.key,onSortableColumnClick:g,header:e.header}),style:e.style}))),rows:d,tableStyle:l.tableBox,cellStyle:l.cell}),m&&(0,J.jsx)(ye,{})]})]})}function be(e){const{text:t}=e,i=(0,n().yK)((()=>({text:{width:"fit-content",maxWidth:"98%",...a().Yu}})),[]);return t?(0,J.jsx)("div",{style:i.text,children:t}):null}function ye(){const e=(0,n().yK)((e=>({message:{textAlign:"center",marginTop:12,marginBottom:12,color:e.text.tertiary}})),[]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(w().Z,{style:e.message,children:(0,J.jsx)(o()._H,{id:"sites.results.empty",defaultMessage:"You have no published sites in this workspace"})}),(0,J.jsx)(r().Z,{size:1})]})}function xe(e){const{spaceStore:t}=e,i=(0,n().yK)((()=>({headerContainer:{display:"flex"},titleContainer:{flex:1},learnMoreButton:{fontWeight:a().Ue.regular}})),[]);return(0,J.jsxs)(d().ZP,{children:[(0,J.jsx)(c().Z,{large:!0,divider:"full",children:(0,J.jsxs)("div",{style:i.headerContainer,children:[(0,J.jsx)("div",{style:i.titleContainer,children:(0,J.jsx)(o()._H,{id:"sites.heading.title",defaultMessage:"Sites"})}),(0,J.jsx)(l().Z,{buttonStyle:i.learnMoreButton,title:(0,J.jsx)(o()._H,{id:"sites.heading.learnMore",defaultMessage:"Learn more"}),href:(0,g().UY)("guides.autogeneratedDomains"),analyticsFrom:"sites_settings"})]})}),(0,J.jsx)(m,{spaceStore:t}),(0,J.jsx)(r().Z,{size:20,isHidden:!0}),(0,J.jsx)(fe,{spaceStore:t})]})}},59864:(e,t,i)=>{i.d(t,{N:()=>r,S:()=>a});i(267602),i(470928);var s=()=>i(933868),n=()=>i(201565),o=()=>i(122479);function a(e,t){return e.sort(((e,i)=>{const s=e.store.canAdmin();if(s===i.store.canAdmin()){var n,o;const s=null===(n=e.publishedMetadata.publishedBy)||void 0===n?void 0:n.id,a=e.publishedMetadata.publishedTime,r=null===(o=i.publishedMetadata.publishedBy)||void 0===o?void 0:o.id,l=i.publishedMetadata.publishedTime;if(t){if(s===t&&r===t&&a&&l)return l-a;if(s===t)return-1;if(r===t)return 1}return a&&l?l-a:0}return s?-1:1}))}function r(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;const a=o().YO(i).find((e=>(0,s().$D)(e.permissionItem)&&"none"!==e.permissionItem.role));return!!a&&(!(!(0,s().$D)(a.permissionItem)||!(0,n().L)(a.permissionItem))&&!o().eV(t,i))}},835374:(e,t,i)=>{i.d(t,{default:()=>o});i(267602),i(653476);var s=()=>i(513670);class n extends(()=>i(263184))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:n,sortColumn:o}=this.state,a=this.state.sites[e];if(a)switch(o){case"page":return s().Xo(a,(e=>i(955620).QaF(e.store.getTitleValue()).toLowerCase()),n?"asc":"desc");case"published-by":return s().Xo(a,(e=>{const s=e.publishedMetadata.publishedBy,n=s?i(826955).t1.createChildStore(e.store,s):void 0;return null==n?void 0:n.getDisplayName(t).toLowerCase()}),n?"asc":"desc");case"published-date":return s().Xo(a,(e=>e.publishedMetadata.publishedTime),n?"asc":"desc");default:return a}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const o=new n},685472:(e,t,i)=>{i.d(t,{EP:()=>o,LU:()=>a,NS:()=>n,SS:()=>s,ZP:()=>l});const s="loadingLocalImage",n="uploading",o="downloading",a="loaded";class r extends(()=>i(263184))().default{getInitialState(){return{loadingMode:a}}}const l=r},774985:(e,t,i)=>{i.d(t,{Z:()=>s});const s=new(i(685472).ZP)},573369:(e,t,i)=>{i.d(t,{v:()=>n});i(667294);var s=i(785893);const n=(0,i(827282).IU)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,s.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,s.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,s.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})})}}]);