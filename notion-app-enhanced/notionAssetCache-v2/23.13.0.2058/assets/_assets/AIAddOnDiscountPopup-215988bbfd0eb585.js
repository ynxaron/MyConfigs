"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1352],{554240:(e,t,n)=>{n.d(t,{u:()=>r});var o=()=>n(677559);const s=new(o().Ss)("FeatureIntroPopup",(async()=>n.e(44843).then(n.bind(n,660697)))),r=(0,o().kF)(s,(e=>e.FeatureIntroPopup))},835411:(e,t,n)=>{n.r(t),n.d(t,{AIAddOnDiscountPopup:()=>O});var o=n(667294),s=()=>n(219727),r=()=>n(142735),i=()=>n(846550),u=()=>n(947115),a=()=>n(828042),d=()=>n(255393),p=()=>n(629719),c=()=>n(893146),l=()=>n(381348),f=()=>n(788860),_=()=>n(979614),S=()=>n(269299),g=()=>n(348141),m=()=>n(554240),b=()=>n(876822),A=()=>n(518019),h=()=>n(538992),P=()=>n(438665),v=()=>n(548812),C=()=>n(971025),D=()=>n(18281),k=()=>n(697623),y=()=>n(897257),I=n(785893);function O(){const e=(0,s().O7)(),[t,n]=o.useState(void 0);(0,o.useEffect)((()=>{(0,u().exposeDebugValue)("resetAddOnDiscountPopup",(()=>{const{currentUserSettingsStore:t}=b().default.state;t&&S().createAndCommit({userAction:"AddOnDiscountPopup.resetAddOnPromoPopup",environment:e,canUndo:!0,perform:e=>{g().d2({userSettingsStore:t,transaction:e,data:{seen_ai_discount_popup:!1}})}})}))}),[e]);const{currentUserSettingsStore:O,currentSpaceStore:w}=(0,r().VK)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=b().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),x=(0,r().Kw)(y().subscriptionDataStoreInstance);(0,o.useEffect)((()=>{!async function(){if(!w)return;if(!x)return;if(!(0,D().GJ)(x))return;if("unsubscribed_admin"!==x.type&&"subscribed_admin"!==x.type)return;const t=A().Z.getData(e,{spaceId:w.id}),o=(0,p().VU)(null==t?void 0:t.subscription);if("stripe"!==(null==t?void 0:t.provider)||!o)return;const s=D().XX(x);if((0,d().de)(null==s?void 0:s.addOns))return;const r=await P().ZF(e,{spaceId:w.getSpaceId(),offerCampaign:"ai_fifty_percent_upgrade"}),i=(0,c().iQ)(r);i&&(0,l().pp)(i)&&n(i)}()}),[e,w,x]);const U=(0,o.useCallback)((()=>{O&&(S().createAndCommit({userAction:"AddOnDiscountPopup.markSeen",environment:e,canUndo:!0,perform:e=>{g().d2({userSettingsStore:O,transaction:e,data:{seen_ai_discount_popup:!0}})}}),_().j(e,{name:"add_on_discount_popup_dismissed"}))}),[O,e]),j=(0,o.useCallback)((()=>{t&&(h().k2("ai"),h().Cl(t))}),[t]),F=(0,r().VK)((()=>!(!(0,l().pp)(t)||!(0,v().px)(e,(0,k().zt)()))),[t,e]),M=(0,i().yK)((e=>({icon:{width:20,height:20,fill:e.accentColors.purple[400]}})),[]);return F?(0,I.jsx)(m().u,{calloutId:"add_on_discount_popup",initialPromo:{icon:a().t,iconStyle:M.icon,header:(0,I.jsx)(f()._H,{id:"AddOnDiscountPopup.header",defaultMessage:"Add unlimited AI for {percentage} off?",values:{percentage:(0,l().pp)(t)?(0,C().ov)(t):void 0}}),description:(0,I.jsx)(f()._H,{id:"AddOnDiscountPopup.description",defaultMessage:"Project management is better with Notion AI. Add it on top of your paid plan with half off."})},steps:[],seenFeatureUserSetting:"seen_ai_discount_popup",userSettingsStore:O,allowExternalMouseEvents:!0,onDismiss:U,onTryFeatureClick:j,isUserEligible:F,onPopupSeen:()=>_().j(e,{name:"add_on_discount_popup_seen"}),onLearnMore:()=>{t&&j(),U()},ctaMessage:(0,I.jsx)(f()._H,{id:"AddOnDiscountPopup.purchase.button",defaultMessage:"Claim your deal"})}):null}}}]);