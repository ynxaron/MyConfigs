(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[25277,45741,95986,85584,93843,75751],{147249:(e,t,n)=>{"use strict";n.d(t,{K:()=>i,y:()=>r});var o=()=>n(594546);function i(e,t){const{from:n}=t;o().K4(e,"show_tooltip",{from:n,time:Date.now()})}function r(e,t){const{from:n}=t;o().K4(e,"dismiss_tooltip",{from:n,time:Date.now()})}},140798:(e,t,n)=>{"use strict";n.d(t,{Lg:()=>m,N:()=>p,aG:()=>u});var o=()=>n(139978),i=()=>n(306164),r=()=>n(269299),a=()=>n(903609),s=()=>n(6006),l=()=>n(384334),c=()=>n(662062),d=()=>n(876822);function u(e){const{environment:t,currentSpaceViewStore:n,...o}=e;if(!n.getModel())return;const i=!(0,c().q)(n)[e.feature];r().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{r().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:i}},transaction:t})}}),(0,l().cY)({environment:t,show:i,...o})}function p(e){let{environment:t,option:n,from:o,userAction:i}=e;const a=d().default.state.currentSpaceViewStore;if(!a)return!1;const c=a.getOnAppStartStore().getValue();return r().createAndCommit({userAction:i,environment:t,canUndo:!0,perform:e=>{r().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","on_app_start"],command:"set",args:n},transaction:e})}}),(0,s().pJ)({spaceView:a.getModel(),preference:n}),(0,l().BX)({environment:t,oldValue:c,newValue:n,from:o}),!0}function m(e){const{environment:t,selectedStore:n,currentSpaceViewStore:s,collectionContextStore:c}=e,d=c.collectionViewStore(),u=c.collectionStore(),p=c.collectionViewBlockStore();if(!(u&&d&&p&&s))return;const m=s.getTeamsStores(),g=n.table===i().e0?m.indexOf(n)+1:0,h=n.table===i().e0?n.id:void 0;r().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{r().applyOperation({store:d,operation:{pointer:{id:d.id,table:o().np},path:["format","collection_view_source","teamId"],command:"set",args:h},transaction:e}),(0,a().y)({environment:t,collectionViewBlockStore:p,collectionViewStore:d,collectionStore:u,collectionContextStore:c,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0,forceLocalQueryCollection:!1})}}),(0,l().Ay)({environment:t,teamId:h,index:g})}},839821:(e,t,n)=>{"use strict";n.d(t,{j:()=>p});var o=()=>n(685472),i=()=>n(774985),r=()=>n(308186),a=()=>n(421654),s=()=>n(762478),l=()=>n(269299),c=()=>n(109757);const d=1500,u=(0,n(788860).vU)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function p(e){let{environment:t,intl:n,store:o,rect:i}=e;s().$(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:n.formatMessage(u.pageCover),onDelete:()=>{!function(e){let{environment:t,store:n}=e;s().Z(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{a().MF({store:n,transaction:e})}})}({environment:t,store:o})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:n,position:i}=e;g({environment:t,store:o,url:n,position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:n.formatMessage(u.fileTypeCaption,{idealImageWidth:d}),onUpload:e=>{s().Z(),c().cT({environment:t,file:e[0],bucket:"secure",record:o.pointer,onStart:h,onProgress:f,onComplete:e=>{var n;n={environment:t,store:o,url:e},m({...n,position:.5})},onError:()=>{r().UW(n.formatMessage(u.uploadFailed))}})}},{type:"embed",title:n.formatMessage(u.embedTitle),inputPlaceholder:n.formatMessage(u.embedPlaceholder),caption:n.formatMessage(u.embedCaption),buttonText:n.formatMessage(u.embedSubmit),onChange:e=>{var n;n={environment:t,store:o,url:e},m({...n,position:.5}),s().Z()}},{type:"unsplash",onChange:e=>{let{url:n,position:i}=e;g({environment:t,store:o,url:n,position:i})}}]})}async function m(e){const{environment:t,store:n,url:r,position:s}=e,{serverCommitResult:c}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{a().fs({store:n,url:r,position:s||.5,transaction:e})}});await c,i().Z.state.loadingMode===o().NS&&i().Z.setState({loadingMode:o().EP,dataURL:i().Z.state.dataURL,uploadProgress:100})}function g(e){m(e),e.environment.device.isMobile&&s().Z()}function h(e){const{file:t,name:n,size:r}=e;if(s().Z(),i().Z.setState({loadingMode:o().SS,file:t,name:n,size:r}),t instanceof File&&t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{i().Z.state.loadingMode===o().SS&&i().Z.setState({...i().Z.state,uploadProgress:0,loadingMode:o().NS,dataURL:e.target.result})},e.readAsDataURL(t)}}function f(e){const{progressPercent:t}=e;i().Z.state.loadingMode===o().NS&&i().Z.setState({...i().Z.state,uploadProgress:t})}},169793:(e,t,n)=>{"use strict";n.d(t,{ND:()=>P,RD:()=>L,gc:()=>A,gl:()=>R,u7:()=>j});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(156642),s=()=>n(575861),l=()=>n(788860),c=()=>n(696459),d=()=>n(147249),u=()=>n(905263),p=()=>n(982855),m=()=>n(191003),g=()=>n(550054),h=()=>n(803728),f=()=>n(110372),v=()=>n(156538),C=()=>n(876822),S=()=>n(890324),y=()=>n(826955),b=()=>n(127519),x=()=>n(343353),k=()=>n(559155),w=()=>n(656801),I=n(785893);const _=1,M=1,T=(0,l().vU)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function j(){const e=(0,i().O7)(),t=function(){const e=(0,i().O7)(),t=(0,r().VK)((()=>{var e;return null===(e=C().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),n=(0,r().VK)((()=>{const t=C().default.state.mainEditorCurrentBlockStore;return t&&S().Z.getMode(e,t)}),[e]);return(0,r().VK)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:o,inAppCalloutStore:i}=C().default.state;if(!i.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const r=null==o?void 0:o.getSettings();if(!r)return;if((0,c().$K)(r.last_used_ai_writer_at))return;if("tooltip"!==r.ai_assistant_onboarding_phase)return;if((0,k().$_)(e,t)){if(!(0,c().$K)(r.ai_sales_assisted_extra_notification_seen_at)||(0,s().O5)(r.ai_sales_assisted_extra_notification_seen_at)<M)return}else if((0,c().$K)(r.ai_assistant_onboarding_phase_last_set_at)&&(0,s().O5)(r.ai_assistant_onboarding_phase_last_set_at)<_)return;if("space_for_ai"!==(0,w().sy)())return;if(!(0,p().GD)(n))return;const l=b().default.state;if("editing"===l.mode){const e=(0,m().QY)(l.multiSelection);if(e&&(0,g().wd)(e.selection)){const t=e.store,n=v().E.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?y().G.createChildStore(t,t.pointer):void 0,o=e&&e.getType(),i=Boolean(o&&(0,a().hD)(o)),r=t.getValue();if(i&&!r)return n}}}}),[e,n,t])}(),[n,d]=(0,o.useState)(!1),h=(0,o.useCallback)((()=>{d(!0)}),[]),f=!n&&Boolean(t);return(0,o.useEffect)((()=>()=>{f&&(0,w().fz)(e)}),[e,f]),f&&t?(0,I.jsx)(u().U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,I.jsx)(l()._H,{...T.spaceForAiHeader}),content:(0,I.jsx)(l()._H,{...T.spaceForAiContent}),onCloseClick:h}):null}function L(e){const{originRef:t,openState:n}=e,a=(0,i().O7)(),s=(0,r().VK)((()=>(0,w().sy)()),[]),[c,d]=(0,o.useState)(!1),p=(0,o.useCallback)((()=>{d(!0)}),[]),m="ask_ai_anything"===s&&"initialPrompt"===n.stage&&!c;return(0,o.useEffect)((()=>()=>{!a.device.isMobile&&m&&(0,w().fz)(a)}),[a,m]),a.device.isMobile||!m?null:(0,I.jsx)(u().U,{origin:t,placementToOrigin:"top",header:(0,I.jsx)(l()._H,{...T.askAiAnythingHeader}),content:(0,I.jsx)(l()._H,{...T.askAiAnythingContent}),onCloseClick:p})}function R(e){const{originRef:t,openState:n,isInputEmpty:a}=e,s=(0,i().O7)(),c=(0,r().VK)((()=>(0,w().sy)()),[]),[d,p]=(0,o.useState)(!1),m=(0,o.useCallback)((()=>{p(!0)}),[]),g="refine_ai_response"===c&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&a&&!d;return(0,o.useEffect)((()=>()=>{!s.device.isMobile&&g&&(0,w().fz)(s)}),[s,g]),s.device.isMobile?null:(0,I.jsx)(u().U,{origin:g?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,I.jsx)(l()._H,{...T.refineAiResponseHeader}),content:(0,I.jsx)(l()._H,{...T.refineAiResponseContent}),onCloseClick:m})}function P(e){const{origin:t}=e,n=(0,i().O7)();(0,o.useEffect)((()=>{d().K(n,{from:"qna_button"}),f().gF(n,{callout_key:"ai_assistant_origin_element_tooltip"})}),[n]);const r=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=C().default.state;e&&(d().y(n,{from:"qna_button"}),f().bl(n,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss"}),(0,x().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),h().Gi(n,"ai_assistant_origin_element_tooltip"))}),[n]);return(0,I.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,I.jsx)(l()._H,{...T.showAssistantOriginElementLocationHeader}),content:(0,I.jsx)(l()._H,{...T.showAssistantOriginElementLocationContent}),onCloseClick:r})}function A(e){const{origin:t}=e,n=(0,i().O7)();(0,o.useEffect)((()=>{d().K(n,{from:"qna_search"})}),[n]);const r=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=C().default.state;e&&(d().y(n,{from:"qna_search"}),(0,x().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,I.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,I.jsx)(l()._H,{...T.showAssistantLocationHeader}),content:(0,I.jsx)(l()._H,{...T.showAssistantLocationContent}),onCloseClick:r})}(0,n(100056).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=C().default.state;t&&n(269299).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{n(348141).d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},579217:(e,t,n)=>{"use strict";n.d(t,{_:()=>r,s:()=>i});var o=()=>n(677559);const i=(0,o().kF)(new(o().Ss)("UniversalQnaModals",(async()=>await Promise.all([n.e(62743),n.e(37358),n.e(7312),n.e(31189),n.e(69343),n.e(2933),n.e(7678),n.e(20919),n.e(52435),n.e(75066),n.e(37317),n.e(78517),n.e(93843),n.e(58183)]).then(n.bind(n,960872)))),(e=>e.UniversalQnaModals)),r=(0,o().kF)(new(o().Ss)("SlackConnectionOptions",(async()=>await n.e(16982).then(n.bind(n,945272)))),(e=>e.SlackConnectionOptions))},707461:(e,t,n)=>{"use strict";n.d(t,{Pm:()=>s,Xj:()=>r,wC:()=>a});var o=()=>n(435308);class i extends(()=>n(263184))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new i,a=new(o().default)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(o().default)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},493843:(e,t,n)=>{"use strict";n.d(t,{$o:()=>z,Fv:()=>F,IL:()=>Y,J4:()=>O,KA:()=>D,Nf:()=>Z,_p:()=>J,cQ:()=>W,f$:()=>U,fX:()=>N,j2:()=>B,k2:()=>q,mg:()=>Q,mz:()=>K,oP:()=>E,tF:()=>$,td:()=>H,x:()=>G});n(670560),n(267602),n(470928),n(30005),n(241792),n(228244);var o=()=>n(730120),i=()=>n(492788),r=()=>n(506347),a=()=>n(926724),s=()=>n(331540),l=()=>n(874459),c=()=>n(998411),d=()=>n(35980),u=()=>n(513670),p=()=>n(696459),m=()=>n(250303),g=()=>n(384667),h=()=>n(366257),f=()=>n(139224),v=()=>n(421654),C=()=>n(636340),S=()=>n(531515),y=()=>n(47443),b=()=>n(794586),x=()=>n(879952),k=()=>n(970105),w=()=>n(990966),I=()=>n(269299),_=()=>n(715146),M=()=>n(887430),T=()=>n(861026),j=()=>n(804217),L=()=>n(826955),R=()=>n(965903),P=()=>n(807230),A=()=>n(701182),V=()=>n(645843);function B(e){const{collectionViewStore:t,collectionContextStore:n,timelineState:o,environment:i}=e,r=i.currentUser.id,a=(0,A().B8)(t.id),s=(0,A().pQ)(t,i),l=n.permissionScopesStore.state,c=u().Ds((()=>{if(o.destroyed)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,A().al)(o)};d().Z.set({userId:r,key:a,value:e})}),1e3),p=u().Ds((()=>{if(o.destroyed||!j().default.state.online||!i.currentUser.isLoggedIn()||!l.canConfigureBlock)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,A().al)(o)},n=t.getFormat().timeline_preference;u().Xy(n,e)||I().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:i,canUndo:!0,perform:n=>{v().FH({stores:[t],update:{timeline_preference:e},transaction:n})}})}),5e3);o.savePreference=()=>{c(),p()},Z({timelineState:o,environment:i,...s})}function Z(e){const{timelineState:t,zoomLevel:n,centerTimestamp:o,environment:r}=e,{savePreference:a}=t,s=r.WindowSizeStore.state.width+2*A().Ge,l=(0,A().x2)(n,s),c=o-l/2,d=o+l/2;t.zoomLevel.setState(n),t.currentRange.setState({startTimestamp:c,endTimestamp:d}),i().default.afterNextFlush((()=>{D({timelineState:t,centerTimestamp:o}),a&&a()}))}function D(e){const{timelineState:t,centerTimestamp:n}=e,{horizontalScroller:o,outerSizeObserver:i}=t;if(!o)return;const r=t.zoomLevel.state,{startTimestamp:a,endTimestamp:s}=t.currentRange.state,l=i.rect.state.width;if(l===(0,A().e$)(r,s-a))return;const c=(0,A().e$)(r,n-a)-l/2;o.scrollLeft=c,t.scrollLeft.setState(c)}function E(e){const{environment:t,store:n,query:o,date:i,schema:r,transaction:a}=e,{timeline_by:s}=o;if(!s)return;const l=n.getAssociatedCollectionStore(),c=(null==l?void 0:l.getMappedProperty(s))??s,d=o.timeline_by_end?(null==l?void 0:l.getMappedProperty(o.timeline_by_end))??o.timeline_by_end:void 0,u=(0,A().TW)({store:n,dateValue:i,query:o,schema:(null==l?void 0:l.getSchema())??r}),p=n.getPropertyValue(c),m=d?n.getPropertyValue(d):void 0;return C().sW({store:n.getPropertiesStore(),data:u,transaction:a}),h().H({environment:t,store:n,dateProperty:{id:c,newValue:(null==u?void 0:u[c])??[],oldValue:p},otherDateProperty:d?{id:d,newValue:(null==u?void 0:u[d])??[],oldValue:m}:void 0}),n}function F(e){var t;const{environment:n,timelineState:i,collectionStore:r,collectionContextStore:a,store:s,query:d,groupFormat:u,transaction:p}=e,m=i.zoomLevel.state,h=(0,A().al)(i),{snapUnit:f,getDateRangePlaceholderDuration:v}=A().BJ[m],{timeline_by:C}=d;if(!C)return;const S=null===(t=a.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state;if(!S)return;const y=o().ou.fromMillis(h),b=(0,A().DS)(y,f),x=(0,A().DS)(v(y),f),k=(0,A().AZ)({startValue:(0,l().Lg)((0,c().r)()),snapUnit:f,desiredStart:b,desiredEnd:x});return E({environment:n,store:s,query:d,schema:r.getSchema(),date:k,transaction:p}),g().$T({environment:n,collectionStore:r,before:!0,store:S[0],insertStores:[s],collectionContextStore:a,groupsPointer:u?[u]:[],transaction:p}),s}function U(e){const{type:t,timelineState:n,store:o,startX:i,query:r,schema:a,intl:s,environment:l}=e,{horizontalScroller:c}=n,{startTimestamp:d}=n.currentRange.state;if(!c)return;x().Ys({environment:l,store:o});const p=c.scrollLeft,{stores:m}=R().default.state,g=u().oA(m.map((e=>{const t=(0,A().bk)({store:e,query:r,schema:a,userId:l.currentUser.id,intl:s,formulasModule:void 0});if(t)return{startValue:t,store:e}})));n.dragState.setState({type:t,startStore:o,stores:g.map((e=>{let{store:t}=e;return t})),startValues:g.map((e=>{let{startValue:t}=e;return t})),temporaryValues:g.map((e=>{let{startValue:t}=e;return t})),startX:i,startStartTimestamp:d,startScrollLeft:p})}function O(e){const{timelineState:t,store:n,startX:o,startY:i,schema:r,collectionContextStore:a,verticalScroller:s}=e,{horizontalScroller:l}=t,{startTimestamp:c}=t.currentRange.state;if(!l||!s)return;const d=l.scrollLeft,u=s.scrollTop,p=(0,A().YE)(a,n,r);t.drawState.setState({startStore:n,startDependencyRelationPointers:p,temporaryDependencyRelationPointers:[...p],startX:o,startY:i,startScrollLeft:d,startScrollTop:u,startStartTimestamp:c,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function H(e){const{timelineState:t,currentX:n}=e,{horizontalScroller:o}=t,i=t.zoomLevel.state,r=t.dragState.state,{startTimestamp:a}=t.currentRange.state;if(!r||!o)return;const{type:s,startStartTimestamp:c,startValues:d,startScrollLeft:m,startX:g,startStore:h,stores:f}=r,v=A().BJ[i],{snapUnit:C}=v,S=o.scrollLeft-m+(n-g)+(0,A().e$)(i,a-c),y=(0,A().x2)(i,S),b=d[f.indexOf(h)];let x;if(s===A().px.LeftResizer){const{start:e}=(0,A().XO)(b,C),t=e.plus(y);x=d.map((e=>{const n=(0,A().AZ)({startValue:e,snapUnit:C,desiredStart:t});return(0,l().gW)(n)}))}else if(s===A().px.RightResizer){const{end:e}=(0,A().XO)(b,C),t=e.plus(y);x=d.map((e=>{const n=(0,A().AZ)({startValue:e,snapUnit:C,desiredEnd:t});return(0,l().Qq)(n)}))}else s===A().px.ItemDrag?x=d.map((e=>{const{start:t,end:n}=(0,A().XO)(e,C),o=t.plus(y),i=o.plus(n.valueOf()-t.valueOf());return(0,A().AZ)({startValue:e,snapUnit:C,desiredStart:o,desiredEnd:i})})):(0,p().t1)(s);u().Xy(r.temporaryValues,x)||t.dragState.setState({...r,temporaryValues:x})}function K(e){const{timelineState:t,currentX:n,currentY:o,verticalScroller:i}=e,r=t.drawState.state,a=t.zoomLevel.state,{startTimestamp:s}=t.currentRange.state,{horizontalScroller:l}=t;if(!r||!l||!i)return;const{startDependencyRelationPointers:c,startStore:d,startX:p,startY:m,startScrollLeft:g,startScrollTop:h,startStartTimestamp:f}=r,v=l.scrollLeft,C=i.scrollTop,S=v-g+(n-p)+(0,A().e$)(a,s-f),y=C-h+(o-m),b=t.hoveredItem.state;if(b&&b!==d&&!c.some((e=>e.id===b.id))){const e=[...c,{table:"block",id:b.id,spaceId:b.getSpaceId()}];u().Xy(r.temporaryDependencyRelationPointers,e)||t.drawState.setState({...r,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...r,temporaryDependencyRelationPointers:[...c],xOffsetPx:S,yOffsetPx:y})}function N(e){const{environment:t,collectionContextStore:n,timelineState:o,query:i,schema:r,transaction:a}=e,s=o.dragState.state,{timeline_by:l}=i;if(!s||!l)return;const{temporaryValues:c,stores:d}=s;c.forEach(((e,o)=>{const s=d[o];E({environment:t,store:s,query:i,schema:r,transaction:a,date:e}),m().rv({environment:t,collectionContextStore:n,block_id:s.id,property:l,property_type:"date",from:"timeline"})})),o.dragState.setState(void 0)}function z(e){var t;const{timelineState:n,environment:o,transaction:i,collectionContextStore:r,isFullScreen:a,isRootChild:s}=e,l=n.drawState.state,c=n.dateRangePlaceholder.state;if(!l)return;const{startStore:d,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:p}=l;if(!d)return void n.drawState.setState(void 0);let g;if(c.active){const{date:e,store:t,parentStore:a,groupFormat:s,newTimelineItemProps:l,existingTimelineItemProps:u}=c;if(t&&u){const{query:n,schema:r}=u;E({environment:o,store:t,query:n,schema:r,date:e,transaction:i}),g={table:"block",id:t.id,spaceId:d.getSpaceId()}}else if(l){const{query:n,schema:c,isFullScreen:u,canEditTimelineItems:p,subitemPath:m}=l,h=Q({environment:o,date:e,store:t,parentStore:a,query:n,schema:c,isFullScreen:u,groupFormat:s,canEditTimelineItems:p,collectionContextStore:r,subitemPath:m,transaction:i,from:"timeline_complete_draw"});h&&(g={table:"block",id:h.id,spaceId:d.getSpaceId()})}n.dateRangePlaceholder.setState({active:!1})}else g=p.find((e=>!u.includes(e)));const h=(0,A()._e)(r);if(h){const{property:e}=h;g&&(S().hE({environment:o,propertyWithInverse:h,sourceStore:d,destStore:L().G.createChildStore(d,g),position:{type:"after"},transaction:i}),m().rv({environment:o,collectionContextStore:r,block_id:d.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),n.drawState.setState(void 0)}else f().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:r.settingsStore}),n.drawState.setState({...l,tryToCompleteDrawnArrow:!0});const v=null===(t=g)||void 0===t?void 0:t.id;v&&(0,V().LE)(o,{...(0,T().Pn)(r),...(0,V().Ii)({environment:o,collectionContextStore:r,timelineState:n,isFullScreen:a,isRootChild:s}),dependenciesPropertyID:null==h?void 0:h.property,blockedByStoreID:d.id,blockingStoreID:v})}function W(e){const{timelineState:t,environment:n}=e;t.dragState.state&&(t.dragState.setState(void 0),x().ZH({environment:n}))}function G(e){const{timelineState:t,environment:n}=e;t.drawState.state&&(t.drawState.setState(void 0),x().ZH({environment:n}))}function q(e){const{stores:t,collectionViewStore:n,schema:o,transaction:i}=e,r=n.getType(),a=n.getQuery(o),s=[];a&&("calendar"===r?a.calendar_by&&s.push(a.calendar_by):"timeline"===r&&(a.timeline_by&&s.push(a.timeline_by),a.timeline_by_end&&s.push(a.timeline_by_end)));for(const l of t)for(const e of s)k().sO({environment:l.environment,store:l.getPropertyStore(e),value:void 0,transaction:i})}function Y(e){const{dependency:t,collectionContextStore:n,environment:o,timelineState:i,isFullScreen:r,isRootChild:a}=e,s=(0,A()._e)(n),l=n.collectionStore();if(!s||!l)return;const{property:c}=s,{store:d,relationPointer:u}=t,p=d.getSchema()[c];p&&"relation"===p.type&&(I().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:o,canUndo:!0,perform:e=>{S().Bl({environment:o,propertyWithInverse:s,sourceStore:d,destStore:L().G.createChildStore(d,u),transaction:e}),m().rv({environment:o,block_id:u.id,property:c,property_type:p.type,from:"timeline",collectionContextStore:n,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,V().lf)(o,{...(0,T().Pn)(n),...(0,V().Ii)({environment:o,collectionContextStore:n,timelineState:i,isFullScreen:r,isRootChild:a}),dependenciesPropertyID:c,blockedByStoreID:d.id,blockingStoreID:u.id}))}function $(e){const{collectionViewStore:t,newProperty:n,transaction:o}=e;v().FH({stores:[t],update:{timeline_arrows_by:{property:n}},transaction:o})}function J(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:i}=e,r=n.collectionStore();if(!r)return;const l=o?r.getSchema()[o]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=r.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0;v().FH({stores:[r],update:{collection_default_arrows_by:o,...r.getFormat().app_config_uri===s().iS?{app_uri_map:{...r.getFormat().app_uri_map?r.getFormat().app_uri_map:{},[a().Es.BlockingRelation]:o,[a().Es.BlockedRelation]:c}}:{}},transaction:i})}function Q(e){const{environment:t,transaction:n,date:o,parentStore:i,query:a,schema:s,isFullScreen:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,from:p}=e;if(!(0,P().ww)(t))return;const m=c?[c]:[],h=u.groupsStore.getGroupState(m);if(!h)return;if(i)return function(e){const{environment:t,transaction:n,date:o,store:i,parentStore:a,query:s,schema:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,subitemPath:p}=e;if(!i||!a)return;const m=c?[c]:[],h=g().yk({environment:t,collectionContextStore:u,groupsPointer:m,store:i,before:!1,collectionStore:a,transaction:n,subitemPath:p,subitemInsertDirection:"into"});if(h){if(E({environment:t,store:h,query:s,schema:l,date:o,transaction:n}),t.device.isMobile)y()._c({environment:t,store:h,pageVisitSource:r().tY.Create});else if(h&&d){const e=h.getBlockTitleStore();w().setSelectionAtStart({store:e})}return h}}(e);u.searchQueryStore.state&&(0,_().U)({searchQuery:"",collectionContextStore:u,isFullScreen:l});const f=g().IW({environment:t,collectionContextStore:u,groupsPointer:m,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:n,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!f)return;const v=f.coercionSucceeded,C=f.newStore;if(E({environment:t,store:C,query:a,schema:s,date:o,transaction:n}),t.device.isMobile)y()._c({environment:t,store:C,pageVisitSource:r().tY.Create});else if(v&&d){const e=C.getBlockTitleStore();w().setSelectionAtEnd({store:e})}else b().CH({environment:t,store:C,peekMode:(0,M().kr)(u),resultsStore:null==h?void 0:h.resultsStore,collectionContextStore:u,pageVisitSource:r().tY.Create});return C}},645843:(e,t,n)=>{"use strict";n.d(t,{Al:()=>l,CB:()=>c,H6:()=>s,Ii:()=>g,LE:()=>p,gw:()=>d,iR:()=>r,lf:()=>m,ne:()=>u,zI:()=>a});n(267602),n(653476);var o=()=>n(594546),i=()=>n(701182);function r(e,t){o().lu(e,"timeline_view","timeline_view",5,t)}function a(e,t){o().K4(e,"timeline_zoom_level_update",t)}function s(e,t){o().K4(e,"timeline_today_click",t)}function l(e,t){o().K4(e,"timeline_shift_time_click",t)}function c(e,t){o().K4(e,"timeline_toggle_table_click",t)}function d(e,t){o().K4(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){o().K4(e,"timeline_item_resize",t)}function p(e,t){o().K4(e,"timeline_dependency_arrow_add",t)}function m(e,t){o().K4(e,"timeline_dependency_arrow_delete",t)}function g(e){const{environment:t,collectionContextStore:n,timelineState:o,isFullScreen:r,isRootChild:a}=e,s=o.zoomLevel.state,l=n.normalizedFormatStore.state,c=(0,i().C1)({environment:t,format:l,isFullScreen:r,isRootChild:a}),d=c&&l.timeline_table_properties?l.timeline_table_properties.length:0,u=l.timeline_properties||[],p=u.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:c,show_table_properties_count:d,show_timeline_title:u.length!==p.length,show_timeline_properties_count:p.length}}},715146:(e,t,n)=>{"use strict";function o(e){const{searchQuery:t,collectionContextStore:n}=e;n.collectionViewStore()&&(n.searchQueryStore.setState(t||""),n.groupsStore.resetAllLimits())}n.d(t,{U:()=>o})},397174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});n(267602),n(653476),n(241792),n(258429);var o=n(667294),i=()=>n(846550),r=()=>n(26970),a=()=>n(707513),s=()=>n(384510),l=n(785893);function c(e){const{button:t,isLast:n}=e,s=(0,i().yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Ue.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,r().iv)(t.props.style,s.button,n&&s.buttonLast),hoveredStyle:(0,r().iv)(s.buttonHovered,n&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const d=function(e){let{children:t,isVisible:d,position:u,style:p}=e;const m=(0,n(219727).O7)(),g=(0,i().yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:s().Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:m.device.isMobile?"auto":"none",opacity:m.device.isMobile?1:0,fontFamily:a().F5(n(146947).locale).sans,position:"absolute",right:s().Z.horizontal.small,bottom:s().Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:s().Z.vertical.small,bottom:void 0}})),[m]),h=o.Children.toArray(t).filter(n(696459).$K),f=h.length;return(0,l.jsx)(n(628370).Z,{animate:{opacity:d?1:0},...(0,r().iv)(g.container,p,d&&g.containerHover,"top"===u&&g.containerTop),children:h.map(((e,t)=>{const i=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===n(654133).Z&&o.isValidElement(e))return o.cloneElement(e,{render:(t,n)=>{const o=e.props.render(t,n);return(0,l.jsx)(c,{isLast:i,button:o},e.key)}});if(e.type===n(154186).Z&&o.isValidElement(e))return(0,l.jsx)(c,{isLast:i,button:e},e.key)}}))})}},352766:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AiBlockV2:()=>ht,ConfigurationSkillSelector:()=>ct});n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(653476),n(470928),n(30005),n(241792);var o=()=>n(307312),i=n(667294),r=()=>n(504008),a=()=>n(492788),s=()=>n(146947),l=()=>n(219727),c=()=>n(657320),d=()=>n(142735),u=()=>n(846550),p=()=>n(892103),m=()=>n(696459),g=()=>n(933868),h=()=>n(396136),f=()=>n(752778);function v(e){const{referenceContext:t,getRecordRole:n,getCanReadSlackChannel:o}=e;if(!t)return!0;for(const i of t)if("collection"===i.type){const e=n({id:i.collectionId,table:f().vF})??"none";if(!(0,g().YX)(e))return!1}else if("page"===i.type){const e=n({id:i.pageId,table:h().iU})??"none";if(!(0,g().YX)(e))return!1}else if("slack"===i.type){if(!o(i))return!1}else(0,m().t1)(i);return!0}class C{constructor(e){this.permissionLevel=void 0,this.permissionLevel=e}canOpenConfigurationPanel(){switch(this.permissionLevel){case"editor":case"configuration_reader":return!0;case"reader":return!1;default:(0,m().t1)(this.permissionLevel)}}canEditConfigurationPanel(){switch(this.permissionLevel){case"reader":case"configuration_reader":return!1;case"editor":return!0;default:(0,m().t1)(this.permissionLevel)}}canGenerateBlock(){switch(this.permissionLevel){case"editor":return!0;case"configuration_reader":case"reader":return!1;default:(0,m().t1)(this.permissionLevel)}}canDuplicateBlock(){switch(this.permissionLevel){case"reader":return!1;case"configuration_reader":case"editor":return!0;default:(0,m().t1)(this.permissionLevel)}}}var S=()=>n(565271),y=()=>n(918579),b=()=>n(286977),x=()=>n(374289),k=()=>n(700618),w=()=>n(122158),I=()=>n(481529),_=()=>n(198504),M=()=>n(386616),T=()=>n(492522),j=()=>n(788860),L=()=>n(956898),R=()=>n(513670),P=()=>n(707513),A=()=>n(562109),V=()=>n(824462),B=()=>n(308186),Z=()=>n(627817),D=()=>n(332542),E=()=>n(771678),F=()=>n(636340),U=()=>n(990966),O=()=>n(94912),H=()=>n(269299),K=()=>n(315486),N=()=>n(95176),z=()=>n(198829),W=()=>n(654133),G=()=>n(247724),q=()=>n(982855),Y=()=>n(57687),$=()=>n(949842),J=()=>n(609489),Q=()=>n(12512),X=()=>n(527278),ee=()=>n(352230),te=()=>n(154057),ne=()=>n(191003),oe=()=>n(876822),ie=()=>n(529048),re=()=>n(826955),ae=()=>n(127519),se=()=>n(58836),le=()=>n(265640),ce=()=>n(827973),de=()=>n(448419),ue=()=>n(206352),pe=()=>n(255577),me=()=>n(906651),ge=()=>n(388284),he=()=>n(98275),fe=()=>n(953349),ve=()=>n(623498),Ce=()=>n(864880),Se=()=>n(471645),ye=()=>n(67961),be=n(785893);function xe(e){const{store:t,style:n}=e,o=(0,l().O7)(),r=(0,d().VK)((()=>{const e=t.getNavigableBlockStore();return(null==e?void 0:e.isTemplate())??!1}),[t]),a=(0,d().VK)((()=>t.autoGenerateOnTemplateDuplication()),[t]),s=(0,i.useCallback)((()=>{H().createAndCommit({userAction:"AiBlock.updateBlockConfiguration",environment:o,canUndo:!0,perform:e=>{F().sW({store:t.getFormatStore().getKeyStore("ai_block_configuration_menu"),data:{autoGenerateOnTemplateDuplication:!a},transaction:e})}})}),[t,o,a]);return r?(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",...n},children:[(0,be.jsx)(ye().Z,{children:(0,be.jsx)(j()._H,{id:"AiBlockV2.AutoGenerateOnTemplateDuplicationFieldToggle.Label",defaultMessage:"Autofill when template is duplicated"})}),(0,be.jsx)(Se().Z,{on:a,onClick:s})]}):null}n(821057),n(670560),n(228244);var ke=()=>n(714230),we=()=>n(38883),Ie=()=>n(619186),_e=()=>n(998411),Me=()=>n(801812),Te=()=>n(647439),je=()=>n(159732),Le=()=>n(340531),Re=()=>n(15981),Pe=()=>n(729675),Ae=()=>n(998901),Ve=()=>n(385010),Be=()=>n(1910),Ze=()=>n(740046),De=()=>n(94967),Ee=()=>n(838367),Fe=()=>n(967092),Ue=()=>n(943620),Oe=()=>n(231219),He=()=>n(384241),Ke=()=>n(78014),Ne=()=>n(122671);const ze="notion";function We(e){const{currentContexts:t,handleUpdateContexts:n}=e,[o,r]=(0,i.useState)(!1),a=(0,j().YB)(),s=(0,d().VK)((()=>["notion",...(0,Le().i6)().filter(Je)]),[]),l=(0,i.useCallback)((e=>{n(t.filter((t=>!(0,R().Xy)(t,e))))}),[t,n]),c=(0,u().yK)((e=>({plusTokenWrapper:{backgroundColor:e.accentColors.translucentGray[100],padding:4,cursor:"pointer"},plusIconInner:{fill:e.lightIconColor,height:12,width:12},originContainer:{borderRadius:6,boxShadow:e.inputBoxShadow,backgroundColor:"dark"===e.mode?e.accentColors.translucentGray[100]:"transparent",display:"flex",alignItems:"center",padding:8},tokenWrapStyle:{display:"flex",gap:4,alignItems:"center"}})),[]),p=(0,d().VK)((()=>0===t.length?[(0,be.jsx)("div",{style:c.plusTokenWrapper,children:(0,je().R)(c.plusIconInner)},"plus"),(0,be.jsx)("div",{children:a.formatMessage({id:"ContextTokenInput.contextLabel",defaultMessage:"Context"})},"contextString")]:t.map((e=>"block"===e.type?(0,be.jsx)(Ge,{blockStore:e.blockStore,onRemoveToken:()=>{l(e)}},e.blockStore.id):"slack"===e.type?(0,be.jsx)(qe,{channel:e.channel,onRemoveToken:()=>{l(e)}},e.channel.id):(0,m().t1)(e)))),[t,l,a,c]);return(0,be.jsx)(Fe().ZP,{popupType:Fe().kQ.Popup,open:o,onDismiss:()=>{r(!1)},placementToOrigin:Ae().Placement.Bottom,alignmentToOrigin:Ae().Alignment.Start,origin:(0,be.jsx)(Ne().L7,{placeholder:"",hideInput:!0,inputDivStyle:{margin:void 0},tokenWrapStyle:c.tokenWrapStyle,style:c.originContainer,format:Ne().UR.Select,tokens:p,value:"",onChange:()=>{},onRemoveLastToken:()=>{n(t.slice(0,t.length-1))},onClick:()=>{o||r(!0)},onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}}),render:()=>(0,be.jsx)($e,{availableSearchContexts:s,onSelectResult:e=>{n([...t,e]),r(!1)},currentContexts:t})})}function Ge(e){const{blockStore:t,onRemoveToken:n}=e,o=(0,d().VK)((()=>t.getIcon()),[t]),i=(0,u().yK)((e=>({recordToken:{display:"flex",alignItems:"center"},tokenWrapper:{backgroundColor:e.lightGrayBannerBackground,cursor:"pointer",paddingLeft:4,paddingRight:4,paddingTop:12,paddingBottom:12,borderRadius:4}})),[]),r=(0,d().VK)((()=>{var e;return t.id===(null===(e=oe().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)}),[t]),a=(0,j().YB)();return(0,be.jsx)(Ke().Z,{style:i.tokenWrapper,format:we().lo.Small,value:(0,be.jsxs)("div",{style:i.recordToken,children:[(0,be.jsx)(Ue().Z,{disabled:!0,icon:o,isEmptyPage:!1,size:20,style:{marginRight:4}}),r?a.formatMessage({defaultMessage:"Current page",id:"ContextTokenInput.currentBlock"}):(0,be.jsx)(He().Z,{store:t})]}),showRemoveButton:!0,onClickRemove:n,isSingle:!0,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1})}function qe(e){const{channel:t,onRemoveToken:n}=e,o=(0,u().yK)((e=>({iconStyle:{width:12,height:12,fill:e.lightIconColor},recordToken:{display:"flex",alignItems:"center",gap:4},tokenWrapper:{backgroundColor:e.lightGrayBannerBackground,cursor:"pointer",paddingLeft:4,paddingRight:4,paddingTop:12,paddingBottom:12,borderRadius:4}})),[]),i=(0,fe().N_)({channel:t,styles:o.iconStyle});return(0,be.jsx)(Ke().Z,{style:o.tokenWrapper,format:we().lo.Small,value:(0,be.jsxs)("div",{style:o.recordToken,children:[i,(0,be.jsx)("div",{children:t.name})]}),showRemoveButton:!0,onClickRemove:n,isSingle:!0,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1})}function Ye(e){const{availableSearchContexts:t,currentContexts:n}=e,o=t.length>1,[r,a]=(0,i.useState)(o?void 0:ze),[s,c]=(0,i.useState)(void 0),u=(0,l().O7)(),p=(0,d().VK)((()=>oe().default.state.currentSpaceStore),[]),m=null==p?void 0:p.id,g=(0,d().VK)((()=>Re().X4.state.map((e=>e.store))),[]),[{value:f,status:v}]=(0,Me().r5)((async()=>{if(!s||!p||"notion"!==r)return;return(await(0,Pe().searchPageIds)({environment:u,query:s,limit:20,spaceId:p.id,requireEditPermissions:!1,excludeTemplates:!1,source:"ai_block_v2_page_context_search",boostRecentlyViewedPages:!0})).results.map((e=>new(re().G)(u,{id:e,table:h().iU,spaceId:p.id})))}),[p,u,s,r]),C=(0,d().VK)((()=>s?f??[]:g),[s,f,g]),S=(0,i.useMemo)((()=>C.filter((e=>!n.some((t=>(0,R().Xy)(t,{type:"block",blockStore:e})))))),[C,n]);(0,i.useEffect)((()=>{m&&(0,fe().uV)({environment:u,spaceId:m,externalAuthConfig:{type:"universal",app:"slack",spaceId:m}})}),[u,m]);const{channels:y,isFetchingSlack:b}=(0,d().VK)((()=>{if(!m)return{channels:Ve().w.channels,isFetchingSlack:Ve().w.fetching};const e=Ve().l.getStateForBot({type:"universal",app:"slack",spaceId:m});return{channels:e.channels,isFetchingSlack:e.fetching}}),[m]),x=(0,i.useMemo)((()=>Object.values(y).map((e=>({type:"slack",channel:e})))),[y]),[k,w]=(0,i.useState)([]);(0,i.useEffect)((()=>{0===k.length&&x.length>0&&w(x)}),[x,k.length]);const I=function(e,t){const[n,o]=(0,i.useState)(e);return(0,i.useEffect)((()=>{const n=setTimeout((()=>o(e)),t);return()=>clearTimeout(n)}),[e,t]),n}(s,300),[_,M]=(0,i.useState)([]);(0,i.useEffect)((()=>{let e=!1;return async function(){if("slack"===r&&I){const t=await async function(e,t,n,o){const i=[];for(let r=0;r<t.length;r+=100){const a=t.slice(r,r+100);await new Promise((e=>setTimeout(e,0)));const s=(0,Ie().ZP)(e,a,n,o);i.push(...s)}return(0,Ie().ZP)(e,i,n,o)}(I,x,(e=>e.channel.name));e||M(t)}else M(k)}(),()=>{e=!0}}),[r,I,x,k]);const T=(0,i.useDeferredValue)(I),j=(0,i.useMemo)((()=>"slack"===r&&T?_:k),[r,T,k,_]),L=(0,i.useMemo)((()=>{if(!r)return{type:"choose"};let e=[];return"notion"===r?e=S.map((e=>({type:"block",blockStore:e}))):"slack"===r&&(e=j),s?"slack"===r&&b||"notion"===r&&"pending"===v?{type:r,status:"searching",results:e}:{type:r,status:"loaded",results:e}:{type:r,status:"default",results:e}}),[r,s,S,j,v,b]);return{query:s,setQuery:c,setCurrentSearchContext:a,searchResultMenuState:L}}function $e(e){const{onSelectResult:t,availableSearchContexts:n,currentContexts:o}=e,a=(0,j().YB)(),{searchResultMenuState:s,query:l,setQuery:c,setCurrentSearchContext:d}=Ye({availableSearchContexts:n,currentContexts:o}),p=(0,u().yK)((e=>({searchBox:{paddingBottom:4},backText:{color:e.lightTextColor,fontSize:12},backContentWrap:{display:"flex",alignItems:"center",cursor:"pointer",marginTop:4,marginLeft:8}})),[]),g=(0,i.useMemo)((()=>{if("choose"===s.type)return n.map((e=>({key:e,render:t=>(0,be.jsx)(Qe,{...t,searchContext:e}),action:()=>{d(e)}})));const e=[{key:"search",render:e=>(0,be.jsx)(De().Z,{debugName:"CompletionPopup",capture:!0,children:(0,be.jsx)(Ze().ZP,{...e,value:l??"",style:p.searchBox,onChange:e=>c(e.target.value),placeholder:a.formatMessage({id:"ContextTokenInput.searchPlaceholder",defaultMessage:"Search…"})})}),action:()=>{}}];if("default"===s.status||"loaded"===s.status||"searching"===s.status){if(0===s.results.length)return"searching"===s.status?(e.push({key:"loading",render:()=>(0,be.jsx)(Ee().Z,{title:(0,be.jsx)(j()._H,{defaultMessage:"Loading…",id:"contextTokenInput.searchResultMenu.loading.message"})}),action:()=>{}}),e):(e.push({key:"no-results",render:()=>(0,be.jsx)(Ee().Z,{title:(0,be.jsx)(j()._H,{defaultMessage:"No results found.",id:"contextTokenInput.searchResultMenu.noResults.message"})}),action:()=>{}}),e);const n=new Set(o.map((e=>"slack"===e.type?e.channel.id:e.blockStore.id))),i=s.results.filter((e=>{const t="slack"===e.type?e.channel.id:e.blockStore.id;return!n.has(t)})).sort(((e,t)=>{if("slack"===e.type&&"slack"===t.type)return e.channel.name.localeCompare(t.channel.name);if("block"===e.type&&"block"===t.type){const n=(0,_e().r)(),o=r().Z.withListenerIgnored((()=>e.blockStore.getRenderTitle({userTimeZone:n,intl:a}))),i=r().Z.withListenerIgnored((()=>t.blockStore.getRenderTitle({userTimeZone:n,intl:a})));return(o??"").localeCompare(i??"")}throw new Error("Cannot compare notion blocks and slack channels")}));return e.concat(i.map((e=>"block"===e.type?{key:e.blockStore.id,render:t=>(0,be.jsx)(Oe().Z,{...t,store:e.blockStore}),action:()=>{t(e)}}:"slack"===e.type?{key:e.channel.id,render:t=>(0,be.jsx)(fe().MF,{...t,channel:e.channel}),action:()=>{t(e)}}:void(0,m().t1)(e))))}return(0,m().t1)(s.status)}),[s,n,d,l,p.searchBox,a,c,o,t]);return(0,be.jsx)(z().Z,{menuType:ee().o.Popup,width:300,maxHeight:300,header:(0,be.jsx)("div",{children:"choose"!==s.type&&(0,be.jsx)("div",{style:p.backContentWrap,children:(0,be.jsx)(Be().Z,{ariaLabel:"Back",icon:Te().W,onClick:()=>{d(void 0)},caption:(0,be.jsx)("div",{style:p.backText,children:(0,be.jsx)(j()._H,{id:"ContextTokenInput.backButton",defaultMessage:"Back"})}),captionStyle:{textTransform:void 0,letterSpacing:void 0}})})}),children:(0,be.jsx)(pe().ZP,{type:pe().iW.Vertical,initialFocus:void 0,sections:[{key:"search-results",render:e=>(0,be.jsx)(ge().Z,{...e}),items:g}]})})}const Je=(0,m().AO)((e=>"slack"===e?{true:e}:{false:e})),Qe=i.forwardRef(((e,t)=>{const{searchContext:n,...o}=e;let i,r;return"notion"===n?i=(0,be.jsx)("img",{width:20,src:ke().Z.images.notionLogoPng}):"slack"===n?i=(0,be.jsx)("img",{width:20,src:ke().Z.images.externalIntegrations.slackIconPng}):(0,m().t1)(n),"notion"===n?r=(0,be.jsx)(j()._H,{id:"contextTokenInput.searchContextMenuItem.notion.title",defaultMessage:"Notion"}):"slack"===n?r=(0,be.jsx)(j()._H,{id:"contextTokenInput.searchContextMenuItem.slack.title",defaultMessage:"Slack"}):(0,m().t1)(n),(0,be.jsx)(ce().Z,{ref:t,...o,icon:i,title:r})}));function Xe(e){const t=(0,l().O7)();return{blockConfiguration:(0,d().VK)((()=>{const t=e.getModel();return t?(0,p().Rc)(t):p().zH}),[e]),updateBlockConfiguration:(0,i.useCallback)((n=>{H().createAndCommit({userAction:"AiBlock.updateBlockConfiguration",environment:t,canUndo:!0,perform:t=>{H().applyOperation({store:e,operation:I().op.update({pointer:e.pointer,path:["format"],args:{ai_block_configuration_menu:n}}),transaction:t})}})}),[t,e])}}function et(e){const{store:t,isGenerating:n,permissionLevelCalculator:o}=e,i=st({store:t,isGenerating:n,permissionLevelCalculator:o}),r=(0,u().yK)((()=>({generatingText:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:4,paddingBottom:4,paddingLeft:6,paddingRight:8,fontSize:14,fontWeight:400,opacity:i.isDisabled?.5:1}})),[i.isDisabled]),a=function(e){const t=(0,j().YB)(),n=(0,d().VK)((()=>{const n=e.getFormat().ai_last_edited;return n?t.formatDate(n,{day:"numeric",month:"long",year:"numeric"}):void 0}),[t,e]);return(0,d().VK)((()=>{var o;const i=e.getLastEditedTime();if(!i)return;const r=t.formatDate(i,{day:"numeric",month:"long",year:"numeric"});return r===n?{lastAiEditGenerationTime:n,lastEditedByName:void 0,lastHumanEditedTime:void 0}:{lastEditedByName:(null===(o=e.getLastEditedByStore())||void 0===o?void 0:o.getDisplayName(t,!1))??void 0,lastHumanEditedTime:r,lastAiEditGenerationTime:n}}),[t,n,e])}(t);return(0,be.jsx)(W().Z,{renderTooltip:()=>(0,be.jsx)(tt,{store:t,disabledResult:i,lastGeneratedProps:a}),disableTooltip:!i.isDisabled&&!a,render:e=>(0,be.jsx)("div",{style:r.generatingText,...e,children:n?(0,be.jsx)(j()._H,{id:"aiBlock.generate.loading.label",defaultMessage:"Generating…"}):(0,be.jsx)(j()._H,{id:"aiBlock.configurableTitle.editlabel",defaultMessage:"Generate"})})})}function tt(e){const{disabledResult:t,lastGeneratedProps:n}=e,o=(0,u().yK)((e=>({disabledText:{opacity:t.isDisabled?.5:1},darkTextColor:{color:"#787774"}})),[t.isDisabled]);return t.isDisabled?(0,be.jsx)("div",{children:t.disabledMessage}):n?(0,be.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:4},children:[n.lastEditedByName&&n.lastHumanEditedTime&&(0,be.jsx)("div",{style:o.darkTextColor,children:(0,be.jsx)(j()._H,{defaultMessage:"Edited by <whiteName>{personName}</whiteName> {timestamp}",id:"AiBlockV2.lastGeneratedByHuman",values:{personName:n.lastEditedByName,whiteName:e=>(0,be.jsx)("span",{style:{color:"white"},children:e}),timestamp:n.lastHumanEditedTime}})}),(0,be.jsx)("div",{style:o.darkTextColor,children:(0,be.jsx)(j()._H,{defaultMessage:"Generated by <white>AI</white> {timestamp}",id:"AIBlockV2.LastGeneratedAt",values:{timestamp:n.lastAiEditGenerationTime,white:e=>(0,be.jsx)("span",{style:{color:"white"},children:e})}})})]}):null}function nt(e){return!0}function ot(e){const{handleGenerateClick:t,store:n,isGenerating:a,permissionLevelCalculator:c,blockConfiguration:p,updateBlockConfiguration:g}=e,f=st({store:n,isGenerating:a,permissionLevelCalculator:c}),[v,C]=(0,i.useState)(!1),S=(0,u().yK)((e=>({openConfigurationMenuStyles:{fontWeight:400,cursor:"pointer"},faceIcon:{paddingRight:4,height:18,width:18,opacity:f.isDisabled?.5:1},divider:{borderRight:`1px solid ${e.regularDividerColor}`},actionbarWrapperStyle:{position:"absolute",zIndex:T().t8,top:-40,right:-2,borderRadius:10,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:P().F5(s().locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD,visibility:v?"hidden":"visible"}})),[f.isDisabled,v]),y=(0,d().qz)(void 0,ie().Z),b=(0,l().O7)();(0,d().VK)((()=>{E().JJ.state===n.pointer.id&&(!function(e){var t;const{updateBlockConfiguration:n,blockConfiguration:o,environment:i}=e,a=new Set,s=null===(t=oe().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(s&&"context"in o){for(const e of o.context??[])if("collection"===e.type||"page"===e.type){const t=new(re().G)(i,{table:h().iU,id:e.pageId,spaceId:s});r().Z.withListenerIgnored((()=>!t.canRead()))&&a.add(e.pageId)}else"slack"===e.type||(0,m().t1)(e);n({...o,context:(o.context??[]).filter((e=>"slack"===e.type?!a.has(e.channel.id):!a.has(e.pageId)))})}}({environment:b,blockConfiguration:p,updateBlockConfiguration:g}),y.setState({open:!0}),C(!0),E().JJ.setState(void 0))}),[p,y,b,n,g]);const x=(0,i.useCallback)((()=>{y.setState({open:!1})}),[y]),k=(0,d().VK)((()=>y.state.open),[y]),w=(0,j().YB)(),I=c.canOpenConfigurationPanel();return(0,be.jsx)(o().E.div,{animate:{opacity:1},initial:{opacity:0},style:S.actionbarWrapperStyle,children:(0,be.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,be.jsx)(rt,{disabledResult:f,onClick:t,isGenerating:a,store:n,permissionLevelCalculator:c}),(0,be.jsx)("div",{style:S.divider}),(0,be.jsx)(de().ZP,{disabled:!I,open:k,buttonPopupStore:y,render:()=>(0,be.jsx)(lt,{store:n,updateBlockConfiguration:g,setIsPopupVisible:C,onClosePopup:x,handleGenerateClick:t,isGenerating:a,permissionLevelCalculator:c}),renderOrigin:e=>(0,be.jsx)(W().Z,{renderTooltip:()=>w.formatMessage({defaultMessage:"Insufficient permissions to view",id:"AiBlockV2.insufficientPermissionsTooltip"}),disableTooltip:I,render:()=>(0,be.jsx)(it,{...e})}),popupType:de().Z4.Popup,originGap:8})]})})}Qe.displayName="SearchContextMenuItem";const it=i.forwardRef((function(e,t){const{onClick:o,...i}=e,r=(0,u().yK)((e=>({wrapper:{display:"flex",alignItems:"center",cursor:"pointer",paddingLeft:10,paddingRight:10,paddingTop:6,paddingBottom:6}})),[]);return(0,be.jsx)(n(154186).Z,{style:r.wrapper,ignoreLocalHoverState:!0,hovered:!1,onClick:o,ref:t,...i,children:(0,be.jsx)(j()._H,{id:"AiBlockV2.editConfiguration",defaultMessage:"Settings"})})})),rt=i.forwardRef((function(e,t){const{onClick:n,disabledResult:o,isGenerating:i,store:r,permissionLevelCalculator:a}=e,s=o.isDisabled,l=(0,u().yK)((e=>({wrapper:{cursor:s?"not-allowed":"pointer",paddingTop:6,paddingBottom:6,paddingRight:6,paddingLeft:6,fontSize:12,opacity:s?.5:1,display:"flex",alignItems:"center"}})),[s]);return(0,be.jsx)("div",{style:l.wrapper,onClick:s?void 0:n,ref:t,children:(0,be.jsx)(et,{isGenerating:i,store:r,permissionLevelCalculator:a})})})),at=(0,j().vU)({disabledAiCredits:{id:"AiBlockV2.disabled.aiCredits",defaultMessage:"AI is currently disabled"},currentlyGenerating:{defaultMessage:"Generation in progress",id:"AiBlockV2.currentlyGenerating"},cannotEditBlock:{defaultMessage:"This block cannot be edited",id:"AiBlockV2.cannotEditBlock"},noInstructions:{defaultMessage:"No instructions provided",id:"AiBlockV2.noInstructions"},insufficientPermissions:{defaultMessage:"You do not have permission to generate this block",id:"AiBlockV2.insufficientPermissions"},failedToGenerate:{id:"AIBlockV2.FailedToGenerate",defaultMessage:"Failed to generate. Please try again later."},custom:{id:"AiBlockV2.skillSelector.custom",defaultMessage:"Custom"},summarize:{id:"AiBlockV2.skillSelector.summarize",defaultMessage:"Summarize"},extractKeyPoints:{id:"AiBlockV2.skillSelector.extractKeyPoints",defaultMessage:"Extract key points"}});function st(e){const{store:t,isGenerating:n,permissionLevelCalculator:o}=e,i=(0,c().l)(),{blockConfiguration:r}=Xe(t);return(0,d().VK)((()=>{const e=i&&i.publicEditModeStore.state;return(0,q().GD)(e)?n?{isDisabled:!0,disabledMessage:X().Z.formatMessage(at.currentlyGenerating)}:!t.canEdit()||t.isNonEditableState()?{isDisabled:!0,disabledMessage:X().Z.formatMessage(at.cannotEditBlock)}:o.canGenerateBlock()?"summarizeThisPage"===r.type||"extractKeyPointsFromThisPage"===r.type||r.autofillInstructions?{isDisabled:!1}:{isDisabled:!0,disabledMessage:X().Z.formatMessage(at.noInstructions)}:{isDisabled:!0,disabledMessage:X().Z.formatMessage(at.insufficientPermissions)}:{isDisabled:!0,disabledMessage:X().Z.formatMessage(at.disabledAiCredits)}}),[i,n,t,o,r])}function lt(e){const{store:t,setIsPopupVisible:n,handleGenerateClick:o,isGenerating:r,permissionLevelCalculator:a,updateBlockConfiguration:s}=e;(0,i.useEffect)((()=>(n(!0),()=>n(!1))),[n]);const l=(0,u().yK)((e=>({popup:{marginTop:4,width:300,padding:8,display:"flex",flexDirection:"column",gap:10}})),[]),c=(0,d().VK)((()=>{const e=(0,p().Rc)(t.getModel());if(!e)return null;switch(e.type){case"custom":return(0,be.jsx)(ut,{blockConfiguration:e,updateBlockConfiguration:t=>{s({...e,...t})}});case"extractKeyPointsFromThisPage":case"summarizeThisPage":return(0,be.jsx)(dt,{});default:(0,m().t1)(e)}}),[t,s]),g=st({store:t,isGenerating:r,permissionLevelCalculator:a});return(0,be.jsxs)("div",{style:l.popup,children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,be.jsx)("div",{style:{fontSize:14,fontWeight:500,marginLeft:4},children:(0,be.jsx)(j()._H,{id:"aiBlock.configuration.blockSettingsTitle",defaultMessage:"AI block"})}),(0,be.jsx)(ct,{store:t})]}),(0,be.jsx)(xe,{style:{marginLeft:4,marginRight:4},store:t}),c,(0,be.jsx)(me().Z,{style:{cursor:g.isDisabled?"not-allowed":"pointer",marginBottom:4},onClick:o,isLoading:r,disabled:g.isDisabled,isGray:g.isDisabled,children:(0,be.jsx)(et,{isGenerating:r,store:t,permissionLevelCalculator:a})})]})}function ct(e){const{store:t}=e,n=(0,u().yK)((e=>({icon:{marginLeft:4,fill:e.lightIconColor,width:16,height:12,marginTop:2},optionIcon:{marginRight:4,fill:e.lightIconColor,width:16,height:16},dropdownLabel:{fontSize:14,fontWeight:400,display:"flex",alignItems:"center"},secondaryIconColor:{color:e.lightIconColor},secondaryTextColor:{color:e.lightTextColor}})),[]),o=[{key:"custom",label:(0,be.jsx)(j()._H,{...at.custom}),icon:e=>(0,k().y)({...n.optionIcon,...e&&{fill:void 0}})},{key:"summarizeThisPage",label:(0,be.jsx)(j()._H,{...at.summarize}),icon:e=>(0,y().Y)({...n.optionIcon,...e&&{fill:void 0}})},{key:"extractKeyPointsFromThisPage",label:(0,be.jsx)(j()._H,{...at.extractKeyPoints}),icon:e=>(0,w().o)({...n.optionIcon,...e&&{fill:void 0}})}],{currentSkillType:r,updateBlockSkillType:a}=function(e){const t=(0,i.useRef)(void 0),{blockConfiguration:n,updateBlockConfiguration:o}=Xe(e);return{updateBlockSkillType:(0,i.useCallback)((e=>{var i;if(e===n.type)return;if(e===(null===(i=t.current)||void 0===i?void 0:i.type))return o(t.current),void(t.current=n);let r;switch(e){case"custom":r={type:"custom",version:2,title:n.title,autofillInstructions:void 0,placeholderText:void 0,context:void 0};break;case"extractKeyPointsFromThisPage":r={type:"extractKeyPointsFromThisPage",version:2,title:n.title};break;case"summarizeThisPage":r={type:"summarizeThisPage",version:2,title:n.title};break;default:(0,m().t1)(e)}t.current=r,o(r)}),[n,o]),currentSkillType:n.type}}(t),s=o.find((e=>e.key===r))??null,l=(0,i.useCallback)(((e,t)=>{a(e),t()}),[a]);return(0,be.jsx)(de().ZP,{popupType:de().Z4.Popup,placementToOrigin:de().pO.Top,renderOrigin:e=>(0,be.jsxs)(le().D,{...e,style:n.dropdownLabel,hoveredStyle:{background:"rgba(0, 0, 0, 0)"},children:[null==s?void 0:s.icon(),(0,be.jsx)("div",{style:n.secondaryTextColor,children:null==s?void 0:s.label}),(0,x().i)(n.icon)]}),render:e=>{const t={menuType:ee().o.Popup,width:220},n=[{key:"skillSelectorSection",render:e=>(0,be.jsx)(ge().Z,{...e}),items:o.map((t=>({key:t.key,action:()=>l(t.key,e.close),render:e=>(0,be.jsx)(ce().Z,{...e,title:t.label,shouldWrapCaption:!0,left:t.icon(!0),right:t.key===r?(0,be.jsx)("div",{style:{width:14},children:(0,b().e)()}):void 0})})))}];return(0,be.jsx)(z().Z,{...t,children:(0,be.jsx)(pe().ZP,{initialFocus:void 0,type:pe().iW.Vertical,sections:n,style:{position:"relative"}})})}})}function dt(){const e=(0,u().yK)((e=>({textWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:4,marginRight:4},currentPageLabel:{color:e.lightTextColor,fontSize:14},pageLabel:{fontSize:14}})),[]);return(0,be.jsxs)("div",{style:e.textWrapper,children:[(0,be.jsx)("div",{style:e.pageLabel,children:(0,be.jsx)(j()._H,{defaultMessage:"Page",id:"AiBlockV2.extractKeyPointsFromThisPage.contextLabel"})}),(0,be.jsx)("div",{style:e.currentPageLabel,children:(0,be.jsx)(j()._H,{defaultMessage:"Current page",id:"AiBlockV2.extractKeyPointsFromThisPage.currentPageLabel"})})]})}function ut(e){const{blockConfiguration:t,updateBlockConfiguration:n}=e,o=(0,i.useCallback)((e=>{"custom"===t.type&&n({autofillInstructions:e})}),[t,n]),{store:r}=(0,Y().Cl)({initialValue:"custom"===t.type?t.autofillInstructions:void 0,onChange:o}),a=(0,j().YB)(),s=t.context,l=(0,i.useCallback)((e=>{n({context:e})}),[n]);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(pt,{contexts:s,updateContexts:l}),(0,be.jsx)(mt,{store:r,placeholder:a.formatMessage({id:"AiBlockV2.AutofillInstructions.Placeholder",defaultMessage:"Describe the content that should be generated. Use '@' to mention people, pages, or dates and '#' for slack channels."}),minTextHeight:115,showAtMentionMenu:!0,fontSize:14,fontWeight:400})]})}function pt(e){const{contexts:t,updateContexts:n}=e,o=(0,d().VK)((()=>oe().default.state.currentSpaceStore),[]),r=(0,l().O7)(),a=(0,d().VK)((()=>(0,m().$K)(t)&&o?t.map((e=>"page"===e.type||"collection"===e.type?{type:"block",blockStore:new(re().G)(r,{table:h().iU,id:e.pageId,spaceId:o.id})}:"slack"===e.type?e:void(0,m().t1)(e))):[]),[t,o,r]),s=(0,i.useCallback)((e=>{const t=e.map((e=>{if("block"===e.type){var t;const n=null===(t=e.blockStore.getCollectionPointer())||void 0===t?void 0:t.id;return n?{pageId:e.blockStore.id,collectionId:n,type:"collection"}:{pageId:e.blockStore.id,type:"page"}}if("slack"===e.type)return e;(0,m().t1)(e)}));return n(t)}),[n]),c=(0,u().yK)((e=>({titleStyle:{fontSize:14,fontWeight:500,color:e.lightTextColor,marginRight:4,display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"}})),[]);return o?(0,be.jsx)("div",{style:c.titleStyle,children:(0,be.jsx)(ue().Z,{debugName:"PromptOrActionInput",capture:!0,allowMenuList:!1,allowEsc:!0,children:(0,be.jsx)(We,{currentContexts:a,handleUpdateContexts:s})})}):null}function mt(e){const{store:t,minTextHeight:n=50,placeholder:o,showAtMentionMenu:s,fontSize:c=14,fontWeight:d=500}=e,p=(0,u().yK)((e=>({titleStyle:{color:e.lightTextColor,marginRight:4,display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},inputWrap:{display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:e.inputBoxShadow,minHeight:n,backgroundColor:"dark"===e.mode?e.accentColors.translucentGray[100]:"transparent",borderRadius:6,overflow:"inherit",flexGrow:1,flexShrink:1,paddingLeft:6,paddingRight:6},textContainer:{fontSize:c,fontWeight:d,flexGrow:1,padding:"4px 0",maxHeight:240,overflow:"auto"}})),[c,d,n]),m=(0,l().O7)();(0,i.useEffect)((()=>{const e=r().Z.withListenerIgnored((()=>{var e;return null===(e=oe().default.state.currentSpaceStore)||void 0===e?void 0:e.id}));e&&(0,fe().uV)({environment:m,spaceId:e,externalAuthConfig:{type:"universal",app:"slack",spaceId:e}})}),[m]);const g=(0,i.useCallback)((async()=>{const e=ae().default.state;"editing"===e.mode&&(0,ne().qS)(e.multiSelection)&&e.multiSelection.start.store===t||(U().setSelectionAtEnd({store:t}),await a().default.afterNextFlush())}),[t]),h=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),async function(){await g(),await a().default.afterNextFlush(),Z().lZ({environment:m,mentionTypes:K().OZ,usePopupOnMobile:!0,mentionSectionOrdering:K()._R})}()}),[m,g]);return(0,be.jsxs)("div",{style:p.inputWrap,className:G().Wh_,children:[(0,be.jsx)(ve().Z,{placeholder:o,style:p.textContainer,disabled:!1,store:t,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!1,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableMobileActionBar:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,inPageFind:Q().B3.none}),s&&(0,be.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",flexDirection:"column",alignItems:"flex-end"},children:(0,be.jsx)(N().B,{onClick:h})})]})}function gt(e){const t=(0,l().O7)(),{spaceId:n,currentUserId:o}=(0,d().VK)((()=>{var e,t;return{spaceId:null===(e=oe().default.state.currentSpaceStore)||void 0===e?void 0:e.id,currentUserId:null===(t=oe().default.state.currentUserStore)||void 0===t?void 0:t.id}}),[]),i=t.defaultRecordCache.inMemoryRecordCache.makeGetRecordRoleFn(t.currentUser.id),r=(0,d().VK)((()=>e.getModel()),[e]),a=(0,d().VK)((()=>{var t;return null===(t=e.getNavigableBlockStore())||void 0===t?void 0:t.pointer}),[e]);return(0,d().VK)((()=>function(e){const{model:t,spaceId:n,currentUserId:o,getRecordRole:i,getCanReadSlackChannel:r,currentPagePointer:a}=e;if(!t)return"reader";if(!n||!o)return"reader";const s=i(t.pointer)??"none";if(!(0,g().YX)(s))return"reader";if(!(0,g().J5)(s))return"configuration_reader";const l=(0,p().Rc)(t);if("custom"===l.type)return v({referenceContext:l.context,getCanReadSlackChannel:r,getRecordRole:i})?"editor":"configuration_reader";if("summarizeThisPage"===l.type||"extractKeyPointsFromThisPage"===l.type)return a?v({referenceContext:[{type:"page",pageId:a.id}],getCanReadSlackChannel:r,getRecordRole:i})?"editor":"configuration_reader":"reader";(0,m().t1)(l)}({spaceId:n,currentUserId:o,getCanReadSlackChannel:nt,getRecordRole:i,model:r,currentPagePointer:a})),[n,o,i,r,a])}function ht(e){const{store:t,hoveredOrSelectionState:n,setHaloShouldBeVisible:o,showingOverlay:r,disabled:a,disableHoverMenu:s}=e,c=(0,l().O7)(),u=(0,j().YB)(),{prompt:p}=(0,Ce().GS)({store:t}),m=new C(gt(t)),g=(0,i.useCallback)((e=>{B().vC({message:e,showCancel:!1,keepFocus:!1,items:[{label:X().Z.formatMessage(B().F9.dismissButtonLabel),onAccept:R().yR}]})}),[]),[h,f]=(0,i.useState)(!1),v=(0,d().VK)((()=>t.isGenerating()),[t]);(0,i.useEffect)((()=>{f(v)}),[v]);const y=(0,i.useCallback)((async()=>{var e,n;A().RL(c,{type:"generate",prompt_key:p.key}),f(!0);const o=null===(e=oe().default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!o)return;const i=null===(n=t.getNavigableBlockStore())||void 0===n?void 0:n.pointer;if(!i)return;const r=await V().callStreamApi({eventName:"generateAiBlock",environment:c,data:{blockPointer:{...t.pointer,spaceId:o},parentPagePointer:{...i,spaceId:o}}});function a(){g(u.formatMessage(at.failedToGenerate))}if(!(0,S().Hu)(r)&&"success"===r.type&&L().H1.is(r.data))for await(const s of r.data)(0,S().nj)(s)?vt({environment:c,operations:s.operations,blockIds:s.blockIds,aiBlockStore:t}):a();else a();f(!1)}),[c,u,g,p.key,t]),b=(0,i.useCallback)((e=>{(0,$().ZP)({event:e,context:$().Af.EditorClick,callback:()=>{(0,te().uG)(e)||H().createAndCommit({userAction:"TransclusionContainerBlock.handleEmptyClick",environment:c,canUndo:!0,perform:e=>{O().ls({environment:c,store:t,transaction:e})}})}})}),[c,t]),x=(0,d().VK)((()=>!t.hasContent()),[t]),{blockConfiguration:k,updateBlockConfiguration:w}=Xe(t),I=(0,d().VK)((()=>t.getContentStore()),[t]),_=(0,l().Fy)();return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{style:{paddingLeft:8},onClick:x?b:void 0,children:(0,be.jsx)(he().Z,{emptyPlaceholder:(0,be.jsx)(ft,{placeholderText:u.formatMessage({id:"AiBlockV2.EmptyEditingPlaceholder",defaultMessage:"Click to edit"})}),disabled:a||h,store:I,disableHoverMenu:s||n!==J().x.SelectedDescendant,disableDrag:_.isMobile})}),r&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ce().sy,{hoveredOrSelectionState:n,setHaloShouldBeVisible:o,colorVariant:"blue"}),(0,be.jsx)(se().p,{allowSelectionWithin:!1,children:(0,be.jsx)(ot,{blockConfiguration:k,updateBlockConfiguration:w,store:t,handleGenerateClick:y,isGenerating:h,permissionLevelCalculator:m})})]})]})}function ft(e){const{placeholderText:t}=e,n=(0,u().yK)((e=>({textWrapper:{caretColor:e.lightTextColor,color:e.lightTextColor,paddingTop:4,paddingBottom:4}})),[]);return(0,be.jsx)("div",{style:n.textWrapper,children:t})}function vt(e){const{environment:t,operations:n,blockIds:o,aiBlockStore:i}=e;H().createAndCommit({userAction:"aiBlockV2.handleGenerateStreamResponse",environment:t,canUndo:!0,perform:e=>{i.getContentIds().forEach((t=>{H().applyOperation({store:i,operation:(0,_().$j)({blockParentId:i.id,recordId:t}),transaction:e})}));for(const o of n)if((0,M().Qf)(o)){const n=new(re().G)(t,o.pointer);H().applyCrdtTextOperation({store:n,operation:o,invertedOperation:void 0,transaction:e})}else if((0,I().V_)(o)||(0,I().SH)(o))switch(o.pointer.table){case h().iU:{const n=new(re().G)(t,o.pointer);"set"===o.command&&0===o.path.length?F().j4({environment:t,id:o.pointer.id,type:o.args.type,properties:o.args.properties,format:o.args.format,permissions:o.args.permissions,inMemoryRecordCache:n.inMemoryRecordCache,spaceId:n.getSpaceId(),transaction:e}):H().applyOperation({store:n,operation:o,transaction:e});break}default:{const n=new(re().ST)({environment:t,pointer:o.pointer,path:o.path});H().applyOperation({store:n,operation:o,transaction:e})}}else(0,m().t1)(o);for(const n of o){const o=new(re().G)(t,{table:h().iU,id:n,spaceId:i.getSpaceId()});D().jG({childStore:o,parentStore:i,transaction:e})}F().sW({store:i.getFormatStore(),data:{ai_last_edited:Date.now()},transaction:e})}})}},632599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(667294),i=()=>n(846550),r=()=>n(729201),a=()=>n(312578),s=n(785893);function l(e){let{loadingMessage:t}=e;const n=(0,i().Fg)(),l=(0,r().Z)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(a().Z,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},887330:(e,t,n)=>{"use strict";n.d(t,{C:()=>i,L:()=>r});var o=()=>n(707513);function i(e){const{theme:t,isInHomeWidget:n}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...n?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:o().Ue.regular,lineHeight:1,borderRadius:6}}function r(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:o().Ue.regular,lineHeight:1,borderRadius:4}}},755589:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});n(667294);var o=()=>n(968061),i=()=>n(788860),r=()=>n(231077),a=()=>n(1910),s=()=>n(45909),l=n(785893);const c=(0,i().vU)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function d(){const e=(0,i().YB)();return(0,l.jsx)(a().Z,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,s().X)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{r().openAppMenu()},icon:o().h,ariaLabel:e.formatMessage(c.menu)})}},75751:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(788860),s=()=>n(421654),l=()=>n(839821),c=()=>n(269299),d=()=>n(191586),u=()=>n(685472),p=()=>n(774985),m=()=>n(397174),g=()=>n(628370),h=()=>n(154186),f=()=>n(710706),v=n(785893);const C=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:d,height:m,proxyWidth:g}=e;const h=(0,i().O7)(),f=(0,r().qz)(void 0,n(233417).Z),C=(0,r().VK)((()=>a||"suggest"===n(279386).MT.getMode(t)),[a,t]),b=(0,r().VK)((()=>t.getCover()),[t]),x=(0,r().Kw)(p().Z),[k,w]=(0,o.useState)(void 0);if(!b)return null;const I=x.loadingMode!==u().LU&&x.loadingMode!==u().SS;return(0,v.jsx)(n(910293).Z,{mouseStore:f,onFlushTemporaryPosition:e=>function(e,t,n){const{imagePosition:o,reset:i}=e;c().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:n,canUndo:!0,perform:e=>{s().Mp({store:t,coverPosition:o,transaction:e}),i()}})}(e,t,h),renderControl:e=>{let{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:i,isVisible:r,isRepositioning:a}=e;return(0,v.jsx)(y,{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:i,isVisible:r,isRepositioning:a,lastProxiedUrl:k,store:t,disabled:C,paddingRight:l,paddingLeft:d,mouseStore:f})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:m,maxHeight:280,cursor:"default"},render:e=>(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(n(135499).Z,{url:b.cover,isAuthenticated:!0,permissionRecord:b.pointer,width:g,onFinishedLoadingProxyUrl:w,render:(t,o)=>{const i={width:"100%",height:m,maxHeight:280,objectFit:"cover",opacity:I?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},r={width:"100%",height:m,maxHeight:280};return(0,v.jsx)(n(167499).B,{src:o,placeholderSrc:I?x.dataURL:void 0,placeholderBehavior:I?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:r,imageStyle:i,onLoadComplete:S,testId:"pageCover"})}}),I&&(0,v.jsxs)("div",{style:n(518242).IA,children:[(0,v.jsx)(n(312578).Z,{size:"md",style:{marginRight:4}}),(0,v.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,v.jsx)(n(410184).Z,{percentage:x.uploadProgress})})]})]})})};function S(){p().Z.reset()}function y(e){let{isVisible:t,isRepositioning:n,handleCancelClick:s,handleRepositionClick:c,handleSavePositionClick:C,lastProxiedUrl:S,store:y,disabled:b,paddingRight:x,paddingLeft:k,mouseStore:w}=e;const I=(0,i().O7)(),_=(0,a().YB)(),M=(0,o.useCallback)((e=>function(e,t,n,o,i){i.reset();const r=e.target.getBoundingClientRect();l().j({environment:t,intl:n,store:o,rect:r})}(e,I,_,y,w)),[I,_,y,w]),T=(0,r().VK)((()=>p().Z.state.loadingMode),[]),j=(0,r().VK)((()=>function(e){let t;return t=e.isFullWidth()?"100%":d().zL,t}(y)),[y]);if(b||T!==u().LU)return null;const{device:L}=I,{isMobile:R}=L;return(0,v.jsx)(g().Z,{animate:{width:j,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,v.jsxs)(m().Z,{isVisible:t,position:"bottom",style:{marginRight:x,marginLeft:k},children:[!n&&(0,v.jsx)(h().Z,{style:{borderRight:R?"none":void 0,...f().ar},onClick:M,children:(0,v.jsx)(a()._H,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!n&&!R&&(0,v.jsx)(h().Z,{style:{...f().ar,borderRight:"none"},onClick:e=>c(e,S),children:(0,v.jsx)(a()._H,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),n&&!R&&(0,v.jsx)(h().Z,{style:f().ar,onClick:C,children:(0,v.jsx)(a()._H,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),n&&!R&&(0,v.jsx)(h().Z,{style:{...f().ar,borderRight:"none"},onClick:s,children:(0,v.jsx)(a()._H,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},986520:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(667067),l=()=>n(827282),c=n(785893);const d=(0,l().IU)("mobileLocked",{viewBox:"0 0 26 26",svg:(0,c.jsx)("path",{d:"M7.88672 23.417H18.1133C19.499 23.417 20.1758 22.7295 20.1758 21.2256V13.3408C20.1758 11.9873 19.6172 11.2891 18.4678 11.1709V8.46387C18.4678 4.41406 15.8145 2.45898 13 2.45898C10.1855 2.45898 7.53223 4.41406 7.53223 8.46387V11.2246C6.47949 11.3857 5.82422 12.0732 5.82422 13.3408V21.2256C5.82422 22.7295 6.50098 23.417 7.88672 23.417ZM9.26172 8.23828C9.26172 5.54199 10.9912 4.11328 13 4.11328C15.0088 4.11328 16.7383 5.54199 16.7383 8.23828V11.1602L9.26172 11.1709V8.23828Z"})}),u=(0,l().IU)("mobileUnlocked",{viewBox:"0 0 32 26",svg:(0,c.jsx)("path",{d:"M7.89355 23.417H18.1094C19.4951 23.417 20.1826 22.7295 20.1826 21.2256V13.3408C20.1826 12.0303 19.6562 11.332 18.582 11.1816V8.23828C18.582 5.54199 20.3115 4.11328 22.3203 4.11328C24.3291 4.11328 26.0586 5.54199 26.0586 8.23828V10.623C26.0586 11.2783 26.4346 11.6006 26.9287 11.6006C27.4014 11.6006 27.7881 11.3105 27.7881 10.623V8.46387C27.7881 4.41406 25.1348 2.45898 22.3203 2.45898C19.5059 2.45898 16.8525 4.41406 16.8525 8.46387V11.1602L8.1084 11.1816C6.72266 11.1816 5.82031 11.8584 5.82031 13.3408V21.2256C5.82031 22.7295 6.50781 23.417 7.89355 23.417Z"})}),p=(0,l().IU)("unlockedFilled",{viewBox:"0 0 16 16",svg:(0,c.jsx)("path",{d:"M2.33301 14.6338H8.94336C9.85938 14.6338 10.3105 14.1826 10.3105 13.1914V8.08496C10.3105 7.2168 9.95508 6.75195 9.24414 6.65625V4.83105C9.24414 3.22461 10.2627 2.35645 11.4863 2.35645C12.71 2.35645 13.7354 3.22461 13.7354 4.83105V6.28711C13.7354 6.76562 14.0156 7.01855 14.3848 7.01855C14.7471 7.01855 15.0273 6.7793 15.0273 6.28711V4.96094C15.0273 2.36328 13.2979 1.1123 11.4863 1.1123C9.6748 1.1123 7.94531 2.36328 7.94531 4.96094V6.64258L2.44922 6.64941C1.5332 6.64941 0.96582 7.10742 0.96582 8.08496V13.1914C0.96582 14.1826 1.41699 14.6338 2.33301 14.6338Z"})});var m=()=>n(989478),g=()=>n(499110),h=()=>n(788860),f=()=>n(491927),v=()=>n(421654),C=()=>n(269299),S=()=>n(482162),y=()=>n(826955),b=()=>n(154186),x=()=>n(654133),k=()=>n(49489);const w=function(e){let{store:t,disableTooltip:o,hideText:a,isInlineCollection:s,buttonStyle:l,lockStore:d}=e;const{isMobile:u}=(0,i().Fy)(),p=(0,r().qz)(d,n(385021).Z);return u?(0,c.jsx)(P,{store:t,lockStore:p,hideText:a}):(0,c.jsx)(R,{store:t,disableTooltip:o,hideText:a,isMobile:u,isInlineCollection:s,buttonStyle:l,lockStore:p})};function I(e,t,n){return{display:"flex",alignItems:"center",whiteSpace:"nowrap",fontSize:e?12:14,borderRadius:4,padding:"0 6px",marginRight:2,height:24,marginTop:e?1:0,marginLeft:e?0:-5,...t&&{marginLeft:e?8:12,marginRight:0},...n}}function _(e,t,n,o,i){return{...I(e,o,i),color:n.lightTextColor,fill:n.lightIconColor}}function M(e,t,n,o,i){return{...I(e,o,i),paddingLeft:5,border:`1px solid ${n.blueColor}`,color:n.blueColor,fill:n.blueColor}}function T(e){let{store:t}=e;const n=(0,a().Fg)(),o=(0,r().VK)((()=>t.getFormat().block_locked_by),[t]),i=(0,h().YB)(),s=(0,r().VK)((()=>o&&(0,g().Nz)(i,y().t1.createChildStore(t,{table:m().KJ,id:o}).getModel())),[o,i,t]);return o?(0,c.jsx)("div",{children:(0,c.jsx)(h()._H,{defaultMessage:"Locked by {lockedByPerson}{br}to prevent accidental editing.{br}<prompttext>Click to unlock</prompttext>",id:"pageLockIndicator.lockedTooltip",values:{lockedByPerson:(0,c.jsx)("b",{children:s}),br:(0,c.jsx)("br",{}),prompttext:e=>(0,c.jsx)("span",{style:{color:n.mediumInvertedTextColor},children:e})}})}):null}function j(e,t,n){C().createAndCommit({userAction:"PageLockTopbarIndicator.handleLockClick",environment:e,canUndo:!0,perform:n=>{v().Wq({environment:e,store:t,isLocked:!1,transaction:n})}}),n.setState({...n.state,justUnlocked:!0});const o=t.getType();if(o){var i;let n;t.isCollectionView()&&(n=t.getCollectionStore()),f().UJ(e,{from:"topbar",block_type:o,locked:!1,collection_id:null===(i=n)||void 0===i?void 0:i.id})}}function L(e,t,n){C().createAndCommit({userAction:"PageLockTopbarIndicator.handleUnlockClick",environment:e,canUndo:!0,perform:n=>{v().Wq({environment:e,store:t,isLocked:!0,transaction:n})}}),n.setState({...n.state,justUnlocked:!1});const o=t.getType();if(o){var i;let n;t.isCollectionView()&&(n=t.getCollectionStore()),f().UJ(e,{from:"topbar",block_type:o,locked:!0,collection_id:null===(i=n)||void 0===i?void 0:i.id})}}function R(e){let{store:t,disableTooltip:n,hideText:l,isMobile:d,isInlineCollection:u,buttonStyle:m,lockStore:g}=e;const f=(0,a().Fg)(),v=(0,i().O7)(),C=(0,o.useCallback)((()=>L(v,t,g)),[v,t,g]),y=(0,o.useCallback)((()=>j(v,t,g)),[v,t,g]),w=(0,r().VK)((()=>t.isLocked()),[t]),I=(0,r().VK)((()=>g.state.justUnlocked),[g]),R=(0,r().VK)((()=>S().default.state.open&&S().default.state.targetStore.id===t.id),[t.id]);return w?(0,c.jsx)(x().Z,{renderTooltip:()=>(0,c.jsx)(T,{store:t}),disableTooltip:n,render:e=>(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[R&&(0,c.jsx)(k().Z,{}),(0,c.jsxs)(b().Z,{style:_(d,0,f,u,m),onClick:y,...e,children:[(0,s().Q)({width:16,marginRight:l?void 0:4}),!l&&(0,c.jsx)("div",{style:{lineHeight:1},children:(0,c.jsx)(h()._H,{defaultMessage:"Locked",id:"pageLockIndicator.lockedButton.label"})})]})]})}):I?(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,c.jsx)(k().Z,{}),(0,c.jsxs)(b().Z,{style:M(d,0,f,u,m),onClick:C,hoveredStyle:{background:f.outlineBlueButtonHoveredBackground},pressedStyle:{background:f.outlineBlueButtonPressedBackground},children:[p({width:16,marginRight:l?void 0:4}),!l&&(0,c.jsx)("div",{style:{lineHeight:1},children:(0,c.jsx)(h()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.relockButton.label"})})]})]}):null}function P(e){let{store:t,lockStore:n,hideText:s}=e;const l=(0,a().Fg)(),p=(0,i().O7)(),m=(0,o.useCallback)((()=>L(p,t,n)),[p,t,n]),g=(0,o.useCallback)((()=>j(p,t,n)),[p,t,n]),f=(0,r().VK)((()=>t.isLocked()),[t]),{WindowSizeStore:v}=p,C=(0,r().VK)((()=>v.getSafePaddingLeftCSS(10)),[v]),S=(0,r().VK)((()=>v.getSafePaddingRightCSS(14)),[v]),y=(0,r().VK)((()=>n.state.justUnlocked),[n]);return f?(0,c.jsxs)(b().Z,{onClick:g,mobileFeedback:!0,style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:C,paddingRight:S},children:[d({width:20,marginRight:6}),!s&&(0,c.jsx)("div",{children:(0,c.jsx)(h()._H,{defaultMessage:"Locked",id:"pageLockIndicator.mobileLockedButton.label"})})]}):y?(0,c.jsxs)(b().Z,{onClick:m,mobileFeedback:!0,style:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingLeft:C,paddingRight:S,color:l.blueColor,fill:l.blueColor},children:[u({height:26,width:32,marginRight:6}),!s&&(0,c.jsx)("div",{children:(0,c.jsx)(h()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.mobileRelockButton.label"})})]}):null}},407291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});n(241792);var o=n(667294),i=()=>n(142735),r=()=>n(788860),a=()=>n(88476),s=()=>n(852465),l=()=>n(301741),c=()=>n(122671),d=n(785893);const u=function(e){const{origin:t,permissionsInviteStore:u,store:p,handleClickRemoveToken:m,handleInputChange:g,handleInputSubmit:h,defaultRoleForNonBot:f,right:v,focus:C,handleFocus:S}=e,y=(0,i().VK)((()=>0!==(0,n(122479).eL)()),[]),b="share_menu"===t||"add_members"===t,x="add_members"===t,[k,w]=(0,i().AF)(u),I=(0,n(219727).O7)(),{device:_}=I,M=(0,r().YB)(),{tokenQuery:T}=k,j=(0,n(551861).S)(p),L=k.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,i=(0,a().OA)(e),s="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,c=i?j:void 0,u={key:t,target:e,onClickRemove:m,role:k.inviteRole,shouldWrap:b,showInfoIcon:Boolean(c)};return b&&s?(0,d.jsx)(n(654133).Z,{placement:n(998901).Placement.Top,disableTooltip:x,renderTooltip:()=>i?c||(0,d.jsx)(r()._H,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:s}}):s,render:n=>(0,o.createElement)("span",{...n,key:t},(0,d.jsx)(l().Z,{...u,backgroundColor:(0,a().gQ)(e)}))},t):(0,o.createElement)(l().Z,{...u,key:t})}));return(0,d.jsx)(c().ZP,{focus:_.isMobile?void 0:C,focusInitial:_.isMobile,focusAfterAnimation:!0,onClick:()=>{_.isMobile||null==S||S()},format:c().UR.Share,value:T,onChange:g,type:"email",tokens:L,disabled:!1,autoComplete:"off",placeholder:b?y?M.formatMessage({defaultMessage:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):M.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,s().Mm)(p)||(0,s().R$)(p)?M.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):M.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...k};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=f),w(k)},right:v,inputFullWidth:!0,inputAndTokenWrapRightStyle:{paddingTop:I.device.isMobile?0:k.isInviteTargetsEmpty?7:6,paddingBottom:I.device.isMobile||b?0:4},onEmptySubmit:()=>h(),dontShowBorderBottom:_.isAndroid,showBorder:b,...!b&&{style:{padding:"10px  9px 4px 9px"}},...b&&{style:{borderRadius:4,paddingTop:k.isInviteTargetsEmpty?3:0,paddingBottom:0,...C&&{background:"none"}}}})}},910293:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var o=n(667294),i=()=>n(146947),r=()=>n(219727),a=()=>n(142735),s=()=>n(26970),l=()=>n(788860),c=()=>n(568017),d=()=>n(513670),u=()=>n(707513),p=()=>n(326966),m=()=>n(628370),g=n(785893);const h={isRepositioning:!1};const f=function(e){const t=(0,o.useRef)(null),i=(0,r().O7)(),{isMobile:l}=(0,r().Fy)(),[c,u]=(0,o.useState)(h),m=(0,o.useCallback)((()=>{u(h)}),[]),{renderControl:f,onFlushTemporaryPosition:C,style:S,source:y,store:b}=e,{isRepositioning:x,image:k,startDragRenderedPosition:w,startDragImageScreenHeight:I}=c,_=(0,a().VK)((()=>0===n(965903).default.state.stores.length),[]),[M,T]=(0,o.useState)(!1),j=(0,a().qz)(e.mouseStore,n(233417).Z),L=(0,a().VK)((()=>j.state.mouseEntered),[j]),R=(0,n(846550).yK)((()=>({dragContainer:{width:"100%",cursor:x?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[x]),P=(0,a().VK)((()=>function(e,t,n){return(0,d().hj)(n)?n:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,d().hj)(e))return e}const n=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().z4)(t)?n:t}}const o=t.getFormat(),i=o.page_cover_position;if((0,d().hj)(i))return i;return n}(e,t)}(y,b,c.temporaryPosition)),[c.temporaryPosition,y,b]);(0,o.useEffect)((()=>{const e=e=>{const n=t.current;n&&!n.contains(e.target)&&x&&C({imagePosition:P,reset:()=>{j.reset(),m()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[P,x,j,C,m]),x&&!_&&m();const A=(0,o.useMemo)((()=>(0,d().P2)((e=>{j.setState({...j.state,mouseEntered:!0})}),100)),[j]),V=(0,o.useMemo)((()=>(0,d().Ds)((e=>{j.setState({...j.state,mouseEntered:!1})}),100)),[j]),B=(0,o.useCallback)(((e,t)=>{n(879952).ZH({environment:i});const o=new Image;o.onload=()=>{u((e=>({...e,isRepositioning:!0,image:o})))},t&&(o.src=t)}),[i]),Z=(0,o.useCallback)((e=>{C({imagePosition:P,reset:()=>{m()}})}),[P,C,m]),D=(0,o.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,n(474788).E)(t)&&T(!0)}),[]),E=(0,o.useCallback)((()=>{T(!0)}),[]),F=(0,o.useCallback)((e=>{if(k&&x){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/k.width*k.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:P})))}}}),[k,P,x]),U=(0,o.useCallback)((e=>{if(x){const t=e.diffY/(I||0)+(w||0);u((e=>({...e,temporaryPosition:(0,d().NM)((0,n(120420).Z)(t,0,1),4)})))}}),[x,I,w]),O=(0,o.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),H=(0,a().VK)((()=>f({handleRepositionClick:B,handleSavePositionClick:Z,handleCancelClick:m,isVisible:l||L||M||x,isRepositioning:x})),[B,Z,M,l,x,L,f,m]);return(0,g.jsxs)("div",{ref:t,onFocus:D,onBlur:E,onMouseEnter:A,onMouseMove:A,onMouseLeave:V,...(0,s().iv)(R.container,S),children:[(0,g.jsx)(n(790964).Z,{onDraggableDragStart:F,onDraggableDragMove:U,onDraggableDragEnd:O,onDraggableDragCancel:O,disabled:!x,render:t=>(0,g.jsx)("div",{...(0,s().iv)(R.dragContainer),...t,children:e.render({imagePosition:P,isRepositioning:x})})}),(0,g.jsx)(v,{small:e.small,isRepositioning:x}),H]})};function v(e){let{small:t,isRepositioning:n}=e;if(t)return null;const o={background:c().ZP.blackWithAlpha(.4),borderRadius:4,color:c().ZP.white,fontSize:12,fontFamily:u().F5(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,g.jsx)(m().Z,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,g.jsx)(l()._H,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},946735:(e,t,n)=>{"use strict";n.d(t,{Dr:()=>a,Jt:()=>s,Su:()=>r});var o=()=>n(677559);const i={pageVerification:new(o().Ss)("pageVerification",(()=>Promise.all([n.e(62743),n.e(44832),n.e(55253)]).then(n.bind(n,711296)))),pageVerificationBadge:new(o().Ss)("pageVerificationBadge",(()=>Promise.all([n.e(62743),n.e(44832),n.e(11189),n.e(53335),n.e(46616),n.e(61171),n.e(63502),n.e(99590),n.e(81917),n.e(10553),n.e(22371),n.e(77679),n.e(64153)]).then(n.bind(n,776864)))),pageVerificationMenuRenderer:new(o().Ss)("pageVerificationMenuRenderer",(()=>Promise.all([n.e(62743),n.e(44832),n.e(11189),n.e(53335),n.e(46616),n.e(61171),n.e(63502),n.e(99590),n.e(81917),n.e(10553),n.e(22371),n.e(77679),n.e(71e3)]).then(n.bind(n,852586))))},r=(0,o().kF)(i.pageVerification,(e=>e.PageAddVerificationButton)),a=(0,o().kF)(i.pageVerificationBadge,(e=>e.PageVerificationBadge)),s=(0,o().kF)(i.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},953349:(e,t,n)=>{"use strict";n.d(t,{MF:()=>F,N_:()=>B,U7:()=>D,ZP:()=>P,uV:()=>E});n(670560),n(267602),n(653476),n(470928),n(241792),n(228244);var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(714230),l=()=>n(235484),c=()=>n(775404),d=()=>n(286977),u=()=>n(535014),p=()=>n(899548),m=()=>n(121183),g=()=>n(788860),h=()=>n(513670),f=()=>n(855741),v=()=>n(696459),C=()=>n(824462),S=()=>n(388915),y=()=>n(527278),b=()=>n(762300),x=()=>n(729201),k=()=>n(876822),w=()=>n(138912),I=()=>n(385010),_=()=>n(827973),M=()=>n(740046),T=()=>n(312578),j=()=>n(388284),L=n(785893);const R=(0,g().vU)({channelSearchPlaceholder:{id:"notificationRuleSettings.selectChannelView.searchInput.placeholder",defaultMessage:"Search…"}});function P(e){const{currentNotificationChannels:t,onNotificationChannelSelect:n,onClose:a,onNewSlackAccountAdded:c,renderMenu:u,channelFilter:m,workflowExternalAuthenticationPointer:C,isMultiSelectMode:I,shouldHideSlackAccountSection:P}=e,Z=(0,i().O7)(),{isMobile:F}=(0,i().Fy)(),U=(0,r().Kw)(w().default.completeSlackAuthentications),O=e.currentExternalAuthentication??h().Ps(U),H=(0,o.useMemo)((()=>C?{type:"workflow",workflowExternalAuthenticationId:C.id}:O?{type:"external",botId:O.id}:void 0),[C,O]);o.useEffect((()=>{const e=C?null==C?void 0:C.spaceId:null==O?void 0:O.space_id;H&&e&&E({environment:Z,spaceId:e,externalAuthConfig:H})}),[Z,H,O,C]);const K=(null==C?void 0:C.id)??(null==O?void 0:O.id),[N,z]=o.useState(""),{loadedChannelsForAccount:W,isLoading:G}=D(H),q=(0,r().VK)((()=>w().default.integrations.state.find((e=>e.id===l().nO))),[]),Y=(0,r().VK)((()=>{var e;return null===(e=k().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),$=o.useCallback((e=>{O?n(e,O.parent_id):C&&n(e,C.id),I||a()}),[n,O,C,a,I]),J=A(),Q=o.useCallback((e=>{const{channel:n}=e;return{key:n.id,render:e=>(0,L.jsx)(_().Z,{...e,icon:B({channel:n,styles:J.icon}),desktopIconStyle:{width:8},title:n.name,right:(null==t?void 0:t.some((e=>e.id===n.id)))&&(0,d().e)(J.icon)}),action:()=>{$(n)}}}),[$,J.icon,t]),{publicChannels:X,privateChannels:ee,personalChannels:te}=o.useMemo((()=>function(e,t){const n=[],o=[],i=[];for(const r of e)t&&!t(r)||("public"===r.type?n.push(r):"private"===r.type?o.push(r):"me"===r.type?i.push(r):(0,v().t1)(r.type));return{publicChannels:n,privateChannels:o,personalChannels:i}}(W,m)),[m,W]),ne=o.useCallback((()=>X.map((e=>({menuListItem:Q({channel:e}),channelName:e.name})))),[X,Q]),oe=o.useCallback((()=>ee.map((e=>({menuListItem:Q({channel:e}),channelName:e.name})))),[ee,Q]),ie=o.useCallback((()=>te.map((e=>({menuListItem:Q({channel:e}),channelName:e.name})))),[te,Q]),re=o.useCallback((()=>ne().map((e=>{let{menuListItem:t,channelName:n}=e;if(V({channelName:n,query:N}))return t})).filter(v().$K)),[ne,N]),ae=o.useCallback((()=>oe().map((e=>{let{menuListItem:t,channelName:n}=e;if(V({channelName:n,query:N}))return t})).filter(v().$K)),[oe,N]),se=o.useCallback((()=>ie().map((e=>{let{menuListItem:t,channelName:n}=e;if(V({channelName:n,query:N}))return t})).filter(v().$K)),[ie,N]),le=o.useCallback((()=>O?(0,b().jg)(O).organizationName:"Workflows organization"),[O]),ce=o.useCallback((()=>{if(!K)return[];const e=[],t=re(),n=ae(),o=se();return o.length>0&&e.push({key:"personal-channels",render:e=>(0,L.jsx)(j().Z,{...e,title:le()}),items:o}),t.length>0&&e.push({key:"public-channels",render:e=>(0,L.jsx)(j().Z,{...e,topBorder:o.length>0,title:0===o.length&&le()}),items:t}),n.length>0&&e.push({key:"private-channels",render:e=>(0,L.jsx)(j().Z,{...e,topBorder:t.length>0,title:0===o.length&&t.length>0&&le()}),items:n}),e}),[K,re,ae,se,le]),de=(0,x().Z)(G,500,300);if(!K||!q)return null;const ue=[{key:"search-input-section",items:[{key:"search-input-item",action:()=>{},render:e=>(0,L.jsx)("div",{children:(0,L.jsx)(M().ZP,{...e,inputLeft:(0,L.jsx)(M().f_,{icon:p().R}),inputRight:de&&(0,L.jsx)(T().Z,{style:{marginRight:2}}),showClearButton:!0,placeholder:y().Z.formatMessage(R.channelSearchPlaceholder),focusInitial:!F,value:N,onChange:e=>{z(e.target.value)}})})}],render:e=>(0,L.jsx)(j().Z,{...e})},...ce()];return t||P||ue.push({key:"add-another-slack-account-section",items:[{key:"add-another-slack-account-item",action:async()=>{if(!Y)return;const e=await S().hM({environment:Z,integration:q,spaceId:Y,from:"collection_view_settings"});f().x.isFail(e)||c()},render:e=>(0,L.jsx)(_().Z,{...e,icon:(0,L.jsx)("img",{src:s().Z.images.externalIntegrations.slackIconPng,style:{width:18,height:"auto"}}),title:(0,L.jsx)(g()._H,{id:"notificationRuleSettings.selectChannelView.setupAnotherSlackAccount.label",defaultMessage:"Add another Slack account"})})}],render:e=>(0,L.jsx)(j().Z,{...e,topBorder:!0})}),(0,L.jsx)(L.Fragment,{children:u(ue)})}function A(){return(0,a().yK)((e=>({icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor},container:{backgroundColor:e.popoverBackground,marginTop:12,marginBottom:6},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,color:e.regularIconColor}})),[])}function V(e){const{channelName:t,query:n}=e;return 0===n.length||t.toLocaleLowerCase().indexOf(n.trim().toLocaleLowerCase())>=0}function B(e){const{channel:t,styles:n}=e;return"private"===t.type?(0,u().b)(n):"me"===t.type?(0,c().p)(n):(0,m().J)(n)}const Z=15e3;function D(e){return(0,r().VK)((()=>{if(!e)return{loadedChannelsForAccount:[],isLoading:!1};const t=I().l.getStateForBot(e);return{loadedChannelsForAccount:Object.values(t.channels),isLoading:t.fetching}}),[e])}async function E(e){const{environment:t,externalAuthConfig:n,spaceId:o}=e,i=I().l.getStateForBot(n);if(i.fetching||Date.now()-i.lastRefreshed<Z)return;let r;for(I().l.updateStateForBot(n,{fetching:!0,lastRefreshed:Date.now()});;){const e=await C().callApi({eventName:"getExternalNotificationChannels",environment:t,data:{spaceId:o,cursor:r,...n}});if("success"!==e.type){console.error(e.error);break}{const t={};for(const n of e.data.channels)t[n.id]=n;if(I().l.addChannelsForBot(n,t),r=e.data.cursor,!r)break}await new Promise((e=>setTimeout(e,0)))}I().l.updateStateForBot(n,{fetching:!1})}const F=o.forwardRef(((e,t)=>{const{channel:n,currentNotificationChannels:o,...i}=e,r=A();return(0,L.jsx)(_().Z,{ref:t,...i,icon:B({channel:n,styles:r.icon}),desktopIconStyle:{width:8},title:n.name,right:(null==o?void 0:o.some((e=>e.id===n.id)))&&(0,d().e)(r.icon)})}));F.displayName="SlackChannelMenuItem"},49489:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(667294);var o=n(785893);const i=function(){const e=(0,n(846550).yK)((e=>({separator:{height:14,width:1,marginLeft:6,marginRight:6,background:e.darkDividerColor}})),[]);return(0,o.jsx)("div",{style:e.separator})}},577521:(e,t,n)=>{"use strict";n.d(t,{C:()=>x,V:()=>y});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(263555),l=()=>n(788860),c=()=>n(718959),d=()=>n(247724),u=()=>n(793935),p=()=>n(291335),m=()=>n(998901),g=()=>n(725751),h=()=>n(628370),f=()=>n(1910),v=()=>n(64260),C=()=>n(654133),S=n(785893);function y(e){const t=(0,i().O7)(),n=(0,i().Fy)(),o=(0,l().YB)(),a=(0,r().Kw)(p().sidebarMouseEnteredStore),d=(0,r().VK)((()=>g().default.state.isShowingTabBar||!1),[]),m=(0,r().Kw)(c().tu),h=o.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),f=(!n.isElectronMac||!m)&&!d&&a;return(0,S.jsx)(x,{isVisible:f,icon:s().D,caption:h,onClick:()=>{u().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const b={width:16,height:16,fill:"inherit"};function x(e){const t=(0,i().Fy)(),n=(0,a().yK)((t=>({keyboardShortcut:{color:t.mediumInvertedTextColor},button:{fill:t.mediumIconColor},enterAnimation:{opacity:e.isVisible?0:1},animation:{opacity:e.isVisible?1:0}})),[e.isVisible]),r=(0,o.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...n.button,...e.style})),[e.style,n.button,t.isMobile]);return(0,S.jsx)(C().Z,{renderTooltip:()=>(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,S.jsx)(v().Z,{style:n.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?m().Placement.Right:m().Placement.Bottom,render:n=>(0,S.jsx)(h().Z,{tag:f().Z,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:r,hoveredStyle:e.hoveredStyle,iconStyle:b,mobileFeedback:t.isMobile,onClick:e.onClick,className:d().Mfh,...n})})}},125659:(e,t,n)=>{"use strict";n.d(t,{DK:()=>c,L1:()=>s,Y$:()=>l,cu:()=>a});n(821057);var o=n(667294);const i="collectionContextStore",r=(0,n(949744).Q)({displayName:i,legacyContextKey:i,modernContextDefaultValue:void 0}),a=r.context,s=r.Provider;function l(){const e=o.useContext(a);if(void 0===e)throw new Error(`No context provided: ${i}`);return e}function c(){return o.useContext(a)}},681035:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});var o=()=>n(677559);const i=new(o().Ss)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([n.e(62743),n.e(37912)]).then(n.bind(n,682652));return{CollectionItemCover:e}})),r=(0,o().kF)(i,(e=>e.CollectionItemCover))},302485:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var o=()=>n(677559);const i=new(o().Ss)("HelpButtonContent",(async()=>await n.e(53060).then(n.bind(n,687569)))),r=(0,o().kF)(i,(e=>e.HelpButtonContent))},416277:(e,t,n)=>{"use strict";n.d(t,{R7:()=>r,TG:()=>a,gM:()=>s});var o=()=>n(677559);const i=new(o().Ss)("login",(async()=>{const{default:e}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,604922)),{default:t}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,663920)),{default:o}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,735246)),{default:i}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,99389)),{default:r}=await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(18216),n.e(72646),n.e(86595),n.e(82544),n.e(62949),n.e(54535)]).then(n.bind(n,12872));return{LoginPage:e,LoginDesktop:t,LoginMobileNative:o,FrontLoginPage:i,LoginModalContent:r}})),r=(0,o().kF)(i,(e=>e.LoginPage)),a=(0,o().kF)(i,(e=>e.FrontLoginPage)),s=(0,o().kF)(i,(e=>e.LoginModalContent))},521412:(e,t,n)=>{"use strict";n.d(t,{X:()=>o});const o=new(n(677559).Ss)("pageCovers",(async()=>n.e(1642).then(n.bind(n,832783))))},871953:(e,t,n)=>{"use strict";n.d(t,{TL:()=>u,nc:()=>d,ue:()=>c});var o=()=>n(816512),i=()=>n(934158),r=()=>n(696056),a=()=>n(989478),s=()=>n(696459),l=()=>n(826955);function c(e){const{parentStore:t,pointer:n}=e,i=(0,l().Kv)(t,n).getValue();if(i)return(0,o().LU)({table:n.table,value:i})}function d(e){const{parentStore:t,pointer:n}=e;return n.table===r().cZ?l().Qx.createChildStore(t,n):n.table===a().KJ?l().U6.createChildStore(t,n):n.table===i().y0?l().fg.createChildStore(t,n):void(0,s().t1)(n)}function u(e){return e.table===r().cZ?(0,o().ON)(e.getValue()):e.table===a().KJ?(0,o().m3)(e.getValue()):e.table===i().y0?(0,o().I4)(e.getValue()):void(0,s().t1)(e)}},244303:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});n(667294);var o=()=>n(816512),i=()=>n(696459),r=()=>n(634760),a=()=>n(981583),s=n(785893);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().YU)(t)?(0,s.jsx)(r().Z,{botValue:t.asActor,...n}):(0,o().$S)(t)?(0,s.jsx)(a().Z,{userValue:t.asActor,...n}):(0,o().Iq)(t)?(0,s.jsx)(a().Z,{userValue:void 0,...n}):void(0,i().t1)(t)}},706363:(e,t,n)=>{"use strict";n.d(t,{Ct:()=>i,LO:()=>o,iN:()=>r});const o=40,i=48,r=60},761936:(e,t,n)=>{"use strict";n.d(t,{L:()=>d});var o=()=>n(642240),i=()=>n(338530);const r={ko:()=>n.e(60692).then(n.bind(n,299435)),es:()=>n.e(20883).then(n.bind(n,960142)),de:()=>n.e(83224).then(n.bind(n,299606)),fr:()=>n.e(85038).then(n.bind(n,604240)),pt:()=>n.e(72138).then(n.bind(n,515748)),zh:()=>n.e(17835).then(n.bind(n,240169)),ja:()=>n.e(96377).then(n.bind(n,770488)),da:()=>n.e(57677).then(n.bind(n,317410)),fi:()=>n.e(66970).then(n.bind(n,266265)),nb:()=>n.e(93031).then(n.bind(n,189761)),nl:()=>n.e(62579).then(n.bind(n,360701)),sv:()=>n.e(60382).then(n.bind(n,575660))};let a=!1,s=!1;async function l(e){for(const[n,i]of Object.entries(e.emojiLocaleKeywords)){var t;o().Q4[n]={...o().Q4[n],keywords:[...i,...(null===(t=o().Q4[n])||void 0===t?void 0:t.keywords)||[]]}}await i().Z.waitUntilLoaded(),i().Z.update((t=>{let{emojiByName:n,...o}=t;return{...o,emojiByName:{...n,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=n(146947).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const d=(0,n(924665).Z)((async()=>{await async function(){s||(await l(await n.e(83552).then(n.bind(n,716373))),s=!0)}(),await c()}))},762300:(e,t,n)=>{"use strict";n.d(t,{P9:()=>l,YJ:()=>c,jc:()=>s,jg:()=>a});n(670560),n(267602),n(653476);var o=()=>n(235484),i=()=>n(530980),r=()=>n(525807);function a(e){if(e.integration_id!==o().nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,n,i]=t;return{organizationName:n,accountName:i}}function s(e){return i().kk5.fromValue(r().PJ,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const n=s(e);return!!n&&t(n)})):e}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n={};for(const o of e){const{accountName:e,organizationName:i}=a(o);d({query:t,accountName:e,organizationName:i})&&(n[e]||(n[e]=[]),n[e].push({externalAuthentication:o,workspaceName:i}))}return n}function d(e){const{accountName:t,organizationName:n,query:o}=e;if(0===o.length)return!0;const i=t.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0,r=!!n&&n.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0;return i||r}},17922:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=()=>n(239482),i=()=>n(852465),r=()=>n(345918);function a(e,t){return(0,r().Q6)(e)?{isGuestRequestRequired:!0}:t?{isStoreInTeam:!0,teamAllowsGuests:!0,spaceAllowsGuests:!0,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1}}const s=function(e){return(0,n(142735).VK)((()=>{if((0,i().R$)(e))return{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};if(!(0,i().OY)(e))return(0,r().kt)(e)?a(e,void 0):{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};const t=(0,o().VP)(e),s=(0,o().Pj)(e),l=s||n(876822).default.state.currentSpaceStore;if((0,r().kt)(l))return a(l,t);const c=!(null!=s&&s.getDisableGuests());return t?{isStoreInTeam:!0,teamAllowsGuests:!t.getDisableGuests(),spaceAllowsGuests:c,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:c,isGuestRequestRequired:!1}}),[e])}},551861:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});n(667294);var o=()=>n(788860),i=()=>n(17922),r=n(785893);function a(e){const t=(0,i().Z)(e);return t.isGuestRequestRequired?(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.guestRequestRequired",defaultMessage:"This guest must be approved by a workspace owner first"}):t.isStoreInTeam?t.teamAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",defaultMessage:"This teamspace doesn't allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]}):t.spaceAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",defaultMessage:"This workspace doesn't allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]})}},228772:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});var o=()=>n(142735),i=()=>n(876822);function r(){return(0,o().VK)((()=>i().default.state.currentSpaceStore),[])}},110372:(e,t,n)=>{"use strict";n.d(t,{YF:()=>c,bl:()=>l,gF:()=>a,i6:()=>d,lZ:()=>s});var o=()=>n(954949),i=()=>n(594546),r=()=>n(749826);function a(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),r().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),r().default.logEvent("callout_click",t.callout_key)}function l(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),r().default.logEvent("callout_dismiss",t.callout_key)}function c(e,t){const{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:r,eligibility_timeouts:a,blocklist:s}=t;(0,i().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:r,eligibility_timeouts:a,blocklist:s}}})}function d(e,t){(0,i().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},129813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RequestMembersModal:()=>L,default:()=>R,messages:()=>j});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(788860),l=()=>n(568017),c=()=>n(707513),d=()=>n(930085),u=()=>n(849129),p=()=>n(102182),m=()=>n(206352),g=()=>n(291198),h=()=>n(198829),f=()=>n(923550),v=()=>n(967092),C=()=>n(906651),S=()=>n(67961),y=()=>n(407291),b=()=>n(711658),x=()=>n(303858),k=()=>n(352230),w=()=>n(88476),I=()=>n(998901),_=()=>n(282194),M=()=>n(136765),T=n(785893);const j=(0,s().vU)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",defaultMessage:"Add a reason (optional)"}});function L(e){const t=(0,i().O7)(),{store:n,origin:L,analyticsFrom:R}=e,{modalOpen:P,focus:A}=(0,r().VK)((()=>{const{open:e,focus:t}=_().default.state;return{modalOpen:e,focus:t}}),[]),V=(0,o.useCallback)((e=>{P&&_().default.setState({..._().default.state,open:!0,focus:e})}),[P]),B=(0,r().qz)(void 0,M().Z),Z=(0,s().YB)(),D=(0,a().yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},container:{padding:20},title:{fontWeight:c().Ue.medium,marginBottom:10},reasonTitle:{color:l().ZP.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20}})),[]);(0,o.useEffect)((()=>{V("invites")}),[V]);const E=e=>{e.currentTarget===e.target&&V("none")},F=async()=>{d().d(t,{...x().Oh(t,B.state.contextualInviteStore),from:R}),u().eH({permissionsInviteStore:B.state.permissionsInviteStore,contextualInviteStore:B.state.contextualInviteStore}),B.state.contextualInviteStore.startRequestMembership();const e=B.state.contextualInviteStore.state.invitedUsers;_().default.close();const o=await x().fC({environment:t,spaceStore:n,originId:void 0,originType:R,reasonMessage:B.state.permissionsInviteStore.state.emailMessage,contextualInviteStore:B.state.contextualInviteStore,intl:Z});U({success:o,intl:Z,users:e}),B.reset()},U=e=>{const{success:t,intl:n,users:o}=e;0!==o.length&&(t?p().oV({label:n.formatMessage({id:"requestMembersModal.requestSuccess.toast",defaultMessage:"Successfully requested membership for {users} to your workspace admins."},{users:x().uJ(o,n)})}):p().oV({label:n.formatMessage({id:"requestMembersModal.requestFail.toast",defaultMessage:"Failed to invite {users} to the workspace."},{users:x().uJ(o,n)})}))};return(0,T.jsx)(f().Z,{modalStyle:D.modalStyle,open:P,onDismiss:async()=>{if(!(await(0,w().Aw)({environment:t,permissionsInviteStoreState:B.state.permissionsInviteStore.state,from:"space_settings_add_members"})))return _().default.close(),void B.reset();V("none")},renderContent:()=>(0,T.jsxs)("div",{style:D.container,onClick:E,children:[(0,T.jsx)("div",{style:D.title,onClick:E,children:(0,T.jsx)(s()._H,{id:"requestMembersModal.title",defaultMessage:"Request to invite members"})}),(0,T.jsx)(v().ZP,{popupType:v().kQ.Popup,alignmentToOrigin:I().Alignment.Start,placementToOrigin:I().Placement.Bottom,open:"invites"===A,sameWidthAsOrigin:!0,originGap:10,disableMouseCapture:!0,origin:(0,T.jsx)(y().Z,{permissionsInviteStore:B.state.permissionsInviteStore,store:n,handleClickRemoveToken:e=>{u().PV({targetToRemove:e,permissionsInviteStore:B.state.permissionsInviteStore,defaultRoleForNonBot:"read_and_write"})},handleInputChange:async e=>{V("invites"),await u().jC({environment:t,event:e,permissionsInviteStore:B.state.permissionsInviteStore})},handleInputSubmit:async()=>{},origin:"add_members",defaultRoleForNonBot:"read_and_write",right:(0,T.jsx)("div",{}),focus:"invites"===A,handleFocus:()=>V("invites")}),onDismiss:()=>V("none"),render:()=>{const e=(0,T.jsx)(b().Z,{permissionsInviteStore:B.state.permissionsInviteStore,store:n,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:k().o.Popup,disableScroller:!1};return(0,T.jsx)("div",{children:(0,T.jsx)(h().Z,{...t,width:380,children:e})})},style:{width:"100%"}}),(0,T.jsx)("div",{style:D.reasonTitle,onClick:E,children:(0,T.jsx)(s()._H,{id:"requestMembersModal.reasonForRequest.title",defaultMessage:"Reason for request"})}),(0,T.jsx)(m().Z,{debugName:"RequestMembersModal",capture:!0,allowEsc:!0,children:(0,T.jsx)(g().Z,{textarea:!0,style:{padding:8},value:B.state.permissionsInviteStore.state.emailMessage,focus:"reason"===A,onFocus:()=>V("reason"),onChange:e=>{B.state.permissionsInviteStore.setState({...B.state.permissionsInviteStore.state,emailMessage:e.target.value})},placeholder:Z.formatMessage(j.reason_placeholder)})}),(0,T.jsxs)("div",{style:D.footer,onClick:E,children:[(0,T.jsx)(S().Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,T.jsx)(s()._H,{id:"RequestMembersModal.caption",defaultMessage:"Your admins will approve or decline your request."})}),(0,T.jsx)(C().Z,{isLarge:!0,style:D.requestInvitesButton,onClick:F,children:(0,T.jsx)(s()._H,{id:"requestMembersModal.requestInvitesButton.label",defaultMessage:"Request invites"})})]})]}),origin:(0,T.jsx)("div",{onClick:()=>{_().default.open()},children:L})})}const R=L},772327:(e,t,n)=>{"use strict";n.d(t,{_:()=>m});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(788860),l=()=>n(921981),c=()=>n(842574),d=()=>n(416277),u=()=>n(520849),p=n(785893);function m(e){let{loginModalStore:t,loginStore:n,title:a,description:s,isSignup:c,disableLoginLink:u,redirectURL:m,className:v,onDismiss:C,trustedDomain:S}=e;const y=(0,i().O7)(),b=(0,r().VK)((()=>t.state.open),[t]),x=(0,o.useId)(),k=(0,o.useId)(),w={loginStore:n,title:a,description:s,isSignup:c,redirectURL:m,disableLoginLink:u,titleAriaId:x,descriptionAriaId:k,trustedDomain:S};return(0,p.jsx)(l().c,{ariaLabelledBy:x,ariaDescribedBy:k,isOpen:b,onDismiss:()=>{f({loginModalStore:t,loginStore:n,onDismiss:C})},areaConstraint:{width:{type:"fixed",length:480},height:{type:"unlimited",scroll:"allow"}},deprecatedCompatibilityOverrides:{tabletsUsePhoneDisplayMode:!0},render:()=>(0,p.jsx)(g,{children:(0,p.jsxs)("div",{className:v,children:[!y.device.isMobile&&(0,p.jsx)(h,{loginModalStore:t,loginStore:n,onDismiss:C}),(0,p.jsx)(d().gM,{...w})]})})})}function g(e){let{children:t}=e;return(0,i().O7)().device.isMobile?(0,p.jsx)(c().T,{type:u().Z.Y,children:t}):t}function h(e){let{loginModalStore:t,loginStore:n,onDismiss:o}=e;const i=(0,a().Fg)();return(0,p.jsx)("div",{style:{fontSize:14,color:i.mediumTextColor,position:"absolute",right:0,marginTop:16,marginRight:16,cursor:"pointer",zIndex:1},onClick:()=>{f({loginModalStore:t,loginStore:n,onDismiss:o})},children:(0,p.jsx)(s()._H,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function f(e){const{loginModalStore:t,loginStore:n,onDismiss:o}=e;n.reset(),t.setState({open:!1}),o&&o()}},309797:(e,t,n)=>{"use strict";n.d(t,{D9:()=>Z,GB:()=>D,L2:()=>B,Nr:()=>R,Qg:()=>V,WJ:()=>F,h9:()=>L,m4:()=>j,mj:()=>P,n1:()=>E,sD:()=>A});var o=()=>n(219727),i=()=>n(657320),r=()=>n(142735),a=()=>n(156642),s=()=>n(109477),l=()=>n(752778),c=()=>n(844085),d=()=>n(707461),u=()=>n(887430),p=()=>n(954452),m=()=>n(201741),g=()=>n(982855),h=()=>n(949842),f=()=>n(148976),v=()=>n(191586),C=()=>n(942226),S=()=>n(466970),y=()=>n(170210),b=()=>n(876822),x=()=>n(845622),k=()=>n(749826),w=()=>n(543842),I=()=>n(346392),_=()=>n(311562),M=()=>n(482162),T=()=>n(365609);function j(e){(0,h().ZP)({event:e,context:h().Af.EditorMouseDown,callback:()=>{}})}function L(e){(0,h().ZP)({event:e,context:h().Af.EditorClick,callback:()=>{}})}function R(e){return(0,r().VK)((()=>Boolean(T().Z.state.pageMap[e.id])||I().Z.state.pages.has(e.id)),[e.id])}function P(e,t){const n=(0,o().O7)(),a=(0,i().l)(),s=R(e),l=(0,r().VK)((()=>{var n,o;return t===_().S.Frame?Boolean(null===(n=b().default.state.currentLoadingContainerStore)||void 0===n?void 0:n.state.ready):t===_().S.PeekView&&M().default.state.open?Boolean(null===(o=M().default.state.loadingContainerStore)||void 0===o?void 0:o.state.ready):t===_().S.CollectionPageView||t===_().S.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=V(e);return(0,r().VK)((()=>{if(!l)return!1;const t=n.currentUser.isLoggedIn(),o=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=o&&o.hasPublicPermission)||"edit"===(null==o?void 0:o.permission))&&!s&&!c&&(!(0,g().GD)(o)||"completionPopup"!==x().default.state.type))}),[n.currentUser,c,l,a,s,e])}function A(e,t){const n=(0,o().O7)(),a=(0,i().l)(),{isTablet:s}=(0,o().Fy)(),l=(0,S().E)("tablet_refresh_template_pills_gate");return(0,r().VK)((()=>{if(t===_().S.SitePreview)return!1;if(n.device.isMobile&&(!s||!l))return!1;if(!n.currentUser.isLoggedIn())return!1;const o=a&&a.publicEditModeStore.state;if(null!=o&&o.hasPublicPermission&&"edit"!==(null==o?void 0:o.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const i=e.getContentStores()[0];if(i&&!i.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const r=m().TI.state,c=m().mn.state;if(r&&e.id===c)return!1;return!((0,v().OZ)(t)?d().Pm.state:d().wC.state)}),[n,a,e,t,s,l])}function V(e){return(0,r().VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(a().Ti.externalObjectInstancePage)}),[e])}function B(e){return(0,r().VK)((()=>{if(!(0,f().K6)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().vF){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function Z(e){return(0,r().VK)((()=>{if(!(0,f().K6)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function D(e){return(0,r().VK)((()=>{if(!k().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().gH.CsvImport}),[e])}function E(e){const t=(0,o().O7)(),{device:n,WindowSizeStore:i}=t,a=(0,r().VK)((()=>{const e=i.state.height,o=n.isMobile&&w().Z.state.open?e:0;return c()._4(t)+o}),[t,i,n.isMobile]);return(0,r().VK)((()=>"home-phone"===e?y().jq:n.isTablet?380:n.isIOS?Math.max(350,a):n.isMobile?400:"side-peek"===e||"center-peek"===e?C().KA:"home"===e?y().XX:"30vh"),[n,a,e])}function F(e){const t=(0,o().O7)(),n=(0,r().VK)((()=>(0,p().fg)(t,e)),[t,e]);return(0,r().VK)((()=>n&&!e.isFullWidth()?(0,p().gC)(t,(0,C().wq)(e),(0,u().Ks)(e)):0),[t,n,e])}},355435:(e,t,n)=>{"use strict";n.d(t,{E7:()=>r,Ju:()=>i,cb:()=>s,iv:()=>a,tL:()=>o});const o=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},420406:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});function o(e,t){t.route.name;return!1}},341643:(e,t,n)=>{"use strict";n.d(t,{DW:()=>C,IG:()=>h,J4:()=>v,hZ:()=>f,q9:()=>g,qq:()=>S,s4:()=>m});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(801812),s=()=>n(677559),l=()=>n(690664),c=()=>n(105649),d=()=>n(291335),u=()=>n(590972),p=()=>n(420406);const m=new(s().Ss)("PerformanceToolbar",(()=>Promise.all([n.e(62743),n.e(5242),n.e(4014),n.e(20919),n.e(93843),n.e(66283),n.e(54194)]).then(n.bind(n,674207)))),g=(0,s().kF)(m,(e=>e.PerformanceToolbar)),h=(0,s().kF)(m,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,i().O7)();return(0,r().VK)((()=>(0,p().$)(e,e.RouterStore.state)),[e])}function v(){const e=(0,i().O7)(),t=y("PerformanceToolbarStore"),n=y("isPerformanceToolbarVisible");return(0,r().VK)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function C(){const e=y("PerformanceToolbarStore");return(0,r().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function S(){const e=(0,i().O7)(),t=y("createPerformanceToolbarMouseListeners"),n=y("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:h}=(0,r().VK)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,g,h)}),[t,e,n,a,s,p,m,g,h])}function y(e){const t=f(),[{value:n}]=(0,a().r5)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},662062:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});const o={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1};function i(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...o,...t}}},170210:(e,t,n)=>{"use strict";n.d(t,{$1:()=>x,$K:()=>y,A0:()=>f,A5:()=>h,Ae:()=>j,Cm:()=>u,D9:()=>g,EP:()=>l,Er:()=>k,Gl:()=>T,KI:()=>I,Ng:()=>m,QF:()=>p,Uf:()=>d,XX:()=>r,bS:()=>S,cc:()=>_,d_:()=>c,iO:()=>s,jO:()=>b,jq:()=>a,pW:()=>v});var o=()=>n(513670),i=()=>n(696459);const r=160,a=40,s=24,l=20,c=600,d=270,u=405,p=480,m=500,g=void 0,h=16,f=10,v=8,C=(n(706363).Ct,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),S=4;function y(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function b(e){return{width:48,height:48,fill:e.lightIconColor}}function x(e){let{theme:t,isPhone:n}=e;return n?t.personalHomeBackgroundPhone:t.surface.page}function k(e){let{theme:t,isPhone:n,buttonState:o}=e,i=t.whiteButtonBackground;switch(o){case"hovered":i=t.whiteButtonHoveredBackground;break;case"pressed":i=t.whiteButtonPressedBackground}return n&&(i=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:i,...C,boxShadow:M({isPhone:n,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const w=1;function I(e){let{isPhone:t,theme:n}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:n.home.tile.background,boxShadow:M({isPhone:t,theme:n}),...C}}function _(e){let{mode:t,isPhone:n}=e;switch(t){case"dark":return 0;case"light":return w;default:return(0,i().P)(t),0}}function M(e){let{isPhone:t,theme:n,borderOnly:i}=e;if("dark"===n.mode)return"unset";n.mode;const r=_({mode:n.mode,isPhone:t});return(0,o().oA)([i||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function T(e){return{display:"flex",flexDirection:"column",width:e.isPhone?"100%":700,gap:24}}function j(e){const{isPhone:t,theme:n,borderOnly:o}=e;return{unhoveredBoxShadow:M({isPhone:t,theme:n,borderOnly:o}),hoveredBoxShadow:"light"===n.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):n.homeShadow.card.hovered}}},138390:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});n(670560),n(667294);var o=()=>n(505365),i=()=>n(934935),r=()=>n(330125),a=()=>n(828042),s=()=>n(788860),l=()=>n(91502),c=()=>n(524434),d=n(785893);function u(){const e=(0,l().QI)(),t=c().KR.isFullPageAssistantInStartOptions(),n=[];return e&&n.push({key:"personal_home",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.home.label",defaultMessage:"Home"}),renderIcon:e=>(0,r().z)({width:20,height:20,...e})}),n.push({key:"last_visited_page",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"}),renderIcon:e=>(0,o().Y)({width:20,height:20,...e})},{key:"first_page",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"}),renderIcon:e=>(0,i().S)({width:20,height:20,padding:2,...e})}),t&&n.push({key:"chat",label:(0,d.jsx)(s()._H,{id:"pageOnAppStoreSetting.chat.label",defaultMessage:"Notion AI"}),renderIcon:e=>(0,a().t)({width:20,height:20,...e})}),n}},591707:(e,t,n)=>{"use strict";n.d(t,{C:()=>r,E:()=>i});var o=()=>n(529048);const i=new(o().Z),r=new(o().Z)},974442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},385010:(e,t,n)=>{"use strict";n.d(t,{l:()=>a,w:()=>i});function o(e){switch(e.type){case"external":return`external-${e.botId}`;case"workflow":return`workflow-${e.workflowExternalAuthenticationId}`;case"universal":return`universal-${e.app}-${e.spaceId}`;default:throw(0,n(696459).t1)(e)}}const i={channels:{},fetching:!1,lastRefreshed:0};class r extends(()=>n(263184))().default{getStateForBot(e){const t=o(e);return this.state[t]??i}updateStateForBot(e,t){this.setState({...this.state,[o(e)]:{...this.getStateForBot(e),...t}})}addChannelsForBot(e,t){const n=this.getStateForBot(e);this.setState({...this.state,[o(e)]:{...n,channels:{...n.channels,...t}}})}}const a=new r;(0,n(947115).exposeDebugValue)("ExternalNotificationChannelsStore",a)},685472:(e,t,n)=>{"use strict";n.d(t,{EP:()=>r,LU:()=>a,NS:()=>i,SS:()=>o,ZP:()=>l});const o="loadingLocalImage",i="uploading",r="downloading",a="loaded";class s extends(()=>n(263184))().default{getInitialState(){return{loadingMode:a}}}const l=s},385021:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{justUnlocked:!1}}}const i=o},994875:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},774985:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=new(n(685472).ZP)},136765:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{permissionsInviteStore:new(n(223023).Z),contextualInviteStore:new(n(807463).ZP)}}get stage(){return this.state.contextualInviteStore.state.inviteStage}}const i=o},663773:(e,t,n)=>{"use strict";n.d(t,{Cv:()=>l,aJ:()=>c,kw:()=>d,zX:()=>u});var o=()=>n(219727),i=()=>n(142735),r=()=>n(799891),a=()=>n(629719),s=()=>n(515323);function l(e){let{spaceId:t}=e;const n=(0,o().O7)();return(0,i().VK)((()=>{if(t)return s().U.getData(n,{spaceId:t})}),[n,t])}function c(e){if("admin"===(null==e?void 0:e.type))return e}function d(e,t,n){if(!t)return 0;const o=(0,a().nW)({spaceId:e,logFunction:r().log.bind(r()),subscriptionState:t});return o?Math.max(o,n):0}function u(e){var t;const n=null===(t=(0,a().a7)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const o=n.unitAmount,i="year"===n.billingInterval?12:1;return{amount:o.amount/i,currencyCode:o.currencyCode}}},595976:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var o=()=>n(219727),i=()=>n(142735),r=()=>n(616433),a=()=>n(515323),s=()=>n(663773);function l(e){let{spaceId:t}=e;const n=(0,o().O7)(),l=(0,r().J)();return(0,i().VK)((()=>{if(!t||!l)return;const e=a().U.getData(n,{spaceId:t});return(0,s().aJ)(e)}),[n,t,l],{useDeepEqual:!0})}},548919:(e,t,n)=>{"use strict";n.d(t,{D:()=>r,Qk:()=>s,we:()=>a});var o=()=>n(873463),i=()=>n(914575);function r(e){i().Z.setState({open:!0,...e})}function a(){i().Z.setState({open:!1})}function s(e){o().Z.setState({open:!0,...e})}},701814:(e,t,n)=>{"use strict";n.d(t,{z:()=>C});n(667294);var o=()=>n(219727),i=()=>n(142735),r=()=>n(846550),a=()=>n(677200),s=()=>n(788860),l=()=>n(568017),c=()=>n(154186),d=()=>n(603692),u=()=>n(661641),p=()=>n(654133),m=()=>n(345918),g=()=>n(228772),h=()=>n(998901),f=()=>n(697623),v=n(785893);function C(e){let{onClick:t,showIcon:n=!0}=e;const r=y(n),a=(0,o().O7)(),l=(0,g().r)(),d=(0,i().VK)((()=>l&&(0,m().rn)(a,l)),[a,l]),C=(0,i().VK)((()=>(0,f().zt)()),[]);return void 0===t?(0,v.jsx)("div",{style:{...r.badge,cursor:"default"},children:(0,v.jsx)(S,{showIcon:n})}):(0,v.jsx)(p().Z,{placement:h().Placement.Bottom,style:r.tooltip,render:e=>(0,v.jsx)(c().Z,{onClick:t,style:{...r.badge,cursor:"pointer"},hoveredStyle:r.badgeHover,pressedStyle:r.badgePressed,...e,children:(0,v.jsx)(S,{showIcon:n})}),renderTooltip:()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u().q,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:(0,v.jsx)(s()._H,{id:"trialBadge.tooltip.title",defaultMessage:"{hasSpaceName, select, true {{spaceName}} other {Your workspace}} is on a free {planName, select, plus {Plus} business {Business} enterprise {Enterprise} other {}} trial",values:{hasSpaceName:Boolean(d),spaceName:d,planName:C}})}),(0,v.jsx)(u().q,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:(0,v.jsx)(s()._H,{id:"trialBadge.tooltip.description",defaultMessage:"Click to learn more"})})]}),textWrap:!0})}function S(e){let{showIcon:t}=e;const n=y(t);return(0,v.jsxs)(v.Fragment,{children:[t?(0,v.jsx)("span",{style:n.giftIcon,children:(0,v.jsx)(d().y,{iconGroup:a().$,variantName:"mini",colorName:"orangePrimary"})}):null,(0,v.jsx)(u().q,{styleName:"UISmall-12px/Medium",children:(0,v.jsx)(s()._H,{id:"trialBadge.title",defaultMessage:"Free trial"})})]})}function y(e){return(0,r().yK)((t=>({badge:{display:"flex",flexDirection:"row",gap:4,justifyContent:"center",alignItems:"center",color:t.icon.orangePrimary,background:t.fill.orangeSecondary,padding:e?"0px 6px 0px 4px":"0px 6px",height:e?22:20,borderRadius:6,width:"fit-content"},badgeHover:{background:l().FN[t.mode].orange[100]},badgePressed:{background:l().FN[t.mode].orange[200]},tooltip:{maxWidth:"240px",width:"max-content",display:"flex",padding:"4px 6px",flexDirection:"column",alignItems:"flex-start",gap:2,borderRadius:4},giftIcon:{paddingBottom:1}})),[e])}},873463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"TrialEndModalStore"})},914575:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"TrialInfoModalStore"})},656221:(e,t,n)=>{"use strict";n.d(t,{JT:()=>m,O:()=>h,Zb:()=>g,jL:()=>f,nk:()=>C,rX:()=>v,yP:()=>p});n(821057),n(670560),n(267602),n(653476),n(470928),n(241792);var o=()=>n(799891),i=()=>n(530980),r=()=>n(934165),a=()=>n(696459),s=()=>n(824462),l=()=>n(636340),c=()=>n(269299),d=()=>n(876822),u=()=>n(826955);function p(e){let{trustedDomainIds:t,spaceStore:n}=e;return t.map((e=>{const t=u().hf.createChildStore(n,{table:r().l,id:e,spaceId:n.id});if(t.canRead())return t})).filter(a().$K)}async function m(e){let{environment:t,spaceId:n,currentUserId:i,organizationId:r}=e;const a=await s().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:n,organizationId:r},userId:i});return"failed"===a.type?(o().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):a.data.results}function g(e){let{environment:t,trustedEmailDomain:n,trustedDomainStores:o,spaceStore:i,spaceBasicSettingsStore:a}=e,s=o.find((e=>e.getEmailDomain()===n));const d=a.state.emailDomains;return s?(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainDLSEnabled",environment:t,canUndo:!0,perform:e=>{l().sW({store:i,data:{email_domains:d},transaction:e}),l().sW({store:s,data:{domain_link_sharing_enabled:!0,join_space_method:"request_to_join"},transaction:e})}}),s):(c().createAndCommit({userAction:"trustedDomainActions.createTrustedDomain",environment:t,canUndo:!0,perform:e=>{l().sW({store:i,data:{email_domains:d},transaction:e});const o={space_id:i.id,join_space_method:"request_to_join",domain_link_sharing_enabled:!0,email_domain:n};s=l().ae({environment:t,table:r().l,value:o,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e})}}),s&&o.push(s),s)}function h(e){let{store:t,environment:n}=e;const{currentSpaceStore:o}=d().default.getState();if(!o)throw new Error("currentSpaceStore does not exist");if(o.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(c().createAndCommit({userAction:"trustedDomainActions.deleteTrustedDomain",environment:n,canUndo:!0,perform:e=>{l().sW({store:t,data:{domain_link_sharing_enabled:!1},transaction:e})}}),!0)}function f(e){let{store:t,environment:n,joinSpaceMethod:o}=e;const{currentSpaceStore:i}=d().default.getState();if(!i)throw new Error("currentSpaceStore does not exist");if(i.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(t.getJoinSpaceMethod()!==o&&(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainJoinSpaceMethod",environment:n,canUndo:!0,perform:e=>{l().sW({store:t,data:{join_space_method:o},transaction:e})}}),!0))}async function v(e){let{environment:t,spaceId:n}=e;const o=await s().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:n}});if("success"!==o.type)return[];return o.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>i().kk5.fromValue(r().l,e)))}async function C(e){let{environment:t,spaceId:n}=e;const o=await s().callApi({eventName:"getTrustedDomainForUser",environment:t,data:{spaceId:n}});if("success"===o.type)return i().kk5.fromValue(r().l,o.data.result)}},877727:(e,t,n)=>{"use strict";n.d(t,{QZ:()=>a,SV:()=>i,mq:()=>r});var o=()=>n(749826);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"workflow_templates_settings_dev",disableExposureLogging:e.disableExposureLogging})&&o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function a(e){return!e.device.isPhone}},999582:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const i=new o;n(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},280210:(e,t,n)=>{"use strict";n.d(t,{U_:()=>x,f6:()=>w,ii:()=>k});n(821057),n(409045),n(453627),n(994774),n(995194),n(520522),n(200082),n(379976),n(724224),n(761121),n(637133),n(241792);var o=n.n(n(402568)),i=()=>n(513670),r=()=>n(326966),a=()=>n(431595),s=()=>n(24945),l=()=>n(255933);const c={version:8,notion_version:0,variant:2},d={version:8,notion_version:1,variant:2},u=0,p=1,m=6,g=8,h=10,f=Date.UTC(2024,0,1);function v(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const n=Math.floor(((new Date).getTime()-f)/r().A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[u]=n>>4,t[u+1]=n<<4&240|15&t[u+1],t}function C(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let n=0;n<4;n++)t[p+1+n]=e/2**(24-8*n)&255;return t}function S(e,t){const n=e?1:0;return t[m]=c.version<<4&240|c.notion_version<<1&14|1&n,t[g]=c.variant<<6&192|63&t[g],t}function y(e,t){if("block"===e)return t[h]=(0,s().ym)(e)|63&t[h],t;const n=(0,s().ym)(e);return t[h]=n>>8&127,t[h+1]=255&n,t}function b(e,t){const n=(0,s().Nq)(e);return t[h]=127&n|128&t[h],t}function x(e,t,n,o){const i=new Uint8Array(16),r=globalThis.crypto.getRandomValues(i);return n!==l().bx&&v(e,r),C(t,r),S(o,r),y(n,r),M(r)}function k(e,t,n,o){return x(e,t,n,o)}function w(e,t,n){return I(e,t,n)}function I(e,t,n){const r=o()(n),l=i().yo(r,2).map((e=>parseInt(e.join(""),16)));if((0,s().LV)(t)){if(void 0===e)throw new(a().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(l);return e&&C(e,c),b(t,c),function(e){e[m]=240&d.version<<4|14&d.notion_version<<1|1&e[m],e[g]=192&d.variant<<6|63&e[g]}(c),M(c)}const _=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function M(e){let t=0;return _[e[t++]]+_[e[t++]]+_[e[t++]]+_[e[t++]]+"-"+_[e[t++]]+_[e[t++]]+"-"+_[e[t++]]+_[e[t++]]+"-"+_[e[t++]]+_[e[t++]]+"-"+_[e[t++]]+_[e[t++]]+_[e[t++]]+_[e[t++]]+_[e[t++]]+_[e[t++]]}},29488:(e,t,n)=>{"use strict";function o(e){return`${e.table}:${e.id}`}n.d(t,{O:()=>o})},924665:(e,t,n)=>{"use strict";function o(e){let t,n,o;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(o=r,n||(n=t.then((()=>(n=void 0,t=e(...o),t))),n)):(t=e(...r),t)}}n.d(t,{Z:()=>o})},157955:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>j,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>b,MAX_RECURRENCE_INTERVAL:()=>f,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>h,convertFromUnpersistedRecurrenceConfig:()=>A,convertToUnpersistedRecurrenceConfig:()=>L,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>M,getNewEndTimestamp:()=>R,getNextDateUtc:()=>_,getRecurrenceAfter:()=>w,isRunningBetweenMidnightAnd3AM:()=>I,isValidRecurrenceInterval:()=>C,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>y,templateAncestorsViolateRecurrenceNesting:()=>k});n(267602),n(653476),n(241792);var o=()=>n(730120);n(670560);function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const r=[];for(const a of e)r.push(...i(n[0],...n.slice(1)).map((e=>[a,...e])));return r}var r=()=>n(696459),a=()=>n(326966),s=()=>n(803021),l=()=>n(646574),c=()=>n(998411),d=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(494616);const m=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},h={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},f=99,v=999;function C(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=f}function S(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=v}function y(e){const{start_date:t,frequency:n,interval:o,weekdays:a,timezone:l,hour:c,minute:d}=e,p="week"===n&&a?a.map((e=>h[e])):void 0,m={};return(0,r().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().t1)(e.end_condition)),"month"===e.frequency&&(0,r().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return h[t].nth(n)})):(0,r().t1)(e.monthly_restriction)),new u({freq:g[n],dtstart:(0,s().pd)(t),interval:o,byweekday:p,tzid:l,byhour:c??0,byminute:d??0,bysecond:0,...m})}const b=1,x=1;function k(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=o>b,a=n.length>=x;return{violatesConstraint:r||a,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:i}}function w(e){const{recurrence:t,afterDate:n}=e;if((0,p().nA)(t)){const e=(0,s().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=y(t).after((0,s().pd)(n));if(!e)return;return(0,s().YL)(e)}}function I(e){return 0===e.hour||1===e.hour||2===e.hour}function _(e){return y(e).after((0,s().pd)((0,s().Jh)()))||void 0}function M(e){const{recurrence:t,intl:n}=e,i=_(A(t));if(!i)return;const r=I(t),a=o().ou.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(n)).setZone(t.timezone),s=(0,l().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(r)return n.formatMessage(m.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().ou.TIME_SIMPLE);return t.timezone!==(0,c().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(m.dateAtTime,{date:s,time:e})}}function T(e,t){return(0,r().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().p6)({date:o().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().t1)(e):t.formatMessage(m.noEndCondition)}const j=100;function L(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,r().t1)(e.end_condition):void 0}}function R(e,t,n){return e.plus(n-t)}function P(e,t){const n=o().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(n.toJSDate())}}function A(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?P(e,e.end_condition):(0,r().t1)(e.end_condition):void 0}}},677200:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});const o=(0,n(827282).CZ)("gift",{default:{loader:()=>n.e(63636).then(n.bind(n,563636))},small:{loader:()=>n.e(19806).then(n.bind(n,719806))},mini:{loader:()=>n.e(73393).then(n.bind(n,373393))},large:{loader:()=>n.e(40651).then(n.bind(n,840651))}})},383499:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("addPageCover",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})})},775404:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("at",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"})})},29248:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},414294:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},984478:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},165940:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},505365:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("clockAlternate",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.417 6.09961C10.5811 6.09961 10.7201 6.15885 10.834 6.27734C10.9525 6.39128 11.0117 6.53027 11.0117 6.69434V11.2949L10.376 9.34668L12.5977 12.3408C12.7116 12.4867 12.7617 12.6416 12.748 12.8057C12.7344 12.9697 12.6592 13.0996 12.5225 13.1953C12.3721 13.3001 12.2148 13.3389 12.0508 13.3115C11.8913 13.2842 11.75 13.1908 11.627 13.0312L9.99316 10.8779C9.93392 10.8005 9.89062 10.7253 9.86328 10.6523C9.83594 10.5749 9.82227 10.4928 9.82227 10.4062V6.69434C9.82227 6.53027 9.87923 6.39128 9.99316 6.27734C10.1117 6.15885 10.2529 6.09961 10.417 6.09961ZM10.6768 17.126C9.93848 17.126 9.22298 17.0098 8.53027 16.7773C7.84212 16.5495 7.20638 16.2259 6.62305 15.8066C6.04427 15.3919 5.54297 14.9111 5.11914 14.3643C4.96875 14.182 4.90495 13.9928 4.92773 13.7969C4.95052 13.6009 5.03939 13.446 5.19434 13.332C5.36296 13.2135 5.53841 13.1748 5.7207 13.2158C5.90299 13.2568 6.06478 13.3571 6.20605 13.5166C6.54785 13.9678 6.94889 14.3597 7.40918 14.6924C7.87402 15.0205 8.37988 15.2734 8.92676 15.4512C9.47819 15.6335 10.0615 15.7269 10.6768 15.7314C11.4606 15.736 12.1943 15.5902 12.8779 15.2939C13.5661 15.0023 14.1676 14.599 14.6826 14.084C15.2021 13.5645 15.6077 12.9629 15.8994 12.2793C16.1956 11.5911 16.3438 10.8529 16.3438 10.0645C16.3438 9.2806 16.1956 8.54688 15.8994 7.86328C15.6077 7.17513 15.2021 6.57357 14.6826 6.05859C14.1676 5.53906 13.5661 5.13346 12.8779 4.8418C12.1943 4.55013 11.4606 4.4043 10.6768 4.4043C9.88835 4.4043 9.15234 4.55013 8.46875 4.8418C7.78971 5.12891 7.19043 5.52995 6.6709 6.04492C6.15137 6.5599 5.74349 7.15918 5.44727 7.84277C5.1556 8.52181 5.00749 9.25326 5.00293 10.0371H3.6084C3.61296 9.07096 3.7998 8.16406 4.16895 7.31641C4.53809 6.46875 5.0485 5.72135 5.7002 5.07422C6.35189 4.42708 7.10156 3.92122 7.94922 3.55664C8.80143 3.1875 9.71061 3.00293 10.6768 3.00293C11.6429 3.00293 12.5521 3.1875 13.4043 3.55664C14.2565 3.92578 15.0062 4.4362 15.6533 5.08789C16.305 5.73503 16.8154 6.4847 17.1846 7.33691C17.5537 8.18913 17.7383 9.09831 17.7383 10.0645C17.7383 11.0306 17.5537 11.9398 17.1846 12.792C16.8154 13.6442 16.305 14.3962 15.6533 15.0479C15.0062 15.6995 14.2565 16.2077 13.4043 16.5723C12.5521 16.9414 11.6429 17.126 10.6768 17.126ZM2.78809 8.66992H6.16504C6.33822 8.66992 6.4681 8.71094 6.55469 8.79297C6.64583 8.87044 6.68913 8.9707 6.68457 9.09375C6.68001 9.21224 6.63216 9.33984 6.54102 9.47656L4.87988 11.7803C4.76595 11.9352 4.63151 12.015 4.47656 12.0195C4.32161 12.0195 4.1849 11.9398 4.06641 11.7803L2.40527 9.47656C2.31413 9.3444 2.26628 9.2168 2.26172 9.09375C2.25716 8.9707 2.29818 8.87044 2.38477 8.79297C2.47591 8.71094 2.61035 8.66992 2.78809 8.66992Z"})})},666669:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},263555:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},119239:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("doubleChevronRight",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.25781 14.1211C2.47656 14.1211 2.66797 14.0391 2.81836 13.8887L8.14355 8.67969C8.32812 8.49512 8.41699 8.29688 8.41699 8.06445C8.41699 7.8252 8.32812 7.62012 8.14355 7.44922L2.81836 2.24023C2.66797 2.08984 2.4834 2.00781 2.25781 2.00781C1.81348 2.00781 1.46484 2.35645 1.46484 2.80078C1.46484 3.0127 1.55371 3.21777 1.7041 3.375L6.50977 8.05762L1.7041 12.7539C1.55371 12.9043 1.46484 13.1094 1.46484 13.3281C1.46484 13.7725 1.81348 14.1211 2.25781 14.1211ZM8.36914 14.1211C8.58789 14.1211 8.77246 14.0391 8.92285 13.8887L14.2549 8.67969C14.4395 8.49512 14.5283 8.29688 14.5283 8.06445C14.5283 7.8252 14.4326 7.62012 14.2549 7.44922L8.92285 2.24023C8.77246 2.08984 8.58789 2.00781 8.36914 2.00781C7.9248 2.00781 7.56934 2.35645 7.56934 2.80078C7.56934 3.0127 7.66504 3.21777 7.81543 3.375L12.6211 8.05762L7.81543 12.7539C7.66504 12.9043 7.56934 13.1094 7.56934 13.3281C7.56934 13.7725 7.9248 14.1211 8.36914 14.1211Z"})})},94250:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("eye",{viewBox:"0 0 32 32",svg:(0,o.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},682547:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("eyePadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},1723:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("import",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},519454:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},229010:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("repeat",{viewBox:"0 0 16 14",svg:(0,o.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},899548:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("search",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},122158:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("taskList",{viewBox:"0 0 18 17",svg:(0,o.jsx)("path",{d:"M3.48438 7.29688C5.35938 7.29688 6.92188 5.73438 6.92188 3.85938C6.92188 1.96875 5.35938 0.40625 3.48438 0.40625C1.59375 0.40625 0.0390625 1.96875 0.0390625 3.85938C0.0390625 5.73438 1.60156 7.29688 3.48438 7.29688ZM3.07031 5.70312C2.89844 5.70312 2.77344 5.61719 2.65625 5.47656L1.78125 4.42969C1.69531 4.32812 1.66406 4.23438 1.66406 4.10156C1.66406 3.85938 1.85156 3.67188 2.08594 3.67188C2.24219 3.67188 2.35156 3.73438 2.45312 3.875L3.05469 4.625L4.44531 2.39062C4.54688 2.23438 4.67969 2.15625 4.83594 2.15625C5.07031 2.15625 5.26562 2.33594 5.26562 2.55469C5.26562 2.66406 5.24219 2.76562 5.16406 2.88281L3.5 5.46875C3.39844 5.61719 3.25 5.70312 3.07031 5.70312ZM9.39844 4.54688H17.2578C17.6406 4.54688 17.9531 4.24219 17.9531 3.85938C17.9531 3.47656 17.6406 3.17188 17.2578 3.17188H9.39844C9.01562 3.17188 8.71875 3.47656 8.71875 3.85938C8.71875 4.24219 9.01562 4.54688 9.39844 4.54688ZM3.48438 16.3281C5.35938 16.3281 6.92188 14.7656 6.92188 12.8828C6.92188 10.9922 5.35938 9.4375 3.48438 9.4375C1.59375 9.4375 0.0390625 11 0.0390625 12.8828C0.0390625 14.7656 1.60156 16.3281 3.48438 16.3281ZM3.48438 15C2.32812 15 1.36719 14.0312 1.36719 12.8828C1.36719 11.7344 2.33594 10.7578 3.48438 10.7578C4.625 10.7578 5.60156 11.7344 5.60156 12.8828C5.60156 14.0312 4.625 15 3.48438 15ZM9.39844 13.5859H17.2578C17.6406 13.5859 17.9531 13.2812 17.9531 12.8984C17.9531 12.5156 17.6406 12.2109 17.2578 12.2109H9.39844C9.01562 12.2109 8.71875 12.5156 8.71875 12.8984C8.71875 13.2812 9.01562 13.5859 9.39844 13.5859Z"})})},858233:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("topbarCommentFilled",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M6.27344 19.0703C5.96094 19.0703 5.71615 18.9688 5.53906 18.7656C5.36719 18.5625 5.28125 18.2865 5.28125 17.9375V16.0156H4.85938C4.10417 16.0156 3.45573 15.8698 2.91406 15.5781C2.3776 15.2865 1.96354 14.8698 1.67188 14.3281C1.38542 13.7812 1.24219 13.1198 1.24219 12.3438V6.28125C1.24219 5.50521 1.38542 4.84635 1.67188 4.30469C1.95833 3.75781 2.3724 3.33854 2.91406 3.04688C3.46094 2.75521 4.1276 2.60938 4.91406 2.60938H15.0781C15.8594 2.60938 16.5234 2.75521 17.0703 3.04688C17.6172 3.33854 18.0339 3.75781 18.3203 4.30469C18.6068 4.84635 18.75 5.50521 18.75 6.28125V12.3438C18.75 13.1198 18.6068 13.7812 18.3203 14.3281C18.0339 14.8698 17.6172 15.2865 17.0703 15.5781C16.5234 15.8698 15.8594 16.0156 15.0781 16.0156H10.25L7.57812 18.3828C7.3125 18.6172 7.08333 18.7891 6.89062 18.8984C6.69792 19.013 6.49219 19.0703 6.27344 19.0703ZM6.65625 17.3438L9.13281 14.8906C9.29948 14.724 9.45312 14.6146 9.59375 14.5625C9.73958 14.5052 9.93229 14.4766 10.1719 14.4766H15.0312C15.7708 14.4766 16.3177 14.2943 16.6719 13.9297C17.0312 13.5599 17.2109 13.013 17.2109 12.2891V6.32812C17.2109 5.60938 17.0312 5.06771 16.6719 4.70312C16.3177 4.33333 15.7708 4.14844 15.0312 4.14844H4.95312C4.21875 4.14844 3.67188 4.33333 3.3125 4.70312C2.95833 5.06771 2.78125 5.60938 2.78125 6.32812V12.2891C2.78125 13.013 2.95833 13.5599 3.3125 13.9297C3.67188 14.2943 4.21875 14.4766 4.95312 14.4766H6.02344C6.24219 14.4766 6.40104 14.526 6.5 14.625C6.60417 14.7188 6.65625 14.8828 6.65625 15.1172V17.3438ZM6.02344 7.25781C5.88802 7.25781 5.77344 7.21094 5.67969 7.11719C5.58594 7.01823 5.53906 6.90104 5.53906 6.76562C5.53906 6.63542 5.58333 6.52344 5.67188 6.42969C5.76562 6.33594 5.88281 6.28906 6.02344 6.28906H13.8828C14.0234 6.28906 14.1406 6.33594 14.2344 6.42969C14.3281 6.52344 14.375 6.63542 14.375 6.76562C14.375 6.90104 14.3281 7.01823 14.2344 7.11719C14.1406 7.21094 14.0234 7.25781 13.8828 7.25781H6.02344ZM6.02344 9.74219C5.88802 9.74219 5.77344 9.69531 5.67969 9.60156C5.58594 9.50781 5.53906 9.39062 5.53906 9.25C5.53906 9.125 5.58333 9.01302 5.67188 8.91406C5.76562 8.8151 5.88281 8.76562 6.02344 8.76562H13.8828C14.0234 8.76562 14.1406 8.8151 14.2344 8.91406C14.3281 9.01302 14.375 9.125 14.375 9.25C14.375 9.39062 14.3281 9.50781 14.2344 9.60156C14.1406 9.69531 14.0234 9.74219 13.8828 9.74219H6.02344ZM6.02344 12.2344C5.88802 12.2344 5.77344 12.1875 5.67969 12.0938C5.58594 12 5.53906 11.8854 5.53906 11.75C5.53906 11.6146 5.58333 11.5 5.67188 11.4062C5.76562 11.3073 5.88281 11.2578 6.02344 11.2578H11.1406C11.276 11.2578 11.3906 11.3073 11.4844 11.4062C11.5833 11.5 11.6328 11.6146 11.6328 11.75C11.6328 11.8854 11.5833 12 11.4844 12.0938C11.3906 12.1875 11.276 12.2344 11.1406 12.2344H6.02344Z"})})},938479:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("topbarUpdate",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.0781 18.1562C14.5078 18.1562 18.1641 14.5 18.1641 10.0781C18.1641 5.65625 14.5 2 10.0703 2C5.64844 2 2 5.65625 2 10.0781C2 14.5 5.65625 18.1562 10.0781 18.1562ZM10.0781 16.5469C6.49219 16.5469 3.625 13.6641 3.625 10.0781C3.625 6.49219 6.49219 3.61719 10.0703 3.61719C13.6562 3.61719 16.5391 6.49219 16.5469 10.0781C16.5547 13.6641 13.6641 16.5469 10.0781 16.5469ZM6.14062 11.0625H10.0703C10.4297 11.0625 10.7031 10.7891 10.7031 10.4375V5.32812C10.7031 4.97656 10.4297 4.70312 10.0703 4.70312C9.72656 4.70312 9.45312 4.97656 9.45312 5.32812V9.8125H6.14062C5.78906 9.8125 5.51562 10.0859 5.51562 10.4375C5.51562 10.7891 5.78906 11.0625 6.14062 11.0625Z"})})},46581:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var o=n.n(n(389539)),i=()=>n(280210),r=()=>n(956057);class a{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:o}=this.getSettings();return o&&e!==n(363777).uK?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,i().ii)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:r}=this.getSettings();if(!r||"space"===t)return this.legacyId(t,"disabled");const a=this.mapSpaceIdToShortId(e),s=o().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),(0,i().U_)(n,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:o}=this.getSettings();return o&&"space"!==t?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,i().U_)(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),r().Il()}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:a,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),r().Ul(n);const l=this.mapSpaceIdToShortId(e),c=o().types.isPromise(l)?await l:l;return c?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema"),(0,i().f6)(c,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),r().Ul(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:o,enableIdSchema:a}=this.getSettings();return a?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,i().f6)(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),r().Ul(n))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),i=o().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,i)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),i=o().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,i)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),r().Il()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),r().Il()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),r().Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},88829:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},416403:(e,t,n)=>{"use strict";n.d(t,{Gx:()=>d,HU:()=>p,Ju:()=>u,KT:()=>s,O5:()=>c,RY:()=>l,T$:()=>m});n(267602),n(470928);var o=()=>n(696459),i=()=>n(999673),r=()=>n(156642);const a=["ar","bg","cs","da","de","el","es","et","fi","fr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","ro","ru","sk","sl","sv","tr","uk","zh","en","pt"];function s(e){return(0,r().XD)(e,void 0)?"title":(0,r().W2)(e)?"caption":"table_row"===e||"collection_view"===e||"collection_view_page"===e?"properties":(0,r().nq)(e)||"column"===e||"column_list"===e||"table"===e?"unmapped":void(0,o().t1)(e)}const l=["en","es","fr","pt","zh","ja","ko","ru","de","it","nl","id"];function c(e){return(0,o().DE)(a,e)}const d=["en","es","fr","pt","zh","ja","ko","ru","de","it","nl","id"];const u=[{key:"en",name:i().Dr.translateEnglish},{key:"es",name:i().Dr.translateSpanish},{key:"fr",name:i().Dr.translateFrench},{key:"pt",name:i().Dr.translatePortuguese},{key:"zh",name:i().Dr.translateChinese},{key:"ja",name:i().Dr.translateJapanese},{key:"ko",name:i().Dr.translateKorean},{key:"ru",name:i().Dr.translateRussian},{key:"de",name:i().Dr.translateGerman},{key:"it",name:i().Dr.translateItalian},{key:"nl",name:i().Dr.translateDutch},{key:"id",name:i().Dr.translateIndonesian}];function p(e){return u.find((t=>t.key===e))}let m=function(e){return e.NAME="name",e.VIEW_NAME="view_name",e.DESCRIPTION="description",e.SCHEMA_PROPERTY_NAME="schema_property_name",e.SCHEMA_PROPERTY_OPTION="schema_property_option",e}({})},971095:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=(0,n(830742).LS)("importEvernote")},400939:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}}}]);