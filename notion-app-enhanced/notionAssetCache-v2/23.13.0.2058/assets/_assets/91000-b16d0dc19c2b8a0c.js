"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[91e3],{266093:(e,t,a)=>{a.d(t,{$f:()=>f,Iw:()=>o,KC:()=>i,Lb:()=>l,Z:()=>c,e2:()=>m,gE:()=>r,jM:()=>g,ky:()=>d,m0:()=>n,nK:()=>p,uS:()=>u,ye:()=>h});var s=()=>a(594546);function n(e,t){s().K4(e,"overview_analytics_filter_change",t)}function i(e,t){s().K4(e,"user_analytics_engagement_timerange_filter_change",t)}function o(e,t){s().K4(e,"user_analytics_table_filter_change",t)}function r(e,t){s().K4(e,"user_analytics_table_sort_change",t)}function l(e,t){s().K4(e,"user_analytics_export_requested",t)}function d(e,t){s().K4(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){s().K4(e,"content_analytics_export_requested",t)}function u(e,t){s().K4(e,"content_analytics_table_filter_change",t)}function m(e,t){s().K4(e,"content_analytics_table_timerange_filter_change",t)}function g(e,t){s().K4(e,"content_analytics_table_sort_change",t)}function p(e,t){s().K4(e,"workspace_analytics_tab_click",t)}function h(e,t){s().K4(e,"search_analytics_table_timerange_filter_change",t)}function f(e,t){s().K4(e,"search_analytics_table_sort_change",t)}},174912:(e,t,a)=>{a.d(t,{y1:()=>xe,BO:()=>ve,Qr:()=>ye,gJ:()=>Ie,PN:()=>we,ZO:()=>ie,hN:()=>ke,g:()=>Me,mG:()=>Ce,Mj:()=>he,$G:()=>ue,AW:()=>oe,Tp:()=>Te,zh:()=>He,aY:()=>me,GI:()=>je,q$:()=>de});a(267602),a(653476),a(470928),a(749411),a(241792),a(667294);var s=()=>a(156642),n=()=>a(799891),i=()=>a(998411),o=()=>a(431595),r=()=>a(35980),l=()=>a(741633),d=()=>a(396136),c=()=>a(752778),u=()=>a(630315),m=()=>a(255933),g=()=>a(989478),p=()=>a(788860),h=()=>a(513670),f=()=>a(839002),x=()=>a(696459),v=()=>a(830742);const y=(0,v().LS)("exportAdminContentSearch"),b=(0,v().LS)("exportAuditLog"),S=(0,v().LS)("exportBlock"),j=(0,v().LS)("exportContentAnalytics"),w=(0,v().LS)("exportDomainClaimableSpaces"),M=(0,v().LS)("exportDomainClaimableSpacesForOrganization"),C=(0,v().LS)("exportSpace"),_=(0,v().LS)("exportUserAnalytics");var T=()=>a(940125),k=()=>a(142735),I=()=>a(532146),H=()=>a(666414),P=a(785893);const D={fontWeight:a(707513).Ue.semibold};const z=function(e){let{exportProgressStore:t,disabledExportTeamNames:s}=e;const{messageStyle:n,spinnerContainerStyle:i}=(0,a(846550).yK)((e=>({messageStyle:{fontSize:14,color:e.mediumTextColor,textAlign:"center"},spinnerContainerStyle:{marginTop:24,marginBottom:24,display:"flex",justifyContent:"center"}})),[]);return(0,P.jsxs)("div",{style:n,children:[(0,P.jsx)("div",{style:i,children:(0,P.jsx)(a(312578).Z,{})}),(0,P.jsx)(R,{exportProgressStore:t}),(0,P.jsx)(N,{exportProgressStore:t}),(0,P.jsx)(A,{disabledExportTeamNames:s})]})};function A(e){let{disabledExportTeamNames:t}=e;return t.length>0?(0,P.jsxs)("span",{children:[(0,P.jsx)(H().Z,{size:10}),(0,P.jsx)("p",{children:(0,P.jsx)(p()._H,{id:"exportActions.exportDisabledTeams.message",defaultMessage:"Export is disabled for the following teamspaces: <b>{teamNames}</b>",values:{teamNames:(0,I().W)(t),b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,P.jsx)("span",{style:D,children:t})}}})})]}):null}function N(e){let{exportProgressStore:t}=e;return(0,k().VK)((()=>t.state.targetEmailAddress),[t])?(0,P.jsx)("p",{children:(0,P.jsx)(p()._H,{id:"exportProgressDialog.emailMessage",defaultMessage:"We'll also send you an email with the download link."})}):null}function R(e){let{exportProgressStore:t}=e;const a=(0,k().VK)((()=>t.state.pagesExported),[t]);return a>0?(0,P.jsx)("p",{children:(0,P.jsx)(p()._H,{id:"exportProgressDialog.exportedPagesMessage",defaultMessage:"{pagesExported, plural, one {{pagesExported} page exported} other {{pagesExported} pages exported}}",values:{pagesExported:a}})}):(0,P.jsx)("p",{children:(0,P.jsx)(p()._H,{id:"exportProgressDialog.exportStartedMessage",defaultMessage:"Exporting…"})})}var B=()=>a(421797),L=()=>a(989134),O=()=>a(443269),V=()=>a(527278),U=()=>a(549813),q=()=>a(61278),E=()=>a(876822),Z=()=>a(467806),F=()=>a(356765);class W extends(()=>a(263184))().default{getInitialState(){return{pagesExported:0}}}const K=W;var G=()=>a(826955),Y=()=>a(277533),$=()=>a(18281),J=()=>a(491927),Q=()=>a(912732),X=()=>a(824462),ee=()=>a(308186),te=()=>a(64880),ae=()=>a(782646),se=()=>a(528918);const ne=(0,p().vU)({exporting:{id:"exportActions.exporting.loadingMessage",defaultMessage:"Exporting"},exportAuditLogEmail:{id:"exportActions.auditLog.exporting.EmailMessage",defaultMessage:"Your CSV export is currently being generated. The generated CSV has a 2-hour delay from the real time audit log. Once it is ready, an email will be sent to you with the download link."},exportCSVEmail:{id:"exportActions.exportingCSV.EmailMessage",defaultMessage:"Your CSV export is currently being generated. Once it is ready, an email will be sent to you with the download link."},exportFailed:{id:"exportActions.exportFailedError.message",defaultMessage:"Export failed."},adminMessage:{defaultMessage:"Admin",id:"export.userPermissionsRole.admin.message"},workspaceOwnerMessage:{defaultMessage:"Workspace owner",id:"export.userPermissionsRole.workspaceOwner.message"},memberMessage:{defaultMessage:"Member",id:"export.userPermissionsRole.member.message"},membershipAdminMessage:{defaultMessage:"Membership admin",id:"export.userPermissionsRole.membershipAdmin.message"},guestMessage:{defaultMessage:"Guest",id:"export.userPermissionsRole.guest.message"},idMessage:{defaultMessage:"ID",id:"export.csvHeader.id"},emailMessage:{defaultMessage:"Email",id:"export.csvHeader.email"},nameMessage:{defaultMessage:"Name",id:"export.csvHeader.name"},roleMessage:{defaultMessage:"Role",id:"export.csvHeader.role"},permissionGroupsMessage:{defaultMessage:"Permission groups",id:"export.csvHeader.permissionGroups"},pagesMessage:{defaultMessage:"Pages",id:"export.csvHeader.pages"},partitionMessage:{defaultMessage:"Export is still in progress due to file size. We will send you an email about its progress.",id:"export.exportPartitioned.message"},privatePageMessage:{defaultMessage:"Private page",id:"export.privatePageTitle.message"},pageTitleAndIdMessage:{defaultMessage:"{pageTitle} ({pageId})",id:"export.pageTitleAndId.message"},pageSeparatorMessage:{defaultMessage:", ",id:"export.pageSeparator.message"}});async function ie(e,t){if(!fe({environment:e,...t}))return void J().y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const{currentUserStore:a}=E().default.state;if(!a)return void J().y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const s=a.getEmail();if(!s)return void J().y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});J().Md(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=le(a.id));const n=(0,ae().Lj)(e,S,t),i=E().default.state.currentSpaceStore;await re(e,n,t.recursive,s,null==i?void 0:i.id)}async function oe(e,t,a,s){if(!fe({environment:e,recursive:!0,exportOptions:t.exportOptions,isOrgConsole:void 0!==a}))return void J().y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const{currentUserStore:n}=E().default.state;if(!n)return void J().y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const i=n.getEmail();if(!i)return void J().y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});J().Md(e,{target:"space",format:t.exportOptions.exportType,recursive:!0}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=le(n.id));const o=(0,ae().Lj)(e,C,t);await re(e,o,!0,i,t.spaceId,s)}async function re(e,t,a,s,n,i){const{currentSpaceViewStore:o}=E().default.state;if(!o&&!i)return;const r=new K;r.setState({pagesExported:0,targetEmailAddress:s});let l,d=!1;const c=((null==o?void 0:o.getTeamsStores())||i)??[],u=null==c?void 0:c.filter((e=>e.getSetting("disable_export"))).flatMap((e=>e.getName()||[]));if(a){const t=u.length>0?6e3:1250;l=(0,f().Vs)(t);const a={exportProgressStore:r,disabledExportTeamNames:u};ee().vC({message:(0,P.jsx)(z,{...a}),showCancel:!1,keepFocus:!0,disableBackgroundDismiss:!0,items:[{label:(0,P.jsx)(p()._H,{id:"exportProgressDialog.closeButton.label",defaultMessage:"Close"}),onAccept:()=>{He({environment:e,spaceId:n}),d=!0}}]})}else l=Promise.resolve(),se().j({message:ne.exporting});for await(const m of t){if(d)return;if(m.error)return se().x(),void ee().UW(V().Z.formatMessage(ne.exportFailed));{const{value:t}=m;if("complete"===t.type||"partition"===t.type)return await l,se().x(),void("complete"===t.type?(ee().lo(),!d&&t.exportURL&&te().oi(e,t.exportURL)):ee().PV({message:V().Z.formatMessage(ne.partitionMessage)}));r.setState({...r.state,pagesExported:t.pagesExported})}}}function le(e){const t={};return r().Z.scan(((a,s)=>{if(a.includes(L().jD)&&a.includes(e)){const e=a.split(L().jD)[1];e&&s&&(t[e]=s)}})),t}function de(e){const{root:t,environment:a,isCollectionViewExportTypeSupported:s}=e,n=a.currentUser.id,o=Se(n),r=o&&o.exportType||"markdown",l=s?"currentView":void 0,d="pdf"===r?{exportType:"pdf",timeZone:(0,i().r)(),pdfFormat:je(n),locale:"en",collectionViewExportType:l}:{exportType:r,timeZone:(0,i().r)(),locale:"en",collectionViewExportType:l};ve(a,{open:!0,root:t,recursive:"space"===t.table,exportOptions:d,shouldExportComments:!1})}function ce(e,t){switch(t){case"editor":return e.formatMessage(ne.workspaceOwnerMessage);case"membership_admin":return e.formatMessage(ne.membershipAdminMessage);case"read_and_write":return e.formatMessage(ne.memberMessage);case"none":return e.formatMessage(ne.guestMessage);default:return n().log({level:"error",from:"exportActions",type:"roleNotFound",data:{miscDataToConvertToString:{role:t}}}),""}}async function ue(e,t){const{spaceStore:a,subscriptionData:s,intl:n}=t;await X().callApi({eventName:"exportSpaceMembers",environment:e,data:{spaceId:a.getSpaceId()}});const i=s.users.map((e=>e.userId)),o=await X().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:e,data:{spaceId:a.getSpaceId(),userIds:i},headers:(0,l().Bb)({cellId:void 0,spaceId:a.getSpaceId()})}),r={};if("success"===o.type)for(const[l,d]of Object.entries(o.data.userToGroupMap)){const e=(d||[]).map((e=>Z().Z.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e)))),t=h().oA(e).map((e=>e.group.name)).sort().join(",");r[l]=t}await me(a,s.users,r,n)}async function me(e,t,a,s){const n=h().oA(await f().qd(t,40,(async t=>{const n=Y().U.createChildStore(e,{table:g().KJ,id:t.userId});await n.waitUntil((()=>n.isReady()));const i=n.getEmail(),o=n.getFullName(s);if(i||o)return[i||"",o||"",ce(s,t.role),a[t.userId]||"",n.id]})));ge(pe([[ne.emailMessage,ne.nameMessage,ne.roleMessage,ne.permissionGroupsMessage,ne.idMessage].map((e=>s.formatMessage(e))),...n]),"members.csv")}function ge(e,t){const a=document.createElement("a");a.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(e)}`),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}function pe(e){return e.map((e=>e.map((e=>((e=e.replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(e=`"${e}"`),e))).join(","))).join("\n")}async function he(e,t){let{guests:a,intl:n,spaceStore:i}=t;await X().callApi({eventName:"exportSpaceGuests",environment:e,data:{spaceId:i.getSpaceId()}});const o=n.formatMessage(ne.pageSeparatorMessage),r=h().oA(await Promise.all(a.map((async t=>{const a=Y().U.createChildStore(i,{table:g().KJ,id:t.userId});async function r(t){const a=G().G.createChildStore(i.getPagesStore(),{table:d().iU,id:t});if(await a.load(),a.isCollectionView()){const e=a.getCollectionPointer();if(e){const t=G().NW.createChildStore(i,{table:c().vF,id:e.id});t&&await t.load()}}else if(a.getType()===s().Ti.alias){const e=a.getAliasTargetStore();e&&await e.load()}return(0,U().V)(a,n,e,!1)??n.formatMessage(ne.privatePageMessage)}const[,...l]=await Promise.all([a.load(),...t.guestPageIds.map((e=>async function(e){return n.formatMessage(ne.pageTitleAndIdMessage,{pageId:e,pageTitle:await r(e)})}(e)))]),u=a.getEmail(),m=a.getFullName(n);if(u||m)return[u||"",m||"",l.join(o),a.id]})))),l=[[ne.emailMessage,ne.nameMessage,ne.pagesMessage,ne.idMessage].map((e=>n.formatMessage(e))),...r];ge(pe(l),"guests.csv"),Q().LA(e,{line_count:l.length})}function fe(e){const t="pdf"===e.exportOptions.exportType&&e.recursive;return!!e.isOrgConsole||(!t||xe(e.environment))}function xe(e){return(0,$().qb)(e,"enterprise")||(0,$().qb)(e,"business")||B()._Tt()}function ve(e,t){const a=F().ZP.state,s=e.currentUser.id;let n=t;if(F().Sw(n)&&!xe(e))if("space"===n.root.table){const e=a.open&&!F().Sw(a)?a.exportOptions.exportType:"html";n={...n,exportOptions:{...n.exportOptions,exportType:e}}}else n={...n,recursive:!1};if(!fe({environment:e,...n}))throw new(o().D3)("Invalid export options",{data:n});F().ZP.setState(n),function(e){const t=F().ZP.state;if(t.open){const a={...Se(e),exportType:t.exportOptions.exportType};"pdf"===t.exportOptions.exportType&&(a.pdfFormat=t.exportOptions.pdfFormat),r().Z.set({userId:e,key:be,value:a})}}(s)}function ye(){F().ZP.setState({open:!1,shouldExportComments:!1})}const be="ExportSettings";function Se(e){return r().Z.get({userId:e,key:be})}function je(e){const t=Se(e);return t&&t.pdfFormat||F().jR()}async function we(e,t){const{currentUserStore:a}=E().default.state,{targetPointer:s}=t;if(!a)return n().log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserStoreNotFound",data:{miscDataToConvertToString:{targetPointer:s}}}),ee().PV({message:V().Z.formatMessage(ne.exportFailed)}),void J().y4(e,{target:"auditLog",format:"csv",recursive:!1});if(!a.isDefined())return n().log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserValueNotFound",data:{miscDataToConvertToString:{targetPointer:s}}}),ee().PV({message:V().Z.formatMessage(ne.exportFailed)}),void J().y4(e,{target:"auditLog",format:"csv",recursive:!1});let i;J().Md(e,{target:"auditLog",format:"csv",recursive:!1}),s.table===m().bx?i=(0,ae().Lj)(e,b,{spaceId:s.id,exportOptions:t.exportOptions}):s.table===u().V7?i=(0,ae().Lj)(e,b,{organizationId:s.id,exportOptions:t.exportOptions}):(0,x().t1)(s),await _e(i,ne.exportAuditLogEmail)}async function Me(e){const{environment:t,data:a}=e;J().Md(t,{target:"domainClaimableSpaces",format:"csv",recursive:!1});const s=(0,ae().Lj)(t,w,a);await _e(s,ne.exportCSVEmail)}async function Ce(e){const{environment:t,data:a}=e;J().Md(t,{target:"domainClaimableSpaces",format:"csv",recursive:!1});const s=(0,ae().Lj)(t,M,a);await _e(s,ne.exportCSVEmail)}async function _e(e,t){const a=await e.next();if(a.value.error){const e=(0,O().HV)(V().Z.getIntl(),a.value.error);ee().UW(e)}else ee().PV({message:V().Z.formatMessage(t)})}async function Te(e,t){J().Md(e,{target:"userAnalytics",format:"csv",recursive:!1});const a=(0,ae().Lj)(e,_,t);await _e(a,ne.exportCSVEmail)}async function ke(e,t){J().Md(e,{target:"contentAnalytics",format:"csv",recursive:!1});const a=(0,ae().Lj)(e,j,t);await _e(a,ne.exportCSVEmail)}async function Ie(e,t){J().Md(e,{target:"adminContentSearchAnalytics",format:"csv",recursive:!1});const a=(0,ae().Lj)(e,y,{spaceId:t.spaceId,sort:{field:"relevance",direction:"desc"},query:t.filters.query,audience:t.filters.audience,lastEditedTime:(0,T().Hq)(t.filters.lastEditedTime),createdTime:(0,T().Hq)(t.filters.createdTime),createdBy:t.filters.createdBy,sharedWith:t.filters.sharedWith,teamspaceIds:t.filters.teamIds,deletionStatuses:t.filters.pageStatus});await _e(a,ne.exportCSVEmail)}async function He(e){let{environment:t,spaceId:a}=e;if(!a)return;const s=await X().callApi({eventName:"getActiveExportTasks",environment:t,data:{spaceId:a}});var n;"success"===s.type&&q().Z.setState({count:s.data.length,exportedPageCount:null===(n=s.data[0])||void 0===n?void 0:n.exportedPageCount})}},840984:(e,t,a)=>{a.d(t,{D2:()=>l,Pr:()=>p,Uk:()=>f,qA:()=>h});a(267602),a(653476),a(241792);var s=()=>a(431595),n=()=>a(989478),i=()=>a(443269),o=()=>a(826955),r=()=>a(824462);const l="last_90_days",d={field:"last_active",direction:"desc"};async function c(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:i}=e,o=null==i?void 0:i.dailyUsersData;return o&&a===(null==i?void 0:i.graphFilter)&&n===s?o:u({environment:t,spaceId:s,filter:a})}async function u(e){const{environment:t,spaceId:a,filter:s}=e,n=await r().callApi({eventName:"getDailyUsersAnalytics",environment:t,data:{spaceId:a,activeWindow:"all_time"===s?"last_90_days":s}});return"failed"===n.type?n.body:n.data}async function m(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:i,usersTabData:o}=e,r=null==o?void 0:o.tableFilter,l=null==o?void 0:o.userTableSort;return null!=o&&o.usersAndStats&&r===a&&l&&l.direction===s.direction&&l.field===s.field&&i===n.id?o.usersAndStats:g({environment:t,filter:a,sort:s,spaceStore:n})}async function g(e){const{environment:t,filter:a,sort:s,spaceStore:i}=e,l=await r().callApi({eventName:"loadWorkspaceAnalyticsUsers",environment:t,data:{spaceId:i.id,filters:{timeRange:a},sort:s}});return"failed"===l.type?l.body:l.data.users.map((e=>({stats:e,userStore:o().U6.createChildStore(i,{table:n().KJ,id:e.userId})})))}async function p(e){const{environment:t,spaceStore:a,currentTab:n,currentSpaceId:i,usersTabData:o,setState:r,graphFilter:u,tableFilter:g}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:n,usersTabData:i,graphFilter:o,tableFilter:r}=e,u=o||(null==i?void 0:i.graphFilter)||l,g=r||(null==i?void 0:i.tableFilter)||l,p=(null==i?void 0:i.userTableSort)||d,[h,f]=await Promise.all([c({environment:t,filter:u,spaceId:a.id,currentSpaceId:n,usersTabData:i}),m({environment:t,filter:g,sort:p,spaceStore:a,currentSpaceId:n,usersTabData:i})]),x=(0,s().Rp)(h)||!h?[]:h,v=(0,s().Rp)(f)||!f?[]:f;return{graphFilter:u,tableFilter:g,userTableSort:p,dailyUsersError:(0,s().Rp)(h)?h:void 0,dailyUsersData:x,usersAndStatsError:(0,s().Rp)(f)?f:void 0,usersAndStats:v}}({environment:t,spaceStore:a,currentSpaceId:i,usersTabData:o,graphFilter:u,tableFilter:g});r({currentSpaceId:a.id,currentTab:n,usersTabData:p})}async function h(e){const{environment:t,spaceStore:a}=e,n=e.nextGraphFilter||l,i=e.nextTableFilter||l,o=e.nextSort||d,[r,c]=await Promise.all([u({environment:t,filter:n,spaceId:a.id}),g({environment:t,filter:i,sort:o,spaceStore:a})]),m=(0,s().Rp)(r)||!r?[]:r,p=(0,s().Rp)(c)||!c?[]:c;return{graphFilter:n,tableFilter:i,userTableSort:o,dailyUsersError:(0,s().Rp)(r)?r:void 0,dailyUsersData:m,usersAndStatsError:(0,s().Rp)(c)?c:void 0,usersAndStats:p}}function f(e,t){if((0,s().qC)(e)){const a=(0,i().nX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},553802:(e,t,a)=>{a.d(t,{Z:()=>w});a(667294);var s=()=>a(219727),n=()=>a(142735),i=()=>a(788860),o=()=>a(308186),r=()=>a(174912),l=()=>a(827973),d=()=>a(198829),c=()=>a(255577),u=()=>a(967092),m=()=>a(906651),g=()=>a(388284),p=()=>a(654133),h=()=>a(527278),f=()=>a(352230),x=()=>a(998901),v=()=>a(104088);class y extends(()=>a(263184))().default{getInitialState(){return{open:!1}}}const b=new y;var S=a(785893);const j=(0,i().vU)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function w(e){let{parentStore:t}=e;const a=(0,i().YB)(),s=(0,n().Kw)(b);return(0,S.jsx)(u().ZP,{popupType:v().k.Popup,open:s.open,placementToOrigin:x().Placement.Bottom,alignmentToOrigin:x().Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,S.jsx)(k,{parentStore:t}),onDismiss:C,enableOutsideClickDismiss:!0,origin:(0,S.jsx)(p().Z,{renderTooltip:()=>(0,S.jsx)(i()._H,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:e=>(0,S.jsx)(m().Z,{isLarge:!0,onClick:()=>{return e=!s.open,void b.setState({open:e});var e},...e,children:a.formatMessage(j.Export)})})})}function M(e,t,a){r().PN(e,{targetPointer:a.pointer,exportOptions:{duration:t}})}function C(){b.setState({open:!1})}function _(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().Z,{focused:!1,title:h().Z.formatMessage(j[e]),onClick:()=>{C(),M(t,e,a)}}),action:()=>{}}}function T(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().Z,{focused:!1,title:h().Z.formatMessage(j[e]),onClick:()=>{o().vC({message:(0,S.jsx)(i()._H,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,S.jsx)(i()._H,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{C(),M(t,e,a)}}]})}}),action:()=>{}}}function k(e){let{parentStore:t}=e;const a=(0,s().O7)(),n=[_(30,a,t),_(60,a,t),_(90,a,t),T(365,a,t)];return(0,S.jsx)(d().Z,{menuType:f().o.Popup,children:(0,S.jsx)(c().ZP,{type:c().iW.Vertical,sections:[{key:"results",render:e=>(0,S.jsx)(g().Z,{...e}),items:n}],initialFocus:0})})}},857411:(e,t,a)=>{a.d(t,{t:()=>u});a(667294);var s=()=>a(146947),n=()=>a(846550),i=()=>a(646574),o=()=>a(788860),r=()=>a(654133),l=()=>a(67961),d=()=>a(998901),c=a(785893);function u(e){const{auditLogEntry:t,id:a}=e,u=(0,n().yK)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,c.jsx)(r().Z,{renderTooltip:()=>(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,c.jsx)("div",{children:(0,c.jsx)(o()._H,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,i().$I)(t.serverTimestamp)}})})}),render:e=>(0,c.jsx)("div",{id:a,style:u.container,children:(0,c.jsx)(l().Z,{isSecondaryColor:!0,...e,children:(0,i().Yx)(t.serverTimestamp,"medium_with_time",s().locale)})}),placement:d().Placement.Bottom})}},664357:(e,t,a)=>{a.d(t,{p:()=>ge});var s=a(667294),n=(a(241792),()=>a(788860)),i=()=>a(513670),o=()=>a(696459),r=()=>a(942475),l=()=>a(183084),d=()=>a(811807),c=()=>a(18902),u=()=>a(575861),m=()=>a(209284),g=()=>a(799891),p=()=>a(528514),h=()=>a(586573),f=()=>a(396136),x=()=>a(160459),v=()=>a(255933),y=()=>a(306164),b=()=>a(429892),S=()=>a(768050),j=()=>a(172045),w=()=>a(775377),M=a(785893);function C(e){return"workspace"!==e}function _(e){var t,a,s,n,i,o,r;const l={read_content:null===(t=e.capabilities)||void 0===t?void 0:t.read_content,update_content:null===(a=e.capabilities)||void 0===a?void 0:a.update_content,insert_content:null===(s=e.capabilities)||void 0===s?void 0:s.insert_content,read_comment:null===(n=e.capabilities)||void 0===n?void 0:n.read_comment,insert_comment:null===(i=e.capabilities)||void 0===i?void 0:i.insert_comment,user_capabilities:null!==(o=e.capabilities)&&void 0!==o&&o.read_user_with_email?"read_user_including_email":null!==(r=e.capabilities)&&void 0!==r&&r.read_user_without_email?"read_user_excluding_email":"none"};return JSON.stringify(l)}const T=(0,n().vU)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),k=(0,n().vU)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function I(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,M.jsx)(n()._H,{...k.equallyRestrictive}):!e&&t?(0,M.jsx)(n()._H,{...k.moreRestrictive}):e&&!t?(0,M.jsx)(n()._H,{...k.lessRestrictive}):void 0}function H(e){return e.name?`“${e.name}“ group`:(0,M.jsx)(n()._H,{...l().s.group})}function P(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,M.jsx)(n()._H,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,M.jsx)(n()._H,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,M.jsx)(n()._H,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:D(e)}})}function D(e){return"team"in e.target?z(e.target.team):(0,M.jsx)(n()._H,{...l().s.team})}function z(e){return e.name?`“${e.name}“ teamspace`:(0,M.jsx)(n()._H,{...l().s.team})}function A(e){if(e)switch(e){case"owner":return(0,M.jsx)(n()._H,{...l().s.team_owner});case"member":return(0,M.jsx)(n()._H,{...l().s.team_member});case"team_level_guest":return(0,M.jsx)(n()._H,{...l().s.team_level_guest})}return(0,M.jsx)(n()._H,{...l().s.team_member})}function N(e){var t,a;return{oldRole:(0,M.jsx)(n()._H,{...R(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,M.jsx)(n()._H,{...R(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}function R(e){if(!e)return p().mq.noAccessLabel;switch(e){case"editor":return p().mq.workspaceOwnerLabel;case"membership_admin":return p().mq.membershipAdminLabel;case"read_and_write":return p().mq.memberLabel;default:return p().mq.noAccessLabel}}function B(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,M.jsx)(n()._H,{...j().XJ.an_untitled_page})}function L(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,M.jsx)(n()._H,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function O(e){switch(e){case"google":return(0,M.jsx)(n()._H,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,M.jsx)(n()._H,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,M.jsx)(n()._H,{defaultMessage:"Notion support access",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,M.jsx)(n()._H,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,M.jsx)(n()._H,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"microsoft":return(0,M.jsx)(n()._H,{defaultMessage:"Microsoft",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.microsoft"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,M.jsx)(n()._H,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});case"passkey":return(0,M.jsx)(n()._H,{defaultMessage:"passkey",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.passkey"});default:(0,o().t1)(e)}}function V(e){return e.changes.name.oldValue?(0,M.jsx)(n()._H,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function U(e,t){return"block"===e.table?(0,M.jsx)(n()._H,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:z(t),parentPage:q(e)}}):"team"===e.table?z(t):void 0}function q(e){return"title"in e?`“${e.title}“`:(0,M.jsx)(n()._H,{...j().XJ.an_untitled_page})}function E(e,t){if(!t)return(0,M.jsx)(n()._H,{...j().XJ.an_untitled_page});const a=t.table;return"space"===a?t.id!==e?(0,M.jsx)(n()._H,{...l().s.otherWorkspace}):C(t.permissionLevel)?(0,M.jsx)(n()._H,{...l().s.private}):(0,M.jsx)(n()._H,{...l().s.thisWorkspace}):"team"===a?z(t):"block"===a?t.title?`“${t.title}“`:(0,M.jsx)(n()._H,{...j().XJ.an_untitled_page}):void 0}const Z=(0,n().vU)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function F(e){return e?(0,M.jsx)(n()._H,{...Z[e]}):(0,M.jsx)(n()._H,{...Z.unknown})}function W(e){return e.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function K(e){return e.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function G(e){return"approved"===e.changes.requestStatus.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,M.jsx)(n()._H,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function Y(e){return e.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function $(e){return e.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}function J(e,t){return t?e.formatMessage(l().s.enabled):e.formatMessage(l().s.disabled)}const Q=(0,n().vU)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function X(e){var t,a,s,p,k,R,q,Z,X,ae,se,ne,ie,oe,re,le,de,ce,ue,me,ge,pe,he,fe,xe,ve,ye,be,Se,je,we,Me,Ce,_e,Te,ke,Ie,He,Pe,De,ze,Ae,Ne,Re,Be;const{auditLogEntry:Le,env:Oe,intl:Ve,options:Ue}=e,{renderPageName:qe}=Ue;if((0,r().I0)(Le))return(0,r().NG)({...e,auditLogEntry:Le});switch(Le.actionName){case"page.properties_edited":{const wt=Le.meta.propertiesUpdated,Mt=Le.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===wt.length?(0,M.jsx)(n()._H,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:Mt,pageName:(0,j().pz)(Le)}}):(0,M.jsx)(n()._H,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:Mt,pageName:(0,j().pz)(Le)}})}case"page.suggestion.comment.created":return(0,M.jsx)(n()._H,{defaultMessage:"Commented on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.created",values:{pageName:(0,j().pz)(Le)}});case"page.suggestion.comment.deleted":return(0,M.jsx)(n()._H,{defaultMessage:"Deleted comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.deleted",values:{pageName:(0,j().pz)(Le)}});case"page.suggestion.comment.updated":return(0,M.jsx)(n()._H,{defaultMessage:"Edited comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.updated",values:{pageName:(0,j().pz)(Le)}});case"page.discussion.comment.created":return(0,M.jsx)(n()._H,{defaultMessage:"Commented on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.created",values:{pageName:(0,j().pz)(Le)}});case"page.discussion.comment.deleted":return(0,M.jsx)(n()._H,{defaultMessage:"Deleted comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.deleted",values:{pageName:(0,j().pz)(Le)}});case"page.discussion.comment.updated":return(0,M.jsx)(n()._H,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:(0,j().pz)(Le)}});case"page_edited":return(0,M.jsx)(n()._H,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:(0,j().pz)(Le)}});case"page_viewed":return(0,M.jsx)(n()._H,{defaultMessage:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",values:{pageName:qe(Le)}});case"page_deleted":return Le.target.page.meta.permanentDeletion?(0,M.jsx)(n()._H,{defaultMessage:"Deleted {pageName} from Trash",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:(0,j().pz)(Le)}}):(0,M.jsx)(n()._H,{defaultMessage:"Moved {pageName} to Trash",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:(0,j().pz)(Le)}});case"page.purged":return(0,M.jsx)(n()._H,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.purged",values:{pageName:(0,j().pz)(Le)}});case"page_restored":return(0,M.jsx)(n()._H,{defaultMessage:"Restored {pageName}{withAdminPerms, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:(0,j().pz)(Le),withAdminPerms:(0,d().sv)(Le)}});case"page_exported":return(0,M.jsx)(n()._H,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:(0,j().pz)(Le)}});case"page_moved":{var Ee,Ze,Fe;const Ct=null===(Ee=Le.changes)||void 0===Ee?void 0:Ee.team,_t=Le.changes.parent.oldValue,Tt=Le.changes.parent.newValue;let kt=E(Le.spaceId,Le.changes.parent.oldValue),It=E(Le.spaceId,Le.changes.parent.newValue);null!=Ct&&Ct.oldValue&&null!=Ct&&Ct.newValue&&_t&&Tt&&("block"===_t.table||"block"===Tt.table)?(kt=U(_t,null==Ct?void 0:Ct.oldValue),It=U(Tt,null==Ct?void 0:Ct.newValue)):"space"===(null===(Ze=Le.changes.parent.oldValue)||void 0===Ze?void 0:Ze.table)&&"space"===(null===(Fe=Le.changes.parent.newValue)||void 0===Fe?void 0:Fe.table)&&Le.changes.parent.oldValue.id===Le.changes.parent.newValue.id&&(C(Le.changes.parent.oldValue.permissionLevel)||C(Le.changes.parent.newValue.permissionLevel))&&(kt=C(Le.changes.parent.oldValue.permissionLevel)?(0,M.jsx)(n()._H,{...l().s.private}):(0,M.jsx)(n()._H,{...l().s.workspaceLevel}),It=C(Le.changes.parent.newValue.permissionLevel)?(0,M.jsx)(n()._H,{...l().s.private}):(0,M.jsx)(n()._H,{...l().s.workspaceLevel}));const Ht=kt?Ve.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:kt}):"",Pt=It?Ve.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:It}):"";return(0,M.jsx)(n()._H,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:(0,j().pz)(Le),oldParentMessage:Ht,newParentMessage:Pt,inSudoMode:(0,j().qS)(Le)}})}case"page_permission_updated":return function(e,t){var a,s,i;const o="bot"in t.target,r="space"in t.target,l="team"in t.target,c="group"in t.target,u="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var m,g;if(o)return(0,M.jsx)(n()._H,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:(0,d().hu)(e,t),oldRole:(0,j().hu)(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.oldValue),newRole:(0,j().hu)(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.newValue),pageName:(0,j().pz)(t),inSudoMode:(0,j().qS)(t)}});var p,h,f,x,v,y;if(r)return(0,M.jsx)(n()._H,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:(0,j().hu)(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:(0,j().hu)(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.newValue),pageName:(0,j().pz)(t),inSudoMode:(0,j().qS)(t)}});if(l)return(0,M.jsx)(n()._H,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:(0,j().hu)(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.oldValue),newRole:(0,j().hu)(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:(0,j().pz)(t),teamName:D(t),inSudoMode:(0,j().qS)(t)}});if(u)return(0,M.jsx)(n()._H,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:(0,d().hu)(e,t),oldRole:(0,j().hu)(null===(v=t.changes)||void 0===v||null===(v=v.permission)||void 0===v?void 0:v.oldValue),newRole:(0,j().hu)(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.newValue),pageName:(0,j().pz)(t),inSudoMode:(0,j().qS)(t)}});if(c){var b,S;return(0,M.jsx)(n()._H,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:(0,d().hu)(e,t),oldRole:(0,j().hu)(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:(0,j().hu)(null===(S=t.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue),pageName:(0,j().pz)(t),inSudoMode:(0,j().qS)(t)}})}return(0,M.jsx)(n()._H,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:(0,d().hu)(e,t),oldRole:(0,j().hu)(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:(0,j().hu)(null===(i=t.changes)||void 0===i||null===(i=i.permission)||void 0===i?void 0:i.newValue),pageName:(0,j().pz)(t),inSudoMode:(0,j().qS)(t)}})}(Ve,Le);case"page_created":const Je=(0,h().zV)(Le);if(null!=Je&&null!==(t=Je.meta)&&void 0!==t&&t.parent){var We,Ke,Ge,Ye;if(Je.meta.parent.table===v().bx)return"private"===(null===(Ge=Je.meta)||void 0===Ge?void 0:Ge.permissionLevel)||"private"===(null===(Ye=Je.meta)||void 0===Ye?void 0:Ye.pageAudience)?(0,M.jsx)(n()._H,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,M.jsx)(n()._H,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(We=Je.meta)||void 0===We?void 0:We.parent.table)===y().e0)return(0,M.jsx)(n()._H,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:z(Je.meta.parent)}});if((null===(Ke=Je.meta)||void 0===Ke?void 0:Ke.parent.table)===f().iU)return(0,M.jsx)(n()._H,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:B(Le)}})}return(0,M.jsx)(n()._H,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,M.jsx)(n()._H,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:(0,j().pz)(e),inSudoMode:(0,j().qS)(e)}});return(0,M.jsx)(n()._H,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:(0,j().pz)(e),inSudoMode:(0,j().qS)(e),newRole:(0,j().hu)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Le);case"page.shared_with_email_domain":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,M.jsx)(n()._H,{defaultMessage:"Unshared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.disabled",values:{pageName:(0,j().pz)(e),inSudoMode:(0,j().qS)(e)}});return(0,M.jsx)(n()._H,{defaultMessage:"Shared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.enabled",values:{pageName:(0,j().pz)(e),inSudoMode:(0,j().qS)(e),newRole:(0,j().hu)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Le);case"login":return function(e,t){var a,s,i;const o=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&o?(0,M.jsx)(n()._H,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:L(e),geolocation:(0,w().xk)(e,t),loginMethod:O(o)}}):null!==(i=e.actor.meta)&&void 0!==i&&i.countryCode&&!o?(0,M.jsx)(n()._H,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:L(e),geolocation:(0,w().xk)(e,t)}}):o?(0,M.jsx)(n()._H,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:L(e),loginMethod:O(o)}}):(0,M.jsx)(n()._H,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:L(e)}})}(Le,Ve);case"allowed_support_access":return(0,M.jsx)(n()._H,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:Ve.formatDate(Le.changes.expiresAt),name:Le.target.user.name}});case"revoked_support_access":return(0,M.jsx)(n()._H,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:Le.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),i=e.changes.name.oldValue,o=e.changes.name.newValue;if(s){if(i&&o)return(0,M.jsx)(n()._H,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:(0,d().hu)(t,e),oldValue:i,newValue:o}});if(!i&&o)return(0,M.jsx)(n()._H,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:(0,d().hu)(t,e),newValue:o}});if(i&&!o)return(0,M.jsx)(n()._H,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:(0,d().hu)(t,e),oldValue:i}})}if(i&&o)return(0,M.jsx)(n()._H,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:i,newValue:o}});if(!i&&o)return(0,M.jsx)(n()._H,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:o}});if(i&&!o)return(0,M.jsx)(n()._H,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:i}});return(0,M.jsx)(n()._H,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(Le,Ve);case"email_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,M.jsx)(n()._H,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:(0,d().hu)(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,M.jsx)(n()._H,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(Le,Ve);case"picture_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,M.jsx)(n()._H,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:(0,d().hu)(t,e)}}):(0,M.jsx)(n()._H,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(Le,Ve);case"member_invited":{const Dt=N(Le);return(0,M.jsx)(n()._H,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:(0,d().hu)(Ve,Le),newRole:Dt.newRole}})}case"member_role_updated":{const zt=N(Le);return(0,M.jsx)(n()._H,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:(0,d().hu)(Ve,Le),oldRole:zt.oldRole,newRole:zt.newRole}})}case"member_removed":return Le.actor.actorId===Le.target.user.id?(0,M.jsx)(n()._H,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,M.jsx)(n()._H,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:(0,d().hu)(Ve,Le)}});case"guest_removed":return(0,M.jsx)(n()._H,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:(0,d().hu)(Ve,Le)}});case"file_uploaded":return(0,M.jsx)(n()._H,{defaultMessage:"Uploaded a file to {pageName}",id:"auditlog.actionNames.eventColumn.file_uploaded_public",values:{pageName:(0,j().pz)(Le)}});case"file_downloaded":return function(e){return(0,M.jsx)(n()._H,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:te(e),pageName:(0,j().pz)(e)}})}(Le);case"invite_link_toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,M.jsx)(n()._H,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return(0,r().Jj)((0,d().b0)(Le,Ve));case"workspace_name_changed":return(0,M.jsx)(n()._H,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:Le.changes.name.oldValue,newValue:Le.changes.name.newValue}});case"workspace_domain_changed":return(0,M.jsx)(n()._H,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:V(Le),newValue:Le.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,M.jsx)(n()._H,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,M.jsx)(n()._H,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,M.jsx)(n()._H,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,M.jsx)(n()._H,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,M.jsx)(n()._H,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(Le);case"workspace.settings.disallow_webhook_automation_action_toggled":return function(e){const{newValue:t}=e.changes.enabled;if(t)return(0,M.jsx)(n()._H,{defaultMessage:"Disabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.enabled"});return(0,M.jsx)(n()._H,{defaultMessage:"Enabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.disabled"})}(Le);case"allowed_email_domain_added":return(0,M.jsx)(n()._H,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:Le.changes.domain}});case"allowed_email_domain_removed":return(0,M.jsx)(n()._H,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:Le.changes.domain}});case"public_page_set":return Le.changes.name.oldValue?(0,M.jsx)(n()._H,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:Le.changes.name.oldValue,newPage:Le.changes.name.newValue}}):(0,M.jsx)(n()._H,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:Le.changes.name.newValue}});case"idp_metadata_url_updated":case"organization.saml.idp_metadata_url_updated":return Le.changes.url.oldValue?(0,M.jsx)(n()._H,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:Le.changes.url.oldValue,newValue:Le.changes.url.newValue}}):(0,M.jsx)(n()._H,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:Le.changes.url.newValue}});case"saml_toggled":case"organization.saml.toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{...l().s.saml_enabled}):(0,M.jsx)(n()._H,{...l().s.saml_disabled});case"saml_enforce_toggled":case"organization.saml.enforce_toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{...l().s.saml_enforced}):(0,M.jsx)(n()._H,{...l().s.saml_unenforced});case"automatic_account_creation_toggled":case"organization.saml.automatic_account_creation_toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{...l().s.automatic_account_creation_enabled}):(0,M.jsx)(n()._H,{...l().s.automatic_account_creation_disabled});case"workspace_analytics_toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{...l().s.workspace_analytics_enabled}):(0,M.jsx)(n()._H,{...l().s.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":case"organization.managed_user_settings.workspace_creation_enum_updated":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,M.jsx)(n()._H,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const i=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,x().nJ)(e.changes.workspace_creation.oldValue,t)}):"",o=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,x().nJ)(e.changes.workspace_creation.newValue,t)}):"";return(0,M.jsx)(n()._H,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:i,after:o}})}(Le,Ve);case"member_added_to_group":return(0,M.jsx)(n()._H,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:(0,d().hu)(Ve,Le),groupName:H(Le.target.group)}});case"member_removed_from_group":return(0,M.jsx)(n()._H,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:(0,d().hu)(Ve,Le),groupName:H(Le.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,i=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,M.jsx)(n()._H,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:i}});if(!s)return(0,M.jsx)(n()._H,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:i,oldStatus:a}});return(0,M.jsx)(n()._H,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:i,newStatus:s}})}(Le,Ve);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,M.jsx)(n()._H,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,M.jsx)(n()._H,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,M.jsx)(n()._H,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,M.jsx)(n()._H,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Le);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,M.jsx)(n()._H,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,M.jsx)(n()._H,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,M.jsx)(n()._H,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(Le);case"organization.domain_claim.claim_and_upgrade_status_updated":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,M.jsx)(n()._H,{defaultMessage:"Status changed for organization's workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,M.jsx)(n()._H,{defaultMessage:"Pending workspace claim by organization for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,M.jsx)(n()._H,{defaultMessage:"{workspaceName} has been successfully claimed by organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,M.jsx)(n()._H,{defaultMessage:"Request sent to claim workspace: {workspaceName} for organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Le);case"membership_requests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:W(Le)}});case"external_membership_requests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:K(Le)}});case"membership_request_resolved":return(0,M.jsx)(n()._H,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:G(Le),email:(0,d().hu)(Ve,Le)}});case"guest_membership_requests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:Y(Le)}});case"team_created":return(0,M.jsx)(n()._H,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:D(Le)}});case"team_archived":return(0,M.jsx)(n()._H,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:D(Le)}});case"team_restored":return(0,M.jsx)(n()._H,{defaultMessage:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",values:{teamName:D(Le)}});case"team_default_toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:D(Le)}}):(0,M.jsx)(n()._H,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:D(Le)}});case"team_public_page_sharing_toggled":return Le.changes.enabled.newValue?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(n()._H,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:D(Le)}}),I((null===(a=Le.meta)||void 0===a?void 0:a.spacePublicPageSharingDisabled)??(null==Le?void 0:Le.spacePublicPageSharingDisabled),Le.changes.enabled.newValue)]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(n()._H,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:D(Le)}}),I((null===(s=Le.meta)||void 0===s?void 0:s.spacePublicPageSharingDisabled)??(null==Le?void 0:Le.spacePublicPageSharingDisabled),Le.changes.enabled.newValue)]});case"team_export_toggled":return Le.changes.enabled.newValue?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(n()._H,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:D(Le)}}),I((null===(p=Le.meta)||void 0===p?void 0:p.spaceExportDisabled)??(null==Le?void 0:Le.spaceExportDisabled),Le.changes.enabled.newValue)]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(n()._H,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:D(Le)}}),I((null===(k=Le.meta)||void 0===k?void 0:k.spaceExportDisabled)??(null==Le?void 0:Le.spaceExportDisabled),Le.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:D(Le)}}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:D(Le)}});case"team_creation_admins_setting_toggled":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:D(Le)}}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:D(Le)}});case"team_guests_toggled":return Le.changes.enabled.newValue?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(n()._H,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:D(Le)}}),I((null===(R=Le.meta)||void 0===R?void 0:R.spaceDisableGuests)??Le.spaceDisableGuests,Le.changes.enabled.newValue)]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(n()._H,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:D(Le)}}),I((null===(q=Le.meta)||void 0===q?void 0:q.spaceDisableGuests)??Le.spaceDisableGuests,Le.changes.enabled.newValue)]});case"team_name_changed":return(0,M.jsx)(n()._H,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:P(Le)}});case"team_description_changed":return(0,M.jsx)(n()._H,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:D(Le)}});case"team_icon_changed":return(0,M.jsx)(n()._H,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:D(Le)}});case"member_added_to_team":return(0,M.jsx)(n()._H,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:(0,d().hu)(Ve,Le),teamName:D(Le),teamRole:A(Le.changes.teamRole.newValue)}});case"group_added_to_team":return(0,M.jsx)(n()._H,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:H(Le.target.group),teamName:D(Le)}});case"member_removed_from_team":return(0,M.jsx)(n()._H,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:(0,d().hu)(Ve,Le),teamName:D(Le)}});case"group_removed_from_team":return(0,M.jsx)(n()._H,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:H(Le.target.group),teamName:D(Le)}});case"member_joined_team":const Qe=D(Le),Xe=A(Le.changes.teamRole.newValue);return(0,j().qS)(Le)?(0,M.jsx)(n()._H,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:Qe,teamRole:Xe}}):(0,M.jsx)(n()._H,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:Qe,teamRole:Xe}});case"member_left_team":return(0,M.jsx)(n()._H,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:D(Le)}});case"member_team_role_updated":const et=(0,d().hu)(Ve,Le),tt=A(Le.changes.teamRole.oldValue),at=A(Le.changes.teamRole.newValue),st=D(Le);return(0,j().qS)(Le)?(0,M.jsx)(n()._H,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:et,oldTeamRole:tt,newTeamRole:at,teamName:st}}):(0,M.jsx)(n()._H,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:et,oldTeamRole:tt,newTeamRole:at,teamName:st}});case"team_user_permission_updated":return(0,M.jsx)(n()._H,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:(0,d().hu)(Ve,Le),oldPermission:(0,j().hu)(Le.changes.permission.oldValue),newPermission:(0,j().hu)(Le.changes.permission.newValue),teamName:D(Le)}});case"team_group_permission_updated":return(0,M.jsx)(n()._H,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:H(Le.target.group),oldPermission:(0,j().hu)(Le.changes.permission.oldValue),newPermission:(0,j().hu)(Le.changes.permission.newValue),teamName:D(Le)}});case"team_member_default_permission_updated":return(0,M.jsx)(n()._H,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:D(Le),oldRole:(0,j().hu)(null===(Z=Le.changes)||void 0===Z||null===(Z=Z.permission)||void 0===Z?void 0:Z.oldValue),newRole:(0,j().hu)(null===(X=Le.changes)||void 0===X||null===(X=X.permission)||void 0===X?void 0:X.newValue)}});case"team_guest_default_permission_updated":return(0,M.jsx)(n()._H,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:D(Le),oldRole:(0,j().hu)(null===(ae=Le.changes)||void 0===ae||null===(ae=ae.permission)||void 0===ae?void 0:ae.oldValue),newRole:(0,j().hu)(null===(se=Le.changes)||void 0===se||null===(se=se.permission)||void 0===se?void 0:se.newValue)}});case"team_workspace_default_permission_updated":return(0,M.jsx)(n()._H,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:D(Le),oldRole:(0,j().hu)(null===(ne=Le.changes)||void 0===ne||null===(ne=ne.permission)||void 0===ne?void 0:ne.oldValue),newRole:(0,j().hu)(null===(ie=Le.changes)||void 0===ie||null===(ie=ie.permission)||void 0===ie?void 0:ie.newValue)}});case"team_privacy_type_changed":return(0,M.jsx)(n()._H,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:D(Le),oldType:F(null===(oe=Le.changes)||void 0===oe?void 0:oe.teamAccessLevel.oldValue),newType:F(null===(re=Le.changes)||void 0===re?void 0:re.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,M.jsx)(n()._H,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:D(Le),newType:($e=null===(le=Le.changes)||void 0===le||null===(le=le.teamInviteAccess)||void 0===le?void 0:le.newValue,$e?(0,M.jsx)(n()._H,{...Q[$e]}):(0,M.jsx)(n()._H,{...Q.unknown}))}});case"teams_enabled_for_space":return(0,M.jsx)(n()._H,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:Le.target.space.name}});case"private_content_transferred":return(0,M.jsx)(n()._H,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:(0,d().Iq)(Ve,Le.changes.userPermission.oldValue),toUserName:(0,d().Iq)(Ve,Le.changes.userPermission.newValue)}});case"user_analytics_exported":return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:Ve.formatMessage(S().Rh[(null===(de=Le.meta)||void 0===de?void 0:de.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:Ve.formatMessage(S().Rh[(null===(ce=Le.meta)||void 0===ce?void 0:ce.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function nt(e){return e.join(Ve.formatMessage(l().s.adminContentSearchPredicateSplit))}function it(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const ot=Le.searchParameters.query&&Ve.formatMessage(l().s.adminContentSearchQuery,{query:Le.searchParameters.query}),rt=Le.searchParameters.teamspaces&&Le.searchParameters.teamspaces.length>0&&Ve.formatMessage(l().s.adminContentSearchTeamspaces,{teamspaceCount:Le.searchParameters.teamspaces.length,teamspaces:nt(Le.searchParameters.teamspaces)}),lt=Le.searchParameters.createdBy&&Le.searchParameters.createdBy.length>0&&Ve.formatMessage(l().s.adminContentSearchCreatedBy,{createdBy:nt(Le.searchParameters.createdBy)}),dt=Le.searchParameters.sharedWith&&Le.searchParameters.sharedWith.length>0&&Ve.formatMessage(l().s.adminContentSearchSharedWith,{sharedWith:nt(Le.searchParameters.sharedWith)}),ct=Le.searchParameters.audience&&Le.searchParameters.audience.length>0&&Ve.formatMessage(l().s.adminContentSearchAudience,{audience:nt(Le.searchParameters.audience)}),ut=Le.searchParameters.createdTime&&Ve.formatMessage(l().s.adminContentSearchCreatedTime,{createdTime:it(Le.searchParameters.createdTime)}),mt=Le.searchParameters.lastEditedTime&&Ve.formatMessage(l().s.adminContentSearchLastEditedTime,{lastEditedTime:it(Le.searchParameters.lastEditedTime)}),gt=Le.searchParameters.deletionStatuses&&Le.searchParameters.deletionStatuses.length>0&&Ve.formatMessage(l().s.adminContentSearchDeletionStatus,{deletionStatuses:nt(Le.searchParameters.deletionStatuses.map((e=>Ve.formatMessage((0,m().yL)(e))))),deletionStatusesCount:Le.searchParameters.deletionStatuses.length}),pt=i().oA([ot,rt,lt,dt,ct,ut,mt,gt]);if("admin_content_search_queried"===Le.actionName){if(0===pt.length)return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const At=nt(pt);return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:At}})}}if(0===pt.length)return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const Nt=nt(pt);return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:Nt}})}case"admin_managed_users_log_out_all":case"organization.managed_users.log_out":{const Rt=Ve.formatList(Le.meta.emailDomains,{type:"conjunction"});return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:Rt}})}case"admin_managed_users_log_out_one":case"organization.managed_users.log_out_one":return(0,M.jsx)(n()._H,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:(0,d().hu)(Ve,Le)}});case"admin_managed_users_password_cleared_one":case"organization.managed_users.password_cleared_one":return(0,M.jsx)(n()._H,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:(0,d().hu)(Ve,Le)}});case"admin_managed_users_password_cleared":case"organization.managed_users.password_cleared":{const Bt=Ve.formatList(Le.meta.emailDomains,{type:"conjunction"});return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:Bt}})}case"automation_edited":return(0,M.jsx)(n()._H,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:(0,d().yJ)(Le.meta.automationType),pageTitle:(0,j().pz)(Le)}});case"ai_admin_legal_acceptance_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:$(Le)}});case"workspace.settings.hipaa_compliance_updated":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Enabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.enabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Disabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.disabled"});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const ht=Le.spaceId===Le.meta.spaceConsolidationMetadata.source_space_id,ft=Le.meta.spaceConsolidationMetadata.source_space_name??Le.meta.spaceConsolidationMetadata.source_space_id,xt=Le.meta.spaceConsolidationMetadata.target_space_name??Le.meta.spaceConsolidationMetadata.target_space_id,vt=Le.changes.spaceContentDuplicationStatus.newValue;return(0,M.jsx)(n()._H,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:vt?(0,M.jsx)(n()._H,{...T[vt]}):"",spaceName:ht?xt:ft,direction:(0,M.jsx)(n()._H,{...ht?l().s.into:l().s.from})}});case"mfa_sms_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(ue=Le.changes)&&void 0!==ue&&ue.maskedPhoneNumber.oldValue?null===(me=Le.changes)||void 0===me?void 0:me.maskedPhoneNumber.oldValue:null===(ge=Le.changes)||void 0===ge?void 0:ge.maskedPhoneNumber.newValue,enabled:null!==(pe=Le.changes)&&void 0!==pe&&pe.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(he=Le.changes)&&void 0!==he&&he.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(fe=Le.changes)&&void 0!==fe&&fe.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,M.jsx)(n()._H,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:(0,d().hu)(Ve,Le)}});case"user_unsuspended":return(0,M.jsx)(n()._H,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:(0,d().hu)(Ve,Le)}});case"user_deleted":return Le.target?(0,M.jsx)(n()._H,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:(0,d().Iq)(Ve,Le.target.user)}}):(0,M.jsx)(n()._H,{...l().s.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":case"organization.managed_user_settings.prevent_granting_support_access_updated":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":case"organization.managed_user_settings.prevent_profile_edits_updated":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":case"organization.managed_user_settings.external_workspace_access_updated":return Le.changes.enabled.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,M.jsx)(n()._H,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.delete_from_trash_delay":return void 0!==Le.changes.valueS.oldValue||void 0!==Le.changes.valueS.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Changed duration for when pages are deleted from Trash from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay",values:{oldDuration:(0,b().uP)(Le.changes.valueS.oldValue??c().A7,Ve),newDuration:(0,b().uP)(Le.changes.valueS.newValue??c().A7,Ve)}}):(0,M.jsx)(n()._H,{defaultMessage:"Changed duration for when pages are deleted from Trash.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay.generic"});case"workspace.settings.purge_delay":return void 0!==Le.changes.valueS.oldValue||void 0!==Le.changes.valueS.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Changed duration for when deleted pages are permanently deleted from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_purge_delay",values:{oldDuration:(0,b().uP)(Le.changes.valueS.oldValue??c().vF,Ve),newDuration:(0,b().uP)(Le.changes.valueS.newValue??c().vF,Ve)}}):(0,M.jsx)(n()._H,{defaultMessage:"Changed duration for when deleted pages are permanently deleted.",id:"auditLogEntry.workspace_settings_purge_delay.generic"});case"workspace.settings.custom_session_duration_updated":case"organization.managed_user_settings.custom_session_duration_updated":return void 0!==Le.changes.valueMs.oldValue&&void 0!==Le.changes.valueMs.newValue?(0,M.jsx)(n()._H,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,u().Ct)(Le.changes.valueMs.oldValue,Ve),newDuration:(0,u().Ct)(Le.changes.valueMs.newValue,Ve)}}):(0,M.jsx)(n()._H,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"workspace.public_domain.created":return(0,M.jsx)(n()._H,{defaultMessage:"Public domain “{name}“ created",id:"auditLogEntry.workspace_public_domain_created",values:{name:Le.target.publicDomain.domainName}});case"workspace.public_domain.updated":return void 0!==(null===(xe=Le.changes.name)||void 0===xe?void 0:xe.oldValue)&&void 0!==(null===(ve=Le.changes.name)||void 0===ve?void 0:ve.newValue)?(0,M.jsx)(n()._H,{defaultMessage:"Changed public domain name from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.domain_name",values:{oldValue:Le.changes.name.oldValue,newValue:Le.changes.name.newValue}}):void 0===(null===(ye=Le.changes.publicHomePage)||void 0===ye?void 0:ye.oldValue)&&void 0!==(null===(be=Le.changes.publicHomePage)||void 0===be?void 0:be.newValue)?(0,M.jsx)(n()._H,{defaultMessage:"Changed public domain add home page “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.add",values:{newValue:Le.changes.publicHomePage.newValue}}):void 0!==(null===(Se=Le.changes.publicHomePage)||void 0===Se?void 0:Se.oldValue)&&void 0!==(null===(je=Le.changes.publicHomePage)||void 0===je?void 0:je.newValue)?(0,M.jsx)(n()._H,{defaultMessage:"Changed public domain home page from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.update",values:{oldValue:Le.changes.publicHomePage.oldValue,newValue:Le.changes.publicHomePage.newValue}}):(0,M.jsx)(n()._H,{defaultMessage:"Changed public domain",id:"auditLogEntry.workspace_public_domain_updated.unknown"});case"workspace.public_domain.deleted":return(0,M.jsx)(n()._H,{defaultMessage:"Public domain “{name}“ deleted",id:"auditLogEntry.workspace_public_domain_deleted",values:{name:Le.target.publicDomain.domainName}});case"workspace.custom_emoji.created":return(0,M.jsx)(n()._H,{defaultMessage:"Created custom emoji “{name}“",id:"auditLogEntry.workspace_custom_emoji_created",values:{name:Le.target.customEmoji.name}});case"workspace.custom_emoji.updated":const yt=null===(we=Le.changes.name)||void 0===we?void 0:we.oldValue,bt=null===(Me=Le.changes.name)||void 0===Me?void 0:Me.newValue,St=null===(Ce=Le.changes.url)||void 0===Ce?void 0:Ce.oldValue,jt=null===(_e=Le.changes.url)||void 0===_e?void 0:_e.newValue;return void 0!==yt&&void 0!==bt&&void 0!==St&&void 0!==jt?(0,M.jsx)(n()._H,{defaultMessage:"Changed image and name of custom emoji from “{oldName}“ to “{newName}“",id:"auditLogEntry.workspace_custom_emoji_updated.name_image",values:{oldName:yt,newName:bt}}):void 0!==yt&&void 0!==bt?(0,M.jsx)(n()._H,{defaultMessage:"Changed name of custom emoji from “{oldName}“ to “{newName}“",id:"auditLogEntry.workspace_custom_emoji_updated.name",values:{oldName:yt,newName:bt}}):void 0!==St&&void 0!==jt?(0,M.jsx)(n()._H,{defaultMessage:"Changed image of custom emoji “{name}“",id:"auditLogEntry.workspace_custom_emoji_updated.image",values:{name:Le.target.customEmoji.name}}):(0,M.jsx)(n()._H,{defaultMessage:"Changed custom emoji",id:"auditLogEntry.workspace_custom_emoji_updated.unknown"});case"workspace.custom_emoji.deleted":return(0,M.jsx)(n()._H,{defaultMessage:"Deleted custom emoji “{name}“",id:"auditLogEntry.workspace_custom_emoji_deleted",values:{name:Le.target.customEmoji.name}});case"integration.created":return(0,M.jsx)(n()._H,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:(0,d().Mh)(Ve,Le.meta.bot)}});case"integration.deleted":return(0,M.jsx)(n()._H,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:(0,d().Mh)(Ve,Le.meta.bot)}});case"page.automation_deleted":return(0,M.jsx)(n()._H,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:(0,d().yJ)(Le.meta.automationType),pageTitle:(0,j().pz)(Le)}});case"page.file_deleted":return(0,M.jsx)(n()._H,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:te(Le),pageTitle:(0,j().pz)(Le)}});case"integration.secret_reset":return(0,M.jsx)(n()._H,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:(0,d().Mh)(Ve,Le.meta.bot)}});case"integration.settings.updated":return(0,M.jsx)(n()._H,{defaultMessage:"Updated settings of {botName}",id:"auditLogEntry.integration.settings.update",values:{botName:(0,d().Mh)(Ve,Le.meta.bot)}});case"integration.permission.updated":return(0,M.jsx)(n()._H,{defaultMessage:"Updated capabilities of {botName}: {botCapabilities}",id:"auditLogEntry.integration.permission.update",values:{botName:(0,d().Mh)(Ve,Le.meta.bot),botCapabilities:_(Le.meta.bot)}});case"workspace.external_account_connected":return(0,M.jsx)(n()._H,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:(0,d().Mh)(Ve,Le.meta.bot)}});case"workspace.external_account_disconnected":return(0,M.jsx)(n()._H,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:(0,d().Mh)(Ve,Le.meta.bot)}});case"workspace.integration_added":return(0,M.jsx)(n()._H,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:(0,d().Mh)(Ve,Le.meta.bot)}});case"workspace.integration_removed":return(0,M.jsx)(n()._H,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:(0,d().Mh)(Ve,Le.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,M.jsx)(n()._H,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:(0,d().Mh)(Ve,Le.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,M.jsx)(n()._H,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:(0,d().Mh)(Ve,Le.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,M.jsx)(n()._H,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:J(Ve,Boolean(null===(Te=Le.changes)||void 0===Te||null===(Te=Te.enabled)||void 0===Te?void 0:Te.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,M.jsx)(n()._H,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:J(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Le,Ve);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,M.jsx)(n()._H,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:J(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Le,Ve);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,M.jsx)(n()._H,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:(0,d().Iq)(t,e.target.user),guestNameAndEmail:(0,d().Iq)(t,e.meta.targetGuest),pageTitle:(0,j().Wc)(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,M.jsx)(n()._H,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:(0,d().Iq)(t,e.meta.targetGuest),pageTitle:(0,j().Wc)(e.meta.pagesAndRoles[0].page)}}):(0,M.jsx)(M.Fragment,{})}(Le,Ve);case"workspace.settings.integration_restrictions.integration_added_to_allowlist":case"workspace.settings.integration_restrictions.integration_removed_from_allowlist":return function(e){if("workspace.settings.integration_restrictions.integration_added_to_allowlist"===e.actionName)return(0,M.jsx)(n()._H,{defaultMessage:"Added {integrationName} to the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_add",values:{integrationName:e.meta.integrationName}});return(0,M.jsx)(n()._H,{defaultMessage:"Removed {integrationName} from the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_remove",values:{integrationName:e.meta.integrationName}})}(Le);case"workspace_exported":case"workspace_icon_changed":case"public_page_cleared":case"logout":case"password_changed":case"password_cleared":case"password_set":case"member_joined":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":case"organization.created":return(0,M.jsx)(n()._H,{...l().s[Le.actionName]});case"organization.saml.idp_metadata_xml_removed":return(0,M.jsx)(n()._H,{...l().s.idp_metadata_xml_removed});case"organization.saml.idp_metadata_xml_updated":return(0,M.jsx)(n()._H,{...l().s.idp_metadata_xml_updated});case"organization.owner.added":return(0,M.jsx)(n()._H,{defaultMessage:"Added {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.added",values:{ownerNameAndEmail:(0,d().hu)(Ve,Le)}});case"organization.owner.removed":return(0,M.jsx)(n()._H,{defaultMessage:"Removed {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.removed",values:{ownerNameAndEmail:(0,d().hu)(Ve,Le)}});case"organization.audit_log_exported":return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.organization.audit_log_exported",defaultMessage:"Exported the organization audit log for last {duration} days",values:{duration:Le.meta.duration}});case"organization.settings.name_changed":return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.organization.settings.name_changed",defaultMessage:"Changed the organization name from “{oldValue}“ to “{newValue}“",values:{oldValue:Le.changes.name.oldValue,newValue:Le.changes.name.newValue}});case"organization.workspace.removed":return(0,M.jsx)(n()._H,{id:"auditlogEventFilter.eventColumn.organization.workspace.removed",defaultMessage:"Removed workspace “{workspaceName}“ from the organization",values:{workspaceName:Le.target.space.name}});case"organization.email_domain.verified":return(0,M.jsx)(n()._H,{defaultMessage:"Added a verified email domain “{emailDomain}“ to the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.verified",values:{emailDomain:Le.changes.domain}});case"organization.email_domain.unverified":return(0,M.jsx)(n()._H,{defaultMessage:"Removed a verified email domain “{emailDomain}“ from the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.unverified",values:{emailDomain:Le.changes.domain}});case"organization.default_space_settings.disable_guests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for guests",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.disable_guests_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(ke=Le.changes)||void 0===ke||null===(ke=ke.enabled)||void 0===ke?void 0:ke.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_ai_feature_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for AI feature",id:"auditlog.actionNames.eventColumn.organization.enable_ai_feature_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(Ie=Le.changes)||void 0===Ie||null===(Ie=Ie.enabled)||void 0===Ie?void 0:Ie.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_page_analytics_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for page view tracking for workspace analytics",id:"auditlog.actionNames.eventColumn.organization.disable_page_analytics_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(He=Le.changes)||void 0===He||null===(He=He.enabled)||void 0===He?void 0:He.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_public_access_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for members sharing pages publicly",id:"auditlog.actionNames.eventColumn.organization.disable_public_access_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(Pe=Le.changes)||void 0===Pe||null===(Pe=Pe.enabled)||void 0===Pe?void 0:Pe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_move_to_space_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for moving or duplicating pages to other workspaces",id:"auditlog.actionNames.eventColumn.organization.disable_move_to_space_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(De=Le.changes)||void 0===De||null===(De=De.enabled)||void 0===De?void 0:De.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_export_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for exporting pages",id:"auditlog.actionNames.eventColumn.organization.disable_export_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(ze=Le.changes)||void 0===ze||null===(ze=ze.enabled)||void 0===ze?void 0:ze.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_membership_requests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.organization.disable_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(Ae=Le.changes)||void 0===Ae||null===(Ae=Ae.enabled)||void 0===Ae?void 0:Ae.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_guest_membership_requests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_guest_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(Ne=Le.changes)||void 0===Ne||null===(Ne=Ne.enabled)||void 0===Ne?void 0:Ne.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_guest_invite_requests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request inviting guests",id:"auditlog.actionNames.eventColumn.organization.enable_guest_invite_requests_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(Re=Le.changes)||void 0===Re||null===(Re=Re.enabled)||void 0===Re?void 0:Re.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_external_membership_requests_toggled":return(0,M.jsx)(n()._H,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_external_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:ee({intl:Ve,value:null===(Be=Le.changes)||void 0===Be||null===(Be=Be.enabled)||void 0===Be?void 0:Be.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.integration_restriction_updated":return function(e){const t=void 0,{newValue:a}=e.changes.integration_restrictions;if(a===t)return(0,M.jsx)(n()._H,{defaultMessage:"Updated organization integrations setting: workspaces may have their own integration restrictions",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.undefined"});switch(a){case"no_restrictions":return(0,M.jsx)(n()._H,{defaultMessage:"Updated organization integrations setting: allowing members to install all integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.no_restrictions"});case"approved_only":return(0,M.jsx)(n()._H,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_only"});case"approved_or_built_by_notion":return(0,M.jsx)(n()._H,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved and Notion-built integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_or_built_by_notion"});default:(0,o().t1)(a)}}(Le);case"form_response.created":return(0,M.jsx)(n()._H,{defaultMessage:"New form submission for {formName} created",id:"auditLogEntry.workspace_form_submission_created",values:{formName:(0,j().yb)(Le)}});case"form.created":return(0,M.jsx)(n()._H,{defaultMessage:"Created form",id:"auditLogEntry.workspace_form_created"});case"form.content.updated":return(0,M.jsx)(n()._H,{defaultMessage:"Edited form {formName}",id:"auditLogEntry.workspace_form_edited",values:{formName:(0,j().yb)(Le)}});case"form.viewed":return(0,M.jsx)(n()._H,{defaultMessage:"Viewed form {formName}",id:"auditLogEntry.workspace_form_viewed",values:{formName:(0,j().yb)(Le)}});case"workspace.shared_email_domain_added":return(0,M.jsx)(n()._H,{defaultMessage:"Added shared email domain {emailDomain}",id:"auditLogEntry.workspace_shared_email_domain_added",values:{emailDomain:Le.changes.domain}});case"workspace.shared_email_domain_removed":return(0,M.jsx)(n()._H,{defaultMessage:"Removed shared email domain {emailDomain}",id:"auditLogEntry.workspace_shared_email_domain_removed",values:{emailDomain:Le.changes.domain}});case"page.viewed.by_shared_email_domain_user":return(0,M.jsx)(n()._H,{defaultMessage:"{pageName} viewed by user on shared email domain",id:"auditLogEntry.page_viewed_by_shared_email_domain_user",values:{pageName:(0,j().pz)(Le)}});default:if("local"!==Oe)return g().log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:Le}}}),(0,M.jsx)(M.Fragment,{});(0,o().t1)(Le)}var $e}function ee(e){let{intl:t,value:a,shouldInvertBoolean:s}=e;return void 0===a?t.formatMessage(l().s.unset):J(t,s?!a:a)}function te(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,M.jsx)(n()._H,{...l().s.a_file_with_extension,values:{extension:a}}):(0,M.jsx)(n()._H,{...l().s.a_file})}var ae=()=>a(707513),se=()=>a(654133),ne=()=>a(998901),ie=()=>a(142735),oe=()=>a(846550),re=()=>a(506347),le=()=>a(108714),de=()=>a(429725),ce=()=>a(876822),ue=()=>a(826955);function me(e){const{pageAuditLogEntry:t}=e,{table:a,id:s,meta:n}=t.target.page,i=(0,oe().yK)((e=>({link:{display:"inline",color:e.mediumTextColor,textDecoration:"underline"}})),[]),o=(0,ie().VK)((()=>{const{currentSpaceStore:e}=ce().default.state;return n&&n.parent&&e?(0,ue().Kv)(e,n.parent):e}),[n]),r=(0,ie().VK)((()=>o?ue().G.createChildStore(o,{id:s,table:a}):null),[o,s,a]),l=(0,ie().VK)((()=>r?(0,de().ZP)({store:r,pageVisitSource:re().tY.AuditLog}):null),[r]);return l?(0,M.jsxs)(M.Fragment,{children:["“",(0,M.jsx)(le().Z,{style:i.link,external:!0,href:l,children:(0,j().pz)(t,{noQuotes:!0})}),"“"]}):(0,M.jsx)(M.Fragment,{children:(0,j().pz)(t)})}function ge(e){const{auditLogEntry:t,id:a}=e,[i,o]=(0,s.useState)(""),r=(0,n().YB)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);o((null==e?void 0:e.textContent)||"")}),[a]),(0,M.jsx)(se().Z,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,M.jsx)(he,{text:i,auditLogEntry:t}),placement:ne().Placement.Bottom,render:e=>(0,M.jsx)("div",{...e,style:{fontSize:14,...ae().Yu},id:a,children:(0,M.jsx)(pe,{auditLogEntry:t,env:"production",intl:r})})})}function pe(e){const{auditLogEntry:t,env:a,intl:s}=e;return X({auditLogEntry:t,env:a,intl:s,options:{renderPageName:e=>(0,M.jsx)(me,{pageAuditLogEntry:e})}})}function he(e){var t,a;const{auditLogEntry:s,text:i}=e,o=(0,n().YB)(),r=(0,w().q6)({auditLogEntry:s,intl:o}),l=(0,w().x9)({auditLogEntry:s,intl:o});return(0,M.jsxs)("div",{children:[i,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,M.jsx)("div",{children:(0,M.jsx)(n()._H,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,M.jsx)("div",{children:(0,w().xk)(s,o)}),r&&(0,M.jsx)(n()._H,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}}),l&&(0,M.jsx)(n()._H,{id:"auditLogColumnEvent.tooltip.audienceMessage.forms",defaultMessage:"Form audience: {audience}",values:{audience:l}})]})}},242716:(e,t,a)=>{a.d(t,{Z:()=>D});a(670560),a(267602),a(731107);var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(598242),r=()=>a(775377),l=()=>a(619186),d=()=>a(242217),c=()=>a(788860),u=()=>a(568017),m=()=>a(513670),g=()=>a(696459),p=()=>a(61738),h=()=>a(265640),f=()=>a(827973),x=()=>a(715139),v=()=>a(291198),y=()=>a(198829),b=()=>a(255577),S=()=>a(906651),j=()=>a(388284),w=()=>a(67961),M=()=>a(286338),C=()=>a(352230),_=()=>a(998901),T=()=>a(749826),k=()=>a(167705),I=a(785893);const H={page:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"}),organization:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.categoryName.organization",defaultMessage:"Organization"}),form:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.categoryName.form",defaultMessage:"Form"})};function P(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:n,shouldShowCount:o,onCategoryClick:r,onCategoryToggleClick:l,...d}=e;const u=(0,i().yK)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let m,g;return m=o?t===a?(0,I.jsx)(c()._H,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,I.jsx)(c()._H,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,g=t===a||0!==a&&"partial",(0,I.jsx)(f().Z,{...d,className:"notranslate",textWrapperStyle:u.textWrapperStyle,focused:!1,title:(0,I.jsxs)("div",{style:u.title,children:[(0,I.jsx)(k().Z,{style:u.toggleButton,open:n,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,I.jsx)(x().Z,{checked:g,size:14,checkSize:8,onClick:r}),(0,I.jsx)(w().Z,{style:u.categoryText,children:H[s]}),(0,I.jsx)(w().Z,{isSecondaryColor:!0,style:u.categorySubHeader,children:m})]})})}const D=function(e){let{onChange:t,lastSelectionStore:o,componentStore:r}=e;const l=(0,i().Fg)(),d=(0,n().qz)(void 0,a(692304).Z),u=(0,n().VK)((()=>r.state.isMenuOpen),[r]),m=(0,s.useCallback)((()=>(0,I.jsx)(V,{onChange:t,componentStore:r,lastSelectionStore:o,menuListStore:d})),[t,r,o,d]),g=(0,s.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),L(!1,e)}(r,o)),[r,o]),p=N(l),h=(0,I.jsx)(c()._H,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),f=(0,I.jsx)(O,{componentStore:r,title:h});return(0,I.jsx)(a(390561).Z,{marginAfter:!1,children:(0,I.jsx)(a(967092).ZP,{popupType:a(104088).k.Popup,placementToOrigin:_().Placement.Bottom,alignmentToOrigin:_().Alignment.Start,open:u,render:m,onDismiss:g,keepFocus:!0,origin:f,preventScaleTransition:!0,style:p.popup})})};function z(e){var t;return m().oA([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function A(e){let{totalNumSelected:t,totalNumEvents:a}=e;const s=(0,i().yK)((e=>({container:{background:u().ZP.diffBackground,color:u().ZP.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{marginLeft:8}})),[]);return(0,I.jsx)(w().Z,{style:s.container,children:(0,I.jsx)(c()._H,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function N(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}function R(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n,componentStore:i}=e,o=t.category,r=()=>{i.toggleCategorySelection(t)},l=()=>{i.selectCategorySelection(t)};return{key:o,action:r,render:e=>(0,I.jsx)(P,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:o,categoryOpen:i.state.categoryToggleOpen[o],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function B(e){const{actionName:t,renderGroup:a,componentStore:s,intl:n}=e,i=()=>{s.selectActionName(t,a)},o=n.formatMessage(r().TE[t]);return{key:t,action:i,render:e=>(0,I.jsx)(f().Z,{...e,icon:(0,I.jsx)(x().Z,{checked:s.state.actionSelections[t],size:14,checkSize:8,onClick:i}),focused:!1,title:o,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:t,localizedActionName:o}}function L(e,t){t.setState({...t.state,isMenuOpen:e})}function O(e){let{title:t,componentStore:a}=e;const s=(0,n().VK)((()=>a.hasActionNameSelected()),[a]);return(0,I.jsx)(p().Z,{on:s,icon:(0,d().S)({width:16,marginRight:6,fill:"currentColor"}),title:(0,I.jsx)("span",{children:t}),onClick:()=>{L(!0,a)}})}function V(e){let{onChange:t,componentStore:a,lastSelectionStore:r,menuListStore:d}=e;const u=(0,i().Fg)(),m=(0,c().YB)(),p=(0,s.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,a)),[a]),f=N(u),x=(0,n().VK)((()=>[...(0,g().qP)(o().lo).reduce(((e,t)=>{let[a,s]=t;return T().default.checkGate({gateName:a})?e:[...e,...s]}),[]),...(0,M().F$)()?[]:["team_guest_default_permission_updated"],...(0,M().Ye)()?[]:["guest_membership_requests_toggled"]]),[]),{actionSelections:w,categoryToggleOpen:_,renderOrder:k,searchQuery:H}=(0,n().VK)((()=>{const{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}=a.state;return{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}}),[a]),P=[];let D=0,O=0;for(const s of k){const e=s.category,t=[];let n=0;for(const i of s.orderedActions)x.includes(i)||(t.push(B({actionName:i,renderGroup:s,intl:m,componentStore:a})),w[i]&&n++);if(D+=n,O+=t.length,P.push(R({renderGroup:s,shouldShowCount:!Boolean(H),totalNumEventsForCategory:t.length,numSelectedForCategory:n,componentStore:a})),_[e])if(H){const e=(0,l().ZP)(H,t,z);P.push(...e)}else P.push(...t)}const V={key:"results",items:P,render:e=>(0,I.jsx)(j().Z,{...e,title:null,loading:!1})};return(0,I.jsxs)("div",{style:f.container,children:[(0,I.jsx)(v().Z,{style:f.searchInput,placeholder:m.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:p,value:H,showClearButton:!0}),H&&(0,I.jsx)(A,{totalNumSelected:D,totalNumEvents:O}),(0,I.jsx)(y().Z,{menuType:C().o.Popup,header:null,maxHeight:356,children:(0,I.jsx)(b().ZP,{type:b().iW.Vertical,store:d,initialFocus:0,sections:[V]})}),(0,I.jsxs)(j().Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,I.jsx)(h().D,{onClick:()=>{!function(e){e.clearAllSelections()}(a)},children:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,I.jsx)(S().Z,{onClick:()=>{!function(e,t,a){const s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),L(!1,t)}(t,a,r)},children:(0,I.jsx)(c()._H,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},294492:(e,t,a)=>{a.d(t,{Z:()=>n});a(667294);var s=a(785893);const n=function(){return(0,s.jsx)("div",{style:{},children:(0,s.jsx)(a(901690).Z,{paragraphs:[{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},997218:(e,t,a)=>{a.d(t,{v:()=>i});a(667294);var s=()=>a(265640),n=a(785893);function i(e){const{children:t,disabled:a,onClick:i}=e;return(0,n.jsx)(s().D,{onClick:i,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},940125:(e,t,a)=>{a.d(t,{Hq:()=>p,Ij:()=>g,KN:()=>r,PM:()=>d,Qb:()=>u,Zy:()=>c,dd:()=>o,eW:()=>m,mK:()=>h,o0:()=>l});var s=()=>a(646574),n=()=>a(874459),i=()=>a(998411);function o(e,t){return(0,s().ZW)({value:n().OQ.notionDateTimeToLuxon(e,t.locale),preset:"short"})}function r(e,t){return(0,s().ZW)({value:n().OQ.notionDateTimeToLuxon(e,t.locale),preset:"time"})}function l(e,t){return n().OQ.notionDateTimeToLuxon(e,t.locale).toFormat(n()._F)}function d(e,t){let a={starting:void 0,ending:void 0};var s,n,o,r;if(t.starting&&t.ending)a={starting:{type:"datetime",start_time:"",start_date:t.starting.start_date,time_zone:""},ending:{type:"datetime",start_time:"",start_date:t.ending.start_date,time_zone:""}},null!==(s=e.starting)&&void 0!==s&&s.start_time&&null!==(n=e.starting)&&void 0!==n&&n.time_zone&&(a.starting={...a.starting,start_time:e.starting.start_time,time_zone:e.starting.time_zone}),null!==(o=e.ending)&&void 0!==o&&o.start_time&&null!==(r=e.ending)&&void 0!==r&&r.time_zone?a.ending={...a.ending,start_time:e.ending.start_time,time_zone:e.ending.time_zone}:a={starting:{...a.starting,start_time:"00:00",time_zone:(0,i().r)()},ending:{...a.ending,start_time:"23:59",time_zone:(0,i().r)()}};else if(t.starting){var l,d;a=null!==(l=e.starting)&&void 0!==l&&l.start_time&&null!==(d=e.starting)&&void 0!==d&&d.time_zone?{starting:{type:"datetime",start_date:t.starting.start_date,start_time:e.starting.start_time,time_zone:e.starting.time_zone},ending:e.ending}:{starting:{type:"datetime",start_date:t.starting.start_date,start_time:"00:00",time_zone:(0,i().r)()},ending:e.ending}}else if(t.ending){var c,u;a=null!==(c=e.ending)&&void 0!==c&&c.start_time&&null!==(u=e.ending)&&void 0!==u&&u.time_zone?{ending:{type:"datetime",start_date:t.ending.start_date,start_time:e.ending.start_time,time_zone:e.ending.time_zone},starting:e.starting}:{ending:{type:"datetime",start_date:t.ending.start_date,start_time:"23:59",time_zone:(0,i().r)()},starting:e.starting}}else a={starting:e.starting,ending:e.ending};return a}function c(e){return e.starting&&e.ending?{starting:{type:"date",start_date:e.starting.start_date},ending:{type:"date",start_date:e.ending.start_date}}:e.starting?{starting:{type:"date",start_date:e.starting.start_date}}:e.ending?{ending:{type:"date",start_date:e.ending.start_date}}:{}}function u(e){if(e)return{type:"date",start_date:e.start_date}}function m(e){return`${e.actorType}:${e.actorId}`}function g(e){const t=e.split(":");if(2===t.length)return"bot"===t[0]?{actorId:t[1],actorType:"bot"}:"notion_user"===t[0]?{actorId:t[1],actorType:"notion_user"}:void 0}function p(e){return{starting:e.starting?{type:"date",start_date:e.starting.start_date}:void 0,ending:e.ending?{type:"date",start_date:e.ending.start_date}:void 0}}function h(e){return void 0===e.starting&&void 0===e.ending}},173584:(e,t,a)=>{a.d(t,{e:()=>i,j:()=>n});a(267602),a(653476),a(470928),a(30005);var s=()=>a(696459);let n=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class i extends(()=>a(263184))().default{getAllActionNames(){return(0,s().Yd)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===n.None||a===n.Partial?n.All:n.None,i=s===n.All,o={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{o[e]=i})),this.setState({...this.state,actionSelections:o,categorySelections:{...this.state.categorySelections,[r.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},i=t.orderedActions.filter((e=>s[e])).length,o=0===i?n.None:i===t.orderedActions.length?n.All:n.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:o}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,s().Yd)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,s().Yd)(this.state.categorySelections),n.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}},582665:(e,t,a)=>{a.d(t,{Z:()=>r,r:()=>l});a(241792),a(398858),a(461318),a(33228);var s=()=>a(874459),n=()=>a(586573),i=()=>a(940125);class o extends(()=>a(263184))().default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:n().NQ.CreatedNewest}}}const r=new o;function l(e){const{timeRange:t,actors:a,actions:o,sortOrder:r}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${s().OQ.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${s().OQ.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(i().eW).join(",")),(null==o?void 0:o.length)>0&&l.append("actions",o.join(",")),l.append("sort",`${r||n().NQ.CreatedNewest}`),l.toString()}},559333:(e,t,a)=>{a.d(t,{X:()=>i});var s=()=>a(586573),n=()=>a(173584);class i extends n().e{getInitialState(){return{categorySelections:{page:n().j.All,space:n().j.All,team:n().j.All,account:n().j.All,form:n().j.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0,form:!0},searchQuery:void 0,actionSelections:(0,a(696459).Xc)(s().yv,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:s().dq.page},{category:"space",orderedActions:s().dq.space},{category:"account",orderedActions:s().dq.account},{category:"team",orderedActions:s().dq.team},{category:"form",orderedActions:s().dq.form}]}}}},777539:(e,t,a)=>{a.d(t,{Z:()=>le});var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(135796),l=()=>a(788860),d=()=>a(696459),c=()=>a(940125),u=()=>a(61738),m=()=>a(8),g=()=>a(998901),p=()=>a(104088),h=()=>a(793504),f=()=>a(677762),x=()=>a(212480),v=()=>a(265640),y=()=>a(827973),b=()=>a(94967),S=()=>a(967092),j=()=>a(906651),w=()=>a(388284),M=()=>a(874459),C=()=>a(998411),_=()=>a(527278),T=()=>a(352230),k=()=>a(92891),I=()=>a(470386),H=()=>a(667637),P=()=>a(688048),D=()=>a(312117),z=()=>a(544590),A=()=>a(291198),N=a(785893);const R=(0,l().vU)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const B=function(e){const t=(0,l().YB)(),n=(0,i().qz)(void 0,z().Z),{value:o,customErrorMessage:r}=e;(0,s.useEffect)((()=>{n.reset()}),[o,n]);const d=(0,s.useCallback)((()=>(0,N.jsx)(F,{dateTimeInputMenuItemProps:e,store:n})),[e,n]),c=(0,i().VK)((()=>O(t,n,r)),[t,n,r]);return c?(0,N.jsx)(a(654133).Z,{renderTooltip:()=>c,forceVisibleState:!0,placement:g().Placement.Left,render:d,originGap:-8}):(0,N.jsx)(F,{dateTimeInputMenuItemProps:e,store:n})};function L(e,t){const{device:a}=e;return!!a.isMobile||!t}function O(e,t,a){if(!t.state.error)return;const s=a&&a(t.state.error);if(s)return s;switch(t.state.error){case z().B.INVALID_DATE:return e.formatMessage(R.invalidDateError);case z().B.INVALID_RANGE:return e.formatMessage(R.invalidDateRangeError);case z().B.NOT_SUPPORTED:return e.formatMessage(R.notSupportedDateRangeError);default:(0,d().t1)(t.state.error)}}function V(e,t,a,s,n,i){const o=function(e,t,a,s,n){if(!a.state.dateEdited&&!a.state.timeEdited)return;if(!a.state.temporaryValue.date&&!a.state.temporaryValue.time)return{value:void 0};const i=(0,D().uy)(a.state.temporaryValue.date||"",t);if(i){let t="";return t=s?(null==e?void 0:e.start_time)||"00:00":n?"23:59":"00:00",{value:{type:"datetime",start_date:i,time_zone:(null==e?void 0:e.time_zone)||(0,C().r)(),start_time:t}}}const o=(0,D().wk)(a.state.temporaryValue.time||"",t);return(null!=e&&e.start_date||i)&&o?{value:{type:"datetime",start_date:(null==e?void 0:e.start_date)||i,start_time:o,time_zone:(null==e?void 0:e.time_zone)||(0,C().r)()}}:{error:z().B.INVALID_DATE}}(e,t,a,n,i);if(o)return s?s(o):o}function U(e){const{theme:t,disabled:a,focus:s,intl:n,store:i,customErrorMessage:o}=e,r=function(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{boxShadow:e.outlineBlueInputBoxShadow},inputError:{boxShadow:e.outlineRedInputBoxShadow},placeholder:{color:e.lightTextColor}}}(t),l=O(n,i,o);if(!a)return l?r.inputError:s?r.inputFocused:r.inputDefault}function q(e,t,a,s,n,i,o,r,l,d,c){const{device:u}=e,m=function(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:12},inputWrapper:{borderRadius:6,height:28,paddingRight:L(e,t)?6:0,position:"relative"},inputEditRegion:{width:L(e,t)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}}}(e,d);return{style:{...m.menuItem,...n},inputOuterStyle:{...m.inputWrapper,...s,...U({theme:t,disabled:i,focus:o,intl:r,store:l,customErrorMessage:c})},inputStyle:{...m.inputEditRegion,...u.isMobile&&m.inputEditRegionMobile,...a}}}function E(e,t,a,s,n,i,o,r,l,d){let c;(!r||"date"===t&&null!=n&&n.start_time||"time"===t&&null!=n&&n.start_date)&&(c=V(n,i,o,l,r,d),c&&(a(c),c.error?o.setState({...o.state,dateEdited:!1,error:c.error}):o.reset())),s&&s(e,c)}function Z(e,t,a,s,n,i,o,r,l){const d=V(t,a,s,i,o,r);d?(e(d),d.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:d.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),l&&n&&n(l)}function F(e){let{dateTimeInputMenuItemProps:t,store:a}=e;const{store:r,hideClearButton:d,focus:u,showTime:m,placeholder:g,customErrorMessage:p,...h}=t,{onBlur:f,onClear:x,onDateFocus:v,onSubmit:y,onTimeFocus:b,onUpdate:S,isEndingDate:j,inputStyle:w,inputOuterStyle:M,style:C,disabled:T,validate:k,value:I}=t,H=(0,l().YB)(),P=(0,o().Fg)(),D=(0,n().O7)(),z=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,timeEdited:!0,temporaryValue:{...i.state.temporaryValue,time:e.target.value||""}}),c.isAndroid&&Z(a,s,n,i,o,r,l,d)}(e,D,S,I,H,a,f,k,m,j)),[D,S,I,H,a,f,k,m,j]),R=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,timeEdited:!1}),a&&a(e)}(e,a,b)),[a,b]),B=(0,s.useCallback)((()=>function(e,t,a,s,n,i,o,r){s.setState({...s.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const l=V(t,a,s,i,o,r);l&&e(l),s.setState({...s.state,dateEdited:!1,timeEdited:!1}),n&&n()}(S,I,H,a,x,k,m,j)),[S,I,H,a,x,k,m,j]),O=(0,s.useCallback)((e=>Z(S,I,H,a,f,k,m,j)),[S,I,H,a,f,k,m,j]),U=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,dateEdited:!0,temporaryValue:{...i.state.temporaryValue,date:e.target.value||""}}),c.isAndroid&&Z(a,s,n,i,o,r,l,d)}(e,D,S,I,H,a,f,k,m,j)),[D,S,I,H,a,f,k,m,j]),F=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,dateEdited:!1}),a&&a(e)}(e,a,v)),[a,v]),{device:K}=D,G=K.isMobile?"date":"text",Y=K.isMobile?"time":"text",$=A().B.Transparent,J=K.isMobile?void 0:u,Q=(0,i().VK)((()=>q(D,P,w,M,C,T,J,H,a,d,p)),[D,P,w,M,C,T,J,H,a,d,p]),X={display:"flex",alignItems:"center",lineHeight:2,background:P.inputBackground,paddingLeft:8,flexBasis:"50%",...Q.inputOuterStyle},ee=(0,i().VK)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().dd(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?c().dd(t,a):""}(D,I,H,a)),[D,I,H,a]),te=(0,i().VK)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().KN(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?c().KN(t,a):""}(D,I,H,a)),[D,I,H,a]);return(0,N.jsxs)("div",{style:X,children:[(0,N.jsx)(A().Z,{...h,type:G,format:$,placeholder:g,focus:"date"===J,onFocus:F,onChange:U,onSubmit:e=>E(e,"date",S,y,I,H,a,m,k,j),onBlur:O,value:ee,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:!m&&L(D,d),onClearButtonClick:B}),m&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:{height:14,width:1,background:P.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,N.jsx)(A().Z,{...h,placeholder:_().Z.formatMessage(W.timePlaceholder),type:Y,format:$,focus:"time"===J,onFocus:R,onChange:z,onSubmit:e=>E(e,"time",S,y,I,H,a,m,k,j),onBlur:O,value:te,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:L(D,d),onClearButtonClick:B})]})]})}const W=(0,l().vU)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});const K=function(e){let{title:t,value:s,onUpdate:o,onDismiss:r,disabled:l,footer:d,header:c,hideTime:u,showTime:m,store:g,dayRangeStore:p,minDate:h,maxDate:v,customErrorMessage:y}=e;const b=(0,n().O7)(),S=(0,i().qz)(p,x().Z),j=(0,i().qz)(g,f().ZP);(0,a(732811).K)((()=>{void 0!==m&&j.setState({...j.state,showTime:m})}));const{device:w}=b;return(0,N.jsx)(a(198829).Z,{...se(b,t,s,o,j,S,r,l,d,h,v),children:(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,N.jsxs)("div",{children:[c,!w.isMobile&&(0,N.jsx)(ae,{value:s,disabled:l,onUpdate:o,store:j,dayRangeStore:S,minDate:h,maxDate:v,customErrorMessage:y}),(0,N.jsx)(J,{value:s,onUpdate:o,store:j,dayRangeStore:S,minDate:h,maxDate:v})]}),(0,N.jsx)(te,{onUpdate:o,value:s,hideTime:u,store:j,dayRangeStore:S})]})})};function G(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:i}=e;return a.error?a:function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?M().OQ.notionDateTimeToLuxon(t.starting):void 0,i=t.ending?M().OQ.notionDateTimeToLuxon(t.ending):void 0;if(n&&i&&i<n)return{error:k().B.INVALID_RANGE};const o=e=>(0,d().$K)(a)&&(0,d().$K)(e)&&e<a,r=e=>(0,d().$K)(s)&&(0,d().$K)(e)&&e>s;return o(n)||o(i)||r(n)||r(i)?{error:k().B.NOT_SUPPORTED}:{value:t}}({range:{...s,[t]:a.value},minValue:n,maxValue:i})}function Y(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:i}=e;if(a.error)return a;return function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?M().OQ.notionDateToLuxon(t.starting):void 0,i=t.ending?M().OQ.notionDateToLuxon(t.ending):void 0;if(n&&i&&i<n)return{error:k().B.INVALID_RANGE};const o=e=>a&&e&&e<a,r=e=>s&&e&&e>s;return o(n)||o(i)||r(n)||r(i)?{error:k().B.NOT_SUPPORTED}:{value:t}}({range:{...c().Zy(s),[t]:a.value},minValue:n,maxValue:i})}function $(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.mediumTextColor}}}function J(e){let{value:t,onUpdate:a,store:s,dayRangeStore:r,minDate:l,maxDate:d}=e;const u=(0,o().Fg)(),m=(0,n().O7)(),g=(0,i().qz)(r,x().Z),p=(0,i().qz)(s,f().ZP),{device:h}=m,v=$(m,u),y=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(u),b={...v.pickerSection,...h.isMobile&&v.pickerSectionMobile,...h.isMobile&&y.pickerSectionMobile};return(0,N.jsx)(w().Z,{children:(0,N.jsx)("div",{style:b,children:(0,N.jsx)(P().Z,{value:c().Zy(t),dateTimeStore:p,store:g,onUpdate:e=>{if(e.error)return null;const s=c().PM(t,e.value);return a({error:e.error,value:s})},minDate:l,maxDate:d,validate:(e,a)=>Y({field:e,parsed:a,value:t,minValue:l,maxValue:d})})})})}function Q(e,t,a){t.setState({...t.state,focus:e});const s=f().QJ[e];a.setState({...a.state,focus:s})}function X(e,t){t.setState({...t.state,focus:e})}function ee(e,t,a){e.ending&&Q(h().Hv.EndDate,t,a),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?M().Sy(e.starting||e.ending):void 0,temporaryDateRange:{starting:c().Qb(e.starting),ending:c().Qb(e.ending)}})}function te(e){let{onUpdate:t,value:a,hideTime:s,store:r,dayRangeStore:d}=e;const c=(0,o().Fg)(),u=(0,n().O7)(),m=(0,i().VK)((()=>r.state.showTime),[r]);return(0,N.jsxs)("aside",{style:$(u,c).sidebar,children:[s?null:(0,N.jsx)(H().Z,{title:(0,N.jsx)(l()._H,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:m,onClick:()=>{if(r.toggleShowTime(),r.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,N.jsx)(y().Z,{focused:!1,title:(0,N.jsx)(l()._H,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=M().CQ(e,(0,C().r)());ee({starting:{...t,start_time:"00:00"},ending:t},r,d)},style:$(u,c).menuItem}),(0,N.jsx)(y().Z,{focused:!1,title:(0,N.jsx)(l()._H,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=M().Cv((0,C().r)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C().r)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,C().r)()}},r,d)},style:$(u,c).menuItem}),(0,N.jsx)(y().Z,{focused:!1,title:(0,N.jsx)(l()._H,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=M().Oo((0,C().r)()),t=M().CQ(Date.now(),(0,C().r)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C().r)()},ending:t},r,d)},style:$(u,c).menuItem}),(0,N.jsx)(y().Z,{focused:!1,title:(0,N.jsx)(l()._H,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=M().dj((0,C().r)()),t=M().CQ(Date.now(),(0,C().r)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C().r)()},ending:t},r,d)},style:$(u,c).menuItem})]})}function ae(e){let{value:t,disabled:a,onUpdate:s,store:r,dayRangeStore:d,minDate:u,maxDate:m,customErrorMessage:g}=e;const p=(0,l().YB)(),f=(0,o().Fg)(),x=(0,n().O7)(),{device:v,WindowSizeStore:y}=x,b=(0,i().VK)((()=>r.getFocus()),[r]);let S="date";b!==h().Hv.StartTime&&b!==h().Hv.EndTime||(S="time");const j=function(e,t){return{earliestValidEnding:e.starting&&c().o0(e.starting,t),latestValidStarting:e.ending&&c().o0(e.ending,t)}}(t,p),w=(0,i().VK)((()=>r.state.showTime),[r]),M=(0,i().VK)((()=>y.getSafePaddingLeftCSS(16)),[y]);return(0,N.jsxs)("div",{style:{paddingTop:v.isMobile?16:12,paddingBottom:v.isMobile?16:8,paddingLeft:v.isMobile?M:14,paddingRight:v.isMobile?M:14,display:w?"block":"flex",...v.isMobile&&{boxShadow:`\n                        0 1px 0 ${f.regularDividerColor}\n                    `,position:"relative",zIndex:2},background:v.isMobile?f.popoverBackground:void 0},children:[(0,N.jsx)(B,{disabled:a,placeholder:_().Z.formatMessage(W.startingDateMessage),focus:b===h().Hv.StartDate||b===h().Hv.StartTime?S:void 0,value:t.starting,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,i=G({field:"starting",parsed:t,value:a,minValue:s,maxValue:n});return i.error?i:{value:i.value.starting}}({parsed:e,value:t,minValue:u,maxValue:m}),customErrorMessage:g,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,s,t),onDateFocus:()=>Q(h().Hv.StartDate,r,d),onTimeFocus:()=>X(h().Hv.StartTime,r),onSubmit:(e,t)=>function(e,t,a,s,n){t&&t.error||(a===h().Hv.StartDate&&s.state.showTime?s.setState({...s.state,focus:h().Hv.StartTime}):(s.setState({...s.state,focus:h().Hv.EndDate}),n.setState({...n.state,focus:"ending"})))}(0,t,b,r,d),inputElementAttributes:{max:j.latestValidStarting},showTime:w}),(0,N.jsx)("div",{style:{width:12,height:8}}),(0,N.jsx)(B,{disabled:a,placeholder:_().Z.formatMessage(W.endingDateMessage),focus:b===h().Hv.EndDate||b===h().Hv.EndTime?S:void 0,value:t.ending,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,i=G({field:"ending",parsed:t,value:a,minValue:s,maxValue:n});return i.error?i:{value:i.value.ending}}({parsed:e,value:t,minValue:u,maxValue:m}),customErrorMessage:g,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,s,t),onDateFocus:()=>Q(h().Hv.EndDate,r,d),onTimeFocus:()=>X(h().Hv.EndTime,r),onSubmit:(e,t)=>function(e,t,a,s){t&&t.error||a===h().Hv.EndDate&&s.state.showTime&&s.setState({...s.state,focus:h().Hv.EndTime})}(0,t,b,r),inputElementAttributes:{min:j.earliestValidEnding},showTime:w})]})}function se(e,t,a,s,n,i,o,r,l,d,c){const{device:u}=e;if(u.isMobile){return{menuType:T().o.Modal,title:t,right:(0,N.jsx)(I().DoneMenuText,{}),onClickRight:o,header:(0,N.jsx)(ae,{value:a,disabled:r,onUpdate:s,store:n,dayRangeStore:i,minDate:d,maxDate:c})}}return{menuType:T().o.Popup,onClickOutside:o,footer:l}}var ne=()=>a(114755),ie=()=>a(630029),oe=()=>a(122159),re=()=>a(390561);const le=(0,l().XN)((function(e){let{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:m,icon:g,mode:p,focused:h,pillTitle:v,minDate:y,maxDate:b,customErrorMessage:S}=e;const j=(0,n().O7)(),w=(0,i().qz)(void 0,x().Z),M=(0,i().qz)(void 0,f().ZP);(0,s.useEffect)((()=>{fe({value:u},M,w)}),[u,M,w]);const{device:C}=j;return C.isMobile?(0,N.jsx)(Ce,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:m,icon:g,store:M,dayRangeStore:w,mode:p,minDate:y,maxDate:b,customErrorMessage:S}):(0,N.jsx)(Me,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:m,focused:h,icon:g,mode:p,pillTitle:v,store:M,dayRangeStore:w,minDate:y,maxDate:b,customErrorMessage:S})}));function de(e){const{device:t}=e;return t.isMobile?p().k.SlideUp:p().k.Popup}function ce(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function ue(e){e.preventDefault&&e.preventDefault()}function me(e){e({starting:void 0,ending:void 0})}function ge(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}function pe(e,t,a){a||(e.setState({...e.state,isOpen:!0,focus:h().Hv.StartDate}),t.setState({...t.state,isOpen:!0,focus:"starting"}))}function he(e,t,a,s,n,i){const{temporaryDateRange:o}=a.state;m().zD(e)||(i||t(o),a.setState({...a.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s.setState({...s.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function fe(e,t,a){if(e.error)return;const s={starting:(0,c().Qb)(e.value.starting),ending:(0,c().Qb)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function xe(e){let{disabled:t,icon:a,title:i,store:o,dayRangeStore:r}=e;const l=(0,n().O7)(),d=(0,s.useCallback)((()=>pe(o,r,t)),[o,r,t]),c=ge(l);return(0,N.jsx)(y().Z,{disabled:t,focused:!1,icon:a(c.icon),title:i,onClick:d})}function ve(e){let{disabled:t,title:a,value:i,intl:o,onChange:l,store:d,dayRangeStore:c}=e;const u=(0,n().O7)(),g=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=ge(u),h=(0,N.jsxs)("div",{style:p.summary,children:[(0,r().C)(p.iconActiveMobile),m()._Q(i,o)]});return(0,N.jsx)(oe().Z,{disabled:t,onClick:g,onClickClear:()=>me(l),label:a,title:h})}function ye(e){let{disabled:t,value:a,focused:i,intl:l,onChange:d,store:c,dayRangeStore:u}=e;const g=(0,o().Fg)(),p=(0,n().O7)(),h=(0,s.useCallback)((()=>pe(c,u,t)),[c,u,t]),f=ge(p),x=ce(g),v={...f.menuItem,...x.activeMenuItem},b=m()._Q(a,l),S=(0,N.jsx)(ne().Z,{onClick:()=>me(d),disabled:t});return(0,N.jsx)(y().Z,{focused:i,disabled:t,icon:(0,r().C)(f.iconActiveDesktop),title:b,right:S,isTokenTitle:!0,alignIconTop:!0,onClick:h,desktopTitleStyle:f.menuItemTitleDesktop,desktopIconStyle:f.iconActiveDesktopWrapper,style:v})}function be(e){let{disabled:t,title:a,icon:i,focused:r,mode:l,store:d,dayRangeStore:c}=e;const u=(0,o().Fg)(),m=(0,n().O7)(),g=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=ge(m),h=ce(u),f={...p.menuItem,...h.buttonMenuItem,...l===ie().z.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,N.jsx)(y().Z,{focused:r,disabled:t,icon:i(p.icon),title:a,onClick:g,style:f})}function Se(e){let{disabled:t,value:a,pillTitle:n,store:i,dayRangeStore:o}=e;const d=(0,s.useCallback)((()=>pe(i,o,t)),[i,o,t]),c=(0,N.jsx)(l()._H,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,N.jsx)(u().Z,{on:Boolean(a.starting||a.ending),icon:(0,r().C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,N.jsx)("span",{children:n||c}),onClick:d})}function je(e){let{onChange:t,onMenuDismiss:a,showButtons:s,store:n,dayRangeStore:i}=e;return(0,N.jsxs)(w().Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,N.jsx)(v().D,{onClick:()=>{n.clearTemporaryDateRange(),i.clearTemporaryDateRange(),t({starting:void 0,ending:void 0})},children:(0,N.jsx)(l()._H,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,N.jsx)(j().Z,{onClick:e=>{t(n.state.temporaryDateRange),he(e,t,n,i,a,s)},children:(0,N.jsx)(l()._H,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})}function we(e){let{onChange:t,onMenuDismiss:a,showButtons:n,title:o,header:r,sidebar:d,hideTime:c,value:u,store:m,dayRangeStore:g,minDate:p,maxDate:h,customErrorMessage:f}=e;const x=(0,s.useCallback)((e=>he(e,t,m,g,a,n)),[t,m,g,a,n]),y=(0,s.useCallback)((e=>fe(e,m,g)),[m,g]),b=(0,i().VK)((()=>function(e,t){const{temporaryDateRange:a}=t.state;return{...e,...a}}(u,m)),[u,m]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(K,{title:o,value:b,onUpdate:y,store:m,dayRangeStore:g,onDismiss:x,footer:"footer"===n&&(0,N.jsx)(je,{onChange:t,onMenuDismiss:a,showButtons:n,store:m,dayRangeStore:g}),sidebar:d,hideTime:c,header:r,minDate:p,maxDate:h,customErrorMessage:f}),"side"===n&&(0,N.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,N.jsx)(v().D,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:x,children:(0,N.jsx)(l()._H,{defaultMessage:"Cancel",id:"DateTimeFilter.cancelButton.label"})}),(0,N.jsx)(j().Z,{onClick:()=>t(m.state.temporaryDateRange),children:(0,N.jsx)(l()._H,{defaultMessage:"Accept",id:"DateTimeFilter.acceptButton.label"})})]})]})}function Me(e){let{mode:t,onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:m,hideTime:p,value:h,disabled:f,focused:x,icon:v,pillTitle:y,store:j,dayRangeStore:w,minDate:M,maxDate:C,customErrorMessage:_}=e;const T=(0,n().O7)(),k=(0,l().YB)(),I=(0,s.useCallback)((e=>he(e,a,j,w,o,r)),[a,j,w,o,r]),H=(0,s.useCallback)((()=>(0,N.jsx)(we,{onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:m,hideTime:p,value:h,store:j,dayRangeStore:w,minDate:M,maxDate:C,customErrorMessage:_})),[a,o,r,c,u,m,p,h,j,w,M,C,_]),P=ge(T),D=t===ie().z.Section,z=D?c:void 0,A=t===ie().z.Section?(0,N.jsx)(ye,{disabled:f,value:h,focused:x,intl:k,onChange:a,store:j,dayRangeStore:w}):t===ie().z.Button?(0,N.jsx)(be,{disabled:f,title:c,icon:v,focused:x,mode:t,store:j,dayRangeStore:w}):t===ie().z.Pill?(0,N.jsx)(Se,{disabled:f,value:h,pillTitle:y,store:j,dayRangeStore:w}):void(0,d().t1)(t),R=(0,i().VK)((()=>j.state.isOpen),[j]);return(0,N.jsx)(re().Z,{title:z,marginAfter:D,children:(0,N.jsx)(b().Z,{debugName:"DateTimeFilter",capture:R,onUp:ue,onDown:ue,onEnter:ue,children:(0,N.jsx)(S().ZP,{popupType:de(T),open:R,origin:A,render:H,onDismiss:I,placementToOrigin:g().Placement.Bottom,alignmentToOrigin:g().Alignment.Start,style:m?P.popupWithSidebar:P.popup})})})}function Ce(e){let{mode:t,onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:m,disabled:g,icon:h,store:f,dayRangeStore:x,minDate:v,maxDate:y,customErrorMessage:b}=e;const j=(0,l().YB)(),w=(0,s.useCallback)((e=>he(e,a,f,x,n,o)),[a,f,x,n,o]),M=(0,s.useCallback)((()=>(0,N.jsx)(we,{onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:m,store:f,dayRangeStore:x,minDate:v,maxDate:y,customErrorMessage:b})),[a,n,o,r,d,c,u,m,f,x,v,y,b]),C=(0,i().VK)((()=>f.state.isOpen),[f]),_=t===ie().z.Section?(0,N.jsx)(ve,{disabled:g,title:r,value:m,intl:j,onChange:a,store:f,dayRangeStore:x}):(0,N.jsx)(xe,{disabled:g,icon:h,title:r,store:f,dayRangeStore:x});return(0,N.jsx)(S().ZP,{popupType:p().k.SlideUp,open:C,origin:_,render:M,onDismiss:w,preventScaleTransition:!0})}},279431:(e,t,a)=>{a.d(t,{Cq:()=>k,zq:()=>I,ZP:()=>N,UV:()=>A,f4:()=>z,i0:()=>D,x2:()=>P});a(670560),a(241792);var s=a(667294),n=()=>a(846550),i=()=>a(788860),o=()=>a(696459),r=()=>a(308186),l=()=>a(285473),d=()=>a(827973),c=()=>a(906651),u=()=>a(67961),m=()=>a(824462),g=()=>a(594546),p=()=>a(443269),h=()=>a(146947),f=()=>a(707513),x=a(785893);const v=(0,i().vU)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const y=function(e){let{handleAddNewDomain:t,loading:r,verificationType:l}=e;const[d,m]=(0,s.useState)(""),g=!Boolean(d),p=(0,s.useCallback)((e=>{m(e.target.value)}),[]),y=(0,n().yK)((()=>({title:{fontFamily:f().F5(h().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:f().F5(h().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:g?.5:1}})),[g]);let b;switch(l){case"integration":b=v.integrationSubtitle;break;case"saml_config":b=v.samlConfigSubtitle;break;default:(0,o().t1)(l)}return(0,x.jsxs)(s.Fragment,{children:[(0,x.jsx)(u().Z,{style:y.title,children:(0,x.jsx)(i()._H,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})}),(0,x.jsx)(u().Z,{style:y.subtitle,isMultiline:!0,children:(0,x.jsx)(i()._H,{...b,values:{br:(0,x.jsx)("br",{})}})}),(0,x.jsx)(a(291198).Z,{value:d,style:y.input,placeholder:"notion.so",onChange:p}),(0,x.jsx)(c().Z,{onClick:()=>t(d),style:y.button,isLarge:!0,disabled:g,children:r?(0,x.jsx)(a(312578).Z,{}):(0,x.jsx)(i()._H,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})})]})};var b=()=>a(661297);const S=function(e){let{domain:t,isExpired:a,onClose:o}=e;const r=(0,n().yK)((e=>({title:{fontFamily:f().F5(h().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:f().F5(h().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return(0,x.jsxs)(s.Fragment,{children:[(0,x.jsx)(u().Z,{style:r.title,isMultiline:!0,children:(0,x.jsx)(i()._H,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:t}})}),(0,x.jsx)(u().Z,{style:r.subtitle,isMultiline:!0,children:a?(0,x.jsx)(i()._H,{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}):(0,x.jsx)(i()._H,{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})}),(0,x.jsx)(b().Z,{onClick:o,style:{width:"100%"},children:(0,x.jsx)(i()._H,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"OK"})})]})},j=(0,i().vU)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const w=function(e){let{domain:t,onClose:a,verificationType:r}=e;const l=(0,n().yK)((()=>({title:{fontFamily:f().F5(h().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:f().F5(h().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let d;switch(r){case"saml_config":d=j.samlConfigSubtitle;break;case"integration":d=j.integrationSubtitle;break;default:(0,o().t1)(r)}return(0,x.jsxs)(s.Fragment,{children:[(0,x.jsx)(u().Z,{style:l.title,isMultiline:!0,children:(0,x.jsx)(i()._H,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:t}})}),(0,x.jsx)(u().Z,{style:l.subtitle,isMultiline:!0,children:(0,x.jsx)(i()._H,{...d,values:{br:(0,x.jsx)("br",{})}})}),(0,x.jsx)(b().Z,{onClick:a,style:{width:"100%"},children:(0,x.jsx)(i()._H,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"OK"})})]})};const M=function(e){const t=(0,a(219727).O7)(),l=(0,i().YB)(),d=(0,n().Fg)(),[c,u]=(0,a(142735).AF)(e.store,a(21234).Z),{verificationType:h,verificationTargetId:f,refreshDomains:v}=e,b=(0,s.useCallback)((()=>{u((e=>({...e,loading:!1,modalOpen:!1})))}),[u]),j=(0,s.useCallback)((async e=>{u((e=>({...e,loading:!0})));const s="integration"===h?{type:h,integrationId:f,domain:e}:{type:h,spaceId:f,domain:e},n=await m().callApi({eventName:"createDomainVerificationCode",environment:t,data:s});if("success"===n.type){v(),g().K4(t,"domain_verification_domain_added",{type:h});const e=n.data.domainVerification,s=(0,a(578062).Hs)(e);u((e=>({...e,domainVerification:s,loading:!1})))}else r().UW((0,p().wf)(l,n)),u((e=>({...e,loading:!1})))}),[t,u,f,v,h,l]),M=(0,s.useCallback)((async e=>{u((e=>({...e,loading:!0})));const a=await m().callApi({eventName:"verifyDomain",environment:t,data:{verificationId:e.id}});if(g().K4(t,"domain_verification_verification_attempted",{type:h}),"success"===a.type){v(),g().K4(t,"domain_verification_domain_verified",{type:h});const a={type:"verified",domain:e.domain};u((e=>({...e,domainVerification:a,loading:!1})))}else r().UW((0,p().wf)(l,a)),u((e=>({...e,loading:!1})))}),[t,l,u,v,h]),C=(0,s.useCallback)((()=>{if(!c.domainVerification)return(0,x.jsx)(y,{handleAddNewDomain:j,loading:c.loading,verificationType:h});switch(c.domainVerification.type){case"invalid":return(0,x.jsx)(S,{domain:c.domainVerification.domain,isExpired:Date.now()>c.domainVerification.expiresAt,onClose:b});case"unverified":return(0,x.jsx)(a(879078).G_,{handleVerifyDomain:M,domainVerification:c.domainVerification,loading:c.loading});case"verified":return(0,x.jsx)(w,{domain:c.domainVerification.domain,onClose:b,verificationType:h});default:(0,o().t1)(c.domainVerification)}}),[c.domainVerification,c.loading,M,j,b,h]);return(0,x.jsx)(a(708518).Z,{open:c.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:b,render:()=>(0,x.jsx)("div",{style:{background:d.popoverBackground,width:410,padding:24,borderRadius:4},children:C()})})};var C=()=>a(825820);const _=[{id:"domain",headerTitle:(0,x.jsx)(i()._H,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>(0,x.jsx)(u().Z,{children:e.domain}),widthData:{width:100},sortable:!1},{id:"status",headerTitle:(0,x.jsx)(i()._H,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>(0,x.jsx)(I,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>(0,x.jsx)(H,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],T=(0,i().vU)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}});function k(){return(0,x.jsx)(u().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,x.jsx)(i()._H,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."})})}function I(e){let{status:t}=e;const a=(0,n().yK)((e=>{const a={[C().YF.Success]:e.statusTokenBackground.green,[C().YF.Pending]:e.statusTokenBackground.yellow,[C().YF.Failure]:e.statusTokenBackground.red},s={[C().YF.Success]:e.statusTokenIndicator.green,[C().YF.Pending]:e.statusTokenIndicator.yellow,[C().YF.Failure]:e.statusTokenIndicator.red},n={[C().YF.Success]:e.statusTokenText.green,[C().YF.Pending]:e.statusTokenText.yellow,[C().YF.Failure]:e.statusTokenText.red};return{container:{background:a[t],color:n[t],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:s[t],width:10,height:10,borderRadius:"100%"}}}),[t]);return(0,x.jsxs)("div",{style:a.container,children:[(0,x.jsx)("div",{style:a.dot}),D(t)]})}function H(e){let{onShowDetails:t,onRemove:s}=e;const n=P(),o=[];return t&&o.push({key:"details",action:()=>t(),render:e=>(0,x.jsx)(d().Z,{...e,style:n.menuItem,focused:!1,icon:(0,a(409873).D)(n.menuIcon),title:(0,x.jsx)(i()._H,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:(0,x.jsx)(i()._H,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0})}),s&&o.push({key:"remove",action:()=>s(),render:e=>(0,x.jsx)(d().Z,{...e,style:n.menuItem,focused:!1,icon:(0,a(95886).y)(n.menuIcon),title:(0,x.jsx)(i()._H,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:(0,x.jsx)(i()._H,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0})}),0===o.length?null:(0,x.jsx)(a(365766).Nz,{hideDropdownIcon:!0,title:(0,a(641772).o)(n.primaryIcon),items:o})}function P(){return(0,n().yK)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:"currentColor"}})),[])}function D(e){switch(e){case C().YF.Success:return(0,x.jsx)(i()._H,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case C().YF.Pending:return(0,x.jsx)(i()._H,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case C().YF.Failure:return(0,x.jsx)(i()._H,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,o().t1)(e)}}function z(e){return{domain:e,status:C().YF.Success,data:{type:"verified",domain:e}}}function A(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:C().YF.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:C().YF.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const N=function(e){const{disabled:t,domains:a,domainVerificationStore:d,verificationType:u,verificationTargetId:m,refreshDomains:g,onRemoveDomain:p,onClickAddDomain:h,renderOverrideAddDomainButton:f}=e,v=(0,n().yK)((e=>(0,l().bE)({columnRenderInfo:_,theme:e,containerMarginTop:0})),[]);function y(){t||(h&&h(),d.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}async function b(e,t){let a;if(t===C().YF.Failure)return void p(e);t===C().YF.Pending?a=T.unverifiedDomainWarning:t===C().YF.Success?a="saml_config"===u?T.verifiedSAMLWarning:T.verifiedIntegrationsWarning:(0,o().t1)(t);const{accept:s}=await r().gt(function(e){return{mode:"wide",message:(0,x.jsx)(i()._H,{defaultMessage:"Delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"}),description:(0,x.jsx)(i()._H,{...e}),acceptLabel:(0,x.jsx)(i()._H,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:(0,x.jsx)(i()._H,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})}}(a));s&&p(e)}const S=a.map((e=>{let{domain:a,status:s,data:n}=e;return{id:"verified"===n.type?a:n.id,isClickable:!1,domain:a,status:s,onShowDetails:t?void 0:()=>function(e){t||d.setState({domainVerification:e,loading:!1,modalOpen:!0})}(n),onRemove:t?void 0:()=>b(n,s)}}));return(0,x.jsxs)(s.Fragment,{children:[f?f(y):(0,x.jsx)(c().Z,{isLarge:!0,disabled:t,onClick:y,style:{margin:"4px 0px 16px",width:"fit-content"},children:(0,x.jsx)(i()._H,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})}),(0,x.jsx)(l().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:_,rows:S,styles:v,renderNoRowsComponent:()=>(0,x.jsx)(k,{})}),(0,x.jsx)(M,{store:d,verificationTargetId:m,verificationType:u,refreshDomains:g})]})}},487974:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K,getBlockExportTypeTitle:()=>G,getBlockIncludeContentsTitle:()=>Y,getCollectionViewExportTypeTitle:()=>$});a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(714230),l=()=>a(225339),d=()=>a(996106),c=()=>a(81954),u=()=>a(255933),m=()=>a(788860),g=()=>a(513670),p=()=>a(174912),h=()=>a(352230),f=()=>a(164079),x=()=>a(946444),v=()=>a(729201),y=()=>a(998901),b=()=>a(529048),S=()=>a(804217),j=()=>a(356765),w=()=>a(965014),M=()=>a(239823),C=()=>a(265640),_=()=>a(827973),T=()=>a(206352),k=()=>a(291198),I=()=>a(198829),H=()=>a(255577),P=()=>a(906651),D=()=>a(388284),z=()=>a(522319),A=()=>a(471645),N=()=>a(749854),R=()=>a(67961),B=()=>a(29090),L=()=>a(73478),O=a(785893);const V=["pdf","html","markdown"],U=["currentView","all"],q=1;function E(e){return e>.1&&e<2}const Z=["everything","no_files"],F=(0,m().vU)({dialogLabel:{id:"exportModal.dialogLabel",defaultMessage:"Export"}});function W(e){let{value:t,onChange:a}=e;const n=(0,m().YB)(),i=s.useCallback((e=>{const t=e.target.value,s=(0,d()._g)(t)||(0,x().m)(t,n);let i;"object"==typeof s?i="percent"===s.format?s.value:s.value/100:"number"==typeof s&&(i=s/100),void 0!==i&&a(i)}),[a,n]),[o,r]=s.useState(!1),l=s.useMemo((()=>(0,d().uf)(Math.round(100*t),"number",n)),[t,n]);return(0,O.jsx)(T().Z,{debugName:"ExportModal",capture:o,children:(0,O.jsx)(k().Z,{value:l,onChange:i,onFocus:()=>r(!0),onBlur:()=>r(!1),style:{width:60},inputStyle:{textAlign:"right"}})})}const K=function(){const e=(0,m().YB)(),t=(0,i().qz)(void 0,b().Z),n=(0,i().qz)(void 0,b().Z),o=(0,i().qz)(void 0,b().Z),r=(0,i().qz)(void 0,b().Z),l=(0,s.useCallback)((()=>(0,O.jsx)(ge,{includeContentsPopupStore:r,exportTypePopupStore:o,pdfFormatPopupStore:n,collectionViewExportTypePopupStore:t})),[r,o,n,t]),d=(0,i().VK)((()=>j().ZP.state.open),[]);return(0,O.jsx)(a(840820).Z,{ariaLabel:e.formatMessage(F.dialogLabel),onDismiss:ae,render:l,isOpen:d})};function G(e){switch(e){case"pdf":return(0,O.jsx)(m()._H,{id:"exportModal.exportFormatButton.pdf.label",defaultMessage:"PDF"});case"markdown":return(0,O.jsx)(m()._H,{id:"exportModal.exportFormatButton.markdownAndCSV.label",defaultMessage:"Markdown & CSV"});case"html":return(0,O.jsx)(m()._H,{id:"exportModal.exportFormatButton.html.label",defaultMessage:"HTML"})}}function Y(e){switch(e){case"everything":return(0,O.jsx)(m()._H,{id:"exportModal.includeContentTypes.everything.label",defaultMessage:"Everything"});case"no_files":return(0,O.jsx)(m()._H,{id:"exportModal.includeContentTypes.no_files.label",defaultMessage:"No files or images"})}}function $(e){switch(e){case"all":return(0,O.jsx)(m()._H,{id:"exportModal.includeDatabases.all.label.defaultView",defaultMessage:"Default View"});case"currentView":return(0,O.jsx)(m()._H,{id:"exportModal.includeDatabases.currentView.label",defaultMessage:"Current view"})}}function J(e){switch(e){case"Letter":return(0,O.jsx)(m()._H,{id:"exportModal.pageFormatButton.letter.label",defaultMessage:"Letter"});case"A3":return(0,O.jsx)(m()._H,{id:"exportModal.pageFormatButton.a3.label",defaultMessage:"A3"});case"A4":return(0,O.jsx)(m()._H,{id:"exportModal.pageFormatButton.a4.label",defaultMessage:"A4"});case"Legal":return(0,O.jsx)(m()._H,{id:"exportModal.pageFormatButton.legal.label",defaultMessage:"Legal"});case"Tabloid":return(0,O.jsx)(m()._H,{id:"exportModal.pageFormatButton.tabloid.label",defaultMessage:"Tabloid"})}}function Q(){const e=j().ZP.state;return e.open&&(0,j().Sw)(e)?void 0===e.exportOptions.scale?q:e.exportOptions.scale:q}function X(){return E(Q())}function ee(e){return{width:320,padding:24,fontSize:14,color:e.mediumTextColor}}function te(){const e=(0,o().Fg)();return(0,O.jsx)("div",{style:ee(e),children:(0,O.jsx)(m()._H,{defaultMessage:"Please go online to export.",id:"exportModal.offlineMessage.description"})})}function ae(){p().Qr()}function se(e){const t=j().ZP.state;if(t.open){if((0,j().Sw)(t)&&!p().y1(e))return void w().y(e,{from:"export_modal",upsell:{type:"product",product:"enterprise",limit:{type:"none"}}});p().BO(e,{...t,recursive:!t.recursive})}}function ne(e){if(!X())return;const t=j().ZP.state;t.open&&(p().Qr(),void 0===t.exportOptions.flattenExportFiletree&&e.device.isWindows&&(t.exportOptions.flattenExportFiletree=!0),t.root.table===u().bx?p().AW(e,{spaceId:t.root.id,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}):p().ZO(e,{block:{id:t.root.id,spaceId:(0,c().J)(t.root.spaceId)},recursive:t.recursive,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}))}function ie(e,t,a,s){const n=j().ZP.state,i=n.open&&"pdf"===e&&"space"===n.root.table&&!p().y1(s)&&"business";return{key:e,action:()=>{t.close(),i?w().y(s,{from:"export_modal",upsell:{type:"product",product:i,limit:{type:"none"}}}):function(e,t,a){const s=j().ZP.state;if(!s.open)return;const{exportOptions:n}=s;if(e===n.exportType)return;let i;i="pdf"===e?{...n,exportType:"pdf",pdfFormat:p().GI(t)}:{...n,exportType:e},p().BO(a,{...s,exportOptions:i})}(e,a,s)},render:t=>{let{onClick:a,key:s,...n}=t;return(0,O.jsx)(M().Z,{requireUpgradeToTier:i,analyticsName:"export_modal",onClick:a,render:(t,a)=>(0,O.jsx)(_().Z,{...(0,f().Z)(n,t),title:G(e),right:a}),renderUpgradeTooltip:()=>(0,O.jsx)(L().Z,{imageURL:r().Z.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(m()._H,{defaultMessage:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"}),caption:(0,O.jsx)(m()._H,{defaultMessage:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"})}),tooltipPlacement:y().Placement.Left,upgradeButtonDesktopStyle:{marginTop:2}},s)}}}function oe(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().ZP.state;a.open&&p().BO(t,{...a,exportOptions:{...a.exportOptions,includeContents:e}})}(e,a)},render:t=>(0,O.jsx)(_().Z,{...t,title:Y(e)})}}function re(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().ZP.state;a.open&&p().BO(t,{...a,exportOptions:{...a.exportOptions,collectionViewExportType:e}})}(e,a)},render:t=>(0,O.jsx)(_().Z,{...t,title:$(e)})}}function le(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().ZP.state;a.open&&(0,j().Sw)(a)&&p().BO(t,{...a,exportOptions:{...a.exportOptions,pdfFormat:e}})}(e,a)},render:t=>(0,O.jsx)(_().Z,{...t,title:J(e)})}}function de(){const e=(0,o().Fg)(),t=(0,n().O7)(),a=(0,i().VK)((()=>Q()),[]),s=(0,v().Z)(!0,500,100);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:32},children:[(0,O.jsx)(R().Z,{style:{color:e.lightTextColor},children:(0,O.jsx)(m()._H,{id:"exportModal.pageScale.description",defaultMessage:"Scale percent"})}),(0,O.jsx)(W,{value:a,onChange:e=>function(e,t){const a=j().ZP.state;a.open&&(0,j().Sw)(a)&&p().BO(t,{...a,exportOptions:{...a.exportOptions,scale:e}})}(e,t)})]}),!E(a)&&s&&(0,O.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:32,padding:"4px 0"},children:(0,O.jsx)(R().Z,{isSmall:!0,isMultiline:!0,style:{color:e.errorText},children:(0,O.jsx)(m()._H,{id:"exportModal.pageScale.invalidScaleError",defaultMessage:"Scale percent must be a number between 10 and 200"})})})]})}function ce(e){let{modalState:t,includeContentsPopupStore:a,exportTypePopupStore:s,pdfFormatPopupStore:d,collectionViewExportTypePopupStore:c}=e;const u=(0,o().Fg)(),g=(0,n().O7)(),h=(0,i().qz)(c,b().Z),f=(0,i().qz)(d,b().Z),x=(0,i().qz)(s,b().Z),v=(0,i().qz)(a,b().Z),{device:S,currentUser:w}=g,_=(0,i().VK)((()=>(0,j().Sw)(t)&&!p().y1(g)&&"business"),[t,g]),T=g.device.isWindows,k=(0,i().VK)((()=>X()),[]),I=(0,i().VK)((()=>$(t.exportOptions.collectionViewExportType||"currentView")),[t]);return(0,O.jsxs)("div",{style:{width:320,padding:24,fontSize:14},children:[(0,O.jsx)(z().Z,{isMenuItem:S.isMobile,buttonPopupStore:x,label:(0,O.jsx)(m()._H,{id:"exportModal.exportFormat.description",defaultMessage:"Export format"}),selectedTitle:G(t.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(D().Z,{...e}),items:V.map((t=>ie(t,e,w.id,g)))}]}),t.exportOptions.collectionViewExportType&&(0,O.jsx)(z().Z,{isMenuItem:S.isMobile,buttonPopupStore:h,label:(0,O.jsx)(m()._H,{id:"exportModal.includeDatabases.description",defaultMessage:"Include databases"}),selectedTitle:I,renderMenuSections:e=>[{key:"exportCollection",render:e=>(0,O.jsx)(D().Z,{...e}),items:U.map((t=>re(t,e,g)))}]}),(0,O.jsx)(z().Z,{isMenuItem:S.isMobile,buttonPopupStore:v,label:(0,O.jsx)(m()._H,{id:"exportModal.includeContents.description",defaultMessage:"Include content"}),selectedTitle:Y(t.exportOptions.includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",render:e=>(0,O.jsx)(D().Z,{...e}),items:Z.map((t=>oe(t,e,g)))}]}),(0,j().Sw)(t)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(z().Z,{isMenuItem:S.isMobile,buttonPopupStore:f,label:(0,O.jsx)(m()._H,{id:"exportModal.pageFormat.description",defaultMessage:"Page format"}),selectedTitle:J(t.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(D().Z,{...e}),items:l().lJ.map((t=>le(t,e,g)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(D().Z,{topBorder:!0,...e}),items:l().bY.map((t=>le(t,e,g)))}]}),(0,O.jsx)(de,{})]}),"space"!==t.root.table&&(0,O.jsx)(M().Z,{requireUpgradeToTier:_,analyticsName:"export_modal",onClick:()=>se(g),render:(e,a)=>(0,O.jsxs)("div",{...e,style:{display:"flex",alignItems:"center",height:32},children:[(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"auto",color:u.lightTextColor,fontSize:14},children:[(0,O.jsx)(m()._H,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a&&(0,O.jsx)("div",{style:{marginLeft:8},children:a})]}),(0,O.jsx)(A().Z,{on:t.recursive,disabled:Boolean(_)})]}),renderUpgradeTooltip:()=>(0,O.jsx)(L().Z,{imageURL:r().Z.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(m()._H,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(m()._H,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:y().Placement.Left,upgradeButtonDesktopStyle:{marginTop:2}}),(0,O.jsx)(N().Z,{title:(0,O.jsx)(m()._H,{id:"exportModal.flattenExportFiletree.description",defaultMessage:"Create folders for subpages"}),subtitle:"",style:{color:u.lightTextColor,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:void 0===t.exportOptions.flattenExportFiletree?!T:!t.exportOptions.flattenExportFiletree,disabled:!t.recursive,onChange:()=>function(e){const t=j().ZP.state;t.open&&p().BO(e,{...t,exportOptions:{...t.exportOptions,flattenExportFiletree:!t.exportOptions.flattenExportFiletree}})}(g)}),"html"===t.exportOptions.exportType?(0,O.jsx)(N().Z,{title:(0,O.jsx)(m()._H,{id:"exportModal.shouldExportComments.description",defaultMessage:"Export comments"}),subtitle:"",style:{color:u.lightTextColor,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:t.shouldExportComments,onChange:()=>function(e){const t=j().ZP.state;t.open&&p().BO(e,{...t,shouldExportComments:!t.shouldExportComments})}(g)}):null,(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:16},children:[(0,O.jsx)(C().D,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:ae,children:(0,O.jsx)(m()._H,{defaultMessage:"Cancel",id:"exportModal.cancelButton.label"})}),(0,O.jsx)(P().Z,{onClick:()=>ne(g),disabled:!k,children:(0,O.jsx)(m()._H,{defaultMessage:"Export",id:"exportModal.exportButton.label"})})]})]})}function ue(e,t,a,s){const{currentUser:n,device:i}=t;return g().oA([{key:"export type",render:s=>{let{ref:o,...r}=s;return(0,O.jsx)(z().Z,{...r,isMenuItem:i.isMobile,buttonPopupStore:a,label:(0,O.jsx)(m()._H,{defaultMessage:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:G(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(D().Z,{...e}),items:V.map((a=>ie(a,e,n.id,t)))}]})},action:()=>{a.setState({open:!0})}},(0,j().Sw)(e)&&{key:"pdf format",render:a=>{let{ref:n,...o}=a;return(0,O.jsx)(z().Z,{...o,isMenuItem:i.isMobile,buttonPopupStore:s,label:(0,O.jsx)(m()._H,{defaultMessage:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:J(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(D().Z,{...e}),items:l().lJ.map((a=>le(a,e,t)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(D().Z,{topBorder:!0,...e}),items:l().bY.map((a=>le(a,e,t)))}]})},action:()=>{s.setState({open:!0})}},"space"!==e.root.table&&{key:"recursive",render:a=>{let{onClick:s,key:n,...i}=a;const o=(0,j().Sw)(e)&&!p().y1(t)&&"business";return(0,O.jsx)(M().Z,{requireUpgradeToTier:o,analyticsName:"export_modal",onClick:s,render:(t,a)=>{const s=(0,f().Z)(i,t);return(0,O.jsx)(_().Z,{...s,title:(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(m()._H,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a&&(0,O.jsx)("div",{style:{marginLeft:8},children:a})]}),right:(0,O.jsx)(A().Z,{...s,on:e.recursive,disabled:Boolean(o)})})},renderUpgradeTooltip:()=>(0,O.jsx)(L().Z,{imageURL:r().Z.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(m()._H,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(m()._H,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:y().Placement.Left,upgradeButtonDesktopStyle:{marginTop:2}},n)},action:()=>se(t)}])}function me(e){let{modalState:t,exportTypePopupStore:a,pdfFormatPopupStore:s}=e;const i=(0,n().O7)(),o={menuType:h().o.Modal,title:(0,O.jsx)(m()._H,{id:"exportModal.title",defaultMessage:"Export"}),right:(0,O.jsx)(m()._H,{id:"exportModal.closeButton.label",defaultMessage:"Close"}),onClickRight:ae};return(0,O.jsx)(I().Z,{...o,children:(0,O.jsx)(H().ZP,{type:H().iW.Vertical,initialFocus:void 0,sections:[{key:"exportOptions",render:e=>(0,O.jsx)(D().Z,{...e}),items:ue(t,i,a,s)},{key:"actions",render:e=>{let{children:t,...a}=e;return(0,O.jsx)(D().Z,{isSubmitButton:!0,...a,children:t})},items:[{key:"submit",render:e=>{const{onClick:t,...a}=e;return(0,O.jsx)(B().Z,{...a,onClick:t||(()=>ne(i)),disabled:!X(),title:(0,O.jsx)(m()._H,{id:"exportModal.exportButton.label",defaultMessage:"Export"})})},action:()=>ne(i)}]}]})})}function ge(e){let{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:o}=e;const r=(0,n().O7)(),{device:l}=r,d=(0,i().VK)((()=>S().default.state.online),[]),c=(0,i().Kw)(j().ZP);return d?c.open&&l.isMobile?(0,O.jsx)(me,{exportTypePopupStore:a,pdfFormatPopupStore:s,modalState:c}):c.open?(0,O.jsx)(ce,{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:o,modalState:c}):null:(0,O.jsx)(te,{})}},763928:(e,t,a)=>{a.d(t,{l:()=>u});a(667294);var s=()=>a(142735),n=()=>a(788860),i=()=>a(907099),o=()=>a(876822),r=()=>a(827973),l=()=>a(98991),d=()=>a(943620),c=a(785893);function u(e){const{group:t,menuListItemProps:a,spaceStore:u}=e,m=(0,s().VK)((()=>{const e=u??o().default.state.currentSpaceStore;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t,u]),g=(0,n().YB)(),p=(0,i().kF)({intl:g,groupName:t.name});return(0,c.jsx)(r().Z,{...a,icon:m?(0,c.jsx)(d().Z,{disabled:!0,size:22,icon:m,isEmptyPage:!1,title:p}):(0,c.jsx)(l().Z,{size:22}),title:p})}},885178:(e,t,a)=>{a.d(t,{Z:()=>o});a(667294),a(241792);function s(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const n=["ar","az","he","fa","ur"];var i=a(785893);const o=function(e){const{style:t,translations:a}=e,o=s();for(const s of o){const e=a[s];if(e){const a=n.includes(s);return(0,i.jsx)("div",{style:{...a&&{direction:"rtl"},...t},children:e})}}return null}},114755:(e,t,a)=>{a.d(t,{Z:()=>n});a(667294);var s=a(785893);const n=function(e){const t=(0,a(219727).O7)(),n={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:i,disabled:o}=e,{device:r}=t,l=r.isMobile?{...n.removeFilterButton,...n.removeFilterButtonMobile}:n.removeFilterButton;return(0,s.jsx)(a(1910).Z,{icon:a(80122).X,onClick:i,disabled:o,disableBackground:!0,style:l})}},774933:(e,t,a)=>{a.d(t,{e:()=>l});a(667294);var s=()=>a(578292),n=()=>a(788860),i=()=>a(998901),o=()=>a(654133),r=a(785893);function l(e){let{num:t,abbreviateNumber:a}=e;const l=(0,n().YB)(),d=(0,s().E2)(l),c=t.toLocaleString(d),u=Intl.NumberFormat(d,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,r.jsx)(o().Z,{placement:i().Placement.Bottom,render:e=>(0,r.jsx)("span",{...e,children:u}),renderTooltip:()=>c}):(0,r.jsx)("span",{children:c})}},711658:(e,t,a)=>{a.d(t,{Z:()=>S});a(670560),a(267602),a(653476),a(470928),a(241792);var s=a(667294),n=()=>a(446866),i=()=>a(890598),o=()=>a(530980),r=()=>a(989478),l=()=>a(788860),d=()=>a(707513),c=()=>a(88476),u=()=>a(852465),m=()=>a(998901),g=()=>a(896014),p=()=>a(827973),h=()=>a(255577),f=()=>a(838367),x=()=>a(64131),v=a(785893);const y=(0,l().vU)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function b(e,t){return e.filter(((e,a)=>a<t))}const S=function(e){const{store:t,shouldShowBots:S,shouldShowGroups:j,sectionRenderLimit:w,membersOnly:M,hideCurrentUser:C,hideUserTypeToken:_,disableInvitedUsers:T,guestsMustBeRequested:k,hideTitle:I,defaultUserTitle:H,performSearchRequest:P}=e,[D,z,A]=(0,a(142735).AF)(e.permissionsInviteStore),N=(0,a(219727).O7)(),{device:R}=N,B=(0,l().YB)(),{tokenQuery:L}=D,O=(0,s.useMemo)((()=>c().ZK({environment:{device:R}})),[R]),V=(0,a(846550).yK)((e=>({roleBadge:{...O},invitedBadge:{...O,backgroundColor:e.defaultBadgeBackground}})),[O]),U="invitee",q={request:L,performRequest:e=>P?P({query:e,limit:10,environment:N}):a(849129).jL({query:e,sectionLimit:{userLimit:10,botLimit:S?10:0,groupLimit:j?10:0,importContactLimit:0},membersOnly:M,environment:N,intl:B}),render:(e,s,S)=>{if(e)return(0,v.jsx)(x().l,{loading:!S,hideTitle:I,children:(0,v.jsx)(f().Z,{title:(0,v.jsx)(l()._H,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const M=s&&{...s,inviteUsers:s.inviteUsers.filter((e=>!(0,c().Nd)({permissionsInviteStore:A,target:e})&&(!C||e.value.id!==N.currentUser.id))),importedContacts:(0,c().Bu)(s.inviteUsers,s.importedContacts)},P=M&&(null==L?void 0:L.length)>0,{inviteUsers:z,inviteGroups:R,importedContacts:O=[]}=P?M:(0,c().NN)({currentInviteActors:M,permissionsInviteStore:A,targetStore:t}),q=[...b(z,w),...b(O,10)].map(((e,s)=>{const n="newUser"===e.type?e.value.email:e.value.id,d=(0,c().fR)(e),h=Boolean(P&&(0,c().cm)({permissionsInviteStore:A,userTarget:e,targetStore:t}));return{key:n,render:s=>{const{tooltip:n,userTypeToken:g}=function(e){const{userTarget:t,targetStore:a,isInvited:s,userSpaceRole:n,styles:i,intl:d}=e,m="newUser"===t.type?null:o().kk5.fromValue(r().KJ,t.value).getDisplayName(d),g=t.value.email,p=m&&m!==g?`${m} (${g})`:g,h=n&&"not_in_space"!==n;if(s)return{tooltip:(0,u().Mm)(a)?d.formatMessage(y.invited_space,{userNameAndEmail:p}):(0,u().OY)(a)?d.formatMessage(y.invited_page,{userNameAndEmail:p}):d.formatMessage(y.invited_team,{userNameAndEmail:p}),userTypeToken:(0,v.jsx)("div",{style:{...i.invitedBadge},children:(0,v.jsx)(l()._H,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if(h){const e=c().Ji({role:n,intl:d,nameOrEmail:p});return{tooltip:e.tooltip,userTypeToken:(0,v.jsx)("div",{style:{...i.roleBadge},children:e.userRoleBadge})}}return{tooltip:d.formatMessage(y.not_in_space,{userNameAndEmail:p}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:d,isInvited:h,styles:V,intl:B});return"existingUser"===e.type?(0,v.jsx)(a(523516).Z,{...s,actor:(0,a(816512).dp)(e.value),right:_?void 0:g,tooltip:n,tooltipPlacement:m().Placement.Left,disabled:T&&h,defaultUserTitle:H}):(0,v.jsx)(a(654133).Z,{placement:m().Placement.Left,alignment:m().Alignment.Start,textWrap:!0,render:t=>(0,v.jsx)(p().Z,{...s,...t,icon:(0,i().h)({width:24,height:24}),right:g,title:e.value.email.trim(),disabled:T&&h}),disableTooltip:!n,renderTooltip:()=>n})},action:()=>{if(T&&h)return;if(!D.isInviteTargetsEmpty&&(0,g().ow)(D))return;const t={...e,..."existingUser"===e.type&&{spaceRole:d}};a(930085).hE(N,{subscription_tier:(0,a(697623).zt)(),invite_token_query:L,selected_user_token:e,selected_user_token_rank:s,from:"permission_invite"}),A.setState({...D,inviteTargets:[...D.inviteTargets,t],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:U})}}})),E=b(R,w).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,v.jsx)(a(763928).l,{group:t,menuListItemProps:e}),action:()=>{!D.isInviteTargetsEmpty&&(0,g().ow)(D)||A.setState({...D,inviteTargets:[...D.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:U})}}})),Z=[],F=D.isInviteTargetsEmpty||!(0,g().ow)(D);if(q.length>0&&F&&Z.push({key:"user results",render:e=>(0,v.jsx)(x().l,{...e,loading:!S,hideTitle:I}),items:q}),j&&E.length>0&&F&&Z.push({key:"group results",render:e=>(0,v.jsx)(a(388284).Z,{...e,title:(0,v.jsx)(l()._H,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!S}),items:E}),0===Z.length&&F){const e=(0,n().H3)(D.tokenQuery);if((0,n().oH)(e)){const n={type:"newUser",value:{email:e},source:"email"},i=(0,c().Nd)({target:n,permissionsInviteStore:A});if(!i)return;if(i)return(0,v.jsx)(x().l,{loading:!S,hideTitle:I,children:(0,v.jsx)(f().Z,{title:(0,v.jsx)(l()._H,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,v.jsx)("span",{style:{fontWeight:d().Ue.bold},children:(0,c().DF)({intl:B,target:i})})}})})});const o=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(o&&"existingUser"===o.type&&(0,c().Zp)({store:t,target:o}))return(0,v.jsx)(x().l,{loading:!S,hideTitle:I,children:(0,v.jsx)(f().Z,{title:(0,v.jsx)(l()._H,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,v.jsx)("span",{style:{fontWeight:d().Ue.bold},children:(0,a(499110).Nz)(B,o.value)})}})})})}else{if(!D.tokenQuery)return(0,v.jsx)(x().l,{loading:!S,hideTitle:I,children:(0,v.jsx)(f().Z,{title:(0,v.jsx)(l()._H,{id:"inviteUserModal.searchPersonDropdown.noSearchResultsMessage",defaultMessage:"Type or paste in emails above, separated by commas."})})});Z.push({key:"user results",render:e=>(0,v.jsx)(x().l,{...e,loading:!S,hideTitle:I,title:k?(0,v.jsx)(l()._H,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,v.jsx)(l()._H,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:D.tokenQuery,render:e=>(0,v.jsx)(p().Z,{icon:(0,i().h)({width:24,height:24}),title:D.tokenQuery,...e}),action:()=>{}}]})}}return(0,v.jsx)(h().ZP,{type:h().iW.Vertical,initialFocus:L.length>0?0:void 0,sections:Z})}};return(0,v.jsx)(a(154439).Z,{...q})}},301741:(e,t,a)=>{a.d(t,{Z:()=>c});a(667294);var s=()=>a(163262),n=()=>a(38883),i=()=>a(409873),o=()=>a(499110),r=()=>a(696459),l=()=>a(907099),d=a(785893);const c=function(e){let{isStrikedThrough:t,backgroundColor:c,onClickRemove:u,target:m,disabled:g,showInfoIcon:p,style:h,shouldWrap:f}=e;const x=(0,a(219727).O7)(),v=(0,a(788860).YB)(),{device:y}=x,b=(0,a(142735).VK)((()=>function(e){let t,{target:a,intl:n,showInfoIcon:c}=e;switch(a.type){case"newUser":t=a.value.email.trim();break;case"existingUser":t=(0,o().Nz)(n,a.value);break;case"bot":t=(0,s().Mh)(a.value);break;case"group":t=(0,l().kF)({intl:n,groupName:a.value.name});break;default:(0,r().t1)(a)}return c?(u=t,(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i().D)({marginRight:4,width:14,height:14}),u]})):t;var u}({target:m,intl:v,showInfoIcon:p})),[m,v,p]);return(0,d.jsx)(a(78014).Z,{showRemoveButton:!0,isSingle:!1,isStrikedThrough:t,backgroundColor:c,format:y.isMobile?n().lo.Large:n().lo.Medium,onClickRemove:e=>function(e,t,a){e.stopPropagation(),t(a)}(e,u,m),disabled:g,disabledFeedback:!0,value:b,style:h,shouldWrap:f})}},877807:(e,t,a)=>{a.d(t,{mX:()=>x,mo:()=>h,nH:()=>f});a(241792),a(667294);var s=()=>a(142735),n=()=>a(846550),i=()=>a(933868),o=()=>a(788860),r=()=>a(696459),l=()=>a(707513),d=()=>a(779733),c=()=>a(520849),u=()=>a(876822),m=()=>a(842574),g=()=>a(104014),p=a(785893);function h(e){const{openState:t}=e,{mainEditorCurrentBlockStore:a,currentSpaceStore:i}=(0,s().VK)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=u().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),o=(0,s().VK)((()=>(0,d().wZ)()),[]),r=(0,n().yK)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...o?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.regularTextColor}})),[o]);if(!a||!i)return null;const l=Date.now();return(0,p.jsx)(m().T,{type:c().Z.Y,style:r.scroller,children:t.permissionChanges.map(((e,t)=>{let[s,n]=e;const o={timestamp:l,space_id:i.id,type:"permission-changed",permission_data:{before:s,after:n}};return(0,p.jsx)("div",{style:r.editContainer,children:(0,p.jsx)(g().Z,{rootStore:a,edit:o})},`${s.type}-${t}`)}))})}function f(e,t){return["remove","restrict"].includes(e.type)?t?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):t?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function x(e,t){switch(e.type){case"remove":return t?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:v(e)}});case"restrict":return t?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return t?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return t?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{fontWeight:l().Ue.semibold,marginBottom:4},children:(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw r().t1(e)}}function v(e){return(0,i().jg)(e.permissionItem)?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,i().hV)(e.permissionItem)?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,i().Ir)(e.permissionItem)?(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,p.jsx)(o()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},325803:(e,t,a)=>{a.d(t,{ZP:()=>$e,yN:()=>lt,Sx:()=>tt});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(146947),i=()=>a(219727),o=()=>a(142735),r=()=>a(846550),l=()=>a(506347),d=()=>a(38883),c=()=>a(446866),u=()=>a(619186),m=()=>a(255933),g=()=>a(989478),p=()=>a(691970),h=()=>a(255393),f=()=>a(122792),x=()=>a(788860),v=()=>a(18610),y=()=>a(513670),b=()=>a(491927),S=()=>a(395362),j=()=>a(824462),w=()=>a(417205),M=()=>a(308186),C=()=>a(174912),_=()=>a(636340),T=()=>a(143346),k=()=>a(897373),I=()=>a(224597),H=()=>a(269299),P=()=>a(306743),D=()=>a(559155),z=()=>a(876822),A=()=>a(18281);var N=()=>a(594546),R=()=>a(527278),B=()=>a(352230),L=()=>a(223160),O=()=>a(148126),V=()=>a(345918),U=()=>a(466970),q=()=>a(616433),E=()=>a(356140),Z=()=>a(996379),F=()=>a(104088),W=()=>a(524434),K=()=>a(749826),G=()=>a(779522),Y=()=>a(826955),$=()=>a(658530),J=()=>a(838266),Q=()=>a(437594),X=()=>a(385337),ee=()=>a(815277),te=()=>a(661769),ae=()=>a(897257),se=()=>a(656221),ne=()=>a(285473),ie=()=>a(67961),oe=()=>a(289052),re=()=>a(827973),le=()=>a(291198),de=()=>a(198829),ce=()=>a(255577),ue=()=>a(388284),me=a(785893);const ge=function(e){const t=(0,r().Fg)(),n=e.store,l=(0,o().VK)((()=>null==n?void 0:n.state.modalOpen),[n]),d=(0,r().yK)((e=>({input:{margin:12,boxShadow:e.inputBoxShadow,borderRadius:4,fontSize:12,maxWidth:326,marginRight:"auto"},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),c=(0,s.useCallback)((()=>{y(""),n.setState({...n.state,loading:!1,modalOpen:!1})}),[n]),{spaceBasicSettingsStore:m,spaceStore:g,trustedDomainNumMembers:p}=e,h=(0,i().O7)(),{device:f}=h,[v,y]=(0,s.useState)(""),b=(0,o().VK)((()=>(null==m?void 0:m.state.emailDomains)??[]),[m]),S=(0,o().VK)((()=>lt({subscriptionData:ae().subscriptionDataStoreInstance.state,spaceStore:g,emailDomainsToExclude:[...b,...p]})),[g,b,p]),j=(0,x().YB)(),w=(0,s.useCallback)((e=>{y(e.target.value)}),[]);return(0,me.jsx)(a(708518).Z,{open:l,preventHideChildrenWhileOpening:!0,onDismiss:c,render:()=>{const s=v.trim(),n=(0,me.jsx)(x()._H,{id:"trustedDomainSettings.trustedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Choose an email domain"}),i=(0,me.jsx)(x()._H,{id:"trustedDomainSettings.trustedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace"}),o=(0,u().ZP)(s,S,(e=>e)).map(((t,a)=>({key:a,render:e=>(0,me.jsx)(re().Z,{...e,title:t}),action:()=>{y(""),e.addTrustedDomain(t),c()}})));let r;return r=f.isMobile?{menuType:B().o.ActionSheet}:{menuType:B().o.Popup,width:"100%"},(0,me.jsx)(de().Z,{...r,children:(0,me.jsxs)("div",{style:{background:t.popoverBackground,width:350,borderRadius:2},children:[(0,me.jsx)(le().Z,{placeholder:j.formatMessage({defaultMessage:"Search domains...",id:"manageTrustedDomains.searchFilter.placeholder"}),style:d.input,left:(0,a(899548).R)(d.searchIcon),value:v,onChange:w,format:le().B.Small,showClearButton:!0}),(0,me.jsx)(ce().ZP,{style:{padding:14,margin:"0px -12px"},type:ce().iW.Vertical,initialFocus:o.length>0?0:void 0,sections:[{key:0,render:e=>(0,me.jsx)(ue().Z,{...e,disableDesktopPadding:!0,title:o.length>0?n:i}),items:o}]})]})})}})};var pe=()=>a(696459),he=()=>a(469203);const fe=(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.joinSpaceCell.clickToJoin",defaultMessage:"Click to join workspace"}),xe=(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.joinSpaceCell.requestToJoin",defaultMessage:"Request to join workspace"}),ve=(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.joinSpaceCell.disabled",defaultMessage:"Disabled"});function ye(e){let{data:t}=e;const a=(0,r().yK)((e=>({text:{color:e.regularTextColor}})),[]);return(0,me.jsx)(he().s,{style:a.text,children:t.emailDomain})}function be(e){let{data:t}=e;return(0,me.jsx)("div",{children:Se(t.joinSpaceMethod)})}function Se(e){return"click_to_join"===e?fe:"request_to_join"===e?xe:"disabled"===e?ve:void(0,pe().t1)(e)}function je(e){let{data:t}=e;return(0,me.jsx)(he().s,{children:(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.numMembersCell",defaultMessage:"{numMembers, plural, one {{numMembers} member} other {{numMembers} members}}",values:{numMembers:t.numMembers}})})}const we=[{id:"emailDomainColumn",headerTitle:(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.columnTitle.emailDomain",defaultMessage:"Email Domain"}),renderCell:e=>(0,me.jsx)(ye,{data:e}),widthData:{width:10},sortable:!1},{id:"numMembersColumn",headerTitle:(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.columnTitle.numMembers",defaultMessage:"Members"}),renderCell:e=>(0,me.jsx)(je,{data:e}),widthData:{minWidth:10,widthPercent:20},sortable:!1},{id:"joinSpaceMethodColumn",headerTitle:(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.columnTitle.joinSpaceMethod",defaultMessage:"Join Workspace"}),renderCell:e=>(0,me.jsx)(be,{data:e}),widthData:{minWidth:10,widthPercent:40},sortable:!1}];function Me(e){let{addTrustedDomainStore:t,spaceStore:a,spaceBasicSettingsStore:s,trustedDomainNumMembers:n,trustedDomainStores:l}=e;const d=(0,oe().Z)(),c=(0,r().yK)((e=>{const t=(0,ne().bE)({columnRenderInfo:we,theme:e,containerMarginTop:0});return{...t,container:{...t.container,marginBottom:24}}}),[]),u=(0,r().yK)((e=>({noTrustedDomainsLabel:{marginTop:15,marginBottom:30,textAlign:"center"}})),[]),m=(0,i().O7)(),g=(0,o().VK)((()=>{if(!l)return[];const e=new Map;for(const t of n)e.set(t.trustedDomain.email_domain,t.numMembers);return y().oA(l.filter((e=>e.getDomainLinkSharingEnabled())).map((t=>{const a=t.getModel();if(!a||!t.canRead()||!t.isReady())return;const s=e.get(a.getEmailDomain())??0;return{id:a.id,emailDomain:a.getEmailDomain(),numMembers:s,joinSpaceMethod:a.getJoinSpaceMethod(),domainLinkSharingEnabled:a.getDomainLinkSharingEnabled(),isClickable:!1,onJoinSpaceMethodChange:e=>{let{joinSpaceMethod:a}=e;return(0,se().jL)({store:t,environment:m,joinSpaceMethod:a})},onRemoveTrustedDomain:()=>(0,se().O)({store:t,environment:m})}})))}),[n,l,m]),p=we.map((e=>({...e,headerStyle:d.tableHeader}))),h=(0,o().VK)((()=>y().oA(l.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[l]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ge,{store:t,spaceStore:a,spaceBasicSettingsStore:s,trustedDomainNumMembers:h,addTrustedDomain:function(e){(0,se().Zb)({environment:m,trustedEmailDomain:e,trustedDomainStores:l,spaceStore:a,spaceBasicSettingsStore:s})}}),(0,me.jsx)(ne().Dp,{columnRenderInfo:p,rows:g,renderNoRowsComponent:()=>(0,me.jsx)(Ce,{style:u.noTrustedDomainsLabel,numDomains:g.length}),styles:c,showRowBorders:!0})]})}function Ce(e){let{style:t,numDomains:a}=e;return a>0?null:(0,me.jsx)(ie().Z,{isSmall:!0,style:t,children:(0,me.jsx)(x()._H,{id:"manageTrustedDomainsTable.emptyManageTrustedDomainsTableDisclaimer.noTrustedDomainsExist",defaultMessage:"Could not find any email domains."})})}class _e extends(()=>a(263184))().default{getInitialState(){return{modalOpen:!1,loading:!1,trustedDomain:void 0}}}const Te=_e;var ke=()=>a(78078),Ie=()=>a(661297),He=()=>a(967092),Pe=()=>a(906651),De=()=>a(943620),ze=()=>a(471645),Ae=()=>a(360964),Ne=()=>a(504117),Re=()=>a(868614);const Be=function(e){let{handleExportClick:t}=e;const n=(0,o().Kw)(z().default),{currentSpaceStore:r}=n,l=(0,o().Kw)(a(61278).Z),d=(0,i().O7)();return(0,s.useEffect)((()=>{C().zh({environment:d,spaceId:null==r?void 0:r.id})}),[null==r?void 0:r.id,d]),(0,me.jsxs)(s.Fragment,{children:[(0,me.jsx)(Re().Z,{children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.exportContentSection.title",defaultMessage:"Export content"})}),(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,me.jsx)(Ie().Z,{disabled:!!l.count,size:"lg",onClick:t,children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.exportContentSection.exportButton.label",defaultMessage:"Export all workspace content"})}),l.count?(0,me.jsxs)(a(251932).gq,{gap:4,children:[(0,me.jsx)(a(312578).Z,{}),(0,me.jsxs)(ie().Z,{isSmall:!0,children:[(0,me.jsx)(x()._H,{id:"spaceBasicSettings.exportContentSection.exportInProgress",defaultMessage:"Export in progress"}),l.exportedPageCount?(0,me.jsx)(me.Fragment,{children:` (${l.exportedPageCount} pages exported)`}):(0,me.jsx)(me.Fragment,{})]})]}):(0,me.jsx)(me.Fragment,{})]}),(0,me.jsx)("div",{style:{height:12}}),(0,me.jsx)(Ae().Z,{title:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.exportContentSection.helpButton.caption",defaultMessage:"Learn about exporting workspaces."}),href:(0,O().UY)("guides.exportWorkspace"),analyticsFrom:"space_settings"}),(0,Ne().Um)()]})};var Le=()=>a(765513),Oe=()=>a(885178),Ve=()=>a(579807),Ue=()=>a(78014),qe=()=>a(101225);function Ee(){return(0,me.jsx)(x()._H,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",defaultMessage:"You can use your organization or company name. Keep it simple."})}const Ze=(0,x().vU)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",defaultMessage:"e.g. company name"},workspaceDomainInputPlaceholder:{id:"spaceBasicSettings.domainSection.workspaceDomainInput.placeholder",defaultMessage:"URL"},allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",defaultMessage:"Type an email domain…"},copyDomainTooltip:{id:"spaceBasicSettings.workspaceDomain.tooltip",defaultMessage:"Click to copy link"},turnOffAiWhenSubscribedToAiWarning:{id:"spaceBasicSettings.aiFeature.turnOffAiWhenSubscribedToAiWarning",defaultMessage:"Your current plan includes Notion AI. You can turn off access to AI, but you will continue to be billed for it."},turnOffAiWhenSubscribedToAccept:{id:"spaceBasicSettings.aiFeature.turnOffAiWhenSubscribedToAccept",defaultMessage:"Turn off AI"},activateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.activateButton.label",defaultMessage:"Activate"},deactivateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.deactivateButton.label",defaultMessage:"Deactivate"}});function Fe(e){const{spaceStore:t,organizationOverrides:n}=e,l=(0,i().O7)(),d=(0,o().VK)((()=>!a(804217).default.state.online),[]),{canAdminSpaceStore:c,spaceId:u}=(0,o().VK)((()=>({canAdminSpaceStore:t.canAdmin(),spaceId:t.id})),[t]),m=(0,o().VK)((()=>{var e;return null===(e=z().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),g=(0,o().qz)(e.spaceBasicSettingsStore,a(536984).Z),p=(0,o().qz)(e.securitySettingsStore,a(812376).Z),f=(0,o().VK)((()=>(0,V().Cx)(t)),[t]),v=(0,ee().VX)({name:"hipaa_compliance",spaceId:u,userId:m});(0,a(732811).K)((()=>{const e=g.getValueForSpace(t),a=p.getValueForSpace(t);e&&g.setState(e),a&&p.setState(a)}));const b=(0,o().VK)((()=>function(e){var t;return!(null===(t=z().default.state.currentSpaceStore)||void 0===t||!t.canAdmin())&&(0,A().qb)(e,"enterprise")}(l)),[l]),[j]=(0,a(801812).r5)((async()=>({trustedDomainNumMembers:c?await(0,se().JT)({environment:l,spaceId:t.id,currentUserId:m}):[]})),[l,t,m,c]),w=(0,o().VK)((()=>{if("resolved"!==j.status)return[];const e=j.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,se().yP)({trustedDomainIds:e,spaceStore:t})}),[t,j]),_=(0,o().VK)((()=>y().oA(w.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[w]),T=(0,o().VK)((()=>{var e;const a=(null===(e=ae().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return function(e){var t;const{environment:a,spaceStore:s,currentAddOns:n}=e;if(!s.canAdmin())return!1;if(Boolean(null===(t=s.getModel())||void 0===t?void 0:t.isAiLeapEnabledOnSpace()))return!0;if(!h().de(n))return!1;const i=(0,D().$_)(a,s.id),o=K().default.checkGate({gateName:"ai_display_leap_settings_for_sales_assisted_workspace"});if(i&&!o)return!1;return W().KR.isWorkspaceLeapEligible({ignoreEnterpriseCheck:!0})}({environment:l,spaceStore:t,currentAddOns:a})}),[l,t]),k=(0,o().VK)((()=>A().qF(l)),[l]),H=(0,o().VK)((()=>c&&!t.getDisableExport()),[c,t]),P=(0,o().Kw)(ae().subscriptionDataStoreInstance),N=(0,a(30795).V)(P),R=(0,r().yK)((()=>({dangerZoneContainer:{display:"flex",flexWrap:"wrap",gap:"16px 12px"},gap:{height:12}})),[]);return d?(0,me.jsx)(Je,{}):(0,me.jsxs)(Ne().ZP,{controlRow:c&&(0,me.jsx)(ut,{spaceStore:t,spaceBasicSettingsStore:g,securitySettingsStore:p}),controlRowPaddingTopBottom:14,children:[c&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(et,{}),(0,me.jsx)(We,{spaceStore:t,spaceBasicSettingsStore:g}),(0,Ne().Um)(),(0,me.jsx)(Ke,{spaceStore:t,spaceBasicSettingsStore:g}),(0,Ne().Um)()]}),(b||T)&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Xe,{}),b&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(st,{securitySettingsStore:p,isControlledByOrganization:Boolean(n.enable_ai_feature)}),(0,Ne().Um)()]}),c&&v&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(nt,{spaceStore:t,securitySettingsStore:p,spaceBasicSettingsStore:g}),(0,Ne().Um)()]}),T&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ot,{securitySettingsStore:p}),(0,Ne().Um)()]})]}),(0,me.jsx)(Qe,{}),f&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ie().Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.guestLimitedAccessMessage",defaultMessage:"You are currently a guest in this workspace. Ask an admin to add you as a member in order to see other pages."})}),(0,Ne().Um)()]}),c&&k&&(0,me.jsxs)(s.Fragment,{children:[(0,me.jsx)(Re().Z,{children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",defaultMessage:"Allowed email domains"})}),(0,me.jsx)(rt,{spaceStore:t,spaceBasicSettingsStore:g,trustedEmailDomains:_}),(0,me.jsx)(ie().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:4},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",defaultMessage:"Anyone with email addresses at these domains can automatically join your workspace."})}),(0,Ne().Um)(),(0,me.jsx)(dt,{spaceBasicSettingsStore:g,spaceStore:t,trustedDomainsState:j,trustedDomainStores:w})]}),H&&(0,me.jsx)(Be,{handleExportClick:()=>function(e){const{currentSpaceStore:t}=z().default.state;t&&C().q$({environment:e,root:{table:"space",id:t.id,spaceId:t.id},isCollectionViewExportTypeSupported:!0})}(l)}),c&&(0,me.jsx)(Ye,{}),c&&(0,me.jsx)(Ge,{spaceStore:t,spaceBasicSettingsStore:g,organizationOverrides:n}),(0,me.jsx)(Re().Z,{children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.dangerousSettingsSection.title",defaultMessage:"Danger zone"})}),(0,me.jsxs)("div",{style:R.dangerZoneContainer,children:[(N>1||f)&&(0,me.jsx)(Ie().Z,{size:"lg",onClick:()=>function(e,t){const{currentUserSettingsStore:a}=z().default.state;a&&M().vC({message:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",defaultMessage:"Are you sure you want to leave this workspace?"}),showCancel:!0,keepFocus:!0,items:[{label:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",defaultMessage:"Leave"}),color:"red",onAccept:async()=>{await I().bf({environment:t,spaceId:e.id,userSettingsStore:a})&&(S().z0(t),J().default.setState({...J().default.state,open:!1}))}}]})}(t,l),children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",defaultMessage:"Leave workspace"})}),c&&(0,me.jsx)(ct,{spaceStore:e.spaceStore})]}),c&&(0,me.jsxs)(s.Fragment,{children:[(0,me.jsx)("div",{style:R.gap}),(0,me.jsx)(Ae().Z,{title:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",defaultMessage:"Learn about deleting workspaces."}),href:(0,O().UY)("guides.deleteWorkspace"),analyticsFrom:"space_settings"})]})]})}function We(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,o().VK)((()=>a.state.name),[a]),i=(0,s.useCallback)((e=>{a.setState({...a.state,name:e.target.value})}),[a]),l=(0,r().yK)((()=>({label:{marginTop:4}})),[]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Re().Z,{children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.workspaceNameSection.title",defaultMessage:"Name"})}),(0,me.jsx)(le().Z,{value:n,placeholder:R().Z.formatMessage(Ze.nameInputPlaceholder),readOnly:!1,onChange:i,maxlength:m().RE}),(0,me.jsx)(ie().Z,{isSmall:!0,isMultiline:!0,style:l.label,children:(0,me.jsx)(Ee,{})})]})}function Ke(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,i().O7)(),l=(0,o().VK)((()=>(0,V().Wd)(n,t)),[n,t]),d=(0,o().VK)((()=>a.state.name),[a]),c=(0,o().VK)((()=>({recordTable:t.table,source:"workspace_settings"})),[t]),u=(0,s.useCallback)((e=>{H().createAndCommit({userAction:"SpaceBasicSettings.handleRecordIconChange",environment:n,canUndo:!0,perform:a=>{_().sO({store:t.getIconStore(),value:e,transaction:a})}})}),[n,t]),m=(0,r().yK)((e=>({iconContainer:{width:72,height:72,border:`1px solid ${e.regularDividerColor}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},label:{marginTop:8}})),[]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Re().Z,{children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.workspaceIconSection.title",defaultMessage:"Icon"})}),(0,me.jsx)("div",{style:m.iconContainer,children:(0,me.jsx)(De().Z,{bucket:"public",disabled:!1,icon:l,isEmptyPage:!1,title:d,size:64,iconLoggingData:c,onChange:u})}),(0,me.jsx)(ie().Z,{isSmall:!0,isMultiline:!0,style:m.label,children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.workspaceIconSection.caption",defaultMessage:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})})]})}function Ge(e){let{spaceStore:t,spaceBasicSettingsStore:a,organizationOverrides:n}=e;const l=(0,i().O7)(),{isMobile:d}=l.device,c=(0,o().VK)((()=>t.getSettings().disable_page_analytics),[t]),u=Boolean(n.disable_page_analytics),m=(0,o().VK)((()=>a.state.name),[a]),g=(0,s.useCallback)((()=>{if(u)return;const e=!c;H().createAndCommit({userAction:"SpaceBasicSettings.analyticsSettings.onSelectOption",environment:l,canUndo:!0,perform:a=>{_().sW({store:t,data:{settings:{...t.getSettings(),disable_page_analytics:e}},transaction:a})}}),N().K4(l,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}),[c,l,u,t]),p=(0,r().yK)((()=>({toggleContainer:{display:"flex",gap:12,flexDirection:"column"}})),[]);return(0,me.jsxs)(s.Fragment,{children:[(0,me.jsx)(Re().Z,{children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.analytics.title",defaultMessage:"Analytics"})}),(0,me.jsxs)("div",{style:p.toggleContainer,children:[(0,me.jsx)(Ve().Z,{isMobile:d,title:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.analytics.settings.title",defaultMessage:"Save and display page view analytics"}),caption:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.analytics.settings.description",defaultMessage:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",values:{workspaceName:m}}),type:"toggle",isOn:!c,isLocked:u,lockedTooltip:(0,L().g)(),onToggle:g}),(0,me.jsx)(Ae().Z,{title:(0,me.jsx)(x()._H,{defaultMessage:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,O().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"})]}),(0,Ne().Um)()]})}function Ye(){const e=(0,i().O7)(),t=(0,x().YB)(),a=(0,E().W)(),n=(0,o().VK)((()=>{var t;return null===(t=e.currentUser)||void 0===t?void 0:t.id}),[e]),l=(0,ee().oo)({name:"export_members",spaceId:a,userId:n}),d=(0,q().J)(),c=(0,o().VK)((()=>d&&"available"===(null==l?void 0:l.type)),[d,l]),u=(0,s.useCallback)((()=>{!function(e,t){const{currentSpaceStore:a}=z().default.state,s=ae().subscriptionDataStoreInstance.state;a&&s&&"subscribed_admin"===s.type&&C().$G(t,{spaceStore:a,subscriptionData:s,intl:e})}(t,e)}),[e,t]),m=(0,r().yK)((()=>({header:{display:"flex",alignItems:"center"},title:{marginRight:8},desktop:{marginTop:-1},button:{display:"flex"},gap:{height:12}})),[]);return(0,me.jsxs)(s.Fragment,{children:[(0,me.jsxs)(Re().Z,{style:m.header,children:[(0,me.jsx)("span",{style:m.title,children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.exportMembersSection.title",defaultMessage:"Export members"})}),!c&&(null==l?void 0:l.upsell)&&(0,me.jsx)(X().R,{upsell:l.upsell,analyticsName:"space_export_members",desktopStyle:m.desktop})]}),(0,me.jsx)("div",{style:m.button,children:(0,me.jsx)(Ie().Z,{size:"lg",disabled:!c,onClick:u,disabledFeedback:!0,children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.exportMembersSection.exportAsCSVButton.label",defaultMessage:"Export members as CSV"})})}),(0,me.jsx)("div",{style:m.gap}),(0,me.jsx)(Ae().Z,{title:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.exportMembersSection.helpButton.caption",defaultMessage:"Learn about exporting members."}),href:(0,O().UY)("guides.exportMembers"),analyticsFrom:"space_settings"}),(0,Ne().Um)()]})}const $e=s.memo(Fe);function Je(){return(0,me.jsx)(Ne().ZP,{children:(0,me.jsx)(ie().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.offlineMessage",defaultMessage:"Please go online to manage settings."})})})}function Qe(){return(0,me.jsx)(Re().Z,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.public.subtitle",defaultMessage:"Public settings"})})}function Xe(){return(0,me.jsx)(Re().Z,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.feature.subtitle",defaultMessage:"Feature settings"})})}function et(){return(0,me.jsx)(Re().Z,{large:!0,divider:"full",children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.title",defaultMessage:"Workspace settings"})})}async function tt(e,t,a,s,i){const{currentUserSettingsStore:o}=z().default.state;if(!o)return;const r=(0,V().rn)(a,e)||t.formatMessage({defaultMessage:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),l=(0,v().xf)(n().locale)?(0,me.jsx)(x()._H,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",defaultMessage:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):(0,me.jsx)(me.Fragment,{children:(0,me.jsx)(Oe().Z,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}})});await w().b({title:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.title",defaultMessage:"Delete this entire workspace permanently?"}),message:l,acceptLabel:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",defaultMessage:"Permanently delete workspace"}),requiredInputValue:r})&&(I().Ns({environment:a,spaceId:e.id,onDelete:s,organizationId:i}),S().BP(a),J().default.setState({...J().default.state,open:!1}))}function at(){J().default.setState({...J().default.state,open:!1}),$().Z.setState($().Z.getInitialState())}function st(e){let{securitySettingsStore:t,isControlledByOrganization:a}=e;const s=(0,o().VK)((()=>Boolean(null==t?void 0:t.state.enableAiFeature)),[t]);return(0,me.jsx)("div",{children:(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{a||async function(e){var t;const a=(null===(t=ae().subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[],s=h().de(a),n=!e.state.enableAiFeature;if(!n&&s&&!(await M().gt({message:R().Z.formatMessage(Ze.turnOffAiWhenSubscribedToAiWarning),acceptLabel:R().Z.formatMessage(Ze.turnOffAiWhenSubscribedToAccept)})).accept)return;e&&e.setState({...e.state,enableAiFeature:n})}(t)},children:[(0,me.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,me.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.aiFeature.label",defaultMessage:"Notion AI"})}),(0,me.jsx)(ie().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.aiFeature.ga.caption",defaultMessage:"Enable to provide AI-powered functionality for all members of your workspace.{br}By enabling Notion AI, you are agreeing to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",values:{br:(0,me.jsx)("br",{}),inlinelink:e=>(0,me.jsx)(Le().Z,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,onClick:e=>e.stopPropagation(),children:e})}})})]}),(0,me.jsx)("div",{style:{marginTop:5},children:(0,me.jsx)(ze().Z,{on:s,isLocked:a,lockedTooltip:(0,L().g)()})})]})})}function nt(e){let{spaceStore:t,securitySettingsStore:a,spaceBasicSettingsStore:s}=e;const n=(0,r().yK)((()=>({title:{display:"flex",alignItems:"center",gap:8}})),[]);return(0,me.jsx)(Ve().Z,{type:"custom",isMobile:!1,title:(0,me.jsxs)("div",{style:n.title,children:[(0,me.jsx)(x()._H,{id:"spaceBasicSettings.hipaaCompliance.label",defaultMessage:"HIPAA Compliance"}),(0,me.jsx)(Ae().Z,{href:(0,O().UY)("guides.hipaaCompliancy"),analyticsFrom:"space_settings"})]}),caption:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.hipaaCompliance.description",defaultMessage:"Store and process Protected Health Information (PHI) by enabling HIPAA compliance. By enabling HIPAA compliance, you are agreeing to Notion’s <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,me.jsx)(Le().Z,{href:(0,O().UY)("guides.hipaaBAA"),external:!0,onClick:e=>e.stopPropagation(),children:e})}}),customButton:(0,me.jsx)(it,{spaceStore:t,securitySettingsStore:a})})}function it(e){let{spaceStore:t,securitySettingsStore:a}=e;const n=(0,i().O7)(),r=(0,o().VK)((()=>(0,V().CV)(t)),[t]),[l,d]=s.useState(r),[c,u]=s.useState(!1),[m,g]=s.useState(!1),p=(0,s.useCallback)((()=>async function(e){let{securitySettingsStore:t,spaceStore:a,environment:s,isGoingToDisableHIPAACompliancy:n,openModal:i,closeModal:o}=e;o(),t.setState({...t.state,zeroRetentionEnabled:!t.state.zeroRetentionEnabled}),k().n(s,{spaceStore:a,securitySettingsState:t.state}),I().FB(s,a),i(),await j().callApi({eventName:"sendHIPAACompliancyUpdate",environment:s,data:{spaceId:a.id,isDisablingHIPAA:n}})}({securitySettingsStore:a,spaceStore:t,environment:n,isGoingToDisableHIPAACompliancy:l,openModal:()=>g(!0),closeModal:()=>u(!1)})),[n,a,t,l]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Z().kg,{isOpen:m,hasDisabledHIPAACompliancy:l,onClose:()=>g(!1)}),(0,me.jsx)(Z().ZM,{isOpen:c,onClose:()=>u(!1),onConfirmDecision:p,isDisablingHIPAACompliancy:l}),(0,me.jsx)(Ie().Z,{size:"lg",onClick:()=>{u(!0),d(a.state.zeroRetentionEnabled)},children:(0,me.jsx)(x()._H,{...r?Ze.deactivateHIPAAButton:Ze.activateHIPAAButton})})]})}function ot(e){let{securitySettingsStore:t}=e;const a=(0,o().VK)((()=>Boolean(t.state.enableAiTraining)),[t]);return(0,me.jsx)("div",{children:(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center"},onClick:()=>{t.setState({...t.state,enableAiTraining:!a})},children:[(0,me.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,me.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.aiLeap.label",defaultMessage:"Share data to improve Notion AI"})}),(0,me.jsx)(ie().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.aiLeap.description",defaultMessage:"Help improve Notion’s AI models by allowing data from across this workspace to be shared with Notion.{br}By enabling AI LEAP (Learning and Early Access Program) you are agreeing to the <inlinelink>Notion AI LEAP Supplementary Terms</inlinelink>. <learnmore>Learn more</learnmore>.",values:{br:(0,me.jsx)("br",{}),learnmore:e=>(0,me.jsx)(Le().Z,{href:"https://www.notion.so/help/notion-ai-leap-program-faqs",external:!0,onClick:e=>e.stopPropagation(),children:e}),inlinelink:e=>(0,me.jsx)(Le().Z,{href:"https://notion.notion.site/0c55d702d0154a788d9e70c4ee396399",external:!0,onClick:e=>e.stopPropagation(),children:e})}})})]}),(0,me.jsx)("div",{style:{marginTop:5},children:(0,me.jsx)(ze().Z,{on:a})})]})})}function rt(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedEmailDomains:n}=e;const r=(0,i().O7)(),l=(0,x().YB)(),{device:c}=r,[m,g]=(0,s.useState)(""),p=(0,o().VK)((()=>a.state.emailDomains),[a]),h=(0,o().VK)((()=>t.canAdmin()),[t]),f=(0,o().Kw)(ae().subscriptionDataStoreInstance),v=(0,s.useCallback)((e=>{g(e.target.value)}),[]);return(0,me.jsx)(He().ZP,{popupType:c.isMobile?F().k.SlideUp:F().k.Popup,sameWidthAsOrigin:!0,open:m.length>0,origin:(0,me.jsx)(qe().Z,{placeholder:l.formatMessage(Ze.allowedEmailDomainsInputPlaceholder),value:m,onChange:v,readOnly:!h,onRemoveLastToken:()=>{const e=p.slice(0,p.length-1);a.setState({...a.state,emailDomains:e})},tokens:p.map((e=>(0,me.jsx)(Ue().Z,{showRemoveButton:!0,isSingle:!1,format:d().lo.Medium,onClickRemove:()=>{const t=p.filter((t=>t!==e));a.setState({...a.state,emailDomains:t})},value:e},e)))}),render:()=>{const e=m.trim(),s=(0,me.jsx)(x()._H,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Type an email domain…"}),i=(0,me.jsx)(x()._H,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),o=lt({subscriptionData:f,spaceStore:t,emailDomainsToExclude:[...p,...n]}),r=(0,u().ZP)(e,o,(e=>e)).map(((e,t)=>({key:t,render:t=>(0,me.jsx)(re().Z,{...t,title:e}),action:()=>{const t=[...p,e];a.setState({...a.state,emailDomains:t}),g("")}})));let l;return l=c.isMobile?{menuType:B().o.ActionSheet}:{menuType:B().o.Popup,width:"100%"},(0,me.jsx)(de().Z,{...l,children:(0,me.jsx)(ce().ZP,{type:ce().iW.Vertical,initialFocus:r.length>0?0:void 0,sections:[{key:0,render:e=>(0,me.jsx)(ue().Z,{...e,disableDesktopPadding:!0,title:r.length>0?s:i}),items:r}]})})},onDismiss:()=>{g("")}})}function lt(e){const{subscriptionData:t,spaceStore:a,emailDomainsToExclude:s}=e;return t?A().hn(t).map((e=>{if(("unsubscribed_admin"===t.type||"unsubscribed_member"===t.type||"subscribed_admin"===t.type)&&t.joinedMemberIds.includes(e.userId)){const t=Y().U6.createChildStore(a,{table:g().KJ,id:e.userId}).getEmail();return t&&(0,c().Gd)(t)}})).filter(((e,t,a)=>Boolean(e&&t===a.indexOf(e)&&!s.includes(e)))):[]}function dt(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedDomainsState:n,trustedDomainStores:r}=e;const l=(0,i().O7)(),{isMobile:d}=l.device,c=(0,o().qz)(void 0,Te),u=(0,s.useCallback)((()=>{P().j_({environment:l,from:"trusted_domain_settings_section"})}),[l]),m=(0,o().VK)((()=>(0,f().wP)(t.getSubscriptionTier())),[t]),g=(0,o().VK)((()=>Boolean("request_to_join"===t.getSettings().join_space_method)),[t]),p=(0,o().VK)((()=>Boolean(t.getSettings().domain_link_sharing_enabled)),[t]),h=(0,U().E)("trusted_domain_admin_redesign"),v=(0,s.useCallback)((async e=>{const{newDomainLinkSharingValue:a,newJoinSpaceMethod:s}=e;await j().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:l,data:{spaceId:t.id,newDomainLinkSharingValue:a,newJoinSpaceMethod:s}})}),[l,t]),y=(0,s.useCallback)((async()=>{await v({newDomainLinkSharingValue:!p})}),[v,p]),b=(0,s.useCallback)((async()=>{const e=g?"click_to_join":"request_to_join";await v({newJoinSpaceMethod:e})}),[v,g]),S=(null==r?void 0:r.length)>0;return"resolved"===n.status&&S?h?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ke().sg,{children:(0,me.jsx)(Ve().Z,{isMobile:d,disabled:!m,upsellOptions:{shouldUpsell:!m,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.title",defaultMessage:"Anyone at these domains must request to join the workspace"}),caption:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.description",defaultMessage:"Require people to request workspace access from workspace owners"}),type:"toggle",isOn:g,onToggle:b})}),(0,Ne().Um)(),(0,me.jsx)(ke().sg,{children:(0,me.jsx)(Ve().Z,{isMobile:d,disabled:!m,upsellOptions:{shouldUpsell:!m,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.title",defaultMessage:"Anyone at these domains can view shared pages"}),caption:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.description",defaultMessage:"Allows people who receive a shared page via a link to view the page"}),type:"toggle",isOn:p,onToggle:y})}),(0,Ne().Um)()]}):(0,me.jsxs)(s.Fragment,{children:[(0,me.jsx)(Ve().Z,{type:"custom",isMobile:!1,title:(0,me.jsxs)(ke().X2,{gap:8,children:[(0,me.jsx)(x()._H,{id:"spaceBasicSettings.trustedDomainLinkSharingSection.title",defaultMessage:"Share pages with anyone at your company"}),(0,me.jsx)(Ae().Z,{href:(0,O().UY)("guides.guides"),analyticsFrom:"space_settings"})]}),caption:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.trustedDomainsSection.addTrustedDomain.caption",defaultMessage:"Members can share pages with anyone with these trusted email domains, even if they're not yet on Notion. Please message <supportLink>support</supportLink> if you need assistance.",values:{supportLink:e=>(0,me.jsx)(Le().Z,{onClick:u,children:e})}}),customButton:(0,me.jsx)(me.Fragment,{})}),(0,me.jsx)(ke().X2,{marginTop:8,children:(0,me.jsx)(Me,{addTrustedDomainStore:c,spaceStore:t,spaceBasicSettingsStore:a,trustedDomainNumMembers:n.value.trustedDomainNumMembers,trustedDomainStores:r})})]}):null}function ct(e){let{spaceStore:t}=e;const a=(0,i().O7)(),n=(0,x().YB)(),[r,d]=s.useState(!1),c=(0,o().VK)((()=>z().default.state.currentUserRootStore),[]),u=(0,o().VK)((()=>z().default.state.currentUserSettingsStore),[]),m=(0,te().pQ)({spaceId:t.id}),g=(0,s.useCallback)((async()=>{c&&u&&(await T().bG({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,pointer:{table:p().dx,id:c.id},userId:a.currentUser.id}),I().L5({environment:a,userRootStore:c,ignoreSpaceId:t.id,userSettingsStore:u,pageVisitSource:l().tY.SwitchSpace}))}),[a,c,u,t.id]);return(0,me.jsxs)(me.Fragment,{children:[r?(0,me.jsx)(Q().iI,{billingData:m,isOpen:r,onClose:()=>d(!1),onConfirmDelete:async()=>await tt(t,n,a,g),spaceStore:t}):null,(0,me.jsx)(Ie().Z,{size:"lg",color:"uiRed",onClick:async()=>await async function(e){const{environment:t,spaceStore:a,intl:s,showDowngradeModal:n,onDelete:i}=e,o=ae().subscriptionDataStoreInstance.state,r=A().XX(o);if(b().YO(t),r)return void n();await tt(a,s,t,i)}({environment:a,spaceStore:t,intl:n,showDowngradeModal:()=>d(!0),onDelete:g}),children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",defaultMessage:"Delete entire workspace"})})]})}function ut(e){let{spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:n}=e;const o=(0,i().O7)(),r=(0,s.useCallback)((()=>async function(e,t,a,s){await I().OF({environment:e,spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:s}),$().Z.setState($().Z.getInitialState()),J().default.setState({...J().default.state,open:!1}),G().Z.resetData(e,{spaceId:t.id})}(o,t,a,n)),[o,t,a,n]);return(0,me.jsxs)("div",{style:{display:"flex"},children:[(0,me.jsx)(Pe().Z,{isLarge:!0,onClick:r,disabled:!1,children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.updateButton.label",defaultMessage:"Update"})}),(0,me.jsx)(Ie().Z,{size:"lg",style:{marginLeft:12},onClick:at,children:(0,me.jsx)(x()._H,{id:"spaceBasicSettings.cancelButton.label",defaultMessage:"Cancel"})})]})}},825820:(e,t,a)=>{a.d(t,{YF:()=>o,ZP:()=>l});a(667294);var s=()=>a(998901),n=()=>a(78014),i=a(785893);const o={Success:"success",Pending:"pending",Failure:"failure"};const r={display:"flex",justifyContent:"center",alignItems:"baseline"},l=function(e){let{status:t,value:l,renderTooltip:d,...c}=e;const u=(0,a(846550).Fg)(),m={[o.Success]:u.statusTokenBackground.green,[o.Pending]:u.statusTokenBackground.yellow,[o.Failure]:u.statusTokenBackground.red},g={[o.Success]:u.statusTokenIndicator.green,[o.Pending]:u.statusTokenIndicator.yellow,[o.Failure]:u.statusTokenIndicator.red},p={[o.Success]:u.statusTokenText.green,[o.Pending]:u.statusTokenText.yellow,[o.Failure]:u.statusTokenText.red};return d?(0,i.jsx)(n().Z,{...c,backgroundColor:m[t],color:p[t],value:(0,i.jsx)(a(654133).Z,{placement:s().Placement.Bottom,alignment:s().Alignment.Start,renderTooltip:d,render:e=>(0,i.jsxs)("div",{style:r,...e,children:[(0,i.jsx)("div",{style:{background:g[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),l]})})}):(0,i.jsx)(n().Z,{...c,backgroundColor:m[t],color:p[t],value:(0,i.jsxs)("div",{style:r,children:[(0,i.jsx)("div",{style:{background:g[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),l]})})}},435676:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(667294),n=()=>a(788860),i=a(785893);function o(e,t){const{teamStore:s,renderAsEveryoneMention:o}=e,{name:r}=(0,a(142735).VK)((()=>({name:s.getName()})),[s]);return(0,i.jsx)(a(827973).Z,{...e,icon:o?(0,a(396820).D)({width:14,height:14}):(0,i.jsx)(a(383694).p,{size:14,store:s,disabled:!0}),title:o?(0,i.jsx)(n()._H,{id:"posts.teamMenuItem.everyoneMention",defaultMessage:"@everyone"}):r,ref:t,inline:!0,caption:o?(0,i.jsx)(n()._H,{id:"posts.teamMenuItem.caption",defaultMessage:"Notifies everyone in the teamspace"}):void 0})}const r=s.forwardRef(o)},825910:(e,t,a)=>{a.d(t,{ZP:()=>T});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(374289),l=()=>a(788860),d=()=>a(527278),c=()=>a(352230),u=()=>a(91502),m=()=>a(270895),g=()=>a(44556),p=()=>a(383694),h=()=>a(149809),f=()=>a(265640),x=()=>a(827973),v=()=>a(448419),y=()=>a(740046),b=()=>a(198829),S=()=>a(388284),j=()=>a(67961),w=a(785893);function M(e){let{teamsForMember:t,shouldHideTeamMemberCount:a}=e;const s=(0,o().yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),n=t.length;return(0,w.jsx)(v().ZP,{popupType:v().Z4.Popup,renderOrigin:e=>(0,w.jsx)(f().D,{disabled:0===n,style:0===n?s.noTeams:s.button,...e,children:0===n?(0,w.jsx)(l()._H,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l()._H,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:n}}),(0,r().i)(s.chevron)]})}),render:()=>(0,w.jsx)(_,{teamStores:t,shouldHideTeamMemberCount:a})})}const C=(0,l().vU)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function _(e){const{shouldHideTeamMemberCount:t}=e,a=(0,n().O7)(),r=(0,o().yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),[f,v]=(0,s.useState)(""),M=(0,s.useCallback)((e=>g().RF({environment:a,teamId:e,tab:m().a.Members,from:"teams_dropdown_for_team_member"})),[a]),_=(0,i().VK)((()=>[{key:"teams for member",render:e=>(0,w.jsx)(S().Z,{...e}),actions:e.teamStores.map((e=>{const a={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:a=>{var s;return(0,w.jsx)(x().Z,{icon:(0,w.jsx)(p().p,{disabled:!0,store:e}),title:(0,w.jsx)(j().Z,{style:r.teamMenuItem,children:e.getName()}),caption:t?void 0:(0,w.jsx)(l()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,u().oT)(e))||void 0===s?void 0:s.memberCountWithGuests)??0}}),inline:!0,...a})},action:()=>{M(e.id)},closeParentMenu:!1};return a}))}]),[e.teamStores,r.teamMenuItem,M,t]),T=f,k=(0,w.jsx)(S().Z,{isInput:!0,children:(0,w.jsx)(y().ZP,{value:T,onChange:(0,s.useCallback)((e=>{v(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:d().Z.formatMessage(C.filterTeams)})}),I={menuType:c().o.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?k:void 0};return(0,w.jsx)(b().Z,{...I,children:(0,w.jsx)(h().Z,{filter:T,context:{blocks:[],environment:a,publicEditMode:void 0},initialFocus:0,sections:_})})}const T=function(e){const t=(0,i().VK)((()=>e.teamStores??a(700696).default.state.teams),[e.teamStores]),s=(0,i().VK)((()=>t.filter((t=>t.isMemberOrGuest(e.memberId,e.userPermissionGroupIds)))),[t,e.memberId,e.userPermissionGroupIds]);return(0,w.jsx)(M,{teamsForMember:s})}},101225:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a.n(a(294184)),n=(a(667294),()=>a(219727)),i=()=>a(164079),o=()=>a(291198),r=a(785893);const l=function(e){let{readOnly:t,onClick:i,style:o,tokens:l,value:u,onRemoveLastToken:g,onChange:p,onSubmit:h,onBlur:f,overflowHorizontally:x,focus:v,type:y,placeholder:b,errorOutline:S,inputStyle:j,inputElementAttributes:w}=e;const M=(0,a(846550).Fg)(),C=(0,n().O7)(),{device:_}=C;return(0,r.jsxs)("div",{className:t?void 0:s()({"notion-focusable-within":!0,"notion-focusable-within-error-outline":S}),onClick:i,style:_.isMobile?c(M,o):d(M,o),children:[x?(0,r.jsx)("div",{style:{display:"flex",flexShrink:0},children:l}):l,(0,r.jsx)(m,{tokens:l,value:u,onRemoveLastToken:g,onChange:p,onSubmit:h,onBlur:f,focus:v,readOnly:t,type:y,placeholder:b,inputStyle:j,inputElementAttributes:w})]})};function d(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:e.inputBoxShadow,background:e.inputBackground,borderRadius:4,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...t}}function c(e,t){return{...d(e,t),fontSize:14,padding:"7px 10px 0"}}const u={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};function m(e){let{tokens:t,value:a,onRemoveLastToken:s,onChange:l,onSubmit:d,onBlur:c,focus:m,readOnly:g,type:p,placeholder:h,inputStyle:f,inputElementAttributes:x}=e;const v=(0,n().O7)(),{device:y}=v,b=0===t.length;return(0,r.jsx)(o().Z,{format:o().B.Transparent,...(0,i().Z)({onKeyDown:e=>function(e,t,a){"Backspace"===e.key&&0===t.length&&a()}(e,a,s)},{onChange:l}),value:a,onSubmit:d,onBlur:c,focus:m,style:{...u,margin:y.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:g,inputStyle:{height:18,...f},size:1,type:p,placeholder:b?h:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,inputElementAttributes:x})}},549874:(e,t,a)=>{a.d(t,{q:()=>d});a(667294);var s=()=>a(846550),n=()=>a(922622),i=()=>a(788860),o=()=>a(707513),r=()=>a(661297),l=a(785893);function d(e){let{runNewSearch:t,error:a}=e;const d=(0,s().yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:o().Ue.medium,fontSize:16},description:{fontWeight:o().Ue.regular,fontSize:14,lineHeight:1.3,color:e.lightTextColor,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:o().Gl.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,n().l)(d.headerIcon),(0,l.jsx)("h1",{style:d.title,children:(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:d.description,children:(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(r().Z,{style:d.errorButton,onClick:()=>t(!0),children:(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}},401438:(e,t,a)=>{a.d(t,{C:()=>m});var s=a(667294),n=()=>a(219727),i=()=>a(846550),o=()=>a(788860),r=()=>a(491927),l=()=>a(174912),d=()=>a(661297),c=()=>a(906651),u=a(785893);function m(e){let{spaceId:t,filters:a,disabled:m,shouldUsePrimaryButton:g}=e;const[p,h]=(0,s.useState)(!1),f=(0,n().O7)(),x=m||p,v=(0,i().yK)((e=>({button:{opacity:x?.5:1}})),[x]);async function y(){h(!0),r().j_(f,{filters:a}),await l().gJ(f,{spaceId:t,filters:a}),h(!1)}const b=(0,u.jsx)(o()._H,{id:"adminContentSearchTab.export",defaultMessage:"Export results"});return g?(0,u.jsx)(c().Z,{disabled:x,onClick:y,children:b}):(0,u.jsx)(d().Z,{style:v.button,disabled:x,onClick:y,children:b})}},529253:(e,t,a)=>{a.d(t,{d:()=>be});a(241792);var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(788860),r=()=>a(239482),l=()=>a(323342),d=()=>a(897257),c=()=>a(285473),u=()=>a(312578),m=()=>a(802321),g=()=>a(67961),p=()=>a(219727),h=()=>a(409873),f=()=>a(667067),x=()=>a(707513),v=()=>a(491927),y=()=>a(752127),b=()=>a(261930),S=()=>a(148126),j=()=>a(265640),w=()=>a(906651),M=a(785893);function C(e){const t=(0,p().O7)(),a=(0,i().yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.lightTextColor,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:x().Ue.medium,fontSize:16},disclaimer:{fontWeight:x().Ue.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.lightTextColor},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),n=(0,s.useCallback)((()=>{v().vN(t),b().NY(t)}),[t]);return(0,M.jsxs)("div",{style:a.container,children:[(0,f().Q)(a.headerIcon),(0,M.jsx)("h1",{style:a.disclaimerTitle,children:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,M.jsx)("p",{style:a.disclaimer,children:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,M.jsx)(w().Z,{style:a.acknowledgeButton,onClick:n,children:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,M.jsxs)(j().D,{style:a.learnMoreButton,onClick:()=>{const e=(0,S().UY)("adminContentSearch");y().D({environment:t,url:e})},children:[(0,h().D)(a.learnMoreButtonIcon),(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var _=()=>a(549874),T=()=>a(647439),k=()=>a(155481);function I(e){let{filters:t,setFilters:a}=e;const s=(0,i().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:x().Ue.medium,fontSize:16},description:{fontWeight:x().Ue.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",maxWidth:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:"100%",maxWidth:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.shadow2XS},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,M.jsxs)("div",{style:s.container,children:[(0,M.jsx)("h1",{style:s.title,children:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,M.jsx)("p",{style:s.description,children:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,M.jsxs)(j().D,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:s.filterContainer,children:(0,M.jsx)(k().xF,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,M.jsx)("div",{style:s.arrowIconContainer,children:(0,T().W)(s.arrowIcon)})]}),(0,M.jsxs)(j().D,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:s.filterContainer,children:(0,M.jsx)(k().xF,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,M.jsx)("div",{style:s.arrowIconContainer,children:(0,T().W)(s.arrowIcon)})]})]})}a(267602),a(653476);var H=()=>a(641772),P=()=>a(696459),D=()=>a(886123),z=()=>a(352230),A=()=>a(681832),N=()=>a(998901),R=()=>a(529048),B=()=>a(257934),L=()=>a(885414),O=()=>a(448419),V=()=>a(1910),U=()=>a(198829),q=()=>a(255577),E=()=>a(967092),Z=()=>a(431041),F=()=>a(947435),W=()=>a(824546);function K(e){const{pageStatus:t,blockStore:a,refreshSearchResult:s}=e;switch(t){case"alive":case"in_trash":return(0,M.jsx)(G,{pageStatus:t,blockStore:a,refreshSearchResult:s});case"deleted_from_trash":return(0,M.jsx)(Y,{pageStatus:t,blockStore:a,getValidDeletedPermissions:e.getValidDeletedPermissions,refreshSearchResult:s});default:(0,P().t1)(t)}}function G(e){let{blockStore:t,pageStatus:a,refreshSearchResult:i}=e;const o=(0,n().qz)(void 0,R().Z),r=(0,p().O7)(),l=(0,n().qz)(void 0,L().Z),d=(0,n().qz)(void 0,B().ZP),c=(0,W().T)(),[u,m]=(0,s.useState)(!1);(0,s.useEffect)((()=>{l.setState({...l.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,l]);const g=[(0,F().OX)({environment:r,pageStatus:a,popupStore:o,blockStore:t,handleOpenPermissionsMenu:()=>m(!0),onRestoreOrDeletePage:i,from:"adminContentSearch"}),(0,F().h7)({environment:r,pageStatus:a,popupStore:o,blockStore:t,onRestoreOrDeletePage:i,from:"adminContentSearch"})].filter(P().$K);return(0,M.jsx)(O().ZP,{popupType:E().kQ.Popup,alignmentToOrigin:N().Alignment.Start,placementToOrigin:N().Placement.Bottom,style:u?c.popupShareModal:c.popupMenu,render:()=>u?(0,M.jsx)(D()._,{store:t,sudoModeStore:l,inviteTargetsStore:d,location:"admin_content_search"}):(0,M.jsx)(U().Z,{menuType:z().o.Popup,width:248,children:(0,M.jsx)(q().ZP,{type:q().iW.Vertical,initialFocus:void 0,sections:g})}),onClose:()=>{m(!1),A().default.reset()},buttonPopupStore:o,renderOrigin:e=>(0,M.jsx)(V().Z,{ariaLabel:"3 dot menu for actions to apply to a page",icon:H().o,...e})})}function Y(e){let{blockStore:t,getValidDeletedPermissions:a,refreshSearchResult:n}=e;const i=(0,s.useCallback)((e=>(0,M.jsx)(V().Z,{ariaLabel:"3 dot menu for actions to apply to a deleted from trash page",icon:H().o,...e})),[]),o=(0,p().O7)();return(0,M.jsx)(Z().L,{environment:o,renderPopupOrigin:i,blockStore:t,placementToOrigin:N().Placement.Bottom,includeNonRestoreActions:!0,getValidDeletedPermissions:a,onRestoreOrDeletePage:n,from:"adminContentSearch"})}var $=()=>a(18902),J=()=>a(429892),Q=()=>a(326966),X=()=>a(521632),ee=()=>a(654133);function te(e){let{pageStatus:t,blockStore:s}=e;const r=(0,i().yK)((e=>({grayBadge:{width:"fit-content",whiteSpace:"nowrap",display:"flex",flexDirection:"row"},trashIcon:{marginRight:2,height:12,width:12}})),[]),{deleteFromTrashDelayMs:l,purgeDelayMs:d}=(0,n().VK)((()=>{const e=s.getSpaceStore();return{deleteFromTrashDelayMs:(0,$().Tv)(null==e?void 0:e.getModel()),purgeDelayMs:(0,$().FT)(null==e?void 0:e.getModel())}}),[s]),c=(0,n().VK)((()=>{if("in_trash"===t)return(0,$().xR)(s.pointer,s.getRecordModel)}),[s,t]),u=(0,n().VK)((()=>{if("deleted_from_trash"===t)return(0,$().A1)(s.pointer,s.getRecordModel)}),[s,t]),m=(0,a(365969).tX)();switch(t){case"alive":return null;case"in_trash":return Date.now()>=(0,$().KH)({movedToTrashTime:c,deleteFromTrashDelayMs:l,cdrrDeletionEnabledTimestamp:m})?(0,M.jsx)(ae,{deleteFromTrashDelaySeconds:l/Q().C0,purgeDelaySeconds:d/Q().C0,pageStatus:t}):(0,M.jsx)(X().Z,{style:r.grayBadge,content:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{children:(0,a(95886).y)(r.trashIcon)}),(0,M.jsx)(o()._H,{id:"adminContentSearch.pageStatusBadge.trash",defaultMessage:"In Trash"})]})});case"deleted_from_trash":return Date.now()>=(u??$().iv)+d?(0,M.jsx)(ae,{deleteFromTrashDelaySeconds:l/Q().C0,purgeDelaySeconds:d/Q().C0,pageStatus:t}):(0,M.jsx)(X().Z,{style:r.grayBadge,content:(0,M.jsx)(o()._H,{id:"adminContentSearch.pageStatusBadge.retained",defaultMessage:"Retained"})});default:(0,P().t1)(t)}}function ae(e){const{pageStatus:t,deleteFromTrashDelaySeconds:a,purgeDelaySeconds:s}=e,n=(0,o().YB)(),r=(0,i().yK)((e=>({redBadge:{color:e.text.uiRedPrimary,backgroundColor:e.fill.redPrimary,width:"fit-content",whiteSpace:"nowrap"},secondaryTooltip:{color:e.mediumInvertedTextColor}})),[]);return"in_trash"===t?(0,M.jsx)(ee().Z,{renderTooltip:()=>(0,M.jsx)(o()._H,{id:"adminContentSearch.pageStatusBadge.deletionPending.trash.tooltip",defaultMessage:"<primary>We are processing the deletion from Trash</primary><secondary>This page is past {duration} in Trash</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,J().uP)(a,n)}}),placement:N().Placement.Bottom,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(X().Z,{style:r.redBadge,content:(0,M.jsx)(o()._H,{id:"adminContentSearch.pageStatusBadge.trash.deletionPending",defaultMessage:"Deleted from Trash soon"})})})}):"deleted_from_trash"===t?(0,M.jsx)(ee().Z,{renderTooltip:()=>(0,M.jsx)(o()._H,{id:"adminContentSearch.pageStatusBadge.deletionPending.perm.tooltip",defaultMessage:"<primary>Will be permanently deleted soon </primary> <secondary>Retained pages are permanently deleted after {duration}</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,J().uP)(s,n)}}),placement:N().Placement.Bottom,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(X().Z,{style:r.redBadge,content:(0,M.jsx)(o()._H,{id:"adminContentSearch.pageStatusBadge.perm.deletionPending",defaultMessage:"Permanently deleted soon"})})})}):null}var se=()=>a(228772);var ne=()=>a(401102);function ie(e){let{deletedFromTrashTime:t}=e;const a=function(){const e=(0,se().r)();return(0,n().VK)((()=>{const t=null==e?void 0:e.getModel();return(0,$().FT)(t)}),[e])}();if((0,P().$K)(t)){const e=t+a;return e>Date.now()?(0,M.jsx)(m().T,{dateTs:e,omitTooltip:!0}):(0,M.jsx)(ee().Z,{render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ne().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(o()._H,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}),renderTooltip:()=>(0,M.jsx)(o()._H,{defaultMessage:"This page is in process of being permanently deleted",id:"adminContentSearchTab.pagesTable.deletedTimeCell.beingPurged.tooltip"})})}return(0,M.jsx)(ne().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(o()._H,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}var oe=()=>a(726008);const re={id:"page",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,M.jsx)(a(166124).o,{blockStore:e.pageStore,rightIcon:(0,M.jsx)(K,{blockStore:e.pageStore,pageStatus:e.pageStatus,getValidDeletedPermissions:e.filterDeletedPermissions,refreshSearchResult:e.refreshSearchResult}),inlineTitleContent:(0,M.jsx)(te,{pageStatus:e.pageStatus,blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},le={id:"location",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,M.jsx)(a(465498).N,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},de={id:"createdTime",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>(0,M.jsx)(m().T,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},ce={id:"lastEditedTime",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>(0,M.jsx)(a(784123).C,{lastEditedTime:e.lastEditedTime,lastEditedById:e.lastEditedById,deletedFromTrashTime:e.deletedFromTrashTime,movedToTrashTime:e.movedToTrashTime,pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},ue={id:"createdBy",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?(0,M.jsx)(oe().t,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},me={id:"lastEditedBy",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?(0,M.jsx)(oe().t,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1};function ge(e){let{blockStore:t}=e;const s=(0,n().VK)((()=>a(876822).default.state.currentSpaceStore),[]);return s?(0,M.jsx)(a(840816).A,{blockStore:t,spaceStore:s}):null}const pe={id:"audience",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,M.jsx)(ge,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},he={id:"sharedWith",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,M.jsx)(a(118680).v,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},fe={id:"retainedUntil",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.retainedUntil.name",defaultMessage:"Retained until"}),renderCell:e=>(0,M.jsx)(ie,{deletedFromTrashTime:e.deletedFromTrashTime}),widthData:{width:140},sortable:!1},xe={id:"pageStatus",headerTitle:(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.pageStatus.name",defaultMessage:"Page status"}),renderCell:e=>(0,M.jsx)(a(999508).D,{pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},ve=[re,le,pe,he,me,ce,ue,de],ye=[re,le,xe,fe,pe,he,me,ce,ue,de];function be(e){let{loading:t,error:a,loadNextPage:m,filters:p,setFilters:h,pageStores:f,showSuggestions:x,runNewSearch:v,hasUserConfirmedAcknowledgement:y,refreshSearchResult:b}=e;const S=y&&!t&&!x,j=y&&!x,w=(0,n().Kw)(d().subscriptionDataStoreInstance),T=(0,l().$)({subscriptionData:w}),k=(0,s.useMemo)((()=>p.pageStatus.includes("deleted_from_trash")||p.pageStatus.includes("in_trash")||0===p.pageStatus.length),[p.pageStatus]),H=k?ye:ve,P=(0,n().VK)((()=>f.map((e=>{const t=k&&e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,isClickable:!1,pageStore:e,teamStore:(0,r().VP)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),pageStatus:t,movedToTrashTime:e.getMovedToTrashTime(),deletedFromTrashTime:"deleted_from_trash"===t?e.getDeletedFromTrashAt():void 0,filterDeletedPermissions:"deleted_from_trash"===t?T:void 0,refreshSearchResult:b}}))),[f,k,T,b]),D=(0,i().yK)((e=>(0,c().bE)({columnRenderInfo:H,theme:e,containerMarginTop:0})),[H]);return a?(0,M.jsx)(_().q,{runNewSearch:v,error:a}):y?x&&0===P.length?(0,M.jsx)(I,{filters:p,setFilters:h}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(c().Dp,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:400,columnRenderInfo:H,rows:P,loadMoreMethod:j?{type:"scroll",onLoadMore:m}:void 0,renderNoRowsComponent:()=>(0,M.jsx)(g().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:S&&(0,M.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})}),styles:D}),t?(0,M.jsx)(u().Z,{style:{margin:"24px auto 24px"}}):null]}):(0,M.jsx)(C,{})}},840816:(e,t,a)=>{a.d(t,{A:()=>m,e:()=>g});var s=a(667294),n=()=>a(142735),i=()=>a(26613),o=()=>a(528514),r=()=>a(788860),l=()=>a(696459),d=()=>a(239482),c=()=>a(401102),u=a(785893);function m(e){let{blockStore:t,spaceStore:a,useSecondaryColorTitle:i}=e;const[r,l]=(0,s.useState)(),m=(0,n().VK)((()=>{const e=d().fJ(t);return o().Wo(e)}),[t]);(0,s.useEffect)((()=>{!async function(){if(!a)return;const e=await o().pA({spaceId:a.getSpaceId(),inheritedPermissionItemsForPage:m,loadRecordModel:a.loadRecordModel});l(e)}()}),[a,m]);const p=(0,s.useMemo)((()=>{if(r)return g(r)}),[r]);return(0,u.jsx)(c().iP,{useSecondaryColorTitle:i,useThinTitle:!0,title:p})}function g(e){switch(e){case"private":return(0,u.jsx)(r()._H,{...i().B.private});case"shared_internally":return(0,u.jsx)(r()._H,{...i().B.sharedInternally});case"shared_externally":return(0,u.jsx)(r()._H,{...i().B.sharedExternally});case"shared_to_web":return(0,u.jsx)(r()._H,{...i().B.publishedToWeb});case"shared_with_email_domain":return(0,u.jsx)(r()._H,{...i().B.sharedWithTrustedDomain});default:(0,l().t1)(e)}}},155481:(e,t,a)=>{a.d(t,{A0:()=>u,Jd:()=>c,sC:()=>m,xF:()=>d});a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(667294);var s=()=>a(923398),n=()=>a(730728),i=()=>a(788860),o=()=>a(696459),r=()=>a(730739),l=a(785893);function d(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:i,onMenuClose:o,setPillTitleStringToActiveSelection:d}=e;return(0,l.jsx)(r().J,{allOptions:t?new Set(t):new Set(n().a),getFormattedStringCaption:m,getFormattedStringTitle:u,getPillTitle:c,selectedOptions:a,setSelectedOption:i,pillIcon:s().O,onMenuClose:o,setPillTitleStringToActiveSelection:d})}function c(e){return e[0]?u(e[0]):(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"})}function u(e){switch(e){case"private":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});case"shared_with_email_domain":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.label.sharedWithTrustedDomain",defaultMessage:"Shared with email domain"});default:(0,o().t1)(e)}}function m(e){switch(e){case"private":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});case"shared_with_email_domain":return(0,l.jsx)(i()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.sharedWithTrustedDomain",defaultMessage:"Pages that are available for anyone on a shared domain."});default:(0,o().t1)(e)}}},787806:(e,t,a)=>{a.d(t,{y:()=>l});a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(241792);var s=a(667294),n=()=>a(788860),i=()=>a(403587),o=()=>a(427613),r=a(785893);function l(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:l,runNewSearch:d,includeGuests:c}=e;const u=(0,i().R)({spaceStore:t}),m=(0,s.useMemo)((()=>u.loading?[]:c?[...u.members,...u.guests]:u.members),[u,c]),g=(0,s.useMemo)((()=>u.loading?new Set:new Set(u.guests.map((e=>e.id)))),[u]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,r.jsx)(o().B,{userStores:m,title:(0,r.jsx)(n()._H,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));l(t)},onMenuClose:d,isMultiSelect:!0,guestUserIdSet:g})}},343177:(e,t,a)=>{a.d(t,{f:()=>y});var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(803021),r=()=>a(135796),l=()=>a(374289),d=()=>a(788860),c=()=>a(696459),u=()=>a(940125),m=()=>a(8),g=()=>a(154186),p=()=>a(827973),h=()=>a(397540),f=()=>a(777539),x=()=>a(630029),v=a(785893);function y(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:i,setCreatedOnTime:l}=e;const g=(0,d().YB)(),[p,h]=(0,s.useState)("createdTime"),y=(0,s.useMemo)((()=>{switch(p){case"createdTime":return a;case"lastEditedTime":return t;default:(0,c().t1)(p)}}),[t,a,p]),S=(0,s.useMemo)((()=>{switch(p){case"createdTime":return l;case"lastEditedTime":return i;default:(0,c().t1)(p)}}),[i,l,p]);const j=(0,n().VK)((()=>{if((0,u().mK)(y))switch(p){case"createdTime":return(0,v.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,v.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,c().t1)(p)}const e=(0,u().Hq)(y),t=m()._Q(e,g,o().sF);switch(p){case"createdTime":return(0,v.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"Created on: {dateRangeString}",values:{dateRangeString:t}});case"lastEditedTime":return(0,v.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,c().t1)(p)}}),[y,p,g]);return(0,v.jsx)(f().Z,{header:(0,v.jsx)(b,{selectedItem:p,setSelectedItem:function(e){h(e)}}),mode:x().z.Pill,focused:!1,hideTime:!0,pillTitle:j,title:j,icon:r().C,value:y,showButtons:"footer",onChange:e=>{S(e)}})}function b(e){let{selectedItem:t,setSelectedItem:a}=e;const s=(0,i().yK)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:10,width:10,marginLeft:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,v.jsx)(p().Z,{title:S(e.value),...e}),renderOrigin:e=>(0,v.jsx)(g().Z,{...e,style:s.button,children:(0,v.jsxs)("div",{style:s.text,children:[S(t),(0,l().i)(s.icon)]})})};return(0,v.jsx)(h().Z,{...n,mobileActionSheet:!0})}function S(e){return{lastEditedTime:(0,v.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,v.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},730739:(e,t,a)=>{a.d(t,{J:()=>j});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(788860),r=()=>a(61738),l=()=>a(352230),d=()=>a(998901),c=()=>a(104088),u=()=>a(692304),m=()=>a(265640),g=()=>a(827973),p=()=>a(715139),h=()=>a(198829),f=()=>a(255577),x=()=>a(967092),v=()=>a(906651),y=()=>a(388284),b=()=>a(390561),S=a(785893);function j(e){let{allOptions:t,selectedOptions:a,setSelectedOption:j,onMenuClose:w,pillIcon:M,setPillTitleStringToActiveSelection:C,getFormattedStringTitle:_,getFormattedStringCaption:T,getPillTitle:k}=e;const I=(0,n().qz)(void 0,u().Z),H=(0,i().yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[P,D]=(0,s.useState)(!1);function z(){D(!1),w&&w()}function A(){j&&j([])}function N(e){const t=a.includes(e)?[...a.filter((t=>t!==e))]:[...a,e];j&&j(t)}const R=(0,S.jsx)(r().Z,{on:a.length>0,icon:M(H.icon),title:C&&a[0]?k(a):k([]),onClick:()=>D(!0),disabled:!j,hideChevron:!j});return j?(0,S.jsx)(b().Z,{children:(0,S.jsx)(x().ZP,{popupType:c().k.Popup,placementToOrigin:d().Placement.Bottom,alignmentToOrigin:d().Alignment.Start,open:P,render:function(){const e={key:"menuOptions",items:Array.from(t).map((e=>({key:e,action:()=>N(e),render:t=>(0,S.jsx)(g().Z,{...t,icon:(0,S.jsx)(p().Z,{checked:a.includes(e),onClick:()=>N(e),size:16}),focused:!1,title:_(e),caption:T(e),shouldWrapCaption:!0})}))),render:e=>(0,S.jsx)(y().Z,{...e,title:null,loading:!1})};return(0,S.jsxs)("div",{style:H.container,children:[(0,S.jsx)(h().Z,{menuType:l().o.Popup,header:null,maxHeight:250,width:300,children:(0,S.jsx)(f().ZP,{type:f().iW.Vertical,store:I,initialFocus:0,sections:[e]})}),(0,S.jsxs)(y().Z,{topBorder:!0,style:H.footer,children:[(0,S.jsx)(m().D,{onClick:A,children:(0,S.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,S.jsx)(v().Z,{onClick:z,children:(0,S.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:z,keepFocus:!0,origin:R,preventScaleTransition:!0})}):R}},220725:(e,t,a)=>{a.d(t,{Sp:()=>h,To:()=>f,UO:()=>g,xR:()=>p});a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624);var s=a(667294),n=()=>a(142735),i=()=>a(18902),o=()=>a(26613),r=()=>a(934935),l=()=>a(429892),d=()=>a(788860),c=()=>a(696459),u=()=>a(730739),m=a(785893);function g(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:o,onMenuClose:l}=e;const c=(0,d().YB)(),g=new Set(["alive","in_trash","deleted_from_trash"]),{currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v}=(0,n().VK)((()=>({currentDeleteFromTrashDelayInSeconds:(0,i().Tv)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,i().FT)(t.getModel())/1e3})),[t]),y=(0,s.useMemo)((()=>h({currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v,intl:c})),[x,v,c]);return(0,m.jsx)(u().J,{pillIcon:r().S,allOptions:g,selectedOptions:a,setSelectedOption:o,setPillTitleStringToActiveSelection:!0,onMenuClose:l,getFormattedStringTitle:p,getFormattedStringCaption:y,getPillTitle:f})}function p(e){switch(e){case"alive":return(0,m.jsx)(d()._H,{...o().k.alive});case"in_trash":return(0,m.jsx)(d()._H,{...o().k.trash});case"deleted_from_trash":return(0,m.jsx)(d()._H,{...o().k.retained});default:(0,c().t1)(e)}}function h(e){return function(t){switch(t){case"alive":return null;case"in_trash":return(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.trash",defaultMessage:"Trashed pages are automatically deleted after {duration}",values:{duration:(0,l().uP)(e.currentDeleteFromTrashDelayInSeconds,e.intl)}});case"deleted_from_trash":return(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.internal",defaultMessage:"Pages deleted from Trash are retained for {duration}",values:{duration:(0,l().uP)(e.currentPurgeDelayInSeconds,e.intl)}});default:(0,c().t1)(t)}}}function f(e){if(0===e.length)return(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.default",defaultMessage:"Page status"});const t=e.includes("alive"),a=e.includes("in_trash"),s=e.includes("deleted_from_trash");return t?a&&s?(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.allStatusSelected",defaultMessage:"All pages"}):a||s?(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveStatusWithActive",defaultMessage:"Include {trashSelected, select, true {Trash} other {retained pages}}",values:{trashSelected:a}}):(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.activeOnly",defaultMessage:"Active pages"}):a&&s?(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveOnly",defaultMessage:"Inactive pages"}):(0,m.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.singleInactiveStatus",defaultMessage:"{trashSelected, select, true {Trash} other {Retained pages}} only",values:{trashSelected:a}})}},394970:(e,t,a)=>{a.d(t,{Q:()=>l});a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(241792);var s=a(667294),n=()=>a(788860),i=()=>a(403587),o=()=>a(427613),r=a(785893);function l(e){let{spaceStore:t,sharedWithFilterItems:a,setSharedWithFilter:l,runNewSearch:d,includeGroups:c,includeGuests:u}=e;const m=(0,i().R)({spaceStore:t}),g=(0,s.useMemo)((()=>m.loading?[]:u?[...m.members,...m.guests]:m.members),[m,u]),p=(0,s.useMemo)((()=>m.loading?new Set:new Set(m.guests.map((e=>e.id)))),[m]);return(0,r.jsx)(o().B,{isMultiSelect:!0,includePermissionGroups:c,userStores:g,title:(0,r.jsx)(n()._H,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:a??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:a}=e;return{type:a,id:t}}));l(t.length>0?t:void 0)},onMenuClose:d,guestUserIdSet:p})}},843346:(e,t,a)=>{a.d(t,{p:()=>D});a(670560),a(267602),a(653476),a(470928),a(241792);var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(38883),r=()=>a(923398),l=()=>a(788860),d=()=>a(696459),c=()=>a(61738),u=()=>a(527278),m=()=>a(352230),g=()=>a(91502),p=()=>a(998901),h=()=>a(104088),f=()=>a(692304),x=()=>a(383694),v=()=>a(265640),y=()=>a(827973),b=()=>a(198829),S=()=>a(255577),j=()=>a(967092),w=()=>a(906651),M=()=>a(388284),C=()=>a(67961),_=()=>a(972544),T=()=>a(390561),k=()=>a(78014),I=()=>a(101225),H=a(785893);const P=(0,l().vU)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function D(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:D,teamStores:A}=e;const N=(0,n().qz)(void 0,f().Z),R=(0,i().yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[B,L]=(0,s.useState)(!1),[O,V]=(0,s.useState)(""),U=(0,n().VK)((()=>[...A].sort(g().KP)),[A]),q=(0,n().VK)((()=>t.map((e=>A.find((t=>t.id===e)))).filter(d().$K)),[A,t]);function E(){L(!1),V(""),D()}function Z(){V(""),a([])}function F(e){const s=t.includes(e)?[]:[e];a(s),V("")}const W=(0,s.useCallback)((e=>{V(e.target.value)}),[]),K=(0,n().VK)((()=>q.map((e=>{const s=e.getName();return(0,H.jsx)(k().Z,{isSingle:!0,format:o().lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:R.pillContainer,value:(0,H.jsxs)("div",{style:R.pillContents,children:[(0,H.jsx)(x().p,{disabled:!0,store:e,size:16}),(0,H.jsx)(C().Z,{style:R.pillText,children:s})]})},e.id)}))),[q,t,a,R]);const G=(0,H.jsx)(c().Z,{on:t.length>0,icon:(0,r().O)(R.icon),title:(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>L(!0)});return(0,H.jsx)(T().Z,{children:(0,H.jsx)(j().ZP,{popupType:h().k.Popup,placementToOrigin:p().Placement.Bottom,alignmentToOrigin:p().Alignment.Start,open:B,render:function(){const e=[];for(const n of U){const a=n.getName(),s=n.getTeamAccessLevel(),i=n.isDefault();a&&a.toLocaleLowerCase().includes(O)&&e.push({key:n.id,action:()=>F(n.id),render:e=>(0,H.jsx)(y().Z,{...e,icon:(0,H.jsx)(_().Z,{isSelected:t.includes(n.id)}),focused:!1,title:(0,H.jsxs)("div",{style:R.optionContainer,children:[(0,H.jsx)(x().p,{disabled:!0,store:n,size:24,style:R.teamIcon}),(0,H.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,H.jsx)(C().Z,{style:R.optionTitle,children:a}),(0,H.jsx)(C().Z,{style:R.optionCaption,children:z(s,i)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,H.jsx)(C().Z,{isSecondaryColor:!0,style:R.noResultsMessage,...e,children:(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,H.jsx)(M().Z,{...e,title:null,loading:!1})};return(0,H.jsxs)("div",{style:R.container,children:[(0,H.jsx)(I().Z,{focus:!0,value:O,style:R.input,placeholder:u().Z.formatMessage(P.placeholder),onChange:W,onRemoveLastToken:Z,tokens:K}),(0,H.jsx)(b().Z,{menuType:m().o.Popup,header:null,maxHeight:250,width:300,children:(0,H.jsx)(S().ZP,{type:S().iW.Vertical,store:N,initialFocus:0,sections:[s]})}),(0,H.jsxs)(M().Z,{topBorder:!0,style:R.footer,children:[(0,H.jsx)(v().D,{onClick:Z,children:(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,H.jsx)(w().Z,{onClick:E,children:(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:E,keepFocus:!0,origin:G,preventScaleTransition:!0})})}function z(e,t){if(t)return(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,H.jsx)(l()._H,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,d().t1)(e)}}},427613:(e,t,a)=>{a.d(t,{B:()=>U});a(670560),a(267602),a(653476),a(470928),a(241792);var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(38883),r=()=>a(81979),l=()=>a(730388),d=()=>a(923398),c=()=>a(499110),u=()=>a(788860),m=()=>a(696459),g=()=>a(61738),p=()=>a(527278),h=()=>a(352230),f=()=>a(907099),x=()=>a(998901),v=()=>a(104088),y=()=>a(876822),b=()=>a(467806),S=()=>a(692304),j=()=>a(265640),w=()=>a(827973),M=()=>a(715139),C=()=>a(198829),_=()=>a(255577),T=()=>a(967092),k=()=>a(906651),I=()=>a(943620),H=()=>a(906769),P=()=>a(388284),D=()=>a(67961),z=()=>a(981583),A=()=>a(972544),N=()=>a(390561),R=()=>a(78014),B=()=>a(101225),L=a(785893);const O=(0,u().vU)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}}),V=10;function U(e){let{userStores:t,title:a,selectedItems:U,setSelectedItems:q,onMenuClose:E,isMultiSelect:Z,includePermissionGroups:F,guestUserIdSet:W}=e;const K=(0,u().YB)(),G=(0,n().qz)(void 0,S().Z),Y=(0,i().yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.mediumTextColor,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},noResultsMessage:{width:"100%",margin:"8px 12px"},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[$,J]=(0,s.useState)(V),[Q,X]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(""),ae=t.length,se=(0,n().VK)((()=>y().default.state.currentSpaceStore),[]),ne=(0,s.useMemo)((()=>U.map((e=>{let{id:t}=e;return t}))),[U]),ie=(0,n().VK)((()=>F?b().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group)):[]),[F]),oe=(0,n().VK)((()=>ne.map((e=>t.find((t=>t.id===e)))).filter(m().$K)),[ne,t]),re=(0,n().VK)((()=>ne.map((e=>ie.find((t=>t.group_id===e)))).filter(m().$K)),[ne,ie]);function le(){J(V),X(!1),te(""),E()}function de(){te(""),q([])}function ce(e){e<5&&$<ae&&J($+V)}function ue(e){if(Z){return ne.includes(e.id)?[...U.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...U,e]}return ne.includes(e.id)?[]:[e]}function me(e){const t=ue({id:e,type:"user"});q(t),te("")}function ge(e){const t=ue({id:e,type:"permission_group"});q(t),te("")}const pe=(0,s.useCallback)((e=>{te(e.target.value)}),[]),he=(0,n().VK)((()=>oe.map((e=>{const t=(0,c().Nz)(K,e.getModel()),a=!!W&&W.has(e.id);return(0,L.jsx)(R().Z,{isSingle:!0,format:o().lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ne.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));q(t)},style:a?Y.guestPillContainer:Y.pillContainer,value:(0,L.jsxs)("div",{style:Y.pillContents,children:[a?(0,r().o)(Y.guestIcon):(0,L.jsx)(z().Z,{userStore:e,size:16}),(0,L.jsx)(D().Z,{style:Y.pillText,children:t})]})},e.id)}))),[ne,oe,q,W,Y,K]),fe=(0,n().VK)((()=>re.map((e=>{const t=f().kF({intl:K,groupName:e.name});return(0,L.jsx)(R().Z,{isSingle:!0,format:o().lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ne.filter((t=>t!==e.group_id)).map((e=>({id:e,type:"permission_group"})));q(t)},style:Y.pillContainer,value:(0,L.jsxs)("div",{style:Y.pillContents,children:[(0,L.jsx)(I().Z,{disabled:!0,icon:e.icon&&se?{pointer:se.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,d().O)(Y.defaultGroupIconPill),style:Y.groupIconSpacing}),(0,L.jsx)(D().Z,{style:Y.pillText,children:t})]})},e.id)}))),[ne,re,q,Y,se,K]);const xe=(0,L.jsx)(g().Z,{on:ne.length>0,icon:(0,l().f)(Y.icon),title:a,onClick:()=>X(!0)});return(0,L.jsx)(N().Z,{children:(0,L.jsx)(T().ZP,{popupType:v().k.Popup,placementToOrigin:x().Placement.Bottom,alignmentToOrigin:x().Alignment.Start,open:Q,render:function(){const e=[];for(const r of t){var a;const t=(0,c().Nz)(K,r.getModel()),s=!!W&&W.has(r.id);(t.toLocaleLowerCase().includes(ee)||null!==(a=r.getEmail())&&void 0!==a&&a.toLocaleLowerCase().includes(ee))&&e.push({key:r.id,action:()=>me(r.id),render:e=>(0,L.jsx)(w().Z,{...e,icon:Z?(0,L.jsx)(M().Z,{checked:ne.includes(r.id),onClick:()=>me(r.id),size:16}):(0,L.jsx)(A().Z,{isSelected:ne.includes(r.id)}),focused:!1,title:(0,L.jsxs)("div",{style:Y.optionContainer,children:[(0,L.jsx)(z().Z,{userStore:r,size:24,style:Y.optionAvatar}),(0,L.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,L.jsx)(D().Z,{style:Y.optionTitle,children:t}),(0,L.jsx)(D().Z,{style:Y.optionCaption,children:s?(0,L.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,L.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})})})}const s=[];for(const t of ie){const e=f().kF({intl:K,groupName:t.name});e.toLocaleLowerCase().includes(ee)&&s.push({key:t.id,action:()=>ge(t.group_id),render:a=>(0,L.jsx)(w().Z,{...a,icon:Z?(0,L.jsx)(M().Z,{checked:ne.includes(t.group_id),onClick:()=>ge(t.group_id),size:16}):(0,L.jsx)(A().Z,{isSelected:ne.includes(t.group_id)}),focused:!1,title:(0,L.jsxs)("div",{style:Y.optionContainer,children:[(0,L.jsx)(I().Z,{disabled:!0,icon:t.icon&&se?{pointer:se.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:e,defaultIcon:(0,d().O)(Y.defaultGroupIcon),style:Y.groupIconSpacing}),(0,L.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,L.jsx)(D().Z,{style:Y.optionTitle,children:e}),(0,L.jsx)(D().Z,{style:Y.optionCaption,children:(0,L.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})})})}const n={key:"no-results",action:()=>{},render:e=>(0,L.jsx)(D().Z,{isSecondaryColor:!0,style:Y.noResultsMessage,...e,children:(0,L.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."})})},i=[...e,...s],o={key:"userOptions",items:i.length>0?i.slice(0,$):[n],render:e=>(0,L.jsx)(P().Z,{...e,title:null,loading:!1})};return(0,L.jsxs)("div",{style:Y.container,children:[(0,L.jsx)(B().Z,{focus:!0,value:ee,style:Y.input,placeholder:p().Z.formatMessage(F?O.usersAndGroupsPlaceholder:O.usersPlaceholder),onChange:pe,onRemoveLastToken:()=>{const e=U.slice(0,-1);q(e)},tokens:[...he,...fe]}),(0,L.jsxs)(C().Z,{menuType:h().o.Popup,header:null,maxHeight:250,width:300,children:[(0,L.jsx)(_().ZP,{type:_().iW.Vertical,store:G,initialFocus:0,sections:[o]}),(0,L.jsx)(H().Z,{onChange:ce})]}),(0,L.jsxs)(P().Z,{topBorder:!0,style:Y.footer,children:[(0,L.jsx)(j().D,{onClick:de,children:(0,L.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,L.jsx)(k().Z,{onClick:le,children:(0,L.jsx)(u()._H,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:le,keepFocus:!0,origin:xe,preventScaleTransition:!0})})}},784123:(e,t,a)=>{a.d(t,{C:()=>m});a(667294);var s=()=>a(146947),n=()=>a(142735),i=()=>a(646574),o=()=>a(989478),r=()=>a(788860),l=()=>a(696459),d=()=>a(226994),c=()=>a(802321),u=a(785893);function m(e){let{pageStatus:t,lastEditedTime:a,lastEditedById:m,movedToTrashTime:g,deletedFromTrashTime:p}=e;const h=(0,d().Z)(m),f=(0,n().VK)((()=>{if("alive"===t)return(0,u.jsx)(r()._H,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.lastEdited",defaultMessage:"Last edited by {name} on {time}",values:{name:h,time:(0,i().Yx)(a,"month_day_time",s().locale)}});if((0,l().$K)(p)){return!!m&&(0,o().r3)(m)?(0,u.jsx)(r()._H,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.autoDeletedFromTrash",defaultMessage:"Automatically deleted from Trash on {time}",values:{time:(0,i().Yx)(p,"month_day_time",s().locale)}}):(0,u.jsx)(r()._H,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.deletedFromTrash",defaultMessage:"Deleted from Trash by {name} on {time}",values:{name:h,time:(0,i().Yx)(p,"month_day_time",s().locale)}})}return(0,l().$K)(g)?(0,u.jsx)(r()._H,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.movedToTrash",defaultMessage:"Moved to Trash by {name} on {time}",values:{name:h,time:(0,i().Yx)(g,"month_day_time",s().locale)}}):void 0}),[p,m,a,g,t,h]);return(0,u.jsx)(c().T,{dateTs:a,tooltip:f})}},465498:(e,t,a)=>{a.d(t,{N:()=>h});a(267602),a(653476),a(667294);var s=()=>a(142735),n=()=>a(846550),i=()=>a(667067),o=()=>a(923398),r=()=>a(528514),l=()=>a(933868),d=()=>a(788860),c=()=>a(239482),u=()=>a(401102),m=()=>a(562761),g=a(785893),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h(e){let{blockStore:t,teamStore:a}=e;const h=(0,n().yK)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),f=(0,s().VK)((()=>{const e=(0,c().fJ)(t),a=(0,r().Wo)(e),s=a.filter((e=>!(0,l().Le)(e)));return 1===s.length&&(0,l().jg)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,g.jsx)(m().r,{useThinTitle:!0,teamStore:a}):function(){switch(f){case p.Shared:return(0,g.jsx)(u().iP,{useThinTitle:!0,icon:(0,o().O)(h.icon),title:(0,g.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,g.jsx)(u().iP,{useThinTitle:!0,icon:(0,i().Q)(h.icon),title:(0,g.jsx)(d()._H,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},999508:(e,t,a)=>{a.d(t,{D:()=>r});a(667294);var s=()=>a(788860),n=()=>a(696459),i=()=>a(401102),o=a(785893);function r(e){let{pageStatus:t}=e;return(0,o.jsx)(i().iP,{useThinTitle:!0,title:l(t)})}function l(e){switch(e){case"alive":return(0,o.jsx)(s()._H,{id:"adminContentSearchTab.pagesTable.pageStatusCell.active",defaultMessage:"Active"});case"in_trash":return(0,o.jsx)(s()._H,{id:"adminContentSearchTab.pagesTable.pageStatusCell.trash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,o.jsx)(s()._H,{id:"adminContentSearchTab.pagesTable.pageStatusCell.retained",defaultMessage:"Retained"});default:(0,n().t1)(e)}}},726008:(e,t,a)=>{a.d(t,{t:()=>l});a(241792),a(667294);var s=()=>a(142735),n=()=>a(989478),i=()=>a(826955),o=()=>a(789938),r=a(785893);function l(e){let{blockStore:t,userIds:a,isClickable:l}=e;const d=(0,s().VK)((()=>a.map((e=>i().U6.createChildStore(t,{table:n().KJ,id:e})))),[t,a]);return(0,r.jsx)(o().G,{userStores:d,isClickable:l})}},925230:(e,t,a)=>{a.d(t,{i:()=>C,z:()=>M});a(670560),a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(241792);var s=a(667294),n=()=>a(66077),i=()=>a(423658),o=()=>a(219727),r=()=>a(530980),l=()=>a(217465),d=()=>a(396136),c=()=>a(96642),u=()=>a(720866),m=()=>a(513670),g=()=>a(491927),p=()=>a(824462),h=()=>a(358414),f=()=>a(940125),x=()=>a(466970),v=()=>a(826955);const y=20,b={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[],pageStatus:["alive"]},S={...b,audience:["shared_externally","shared_internally","shared_to_web"]},j={filters:b,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},w={...j,filters:S};function M(e){let{spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:r}=e;const l=(0,x().E)("enabled_bev_default_audience_filter")?w:j,b=(0,o().O7)(),[S,M]=(0,s.useState)(l),_=(0,s.useRef)(l.filters),T=(0,s.useCallback)((async e=>{let{restartSearch:s,ignoreFilterComparison:o}=e;if(!r)return;if(!o&&m().Xy(S.filters,_.current))return;_.current=S.filters;let l=S.loading,h=S.error,x=S.hasNextPage,w=S.numPagesLoaded,T=S.paginationToken;if(s&&(M((e=>({...j,showSuggestions:e.showSuggestions,filters:e.filters}))),l=j.loading,h=j.error,x=j.hasNextPage,w=j.numPagesLoaded,T=j.paginationToken),x&&!l&&!h){M((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await p().callApi({eventName:"adminContentSearch",environment:b,data:{spaceId:t.id,sort:{field:"relevance",direction:"desc"},limit:y,paginationToken:T,query:S.filters.query,audience:S.filters.audience,lastEditedTime:(0,f().Hq)(S.filters.lastEditedTime),createdTime:(0,f().Hq)(S.filters.createdTime),createdBy:S.filters.createdBy,sharedWith:S.filters.sharedWith,teamspaceIds:S.filters.teamIds,deletionStatuses:S.filters.pageStatus}});if("failed"===e.type)throw e.error;g().jd(b,{filters:S.filters,pageNumber:w});const s=e.data.paginationToken,o=e.data.recordIds,r=C({recordMapWithRoleJson:e.data.recordMap}),l=new(n().Z)({name:i().bv,data:new(c().o)({[a.id]:r})});l.addCacheFallback(b.defaultRecordCache.inMemoryRecordCache),M((e=>{const t=[],a=new Set(e.pageStores.map((e=>e.id)));for(const s of o)if(!a.has(s)){const e=new(v().G)(b,{table:d().iU,id:s},{inMemoryRecordCache:l});t.push(e)}const n=[...e.pageStores,...t];return{...e,pageStores:n,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(k){const e=(0,u().t)(k);M((t=>({...t,loading:!1,error:e})))}}}),[b,t,a,r,S.filters,S.loading,S.error,S.hasNextPage,S.numPagesLoaded,S.paginationToken]);(0,s.useEffect)((()=>{S.shouldReRunSearch&&(M((e=>({...e,shouldReRunSearch:!1}))),T({restartSearch:!0,ignoreFilterComparison:!1}))}),[S.shouldReRunSearch,T]);const k=(0,s.useCallback)((async()=>{S.shouldReRunSearch||await T({restartSearch:!1,ignoreFilterComparison:!0})}),[S.shouldReRunSearch,T]),I=(0,s.useCallback)((async e=>{await T({restartSearch:!0,ignoreFilterComparison:e||!1})}),[T]),H=(0,s.useCallback)(((e,t)=>{g().gL(b,{newFilters:e}),M((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[b]),P=(0,s.useCallback)((async e=>{const a=await async function(e){let{environment:t,blockId:a,spaceStore:s}=e;const n=await p().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:a}});if("failed"===n.type)return;const o=h().W({environment:t,blockId:a,privateRecordCacheName:i().bv,ancestorData:n.data,spaceId:s.id});return o}({environment:b,blockId:e,spaceStore:t});a?M((t=>{const s=[];for(const n of t.pageStores)n.id===e?a.pathHasPurgedDeletedPermission()||s.push(a):s.push(n);return{...t,pageStores:s,loading:!1,error:void 0}})):await T({restartSearch:!0,ignoreFilterComparison:!1})}),[b,t,T]);return{showSuggestions:S.showSuggestions,filters:S.filters,pageStores:S.pageStores,loading:S.loading,error:S.error,hasNextPage:S.hasNextPage,loadNextPage:k,runNewSearch:I,setFilters:H,refreshSearchResult:P}}function C(e){const{recordMapWithRoleJson:t}=e,a=l().RecordMapWithRole.create(t),s=l().RecordMapWithRole.create();for(const{pointer:n,model:i}of a)if(i){const e=r().kk5.fromValue(n.table,m().Xh(i.__IM_SORRY__getValue()));s.setModelAndRole(n,e,"editor")}return s}},879078:(e,t,a)=>{a.d(t,{G_:()=>j,by:()=>_,d1:()=>C});var s=a(667294),n=()=>a(146947),i=()=>a(219727),o=()=>a(846550),r=()=>a(524052),l=()=>a(788860),d=()=>a(707513),c=()=>a(326966),u=()=>a(959137),m=()=>a(176691),g=()=>a(154186),p=()=>a(78078),h=()=>a(316855),f=()=>a(312578),x=()=>a(661297),v=()=>a(777346),y=()=>a(67961),b=()=>a(167830),S=a(785893);function j(e){let{handleVerifyDomain:t,domainVerification:a,loading:i}=e;const r=(0,o().yK)((e=>({title:{fontFamily:d().F5(n().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:d().F5(n().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{fontSize:14,lineHeight:"19px"},input:{marginTop:22}})),[]);return(0,S.jsxs)(s.Fragment,{children:[(0,S.jsx)(y().Z,{style:r.title,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})}),(0,S.jsx)(y().Z,{style:r.subtitle,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})}),(0,S.jsxs)(p().sg,{marginTop:24,gap:24,children:[(0,S.jsxs)(p().sg,{gap:12,children:[(0,S.jsx)(C,{domainVerification:a}),(0,S.jsx)(w,{domainVerification:a})]}),(0,S.jsx)(_,{listStyles:r.list})]}),(0,S.jsx)(x().Z,{style:{width:"100%"},onClick:()=>t(a),disabled:i,children:i?(0,S.jsx)(f().Z,{}):(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify domain"})})]})}function w(e){let{domainVerification:t}=e;const a=(0,i().O7)();return(0,S.jsx)(M,{value:t.domain,handleCopyLink:async function(){const e=await u().F.clipboardActions.load();e.copyString({environment:a,stringValue:t.domain,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})},label:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.domainLabel",defaultMessage:"Domain"})})}function M(e){let{value:t,handleCopyLink:a,disabled:s,label:i}=e;const c=(0,o().yK)((e=>({copyButton:{borderRadius:4,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:d().F5(n().locale).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},input:{fontFamily:d().F5(n().locale).mono,textOverflow:"ellipsis"}})),[]);return(0,S.jsxs)(p().sg,{gap:0,children:[(0,S.jsx)(b().Z,{children:i}),(0,S.jsx)(h().Z,{value:t,readOnly:!0,inputStyle:c.input,right:(0,S.jsxs)(g().Z,{onClick:a,style:c.copyButton,disabled:s,children:[(0,r().U)(c.copyIcon),(0,S.jsx)(l()._H,{id:"copyableReadOnlyInput.copy",defaultMessage:"Copy"})]})})]})}function C(e){let{domainVerification:t,containerStyles:a,regenerateCode:n}=e;const r=(0,i().O7)(),[g,h]=(0,s.useState)(!1),f=t.expiresAt-Date.now()<2*c().U6,x=t.expiresAt<Date.now(),b=(0,o().yK)((e=>({expiresSoonText:{color:"dark"===e.mode?e.accentColors.yellow[700]:e.accentColors.yellow[500]},expiredText:{color:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500]},blueButton:{fontWeight:d().Ue.medium,color:e.blueColor},blueButtonHover:{background:e.outlineBlueButtonHoveredBackground}})),[]);return(0,S.jsx)("div",{style:a,children:(0,S.jsxs)(p().sg,{gap:4,children:[(0,S.jsx)(M,{label:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"}),value:`notion-domain-verification=${t.verificationCode}`,handleCopyLink:async function(){const e=await u().F.clipboardActions.load();e.copyString({environment:r,stringValue:`notion-domain-verification=${t.verificationCode}`,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})},disabled:x}),(0,S.jsxs)(p().X2,{alignItems:"center",justifyContent:"space-between",children:[x?(0,S.jsx)(y().Z,{style:b.expiredText,isSmall:!0,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpired",defaultMessage:"This verification code expired on {expirationDate}",values:{expirationDate:(0,m().gs)(t.expiresAt)}})}):(0,S.jsx)(y().Z,{style:f?b.expiresSoonText:void 0,isSmall:!0,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"This verification code expires on {timeLeft}",values:{timeLeft:(0,m().gs)(t.expiresAt)}})}),x&&n?(0,S.jsx)(v().Z,{style:b.blueButton,hoveredStyle:b.blueButtonHover,onClick:async()=>{h(!0),await n(t),h(!1)},disabled:g,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.regenerateButton",defaultMessage:"Regenerate"})}):void 0]})]})})}function _(e){let{listStyles:t}=e;const a=(0,o().yK)((()=>({list:{paddingInlineStart:22,margin:0},listItem:{fontFamily:d().F5(n().locale).sans,fontWeight:400,marginBottom:12}})),[]);return(0,S.jsxs)("ol",{style:{...a.list,...t},children:[(0,S.jsx)("li",{style:a.listItem,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Go to the DNS settings for your domain host."})}),(0,S.jsx)("li",{style:a.listItem,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a TXT record and paste the verification code."})}),(0,S.jsx)("li",{style:a.listItem,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"This update usually takes a few minutes but may take up to 72 hours to complete."})}),(0,S.jsx)("li",{style:a.listItem,children:(0,S.jsx)(l()._H,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify domain" to confirm once your DNS record is updated.'})})]})}},587148:(e,t,a)=>{a.d(t,{k:()=>c,t:()=>m});a(667294);var s=()=>a(846550),n=()=>a(255933),i=()=>a(788860),o=()=>a(696459),r=()=>a(943620),l=()=>a(67961),d=a(785893);function c(e){let{id:t,name:a,icon:o,subscriptionTier:c,memberCount:u,highlightIconContainer:g}=e;const p=(0,i().YB)(),h=o?{pointer:{table:n().bx,id:t,spaceId:t},icon:o}:void 0,f=(0,s().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%"},summaryContainer:{width:"calc(100% - 38px)"},iconContainer:{height:38,width:38,flexGrow:0,flexShrink:0,flexBasis:38,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",background:g?e.selectLightGray[50]:void 0,borderRadius:6},name:{fontSize:14,fontWeight:500},byline:{fontSize:12,opacity:.5}})),[g]);return(0,d.jsxs)("div",{style:f.container,children:[(0,d.jsx)("div",{style:f.iconContainer,children:(0,d.jsx)(r().Z,{disabled:!0,icon:h,isEmptyPage:!1,size:32,title:a,isLarge:!0,emojiSize:28,isRaw:!1})}),(0,d.jsxs)("div",{style:f.summaryContainer,children:[(0,d.jsx)(l().Z,{style:f.name,showTooltipWhenTruncated:!0,children:a}),(0,d.jsx)(l().Z,{style:f.byline,children:(0,d.jsx)(i()._H,{id:"identityAndProvisioning.claimWorkspaces.summaryByline",defaultMessage:"{subscriptionTier} · {memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{subscriptionTier:m(c,p),memberCount:u}})})]})]})}const u=(0,i().vU)({free:{id:"subscriptionTier.free",defaultMessage:"Free"},personal:{id:"subscriptionTier.personal",defaultMessage:"Personal Pro"},plus:{id:"subscriptionTier.plus",defaultMessage:"Plus"},business:{id:"subscriptionTier.business",defaultMessage:"Business"},enterprise:{id:"subscriptionTier.enterprise",defaultMessage:"Enterprise"}});function m(e,t){switch(e){case"personal_free":case"team_free":case"free":return t.formatMessage(u.free);case"personal":return t.formatMessage(u.personal);case"plus":return t.formatMessage(u.plus);case"business":return t.formatMessage(u.business);case"enterprise":return t.formatMessage(u.enterprise);default:(0,o().t1)(e)}}},956779:(e,t,a)=>{a.d(t,{B:()=>l});a(667294);var s=()=>a(846550),n=()=>a(788860),i=()=>a(802321),o=()=>a(67961),r=a(785893);function l(e){let{lastActiveAt:t,containerStyle:a,useSecondaryColorTitle:l,isNoActivitySecondaryColor:d}=e;const c=(0,s().yK)((e=>({container:{...a}})),[a]);return(0,r.jsx)("div",{style:c.container,children:t?(0,r.jsx)(i().T,{useSecondaryColorTitle:l,dateTs:t}):(0,r.jsx)(o().Z,{isSecondaryColor:d,children:(0,r.jsx)(n()._H,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",defaultMessage:"No activity"})})})}},438771:(e,t,a)=>{a.d(t,{V:()=>r,h:()=>l});a(667294);var s=()=>a(724568),n=()=>a(788860),i=()=>a(167393),o=a(785893);function r(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,o.jsx)(i().u,{pillTitle:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:s().j,selectedItem:t,setSelectedItem:a,items:l})}const l=[{key:"totp",value:"totp",title:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),shortTitle:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),caption:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",defaultMessage:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),shortTitle:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),caption:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",defaultMessage:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:"backup_code",value:"backup_code",title:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),shortTitle:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),caption:(0,o.jsx)(n()._H,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",defaultMessage:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}]},458852:(e,t,a)=>{a.d(t,{s:()=>x});a(670560);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(788860),r=()=>a(395362),l=()=>a(824462),d=()=>a(308186),c=()=>a(102182),u=()=>a(109757),m=()=>a(443269),g=()=>a(876822),p=()=>a(67961),h=a(785893);const f=(0,o().vU)({uploadFailed:{defaultMessage:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});function x(e){const{userStore:t}=e,a=(0,o().YB)(),x=(0,n().O7)(),{userProfilePhoto:v,userName:y,userEmail:b,isSuspended:S}=(0,i().VK)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(a),userEmail:t.getEmail(),isSuspended:t.getIsSuspended()})),[t,a]),[j,w]=(0,s.useState)({loading:!1,error:void 0}),[M,C]=(0,s.useState)({value:v,loading:!1}),[_,T]=(0,s.useState)(y),[k,I]=(0,s.useState)(b);async function H(e){var s;const n=null===(s=g().default.state.currentSpaceStore)||void 0===s?void 0:s.id,i=[];M.value!==v&&i.push("profile_photo"),_!==y&&i.push("name"),k!==b&&i.push("email"),r().am(x,{user_status:S?"suspended":"notSuspended",edited_fields:i});const{accept:u}=await d().gt({message:(0,h.jsx)(p().Z,{style:d().fq.title,children:(0,h.jsx)(o()._H,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",defaultMessage:"Confirm changes"})}),description:(0,h.jsxs)(p().Z,{isMultiline:!0,isSecondaryColor:!0,children:[(0,h.jsx)(o()._H,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",defaultMessage:"Changes made to this user's account will be reflected across all workspaces they have access to."}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(o()._H,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",defaultMessage:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})]}),acceptLabel:(0,h.jsx)(o()._H,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",defaultMessage:"Save changes"}),cancelLabel:(0,h.jsx)(o()._H,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!u)return void P();w({loading:!0,error:void 0});const f=await l().callApi({eventName:"updateUserProfile",environment:x,data:{userId:t.id,spaceId:n,name:_,email:k,profilePhoto:(null==e?void 0:e.profilePhoto)??M.value}});if(r().$B(x,{user_status:S?"suspended":"notSuspended",edited_fields:i}),"failed"===f.type)return d().UW((0,m().wf)(a,f)),void w({loading:!1,error:f.error});c().oV({label:(0,h.jsx)(o()._H,{id:"managedUsers.toastMessage.updateProfileData.success",defaultMessage:"Successfully updated user's profile"})}),setTimeout((()=>{w({loading:!1,error:void 0})}),500)}function P(){C({value:v,loading:!1}),T(y),I(b)}return{hasStagedChanges:M.value!==v||_!==y||k!==b,saveChanges:H,resetState:P,loading:j.loading,error:j.error,profilePhoto:{value:M.value,loading:M.loading,set:function(){u().cR({environment:x,onStart:()=>{C((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{C((e=>({...e,loading:!1}))),d().UW(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];C({value:t,loading:!1})},accept:"image/*"})},setAndSave:function(){u().cR({environment:x,onStart:()=>{C((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{C((e=>({...e,loading:!1}))),d().UW(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];C({value:t,loading:!1}),H({profilePhoto:t})},accept:"image/*"})},remove:function(){C({value:"",loading:!1})}},name:{value:_,set:T},email:{value:k,set:I}}}},470374:(e,t,a)=>{a.d(t,{d:()=>m});var s=a(667294),n=()=>a(219727),i=()=>a(815757),o=()=>a(788860),r=()=>a(395362),l=()=>a(824462),d=()=>a(308186),c=()=>a(102182);const u=(0,o().vU)({getSupportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{defaultMessage:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"},toastDisabled:{id:"managedUsers.toastMessage.supportAccessDisabled",defaultMessage:"Successfully disabled user's support access status"},toastEnabled:{id:"managedUsers.toastMessage.supportAccessEnabled",defaultMessage:"Successfully enabled user's support access status"}});function m(e){const{spaceId:t,userId:a,isUserUnmanaged:m}=e,g=(0,o().YB)(),p=(0,n().O7)(),[h,f]=(0,s.useState)({loading:!1,error:void 0}),[x,v]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{!async function(){const e=await async function(){if(!a)return;if(m)return;f({loading:!0,error:void 0});const e=await l().callApi({eventName:"getDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a}});return"failed"===e.type?(f({loading:!1,error:e.error}),void d().RL(g.formatMessage(u.getSupportAccessFailed))):(f({loading:!1,error:void 0}),e.data.expiryTime)}();v(e)}()}),[p,g,t,a,m]);const y=(0,s.useMemo)((()=>Boolean(x&&Number(x)>Date.now())),[x]),b=(0,s.useCallback)((async()=>{if(!a)return;f({loading:!0,error:void 0});const e=y?void 0:Date.now()+i().g,s=await l().callApi({eventName:"setDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a,expiryTime:e}});if(r().Ef(p,{new_value:Boolean(e)}),"failed"===s.type)return f({loading:!1,error:s.error}),void d().RL(g.formatMessage(u.setSupportAccessFailed));v(e),e?c().oV({label:g.formatMessage(u.toastEnabled)}):c().oV({label:g.formatMessage(u.toastDisabled)}),f({loading:!1,error:void 0})}),[p,g,t,a,y]);return{isAccessGranted:y,toggleDataAccessConsent:b,loading:h.loading,error:h.error}}},816559:(e,t,a)=>{a.d(t,{L:()=>g,S:()=>m});a(667294);var s=()=>a(142735),n=()=>a(846550),i=()=>a(989478),o=()=>a(788860),r=()=>a(876822),l=()=>a(826955),d=()=>a(401102),c=()=>a(981583),u=a(785893);function m(e){let{userId:t}=e;const a=(0,o().YB)(),m=(0,n().yK)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:500}})),[]),p=(0,s().VK)((()=>{const e=r().default.state.currentSpaceStore;if(!e)return;const s=l().U6.createChildStore(e,{table:i().KJ,id:t});return{userStore:s,isReady:s.isReady(),userName:s.getDisplayName(a),userEmail:s.getEmail()}}),[t,a]);return null!=p&&p.isReady?(0,u.jsx)(d().iP,{useThinTitle:!0,title:p.userName,byline:p.userEmail,icon:(0,u.jsx)(c().Z,{size:28,userStore:p.userStore,iconStyle:m.iconStyle})}):(0,u.jsx)(g,{})}function g(e){const t=(0,n().yK)((()=>({icon:{borderRadius:"100%",height:e.iconSize??28,width:e.iconSize??28,marginLeft:-4}})),[e.iconSize]);return(0,u.jsx)(d().HD,{includeByline:!0,includeIcon:!0,iconStyles:t.icon})}},186596:(e,t,a)=>{a.d(t,{$:()=>p,O:()=>g});a(241792),a(667294);var s=()=>a(142735),n=()=>a(846550),i=()=>a(757665),o=()=>a(255933),r=()=>a(122792),l=()=>a(788860),d=()=>a(167393),c=()=>a(943620),u=()=>a(67961),m=a(785893);function g(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s}=e;const n=p(s,(0,l().YB)());return(0,m.jsx)(d().u,{pillTitle:(0,m.jsx)(l()._H,{id:"managedUsersTab.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:i().K,selectedItem:t,setSelectedItem:a,items:n})}function p(e,t,a){const i=function(e){return(0,n().yK)((t=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:t.mediumTextColor,fontSize:12,lineHeight:"15px"},container:{padding:e?"8px 0":"4px 0",overflow:"hidden"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[e])}(a);return(0,s().VK)((()=>e.map((e=>{const s=e.name,n=e.icon?{pointer:{table:o().bx,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:(0,m.jsxs)("div",{style:i.optionContainer,children:[(0,m.jsx)(c().Z,{disabled:!0,icon:n,isEmptyPage:!1,size:24,title:s,isLarge:!0,emojiSize:24,isRaw:!1}),(0,m.jsxs)("div",{style:i.container,children:[(0,m.jsx)(u().Z,{style:i.optionTitle,children:s}),!a&&(0,m.jsx)(u().Z,{style:i.optionCaption,children:(0,r().v$)(e.subscriptionTier,t)})]})]}),shortTitle:s}}))),[e,t,i,a])}},630029:(e,t,a)=>{a.d(t,{z:()=>z,Z:()=>A});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(846550),o=()=>a(788860),r=()=>a(513670),l=()=>a(641506),d=()=>a(998901),c=()=>a(104088),u=()=>a(265640),m=()=>a(827973),g=()=>a(967092),p=()=>a(906651),h=()=>a(388284),f=()=>a(122159),x=()=>a(142735),v=()=>a(799891),y=()=>a(792409),b=()=>a(352230),S=()=>a(692304),j=()=>a(255577),w=()=>a(838367),M=()=>a(470386),C=()=>a(122671),_=a(785893);const T={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const k=function(e){let{labelText:t,value:i,renderResultMenuItem:o,onConfirm:r,items:l,performRequest:d,onDismiss:c,onChange:u,renderToken:m,onRemove:g,onClear:p,disabled:h}=e;const f=(0,n().O7)(),v=(0,x().qz)(void 0,S().Z),y=(0,x().qz)(void 0,a(853648).Z),b=(0,s.useCallback)(((e,a,s)=>(0,_.jsx)(D,{error:e,data:a,ready:s,labelText:t,value:i,renderResultMenuItem:o,onConfirm:r,menuListStore:v})),[t,i,o,r,v]),j={query:i,current:l};return(0,_.jsx)(a(198829).Z,{...P(f,c,t,i,l,u,m,g,p,h),children:(0,_.jsx)(a(154439).Z,{debounce:100,requestStore:y,request:j,performRequest:d,render:b})})};function I(e){const{device:t}=e;return t.isMobile}function H(e){let{labelText:t,value:a,items:s,disabled:i,onChange:o,renderToken:l,onRemove:d,onClear:c}=e;const u=(0,n().O7)(),m=s.map((e=>l(e,{onRemove:()=>d(e)})));return(0,_.jsx)(C().ZP,{focus:!I(u)||void 0,focusAfterAnimation:!0,format:C().UR.FilterValue,tokens:m,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const a=r().Z$(e);a&&t(a)}(s,d),onClearButtonClick:c,value:a,onChange:o,showClearButton:!0,disabled:Boolean(i),style:T.inputMenu})}function P(e,t,a,s,n,i,o,r,l,d){if(I(e)){return{menuType:b().o.Modal,title:a.title,right:(0,_.jsx)(M().DoneMenuText,{}),onClickRight:t,header:(0,_.jsx)(H,{labelText:a,value:s,items:n,disabled:d,onChange:i,renderToken:o,onRemove:r,onClear:l})}}return{menuType:b().o.Popup,onClickOutside:t,header:(0,_.jsx)(H,{labelText:a,value:s,items:n,disabled:d,onChange:i,renderToken:o,onRemove:r,onClear:l}),...T.menu}}function D(e){let{error:t,data:a,ready:n,labelText:i,value:r,renderResultMenuItem:l,onConfirm:d,menuListStore:c}=e;const u=(0,x().qz)(c,S().Z),m=(0,s.useCallback)((e=>(0,_.jsx)(h().Z,{...e,title:i.resultSectionTitle,loading:!n})),[i,n]);if(t)return v().log({level:"error",from:i.componentDebugName,type:"requestFailed",error:(0,y().Ui)(t),data:{miscDataToConvertToString:{query:r}}}),(0,_.jsx)(m,{children:(0,_.jsx)(w().Z,{title:(0,_.jsx)(o()._H,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!a)return(0,_.jsx)(m,{children:(0,_.jsx)(w().Z,{title:(0,_.jsx)(o()._H,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(a&&0===a.length)return(0,_.jsx)(m,{children:(0,_.jsx)(w().Z,{title:(0,_.jsx)(o()._H,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const g={key:"results",items:a.map((e=>function(e,t,a){return{key:e,action:()=>a(e),render:a=>t(e,a)}}(e,l,d))),render:m};return(0,_.jsx)(j().ZP,{type:j().iW.Vertical,store:u,initialFocus:0,sections:[g]})}let z=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});function A(e){const{items:t,keepInputOnItemConfirm:a,mode:i,onChange:o,onMenuDismiss:l,onMenuOpen:d}=e,{device:c}=(0,n().O7)(),u=(0,s.useRef)(),m=(0,s.useRef)(null),[g,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[x,v]=(0,s.useState)(void 0),[y,b]=(0,s.useState)(void 0);function S(e,t){u.current=requestAnimationFrame((e=>{if(m&&m.current&&(b(m.current.getBoundingClientRect()),t)){const{shouldOpenMenu:e,nextIndexToReplace:a}=t;e&&(p(!0),v(a))}}))}(0,s.useEffect)((()=>(window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S),u.current&&(cancelAnimationFrame(u.current),u.current=void 0)})),[]);const j=t.length;function w(e){C(),p(!1),v(void 0),null==l||l(e)}function M(e){f(e.target.value)}function C(){f("")}function T(){o([])}const k=(0,s.useCallback)((e=>{const a=t.filter((t=>t!==e));o(a)}),[t,o]),I=(0,s.useCallback)((e=>{if("number"==typeof x&&x<t.length){const a=t.slice(0,x).concat(e,t.slice(x+1));o(a)}else if(t.includes(e)&&z.Pill)k(e);else{const a=t.concat(e);o(r().jj(a))}a||C()}),[k,x,t,a,o]);return(0,s.useEffect)((()=>{S()}),[j,i]),c.isMobile?(0,_.jsx)(E,{inputTemporaryValue:h,isMenuOpen:g,onClearInput:C,onClearItems:T,onItemConfirm:I,onMenuClose:w,onMenuInputChange:M,onMenuOpen:function(){p(!0)},onRemove:k,searchTokenFilterProps:e}):(0,_.jsx)(B,{hasItemsSelected:i===z.Pill&&e.hasItemsSelected,inputTemporaryValue:h,isMenuOpen:g,onClearInput:C,onClearItems:T,onItemConfirm:I,onMenuClose:w,onMenuInputChange:M,onMenuOpen:function(e){null==d||d(),S(0,{shouldOpenMenu:!0,nextIndexToReplace:e})},onRemove:k,popupOriginRect:y,ref:m,searchTokenFilterProps:e})}function N(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function R(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:l().yv(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}const B=(0,s.forwardRef)((function(e,t){const{hasItemsSelected:i,inputTemporaryValue:o,isMenuOpen:r,onClearInput:l,onClearItems:u,onItemConfirm:m,onMenuClose:p,onMenuInputChange:h,onMenuOpen:f,onRemove:x,popupOriginRect:v,searchTokenFilterProps:y}=e,{addItemLabel:b,disabled:S,focused:j,icon:w,iconStyles:M,items:C,mode:T,renderFilter:k,title:I}=y,H=(0,n().O7)(),P=S||r,D=(0,s.useCallback)((()=>{f()}),[f]);return(0,_.jsxs)(a(390561).Z,{title:T===z.Section?I:void 0,marginAfter:T===z.Section,style:R(H,T).sectionMenuItem,children:[T!==z.Pill&&(0,_.jsx)(L,{disableFilters:P,items:C,onClick:f,onRemove:x,renderFilter:k}),T===z.Section?(0,_.jsx)(O,{addItemLabel:b,disabled:S,isMenuOpen:r,mode:T,onClick:D,ref:t}):T===z.Button?(0,_.jsx)(V,{disabled:S,focused:j,icon:w,isMenuOpen:r,mode:T,onClick:D,ref:t,title:I}):T===z.Pill?(0,_.jsx)(U,{disabled:S,hasItemsSelected:i,icon:w,iconStyles:M,onClick:D,ref:t,title:I}):void(0,a(696459).t1)(T),(0,_.jsx)(g().ZP,{alignmentToOrigin:d().Alignment.Start,keepFocus:!0,onDismiss:p,open:r,originRect:v,placementToOrigin:d().Placement.Bottom,popupType:c().k.Popup,preventScaleTransition:!0,render:()=>(0,_.jsx)(Z,{searchTokenFilterProps:y,inputTemporaryValue:o,onMenuInputChange:h,onClearInput:l,onClearItems:u,onItemConfirm:m,onMenuClose:p,onRemove:x})})]})}));function L(e){const{disableFilters:t,items:a,onClick:n,onRemove:i,renderFilter:o}=e,r=(0,s.useMemo)((()=>a.map(((e,a)=>(0,_.jsx)("li",{children:o(e,{disabled:t,onClick:()=>n(a),onRemove:()=>i(e)})},`${e}_${a}`)))),[t,a,n,i,o]);return(0,_.jsx)("ul",{style:l().mK,children:r})}const O=(0,s.forwardRef)((function(e,t){const{addItemLabel:s,disabled:o,isMenuOpen:r,mode:l,onClick:d}=e,c=R((0,n().O7)(),l),u=(0,i().yK)(N,[N]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{ref:t,style:c.menuItemWrapper}),(0,_.jsx)(m().Z,{disabled:o||r,focused:!1,icon:(0,a(159732).R)(c.iconSmall),onClick:d,style:{...c.appendListItemButton,...u.appendListItemButton},title:s})]})})),V=(0,s.forwardRef)((function(e,t){const{disabled:a,focused:s,icon:o,isMenuOpen:r,mode:l,onClick:d,title:c}=e,u=R((0,n().O7)(),l),g=(0,i().yK)(N,[N]),p={...u.menuItem,...g.buttonMenuItem};return(0,_.jsx)("div",{ref:t,style:u.menuItemWrapper,children:(0,_.jsx)(m().Z,{disabled:a||r,focused:s,icon:o(u.icon),onClick:d,style:p,title:c})})})),U=(0,s.forwardRef)((function(e,t){const{disabled:s,hasItemsSelected:i,icon:o,iconStyles:r,onClick:l,title:d}=e,c=R((0,n().O7)(),z.Pill);return(0,_.jsx)("div",{ref:t,style:c.menuItemWrapper,children:(0,_.jsx)(a(61738).Z,{on:i,icon:o({...c.icon,...r}),title:(0,_.jsx)("span",{children:d}),onClick:l,wrapStyle:{opacity:s?.4:1}})})}));function q(e){const{disableFilters:t,items:a,mode:s,onClickClear:i,onMenuOpen:o,renderItemForSummary:r,title:d}=e,c=R((0,n().O7)(),s),u={...l().mK,...c.summary},m=a.length-1,g=(0,_.jsx)("ul",{style:u,children:a.map(((e,t)=>(0,_.jsxs)("li",{style:c.summaryItem,children:[r(e),t!==m&&","," "]},e)))});return(0,_.jsx)(f().Z,{disabled:t,label:d,onClick:o,onClickClear:i,title:g})}function E(e){const{inputTemporaryValue:t,isMenuOpen:a,onClearInput:s,onClearItems:i,onItemConfirm:o,onMenuClose:r,onMenuInputChange:l,onMenuOpen:d,onRemove:u,searchTokenFilterProps:p}=e,{mode:h,disabled:f,title:x,items:v,renderItemForSummary:y,icon:b}=p,S=R((0,n().O7)(),h),j=f||a,w=h===z.Section?(0,_.jsx)(q,{disableFilters:j,items:v,mode:h,onClickClear:i,onMenuOpen:d,renderItemForSummary:y,title:x}):(0,_.jsx)(m().Z,{disabled:j,focused:!1,icon:b({...S.icon}),onClick:d,title:x});return(0,_.jsx)(g().ZP,{keepFocus:!0,onDismiss:r,open:a,origin:w,popupType:c().k.SlideUp,render:()=>(0,_.jsx)(Z,{inputTemporaryValue:t,onClearInput:s,onClearItems:i,onItemConfirm:o,onMenuClose:r,onMenuInputChange:l,onRemove:u,searchTokenFilterProps:p})})}function Z(e){const{inputTemporaryValue:t,onClearInput:a,onClearItems:s,onItemConfirm:n,onMenuClose:i,onMenuInputChange:r,onRemove:l,searchTokenFilterProps:d}=e,{renderToken:c,renderFooter:m,allowApplyBatchSelection:g}=d;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(k,{...d,onChange:r,onClear:()=>{a(),s()},onConfirm:n,onDismiss:i,onRemove:l,renderToken:c,value:t}),m&&(0,_.jsxs)(h().Z,{style:{padding:6,justifyContent:"space-between",display:"flex",flexDirection:"row"},topBorder:!0,children:[(0,_.jsx)(u().D,{onClick:s,children:(0,_.jsx)(o()._H,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),g&&(0,_.jsx)(p().Z,{onClick:()=>{i("applyButton")},children:(0,_.jsx)(o()._H,{defaultMessage:"Apply",id:"searchTokenFilter.applyButton"})})]})]})}},122159:(e,t,a)=>{a.d(t,{Z:()=>l});a(667294);var s=()=>a(219727),n=()=>a(707513),i=()=>a(471645),o=()=>a(114755),r=a(785893);const l=function(e){const{disabled:t,label:n,title:i,onClick:o,isToggle:l,isToggleActive:u,onClickClear:m,...g}=e,p=(0,a(846550).Fg)(),h=(0,s().O7)(),f=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(p),x=d(h),v=(0,r.jsx)("span",{style:f.menuItemLabel,children:n});return(0,r.jsx)(a(827973).Z,{focused:!1,...g,inline:l,disabled:t,icon:v,title:i,right:(0,r.jsx)(c,{disabled:!!t,isToggle:!!l,isToggleActive:!!u,onClick:o,onClickClear:m}),onClick:o,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:x.menuItem,desktopIconStyle:x.menuItemLabel})};function d(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?n().JB.UISmall.mobile:n().JB.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function c(e){let{disabled:t,isToggle:a,isToggleActive:n,onClick:l,onClickClear:c=(()=>{})}=e;const u=d((0,s().O7)()).rightWrapper;return a?(0,r.jsx)("div",{style:u,children:(0,r.jsx)(i().Z,{on:!!n,onClick:l})}):(0,r.jsx)(o().Z,{disabled:t,onClick:c})}},390561:(e,t,a)=>{a.d(t,{Z:()=>n});a(667294);var s=a(785893);const n=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:n,marginAfter:i,desktopStyle:o,desktopTitleStyle:r,...l}=e,d=(i||o)&&{...i&&t.marginAfter,...o},c=r?{...t.desktopTitleStyle,...r}:t.desktopTitleStyle;return(0,s.jsx)(a(388284).Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:n,...l})}},35735:(e,t,a)=>{a.d(t,{v:()=>i});a(667294);var s=()=>a(846550),n=a(785893);function i(e){let{left:t,right:a,showElevatedConsoleContainer:i}=e;const o=(0,s().yK)((e=>({grid:{display:"grid",gridTemplateColumns:"250px 1fr",background:i?e.surface.wash:void 0,height:"100%"},leftColumnFixed:{position:"relative",boxSizing:"border-box",maxHeight:"100%",overflow:"auto"},rightColumn:{position:"relative",background:e.surface.page,boxSizing:"border-box",maxHeight:"100%",overflow:"auto",...i?{borderRadius:12,border:"1px solid rgba(0, 0, 0, 0.08)",margin:"8px 8px 8px 0",boxShadow:"0 4px 0 -2px rgba(0, 0, 0, 0.04)",maxHeight:"calc(100% - 16px)"}:{}}})),[i]);return(0,n.jsxs)("div",{style:o.grid,children:[(0,n.jsx)("div",{style:o.leftColumnFixed,children:t}),(0,n.jsx)("div",{style:o.rightColumn,children:a})]})}},352947:(e,t,a)=>{a.d(t,{Bf:()=>r,To:()=>i,gf:()=>d,lR:()=>o,vn:()=>l});a(667294);var s=()=>a(788860),n=a(785893);function i(e){const{memberCount:t}=e;return(0,n.jsx)(s()._H,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}})}function o(e){const{teamCount:t}=e;return(0,n.jsx)(s()._H,{id:"organization.general.teamspaces.count",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:t.toLocaleString()}})}function r(e){const{workspacesCount:t}=e;return(0,n.jsx)(s()._H,{id:"organization.general.workspaces.count",defaultMessage:"{workspacesCount, plural, one {{workspacesCount} workspace} other {{workspacesCount} workspaces}}",values:{workspacesCount:t}})}function l(e){const{guestCount:t}=e;return(0,n.jsx)(s()._H,{defaultMessage:"{numGuests} {numGuests, plural, one {guest} other {guests}}",id:"organizationManageWorkspacesTable.numGuests",values:{numGuests:t}})}function d(e){const{verifiedDomainsCount:t,pendingDomainsCount:a}=e;return(0,n.jsx)(s()._H,{defaultMessage:"{verifiedDomainsCount} verified · {pendingDomainsCount} pending",id:"organizationEmailDomainsTable.emailDomainsSummaryCounts",values:{verifiedDomainsCount:t,pendingDomainsCount:a}})}},246578:(e,t,a)=>{a.d(t,{w8:()=>ge,gt:()=>he,gI:()=>xe});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(332087),r=()=>a(691119),l=()=>a(788860),d=()=>a(513670),c=()=>a(696459),u=()=>a(824462),m=()=>a(308186),g=()=>a(497065),p=()=>a(259314),h=()=>a(443269),f=()=>a(527278),x=()=>a(466970),v=()=>a(661641),y=()=>a(906651),b=()=>a(279431),S=()=>a(390561),j=()=>a(868982),w=()=>a(825820),M=()=>a(616438),C=()=>a(419435),_=()=>a(51277),T=()=>a(350903),k=()=>a(992796),I=()=>a(644178),H=()=>a(286284),P=()=>a(842423),D=()=>a(177194),z=()=>a(831629),A=a(785893);function N(e){let{selectedStatuses:t,setSelectedStatuses:a}=e;return(0,A.jsx)(z().J,{pillTitle:(0,A.jsx)(l()._H,{id:"organizationEmailDomains.table.filters.status.title",defaultMessage:"Status"}),pillIcon:D().W,selectedItems:t,setSelectedItems:a,items:R})}const R=[w().YF.Success,w().YF.Pending,w().YF.Failure].map((e=>({key:e,value:e,title:(0,A.jsx)(b().zq,{status:e}),shortTitle:(0,b().i0)(e),dontShrinkTitle:!0})));var B=()=>a(609223),L=()=>a(846550),O=()=>a(384534),V=()=>a(707513),U=()=>a(102182),q=()=>a(715139),E=()=>a(668001),Z=()=>a(830581),F=()=>a(921981),W=()=>a(656984),K=()=>a(801812),G=()=>a(140303);var Y=()=>a(292089),$=()=>a(512221);function J(e){let{domainVerification:t,onDismiss:a,organizationId:i,associatedAccountCount:o}=e;const r=(0,L().yK)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:480}})),[]),d=(0,Y().o)(),g=(0,n().O7)(),{refreshOrganization:p}=(0,s.useContext)(W().g),[x,y]=(0,s.useState)(!1),[b,S]=(0,s.useState)(!1),j=function(e){const{organizationId:t,domain:a}=e,i=(0,n().O7)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(G().V),[{status:r,value:l}]=(0,K().r5)((async()=>{const e=await u().callApi({eventName:"getOrganizationSpacesForDomain",environment:i,data:{organizationId:t,domain:a}});if("success"===e.type)return o({data:e.data}),e.data;if("failed"===e.type)throw e.error;return(0,c().t1)(e)}),[i,t,a,o]);return{loading:"pending"===r,didError:"rejected"===r,data:l}}({organizationId:i,domain:t.domain}),w=(0,s.useCallback)((async()=>{if(!x||b)return;S(!0);const e=await u().callApi({eventName:"deleteVerifiedDomainsForOrganization",environment:g,data:{organizationId:i,emailDomainsToRemove:[t.domain]}});S(!1),a(),"success"===e.type?(p(),U().oV({label:(0,A.jsx)(v().q,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(l()._H,{id:"organizationEmailDomainsTable.toastMessage.removeDomain.success",defaultMessage:"Successfully removed <b>{domain}</b>",values:{domain:t.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,A.jsx)("b",{children:t})}}})})})):m().UW((0,h().wf)(f().Z.getIntl(),e))}),[g,i,p,a,x,b,t.domain]);return(0,A.jsx)(F().c,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:s}=e;return(0,A.jsx)("div",{style:r.modalContainer,children:(0,A.jsx)(Z().sR,{showDismissButton:!1,sizeRange:s,header:(0,A.jsx)($().xB,{icon:(0,O().L)(r.icon),title:(0,A.jsx)(l()._H,{...Q.title}),byline:(0,c().$K)(j.data)?(0,A.jsx)(l()._H,{id:"orgConsole.emailDomains.removeEmailDomainModal.byline",defaultMessage:"This will disable SAML SSO, revoke management for <b>{userCount, plural, one {# user} other {# users}}</b>, and remove <b>{spaceCount, plural, one {# linked workspace} other {# linked workspaces}}</b>. To restore, re-verify {domain} and manually add each workspace.",values:{userCount:o,spaceCount:j.data.spaceIds.length,domain:t.domain,b:e=>(0,A.jsx)("span",{style:{fontWeight:V().Ue.semibold},children:e})}}):null}),footer:(0,A.jsx)($().mz,{isDarkRed:!0,primaryDisabled:!x||b,primaryText:(0,A.jsx)(l()._H,{...Q.removeButton}),primaryAction:w,secondaryText:(0,A.jsx)(l()._H,{...Q.cancelButton}),secondaryAction:a}),children:j.loading?(0,A.jsx)(E().Z,{style:{...d.longTallShimmer,width:440}}):j.didError?(0,A.jsx)(v().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,A.jsx)(l()._H,{...Q.error})}):(0,A.jsxs)("div",{style:r.confirmation,children:[(0,A.jsx)(q().Z,{checked:x,size:14,checkSize:10,onClick:()=>y(!x)}),(0,A.jsx)(v().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(l()._H,{...Q.confirmation})})]})})})}})}const Q=(0,l().vU)({title:{id:"orgConsole.emailDomains.removeEmailDomainModal.title",defaultMessage:"Remove email domain and workspaces?"},error:{id:"orgConsole.emailDomains.removeEmailDomainModal.error",defaultMessage:"There was an error loading the linked spaces for this domain. Try again later."},removeButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.remove",defaultMessage:"Remove domain and workspaces"},cancelButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.cancel",defaultMessage:"Cancel"},confirmation:{id:"orgConsole.emailDomains.removeEmailDomainModal.confirmation",defaultMessage:"I understand SAML SSO will be disabled and the linked workspaces removed"}});var X=()=>a(570813),ee=(a(670560),()=>a(285473)),te=()=>a(401102),ae=()=>a(771704),se=()=>a(289052),ne=()=>a(390965);const ie=(0,l().vU)({domain:{id:"settingsConsole.organizationEmailDomains.table.header.domain",defaultMessage:"Email domain"},status:{id:"organizationEmailDomains.table.header.status",defaultMessage:"Status"}}),oe={id:"domain",headerTitle:(0,A.jsx)(l()._H,{...ie.domain}),renderCell:e=>e.type===ne().a.Loading?(0,A.jsx)(te().HD,{}):(0,A.jsx)(te().iP,{useThinTitle:!0,title:e.domain,rightContent:(0,A.jsx)(me,{onVerifyDomain:"success"!==e.status?e.onShowDetails:void 0,onRemove:e.onRemove}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:"100%"}}),widthData:{widthPercent:26,minWidth:275,maxWidth:275},sortable:!1},re={id:"spaces",headerTitle:(0,A.jsx)(l()._H,{id:"organizationEmailDomains.table.header.spaces",defaultMessage:"Organization workspaces"}),renderCell:e=>e.type===ne().a.Loading?(0,A.jsx)(te().HD,{}):(0,A.jsx)(a(970198).ms,{spaceStores:e.spaceStores,showTooltip:!0,isLoading:!1}),widthData:{widthPercent:25,minWidth:100},sortable:!1},le={id:"associatedAccounts",headerTitle:(0,A.jsx)(l()._H,{id:"organizationEmailDomains.table.header.associatedAccounts",defaultMessage:"Associated user accounts"}),renderCell:e=>e.type===ne().a.Loading||e.isAssociatedAccountCountLoading?(0,A.jsx)(te().HD,{}):"success"===e.status?(0,A.jsx)(v().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(l()._H,{id:"organizationEmailDomains.table.associatedAccountsCount",defaultMessage:"{count, plural, one {# account} other {# accounts}}",values:{count:e.associatedAccountCount??0}})}):void 0,widthData:{widthPercent:25,minWidth:100},sortable:!1},de={id:"status",headerTitle:(0,A.jsx)(l()._H,{...ie.status}),renderCell:e=>e.type===ne().a.Loading?(0,A.jsx)(te().HD,{}):(0,A.jsx)(b().zq,{status:e.status}),widthData:{widthPercent:25,minWidth:100},sortable:!1},ce=[oe,de,re,le];function ue(e){let{domains:t,loading:a,setSelectedDomain:s,setOpenedModal:i,managedUsersCountState:o,refetchPendingDomains:r}=e;const d=(0,ae()._)(),g=(0,n().O7)(),p=(0,l().YB)(),f=(0,se().Z)(),x=(0,L().yK)((e=>(0,ee().bE)({columnRenderInfo:ce,theme:e,containerMarginTop:0})),[]);const v=t.map((e=>{var t,a;let{domain:n,status:l,data:f}=e;return{type:ne().a.OrganizationEmailDomain,id:"verified"===f.type?n:f.id,isClickable:!1,domain:n,status:l,spaceStores:d,managedUsersCountState:o,associatedAccountCount:null!==(t=o.count)&&void 0!==t&&t.countsPerDomain?null===(a=o.count)||void 0===a?void 0:a.countsPerDomain[n]:void 0,isAssociatedAccountCountLoading:o.loading,onShowDetails:()=>function(e){s(e),i(ge.VerifyEmailDomain)}(f),onRemove:()=>async function(e){const{type:t}=e;if("invalid"===t||"unverified"===t){const t=await u().callApi({eventName:"deleteDomainVerificationCode",environment:g,data:{id:e.id}});return"failed"===t.type?m().UW((0,h().wf)(p,t)):void("success"===t.type&&await r())}"verified"===t?(s(e),i(ge.RemoveEmailDomain)):(0,c().t1)(t)}(f)}})),y=a?0===v.length?(0,ne().s)(5):[...v,...(0,ne().s)(3)]:v,S=ce.map((e=>({...e,headerStyle:f.tableHeader,rowStyle:f.tableRow})));return(0,A.jsx)(ee().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:S,rows:y,styles:x,renderNoRowsComponent:()=>(0,A.jsx)(b().Cq,{}),extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}})}function me(e){let{onVerifyDomain:t,onRemove:s}=e;const n=(0,b().x2)(),i=[];return t&&i.push({key:"details",icon:(0,a(409873).D)(n.menuIcon),title:(0,A.jsx)(l()._H,{defaultMessage:"Verify domain",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.details"}),caption:(0,A.jsx)(l()._H,{defaultMessage:"Confirm your DNS record was successfully updated.",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.detailsCaption"}),action:()=>t()}),s&&i.push({key:"remove",icon:(0,a(95886).y)(n.menuIcon),title:(0,A.jsx)(l()._H,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.remove",defaultMessage:"Remove domain"}),caption:(0,A.jsx)(l()._H,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.removeCaption",defaultMessage:"Delete domain verification and remove linked organization workspaces."}),action:()=>s()}),0===i.length?null:(0,A.jsx)(te().Wu,{items:i})}let ge=function(e){return e.AddEmailDomain="add-email-domain",e.VerifyEmailDomain="verify-email-domain",e.RemoveEmailDomain="remove-email-domain",e}({});const pe=[{id:oe.id,name:f().Z.formatMessage(ie.domain),type:"title"},{id:de.id,name:f().Z.formatMessage(ie.status),type:"status"}];function he(e){let{organizationStore:t}=e;const a=(0,n().O7)(),u=(0,x().E)("organization_console_ga_enabled"),m=(0,_().V)(),[h,f]=(0,s.useState)([]),[w,D]=(0,s.useState)(),[z,R]=(0,s.useState)(),[B,L]=(0,s.useState)(!1),[O,V]=(0,s.useState)(),U=O??z??[],q=(0,C().$)({organizationId:t.id,includeCountsPerDomain:!0}),E=(0,i().VK)((()=>t.getEmailDomains().map(b().f4).filter((e=>ve(e,w,h)))),[t,h,w]),{domainVerifications:Z,refetchDomainVerifications:F,loading:W}=(0,M().l)({organizationId:t.id}),K=function(e){let{domains:t,appliedSorts:a}=e;if(!a)return t;const s=a.map((e=>{let{propertyId:t}=e;return t===de.id?e=>ye[e.status]:e=>{var t;return null===(t=e.domain)||void 0===t?void 0:t.toLowerCase()}})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,c().t1)(t)}));return d().Xo(t,s,n)}({domains:[...E,...(0,i().VK)((()=>Z?Z.map((e=>xe(e))).filter((e=>ve(e,w,h))):[]),[Z,h,w])],appliedSorts:z}),[G,Y]=(0,s.useState)(),[$,J]=(0,s.useState)();if(!u)return(0,A.jsx)(l()._H,{...be.gaNotEnabledError});const Q=(0,A.jsx)(l()._H,{...be.title});return(0,A.jsx)(T().J,{breadcrumbs:[{message:(0,A.jsx)(l()._H,{...be.goBack}),onClick:()=>{g().c4({environment:a,url:(0,o().a5)({organizationId:t.id,tabRoute:r().CO})})}},{message:Q}],children:(0,A.jsxs)(k().B,{children:[(0,A.jsx)(I().f,{title:Q,children:(0,A.jsx)(v().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,A.jsx)(l()._H,{...be.description})})}),(0,A.jsxs)("div",{style:m.tableHeader,children:[(0,A.jsxs)("div",{style:m.leftContent,children:[(0,A.jsx)(S().Z,{children:(0,A.jsx)(P().i,{sortProperties:pe,isMenuOpen:B,setIsMenuOpen:L,onApply:e=>{L(!1),R(e),V(void 0)},currentSorts:U})}),U.length>0?(0,A.jsx)(p().Xo,{}):null,(0,A.jsx)(N,{selectedStatuses:h,setSelectedStatuses:f})]}),(0,A.jsxs)("div",{style:m.rightContent,children:[(0,A.jsx)(H().L,{appliedSorts:z,openSortPillMenu:e=>{e&&V([{propertyId:e,direction:"ascending"}]),L(!0)},sortProperties:pe}),(0,A.jsx)(j().ON,{mode:j().p3.AnimatedSearchButton,query:w,setQueryFilter:D}),(0,A.jsx)(y().Z,{onClick:()=>Y(ge.AddEmailDomain),children:(0,A.jsx)(l()._H,{...be.addDomainButton})})]})]}),(0,A.jsx)(ue,{domains:K,loading:W,setOpenedModal:Y,setSelectedDomain:J,managedUsersCountState:q,refetchPendingDomains:F}),(0,A.jsx)(fe,{openedModal:G,setOpenedModal:Y,selectedDomain:$,setSelectedDomain:J,organizationId:t.id,refetchPendingDomains:F,managedUsersCountState:q})]})})}function fe(e){let{openedModal:t,setOpenedModal:a,refetchPendingDomains:i,selectedDomain:o,setSelectedDomain:r,organizationId:d,managedUsersCountState:g}=e;const p=(0,n().O7)(),f=(0,l().YB)(),x=()=>a(void 0),v=(0,s.useCallback)((async e=>{const t=await u().callApi({eventName:"deleteDomainVerificationCode",environment:p,data:{id:e.id}});if("failed"===t.type)return m().UW((0,h().wf)(f,t));const a=await u().callApi({eventName:"createDomainVerificationCode",environment:p,data:{type:"org_saml_config",domain:e.domain,organizationId:d}});if("failed"===a.type)return m().UW((0,h().wf)(f,a));i(),r(xe(a.data.domainVerification).data)}),[p,f,d,i,r]);return t?t===ge.RemoveEmailDomain?o&&"verified"===o.type?(0,A.jsx)(J,{organizationId:d,onDismiss:x,domainVerification:o,associatedAccountCount:null!==(y=g.count)&&void 0!==y&&y.countsPerDomain?g.count.countsPerDomain[o.domain]:void 0}):null:t===ge.VerifyEmailDomain?o&&"verified"!==o.type?(0,A.jsx)(X().c,{onDismiss:x,refetchPendingDomains:i,domainVerification:o,regenerateCode:v}):null:t===ge.AddEmailDomain?(0,A.jsx)(B().vI,{organizationId:d,onDismiss:x,onSubmit:e=>{i(),r(e),a(ge.VerifyEmailDomain)}}):void(0,c().t1)(t):null;var y}function xe(e){return(0,b().UV)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at})}function ve(e,t,a){let s=!t||e.domain.toLowerCase().includes(t.toLowerCase());return a.length&&(s=s&&a.includes(e.status)),s}const ye={[w().YF.Success]:0,[w().YF.Pending]:1,[w().YF.Failure]:2};const be=(0,l().vU)({title:{id:"organizationEmailDomainsSubTab.title",defaultMessage:"Manage email domains"},description:{id:"organizationEmailDomainsSubTab.description",defaultMessage:"Verify email domains to manage matching user accounts and associated organization workspaces."},addDomainButton:{id:"organizationEmailDomainsSubTab.button.addEmailDomain",defaultMessage:"Add email domain"},gaNotEnabledError:{id:"organizationEmailDomainsSubTab.notEnabled",defaultMessage:"This feature is not available"},goBack:{id:"organizationEmailDomainsSubTab.breadcrumb.goBack",defaultMessage:"General"}})},609223:(e,t,a)=>{a.d(t,{z9:()=>j,vI:()=>S,Ok:()=>w,I_:()=>C});var s=a(667294),n=()=>a(219727),i=()=>a(846550),o=()=>a(578062);a(267602),a(916054),a(241792);var r=()=>a(81979),l=()=>a(290106),d=()=>a(788860),c=()=>a(824462),u=()=>a(443269),m=()=>a(527278),g=()=>a(78078),p=()=>a(291198),h=()=>a(830581),f=()=>a(647410),x=()=>a(661641),v=()=>a(921981),y=()=>a(512221),b=a(785893);function S(e){const{organizationId:t,onDismiss:a,onSubmit:i}=e,r=C(),l=(0,n().O7)(),[g,p]=(0,s.useState)(),[f,x]=(0,s.useState)(),S=async()=>{if(!g)return x(M.invalidDomainError);if(!function(e){const{domain:t,allowSubDomain:a}=e,s=t.split(".").map((e=>e.replace(/\s/g,"").toLowerCase())),n=a?127:2;return s.length>=2&&s.length<=n&&s.every((e=>e.length>0&&e.length<=63))?s.join("."):void 0}({domain:g,allowSubDomain:!0}))return x(M.invalidDomainError);const e=await c().callApi({eventName:"createDomainVerificationCode",environment:l,data:{type:"org_saml_config",domain:g,organizationId:t}});"success"===e.type?i((0,o().Hs)(e.data.domainVerification)):x((0,u().wf)(m().Z.getIntl(),e))};return(0,b.jsx)(v().c,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,b.jsx)(h().sR,{showDismissButton:!1,sizeRange:t,header:(0,b.jsx)(w,{}),footer:(0,b.jsx)(y().mz,{primaryText:(0,b.jsx)(d()._H,{...M.addButton}),primaryAction:S,secondaryText:(0,b.jsx)(d()._H,{...M.cancelButton}),secondaryAction:a}),children:(0,b.jsx)("div",{style:r.content,children:(0,b.jsx)(j,{pendingDomain:g,setPendingDomain:p,error:f})})})}})}function j(e){let{pendingDomain:t,setPendingDomain:a,error:s}=e;const n=C();return(0,b.jsxs)(g().sg,{gap:8,children:[(0,b.jsx)(x().q,{colorName:"secondary",styleName:"Body-12px/Medium",children:(0,b.jsx)(d()._H,{...M.inputLabel})}),(0,b.jsx)(p().Z,{value:t,placeholder:m().Z.formatMessage(M.emailDomainPlaceholder),onChange:e=>a(e.target.value),left:(0,l().Y)(n.inputIcon),errorOutline:Boolean(s),inputElementAttributes:{required:!0,"aria-describedby":"domain-verification-validation-errors"}}),s?(0,b.jsx)("div",{style:n.error,children:(0,b.jsx)(f().Z,{id:"domain-verification-validation-errors",error:s})}):null]})}function w(){const e=C();return(0,b.jsx)(y().xB,{icon:(0,r().o)(e.headerIcon),title:(0,b.jsx)(d()._H,{...M.title}),byline:(0,b.jsx)(d()._H,{...M.byline})})}const M=(0,d().vU)({title:{id:"orgConsole.emailDomains.addEmailDomainModal.title",defaultMessage:"Add email domain"},byline:{id:"orgConsole.emailDomains.addEmailDomainModal.byline",defaultMessage:"Verify email domain to manage associated users and workspaces."},addButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.add",defaultMessage:"Get verification code"},cancelButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.cancel",defaultMessage:"Cancel"},inputLabel:{id:"orgConsole.emailDomains.addEmailDomainModal.domainInputLabel",defaultMessage:"Enter email domain"},invalidDomainError:{id:"orgConsole.emailDomains.addEmailDomainModal.invalidDomainError",defaultMessage:"Invalid domain, please check its format and spelling"},emailDomainPlaceholder:{id:"orgConsole.emailDomains.addEmailDomainModal.emailDomainPlaceholder",defaultMessage:"notion.so"}});function C(){return(0,i().yK)((e=>({headerIcon:{height:32,width:32,fill:e.icon.secondary},content:{width:480},inputIcon:{height:17,width:17,fill:e.icon.secondary},error:{height:15}})),[])}},570813:(e,t,a)=>{a.d(t,{c:()=>S,y:()=>j});var s=a(667294),n=()=>a(219727),i=()=>a(846550),o=()=>a(788860),r=()=>a(824462),l=()=>a(308186),d=()=>a(102182),c=()=>a(443269),u=()=>a(78078),m=()=>a(830581),g=()=>a(661641),p=()=>a(921981),h=()=>a(879078),f=()=>a(656984),x=()=>a(916940),v=()=>a(512221),y=()=>a(609223),b=a(785893);function S(e){let{refetchPendingDomains:t,onDismiss:a,domainVerification:i,regenerateCode:u}=e;const h=(0,n().O7)(),x=(0,o().YB)(),[S,M]=(0,s.useState)(!1),C=(0,y().I_)(),{refreshOrganization:_}=(0,s.useContext)(f().g),T=(0,s.useCallback)((async()=>{if(S)return;M(!0);const e=await r().callApi({eventName:"verifyDomain",environment:h,data:{verificationId:i.id}});"success"===e.type?(M(!1),t(),_(),d().oV({label:(0,b.jsx)(g().q,{styleName:"UIRegular-14px/Regular",children:(0,b.jsx)(o()._H,{id:"organizationEmailDomainsTable.toastMessage.verifyDomain.success",defaultMessage:"Successfully verified <b>{domain}</b>",values:{domain:i.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,b.jsx)("b",{children:t})}}})})}),a()):(l().UW((0,c().wf)(x,e)),M(!1))}),[h,x,S,M,t,_,i.id,i.domain,a]);return(0,b.jsx)(p().c,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,b.jsx)(m().sR,{showDismissButton:!1,sizeRange:t,header:(0,b.jsx)(y().Ok,{}),footer:(0,b.jsx)(v().mz,{primaryText:(0,b.jsx)(o()._H,{...w.verifyButton}),primaryAction:T,primaryDisabled:"invalid"===i.type,secondaryText:(0,b.jsx)(o()._H,{...w.cancelButton}),secondaryAction:a,isLoading:S}),children:(0,b.jsx)("div",{style:C.content,children:(0,b.jsx)(j,{domainVerification:i,regenerateCode:u})})})}})}function j(e){let{domainVerification:t,regenerateCode:a}=e;const s=(0,i().yK)((e=>({instructionsContainer:{padding:16,borderRadius:x().E.medium,background:e.cardBackground,display:"flex",flexDirection:"column",gap:16},list:{color:e.text.secondary,fontSize:12,lineHeight:"16px"}})),[]);return(0,b.jsxs)(u().sg,{gap:24,children:[(0,b.jsx)(h().d1,{domainVerification:t,regenerateCode:a}),(0,b.jsxs)("div",{style:s.instructionsContainer,children:[(0,b.jsx)(g().q,{styleName:"Body-12px/Medium",children:(0,b.jsx)(o()._H,{...w.instructionsHeader})}),(0,b.jsx)(h().by,{listStyles:s.list})]})]})}const w=(0,o().vU)({verifyButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.verify",defaultMessage:"Verify domain"},cancelButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.cancel",defaultMessage:"Cancel"},inputLabel:{id:"orgConsole.emailDomains.verifyEmailDomainModal.verificationCodeInputLabel",defaultMessage:"Your verification code"},instructionsHeader:{id:"orgConsole.emailDomains.verifyEmailDomainModal.instuctionsHeader",defaultMessage:"Instructions to verify your domain"}})},730971:(e,t,a)=>{a.d(t,{T:()=>r});a(267602),a(241792),a(258429);var s=a(667294),n=()=>a(846550),i=()=>a(666414),o=a(785893);function r(e){let{children:t}=e;const a=(0,n().yK)((e=>({divider:{color:e.stroke.secondary},container:{display:"flex",flexDirection:"column",gap:16,width:"100%"}})),[]),r=s.Children.toArray(t);return(0,o.jsx)("div",{style:a.container,children:r.map(((e,t)=>(0,o.jsxs)(s.Fragment,{children:[e,t<r.length-1&&(0,o.jsx)(i().Z,{dividerColor:a.divider.color,size:1})]},t)))})}},386973:(e,t,a)=>{a.d(t,{b:()=>y,x:()=>v});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(142735),i=()=>a(619186),o=()=>a(933868),r=()=>a(788860),l=()=>a(668001),d=()=>a(661641),c=()=>a(943620),u=()=>a(868982),m=()=>a(292089),g=()=>a(829028),p=()=>a(354466),h=()=>a(512221),f=()=>a(540491),x=a(785893);function v(e){let{spaceStores:t,selectedSpaceIds:a,onSelectHeader:o,onSelect:l,disabledRowMetadata:m}=e;const p=(0,n().VK)((()=>t.map((e=>e.id))),[t]),[v,b]=(0,s.useState)(""),{teamStores:S}=(0,g().x)(p),j=(0,n().VK)((()=>t.map((e=>{const t=S[e.id]??[],a=m&&m.disabledSpaceIds.includes(e.id);return{id:e.id,icon:(0,x.jsx)(c().Z,{size:f().M,emojiSize:f().M,disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),isLarge:!0,isRaw:!1}),name:e.getName(),byline:a?(0,x.jsx)(d().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:m.disabledByline}):(0,x.jsx)(y,{spaceId:e.id,teamCount:t.length})}}))),[t,S,m]),w=(0,i().ZP)(v,j,(e=>e.name??""));return(0,x.jsx)(h().AW,{items:w,selectedIds:a,disabledIds:(null==m?void 0:m.disabledSpaceIds)??[],onSelectHeader:o,onSelect:l,titleText:(0,x.jsx)(r()._H,{id:"orgConsole.people.modal.workspacesSelect.selectTitle",defaultMessage:"Select workspaces"}),headerText:(0,x.jsx)(r()._H,{id:"orgConsole.people.modal.workspacesSelect.headerRowTitle",defaultMessage:"Workspaces{selectedCount, plural, =0 {} one { ({selectedCount})} other { ({selectedCount})}}",values:{selectedCount:a.length}}),headerAction:(0,x.jsx)(u().ON,{mode:u().p3.AnimatedSearchButton,query:v,setQueryFilter:b})})}function y(e){const{spaceId:t,teamCount:a,loading:s,styles:n}=e,{visibleUsers:i,loading:c}=(0,p().W)(t),u=i?i.filter((e=>(0,o().Jy)(e.role))).length:0,g=s||c,h=(0,m().o)();return g?(0,x.jsx)(l().Z,{style:h.shortShimmer}):(0,x.jsx)(d().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:n,children:(0,x.jsx)(r()._H,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowByline",defaultMessage:"{teamCount, plural, one {# teamspace} other {# teamspaces}} · {memberCount, plural, one {# member} other {# members}}",values:{teamCount:a,memberCount:u}})})}},440862:(e,t,a)=>{a.d(t,{Oi:()=>d,U4:()=>g,iX:()=>u,jr:()=>m,vE:()=>c});a(667294);var s=()=>a(846550),n=()=>a(788860),i=()=>a(568017),o=()=>a(696459),r=()=>a(521632),l=a(785893);function d(e){let{content:t,isBlue:a}=e;const n=(0,s().yK)((e=>({badge:{marginLeft:0,marginRight:6,padding:"2px 6px",fontSize:13,lineHeight:"18px",...a&&{background:"light"===e.mode?i().O9.diffBackground:"rgba(35, 131, 226, 0.2)",color:e.blueColor}}})),[a]);return(0,l.jsx)(r().Z,{content:t,style:n.badge})}function c(){return(0,l.jsx)(d,{content:(0,l.jsx)(n()._H,{id:"organizationConsole.singleUserView.suspendedBadge",defaultMessage:"Suspended"})})}function u(e){let{highestRole:t}=e;const a=function(){switch(t){case"owner":return(0,l.jsx)(n()._H,{id:"organizationConsole.organizationRole.ownerRole",defaultMessage:"Org owner"});case"member":return(0,l.jsx)(n()._H,{id:"organizationConsole.organizationRole.memberRole",defaultMessage:"Member"});case"guest":return(0,l.jsx)(n()._H,{id:"organizationConsole.organizationRole.guestRole",defaultMessage:"Guest"});case"none":return;default:(0,o().t1)(t)}}();return a?(0,l.jsx)(d,{isBlue:!0,content:a}):null}function m(e){let{emailDomain:t}=e;return t?(0,l.jsx)(d,{content:(0,l.jsx)(n()._H,{id:"organizationConsole.singleUserView.managedByDomainBadge",defaultMessage:"Managed by {domain}",values:{domain:t}})}):null}function g(){return(0,l.jsx)(d,{content:(0,l.jsx)(n()._H,{id:"organizationConsole.singleUserView.legalHoldBadge",defaultMessage:"On legal hold"})})}},461438:(e,t,a)=>{a.d(t,{m:()=>l});a(667294);var s=()=>a(565766),n=()=>a(788860),i=()=>a(308186),o=()=>a(67961),r=a(785893);async function l(e){return i().gt({message:(0,r.jsx)(o().Z,{style:i().fq.title,children:(0,r.jsx)(n()._H,{id:"organizationSecuritySettings.discardChanges.confirmation.message",defaultMessage:"Discard unsaved changes?"})}),description:(0,r.jsx)(o().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,r.jsx)(n()._H,{id:"organizationSecuritySettings.discardChanges.confirmation.description",defaultMessage:"Once discarded, changes cannot be recovered."})}),acceptLabel:(0,r.jsx)(n()._H,{id:"organizationSecuritySettings.discardChanges.confirmation.acceptLabel",defaultMessage:"Discard"}),cancelLabel:(0,r.jsx)(n()._H,{id:"organizationSecuritySettings.discardChanges.confirmation.cancelLabel",defaultMessage:"Cancel"}),icon:(0,s().H)({width:24,height:24,fill:e.text.uiRedPrimary})})}},72092:(e,t,a)=>{a.d(t,{Dt:()=>v,Oz:()=>x,eM:()=>b,rS:()=>f});a(241792);var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(565630),r=()=>a(788860),l=()=>a(998901),d=()=>a(520849),c=()=>a(668001),u=()=>a(661641),m=()=>a(842574),g=()=>a(654133),p=()=>a(292089),h=a(785893);const f=4,x=24,v=18,y=10;function b(e){const{avatars:t,totalCount:a,avatarLimit:x,renderOverflowTooltip:v,isLightBackground:b,avatarStyles:S,isLoading:j}=e,w=(0,p().o)(),M=(0,i().yK)((e=>({bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row",isolation:"isolate",alignItems:"center"},hiddenAvatarCount:{display:"flex",marginLeft:12,alignItems:"center"},scroller:{maxWidth:250,maxHeight:300,padding:0}})),[]),{pinTooltip:C,unpinTooltip:_,setImmediateState:T,isHovering:k}=function(){const[e,t]=(0,s.useState)(!1),a=(0,o().Kt)(e,400,Object.is),[n,i]=(0,s.useState)(void 0),r=n||a,l=(0,s.useCallback)((()=>i(r)),[r]),d=(0,s.useCallback)((()=>{i(void 0)}),[]);return{pinTooltip:l,unpinTooltip:d,setImmediateState:t,isHovering:!1===e&&!0===r}}(),I=(0,n().VK)((()=>{let e=t;t.length>(x||f)&&(e=t.slice(0,x||f));for(const t of e)if(!t.renderAvatar)return[];return e}),[x,t]),H=(0,s.useCallback)((e=>({marginRight:e+1===I.length?0:-y,...S})),[S,I.length]);if(j)return(0,h.jsxs)("div",{style:M.bottom,children:[(0,h.jsx)("div",{style:M.userAvatarContainer,children:new Array(f).fill(null).map(((e,t)=>(0,h.jsx)(c().Z,{style:{...w.avatarShimmer,...H(t)}},t)))}),(0,h.jsx)("div",{style:M.hiddenAvatarCount,children:(0,h.jsx)(c().Z,{style:w.shortShimmer})})]});const P=x||f,D=(a||t.length)-P;return(0,h.jsxs)("div",{style:M.bottom,children:[(0,h.jsx)("div",{style:M.userAvatarContainer,children:I.map(((e,t)=>(0,h.jsx)(g().Z,{isLightBackground:b,disableTooltip:!e.renderTooltip,renderTooltip:e.renderTooltip??(()=>{}),placement:l().Placement.Bottom,alignment:l().Alignment.Start,render:a=>(0,h.jsx)("div",{style:{zIndex:P-t,...H(t)},...a,children:e.renderAvatar()})},`avatar-${t}`)))}),D>0&&(0,h.jsx)(g().Z,{disableTooltip:!v,placement:l().Placement.Bottom,alignment:l().Alignment.Start,style:{paddingRight:0},forceVisibleState:k||void 0,delayThreshold:0,renderTooltip:e=>v?(0,h.jsx)(m().T,{...e,onMouseEnter:C,onMouseLeave:_,type:d().Z.Y,style:M.scroller,children:v(e)}):void 0,allowHover:!0,render:e=>(0,h.jsx)("div",{style:M.hiddenAvatarCount,...e,onMouseEnter:t=>{var a;T(!0),null===(a=e.onMouseEnter)||void 0===a||a.call(e,t)},onMouseLeave:t=>{var a;T(!1),null===(a=e.onMouseLeave)||void 0===a||a.call(e,t)},children:(0,h.jsx)(u().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,h.jsx)(r()._H,{defaultMessage:"+{numHiddenAvatars}",id:"settingsConsole.general.numHiddenAvatars",values:{numHiddenAvatars:D.toLocaleString()}})})}),isLightBackground:b})]})}},696489:(e,t,a)=>{a.d(t,{X:()=>r});a(667294);var s=()=>a(846550),n=()=>a(707513),i=()=>a(765513),o=a(785893);function r(e){let{href:t,external:a,onClick:r,children:l}=e;const d=(0,s().yK)((e=>({link:{color:e.icon.uiBluePrimary,fontWeight:n().Ue.medium}})),[]);return(0,o.jsx)(i().Z,{disableUnderline:!0,href:t,external:a,onClick:r,color:d.link.color,hoverColor:"blue",style:d.link,children:l})}},350903:(e,t,a)=>{a.d(t,{J:()=>l});a(241792);var s=a(667294),n=()=>a(846550),i=()=>a(265640),o=()=>a(661641),r=a(785893);function l(e){let{breadcrumbs:t,headerRight:a,children:l}=e;const d=(0,n().yK)((e=>({container:{margin:"0 auto"},top:{padding:"14px 16px",border:0,borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:e.contentBackground,zIndex:10},breadcrumb:{display:"flex",justifyContent:"flex-start",width:"fit-content",alignItems:"center",gap:8},content:{padding:"14px 16px"},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(90deg)"}})),[]);return(0,r.jsxs)("div",{style:d.container,children:[(0,r.jsxs)("div",{style:d.top,children:[(0,r.jsx)("div",{style:d.breadcrumb,children:t.map(((e,t)=>{let a;return 0!==t&&(a=(0,r.jsx)(o().q,{styleName:"Body-14px/Regular",colorName:"quaternary",as:"span",children:"/"})),(0,r.jsxs)(s.Fragment,{children:[a,(0,r.jsx)(i().D,{onClick:e.onClick,isGray:Boolean(e.onClick),disabled:!e.onClick,children:e.message})]},`breadcrumb-${t}`)}))}),a]}),(0,r.jsx)("div",{style:d.content,children:l})]})}},992796:(e,t,a)=>{a.d(t,{B:()=>i});a(667294);var s=()=>a(846550),n=a(785893);function i(e){let{children:t}=e;const a=(0,s().yK)((e=>({container:{margin:"24px 32px 24px",padding:"0 16px",boxSizing:"border-box"}})),[]);return(0,n.jsx)("div",{style:a.container,children:t})}},970198:(e,t,a)=>{a.d(t,{sv:()=>U,sF:()=>V,M2:()=>O,ms:()=>L});a(267602),a(470928),a(241792);var s=a(667294),n=()=>a(255933),i=()=>a(656984),o=()=>a(771704),r=()=>a(142735),l=()=>a(846550),d=()=>a(998411),c=()=>a(890085),u=()=>a(527278),m=()=>a(943620),g=()=>a(72092),p=()=>a(696459),h=()=>a(78078),f=()=>a(668001),x=()=>a(661641),v=()=>a(401102),y=()=>a(292089),b=()=>a(451189),S=()=>a(829028),j=()=>a(352947),w=()=>a(440862),M=()=>a(386973),C=a(785893);const _=24,T=24;function k(e){switch(e.type){case"workspace":return(0,C.jsx)(P,{spaceStore:e.store});case"team":return(0,C.jsx)(H,{teamStore:e.store});case"external_workspace":return(0,C.jsx)(D,{name:e.name,icon:e.icon});case"block":return(0,C.jsx)(z,{blockStore:e.store});default:(0,p().t1)(e)}}function I(e){let{iconCellInfoArray:t}=e;const a=(0,l().yK)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,C.jsx)("div",{style:a.container,children:t.map((e=>k(e)))})}function H(e){var t;const{teamStore:a}=e,s=A(),n=(0,y().o)(),{name:i,icon:o}=(0,r().VK)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),l=(0,r().VK)((()=>a.getSpaceId()??""),[a]),d=(0,r().VK)((()=>[l]),[l]),{teamAggregateDataForSpace:c,loading:u}=(0,b().f)(d),g=(null==c||null===(t=c[l])||void 0===t||null===(t=t[a.id])||void 0===t?void 0:t.memberCount)??0;return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(v().iP,{title:(0,C.jsx)("span",{style:s.primaryOnDarkBackground,children:i}),icon:(0,C.jsx)(m().Z,{size:_,emojiSize:T,disabled:!0,icon:o,isEmptyPage:!1,title:i,isLarge:!0,isRaw:!1}),iconSize:_,byline:u?(0,C.jsx)(f().Z,{style:n.shortShimmer}):(0,C.jsx)(x().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:s.secondaryOnDarkBackground,children:(0,C.jsx)(j().To,{memberCount:g})})})})}function P(e){var t;const{spaceStore:a}=e,s=A(),{name:n,icon:i}=(0,r().VK)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),o=(0,r().VK)((()=>[a.id]),[a]),{teamStores:l,loading:d}=(0,S().x)(o);return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(v().iP,{title:(0,C.jsx)("span",{style:s.primaryOnDarkBackground,children:n}),icon:(0,C.jsx)(m().Z,{size:_,emojiSize:T,disabled:!0,icon:i,isEmptyPage:!1,title:n,isLarge:!0,isRaw:!1}),iconSize:_,byline:(0,C.jsx)(M().b,{spaceId:a.id,teamCount:(null===(t=l[a.id])||void 0===t?void 0:t.length)??0,loading:d,styles:s.secondaryOnDarkBackground})})})}function D(e){const{name:t,icon:a}=e,s=A();return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(v().iP,{title:(0,C.jsxs)(h().X2,{gap:8,children:[t,(0,C.jsx)(w().Oi,{content:"External"})]}),icon:(0,C.jsx)(m().Z,{size:_,emojiSize:T,disabled:!0,icon:a,isEmptyPage:!1,title:t,isLarge:!0,isRaw:!1}),iconSize:_})})}function z(e){const{blockStore:t}=e,a=(0,r().VK)((()=>{const e=null==t?void 0:t.getModel();if(e&&t)return e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),{pageTitle:s,placeholderTitle:n}=(0,r().VK)((()=>{const e=null==t?void 0:t.getModel();return e&&t?{pageTitle:e.getRenderTitle({getRecordModel:t.getRecordModel,userTimeZone:(0,d().r)(),intl:u().Z.getIntl()}),placeholderTitle:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,d().r)(),intl:u().Z.getIntl()})}:{}}),[t]),i=A();return(0,C.jsx)("div",{style:i.container,children:(0,C.jsx)(v().iP,{title:s||n,icon:(0,C.jsx)(m().Z,{icon:a,size:T,isEmptyPage:!1,disabled:!0}),iconSize:T})})}function A(){return(0,l().yK)((e=>({container:{width:250},primaryOnDarkBackground:{color:e.white},secondaryOnDarkBackground:{color:e.white,opacity:.8}})),[])}const N=2;function R(e){const{iconCellInfoArray:t,totalCount:a,showTooltip:s,isLoading:n}=e,i=(0,r().VK)((()=>t.sort(((e,t)=>{if("block"===e.type||"block"===t.type)return 0;const a="external_workspace"===e.type?e.name:e.store.getName(),s="external_workspace"===t.type?t.name:t.store.getName();return a||s?a&&!s?-1:!a&&s?1:a.localeCompare(s):0}))),[t]),o=(0,r().VK)((()=>i.map((e=>({renderAvatar:()=>(0,C.jsx)(B,{iconCellInfo:e}),renderTooltip:s?()=>k(e):void 0})))),[i,s]);return(0,C.jsx)(g().eM,{avatars:o,totalCount:a,renderOverflowTooltip:s?()=>(0,C.jsx)(I,{iconCellInfoArray:i}):void 0,isLoading:n})}function B(e){const{iconCellInfo:t}=e,{name:a,icon:s}=(0,r().VK)((()=>{if("block"===t.type){const e=t.store.getModel();return e?{name:e.getRenderTitle({getRecordModel:t.store.getRecordModel,userTimeZone:(0,d().r)(),intl:u().Z.getIntl()}),icon:e.getRenderIcon({getRecordModel:t.store.getRecordModel})}:{name:"",icon:void 0}}return"external_workspace"===t.type?{name:t.name,icon:t.icon}:{name:t.store.getName(),icon:t.store.getIcon()}}),[t]),n=(0,l().yK)((e=>({icon:{borderRadius:5,marginRight:-N,border:`${N}px solid ${e.modalBackground}`,display:"flex",alignItems:"center",justifyContent:"center",height:g().Oz+2*N,width:g().Oz+2*N,background:s&&(0,c().V2)(s.icon)?(0,c().Pk)({icon:s.icon,mode:e.mode,useLightGrayColor:!1}):e.accentColors.gray[75],zIndex:2,position:"relative"},iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1}})),[s]);return(0,C.jsxs)("div",{style:n.iconContainer,children:[(0,C.jsx)("div",{style:n.icon,children:(0,C.jsx)(m().Z,{size:g().Oz,emojiSize:g().Dt,disabled:!0,icon:s,isEmptyPage:!1,title:"block"===t.type?void 0:a,isLarge:"block"!==t.type,isRaw:!1})}),(0,C.jsx)("div",{style:n.iconBackground})]})}function L(e){const{spaceStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,C.jsx)(R,{iconCellInfoArray:t.map((e=>({type:"workspace",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}function O(e){const{teamStores:t,totalCount:a,isLoading:s,showTooltip:n}=e;return(0,C.jsx)(R,{iconCellInfoArray:t.map((e=>({type:"team",store:e}))),totalCount:a,showTooltip:n,isLoading:s})}function V(e){const{workspaces:t,totalCount:a,showTooltip:r}=e,{spaceIds:l}=(0,s.useContext)(i().g),d=(0,o()._)(l),c=t.map((e=>l.includes(e.id)?{type:"workspace",store:d.find((t=>t.id===e.id))}:{type:"external_workspace",name:e.name??"",icon:e.icon?{pointer:{table:n().bx,id:e.id},icon:e.icon}:void 0}));return(0,C.jsx)(R,{iconCellInfoArray:c,totalCount:a,showTooltip:r,isLoading:!1})}function U(e){const{blockStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,C.jsx)(R,{iconCellInfoArray:t.map((e=>({type:"block",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}},512221:(e,t,a)=>{a.d(t,{AW:()=>T,SK:()=>_,mz:()=>C,xB:()=>M});a(267602),a(470928),a(241792),a(667294);var s=()=>a(142735),n=()=>a(846550),i=()=>a(286977),o=()=>a(374289),r=()=>a(788860),l=()=>a(352230),d=()=>a(641506),c=()=>a(128119),u=()=>a(265640),m=()=>a(356042),g=()=>a(827973),p=()=>a(448419),h=()=>a(715139),f=()=>a(312578),x=()=>a(198829),v=()=>a(255577),y=()=>a(661641),b=()=>a(906651),S=()=>a(388284),j=()=>a(750824),w=a(785893);function M(e){const{icon:t,title:a,byline:s}=e,i=(0,n().yK)((()=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8},title:{textAlign:"center"},byline:{textAlign:"center"}})),[]);return(0,w.jsxs)("div",{style:i.container,children:[t,(0,w.jsx)(y().q,{styleName:"Heading-17px/Semibold",customStyles:i.title,children:a}),(0,w.jsx)(y().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:i.byline,children:s})]})}function C(e){const{primaryText:t,primaryAction:a,primaryDisabled:s,secondaryText:i,secondaryAction:o,isLightRed:r,isDarkRed:l,isLoading:d}=e,c=(0,n().yK)((e=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",gap:8,padding:"0 20px",marginLeft:-20,width:"calc(100% + 40px)"},fullWidth:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...j().sM,height:32,color:e.text.secondary}})),[]);return(0,w.jsxs)("div",{style:c.container,children:[r?(0,w.jsx)(m().F,{size:"lg",onClick:a,color:r?"uiRed":void 0,disabled:s,style:c.fullWidth,children:d?(0,w.jsx)(f().Z,{}):t}):(0,w.jsx)(b().Z,{isLarge:!0,onClick:a,disabled:s,style:c.fullWidth,isRed:l,children:d?(0,w.jsx)(f().Z,{}):t}),(0,w.jsx)(u().D,{size:"lg",onClick:o,style:{...c.fullWidth,...c.cancelButton},children:i})]})}function _(e){const{selectedId:t,options:a,onChange:s}=e,d=(0,n().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:8},chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`},selectedCheckmark:{width:14},icon:{alignSelf:"center",marginTop:0,fill:e.icon.primary,height:18,width:18}})),[]);return(0,w.jsxs)("div",{style:d.container,children:[(0,w.jsx)(y().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,w.jsx)(r()._H,{id:"orgConsole.modal.dropdown.title",defaultMessage:"Select role"})}),(0,w.jsx)(p().ZP,{popupType:p().Z4.Popup,renderOrigin:e=>{const s=a.find((e=>e.id===t));return s?(0,w.jsx)(g().Z,{...e,title:s.title,caption:s.caption,icon:s.icon({fill:d.icon.fill}),desktopIconStyle:d.icon,disabled:!1,right:(0,o().i)(d.chevron),focused:!1,shouldWrapCaption:!0,buttonStyle:d.selectedButton}):null},placementToOrigin:c().Iw.Bottom,alignmentToOrigin:c().lU.Start,sameWidthAsOrigin:!0,render:e=>{const n=[{key:"options",render:e=>(0,w.jsx)(S().Z,{...e,topBorder:0!==e.index}),items:a.map((a=>{const n=a.id===t;return{key:a.id,render:e=>(0,w.jsx)(g().Z,{...e,title:a.title,caption:a.caption,icon:a.icon({fill:d.icon.fill}),desktopIconStyle:d.icon,right:n?(0,w.jsx)("div",{style:d.selectedCheckmark,children:(0,i().e)()}):void 0,shouldWrapCaption:!0,focused:!1}),action:()=>{s(a.id),e.close()}}}))}];return(0,w.jsx)(x().Z,{menuType:l().o.Popup,children:(0,w.jsx)(v().ZP,{type:v().iW.Vertical,initialFocus:void 0,sections:n})})}})]})}function T(e){const{items:t,selectedIds:a,disabledIds:i,onSelectHeader:o,onSelect:r,titleText:l,headerText:c,headerAction:u}=e,m=(0,n().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:8,marginBottom:4},selectorContainer:{border:`1px solid ${e.stroke.secondary}`,boxShadow:"0px 2px 4px 0px #0000000a",borderRadius:8},checkbox:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},headerText:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},right:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexDirection:"row"},workspace:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:8},byline:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},bylineWithoutCheckboxes:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:28,width:28},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2},selectorHeader:{padding:"4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorHeaderWithAction:{padding:"4px 4px 4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorBody:{paddingInline:12,display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",width:"100%",maxHeight:204,overflowX:"hidden",overflowY:"auto"},selectorBodyRow:{display:"grid",gridTemplateColumns:"24px minmax(auto, 50%) 1fr",width:"100%",paddingBlock:8,gap:8,borderTop:`1px solid ${e.stroke.secondary}`}})),[]),g=void 0!==a&&void 0!==i&&r&&o,p=void 0!==i?t.length-i.length:0,f=(0,s().VK)((()=>{if(void 0===a)return!1;let e=0;for(const s of t)a.includes(s.id)&&(e+=1);return 0!==e&&(e===p?0!==p:"partial")}),[t,a,p]);return(0,w.jsxs)("div",{style:m.container,children:[(0,w.jsx)(y().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l}),(0,w.jsxs)("div",{style:m.selectorContainer,children:[(0,w.jsxs)("div",{style:{...u?m.selectorHeaderWithAction:m.selectorHeader,gridTemplateColumns:g?"24px 1fr 1fr":"24px 1fr"},children:[g?(0,w.jsx)("div",{style:m.checkbox,children:(0,w.jsx)(h().Z,{checked:f,size:14,checkSize:10,onClick:o})}):null,(0,w.jsx)(y().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:m.headerText,children:c}),(0,w.jsx)("div",{style:m.right,children:u})]}),(0,w.jsx)("div",{style:m.selectorBody,children:t.map(((e,t)=>{let{id:s,icon:n,name:o,caption:l,byline:c}=e;return(0,w.jsxs)("div",{style:{...m.selectorBodyRow,borderTopWidth:0===t?0:1,gridTemplateColumns:g?"24px minmax(auto, 50%) 1fr":"minmax(auto, 50%) 1fr"},children:[g?(0,w.jsx)("div",{style:m.checkbox,children:(0,w.jsx)(h().Z,{checked:a.includes(s)||i.includes(s),size:14,checkSize:10,onClick:()=>r(s),disabled:i.includes(s),style:{opacity:i.includes(s)?.3:1}})}):null,(0,w.jsxs)("div",{style:m.workspace,children:[(0,w.jsx)("div",{style:m.iconContainer,children:n}),(0,w.jsxs)("div",{style:m.textContainer,children:[(0,w.jsx)(y().q,{styleName:"UIRegular-14px/Medium",customStyles:{...(0,d().pd)(1),textOverflow:"ellipsis"},children:o}),l?(0,w.jsx)(y().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{...(0,d().pd)(1),textOverflow:"ellipsis"},children:l}):null]})]}),(0,w.jsx)("div",{style:m.byline,children:c})]},s)}))})]})]})}},368634:(e,t,a)=>{a.d(t,{P:()=>u,Z:()=>m});var s=a(667294),n=()=>a(846550),i=()=>a(303171),o=()=>a(265640),r=()=>a(668001),l=()=>a(661641),d=()=>a(916940),c=a(785893);function u(e){let{headerText:t,mainText:a,bottom:u,onClick:m,isLoading:g,disabled:p}=e;const[h,f]=s.useState(!1),x=(0,n().yK)((e=>({loadingMainText:{width:140,borderRadius:4,height:25},loadingBottom:{width:120,borderRadius:4,height:24},container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:20,width:"100%",padding:16,borderRadius:d().E.medium,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:d().X,height:"auto"},containerDark:{background:e.accentColors.translucentGray[30],borderColor:e.stroke.primary},content:{display:"flex",flexDirection:"column",gap:20},textContainer:{display:"flex",flexDirection:"column",gap:8},mainText:{color:e.accentColors.gray[900],fontSize:20},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:h?e.accentColors.translucentGray[300]:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:h?e.accentColors.gray[800]:e.icon.primary,transform:"rotate(270deg)"},bottomContainer:{minHeight:28}})),[h]);return(0,c.jsxs)(o().D,{onClick:m,style:x.container,shouldShrink:!0,hoveredStyle:{...x.container,...x.containerDark},pressedStyle:{...x.container,...x.containerDark},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),disabled:p,children:[(0,c.jsxs)("div",{style:x.content,children:[(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)(l().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:t}),g?(0,c.jsx)(r().Z,{style:x.loadingMainText}):(0,c.jsx)(l().q,{customStyles:x.mainText,styleName:"UITitle-Medium-20px/Semibold",colorName:"primary",children:a})]}),(0,c.jsx)("div",{style:x.bottomContainer,children:g?(0,c.jsx)(r().Z,{style:x.loadingBottom}):u})]}),!p&&(0,c.jsx)("div",{style:x.iconButton,children:(0,i().A)(x.icon)})]})}const m=u},750824:(e,t,a)=>{a.d(t,{E6:()=>l,mk:()=>d,sM:()=>r});a(667294);var s=()=>a(846550),n=()=>a(568017),i=()=>a(661297),o=a(785893);const r={height:28,paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontWeight:a(707513).Ue.medium},l={opacity:.3};function d(e){const t=(0,s().yK)((t=>({buttonStyle:{...r,...e.disabled&&l,...e.isBlue&&{background:t.outlineBlueButtonHoveredBackground,border:void 0},...e.style},hoverStyle:{background:e.isBlue?n().O9.blueWithAlpha(.1):void 0}})),[e.isBlue,e.style,e.disabled]);return(0,o.jsx)(i().Z,{...e,style:t.buttonStyle,hoveredStyle:t.hoverStyle})}},831629:(e,t,a)=>{a.d(t,{J:()=>f,p:()=>h});a(267602),a(470928),a(241792),a(667294);var s=()=>a(846550),n=()=>a(788860),i=()=>a(352230),o=()=>a(167393),r=()=>a(265640),l=()=>a(827973),d=()=>a(198829),c=()=>a(255577),u=()=>a(661641),m=()=>a(906651),g=()=>a(388284),p=a(785893);function h(e){const{pillTitle:t,selectedItem:a,items:s,shouldHidePrefix:n,selectionRequired:i}=e,r=s.find((e=>e.value===a));return(0,p.jsx)(o().u,{...e,renderMenu:e=>(0,p.jsx)(x,{...e,pillTitle:t,selectionRequired:i}),pillTitle:(0,p.jsx)("div",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:n?r?r.shortTitle:t:(0,p.jsxs)(p.Fragment,{children:[t,Boolean(r)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:": "}),(0,p.jsx)("span",{children:null==r?void 0:r.shortTitle})]}):void 0]})})})}function f(e){const{pillTitle:t,selectedItems:a,items:s}=e;let i;if(1===a.length){const e=s.find((e=>e.value===a[0]));i=(null==e?void 0:e.shortTitle)||(null==e?void 0:e.title)}else a.length>1&&(i=(0,p.jsx)(n()._H,{id:"settingsConsoleFilterPill.numSelected",defaultMessage:"{count} selected",values:{count:a.length}}));return(0,p.jsx)(o().F,{...e,renderMenu:e=>(0,p.jsx)(x,{...e,pillTitle:t}),pillTitle:(0,p.jsxs)("div",{children:[t,Boolean(i)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:": "}),(0,p.jsx)("span",{children:i})]}):void 0]})})}function x(e){let{items:t,toggleSelectedItem:a,renderItemOptionIcon:o,menuListStore:h,clearSelection:f,pillTitle:x,selectAll:v,shouldUseCheck:y,selectionRequired:b,onSubmit:S}=e;const j=(0,s().yK)((e=>({container:{padding:"8px 0 6px"},header:{padding:"0px 8px 6px 12px",justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"row"},icon:{width:12,marginRight:6,fill:"currentColor"},buttonContainer:{display:"flex",alignItems:"center"},check:{width:16,height:16,color:e.text.tertiary},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},clearButton:{fontWeight:500}})),[]),w={key:"menuOptions",items:t.map((e=>({key:e.key,action:()=>a(e.value),render:t=>(0,p.jsx)(l().Z,{...t,icon:y?void 0:o(e.value),title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption,dontShrinkTitle:e.dontShrinkTitle,right:y?o(e.value):(0,p.jsx)(u().q,{colorName:"tertiary",children:e.count})})}))),render:e=>(0,p.jsx)(g().Z,{...e,title:null,loading:!1})};return(0,p.jsxs)("div",{style:j.container,children:[(0,p.jsxs)(g().Z,{topBorder:!1,style:j.header,children:[(0,p.jsx)(u().q,{styleName:"UISmall-12px/Medium",colorName:"tertiary",children:x}),v?(0,p.jsx)("div",{style:j.buttonContainer,children:(0,p.jsx)(r().D,{onClick:v,isBlue:!0,size:"xs",children:(0,p.jsx)(n()._H,{id:"settingsConsoleFilterPill.selectAllButton",defaultMessage:"Select all"})})}):void 0]}),(0,p.jsx)(d().Z,{menuType:i().o.Popup,header:null,maxHeight:250,width:320,children:(0,p.jsx)(c().ZP,{type:c().iW.Vertical,store:h,initialFocus:void 0,sections:[w]})}),(0,p.jsxs)(g().Z,{topBorder:!0,style:j.footer,children:[b?(0,p.jsx)("div",{}):(0,p.jsx)(r().D,{onClick:f,style:j.clearButton,children:(0,p.jsx)(n()._H,{id:"settingsConsoleFilterPill.clearButton",defaultMessage:"Clear"})}),(0,p.jsx)(m().Z,{onClick:S,children:(0,p.jsx)(n()._H,{id:"core.baseFilterPill.doneButton",defaultMessage:"Apply"})})]})]})}},644178:(e,t,a)=>{a.d(t,{f:()=>l});a(241792),a(667294);var s=()=>a(846550),n=()=>a(707513),i=()=>a(661641),o=()=>a(868614),r=a(785893);function l(e){let{icon:t,children:a,title:s,headerRight:n,hideDivider:l}=e;const c=d(l),u=a?{marginBottom:0,borderBottom:"none",paddingBottom:0}:{},m={...c.headingStyle,...u};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o().Z,{large:!0,style:m,children:[(0,r.jsxs)("div",{style:c.titleContainer,children:[t?t(c.icon):void 0,(0,r.jsx)(i().q,{styleName:"UITitle-22px/Semibold",children:s})]}),n]}),(0,r.jsx)("div",{style:c.children,children:a})]})}function d(e){return(0,s().yK)((t=>({headingStyle:{marginBottom:16,paddingBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:e?"none":`1px solid ${t.stroke.secondary}`},titleContainer:{display:"flex",justifyContent:"center",alignItems:"center",gap:12},icon:{height:30,width:30,padding:6,borderRadius:4,background:t.accentColors.uiBlue[100],color:t.icon.uiBluePrimary},title:{fontSize:20,fontWeight:n().Ue.medium,lineHeight:"150%",display:"flex",alignItems:"center",gap:0,margin:0},children:{width:"80%",marginTop:12,marginBottom:22},tabContainerStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14,overflow:"visible"},tabStyle:{marginLeft:-8,marginRight:8},tabTitleStyle:{paddingLeft:8,paddingRight:8},tabBorderStyle:{left:8,right:8}})),[e])}},991331:(e,t,a)=>{a.d(t,{N:()=>u,k:()=>m});a(241792);var s=a(667294),n=()=>a(846550),i=()=>a(666414),o=()=>a(78078),r=()=>a(661641),l=a(785893);const d=24,c=12;function u(e){let{title:t,titleId:a,byline:s,bylineId:i,item:u,onClick:m,padding:g,itemStyles:p,styles:h,badge:f,shouldHighlight:x}=e;const v=(0,n().yK)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:g,cursor:m?"pointer":"default",position:"relative"},settingLeft:{flex:3,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6},settingRight:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},highlight:{height:`calc(100% + ${c}px)`,width:`calc(100% + ${d}px)`,left:`-${d/2}px`,position:"absolute",backgroundColor:e.buttonHoveredBackground}})),[g,m]),y={...v.settingContainer,...h};return(0,l.jsxs)("div",{style:y,...m?{onClick:m,role:"button",tabIndex:0}:{},children:[(0,l.jsxs)("div",{style:v.settingLeft,children:[(0,l.jsxs)(o().X2,{alignItems:"center",children:[(0,l.jsx)(r().q,{id:a,styleName:"UIRegular-14px/Regular",colorName:"primary",children:t}),f]}),s&&(0,l.jsx)(r().q,{id:i,styleName:"UIMedium-13px/Regular",colorName:"secondary",children:s})]}),(0,l.jsx)("div",{style:{...v.settingRight,...p},children:u}),x&&(0,l.jsx)("div",{style:v.highlight})]})}function m(e){const{items:t}=e,a=(0,n().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,l.jsx)("div",{style:a.container,children:t.map(((e,n)=>(0,l.jsxs)(s.Fragment,{children:[e,n<t.length-1?(0,l.jsx)(i().Z,{dividerColor:a.divider.color,size:1}):null]},n)))})}},305885:(e,t,a)=>{a.d(t,{Dl:()=>m,Tr:()=>u});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(876822),r=()=>a(921981),l=()=>a(35735),d=()=>a(685958),c=a(785893);const u=40;function m(e){let{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:i,defaultTab:o,sceneProps:d,isOpen:u,onDismiss:m}=e;const[p,h]=(0,s.useState)(o),f=a[p];return(0,c.jsx)(r().c,{isOpen:u,onDismiss:m,render:()=>(0,c.jsx)(l().v,{left:(0,c.jsx)(g,{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:i,selectedTabName:p,setSelectedTab:h}),right:(0,c.jsx)("div",{style:{width:"calc(100% - 8px)"},children:f.scene({...d,setSelectedTab:h})}),showElevatedConsoleContainer:!0}),areaConstraint:{width:{type:"fixed",length:1280},height:{type:"fixed",length:800}},borderRadius:20})}function g(e){let{sidebarProps:t,tabRenderer:a,tabNames:r,tabAccessor:l,selectedTabName:u,setSelectedTab:m}=e;const g=(0,n().O7)(),p=(0,i().VK)((()=>o().default.state.currentUserStore),[]),h=(0,i().VK)((()=>r.filter((e=>l[e]({environment:g,currentUserStore:p})))),[p,g,l,r]),f=(0,s.useMemo)((()=>r.map((e=>({id:e,name:a[e].tab.name,icon:a[e].tab.icon,isSelected:u===e,onClick:()=>{m(e)},disabled:!h.includes(e)})))),[r,a,u,h,m]);return(0,c.jsx)(d().ZV,{items:f,...t})}},909763:(e,t,a)=>{a.d(t,{Q:()=>d,f:()=>c});a(667294);var s=()=>a(846550),n=()=>a(303171),i=()=>a(265640),o=()=>a(661641),r=()=>a(916940),l=a(785893);function d(e){let{title:t,content:a}=e;const n=(0,s().yK)((()=>({container:{margin:"40px auto"},content:{marginTop:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]);return(0,l.jsxs)("div",{style:n.container,children:[(0,l.jsx)(o().q,{styleName:"Heading-17px/Medium",as:"h2",children:t}),(0,l.jsx)("div",{style:n.content,children:a})]})}function c(e){let{title:t,byline:a,content:d,rightContent:c,onClick:u,disabled:m,...g}=e;const p=(0,s().yK)((e=>({container:{margin:"6px auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",height:"fit-content",padding:"12px 16px",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:r().X},containerDark:{background:e.accentColors.translucentGray[30],borderColor:e.stroke.primary},left:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:6},title:{margin:0,padding:0},secondaryText:{margin:0,padding:0},content:{padding:"2px 0 6px"},rightContent:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:12},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(270deg)"}})),[]);return(0,l.jsxs)(i().D,{style:p.container,onClick:u,hoveredStyle:{...p.container,...p.containerDark},pressedStyle:{...p.container,...p.containerDark},disabled:m,disabledFeedback:m,...g,children:[(0,l.jsxs)("div",{style:p.left,children:[(0,l.jsx)(o().q,{customStyles:p.title,styleName:"UIRegular-14px/Medium",as:"p",children:t}),d?(0,l.jsx)("div",{style:p.content,children:d}):null,(0,l.jsx)(o().q,{customStyles:p.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:a})]}),(0,l.jsxs)("div",{style:p.rightContent,children:[c&&(0,l.jsx)(o().q,{customStyles:p.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:c}),(0,l.jsx)("div",{style:p.iconButton,children:(0,n().A)(p.icon)})]})]})}},653363:(e,t,a)=>{a.d(t,{s:()=>l});a(241792),a(667294);var s=()=>a(981583),n=()=>a(289052),i=()=>a(72092),o=a(785893);const r=function(e){let{userStores:t}=e;const n=(0,a(846550).yK)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,o.jsx)("div",{style:n.container,children:t.map((e=>(0,o.jsx)(s().Z,{userStore:e,showEmailAndName:!0,size:i().Oz,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}},e.id)))})};function l(e){const{users:t,totalMemberCount:a,showTooltip:l,isLoading:d}=e,c=(0,n().Z)(),u=t.map((e=>({renderAvatar:()=>(0,o.jsx)(s().Z,{userStore:e,size:i().Oz,avatarShouldShowShadow:!1,hasTooltip:l,iconStyle:{fontSize:12},delayThreshold:0,showAvatarInTooltip:!0},e.id)})));return(0,o.jsx)(i().eM,{avatarStyles:c.roundAvatarBorder,avatars:u,totalCount:a,renderOverflowTooltip:l?()=>(0,o.jsx)(r,{userStores:t}):void 0,isLoading:d})}},286284:(e,t,a)=>{a.d(t,{L:()=>h});var s=a(667294),n=()=>a(846550),i=()=>a(928595),o=()=>a(527278),r=()=>a(696768),l=()=>a(887330),d=()=>a(448419),c=()=>a(1910),u=()=>a(967092),m=()=>a(654133),g=()=>a(416389),p=a(785893);function h(e){const{appliedSorts:t,openSortPillMenu:a}=e,[h,f]=(0,s.useState)(!1),x=Boolean(null==t?void 0:t.length),v=function(e){let{hasSort:t}=e;return(0,n().yK)((e=>({iconStyle:{width:21,height:void 0,fill:t?e.icon.uiBluePrimary:e.actionMenuButtonTextColor},buttonStyle:(0,l().C)({theme:e,isInHomeWidget:!1})})),[t])}({hasSort:x}),y=(0,s.useCallback)((()=>{x?a():f(!0)}),[f,a,x]),b=o().Z.formatMessage(r().OI.menuTitle);return(0,p.jsx)(u().ZP,{popupType:d().Z4.Popup,open:h,origin:(0,p.jsx)(m().Z,{renderTooltip:()=>b,render:e=>(0,p.jsx)(c().Z,{...e,ariaLabel:b,icon:i().j,iconStyle:v.iconStyle,style:v.buttonStyle,onClick:y})}),onDismiss:()=>f(!1),originGap:4,render:()=>(0,p.jsx)(g().N,{...e,currentSorts:t,onClick:e=>{a(e),f(!1)}})})}},842423:(e,t,a)=>{a.d(t,{i:()=>B});a(267602),a(470928);var s=a(667294),n=()=>a(846550),i=()=>a(703256),o=()=>a(933713),r=()=>a(811939),l=()=>a(788860),d=()=>a(61738),c=()=>a(448419),u=()=>a(967092),m=(a(653476),a(241792),()=>a(159732)),g=()=>a(95886),p=()=>a(696459),h=()=>a(352230),f=()=>a(827973),x=()=>a(119891),v=()=>a(198829),y=()=>a(661641),b=()=>a(388284),S=()=>a(943181),j=()=>a(119),w=()=>a(696768),M=()=>a(18748),C=()=>a(397540),_=()=>a(960647),T=()=>a(697475),k=()=>a(416389),I=a(785893);function H(e){let{sort:t,sortProperties:a,onChange:s,currentSorts:i}=e;const o=(0,n().yK)((()=>({sortRow:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},section:{padding:"8px 0 0 8px",width:"100%"}})),[]);if(!t)return null;return(0,I.jsx)(b().Z,{extraTopPadding:!0,style:o.section,children:(0,I.jsx)(M().ZP,{showDragHandle:!0,title:(0,I.jsxs)("div",{style:o.sortRow,children:[(0,I.jsx)(D,{currentPropertyId:t.propertyId,sortProperties:a,currentSorts:i,onChange:s}),(0,I.jsx)(P,{sort:t,currentSorts:i,onChange:s})]}),right:(0,I.jsx)(j().o,{onDeleteClick:()=>{const e=i.filter((e=>{let{propertyId:a}=e;return a!==(null==t?void 0:t.propertyId)}));s(e)}}),rightStyle:{marginRight:19}})})}function P(e){let{sort:t,onChange:a,currentSorts:s}=e;const n=(0,l().YB)(),i=t.direction;return(0,I.jsx)(C().Z,{menuTitle:n.formatMessage(w().OI.menuTitle),items:[...S().C6],selectedItem:i,onSelect:e=>{const n=s.map((a=>a.propertyId===t.propertyId?{...a,direction:e}:a));a(n)},getKey:e=>e,renderItem:e=>(0,I.jsx)(f().Z,{title:w().G8[e.value],...e}),renderOrigin:e=>(0,I.jsx)(_().Z,{...e,placeholder:n.formatMessage(w().OI.emptyPlaceholder),title:i&&w().G8[i],desktopStyle:{opacity:1}})},"direction")}function D(e){let{currentPropertyId:t,sortProperties:a,currentSorts:s,onChange:n}=e;const i=a.find((e=>e.id===t));return i?(0,I.jsx)(c().ZP,{popupType:c().Z4.Popup,renderOrigin:e=>(0,I.jsx)(T().Z,{...e,disabled:s.length===a.length,propertySchema:i,textWrapperStyle:{opacity:1}}),render:e=>{let{close:i}=e;return(0,I.jsx)(k().N,{onClick:e=>{(e=>{const a=s.map((a=>a.propertyId===t?{propertyId:e,direction:a.direction}:a));n(a)})(e),i()},currentSorts:s,sortProperties:a})}}):null}function z(e){let{sortProperties:t,currentSorts:a,onChange:s,preventMultipleSorts:n}=e;const i=a.map((e=>e.propertyId));return(0,I.jsxs)(v().Z,{menuType:h().o.Popup,minWidth:320,children:[(0,I.jsx)(x().ZP,{direction:"vertical",keys:i,renderKey:e=>(0,I.jsx)(H,{sortProperties:t,onChange:s,currentSorts:a,sort:a.find((t=>t.propertyId===e))}),onDrop:e=>function(e,t,a){const s=e.map((e=>a.find((t=>t.propertyId===e)))).filter(p().$K);t(s)}(e,s,a)}),(0,I.jsxs)(b().Z,{children:[n?null:(0,I.jsx)(A,{sortProperties:t,currentSorts:a,onChange:s}),(0,I.jsx)(N,{currentSorts:a,onChange:s})]})]})}function A(e){let{sortProperties:t,currentSorts:a,onChange:s}=e;const n=R();if(!(a.length<t.length))return null;return(0,I.jsx)(c().ZP,{popupType:u().kQ.Popup,renderOrigin:e=>(0,I.jsx)(f().Z,{focused:!1,icon:(0,m().R)(n.icon),title:(0,I.jsx)(y().q,{colorName:"secondary",children:(0,I.jsx)(l()._H,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"})}),...e}),render:e=>{let{close:n}=e;return(0,I.jsx)(k().N,{sortProperties:t,currentSorts:a,onClick:e=>{s([...a,{propertyId:e,direction:"ascending"}]),n()}})}})}function N(e){let{currentSorts:t,onChange:a}=e;const s=R();return t.length>0?(0,I.jsx)(f().Z,{focused:!1,icon:(0,g().y)(s.icon),title:(0,I.jsx)(y().q,{colorName:"secondary",children:(0,I.jsx)(l()._H,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"})}),onClick:()=>a([])}):null}function R(){return(0,n().yK)((e=>({icon:{width:24,height:16,marginRight:-2,fill:e.mediumIconColor}})),[])}function B(e){const{currentSorts:t,isMenuOpen:a,setIsMenuOpen:m,sortProperties:g,onApply:p,preventMultipleSorts:h}=e,f=(0,n().yK)((e=>({sortDirectionIcon:{width:12,height:22,marginRight:6,fill:"currentColor"},multiSortIcon:{width:16,height:22,marginRight:6,fill:"currentColor"},empty:{height:24}})),[]),[x,v]=(0,s.useState)(t.length?t:void 0),y=x??t;let b,S;if(1===y.length){var j;const e=y[0];b="ascending"===e.direction?(0,o().w)(f.sortDirectionIcon):(0,i().N)(f.sortDirectionIcon),S=null===(j=g.find((t=>t.id===e.propertyId)))||void 0===j?void 0:j.name}else b=(0,r().x)(f.multiSortIcon),S=(0,I.jsx)(l()._H,{defaultMessage:"{sortCount} sorts",id:"settingsConsoleSortButton.multiSorts.label",values:{sortCount:y.length}});const w=y.length||a?(0,I.jsx)(d().Z,{on:y.length>0,icon:b,title:S,onClick:()=>m(!0)}):(0,I.jsx)("div",{style:f.empty});return(0,I.jsx)(u().ZP,{popupType:c().Z4.Popup,open:a,origin:w,onDismiss:()=>{p(y),v(void 0),m(!1)},originGap:4,render:()=>(0,I.jsx)(z,{...e,preventMultipleSorts:y.length>0&&h,onChange:v,currentSorts:y})})}},416389:(e,t,a)=>{a.d(t,{N:()=>c});a(267602),a(653476),a(241792),a(228244),a(667294);var s=()=>a(696459),n=()=>a(352230),i=()=>a(198829),o=()=>a(255577),r=()=>a(388284),l=()=>a(951877),d=a(785893);function c(e){let{sortProperties:t,onClick:a,currentSorts:c}=e;const u=t.map((e=>{if(null==c?void 0:c.some((t=>{let{propertyId:a}=t;return a===e.id})))return;return{key:e.name,render:t=>(0,d.jsx)(l().N,{...t,propertySchema:e,format:l().L.Name}),action:()=>a(e.id)}})).filter(s().$K);return u.length?(0,d.jsx)(i().Z,{menuType:n().o.Popup,children:(0,d.jsx)(o().ZP,{type:o().iW.Vertical,initialFocus:void 0,sections:[{key:"properties",render:e=>(0,d.jsx)(r().Z,{...e}),items:u}]})}):null}},390965:(e,t,a)=>{a.d(t,{a:()=>n,s:()=>i});a(241792);var s=()=>a(921778);let n=function(e){return e.Loading="loading",e.ManagedUser="managed-user",e.OrganizationWorkspace="organization-workspace",e.OrganizationGroup="organization-group",e.OrganizationGroupMember="organization-group-member",e.OrganizationGroupPage="organization-group-page",e.OrganizationGuest="organization-guest",e.OrganizationMember="organization-member",e.OrganizationClaimableWorkspace="organization-claimable-workspace",e.OrganizationEmailDomain="organization-email-domain",e.SingleUserGroup="single-user-group",e.SingleUserWorkspace="single-user-workspace",e.OrganizationLegalHold="organization-legal-hold",e.SingleLegalHoldMemberUser="single-legal-hold-member-user",e.SingleLegalHoldMemberGuest="single-legal-hold-member-guest",e.SingleLegalHoldMemberDeletedUser="single-legal-hold-member-deleted-user",e.SingleLegalHoldPage="single-legal-hold-page",e.SingleWorkspaceTeam="workspace-team",e.SingleWorkspaceGuest="workspace-guest",e.AnalyticsMemberViewsRow="analytics-member-view",e}({});function i(e){return new Array(e??s().B).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:n.Loading})))}},540491:(e,t,a)=>{a.d(t,{CD:()=>s,M:()=>n});const s=28,n=24},140303:(e,t,a)=>{a.d(t,{L:()=>c,V:()=>d});var s=a(667294),n=()=>a(66077),i=()=>a(219727),o=()=>a(217465),r=()=>a(876822),l=a(785893);const d=(0,s.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:t}=e;const a=(0,i().O7)(),[n,c]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=u(a);c(e)}),[a]);const m=(0,s.useCallback)((e=>{var t;const s=null===(t=r().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!s||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const n=o().RecordMap.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return u(a);for(const{pointer:t,model:a}of n)e.setModelAndRole({pointer:t,userId:s},a,"editor");return u(a,e.data)}))}),[a]);return n?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:n,updateCacheWithRecordMap:m},children:t}):null}function u(e,t){const a=new(n().Z)({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}d.displayName="OrganizationCacheContext"},656984:(e,t,a)=>{a.d(t,{g:()=>u,n:()=>m});a(670560);var s=a(667294),n=()=>a(219727),i=()=>a(732811),o=()=>a(741633),r=()=>a(824462),l=()=>a(748238),d=()=>a(140303),c=a(785893);const u=(0,s.createContext)({spaceIds:[],samlConfigs:[],teamIdsForSpace:{},teamAggregateDataForSpace:{},loadTeamsForSpace:function(e,t){return Promise.resolve()},visibleUsersForSpace:{},loadVisibleUsersForSpace:function(e,t){return Promise.resolve()},joinedUserIdsForSpace:{},permissionGroupsForSpace:{},loadPermissionGroupsForSpace:function(e,t){return Promise.resolve()},userPermissionGroupIdsBySpaceId:{},loadUserPermissionGroupIdsBySpaceId:function(e,t){return Promise.resolve()},refreshSamlConfigs:async()=>{},loadSamlConfigs:async()=>Promise.resolve([]),organizationMemberEmailDomains:[],memberEmailDomainsForSpace:{},guestEmailDomains:[],refreshOrganization:async()=>{},availableOrganizationFeatures:{}});function m(e){let{children:t,organizationId:a}=e;const m=(0,n().O7)(),[g,p]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[x,v]=(0,s.useState)({}),[y,b]=(0,s.useState)({}),[S,j]=(0,s.useState)({}),[w,M]=(0,s.useState)({}),[C,_]=(0,s.useState)({}),[T,k]=(0,s.useState)({}),[I,H]=(0,s.useState)({}),[P,D]=(0,s.useState)([]),[z,A]=(0,s.useState)([]),{updateCacheWithRecordMap:N}=(0,s.useContext)(d().V),R=(0,s.useCallback)((async()=>{const e=await r().callApi({eventName:"getSpacesInOrganization",environment:m,data:{organizationId:a}});"success"===e.type&&(p(e.data.spaceIds),N({data:e.data}));const t=await r().callApi({eventName:"getAllOrganizationMemberEmailDomains",environment:m,data:{organizationId:a}});"success"===t.type&&(A(t.data.orgMemberEmailDomains),H(t.data.memberEmailDomainsBySpace),D(t.data.guestEmailDomains))}),[m,a,N]),B=(0,s.useCallback)((async()=>{const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:m,data:{organizationId:a}});"success"===e.type&&f(e.data.samlConfigs)}),[m,a]),L=(0,s.useCallback)((async()=>{if(h.length>0)return h;const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:m,data:{organizationId:a}});return"success"===e.type?(f(e.data.samlConfigs),e.data.samlConfigs):[]}),[m,a,h]);(0,i().Q)((()=>{R()}));const O=function(e,t){const{updateCacheWithRecordMap:a}=(0,s.useContext)(d().V),i=(0,n().O7)(),o=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(o.current[s])return;o.current[s]=!0;const n=await r().callApi({eventName:"getTeamsForOrganizationSpace",environment:i,data:{spaceId:s}});"success"===n.type&&(a({data:n.data}),e(s,n.data.teamIds),t(s,n.data.teamAggregateData)),o.current[s]=!1}),[i,e,t,a])}((0,s.useCallback)(((e,t)=>{v((a=>({...a,[e]:t})))}),[]),(0,s.useCallback)(((e,t)=>{b((a=>({...a,[e]:t})))}),[])),V=(0,s.useCallback)((async(e,t)=>{const a=x[e],s=y[e];(void 0===a||void 0===s||t)&&await O(e)}),[O,y,x]),U=function(e,t){const a=(0,n().O7)(),i=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(void 0!==i.current[s])return void(await i.current[s]);const n=r().callApi({eventName:"getVisibleUsers",environment:a,data:{spaceId:s,supportsEdgeCache:!0},headers:(0,o().Bb)({spaceId:s})}).then((a=>{if("success"===a.type){let n,i=[];"visibleUsers"in a.data?n=a.data.visibleUsers:(n=a.data.users,i=a.data.joinedMemberIds),e(s,n),t(s,i)}})).finally((()=>{delete i.current[s]}));i.current[s]=n,await n}),[a,t,e])}((0,s.useCallback)(((e,t)=>j((a=>({...a,[e]:t})))),[]),(0,s.useCallback)(((e,t)=>M((a=>({...a,[e]:t})))),[])),q=(0,s.useCallback)((async(e,t)=>{(void 0===S[e]||t)&&await U(e)}),[U,S]),E=function(e){const t=(0,n().O7)(),a=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(!a.current[s]){a.current[s]=!0;try{const a=await r().callApi({eventName:"getAllSpacePermissionGroupsWithMemberCount",environment:t,data:{spaceId:s},headers:(0,o().Bb)({cellId:void 0,spaceId:s})});"success"===a.type&&e(s,a.data.groupsWithMemberCount)}finally{a.current[s]=!1}}}),[t,e])}((0,s.useCallback)(((e,t)=>_((a=>({...a,[e]:t})))),[])),Z=(0,s.useCallback)((async(e,t)=>{(void 0===C[e]||t)&&await E(e)}),[E,C]),F=function(e){const t=(0,n().O7)(),a=(0,s.useRef)({});return(0,s.useCallback)((async(s,n)=>{const i=[];for(const e of n){var l;null!==(l=a.current[s])&&void 0!==l&&l[e]||i.push(e)}if(0!==i.length){void 0===a.current[s]&&(a.current[s]={});for(const e of i)a.current[s][e]=!0;try{const a=await r().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:s,userIds:i},headers:(0,o().Bb)({cellId:void 0,spaceId:s})});if("success"===a.type){const t={};for(const e of i)t[e]=a.data.userToGroupMap[e]??[];e(s,t)}}finally{for(const e of i)a.current[s][e]=!1}}}),[t,e])}((0,s.useCallback)(((e,t)=>k((a=>({...a,[e]:{...a[e],...t}})))),[])),W=(0,s.useCallback)((async(e,t)=>{const a=[];for(const n of t){var s;null!==(s=T[e])&&void 0!==s&&s[n]||a.push(n)}a.length>0&&await F(e,a)}),[F,T]),{features:K}=(0,l().Y)(a);return(0,c.jsx)(u.Provider,{value:{spaceIds:g,samlConfigs:h,teamIdsForSpace:x,teamAggregateDataForSpace:y,loadTeamsForSpace:V,visibleUsersForSpace:S,loadVisibleUsersForSpace:q,joinedUserIdsForSpace:w,permissionGroupsForSpace:C,loadPermissionGroupsForSpace:Z,userPermissionGroupIdsBySpaceId:T,loadUserPermissionGroupIdsBySpaceId:W,refreshSamlConfigs:B,loadSamlConfigs:L,organizationMemberEmailDomains:z,guestEmailDomains:P,memberEmailDomainsForSpace:I,refreshOrganization:R,availableOrganizationFeatures:K},children:t})}u.displayName="OrganizationDataContext"},499792:(e,t,a)=>{a.d(t,{C:()=>l,u:()=>o});a(267602),a(653476),a(731107);var s=a(667294),n=()=>a(696459),i=a(785893);const o=(0,s.createContext)({pendingTeamSettings:{},pendingSpaceSettings:{},pendingOrgSetting:void 0,setPendingTeamSettings:()=>{},setPendingSpaceSettings:()=>{},setPendingOrgSetting:()=>{},clearAllPendingSettings:()=>{},hasPendingSecuritySettings:()=>!1});function r(e){return Object.entries(e).filter((e=>{let[t,a]=e;return(0,n().$K)(a)})).reduce(((e,t)=>{let[a,s]=t;return e[a]=s,e}),{})}function l(e){let{children:t}=e;const[a,n]=(0,s.useState)({}),[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(void 0),m=(0,s.useCallback)((e=>{n(r({...a,...e}))}),[a]),g=(0,s.useCallback)((e=>{d(r({...l,...e}))}),[l]),p=(0,s.useCallback)((()=>{n({}),d({}),u(void 0)}),[n,d,u]),h=(0,s.useCallback)((()=>Boolean(c||Object.keys(l).length||Object.keys(a).length)),[c,l,a]);return(0,i.jsx)(o.Provider,{value:{pendingTeamSettings:a,pendingSpaceSettings:l,pendingOrgSetting:c,setPendingTeamSettings:m,setPendingSpaceSettings:g,setPendingOrgSetting:u,clearAllPendingSettings:p,hasPendingSecuritySettings:h},children:t})}o.displayName="OrganizationSecuritySettingsContext"},748238:(e,t,a)=>{a.d(t,{Y:()=>r});var s=()=>a(219727),n=()=>a(801812),i=()=>a(696459),o=()=>a(824462);function r(e){const t=(0,s().O7)(),[{value:a,status:r}]=(0,n().r5)((async()=>{if(!e)return{};const a=await o().callApi({eventName:"getAvailableOrganizationFeatures",environment:t,data:{organizationId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;(0,i().t1)(a)}),[t,e]);return{loading:"pending"===r,features:a??{}}}},616438:(e,t,a)=>{a.d(t,{l:()=>r});var s=()=>a(219727),n=()=>a(801812),i=()=>a(696459),o=()=>a(824462);function r(e){const{organizationId:t}=e,a=(0,s().O7)(),[{status:r,value:l},d]=(0,n().r5)((async()=>{if(!t)return;const e=await o().callApi({eventName:"getDomainVerificationCodesForOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data.domainVerifications;if("failed"===e.type)throw e.error;return(0,i().t1)(e)}),[a,t]);return{loading:"pending"===r,didError:"rejected"===r,domainVerifications:l,refetchDomainVerifications:d}}},292089:(e,t,a)=>{a.d(t,{o:()=>n});var s=()=>a(846550);function n(){return(0,s().yK)((e=>({longShimmer:{borderRadius:4,height:14,width:185},longTallShimmer:{borderRadius:4,height:25,width:185},shortShimmer:{borderRadius:4,height:14,width:70},avatarShimmer:{borderRadius:"100%",height:28,width:28,background:"light"===e.mode?"rgb(243 243 243)":"rgb(38 38 38)"}})),[])}},419435:(e,t,a)=>{a.d(t,{$:()=>r});var s=()=>a(219727),n=()=>a(801812),i=()=>a(696459),o=()=>a(824462);function r(e){const{organizationId:t,includeCountsPerDomain:a}=e,r=(0,s().O7)(),[{status:l,value:d}]=(0,n().r5)((async()=>{if(!t)return;const e=await o().callApi({eventName:"getVerifiedUsersCountForOrganization",environment:r,data:{organizationId:t,includeCountsPerDomain:a}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,i().t1)(e)}),[r,t,a]);return{loading:"pending"===l,didError:"rejected"===l,count:d}}},69740:(e,t,a)=>{a.d(t,{J:()=>u});a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(267602),a(653476),a(30005),a(241792);var s=()=>a(219727),n=()=>a(801812),i=()=>a(989478),o=()=>a(657120),r=()=>a(826955),l=()=>a(72092),d=()=>a(771704),c=()=>a(354466);function u(){const e=(0,d()._)(),t=(0,s().O7)(),{spaceUsers:a,loading:u}=(0,c().D)(e),[m]=(0,n().r5)((()=>{if(u)return Promise.resolve(void 0);const s=new Set,n=new Set,d=new Set,c={},m={};for(const t of e){const e=a[t.id]??[],i=e.filter(o().nB);i.forEach((e=>{n.add(e.userId),"editor"===e.role&&s.add(e.userId)}));const r=e.filter(o().FN);r.forEach((e=>d.add(e.userId))),c[t.id]=i,m[t.id]=r}const g=Array.from(s).map((e=>new(r().U6)(t,{table:i().KJ,id:e}))).sort(((e,t)=>e.getProfilePhoto()?-1:t.getProfilePhoto()?1:0)).map((e=>e.id));return Promise.resolve({memberCount:n.size,guestCount:d.size,sampleMemberIds:Array.from(new Set([...g,...n])).slice(0,l().rS),membersForSpace:c,guestsForSpace:m,loading:u})}),[u,e,a,t]);return{state:m,loading:u}}},771704:(e,t,a)=>{a.d(t,{_:()=>c});a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(255933),r=()=>a(826955),l=()=>a(140303),d=()=>a(656984);function c(e){const t=(0,n().O7)(),{organizationOwnerRecordCache:a}=(0,s.useContext)(l().V),{spaceIds:c}=(0,s.useContext)(d().g);return(0,i().VK)((()=>(e??c).map((e=>new(r().H2)(t,{id:e,table:o().bx},{inMemoryRecordCache:a})))),[a,c,e,t])}},451189:(e,t,a)=>{a.d(t,{f:()=>l});var s=a(667294),n=()=>a(801812),i=()=>a(921778),o=()=>a(839002),r=()=>a(656984);function l(e){const{teamAggregateDataForSpace:t,loadTeamsForSpace:a}=(0,s.useContext)(r().g),[l,d]=(0,s.useState)(!1);return(0,n().r5)((async()=>{d(!0),await(0,o().qd)(e,i().v,(e=>a(e))),d(!1)}),[e,a]),{teamAggregateDataForSpace:t,loading:l}}},829028:(e,t,a)=>{a.d(t,{x:()=>g});a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(801812),r=()=>a(306164),l=()=>a(921778),d=()=>a(839002),c=()=>a(826955),u=()=>a(140303),m=()=>a(656984);function g(e,t){const a=(0,n().O7)(),{organizationOwnerRecordCache:g}=(0,s.useContext)(u().V),{teamIdsForSpace:p,loadTeamsForSpace:h}=(0,s.useContext)(m().g);(0,o().r5)((async()=>{t||await(0,d().qd)(e,l().v,(async e=>h(e)))}),[e,h,t]);const{teamStoresForSpace:f,isLoading:x}=(0,i().VK)((()=>{const t={};let s=!1;for(const n of e){const e=p[n];s=s||void 0===e,t[n]=(null==e?void 0:e.map((e=>new(c().zX)(a,{id:e,table:r().e0},{inMemoryRecordCache:g}))))??[]}return{teamStoresForSpace:t,isLoading:s}}),[e,p,g,a]);return{teamStores:f,loading:x}}},354466:(e,t,a)=>{a.d(t,{D:()=>d,W:()=>l});a(241792);var s=a(667294),n=()=>a(801812),i=()=>a(921778),o=()=>a(839002),r=()=>a(656984);function l(e){const{visibleUsersForSpace:t,joinedUserIdsForSpace:a,loadVisibleUsersForSpace:i}=(0,s.useContext)(r().g),o=(0,s.useMemo)((()=>t[e]??[]),[t,e]),l=(0,s.useMemo)((()=>a[e]??[]),[a,e]),[d,c]=(0,s.useState)(!1);return(0,n().r5)((async()=>{c(!0),await i(e),c(!1)}),[e,i]),{visibleUsers:o,joinedUserIds:l,loading:d}}function d(e){const{visibleUsersForSpace:t,loadVisibleUsersForSpace:a}=(0,s.useContext)(r().g),l=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),[d,c]=(0,s.useState)(!1);return(0,n().r5)((async()=>{c(!0),await(0,o().qd)(l,i().v,(e=>a(e))),c(!1)}),[l,a]),{spaceUsers:t,loading:d}}},574740:(e,t,a)=>{a.d(t,{k:()=>d});var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(630315),r=()=>a(826955),l=()=>a(140303);function d(e){let{organizationId:t}=e;const a=(0,n().O7)(),{organizationOwnerRecordCache:d}=(0,s.useContext)(l().V);return(0,i().VK)((()=>{if(t)return new(r().Om)(a,{table:o().V7,id:t},{inMemoryRecordCache:d})}),[a,t,d])}},51277:(e,t,a)=>{a.d(t,{V:()=>n});var s=()=>a(846550);function n(){return(0,s().yK)((e=>({leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[])}},289052:(e,t,a)=>{a.d(t,{Z:()=>i});var s=()=>a(846550),n=()=>a(707513);function i(){return(0,s().yK)((e=>({linkButton:{fontWeight:n().Ue.medium,fontSize:n().JB.UIRegular.desktop,color:e.mediumTextColor},tableHeader:{background:e.surface.page},tableHeaderForModal:{background:e.surface.elevated},tableRow:{background:e.surface.page},tableRowForModal:{background:e.surface.elevated},roundAvatarBorder:{borderStyle:"solid",borderColor:e.white,borderWidth:2,borderRadius:"100%"}})),[])}},34854:(e,t,a)=>{a.d(t,{Z:()=>r});var s=()=>a(219727),n=()=>a(801812),i=()=>a(696459),o=()=>a(824462);function r(){const e=(0,s().O7)(),[{status:t,error:a,value:r},l]=(0,n().r5)((async()=>{const t=await o().callApi({eventName:"getUserOrganizations",environment:e,data:{}});if("success"===t.type)return t.data;if("failed"===t.type)throw t.error;return(0,i().t1)(t)}),[e]);return{organizationsInfo:(null==r?void 0:r.organizationsInfo)??[],loading:"pending"===t||"idle"===t,error:a,refresh:l}}},685958:(e,t,a)=>{a.d(t,{ZV:()=>C,cT:()=>k,vn:()=>_,yJ:()=>T});a(241792),a(667294);var s=()=>a(142735),n=()=>a(846550),i=()=>a(757665),o=()=>a(788860),r=()=>a(707513),l=()=>a(459805),d=()=>a(998901),c=()=>a(876822),u=()=>a(745740),m=()=>a(668001),g=()=>a(661641),p=()=>a(943620),h=()=>a(401102),f=()=>a(654133),x=()=>a(981583),v=()=>a(816559),y=()=>a(945634),b=()=>a(352947),S=()=>a(305885),j=()=>a(69740),w=()=>a(574740),M=a(785893);function C(e){let{sidebarTitle:t,sidebarByline:a,sidebarTitleIcon:s,sidebarItemsTitle:i,topEntitySection:o,bottomEntitySection:c,items:m,hideSeparator:p,renderTooltip:h}=e;const x=(0,n().yK)((e=>({container:{background:e.surface.wash,boxShadow:p?void 0:e.sidebarBoxShadow,padding:8,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:12},itemButton:{fontWeight:r().Ue.medium,color:e.regularTextColor,...(0,l().G$)({isMobile:!1})},itemIcon:{fill:e.mediumIconColor,width:18},selectedItemIcon:{fill:e.regularIconColor,width:18},selectedItemButton:{background:e.buttonHoveredBackground},disabledItemButton:{opacity:.3},sidebarItemContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},divider:{color:e.lightDividerColor},titleContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:8,gap:10},titleTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2,width:"100%"},text:{...r().Yu,width:"100%"},titleIconStyle:{width:16,height:16,color:e.primaryBlack,marginRight:8},bottomEntitySection:{position:"absolute",bottom:0,paddingBottom:8},sidebarItemsContainer:{display:"flex",flexDirection:"column",gap:1},sidebarItemsTitleContainer:{display:"flex",flexDirection:"column",padding:8}})),[p]);return(0,M.jsxs)("div",{style:x.container,children:[(0,M.jsxs)("div",{style:x.titleContainer,children:[s,(0,M.jsxs)("div",{style:x.titleTextContainer,children:[(0,M.jsx)(g().q,{styleName:"UIHeading-17px/Semibold",customStyles:x.text,children:t}),(0,M.jsx)(g().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:x.text,children:a})]})]}),o,(0,M.jsxs)("div",{style:x.sidebarItemsContainer,children:[i?(0,M.jsx)("div",{style:x.sidebarItemsTitleContainer,children:(0,M.jsx)(g().q,{colorName:"secondary",styleName:"UISmall-12px/Medium",children:i})}):null,m.map((e=>{const t=e.isSelected?{...x.itemButton,...x.selectedItemButton}:x.itemButton,a=e.disabled?{...t,...x.disabledItemButton}:t,s=e.isSelected?x.selectedItemIcon:x.itemIcon;return(0,M.jsx)(f().Z,{disableTooltip:!e.disabled,renderTooltip:()=>null==h?void 0:h(e),render:t=>(0,M.jsx)(u().Z,{style:a,disabled:e.disabled,...t,children:(0,M.jsx)(y().Z,{style:x.sidebarItemContainer,left:e.icon(s),onClick:()=>{e.disabled||e.onClick()},children:e.name})},e.id),placement:d().Placement.Right},e.id)}))]}),(0,M.jsx)("div",{style:x.bottomEntitySection,children:c})]})}function _(e){let{userStore:t}=e;const a=(0,o().YB)(),i=(0,n().yK)((e=>({container:{padding:"0px 8px",background:e.surface.wash},iconStyle:{color:e.lightTextColor,fontWeight:500},preamble:{display:"block",fontSize:12,fontWeight:500,color:e.lightTextColor}})),[]),r=(0,s().VK)((()=>c().default.state.currentUserStore),[]),l=t??r,d=void 0===t,u=(0,s().VK)((()=>{if(l)return{userName:l.getDisplayName(a),userEmail:l.getEmail()}}),[a,l]);return(0,M.jsxs)("div",{style:i.container,children:[d&&(0,M.jsx)(g().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,M.jsx)(o()._H,{id:"settingsConsole.sidebar.userSection.loggedInAs",defaultMessage:"Logged in as"})}),l&&u?(0,M.jsx)(h().iP,{title:u.userName,byline:u.userEmail,iconSize:S().Tr,iconMargin:8,icon:(0,M.jsx)(x().Z,{size:S().Tr,userStore:l,iconStyle:i.iconStyle})}):(0,M.jsx)(v().L,{iconSize:S().Tr})]})}function T(e){const{organizationId:t,iconSize:a=36}=e,{state:r}=(0,j().J)(),l=(0,w().k)({organizationId:t}),d=(0,n().yK)((e=>({container:{padding:"0px 8px",background:e.surface.wash},iconStyle:{color:e.lightTextColor,fontWeight:500},preamble:{display:"block",fontSize:12,fontWeight:500,color:e.lightTextColor}})),[]),c=(0,s().VK)((()=>l?(0,M.jsx)(p().Z,{disabled:!0,icon:l.getIcon(),defaultIcon:(0,i().K)(),isEmptyPage:!1,size:a}):(0,M.jsx)(m().Z,{style:{height:a,width:a,borderRadius:4}})),[l,a]),u=(0,s().VK)((()=>l?l.getName():(0,M.jsx)(m().Z,{style:{height:14,width:70,borderRadius:4}})),[l]),f=(0,s().VK)((()=>{var e;return r.value?(0,M.jsx)(b().To,{memberCount:(null===(e=r.value)||void 0===e?void 0:e.memberCount)||0}):(0,M.jsx)(m().Z,{style:{height:14,width:100,borderRadius:4,marginTop:4}})}),[r.value]);return(0,M.jsxs)("div",{style:d.container,children:[(0,M.jsx)(g().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,M.jsx)(o()._H,{id:"settingsConsole.sidebar.childOfOrganization.preamble",defaultMessage:"Part of organization"})}),(0,M.jsx)(h().iP,{title:u,byline:f,iconSize:a,icon:c,iconMargin:8})]})}function k(){return(0,M.jsx)(o()._H,{defaultMessage:"Coming soon",id:"orgConsole.baseSidebar.comingSoon"})}},83315:(e,t,a)=>{a.d(t,{hy:()=>Hp,eT:()=>Ip,ow:()=>Pp,n1:()=>Dp,C0:()=>Vp,Tv:()=>Np,qc:()=>Rp,W$:()=>Up,PU:()=>Op,em:()=>zp,FL:()=>Ap,ib:()=>Bp,Uv:()=>Lp});var s=a(667294),n=()=>a(827282),i=a(785893);const o=(0,n().IU)("briefcaseOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("g",{children:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})})}),r=(0,n().IU)("chartLineUptrend",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M2.508 15.484V3.781q0-.274.191-.471a.65.65 0 0 1 .486-.199.63.63 0 0 1 .471.199.64.64 0 0 1 .198.471v10.753q0 .192.185.192h12.75q.279 0 .478.191a.63.63 0 0 1 .205.479q0 .285-.205.478a.66.66 0 0 1-.479.191H3.096a.58.58 0 0 1-.431-.164.56.56 0 0 1-.157-.417m1.23-3.732-.957-.95 3.083-3.124q.246-.26.486-.37a1.16 1.16 0 0 1 .998.007q.245.11.485.363l2.44 2.522q.09.096.178.096.096 0 .185-.096l2.652-2.707-1.06-1.066q-.15-.144-.15-.308 0-.165.116-.3a.62.62 0 0 1 .329-.192l4.012-1.025a.46.46 0 0 1 .342.034q.157.075.24.232.081.15.033.342l-1.032 4.02a.62.62 0 0 1-.191.328.45.45 0 0 1-.301.116q-.165 0-.314-.15L14.245 8.45l-2.81 2.823q-.485.48-.984.479a1.2 1.2 0 0 1-.506-.116 1.6 1.6 0 0 1-.478-.363l-2.44-2.529q-.09-.09-.178-.089-.096 0-.185.09z"})});var l=()=>a(406998),d=()=>a(443417);const c=(0,n().IU)("newCollectionList",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M7.108 6.523a.65.65 0 0 1-.464-.184.65.65 0 0 1-.185-.465q0-.273.185-.458a.63.63 0 0 1 .464-.191h9.284q.273 0 .464.191a.6.6 0 0 1 .192.458.645.645 0 0 1-.656.65H7.108Zm0 4.198a.65.65 0 0 1-.464-.185.65.65 0 0 1-.185-.465q0-.273.185-.458a.63.63 0 0 1 .464-.191h9.284q.273 0 .464.191a.6.6 0 0 1 .192.458.645.645 0 0 1-.656.65zm0 4.197a.65.65 0 0 1-.464-.185.62.62 0 0 1-.185-.458.63.63 0 0 1 .185-.465.63.63 0 0 1 .464-.19h9.284q.273 0 .464.19a.63.63 0 0 1 .192.465.645.645 0 0 1-.656.643zM3.91 6.838a.95.95 0 0 1-.683-.28.93.93 0 0 1-.28-.684.93.93 0 0 1 .28-.684.95.95 0 0 1 .683-.28q.396 0 .677.28a.92.92 0 0 1 .287.684.92.92 0 0 1-.287.684.92.92 0 0 1-.677.28m0 4.197a.95.95 0 0 1-.683-.28.95.95 0 0 1-.28-.684q0-.396.28-.676a.93.93 0 0 1 .683-.288q.396 0 .677.288a.91.91 0 0 1 .287.676.93.93 0 0 1-.287.684.92.92 0 0 1-.677.28m0 4.197a.95.95 0 0 1-.683-.28.92.92 0 0 1-.28-.677.93.93 0 0 1 .28-.683.95.95 0 0 1 .683-.28q.396 0 .677.28a.92.92 0 0 1 .287.683q0 .397-.287.677a.92.92 0 0 1-.677.28"})}),u=(0,n().IU)("newDocMagnifyingGlass",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M6.356 17.208q-1.093 0-1.66-.567-.561-.568-.561-1.675V4.657q0-1.1.56-1.668.568-.574 1.661-.574h7.288q1.093 0 1.654.567.56.568.56 1.675v6.905a3.6 3.6 0 0 0-.615-.54 3.3 3.3 0 0 0-.724-.383v-5.9q0-.472-.26-.724-.254-.26-.732-.26H6.473q-.493 0-.745.26-.247.252-.247.724v10.159q0 .478.247.724.252.246.745.246h2.83a3.35 3.35 0 0 0 .916 1.34zm1.149-10.67A.43.43 0 0 1 7.06 6.1a.4.4 0 0 1 .123-.301.44.44 0 0 1 .32-.123h4.998q.184 0 .308.123a.42.42 0 0 1 0 .608.4.4 0 0 1-.308.13H7.505Zm0 2.33a.44.44 0 0 1-.321-.123.44.44 0 0 1-.123-.314.4.4 0 0 1 .123-.301.44.44 0 0 1 .32-.123h4.998q.184 0 .308.123a.4.4 0 0 1 .13.3.43.43 0 0 1-.13.315.42.42 0 0 1-.308.123zm5.346 8.34a2.9 2.9 0 0 1-1.511-.41 3.14 3.14 0 0 1-1.1-1.087 2.9 2.9 0 0 1-.41-1.51q0-.836.41-1.518.416-.69 1.1-1.094a2.9 2.9 0 0 1 1.51-.41q.835 0 1.518.41a3.03 3.03 0 0 1 1.087 1.087q.41.684.41 1.524a2.87 2.87 0 0 1-.41 1.51 3.03 3.03 0 0 1-1.087 1.088q-.683.41-1.517.41m0-1.04q.54 0 .984-.266.45-.266.718-.717.266-.445.266-.985 0-.546-.266-.991a2 2 0 0 0-.718-.711 1.84 1.84 0 0 0-.984-.273 1.9 1.9 0 0 0-.999.273 2.1 2.1 0 0 0-.717.711 1.9 1.9 0 0 0-.267.991q0 .54.267.985.273.45.717.717.452.267.999.267Zm3.575 2.284a.73.73 0 0 1-.527-.232l-1.859-1.86.943-.868 1.853 1.853a.64.64 0 0 1 .205.458q0 .28-.178.465a.58.58 0 0 1-.437.184"})});var m=()=>a(93287);const g=(0,n().IU)("personOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M5.734 16.45q-1.743 0-1.743-1.177 0-.696.417-1.463.424-.765 1.21-1.428a6.4 6.4 0 0 1 1.9-1.073q1.108-.417 2.489-.417 1.367 0 2.474.417 1.115.409 1.9 1.073.787.663 1.204 1.428.423.767.424 1.463 0 1.176-1.743 1.176H5.734Zm-.218-1.183h8.975q.116 0 .164-.041.055-.042.055-.137 0-.396-.308-.902-.307-.513-.916-.992-.6-.485-1.476-.8-.876-.32-2.003-.32-1.135 0-2.017.32-.875.315-1.476.8-.602.48-.916.992-.308.506-.308.902 0 .096.048.137.054.04.178.04Zm4.49-5.175a2.75 2.75 0 0 1-1.51-.438 3.2 3.2 0 0 1-1.08-1.169 3.34 3.34 0 0 1-.403-1.627q0-.875.403-1.592a3.2 3.2 0 0 1 1.08-1.156 2.8 2.8 0 0 1 1.51-.43q.828 0 1.505.424.684.423 1.08 1.141a3.2 3.2 0 0 1 .403 1.6q0 .895-.403 1.634a3.2 3.2 0 0 1-1.08 1.175 2.7 2.7 0 0 1-1.504.438Zm0-1.19q.48 0 .876-.266a2 2 0 0 0 .636-.739q.24-.471.239-1.052a2.1 2.1 0 0 0-.24-1.012 1.87 1.87 0 0 0-.635-.71 1.56 1.56 0 0 0-.875-.26q-.479 0-.875.266-.396.26-.636.71-.24.452-.24 1.02 0 .573.24 1.045.24.465.636.732.403.266.875.266Z"})}),p=(0,n().IU)("personTwoCircle",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.993 17.126a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.727q0-1.45.553-2.728a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25q.555 1.278.554 2.728 0 1.449-.553 2.727a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202q0 1.182.438 2.208a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm-.321-3q-.396 0-.56-.117a.41.41 0 0 1-.158-.341q0-.417.335-.875.335-.459.95-.78t1.463-.321q.84 0 1.45.321.615.321.943.78.335.458.335.875a.41.41 0 0 1-.157.341q-.158.116-.561.116zm2.03-3.015q-.533 0-.923-.417a1.44 1.44 0 0 1-.39-1.019q0-.594.39-.998a1.234 1.234 0 0 1 1.833-.007q.39.397.389.998 0 .609-.39 1.026-.382.417-.909.417m-5.55 3.014q-.322 0-.459-.13-.13-.129-.13-.369 0-.437.294-.888.294-.452.828-.752.54-.308 1.264-.308a2.54 2.54 0 0 1 1.408.41q-.362.28-.594.663a2 2 0 0 0-.287.76q-.055.368.116.614zm1.797-2.946q-.458 0-.8-.362a1.3 1.3 0 0 1-.341-.889q0-.513.341-.868a1.076 1.076 0 0 1 1.593-.007q.342.35.342.868 0 .534-.342.896a1.05 1.05 0 0 1-.793.362"})});var h=()=>a(757665);const f=(0,n().IU)("team2",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.303 16.45q-1.743 0-1.743-1.177 0-.696.417-1.463.423-.765 1.21-1.428.793-.663 1.9-1.073 1.107-.417 2.481-.417 1.375 0 2.482.417 1.114.409 1.9 1.073t1.203 1.428q.424.767.424 1.463 0 1.176-1.75 1.176H9.303Zm-.226-1.183h8.976q.123 0 .17-.041.055-.042.055-.137 0-.396-.307-.902-.307-.513-.916-.992-.602-.485-1.484-.8-.874-.32-2.003-.32-1.134 0-2.01.32-.874.315-1.476.8-.601.48-.916.992-.308.506-.308.902 0 .096.048.137.056.04.171.04Zm4.491-5.175a2.73 2.73 0 0 1-1.503-.438 3.2 3.2 0 0 1-1.08-1.169 3.34 3.34 0 0 1-.404-1.627 3.2 3.2 0 0 1 .403-1.592 3.2 3.2 0 0 1 1.08-1.156q.684-.43 1.504-.43.834 0 1.511.424.684.423 1.08 1.141a3.2 3.2 0 0 1 .404 1.6q0 .895-.404 1.634a3.2 3.2 0 0 1-1.087 1.175 2.7 2.7 0 0 1-1.504.438m0-1.19q.486 0 .882-.273t.636-.738q.24-.472.24-1.046 0-.56-.24-1.012a1.9 1.9 0 0 0-.636-.71 1.58 1.58 0 0 0-.882-.26 1.5 1.5 0 0 0-.868.266 1.9 1.9 0 0 0-.635.718q-.24.45-.24 1.011 0 .575.24 1.04.238.464.635.738.405.266.868.266M1.886 16.45q-.732 0-1.1-.307-.37-.308-.37-.923 0-.848.403-1.627.411-.787 1.128-1.395a5.5 5.5 0 0 1 1.668-.957 5.8 5.8 0 0 1 2.03-.355q.534 0 1.06.095.526.089 1.019.274.498.184.936.451a3.2 3.2 0 0 0-.882.861 3.3 3.3 0 0 0-.65-.28 5 5 0 0 0-.724-.178A4.6 4.6 0 0 0 4.1 12.3a4.5 4.5 0 0 0-1.285.691q-.553.43-.875.985-.314.546-.314 1.134 0 .096.041.137.048.04.15.041h4.806q-.035.342.13.67.164.335.444.492zm3.766-6.282q-.717 0-1.312-.383a2.84 2.84 0 0 1-.944-1.025 3 3 0 0 1-.348-1.436A2.83 2.83 0 0 1 4.34 4.917a2.38 2.38 0 0 1 1.312-.383q.718 0 1.306.376.594.376.943 1.005.356.63.356 1.401 0 .78-.356 1.436a2.8 2.8 0 0 1-.943 1.032 2.34 2.34 0 0 1-1.306.383Zm0-1.169q.39 0 .718-.226.328-.225.526-.601a1.8 1.8 0 0 0 .199-.855 1.7 1.7 0 0 0-.199-.82q-.19-.37-.519-.581a1.3 1.3 0 0 0-.725-.212q-.396 0-.724.219a1.6 1.6 0 0 0-.52.58q-.19.37-.191.821 0 .465.191.848.198.383.527.608.328.219.717.219"})});var x=()=>a(788860),v=()=>a(749826),y=(a(267602),a(653476),a(241792),()=>a(219727)),b=()=>a(142735),S=()=>a(846550),j=()=>a(989478),w=()=>a(657120),M=()=>a(824462),C=()=>a(308186),_=()=>a(443269),T=()=>a(527278),k=()=>a(466970),I=()=>a(826955),H=()=>a(661641),P=()=>a(233405),D=()=>a(140303),z=()=>a(656984),A=()=>a(829028),N=()=>a(354466),R=()=>a(707513),B=()=>a(943620),L=()=>a(916940),O=()=>a(291198),V=()=>a(830581),U=()=>a(661297),q=()=>a(906651),E=()=>a(921981),Z=()=>a(654133),F=()=>a(167830),W=()=>a(512221),K=()=>a(750824);const G=(0,x().vU)({namePlaceholder:{defaultMessage:"Display name",id:"organization.general.textInput.name.placeholder"},emailPlaceholder:{defaultMessage:"Email",id:"organization.general.textInput.email.placeholder"},descriptionPlaceholder:{defaultMessage:"Description",id:"organization.general.textInput.description.placeholder"}});function Y(e){let{editButtonText:t,isEditing:a,setIsEditing:s,onCancel:n,onSave:o,disabled:r,disabledTooltipText:l,saveButtonText:d}=e;const c=(0,S().yK)((e=>({container:{marginLeft:"auto",display:"flex",gap:8},cancelButton:{fontSize:R().JB.UIRegular.desktop,fontWeight:R().Ue.medium}})),[]);return!1===a?(0,i.jsx)("div",{style:c.container,children:(0,i.jsx)(Z().Z,{disableTooltip:!r||!l,renderTooltip:()=>l,render:e=>(0,i.jsx)(U().Z,{style:{marginLeft:"auto"},size:"sm",onClick:()=>s(!0),disabled:r,disabledFeedback:r,...e,children:t})})}):(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(U().Z,{onClick:n,size:"sm",style:{...c.cancelButton},disabled:r,disabledFeedback:r,children:(0,i.jsx)(x()._H,{id:"organization.general.cancel.button",defaultMessage:"Cancel"})}),(0,i.jsx)(q().Z,{onClick:o,disabled:r,children:d??(0,i.jsx)(x()._H,{id:"organization.general.save.button",defaultMessage:"Save"})})]})}function $(e){const{title:t,byline:a,icon:n,onSave:o,onNameChange:r,onDescriptionChange:l,onEmailChange:d,onDismiss:c,disabled:u,disabledTooltipText:m}=e,g=(0,x().YB)(),[p,h]=(0,s.useState)(!1),[f,v]=(0,s.useState)(e.name),[y,b]=(0,s.useState)(e.email),[j,w]=(0,s.useState)(e.description);(0,s.useEffect)((()=>{r(f)}),[r,f]),(0,s.useEffect)((()=>{y&&(null==d||d(y))}),[d,y]),(0,s.useEffect)((()=>{null==l||l(j)}),[l,j]),(0,s.useEffect)((()=>{v(e.name)}),[e.name]),(0,s.useEffect)((()=>{b(e.email)}),[e.email]),(0,s.useEffect)((()=>{w(e.description)}),[e.description]);const M=function(e){return(0,S().yK)((t=>({container:{marginLeft:"auto",display:"flex",gap:8,opacity:e?.3:1},icon:{height:32,width:32,fill:t.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,width:392,overflowY:"auto"},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground}})),[e])}(u);function C(){h(!1),c()}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z().Z,{disableTooltip:!u||!m,renderTooltip:()=>m,render:e=>(0,i.jsx)("div",{style:M.container,children:(0,i.jsx)(K().mk,{onClick:()=>h(!0),...e,disabled:u,children:(0,i.jsx)(x()._H,{id:"organization.general.editProfile.button",defaultMessage:"Edit details"})})})}),p?(0,i.jsx)(E().c,{isOpen:!0,onDismiss:C,areaConstraint:{height:{type:"min",length:300}},render:s=>{let{sizeRange:r}=s;return(0,i.jsx)(V().sR,{showDismissButton:!1,sizeRange:r,header:(0,i.jsx)(W().xB,{icon:n(M.icon),title:t,byline:a}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"organization.general.editDetailsModal.button.saveChanges",defaultMessage:"Save changes"}),primaryAction:async()=>{await o(),C()},primaryDisabled:!1,secondaryText:(0,i.jsx)(x()._H,{id:"organization.general.editDetailsModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:C}),children:(0,i.jsx)("div",{style:M.content,children:(0,i.jsxs)("div",{style:M.inputContainer,children:[(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(F().Z,{children:(0,i.jsx)(x()._H,{id:"organization.general.editDetailsModal.details.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)(O().Z,{style:M.input,value:f,placeholder:g.formatMessage(G.namePlaceholder),onChange:e=>{v(e.target.value)}})]}),e.description||l?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(F().Z,{children:(0,i.jsx)(x()._H,{id:"organization.general.editDetailsModal.details.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(O().Z,{style:M.input,value:j,textarea:!0,autosizeMinHeight:100,autosizeMaxHeight:600,placeholder:g.formatMessage(G.descriptionPlaceholder),onChange:e=>{w(e.target.value)}})]}):null,e.email?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(F().Z,{children:(0,i.jsx)(x()._H,{id:"organization.general.editDetailsModal.details.emailLabel",defaultMessage:"Email"})}),(0,i.jsx)(O().Z,{style:M.input,value:y,placeholder:g.formatMessage(G.emailPlaceholder),onChange:e=>{b(e.target.value)}})]}):null]})})})}}):null]})}function J(e){const{title:t,byline:a,icon:s,onSave:n,onCancel:o,onIconChange:r,onNameChange:l,onDescriptionChange:d,localIconWithPointer:c,entityName:u,entityDescription:m,entityDescriptionText:g,disabled:p,disabledTooltipText:f}=e,x=(0,S().yK)((()=>({container:{display:"flex",gap:16,flexDirection:"column",marginBottom:36},profileContainer:{display:"flex"},metadataContainer:{gap:10,display:"flex",flexDirection:"column"},orgName:{fontSize:26,fontWeight:R().Ue.bold},bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row-reverse"},icon:{borderRadius:L().E.large,marginTop:-88},defaultIcon:{padding:20,backgroundColor:"rgba(220, 220, 220, 0.2)",borderRadius:L().E.large}})),[]);return(0,i.jsxs)("div",{style:x.container,children:[(0,i.jsx)(B().Z,{disabled:Boolean(p),bucket:"public",icon:c,defaultIcon:(0,h().K)(x.defaultIcon),isEmptyPage:!1,size:80,onChange:r,style:x.icon}),(0,i.jsxs)("div",{style:x.profileContainer,children:[(0,i.jsxs)("div",{style:x.metadataContainer,children:[(0,i.jsx)(H().q,{styleName:"UITitle-26px/Bold",children:u}),m]}),(0,i.jsx)($,{title:t,byline:a,icon:s,name:u,description:g,onSave:n,onNameChange:l,onDescriptionChange:d,onDismiss:o,disabled:p,disabledTooltipText:f})]})]})}function Q(){const e=(0,S().yK)((e=>({topRectangle:{width:"100%",height:100,backgroundColor:"light"===e.mode?"rgba(252, 252, 252, 1)":"rgba(35,35,35,1)"}})),[]);return(0,i.jsx)("div",{style:e.topRectangle})}var X=()=>a(970198);function ee(e){let{children:t}=e;const a=(0,S().yK)((()=>({container:{width:"100%",padding:48}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var te=()=>a(368634),ae=()=>a(909763),se=()=>a(668001),ne=()=>a(292089),ie=()=>a(653363);function oe(e){let{memberCount:t,sampleMemberUserStores:a,onClick:s,disabled:n,isLoading:o}=e;const r=(0,ne().o)();return(0,i.jsx)(te().Z,{disabled:n,isLoading:o,headerText:(0,i.jsx)(x()._H,{id:"organization.general.members.title",defaultMessage:"Members"}),mainText:void 0===t||o?(0,i.jsx)(se().Z,{style:r.longTallShimmer}):(0,i.jsx)(x()._H,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}}),bottom:(0,i.jsx)(ie().s,{users:a,totalMemberCount:t,isLoading:o}),onClick:s})}var re=()=>a(352947),le=()=>a(629719),de=()=>a(224597),ce=()=>a(594546),ue=()=>a(148126),me=()=>a(345918),ge=()=>a(996379),pe=()=>a(876822),he=()=>a(518019),fe=()=>a(696489),xe=()=>a(730971),ve=()=>a(439871),ye=()=>a(471645),be=()=>a(991331);function Se(e){let{title:t,byline:a,isToggledOn:s,onToggle:n,badge:o,isLocked:r,lockedTooltip:l}=e;const d=(0,ve().M)(),c=(0,ve().M)();return(0,i.jsx)(be().N,{title:t,titleId:d,byline:a,bylineId:c,item:(0,i.jsx)(ye().Z,{"aria-labelledby":d,"aria-describedby":c,on:s,onClick:n,isLocked:r,lockedTooltip:l}),badge:o})}function je(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(xe().T,{children:[(0,i.jsx)(we,{spaceStore:t}),(0,i.jsx)(Me,{spaceStore:t,organizationId:a}),(0,i.jsx)(Ce,{spaceStore:t})]})}function we(e){let{spaceStore:t}=e;const a=(0,y().O7)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(D().V),o=(0,b().VK)((()=>t.getSetting("enable_ai_feature")??!1),[t]),[r,l]=(0,s.useState)(o),d=(0,b().VK)((()=>t.id),[t]),c=(0,b().VK)((()=>{var e;if(!(null===(e=pe().default.state.currentUserStore)||void 0===e?void 0:e.id))return!1;const t=he().Z.getData(a,{spaceId:d});return(0,le().aV)(null==t?void 0:t.subscription).includes("ai")}),[a,d]),u=(0,s.useCallback)((async()=>{const e=!r;if(!1===e&&c){if(!(await C().gt({message:(0,i.jsx)(x()._H,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAiWarning",defaultMessage:"Your current plan includes Notion AI. You can turn off access to AI, but you will continue to be billed for it."}),acceptLabel:(0,i.jsx)(x()._H,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAccept",defaultMessage:"Turn off AI"})})).accept)return}l(e);const t=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:d,spaceSettings:{enable_ai_feature:e}}});"success"===t.type?n({data:t.data}):C().UW((0,_().wf)(T().Z.getIntl(),t))}),[c,r,a,d,n]);return(0,i.jsx)(Se,{title:(0,i.jsx)(x()._H,{id:"featureSettings.ai.title",defaultMessage:"Notion AI"}),byline:(0,i.jsx)(x()._H,{id:"featureSettings.ai.description",defaultMessage:"Enable AI-powered features for all workspace members. By activating Notion AI, you agree to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe().X,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,children:e})}}),isToggledOn:r,onToggle:u})}function Me(e){let{spaceStore:t,organizationId:a}=e;const n=(0,y().O7)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(D().V),r=(0,b().VK)((()=>(0,me().CV)(t)),[t]),[l,d]=(0,s.useState)(r),[c,u]=s.useState(!1),[m,g]=s.useState(!1),p=(0,s.useCallback)((async()=>{u(!1);const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:n,data:{spaceId:t.id,spaceSettings:{zero_retention_enabled:!l}}});"success"===e.type?(o({data:e.data}),de().FB(n,t),await M().callApi({eventName:"sendHIPAACompliancyUpdate",environment:n,data:{spaceId:t.id,isDisablingHIPAA:l,organizationId:a}}),g(!0)):C().UW((0,_().wf)(T().Z.getIntl(),e))}),[n,t,l,o,a]),h=(0,s.useCallback)((()=>{u(!0)}),[]);return(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsx)(ge().ZM,{isOpen:!0,onClose:()=>u(!1),onConfirmDecision:p,isDisablingHIPAACompliancy:l}),m&&(0,i.jsx)(ge().kg,{isOpen:!0,hasDisabledHIPAACompliancy:l,onClose:()=>{g(!1),d(!l)}}),(0,i.jsx)(Se,{title:(0,i.jsx)(x()._H,{id:"featureSettings.hipaa.title",defaultMessage:"HIPAA Compliance"}),byline:(0,i.jsx)(x()._H,{id:"featureSettings.hipaa.description",defaultMessage:"Enable HIPAA compliance to securely store and process Protected Health Information (PHI). By enabling, you agree to the <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe().X,{href:(0,ue().UY)("guides.hipaaBAA"),external:!0,children:e})}}),isToggledOn:l,onToggle:h})]})}function Ce(e){let{spaceStore:t}=e;const a=(0,y().O7)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(D().V),o=(0,b().VK)((()=>t.id),[t]),r=(0,b().VK)((()=>t.getName()??""),[t]),l=(0,b().VK)((()=>t.getSettings().disable_page_analytics??!1),[t]),[d,c]=(0,s.useState)(l),u=(0,s.useCallback)((async()=>{const e=!d,t=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:o,spaceSettings:{disable_page_analytics:e}}});"success"===t.type?(n({data:t.data}),ce().K4(a,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in"),c(e)):C().UW((0,_().wf)(T().Z.getIntl(),t))}),[d,a,o,n]);return(0,i.jsx)(Se,{title:(0,i.jsx)(x()._H,{id:"featureSettings.pageAnalytics.title",defaultMessage:"Page analytics"}),byline:(0,i.jsx)(x()._H,{id:"featureSettings.pageAnalytics.description",defaultMessage:"Allow members with edit or full access to view page analytics. If disabled, page view data will not be stored for pages in this workspace.",values:{workspaceName:r}}),isToggledOn:!d,onToggle:u})}var _e=()=>a(591914),Te=()=>a(491927),ke=()=>a(437594),Ie=()=>a(441275),He=()=>a(315403),Pe=()=>a(325803);function De(e){let{spaceStore:t,onCloseModal:a,organizationId:n}=e;const o=(0,y().O7)(),r=(0,x().YB)(),[l,d]=(0,s.useState)(!1),{refreshOrganization:c}=(0,s.useContext)(z().g),u=(0,s.useCallback)((()=>{d(!0)}),[]),m=(0,b().VK)((()=>he().Z.getData(o,{spaceId:t.id})),[o,t.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ie().v,{}),(0,i.jsx)(He().V,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.deleteWorkspace.title",defaultMessage:"Delete workspace"}),byline:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.deleteWorkspace.caption",defaultMessage:"To confirm deletion, you'll need to enter the workspace name. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe().X,{href:(0,ue().UY)("guides.deleteWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.deleteWorkspace.button",defaultMessage:"Delete workspace"}),type:"danger",onClick:u,modal:l?(0,i.jsx)(ke().iI,{isOpen:!0,billingData:m,onClose:()=>d(!1),onConfirmDelete:async()=>{Te().YO(o),await(0,Pe().Sx)(t,r,o,(async()=>{await c(),a()}),n)},spaceStore:t}):null})]})}var ze=()=>a(998411);const Ae=(0,n().IU)("newArrowDownLine",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M15.291 10.536a.76.76 0 0 1-.232.547l-4.505 4.512a.7.7 0 0 1-.26.178.74.74 0 0 1-.595 0 .8.8 0 0 1-.26-.178l-4.504-4.512a.76.76 0 0 1-.233-.547.704.704 0 0 1 .718-.724q.158 0 .294.061a.7.7 0 0 1 .24.157l1.55 1.532 2.284 2.543-.458.225-.082-2.235v-8.49q0-.33.205-.54A.74.74 0 0 1 10 2.852q.328 0 .533.211a.73.73 0 0 1 .212.54v8.49l-.082 2.236-.451-.226 2.276-2.542 1.552-1.532a.7.7 0 0 1 .24-.157.7.7 0 0 1 .293-.061.704.704 0 0 1 .718.725m0 6.03a.74.74 0 0 1-.205.533.68.68 0 0 1-.513.212h-9.14a.7.7 0 0 1-.526-.212.74.74 0 0 1-.205-.534q0-.315.205-.526a.71.71 0 0 1 .527-.205h9.14q.306 0 .512.205a.73.73 0 0 1 .205.526Z"})});var Ne=()=>a(174912),Re=()=>a(827973),Be=()=>a(388284),Le=()=>a(522319),Oe=()=>a(749854),Ve=()=>a(487974);const Ue=["pdf","html","markdown"],qe=["currentView","all"],Ee=["everything","no_files"];function Ze(e){let{onDismiss:t,spaceId:a,organizationId:n}=e;const o=(0,S().yK)((e=>({icon:{height:24,width:24,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:12,width:480},switcherContainer:{marginTop:4}})),[]),[r,l]=(0,s.useState)({selectedExportType:"markdown",selectedCollectionViewExportType:"currentView",selectedContent:"everything",createFoldersForSubpages:!0}),d=(0,y().O7)(),c=d.currentUser.id,u=(0,s.useMemo)((()=>[a]),[a]),{teamStores:m}=(0,A().x)(u),g=(0,s.useCallback)((async()=>{t();const e="pdf"===r.selectedExportType?{exportType:r.selectedExportType,collectionViewExportType:r.selectedCollectionViewExportType,timeZone:(0,ze().r)(),pdfFormat:Ne().GI(c),locale:"en"}:{exportType:r.selectedExportType,collectionViewExportType:r.selectedCollectionViewExportType,includeContents:r.selectedContent,flattenExportFiletree:r.createFoldersForSubpages,timeZone:(0,ze().r)(),locale:"en"};await Ne().AW(d,{spaceId:a,exportOptions:e,shouldExportComments:!1},n,m[a])}),[c,d,r,t,a,m,n]);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.modal.title",defaultMessage:"Export all workspace content"}),icon:Ae(o.icon),byline:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.modal.caption",defaultMessage:"You can export all your pages as HTML, Markdown, or CSV (for databases), along with any files you've uploaded, too."})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.modal.button",defaultMessage:"Export"}),primaryAction:g,secondaryText:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)("div",{style:o.content,children:[(0,i.jsx)(Le().Z,{label:(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.exportFormat",defaultMessage:"Export format"})}),selectedTitle:(0,Ve().getBlockExportTypeTitle)(r.selectedExportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,i.jsx)(Be().Z,{...e}),items:Ue.map((t=>({key:t,action:()=>{e.close(),l({...r,selectedExportType:t})},render:e=>(0,i.jsx)(Re().Z,{...e,title:(0,Ve().getBlockExportTypeTitle)(t)})})))}]}),(0,i.jsx)(Le().Z,{label:(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.includeDatabases",defaultMessage:"Include databases"})}),selectedTitle:(0,Ve().getCollectionViewExportTypeTitle)(r.selectedCollectionViewExportType),renderMenuSections:e=>[{key:"includeDatabases",render:e=>(0,i.jsx)(Be().Z,{...e}),items:qe.map((t=>({key:t,action:()=>{e.close(),l({...r,selectedCollectionViewExportType:t})},render:e=>(0,i.jsx)(Re().Z,{...e,title:(0,Ve().getCollectionViewExportTypeTitle)(t)})})))}]}),(0,i.jsx)(Le().Z,{label:(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.includeContent",defaultMessage:"Include content"})}),selectedTitle:(0,Ve().getBlockIncludeContentsTitle)(r.selectedContent),renderMenuSections:e=>[{key:"includeContent",render:e=>(0,i.jsx)(Be().Z,{...e}),items:Ee.map((t=>({key:t,action:()=>{e.close(),l({...r,selectedContent:t})},render:e=>(0,i.jsx)(Re().Z,{...e,title:(0,Ve().getBlockIncludeContentsTitle)(t)})})))}]}),(0,i.jsx)("div",{style:o.switcherContainer,children:(0,i.jsx)(Oe().Z,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.createFoldersForSubpages",defaultMessage:"Create folders for subpages"}),subtitle:"",on:r.createFoldersForSubpages,onChange:()=>l({...r,createFoldersForSubpages:!r.createFoldersForSubpages})})})]})})})}function Fe(e){let{spaceStore:t,organizationId:a}=e;const n=(0,b().VK)((()=>t.id),[t]),[o,r]=(0,s.useState)(!1);return(0,i.jsx)(He().V,{type:"default",title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.title",defaultMessage:"Export workspace content"}),byline:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.caption",defaultMessage:"Export all workspace content for legal and compliance purposes. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe().X,{href:(0,ue().UY)("guides.exportWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportContent.button",defaultMessage:"Export workspace content"}),onClick:()=>r(!0),modal:o&&(0,i.jsx)(Ze,{onDismiss:()=>r(!1),spaceId:n,organizationId:a})})}a(470928);var We=()=>a(513670),Ke=()=>a(801812),Ge=()=>a(921778),Ye=()=>a(839002);function $e(e){let{spaceIds:t}=e;const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(z().g),[i,o]=(0,s.useState)(!1);return(0,Ke().r5)((async()=>{o(!0),await(0,Ye().qd)(t,Ge().v,(e=>n(e))),o(!1)}),[t,n]),{permissionGroupsForSpace:a,loading:i}}function Je(e){let{userIds:t,spaceIds:a}=e;const{userPermissionGroupIdsBySpaceId:n,loadUserPermissionGroupIdsBySpaceId:i}=(0,s.useContext)(z().g),[o,r]=(0,s.useState)(!1);return(0,Ke().r5)((async()=>{r(!0),await(0,Ye().qd)(a,Ge().v,(e=>i(e,t))),r(!1)}),[a,t,i]),{spaceIdToUserPermissionGroupMap:n,loading:o}}function Qe(e){let{spaceStore:t,organizationId:a}=e;const n=function(e,t){const a=(0,x().YB)(),{visibleUsers:n}=(0,N().W)(e.id),i=(0,s.useMemo)((()=>n.map((e=>e.userId))),[n]),o=(0,s.useMemo)((()=>[e.id]),[e.id]),{spaceIdToUserPermissionGroupMap:r}=Je({userIds:i,spaceIds:o}),l=(0,s.useMemo)((()=>r[e.id]),[r,e.id]),{permissionGroupsForSpace:d}=$e({spaceIds:o}),c=(0,y().O7)();return(0,s.useCallback)((async()=>{await M().callApi({eventName:"exportSpaceMembers",environment:c,data:{organizationId:t,spaceId:e.id}});const s={};for(const[t,a]of Object.entries(l)){const n=a.map((t=>d[e.id].find((e=>e.group.group_id===t)))),i=We().oA(n).map((e=>e.group.name)).sort().join(",");s[t]=i}await Ne().aY(e,n,s,a)}),[c,t,e,n,a,l,d])}(t,a);return(0,i.jsx)(He().V,{type:"default",title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportMembers.title",defaultMessage:"Export members"}),byline:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportMembers.caption",defaultMessage:"Download a CSV list of all workspace members. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe().X,{href:(0,ue().UY)("guides.exportMembers"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.exportMembers.button",defaultMessage:"Export members"}),onClick:n})}var Xe=()=>a(384534),et=()=>a(102182),tt=()=>a(715139);function at(e){let{spaceIds:t,onCancel:a,onSubmit:n,organizationId:o,refetchData:r,isSingleWorkspaceAction:l}=e;const d=(0,S().yK)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:440}})),[]),c=(0,y().O7)(),u=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"removeWorkspacesFromOrganization",environment:c,data:{organizationId:o,spaceIds:t}});"success"===e.type?(r(),et().oV({label:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.removeFromOrganization.success",defaultMessage:"{numWorkspaces, plural, one {Removed {numWorkspaces} workspace} other {Removed {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}})}),n()):C().UW((0,_().wf)(T().Z.getIntl(),e))}),[c,o,t,n,r]),[m,g]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)("div",{style:d.modalContainer,children:(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:(0,Xe().L)(d.icon),title:l?(0,i.jsx)(x()._H,{id:"removeWorkspaceFromOrgModal.titleSingle",defaultMessage:"Remove workspace from organization"}):(0,i.jsx)(x()._H,{id:"removeWorkspaceFromOrgModal.title",defaultMessage:"{numWorkspaces, plural, one {Remove {numWorkspaces} workspace} other {Remove {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}}),byline:l?(0,i.jsx)(x()._H,{id:"removeWorkspaceFromOrgModal.bylineSingle",defaultMessage:"Removing this workspace will disable SAML SSO and organization-wide security settings for it."}):(0,i.jsx)(x()._H,{id:"removeWorkspaceFromOrgModal.byline",defaultMessage:"Removing these workspaces will disable SAML SSO and organization-wide security settings for them.",values:{numWorkspaces:t.length}})}),footer:(0,i.jsx)(W().mz,{isDarkRed:!0,primaryDisabled:!m,primaryText:(0,i.jsx)(x()._H,{id:"removeWorkspaceFromOrgModal.removeButton",defaultMessage:"{numWorkspaces, plural, one {Remove workspace} other {Remove workspaces}}",values:{numWorkspaces:t.length}}),primaryAction:u,secondaryText:(0,i.jsx)(x()._H,{id:"removeWorkspaceFromOrgModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:d.confirmation,children:[(0,i.jsx)(tt().Z,{checked:m,size:14,checkSize:10,onClick:()=>g(!m)}),(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"removeWorkspaceFromOrgModal.confirmationText",defaultMessage:"I understand SAML SSO will be disabled for some users"})})]})})})})}function st(e){let{spaceStore:t,organizationId:a,onCloseModal:n}=e;const{refreshOrganization:o,spaceIds:r}=(0,s.useContext)(z().g),l=1===r.length&&r.includes(t.id),d=(0,b().VK)((()=>t.id),[t]),c=(0,s.useMemo)((()=>[d]),[d]),[u,m]=(0,s.useState)(!1),g=(0,s.useCallback)((()=>{m(!0)}),[]),p=(0,s.useCallback)((()=>{m(!1),n()}),[n]);return(0,i.jsx)(He().V,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.removeFromOrganization.title",defaultMessage:"Remove from organization"}),byline:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.removeFromOrganization.caption",defaultMessage:"Remove this workspace from this organization. You can re-add it anytime."}),buttonLabel:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.removeFromOrganization.button",defaultMessage:"Remove from organization"}),tooltipLabel:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.removeFromOrganization.button.disabledTooltip",defaultMessage:"You must have at least one workspace in your organization."}),disabled:!l,type:"danger",onClick:g,modal:u&&(0,i.jsx)(at,{isSingleWorkspaceAction:!0,spaceIds:c,organizationId:a,onCancel:()=>m(!1),onSubmit:p,refetchData:o})})}function nt(e){let{spaceStore:t,organizationId:a,onCloseModal:s}=e;const n=(0,_e().r_)(t),o=(0,b().VK)((()=>(null==n?void 0:n.isMember())??!1),[n]),r=(0,b().VK)((()=>!t.getDisableExport()&&o),[o,t]);return(0,i.jsxs)(xe().T,{children:[(0,i.jsx)(Qe,{spaceStore:t,organizationId:a}),r&&(0,i.jsx)(Fe,{spaceStore:t,organizationId:a}),(0,i.jsx)(st,{spaceStore:t,organizationId:a,onCloseModal:s}),(0,i.jsx)(De,{spaceStore:t,organizationId:a,onCloseModal:s})]})}var it=()=>a(38883),ot=()=>a(446866),rt=()=>a(619186),lt=()=>a(155055),dt=()=>a(352230),ct=()=>a(277533),ut=()=>a(656221),mt=()=>a(198829),gt=()=>a(255577),pt=()=>a(967092),ht=()=>a(196234),ft=()=>a(78014),xt=()=>a(101225);function vt(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(xe().T,{children:[(0,i.jsx)(St,{spaceStore:t,organizationId:a}),(0,i.jsx)(yt,{spaceStore:t,organizationId:a})]})}function yt(e){let{spaceStore:t,organizationId:a}=e;const s=(0,S().yK)((()=>({textContainer:{display:"flex",flexDirection:"column",maxWidth:"70%"}})),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:s.textContainer,children:[(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",children:(0,i.jsx)(x()._H,{id:"orgConsole.shareSettings.emailDomains.title",defaultMessage:"Enable organization-wide access"})}),(0,i.jsx)(H().q,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"orgConsole.shareSettings.emailDomains.caption",defaultMessage:"Add your company email domain to let team members discover and share workspace pages, even if they’re not on Notion."})})]}),(0,i.jsx)(bt,{spaceStore:t,organizationId:a})]})}function bt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,x().YB)(),o=(0,y().O7)(),[r,l]=(0,s.useState)(""),d=(0,s.useCallback)((e=>{l(e.target.value)}),[]),c=(0,b().VK)((()=>t.getEmailDomains()),[t]);(0,s.useEffect)((()=>{m(c)}),[c]);const[u,m]=(0,s.useState)(c),g=(0,b().VK)((()=>{var e;return null===(e=pe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[p]=(0,Ke().r5)((async()=>({trustedDomainNumMembers:await(0,ut().JT)({environment:o,spaceId:t.id,currentUserId:g,organizationId:a})})),[o,t,g,a]),h=(0,b().VK)((()=>{if("resolved"!==p.status)return[];const e=p.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,ut().yP)({trustedDomainIds:e,spaceStore:t})}),[t,p]),f=(0,b().VK)((()=>We().oA(h.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[h]),{updateCacheWithRecordMap:v}=(0,s.useContext)(D().V),S=(0,s.useCallback)((async e=>{m(e);const s=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:o,data:{spaceId:t.id,organizationId:a,emailDomains:e}});"success"===s.type?v({data:s.data}):C().UW((0,_().wf)(T().Z.getIntl(),s))}),[o,t.id,a,v]),k=(0,b().VK)((()=>t.getSpaceId()),[t]),{visibleUsers:I,joinedUserIds:H}=(0,N().W)(k);return(0,i.jsx)(pt().ZP,{popupType:pt().kQ.Popup,sameWidthAsOrigin:!0,open:r.length>0,origin:(0,i.jsx)(xt().Z,{placeholder:n.formatMessage({id:"orgConsole.shareSettings.emailDomains.placeholder",defaultMessage:"Type an email domain…"}),value:r,onChange:d,onRemoveLastToken:async()=>{const e=u.slice(0,u.length-1);await S(e)},tokens:u.map((e=>(0,i.jsx)(ft().Z,{showRemoveButton:!0,isSingle:!1,format:it().lo.Medium,onClickRemove:async()=>{const t=u.filter((t=>t!==e));await S(t)},value:e},e)))}),render:()=>{const e=r.trim(),t=(0,i.jsx)(x()._H,{id:"orgConsole.shareSettings.emailDomains.headerTitle",defaultMessage:"Type an email domain…"}),a=(0,i.jsx)(x()._H,{id:"orgConsole.shareSettings.emailDomains.headerTitleNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),s=[...c,...f],n=I.filter((e=>(0,w().nB)(e)&&H.includes(e.userId))).map((e=>{const t=new(ct().U)(o,{table:j().KJ,id:e.userId}).getEmail();if(t)return(0,ot().Gd)(t)})).filter(((e,t,a)=>Boolean(e&&t===a.indexOf(e)&&!s.includes(e)))),d=(0,rt().ZP)(e,n,(e=>e)).map(((e,t)=>({key:t,render:t=>(0,i.jsx)(Re().Z,{...t,title:e}),action:async()=>{const t=[...u,e];await S(t),l("")}}))),m={menuType:dt().o.Popup,width:"100%"};return(0,i.jsx)(mt().Z,{...m,children:(0,i.jsx)(gt().ZP,{type:gt().iW.Vertical,initialFocus:d.length>0?0:void 0,sections:[{key:0,render:e=>(0,i.jsx)(Be().Z,{...e,disableDesktopPadding:!0,title:d.length>0?t:a}),items:d}]})})},onDismiss:()=>{l("")}})}function St(e){let{spaceStore:t,organizationId:a}=e;const n=(0,b().VK)((()=>Boolean(t.getInviteLinkEnabled())),[t]),[o,r]=(0,s.useState)(n),l=(0,b().VK)((()=>t.getSpaceId()),[t]),d=(0,y().O7)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(D().V),u=(0,s.useCallback)((async()=>{lt().eo(d,{enabled:!o}),r(!o);const e=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:d,data:{spaceId:l,organizationId:a,inviteLinkEnabled:!o}});"success"===e.type?c({data:e.data}):C().UW((0,_().wf)(T().Z.getIntl(),e))}),[d,o,a,l,c]);return(0,i.jsx)(Se,{title:(0,i.jsx)(x()._H,{id:"orgConsole.shareSettings.inviteLink.title",defaultMessage:"Invite link to add members"}),byline:o?(0,i.jsx)(ht().fy,{spaceStore:t,showBlueLink:!0,organizationId:a}):(0,i.jsx)(x()._H,{id:"orgConsole.shareSettings.inviteLink.caption",defaultMessage:"Only people with permission to invite members can see this."}),isToggledOn:o,onToggle:u})}var jt=()=>a(17064);function wt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,S().yK)((e=>({token:{borderRadius:3,backgroundColor:e.white}})),[]),o=(0,y().O7)(),r=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:l}=(0,A().x)(r),{updateCacheWithRecordMap:d}=(0,s.useContext)(D().V),c=(0,s.useCallback)((async e=>{let{addedTeams:s,removedTeams:n}=e;const i=await M().callApi({eventName:"updateDefaultTeamsInOrganizationSpace",environment:o,data:{organizationId:a,spaceId:t.id,addedTeams:s.map((e=>{let{store:t}=e;return t.id})),removedTeams:n.map((e=>{let{store:t}=e;return t.id}))}});"success"===i.type?d({data:i.data}):C().UW((0,_().wf)(T().Z.getIntl(),i))}),[o,t,a,d]),u=0===l[t.id].length?null:(0,i.jsx)("div",{children:(0,i.jsx)(jt().h,{unarchivedTeams:l[t.id],isOrgOwner:!0,onUpdate:c,immediateUpdate:!0,tokenStyle:n.token,description:(0,i.jsx)(H().q,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"teamspaceSettings.defaultTeams.caption",defaultMessage:"Select teamspaces that new and current workspace members join automatically."})})})});return(0,i.jsx)("div",{style:{width:"100%"},children:(0,i.jsxs)(xe().T,{children:[u,(0,i.jsx)(Mt,{spaceStore:t}),(0,i.jsx)(Ct,{spaceStore:t})]})})}function Mt(e){let{spaceStore:t}=e;const a=(0,b().VK)((()=>t.getDisableTeamCreation()),[t]),[n,o]=(0,s.useState)(a),r=(0,y().O7)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(D().V),d=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_team_creation:!n}}});"success"===e.type?(o(!n),l({data:e.data})):C().UW((0,_().wf)(T().Z.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Se,{title:(0,i.jsx)(x()._H,{id:"teamspaceSettings.limitTeamspaceCreation.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),byline:(0,i.jsx)(x()._H,{id:"teamspaceSettings.limitTeamspaceCreation.description",defaultMessage:"Restrict teamspace creation to workspace owners only."}),isToggledOn:n,onToggle:d})}function Ct(e){let{spaceStore:t}=e;const a=(0,b().VK)((()=>t.getDisableExternalMembershipRequests()),[t]),[n,o]=(0,s.useState)(!a),r=(0,y().O7)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(D().V),d=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_external_membership_requests:n}}});"success"===e.type?(o(!n),l({data:e.data})):C().UW((0,_().wf)(T().Z.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Se,{title:(0,i.jsx)(x()._H,{id:"teamspaceSettings.memberRequest.title",defaultMessage:"Teamspace invite link to add members"}),byline:(0,i.jsx)(x()._H,{id:"teamspaceSettings.memberRequest.description",defaultMessage:"Allow membership requests from teamspace invite links."}),isToggledOn:n,onToggle:d})}function _t(e){let{organizationId:t,spaceStore:a,setSelectedTab:n,onCloseModal:o}=e;const r=(0,S().yK)((()=>({tilesContainer:{display:"flex",gap:12},dotSeparator:{margin:"0 4px"}})),[]),l=(0,y().O7)(),[d,c]=(0,s.useState)(""),u=(0,k().E)("organization_console_ga_enabled"),m=(0,b().VK)((()=>null==a?void 0:a.getName()),[a]),g=(0,b().VK)((()=>{var e;return null==a||null===(e=a.getIcon())||void 0===e?void 0:e.icon}),[a]);(0,s.useEffect)((()=>{c(m||"")}),[m]);const{updateCacheWithRecordMap:p}=(0,s.useContext)(D().V),{loadVisibleUsersForSpace:f}=(0,s.useContext)(z().g);(0,s.useEffect)((()=>{f(a.id,!0)}),[a.id,f]);const{visibleUsers:v,loading:R}=(0,N().W)(a.id),B=(0,b().VK)((()=>{const e=v.filter((e=>(0,w().nB)(e)));return{sampleMemberStores:e.slice(0,4).map((e=>new(I().U6)(l,{table:j().KJ,id:e.userId}))),numGuests:v.filter(w().FN).length,numMembers:e.length}}),[l,v]),L=(0,s.useMemo)((()=>[a.id]),[a.id]),{teamStores:O,loading:V}=(0,A().x)(L),U=(0,s.useMemo)((()=>O[a.id]),[O,a.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(J,{title:(0,i.jsx)(x()._H,{id:"organization.general.organization.workspace.title",defaultMessage:"Edit workspace details"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.organization.workspace.byline",defaultMessage:"Edit this workspace's name below. Changes will take effect immediately upon saving."}),icon:h().K,onSave:async function(){if(!a||d===m)return;const e=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,name:d}});"success"===e.type?p(e):C().UW((0,_().wf)(T().Z.getIntl(),e))},onCancel:()=>{c(m||"")},onIconChange:async e=>{if(!a)return;const s=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,icon:e}});"success"===s.type?p(s):C().UW((0,_().wf)(T().Z.getIntl(),s))},onNameChange:e=>c(e||""),localIconWithPointer:g?{pointer:a.pointer,icon:g}:void 0,entityName:m||"",entityDescription:(0,i.jsxs)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(re().To,{memberCount:B.numMembers}),(0,i.jsx)(P().Z,{style:r.dotSeparator}),(0,i.jsx)(re().vn,{guestCount:B.numGuests})]})}),(0,i.jsxs)("div",{style:r.tilesContainer,children:[(0,i.jsx)(oe,{memberCount:B.numMembers,sampleMemberUserStores:B.sampleMemberStores,onClick:()=>n("members"),isLoading:R}),(0,i.jsx)(te().Z,{disabled:!u,isLoading:V,headerText:(0,i.jsx)(x()._H,{id:"organization.general.workspace.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(x()._H,{id:"organization.general.workspace.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:U.length}}),bottom:(0,i.jsx)(X().M2,{teamStores:U,isLoading:V}),onClick:()=>!!u&&n("teamspaces")})]}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.featureSettings.title",defaultMessage:"Feature settings"}),content:(0,i.jsx)(je,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.shareSettings.title",defaultMessage:"Share settings"}),content:(0,i.jsx)(vt,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.teamspaceSettings.title",defaultMessage:"Teamspace settings"}),content:(0,i.jsx)(wt,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.workspace.settings.manageWorkspace.title",defaultMessage:"Manage workspace"}),content:(0,i.jsx)(nt,{spaceStore:a,organizationId:t,onCloseModal:o})})]})]})}var Tt=()=>a(779653),kt=()=>a(696459),It=()=>a(285473),Ht=()=>a(401102),Pt=()=>a(868982),Dt=()=>a(960516),zt=()=>a(521632),At=()=>a(365766),Nt=()=>a(458196);var Rt=()=>a(289052),Bt=()=>a(628370);function Lt(e){const{icon:t,title:a,byline:n}=e,[o,r]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>r(!0)),100);return()=>clearTimeout(e)}),[]);const l=(0,S().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:8,margin:"52px auto"},icon:{color:e.icon.secondary,fill:e.icon.secondary,height:36,width:36}})),[]);return(0,i.jsxs)(Bt().Z,{animate:{opacity:o?1:0},initial:{opacity:0},style:l.container,children:[t?t(l.icon):null,(0,i.jsx)(H().q,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:a}),(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",children:n})]})}function Ot(e){const{error:t,runNewSearch:a}=e,[n,o]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>o(!0)),100);return()=>clearTimeout(e)}),[]);const r=(0,S().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:8,margin:"52px auto"},icon:{color:e.redBadgeBackground,fill:"currentColor",height:36,width:36},description:{width:328,textAlign:"center"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:R().Gl.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"12px auto 0"},button:{marginTop:12}})),[]);return(0,i.jsx)(Bt().Z,{style:{opacity:n?1:0},animate:{opacity:n?1:0},children:(0,i.jsxs)("div",{style:r.container,children:[(0,Xe().L)(r.icon),(0,i.jsx)(H().q,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"orgConsole.baseTable.errorState.title",defaultMessage:"Something went wrong"})}),(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",customStyles:r.description,children:(0,i.jsx)(x()._H,{id:"orgConsole.baseTable.errorState.byline",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,a?(0,i.jsx)(K().mk,{onClick:()=>a(),style:r.button,children:(0,i.jsx)(x()._H,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})}):null]})})}var Vt=()=>a(390965);const Ut=(0,n().IU)("newPersonCircle",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.993 17.126a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.727q0-1.45.553-2.728a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25q.555 1.278.554 2.728 0 1.449-.553 2.727a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202q0 1.182.438 2.208a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm4.56-1.155q-.649.596-1.463.998a8.2 8.2 0 0 1-1.627.622 6 6 0 0 1-1.47.212q-.65 0-1.47-.212a8.2 8.2 0 0 1-1.627-.622 6.2 6.2 0 0 1-1.456-.998l.028-.123q.219-.5.834-.964.621-.472 1.565-.765.945-.3 2.126-.301 1.197 0 2.133.3.943.295 1.559.766.622.465.84.971zm-4.56-3.281a2.24 2.24 0 0 1-1.19-.342 2.5 2.5 0 0 1-.847-.923 2.86 2.86 0 0 1-.314-1.32 2.5 2.5 0 0 1 .307-1.257q.314-.58.848-.93a2.16 2.16 0 0 1 1.196-.348q.663 0 1.19.348.533.35.847.93.322.574.322 1.258 0 .732-.315 1.326-.314.588-.848.93a2.16 2.16 0 0 1-1.196.328"})});var qt=()=>a(255933),Et=()=>a(998306);function Zt(e){const{icon:t,spaceId:a,size:s,containerStyles:n}=e,o=(0,S().yK)((e=>({icon:{fill:e.icon.secondary}})),[]);return t&&a?(0,i.jsx)(Et().Z,{iconSize:s,type:"circle",iconType:"recordIcon",icon:{icon:t,pointer:{table:qt().bx,id:a}},containerStyle:{background:"transparent",...n}}):(0,i.jsx)(Et().Z,{iconSize:s,type:"circle",iconType:"function",iconFn:Ut,iconStyle:o.icon,containerStyle:{background:"transparent",...n}})}var Ft=()=>a(691119),Wt=()=>a(907099);a(228244);var Kt=()=>a(396136);function Gt(e){let{blockIds:t}=e;const a=(0,y().O7)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(D().V);return(0,b().VK)((()=>t.map((e=>new(I().G)(a,{table:Kt().iU,id:e},{inMemoryRecordCache:n})))),[a,t,n])}function Yt(e){let{spaceId:t}=e;const a=(0,y().O7)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(D().V),{spaceIds:i}=(0,s.useContext)(z().g);return(0,b().VK)((()=>{if(t&&i.includes(t))return new(I().H2)(a,{id:t,table:qt().bx},{inMemoryRecordCache:n})}),[t,i,n,a])}var $t=()=>a(305885);const Jt=(0,x().vU)({untitled:{id:"settingsConsole.groupSettings.untitledGroup",defaultMessage:"Untitled"}});const Qt=function(e){let{group:t,organizationId:a,onDismiss:n,removePagesFromGroup:o}=e;const r=(0,x().YB)(),l=Yt({spaceId:t.spaceId}),{workspaceName:d,workspaceIcon:c,numMembers:u}=(0,b().VK)((()=>({workspaceName:null==l?void 0:l.getName(),workspaceIcon:null==l?void 0:l.getIcon(),numMembers:(null==l?void 0:l.getMemberCountFromPublicSpaceData())||0})),[l]),m=function(e){let{groupId:t,spaceId:a}=e;const n=(0,y().O7)(),{organizationOwnerRecordCache:i}=(0,s.useContext)(D().V);return(0,b().VK)((()=>new(I().Q4)(n,{table:Nt().GQ,id:(0,Nt().L9)({spacePermissionGroupId:t,spaceId:a}),spaceId:a},{inMemoryRecordCache:i})),[n,t,a,i])}({groupId:t.groupId,spaceId:t.spaceId}),{name:g,spaceId:p,icon:h}=(0,b().VK)((()=>({name:m.getName()||r.formatMessage(Jt.untitled),spaceId:m.getSpaceId(),icon:m.getIcon()})),[m,r]),f=(0,S().yK)((()=>({groupIconContainer:{marginLeft:8}})),[]),v=Gt({blockIds:t.sharedPageIds}),w=function(e){let{spaceStore:t,groupStore:a}=e;const s=(0,x().YB)(),n=(0,y().O7)(),[{value:i,status:o,error:r}]=(0,Ke().r5)((async()=>{const e=a.getGroupId(),i=a.getSpaceId();if(!e||!i)return[];const o=await M().callApi({eventName:"getSpacePermissionGroupMembers",environment:n,data:{groupIds:[e],spaceId:i}});if("success"===o.type){var r;const a=((null===(r=o.data.groupUsersMap[e])||void 0===r?void 0:r.userIds)??[]).map((e=>new(I().U6)(n,{table:j().KJ,id:e})));return(0,Wt().N5)({userStores:a,spaceStore:t,intl:s})}}),[n,t,a,s]);return{members:i??[],loading:"pending"===o,error:r}}({groupStore:m,spaceStore:l}),C=function(e){const{spaceStore:t,groupStore:a}=e,n=(0,s.useMemo)((()=>null!=t&&t.id?[t.id]:[]),[null==t?void 0:t.id]),{teamStores:i,loading:o}=(0,A().x)(n);return{teamStores:(0,b().VK)((()=>null!=t&&t.id?i[t.id].filter((e=>e.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===a.getGroupId())))):[]),[i,null==t?void 0:t.id,a]),loading:o}}({groupStore:m,spaceStore:l});return(0,i.jsx)($t().Dl,{isOpen:!0,sidebarProps:{sidebarTitleIcon:(0,i.jsx)(Zt,{spaceId:p,icon:h,size:$t().Tr}),sidebarTitle:g,sidebarByline:(0,i.jsx)(x()._H,{id:"settingsConsole.groupSettings.title.byline",defaultMessage:"Group · {numMembers, plural, one {# member} other {# members}}",values:{numMembers:t.membersCount}}),bottomEntitySection:(0,i.jsxs)("div",{style:f.groupIconContainer,children:[(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"settingsConsole.groupSettings.bottom.preamble",defaultMessage:"Part of workspace"})}),(0,i.jsx)(Ht().iP,{title:d,iconSize:32,icon:(0,i.jsx)(B().Z,{disabled:!0,icon:c,isEmptyPage:!1,size:36}),byline:(0,i.jsx)(re().To,{memberCount:u})})]}),hideSeparator:!0},tabRenderer:Rp,tabNames:Ft().wN,tabAccessor:Np,defaultTab:"general",onDismiss:n,sceneProps:{groupStore:m,membersState:w,teamsState:C,groupPageStores:v,organizationId:a,onCloseModal:n,removePagesFromGroup:o}})};var Xt=()=>a(724568),ea=()=>a(78078),ta=()=>a(981583);const aa=28;function sa(e){let{userId:t,isOnLegalHold:a,rightContent:s}=e;const n=(0,x().YB)(),o=(0,y().O7)(),r=(0,S().yK)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:R().Ue.medium},lockShieldIcon:{width:16,height:16,color:e.lightTextColor,fontWeight:R().Ue.medium}})),[]),l=(0,b().VK)((()=>{const e=new(ct().U)(o,{table:j().KJ,id:t});return{userStore:e,isReady:e.isReady(),userName:e.getDisplayName(n)}}),[o,t,n]);return null!=l&&l.isReady?(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!Boolean(l.userName),title:(0,i.jsxs)(ea().X2,{alignItems:"center",gap:4,children:[l.userName,a?(0,i.jsx)(Z().Z,{renderTooltip:()=>(0,i.jsx)(x()._H,{defaultMessage:"This user is placed in a legal hold in this organization.",id:"userSummary.legalHoldTooltip"}),render:e=>(0,i.jsx)("div",{...e,children:(0,Xt().j)(r.lockShieldIcon)})}):null]}),rightContent:s,icon:(0,i.jsx)(ta().Z,{size:aa,userStore:l.userStore,iconStyle:r.iconStyle}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:`calc(100% - ${It().HQ}px)`}}):(0,i.jsx)(na,{})}function na(e){const t=(0,S().yK)((()=>({icon:{borderRadius:"100%",height:e.iconSize??aa,width:e.iconSize??aa,marginLeft:-4,...e.iconStyles},title:{width:120}})),[e.iconSize,e.iconStyles]);return(0,i.jsx)(Ht().HD,{includeIcon:!0,iconStyles:t.icon,titleStyles:t.title})}const ia=(0,x().vU)({untitled:{id:"organizationGroupsTable.nameColumn.untitled",defaultMessage:"Untitled"}}),oa={id:"name",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.nameColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(ma,{row:e}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},ra={id:"pages",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.pagesColumn.header",defaultMessage:"Pages shared with this group"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(At().z6,{}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.organizationGroup.sharedPageIds.length}})}),widthData:{widthPercent:25,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},la={id:"teams",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.teamsColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(At().z6,{}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.teamsColumn.title",defaultMessage:"{count, plural, one {# teamspace} other {# teamspaces}}",values:{count:e.organizationGroup.teamsCount}})}),widthData:{widthPercent:25,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},da={id:"members",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(At().z6,{}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.membersColumn.title",defaultMessage:"{count, plural, one {# member} other {# members}}",values:{count:e.organizationGroup.membersCount}})}),widthData:{widthPercent:25,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},ca=[oa,ra,la,da];function ua(e){let{groupId:t,groups:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:u,hasPreviousPage:m,loadPreviousPage:g,removePagesFromGroup:p}=e;const h=(0,k().E)("organization_console_group_single_view_modal"),[f,v]=(0,s.useState)({isOpen:!1});(0,s.useEffect)((()=>{const e=a.find((e=>e.groupId===t));e&&v({isOpen:!0,type:"viewGroup",groupId:e.groupId})}),[a,t,v]);const j=(0,Rt().Z)(),w=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:ca,theme:e,containerMarginTop:0})),[]),M=function(e){let{groupAndSpaceIds:t}=e;const a=(0,y().O7)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(D().V);return(0,b().VK)((()=>t.map((e=>{let{groupId:t,spaceId:s}=e;return new(I().Q4)(a,{table:Nt().GQ,id:(0,Nt().L9)({spacePermissionGroupId:t,spaceId:s}),spaceId:s},{inMemoryRecordCache:n})}))),[a,t,n])}({groupAndSpaceIds:a.map((e=>({groupId:e.groupId,spaceId:e.spaceId})))}),C=(0,b().VK)((()=>a.map((e=>{const t=M.find((t=>t.getGroupId()===e.groupId)),a=Boolean(null==t?void 0:t.getDeletedAt());return{organizationGroup:e,id:e.groupId,groupStore:t,isClickable:h&&!a,type:Vt().a.OrganizationGroup}}))),[a,h,M]),_=n?(0,Vt().s)():C;const T=ca.map((e=>({...e,headerStyle:j.tableHeader,rowStyle:j.tableRow}))),H=f.isOpen?a.find((e=>e.groupId===f.groupId)):void 0;return!n&&o?(0,i.jsx)(Ot,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:_,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(x()._H,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query."})}),styles:w,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:g,hasNextPage:u,hasPrevPage:m,currentPage:c},onRowClick:function(e){e.type===Vt().a.OrganizationGroup&&e.isClickable&&v({isOpen:!0,type:"viewGroup",groupId:e.organizationGroup.groupId})},extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),f.isOpen&&"viewGroup"===f.type&&H?(0,i.jsx)(Qt,{group:H,organizationId:r.id,onDismiss:()=>v({isOpen:!1}),removePagesFromGroup:p}):null]})}function ma(e){const{row:t}=e,a=(0,x().YB)(),[s,n,o]=(0,b().VK)((()=>t.groupStore?[t.groupStore.getName(),t.groupStore.getIcon(),Boolean(t.groupStore.getDeletedAt())]:[void 0,void 0,!1]),[t.groupStore]),r=s||t.organizationGroup.name||a.formatMessage(ia.untitled),l=n||t.organizationGroup.icon;return(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!Boolean(r),title:r,badge:o?(0,i.jsx)(ga,{}):null,icon:(0,i.jsx)(Zt,{icon:l,spaceId:t.organizationGroup.spaceId,size:26}),iconSize:Dt().ZG,summaryStyles:{width:`calc(100% - ${Dt().ZG}px)`,paddingBlock:8}})}function ga(){return(0,i.jsx)(Z().Z,{renderTooltip:()=>(0,i.jsx)(x()._H,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.tooltip",defaultMessage:"This group has been deleted"}),render:e=>(0,i.jsx)(zt().Z,{...e,content:(0,i.jsx)(x()._H,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.content",defaultMessage:"Deleted"})})})}const pa=Ge().B,ha=[{propertyId:oa.id,direction:"ascending"}];function fa(e,t){const{loadPermissionGroupsForSpace:a}=(0,s.useContext)(z().g),n=function(e,t){const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(z().g);return(0,s.useEffect)((()=>{t||n(e)}),[e,n,t]),(0,s.useMemo)((()=>a[e]),[a,e])}(e),[i,o]=(0,s.useState)(),r=(0,b().VK)((()=>n.map((a=>{const s=a.group;return{id:s.group_id,groupName:s.name,groupIcon:s.icon,teamspacesCount:t.filter((e=>e.isAssociatedWithPermissionGroup(s))).length,memberCount:a.memberCount,isClickable:!1,spaceId:e}}))),[n,t,e]),l=(0,s.useMemo)((()=>{const e=null!=i&&i.length?i:ha;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===mo.id?"teamspacesCount":t===go.id?"memberCount":e=>e.groupName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,kt().t1)(t)}));return We().Xo(t,s,n)}({rows:r,appliedSorts:e})}),[r,i]);return{rows:l,loadPermissionGroupsForSpace:a,appliedSorts:i,setAppliedSorts:o}}var xa=()=>a(644178),va=()=>a(286284),ya=()=>a(842423),ba=()=>a(540491);function Sa(){return(0,S().yK)((()=>({tableHeader:{position:"relative",display:"flex",flexDirection:"row"},leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",rowGap:4,alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},filters:{display:"flex",flexDirection:"row"},multiSelect:{position:"relative"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{position:"relative",display:"flex",flexDirection:"row",gap:8}})),[])}a(670560);var ja=()=>a(816512),wa=()=>a(530980),Ma=()=>a(933868),Ca=()=>a(729675),_a=()=>a(998901),Ta=()=>a(104088),ka=()=>a(763928),Ia=()=>a(64131),Ha=()=>a(122671),Pa=()=>a(523516);function Da(e){let{isOpen:t,onDismiss:a,onClick:n,spaceStore:o,includeGroups:r,selectedValues:l,setSelectedValues:d,inputPlaceholder:c}=e;const u=(0,x().YB)(),m=(0,y().O7)(),{organizationOwnerRecordCache:g}=(0,s.useContext)(D().V),[p,h]=(0,s.useState)(""),f=(0,s.useMemo)((()=>l.map((e=>e.userId)).filter(kt().$K)),[l]),v=(0,s.useMemo)((()=>l.map((e=>e.groupId)).filter(kt().$K)),[l]),{visibleUsers:S}=(0,N().W)(o.id),{permissionGroupsForSpace:w,loadPermissionGroupsForSpace:M}=(0,s.useContext)(z().g);(0,s.useEffect)((()=>{r&&M(o.id)}),[o.id,M,r]);const C=(0,s.useMemo)((()=>{const e=w[o.id].filter((e=>{let{group:t}=e;return!(null!=v&&v.includes(t.group_id))}));return(p?(0,rt().ZP)(p,e,(e=>{let{group:t}=e;return(0,Wt().kF)({intl:u,groupName:t.name})}),{normalizeFuzzyScore:!0}):e).slice(0,5)}),[w,o.id,v,u,p]),[{value:_}]=(0,Ke().r5)((async()=>{const e=S.filter((e=>(0,Ma().Jy)(e.role)&&!(null!=f&&f.includes(e.userId))));return(await(0,Ca().searchUsers)({environment:m,query:p,parentStore:o,userIds:e.map((e=>e.userId))})).slice(0,5)}),[m,p,o,f,S]),T=(0,s.useCallback)((e=>{const t=l.filter((t=>t.userId!==e));d(t)}),[l,d]),k=(0,s.useCallback)((e=>{const t=l.filter((t=>t.groupId!==e));d(t)}),[l,d]),H=(0,b().VK)((()=>l.map((e=>{if("user"===e.type){const t=new(I().U6)(m,{table:j().KJ,id:e.userId});return(0,i.jsx)(ft().Z,{showRemoveButton:!0,value:t.getFullName(u)||t.getEmail(),format:it().lo.Medium,isSingle:!1,onClickRemove:()=>T(e.userId)},e.userId)}if("group"===e.type){const t=new(I().Q4)(m,{table:Nt().GQ,id:(0,Nt().L9)({spacePermissionGroupId:e.groupId,spaceId:o.id}),spaceId:o.id},{inMemoryRecordCache:g});return(0,i.jsx)(ft().Z,{showRemoveButton:!0,value:t.getName(),format:it().lo.Medium,isSingle:!1,onClickRemove:()=>k(e.groupId)},e.groupId)}(0,kt().t1)(e)}))),[m,T,k,u,l,g,o.id]),P=(0,s.useCallback)((e=>{h(e.currentTarget.value)}),[]),A=e=>{const t=[...l,{type:"user",userId:e}];d(t),h("")},R=r?{includeGroups:r,onSelectGroup:e=>{const t=[...l,{type:"group",groupId:e}];d(t),h("")},permissionGroups:C}:{includeGroups:!1};return(0,i.jsx)(pt().ZP,{placementToOrigin:_a().Placement.Bottom,alignmentToOrigin:_a().Alignment.Start,originGap:8,open:t&&(Boolean(null==_?void 0:_.length)||Boolean(C.length&&r)),popupType:Ta().k.Popup,onDismiss:a,sameWidthAsOrigin:!0,origin:(0,i.jsx)(Ha().ZP,{showBorder:!0,onRemoveLastToken:()=>d([]),format:Ha().UR.Select,value:p,tokens:H,onChange:P,onClick:n,placeholder:c??u.formatMessage(Aa.membersPlaceholder),style:{borderRadius:6},inputStyle:{borderRadius:6},inputFullWidth:!0}),render:()=>(0,i.jsx)(za,{spaceStore:o,onSelectUser:A,users:_??[],query:p,...R})})}function za(e){let{spaceStore:t,onSelectUser:a,onSelectGroup:s,includeGroups:n,users:o,permissionGroups:r,query:l}=e;if(!(null!=o&&o.length||null!=r&&r.length))return null;const d=[],c=(o??[]).map((e=>({key:e.id,render:t=>(0,i.jsx)(Pa().Z,{...t,actor:(0,ja().dp)(e)}),action:()=>{a(e.id)}})));c.length&&d.push({key:"user results",render:e=>(0,i.jsx)(Ia().l,{loading:!1,...e}),items:c});const u=n&&s?r.map((e=>{let{group:a}=e;return{key:a.group_id,render:e=>(0,i.jsx)(ka().l,{menuListItemProps:e,group:wa().kk5.fromValue(Nt().GQ,a),spaceStore:t}),action:()=>{s(a.group_id)}}})):[];return u.length&&d.push({key:"group results",render:e=>(0,i.jsx)(Be().Z,{title:(0,i.jsx)(x()._H,{id:"spaceMembersInput.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!1,...e}),items:u}),(0,i.jsx)(gt().ZP,{initialFocus:l.length>0?0:void 0,type:gt().iW.Vertical,sections:d})}const Aa=(0,x().vU)({membersPlaceholder:{id:"spaceMembersInput.members.placeholder",defaultMessage:"No members yet"}});function Na(e){let{onDismiss:t,spaceStore:a,organizationId:n,refetchData:o}=e;const[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(void 0),u=(0,S().yK)((e=>({footer:{display:"flex",justifyContent:"flex-end",gap:8},content:{width:540},headerIcon:{width:32,height:32,fill:e.icon.secondary},icon:{width:24,height:24,fill:e.icon.secondary},iconButton:{width:32,height:32,borderRadius:6,border:`1px solid ${e.stroke.primary}`,background:e.buttonHoveredBackground},iconNameContainer:{display:"flex",gap:8},header:{marginBottom:4},iconNameSection:{marginBottom:20}})),[]),[m,g]=(0,s.useState)([]),p=(0,y().O7)(),h=async()=>{const e=m.map((e=>{let{userId:t}=e;return t})).filter(kt().$K),s=await M().callApi({eventName:"createPermissionGroupWithMembers",environment:p,data:{spaceId:a.id,organizationId:n,name:r,icon:null==d?void 0:d.icon,userIds:e}});t(),"success"===s.type?o():C().UW((0,_().wf)(T().Z.getIntl(),s))},v=(0,s.useCallback)((e=>{l(e.currentTarget.value)}),[]),b=(0,s.useCallback)((e=>{e&&c({pointer:{id:a.id,table:qt().bx},icon:e})}),[a]),j=(0,s.useCallback)((()=>{I(!0)}),[]),w=(0,x().YB)(),[k,I]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{title:(0,i.jsx)(x()._H,{id:"createGroupModal.title",defaultMessage:"Create a new group"}),icon:f(u.headerIcon),byline:(0,i.jsx)(x()._H,{id:"createGroupModal.byline",defaultMessage:"Use groups to manage access to teamspaces and pages within a workspace."})}),footer:(0,i.jsx)(W().mz,{secondaryText:(0,i.jsx)(x()._H,{id:"createGroupModal.cancel",defaultMessage:"Cancel"}),primaryText:(0,i.jsx)(x()._H,{id:"createGroupModal.create",defaultMessage:"Create group"}),primaryAction:h,secondaryAction:t}),children:(0,i.jsxs)("div",{style:u.content,children:[(0,i.jsxs)("div",{style:u.iconNameSection,children:[(0,i.jsx)("div",{style:u.header,children:(0,i.jsx)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"createGroupModal.iconAndName.header",defaultMessage:"Icon & name"})})}),(0,i.jsxs)("div",{style:u.iconNameContainer,children:[(0,i.jsx)(B().Z,{disabled:!1,bucket:"public",icon:d,defaultIcon:f(u.icon),isEmptyPage:!1,size:24,onChange:b,style:u.iconButton}),(0,i.jsx)(O().Z,{value:r,onChange:v,placeholder:w.formatMessage(Ra.groupNamePlaceholder)})]})]}),(0,i.jsx)("div",{style:u.header,children:(0,i.jsx)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"createGroupModal.members.header",defaultMessage:"Members"})})}),(0,i.jsx)(Da,{spaceStore:a,isOpen:k,onDismiss:()=>I(!1),onClick:j,selectedValues:m,setSelectedValues:g})]})})})}const Ra=(0,x().vU)({groupNamePlaceholder:{id:"createGroupModal.groupName.placeholder",defaultMessage:"Enter a name for the group"}});var Ba=()=>a(843403),La=()=>a(332087),Oa=()=>a(497065),Va=()=>a(666414),Ua=()=>a(191918),qa=()=>a(395362),Ea=()=>a(356042),Za=()=>a(565766);function Fa(e){const t=(0,y().O7)(),{type:a,userId:n,onDismiss:o,onSubmit:r}=e,l=(0,x().YB)(),d=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:375}})),[]),c=(0,b().VK)((()=>{if(!n)return"";return new(ct().U)(t,{table:j().KJ,id:n}).getDisplayName(l)}),[t,n,l]);const{title:u,byline:m,buttonText:g}=function(){switch(a){case"suspend":return{title:l.formatMessage(Wa.suspendTitle),byline:l.formatMessage(Wa.suspendByline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})}),buttonText:l.formatMessage(Wa.suspendButton)};case"resetPasswordSingle":return{title:l.formatMessage(Wa.resetPasswordSingleTitle),byline:l.formatMessage(Wa.resetPasswordSingleByline),buttonText:l.formatMessage(Wa.resetPasswordSingleButton)};case"resetPasswordAll":return{title:l.formatMessage(Wa.resetPasswordAllTitle),byline:l.formatMessage(Wa.resetPasswordAllByline),buttonText:l.formatMessage(Wa.resetPasswordAllButton)};case"logoutSingle":return{title:l.formatMessage(Wa.logoutSingleTitle),byline:l.formatMessage(Wa.logoutSingleByline),buttonText:l.formatMessage(Wa.logoutSingleButton)};case"logoutAll":return{title:l.formatMessage(Wa.logoutAllTitle),byline:l.formatMessage(Wa.logoutAllByline),buttonText:l.formatMessage(Wa.logoutAllButton)};default:(0,kt().t1)(a)}}();const[p,h]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,Za().H)(d.icon),title:u,byline:(0,i.jsx)("div",{style:d.container,children:m})}),footer:(0,i.jsx)(W().mz,{primaryText:g,primaryAction:async()=>{h(!0),await async function(){await r(),o()}(),h(!1)},primaryDisabled:p,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0})})})}const Wa=(0,x().vU)({suspendTitle:{id:"orgConsole.people.modal.destructiveUserAction.suspendTitle",defaultMessage:"Suspend this user?"},suspendByline:{id:"orgConsole.people.modal.destructiveUserAction.suspendByline",defaultMessage:"<b>{userName}</b> will lose all workspace and notification access. Their content, comments, and @mentions will stay visible, and integrations will remain active."},suspendButton:{id:"orgConsole.people.modal.destructiveUserAction.suspendButton",defaultMessage:"Suspend user"},resetPasswordSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordTitle",defaultMessage:"Reset password for this user?"},resetPasswordSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordByline",defaultMessage:"This will log the user out, remove 2-step verification, and require re-authentication via email. The user must set a new password to log back into Notion."},resetPasswordSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordButton",defaultMessage:"Reset password"},resetPasswordAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllTitle",defaultMessage:"Reset password for all managed users?"},resetPasswordAllByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllByline",defaultMessage:"This will log the users out, remove 2-step verification, and require re-authentication via email. All managed users must set new passwords to log back into Notion."},resetPasswordAllButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllButton",defaultMessage:"Reset all passwords"},logoutSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutTitle",defaultMessage:"Log out this user?"},logoutSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutByline",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."},logoutSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutButton",defaultMessage:"Log out user"},logoutAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllTitle",defaultMessage:"Log out all managed users?"},logoutAllByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllByline",defaultMessage:"You are about to log out the users from their current session. They will need to re-authenticate to log back into Notion."},logoutAllButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllButton",defaultMessage:"Log out all users"}});function Ka(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,y().O7)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedAccounts.logoutUsers.logoutButton",defaultMessage:"Force log out"}):(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Ea().F,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(U().Z,{disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(Fa,{type:a?"logoutSingle":"logoutAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await Ga({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;qa().KF(t,{email_domains:s}),await M().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:Ua().J.Domains,emailDomains:s}}}),et().oV({label:(0,i.jsx)(x()._H,{id:"managedAccounts.toastMessage.logout.all.success",defaultMessage:"Successfully logged out all managed accounts"})}),qa()._6(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function Ga(e){let{environment:t,organizationId:a,userId:s}=e;qa().NF(t),await M().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:Ua().J.User,userId:s}}}),et().oV({label:(0,i.jsx)(x()._H,{id:"managedAccounts.toastMessage.logout.single.success",defaultMessage:"Successfully logged out user"})}),qa().NF(t)}function Ya(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,y().O7)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetSingleButton",defaultMessage:"Reset password"}):(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetAllButton",defaultMessage:"Reset all passwords"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Ea().F,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(U().Z,{disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(Fa,{type:a?"resetPasswordSingle":"resetPasswordAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await $a({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;qa().Jo(t,{email_domains:s}),await M().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:Ua().J.Domains,emailDomains:s}}}),et().oV({label:(0,i.jsx)(x()._H,{id:"managedAccounts.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed accounts"})}),qa().aT(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function $a(e){let{environment:t,organizationId:a,userId:s}=e;qa().Zm(t),await M().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:Ua().J.User,userId:s}}}),et().oV({label:(0,i.jsx)(x()._H,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})}),qa().vC(t)}var Ja=()=>a(160459),Qa=()=>a(259259),Xa=()=>a(176691),es=()=>a(67961),ts=()=>a(579807);function as(e){let{organizationStore:t}=e;const a=(0,y().O7)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(D().V),o=(0,S().yK)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...K().sM}})),[]),r=(0,s.useMemo)((()=>Object.entries(Ja().nb).map((e=>{let[t,a]=e;return{key:t,label:(0,i.jsx)(es().Z,{children:(0,Xa().hH)(0,a)})}}))),[]),l=(0,b().VK)((()=>{var e;return(0,Qa().K)(null===(e=t.getManagedUserSettings())||void 0===e?void 0:e.custom_session_duration)??Ja().gl}),[t]);return(0,i.jsx)(ts().L,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:l,options:r,onSelectOption:async function(e){var s;const o=(null===(s=t.getManagedUserSettings())||void 0===s?void 0:s.custom_session_duration)??Ja().nb[Ja().gl],r=Ja().nb[e];if(void 0===r)return;qa().LO(a,{custom_session_duration_ms:o});const{accept:l}=await C().gt({message:(0,i.jsx)(es().Z,{style:C().fq.title,children:(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,i.jsxs)(es().Z,{isMultiline:!0,isSecondaryColor:!0,children:[(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,Xa().hH)(0,o),newDuration:(0,Xa().hH)(0,r),b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)("b",{children:t})}}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!l)return;qa().l0(a,{new_session_duration_ms:r});const d=await M().callApi({eventName:"updateOrganization",environment:a,data:{organizationId:t.id,managedUserSettings:{customSessionDuration:(0,Qa().K)(r)}}});"success"===d.type?n(d):C().UW((0,_().wf)(T().Z.getIntl(),d))},buttonStyle:o.button,placementToOrigin:_a().Placement.Left})}function ss(e){let{organizationStore:t}=e;const a=(0,S().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:a.container,children:[(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.accountAccess.settings.actions.sessionDuration.title",defaultMessage:"Session duration"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.accountAccess.settings.actions.sessionDuration.byline",defaultMessage:"Set re-authentication interval for managed accounts."}),item:(0,i.jsx)(as,{organizationStore:t})}),(0,i.jsx)(Va().Z,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.accountAccess.settings.actions.passwordManagement.title",defaultMessage:"Reset passwords for all users"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.accountAccess.settings.actions.passwordManagement.byline",defaultMessage:"Log out and force all managed users to reset their passwords on next login."}),item:(0,i.jsx)(Ya,{organizationStore:t,isRed:!0})}),(0,i.jsx)(Va().Z,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.accountAccess.settings.actions.sessionManagement.title",defaultMessage:"Log out all users"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.accountAccess.settings.actions.sessionManagement.byline",defaultMessage:"Log out all managed users and require re-authentication."}),item:(0,i.jsx)(Ka,{organizationStore:t,isRed:!0})})]})}var ns=()=>a(774933);function is(e){const t=(0,y().O7)(),{updateCacheWithRecordMap:a}=(0,s.useContext)(D().V),n=(0,b().VK)((()=>e.getManagedUserSettings()),[e]),[i,o]=(0,s.useState)({prevent_profile_edits:!1,workspace_creation_enum:!1,prevent_members_joining_external_workspace:!1,prevent_granting_support_access:!1,disable_notion_mail:!1});return{prevent_profile_edits:{value:null==n?void 0:n.prevent_profile_edits,loading:i.prevent_profile_edits,toggle:async function(){o((e=>({...e,prevent_profile_edits:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventProfileEdits:!(null!=n&&n.prevent_profile_edits)}}});"success"===s.type?a(s):C().UW((0,_().wf)(T().Z.getIntl(),s)),o((e=>({...e,prevent_profile_edits:!1})))}},workspace_creation_enum:{value:null==n?void 0:n.workspace_creation_enum,loading:i.workspace_creation_enum,toggle:async function(){o((e=>({...e,workspace_creation_enum:!0})));const s="admins_only"===(null==n?void 0:n.workspace_creation_enum)?"unrestricted":"admins_only",i=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{workspaceCreationEnum:s}}});"success"===i.type?a(i):C().UW((0,_().wf)(T().Z.getIntl(),i)),o((e=>({...e,workspace_creation_enum:!1})))}},prevent_members_joining_external_workspace:{value:null==n?void 0:n.prevent_members_joining_external_workspace,loading:i.prevent_members_joining_external_workspace,toggle:async function(){o((e=>({...e,prevent_members_joining_external_workspace:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventMembersJoiningExternalWorkspace:!(null!=n&&n.prevent_members_joining_external_workspace)}}});"success"===s.type?a(s):C().UW((0,_().wf)(T().Z.getIntl(),s)),o((e=>({...e,prevent_members_joining_external_workspace:!1})))}},prevent_granting_support_access:{value:null==n?void 0:n.prevent_granting_support_access,loading:i.prevent_granting_support_access,toggle:async function(){o((e=>({...e,prevent_granting_support_access:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventGrantingSupportAccess:!(null!=n&&n.prevent_granting_support_access)}}});"success"===s.type?a(s):C().UW((0,_().wf)(T().Z.getIntl(),s)),o((e=>({...e,prevent_granting_support_access:!1})))}},disable_notion_mail:{value:null==n?void 0:n.disable_notion_mail,loading:i.disable_notion_mail,toggle:async function(){o((e=>({...e,disable_notion_mail:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{disableNotionMail:!(null!=n&&n.disable_notion_mail)}}});"success"===s.type?a(s):C().UW((0,_().wf)(T().Z.getIntl(),s)),o((e=>({...e,disable_notion_mail:!1})))}}}}function os(e){let{organizationStore:t}=e;const a=is(t),s=(0,S().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]),n=(0,k().E)("enable_notion_mail_settings_toggle");return(0,i.jsxs)("div",{style:s.container,children:[(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.title",defaultMessage:"Allow users to change profile information"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.byline",defaultMessage:"Allow managed users to update their name, email, and profile photo."}),item:(0,i.jsx)(ye().Z,{on:!Boolean(a.prevent_profile_edits.value),onClick:a.prevent_profile_edits.toggle,disabled:a.prevent_profile_edits.loading})}),(0,i.jsx)(Va().Z,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.title",defaultMessage:"Allow users to create new workspaces"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.byline",defaultMessage:"When on, any user can create workspaces. When off, only organization owners can."}),item:(0,i.jsx)(ye().Z,{on:"unrestricted"===a.workspace_creation_enum.value,onClick:a.workspace_creation_enum.toggle,disabled:a.workspace_creation_enum.loading})}),(0,i.jsx)(Va().Z,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.title",defaultMessage:"Allow users to join external workspaces"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.byline",defaultMessage:"When on, all members can join external workspaces. When off, only organization owners can."}),item:(0,i.jsx)(ye().Z,{on:!Boolean(a.prevent_members_joining_external_workspace.value),onClick:a.prevent_members_joining_external_workspace.toggle,disabled:a.prevent_members_joining_external_workspace.loading})}),(0,i.jsx)(Va().Z,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.title",defaultMessage:"Allow users to grant support access to accounts"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.byline",defaultMessage:"Allow Notion support to troubleshoot or recover content; access can be revoked anytime."}),item:(0,i.jsx)(ye().Z,{on:!Boolean(a.prevent_granting_support_access.value),onClick:a.prevent_granting_support_access.toggle,disabled:a.prevent_granting_support_access.loading})}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Va().Z,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.title",defaultMessage:"Enable Notion Mail"}),byline:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.byline",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,i.jsx)("br",{}),(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.terms",defaultMessage:"By using Notion Mail, you agree to the Notion Mail and Notion AI Supplementary Terms."})]}),item:(0,i.jsx)(ye().Z,{on:!Boolean(a.disable_notion_mail.value),onClick:a.disable_notion_mail.toggle,disabled:a.disable_notion_mail.loading})})]})]})}a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624);var rs=()=>a(361072);const ls=(0,n().IU)("removePersonOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M11.524 16.45h-5.79q-1.75 0-1.75-1.177 0-.696.417-1.463.424-.765 1.21-1.428a6.4 6.4 0 0 1 1.9-1.073q1.108-.417 2.489-.417.895 0 1.675.191a6.4 6.4 0 0 1 1.435.513 4.5 4.5 0 0 0-.464.43q-.22.225-.397.5A5.7 5.7 0 0 0 10 12.074q-1.135 0-2.017.32-.875.315-1.476.8-.595.48-.91.992-.314.506-.314.902 0 .096.048.137.055.04.178.04h5.824q.007.315.048.602a4 4 0 0 0 .143.581Zm-1.53-6.358a2.75 2.75 0 0 1-1.512-.438 3.2 3.2 0 0 1-1.08-1.175A3.35 3.35 0 0 1 7 6.845q0-.882.403-1.6A3.2 3.2 0 0 1 8.49 4.104a2.78 2.78 0 0 1 1.504-.424q.82 0 1.497.43.684.431 1.087 1.156.41.718.403 1.592 0 .89-.403 1.627a3.2 3.2 0 0 1-1.08 1.17 2.7 2.7 0 0 1-1.504.437m0-1.19q.471 0 .867-.266a1.95 1.95 0 0 0 .643-.739q.24-.465.24-1.039a2 2 0 0 0-.24-1.011 1.9 1.9 0 0 0-.636-.718 1.54 1.54 0 0 0-.875-.267q-.478 0-.875.26-.396.26-.636.711t-.239 1.012q0 .574.24 1.046.238.465.635.738.403.273.875.273Zm5.83 9.79a3.4 3.4 0 0 1-1.36-.274 3.5 3.5 0 0 1-1.121-.766 3.7 3.7 0 0 1-.766-1.12 3.4 3.4 0 0 1-.273-1.361q0-.725.273-1.36.28-.636.766-1.121a3.5 3.5 0 0 1 1.12-.766 3.4 3.4 0 0 1 1.361-.274q.725 0 1.36.274a3.56 3.56 0 0 1 1.88 1.886q.28.636.28 1.36 0 .719-.28 1.354a3.5 3.5 0 0 1-.765 1.128q-.486.486-1.128.76a3.3 3.3 0 0 1-1.347.28m-1.77-3.056h3.527a.44.44 0 0 0 .328-.144.43.43 0 0 0 0-.642.44.44 0 0 0-.328-.144h-3.527a.44.44 0 0 0-.328.144.44.44 0 0 0-.137.32q0 .186.137.322.135.144.328.144"})});var ds=()=>a(519563),cs=()=>a(720866);const us=Ge().B,ms={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,paginationTokenHistory:[],loading:!1,error:void 0};function gs(e){const[t,a]=(0,s.useState)(e.initialSelectedIds||[]);function n(){a([])}return(0,s.useEffect)((()=>{n()}),[e.allPossibleIds]),{selectedIds:t,handleToggleId:function(e){a((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},handleSelectAllIds:function(){a(e.allPossibleIds)},handleUnselectAllIds:n}}function ps(e){const[t,a]=(0,s.useState)([]);return{selectedRows:t,handleToggleRow:function(e){a((t=>t.some((t=>t.id===e.id))?t.filter((t=>t.id!==e.id)):[...t,e]))},handleSelectAllRows:function(){a(e.allPossibleRows)},handleUnselectAllRows:function(){a([])}}}a(821057);function hs(e){const t=(0,y().O7)(),a=(0,k().E)("legal_holds_enabled");let s,n;"spaceId"in e?s=e.spaceId:"organizationId"in e&&(n=e.organizationId);const[{status:i,value:o}]=(0,Ke().r5)((async()=>{if(!a)return[];if(s){const e=await M().callApi({eventName:"getUsersOnLegalHold",environment:t,data:{spaceId:s}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}if(n){const e=await M().callApi({eventName:"getUsersOnLegalHold",environment:t,data:{organizationId:n}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}throw new Error("No space ID or organization ID provided.")}),[t,s,n,a]);return{loading:"pending"===i,users:o?new Set(o):new Set}}var fs=()=>a(263184),xs=()=>a(630315);class vs extends fs().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"read_and_write",isInviteTargetsEmpty:!0,table:xs().V7,flowId:void 0,inputFocus:"none",emailMessage:""}}}var ys=()=>a(350903),bs=()=>a(992796),Ss=()=>a(492522),js=()=>a(154186);function ws(e){let{isOpen:t,children:a}=e;const s=(0,S().yK)((e=>({outer:{position:"absolute",top:-40,left:0,zIndex:Ss().mJ},inner:{display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:5,background:e.popoverBackground,boxShadow:e.shadowSM,height:32,overflow:"hidden"}})),[]);return(0,i.jsx)(Bt().Z,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:s.outer,children:(0,i.jsx)("div",{style:s.inner,children:a})})}function Ms(e){const{icon:t,iconSize:a,title:s,isPrimary:n,isDestructive:o,onClick:r,disabled:l,disabledTooltipText:d}=e,c=(0,S().yK)((e=>({button:{color:n?e.blueColor:o?e.text.uiRedPrimary:e.text.primary,fontSize:14,whiteSpace:"nowrap",height:"100%",alignItems:"center",justifyContent:"center",gap:4,display:"flex",paddingRight:10,paddingLeft:10,borderRadius:0,boxShadow:`1px 0 0 ${e.regularDividerColor}`,fontVariantNumeric:"tabular-nums"},icon:{height:a??20,width:a??20,fill:"currentColor"}})),[n,o,a]);return(0,i.jsx)(Z().Z,{disableTooltip:!l,renderTooltip:()=>d,textWrap:!0,style:{width:260},render:e=>(0,i.jsxs)(js().Z,{style:c.button,onClick:r,disabled:l,disabledFeedback:!0,...e,children:[t?t(c.icon):void 0,s]})})}function Cs(e){let{itemsSelectedCount:t}=e;return(0,i.jsx)(x()._H,{id:"settingsConsole.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount, plural, one {1 selected} other {{itemsSelectedCount} selected}}",values:{itemsSelectedCount:t}})}var _s=()=>a(290106),Ts=()=>a(831629);function ks(e){let{selectedEmailDomains:t,setSelectedEmailDomains:a,emailDomains:s,pillTitle:n}=e;const o=(0,b().VK)((()=>s.map((e=>({key:e,value:e,title:(0,i.jsx)(es().Z,{children:e}),shortTitle:e})))),[s]);return(0,i.jsx)(Ts().J,{pillTitle:n,pillIcon:_s().Y,selectedItems:t,setSelectedItems:a,items:o})}var Is=()=>a(186596);function Hs(e){let{selectedSpaceIds:t,setSelectedSpaceIds:a,spaceData:s}=e;const n=(0,x().YB)(),o=(0,Is().$)(s,n);return(0,i.jsx)(Ts().J,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:h().K,selectedItems:t,setSelectedItems:a,items:o})}function Ps(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s,shouldHideClear:n}=e;const o=(0,x().YB)(),r=(0,Is().$)(s,o,!0);return(0,i.jsx)(Ts().p,{pillTitle:(0,i.jsx)(x()._H,{id:"orgConsole.filters.workspace.title",defaultMessage:"Workspace"}),pillIcon:h().K,selectedItem:t,setSelectedItem:e=>{void 0!==e&&e!==t&&a(e)},items:r,shouldUseCheck:!0,shouldHidePrefix:!0,selectionRequired:!0})}var Ds=()=>a(177194);function zs(e){let{selectedAccountStatus:t,setSelectedAccountStatus:a}=e;return(0,i.jsx)(Ts().p,{pillTitle:(0,i.jsx)(x()._H,{id:"managedAccounts.table.filters.accountStatus.title",defaultMessage:"Status"}),pillIcon:Ds().W,selectedItem:t,setSelectedItem:a,items:As,shouldUseCheck:!0})}const As=[{key:"notSuspended",value:"notSuspended",title:(0,i.jsx)(x()._H,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),shortTitle:(0,i.jsx)(x()._H,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),wrapCaption:!0},{key:"suspended",value:"suspended",title:(0,i.jsx)(x()._H,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),shortTitle:(0,i.jsx)(x()._H,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),wrapCaption:!0}];var Ns=()=>a(641772),Rs=()=>a(336533);const Bs=(0,n().IU)("newRefresh",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M1.646 9.578 3.28 7.281q.192-.26.438-.253.252 0 .437.253l1.627 2.304q.232.308.13.554t-.492.246H4.395q.136 1.026.622 1.907.492.882 1.237 1.545a5.5 5.5 0 0 0 1.709 1.025q.957.37 2.037.37 1.23 0 2.297-.486a5.5 5.5 0 0 0 1.832-1.32q.246-.238.52-.245.28-.014.485.177a.61.61 0 0 1 .205.479q.007.288-.24.533a7 7 0 0 1-2.269 1.64q-1.32.615-2.83.616a6.9 6.9 0 0 1-2.563-.479 7.1 7.1 0 0 1-2.154-1.34 7.2 7.2 0 0 1-1.552-1.989 6.8 6.8 0 0 1-.752-2.433h-.97q-.398 0-.492-.246-.096-.246.13-.56ZM4.9 4.758a7.1 7.1 0 0 1 2.263-1.64A6.66 6.66 0 0 1 10 2.503a6.8 6.8 0 0 1 2.55.485 7 7 0 0 1 2.16 1.34 7.2 7.2 0 0 1 1.552 1.99q.601 1.134.758 2.433h.95q.398 0 .493.246.102.246-.123.56l-1.627 2.297q-.192.26-.444.26-.246-.005-.431-.26l-1.634-2.296q-.226-.315-.13-.56.104-.247.492-.247h1.04a5.5 5.5 0 0 0-.636-1.9 5.6 5.6 0 0 0-1.23-1.545 5.5 5.5 0 0 0-1.703-1.033A5.5 5.5 0 0 0 10 3.897q-1.223 0-2.297.493a5.7 5.7 0 0 0-1.832 1.312q-.246.24-.526.246a.65.65 0 0 1-.479-.184.62.62 0 0 1-.219-.472q0-.287.253-.533Z"})}),Ls=(0,n().IU)("newTrash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M7.99 14.33a.5.5 0 0 1-.342-.117.45.45 0 0 1-.136-.328L7.307 6.72a.4.4 0 0 1 .123-.322q.13-.13.341-.13.213 0 .342.124a.42.42 0 0 1 .13.32l.212 7.165a.43.43 0 0 1-.465.451Zm2.01 0a.5.5 0 0 1-.349-.124.42.42 0 0 1-.13-.321V6.72q0-.199.13-.322A.49.49 0 0 1 10 6.27q.219 0 .349.13.136.124.136.322v7.164a.41.41 0 0 1-.136.321.49.49 0 0 1-.349.123m2.017 0a.49.49 0 0 1-.349-.124.42.42 0 0 1-.116-.328l.205-7.157a.45.45 0 0 1 .137-.328.47.47 0 0 1 .335-.123q.218 0 .341.13a.4.4 0 0 1 .123.32l-.205 7.165a.45.45 0 0 1-.136.328.48.48 0 0 1-.335.116Zm-5.12-9.968V2.886q0-.786.471-1.224.48-.444 1.326-.444h2.598q.847 0 1.326.444.48.438.479 1.224v1.476h-1.265V2.947a.54.54 0 0 0-.17-.417.63.63 0 0 0-.459-.164h-2.42a.62.62 0 0 0-.451.164.54.54 0 0 0-.17.417v1.415H6.895Zm-3.029.752a.59.59 0 0 1-.43-.177.59.59 0 0 1-.178-.431q0-.246.178-.417a.59.59 0 0 1 .43-.178h12.27q.254 0 .424.171a.56.56 0 0 1 .178.424.59.59 0 0 1-.177.43.56.56 0 0 1-.424.178zm2.994 11.532q-.792 0-1.271-.444-.472-.445-.506-1.237l-.479-9.98h1.251l.472 9.768q.014.3.198.492t.472.192h6.002a.63.63 0 0 0 .472-.192.71.71 0 0 0 .198-.492l.451-9.769h1.272l-.472 9.974q-.034.793-.513 1.237-.478.451-1.264.451z"})}),Os=(0,n().IU)("personSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M16.2 16.675 3.52 3.987a.52.52 0 0 1-.158-.383.53.53 0 0 1 .547-.54q.225 0 .39.15l12.674 12.681a.52.52 0 0 1 .157.383q0 .225-.157.39a.53.53 0 0 1-.39.157.53.53 0 0 1-.383-.15M10 4.862q-.533 0-.97.328a1.9 1.9 0 0 0-.636.855l-.903-.902a3 3 0 0 1 1.06-1.06A2.74 2.74 0 0 1 10 3.68q.827 0 1.504.424.684.424 1.08 1.141a3.2 3.2 0 0 1 .403 1.6 3.34 3.34 0 0 1-.328 1.47 3.2 3.2 0 0 1-.868 1.12l-.854-.854a1.96 1.96 0 0 0 .587-.718q.226-.458.226-1.018a2.1 2.1 0 0 0-.24-1.012 1.87 1.87 0 0 0-.635-.71 1.56 1.56 0 0 0-.875-.26Zm3.514 10.405 1.169 1.162-.206.013a3 3 0 0 1-.218.007H5.734q-1.75 0-1.75-1.176 0-.642.363-1.346a5 5 0 0 1 1.039-1.347 6 6 0 0 1 1.64-1.073 6.8 6.8 0 0 1 2.167-.567l1.142 1.148a2 2 0 0 0-.17-.007 2 2 0 0 0-.165-.007q-1.135 0-2.017.322-.874.314-1.476.8-.595.478-.91.99-.314.507-.314.903 0 .096.048.137.055.04.178.04z"})}),Vs=(0,n().IU)("rectanglePencilEllipsis",{viewBox:"0 0 22 20",svg:(0,i.jsx)("path",{d:"M2.523 15.942q-.963 0-1.49-.512-.52-.513-.52-1.477V8.04q0-.971.52-1.477.527-.512 1.49-.512h12.845L14.11 7.3H2.715q-.84 0-.841.842v5.708q0 .396.219.615t.622.219h13.802q.403 0 .622-.22.219-.218.218-.614V9.257l1.36-1.36v6.056q0 .964-.519 1.477-.52.512-1.49.512zm10.391-4.6q-.116.047-.219-.055-.095-.102-.04-.219l.649-1.401 5.885-5.893 1.067 1.06-5.9 5.886zm7.861-7.034-1.06-1.067.493-.485a.7.7 0 0 1 .451-.212.53.53 0 0 1 .438.157l.191.185a.59.59 0 0 1 .192.45.67.67 0 0 1-.212.466zM4.438 12.012a.99.99 0 0 1-.725-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.724-.3.417 0 .711.3.301.3.301.718a.98.98 0 0 1-.3.718q-.295.3-.712.3Zm3 0a.98.98 0 0 1-.717-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.717-.3.424 0 .718.3.3.3.301.718a.98.98 0 0 1-.3.718.97.97 0 0 1-.719.3Zm3.008 0a.98.98 0 0 1-.717-.301.98.98 0 0 1-.301-.718q0-.417.3-.718.301-.3.718-.3.418 0 .718.3t.3.718a.98.98 0 0 1-.3.718q-.3.3-.718.3Z"})});var Us=()=>a(529048),qs=()=>a(448419),Es=()=>a(1910),Zs=()=>a(802321),Fs=()=>a(886378),Ws=()=>a(956779);function Ks(e){const{userId:t,onDismiss:a,onSubmit:n,shouldWarnLegalHold:o}=e,r=(0,y().O7)(),l=(0,x().YB)(),d=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),c=(0,b().VK)((()=>{if(!t)return"";return new(ct().U)(r,{table:j().KJ,id:t}).getDisplayName(l)}),[r,t,l]);const[u,m]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,Xe().L)(d.icon),title:o?l.formatMessage(Gs.legalHoldTitle):l.formatMessage(Gs.title),byline:l.formatMessage(Gs.byline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})})}),footer:(0,i.jsx)(W().mz,{primaryText:l.formatMessage(Gs.buttonText),primaryAction:async()=>{m(!0),await async function(){await n(),a()}(),m(!1)},primaryDisabled:u||!g,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(tt().Z,{checked:g,size:14,checkSize:10,onClick:()=>p(!g)}),(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l.formatMessage(Gs.confirmationText)})]})})})})}const Gs=(0,x().vU)({title:{id:"orgConsole.people.modal.deleteUser.title",defaultMessage:"Are you sure you want to delete this user?"},legalHoldTitle:{id:"orgConsole.people.modal.deleteUser.legalHoldTitle",defaultMessage:"This user is currently on legal hold."},byline:{id:"orgConsole.people.modal.deleteUser.byline",defaultMessage:"<b>{userName}</b> will be removed from all workspaces, losing access to content, groups, and teamspaces. Restore within 30 days before permanent deletion."},confirmationText:{id:"orgConsole.people.modal.deleteUser.confirmationText",defaultMessage:"I understand this deletion is permanent"},buttonText:{id:"orgConsole.people.modal.deleteUser.buttonText",defaultMessage:"Delete user"}});function Ys(e){let{userStore:t,isSuspended:a,disabled:n,shouldWarnLegalHold:o}=e;const r=(0,y().O7)(),[l,d]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ea().F,{color:"uiRed",onClick:()=>d(!0),disabled:n,children:(0,i.jsx)(x()._H,{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountButton",defaultMessage:"Delete user"})}),l&&(0,i.jsx)(Ks,{shouldWarnLegalHold:o,userId:t.id,onDismiss:()=>d(!1),onSubmit:async()=>await $s({environment:r,isSuspended:a,userId:t.id})})]})}async function $s(e){let{environment:t,isSuspended:a,userId:s}=e;qa().P1(t,{user_status:a?"suspended":"notSuspended"});const n=await M().callApi({eventName:"deleteManagedUser",environment:t,data:{userId:s}});qa().j7(t,{user_status:a?"suspended":"notSuspended"}),"failed"===n.type&&C().RL(n.error.message)}var Js=()=>a(771704);function Qs(e){let{userStore:t,organizationStore:a}=e;const n=(0,Js()._)(),{spaceUsers:i,loading:o}=(0,N().D)(n),r=(0,b().VK)((()=>{var e;return(null===(e=a.getRoles().find((e=>e.id===t.id)))||void 0===e?void 0:e.role)??"none"}),[a,t.id]),[l,d]=(0,s.useState)(new Map),[c,u]=(0,s.useState)(new Map),m=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[g,p]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!o&&!g){const e=new Map;for(const a of m){const s=i[a];if(!s)continue;const n=s.find((e=>e.userId===t.id));n&&e.set(a,n)}d(e)}}),[o,m,i,t.id,g]);const{loadVisibleUsersForSpace:h}=(0,s.useContext)(z().g),f=(0,s.useCallback)((async e=>{p(!0),await h(e,!0),u((t=>{const a=new Map(t);return a.delete(e),a})),p(!1)}),[h]),x=(0,s.useCallback)((e=>{u((t=>{const a=new Map(t);return a.delete(e),f(e),a}))}),[f]),v=(0,s.useCallback)(((e,a)=>{u((s=>{if(!(0,Ma().Jy)(a))return s;const n=new Map(s);return n.set(e,{userId:t.id,role:a}),f(e),n}))}),[f,t.id]);return{loading:o,userData:{loading:o,userSpaceAccessMap:new Map([...l,...c]),organizationRole:r,removeUserFromSpaceCache:x,updateUserRoleInSpaceCache:v}}}function Xs(e){let{onDismiss:t,...a}=e;const s=(0,y().O7)(),n=(0,x().YB)(),{userId:o,organizationStore:r,lastActiveAt:l,isOnLegalHold:d}=a,{userStore:c}=(0,b().VK)((()=>({userStore:new(I().U6)(s,{table:j().KJ,id:o})})),[s,o]),{loading:u,userData:m}=Qs({userStore:c,organizationStore:r}),g=(0,b().VK)((()=>(0,i.jsx)(ta().Z,{size:$t().Tr,userStore:c})),[c]),[p,h]=(0,b().VK)((()=>[c.getDisplayName(n),c.getEmail()??""]),[c,n]);return(0,i.jsx)($t().Dl,{sidebarProps:{sidebarTitle:p,sidebarByline:h,sidebarTitleIcon:g,hideSeparator:!0},tabRenderer:Ap,tabNames:Ft().tg,defaultTab:"general",sceneProps:{isLoading:u,organizationStore:r,userStore:c,userData:{lastActiveAt:l,...m},isOnLegalHold:d},tabAccessor:zp,isOpen:!0,onDismiss:t})}function en(e){let{userStore:t,isSuspended:a,disabled:n,styles:o}=e;const r=(0,y().O7)(),[l,d]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K().mk,{onClick:async()=>{a?await tn({environment:r,isSuspended:a,userId:t.id}):d(!0)},disabled:n,style:o,children:a?(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedAccounts.suspendUser.reactivateButton",defaultMessage:"Re-activate user"}):(0,i.jsx)(x()._H,{id:"identityProvisioningSettings.managedAccounts.suspendUser.suspendButton",defaultMessage:"Suspend user"})}),l&&(0,i.jsx)(Fa,{type:"suspend",userId:t.id,onDismiss:()=>d(!1),onSubmit:async()=>await tn({environment:r,isSuspended:a,userId:t.id})})]})}async function tn(e){let{environment:t,isSuspended:a,userId:s}=e;a||qa().rZ(t);const n=await M().callApi({eventName:"updateUserSuspension",environment:t,data:{userId:s,suspend:!a}});a?qa().Ci(t):qa().rv(t,{suspended_user_id:s}),"failed"===n.type&&C().UW((0,_().wf)(T().Z.getIntl(),n))}const an={marginLeft:4,height:14,width:14,opacity:.5},sn={id:"user",headerTitle:(0,i.jsx)(x()._H,{id:"managedAccounts.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Vt().a.ManagedUser?(0,i.jsx)(sa,{userId:e.managedUser.userId,isOnLegalHold:e.usersOnLegalHold.has(e.managedUser.userId),rightContent:(0,i.jsx)(mn,{managedUser:e.managedUser,isLastOrgOwner:e.isLastOrgOwner,handleEditDetails:e.handleEditDetails,handleUpdateUserSuspension:e.handleUpdateUserSuspension,handleLogOutUser:e.handleLogOutUser,handleResetPassword:e.handleResetPassword,handleDeleteUser:e.handleDeleteUser})}):(0,i.jsx)(na,{}),widthData:{width:275,maxWidth:275},sortable:!1},nn={id:"email",headerTitle:(0,i.jsx)(x()._H,{id:"organizationAccounts.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:240}}):(0,i.jsx)(Fs().hr,{userId:e.managedUser.userId}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},on={id:"workspaces",headerTitle:(0,i.jsx)(x()._H,{id:"managedAccounts.table.workspaces",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Vt().a.ManagedUser?(0,i.jsx)(cn,{managedUser:e.managedUser}):(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}),widthData:{widthPercent:25,minWidth:120},sortable:!1},rn={id:"lastActive",headerTitle:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,i.jsx)(x()._H,{id:"managedAccounts.table.lastActive",defaultMessage:"Last active"}),(0,i.jsx)(Z().Z,{render:e=>(0,i.jsx)("div",{...e,children:(0,a(409873).D)(an)}),renderTooltip:()=>(0,i.jsx)(x()._H,{id:"managedAccounts.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Vt().a.ManagedUser?(0,i.jsx)(Ws().B,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,i.jsx)(Zs().I,{}),widthData:{width:60},sortable:!1},ln=[sn,{id:"accountStatus",headerTitle:(0,i.jsx)(x()._H,{id:"organization.managedAccounts.table.accountStatus",defaultMessage:"Status"}),renderCell:e=>e.type===Vt().a.ManagedUser?(0,i.jsx)(un,{status:e.managedUser.accountStatus}):(0,i.jsx)(Ht().HD,{containerStyles:{width:80}}),widthData:{width:60},sortable:!1},nn,on,rn];function dn(e){let{organizationStore:t,usersOnLegalHold:a,managedUsers:n,loading:o,loadNextPage:r,loadPrevPage:l,currentPage:d,hasPreviousPage:c,hasNextPage:u,refreshPage:m,selectedIds:g,onSelectAll:p,onUnselectAll:h,onSelectRow:f}=e;const v=(0,y().O7)(),j=(0,Rt().Z)(),w=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:ln,theme:e,containerMarginTop:0})),[]),[M,C]=(0,s.useState)({isOpen:!1}),_=()=>{C({isOpen:!1})},[T,k]=(0,s.useState)(void 0),I=()=>{k(void 0)},[H,P]=(0,s.useState)(void 0),D=()=>{P(void 0)},z=(0,b().VK)((()=>n.map((e=>({id:e.userId,type:Vt().a.ManagedUser,managedUser:e,isLastOrgOwner:t.isUserLastOwner(e.userId),isClickable:!0,usersOnLegalHold:a,handleEditDetails:()=>{C({isOpen:!0,onDismiss:_,userId:e.userId,organizationStore:t,lastActiveAt:e.lastActiveAt})},handleUpdateUserSuspension:async()=>{"notSuspended"===e.accountStatus?k({type:"suspend",userId:e.userId,onDismiss:I,onSubmit:async()=>{await tn({environment:v,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),m()}}):(await tn({environment:v,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),m())},handleLogOutUser:()=>{k({type:"logoutSingle",onDismiss:I,onSubmit:async()=>{await Ga({environment:v,organizationId:t.id,userId:e.userId}),m()}})},handleResetPassword:()=>{k({type:"resetPasswordSingle",userId:e.userId,onDismiss:I,onSubmit:async()=>{await $a({environment:v,organizationId:t.id,userId:e.userId}),m()}})},handleDeleteUser:()=>{P({userId:e.userId,onDismiss:D,onSubmit:async()=>{await $s({environment:v,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),m()}})}})))),[v,n,t,m,a]);const A=o?(0,Vt().s)():z,N=ln.map((e=>({...e,headerStyle:j.tableHeader,rowStyle:j.tableRow}))),R={header:{isDisabled:o,isSelected:g.length>0&&g.length===n.length,onClick:()=>{g.length===n.length?h():p()}},row:{getDisabledState:e=>o,getSelectedState:e=>e.type===Vt().a.ManagedUser&&g.includes(e.managedUser.userId),onClick:e=>{e.type===Vt().a.ManagedUser&&f(e.managedUser.userId)}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:N,rows:A,renderNoRowsComponent:()=>o?null:(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"managedAccounts.table.empty",defaultMessage:"No users found"}),byline:(0,i.jsx)(x()._H,{id:"managedAccounts.table.empty.byline",defaultMessage:"There are no users that match this query."})}),loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:l,hasNextPage:u,hasPrevPage:c,currentPage:d},styles:w,multiselect:R,onRowClick:function(e){e.type===Vt().a.ManagedUser&&C({isOpen:!0,onDismiss:_,userId:e.managedUser.userId,organizationStore:t,lastActiveAt:e.managedUser.lastActiveAt})},extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),M.isOpen&&(0,i.jsx)(Xs,{...M,isOnLegalHold:a.has(M.userId)}),T&&(0,i.jsx)(Fa,{...T}),H&&(0,i.jsx)(Ks,{shouldWarnLegalHold:a.has(H.userId),...H})]})}function cn(e){let{managedUser:t}=e;return 0===t.workspaces.length?(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(X().sF,{workspaces:t.workspaces,showTooltip:!0})}function un(e){return"notSuspended"===e.status?(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organization.managedAccounts.table.accountStatusValue.active",defaultMessage:"Active"})}):(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organization.managedAccounts.table.accountStatusValue.suspended",defaultMessage:"Suspended"})})}function mn(e){const{managedUser:t,isLastOrgOwner:s,handleEditDetails:n,handleUpdateUserSuspension:o,handleLogOutUser:r,handleResetPassword:l,handleDeleteUser:d}=e,c=(0,b().qz)(void 0,Us().Z),u=(0,S().yK)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),m=[{key:"edit-details",render:e=>(0,i.jsx)(Re().Z,{...e,icon:(0,a(318673).g)(u.icon),title:(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.userColumn.menu.editDetails",defaultMessage:"Edit details"})}),action:()=>{n(),c.setState({...c.state,open:!1})}},{key:"log-out-user",render:e=>(0,i.jsx)(Re().Z,{...e,icon:(0,Rs().L)(u.icon),title:(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.userColumn.menu.logoutUser",defaultMessage:"Log out"})}),action:()=>{r(),c.setState({...c.state,open:!1})}},{key:"reset-password",render:e=>(0,i.jsx)(Re().Z,{...e,icon:Vs(u.icon),title:(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.userColumn.menu.resetPassword",defaultMessage:"Reset password"})}),action:()=>{l(),c.setState({...c.state,open:!1})}}],g={key:"actions",render:e=>(0,i.jsx)(Be().Z,{title:(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.userColumn.menu.title",defaultMessage:"Managed account actions"}),...e}),items:m},p=[{key:"suspend-user",render:e=>(0,i.jsx)(Re().Z,{...e,isRedOnHover:!0,icon:"suspended"===t.accountStatus?Bs(u.icon):Os(u.icon),title:"suspended"===t.accountStatus?(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.userColumn.menu.unSuspendUser",defaultMessage:"Reactivate user"}):(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.userColumn.menu.suspendUser",defaultMessage:"Suspend user"})}),action:()=>{o(),c.setState({...c.state,open:!1})}},{key:"delete-user",render:e=>(0,i.jsx)(Re().Z,{...e,isRedOnHover:!0,icon:Ls(u.icon),title:(0,i.jsx)(x()._H,{id:"organizationManagedUsersTable.userColumn.menu.deleteUser",defaultMessage:"Delete user"}),disabled:s,disabledFeedback:s}),action:()=>{d(),c.setState({...c.state,open:!1})}}],h={key:"destructive-actions",render:e=>(0,i.jsx)(Be().Z,{topBorder:!0,...e}),items:p};return(0,i.jsx)(qs().ZP,{stopClickPropagation:!0,popupType:Ta().k.Popup,alignmentToOrigin:_a().Alignment.Start,placementToOrigin:_a().Placement.Bottom,style:u.popupMenu,render:()=>(0,i.jsx)(mt().Z,{menuType:dt().o.Popup,width:248,children:(0,i.jsx)(gt().ZP,{type:gt().iW.Vertical,initialFocus:void 0,sections:[g,h]})}),onClose:()=>{},buttonPopupStore:c,renderOrigin:e=>(0,i.jsx)(Es().Z,{ariaLabel:"3 dot menu for actions to apply to a managed user",icon:Ns().o,...e})})}var gn=()=>a(254216),pn=()=>a(438771);function hn(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,i.jsx)(Ts().p,{pillTitle:(0,i.jsx)(x()._H,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:gn().o,selectedItem:t,setSelectedItem:a,items:pn().h,shouldUseCheck:!0})}var fn=()=>a(243225);function xn(e){let{inviteTargets:t,inviteRole:a,organizationStore:n}=e;const o=(0,y().O7)(),[r,l]=(0,s.useState)(!1);return{spaceStores:(0,Js()._)(),loading:r,onSubmit:(0,s.useCallback)((async e=>{l(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(kt().$K),r=t.filter((e=>"newUser"===e.type&&"email"===e.source)).map((e=>e.value.email)),d=(0,fn().Ci)(a);await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:o,data:{organizationId:n.id,existingUserIds:s,newUserEmails:r,spaceIds:e,role:d}}),l(!1),1===e.length?et().oV({label:(0,i.jsx)(x()._H,{id:"workspacesMultiSelect.toastMessage.addUsers.singleSpace.success",defaultMessage:"Successfully added users to workspace"})}):et().oV({label:(0,i.jsx)(x()._H,{id:"workspacesMultiSelect.toastMessage.addUsers.success",defaultMessage:"Successfully added users to {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})})}),[n,o,a,t])}}var vn=()=>a(386973);function yn(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e,[r,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)([]),u=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteRole:m,inviteTargets:g}=(0,b().VK)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:p,onSubmit:h}=xn({inviteRole:m,inviteTargets:g,organizationStore:a});function f(e){c((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function v(){c((e=>e.length!==p.length?p.map((e=>e.id)):[]))}async function y(){0!==d.length&&(l(!0),await h(d),await o(),n(),l(!1))}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:(0,rs().l)(u.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.title",defaultMessage:"Add members to workspace"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to add <bold>{count} {count, plural, one {user} other {users}}</bold> as workspace members, granting access to workspace content and default teamspaces.",values:{count:g.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.add",defaultMessage:"Add users"}),primaryAction:y,primaryDisabled:r||0===d.length,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:u.content,children:(0,i.jsx)(vn().x,{spaceStores:p,selectedSpaceIds:d,onSelect:f,onSelectHeader:v})})})})}function bn(e){let{inviteTargets:t,organizationStore:a}=e;const n=(0,y().O7)(),[o,r]=(0,s.useState)(!1);return{spaceStores:(0,Js()._)(),loading:o,onSubmit:(0,s.useCallback)((async e=>{r(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(kt().$K);await M().callApi({eventName:"removeUserFromOrganizationSpaces",environment:n,data:{organizationId:a.id,userIds:s,spaceIds:e}}),r(!1),1===e.length?et().oV({label:(0,i.jsx)(x()._H,{id:"workspacesMultiSelect.toastMessage.removeUsers.success.singleWorkspace",defaultMessage:"Successfully removed users from workspace."})}):et().oV({label:(0,i.jsx)(x()._H,{id:"workspacesMultiSelect.toastMessage.removeUsers.success",defaultMessage:"Successfully removed users from {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})})}),[t,n,a.id])}}var Sn=()=>a(212493);function jn(e){const{userStore:t}=e,a=(0,S().yK)((e=>({userRow:{display:"flex",alignItems:"center",padding:"6px 12px",flexDirection:"row",gap:12},name:{flex:1},email:{flex:2,maxWidth:"70%",overflow:"hidden"}})),[]),s=(0,x().YB)(),n=(0,b().VK)((()=>({name:t.getDisplayName(s),email:t.getEmail()})),[s,t]);return(0,i.jsxs)("div",{style:a.userRow,children:[(0,i.jsx)(ta().Z,{userStore:t,size:32}),(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Medium",colorName:"primary",customStyles:a.name,children:n.name}),(0,i.jsx)(Sn().jX,{align:"center-right",style:a.email,children:(0,i.jsx)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n.email})})]})}const wn=function(e){let{userIds:t}=e;const n=(0,S().yK)((e=>({userListContainer:{borderRadius:8,border:`1px solid ${e.stroke.secondary}`},userListHeader:{padding:"4px 16px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center"},scroller:{maxHeight:200},searchInput:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"}})),[]),o=(0,y().O7)(),r=(0,x().YB)(),l=(0,b().VK)((()=>t.map((e=>new(ct().U)(o,{table:j().KJ,id:e})))),[o,t]),[d,c]=(0,s.useState)(""),u=(0,b().VK)((()=>{if(d){return(0,rt().ZP)(d,l,(e=>e.getDisplayName(r)))}return l}),[d,l,r]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.usersList.label",defaultMessage:"Selected users"})}),(0,i.jsxs)("div",{style:n.userListContainer,children:[(0,i.jsxs)("div",{style:n.userListHeader,children:[(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.usersList.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)("div",{style:n.searchInput,children:(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:d,setQueryFilter:c})})]}),(0,i.jsx)(a(842574).T,{type:a(520849).Z.Y,style:n.scroller,children:u.map((e=>(0,i.jsx)("div",{children:(0,i.jsx)(jn,{userStore:e})},e.id)))})]})]})};function Mn(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o,spaceStore:r,membersSpaceIds:l}=e,[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(r?[r.id]:[]),g=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteTargets:p}=(0,b().VK)((()=>({inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:h,onSubmit:f}=bn({inviteTargets:p,organizationStore:a}),v=h.filter((e=>!l||l.has(e.id)));function y(e){m((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function j(){m((e=>e.length!==v.length?v.map((e=>e.id)):[]))}async function w(){0!==u.length&&(c(!0),await f(u),await o(),n(),c(!1))}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:ls(g.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.title",defaultMessage:"Remove members from workspace"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from, revoking access to all content.",values:{count:p.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:p.length}}),primaryAction:w,primaryDisabled:d||0===u.length,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:g.content,children:r?(0,i.jsx)(wn,{userIds:p.map((e=>e.value.id)).filter(kt().$K)}):(0,i.jsx)(vn().x,{spaceStores:v,selectedSpaceIds:u,onSelect:y,onSelectHeader:j})})})})}const Cn=(0,x().vU)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function _n(e){let{organizationStore:t}=e;const a=(0,y().O7)(),s=(0,i.jsx)(x()._H,{id:"organization.people.accounts.title",defaultMessage:"Manage user accounts"});return(0,i.jsx)(ys().J,{breadcrumbs:[{message:(0,i.jsx)(x()._H,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{Oa().c4({environment:a,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().qR})})}},{message:s}],children:(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:s,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"organization.people.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails: adjust access, update profiles, and control permissions."})})}),(0,i.jsx)(kn,{organizationStore:t})]})})}var Tn=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.DeleteUser="delete-user",e}(Tn||{});function kn(e){let{organizationStore:t}=e;const a=(0,y().O7)(),n=(0,x().YB)(),o=(0,ds().S)()||0,r=(0,S().yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:R().Ue.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:R().Ue.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4,rowGap:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),{managedUsers:l,filters:d,setFilters:c,loading:u,currentPage:m,hasPrevPage:g,hasNextPage:p,loadNextPage:h,loadPrevPage:f,refreshPage:v}=function(e){let{organizationStore:t}=e;const a=(0,y().O7)(),[n,i]=(0,s.useState)(ms),o=(0,s.useRef)(n.filters),r=(0,s.useRef)(!1),l=(0,b().VK)((()=>t.getEmailDomains()),[t]),d=(0,s.useMemo)((()=>n.filters.emailDomains&&n.filters.emailDomains.length>0?n.filters.emailDomains:l),[n.filters.emailDomains,l]),c=(0,s.useCallback)((async e=>{if(0===d.length)return;let t=n.loading,s=n.error,r=n.hasNextPage,l=n.paginationToken,c=n.paginationTokenHistory;if(e.restartSearch&&(i((e=>({...ms,filters:e.filters}))),t=ms.loading,s=ms.error,r=ms.hasNextPage,l=ms.paginationToken,c=[]),r&&!t&&!s){i((e=>({...e,loading:!0}))),o.current=n.filters;try{var u;const e=await M().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:l,emailDomains:d,limit:us}});if(qa().HH(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(u=n.filters.query)||void 0===u?void 0:u.length)??0,current_page:l}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,s=e.data.results;i((e=>({...e,managedUsers:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,paginationTokenHistory:l?[...c,l]:c,hasNextPage:Boolean(t)})))}catch(m){const e=(0,cs().t)(m);i((t=>({...t,loading:!1,error:e})))}}}),[a,n.loading,n.error,n.hasNextPage,n.paginationToken,n.paginationTokenHistory,n.filters,d]),u=(0,s.useCallback)((async e=>{if(0===d.length)return;let t=n.loading,s=n.error,r=n.paginationToken,l=n.paginationTokenHistory;if(e.restartSearch&&(i((e=>({...ms,filters:e.filters}))),t=ms.loading,s=ms.error,r=ms.paginationToken,l=[]),0===l.length||t)return;if(s)return;i((e=>({...e,loading:!0}))),o.current=n.filters;const c=l[l.length-2];try{var u;const e=await M().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:c,emailDomains:d,limit:us}});if(qa().HH(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(u=n.filters.query)||void 0===u?void 0:u.length)??0,current_page:r}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,s=e.data.results;i((e=>({...e,managedUsers:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,paginationTokenHistory:l.slice(0,-1),hasNextPage:Boolean(t)})))}catch(m){const e=(0,cs().t)(m);i((t=>({...t,loading:!1,error:e})))}}),[a,n.loading,n.error,n.paginationToken,n.paginationTokenHistory,n.filters,d]);(0,s.useEffect)((()=>{!r.current&&d.length>0&&(c({restartSearch:!0}),r.current=!0)}),[d,c]),(0,s.useEffect)((()=>{We().Xy(o.current,n.filters)||c({restartSearch:!0})}),[n.filters,c]);const m=(0,s.useCallback)((()=>c({restartSearch:!1})),[c]),g=(0,s.useCallback)((()=>u({restartSearch:!1})),[u]),p=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),h=(0,s.useCallback)(((e,t)=>{i((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,workspaces:a.workspaces.filter((e=>e.id!==t))}:a))})))}),[]),f=(0,s.useCallback)(((e,t)=>{i((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,accountStatus:t}:a))})))}),[]),x=(0,s.useCallback)((e=>{i((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]),v=(0,s.useCallback)((()=>c({restartSearch:!0})),[c]);return{managedUsers:n.managedUsers,filters:n.filters,loading:n.loading,error:n.error,removeWorkspaceFromUser:h,removeUserFromManagedUsers:x,setFilters:p,currentPage:n.paginationTokenHistory.length+1,hasNextPage:n.hasNextPage,loadNextPage:m,hasPrevPage:n.paginationTokenHistory.length>0,loadPrevPage:g,updateManagedUserAccountStatus:f,refreshPage:v}}({organizationStore:t}),w=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),{selectedIds:C,handleToggleId:_,handleSelectAllIds:T,handleUnselectAllIds:k}=gs({allPossibleIds:w}),{organizationOwnerRecordCache:H}=(0,s.useContext)(D().V),{spaceIds:P}=(0,s.useContext)(z().g),[A,N]=(0,s.useState)(),B=(0,b().VK)((()=>{const e=[];for(const t of P)e.push(new(I().H2)(a,{id:t,table:qt().bx},{inMemoryRecordCache:H}));return e.map((e=>{var t;return{id:e.id,name:e.getName(),createdTime:e.getCreatedTime(),memberCount:o,icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon,subscriptionTier:e.getSubscriptionTier()}}))}),[a,H,P,o]),{users:L}=hs({organizationId:t.id});function O(){N(void 0)}async function V(){await v(),k()}const U=(0,b().VK)((()=>new vs),[]),q=(0,b().VK)((()=>t.getEmailDomains()),[t]),E=(0,b().VK)((()=>C.map((e=>new(I().U6)(a,{table:j().KJ,id:e}).getModel())).filter(kt().$K).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[a,C]);(0,s.useEffect)((()=>{U.setState({...U.state,inviteTargets:E,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[U,E]);const{inviteTargets:Z}=(0,b().VK)((()=>({inviteTargets:U.state.inviteTargets})),[U]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsxs)(ws,{isOpen:C.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(Cs,{itemsSelectedCount:C.length}),onClick:k}),(0,i.jsx)(Ms,{icon:rs().l,title:(0,i.jsx)(x()._H,{id:"organizationManagedAccountsSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>N(Tn.AddToWorkspace)}),(0,i.jsx)(Ms,{icon:ls,title:(0,i.jsx)(x()._H,{id:"organizationManagedAccountsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>N(Tn.RemoveFromWorkspace)})]}),(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationManagedAccountsTable.emailDomainsFilter.pillTitle",defaultMessage:"Domain email"}),emailDomains:q,selectedEmailDomains:d.emailDomains||[],setSelectedEmailDomains:e=>{c({emailDomains:e})}}),(0,i.jsx)(Ps,{selectedSpaceId:d.workspaceId,setSelectedSpaceId:e=>{c({workspaceId:e})},spaceData:B}),(0,i.jsx)(hn,{selectedMfaMethod:d.multiFactorStatus,setSelectedMfaMethod:e=>{c({multiFactorStatus:e})}}),(0,i.jsx)(zs,{selectedAccountStatus:d.managedUserStatus,setSelectedAccountStatus:e=>{c({managedUserStatus:e})}})]}),(0,i.jsx)("div",{style:r.rightContent,children:(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:d.query,setQueryFilter:e=>c({query:e}),placeholderText:n.formatMessage(Cn.placeholder)})})]}),A===Tn.AddToWorkspace?(0,i.jsx)(yn,{permissionsInviteStore:U,onDismiss:O,organizationStore:t,refreshPage:V}):null,A===Tn.RemoveFromWorkspace?(0,i.jsx)(Mn,{permissionsInviteStore:U,onDismiss:O,organizationStore:t,refreshPage:V,membersSpaceIds:In({managedUsers:l,inviteTargets:Z})}):null,(0,i.jsx)(dn,{organizationStore:t,managedUsers:l,usersOnLegalHold:L,loading:u,currentPage:m,loadNextPage:h,loadPrevPage:f,hasPreviousPage:g,hasNextPage:p,selectedIds:C,onSelectAll:T,onUnselectAll:k,onSelectRow:_,refreshPage:V})]})}function In(e){let{managedUsers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.workspaces)??[])s.add(t.id)}return s}var Hn=()=>a(335058),Pn=()=>a(828946);async function Dn(e){const{query:t,environment:a}=e,s=await Pn().x.searchActions.load(),{user:n,email:i}=await s.searchEmailUser(a,t),o=[];return n?o.push({type:"existingUser",value:n}):i&&o.push({type:"newUser",value:{email:i},source:"email"}),{inviteUsers:o,inviteBots:[],inviteGroups:[],importedContacts:[]}}function zn(e){let{organizationId:t,spaceId:a}=e;return async function(e){const{query:s,environment:n}=e,i=await M().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:t,spaceId:a,query:s,limit:5}});if("success"!==i.type)return{inviteUsers:[],inviteBots:[],inviteGroups:[],importedContacts:[]};const o=[];for(const t of i.data.members){const e=new(I().U6)(n,{table:j().KJ,id:t.userId}).getModel();e&&o.push({type:"existingUser",value:e})}return{inviteUsers:o,inviteBots:[],inviteGroups:[],importedContacts:[]}}}const An=[{id:"workspace-owner",title:"Workspace owner",value:"editor",caption:"Workspace owners can manage rights of their members.",icon:f},{id:"memberbership-admin",title:"Membership admin",value:"membership_admin",caption:"Can manage workspace and group membership.",icon:Ut},{id:"member",title:"Member",value:"read_and_write",caption:"Cannot change workspace settings or invite new members to the workspace.",icon:g}];function Nn(e){const{organizationStore:t,onDismiss:a,refreshPage:n,spaceId:o}=e,r=(0,b().VK)((()=>new vs),[]),[l,d]=(0,s.useState)(o?[o]:[]),c=(0,b().VK)((()=>{var e;const t=r.state.inviteRole;return(null===(e=An.find((e=>e.value===t)))||void 0===e?void 0:e.id)??An[0].id}),[r]),u=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,width:540,overflowY:"auto",paddingBottom:24}})),[]),{inviteRole:m,inviteTargets:g}=(0,b().VK)((()=>({inviteRole:r.state.inviteRole,inviteTargets:r.state.inviteTargets})),[r]),{spaceStores:p,loading:h,onSubmit:f}=xn({inviteRole:m,inviteTargets:g,organizationStore:t}),v=(0,b().VK)((()=>{const e=l.length>0,t=r.state.inviteTargets.length>0;return!h&&e&&t}),[l,r,h]);function y(e){d((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function j(){d((e=>e.length!==p.length?p.map((e=>e.id)):[]))}function w(e){var t;const a=null===(t=An.find((t=>t.id===e)))||void 0===t?void 0:t.value;a&&r.setState({...r.state,inviteRole:a})}async function M(){v&&(await f(l),await n(),a())}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:400}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(V().sR,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(W().xB,{icon:(0,rs().l)(u.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.title",defaultMessage:"Add members to workspaces"}),byline:o?(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline.space",defaultMessage:"Add the following users to this workspace."}):(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline",defaultMessage:"Select members, workspaces, and roles to grant the appropriate access to workspace content, membership management and security controls."})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.add",defaultMessage:"Add members"}),primaryAction:M,primaryDisabled:!v,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:u.content,children:[(0,i.jsx)(Hn().Z,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:t,permissionsInviteStore:r,performSearchRequest:Dn}),(0,i.jsx)(W().SK,{selectedId:c,onChange:w,options:An}),!o&&(0,i.jsx)(vn().x,{spaceStores:p,selectedSpaceIds:l,onSelect:y,onSelectHeader:j})]})})}})}var Rn=()=>a(259314),Bn=()=>a(390561);const Ln=Ge().B,On={groups:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:oa,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},Vn={columnName:"name",direction:"ascending"};function Un(e){return"name"===e.column.id?{columnName:"name",direction:e.sortAscending?"ascending":"descending"}:"members"===e.column.id?{columnName:"members",direction:e.sortAscending?"ascending":"descending"}:Vn}var qn=()=>a(51277);function En(e){let{spaceStores:t}=e;return(0,b().VK)((()=>t.map((e=>{var t;return{id:e.id,name:e.getName(),subscriptionTier:e.getSubscriptionTier(),icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon}}))),[t])}const Zn=(0,x().vU)({placeholder:{id:"organizationGroupsSubTab.groupsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGroupsSubTab.sort.name",defaultMessage:"Name"},memberCount:{id:"organizationGroupsSubTab.sort.memberCount",defaultMessage:"Member count"}});function Fn(e){let{organizationStore:t,groupId:a}=e;const s=(0,y().O7)(),n=(0,i.jsx)(x()._H,{id:"organization.people.groups.title",defaultMessage:"Manage groups"});return(0,i.jsx)(ys().J,{breadcrumbs:[{message:(0,i.jsx)(x()._H,{id:"organizationGroupsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{Oa().c4({environment:s,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().qR})})}},{message:n}],children:(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:n,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"organization.people.groups.byline",defaultMessage:"Set up groups to manage page permissions from the share menu and manage teamspace members in bulk."})})}),(0,i.jsx)(Wn,{organizationStore:t,groupId:a})]})})}function Wn(e){let{organizationStore:t,groupId:a}=e;const n=(0,x().YB)(),{groups:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:m,query:g,setQuery:p,refreshPage:h,currentPage:f,loadPreviousPage:v,hasPreviousPage:b,hasNextPage:S,removePagesFromGroup:j}=function(e){let{organizationStore:t}=e;const a=(0,y().O7)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(D().V),[i,o]=(0,s.useState)(On),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(On.sortState),u=(0,s.useRef)({}),m=(0,s.useRef)(On.query),g=(0,s.useRef)(On.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:i,filters:r,query:l}=e;try{const e=await M().callApi({eventName:"getGroupsInOrganization",environment:a,data:{organizationId:t.id,sort:Un(i),cursor:s,filters:r,query:l,limit:Ln}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}n({data:e.data}),o((t=>({...t,error:void 0,loading:!1,groups:e.data.groups,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==j()})))}catch(d){const e=(0,cs().t)(d);o((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{let{restartSearch:a,overridePage:s}=e;if(!t.id)return;let n=i.loading,r=i.error,l=s?s.hasNextPage:i.hasNextPage,d=s?s.cursor:i.cursor;return a&&(o((e=>({...On,sortState:e.sortState,filters:e.filters,query:e.query}))),n=On.loading,r=On.error,l=On.hasNextPage,d=On.cursor),!l||n||r?void 0:(o((e=>({...e,loading:!0}))),u.current=i.filters,c.current=i.sortState,m.current=i.query,g.current=s?s.cursor:d,p({cursor:d,sortState:i.sortState,filters:i.filters,query:i.query}))}),[t.id,i,p]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const f=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{We().Xy(c.current,i.sortState)||h({restartSearch:!0})}),[i.sortState,h]),(0,s.useEffect)((()=>{We().Xy(u.current,i.filters)||h({restartSearch:!0})}),[i.filters,h]),(0,s.useEffect)((()=>{We().Xy(m.current,i.query)||h({restartSearch:!0})}),[i.query,h]);const x=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),v=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e??On.sortState})))}),[]),b=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]),S=(0,s.useCallback)((async e=>(e&&o((e=>({...e,loading:!0,groups:[]}))),p({cursor:g.current,sortState:i.sortState,filters:i.filters,query:i.query}))),[p,i]);function j(){if(!g.current)return;const e=g.current.offset-Ln;return e<0?void 0:e}const w=(0,s.useCallback)((async()=>{const e=j();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]),C=(0,s.useCallback)(((e,t)=>{o((a=>({...a,groups:a.groups.map((a=>a.groupId===e?{...a,sharedPageIds:a.sharedPageIds.filter((e=>!t.includes(e)))}:a))})))}),[]);return{groups:i.groups,loading:i.loading,error:i.error,loadNextPage:f,currentPage:r,hasNextPage:i.hasNextPage,cursor:i.cursor,setSortState:v,sortState:i.sortState,setFilters:x,filters:i.filters,query:i.query,setQuery:b,loadPreviousPage:w,hasPreviousPage:i.hasPreviousPage,refreshPage:S,removePagesFromGroup:C}}({organizationStore:t}),w=En({spaceStores:(0,Js()._)()}),C=(0,qn().V)(),_=[{id:oa.id,name:n.formatMessage(Zn.name),type:"title"},{id:da.id,name:n.formatMessage(Zn.memberCount),type:"number"}],[T,k]=(0,s.useState)(),[I,H]=(0,s.useState)(!1),[P,z]=(0,s.useState)(),A=P??T??[];return(0,s.useEffect)((()=>{if(!T||0===T.length)return void c(void 0);const e=T[0];switch(e.propertyId){case oa.id:c({column:oa,sortAscending:"ascending"===e.direction});break;case da.id:c({column:da,sortAscending:"ascending"===e.direction})}}),[c,T]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:C.tableHeader,children:[(0,i.jsxs)("div",{style:C.leftContent,children:[(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{preventMultipleSorts:!0,sortProperties:_,isMenuOpen:I,setIsMenuOpen:H,onApply:e=>{H(!1),k(e),z(void 0)},currentSorts:A})}),A.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(Hs,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>m({spaceIds:e}),spaceData:w})]}),(0,i.jsxs)("div",{style:C.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:T,openSortPillMenu:e=>{e&&z([{propertyId:e,direction:"ascending"}]),H(!0)},sortProperties:_}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:g,setQueryFilter:p,placeholderText:n.formatMessage(Zn.placeholder)})]})]}),(0,i.jsx)(ua,{groupId:a,groups:o,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:f,loadPreviousPage:v,hasPreviousPage:b,refreshPage:h,hasNextPage:S,removePagesFromGroup:j})]})}function Kn(e){let{organizationGuest:t}=e;const a=Object.keys(t.guestPages),s=(0,Js()._)(a);return 0===a.length?(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(X().ms,{spaceStores:s,isLoading:!1,showTooltip:!0})}a(30005);var Gn=()=>a(528514);function Yn(e){const{userModel:t,refreshSpaceData:a,...n}=e,o=[{type:"existingUser",value:t}],r=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(Qn,{title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.title",defaultMessage:"Upgrade guest to workspace member"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.byline",defaultMessage:"Choose workspaces to grant this guest full membership and expanded access."}),buttonText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.button.add",defaultMessage:"Upgrade guest"}),inviteTargets:o,inviteRole:"read_and_write",refreshPage:r,...n})}function $n(e){const{permissionsInviteStore:t,...a}=e,s=(0,x().YB)(),{inviteRole:n,inviteTargets:o}=(0,b().VK)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]);return(0,i.jsx)(Qn,{title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest} other {guests}} to {role}",values:{count:o.length,role:s.formatMessage((0,Gn().ZH)((0,fn().Ci)(n))).toLocaleLowerCase()}}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberModal.byline",defaultMessage:"Upgrade the selected guests to members in your workspaces"}),buttonText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:o,inviteRole:n,...a})}function Jn(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(Qn,{title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest to member} other {guests to member}}",values:{count:t.length}}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.byline",defaultMessage:"Upgrade following guests to full members for broader workspace access."}),buttonText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:t,inviteRole:"read_and_write",...a})}function Qn(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,inviteRole:r,organizationStore:l,refreshPage:d,onDismiss:c,disabledSpaceIds:u,spaceStore:m}=e;const[g,p]=(0,s.useState)(m?[m.id]:[]),{spaceStores:h,loading:f,onSubmit:v}=xn({inviteRole:r,inviteTargets:o,organizationStore:l}),y=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]);function b(e){p((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function j(){p((e=>{const t=h.length-((null==u?void 0:u.length)??0);return e.length!==t?h.map((e=>e.id)).filter((e=>!(null!=u&&u.includes(e)))):[]}))}async function w(){0!==g.length&&(await v(g),await d(g),c())}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:(0,rs().l)(y.icon),title:t,byline:a}),footer:(0,i.jsx)(W().mz,{primaryText:n,primaryAction:w,primaryDisabled:0===g.length||f,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.convertToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsx)("div",{style:y.content,children:m?(0,i.jsx)(wn,{userIds:o.map((e=>e.value.id)).filter(kt().$K)}):(0,i.jsx)(vn().x,{spaceStores:h,selectedSpaceIds:g,onSelect:b,onSelectHeader:j,disabledRowMetadata:{disabledSpaceIds:u??[],disabledByline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowDisabledByline",defaultMessage:"Already a member"})}})})})})}function Xn(e){const{userModel:t,refreshSpaceData:a,guestSpaceIds:n,...o}=e,r=[{type:"existingUser",value:t}],l=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(ni,{title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.title",defaultMessage:"Remove guest access"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.byline",defaultMessage:"Choose the workspaces you wish to remove this guest’s access."}),buttonText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.button.remove",defaultMessage:"Remove guest access"}),inviteTargets:r,refreshPage:l,spaceIdsToDisplay:n,...o})}function ei(e){let{count:t}=e;return(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.title",defaultMessage:"Remove {count} {count, plural, one {guest} other {guests}} from workspace",values:{count:t}})}function ti(e){let{count:t}=e;return(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {guest} other {guests}}",values:{count:t}})}function ai(e){const{permissionsInviteStore:t,organizationGuests:a,...s}=e,n=(0,b().VK)((()=>t.state.inviteTargets),[t]),o=new Set;for(const i of n){const e=a.find((e=>e.userId===i.value.id)),t=e?Object.keys(e.guestPages):[];for(const a of t)o.add(a)}return(0,i.jsx)(ni,{title:(0,i.jsx)(ei,{count:n.length}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.byline",defaultMessage:"Remove access to all pages within selected workspaces."}),buttonText:(0,i.jsx)(ti,{count:n.length}),inviteTargets:n,spaceIdsToDisplay:Array.from(o),...s})}function si(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(ni,{title:(0,i.jsx)(ei,{count:t.length}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsFromSingleWorkspaceModal.byline",defaultMessage:"Remove the following guests from the workspace and revoke all page access."}),buttonText:(0,i.jsx)(ti,{count:t.length}),inviteTargets:t,...a})}function ni(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,organizationStore:r,refreshPage:l,onDismiss:d,spaceIdsToDisplay:c,spaceStore:u}=e;const[m,g]=(0,s.useState)(u?[u.id]:[]),{spaceStores:p,loading:h,onSubmit:f}=bn({inviteTargets:o,organizationStore:r}),v=p.filter((e=>!c||c.includes(e.id))),y=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]);function b(e){g((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function j(){g((e=>e.length!==v.length?v.map((e=>e.id)):[]))}async function w(){0!==m.length&&(await f(m),await l(m),d())}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:d,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:ls(y.icon),title:t,byline:a}),footer:(0,i.jsx)(W().mz,{primaryText:n,primaryAction:w,primaryDisabled:0===m.length||h,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:d}),children:(0,i.jsx)("div",{style:y.content,children:u?(0,i.jsx)(wn,{userIds:o.map((e=>e.value.id)).filter(kt().$K)}):(0,i.jsx)(vn().x,{spaceStores:v,selectedSpaceIds:m,onSelect:b,onSelectHeader:j})})})})}const ii={id:"actor",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(sa,{userId:e.organizationGuest.userId,isOnLegalHold:e.usersOnLegalHold.has(e.organizationGuest.userId),rightContent:(0,i.jsx)(pi,{userId:e.organizationGuest.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},oi={id:"email",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:240}}):(0,i.jsx)(Fs().hr,{userId:e.organizationGuest.userId}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},ri={id:"spaces",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):(0,i.jsx)(Kn,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:25,minWidth:120},sortable:!1,hasClickableContents:!1},li={id:"pages",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.pagesColumn.header",defaultMessage:"Pages"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(At().z6,{}):(0,i.jsx)(gi,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:10,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},di={id:"lastActive",headerTitle:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:100}}):(0,i.jsx)(Ws().B,{lastActiveAt:e.organizationGuest.lastActiveTime,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},ci=[ii,oi,ri,di,li];var ui=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(ui||{});function mi(e){let{guests:t,usersOnLegalHold:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:u,hasPreviousPage:m,loadPreviousPage:g,selectedIds:p,onSelectAll:h,onUnselectAll:f,onSelectRow:v}=e;const w=(0,y().O7)(),M=(0,Rt().Z)(),C=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:ci,theme:e,containerMarginTop:0})),[]),[_,T]=(0,s.useState)(),[k,H]=(0,s.useState)(),[P,D]=(0,s.useState)({isOpen:!1}),z=t.map((e=>({organizationGuest:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Vt().a.OrganizationGuest,setSelectedUserId:T,setOpenedModal:H}))),A=n?(0,Vt().s)():z;function N(){H(void 0)}const R=()=>{D({isOpen:!1})};const B=ci.map((e=>({...e,headerStyle:M.tableHeader,rowStyle:M.tableRow}))),L={header:{isDisabled:n,isSelected:p.length>0&&p.length===t.length,onClick:()=>{p.length===t.length?f():h()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Vt().a.OrganizationGuest&&p.includes(e.organizationGuest.userId),onClick:e=>{e.type===Vt().a.OrganizationGuest&&v(e.organizationGuest.userId)}}},O=(0,b().VK)((()=>{const e=new vs,t=_?new(I().U6)(w,{table:j().KJ,id:_}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write",isInviteTargetsEmpty:!1}),e):e}),[w,_]);return!n&&o?(0,i.jsx)(Ot,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:B,rows:A,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query."})}),styles:C,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:g,hasNextPage:u,hasPrevPage:m,currentPage:c},multiselect:L,onRowClick:function(e){e.type===Vt().a.OrganizationGuest&&D({isOpen:!0,onDismiss:R,userId:e.organizationGuest.userId,organizationStore:r,lastActiveAt:e.organizationGuest.lastActiveTime})},extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),k===ui.ConvertToMember?(0,i.jsx)($n,{organizationStore:r,permissionsInviteStore:O,onDismiss:N,refreshPage:d}):null,k===ui.RemoveFromWorkspace?(0,i.jsx)(ai,{permissionsInviteStore:O,onDismiss:N,organizationStore:r,refreshPage:d,organizationGuests:t}):null,P.isOpen&&(0,i.jsx)(Xs,{...P,isOnLegalHold:a.has(P.userId)})]})}function gi(e){let{organizationGuest:t}=e;const a=Object.values(t.guestPages).flat();return(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:a.length}})})}function pi(e){const{userId:t,setSelectedUserId:a,setOpenedModal:s}=e,n=(0,b().qz)(void 0,Us().Z),o=(0,S().yK)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),r=[{key:"convert-to-member",render:e=>(0,i.jsx)(Re().Z,{...e,icon:(0,rs().l)(o.icon),title:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.userColumn.menu.convertToMember",defaultMessage:"Upgrade to member"})}),action:()=>{s(ui.ConvertToMember),a(t),n.setState({...n.state,open:!1})}},{key:"remove-from-workspace",render:e=>(0,i.jsx)(Re().Z,{...e,icon:ls(o.icon),title:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.userColumn.menu.removeUserFromWorkspace",defaultMessage:"Remove from workspace"})}),action:()=>{s(ui.RemoveFromWorkspace),a(t),n.setState({...n.state,open:!1})}}],l={key:"actions",render:e=>(0,i.jsx)(Be().Z,{title:(0,i.jsx)(x()._H,{id:"organizationGuestsTable.userColumn.menu.title",defaultMessage:"Guest actions"}),...e}),items:r};return(0,i.jsx)(qs().ZP,{stopClickPropagation:!0,popupType:Ta().k.Popup,alignmentToOrigin:_a().Alignment.Start,placementToOrigin:_a().Placement.Bottom,style:o.popupMenu,render:()=>(0,i.jsx)(mt().Z,{menuType:dt().o.Popup,width:248,children:(0,i.jsx)(gt().ZP,{type:gt().iW.Vertical,initialFocus:void 0,sections:[l]})}),onClose:We().ZT,buttonPopupStore:n,renderOrigin:e=>(0,i.jsx)(Es().Z,{ariaLabel:"3 dot menu for actions to apply to a guest",icon:Ns().o,...e})})}const hi={guests:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:ii,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},fi={columnName:"actor",direction:"ascending"};function xi(e){return"actor"===e.column.id?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"lastActive"===e.column.id?{columnName:"lastActive",direction:e.sortAscending?"ascending":"descending"}:fi}const vi=(0,n().IU)("newCalendar",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M5.297 16.456q-1.107 0-1.675-.567-.567-.56-.567-1.655V5.915q0-1.1.567-1.661t1.675-.56h9.406q1.114 0 1.675.56.567.56.567 1.661v8.32q0 1.093-.567 1.654-.56.567-1.675.567zm-.014-1.347h9.427q.43 0 .656-.218.233-.225.233-.67V7.904q0-.444-.233-.67-.225-.225-.656-.225H5.283q-.43 0-.656.225-.226.226-.226.67v6.317q0 .445.226.67.226.219.656.218m3.404-5.721q-.185 0-.26-.069-.068-.075-.068-.253v-.403q0-.184.069-.246.075-.068.26-.068h.403q.177 0 .253.068.075.061.075.246v.403q0 .178-.075.253-.076.069-.253.069h-.403Zm2.229 0q-.178 0-.253-.069-.068-.075-.068-.253v-.403q0-.184.068-.246.075-.068.253-.068h.403q.191 0 .26.068.069.061.069.246v.403q0 .178-.069.253-.069.069-.26.069zm2.242 0q-.185 0-.26-.069-.068-.075-.068-.253v-.403q0-.184.068-.246.075-.068.26-.068h.397q.19 0 .26.068.068.061.068.246v.403q0 .178-.068.253-.07.069-.26.069zm-6.706 2.194q-.185 0-.26-.068-.068-.069-.068-.246v-.404q0-.184.068-.253.075-.068.26-.068h.403q.178 0 .247.068.075.069.075.253v.404q0 .177-.075.246-.069.068-.247.068zm2.236 0q-.186 0-.26-.068-.069-.069-.069-.246v-.404q0-.184.069-.253.075-.068.26-.068h.403q.177 0 .253.068.075.069.075.253v.404q0 .177-.075.246-.076.068-.253.068zm2.228 0q-.178 0-.253-.068-.068-.069-.068-.246v-.404q0-.184.068-.253.075-.068.253-.068h.403q.191 0 .26.068.069.069.069.253v.404q0 .177-.069.246-.069.068-.26.068zm2.242 0q-.185 0-.26-.068-.068-.069-.068-.246v-.404q0-.184.068-.253.075-.068.26-.068h.397q.19 0 .26.068.068.069.068.253v.404q0 .177-.068.246-.07.068-.26.068zm-6.706 2.201q-.185 0-.26-.061-.068-.07-.068-.26v-.397q0-.184.068-.252.075-.069.26-.069h.403q.178 0 .247.069.075.068.075.252v.397q0 .19-.075.26-.069.06-.247.061zm2.236 0q-.186 0-.26-.061-.069-.07-.069-.26v-.397q0-.184.069-.252.075-.069.26-.069h.403q.177 0 .253.069.075.068.075.252v.397q0 .19-.075.26-.076.06-.253.061zm2.228 0q-.178 0-.253-.061-.068-.07-.068-.26v-.397q0-.184.068-.252.075-.069.253-.069h.403q.191 0 .26.069.069.068.069.252v.397q0 .19-.069.26-.069.06-.26.061z"})});let yi=function(e){return e.ThreeMonths="three-months",e.SixMonths="six-months",e.OneYear="one-year",e}({});Object.values(yi);const bi=(0,x().vU)({organizationOwnerLabel:{id:"organizationMember.owner.label",defaultMessage:"Organization owner"}});function Si(e){let{selectedLastActiveOption:t,setSelectedLastActiveOption:a}=e;return(0,i.jsx)(Ts().p,{pillTitle:(0,i.jsx)(x()._H,{id:"filters.lastActive.title",defaultMessage:"Last active"}),pillIcon:vi,selectedItem:t,setSelectedItem:a,items:ji,shouldUseCheck:!0})}const ji=[{key:"three-months",value:yi.ThreeMonths,title:(0,i.jsx)(x()._H,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.title",defaultMessage:"Within the last 3 months"}),shortTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.shortTitle",defaultMessage:"3 months"})},{key:"six-months",value:yi.SixMonths,title:(0,i.jsx)(x()._H,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.title",defaultMessage:"Within the last 6 months"}),shortTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.shortTitle",defaultMessage:"6 months"})},{key:"one-year",value:yi.OneYear,title:(0,i.jsx)(x()._H,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.title",defaultMessage:"Within the last 1 year"}),shortTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.shortTitle",defaultMessage:"1 year"})}],wi=(0,x().vU)({placeholder:{id:"organizationGuestsSubTab.guestsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGuestsSubTab.sort.name",defaultMessage:"Name"}});function Mi(e){let{organizationStore:t}=e;const a=(0,y().O7)(),s=(0,i.jsx)(x()._H,{id:"organization.people.guests.title",defaultMessage:"Manage guests"});return(0,i.jsx)(ys().J,{breadcrumbs:[{message:(0,i.jsx)(x()._H,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{Oa().c4({environment:a,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().qR})})}},{message:s}],children:(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:s,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"organization.people.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace."})})}),(0,i.jsx)(_i,{organizationStore:t})]})})}var Ci=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(Ci||{});function _i(e){let{organizationStore:t}=e;const a=(0,x().YB)(),n=(0,y().O7)(),{guests:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:m,query:g,setQuery:p,refreshPage:h,currentPage:f,loadPreviousPage:v,hasPreviousPage:S,hasNextPage:w}=function(e){let{organizationStore:t}=e;const a=(0,y().O7)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(D().V),[i,o]=(0,s.useState)(hi),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(hi.sortState),u=(0,s.useRef)({}),m=(0,s.useRef)(hi.query),g=(0,s.useRef)(hi.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:i,filters:r,query:l}=e;try{const e=await M().callApi({eventName:"getGuestsInOrganization",environment:a,data:{organizationId:t.id,cursor:s,sort:xi(i),filters:r,query:l}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}{n({data:e.data});const t=e.data.guests.map((t=>({userId:t.userId,guestPages:t.guestPages,lastActiveTime:e.data.guestIdToLastActive[t.userId]})));o((a=>({...a,loading:!1,guests:t,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==j()})))}}catch(d){const e=(0,cs().t)(d);o((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{let{restartSearch:a,overridePage:s}=e;if(!t.id)return;let n=i.loading,r=i.error,l=s?s.hasNextPage:i.hasNextPage,d=s?s.cursor:i.cursor;return a&&(o((e=>({...hi,sortState:e.sortState,filters:e.filters,query:e.query}))),n=hi.loading,r=hi.error,l=hi.hasNextPage,d=hi.cursor),!l||n||r?void 0:(o((e=>({...e,loading:!0}))),u.current=i.filters,c.current=i.sortState,m.current=i.query,g.current=s?s.cursor:d,p({cursor:d,sortState:i.sortState,filters:i.filters,query:i.query}))}),[t.id,i,p]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const f=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{We().Xy(c.current,i.sortState)||h({restartSearch:!0})}),[i.sortState,h]),(0,s.useEffect)((()=>{We().Xy(u.current,i.filters)||h({restartSearch:!0})}),[i.filters,h]),(0,s.useEffect)((()=>{We().Xy(m.current,i.query)||h({restartSearch:!0})}),[i.query,h]);const x=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),v=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e??hi.sortState})))}),[]),b=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]),S=(0,s.useCallback)((async e=>(e&&o((e=>({...e,loading:!0,guests:[]}))),p({cursor:g.current,sortState:i.sortState,filters:i.filters,query:i.query}))),[p,i]);function j(){if(!g.current)return;const e=g.current.offset-Ge().B;return e<0?void 0:e}const w=(0,s.useCallback)((async()=>{const e=j();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]);return{guests:i.guests,loading:i.loading,error:i.error,loadNextPage:f,currentPage:r,hasNextPage:i.hasNextPage,cursor:i.cursor,setSortState:v,sortState:i.sortState,setFilters:x,filters:i.filters,query:i.query,setQuery:b,loadPreviousPage:w,hasPreviousPage:i.hasPreviousPage,refreshPage:S}}({organizationStore:t}),C=(0,s.useMemo)((()=>o.map((e=>e.userId))),[o]),{selectedIds:_,handleToggleId:T,handleSelectAllIds:k,handleUnselectAllIds:H}=gs({allPossibleIds:C}),P=En({spaceStores:(0,Js()._)()}),{users:A}=hs({organizationId:t.id}),{guestEmailDomains:N}=(0,s.useContext)(z().g),[R,B]=(0,s.useState)(),L=(0,qn().V)();function O(){B(void 0)}async function V(){await h(),H()}const U=(0,b().VK)((()=>new vs),[]),q=(0,b().VK)((()=>_.map((e=>new(I().U6)(n,{table:j().KJ,id:e}).getModel())).filter(kt().$K).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[n,_]);(0,s.useEffect)((()=>{U.setState({...U.state,inviteTargets:q,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[U,q]);const E=[{id:ii.id,name:a.formatMessage(wi.name),type:"title"}],[Z,F]=(0,s.useState)(),[W,K]=(0,s.useState)(!1),[G,Y]=(0,s.useState)();(0,s.useEffect)((()=>{if(!Z||0===Z.length)return void c(void 0);const e=Z[0];if(e.propertyId===ii.id)c({column:ii,sortAscending:"ascending"===e.direction})}),[c,Z]);const $=G??Z??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:L.tableHeader,children:[(0,i.jsxs)("div",{style:L.leftContent,children:[(0,i.jsxs)(ws,{isOpen:_.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(Cs,{itemsSelectedCount:_.length}),onClick:H}),(0,i.jsx)(Ms,{icon:rs().l,title:(0,i.jsx)(x()._H,{id:"organizationGuestsSubTab.multiselect.addToWorkspace",defaultMessage:"Upgrade to member"}),onClick:()=>B(Ci.ConvertToMember)}),(0,i.jsx)(Ms,{icon:ls,title:(0,i.jsx)(x()._H,{id:"organizationGuestsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>B(Ci.RemoveFromWorkspace)})]}),(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{preventMultipleSorts:!0,sortProperties:E,isMenuOpen:W,setIsMenuOpen:K,onApply:e=>{K(!1),F(e),Y(void 0)},currentSorts:$})}),$.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationGuestsSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:N,selectedEmailDomains:u.emailDomains||[],setSelectedEmailDomains:e=>{m({emailDomains:e})}}),(0,i.jsx)(Hs,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>m({spaceIds:e}),spaceData:P}),(0,i.jsx)(Si,{selectedLastActiveOption:u.lastActive,setSelectedLastActiveOption:e=>m({lastActive:e})})]}),(0,i.jsxs)("div",{style:L.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:Z,openSortPillMenu:e=>{e&&Y([{propertyId:e,direction:"ascending"}]),K(!0)},sortProperties:E}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:g,setQueryFilter:p,placeholderText:a.formatMessage(wi.placeholder)})]})]}),R===Ci.ConvertToMember?(0,i.jsx)($n,{organizationStore:t,permissionsInviteStore:U,onDismiss:O,refreshPage:V}):null,R===Ci.RemoveFromWorkspace?(0,i.jsx)(ai,{permissionsInviteStore:U,onDismiss:O,organizationStore:t,refreshPage:V,organizationGuests:o}):null,(0,i.jsx)(mi,{guests:o,usersOnLegalHold:A,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:f,loadPreviousPage:v,hasPreviousPage:S,refreshPage:h,hasNextPage:w,selectedIds:_,onSelectAll:k,onUnselectAll:H,onSelectRow:T})]})}const Ti=(0,n().IU)("shieldSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M4.19 11.425V6.619l1.29 1.285v3.268q0 .751.206 1.278.205.527.67.978.464.444 1.25.95a99 99 0 0 0 1.97 1.217q.142.089.232.123a.4.4 0 0 0 .157.034q.075 0 .157-.034a2 2 0 0 0 .24-.123 81 81 0 0 0 1.736-1.074l.984.992q-.525.342-1.183.717-.656.384-1.456.82-.13.069-.26.103a.8.8 0 0 1-.218.041.8.8 0 0 1-.219-.04 1.2 1.2 0 0 1-.26-.103A47 47 0 0 1 7 15.6q-1.011-.635-1.634-1.237a3.8 3.8 0 0 1-.895-1.299q-.28-.704-.28-1.64Zm10.978 2.208-1.012-1.012q.157-.3.226-.65a4 4 0 0 0 .075-.8V6.477a.6.6 0 0 0-.048-.267q-.048-.096-.191-.144l-.711-.253q-.397-.15-.834-.307a126 126 0 0 0-1.688-.615 32 32 0 0 0-.657-.24 2 2 0 0 0-.205-.061.65.65 0 0 0-.314 0 3 3 0 0 0-.199.061q-.225.075-.52.185-.293.102-.635.226l-1.367.492-1.019-1.027q.555-.205 1.183-.43a59 59 0 0 1 1.176-.417q.54-.185.827-.28.17-.042.355-.076a1.7 1.7 0 0 1 .356-.04q.17 0 .355.033.192.034.363.082.218.075.622.22.41.143.909.32a64 64 0 0 1 1.9.684q.411.15.636.246.506.218.745.5.246.279.246.888v5.168q0 .67-.137 1.21a3.4 3.4 0 0 1-.437.998m.451 3.199L2.863 4.09a.54.54 0 0 1-.15-.39q0-.232.15-.376.165-.165.39-.164.225 0 .39.164L16.392 16.06a.51.51 0 0 1 .157.39q0 .225-.157.382a.5.5 0 0 1-.383.164.53.53 0 0 1-.39-.164"})}),ki={members:[],filters:{},loading:!1,error:void 0,hasNextPage:!0,hasPreviousPage:!1,sortState:void 0,query:"",currentPage:1};function Ii(e){let{setUserRoles:t,selectedUserRoles:a,roles:s}=e;return(0,i.jsx)(Ts().J,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.filters.userRole.title",defaultMessage:"Role"}),pillIcon:Ut,selectedItems:a,setSelectedItems:t,items:s})}const Hi=[{key:"owner",value:"owner",title:(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"})},{key:"membership_admin",value:"membership_admin",title:(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})},{key:"member",value:"member",title:(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"})}],Pi=[{key:"organizationOwner",value:"organization_owner",title:(0,i.jsx)(x()._H,{id:"organizationMembers.table.filters.userRole.organizationOwner",defaultMessage:"Organization owner"}),wrapCaption:!0},...Hi];function Di(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,x().YB)(),l=(0,y().O7)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(D().V),[c,u]=(0,s.useState)(!1),m=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,height:"fit-content",width:540}})),[]),g=(0,b().VK)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(kt().$K)),[t]),p=(0,b().VK)((()=>!c&&g.length>0),[c,g]);async function h(){if(!p)return;u(!0);const e=a.getOwnerIds().filter((e=>!g.includes(e))),t=await M().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:e}});"success"===t.type?(d(t),et().oV({label:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.success",defaultMessage:"Successfully demoted from admin"})})):C().UW((0,_().wf)(r,t)),await o(),n(),u(!1)}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:Ti(m.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.title",defaultMessage:"Downgrade organization owners"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.byline",defaultMessage:"Remove organization owner permissions from <bold>{count} {count, plural, one {user} other {users}}</bold>. Workspace roles and permissions remain unchanged.",values:{count:g.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.add",defaultMessage:"Downgrade"}),primaryAction:h,primaryDisabled:!p,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:m.content,children:(0,i.jsx)(wn,{userIds:g})})})})}function zi(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,x().YB)(),l=(0,y().O7)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(D().V),[c,u]=(0,s.useState)(!1),m=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,height:"fit-content",width:540}})),[]),g=(0,b().VK)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(kt().$K)),[t]),p=(0,b().VK)((()=>!c&&g.length>0),[c,g]);async function h(){if(!p)return;u(!0);const e=a.getOwnerIds(),t=Array.from(new Set(e.concat(g))),s=await M().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:t}});"success"===s.type?(d(s),et().oV({label:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.success",defaultMessage:"Successfully promoted to admin"})})):C().UW((0,_().wf)(r,s)),await o(),n(),u(!1)}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:(0,gn().o)(m.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.title",defaultMessage:"Make users organization owners"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.byline",defaultMessage:"Choose workspaces to add <bold>{count} {count, plural, one {user} other {users}}</bold> as workspace members, granting access to workspace content and default teamspaces.",values:{count:g.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.add",defaultMessage:"Make {count, plural, one {organization owner} other {organization owners}}",values:{count:g.length}}),primaryAction:h,primaryDisabled:!p,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:m.content,children:(0,i.jsx)(wn,{userIds:g})})})})}const Ai={id:"actor",headerTitle:(0,i.jsx)(x()._H,{id:"organizationMembersTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(sa,{userId:e.organizationMember.userId,isOnLegalHold:e.usersOnLegalHold.has(e.organizationMember.userId),rightContent:(0,i.jsx)(Zi,{userId:e.organizationMember.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal,isOrganizationOwner:"owner"===e.organizationMember.organizationRole,isLastOrganizationOwner:e.isLastOrganizationOwner})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},Ni={id:"role",headerTitle:(0,i.jsx)(x()._H,{id:"organizationMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):(0,i.jsx)(qi,{organizationMember:e.organizationMember}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},Ri={id:"spaces",headerTitle:(0,i.jsx)(x()._H,{id:"organizationMembersTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):(0,i.jsx)(Ei,{organizationMember:e.organizationMember}),widthData:{widthPercent:25,minWidth:120},sortable:!1,hasClickableContents:!1},Bi={id:"email",headerTitle:(0,i.jsx)(x()._H,{id:"organizationMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:240}}):(0,i.jsx)(Fs().hr,{userId:e.organizationMember.userId}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Li={id:"lastActive",headerTitle:(0,i.jsx)(x()._H,{id:"organizationMembersTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:100}}):(0,i.jsx)(Ws().B,{useSecondaryColorTitle:!0,isNoActivitySecondaryColor:!0,lastActiveAt:e.organizationMember.lastActiveAt}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Oi=[Ai,Ni,Bi,Ri,Li];var Vi=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(Vi||{});function Ui(e){let{members:t,usersOnLegalHold:a,loading:n,error:o,loadNextPage:r,organizationStore:l,loadPreviousPage:d,currentPage:c,hasPreviousPage:u,hasNextPage:m,refreshPage:g,userId:p,selectedIds:h,onSelectAll:f,onUnselectAll:v,onSelectRow:w}=e;const M=(0,y().O7)(),C=(0,Rt().Z)(),_=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:Oi,theme:e,containerMarginTop:0})),[]),T=Oi.map((e=>({...e,headerStyle:C.tableHeader,rowStyle:C.tableRow}))),k=()=>{N({isOpen:!1})},[H,P]=(0,s.useState)(),[D,z]=(0,s.useState)(),[A,N]=(0,s.useState)(p?{isOpen:!0,userId:p,organizationStore:l,lastActiveAt:void 0,onDismiss:k}:{isOpen:!1}),R=(0,b().VK)((()=>t.map((e=>({organizationMember:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Vt().a.OrganizationMember,setSelectedUserId:P,setOpenedModal:z,isLastOrganizationOwner:l.isUserLastOwner(e.userId)})))),[t,l,a]),B=n?(0,Vt().s)():R;function L(){z(void 0)}const O={header:{isDisabled:n,isSelected:h.length>0&&h.length===t.length,onClick:()=>{h.length===t.length?v():f()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Vt().a.OrganizationMember&&h.includes(e.organizationMember.userId),onClick:e=>{e.type===Vt().a.OrganizationMember&&w(e.organizationMember.userId)}}},V=(0,b().VK)((()=>{const e=new vs,t=H?new(I().U6)(M,{table:j().KJ,id:H}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write",isInviteTargetsEmpty:!1}),e):e}),[M,H]);return!n&&o?(0,i.jsx)(Ot,{error:o,runNewSearch:()=>g(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:B,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(x()._H,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),styles:_,loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:d,hasNextPage:m,hasPrevPage:u,currentPage:c},multiselect:O,onRowClick:function(e){e.type===Vt().a.OrganizationMember&&N({isOpen:!0,onDismiss:k,userId:e.organizationMember.userId,organizationStore:l,lastActiveAt:e.organizationMember.lastActiveAt})},extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),D===Vi.AddToWorkspace?(0,i.jsx)(yn,{permissionsInviteStore:V,onDismiss:L,organizationStore:l,refreshPage:g}):null,D===Vi.RemoveFromWorkspace?(0,i.jsx)(Mn,{permissionsInviteStore:V,onDismiss:L,organizationStore:l,refreshPage:g}):null,D===Vi.PromoteToAdmin?(0,i.jsx)(zi,{permissionsInviteStore:V,onDismiss:L,organizationStore:l,refreshPage:g}):null,D===Vi.DemoteAdmin?(0,i.jsx)(Di,{permissionsInviteStore:V,onDismiss:L,organizationStore:l,refreshPage:g}):null,A.isOpen&&(0,i.jsx)(Xs,{...A,isOnLegalHold:a.has(A.userId)})]})}function qi(e){let{organizationMember:t}=e;const a=(0,x().YB)(),s=Fi(t);return(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:a.formatMessage(s)})}function Ei(e){let{organizationMember:t}=e;const a=t.spacesInfo.map((e=>e.spaceId)),s=(0,Js()._)(a);return 0===a.length?(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organizationMembersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(X().ms,{spaceStores:s,isLoading:!1,showTooltip:!0})}function Zi(e){const{userId:t,setSelectedUserId:a,setOpenedModal:s,isOrganizationOwner:n,isLastOrganizationOwner:o}=e,r=(0,b().qz)(void 0,Us().Z),l=(0,S().yK)((()=>({popupMenu:{width:270},icon:{height:20,width:20,fill:"currentColor"}})),[]),d=[{key:"add-to-workspaces",render:e=>(0,i.jsx)(Re().Z,{...e,icon:(0,rs().l)(l.icon),title:(0,i.jsx)(x()._H,{id:"organizationMembersTable.userColumn.menu.addUserToWorkspaces",defaultMessage:"Add to workspaces"})}),action:()=>{s(Vi.AddToWorkspace),a(t),r.setState({...r.state,open:!1})}},{key:"remove-from-workspaces",render:e=>(0,i.jsx)(Re().Z,{...e,icon:ls(l.icon),title:(0,i.jsx)(x()._H,{id:"organizationMembersTable.userColumn.menu.removeUserFromWorkspaces",defaultMessage:"Remove from workspaces"})}),action:()=>{s(Vi.RemoveFromWorkspace),a(t),r.setState({...r.state,open:!1})}},{key:"promote-to-owner",render:e=>(0,i.jsx)(Re().Z,{...e,icon:(0,gn().o)(l.icon),title:(0,i.jsx)(x()._H,{id:"organizationMembersTable.userColumn.menu.makeOrganizationOwner",defaultMessage:"Make organization owner"}),disabled:n,disabledFeedback:n}),action:()=>{s(Vi.PromoteToAdmin),a(t),r.setState({...r.state,open:!1})}},{key:"demote-from-owner",render:e=>(0,i.jsx)(Re().Z,{...e,icon:Ti(l.icon),title:(0,i.jsx)(x()._H,{id:"organizationMembersTable.userColumn.menu.downgradeOrganizationOwner",defaultMessage:"Downgrade organization owner"}),disabled:o||!n,disabledFeedback:o||!n}),action:()=>{s(Vi.DemoteAdmin),a(t),r.setState({...r.state,open:!1})}}],c={key:"actions",render:e=>(0,i.jsx)(Be().Z,{title:(0,i.jsx)(x()._H,{id:"organizationMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:d};return(0,i.jsx)(qs().ZP,{stopClickPropagation:!0,popupType:Ta().k.Popup,alignmentToOrigin:_a().Alignment.Start,placementToOrigin:_a().Placement.Bottom,style:l.popupMenu,render:()=>(0,i.jsx)(mt().Z,{menuType:dt().o.Popup,width:270,children:(0,i.jsx)(gt().ZP,{type:gt().iW.Vertical,initialFocus:void 0,sections:[c]})}),onClose:We().ZT,buttonPopupStore:r,renderOrigin:e=>(0,i.jsx)(Es().Z,{ariaLabel:"3 dot menu for actions to apply to a member",icon:Ns().o,...e})})}function Fi(e){if("owner"===e.organizationRole)return bi.organizationOwnerLabel;const t=e.spacesInfo.length>0?e.spacesInfo[0].role:"none";return(0,Gn().ZH)(t)}const Wi=(0,x().vU)({placeholder:{id:"organizationMemberSubTab.membersSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationMemberSubTab.sort.name",defaultMessage:"Name"},highestRole:{id:"organizationMemberSubTab.sort.highestRole",defaultMessage:"Highest role"}});function Ki(e){let{organizationStore:t,userId:a}=e;const s=(0,y().O7)(),n=(0,i.jsx)(x()._H,{id:"organization.people.members.title",defaultMessage:"Manage members"});return(0,i.jsx)(ys().J,{breadcrumbs:[{message:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{Oa().c4({environment:s,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().qR})})}},{message:n}],children:(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:n,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"organization.people.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration across workspaces."})})}),(0,i.jsx)(Yi,{organizationStore:t,userId:a})]})})}var Gi=function(e){return e.AddNewMembers="add-new-members",e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(Gi||{});function Yi(e){let{organizationStore:t,userId:a}=e;const n=(0,x().YB)(),o=(0,y().O7)(),{loadNextPage:r,members:l,loading:d,error:c,setFilters:u,filters:m,setSortState:g,loadPreviousPage:p,currentPage:h,hasPreviousPage:f,hasNextPage:v,refreshPage:S,query:w,setQuery:C}=function(e){let{organizationId:t}=e;const a=(0,y().O7)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(D().V),[i,o]=(0,s.useState)(ki),r=(0,s.useRef)(!1),l=(0,s.useRef)({}),d=(0,s.useRef)(ki.sortState),c=(0,s.useRef)(ki.query);function u(e){return"actor"===(null==e?void 0:e.column.id)?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"role"===(null==e?void 0:e.column.id)?{columnName:"role",direction:e.sortAscending?"ascending":"descending"}:void 0}const m=(0,s.useCallback)((async e=>{let{cursor:s,filters:i,sortState:r,query:l}=e;const d=Ge().B;try{const e=await M().callApi({eventName:"getMembersInOrganization",environment:a,data:{organizationId:t,cursor:s,filters:i,sort:u(r),query:l,limit:d}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}n({data:e.data}),o((t=>({...t,members:e.data.members,loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:e.data.hasPreviousPage?t.currentPage:ki.currentPage})))}catch(c){const e=(0,cs().t)(c);o((t=>({...t,loading:!1,error:e})))}}),[a,t,n]),g=(0,s.useCallback)((async e=>{let{restartSearch:a,cursor:s}=e;if(!t)return;let n=i.loading,r=i.error;a&&(o((e=>({...ki,filters:e.filters,sortState:e.sortState,query:e.query}))),n=ki.loading,r=ki.error),n||r||(o((e=>({...e,loading:!0,members:[]}))),l.current=i.filters,d.current=i.sortState,c.current=i.query,await m({cursor:s,filters:i.filters,sortState:i.sortState,query:i.query}))}),[t,i,m]);(0,s.useEffect)((()=>{!r.current&&Boolean(t)&&(g({restartSearch:!0}),r.current=!0)}),[t,g]),(0,s.useEffect)((()=>{We().Xy(l.current,i.filters)||g({restartSearch:!0})}),[i.filters,g]),(0,s.useEffect)((()=>{We().Xy(d.current,i.sortState)||g({restartSearch:!0})}),[i.sortState,g]),(0,s.useEffect)((()=>{We().Xy(c.current,i.query)||g({restartSearch:!0})}),[i.query,g]);const p=(0,s.useCallback)((async()=>{var e;if(!i.hasNextPage)return;o((e=>({...e,currentPage:e.currentPage+1})));const t=null===(e=i.members[i.members.length-1])||void 0===e?void 0:e.userId;return g({restartSearch:!1,cursor:t?{nextCursorId:t}:void 0})}),[g,i.members,i.hasNextPage]),h=(0,s.useCallback)((async()=>{var e;if(!i.hasPreviousPage)return;o((e=>({...e,currentPage:Math.max(1,e.currentPage-1)})));const t=null===(e=i.members[0])||void 0===e?void 0:e.userId;await g({restartSearch:!1,cursor:t?{previousCursorId:t}:void 0})}),[g,i.members,i.hasPreviousPage]),f=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),x=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e})))}),[]),v=(0,s.useCallback)((e=>{var t;const a=null===(t=i.members[0])||void 0===t?void 0:t.userId;return e&&o((e=>({...e,loading:!0,members:[]}))),m({cursor:a?{currentCursorId:a}:void 0,filters:i.filters,sortState:i.sortState,query:i.query})}),[m,i.members,i.filters,i.sortState,i.query]),b=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]);return{loadNextPage:p,loadPreviousPage:h,members:i.members,filters:i.filters,loading:i.loading,error:i.error,currentPage:i.currentPage,hasNextPage:i.hasNextPage,setFilters:f,sortState:i.sortState,setSortState:x,hasPreviousPage:i.hasPreviousPage,refreshPage:v,query:i.query,setQuery:b}}({organizationId:t.id}),_=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),T=(0,b().VK)((()=>t.getOwnerIds()),[t]),{selectedIds:k,handleToggleId:H,handleSelectAllIds:P,handleUnselectAllIds:A}=gs({allPossibleIds:_}),N=En({spaceStores:(0,Js()._)()}),{users:R}=hs({organizationId:t.id}),{organizationMemberEmailDomains:B}=(0,s.useContext)(z().g),[L,O]=(0,s.useState)(),V=(0,qn().V)();function U(){O(void 0)}async function E(){await S(),A()}const Z=(0,b().VK)((()=>new vs),[]),F=(0,b().VK)((()=>{const e=k.map((e=>new(I().U6)(o,{table:j().KJ,id:e}).getModel())).filter(kt().$K);return e.map((e=>({type:"existingUser",value:e,spaceRole:void 0})))}),[o,k]);(0,s.useEffect)((()=>{Z.setState({...Z.state,inviteTargets:F,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[Z,F]);const{inviteTargets:W}=(0,b().VK)((()=>({inviteTargets:Z.state.inviteTargets})),[Z]),K=[{id:Ai.id,name:n.formatMessage(Wi.name),type:"title"},{id:Ni.id,name:n.formatMessage(Wi.highestRole),type:"text"}],[G,Y]=(0,s.useState)(),[$,J]=(0,s.useState)(!1),[Q,X]=(0,s.useState)();(0,s.useEffect)((()=>{if(!G||0===G.length)return void g(void 0);const e=G[0];switch(e.propertyId){case Ai.id:g({column:Ai,sortAscending:"ascending"===e.direction});break;case Ni.id:g({column:Ni,sortAscending:"ascending"===e.direction})}}),[g,G]);const ee=Q??G??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:V.tableHeader,children:[(0,i.jsxs)("div",{style:V.leftContent,children:[(0,i.jsxs)(ws,{isOpen:k.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(Cs,{itemsSelectedCount:k.length}),onClick:A}),(0,i.jsx)(Ms,{icon:rs().l,title:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>O(Gi.AddToWorkspace)}),(0,i.jsx)(Ms,{icon:ls,title:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>O(Gi.RemoveFromWorkspace)}),(0,i.jsx)(Ms,{disabled:k.filter((e=>T.includes(e))).length>0,disabledTooltipText:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.multiselect.promoteToAdminTooltip",defaultMessage:"Selected members are already organization owners"}),icon:gn().o,title:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.multiselect.promoteToAdmin",defaultMessage:"Make organization owner"}),onClick:()=>O(Gi.PromoteToAdmin)}),(0,i.jsx)(Ms,{disabled:k.filter((e=>T.includes(e))).length===T.length||k.filter((e=>!T.includes(e))).length>0,disabledTooltipText:k.filter((e=>T.includes(e))).length===T.length?(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.allOrgOwnersSelected",defaultMessage:"You must have at least one organization owner"}):(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.notOrgOwnerSelected",defaultMessage:"Only available for organization owners"}),icon:Ti,title:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.multiselect.demoteFromAdmin",defaultMessage:"Downgrade organization owner"}),onClick:()=>O(Gi.DemoteAdmin)})]}),(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{preventMultipleSorts:!0,sortProperties:K,isMenuOpen:$,setIsMenuOpen:J,onApply:e=>{J(!1),Y(e),X(void 0)},currentSorts:ee})}),ee.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(Ii,{setUserRoles:e=>u({roles:e}),selectedUserRoles:m.roles||[],roles:Pi}),(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:B,selectedEmailDomains:m.emailDomains||[],setSelectedEmailDomains:e=>{u({emailDomains:e})}}),(0,i.jsx)(Hs,{selectedSpaceIds:m.spaceIds||[],setSelectedSpaceIds:e=>u({spaceIds:e}),spaceData:N}),(0,i.jsx)(zs,{selectedAccountStatus:m.userStatus,setSelectedAccountStatus:e=>u({userStatus:e})}),(0,i.jsx)(Si,{selectedLastActiveOption:m.lastActive,setSelectedLastActiveOption:e=>u({lastActive:e})})]}),(0,i.jsxs)("div",{style:V.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:G,openSortPillMenu:e=>{e&&X([{propertyId:e,direction:"ascending"}]),J(!0)},sortProperties:K}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:w,setQueryFilter:C,placeholderText:n.formatMessage(Wi.placeholder)}),(0,i.jsx)(q().Z,{onClick:()=>{O(Gi.AddNewMembers)},children:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),L===Gi.AddNewMembers?(0,i.jsx)(Nn,{onDismiss:U,organizationStore:t,refreshPage:E}):null,L===Gi.AddToWorkspace?(0,i.jsx)(yn,{permissionsInviteStore:Z,onDismiss:U,organizationStore:t,refreshPage:E}):null,L===Gi.RemoveFromWorkspace?(0,i.jsx)(Mn,{permissionsInviteStore:Z,onDismiss:U,organizationStore:t,refreshPage:E,membersSpaceIds:$i({organizationMembers:l,inviteTargets:W})}):null,L===Gi.PromoteToAdmin?(0,i.jsx)(zi,{permissionsInviteStore:Z,onDismiss:U,organizationStore:t,refreshPage:E}):null,L===Gi.DemoteAdmin?(0,i.jsx)(Di,{permissionsInviteStore:Z,onDismiss:U,organizationStore:t,refreshPage:E}):null,(0,i.jsx)(Ui,{members:l,usersOnLegalHold:R,loading:d,error:c,loadNextPage:r,loadPreviousPage:p,organizationStore:t,currentPage:h,hasPreviousPage:f,hasNextPage:v,refreshPage:S,userId:a,selectedIds:k,onSelectAll:P,onUnselectAll:A,onSelectRow:H})]})}function $i(e){let{organizationMembers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.spacesInfo)??[])s.add(t.spaceId)}return s}function Ji(e){let{children:t}=e;const a=(0,S().yK)((e=>({container:{width:"100%",maxWidth:880,margin:"48px auto 100px",padding:"0 40px 0"}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var Qi=()=>a(419435);a(731107);var Xi=()=>a(69740),eo=()=>a(574740);let to=function(e){return e.Members="members",e.Guests="guests",e.Groups="groups",e.ManagedUsers="managed-users",e}({});function ao(e){return(0,i.jsx)(so,{...e})}function so(e){const t=(0,eo().k)({organizationId:e.organizationId}),a=(0,s.useMemo)((()=>e.subtab?function(e){switch(e){case to.Members:return to.Members;case to.Guests:return to.Guests;case to.Groups:return to.Groups;case to.ManagedUsers:return to.ManagedUsers;default:return to.Members}}(e.subtab):void 0),[e.subtab]);if(!t)return null;switch(a){case to.Members:return(0,i.jsx)(Ki,{organizationStore:t,userId:e.userId});case to.Guests:return(0,i.jsx)(Mi,{organizationStore:t});case to.Groups:return(0,i.jsx)(Fn,{organizationStore:t,groupId:e.groupId});case to.ManagedUsers:return(0,i.jsx)(_n,{organizationStore:t});default:return(0,i.jsx)(no,{...e})}}function no(e){var t,a,n;let{organizationId:o}=e;const r=(0,y().O7)(),l=(0,eo().k)({organizationId:o}),d=(0,Qi().$)({organizationId:o}),{state:c,loading:u}=(0,Xi().J)(),m=function(){const e=(0,Js()._)(),t=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(z().g);return(0,s.useEffect)((()=>{for(const e of t)n(e)}),[t,n]),{count:(0,s.useMemo)((()=>t.map((e=>{const t=a[e];return(null==t?void 0:t.length)??0})).reduce(((e,t)=>e+t),0)),[t,a]),loading:(0,s.useMemo)((()=>t.some((e=>void 0===a[e]))),[t,a])}}(),g=(0,b().VK)((()=>c.value?c.value.sampleMemberIds.map((e=>new(I().U6)(r,{table:j().KJ,id:e}))):[]),[r,c.value]),p=(0,b().VK)((()=>l?l.getOwnerIds().length:void 0),[l]),h=null===(t=c.value)||void 0===t?void 0:t.memberCount,f=null===(a=c.value)||void 0===a?void 0:a.guestCount,v=m.loading?void 0:m.count,w=(0,ne().o)(),M=(0,S().yK)((e=>({actionContainer:{display:"flex",gap:24,justifyContent:"flex-start",alignItems:"center",height:32},divider:{color:e.stroke.secondary,marginTop:38,marginBottom:-12}})),[]),[C,_]=(0,s.useState)(!1);return l?(0,i.jsxs)(Ji,{children:[(0,i.jsx)(xa().f,{title:(0,i.jsx)(x()._H,{id:"organization.people.title",defaultMessage:"People"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organization.people.byline",defaultMessage:"Manage access, permissions, and user accounts. Oversee members, guests, and groups seamlessly."})})}),(0,i.jsxs)("div",{style:M.actionContainer,children:[(0,i.jsx)(q().Z,{onClick:()=>{_(!0)},children:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})}),(0,i.jsx)(ie().s,{users:g,totalMemberCount:h,isLoading:u})]}),(0,i.jsx)(Va().Z,{size:1,style:M.divider,dividerColor:M.divider.color}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.title",defaultMessage:"Roles & permissions"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.members.title",defaultMessage:"Manage members"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.members.byline",defaultMessage:"Add, remove, or adjust member roles."}),rightContent:Boolean(void 0!==p&&void 0!==h)?(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.members.rightContent",defaultMessage:"{numOwners, plural, one {# org owner} other {# org owners}} · {numMembers, plural, one {# member} other {# members}}",values:{numOwners:p,numMembers:h}}):(0,i.jsx)(se().Z,{style:w.longShimmer}),onClick:()=>io({environment:r,organizationId:o,tab:to.Members})}),(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.guests.title",defaultMessage:"Manage guests"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.guests.byline",defaultMessage:"Invite for page access or upgrade to members for full workspace access."}),rightContent:Boolean(void 0!==f)?(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.guests.rightContent",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}",values:{numGuests:f}}):(0,i.jsx)(se().Z,{style:w.shortShimmer}),onClick:()=>io({environment:r,organizationId:o,tab:to.Guests})}),(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.groups.title",defaultMessage:"Manage groups"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.groups.byline",defaultMessage:"Add and remove members from permission groups."}),rightContent:Boolean(void 0!==v)?(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.groups.rightContent",defaultMessage:"{numGroups, plural, one {# permission group} other {# permission groups}}",values:{numGroups:v}}):(0,i.jsx)(se().Z,{style:w.longShimmer}),onClick:()=>io({environment:r,organizationId:o,tab:to.Groups})}),(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.accounts.title",defaultMessage:"Manage user accounts"}),byline:(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails."}),rightContent:Boolean(void 0!==d.count)?(0,i.jsx)(x()._H,{id:"organization.people.rolesAndPermissions.accounts.rightContent",defaultMessage:"{numUsers} accounts",values:{numUsers:null===(n=d.count)||void 0===n?void 0:n.usersCount}}):(0,i.jsx)(se().Z,{style:w.shortShimmer}),onClick:()=>io({environment:r,organizationId:o,tab:to.ManagedUsers})})]})}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.people.managedAccounts.title",defaultMessage:"Managed accounts"}),content:(0,i.jsx)(os,{organizationStore:l})}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.people.accountAccess.title",defaultMessage:"Account access"}),content:(0,i.jsx)(ss,{organizationStore:l})}),C?(0,i.jsx)(Nn,{onDismiss:()=>_(!1),organizationStore:l,refreshPage:async()=>Promise.resolve()}):null]}):null}function io(e){const{environment:t,organizationId:a,tab:s}=e;Oa().c4({environment:t,url:(0,La().a5)({organizationId:a,tabRoute:Ft().qR,properties:{subtab:s}})})}function oo(e){let{isHovered:t,iconFunction:a,tooltipMessage:s,buttonProps:n}=e;const o=(0,S().yK)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"right"},icon:{color:e.icon.secondary,height:14,width:14}})),[]);return(0,i.jsx)("div",{style:o.container,children:t&&(0,i.jsx)(Z().Z,{renderTooltip:()=>s,render:e=>(0,i.jsx)(Es().Z,{...e,ariaLabel:s,hasBackground:!0,icon:a,showShadow:!0,iconStyle:o.icon,onClick:e=>{var t;null===(t=n.onClick)||void 0===t||t.call(n,e),e.stopPropagation()},...n})})})}function ro(e){let{groupId:t,organizationId:a,isHovered:n}=e;const o=(0,x().YB)(),r=(0,s.useMemo)((()=>(0,La().a5)({organizationId:a,tabRoute:Ft().qR,properties:{subtab:to.Groups},queryParams:{[Hp]:t}})),[a,t]);return(0,k().E)("organization_console_group_single_view_modal")?(0,i.jsx)(oo,{isHovered:n,iconFunction:Ba().J,tooltipMessage:o.formatMessage(lo.viewFullDetail),buttonProps:{href:r,external:!0}}):null}const lo=(0,x().vU)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),co=(0,x().vU)({name:{id:"workspaceModalGroupsView.nameColumn.header",defaultMessage:"Name"},teams:{id:"workspaceModalGroupsView.teamspacesColumn.sortName",defaultMessage:"Teamspaces"},members:{id:"workspaceModalGroupsView.membersColumn.header",defaultMessage:"Members"}}),uo={id:"name",headerTitle:(0,i.jsx)(x()._H,{...co.name}),renderCell:e=>{const t=0===e.groupName.length?(0,i.jsx)(x()._H,{id:"workspaceModalGroupsView.untitledGroup",defaultMessage:"Untitled"}):e.groupName;return(0,i.jsx)(Ht().iP,{title:t,icon:(0,i.jsx)(Zt,{icon:e.groupIcon,spaceId:e.spaceId,size:ba().CD}),iconSize:ba().CD,iconMargin:Ht().dI,summaryStyles:{width:`calc(100% - ${ba().CD+Ht().dI}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},mo={id:"teamspaces",headerTitle:(0,i.jsx)(x()._H,{id:"workspaceModalGroupsView.teamspacesColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>(0,i.jsx)(H().q,{colorName:"secondary",children:(0,i.jsx)(x()._H,{defaultMessage:"{numTeamspaces} {numTeamspaces, plural, one {teamspace} other {teamspaces}}",id:"workspaceModalGroupsView.numTeamspaces",values:{numTeamspaces:e.teamspacesCount}})}),widthData:{widthPercent:30,minWidth:100},sortable:!1},go={id:"members",headerTitle:(0,i.jsx)(x()._H,{...co.members}),renderCell:e=>(0,i.jsx)(H().q,{colorName:"secondary",children:(0,i.jsx)(x()._H,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:20,minWidth:100},sortable:!1};function po(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>(0,i.jsx)(ro,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{widthPercent:10,minWidth:36},sortable:!1}}const ho=[{id:uo.id,name:T().Z.formatMessage(co.name),type:"title"},{id:mo.id,name:T().Z.formatMessage(co.teams),type:"number"},{id:go.id,name:T().Z.formatMessage(co.members),type:"number"}];function fo(e){let{spaceStore:t,organizationId:a}=e;const n=(0,s.useMemo)((()=>[uo,mo,go,po(a)]),[a]),o=(0,S().yK)((()=>({createGroupButton:{marginBottom:8}})),[]),r=(0,S().yK)((e=>{const t=(0,It().bE)({columnRenderInfo:n,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[n]),l=Sa(),d=(0,s.useMemo)((()=>[t.id]),[t]),{teamStores:c}=(0,A().x)(d),u=(0,s.useMemo)((()=>Object.values(c).flat()),[c]),{rows:m,loadPermissionGroupsForSpace:g,setAppliedSorts:p,appliedSorts:h}=fa(t.id,u),{filteredRows:f,query:v,setQuery:y,loadNextPage:b,loadPrevPage:j,hasNextPage:w,hasPrevPage:M,currentPageIndex:C}=function(e){const[t,a]=(0,s.useState)(""),[n,i]=(0,s.useState)(0),o=(0,s.useMemo)((()=>{if(!e)return[];let a=e;return t&&(a=(0,rt().ZP)(t,a,(e=>e.groupName))),a}),[t,e]),r=(0,s.useMemo)((()=>{const e=n*pa,t=e+pa;return o.slice(e,t)}),[o,n]);(0,s.useEffect)((()=>{i(0)}),[t]);const l=(0,s.useMemo)((()=>(n+1)*pa<o.length),[o,n]),d=n>0,c=(0,s.useCallback)((()=>{l&&i((e=>e+1))}),[l]),u=(0,s.useCallback)((()=>{d&&i((e=>e-1))}),[d]);return{query:t,setQuery:a,filteredRows:r,loadNextPage:c,loadPrevPage:u,hasNextPage:l,hasPrevPage:d,currentPageIndex:n}}(m),[_,T]=(0,s.useState)({isOpen:!1}),[k,I]=(0,s.useState)(),[P,D]=(0,s.useState)(!1);return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{hideDivider:!0,title:(0,i.jsx)(x()._H,{id:"organization.general.workspace.groups.title",defaultMessage:"Groups"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"workspaceModalGroupsView.byline",defaultMessage:"Set up groups to simplify page permissions and manage teamspace members at scale."})})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(ya().i,{sortProperties:ho,isMenuOpen:P,setIsMenuOpen:D,onApply:e=>{D(!1),p(e),I(void 0)},currentSorts:k??h??[]})}),(0,i.jsx)("div",{style:l.search,children:m.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(va().L,{appliedSorts:h,openSortPillMenu:e=>{e&&I([{propertyId:e,direction:"ascending"}]),D(!0)},sortProperties:ho}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:v,setQueryFilter:y})]})}),(0,i.jsx)(q().Z,{onClick:()=>T({isOpen:!0,modalType:"createGroup"}),style:o.createGroupButton,children:(0,i.jsx)(x()._H,{defaultMessage:"Create new group",id:"workspaceModalGroupsView.createNewGroupButton"})})]}),(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:f,columnRenderInfo:n,styles:r,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(x()._H,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query."})}),loadMoreMethod:{type:"pages",onLoadNext:b,onLoadPrevious:j,hasNextPage:w,hasPrevPage:M,currentPage:C+1}}),_.isOpen&&"createGroup"===_.modalType&&(0,i.jsx)(Na,{onDismiss:()=>T({isOpen:!1}),spaceStore:t,organizationId:a,refetchData:()=>g(t.id,!0)})]})}const xo={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,hasNextPage:!0,hasPreviousPage:!1,nextCursor:void 0},vo=1;function yo(e){let{userId:t,organizationId:a,isHovered:n,usersType:o}=e;const r=(0,x().YB)(),l=(0,s.useMemo)((()=>(0,La().a5)({organizationId:a,tabRoute:Ft().qR,properties:{subtab:o},queryParams:{userId:t}})),[a,t,o]);return(0,i.jsx)(oo,{isHovered:n,iconFunction:Ba().J,tooltipMessage:r.formatMessage(bo.viewFullDetail),buttonProps:{href:l,external:!0}})}const bo=(0,x().vU)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),So=(0,x().vU)({name:{id:"organization.workspace.guests.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.guests.emailColumn.header",defaultMessage:"Email"},pages:{id:"organization.workspace.guests.pagesColumn.header",defaultMessage:"Pages"}}),jo={id:"name",headerTitle:(0,i.jsx)(x()._H,{...So.name}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(sa,{userId:e.id}),widthData:{widthPercent:40,minWidth:100},sortable:!1},wo={id:"pages",headerTitle:(0,i.jsx)(x()._H,{...So.pages}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:120}}):(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organization.workspace.guests.pagesColumn.pages",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.pagesCount}})}),widthData:{widthPercent:20,minWidth:80},sortable:!1},Mo={id:"email",headerTitle:(0,i.jsx)(x()._H,{...So.email}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:200}}):(0,i.jsx)(Fs().hr,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1};function Co(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Vt().a.Loading?void 0:(0,i.jsx)(yo,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"guests"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const _o=[{id:jo.id,name:T().Z.formatMessage(So.name),type:"title"},{id:wo.id,name:T().Z.formatMessage(So.pages),type:"number"},{id:Mo.id,name:T().Z.formatMessage(So.email),type:"text"}];var To=function(e){return e.RemoveFromWorkspace="remove-from-workspace",e.ConvertToMember="convert-to-member",e}(To||{});function ko(e){let{organizationId:t,spaceStore:a}=e;const n=(0,s.useMemo)((()=>[jo,wo,Mo,Co(t)]),[t]),o=(0,S().yK)((e=>{const t=(0,It().bE)({columnRenderInfo:n,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[n]),r=Sa(),l=(0,eo().k)({organizationId:t}),{rows:d,filters:c,setFilters:u,query:m,setQuery:g,hasNextPage:p,hasPreviousPage:h,loadNextPage:f,loadPreviousPage:v,currentPage:w,sorts:C,setSorts:_,loading:T,reloadPage:k}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,y().O7)(),[i,o]=(0,s.useState)(xo),[r,l]=(0,s.useState)(vo),d=(0,s.useRef)(void 0),c=(0,s.useCallback)((e=>{o((t=>({...t,filters:e}))),l(vo)}),[]),u=(0,s.useCallback)((e=>{o((t=>({...t,sorts:e}))),l(vo)}),[]),m=(0,s.useCallback)((e=>{o((t=>({...t,query:e}))),l(vo)}),[]);function g(){if(!d.current)return;const e=d.current.offset-Ge().B;return e<0?void 0:e}const p=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{o((e=>({...e,loading:!0}))),d.current=s;const e=await M().callApi({eventName:"getGuestsInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:i.filters,sorts:(r=i.sorts,null==r?void 0:r.map((e=>{let{propertyId:t,direction:a}=e;if("name"===t){return{columnName:"actor",direction:a}}if("email"===t||"pages"===t){return{columnName:t,direction:a}}})).filter(kt().$K)),query:i.query,cursor:s,limit:Ge().B}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}o((t=>({...t,rows:e.data.guests.map((e=>({id:e.userId,pagesCount:e.guestPageCount,isClickable:!0,type:Vt().a.SingleWorkspaceGuest}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==g(),nextCursor:e.data.nextCursor})))}catch(l){const e=(0,cs().t)(l);o((t=>({...t,loading:!1,error:e})))}var r}),[n,a,t,i.filters,i.query,i.sorts]),h=(0,s.useCallback)((async()=>{if(i.hasNextPage)return l((e=>e+1)),p({cursor:i.nextCursor})}),[p,i.nextCursor,i.hasNextPage]),f=(0,s.useCallback)((async()=>{const e=g();if(void 0!==e)return l((e=>Math.max(1,e-1))),p({cursor:{offset:e}})}),[p]),x=(0,s.useCallback)((async()=>{await p({cursor:d.current})}),[p]);return(0,s.useEffect)((()=>{p({cursor:void 0})}),[a,p]),{rows:i.rows,filters:i.filters,setFilters:c,query:i.query,setQuery:m,sorts:i.sorts,setSorts:u,hasNextPage:i.hasNextPage,hasPreviousPage:i.hasPreviousPage,loadNextPage:h,loadPreviousPage:f,reloadPage:x,currentPage:r,loading:i.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:P}=(0,s.useContext)(z().g),D=(null==P?void 0:P[a.id])??[],{selectedRows:A,handleToggleRow:N,handleSelectAllRows:R,handleUnselectAllRows:B}=ps({allPossibleRows:d}),[L,O]=(0,s.useState)(),V=(0,s.useCallback)((async()=>{await k(),B()}),[k,B]),U=(0,y().O7)(),q=(0,b().VK)((()=>A.map((e=>new(I().U6)(U,{table:j().KJ,id:e.id}).getModel())).filter(kt().$K).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[U,A]),[E,Z]=(0,s.useState)(),[F,W]=(0,s.useState)(!1);return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{hideDivider:!0,title:(0,i.jsx)(x()._H,{id:"organization.general.workspace.guests.title",defaultMessage:"Guests"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organization.general.workspace.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace."})})}),(0,i.jsx)("div",{style:r.multiSelect,children:(0,i.jsxs)(ws,{isOpen:A.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(x()._H,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:A.length}}),onClick:B}),(0,i.jsx)(Ms,{icon:rs().l,title:(0,i.jsx)(x()._H,{id:"organization.general.workspaceGuestsTable.multiselect.convertToMember",defaultMessage:"Upgrade to member"}),onClick:()=>O(To.ConvertToMember)}),(0,i.jsx)(Ms,{icon:ls,iconSize:20,title:(0,i.jsx)(x()._H,{id:"organization.general.workspaceGuestsTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>O(To.RemoveFromWorkspace)})]})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsxs)("div",{style:r.filters,children:[(0,i.jsx)(ya().i,{sortProperties:_o,isMenuOpen:F,setIsMenuOpen:W,onApply:e=>{W(!1),_(e),Z(void 0)},currentSorts:E??C??[]}),(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organization.workspaceGuestsTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:D,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{u({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:r.search,children:[(0,i.jsx)(va().L,{appliedSorts:C,openSortPillMenu:e=>{e&&Z([{propertyId:e,direction:"ascending"}]),W(!0)},sortProperties:_o}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:m,setQueryFilter:g})]})]}),(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,rows:T?(0,Vt().s)():d,columnRenderInfo:n,styles:o,onRowClick:e=>{e.type!==Vt().a.Loading&&N(e)},renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"workspaceGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(x()._H,{id:"workspaceGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:T,isSelected:d.length>0&&A.length===d.length,onClick:()=>{A.length===d.length?B():R()}},row:{getDisabledState:()=>T,getSelectedState:e=>A.some((t=>t.id===e.id)),onClick:e=>{e.type!==Vt().a.Loading&&N(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await f(),B()},onLoadPrevious:async()=>{await v(),B()},hasNextPage:p,hasPrevPage:h,currentPage:w}}),l&&L===To.ConvertToMember?(0,i.jsx)(Jn,{inviteTargets:q,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:V,spaceStore:a}):null,l&&L===To.RemoveFromWorkspace&&(0,i.jsx)(si,{inviteTargets:q,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:V,spaceStore:a})]})}const Io=(0,n().IU)("personWithKeyOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10 10.092a2.75 2.75 0 0 1-1.51-.438 3.2 3.2 0 0 1-1.08-1.169 3.34 3.34 0 0 1-.404-1.627q0-.875.403-1.592A3.15 3.15 0 0 1 8.496 4.11Q9.18 3.68 10 3.68q.827 0 1.504.424.684.424 1.08 1.141a3.2 3.2 0 0 1 .403 1.6q0 .895-.403 1.634a3.2 3.2 0 0 1-1.08 1.175 2.7 2.7 0 0 1-1.504.438m0-1.19q.478 0 .875-.266a2 2 0 0 0 .636-.739q.24-.471.239-1.052a2.1 2.1 0 0 0-.24-1.012 1.87 1.87 0 0 0-.635-.71 1.56 1.56 0 0 0-.875-.26q-.478 0-.875.266-.396.26-.636.71-.24.452-.239 1.02 0 .573.24 1.045.238.465.635.732.403.266.875.266M5.734 16.45q-1.75 0-1.75-1.176 0-.696.417-1.463.424-.765 1.21-1.428a6.4 6.4 0 0 1 1.9-1.073q1.108-.417 2.489-.417.82 0 1.552.164.738.157 1.36.437-.014.417.048.786.062.363.205.69a5.4 5.4 0 0 0-1.38-.642A5.9 5.9 0 0 0 10 12.074q-1.135 0-2.017.322-.875.315-1.476.8-.595.478-.91.99-.314.507-.314.903 0 .096.048.137.055.04.178.04h8.777v1.183zM16.14 9.477q.616 0 1.12.3.514.3.814.814.3.506.301 1.114 0 .704-.417 1.265t-1.176.895l.848.841q.082.082.075.178 0 .096-.061.157l-.89.868.63.63a.24.24 0 0 1 .068.163.2.2 0 0 1-.068.164l-1.08 1.08a.21.21 0 0 1-.164.062.2.2 0 0 1-.144-.055l-.595-.58a.37.37 0 0 1-.116-.254v-3.336a2.2 2.2 0 0 1-1.38-2.078 2.19 2.19 0 0 1 1.1-1.928q.513-.3 1.135-.3m-.007 1.025a.64.64 0 0 0-.479.205.64.64 0 0 0-.198.472q0 .287.198.492a.67.67 0 0 0 .479.198.65.65 0 0 0 .478-.198.68.68 0 0 0 .199-.492.64.64 0 0 0-.199-.472.64.64 0 0 0-.478-.205"})});let Ho=function(e){return e.WorkspaceMember="workspace-member",e.Loading="loading",e}({});const Po={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,currentPage:1,hasNextPage:!0,hasPreviousPage:!1};var Do=()=>a(431595);function zo(e){let{organizationId:t,userIds:a}=e;const n=(0,y().O7)(),i=(0,x().YB)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(D().V);return(0,s.useCallback)((async(e,s)=>{const r=await M().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:n,data:{organizationId:t,userIds:a,newRole:s,spaceId:e}});"success"===r.type?(et().oV({label:i.formatMessage(Ao.changeRolesSuccess)}),o({data:r.data})):C().UW((0,_().wf)(T().Z.getIntl(),r))}),[n,i,t,o,a])}const Ao=(0,x().vU)({removeUserSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.removeUser",defaultMessage:"Successfully removed user from space"},addUserSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.addUser",defaultMessage:"Successfully added user to space"},changeRoleSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRole",defaultMessage:"Successfully updated user's role in space"},changeRolesSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRoles",defaultMessage:"Successfully updated users' roles in space"}});function No(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,spaceStore:n,organizationStore:o}=e,r=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteTargets:l}=(0,b().VK)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=zo({organizationId:o.id,userIds:l.map((e=>e.value.id)).filter(kt().$K)});async function c(){await d(n.id,"member"),await s(),a()}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:ls(r.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersToMemberModal.title",defaultMessage:"Demote {count} {count, plural, one {user} other {users}} to member",values:{count:l.length}}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersToMemberModal.byline",defaultMessage:"Downgrade these users to members."})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.demote",defaultMessage:"Demote"}),primaryAction:c,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(wn,{userIds:l.map((e=>e.value.id)).filter(kt().$K)})})})})}function Ro(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,organizationStore:n,spaceStore:o}=e,r=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteTargets:l}=(0,b().VK)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=zo({organizationId:n.id,userIds:l.map((e=>e.value.id)).filter(kt().$K)});async function c(){await d(o.id,"owner"),await s(),a()}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:Io(r.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.title",defaultMessage:"Promote {count} {count, plural, one {user} other {users}} to workspace owner",values:{count:l.length}}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.byline",defaultMessage:"Grant workspace owner access to these users."})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.promote",defaultMessage:"Promote"}),primaryAction:c,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(wn,{userIds:l.map((e=>e.value.id)).filter(kt().$K)})})})})}const Bo=new Array(Ge().B).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:Ho.Loading}))),Lo=(0,x().vU)({name:{id:"organization.workspace.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.workspace.members.roleColumn.header",defaultMessage:"Role"}}),Oo={id:"name",headerTitle:(0,i.jsx)(x()._H,{...Lo.name}),renderCell:e=>e.type===Ho.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(sa,{userId:e.id}),widthData:{widthPercent:33,minWidth:100},sortable:!1},Vo={id:"role",headerTitle:(0,i.jsx)(x()._H,{...Lo.role}),renderCell:e=>{if(e.type===Ho.Loading)return(0,i.jsx)(Ht().HD,{containerStyles:{width:120}});let t=(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e.role){case"owner":t=(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})},widthData:{widthPercent:25,minWidth:80},sortable:!1},Uo={id:"email",headerTitle:(0,i.jsx)(x()._H,{...Lo.email}),renderCell:e=>e.type===Ho.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:200}}):(0,i.jsx)(Fs().hr,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1};function qo(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Ho.Loading?void 0:(0,i.jsx)(yo,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"members"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const Eo=[{id:Oo.id,name:T().Z.formatMessage(Lo.name),type:"title"},{id:Vo.id,name:T().Z.formatMessage(Lo.role),type:"title"},{id:Uo.id,name:T().Z.formatMessage(Lo.email),type:"number"}];function Zo(e){let{organizationId:t,spaceStore:a}=e;const n=(0,eo().k)({organizationId:t}),o=(0,s.useMemo)((()=>[Oo,Vo,Uo,qo(t)]),[t]),r=(0,S().yK)((e=>{const t=(0,It().bE)({columnRenderInfo:o,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[o]),l=Sa(),{rows:d,filters:c,setFilters:u,query:m,setQuery:g,hasNextPage:p,hasPreviousPage:h,loadNextPage:f,loadPreviousPage:v,currentPage:w,sorts:C,setSorts:_,loading:T,reloadPage:k}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,y().O7)(),{updateCacheWithRecordMap:i}=(0,s.useContext)(D().V),[o,r]=(0,s.useState)(Po),l=(0,s.useCallback)((e=>{r((t=>({...t,filters:e,currentPage:Po.currentPage})))}),[]),d=(0,s.useCallback)((e=>{r((t=>({...t,sorts:e,currentPage:Po.currentPage})))}),[]),c=(0,s.useCallback)((e=>{r((t=>({...t,query:e,currentPage:Po.currentPage})))}),[]),u=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{r((e=>({...e,loading:!0})));const e=await M().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:o.filters,sorts:(l=o.sorts,null==l?void 0:l.map((e=>{let{propertyId:t,direction:a}=e;return"name"===t?{columnName:"actor",direction:a}:"role"===t?{columnName:"role",direction:a}:void 0})).filter(kt().$K)),query:o.query,cursor:s,limit:Ge().B}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}i({data:e.data}),r((t=>{let a=t.currentPage;return e.data.hasPreviousPage?null!=s&&s.previousCursorId?a-=1:null!=s&&s.nextCursorId&&(a+=1):a=Po.currentPage,{...t,rows:e.data.members.map((e=>({id:e.userId,role:e.spaceRole,isClickable:!0,type:Ho.WorkspaceMember}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:a}}))}catch(d){const e=(0,cs().t)(d);r((t=>({...t,loading:!1,error:e})))}var l}),[n,a,t,i,o.filters,o.query,o.sorts]),m=(0,s.useCallback)((async e=>{await u({cursor:{nextCursorId:e}})}),[u]),g=(0,s.useCallback)((async e=>{await u({cursor:{previousCursorId:e}})}),[u]),p=(0,s.useCallback)((async e=>{await u({cursor:{currentCursorId:e}})}),[u]);return(0,s.useEffect)((()=>{u({cursor:void 0})}),[a,u]),{rows:o.rows,filters:o.filters,setFilters:l,query:o.query,setQuery:c,sorts:o.sorts,setSorts:d,hasNextPage:o.hasNextPage,hasPreviousPage:o.hasPreviousPage,loadNextPage:m,loadPreviousPage:g,reloadPage:p,currentPage:o.currentPage,loading:o.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:P}=(0,s.useContext)(z().g),A=(null==P?void 0:P[a.id])??[],{selectedRows:N,handleToggleRow:R,handleSelectAllRows:B,handleUnselectAllRows:L}=ps({allPossibleRows:d}),[O,V]=(0,s.useState)({isOpen:!1}),[U,E]=(0,s.useState)(),[Z,F]=(0,s.useState)(!1),W=(0,s.useCallback)((async()=>{var e;await k(null===(e=d[0])||void 0===e?void 0:e.id),L()}),[d,k,L]),K=(0,b().VK)((()=>new vs),[]),G=(0,y().O7)(),Y=(0,b().VK)((()=>N.map((e=>new(I().U6)(G,{table:j().KJ,id:e.id}).getModel())).filter(kt().$K).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[G,N]);return(0,s.useEffect)((()=>{K.setState({...K.state,inviteTargets:Y,isInviteTargetsEmpty:!1})}),[K,Y]),(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{hideDivider:!0,title:(0,i.jsx)(x()._H,{id:"organization.general.workspace.members.title",defaultMessage:"Members"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organization.general.workspace.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration in your workspace."})})}),(0,i.jsx)("div",{style:l.multiSelect,children:(0,i.jsxs)(ws,{isOpen:N.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(x()._H,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:N.length}}),onClick:L}),(0,i.jsx)(Ms,{disabled:N.some((e=>"owner"===e.role)),disabledTooltipText:(0,i.jsx)(x()._H,{id:"organization.general.workspaceMembersTable.multiselect.promote.disabledTooltip",defaultMessage:"Cannot promote users that are already owners"}),icon:Io,iconSize:20,title:(0,i.jsx)(x()._H,{id:"organization.general.workspaceMembersTable.multiselect.promote",defaultMessage:"Promote to workspace owner"}),onClick:()=>V({isOpen:!0,modalType:"promoteToWorkspaceOwner",userIds:N.map((e=>e.id))})}),(0,i.jsx)(Ms,{disabled:N.some((e=>"member"===e.role)),disabledTooltipText:(0,i.jsx)(x()._H,{id:"organization.general.workspaceMembersTable.multiselect.demote.disabledTooltip",defaultMessage:"Cannot demote users that are already members"}),icon:ls,iconSize:20,title:(0,i.jsx)(x()._H,{id:"organization.general.workspaceMembersTable.multiselect.demote",defaultMessage:"Demote to member"}),onClick:()=>V({isOpen:!0,modalType:"demoteToMember",userIds:N.map((e=>e.id))})}),(0,i.jsx)(Ms,{icon:ls,iconSize:20,title:(0,i.jsx)(x()._H,{id:"organization.general.workspaceMembersTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>V({isOpen:!0,modalType:"removeFromWorkspace",userIds:N.map((e=>e.id))})})]})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsxs)("div",{style:l.filters,children:[(0,i.jsx)(ya().i,{sortProperties:Eo,isMenuOpen:Z,setIsMenuOpen:F,onApply:e=>{F(!1),_(e),E(void 0)},currentSorts:U??C??[]}),(0,i.jsx)(Ii,{setUserRoles:e=>u({...c,roles:e}),selectedUserRoles:c.roles||[],roles:Hi}),(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organization.workspaceMembersTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:A,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{u({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:l.search,children:[(0,i.jsx)(va().L,{appliedSorts:C,openSortPillMenu:e=>{e&&E([{propertyId:e,direction:"ascending"}]),F(!0)},sortProperties:Eo}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:m,setQueryFilter:g})]}),(0,i.jsx)(q().Z,{onClick:()=>V({isOpen:!0,modalType:"addMembers"}),children:(0,i.jsx)(x()._H,{defaultMessage:"Add members",id:"organization.workspaceMembersTable.addMemberButton"})})]}),(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,rows:T?Bo:d,columnRenderInfo:o,styles:r,onRowClick:e=>{e.type!==Ho.Loading&&R(e)},renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(x()._H,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:T,isSelected:d.length>0&&N.length===d.length,onClick:()=>{N.length===d.length?L():B()}},row:{getDisabledState:()=>T,getSelectedState:e=>N.some((t=>t.id===e.id)),onClick:e=>{e.type!==Ho.Loading&&R(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await f(d[d.length-1].id),L()},onLoadPrevious:async()=>{await v(d[0].id),L()},hasNextPage:p,hasPrevPage:h,currentPage:w}}),n&&O.isOpen&&"addMembers"===O.modalType&&(0,i.jsx)(Nn,{organizationStore:n,onDismiss:()=>V({isOpen:!1}),refreshPage:W,spaceId:a.id}),n&&O.isOpen&&"promoteToWorkspaceOwner"===O.modalType&&(0,i.jsx)(Ro,{permissionsInviteStore:K,onDismiss:()=>V({isOpen:!1}),refreshPage:W,organizationStore:n,spaceStore:a}),n&&O.isOpen&&"demoteToMember"===O.modalType&&(0,i.jsx)(No,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>V({isOpen:!1}),refreshPage:W,spaceStore:a}),n&&O.isOpen&&"removeFromWorkspace"===O.modalType&&(0,i.jsx)(Mn,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>V({isOpen:!1}),refreshPage:W,spaceStore:a})]})}var Fo=()=>a(789938),Wo=()=>a(451189);const Ko=Ge().B,Go=[{propertyId:"name",direction:"ascending"}];function Yo(e){const t=(0,s.useMemo)((()=>[e]),[e]),{teamStores:a,loading:n}=(0,A().x)(t),{teamAggregateDataForSpace:i,loading:o}=(0,Wo().f)(t),r=n||o,[l,d]=(0,s.useState)(),[c,u]=(0,s.useState)(""),[m,g]=(0,s.useState)(0),p=i[e],h=(0,b().VK)((()=>(a[e]??[]).map((t=>{const a=null==p?void 0:p[t.id];return{id:t.id,spaceId:e,teamName:t.getName()??"",teamIcon:t.getIcon(),ownerIds:t.getAllOwnerIds(),memberCount:(null==a?void 0:a.memberCountWithGuests)??0,isClickable:!1,type:Vt().a.SingleWorkspaceTeam}}))),[p,a,e]),f=(0,s.useMemo)((()=>{const e=null!=l&&l.length?l:Go;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===Mr.id?"memberCount":e=>e.teamName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,kt().t1)(t)}));return We().Xo(t,s,n)}({rows:h,appliedSorts:e})}),[h,l]),x=(0,s.useMemo)((()=>c?(0,rt().ZP)(c,f,(e=>e.teamName)):f),[c,f]),v=(0,s.useMemo)((()=>{const e=m*Ko,t=e+Ko;return x.slice(e,t)}),[x,m]);(0,s.useEffect)((()=>{g(0)}),[c]);const y=(0,s.useMemo)((()=>(m+1)*Ko<x.length),[x,m]),S=m>0,j=(0,s.useCallback)((()=>{y&&g((e=>e+1))}),[y]),w=(0,s.useCallback)((()=>{S&&g((e=>e-1))}),[S]);return{rows:r?(0,Vt().s)():v,loadNextPage:j,loadPrevPage:w,hasNextPage:y,hasPrevPage:S,currentPageIndex:m,appliedSorts:l,setAppliedSorts:d,query:c,setQuery:u}}var $o=()=>a(890085);function Jo(e){switch(e){case"editor":return"owner";case"membership_admin":return"membership_admin";default:return"member"}}function Qo(e){switch(e.role){case"owner":return 1;case"membership_admin":return 2;default:return 3}}function Xo(e){if(!e.accessLevel)return 4;switch(e.accessLevel){case"open":return 1;case"closed":return 2;case"private":return 3;default:(0,kt().t1)(e.accessLevel)}}var er=()=>a(72092);function tr(e){let{setAccessLevels:t,selectedAccessLevels:a}=e;return(0,i.jsx)(Ts().J,{pillTitle:(0,i.jsx)(x()._H,{id:"organization.filters.teamAccessLevel.title",defaultMessage:"Access"}),pillIcon:d().Y,selectedItems:a,setSelectedItems:t,items:ar})}const ar=[{key:"open",value:"open",title:(0,i.jsx)(x()._H,{id:"organization.table.filters.access.open",defaultMessage:"Open"})},{key:"closed",value:"closed",title:(0,i.jsx)(x()._H,{id:"organization.table.filters.access.closed",defaultMessage:"Closed"})},{key:"private",value:"private",title:(0,i.jsx)(x()._H,{id:"organization.table.filters.access.private",defaultMessage:"Private"})}];var sr=()=>a(383694);function nr(e){let{organizationId:t,onDismiss:a,groupStore:n,teamStores:o}=e;const r=(0,y().O7)(),l=(0,x().YB)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(D().V),{loadTeamsForSpace:c}=(0,s.useContext)(z().g),[u,m]=(0,s.useState)(!1),g=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function p(){m(!0);const e=n.getSpaceId(),s=n.getGroupId(),i=o.map((e=>e.id));if(!e||!s)return void m(!1);const u=await M().callApi({eventName:"updateGroupInOrganization",environment:r,data:{organizationId:t,spaceId:e,groupId:s,removeTeams:i}});"success"===u.type?(d({data:u.data}),await c(e,!0),a(),m(!1)):C().UW((0,_().wf)(l,u))}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:ls(g.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.title",defaultMessage:"Remove group from {count} {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.byline",defaultMessage:"Remove this group from the following teamspaces."})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.remove",defaultMessage:"Remove from {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),primaryAction:p,primaryDisabled:u,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(ir,{teamStores:o})})})})}function ir(e){const{teamStores:t}=e,[a,n]=(0,s.useState)(""),o=(0,b().VK)((()=>t.map((e=>({id:e.id,icon:(0,i.jsx)(sr().p,{disabled:!0,store:e,size:24}),name:e.getName(),byline:(0,i.jsx)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.getRawMembership().length}})})})))),[t]),r=(0,rt().ZP)(a,o,(e=>e.name??""));return(0,i.jsx)(W().AW,{items:r,titleText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.title",defaultMessage:"Selected teamspaces"}),headerText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.header",defaultMessage:"Teamspaces"}),headerAction:(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:a,setQueryFilter:n})})}const or=(0,x().vU)({name:{id:"organization.group.teamspaces.nameColumn.header",defaultMessage:"Name"},owners:{id:"organization.group.teamspaces.ownersColumn.header",defaultMessage:"Owners"},access:{id:"organization.group.teamspaces.accessColumn.header",defaultMessage:"Access"}}),rr={id:"name",headerTitle:(0,i.jsx)(x()._H,{...or.name}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(a(562761).r,{useThinTitle:!0,showMemberCount:!0,iconSize:28,teamStore:e.teamStore,memberCountOverride:e.memberCount}),widthData:{widthPercent:33,minWidth:100},sortable:!1},lr={id:"owners",headerTitle:(0,i.jsx)(x()._H,{...or.owners}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:200}}):(0,i.jsx)(pr,{ownerIds:e.ownerIds,spaceId:e.spaceId}),widthData:{widthPercent:33,minWidth:100},sortable:!1},dr={id:"access",headerTitle:(0,i.jsx)(x()._H,{...or.access}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(x()._H,{id:"organization.workspace.teamspaces.accessColumn.unknown",defaultMessage:"Unknown"});switch(e){case"open":t=(0,i.jsx)(x()._H,{id:"organization.workspace.teamspaces.accessColumn.open",defaultMessage:"Open"});break;case"closed":t=(0,i.jsx)(x()._H,{id:"organization.workspace.teamspaces.accessColumn.closed",defaultMessage:"Closed"});break;case"private":t=(0,i.jsx)(x()._H,{id:"organization.workspace.teamspaces.accessColumn.private",defaultMessage:"Private"})}return(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.accessLevel),widthData:{widthPercent:33,minWidth:100},sortable:!1},cr=[{id:rr.id,name:T().Z.formatMessage(or.name),type:"title"},{id:dr.id,name:T().Z.formatMessage(or.access),type:"title"}],ur=[rr,lr,dr];var mr=function(e){return e.CreateNewTeamspace="create-new-teamspace",e.RemoveGroupFromTeam="remove-from-group",e}(mr||{});function gr(e){let{organizationId:t,groupStore:a,teamsState:n}=e;const o=(0,qn().V)(),r=(0,S().yK)((e=>{const t=(0,It().bE)({columnRenderInfo:ur,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[]),l=(0,s.useMemo)((()=>{const e=a.getSpaceId();return e?[e]:[]}),[a]),{teamAggregateDataForSpace:d}=(0,Wo().f)(l),c=(0,b().VK)((()=>null==d?void 0:d[a.getSpaceId()]),[d,a]),u=(0,b().VK)((()=>n.teamStores.map((e=>{var t;return{type:Vt().a.OrganizationGroupMember,id:e.id,name:e.getName(),spaceId:e.getSpaceId(),teamId:e.id,teamStore:e,ownerIds:e.getAllOwnerIds(),accessLevel:e.getTeamAccessLevel(),memberCount:null==c||null===(t=c[e.id])||void 0===t?void 0:t.memberCountWithGuests,isClickable:!0}}))),[n,c]),[m,g]=(0,s.useState)(),[p,h]=(0,s.useState)({}),[f,v]=(0,s.useState)(),[y,j]=(0,s.useState)(!1),[w,M]=(0,s.useState)(),C=w??f??[],_=(0,s.useMemo)((()=>{if(!u)return[];let e=u;return p.query&&(e=(0,rt().ZP)(p.query,e,(e=>e.name||""))),p.accessLevels&&p.accessLevels.length>0&&(e=e.filter((e=>{var t;const a=e.accessLevel;return!!a&&(null===(t=p.accessLevels)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:dr.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===dr.id?Xo:t===rr.id?"name":Xo})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,kt().t1)(t)}));return(0,We().Xo)(t,n,i)}({rows:e,appliedSorts:f})}),[u,p.accessLevels,p.query,f]),T=Math.max(1,Math.floor(_.length/Ge().B)),[k,I]=(0,s.useState)(0),P=_.slice(k*Ge().B,(k+1)*Ge().B),D=Ge().B*(k+1)<_.length,z=k>0;const{selectedRows:A,handleToggleRow:N,handleSelectAllRows:R,handleUnselectAllRows:B}=ps({allPossibleRows:P});return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{hideDivider:!0,title:(0,i.jsx)(x()._H,{id:"organization.groups.modal.teamspaces.title",defaultMessage:"Teamspaces"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organization.groups.modal.teamspaces.byline",defaultMessage:"Add and remove teamspaces from this group to manage access across this workspace."})})}),(0,i.jsxs)("div",{style:o.tableHeader,children:[(0,i.jsxs)("div",{style:o.leftContent,children:[(0,i.jsxs)(ws,{isOpen:A.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(x()._H,{id:"organization.group.teamspacesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:A.length}}),onClick:B}),(0,i.jsx)(Ms,{icon:ls,title:(0,i.jsx)(x()._H,{id:"organization.group.teamspacesTable.multiselect.remove",defaultMessage:"Remove group from teamspace"}),onClick:()=>g(mr.RemoveGroupFromTeam)})]}),(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{sortProperties:cr,isMenuOpen:y,setIsMenuOpen:j,onApply:e=>{j(!1),v(e),M(void 0)},currentSorts:C})}),C.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(tr,{setAccessLevels:e=>h((t=>({...t,accessLevels:e}))),selectedAccessLevels:p.accessLevels||[]})]}),(0,i.jsxs)("div",{style:o.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:f,openSortPillMenu:e=>{e&&M([{propertyId:e,direction:"ascending"}]),j(!0)},sortProperties:cr}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:p.query,setQueryFilter:e=>{h((t=>({...t,query:e})))}}),(0,i.jsx)(q().Z,{onClick:()=>{g(mr.CreateNewTeamspace)},children:(0,i.jsx)(x()._H,{id:"organizationTeamspacesSubTab.button.createTeamspace",defaultMessage:"Create teamspace"})})]})]}),(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,rows:n.loading?(0,Vt().s)():P,columnRenderInfo:ur,styles:r,onRowClick:e=>{e.type!==Vt().a.Loading&&N(e)},renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"teamsTable.empty",defaultMessage:"No teamspaces found"}),byline:(0,i.jsx)(x()._H,{id:"teamsTable.empty.byline",defaultMessage:"There are no teams that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:n.loading,isSelected:P.length>0&&A.length===P.length,onClick:()=>{A.length===P.length?B():R()}},row:{getDisabledState:()=>n.loading,getSelectedState:e=>A.some((t=>t.id===e.id)),onClick:e=>{e.type!==Vt().a.Loading&&N(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{I((e=>D?e+1:e)),B()},onLoadPrevious:()=>{I((e=>Math.max(e-1,0))),B()},hasNextPage:D,hasPrevPage:z,currentPage:k+1,finalPage:T}}),m===mr.RemoveGroupFromTeam?(0,i.jsx)(nr,{organizationId:t,onDismiss:()=>{g(void 0),B()},groupStore:a,teamStores:A.map((e=>e.teamStore))}):null]})}function pr(e){const{organizationOwnerRecordCache:t}=(0,s.useContext)(D().V),a=(0,Rt().Z)(),n=(0,y().O7)(),{ownerIds:o,spaceId:r}=e,l=(0,b().VK)((()=>o.ownerUserIds.map((e=>new(I().U6)(n,{table:j().KJ,id:e})))),[o.ownerUserIds,n]),d=(0,b().VK)((()=>o.ownerGroupIds.map((e=>new(I().Q4)(n,{table:Nt().GQ,id:(0,Nt().L9)({spacePermissionGroupId:e,spaceId:r}),spaceId:r},{inMemoryRecordCache:t})))),[o.ownerGroupIds,r,t,n]),c=l.map((e=>({renderAvatar:()=>(0,i.jsx)(ta().Z,{userStore:e,size:er().Oz,avatarShouldShowShadow:!1,iconStyle:{fontSize:12},showAvatarInTooltip:!0},e.id)}))),u=d.map((e=>({renderAvatar:()=>(0,i.jsx)(hr,{groupStore:e})})));return(0,i.jsx)(er().eM,{avatarStyles:a.roundAvatarBorder,avatars:c.concat(u),totalCount:Object.values(o).flat().length,isLoading:!1})}function hr(e){let{groupStore:t}=e;const{icon:a,spaceId:s}=(0,b().VK)((()=>({icon:t.getIcon(),spaceId:t.getSpaceId()})),[t]),n=(0,S().yK)((e=>({iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1,borderRadius:"100%"},icon:{position:"relative",zIndex:2,height:er().Oz,width:er().Oz,background:a&&(0,$o().V2)(a)?(0,$o().Pk)({icon:a,mode:e.mode,useLightGrayColor:!1}):e.accentColors.gray[75]}})),[a]);return(0,i.jsxs)("div",{style:n.iconContainer,children:[(0,i.jsx)(Zt,{icon:a,spaceId:s,size:er().Dt,containerStyles:n.icon}),(0,i.jsx)("div",{style:n.iconBackground})]})}var fr=()=>a(923398),xr=()=>a(577128),vr=()=>a(216867);function yr(e){let{organizationId:t,spaceStore:a,owner:n,onDismiss:o,onSubmit:r}=e;const l=(0,y().O7)(),d=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{width:540},ownerInput:{width:"100%"}})),[]);function c(){xr().default.reset(),o()}const u=(0,x().YB)(),[m,g]=(0,s.useState)(!1),[p,h]=(0,s.useState)([]),f=(0,b().VK)((()=>""===xr().default.state.name||!(n||p.length)||m),[m,n,p]),v=(0,s.useCallback)((()=>{w(!0)}),[]),[j,w]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,fr().O)(d.icon),title:(0,i.jsx)(x()._H,{id:"organization.team.settings.createTeam.modal.title",defaultMessage:"Create a new teamspace"}),byline:(0,i.jsx)(x()._H,{id:"organization.team.settings.createTeam.modal.byline",defaultMessage:"Create a teamspace to organize your teams pages, permissions, and members. Customize the name, icon, and default permission to get started."})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"organization.team.settings.createTeam.modal.primaryAction",defaultMessage:"Create teamspace"}),primaryAction:async()=>{g(!0),await async function(){if(!n&&!p.length)return;const{name:e,icon:s,description:i,accessLevel:o}=xr().default.state,d=n?[n]:p.map((e=>"user"===e.type?{entity_type:e.type,user_id:e.userId,type:"owner"}:"group"===e.type?{entity_type:e.type,group_id:e.groupId,type:"owner"}:void(0,kt().t1)(e)));await M().callApi({eventName:"createTeamInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:a.id,name:e,icon:s,description:i,accessLevel:o,members:d}}),c(),r&&r()}(),g(!1)},primaryDisabled:f,secondaryText:(0,i.jsx)(x()._H,{id:"organization.team.settings.createTeam.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsxs)("div",{style:d.content,children:[(0,i.jsx)(vr().TeamIconAndNameRow,{parentSpaceStore:a}),(0,i.jsx)(vr().TeamDescriptionRow,{}),(0,i.jsx)(vr().AccessLevelSection,{parentSpaceStore:a}),!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F().Z,{hasMarginTop:!0,children:(0,i.jsx)(x()._H,{id:"organization.team.settings.createTeam.modal.ownersLabel",defaultMessage:"Teamspace owners"})}),(0,i.jsx)(Da,{spaceStore:a,isOpen:j,onDismiss:()=>w(!1),onClick:v,includeGroups:!0,selectedValues:p,setSelectedValues:h,inputPlaceholder:u.formatMessage(br.ownersPlaceholder)})]})]})})})}const br=(0,x().vU)({ownersPlaceholder:{id:"spaceMembersInput.owners.placeholder",defaultMessage:"No owners yet"}}),Sr=(0,x().vU)({name:{id:"workspaceModalTeamsView.nameColumn.header",defaultMessage:"Name"},members:{id:"workspaceModalTeamsView.membersColumn.header",defaultMessage:"Members"}}),jr={id:"name",headerTitle:(0,i.jsx)(x()._H,{...Sr.name}),renderCell:e=>{if(e.type===Vt().a.Loading)return(0,i.jsx)(Ht().HD,{containerStyles:{width:200}});const t=0===e.teamName.length?(0,i.jsx)(x()._H,{id:"workspaceModalTeamsView.untitledGroup",defaultMessage:"Untitled"}):e.teamName;return(0,i.jsx)(Ht().iP,{title:t,icon:(0,i.jsx)(B().Z,{disabled:!0,icon:e.teamIcon,title:e.teamName,size:ba().CD,isLarge:!0,isEmptyPage:!1}),iconSize:ba().CD,iconMargin:Ht().dI,summaryStyles:{width:`calc(100% - ${ba().CD+Ht().dI}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},wr={id:"owners",headerTitle:(0,i.jsx)(x()._H,{id:"workspaceModalTeamsView.ownersColumn.header",defaultMessage:"Owners"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Fo().x,{}):e.ownerIds.ownerGroupIds.length>0||e.ownerIds.ownerUserIds.length>0?(0,i.jsx)(pr,{ownerIds:e.ownerIds,spaceId:e.spaceId}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"workspaceModalTeamsView.ownersColumn.noOwners",defaultMessage:"Unowned"})}),widthData:{widthPercent:30,minWidth:100},sortable:!1},Mr={id:"members",headerTitle:(0,i.jsx)(x()._H,{...Sr.members}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(At().z6,{}):(0,i.jsx)(H().q,{colorName:"secondary",children:(0,i.jsx)(x()._H,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"workspaceModalTeamsView.membersColumn.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:30,minWidth:100},sortable:!1},Cr=[jr,wr,Mr],_r=[{id:jr.id,name:T().Z.formatMessage(Sr.name),type:"title"},{id:Mr.id,name:T().Z.formatMessage(Sr.members),type:"number"}];var Tr=function(e){return e.CreateTeam="create-team",e}(Tr||{});function kr(e){let{spaceStore:t,organizationId:a}=e;const n=(0,S().yK)((()=>({createGroupButton:{marginBottom:8}})),[]),o=(0,S().yK)((e=>{const t=(0,It().bE)({columnRenderInfo:Cr,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[]),r=Sa(),{rows:l,setAppliedSorts:d,appliedSorts:c,query:u,setQuery:m,loadNextPage:g,loadPrevPage:p,hasNextPage:h,hasPrevPage:f,currentPageIndex:v}=Yo(t.id),{loadTeamsForSpace:y}=(0,s.useContext)(z().g),[b,j]=(0,s.useState)(),[w,M]=(0,s.useState)(!1),[C,_]=(0,s.useState)();return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{hideDivider:!0,title:(0,i.jsx)(x()._H,{id:"organization.general.workspace.teams.title",defaultMessage:"Teamspaces"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"workspaceModalTeamsView.byline",defaultMessage:"Manage teamspace membership and permissions"})})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsx)("div",{style:r.filters,children:(0,i.jsx)(ya().i,{sortProperties:_r,isMenuOpen:w,setIsMenuOpen:M,onApply:e=>{M(!1),d(e),j(void 0)},currentSorts:b??c??[]})}),(0,i.jsx)("div",{style:r.search,children:l.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(va().L,{appliedSorts:c,openSortPillMenu:e=>{e&&j([{propertyId:e,direction:"ascending"}]),M(!0)},sortProperties:_r}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:u,setQueryFilter:m})]})}),(0,i.jsx)(q().Z,{onClick:()=>_(Tr.CreateTeam),style:n.createGroupButton,children:(0,i.jsx)(x()._H,{defaultMessage:"Create teamspace",id:"workspaceModalTeamsView.createTeamspaceButton"})})]}),(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:l,columnRenderInfo:Cr,styles:o,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"workspaceModalTeamsView.empty",defaultMessage:"No teams found"}),byline:(0,i.jsx)(x()._H,{id:"workspaceModalTeamsView.empty.byline",defaultMessage:"There are no teams that match this query."})}),loadMoreMethod:{type:"pages",onLoadNext:g,onLoadPrevious:p,hasNextPage:h,hasPrevPage:f,currentPage:v+1}}),C===Tr.CreateTeam&&(0,i.jsx)(yr,{organizationId:a,spaceStore:t,onDismiss:()=>_(void 0),onSubmit:()=>y(t.id,!0)})]})}var Ir=()=>a(66077),Hr=()=>a(423658),Pr=()=>a(96642),Dr=()=>a(128076),zr=()=>a(925230);const Ar={query:void 0,teamIds:[],userIds:[]};function Nr(e){const t=(0,y().O7)();let a,n,i;"legalHoldId"in e?a=e.legalHoldId:"organizationId"in e?n=e.organizationId:"spaceId"in e&&(i=e.spaceId);const[{status:o,value:r},l]=(0,Ke().r5)((async()=>{if(a||n||i){const e=await M().callApi({eventName:"getLegalHoldMembers",environment:t,data:{legalHoldId:a,organizationId:n,spaceId:i}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}throw new Error("No legal hold ID, organization ID, or space ID provided.")}),[t,a,n,i]);return{loading:"pending"===o,members:(0,s.useMemo)((()=>r??[]),[r]),refetch:l}}var Rr=()=>a(239444);function Br(e){let{pillTitle:t,pillIcon:a,selectedUsers:s,setSelectedUsers:n,userIds:o}=e;const r=(0,y().O7)(),l=(0,x().YB)(),d=(0,b().VK)((()=>{var e;return null===(e=pe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),c=(0,b().VK)((()=>o.map((e=>{const t=new(ct().U)(r,{table:j().KJ,id:e},{userId:d});return{key:e,value:e,title:(0,i.jsx)(Rr().Z,{userStore:t,avatarSize:20}),shortTitle:t.getDisplayName(l)}}))),[r,o,l,d]);return(0,i.jsx)(Ts().J,{pillTitle:t,pillIcon:a,selectedItems:s,setSelectedItems:n,items:c})}var Lr=()=>a(840816),Or=()=>a(726008),Vr=()=>a(312578),Ur=()=>a(166124);const qr={id:"page",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.pageColumn.header",defaultMessage:"Page"}),renderCell:e=>(0,i.jsx)(Ur().o,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:80},sortable:!1},Er={id:"location",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.locationColumn.header",defaultMessage:"Location"}),renderCell:e=>(0,i.jsx)(a(465498).N,{blockStore:e.blockStore,teamStore:(0,a(239482).VP)(e.blockStore)}),widthData:{widthPercent:25,minWidth:80},sortable:!1},Zr={id:"pageStatus",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.pageStatusColumn.header",defaultMessage:"Page status"}),renderCell:e=>(0,i.jsx)(a(999508).D,{pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:80},sortable:!1};function Fr(e){let{blockStore:t,selectedSpaceId:a}=e;const s=Yt({spaceId:a});return s?(0,i.jsx)(Lr().A,{blockStore:t,spaceStore:s}):null}const Wr={id:"audience",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.audienceColumn.header",defaultMessage:"Audience"}),renderCell:e=>(0,i.jsx)(Fr,{blockStore:e.blockStore,selectedSpaceId:e.selectedSpaceId}),widthData:{widthPercent:25,minWidth:80},sortable:!1},Kr={id:"sharedWith",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.sharedWithColumn.header",defaultMessage:"Shared with"}),renderCell:e=>(0,i.jsx)(a(118680).v,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:80},sortable:!1},Gr={id:"lastEditedBy",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.lastEditedByColumn.header",defaultMessage:"Last edited by"}),renderCell:e=>{const t=e.blockStore.getLastEditedById();return t?(0,i.jsx)(Or().t,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:80},sortable:!1},Yr={id:"lastEditedTime",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.lastEditedTimeColumn.header",defaultMessage:"Last edited on"}),renderCell:e=>0===e.blockStore.getLastEditedTime()?null:(0,i.jsx)(a(784123).C,{lastEditedTime:e.blockStore.getLastEditedTime(),lastEditedById:e.blockStore.getLastEditedById(),deletedFromTrashTime:e.blockStore.getDeletedFromTrashTime(),movedToTrashTime:e.blockStore.getMovedToTrashTime(),pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:80},sortable:!1},$r={id:"createdBy",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.createdByColumn.header",defaultMessage:"Created by"}),renderCell:e=>{const t=e.blockStore.getCreatedById();return t?(0,i.jsx)(Or().t,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:80},sortable:!1},Jr={id:"createdTime",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.createdTimeColumn.header",defaultMessage:"Created on"}),renderCell:e=>(0,i.jsx)(Zs().T,{dateTs:e.blockStore.getCreatedTime()}),widthData:{widthPercent:25,minWidth:80},sortable:!1};function Qr(e){let{data:t,loading:a,selectedSpaceId:n,onLoadMore:o}=e;const r=s.useMemo((()=>[qr,Er,Zr,Wr,Kr,Gr,Yr,$r,Jr]),[]),l=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:r,theme:e,containerMarginTop:0})),[r]),d=t.map((e=>{const t=e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,blockStore:e,selectedSpaceId:n,type:Vt().a.SingleLegalHoldPage,isClickable:!1,pageStatus:t}}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{columnRenderInfo:r,hideHeaderRowPadding:!0,rows:d,renderNoRowsComponent:()=>!a&&(0,i.jsx)(Lt,{title:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(x()._H,{id:"singleLegalHoldContentTable.empty.byline",defaultMessage:"There are no pages that match this query."})}),styles:l,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:{type:"scroll",onLoadMore:o},setStickyHeaderRow:!0,maxHeight:400}),a?(0,i.jsx)(ea().X2,{alignItems:"center",justifyContent:"center",paddingTop:24,paddingBottom:24,children:(0,i.jsx)(Vr().Z,{})}):null]})}const Xr=(0,x().vU)({content:{id:"settingsConsole.singleLegalHoldContentTab.title",defaultMessage:"Browse Content"},contentLabel:{id:"settingsConsole.singleLegalHoldContentTab.label",defaultMessage:"View the pages currently on hold in each workspace"},placeholder:{id:"settingsConsole.singleLegalHoldContentTab.search.placeholder",defaultMessage:"Search by page name"}});function el(e){let{legalHoldId:t}=e;const n=(0,x().YB)(),o=(0,qn().V)(),r=En({spaceStores:(0,Js()._)()}),{content:l,loading:d,loadNextPage:c,selectedSpaceId:u,setSelectedSpaceId:m,filters:g,setFilters:p}=function(e){const t=(0,y().O7)(),{legalHoldId:a}=e,n=t.currentUser.id,{spaceIds:i}=s.useContext(z().g),[o,r]=s.useState(i[0]),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[m,g]=s.useState(Ar),[p,h]=s.useState([]),{query:f,teamIds:x,userIds:v}=m,b=null==x?void 0:x.join(","),S=null==v?void 0:v.join(","),[{status:j}]=(0,Ke().r5)((async()=>{if(!o)throw new Error("No space ID provided,");if(!n)throw new Error("Current user not found.");const e=b?b.split(","):[],s=S?S.split(","):[],i=await M().callApi({eventName:"getLegalHoldPages",environment:t,data:{id:a,spaceId:o,query:""===f?void 0:f,cursor:c,filters:e.length>0||s.length>0?{teamIds:e.length>0?e:void 0,userIds:s.length>0?s:void 0}:void 0}});if("success"!==i.type){if("failed"===i.type)throw i.error;return(0,kt().t1)(i)}{const e=(0,zr().i)({recordMapWithRoleJson:i.data.recordMap}),a=new(Ir().Z)({name:Hr().FN,data:new(Pr().o)({[n]:e})});a.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),h((e=>{const s=[],n=new Set(e.map((e=>e.id)));for(const o of i.data.recordIds)if(!n.has(o)){const e=new(Dr().G)(t,{table:Kt().iU,id:o},{inMemoryRecordCache:a});s.push(e)}return[...e,...s]})),d(i.data.nextCursor)}}),[t,a,o,f,n,b,S,c],{debounce:300}),w="pending"===j;return{content:p,loading:w,filters:m,setFilters:function(e){h([]),u(void 0),g((t=>({...t,...e})))},selectedSpaceId:o,setSelectedSpaceId:function(e){h([]),u(void 0),r(e)},loadNextPage:function(){0===p.length||!l||w||u(l)}}}({legalHoldId:t}),{query:h,teamIds:f,userIds:v}=g,b=s.useMemo((()=>[u]),[u]),{teamStores:S}=(0,A().x)(b),{members:j}=Nr({legalHoldId:t,spaceId:u});return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{title:n.formatMessage(Xr.content),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:n.formatMessage(Xr.contentLabel)})}),(0,i.jsxs)("div",{style:o.tableHeader,children:[(0,i.jsxs)("div",{style:o.leftContent,children:[(0,i.jsx)(Ps,{selectedSpaceId:u,setSelectedSpaceId:m,spaceData:r}),(0,i.jsx)(a(843346).p,{selectedTeamIds:f,setSelectedTeamIds:e=>{p({teamIds:e})},teamStores:S[u],onMenuClose:()=>{}}),(0,i.jsx)(Br,{pillTitle:(0,i.jsx)(x()._H,{id:"legalHoldContentTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:fr().O,selectedUsers:v,setSelectedUsers:e=>{p({userIds:e})},userIds:j})]}),(0,i.jsx)("div",{style:o.rightContent,children:(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:h,setQueryFilter:e=>{e!==g.query&&p({query:e})},placeholderText:n.formatMessage(Xr.placeholder)})})]}),(0,i.jsx)(Qr,{selectedSpaceId:u,data:l,loading:d,onLoadMore:c})]})}function tl(){const e=(0,y().O7)(),[t,a]=(0,Ke().UK)((async t=>{let{legalHoldId:a,name:s,description:n,icon:i,status:o,userIds:r}=t;const l=await M().callApi({eventName:"updateLegalHold",environment:e,data:{legalHoldId:a,name:s,description:n,icon:i,status:o,userIds:r}});if("success"===l.type)return l.data;if("failed"===l.type)throw l.error;return(0,kt().t1)(l)}),[e]);return{loading:"pending"===t.status,updateLegalHold:a}}var al=()=>a(568017),sl=()=>a(18748),nl=()=>a(838367),il=()=>a(647410);const ol=(0,x().vU)({legalHoldAddMembersPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersPlaceholder",defaultMessage:"Search names or emails"},legalHoldAddMembersRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersRequiredValidationError",defaultMessage:"Hold members are required."}});function rl(e){let{organizationId:t,holdMemberUserIds:a,setHoldMemberUserIds:n,error:o,nonRemovableIds:r}=e;const l=(0,y().O7)(),d=(0,x().YB)(),[c,u]=s.useState(""),[m,g]=s.useState(!1),p=(0,S().yK)((e=>({token:{boxShadow:e.shadow2XS}})),[]),[{status:h,value:f}]=(0,Ke().r5)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getMembersInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.members;if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}),[l,t,c],{debounce:300}),[{status:v,value:w}]=(0,Ke().r5)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getGuestsInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.guests;if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}),[l,t,c],{debounce:300}),C=(0,s.useMemo)((()=>new Set(null==f?void 0:f.map((e=>e.userId)))),[f]),_=(0,s.useMemo)((()=>null==w?void 0:w.filter((e=>!C.has(e.userId)))),[w,C]),k=(0,s.useMemo)((()=>new Set(null==w?void 0:w.map((e=>e.userId)))),[w]),[{status:H,value:P}]=(0,Ke().r5)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getRemovedUsers",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}),[l,t,c],{debounce:300}),D=(0,s.useMemo)((()=>null==P?void 0:P.filter((e=>{const t=C.has(e),a=k.has(e);return!t&&!a}))),[P,C,k]),z=(0,b().VK)((()=>a.map((e=>{const t=new(I().U6)(l,{table:j().KJ,id:e});return(0,i.jsx)(ft().Z,{showRemoveButton:!(null!=r&&r.includes(e)),onClickRemove:t=>{const s=a.filter((t=>t!==e));n(s),t.stopPropagation()},backgroundColor:al().O9.white,format:it().lo.Medium,isSingle:!1,value:(0,i.jsx)(Rr().Z,{userStore:t,avatarSize:18}),style:p.token},e)}))),[l,a,p.token,n,r]),A=(0,b().VK)((()=>f&&0!==(null==f?void 0:f.length)?f.map((e=>{const t=new(I().U6)(l,{table:j().KJ,id:e.userId}),s=Fi(e);return{key:e.userId,render:e=>(0,i.jsx)(Pa().Z,{...e,defaultUserTitle:"name_only_semibold",defaultUserCaption:"email",actor:(0,ja().m3)(t.getModel()),right:(0,i.jsx)(sl().W0,{caption:d.formatMessage(s)})}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,a,f,n,d]),N=(0,b().VK)((()=>_&&0!==(null==_?void 0:_.length)?_.map((e=>{const t=new(I().U6)(l,{table:j().KJ,id:e.userId});return{key:e.userId,render:e=>(0,i.jsx)(Pa().Z,{...e,defaultUserTitle:"name_only_semibold",defaultUserCaption:"email",actor:(0,ja().m3)(t.getModel())}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,_,a,n]),R=(0,b().VK)((()=>D&&0!==(null==D?void 0:D.length)?D.map((e=>{const t=new(I().U6)(l,{table:j().KJ,id:e});return{key:e,render:e=>(0,i.jsx)(Pa().Z,{...e,defaultUserTitle:"name_only_semibold",defaultUserCaption:"email",actor:(0,ja().m3)(t.getModel())}),action:()=>{const t=[...a,e];n(t),u("")}}})):[]),[l,a,D,n]),B={key:"users",render:e=>(0,i.jsx)(Be().Z,{...e,title:(0,i.jsx)(x()._H,{defaultMessage:"Members",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.members.title"})}),items:A},L={key:"guests",render:e=>(0,i.jsx)(Be().Z,{...e,title:(0,i.jsx)(x()._H,{defaultMessage:"Guests",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.guests.title"})}),items:N},O={key:"removedUsers",render:e=>(0,i.jsx)(Be().Z,{...e,title:(0,i.jsx)(x()._H,{defaultMessage:"Removed users",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.removedUsers.title"})}),items:R},V={key:"empty",render:e=>(0,i.jsx)(Be().Z,{...e}),items:[{key:"empty-item",render:e=>(0,i.jsx)(nl().Z,{title:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.empty.item",defaultMessage:"Type or paste in emails above, separated by commas."})}),action:We().ZT}]},U="resolved"===h&&"resolved"===v&&"resolved"===H;function q(){if(0===c.length)return[V];const e=[];return A.length>0&&e.push(B),N.length>0&&e.push(L),R.length>0&&e.push(O),e}return(0,i.jsxs)(ea().sg,{width:"100%",gap:8,children:[(0,i.jsxs)(ea().sg,{gap:0,children:[(0,i.jsx)(F().Z,{children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersLabel",defaultMessage:"Hold members"})}),(0,i.jsx)(pt().ZP,{popupType:pt().kQ.Popup,sameWidthAsOrigin:!0,open:m||c.length>0,enableOutsideClickDismiss:!0,onDismiss:()=>{g(!1)},origin:(0,i.jsx)(xt().Z,{onClick:e=>{g(!0),e.stopPropagation()},tokens:z,placeholder:T().Z.formatMessage(ol.legalHoldAddMembersPlaceholder),value:c,onChange:e=>u(e.target.value),onRemoveLastToken:()=>{const e=a.slice(0,-1);n(e)},errorOutline:!!o,inputElementAttributes:{"aria-describedby":"legalHoldAddMembersError"}}),render:()=>(0,i.jsx)(mt().Z,{menuType:dt().o.Popup,children:(0,i.jsx)(gt().ZP,{type:gt().iW.Vertical,initialFocus:U&&[...A,...N,...R].length>0?0:void 0,sections:q()})})})]}),(0,i.jsx)(il().Z,{id:"legalHoldAddMembersError",error:o})]})}function ll(e){let{onDismiss:t,legalHoldId:a,organizationId:n,userIdsAlreadyInLegalHold:o,onSuccess:r}=e;const[l,d]=s.useState({holdMemberUserIds:void 0}),[c,u]=(0,s.useState)(o),m=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{width:400}})),[]),{loading:g,updateLegalHold:p}=tl(),h=async()=>{if(c.length)try{await p({legalHoldId:a,userIds:c}),r(),t()}catch(e){return}else d((e=>({...e,holdMemberUserIds:ol.legalHoldAddMembersRequiredValidationError})))};return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:580}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(V().sR,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(W().xB,{icon:(0,rs().l)(m.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.title",defaultMessage:"Add new hold member"}),byline:(0,i.jsx)("div",{style:m.byline,children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.byline",defaultMessage:"Members affected by a legal hold won't be notified of the hold and will still maintain their permissions to create, edit, and delete files."})})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.addMember",defaultMessage:"Add hold member"}),primaryAction:h,primaryDisabled:g,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsx)(rl,{organizationId:n,holdMemberUserIds:c,nonRemovableIds:o,setHoldMemberUserIds:e=>{u(e),e.length&&d((e=>({...e,holdMemberUserIds:void 0})))},error:l.holdMemberUserIds})})}})}function dl(e){let{userIdsToRemove:t,legalHoldId:a,onDismiss:n,onSuccess:o}=e;const[r,l]=(0,s.useState)(!1),d=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),{loading:c,updateLegalHold:u}=tl(),m=async()=>{try{await u({legalHoldId:a,userIds:[]}),await o(),n()}catch(e){}},g=t.length;return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,Xe().L)(d.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:g}}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.byline",defaultMessage:"Removing all members will release the hold. This action is final and pages deleted after release will be permanently deleted according to the data retention setting.",values:{memberRemovalCount:g}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:g}}),primaryAction:m,primaryDisabled:c||!r,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(tt().Z,{checked:r,size:14,checkSize:10,onClick:()=>l(!r)}),(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"})})]})})})})}function cl(e){let{userIdsToRemove:t,allUserIds:a,legalHoldId:s,onDismiss:n,onSuccess:o}=e;const r=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary}})),[]),{loading:l,updateLegalHold:d}=tl(),c=async()=>{try{const e=a.filter((e=>!t.includes(e)));await d({legalHoldId:s,userIds:e}),o(),n()}catch(e){}},u=t.length;return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,areaConstraint:{width:{type:"fixed",length:421}},render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,Xe().L)(r.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:u}}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.byline",defaultMessage:"Deleting {memberRemovalCount, plural, one {this member} other {these members}} will also remove associated pages by {memberRemovalCount, plural, one {this member} other {these members}}.",values:{memberRemovalCount:u}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:u}}),primaryAction:c,primaryDisabled:l,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0})})})}var ul=function(e){return e.RemoveFromLegalHold="remove-from-legal-hold",e.ReleaseLegalHold="release-legal-hold",e}(ul||{});function ml(e){const{userId:t,onRemoveMember:a}=e,s=(0,b().qz)(void 0,Us().Z),n=(0,S().yK)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),o=[{key:"remove-member-from-legal-hold",render:e=>(0,i.jsx)(Re().Z,{...e,icon:ls(n.icon),title:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.userColumn.menu.removeMemberFromLegalHold",defaultMessage:"Remove member"})}),action:()=>{a(t),s.setState({...s.state,open:!1})}}],r={key:"actions",render:e=>(0,i.jsx)(Be().Z,{title:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:o};return(0,i.jsx)(qs().ZP,{stopClickPropagation:!0,popupType:Ta().k.Popup,alignmentToOrigin:_a().Alignment.Start,placementToOrigin:_a().Placement.Bottom,style:n.popupMenu,render:()=>(0,i.jsx)(mt().Z,{menuType:dt().o.Popup,width:248,children:(0,i.jsx)(gt().ZP,{type:gt().iW.Vertical,initialFocus:void 0,sections:[r]})}),onClose:We().ZT,buttonPopupStore:s,renderOrigin:e=>(0,i.jsx)(Es().Z,{ariaLabel:"3 dot menu for actions to apply to a member",icon:Ns().o,...e})})}function gl(e){const{userId:t,onRemoveMember:a}=e,s=(0,y().O7)();return(0,b().VK)((()=>new(I().U6)(s,{table:j().KJ,id:t})),[t,s])?(0,i.jsx)(sa,{userId:t,rightContent:(0,i.jsx)(ml,{userId:t,onRemoveMember:a})}):null}const pl={id:"name",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.nameColumn.header",defaultMessage:"Name"}),renderCell:e=>{if(e.type===Vt().a.Loading)return(0,i.jsx)(Ht().HD,{includeIcon:!0,containerStyles:{width:140}});const{onRemoveMember:t}=e;return e.type===Vt().a.SingleLegalHoldMemberUser?(0,i.jsx)(gl,{onRemoveMember:t,userId:e.organizationMember.userId}):e.type===Vt().a.SingleLegalHoldMemberGuest?(0,i.jsx)(gl,{onRemoveMember:t,userId:e.organizationGuest.userId}):e.type===Vt().a.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(gl,{onRemoveMember:t,userId:e.deletedMemberId}):(0,kt().t1)(e)},widthData:{widthPercent:26,minWidth:275,maxWidth:275},sortable:!1},hl={id:"role",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):e.type===Vt().a.SingleLegalHoldMemberUser?(0,i.jsx)(qi,{organizationMember:e.organizationMember}):e.type===Vt().a.SingleLegalHoldMemberGuest?(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.guestRole",defaultMessage:"Guest"})}):e.type===Vt().a.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.deletedUserRole",defaultMessage:"Deleted user"})}):(0,kt().t1)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},fl={id:"workspaces",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):e.type===Vt().a.SingleLegalHoldMemberUser?(0,i.jsx)(Ei,{organizationMember:e.organizationMember}):e.type===Vt().a.SingleLegalHoldMemberGuest?(0,i.jsx)(Kn,{organizationGuest:e.organizationGuest}):e.type===Vt().a.SingleLegalHoldMemberDeletedUser?null:(0,kt().t1)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},xl={id:"email",headerTitle:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:240}}):e.type===Vt().a.SingleLegalHoldMemberUser?(0,i.jsx)(Fs().hr,{userId:e.organizationMember.userId}):e.type===Vt().a.SingleLegalHoldMemberGuest?(0,i.jsx)(Fs().hr,{userId:e.organizationGuest.userId}):e.type===Vt().a.SingleLegalHoldMemberDeletedUser?null:(0,kt().t1)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1};function vl(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,selectedIds:r,onSelectAll:l,onUnselectAll:d,onSelectRow:c,legalHoldId:u,onRemoveMembersSuccess:m,onRemoveLastMembersSuccess:g}=e;const[p,h]=(0,s.useState)(),[f,v]=(0,s.useState)(),y=s.useMemo((()=>[pl,hl,fl,xl]),[]),b=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:y,theme:e,containerMarginTop:0})),[y]),j=t.map((e=>"user"===e.type||"guest"===e.type?e.userId:"deleted"===e.type?e.deletedMemberId:(0,kt().t1)(e))),w=s.useCallback((e=>{h(e),j.includes(e)&&1===j.length?v(ul.ReleaseLegalHold):v(ul.RemoveFromLegalHold)}),[h,v,j]),M=t.map((e=>{const t={onRemoveMember:w};return"user"===e.type?{id:e.userId,organizationMember:e,isClickable:!0,type:Vt().a.SingleLegalHoldMemberUser,...t}:"guest"===e.type?{id:e.userId,organizationGuest:e,isClickable:!0,type:Vt().a.SingleLegalHoldMemberGuest,...t}:"deleted"===e.type?{id:e.deletedMemberId,deletedMemberId:e.deletedMemberId,type:Vt().a.SingleLegalHoldMemberDeletedUser,isClickable:!0,...t}:(0,kt().t1)(e)})),C=a?(0,Vt().s)():M.slice(Ge().B*(n-1),Ge().B*n),_=M.length>Ge().B*n,T=1!==n,k={header:{isDisabled:a,isSelected:r.length>0&&r.length===t.length,onClick:()=>{r.length===t.length?d():l()}},row:{getDisabledState:e=>a,getSelectedState:e=>e.type===Vt().a.SingleLegalHoldMemberUser?r.includes(e.organizationMember.userId):e.type===Vt().a.SingleLegalHoldMemberGuest?r.includes(e.organizationGuest.userId):e.type===Vt().a.SingleLegalHoldMemberDeletedUser&&r.includes(e.deletedMemberId),onClick:e=>{e.type===Vt().a.SingleLegalHoldMemberUser&&c(e.organizationMember.userId),e.type===Vt().a.SingleLegalHoldMemberGuest&&c(e.organizationGuest.userId),e.type===Vt().a.SingleLegalHoldMemberDeletedUser&&c(e.deletedMemberId)}}},I=s.useCallback((()=>{v(void 0),h(void 0)}),[v,h]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{columnRenderInfo:y,hideHeaderRowPadding:!0,rows:C,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{title:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),styles:b,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{_&&o(n+1)},onLoadPrevious:()=>{T&&o(n-1)},hasNextPage:_,hasPrevPage:T,currentPage:n},setStickyHeaderRow:!0,multiselect:k,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),f===ul.RemoveFromLegalHold&&p?(0,i.jsx)(cl,{userIdsToRemove:[p],allUserIds:j,legalHoldId:u,onDismiss:I,onSuccess:m}):null,f===ul.ReleaseLegalHold&&p?(0,i.jsx)(dl,{userIdsToRemove:[p],legalHoldId:u,onDismiss:I,onSuccess:g}):null]})}const yl=(0,x().vU)({members:{id:"settingsConsole.singleLegalHoldMembersTab.title",defaultMessage:"Hold Members"},membersLabel:{id:"settingsConsole.singleLegalHoldMembersTab.label",defaultMessage:"View members currently on hold."},placeholder:{id:"settingsConsole.singleLegalHoldMembersTab.search.placeholder",defaultMessage:"Search by member name or email."}}),bl=(0,x().vU)({name:{id:"settingsConsole.singleLegalHoldMembersTab.sort.name",defaultMessage:"Name"},role:{id:"settingsConsole.singleLegalHoldMembersTab.sort.role",defaultMessage:"Highest role"}}),Sl=[{id:"actor",name:T().Z.formatMessage(bl.name),type:"title"},{id:"role",name:T().Z.formatMessage(bl.role),type:"text"}],jl=[...Pi,{key:"guest",value:"guest",title:(0,i.jsx)(x()._H,{id:"legalHoldsMembers.table.filters.userRole.guest",defaultMessage:"Guest"})}];var wl=function(e){return e.AddMember="add-member",e.RemoveMember="remove-member",e.RemoveLastMembers="remove-last-members",e}(wl||{});function Ml(e){let{legalHoldId:t,organizationId:a,setSelectedTab:n,refetchLegalHold:o}=e;const r=(0,x().YB)(),[l,d]=s.useState(),[c,u]=s.useState([]),[m,g]=s.useState([]),[p,h]=s.useState(void 0),[f,v]=s.useState(!1),[b,S]=s.useState(),[j,w]=s.useState(),[C,_]=s.useState(1),{members:T,guests:k,deletedMembersIds:I,allIdsInLegalHold:P,loading:D,refetch:z}=function(e){const t=(0,y().O7)(),{organizationId:a,legalHoldId:n,selectedSpaceIds:i,selectedUserRoles:o,query:r,sort:l}=e,{members:d,loading:c,refetch:u}=Nr({legalHoldId:n}),m=d.join(","),g=i.join(","),p=o.join(","),h=function(e){if(e)return"actor"===e.propertyId?{columnName:"actor",direction:e.direction}:"role"===e.propertyId?{columnName:"role",direction:e.direction}:void 0}(l),f=null==h?void 0:h.columnName,x=null==h?void 0:h.direction,[{status:v,value:b}]=(0,Ke().r5)((async()=>{if(0===m.length||"guest"===p)return{members:[]};const e=m.split(","),s=g.length>0?g.split(","):void 0,n=p.length>0?p.split(","):void 0,i=null==n?void 0:n.filter((e=>"guest"!==e)),o=await M().callApi({eventName:"getMembersInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s,roles:i},limit:e.length,query:r,sort:f&&x?{columnName:f,direction:x}:void 0}});if("success"===o.type)return{members:o.data.members};if("failed"===o.type)throw o.error;return(0,kt().t1)(o)}),[t,a,m,g,p,r,f,x]),[{status:S,value:j}]=(0,Ke().r5)((async()=>{const e=m.split(","),s=g.length>0?g.split(","):void 0,n=await M().callApi({eventName:"getGuestsInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s},limit:e.length,query:r}});if("success"===n.type)return n.data;if("failed"===n.type)throw n.error;return(0,kt().t1)(n)}),[t,a,m,g,r]),w=(0,s.useMemo)((()=>(null==b?void 0:b.members)??[]),[b]),C=(0,s.useMemo)((()=>new Set(w.map((e=>e.userId)))),[w]),_=(0,s.useMemo)((()=>(null==j?void 0:j.guests.map((e=>({...e,lastActiveTime:(null==j?void 0:j.guestIdToLastActive[e.userId])??void 0}))).filter((e=>!C.has(e.userId))))??[]),[j,C]),T=0===i.length&&0===o.length&&!r,k=(0,s.useMemo)((()=>T?d.filter((e=>!w.some((t=>t.userId===e))&&!_.some((t=>t.userId===e)))):[]),[d,w,_,T]);return{loading:c||"pending"===v||"pending"===S,members:w,guests:_,deletedMembersIds:k,allIdsInLegalHold:d,refetch:u}}({organizationId:a,legalHoldId:t,selectedSpaceIds:m,selectedUserRoles:c,query:p,sort:null==j?void 0:j[0]}),A=En({spaceStores:(0,Js()._)()}),N=(0,qn().V)(),R=(0,s.useMemo)((()=>[...T.map((e=>({...e,type:"user"}))),...k.map((e=>({...e,type:"guest"}))),...I.map((e=>({type:"deleted",deletedMemberId:e})))]),[T,k,I]),{selectedIds:B,handleToggleId:L,handleSelectAllIds:O,handleUnselectAllIds:V}=gs({allPossibleIds:P}),U=s.useCallback((async()=>{_(1),w(void 0),S(void 0),h(void 0),u([]),g([]),await z()}),[z]),E=s.useCallback((async()=>{await o(),n("general")}),[n,o]);return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{title:r.formatMessage(yl.members),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:r.formatMessage(yl.membersLabel)})}),(0,i.jsxs)("div",{style:N.tableHeader,children:[(0,i.jsxs)("div",{style:N.leftContent,children:[(0,i.jsxs)(ws,{isOpen:B.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(Cs,{itemsSelectedCount:B.length}),onClick:V}),(0,i.jsx)(Ms,{icon:ls,title:(0,i.jsx)(x()._H,{id:"singleLegalHoldMembersTab.multiselect.removeFromLegalHold",defaultMessage:"Remove from legal hold"}),onClick:()=>{B.length===P.length?d(wl.RemoveLastMembers):d(wl.RemoveMember)}})]}),(0,i.jsx)(ya().i,{preventMultipleSorts:!0,sortProperties:Sl,isMenuOpen:f,setIsMenuOpen:v,onApply:e=>{v(!1),w(e),S(void 0),_(1)},currentSorts:b??j??[]}),(0,i.jsx)(Ii,{setUserRoles:e=>{u(e),_(1)},selectedUserRoles:c,roles:jl}),(0,i.jsx)(Hs,{selectedSpaceIds:m,setSelectedSpaceIds:e=>{g(e),_(1)},spaceData:A})]}),(0,i.jsxs)("div",{style:N.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:j,openSortPillMenu:e=>{e&&S([{propertyId:e,direction:"ascending"}]),v(!0)},sortProperties:Sl}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:p,setQueryFilter:e=>{h(e),_(1)},placeholderText:r.formatMessage(yl.placeholder)}),(0,i.jsx)(q().Z,{onClick:()=>{d(wl.AddMember)},disabled:D,children:(0,i.jsx)(x()._H,{id:"legalHoldsMembers.button.addMember",defaultMessage:"Add member"})})]})]}),(0,i.jsx)(vl,{data:R,loading:D,currentPage:C,setCurrentPage:_,selectedIds:B,onSelectAll:O,onUnselectAll:V,onSelectRow:L,legalHoldId:t,onRemoveMembersSuccess:U,onRemoveLastMembersSuccess:E}),l===wl.AddMember?(0,i.jsx)(ll,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,organizationId:a,userIdsAlreadyInLegalHold:P}):null,l===wl.RemoveMember?(0,i.jsx)(cl,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,userIdsToRemove:B,allUserIds:P}):null,l===wl.RemoveLastMembers?(0,i.jsx)(dl,{onDismiss:()=>d(void 0),onSuccess:E,legalHoldId:t,userIdsToRemove:B}):null]})}var Cl=()=>a(456681),_l=()=>a(820717),Tl=()=>a(356641);function kl(e){let{iconFunction:t,label:a,value:s,disabled:n}=e;const o=(0,x().YB)(),r=(0,S().yK)((e=>({label:{color:e.mediumTextColor,minWidth:140,display:"flex",flexDirection:"row",gap:6,opacity:n?.3:1,alignItems:"center"},value:{color:e.regularTextColor,overflow:"hidden",opacity:n?.3:1},icon:{width:16,height:16}})),[n]);return(0,i.jsxs)(ea().X2,{gap:4,alignItems:"center",height:"100%",children:[(0,i.jsxs)("div",{style:r.label,children:[t(r.icon),(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",children:o.formatMessage(a)})]}),(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",style:r.value,children:s})]})}function Il(e){let{startDate:t,endDate:a}=e;return void 0===t?null:(0,i.jsx)(x()._H,{id:"legalHold.general.holdRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:(0,i.jsx)(x().Ji,{value:t,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}),endDate:a?(0,i.jsx)(x().Ji,{value:a,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(x()._H,{id:"legalHold.general.holdRange.ongoing",defaultMessage:"Ongoing"})}})}var Hl=()=>a(501325);function Pl(e,t){if(t)return{pointer:{table:Hl().Mq,id:e},icon:t}}function Dl(e){let{legalHoldId:t,legalHoldName:a,legalHoldIcon:s,size:n=er().Oz,emojiSize:o=er().Dt}=e;const r=Pl(t,s);return(0,i.jsx)(B().Z,{size:n,emojiSize:o,disabled:!0,icon:r,isEmptyPage:!1,title:a,isLarge:!0,isRaw:!1})}function zl(e){let{userIds:t,totalCount:a}=e;const s=(0,y().O7)(),n=(0,b().VK)((()=>t.map((e=>new(I().U6)(s,{table:j().KJ,id:e})))),[t,s]);return(0,i.jsx)(Fo().G,{userStores:n,useSecondaryColorTitle:!0,totalCount:a,useIconsOnly:!0})}function Al(e){let t,a,s,{status:n}=e;switch(n){case"active":t=(0,i.jsx)(x()._H,{id:"legalHoldsTable.status.active",defaultMessage:"Active"}),a="yellow",s=al().FN.light.yellow[100];break;case"released":t=(0,i.jsx)(x()._H,{id:"legalHoldsTable.status.released",defaultMessage:"Released"}),s=al().FN.light.gray[100],a="gray";break;default:(0,kt().t1)(n)}return(0,i.jsx)(ft().Z,{format:it().lo.Medium,value:t,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:s,showColoredDot:a})}var Nl=()=>a(845682);function Rl(e){let{workspaceIds:t,totalCount:a}=e;const n=(0,y().O7)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(D().V),r=(0,b().VK)((()=>t.map((e=>new(Nl().H)(n,{table:qt().bx,id:e},{inMemoryRecordCache:o})))),[t,n,o]);return(0,i.jsx)(X().ms,{spaceStores:r,totalCount:a,showTooltip:!0,isLoading:!1})}function Bl(e){let{onDismiss:t,onSubmit:a}=e;const n=(0,x().YB)(),[o,r]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),c=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,Xe().L)(c.icon),title:n.formatMessage(Ll.title),byline:n.formatMessage(Ll.byline)}),footer:(0,i.jsx)(W().mz,{primaryText:n.formatMessage(Ll.buttonText),primaryAction:async()=>{r(!0),await async function(){await a(),t()}(),r(!1)},primaryDisabled:o||!l,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:t,isDarkRed:!0}),children:(0,i.jsx)("div",{style:c.container,children:(0,i.jsxs)("div",{style:c.confirmationContainer,children:[(0,i.jsx)(tt().Z,{checked:l,size:14,checkSize:10,onClick:()=>d(!l)}),(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:n.formatMessage(Ll.confirmationText)})]})})})})}const Ll=(0,x().vU)({title:{id:"orgConsole.legalHolds.modal.releaseLegalHold.title",defaultMessage:"Are you sure you want to release this hold?"},byline:{id:"orgConsole.legalHolds.modal.releaseLegalHold.byline",defaultMessage:"This action is final and any members and pages deleted after release will be permanently deleted."},confirmationText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"},buttonText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.buttonText",defaultMessage:"Release legal hold"}});function Ol(e){let{onClick:t}=e;return(0,i.jsx)(Ea().F,{color:"uiRed",onClick:t,children:(0,i.jsx)(x()._H,{id:"legalHold.general.release.button",defaultMessage:"Release legal hold"})})}const Vl=(0,x().vU)({holdRangeLabel:{id:"legalHold.general.details.holdRange",defaultMessage:"Hold from"},holdRangeLabelViewedFrom:{id:"legalHold.general.details.holdRange.viewedFrom",defaultMessage:"Viewed from"},holdRangeLabelEditedFrom:{id:"legalHold.general.details.holdRange.editedFrom",defaultMessage:"Edited from"},holdRangeLabelCreatedFrom:{id:"legalHold.general.details.holdRange.createdFrom",defaultMessage:"Created from"},createdByLabel:{id:"legalHold.general.details.createdBy",defaultMessage:"Created by"},workspacesLabel:{id:"legalHold.general.details.workspaces",defaultMessage:"Workspaces"},createdAtLabel:{id:"legalHold.general.details.createdAt",defaultMessage:"Created at"},manageLegalHoldTitle:{id:"legalHold.general.manage.title",defaultMessage:"Manage legal hold"},releaseLegalHoldLabel:{id:"legalHold.general.release.label",defaultMessage:"Release legal hold"},releaseLegalHoldDescription:{id:"legalHold.general.release.description",defaultMessage:"By releasing this legal hold, pages that are past their retention period will be deleted. This action can not be undone."},disabledTooltipText:{id:"legalHold.general.edit.disabledTooltipText",defaultMessage:"This legal hold has been released and cannot be edited."}}),Ul={"page.viewed":(0,i.jsx)(x()._H,{id:"legalHold.general.pages.tooltip.viewed",defaultMessage:"The associated page count will change over time for ongoing legal holds as users view more pages"}),"page.edited":(0,i.jsx)(x()._H,{id:"legalHold.general.pages.tooltip.edited",defaultMessage:"The associated page count will change over time for ongoing legal holds as users edit more pages"}),"page.created":(0,i.jsx)(x()._H,{id:"legalHold.general.pages.tooltip.created",defaultMessage:"The associated page count will change over time for ongoing legal holds as users create more pages"})};function ql(e){let{createdBy:t}=e;const a=(0,y().O7)(),s=(0,b().VK)((()=>{if(t)return new(ct().U)(a,{table:j().KJ,id:t})}),[t,a]);return s?(0,i.jsx)(Fo().G,{userStores:[s]}):null}function El(e){let{legalHoldId:t,setSelectedTab:a,legalHold:n,loading:o,refetchLegalHold:r}=e;const l=(0,x().YB)(),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[g,p]=(0,s.useState)(!1),{updateLegalHold:f}=tl(),{name:v,description:y,icon:b}=n??{},j=(0,S().yK)((e=>({icon:{height:16,width:16,fill:e.mediumTextColor}})),[]);(0,s.useEffect)((()=>{v&&c(v),y&&m(y)}),[v,y]);const{longTallShimmer:w,longShimmer:M,shortShimmer:C}=(0,ne().o)(),_=Pl(t,null==n?void 0:n.icon),T=(0,s.useCallback)((e=>{m(e||"")}),[m]),k=(0,s.useCallback)((e=>{c(e||"")}),[c]),I=(0,s.useCallback)((()=>{c(v||""),m(y||"")}),[v,y]),P=(0,s.useCallback)((async e=>{const a=await f({legalHoldId:t,icon:e});a.icon&&a.icon!==b&&await r()}),[t,f,r,b]),D=(0,s.useCallback)((()=>{p(!0)}),[]),z=(0,s.useCallback)((async()=>{await f({legalHoldId:t,status:"released"}),await r()}),[t,f,r]),A=(0,s.useMemo)((()=>{var e,t;return null!=n&&n.userInteractionType?null!=n&&null!==(e=n.userInteractionType)&&void 0!==e&&e.includes("page.viewed")?Vl.holdRangeLabelViewedFrom:null!=n&&null!==(t=n.userInteractionType)&&void 0!==t&&t.includes("page.edited")?Vl.holdRangeLabelEditedFrom:Vl.holdRangeLabelCreatedFrom:Vl.holdRangeLabel}),[null==n?void 0:n.userInteractionType]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(J,{title:(0,i.jsx)(x()._H,{id:"legalHold.general.edit.title",defaultMessage:"Edit legal hold details"}),byline:(0,i.jsx)(x()._H,{id:"legalHold.general.edit.byline",defaultMessage:"Edit this legal hold's name below. Changes will take effect immediately upon saving."}),icon:_l().v,localIconWithPointer:_,onSave:async()=>{const e=await f({legalHoldId:t,name:""===d?void 0:d,description:""===u?void 0:u});e.name&&e.name!==d&&c(e.name),e.description&&e.description!==u&&m(e.description),await r()},onCancel:I,onNameChange:k,onIconChange:P,entityName:(null==n?void 0:n.name)||"",disabled:"released"===(null==n?void 0:n.status),disabledTooltipText:l.formatMessage(Vl.disabledTooltipText),entityDescription:(0,i.jsxs)(ea().sg,{marginTop:2,alignItems:"flex-start",gap:12,children:[o?(0,i.jsx)(se().Z,{style:C}):n&&(0,i.jsx)(Al,{status:n.status}),o?(0,i.jsx)(se().Z,{style:M}):n&&(0,i.jsx)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n.description})]}),onDescriptionChange:T,entityDescriptionText:null==n?void 0:n.description}),(0,i.jsxs)(ea().sg,{gap:40,children:[(0,i.jsxs)(Tl().rj,{gap:12,children:[(0,i.jsx)(Tl().r8,{row:1,col:1,children:(0,i.jsx)(kl,{iconFunction:vi,label:A,value:(0,i.jsx)(Il,{startDate:null==n?void 0:n.startDate,endDate:null==n?void 0:n.endDate})},"holdRange")}),(0,i.jsx)(Tl().r8,{row:1,col:2,children:(0,i.jsx)(kl,{iconFunction:_l().v,label:Vl.createdByLabel,value:(0,i.jsx)(ql,{createdBy:null==n?void 0:n.createdBy})},"createdBy")}),(0,i.jsx)(Tl().r8,{row:2,col:1,children:(0,i.jsx)(kl,{iconFunction:h().K,label:Vl.workspacesLabel,value:(0,i.jsx)(Rl,{workspaceIds:(null==n?void 0:n.workspaces.ids)||[],totalCount:(null==n?void 0:n.workspaces.total)||0})},"workspaces")}),(0,i.jsx)(Tl().r8,{row:2,col:2,children:(0,i.jsx)(kl,{iconFunction:vi,label:Vl.createdAtLabel,value:(0,i.jsx)(x().Ji,{value:null==n?void 0:n.createdTime,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})},"createdAt")})]}),(0,i.jsxs)(ea().X2,{gap:12,children:[(0,i.jsx)(te().Z,{isLoading:o,headerText:(0,i.jsx)(x()._H,{id:"legalHold.general.members.title",defaultMessage:"Members on hold"}),mainText:n?(0,i.jsx)(x()._H,{id:"legalHold.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:n.users.total}}):(0,i.jsx)(se().Z,{style:w}),bottom:(0,i.jsx)(zl,{userIds:(null==n?void 0:n.users.ids)||[],totalCount:(null==n?void 0:n.users.total)||0}),onClick:()=>{a("members")}}),(0,i.jsx)(te().Z,{disabled:"active"!==(null==n?void 0:n.status),isLoading:o,headerText:(0,i.jsxs)(ea().X2,{gap:4,children:[(0,i.jsx)(x()._H,{id:"legalHold.general.pages.title",defaultMessage:"Associated pages"}),"active"===(null==n?void 0:n.status)&&(0,i.jsx)(Z().Z,{style:{width:238},textWrap:!0,renderTooltip:()=>null!=n&&n.userInteractionType?Ul[n.userInteractionType[0]]:null,render:e=>(0,i.jsx)("div",{...e,children:(0,Cl().m)(j.icon)})})]}),mainText:n?(0,i.jsx)(x()._H,{id:"legalHold.general.pages.count",defaultMessage:"{pageCount, plural, one {{pageCount} page} other {{pageCount} pages}}",values:{pageCount:n.pages.total}}):(0,i.jsx)(se().Z,{style:w}),bottom:(0,i.jsx)(Zl,{pages:(null==n?void 0:n.pages.ids)||[],totalCount:(null==n?void 0:n.pages.total)||0,isLoading:o}),onClick:()=>{a("browse_content")}})]}),"active"===(null==n?void 0:n.status)&&(0,i.jsxs)("div",{children:[(0,i.jsx)(Va().Z,{size:1}),(0,i.jsx)(ae().Q,{title:l.formatMessage(Vl.manageLegalHoldTitle),content:(0,i.jsx)(be().N,{title:l.formatMessage(Vl.releaseLegalHoldLabel),byline:l.formatMessage(Vl.releaseLegalHoldDescription),item:(0,i.jsx)(Ol,{onClick:D})})})]})]}),g&&(0,i.jsx)(Bl,{onDismiss:()=>p(!1),onSubmit:z})]})]})}function Zl(e){let{pages:t,totalCount:a,isLoading:n}=e;const o=(0,y().O7)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(D().V),l=(0,b().VK)((()=>t.map((e=>new(Dr().G)(o,{table:Kt().iU,id:e},{inMemoryRecordCache:r})))),[t,o,r]);return(0,i.jsx)(X().sv,{blockStores:l,totalCount:a,showTooltip:!0,isLoading:n})}var Fl=()=>a(370329),Wl=()=>a(489434);function Kl(e){let{organizationStore:t,userStore:a,groupStore:n,onDismiss:o,onCloseOuterModal:r}=e;const l=(0,y().O7)(),d=(0,x().YB)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(D().V),{userData:u}=Qs({userStore:a,organizationStore:t}),m=(0,b().VK)((()=>{var e;const t=n.getSpaceId();return t?null===(e=u.userSpaceAccessMap.get(t))||void 0===e?void 0:e.role:void 0}),[u,n]),g=(0,b().VK)((()=>{var e;return null===(e=n.getSpaceStore())||void 0===e?void 0:e.getName()}),[n]),p=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:480}})),[]);const[h,f]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,Za().H)(p.icon),title:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.modal.title",defaultMessage:"Are you sure you want to delete this group?"}),byline:(0,i.jsx)("div",{style:p.container,children:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.modal.byline",defaultMessage:"Deleting this group will remove member access to pages and teamspaces. Any pages that are private to this group will be transferred to you."})})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.modal.primaryAction",defaultMessage:"Delete group"}),primaryAction:async()=>{f(!0),await async function(){const e=n.getSpaceId(),a=n.getGroupId();if(!e||!a)return;const s=await M().callApi({eventName:"deleteGroupInOrganization",environment:l,data:{organizationId:t.id,spaceId:e,groupId:a}});"success"===s.type?(c({data:s.data}),o(),r()):C().UW((0,_().wf)(d,s))}(),f(!1)},primaryDisabled:h,secondaryText:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0}),children:"editor"!==m?(0,i.jsx)(Wl().j,{display:"inline",tint:"gray",iconGroup:Fl().h,label:(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",children:g?(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarning",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join the <b>{workspaceName}</b> workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e}),workspaceName:g}}):(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarningNoName",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join this group's workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e})}})})}):null})})}function Gl(e){let{organizationId:t,membersState:a,teamsState:n,groupStore:o,setSelectedTab:r,onCloseModal:l}=e;const d=(0,y().O7)(),c=(0,x().YB)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(D().V),m=(0,S().yK)((e=>({tilesContainer:{display:"flex",gap:12},dotSeparator:{margin:"0 4px"},divider:{color:e.stroke.secondary}})),[]),[g,p]=(0,s.useState)(""),h=(0,b().VK)((()=>o.getName()),[o]),f=(0,b().VK)((()=>o.getIcon()),[o]);return(0,s.useEffect)((()=>{p(h||"")}),[h]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(J,{title:(0,i.jsx)(x()._H,{id:"organization.general.organization.group.title",defaultMessage:"Edit group details"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.organization.group.byline",defaultMessage:"Edit this group's name below. Changes will take effect immediately upon saving."}),icon:Tt().K,onSave:async function(){if(g===h)return;const e=o.getSpaceId(),a=o.getGroupId();if(!e||!a)return;const s=await M().callApi({eventName:"updateGroupInOrganization",environment:d,data:{organizationId:t,spaceId:e,groupId:a,name:g}});"success"===s.type?u(s):C().UW((0,_().wf)(c,s))},onCancel:function(){p(h||"")},onIconChange:async function(e){const a=o.getSpaceId(),s=o.getGroupId();if(!a||!s)return;const n=await M().callApi({eventName:"updateGroupInOrganization",environment:d,data:{organizationId:t,spaceId:a,groupId:s,icon:e}});"success"===n.type?u(n):C().UW((0,_().wf)(c,n))},onNameChange:e=>p(e||""),localIconWithPointer:f?{pointer:o.pointer,icon:f}:void 0,entityName:h||"",entityDescription:(0,i.jsxs)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(re().To,{memberCount:a.members.length}),(0,i.jsx)(P().Z,{style:m.dotSeparator}),(0,i.jsx)(re().lR,{teamCount:n.teamStores.length})]})}),(0,i.jsxs)("div",{style:m.tilesContainer,children:[(0,i.jsx)(oe,{memberCount:a.members.length,sampleMemberUserStores:a.members.slice(0,5),onClick:()=>r("members"),isLoading:a.loading}),(0,i.jsx)(te().Z,{isLoading:n.loading,headerText:(0,i.jsx)(x()._H,{id:"organization.group.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(x()._H,{id:"organization.group.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:n.teamStores.length}}),bottom:(0,i.jsx)(X().M2,{teamStores:n.teamStores,isLoading:n.loading}),onClick:()=>r("teamspaces")})]}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.title",defaultMessage:"Manage group"}),content:(0,i.jsxs)(xe().T,{children:[(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.createTeamspace.title",defaultMessage:"Create teamspace"}),byline:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.createTeamspace.byline",defaultMessage:"Create a new teamspace using the information and members from this group."}),item:(0,i.jsx)(Yl,{organizationId:t,groupStore:o})}),(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.title",defaultMessage:"Delete group"}),byline:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.byline",defaultMessage:"Remove this group from the workspace permanently."}),item:(0,i.jsx)($l,{organizationId:t,groupStore:o,onCloseModal:l})})]})})]})]})}function Yl(e){const{organizationId:t,groupStore:a}=e,[n,o]=(0,s.useState)(!1),r=(0,eo().k)({organizationId:t}),l=(0,b().VK)((()=>{const e=a.getGroupId();return e?{type:"owner",entity_type:"group",group_id:e}:void 0}),[a]),d=(0,b().VK)((()=>a.getSpaceStore()),[a]);return r&&d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K().mk,{onClick:()=>{xr().default.setState({...xr().default.state,name:a.getName()||""}),o(!0)},children:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.createTeamspace.button",defaultMessage:"Create teamspace"})}),n?(0,i.jsx)(yr,{organizationId:t,spaceStore:d,onDismiss:()=>o(!1),owner:l}):null]}):null}function $l(e){const{organizationId:t,groupStore:a,onCloseModal:n}=e,o=(0,y().O7)(),[r,l]=(0,s.useState)(!1),d=(0,eo().k)({organizationId:t}),c=(0,b().VK)((()=>{if(pe().default.state.currentUserStore)return new(I().U6)(o,{table:j().KJ,id:pe().default.state.currentUserStore.id})}),[o]);return d&&c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ea().F,{color:"uiRed",onClick:()=>l(!0),children:(0,i.jsx)(x()._H,{id:"organization.group.settings.manageGroup.delete.button",defaultMessage:"Delete group"})}),r?(0,i.jsx)(Kl,{organizationStore:d,userStore:c,groupStore:a,onCloseOuterModal:n,onDismiss:()=>{l(!1)}}):null]}):null}function Jl(e){let{organizationId:t,onDismiss:a,groupStore:n}=e;const o=(0,y().O7)(),r=(0,x().YB)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(D().V),d=(0,eo().k)({organizationId:t}),c=(0,b().VK)((()=>n.getSpaceId()),[n]),[u,m]=(0,s.useState)(!1),g=(0,b().VK)((()=>new vs),[]),p=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,width:540,overflowY:"auto",paddingBottom:24}})),[]),{inviteTargets:h}=(0,b().VK)((()=>({inviteTargets:g.state.inviteTargets})),[g]),f=(0,b().VK)((()=>{const e=g.state.inviteTargets.length>0;return!u&&e}),[g,u]);async function v(){m(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s||!f)return void m(!1);const i=h.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(kt().$K),d=await M().callApi({eventName:"updateGroupInOrganization",environment:o,data:{organizationId:t,spaceId:e,groupId:s,addMembers:i}});"success"===d.type?(l({data:d.data}),a(),m(!1)):C().UW((0,_().wf)(r,d))}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:200}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(V().sR,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(W().xB,{icon:(0,rs().l)(p.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToGroup.title",defaultMessage:"Add members to groups"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToGroup.byline.space",defaultMessage:"Add the following users to this group."})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToGroup.button.add",defaultMessage:"Add members"}),primaryAction:v,primaryDisabled:!f,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.addUsersToGroup.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:p.content,children:(0,i.jsx)(Hn().Z,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:d,permissionsInviteStore:g,performSearchRequest:zn({organizationId:t,spaceId:c})})})})}})}function Ql(e){let{organizationId:t,onDismiss:a,groupStore:n,userIds:o}=e;const r=(0,y().O7)(),l=(0,x().YB)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(D().V),[c,u]=(0,s.useState)(!1),m=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]);async function g(){u(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void u(!1);const i=await M().callApi({eventName:"updateGroupInOrganization",environment:r,data:{organizationId:t,spaceId:e,groupId:s,removeMembers:o}});"success"===i.type?(d({data:i.data}),a(),u(!1)):C().UW((0,_().wf)(l,i))}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:ls(m.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToGroupModal.title",defaultMessage:"Remove members from group"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToGroupModal.byline",defaultMessage:"Confirm that you want to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from this group, revoking access to all content that this group owns.",values:{count:o.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:o.length}}),primaryAction:g,primaryDisabled:c,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:m.content,children:(0,i.jsx)(wn,{userIds:o})})})})}const Xl=(0,x().vU)({name:{id:"organization.group.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.group.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.group.members.roleColumn.header",defaultMessage:"Role"}}),ed={id:"name",headerTitle:(0,i.jsx)(x()._H,{...Xl.name}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(sa,{userId:e.userId}),widthData:{widthPercent:33,minWidth:100},sortable:!1},td={id:"email",headerTitle:(0,i.jsx)(x()._H,{...Xl.email}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:200}}):(0,i.jsx)(Fs().hr,{userId:e.userId,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1},ad={id:"role",headerTitle:(0,i.jsx)(x()._H,{...Xl.role}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e){case"owner":t=(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(x()._H,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.role),widthData:{widthPercent:33,minWidth:100},sortable:!1},sd=[{id:ed.id,name:T().Z.formatMessage(Xl.name),type:"title"},{id:td.id,name:T().Z.formatMessage(Xl.email),type:"title"},{id:ad.id,name:T().Z.formatMessage(Xl.role),type:"title"}],nd=[ed,td,ad];var id=function(e){return e.AddToGroup="add-to-group",e.RemoveFromGroup="remove-from-group",e}(id||{});function od(e){let{organizationId:t,groupStore:a,onCloseModal:n,membersState:o}=e;const{organizationMemberEmailDomains:r}=(0,s.useContext)(z().g),l=(0,x().YB)(),d=(0,qn().V)(),c=(0,S().yK)((e=>{const t=(0,It().bE)({columnRenderInfo:nd,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[]),u=(0,b().VK)((()=>o.members.map((e=>({type:Vt().a.OrganizationGroupMember,id:e.id,name:e.getDisplayName(l),email:e.getEmail(),role:Jo(e.getRole()),userId:e.id,isClickable:!0})))),[o,l]),[m,g]=(0,s.useState)(),[p,h]=(0,s.useState)({}),[f,v]=(0,s.useState)(),[y,j]=(0,s.useState)(!1),[w,M]=(0,s.useState)(),C=w??f??[],_=(0,s.useMemo)((()=>{if(!u)return[];let e=u;return p.query&&(e=(0,rt().ZP)(p.query,e,(e=>e.name))),p.emailDomains&&p.emailDomains.length>0&&(e=e.filter((e=>{var t;const a=e.email?(0,ot().Gd)(e.email):void 0;return!!a&&(null===(t=p.emailDomains)||void 0===t?void 0:t.includes(a))}))),p.roles&&p.roles.length>0&&(e=e.filter((e=>{var t;const a=e.role;return!!a&&(null===(t=p.roles)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:ad.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===td.id?"email":t===ad.id?Qo:t===ed.id?"name":Qo})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,kt().t1)(t)}));return(0,We().Xo)(t,n,i)}({rows:e,appliedSorts:f})}),[u,p.roles,p.emailDomains,p.query,f]),T=Math.max(1,Math.ceil(_.length/Ge().B)),[k,I]=(0,s.useState)(0),P=_.slice(k*Ge().B,(k+1)*Ge().B),D=Ge().B*(k+1)<_.length,A=k>0;const{selectedRows:N,handleToggleRow:R,handleSelectAllRows:B,handleUnselectAllRows:L}=ps({allPossibleRows:P});return!o.loading&&o.error?(0,i.jsx)(Ot,{error:o.error}):(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{hideDivider:!0,title:(0,i.jsx)(x()._H,{id:"organization.groups.modal.members.title",defaultMessage:"Members"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organization.groups.modal.members.byline",defaultMessage:"Add and remove members from this group to manage access across this workspace."})})}),(0,i.jsxs)("div",{style:d.tableHeader,children:[(0,i.jsxs)("div",{style:d.leftContent,children:[(0,i.jsxs)(ws,{isOpen:N.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(x()._H,{id:"organization.group.membersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:N.length}}),onClick:L}),(0,i.jsx)(Ms,{icon:ls,title:(0,i.jsx)(x()._H,{id:"organization.group.membersTable.multiselect.remove",defaultMessage:"Remove from group"}),onClick:()=>g(id.RemoveFromGroup)})]}),(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{sortProperties:sd,isMenuOpen:y,setIsMenuOpen:j,onApply:e=>{j(!1),v(e),M(void 0)},currentSorts:C})}),C.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:r,selectedEmailDomains:p.emailDomains||[],setSelectedEmailDomains:e=>{h((t=>({...t,emailDomains:e})))}}),(0,i.jsx)(Ii,{setUserRoles:e=>h((t=>({...t,roles:e}))),selectedUserRoles:p.roles||[],roles:Hi})]}),(0,i.jsxs)("div",{style:d.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:f,openSortPillMenu:e=>{e&&M([{propertyId:e,direction:"ascending"}]),j(!0)},sortProperties:sd}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:p.query,setQueryFilter:e=>{h((t=>({...t,query:e})))}}),(0,i.jsx)(q().Z,{onClick:()=>{g(id.AddToGroup)},children:(0,i.jsx)(x()._H,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),m===id.RemoveFromGroup?(0,i.jsx)(Ql,{organizationId:t,onDismiss:()=>{g(void 0),L()},groupStore:a,userIds:N.map((e=>e.userId))}):null,m===id.AddToGroup?(0,i.jsx)(Jl,{organizationId:t,onDismiss:()=>{g(void 0),L()},groupStore:a}):null,(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,rows:o.loading?(0,Vt().s)():P,columnRenderInfo:nd,styles:c,onRowClick:e=>{e.type!==Vt().a.Loading&&R(e)},renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"membersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(x()._H,{id:"membersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:o.loading,isSelected:P.length>0&&N.length===P.length,onClick:()=>{N.length===P.length?L():B()}},row:{getDisabledState:()=>o.loading,getSelectedState:e=>N.some((t=>t.id===e.id)),onClick:e=>{e.type!==Vt().a.Loading&&R(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{I((e=>D?e+1:e)),L()},onLoadPrevious:()=>{I((e=>Math.max(e-1,0))),L()},hasNextPage:D,hasPrevPage:A,currentPage:k+1,finalPage:T}})]})}function rd(e){let{organizationId:t,onDismiss:a,groupStore:n,spaceStore:o,pageIds:r,removePagesFromGroup:l}=e;const d=(0,y().O7)(),c=(0,x().YB)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(D().V),[m,g]=(0,s.useState)(!1),p=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function h(){g(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void g(!1);const i=await M().callApi({eventName:"updateGroupInOrganization",environment:d,data:{organizationId:t,spaceId:e,groupId:s,removePages:r}});if("success"!==i.type)return C().UW((0,_().wf)(c,i)),void g(!1);u({data:i.data}),l(s,r),a(),g(!1)}return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(V().sR,{showDismissButton:!1,header:(0,i.jsx)(W().xB,{icon:ls(p.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removePagesToGroupModal.title",defaultMessage:"Remove group from pages"}),byline:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removePagesToGroupModal.byline",defaultMessage:"Confirm that you want to remove this group from <bold>{count, plural, one {this page} other {these pages}} {count}</bold>, revoking this group’s access to that content.",values:{count:r.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removePagesToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {page} other {pages}}",values:{count:r.length}}),primaryAction:h,primaryDisabled:m,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removePagesToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:p.content,children:(0,i.jsx)(ld,{pageIds:r,spaceStore:o})})})})}function ld(e){const{pageIds:t,spaceStore:a}=e,n=(0,x().YB)(),o=Gt({blockIds:t}),[r,l]=(0,s.useState)(""),d=(0,b().VK)((()=>o.map((e=>{var t,s;return{id:e.id,icon:(0,i.jsx)(B().Z,{icon:null===(t=e.getModel())||void 0===t?void 0:t.getRenderIcon({getRecordModel:e.getRecordModel}),size:20,isEmptyPage:!1,disabled:!0}),name:null===(s=e.getModel())||void 0===s?void 0:s.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,ze().r)(),intl:n}),caption:(0,Ur().wL)({blockStore:e,spaceStore:a,intl:n})}}))),[o,a,n]),c=(0,rt().ZP)(r,d,(e=>e.name??""));return(0,i.jsx)(W().AW,{items:c,titleText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.title",defaultMessage:"Selected pages"}),headerText:(0,i.jsx)(x()._H,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.header",defaultMessage:"Page"}),headerAction:(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:r,setQueryFilter:l})})}const dd=(0,x().vU)({name:{id:"organization.group.pages.pageColumn.header",defaultMessage:"Page"},createdBy:{id:"organization.group.pages.createdByColumn.header",defaultMessage:"Created by"},createdOn:{id:"organization.group.pages.createdOnColumn.header",defaultMessage:"Created on"},audience:{id:"organization.group.pages.audienceColumn.header",defaultMessage:"Audience"}}),cd={id:"name",headerTitle:(0,i.jsx)(x()._H,{...dd.name}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(Ur().o,{useThinTitle:!0,blockStore:e.blockStore,parentSpaceStore:e.spaceStore}),widthData:{widthPercent:30,minWidth:130},sortable:!1},ud={id:"createdBy",headerTitle:(0,i.jsx)(x()._H,{...dd.createdBy}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:200}}):(0,i.jsx)(Or().t,{blockStore:e.blockStore,userIds:e.createdById?[e.createdById]:[]}),widthData:{widthPercent:18,minWidth:75},sortable:!1},md={id:"createdOn",headerTitle:(0,i.jsx)(x()._H,{...dd.createdOn}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:200}}):(0,i.jsx)(Zs().T,{useSecondaryColorTitle:!0,dateTs:e.createdOn}),widthData:{widthPercent:18,minWidth:75},sortable:!1},gd={id:"audience",headerTitle:(0,i.jsx)(x()._H,{...dd.audience}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:120}}):(0,i.jsx)(Lr().A,{useSecondaryColorTitle:!0,blockStore:e.blockStore,spaceStore:e.spaceStore}),widthData:{widthPercent:18,minWidth:75},sortable:!1},pd=[{id:cd.id,name:T().Z.formatMessage(dd.name),type:"title"},{id:ud.id,name:T().Z.formatMessage(dd.createdBy),type:"person"},{id:md.id,name:T().Z.formatMessage(dd.createdOn),type:"date"}],hd=[cd,ud,md,gd];var fd=function(e){return e.RemoveGroupFromPage="remove-from-group",e}(fd||{});function xd(e){let{organizationId:t,groupStore:a,groupPageStores:n,removePagesFromGroup:o}=e;const r=Yt({spaceId:(0,b().VK)((()=>a.getSpaceId()),[a])}),d=(0,qn().V)(),c=(0,Rt().Z)(),u=(0,S().yK)((e=>{const t=(0,It().bE)({columnRenderInfo:hd,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[]),m=hd.map((e=>({...e,headerStyle:c.tableHeader,rowStyle:c.tableRow}))),g=(0,b().VK)((()=>n.map((e=>{var t;return{type:Vt().a.OrganizationGroupPage,id:e.id,title:null===(t=e.getModel())||void 0===t?void 0:t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,ze().r)(),intl:T().Z.getIntl()}),blockId:e.id,blockStore:e,spaceStore:r,createdOn:e.getCreatedTime(),createdById:e.getCreatedById(),isClickable:!0}}))),[n,r]),p=(0,b().VK)((()=>(0,We().jj)(n.map((e=>e.getCreatedByPointer())).filter((e=>(null==e?void 0:e.table)===j().KJ)).map((e=>e.id)))),[n]),[h,f]=(0,s.useState)(),[v,y]=(0,s.useState)({}),[w,M]=(0,s.useState)(),[C,_]=(0,s.useState)(!1),[k,I]=(0,s.useState)(),P=k??w??[],D=(0,s.useMemo)((()=>{if(!g)return[];let e=g;v.query&&(e=(0,rt().ZP)(v.query,e,(e=>e.title||"")));const t=v.createdByIds;return t&&t.length>0&&(e=e.filter((e=>!!e.createdById&&t.includes(e.createdById)))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:cd.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===cd.id?"title":t===md.id?"createdOn":t===ud.id?"createdById":"title"})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,kt().t1)(t)}));return(0,We().Xo)(t,n,i)}({rows:e,appliedSorts:w})}),[g,v.query,v.createdByIds,w]),z=Math.max(1,Math.floor(D.length/Ge().B)),[A,N]=(0,s.useState)(0),R=D.slice(A*Ge().B,(A+1)*Ge().B),B=Ge().B*(A+1)<D.length,L=A>0;const{selectedRows:O,handleToggleRow:V,handleSelectAllRows:U,handleUnselectAllRows:q}=ps({allPossibleRows:R});return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{hideDivider:!0,title:(0,i.jsx)(x()._H,{id:"organization.groups.modal.pages.title",defaultMessage:"Pages"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organization.groups.modal.pages.byline",defaultMessage:"View all pages accessible to this group or remove their access."})})}),(0,i.jsxs)("div",{style:d.tableHeader,children:[(0,i.jsxs)("div",{style:d.leftContent,children:[(0,i.jsxs)(ws,{isOpen:O.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(x()._H,{id:"organization.group.pagesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:O.length}}),onClick:q}),(0,i.jsx)(Ms,{icon:ls,title:(0,i.jsx)(x()._H,{id:"organization.group.pagesTable.multiselect.remove",defaultMessage:"Remove group from page"}),onClick:()=>f(fd.RemoveGroupFromPage)})]}),(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{sortProperties:pd,isMenuOpen:C,setIsMenuOpen:_,onApply:e=>{_(!1),M(e),I(void 0)},currentSorts:P})}),P.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(Br,{pillTitle:(0,i.jsx)(x()._H,{id:"organization.group.pagesTable.filters.createdBy",defaultMessage:"Created by"}),selectedUsers:v.createdByIds||[],setSelectedUsers:e=>{y((t=>({...t,createdByIds:e})))},userIds:p})]}),(0,i.jsxs)("div",{style:d.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:w,openSortPillMenu:e=>{e&&I([{propertyId:e,direction:"ascending"}]),_(!0)},sortProperties:pd}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:v.query,setQueryFilter:e=>{y((t=>({...t,query:e})))}})]})]}),(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,rows:R,columnRenderInfo:m,styles:u,onRowClick:e=>{e.type!==Vt().a.Loading&&V(e)},renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:l().I,title:(0,i.jsx)(x()._H,{id:"pagesTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(x()._H,{id:"pagesTable.empty.byline",defaultMessage:"There are no pages that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:!1,isSelected:R.length>0&&O.length===R.length,onClick:()=>{O.length===R.length?q():U()}},row:{getDisabledState:()=>!1,getSelectedState:e=>O.some((t=>t.id===e.id)),onClick:e=>{e.type!==Vt().a.Loading&&V(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{N((e=>B?e+1:e)),q()},onLoadPrevious:()=>{N((e=>Math.max(e-1,0))),q()},hasNextPage:B,hasPrevPage:L,currentPage:A+1,finalPage:z}}),h===fd.RemoveGroupFromPage?(0,i.jsx)(rd,{organizationId:t,onDismiss:()=>{f(void 0),q()},groupStore:a,spaceStore:r,pageIds:O.map((e=>e.blockId)),removePagesFromGroup:o}):null]})}var vd=()=>a(586573),yd=()=>a(294492),bd=()=>a(582665),Sd=()=>a(777539),jd=()=>a(630029),wd=()=>a(874459),Md=()=>a(741633),Cd=()=>a(696056);class _d extends fs().default{getInitialState(){return{auditLogPointer:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const Td=new _d;class kd extends fs().default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,a){if(a<=1||!We().Xy(this.state.pointer,e))return;const s=(0,bd().r)(t);if(this.state.filterStr!==s)return;const n=this.state.cachedResponses[a-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,a){this.updateResultHelper(e,t,{...a,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,a){const s=(0,bd().r)(t);1!==t.pageNum&&We().Xy(this.state.pointer,e)&&this.state.filterStr===s?this.setState({pointer:e,filterStr:s,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...a}}}):this.setState({pointer:e,filterStr:s,cachedResponses:{[t.pageNum||1]:{...a}}})}}const Id=new kd,Hd=(0,x().vU)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function Pd(e){var t,a;const{environment:s,auditLogPointer:n}=e,i=e.filters||bd().Z.getState();Id.startLoading(n,i);const{sortOrder:o,pageSize:r,pageNum:l}=i,d={limit:r,cursor:Id.getCursor(n,i,l),filters:{timeRange:{starting:i.timeRange.starting?wd().OQ.toUnixMs(i.timeRange.starting):void 0,ending:i.timeRange.ending?wd().OQ.toUnixMs(i.timeRange.ending):void 0},...(null===(t=i.actors)||void 0===t?void 0:t.length)>0?{actors:i.actors}:void 0,...(null===(a=i.actions)||void 0===a?void 0:a.length)>0?{actions:i.actions}:void 0},sort:o||vd().NQ.CreatedNewest};n.table===qt().bx?await Dd({environment:s,request:{...d,spaceId:n.id},auditLogPointer:n,filters:i}):n.table===xs().V7?await Dd({environment:s,request:{...d,organizationId:n.id},auditLogPointer:n,filters:i}):(0,kt().t1)(n.table)}async function Dd(e){const{environment:t,request:a,auditLogPointer:s,filters:n}=e;let i;if("spaceId"in a?i=await M().callApi({eventName:"searchAuditLog",environment:t,data:a,headers:(0,Md().Bb)({spaceId:a.spaceId})}):"organizationId"in a?i=await M().callApi({eventName:"searchAuditLogForOrganization",environment:t,data:a}):(0,kt().t1)(a),"success"===i.type)Id.updateLoadedResult(s,n,i.data);else if(Id.updateError(s,n),(0,Do().Jx)(i.body)){const e=(0,_().wf)(T().Z.getIntl(),i);C().UW(e)}else C().UW(T().Z.formatMessage(Hd.loadCurrentAuditLogError))}async function zd(e){const{environment:t,parentStore:a}=e;if(!a)return void Td.reset();const s=Td.getState(),n={id:a.id,table:a.table};if(We().Xy(s.auditLogPointer,n)||Td.reset(),!n)return;let i;if(a.table===qt().bx){const e=await Pn().x.searchActions.load();i=await e.searchSpaceActorIds({environment:t,membersOnly:!1})}else if(a.table===xs().V7){var o;i={userIds:(null===(o=a.getModel())||void 0===o?void 0:o.getOwnerIds())||[],botIds:[]}}else(0,kt().t1)(a);const r=await async function(e){const{environment:t,auditLogPointer:a}=e;if(a.table===qt().bx){const e=await M().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:a.id}});return"success"!==e.type?[]:e.data.results}if(a.table===xs().V7){const e=await M().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{organizationId:a.id}});return"success"!==e.type?[]:e.data.results}(0,kt().t1)(a.table)}({environment:t,auditLogPointer:n}),l={auditLogPointer:n,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};for(const c of i.userIds)l.allUserIds.add(c);for(const c of i.botIds)l.allBotIds.add(c);for(const c of r)(d=c.actorId)!==Cd()._H.id&&d!==j().s$.id&&d!==j().el.id||l.allUserIds.has(c.actorId)?c.actorType!==j().KJ||l.allUserIds.has(c.actorId)?c.actorType!==Cd().cZ||l.allBotIds.has(c.actorId)||(l.allBotIds.add(c.actorId),l.removedBotIds.add(c.actorId)):(l.allUserIds.add(c.actorId),l.removedUserIds.add(c.actorId)):l.allUserIds.add(c.actorId);var d;Td.setState(l)}var Ad=()=>a(242716),Nd=()=>a(559333),Rd=()=>a(173584);class Bd extends Rd().e{getInitialState(){return{categorySelections:{organization:Rd().j.All},categoryToggleOpen:{organization:!0},searchQuery:void 0,actionSelections:(0,kt().Xc)(vd().TQ,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"organization",orderedActions:vd().dF.organization}]}}}var Ld=()=>a(286977);var Od=()=>a(576387),Vd=()=>a(431652),Ud=()=>a(397540);const qd="organization";function Ed(e){let{organizationId:t,currentTabRoute:a,currentTabProperties:n,shouldShowOrganizationOption:o,showAsPill:r,selectedSpaceStore:l}=e;const d=(0,y().O7)(),c=(0,eo().k)({organizationId:t}),u=(0,Js()._)(),{itemIcon:m,itemName:g}=function(e){const t=Wd(),{itemIcon:a,itemName:s}=(0,b().VK)((()=>{const a="Organization";return e?{itemIcon:(0,i.jsx)(B().Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),size:ba().M,isLarge:!0}),itemName:e.getName()}:{itemIcon:(0,i.jsx)("div",{style:t.organizationIconContainer,children:(0,h().K)(t.organizationIcon)}),itemName:a}}),[e,t]);return{itemIcon:a,itemName:s}}(l),p=(null==l?void 0:l.id)??(o?qd:void 0),f=(0,S().yK)((e=>({container:{display:"inline-flex",width:"fit-content"},menuItem:{fontSize:"inherit",borderRadius:L().E.default,border:`1px solid ${e.stroke.secondary}`,paddingTop:4,paddingBottom:4}})),[]);(0,s.useEffect)((()=>{l&&(pe().default.setState({...pe().default.state,currentSpaceStore:l}),(0,Od().OR)({environment:d,spaceId:l.id}))}),[l,d]);const v=(0,s.useCallback)((e=>{if(!e)return void function(e,t,a){Oa().c4({environment:e,url:(0,La().a5)({organizationId:t,tabRoute:a})})}(d,t,a);const s=(0,La().a5)({organizationId:t,tabRoute:a,properties:n,queryParams:{[Dp]:e}});Oa().c4({environment:d,url:s})}),[a,n,d,t]),j=(0,b().VK)((()=>u.map((e=>e.id))),[u]),w=(0,s.useMemo)((()=>o?[qd,...j]:j),[j,o]),M=(0,b().VK)((()=>{const e=c?{key:c.id,value:qd,title:(0,i.jsx)(x()._H,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"}),shortTitle:(0,i.jsx)(x()._H,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"})}:void 0,t=u.map((e=>({key:e.id,value:e.id,title:e.getName(),shortTitle:e.getName()})));return o&&e?[e,...t]:t}),[u,c,o]);return r?(0,i.jsx)(Ts().p,{shouldUseCheck:!0,showActive:!0,shouldHidePrefix:!0,selectionRequired:!0,pillTitle:o?(0,i.jsx)(x()._H,{id:"organizationConsole.table.filters.orgOrWorkspaces.title",defaultMessage:"Organization or workspace"}):(0,i.jsx)(x()._H,{id:"organizationConsole.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:h().K,selectedItem:p,setSelectedItem:v,items:M}):(0,i.jsx)("div",{style:f.container,children:(0,i.jsx)(Ud().Z,{items:w,getKey:We().yR,selectedItem:p,onSelect:v,width:300,renderItem:e=>{const t=e.value;return t===qd?(0,i.jsx)(Fd,{isSelected:!p,...e}):(0,i.jsx)(Zd,{spaceId:t,isSelected:p===t,...e})},renderOrigin:e=>(0,i.jsx)(Vd().X,{focused:!1,icon:m,title:g,style:f.menuItem,desktopIconStyle:{marginLeft:4,marginRight:0},...e})})})}function Zd(e){let{spaceId:t,isSelected:a,...n}=e;const o=(0,y().O7)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(D().V),l=Wd(),{icon:d,name:c}=(0,b().VK)((()=>{const e=new(I().H2)(o,{id:t,table:qt().bx},{inMemoryRecordCache:r});return{icon:e.getIcon(),name:e.getName()}}),[t,r,o]);return(0,i.jsx)(Re().Z,{title:c,right:a?(0,Ld().e)(l.checkIcon):null,icon:(0,i.jsx)(B().Z,{disabled:!0,icon:d,isEmptyPage:!1,title:c,size:ba().M,isLarge:!0}),...n})}function Fd(e){let{isSelected:t,...a}=e;const s=Wd();return(0,i.jsx)(Re().Z,{title:"Organization",right:t?(0,Ld().e)(s.checkIcon):null,icon:(0,i.jsx)("div",{style:s.organizationIconContainer,children:(0,h().K)(s.organizationIcon)}),...a})}function Wd(){return(0,S().yK)((e=>({checkIcon:{width:14,height:14},organizationIconContainer:{width:23,height:23,display:"flex",alignItems:"center",justifyContent:"center"},organizationIcon:{width:18,height:18}})),[])}var Kd=()=>a(940125);const Gd=(0,x().XN)((function(e){const{parentStore:t,auditLogHistoricalUserStore:a,selectedActors:n,onChange:o,intl:r}=e,l=(0,y().O7)(),[d,c]=s.useState(new Set(n.map(Kd().eW))),u=(0,i.jsx)(x()._H,{id:"auditlogActorFilter.title",defaultMessage:"User"}),m=(0,s.useCallback)((()=>{const e=Array.from(d).map(Kd().Ij).filter((e=>Boolean(e)));o(e)}),[d,o]),p=(0,s.useCallback)((()=>{const e=n.map(Kd().eW);c(new Set(e))}),[n]),h=(0,s.useCallback)((e=>{"applyButton"!==e?p():m()}),[m,p]),f={title:u,tokenInputPlaceholder:r.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:r.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"};return(0,i.jsx)(jd().Z,{mode:jd().z.Pill,title:u,icon:g,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==n?void 0:n.length)>0,onChange:e=>{c(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:h,labelText:f,performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:a,selectedActors:s,environment:n,parentStore:i}=e;const{query:o}=t,{allUserIds:r,allBotIds:l}=a.getState(),d=100,c=await Pn().x.searchActions.load(),u=await c.searchActorsById({environment:n,query:o,userIds:[...r],botIds:[...l],store:i}),m=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(o.length>0)return m.slice(0,d);const g=s.map(Kd().eW),p=new Set(g),h=m.filter((e=>!p.has(e)));return[...g,...h].slice(0,Math.max(g.length,d))}({args:e,auditLogHistoricalUserStore:a,selectedActors:n,environment:l,parentStore:t}),renderResultMenuItem:(e,s)=>{var n;const o=function(e,t){const a=(0,Kd().Ij)(e);if(!a)return(0,ja().m3)(void 0);if("notion_user"===a.actorType)return(0,ja().m3)(function(e,t){const a=I().U6.createChildStore(t,{table:j().KJ,id:e});return a.getModel()}(a.actorId,t));return(0,ja().ON)(function(e,t){const a=I().Qx.createChildStore(t,{table:Cd().cZ,id:e});return a.getModel()}(a.actorId,t))}(e,t);return(0,i.jsx)(Yd,{...s,item:e,tempActorSelections:d,showRemovedBadge:a.isUserOrBotRemoved(null===(n=o.asActor)||void 0===n?void 0:n.id),actor:o,intl:r})},renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),Yd=(0,s.forwardRef)(((e,t)=>{const{item:n,intl:o,tempActorSelections:r,showRemovedBadge:l,actor:d}=e,c=(0,b().VK)((()=>(0,ja().$4)(o,d)),[o,d]);return(0,s.createElement)(Pa().Z,{...e,ref:t,key:n,actor:d,useEmailAsTooltip:!0,checkState:r.has(n),userTitle:(0,i.jsxs)("div",{style:{display:"flex",gap:4},children:[c,l&&(0,i.jsx)(a(946563).Z,{children:(0,i.jsx)(x()._H,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));function $d(e){let{onChange:t}=e;const a=(0,b().qz)(void 0,Bd),s=(0,b().qz)(void 0,Bd);return(0,i.jsx)(Ad().Z,{lastSelectionStore:a,componentStore:s,onChange:t})}function Jd(e){let{onChange:t}=e;const a=(0,b().qz)(void 0,Nd().X),s=(0,b().qz)(void 0,Nd().X);return(0,i.jsx)(Ad().Z,{lastSelectionStore:a,componentStore:s,onChange:t})}Yd.displayName="ResultMenuItem";const Qd=(0,x().XN)((function(e){const{parentStore:t,organizationId:s,selectedSpaceId:n}=e,o=Yt({spaceId:n}),[r,l]=(0,b().AF)(bd().Z),[d,c,u]=(0,b().AF)(Td);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,i.jsx)(Ed,{showAsPill:!0,shouldShowOrganizationOption:!0,organizationId:s,currentTabRoute:Ft().FW,selectedSpaceStore:o}),(0,i.jsx)(Sd().Z,{mode:jd().z.Pill,focused:!1,title:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlogDateFilter.title",defaultMessage:"Date"}),icon:vi,value:r.timeRange,showButtons:"footer",onChange:e=>{l({...r,timeRange:e,pageNum:1})}}),(0,i.jsx)(Gd,{parentStore:t,auditLogHistoricalUserStore:u,selectedActors:r.actors,onChange:e=>{l({...r,actors:e,pageNum:1})}}),(0,a(852465).R$)(t)?(0,i.jsx)($d,{onChange:e=>{l({...r,actions:e,pageNum:1})}}):(0,i.jsx)(Jd,{onChange:e=>{l({...r,actions:e,pageNum:1})}})]})}));var Xd=()=>a(857411),ec=()=>a(664357),tc=()=>a(775377),ac=()=>a(959137),sc=()=>a(286338);function nc(e){const{auditLogEntry:t,eventColumnId:a}=e,s=(0,b().VK)((()=>(0,sc().F$)()),[]),n=(0,b().VK)((()=>v().default.checkGate({gateName:"audit_log_event_name_column"})?tc().pz:tc().C9),[]),i=(0,x().YB)(),o=(0,y().O7)();return async()=>{const e=await ac().F.clipboardActions.load();e.copyString({environment:o,stringValue:(0,tc().eA)({auditLogEntry:t,intl:i,getAuditLogEventText:ic(a),isTeamGuestsEnabled:s,csvColumnNames:n}),copiedMessage:e.clipboardMessages.copiedToClipboard})}}function ic(e){return t=>{var a;return null===(a=document.getElementById(e))||void 0===a?void 0:a.textContent}}function oc(e){let{isHovered:t,auditLogEntry:a,eventColumnId:s}=e;const n=(0,x().YB)(),o=nc({auditLogEntry:a,eventColumnId:s});return(0,i.jsx)(oo,{isHovered:t,iconFunction:l().I,tooltipMessage:n.formatMessage(rc.copyRow),buttonProps:{onClick:o}})}const rc=(0,x().vU)({copyRow:{defaultMessage:"Copy row",id:"organization.auditLog.table.copyRow"}});var lc=()=>a(997218),dc=()=>a(421736);function cc(e){const{auditLogEntry:t,parentStore:a,id:n}=e,o=(0,x().YB)(),r=(0,b().VK)((()=>{if(t.actor.actorType===j().KJ){const e=I().U6.createChildStore(a,{id:t.actor.actorId,table:j().KJ});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===Cd().cZ){const e=I().Qx.createChildStore(a,{id:t.actor.actorId,table:Cd().cZ});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[a,t]),l=(0,b().VK)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDisplayName(o))??(null===(t=r.avatar)||void 0===t?void 0:t.name)}),[r,o]),d=(0,b().VK)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=r.avatar)||void 0===t?void 0:t.email)}),[r]),c=(0,s.useMemo)((()=>{var e;if(t.actor.actorType===j().KJ)return(0,dc().K)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),u=(0,S().yK)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),m=(0,s.createRef)();return(0,i.jsx)(Z().Z,{disableTooltip:uc(m.current),renderTooltip:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:l}),(0,i.jsx)("div",{children:d})]}),placement:_a().Placement.Bottom,render:e=>(0,i.jsx)("div",{...e,style:u.container,children:(0,i.jsx)(dc().Z,{id:n,...r,spaceRole:c})})})}function uc(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}const mc={id:"actor",headerTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(cc,{parentStore:e.parentStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},gc={id:"event",headerTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(ec().p,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},pc={id:"dateTimeAndMenu",headerTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,a=`event-${e.auditLogEntry.actionName}-${e.id}`,s=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Xd().t,{auditLogEntry:e.auditLogEntry,id:s}),(0,i.jsx)(xc,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:a,dateTimeColumnId:s}})]})},widthData:{width:25},sortable:!0,shouldShowSortTooltip:!0},hc=[mc,gc,pc];function fc(){return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(es().Z,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,i.jsx)(es().Z,{isSecondaryColor:!0,children:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function xc(e){const t=(0,S().Fg)(),a=(0,S().yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:L().E.small}})),[]),s=nc({auditLogEntry:e.auditLogEntry,eventColumnId:e.ids.eventColumnId});return(0,i.jsx)(Z().Z,{delayThreshold:80,placement:_a().Placement.Bottom,render:e=>(0,i.jsx)("div",{style:a.container,...e,children:(0,i.jsx)(js().Z,{style:a.button,onClick:s,children:(0,l().I)({width:16,height:16,fill:t.mediumIconColor})})}),renderTooltip:()=>(0,i.jsx)(x()._H,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const vc=(0,x().XN)((function(e){const{searchResponse:t,parentStore:a}=e,[n,o]=(0,b().AF)(bd().Z),r=t.results||[],l=t.hasMoreResults,d=Boolean(r.length),c=e=>{const t={...n,pageNum:e};o(t)},u=(0,Rt().Z)(),m=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:hc,theme:e,containerMarginTop:0})),[]),g=r.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),p=(0,s.useCallback)((()=>{const e=n.sortOrder===vd().NQ.CreatedOldest?vd().NQ.CreatedNewest:vd().NQ.CreatedOldest;o({...n,sortOrder:e,pageNum:1})}),[n,o]),h=(0,s.useMemo)((()=>({column:pc,sortAscending:n.sortOrder===vd().NQ.CreatedOldest})),[n]),f=hc.map((e=>({...e,headerStyle:u.tableHeader})));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:f,rows:g,sortState:h,onSortStateChanged:p,renderNoRowsComponent:fc,styles:m}),d?(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,i.jsx)(lc().v,{onClick:()=>{c(n.pageNum-1)},disabled:1===n.pageNum,children:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,i.jsx)(lc().v,{disabled:!l,onClick:()=>{c(n.pageNum+1)},children:(0,i.jsx)(x()._H,{id:"settingsConsole.auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})})),yc=[{id:"timestampColumn",headerTitle:(0,i.jsx)(x()._H,{id:"auditlog.logTable.timestampColumn.header",defaultMessage:"Timestamp"}),renderCell:e=>{const t=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(Xd().t,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:30,minWidth:160,maxWidth:200},sortable:!1},{id:"event",headerTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.singleUserView.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(ec().p,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:70,minWidth:200,maxWidth:800},sortable:!1},{id:"copyAction",headerTitle:void 0,renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(oc,{isHovered:e.isRowHovered,auditLogEntry:e.auditLogEntry,eventColumnId:t})},widthData:{width:30},sortable:!1}];const bc=(0,x().XN)((function(e){const{searchResponse:t,parentStore:a,filters:s,setFilters:n}=e,o=t.results||[],r=t.hasMoreResults,l=e=>{const t={...s,pageNum:e};n(t)},d=(0,Rt().Z)(),c=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:yc,theme:e,containerMarginTop:0})),[]),u=o.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),m=yc.map((e=>({...e,rowStyle:d.tableRow})));return(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:m,rows:u,renderNoRowsComponent:fc,styles:c,loadMoreMethod:{type:"pages",onLoadNext:()=>{l(s.pageNum+1)},onLoadPrevious:()=>{l(s.pageNum-1)},hasNextPage:r,hasPrevPage:s.pageNum>1,currentPage:s.pageNum}})}));function Sc(e){var t;let{userStore:a}=e;const n=(0,y().O7)(),o=(0,Js()._)(),r=En({spaceStores:o}),[l,d]=(0,s.useState)(null===(t=o[0])||void 0===t?void 0:t.id),c=Yt({spaceId:l}),u=(0,b().Kw)(Id),[m,g]=(0,s.useState)({pageNum:1,pageSize:Ge().B,timeRange:{},actors:[{actorId:a.id,actorType:"notion_user"}],actions:[],sortOrder:vd().NQ.CreatedNewest}),p=(0,bd().r)(m)!==u.filterStr?void 0:u.cachedResponses[m.pageNum];(0,s.useEffect)((()=>{c&&Pd({environment:n,auditLogPointer:{id:c.id,table:c.table},filters:m})}),[n,c,m]);const h=(0,S().yK)((()=>({filters:{display:"flex",flexDirection:"row"},actionContainer:{display:"flex",flexDirection:"row",margin:"0 auto 12px"}})),[]);return c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:h.actionContainer,children:(0,i.jsxs)("div",{style:h.filters,children:[(0,i.jsx)(Ps,{selectedSpaceId:l,setSelectedSpaceId:d,spaceData:r,shouldHideClear:!0}),(0,i.jsx)(Sd().Z,{mode:jd().z.Pill,focused:!1,title:(0,i.jsx)(x()._H,{id:"singleUserAuditLogTable.datedFilter.title",defaultMessage:"Date"}),icon:vi,value:m.timeRange,showButtons:"footer",onChange:e=>{g({...m,timeRange:e,pageNum:1})}}),(0,i.jsx)(Jd,{onChange:e=>{g({...m,actions:e,pageNum:1})}})]})}),"loading"===(null==p?void 0:p.status)&&(0,i.jsx)(yd().Z,{}),"success"===(null==p?void 0:p.status)&&(0,i.jsx)(bc,{searchResponse:p,parentStore:c,filters:m,setFilters:g})]}):null}const jc=(0,x().vU)({auditLog:{id:"settingsConsole.singleUserView.auditLogTab.title",defaultMessage:"Audit log"},auditLogLabel:{id:"settingsConsole.singleUserView.auditLogTab.label",defaultMessage:"View all the audit log events for this user"}});function wc(e){const t=(0,x().YB)();return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{title:t.formatMessage(jc.auditLog),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:t.formatMessage(jc.auditLogLabel)})}),(0,i.jsx)(Sc,{...e})]})}const Mc=(0,n().IU)("newHelp",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.993 17.126a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.727q0-1.45.553-2.728a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25q.555 1.278.554 2.728 0 1.449-.553 2.727a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202q0 1.182.438 2.208a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm-.15-4.306q-.65 0-.65-.581v-.075q0-.472.233-.766.24-.294.608-.547.438-.3.65-.513a.71.71 0 0 0 .218-.533.7.7 0 0 0-.26-.567q-.252-.226-.67-.226-.204 0-.382.069a1.1 1.1 0 0 0-.321.198 1.3 1.3 0 0 0-.26.307l-.11.144a.7.7 0 0 1-.232.205.6.6 0 0 1-.314.075.56.56 0 0 1-.376-.143.5.5 0 0 1-.165-.39q0-.096.014-.178.02-.089.055-.177.157-.48.724-.828.575-.348 1.457-.348.6 0 1.107.212.513.212.82.608.308.396.308.964 0 .602-.308.95-.3.349-.8.684a2.5 2.5 0 0 0-.52.417.73.73 0 0 0-.19.465v.04a.1.1 0 0 1-.007.042.49.49 0 0 1-.185.348.65.65 0 0 1-.444.144m-.014 2.098a.83.83 0 0 1-.567-.211.71.71 0 0 1-.233-.54.69.69 0 0 1 .233-.534.8.8 0 0 1 .567-.218q.335 0 .567.211a.7.7 0 0 1 .233.54.7.7 0 0 1-.232.54.8.8 0 0 1-.568.212"})});var Cc=()=>a(485156),_c=()=>a(440862);function Tc(e){let{organizationStore:t,userStore:a,userData:n}=e;const{userSpaceAccessMap:o,updateUserRoleInSpaceCache:r,removeUserFromSpaceCache:l}=n,d=(0,x().YB)(),c=(0,S().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%",paddingBottom:16},divider:{color:e.stroke.secondary}})),[]),u=Array.from(o.values()).some((e=>(0,w().FN)(e))),[m,g]=s.useState({isOpen:!1}),[p,h]=s.useState({isOpen:!1}),f=(0,s.useCallback)((()=>{u&&g({isOpen:!0,memberSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,w().nB)(a)?t:void 0})).filter(kt().$K)})}),[u,o]),v=(0,s.useCallback)((()=>{u&&h({isOpen:!0,guestSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,w().FN)(a)?t:void 0})).filter(kt().$K)})}),[u,o]),y=(0,b().VK)((()=>a.getModel()),[a]);return u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(H().q,{styleName:"Heading-17px/Regular",children:d.formatMessage(kc.manageGuestAccessTitle)}),(0,i.jsx)(be().N,{title:d.formatMessage(kc.convertGuestLabel),byline:d.formatMessage(kc.convertGuestDescription),item:(0,i.jsx)(K().mk,{onClick:f,children:d.formatMessage(kc.convertGuestButton)})}),(0,i.jsx)(Va().Z,{dividerColor:c.divider.color,size:1}),(0,i.jsx)(be().N,{title:d.formatMessage(kc.removeGuestLabel),byline:d.formatMessage(kc.removeGuestDescription),item:(0,i.jsx)(K().mk,{onClick:v,children:d.formatMessage(kc.removeGuestButton)})})]}),m.isOpen&&y&&(0,i.jsx)(Yn,{organizationStore:t,userModel:y,disabledSpaceIds:m.memberSpaceIds,onDismiss:()=>g({isOpen:!1}),refreshSpaceData:e=>r(e,"read_and_write")}),p.isOpen&&y&&(0,i.jsx)(Xn,{organizationStore:t,userModel:y,guestSpaceIds:p.guestSpaceIds,onDismiss:()=>h({isOpen:!1}),refreshSpaceData:e=>l(e)})]}):null}const kc=(0,x().vU)({manageGuestAccessTitle:{id:"organizationConsole.singleUserView.manageGuestAccess.manageGuestAccessTitle",defaultMessage:"Guest access"},convertGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestLabel",defaultMessage:"Upgrade guest to member"},convertGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestDescription",defaultMessage:"Upgrade this guest to a workspace member with full workspace access."},convertGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestButton",defaultMessage:"Upgrade to member"},removeGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestLabel",defaultMessage:"Remove guest access"},removeGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestDescription",defaultMessage:"Revoke their guest's access to all pages in select workspaces."},removeGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestButton",defaultMessage:"Remove guest access"}});function Ic(e){let{isAccessGranted:t,disabled:a,toggleDataAccessConsent:s}=e;const n=t?"granted":"denied",o=[{key:"granted",label:(0,i.jsx)(x()._H,{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"})},{key:"denied",label:(0,i.jsx)(x()._H,{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"})}],r=(0,S().yK)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...K().sM,...a&&K().E6}})),[a]);return(0,i.jsx)(ts().L,{isMobile:!1,disabled:a,type:"dropdown",currentOption:n,options:o,onSelectOption:e=>{e!==n&&s()},buttonStyle:r.button,placementToOrigin:_a().Placement.Left})}function Hc(e){let{organizationStore:t,userStore:a,isUserManaged:s,isAccessGranted:n,toggleDataAccessConsent:o,isOnLegalHold:r}=e;const l=(0,x().YB)(),d=a.id,c=(0,b().VK)((()=>a.getIsSuspended()),[a]),u=(0,b().VK)((()=>t.isUserLastOwner(a.id)),[t,a.id]),m=(0,S().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:m.container,children:[(0,i.jsx)(H().q,{styleName:"Heading-17px/Regular",children:l.formatMessage(Dc.manageUserTitle)}),!s&&(0,i.jsx)(Wl().j,{iconGroup:Fl().h,label:l.formatMessage(Dc.settingsNotAvailable),description:l.formatMessage(Dc.settingsNotAvailableDescription),display:"inline",tint:"gray"}),(0,i.jsx)(be().N,{title:l.formatMessage(Dc.supportAccessLabel),byline:l.formatMessage(Dc.supportAccessDescription),item:(0,i.jsx)(Pc,{disableTooltip:s,children:(0,i.jsx)(Ic,{isAccessGranted:n,disabled:!s,toggleDataAccessConsent:o})})}),(0,i.jsx)(Va().Z,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().N,{title:l.formatMessage(Dc.changeStatusLabel),byline:l.formatMessage(Dc.changeStatusDescription),item:(0,i.jsx)(Pc,{disableTooltip:s,children:(0,i.jsx)(en,{userStore:a,isSuspended:c,disabled:!s})})}),(0,i.jsx)(Va().Z,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().N,{title:l.formatMessage(Dc.forcePasswordResetLabel),byline:l.formatMessage(Dc.forcePasswordResetDescription),item:(0,i.jsx)(Pc,{disableTooltip:s,children:(0,i.jsx)(Ya,{organizationStore:t,userId:d,disabled:!s})})}),(0,i.jsx)(Va().Z,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().N,{title:l.formatMessage(Dc.forceLogoutLabel),byline:l.formatMessage(Dc.forceLogoutDescription),item:(0,i.jsx)(Pc,{disableTooltip:s,children:(0,i.jsx)(Ka,{organizationStore:t,userId:d,disabled:!s})})}),(0,i.jsx)(Va().Z,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().N,{title:l.formatMessage(Dc.deleteUserAccountLabel),byline:l.formatMessage(Dc.deleteUserAccountDescription),item:(0,i.jsx)(Pc,{disableTooltip:s&&!u,disabledTooltipText:u&&s?Dc.deleteAccountDisabledForLastOrgOwner:void 0,children:(0,i.jsx)(Ys,{userStore:a,isSuspended:c,disabled:!s||u,shouldWarnLegalHold:s&&r})})})]})}function Pc(e){let{children:t,disableTooltip:a,disabledTooltipText:s}=e;const n=(0,x().YB)();return(0,i.jsx)(Z().Z,{renderTooltip:()=>n.formatMessage(s??Dc.settingsNotAvailableTooltip),render:e=>(0,i.jsx)("div",{...e,children:t}),disableTooltip:a})}const Dc=(0,x().vU)({manageUserTitle:{id:"organizationConsole.singleUserView.manageUserActions.manageUserTitle",defaultMessage:"Managed user access"},settingsNotAvailable:{id:"organizationConsole.singleUserView.manageUserActions.notAvailable",defaultMessage:"Managed actions are not available for this user"},settingsNotAvailableDescription:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableDescription",defaultMessage:"These settings are only available for user accounts with verified domains."},settingsNotAvailableTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},supportAccessLabel:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessLabel",defaultMessage:"Allow support access"},supportAccessDescription:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessDescription",defaultMessage:"Enable Notion support to troubleshoot or recover content."},changeStatusLabel:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusLabel",defaultMessage:"Suspend or re-activate user"},changeStatusDescription:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusDescription",defaultMessage:"Suspend to restrict all workspace access while keeping content and integrations active. Reactivate to restore access."},forcePasswordResetLabel:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetLabel",defaultMessage:"Reset password"},forcePasswordResetDescription:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetDescription",defaultMessage:"Log out user and require password reset on next login."},forceLogoutLabel:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutLabel",defaultMessage:"Force log out"},forceLogoutDescription:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutDescription",defaultMessage:"Log out user from all workspaces and require re-authentication."},deleteUserAccountLabel:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountLabel",defaultMessage:"Delete user account"},deleteUserAccountDescription:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountDescription",defaultMessage:"Remove this user from all workspaces. You have 30 days to restore access and data."},deleteAccountDisabledForLastOrgOwner:{id:"organizationConsole.singleUserView.manageUserActions.deleteAccountDisabledForLastOrgOwner",defaultMessage:"At least one organization owner is required. Add a new organization owner to enable this action."}}),zc=(0,x().vU)({editButtonText:{id:"organizationConsole.singleUserView.editProfile.button",defaultMessage:"Edit profile"},disabledEditButtonTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},emailLabel:{id:"organizationConsole.singleUserView.details.emailLabel",defaultMessage:"Email"},lastActiveLabel:{id:"organizationConsole.singleUserView.details.lastActiveLabel",defaultMessage:"Last active"},emptyLastActive:{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"},supportAccessLabel:{id:"organizationConsole.singleUserView.details.supportAccessLabel",defaultMessage:"Support access"},supportAccessGranted:{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"},supportAccessNotGranted:{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"},unsupported:{id:"organizationConsole.singleUserView.details.unsupported",defaultMessage:"Unsupported"},joinedLabel:{id:"organizationConsole.singleUserView.details.joinedLabel",defaultMessage:"Joined"},emptyAccountCreated:{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"singleUserModal.emailCell.copyButton.successfulCopy"}});function Ac(e){let{organizationStore:t,userStore:s,userData:n,isOnLegalHold:o}=e;const{lastActiveAt:r,userSpaceAccessMap:l}=n,d=(0,x().YB)(),c=(0,y().O7)(),{longTallShimmer:u}=(0,ne().o)(),{resetState:m,saveChanges:g,profilePhoto:p,name:h,email:f}=(0,a(458852).s)({userStore:s}),v=function(e){const t=Array.from(e.userSpaceAccessMap.values()).map((e=>(0,w().nB)(e)?(0,fn().Ci)(e.role):(0,w().FN)(e)?"page_guest":void(0,kt().t1)(e)));return(0,Gn().v7)(e.organizationRole,t)}(n),j=(0,b().VK)((()=>s.getIsSuspended()),[s]),M=(0,b().VK)((()=>j?{type:"suspended"}:(0,Cc().os)({profilePhoto:p.value,name:h.value,email:f.value})),[j,p.value,h.value,f.value]),{userName:C,userEmail:_}=(0,b().VK)((()=>s.isReady()?{userName:s.getDisplayName(d),userEmail:s.getEmail()}:{userName:void 0,userEmail:void 0}),[s,d]),T=(0,b().VK)((()=>{const e=t.getEmailDomains();if(_&&(0,ot().dy)(e,_))return(0,ot().Gd)(_)}),[t,_]),k=void 0!==T,{isAccessGranted:I,toggleDataAccessConsent:P}=(0,a(470374).d)({userId:s.id,isUserUnmanaged:!k}),D=function(e){let t;for(const a of e.values())(0,w().nB)(a)&&a.firstJoinedSpaceTime&&(void 0===t||t>a.firstJoinedSpaceTime)&&(t=a.firstJoinedSpaceTime);return t}(l),z=(0,S().yK)((e=>({avatarContainer:{marginTop:-88,display:"flex",width:"100%"},nameContainer:{paddingTop:13,color:e.primaryBlack,display:"flex",alignItems:"center",gap:8},nameInput:{fontSize:26,fontWeight:R().Ue.bold,maxWidth:300},badgesContainer:{paddingTop:9,display:"flex"},label:{color:e.mediumTextColor},divider:{paddingTop:28},emailCell:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},infoContainer:{display:"grid",gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",rowGap:16,columnGap:20},mainContentContainer:{display:"flex",flexDirection:"column",gap:40}})),[]),A=(0,a(578292).E2)(d),N=(0,b().VK)((()=>!a(804217).default.state.online),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)("div",{style:z.avatarContainer,children:(0,i.jsx)(Cc().ZP,{size:80,avatarType:M,disabled:!k,isOffline:N,loading:p.loading,onUploadProfilePhoto:p.setAndSave,onRemoveProfilePhoto:p.remove})}),(0,i.jsxs)("div",{style:z.nameContainer,children:[C?(0,i.jsx)(H().q,{styleName:"UITitle-26px/Bold",children:C}):(0,i.jsx)(se().Z,{style:u}),(0,i.jsx)($,{icon:_l().v,title:(0,i.jsx)(x()._H,{id:"organization.general.editDetailsModal.title",defaultMessage:"Edit user details"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.editDetailsModal.byline",defaultMessage:"Edit this user's name and email address below. Changes will take effect immediately upon saving."}),name:C,email:_,onDismiss:m,onSave:g,onNameChange:h.set,onEmailChange:f.set,disabled:!C||!k,disabledTooltipText:d.formatMessage(zc.disabledEditButtonTooltip)})]}),(0,i.jsxs)("div",{style:z.mainContentContainer,children:[(0,i.jsxs)("div",{style:z.badgesContainer,children:[j&&(0,i.jsx)(_c().vE,{}),(0,i.jsx)(_c().iX,{highestRole:v}),(0,i.jsx)(_c().jr,{emailDomain:T}),o&&(0,i.jsx)(_c().U4,{})]}),(0,i.jsxs)("div",{style:z.infoContainer,children:[(0,i.jsx)(Tl().r8,{row:1,col:1,children:(0,i.jsx)(kl,{iconFunction:_s().Y,label:zc.emailLabel,value:(0,i.jsxs)(ea().X2,{gap:4,alignItems:"center",children:[(0,i.jsx)("div",{style:z.emailCell,children:_}),_&&(0,i.jsx)(Fs().v9,{isHovered:!0,size:16,containerStyles:{marginBlock:1},onCopyClick:async()=>{const e=await ac().F.clipboardActions.load();await e.copyString({stringValue:_,environment:c,copiedMessage:e.clipboardMessages.copiedPropertyToClipboard}),et().oV({label:d.formatMessage(zc.toastSuccessfulCopy)})}})]})},"email")}),(0,i.jsx)(Tl().r8,{row:1,col:2,children:(0,i.jsx)(kl,{iconFunction:vi,label:zc.lastActiveLabel,value:r?(0,Xa().gs)(r):d.formatMessage(zc.emptyLastActive)},"lastActive")}),(0,i.jsx)(Tl().r8,{row:2,col:1,children:(0,i.jsx)(kl,{iconFunction:Mc,label:zc.supportAccessLabel,value:d.formatMessage(k?I?zc.supportAccessGranted:zc.supportAccessNotGranted:zc.unsupported)},"supportAccess")}),(0,i.jsx)(Tl().r8,{row:2,col:2,children:(0,i.jsx)(kl,{iconFunction:vi,label:zc.joinedLabel,value:D?(0,a(646574).Yx)(D,"medium",A):d.formatMessage(zc.emptyAccountCreated)},"joined")})]}),(0,i.jsx)(Va().Z,{size:1}),(0,i.jsx)(Tc,{organizationStore:t,userStore:s,userData:n}),(0,i.jsx)(Hc,{organizationStore:t,userStore:s,isUserManaged:k,isAccessGranted:I,toggleDataAccessConsent:P,isOnLegalHold:o})]})]})]})}const Nc=Ge().B;var Rc=()=>a(265640),Bc=()=>a(777555),Lc=()=>a(499792);const Oc="unset";function Vc(e){return"none"===e||"everyone"!==e&&void(0,kt().t1)(e)}function Uc(e){return!0===e?"no":!1===e?"yes":void(0,kt().t1)(e)}function qc(e){return!0===e?"none":!1===e?"everyone":void(0,kt().t1)(e)}function Ec(e){return qc(e.getDisablePublicAccess())}const Zc={settingName:"publish-sites",teamSettingName:"disable_public_access",title:(0,i.jsx)(x()._H,{id:"organization.security.settings.publishingSites.title",defaultMessage:"Publishing sites & forms"}),byline:(0,i.jsx)(x()._H,{id:"organization.security.settings.publishingSites.byline",defaultMessage:"Control who can publish sites and forms to the web."}),getOptions:lu,getValueFromSpace:Ec,getValueFromTeam:Ec,getValueFromOrganization:e=>{const t=e.getDisablePublicAccess();if(void 0!==t)return qc(t)},formatValueToSave:e=>({disable_public_access:Vc(e)}),formatUndefinedToSave:()=>({disable_public_access:null})};function Fc(e){return qc(e.getDisableExport())}const Wc={settingName:"export-pages",teamSettingName:"disable_export",title:(0,i.jsx)(x()._H,{id:"organization.security.settings.exportingPages.title",defaultMessage:"Exporting Pages"}),byline:(0,i.jsx)(x()._H,{id:"organization.security.settings.exportingPages.byline",defaultMessage:"Control who can export pages."}),getOptions:lu,getValueFromSpace:Fc,getValueFromTeam:Fc,getValueFromOrganization:e=>{const t=e.getDisableExport();if(void 0!==t)return qc(t)},formatValueToSave:e=>({disable_export:Vc(e)}),formatUndefinedToSave:()=>({disable_export:null})},Kc={settingName:"duplicate-pages",title:(0,i.jsx)(x()._H,{id:"organization.security.settings.duplicatePages.title",defaultMessage:"Duplicating pages to other workspaces"}),byline:(0,i.jsx)(x()._H,{id:"organization.security.settings.duplicatePages.byline",defaultMessage:"Control who can duplicate pages into other workspaces."}),getOptions:lu,getValueFromSpace:e=>qc(e.getDisableMoveToSpace()),getValueFromOrganization:e=>{const t=e.getDisableMoveToSpace();if(void 0!==t)return qc(t)},formatValueToSave:e=>({disable_move_to_space:Vc(e)}),formatUndefinedToSave:()=>({disable_move_to_space:null})};function Gc(e){let{store:t,guestRequestStore:a}=e;return Yc({disableGuests:t.getDisableGuests(),enableGuestInviteRequests:a.getEnableGuestInviteRequest()})}function Yc(e){let{disableGuests:t,enableGuestInviteRequests:a}=e;return!1===t?"everyone":!0===t&&!0===a?"request":!0===t?"wo_only":void(0,kt().t1)(t)}const $c={settingName:"guest-invites",teamSettingName:"disable_guests",title:(0,i.jsx)(x()._H,{id:"organization.security.settings.addingGuests.title",defaultMessage:"Adding guests"}),byline:(0,i.jsx)(x()._H,{id:"organization.security.settings.addingGuests.byline",defaultMessage:"Manage how members can add guests to pages."}),getOptions:()=>[{key:"everyone",label:eu},{key:"request",label:Xc},{key:"wo_only",label:au}],getValueFromSpace:e=>Gc({store:e,guestRequestStore:e}),getValueFromTeam:(e,t)=>Gc({store:e,guestRequestStore:t}),getValueFromOrganization:e=>{const t=e.getDisableGuests(),a=e.getEnableGuestInviteRequest();if(void 0!==t&&void 0!==a)return Yc({disableGuests:t,enableGuestInviteRequests:a})},formatValueToSave:e=>"wo_only"===e?{disable_guests:!0,enable_guest_invite_requests:!1}:"request"===e?{disable_guests:!0,enable_guest_invite_requests:!0}:"everyone"===e?{disable_guests:!1,enable_guest_invite_requests:!1}:void(0,kt().t1)(e),formatUndefinedToSave:()=>({disable_guests:null,enable_guest_invite_requests:null})},Jc={settingName:"member-requests",title:(0,i.jsx)(x()._H,{id:"organization.security.settings.memberRequests.title",defaultMessage:"Requesting membership"}),byline:(0,i.jsx)(x()._H,{id:"organization.security.settings.memberRequests.byline",defaultMessage:"Manage whether members can submit requests to add more members.",values:{b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)("b",{children:t})}}}),getOptions:function(){return[{key:"yes",label:ou},{key:"no",label:ru}]},getValueFromSpace:e=>Uc(e.getDisableMembershipRequests()),getValueFromOrganization:e=>{const t=e.getDisableMembershipRequests();if(void 0!==t)return Uc(t)},formatValueToSave:e=>"yes"===e?{disable_membership_requests:!1}:"no"===e?{disable_membership_requests:!0}:void(0,kt().t1)(e),formatUndefinedToSave:()=>({disable_membership_requests:null})},Qc={settingName:"restrict-integrations",title:(0,i.jsx)(x()._H,{id:"organization.security.settings.integrations.title",defaultMessage:"Adding integrations"}),byline:(0,i.jsx)(x()._H,{id:"organization.security.settings.integrations.byline",defaultMessage:"Control what integrations members can connect."}),getOptions:()=>[{key:"approved_only",label:su},{key:"approved_or_built_by_notion",label:nu},{key:"no_restrictions",label:iu}],getValueFromSpace:e=>e.getIntegrationRestrictions()??"no_restrictions",getValueFromOrganization:e=>e.getIntegrationRestrictions(),formatValueToSave:e=>({integration_restrictions:e}),formatUndefinedToSave:()=>({integration_restrictions:null})},Xc=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.byRequest",defaultMessage:"By request only"}),eu=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.everyone",defaultMessage:"Enabled for everyone"}),tu=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.noOne",defaultMessage:"Disabled for everyone"}),au=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.workspaceOwnersOnly",defaultMessage:"Workspace owners only"}),su=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.onlyApproved",defaultMessage:"Approved only"}),nu=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.approvedOrNotion",defaultMessage:"Native or approved"}),iu=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.noRestrictions",defaultMessage:"All integrations"}),ou=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.enabledForMembers",defaultMessage:"Enabled for members"}),ru=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.disabledForMembers",defaultMessage:"Disabled for members"});function lu(){return[{key:"everyone",label:eu},{key:"none",label:tu}]}const du=(0,i.jsx)(x()._H,{id:"settingsConsole.setting.value.workspaceManaged",defaultMessage:"Workspace managed"}),cu={[Zc.settingName]:Zc,[Wc.settingName]:Wc,[Kc.settingName]:Kc,[$c.settingName]:$c,[Jc.settingName]:Jc,[Qc.settingName]:Qc};const uu="setting-name",mu=(0,x().vU)({name:{id:"settingsConsole.securityTable.column.settingName.title",defaultMessage:"Name"},members:{id:"settingsConsole.securityTable.column.members.title",defaultMessage:"Members"}}),gu={id:"name",headerTitle:(0,i.jsx)(x()._H,{...mu.name}),renderCell:e=>(0,i.jsx)(Ht().iP,{title:e.title,byline:e.byline,icon:(0,i.jsx)(B().Z,{disabled:!0,icon:e.icon,title:e.title,size:e.iconSize,isLarge:!0,isEmptyPage:!1}),iconSize:e.iconSize,iconMargin:Ht().dI,summaryStyles:{width:`calc(100% - ${e.iconSize+Ht().dI}px)`}}),widthData:{widthPercent:0,minWidth:350,maxWidth:350},sortable:!1},pu={id:"teams",headerTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.column.team.title",defaultMessage:"Teamspaces"}),renderCell:e=>{if(void 0!==e.teamCount)return(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.column.team.value",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.teamCount}})})},widthData:{widthPercent:100,minWidth:160},sortable:!1},hu={id:"members",headerTitle:(0,i.jsx)(x()._H,{...mu.members}),renderCell:e=>void 0===e.memberCount?(0,i.jsx)(se().Z,{style:{borderRadius:L().E.small,width:"60%",height:18}}):(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.column.members.value",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.memberCount}})}),widthData:{widthPercent:100,minWidth:150},sortable:!1},fu={id:"setting",headerTitle:(0,i.jsx)("div",{}),renderCell:e=>(0,i.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"right",alignItems:"center"},children:[(0,i.jsx)(Rc().D,{isBlue:!0,style:{fontWeight:510,visibility:e.shouldShowBulkApply?void 0:"hidden"},onClick:e.onBulkApply,disabled:!e.shouldShowBulkApply,children:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.bulkApply",defaultMessage:"Bulk apply"})}),(0,i.jsx)(yu,{isPending:e.isPending,settingValue:e.settingValue,settingOptions:e.settingOptions,onSelectOption:e.onSelectOption})]}),widthData:{widthPercent:0,minWidth:100},sortable:!1},xu={id:"guests",headerTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.column.guests.title",defaultMessage:"Guests"}),renderCell:e=>{if(void 0!==e.guestCount)return(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.column.guests.value",defaultMessage:"{guestCount, plural, one {{guestCount} guest} other {{guestCount} guests}}",values:{guestCount:e.guestCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1},vu={id:"sites",headerTitle:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.column.sites.title",defaultMessage:"Sites"}),renderCell:e=>{if(void 0!==e.guestCount)return(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.column.sites.value",defaultMessage:"{siteCount, plural, one {{siteCount} site} other {{siteCount} sites}}",values:{siteCount:e.siteCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1};function yu(e){let{settingValue:t,settingOptions:a,isPending:s,onSelectOption:n}=e;const o=(0,S().yK)((e=>({button:{marginTop:4,marginBottom:4,fontWeight:R().Ue.medium,color:e.text.primary,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground},menu:{width:300},container:{display:"flex",width:"100%",justifyContent:"right"},pendingIndicator:{position:"absolute",top:1,right:-3,background:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[300],border:`1px solid ${e.contentBackground}`,width:9,height:9,borderRadius:9}})),[]);return(0,i.jsx)("div",{style:o.container,children:(0,i.jsxs)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",style:{position:"relative"},children:[(0,i.jsx)(ts().L,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:n,buttonStyle:o.button,buttonHoverStyle:o.buttonHover,menuStyle:o.menu,placementToOrigin:_a().Placement.Left}),s&&(0,i.jsx)("div",{style:o.pendingIndicator})]})})}function bu(e){let{settingValue:t,spaceStore:a,teamStores:s,config:n}=e;const i={},o={},r=n.getValueFromSpace(a);if(i[a.id]=t!==r?t:void 0,n.teamSettingName)for(const l of s){const e=n.getValueFromTeam(l,a);o[l.id]=t!==e?t:void 0}return{spaceChanges:i,teamChanges:o}}function Su(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===gu.id?e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}:t===hu.id?"memberCount":"title"})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,kt().t1)(t)}));return We().Xo(t,s,n)}function ju(e){var t,a;const{spaceStores:n,teamStoresForSpace:o,teamAggregateDataForSpace:r,orgPeopleCountState:l,sitesForSpace:d,config:c,organizationStore:u,appliedSorts:m,setSpaceExpandedState:g}=e,{pendingSpaceSettings:p,pendingTeamSettings:h,setPendingSpaceSettings:f,setPendingTeamSettings:v,pendingOrgSetting:y}=(0,s.useContext)(Lc().u),S=null===(t=l.value)||void 0===t?void 0:t.membersForSpace,j=null===(a=l.value)||void 0===a?void 0:a.guestsForSpace,w=(0,b().VK)((()=>n.map((e=>{var t,a,s;const n=o[e.id],l=p[e.id]??c.getValueFromSpace(e),b=function(e){let{teamStores:t,spaceStore:a,config:s,spaceSettingValue:n,teamAggregateDataForSpace:o,pendingTeamSettings:r,setPendingTeamSettings:l,appliedSorts:d}=e;if(!s.teamSettingName)return;const c=null==t?void 0:t.map((e=>{var t;const d=s.getValueFromTeam(e,a),c=null===(t=o[a.id])||void 0===t?void 0:t[e.id];return{id:e.id,iconSize:24,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.team.byline",defaultMessage:"Teamspace"}),memberCount:(null==c?void 0:c.memberCountWithGuests)??0,settingValue:r[e.id]??d,parentSettingValue:n,settingOptions:s.getOptions(),onSelectOption:t=>{const a=t===d?void 0:t;l({[e.id]:a})},isClickable:!1,isPending:(0,kt().$K)(r[e.id])}}));return null!=d&&d.length&&c?Su({rows:c,appliedSorts:d}):c}({teamStores:n,spaceStore:e,config:c,spaceSettingValue:l,setPendingTeamSettings:v,pendingTeamSettings:h,teamAggregateDataForSpace:r,appliedSorts:m}),w=c.getValueFromSpace(e),M={id:e.id,iconSize:28,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.organization.space",defaultMessage:"Workspace"}),guestCount:j?null===(t=j[e.id])||void 0===t?void 0:t.length:void 0,siteCount:d?d[e.id]:void 0,memberCount:S?null===(a=S[e.id])||void 0===a?void 0:a.length:void 0,teamCount:null==n?void 0:n.length,collapsibleRows:b,settingValue:l,parentSettingValue:y??c.getValueFromOrganization(u),settingOptions:c.getOptions(),onSelectOption:t=>{const a=t===w?void 0:t;f({[e.id]:a})},isClickable:!1,isPending:(0,kt().$K)(p[e.id]),onBulkApply:()=>{const{spaceChanges:t,teamChanges:a}=bu({spaceStore:e,teamStores:o[e.id],config:c,settingValue:l});f(t),v(a),Object.values(a).filter(kt().$K).length&&g({[e.id]:!0})}};return M.shouldShowBulkApply=M.isPending&&M.onBulkApply&&Boolean(null===(s=M.collapsibleRows)||void 0===s?void 0:s.some((e=>e.settingValue!==M.settingValue))),M}))),[n,o,r,S,j,d,c,u,p,f,h,v,y,m,g]);return null!=m&&m.length&&w?Su({rows:w,appliedSorts:m}):w}function wu(e){var t,a;let{organizationStore:n,spaceStores:o,teamStoresForSpace:r,config:l,hasTeamColumn:c,rowFilterFn:u,isFiltered:m,appliedSorts:g}=e;const p=(0,y().O7)(),h=(0,Rt().Z)(),f=(0,s.useMemo)((()=>o.map((e=>e.id))),[o]),{teamAggregateDataForSpace:v}=(0,Wo().f)(f),j=Boolean("publish-sites"===l.settingName),w=function(e){let{environment:t,settingName:a}=e;const{spaceIds:n}=(0,s.useContext)(z().g),[i]=(0,Ke().r5)((async()=>{if((0,kt().$K)(a)&&"publish-sites"!==a)return;let e=0;const s={};return await(0,Ye().qd)(n,Ge().v,(async a=>{const n=await M().callApi({eventName:"getPublishedPageCountForOrganizationSpace",environment:t,data:{spaceId:a}});"failed"!==n.type&&(e+=n.data.publishedPagesCount,s[a]=n.data.publishedPagesCount)})),{orgSitesCount:e,sitesCountForSpace:s}}),[t,n,a]);return{state:i}}({environment:p,settingName:l.settingName}),C=null===(t=w.state.value)||void 0===t?void 0:t.orgSitesCount,_=null===(a=w.state.value)||void 0===a?void 0:a.sitesCountForSpace,{state:T}=(0,Xi().J)(),[k,I]=(0,s.useState)({}),[H,P]=(0,s.useState)({}),D=function(e){var t,a;const{organizationStore:n,orgPeopleCountState:o,orgSitesCount:r,teamStoresForSpace:l,config:d,spaceStores:c,setSpaceExpandedState:u}=e,{pendingOrgSetting:m,setPendingOrgSetting:g,setPendingSpaceSettings:p,setPendingTeamSettings:h}=(0,s.useContext)(Lc().u),f=null===(t=o.value)||void 0===t?void 0:t.memberCount,v=null===(a=o.value)||void 0===a?void 0:a.guestCount;return(0,b().VK)((()=>{const e=d.getValueFromOrganization(n),t=m??e??Oc;return{id:n.id,icon:n.getIcon(),iconSize:32,title:n.getName()??"Default",byline:(0,i.jsx)(x()._H,{id:"settingsConsole.securityTable.organization.byline",defaultMessage:"Organization"}),memberCount:f,guestCount:v,siteCount:r,teamCount:Object.values(l).flat().length,settingValue:t,parentSettingValue:void 0,settingOptions:[{key:Oc,label:du},...d.getOptions()],onSelectOption:t=>{let a=t===e?void 0:t;void 0===e&&t===Oc&&(a=void 0),g(a)},onBulkApply:()=>{let e={},a={};const s={};for(const n of c){const{spaceChanges:i,teamChanges:o}=bu({spaceStore:n,teamStores:l[n.id],config:d,settingValue:t});e={...e,...i},a={...a,...o},Object.values(o).filter(kt().$K).length&&(s[n.id]=!0)}p(e),h(a),u(s)},isClickable:!1,hideToggle:!0,isPending:(0,kt().$K)(m)}}),[n,c,l,f,v,r,d,m,g,p,h,u])}({organizationStore:n,orgPeopleCountState:T,orgSitesCount:C,teamStoresForSpace:r,config:l,spaceStores:o,setSpaceExpandedState:e=>I((t=>({...t,...e})))}),A=ju({spaceStores:o,teamStoresForSpace:r,teamAggregateDataForSpace:v,orgPeopleCountState:T,sitesForSpace:_,config:l,organizationStore:n,appliedSorts:g,setSpaceExpandedState:e=>I((t=>({...t,...e})))});D.shouldShowBulkApply=D.isPending&&D.settingValue!==Oc&&D.onBulkApply&&A.some((e=>{var t;return e.settingValue!==D.settingValue||Boolean(null===(t=e.collapsibleRows)||void 0===t?void 0:t.some((e=>e.settingValue!==D.settingValue)))}));const N="guest-invites"===l.settingName,R=(0,s.useMemo)((()=>[gu,N?xu:void 0,j?vu:void 0,c?pu:void 0,hu,fu].filter(kt().$K)),[c,N,j]),B=R.map((e=>({...e,headerStyle:h.tableHeader,rowStyle:h.tableRow}))),L=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:R,theme:e,containerMarginTop:0})),[R]);return(0,s.useEffect)((()=>{if(!0===m){const e={};for(const t of f)e[t]=!0;P(e)}else P({})}),[m,f]),(0,i.jsx)(Bc().gG,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,rows:[D,...A],rowFilterFn:u,isFiltered:m,columnRenderInfo:B,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:d().Y,title:(0,i.jsx)(x()._H,{id:"organizationSecuritySettingTable.empty",defaultMessage:"No settings found"}),byline:(0,i.jsx)(x()._H,{id:"organizationSecuritySettingTable.empty.byline",defaultMessage:"There are no settings that match this query."})}),styles:L,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64},expandedState:m?H:k,setExpandedState:m?P:I})}function Mu(e){let{selectedGroupIds:t,setSelectedGroupIds:a,groups:s}=e;const n=function(e){const t=(0,S().yK)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,b().VK)((()=>e.map((e=>({key:e.groupId,value:e.groupId,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(B().Z,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,size:ba().M,title:e.groupName,isLarge:!0,emojiSize:ba().M,isRaw:!1}),(0,i.jsx)(es().Z,{style:t.optionTitle,children:e.groupName})]}),shortTitle:e.groupName,count:(0,i.jsx)(x()._H,{id:"groupsFilter.numMembers",defaultMessage:"{count} {count, plural, one {member} other {members}}",values:{count:e.memberCount}})})))),[e,t])}(s);return(0,i.jsx)(Ts().J,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationConsole.table.filters.groups.title",defaultMessage:"Groups"}),pillIcon:p,selectedItems:t,setSelectedItems:a,items:n})}function Cu(e){let{selectedTeamspaceIds:t,setSelectedTeamspaceIds:a,teamspaceStores:s}=e;const n=function(e){const t=(0,S().yK)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,b().VK)((()=>e.map((e=>{const a=e.getName(),s=e.getIcon();return{key:e.id,value:e.id,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(B().Z,{disabled:!0,icon:s,isEmptyPage:!1,size:ba().M,title:a,isLarge:!0,emojiSize:ba().M,isRaw:!1}),(0,i.jsx)(es().Z,{style:t.optionTitle,children:a})]}),shortTitle:a}}))),[e,t])}(s);return(0,i.jsx)(Ts().J,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationConsole.table.filters.teamspaces.title",defaultMessage:"Teamspaces"}),pillIcon:h().K,selectedItems:t,setSelectedItems:a,items:n})}const _u={id:"groups",headerTitle:(0,i.jsx)(x()._H,{id:"singleUserView.groupsTable.groupsColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(Ht().iP,{title:e.groupName,icon:(0,i.jsx)(B().Z,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,title:e.groupName,size:ba().CD,isLarge:!0}),iconSize:ba().CD,summaryStyles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1},Tu={id:"members",headerTitle:(0,i.jsx)(x()._H,{id:"singleUserView.groupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(At().z6,{}):(0,i.jsx)(H().q,{colorName:"secondary",children:(0,i.jsx)(x()._H,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"singleUserView.groupsTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:30,minWidth:50},sortable:!1};function ku(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(x()._H,{id:"singleUserView.groupsTable.associatedTeamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Vt().a.Loading)return(0,i.jsx)(At().z6,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(X().M2,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:30,minWidth:50},sortable:!1}}function Iu(e){let{organizationStore:t,userStore:a}=e;const n=(0,Js()._)(),o=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[r,l]=(0,s.useState)(o[0]),{teamStores:d,loading:c}=(0,A().x)(o),u=(0,s.useMemo)((()=>d[r]??[]),[d,r]),m=s.useMemo((()=>{return[_u,Tu,ku(u,c),(e=t.id,{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Vt().a.Loading?null:(0,i.jsx)(ro,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{width:30},sortable:!1})];var e}),[u,t.id,c]),g=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:m,theme:e,containerMarginTop:0})),[m]),p=(0,S().yK)((()=>({filters:{display:"flex",flexDirection:"row"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{display:"flex",flexDirection:"row"}})),[]),h=[{id:_u.id,name:T().Z.formatMessage(mu.name),type:"title"},{id:Tu.id,name:T().Z.formatMessage(mu.members),type:"number"}],[f,v]=(0,s.useState)(),[y,j]=(0,s.useState)(!1),[w,M]=(0,s.useState)(),{rows:C,loading:_}=function(e){let{userId:t,spaceId:a,teamStores:n}=e;const i=(0,s.useMemo)((()=>[t]),[t]),o=(0,s.useMemo)((()=>[a]),[a]),{spaceIdToUserPermissionGroupMap:r,loading:l}=Je({userIds:i,spaceIds:o}),{permissionGroupsForSpace:d,loading:c}=$e({spaceIds:o}),u=(0,s.useMemo)((()=>{var e;return(null===(e=r[a])||void 0===e?void 0:e[t])??[]}),[a,r,t]),m=(0,s.useMemo)((()=>(d[a]??[]).filter((e=>u.includes(e.group.group_id)))),[a,d,u]);return{rows:(0,b().VK)((()=>m.map((e=>{const t=e.group;return{type:Vt().a.SingleUserGroup,id:t.group_id,groupId:t.group_id,groupName:t.name,groupIcon:t.icon?{pointer:{id:t.group_id,spaceId:t.space_id,table:Nt().GQ},icon:t.icon}:void 0,memberCount:e.memberCount,associatedTeamspaceIds:n.filter((e=>e.isAssociatedWithPermissionGroup(t))).map((e=>e.id)),isClickable:!1}}))),[m,n]),loading:l||c}}({userId:a.id,spaceId:r,teamStores:u}),{filters:k,updateFilters:I,query:H,setQuery:P,filteredRows:D,onPageChange:z,hasMoreResults:N}=function(e,t){const[a,n]=(0,s.useState)({pageNum:1}),i=(0,s.useCallback)((e=>{n((t=>({...t,...e,pageNum:1})))}),[]),[o,r]=(0,s.useState)(""),{filteredRows:l,hasMoreResults:d}=(0,s.useMemo)((()=>{if(!e)return{filteredRows:[],hasMoreResults:!1};let s=e;o&&(s=(0,rt().ZP)(o,s,(e=>e.groupName))),a.groupIds&&a.groupIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.groupIds)||void 0===t?void 0:t.includes(e.groupId)}))),a.teamspaceIds&&a.teamspaceIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.teamspaceIds)||void 0===t?void 0:t.some((t=>e.associatedTeamspaceIds.includes(t)))}))),s=t&&t.length>0?s.sort(((e,a)=>{for(const s of t)if("groups"===s.propertyId){const t=e.groupName,n=a.groupName;if(t!==n)return"ascending"===s.direction?t.localeCompare(n):n.localeCompare(t)}else if("members"===s.propertyId){const t=e.memberCount,n=a.memberCount;if(t!==n)return"ascending"===s.direction?t-n:n-t}return 0})):s.sort(((e,t)=>e.groupName.localeCompare(t.groupName)));const n=s.length>a.pageNum*Nc;return s=s.slice((a.pageNum-1)*Nc,a.pageNum*Nc),{filteredRows:s,hasMoreResults:n}}),[e,o,a.groupIds,a.teamspaceIds,a.pageNum,t]);return{filters:a,updateFilters:i,query:o,setQuery:r,filteredRows:l,onPageChange:e=>{const t={...a,pageNum:e};n(t)},hasMoreResults:d}}(C,f),R=En({spaceStores:n}),B=w??f??[],L=_?(0,Vt().s)():D;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:p.actionContainer,children:[(0,i.jsxs)("div",{style:p.filters,children:[(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{sortProperties:h,isMenuOpen:y,setIsMenuOpen:j,onApply:e=>{j(!1),v(e),M(void 0)},currentSorts:B})}),B.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(Ps,{selectedSpaceId:r,setSelectedSpaceId:e=>{I({teamspaceIds:void 0,groupIds:void 0}),l(e)},spaceData:R}),(0,i.jsx)(Mu,{selectedGroupIds:k.groupIds||[],setSelectedGroupIds:e=>{I({groupIds:e})},groups:C},`${r}-groups`),(0,i.jsx)(Cu,{selectedTeamspaceIds:k.teamspaceIds||[],setSelectedTeamspaceIds:e=>{I({teamspaceIds:e})},teamspaceStores:u},`${r}-teamspaces`)]}),(0,i.jsxs)("div",{style:p.search,children:[(0,i.jsx)(va().L,{appliedSorts:f,openSortPillMenu:e=>{e&&M([{propertyId:e,direction:"ascending"}]),j(!0)},sortProperties:h}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:H,setQueryFilter:P})]})]}),(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,columnRenderInfo:m,rows:L,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"singleUserView.groupsTable.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(x()._H,{id:"singleUserView.groupsTable.empty.byline",defaultMessage:"There are no groups that match this query."})}),styles:g,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{z(k.pageNum+1)},onLoadPrevious:()=>{z(k.pageNum-1)},hasNextPage:N,hasPrevPage:k.pageNum>1,currentPage:k.pageNum}})]})}const Hu=(0,x().vU)({groups:{id:"settingsConsole.singleUserView.groupsTab.title",defaultMessage:"Groups"},groupsLabel:{id:"settingsConsole.singleUserView.groupsTab.label",defaultMessage:"View permission groups this user is a part of and associated teamspaces."}});function Pu(e){const t=(0,x().YB)();return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{title:t.formatMessage(Hu.groups),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:t.formatMessage(Hu.groupsLabel)})}),(0,i.jsx)(Iu,{...e})]})}var Du=()=>a(235605);function zu(e){const{userStore:t,metadata:a,onDismiss:n,onSubmit:o}=e,r=(0,x().YB)(),l=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.yellowPrimary},content:{height:"fit-content",width:390,border:"1px solid var(--stroke-regular, #E3E2E0)",borderRadius:6,padding:"4px 12px",display:"flex",alignItems:"center"},check:{height:20,width:20,color:e.text.tertiary}})),[]);const d=(0,b().VK)((()=>t.getDisplayName(r)),[t,r]),{state:c}=(0,Xi().J)(),{workspaceName:u,workspaceIcon:m,memberCount:g}=(0,b().VK)((()=>{var e;return a.isExternal?{workspaceName:a.workspaceName,workspaceIcon:a.workspaceIcon,memberCount:0}:{workspaceName:a.spaceStore.getName(),workspaceIcon:a.spaceStore.getIcon(),memberCount:(null===(e=c.value)||void 0===e||null===(e=e.membersForSpace[a.spaceStore.id])||void 0===e?void 0:e.length)||0}}),[a,c]),p=a.isExternal,h=!p&&(0,fn().L6)(a.userRole),[f,v]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:(0,Za().H)(l.icon),title:p||h?r.formatMessage(Au.removeMemberTitle):r.formatMessage(Au.removeGuestAccessTitle),byline:r.formatMessage(p?Au.removeMemberFromExternalWorkspaceByline:h?Au.removeMemberByline:Au.removeGuestAccessByline,{b:e=>(0,i.jsx)("b",{children:e}),userName:d})}),footer:(0,i.jsx)(W().mz,{primaryText:p||h?r.formatMessage(Au.removeMemberButton):r.formatMessage(Au.removeGuestAccessButton),primaryAction:async()=>{v(!0),await async function(){await o(),n()}(),v(!1)},primaryDisabled:f,secondaryText:r.formatMessage(Au.cancelButton),secondaryAction:n}),children:(0,i.jsxs)("div",{style:l.content,children:[(0,i.jsx)(Ht().iP,{title:u,byline:p?r.formatMessage(Au.externalWorkspace):(0,i.jsxs)(i.Fragment,{children:[r.formatMessage(Au.workspace),(0,i.jsx)(P().Z,{}),(0,i.jsx)(re().To,{memberCount:g})]}),icon:(0,i.jsx)(B().Z,{disabled:!0,icon:m,title:u,size:32,isLarge:!0,isEmptyPage:!1}),iconSize:32}),(0,Du().k)(l.check)]})})})}const Au=(0,x().vU)({removeMemberTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberTitle",defaultMessage:"Remove member from workspace"},removeGuestAccessTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessTitle",defaultMessage:"Remove guest access"},removeMemberByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this workspace."},removeGuestAccessByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessByline",defaultMessage:"<b>{userName}</b> will lose guest access to all pages in this workspace."},removeMemberFromExternalWorkspaceByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberFromExternalWorkspaceByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this external workspace."},removeMemberButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberButton",defaultMessage:"Remove member"},removeGuestAccessButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessButton",defaultMessage:"Remove guest access"},cancelButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.cancelButton",defaultMessage:"Cancel"},workspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.workspace",defaultMessage:"Workspace"},externalWorkspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.externalWorkspace",defaultMessage:"External workspace"}});function Nu(e){const{row:t}=e,[a,n]=(0,s.useState)(!1);return(0,i.jsx)("div",{style:{marginRight:0,marginLeft:"auto"},children:function(e){switch(e.metadata.type){case"workspace":if(e.metadata.isExternal){const t=e.metadata.onClick;return(0,i.jsx)(K().mk,{isBlue:!0,onClick:()=>{n(!0),t(),n(!1)},children:(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.removeFromWorkspace",defaultMessage:"Remove from workspace"})})}const t=e.metadata.onUpdateRole;return"none"===e.metadata.roleValue?(0,i.jsx)(K().mk,{isBlue:!0,disabled:a,onClick:async()=>{n(!0),await t("member"),n(!1)},children:(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.addToWorkspace",defaultMessage:"Add to workspace"})}):"page_guest"===e.metadata.roleValue?(0,i.jsx)(K().mk,{isBlue:!0,disabled:a,onClick:async()=>{n(!0),await t("none"),n(!1)},children:(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.removeGuestAccess",defaultMessage:"Remove guest access"})}):(0,i.jsx)(Ru,{settingValue:e.metadata.roleValue,settingOptions:e.metadata.roleOptions,onSelectOption:t});case"teamspace":return;default:(0,kt().t1)(e.metadata)}}(t)})}function Ru(e){let{settingValue:t,settingOptions:a,onSelectOption:s}=e;const n=(0,S().yK)((e=>({dropdown:{marginTop:4,marginBottom:4,border:void 0,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground}})),[]);return(0,i.jsx)(ts().L,{isMobile:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:s,buttonStyle:{...K().sM,...n.dropdown},placementToOrigin:_a().Placement.Left,buttonHoverStyle:n.buttonHover})}const Bu=[{id:"name",renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{iconSize:Bc().vk,iconStyles:{marginLeft:0}}):(0,i.jsxs)(ea().X2,{gap:8,children:[(0,i.jsx)(Ht().iP,{title:e.title,iconSize:Bc().vk,icon:(0,i.jsx)(B().Z,{disabled:!0,icon:e.icon,title:e.title,size:Bc().vk,isLarge:!0,isEmptyPage:!1}),summaryStyles:{overflow:"hidden"}}),"workspace"===e.metadata.type&&e.metadata.isExternal&&(0,i.jsx)(zt().Z,{content:(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace.badge",defaultMessage:"External"})})]}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:40,minWidth:100}},{id:"metadata",renderCell:e=>{if(e.type===Vt().a.Loading)return(0,i.jsx)(At().z6,{});if("workspace"===e.metadata.type&&e.metadata.isExternal)return(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace",defaultMessage:"External workspace"})});let t,a;switch(e.metadata.type){case"workspace":t=(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.workspace",defaultMessage:"Workspace"}),a=(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.teamspaceCount",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.metadata.teamCount}});break;case"teamspace":t=(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.teamspace",defaultMessage:"Teamspace"}),a=(0,i.jsx)(x()._H,{id:"orgConsole.singleUserView.workspacesTable.teamspaceMemberCount",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:e.metadata.memberCount}});break;default:(0,kt().t1)(e.metadata)}return(0,i.jsxs)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:[t," · ",a]})},headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}},{id:"action",renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(At().z6,{}):(0,i.jsx)(Nu,{row:e}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}}];a(492176),a(7961);function Lu(e){const{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o}=e,{externalSpaceRows:r,loading:l}=function(e){let{organizationStore:t,userStore:a,setRemoveUserModalState:n}=e;const o=(0,y().O7)(),{managedUser:r,reloadManagedUser:l,loading:d}=function(e){let{organizationStore:t,userStore:a}=e;const n=(0,y().O7)(),i=(0,b().VK)((()=>t.getEmailDomains()),[t]),o=(0,b().VK)((()=>{const e=a.getEmail();return!(!e||!(0,ot().dy)(i,e))}),[i,a]),[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(!1),[u,m]=(0,Ke().r5)((async()=>{if(0===i.length||!o)return;c(!0);const e=await M().callApi({eventName:"getManagedUsers",environment:n,data:{query:a.id,emailDomains:i}});if("failed"===e.type)throw c(!1),e.error;const t=e.data.results;l(t.at(0)),c(!1)}),[i,n,o,a.id]);return{managedUser:r,loading:d,reloadManagedUser:m}}({organizationStore:t,userStore:a}),c=(0,s.useMemo)((()=>(null==r?void 0:r.workspaces.filter((e=>e.isExternal)).map((e=>e.id)))??[]),[r]),u=(0,b().VK)((()=>c.map((e=>function(e){let{environment:t,userStore:a,spaceId:s,managedUser:n,reloadManagedUser:o,setRemoveUserModalState:r}=e;const l=null==n?void 0:n.workspaces.find((e=>e.id===s));if(!l)return;const d=l.name,c=l.icon?{pointer:{table:qt().bx,id:s},icon:l.icon}:void 0,u={type:Vt().a.SingleUserWorkspace,id:s,spaceId:s,icon:c,title:d,metadata:{type:"workspace",isExternal:!0,onClick:()=>{r({userStore:a,metadata:{isExternal:!0,workspaceName:d??"",workspaceIcon:c},onSubmit:async()=>{await async function(e){let{environment:t,userId:a,spaceId:s,spaceName:n}=e;qa().wV(t,{external_space_id:s});const o=await M().callApi({eventName:"removeManagedUserFromSpace",environment:t,data:{userId:a,targetSpaceId:s}});qa().dw(t,{external_space_id:s}),"success"===o.type?et().oV({label:(0,i.jsx)(x()._H,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:n}})}):et().oV({label:(0,i.jsx)(x()._H,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:n}})})}({environment:t,userId:a.id,spaceId:s,spaceName:d??""}),await o()}})}},isPending:!1,isClickable:!1};return u}({environment:o,userStore:a,spaceId:e,managedUser:r,reloadManagedUser:l,setRemoveUserModalState:n})))),[c,o,a,r,l,n]);return{externalSpaceRows:u,loading:d}}({organizationStore:t,userStore:a,setRemoveUserModalState:o}),{organizationSpaceRows:d,loading:c}=function(e){let{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:i}=e;const o=(0,x().YB)(),r=(0,Js()._)(),l=(0,Js()._)(),d=(0,s.useMemo)((()=>r.map((e=>e.id))),[r]),{teamStores:c,loading:u}=(0,A().x)(d),{teamAggregateDataForSpace:m,loading:g}=(0,Wo().f)(d),p=function(e){let{organizationId:t,userId:a,userData:n}=e;const{removeUserFromSpaceCache:i,updateUserRoleInSpaceCache:o}=n,r=(0,y().O7)(),l=(0,x().YB)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(D().V),c=(0,s.useCallback)((async e=>{const s=e.id,n=await M().callApi({eventName:"removeUserFromOrganizationSpaces",environment:r,data:{organizationId:t,userIds:[a],spaceIds:[s]}});"success"===n.type?(et().oV({label:l.formatMessage(Ao.changeRoleSuccess)}),i(s),d({data:n.data})):C().UW((0,_().wf)(T().Z.getIntl(),n))}),[r,t,a,l,i,d]),u=(0,s.useCallback)((async(e,s)=>{const n=await M().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:r,data:{organizationId:t,userIds:[a],newRole:s,spaceId:e}});"success"===n.type?(et().oV({label:l.formatMessage(Ao.changeRoleSuccess)}),o(e,(0,fn().pW)(s)),d({data:n.data})):C().UW((0,_().wf)(T().Z.getIntl(),n))}),[r,l,t,d,o,a]),m=(0,s.useCallback)((async(e,s)=>{const n=await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:r,data:{organizationId:t,existingUserIds:[a],newUserEmails:[],spaceIds:[e],role:s}});"success"===n.type?(et().oV({label:l.formatMessage(Ao.addUserSuccess)}),o(e,(0,fn().pW)(s)),d({data:n.data})):C().UW((0,_().wf)(T().Z.getIntl(),n))}),[r,l,t,d,o,a]);return(0,s.useCallback)((async(e,t,a)=>{if(t===a)return;const s=e.id;if((0,fn().L6)(t))switch(a){case"none":await c(e);break;case"page_guest":throw new(Do().p8)("Cannot change role to guest.");case"owner":case"membership_admin":case"member":await u(s,a);break;default:(0,kt().t1)(a)}else switch(a){case"none":await c(e);break;case"page_guest":throw new(Do().p8)("Cannot change role to guest.");case"member":case"owner":case"membership_admin":await m(s,a);break;default:(0,kt().t1)(a)}}),[m,c,u])}({organizationId:t.id,userId:a.id,userData:n}),h=(0,s.useMemo)((()=>[a.id]),[a]),{spaceIdToUserPermissionGroupMap:f,loading:v}=Je({userIds:h,spaceIds:d}),S=(0,s.useMemo)((()=>u||g||v),[u,g,v]),j=(0,b().VK)((()=>d.map((e=>{const t=l.find((t=>t.id===e));if(!t)return;const s=c[e]??[],r=m[e]??{};return function(e){let{userStore:t,spaceStore:a,teamStores:s,teamDataForSpace:n,userPermissionGroupIds:i,userData:o,intl:r,onUpdateMemberRole:l,setRemoveUserModalState:d}=e;const{userSpaceAccessMap:c}=o,u=c.get(a.id),m=u?(0,w().FN)(u)?"page_guest":(0,fn().Ci)(u.role):"none",g=t.id,p=(0,fn().L6)(m)?null==s?void 0:s.map((e=>{var t;const s=n[e.id];return function(e){let{userId:t,spaceId:a,teamStore:s,teamData:n,userPermissionGroups:i}=e;const o=s.isMemberOrGuest(t,i)??!1,r=o||s.isDefault();if(!r)return;const l={type:Vt().a.SingleUserWorkspace,id:s.id,spaceId:a,icon:s.getIcon(),title:s.getName()??"",metadata:{type:"teamspace",memberCount:(null==n?void 0:n.memberCountWithGuests)??0,onClick:()=>{}},isPending:!1,isClickable:!1};return l}({userId:g,spaceId:a.id,teamStore:e,teamData:s,userPermissionGroups:new Set((null===(t=i[a.id])||void 0===t?void 0:t[g])??[])})})).filter(kt().$K):void 0,h={type:Vt().a.SingleUserWorkspace,id:a.id,spaceId:a.id,icon:a.getIcon(),title:a.getName()??"",metadata:{type:"workspace",isExternal:!1,teamCount:null==s?void 0:s.length,roleValue:m,roleOptions:m?Ou(r):[],onUpdateRole:async e=>{"none"===e?d({userStore:t,metadata:{isExternal:!1,userRole:m,spaceStore:a},onSubmit:async()=>{await l(a,m,e,o)}}):await l(a,m,e,o)}},collapsibleRows:p,isPending:!1,isClickable:!1};return h}({userStore:a,spaceStore:t,teamStores:s,teamDataForSpace:r,userPermissionGroupIds:f,userData:n,intl:o,onUpdateMemberRole:p,setRemoveUserModalState:i})}))),[d,l,c,m,f,a,n,o,p,i]);return{organizationSpaceRows:j,loading:S}}({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o});return{spaceRows:(0,s.useMemo)((()=>We().Xo([...d,...r].filter(kt().$K),(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}),"asc")),[r,d]),loading:(0,s.useMemo)((()=>l||c),[l,c])}}function Ou(e){return[{key:"owner",label:e.formatMessage(Vu.workspaceOwnerOption)},{key:"membership_admin",label:e.formatMessage(Vu.membershipAdminOption)},{key:"member",label:e.formatMessage(Vu.workspaceMemberOption)},{key:"none",label:(0,i.jsx)("span",{style:{color:al().O9.red},children:e.formatMessage(Vu.removeFromWorkspaceOption)})}]}const Vu=(0,x().vU)({workspaceOwnerOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceOwnerOption",defaultMessage:"Workspace owner"},membershipAdminOption:{id:"settingsConsole.singleUserView.workspacesTab.membershipAdminOption",defaultMessage:"Membership admin"},workspaceMemberOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceMemberOption",defaultMessage:"Workspace member"},removeFromWorkspaceOption:{id:"settingsConsole.singleUserView.workspacesTab.removeFromWorkspaceOption",defaultMessage:"Remove from workspace"}});function Uu(e){let{organizationStore:t,userStore:a,userData:n}=e;const o=(0,x().YB)(),r=(0,Rt().Z)(),l=(0,S().yK)((e=>({filters:{display:"flex",flexDirection:"row"},loading:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},headerStyle:{...r.tableHeader,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,height:12}})),[r.tableHeader]),d=En({spaceStores:(0,Js()._)()}),[c,u]=(0,s.useState)([]),[m,g]=(0,s.useState)(void 0),{spaceRows:p,loading:h}=Lu({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:g}),f=Bu.map((e=>({...e,headerStyle:l.headerStyle,rowStyle:{...r.tableRow,height:56}}))),v=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:f,theme:e,containerMarginTop:0})),[f]),[y,b]=(0,s.useState)({}),j=h?(0,Vt().s)():p;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(Hs,{selectedSpaceIds:c,setSelectedSpaceIds:u,spaceData:d})}),(0,i.jsx)(Bc().gG,{rows:j,rowFilterFn:e=>!(e.type===Vt().a.SingleUserWorkspace&&c.length>0)||c.includes(e.spaceId),isFiltered:c.length>0,columnRenderInfo:f,renderNoRowsComponent:()=>(0,i.jsx)("div",{children:o.formatMessage(qu.emptyState)}),styles:v,showRowBorders:!0,hideHeaderRowPadding:!0,expandedState:y,setExpandedState:b}),m&&(0,i.jsx)(zu,{...m,onDismiss:()=>{g(void 0)}})]})}const qu=(0,x().vU)({emptyState:{id:"settingsConsole.singleUserView.workspacesTab.emptyState",defaultMessage:"Empty!"}}),Eu=(0,x().vU)({workspaces:{id:"settingsConsole.singleUserView.workspacesTab.title",defaultMessage:"Workspaces"},workspacesLabel:{id:"settingsConsole.singleUserView.workspacesTab.label",defaultMessage:"Add, remove, or adjust this user's role to control their workspace access and collaboration permissions."}});function Zu(e){const t=(0,x().YB)();return(0,i.jsxs)(ee,{children:[(0,i.jsx)(xa().f,{title:t.formatMessage(Eu.workspaces),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:t.formatMessage(Eu.workspacesLabel)})}),(0,i.jsx)(Uu,{...e})]})}var Fu=()=>a(902030),Wu=()=>a(928826),Ku=()=>a(220167),Gu=()=>a(840984);function Yu(e){const t=(0,y().O7)(),{spaceStore:a,daysFilter:s}=e,[{value:n,status:i}]=(0,Ke().r5)((async()=>await Gu().qA({environment:t,spaceStore:a,nextGraphFilter:s,nextTableFilter:s,nextSort:void 0})),[t,a,s]);return{usersTabData:n,loading:"resolved"!==i}}const $u={id:"user",headerTitle:(0,i.jsx)(x()._H,{id:"organization.analytics.memberViewTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(dc().Z,{containerStyle:{height:52},actorStore:e.userStore,spaceRole:e.userRole&&(0,dc().K)(e.userRole)}),widthData:{widthPercent:40,minWidth:275},sortable:!1,shouldShowSortTooltip:!1},Ju={id:"pageViews",headerTitle:(0,i.jsx)(x()._H,{id:"organization.analytics.memberViewTable.pageViewsColumn.header",defaultMessage:"Page views"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:100}}):(0,i.jsx)(Qu,{pageViews:e.pageViews}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!1};function Qu(e){let{pageViews:t}=e;const s=(0,S().yK)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor}})),[]);return void 0===t?(0,i.jsx)(Z().Z,{placement:_a().Placement.Bottom,render:e=>(0,i.jsx)("div",{...e,children:(0,a(259739).D)(s.eyeHideIcon)}),renderTooltip:e=>(0,i.jsx)(x()._H,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})}):(0,i.jsx)(es().Z,{children:t})}const Xu={id:"pageEdits",headerTitle:(0,i.jsx)(x()._H,{id:"organization.analytics.memberViewTable.pageEditsColumn.header",defaultMessage:"Page edits"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:100}}):(0,i.jsx)(es().Z,{children:e.pageEdits}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},em={id:"lastActiveAt",headerTitle:(0,i.jsx)(x()._H,{id:"organization.analytics.memberViewTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:150}}):(0,i.jsx)(Ws().B,{lastActiveAt:e.lastActiveAt,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:15,minWidth:150},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1};function tm(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(x()._H,{id:"organization.analytics.memberViewTable.teamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Vt().a.Loading)return(0,i.jsx)(At().z6,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(X().M2,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:15,minWidth:150},sortable:!1}}function am(e){var t;const{spaceStore:a,daysFilter:n,isWorkspaceAnalyticsDisabled:o}=e,r=(0,b().VK)((()=>a.getName()),[a]),l=a.id,d=(0,b().VK)((()=>[a.id]),[a.id]),{teamStores:c,loading:u}=(0,A().x)(d),m=(0,s.useMemo)((()=>c[l]??[]),[c,l]),[g,p]=(0,s.useState)(1),{usersTabData:h,loading:f}=Yu({spaceStore:a,daysFilter:n}),{rows:v,hasMoreResults:y}=function(e){let{usersTabData:t,usersTabDataLoading:a,spaceId:n,teamspaceStores:i,currPage:o}=e;const r=(0,s.useMemo)((()=>(null==t?void 0:t.usersAndStats)??[]),[t]),l=(0,s.useMemo)((()=>r.map((e=>e.userStore.id))),[r]),d=(0,b().VK)((()=>[n]),[n]),{spaceIdToUserPermissionGroupMap:c,loading:u}=Je({userIds:l,spaceIds:d}),{visibleUsers:m,loading:g}=(0,N().W)(n),p=(0,b().VK)((()=>a||u||g||!t?(0,Vt().s)():r.map((e=>{var t;let{userStore:a,stats:s}=e;return{type:Vt().a.AnalyticsMemberViewsRow,id:s.userId,userStore:a,userRole:null===(t=m.find((e=>e.userId===s.userId)))||void 0===t?void 0:t.role,pageViews:s.numPageViews,pageEdits:s.numPageEdits,lastActiveAt:s.lastActive,associatedTeamspaceIds:i.filter((e=>{var t;return e.isMemberOrGuest(s.userId,new Set((null===(t=c[n])||void 0===t?void 0:t[s.userId])??[]))})).map((e=>e.id)),isClickable:!1}}))),[a,u,g,t,r,m,i,c,n]),h=p.length>o*Ge().B,f=p.slice((o-1)*Ge().B,o*Ge().B);return{rows:f,hasMoreResults:h}}({usersTabData:h,usersTabDataLoading:f,spaceId:l,teamspaceStores:m,currPage:g}),j=s.useMemo((()=>[$u,Ju,Xu,em,tm(m,u)]),[m,u]),w=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:j,theme:e,containerMarginTop:0})),[j]);return o?(0,i.jsx)(Ku().y,{type:"disabled",spaceName:r}):"NotFoundError"===(null==h||null===(t=h.usersAndStatsError)||void 0===t?void 0:t.name)?(0,i.jsx)(Ku().y,{type:"empty",spaceName:r}):(0,i.jsx)(It().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:j,rows:v,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:Tt().K,title:(0,i.jsx)(x()._H,{id:"analyticsMemberViewsTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(x()._H,{id:"analyticsMemberViewsTable.empty.byline",defaultMessage:"There are no members with available analytics data."})}),styles:w,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{p(g+1)},onLoadPrevious:()=>{p(g-1)},hasNextPage:y,hasPrevPage:g>1,currentPage:g}})}var sm=()=>a(304109),nm=()=>a(819418);function im(e){const t=(0,x().YB)(),a=(0,S().yK)((e=>({icon:{width:14,height:void 0,fill:e.mediumTextColor},button:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.mediumTextColor,fill:e.mediumIconColor,lineHeight:1,borderRadius:4}})),[]);return(0,i.jsx)(Es().Z,{ariaLabel:t.formatMessage({id:"organization.shared.table.exportButton.label",defaultMessage:"Export content"}),icon:nm().$,iconStyle:a.icon,style:a.button,onClick:e.onClick,disabled:e.disabled,disabledFeedback:e.disabled,disableBackground:e.disabled})}function om(e){let{organizationId:t,spaceStore:a,subtab:n,daysFilter:o,setDaysFilter:r,title:l,byline:d,onExport:c}=e;const u=Sa(),[m,g]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(xa().f,{title:l,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:d})}),(0,i.jsxs)("div",{style:u.actionContainer,children:[(0,i.jsxs)("div",{style:u.filters,children:[(0,i.jsx)(Ed,{showAsPill:!0,organizationId:t,selectedSpaceStore:a,currentTabRoute:Ft().Zq,currentTabProperties:{subtab:n}}),(0,i.jsx)(sm().f,{currentFilter:o,onChangeFilter:r})]}),(0,i.jsx)("div",{style:u.rightContent,children:c?(0,i.jsx)(im,{onClick:async()=>{g(!0),await c(),g(!1)},disabled:m}):null})]})]})}function rm(e){let{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n}=e;const o=(0,y().O7)(),r=(0,S().yK)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]),l=(0,b().VK)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]);return(0,i.jsxs)("div",{style:r.container,children:[(0,i.jsx)(om,{organizationId:t,spaceStore:a,subtab:ym.MemberViews,daysFilter:s,setDaysFilter:n,title:(0,i.jsx)(x()._H,{id:"organization.memberViews.title",defaultMessage:"Member views"}),byline:(0,i.jsx)(x()._H,{id:"organization.memberViews.byline",defaultMessage:"View all member views and edits"}),onExport:l?void 0:async()=>{await(0,Wu().z)({environment:o,spaceId:a.id,analyticsType:Fu().x.Users,filters:{daysFilter:s}})}}),(0,i.jsx)(am,{organizationId:t,spaceStore:a,daysFilter:s,isWorkspaceAnalyticsDisabled:l})]})}function lm(e){let{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n}=e;const o=(0,S().yK)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]);return(0,i.jsx)("div",{style:o.container,children:(0,i.jsx)(om,{organizationId:t,spaceStore:a,subtab:ym.PageViews,daysFilter:s,setDaysFilter:n,title:(0,i.jsx)(x()._H,{id:"organization.pageViews.title",defaultMessage:"Page views"}),byline:(0,i.jsx)(x()._H,{id:"organization.pageViews.byline",defaultMessage:"View all recent page views and edits"})})})}var dm=()=>a(306164),cm=()=>a(407544),um=()=>a(637887),mm=()=>a(860570),gm=()=>a(113437),pm=()=>a(121056),hm=()=>a(776981),fm=()=>a(549971);function xm(e){let{organizationId:t,spaceStore:a,daysFilter:n}=e;const o=(0,y().O7)(),r=(0,x().YB)(),[l,d]=(0,cm().e)(),{longShimmer:c,shortShimmer:u}=(0,ne().o)(),m=(0,b().VK)((()=>{var e;return null===(e=pe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),{organizationOwnerRecordCache:g}=(0,s.useContext)(D().V),p=(0,gm().d)({spaceStore:a,userId:m,isOrganizationOwner:!0,daysFilter:n}),{activeMembersCount:h,previousActiveMembersCount:f,activeGuestsCount:v,previousActiveGuestsCount:w,topTeamspaces:M,topViewers:C,topEditors:_}=p.data,T=(0,b().VK)((()=>M.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(I().zX)(o,{id:t,table:dm().e0},{inMemoryRecordCache:g}),caption:(0,i.jsx)(x()._H,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(ns().e,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[o,M,g]),k=(0,b().VK)((()=>C.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(I().U6)(o,{id:t,table:j().KJ}),caption:(0,i.jsx)(x()._H,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(ns().e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[o,C]),P=(0,b().VK)((()=>_.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(I().U6)(o,{id:t,table:j().KJ}),caption:(0,i.jsx)(x()._H,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(ns().e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[o,_]),{usersTabData:z}=Yu({spaceStore:a,daysFilter:n}),A=(0,mm().F)({spaceId:a.id,daysFilter:n}),{pageViews:N,uniquePageViews:R,pageEdits:B,topPages:O}=A.data,V=(0,b().VK)((()=>O.map((e=>{let{pageId:t,pageViews:a}=e;return{store:new(I().G)(o,{id:t,table:Kt().iU},{inMemoryRecordCache:g}),caption:(0,i.jsx)(x()._H,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(ns().e,{abbreviateNumber:!1,num:a})}})}}))),[o,O,g]),U=(0,S().yK)((e=>({twoColumnGridWithGap:{display:"grid",columnGap:16,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",marginBottom:-6},twoColumnGridWithNoGap:{display:"grid",columnGap:0,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",border:`1px solid ${e.regularDividerColor}`,borderRadius:8,boxShadow:L().X},graphContainer:{width:"100%"},graphDisplayBox:{borderRadius:8,boxShadow:L().X},searchContainer:{width:"100%"},cardTitle:{fontSize:12,alignSelf:"start",color:e.text.secondary,fontWeight:510},analyticsCardListContainer:{border:"0px",borderRadius:0,padding:"14px 16px 14px 16px"},containerWithRightBorder:{borderRight:`1px solid ${e.regularDividerColor}`,height:"100%"}})),[]),q=Math.floor(d-8),E=(0,b().VK)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]),Z=(0,b().VK)((()=>null==a?void 0:a.getName()),[a]);return E?(0,i.jsx)(Ku().y,{type:"disabled",spaceName:Z}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.title",defaultMessage:"User engagement"}),content:(0,i.jsxs)(ea().sg,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:U.twoColumnGridWithGap,children:[(0,i.jsx)(Tl().r8,{row:1,col:1,children:(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.activeMembers.title",defaultMessage:"Active members"}),content:p.loading?(0,i.jsx)(se().Z,{style:c}):(0,i.jsx)(H().q,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.members",defaultMessage:"{activeMembersCount} members",values:{activeMembersCount:(0,i.jsx)(ns().e,{abbreviateNumber:!1,num:h})}})}),byline:p.loading?(0,i.jsx)(se().Z,{style:u}):void 0!==f?(0,i.jsx)(pm().c,{userType:"members",daysFilter:n,count:h,previousCount:f}):null,onClick:()=>{wm({environment:o,organizationId:t,spaceId:a.id,tab:ym.MemberViews})}})}),(0,i.jsx)(Tl().r8,{row:1,col:2,children:(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.activeGuests.title",defaultMessage:"Active guests"}),content:p.loading?(0,i.jsx)(se().Z,{style:c}):(0,i.jsx)(H().q,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.guests",defaultMessage:"{activeGuestsCount} guests",values:{activeGuestsCount:(0,i.jsx)(ns().e,{abbreviateNumber:!1,num:v})}})}),byline:p.loading?(0,i.jsx)(se().Z,{style:u}):void 0!==w?(0,i.jsx)(pm().c,{userType:"guests",daysFilter:n,count:v,previousCount:w}):null,onClick:()=>wm({environment:o,organizationId:t,spaceId:a.id,tab:ym.MemberViews})})})]}),(0,i.jsx)("div",{style:U.graphContainer,children:(0,i.jsx)(fm().w,{usersTabData:z,daysFilter:n,intl:r,containerRef:l,widthOfGraph:q,displayBoxStyle:U.graphDisplayBox,graphTitleStyle:U.cardTitle})}),(0,i.jsxs)("div",{style:U.twoColumnGridWithNoGap,children:[(0,i.jsx)(Tl().r8,{row:1,col:1,children:(0,i.jsx)("div",{style:U.containerWithRightBorder,children:(0,i.jsx)(um().$,{loading:p.loading,error:p.error,title:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:k,titleStyle:U.cardTitle,containerStyle:U.analyticsCardListContainer})})}),(0,i.jsx)(Tl().r8,{row:1,col:2,children:(0,i.jsx)(um().$,{loading:p.loading,error:p.error,title:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:P,titleStyle:U.cardTitle,containerStyle:U.analyticsCardListContainer})})]})]})}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.analytics.contentEngagement.title",defaultMessage:"Content engagement"}),content:(0,i.jsxs)(ea().sg,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:U.twoColumnGridWithGap,children:[(0,i.jsx)(Tl().r8,{row:1,col:1,children:(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.analytics.contentEngagement.pageViews.title",defaultMessage:"Page views"}),content:A.loading?(0,i.jsx)(se().Z,{style:c}):(0,i.jsx)(H().q,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(x()._H,{id:"organization.analytics.contentEngagement.pageViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,i.jsx)(ns().e,{abbreviateNumber:!1,num:N})}})}),byline:A.loading?(0,i.jsx)(se().Z,{style:u}):(0,i.jsx)(x()._H,{id:"organization.analytics.contentEngagement.uniqueViews.title",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,i.jsx)(ns().e,{abbreviateNumber:!1,num:R})}}),onClick:()=>wm({environment:o,organizationId:t,spaceId:a.id,tab:ym.PageViews})})}),(0,i.jsx)(Tl().r8,{row:1,col:2,children:(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.analytics.contentEngagement.pageEdits.title",defaultMessage:"Page edits"}),content:A.loading?(0,i.jsx)(se().Z,{style:c}):(0,i.jsx)(H().q,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(x()._H,{id:"organization.analytics.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(ns().e,{abbreviateNumber:!1,num:B})}})}),byline:(0,i.jsx)(i.Fragment,{children:" "}),onClick:()=>wm({environment:o,organizationId:t,spaceId:a.id,tab:ym.PageViews})})})]}),(0,i.jsxs)("div",{style:U.twoColumnGridWithNoGap,children:[(0,i.jsx)(Tl().r8,{row:1,col:1,children:(0,i.jsx)("div",{style:U.containerWithRightBorder,children:(0,i.jsx)(um().$,{loading:p.loading,error:p.error,title:(0,i.jsx)(x()._H,{id:"organization.analytics.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:T,titleStyle:U.cardTitle,containerStyle:U.analyticsCardListContainer})})}),(0,i.jsx)(Tl().r8,{row:1,col:2,children:(0,i.jsx)(um().$,{loading:A.loading,error:A.error,title:(0,i.jsx)(x()._H,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:V,titleStyle:U.cardTitle,containerStyle:U.analyticsCardListContainer})})]}),(0,i.jsx)("div",{style:U.searchContainer,children:(0,i.jsx)(hm().Z,{spaceStore:a})})]})})]})}function vm(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:i,tabRoute:o}=e;const r=(0,y().O7)(),{spaceIds:l}=(0,s.useContext)(z().g);(0,s.useEffect)((()=>{!t&&l.length>0&&Oa().c4({environment:r,url:(0,La().a5)({organizationId:a,tabRoute:o,properties:{subtab:n},queryParams:{...i,[Dp]:l[0]}})})}),[r,t,a,l,n,i,o])}let ym=function(e){return e.PageViews="page-views",e.MemberViews="member-views",e}({});const bm={[ym.PageViews]:{title:(0,i.jsx)(x()._H,{id:"organization.analytics.pageViews.title",defaultMessage:"Page views"})},[ym.MemberViews]:{title:(0,i.jsx)(x()._H,{id:"organization.analytics.memberViews.title",defaultMessage:"Member views"})}};function Sm(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r}=e;const l=(0,y().O7)(),d=Yt({spaceId:t});vm({spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r});const c=(0,s.useMemo)((()=>n?function(e){switch(e){case ym.MemberViews:return ym.MemberViews;case ym.PageViews:return ym.PageViews;default:return ym.MemberViews}}(n):void 0),[n]),[u,m]=(0,s.useState)("last_90_days");if(!d||!t||!a)return null;let g=null;switch(c){case ym.MemberViews:g=(0,i.jsx)(rm,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:m});break;case ym.PageViews:g=(0,i.jsx)(lm,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:m})}return g&&c?(0,i.jsx)(ys().J,{breadcrumbs:[{onClick:()=>{Oa().c4({environment:l,url:(0,La().a5)({organizationId:a,tabRoute:Ft().Zq,queryParams:o})})},message:(0,i.jsx)(x()._H,{id:"organization.analytics.breadcrumb.goBack",defaultMessage:"Analytics"})},{message:bm[c].title}],children:g}):(0,i.jsx)(jm,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:m})}function jm(e){let{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n}=e;const o=(0,S().yK)((e=>({divider:{color:e.stroke.secondary,marginTop:16,marginBottom:16}})),[]);return(0,i.jsxs)(Ji,{children:[(0,i.jsx)(om,{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n,title:(0,i.jsx)(x()._H,{id:"organization.analytics.title",defaultMessage:"Analytics"}),byline:(0,i.jsx)(x()._H,{id:"organization.analytics.byline",defaultMessage:"Overview of how your organization is engaging with content across the workspace"})}),(0,i.jsx)(Va().Z,{size:1,style:o.divider,dividerColor:o.divider.color}),(0,i.jsx)(xm,{organizationId:t,spaceStore:a,daysFilter:s})]})}function wm(e){const{environment:t,organizationId:a,spaceId:s,tab:n}=e;Oa().c4({environment:t,url:(0,La().a5)({organizationId:a,tabRoute:Ft().Zq,queryParams:{[Dp]:s},properties:{subtab:n}})})}var Mm=()=>a(553802);function Cm(e){let{organizationId:t,selectedSpaceId:a,parentStore:n}=e;const o=(0,y().O7)(),[r]=(0,b().AF)(Id),[l]=(0,b().AF)(bd().Z),d=(0,bd().r)(l)!==r.filterStr?void 0:r.cachedResponses[l.pageNum];return(0,s.useEffect)((()=>{n.id&&Pd({environment:o,auditLogPointer:{id:n.id,table:n.table}})}),[o,n,l]),(0,s.useEffect)((()=>{zd({environment:o,parentStore:n})}),[o,n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:4,paddingBottom:12},children:[(0,i.jsx)(Qd,{organizationId:t,selectedSpaceId:a,parentStore:n}),(0,i.jsx)(Mm().Z,{parentStore:n})]}),"loading"===(null==d?void 0:d.status)&&(0,i.jsx)(yd().Z,{}),"success"===(null==d?void 0:d.status)&&(0,i.jsx)(vc,{searchResponse:d,parentStore:n})]})}function _m(e){const{organizationId:t,spaceId:a}=e,s=Yt({spaceId:a}),n=(0,eo().k)({organizationId:t}),o=s||n;return o&&t?(0,i.jsx)(bs().B,{children:(0,i.jsxs)("div",{style:{padding:"12px 16px"},children:[(0,i.jsx)(xa().f,{title:(0,i.jsx)(x()._H,{id:"organization.auditLog.title",defaultMessage:"Audit log"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"organization.auditLog.byline",defaultMessage:"Access to detailed information about security and safety-related activity. This can help identify potential security issues, investigate suspicious behavior, and troubleshoot access."})})}),(0,i.jsx)(Cm,{organizationId:t,selectedSpaceId:a,parentStore:o})]})}):null}var Tm=()=>a(529253),km=()=>a(730728),Im=()=>a(401438),Hm=()=>a(787806),Pm=()=>a(343177),Dm=()=>a(394970);const zm=(0,n().IU)("status",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.994 13.822a5.8 5.8 0 0 1-2.338-.474 6.1 6.1 0 0 1-1.933-1.307 6.2 6.2 0 0 1-1.307-1.934 5.8 5.8 0 0 1-.475-2.337q0-1.243.475-2.338a6.2 6.2 0 0 1 3.234-3.24 5.8 5.8 0 0 1 2.338-.475q1.248 0 2.344.474 1.095.475 1.934 1.313a6.1 6.1 0 0 1 1.312 1.928q.475 1.095.475 2.338a5.8 5.8 0 0 1-.475 2.337 6.2 6.2 0 0 1-3.246 3.24q-1.095.475-2.338.475m0-1.195q1.014 0 1.893-.375a4.87 4.87 0 0 0 2.59-2.59q.375-.88.375-1.892 0-1.008-.375-1.887a4.85 4.85 0 0 0-4.489-2.97 4.8 4.8 0 0 0-1.892.374A4.8 4.8 0 0 0 4.555 4.33a4.9 4.9 0 0 0-1.037 1.553 4.8 4.8 0 0 0-.375 1.887q0 1.013.375 1.892.374.88 1.037 1.547a4.8 4.8 0 0 0 3.44 1.418Zm0-6.996a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m1.29.346a.43.43 0 0 1-.311-.123.43.43 0 0 1-.123-.317.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.44Zm.943.943a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434m.345 1.289a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m-.345 1.295a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434Zm-.944.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433m-1.289.346a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433M6.7 10.441a.42.42 0 0 1-.433-.433.42.42 0 0 1 .433-.434q.188 0 .31.123a.41.41 0 0 1 .13.31.41.41 0 0 1-.13.311.42.42 0 0 1-.31.123m-.943-.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434ZM5.41 8.209a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m.346-1.29a.42.42 0 0 1-.434-.433.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434Zm.943-.942a.42.42 0 0 1-.433-.44.42.42 0 0 1 .433-.433q.188 0 .31.123a.41.41 0 0 1 .13.31.42.42 0 0 1-.13.317.42.42 0 0 1-.31.123"})});var Am=()=>a(167393);function Nm(e){let{organizationId:t,filters:a,sort:s,query:n}=e;const i=(0,y().O7)(),o=JSON.stringify(s),r=Boolean(a),[{status:l,value:d},c]=(0,Ke().r5)((async()=>{if(!t)return[];let e=[];if(o){const t=JSON.parse(o);t&&(e=function(e){return e.map((e=>"status"===e.propertyId?{direction:e.direction,columnName:"status"}:"name"===e.propertyId?{direction:e.direction,columnName:"name"}:"last_edited_time"===e.propertyId?{direction:e.direction,columnName:"last_edited_time"}:void 0)).filter((e=>void 0!==e))}(t))}const s=await M().callApi({eventName:"getLegalHolds",environment:i,data:{organizationId:t,filters:r?{status:null==a?void 0:a.status,userIds:null==a?void 0:a.userIds}:void 0,sort:e.length>0?e:void 0,query:n??void 0}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,kt().t1)(s)}),[i,t,r,null==a?void 0:a.status,null==a?void 0:a.userIds,n,o]);return{loading:"pending"===l,legalHolds:d??[],refetch:c}}var Rm=()=>a(730120);const Bm=(0,n().IU)("murse",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})});var Lm=()=>a(342792),Om=()=>a(565796);const Vm=(0,x().vU)({legalHoldNamePlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.namePlaceholder",defaultMessage:"Name of investigation"},legalHoldDescriptionPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionPlaceholder",defaultMessage:"Describe the nature of this investigation"},legalHoldNameRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameRequiredValidationError",defaultMessage:"Name is required."},legalHoldDateRangeRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.dateRangeRequiredValidationError",defaultMessage:"Start date is required."}});function Um(e){let{onDismiss:t,onSuccess:a,organizationId:n}=e;const[o,r]=s.useState(""),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[m,g]=s.useState("page.viewed"),[p,h]=s.useState(void 0),[f,v]=s.useState([]),[b,j]=s.useState({name:void 0,holdMemberUserIds:void 0,dateRange:void 0}),w=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{width:400}})),[]),{loading:C,createLegalHold:_}=function(){const e=(0,y().O7)(),[t,a]=(0,Ke().UK)((async t=>{let{name:a,icon:s,description:n,userInteractionType:i,startDate:o,endDate:r,organizationId:l,spaceId:d,userIds:c}=t;const u=await M().callApi({eventName:"createLegalHold",environment:e,data:{name:a,icon:s,description:n,userInteractionType:i,startDate:o,endDate:r,organizationId:l,spaceId:d,userIds:c}});if("success"===u.type)return u.data;if("failed"===u.type)throw u.error;return(0,kt().t1)(u)}),[e]);return{loading:"pending"===t.status,createLegalHold:a}}(),k=async()=>{if(!o||null==p||!p.start_date||!f.length){const e={name:o?void 0:Vm.legalHoldNameRequiredValidationError,dateRange:null!=p&&p.start_date?void 0:Vm.legalHoldDateRangeRequiredValidationError,holdMemberUserIds:f.length?void 0:ol.legalHoldAddMembersRequiredValidationError};return void j(e)}const e={name:o,icon:l,description:c,userInteractionType:[m],startDate:new Date(null==p?void 0:p.start_date).getTime(),endDate:null!=p&&p.end_date?new Date(null==p?void 0:p.end_date).getTime():void 0,organizationId:n,userIds:f};try{await _(e),null==a||a(),t()}catch(s){return}};return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:580}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(V().sR,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(W().xB,{icon:Bm(w.icon),title:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.title",defaultMessage:"Create legal hold"}),byline:(0,i.jsx)("div",{style:w.byline,children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline",defaultMessage:"Members affected by a legal hold won't be notified of the hold and will still maintain their permissions to create, edit, and delete files. {link}",values:{link:(0,i.jsx)(fe().X,{href:"/legal-holds",children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline.learnMore",defaultMessage:"Learn more"})})}})})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.create",defaultMessage:"Create legal hold"}),primaryAction:k,primaryDisabled:C,secondaryText:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)(ea().sg,{gap:24,width:"100%",children:[(0,i.jsx)(qm,{name:o,icon:l,error:b.name,onNameChange:e=>{r(e),""!==e&&j((e=>({...e,name:void 0})))},onIconChange:d}),(0,i.jsxs)(ea().sg,{gap:0,children:[(0,i.jsx)(F().Z,{children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(O().Z,{value:c,placeholder:T().Z.formatMessage(Vm.legalHoldDescriptionPlaceholder),onChange:e=>u(e.target.value),textarea:!0})]}),(0,i.jsx)(rl,{organizationId:n,holdMemberUserIds:f,setHoldMemberUserIds:e=>{v(e),e.length&&j((e=>({...e,holdMemberUserIds:void 0})))},error:b.holdMemberUserIds}),(0,i.jsx)(Fm,{interactionType:m,setInteractionType:g,dateRange:p,setDateRange:e=>{h(e),null!=e&&e.start_date&&j((e=>({...e,dateRange:void 0})))},error:b.dateRange})]})})}})}function qm(e){let{name:t,icon:a,onNameChange:s,onIconChange:n,error:o}=e;const r=a?{icon:a,pointer:{table:"legal_hold",id:(0,Lm().ZP)()}}:void 0,l=(0,S().yK)((e=>({icon:{boxShadow:e.inputBoxShadow,background:e.inputBackground,height:32,width:32}})),[]);return(0,i.jsxs)(ea().sg,{gap:8,children:[(0,i.jsxs)(ea().sg,{gap:0,children:[(0,i.jsx)(F().Z,{children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameLabel",defaultMessage:"Icon & Name"})}),(0,i.jsxs)(ea().X2,{gap:8,children:[(0,i.jsx)(B().Z,{isLarge:!0,largeIcon:!0,disabled:!1,isEmptyPage:!1,bucket:"public",style:l.icon,icon:r,size:24,emojiSize:24,onChange:n}),(0,i.jsx)(O().Z,{errorOutline:!!o,value:t,placeholder:T().Z.formatMessage(Vm.legalHoldNamePlaceholder),onChange:e=>s(e.target.value),inputElementAttributes:{"aria-describedby":"legalHoldNameError",required:!0}})]})]}),(0,i.jsx)(il().Z,{id:"legalHoldNameError",error:o})]})}const Em={"page.viewed":(0,i.jsx)(x()._H,{id:"legalHolds.userInteractionType.dropdown.label.viewed",defaultMessage:"Viewed, edited & created"}),"page.edited":(0,i.jsx)(x()._H,{id:"legalHolds.userInteractionType.dropdown.label.edited",defaultMessage:"Edited & created"}),"page.created":(0,i.jsx)(x()._H,{id:"legalHolds.userInteractionType.dropdown.label.created",defaultMessage:"Created only"})},Zm={"page.viewed":(0,i.jsx)(x()._H,{id:"legalHolds.dateRange.label.viewed",defaultMessage:"Pages viewed between"}),"page.edited":(0,i.jsx)(x()._H,{id:"legalHolds.dateRange.label.edited",defaultMessage:"Pages edited between"}),"page.created":(0,i.jsx)(x()._H,{id:"legalHolds.dateRange.label.created",defaultMessage:"Pages created between"})};function Fm(e){let{interactionType:t,setInteractionType:a,dateRange:n,setDateRange:o,error:r}=e;const l=s.useMemo((()=>({starting:null!=n&&n.start_date?{type:"date",start_date:n.start_date}:void 0,ending:null!=n&&n.end_date?{type:"date",start_date:n.end_date}:void 0})),[n]),d=(0,S().yK)((e=>({innerButton:{background:e.inputBackground,marginRight:0},popupWrapper:{paddingTop:12,paddingBottom:12},buttonError:{border:`1px solid ${e.redBadgeBackground}`},downIcon:{display:"none"},settingLabel:{marginBottom:0}})),[]);return(0,i.jsxs)(ea().sg,{gap:8,children:[(0,i.jsxs)(ea().X2,{gap:12,alignItems:"center",children:[(0,i.jsx)(F().Z,{style:d.settingLabel,children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.holdPagesLabel",defaultMessage:"Hold pages"})}),(0,i.jsx)(Le().Z,{innerButtonStyle:d.innerButton,downIconStyle:d.downIcon,selectedTitle:Em[t],renderMenuSections:e=>[{key:"user_interaction_type",render:e=>(0,i.jsx)(Be().Z,{...e}),items:[{key:"page.viewed",action:()=>{a("page.viewed"),e.close()},render:e=>(0,i.jsx)(Re().Z,{...e,title:Em["page.viewed"]})},{key:"page.edited",action:()=>{a("page.edited"),e.close()},render:e=>(0,i.jsx)(Re().Z,{...e,title:Em["page.edited"]})},{key:"page.created",action:()=>{a("page.created"),e.close()},render:e=>(0,i.jsx)(Re().Z,{...e,title:Em["page.created"]})}]}]}),(0,i.jsx)(F().Z,{style:d.settingLabel,children:(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.label.between",defaultMessage:"between"})}),(0,i.jsx)(qs().ZP,{popupType:qs().Z4.Popup,placementToOrigin:qs().pO.Bottom,alignmentToOrigin:qs().vR.Start,renderOrigin:e=>(0,i.jsx)(Rc().D,{isRed:!!r,style:{...d.innerButton,...r&&d.buttonError},"aria-describedby":"legalHoldDateRangeError",...e,children:n?(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:null!=n&&n.start_date?(0,i.jsx)(x().Ji,{value:null==n?void 0:n.start_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.startDate.placeholder",defaultMessage:"Select start date"}),endDate:null!=n&&n.end_date?(0,i.jsx)(x().Ji,{value:n.end_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.endDate.ongoing",defaultMessage:"Ongoing"})}}):(0,i.jsx)(x()._H,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.placeholder",defaultMessage:"Select date range"})}),popupWrapStyle:d.popupWrapper,render:e=>(0,i.jsx)(mt().Z,{menuType:dt().o.Popup,children:(0,i.jsx)(Be().Z,{children:(0,i.jsxs)(ea().sg,{gap:12,children:[(0,i.jsx)(ea().X2,{paddingLeft:12,paddingRight:12,children:(0,i.jsx)(F().Z,{children:Zm[t]})}),(0,i.jsx)(Om().Z,{title:void 0,disableMenuWrap:!0,value:l,onUpdate:e=>{var t,a;if(e.error)return;const s={...l,...e.value},n=null===(t=s.starting)||void 0===t?void 0:t.start_date,i=null===(a=s.ending)||void 0===a?void 0:a.start_date;o({type:"daterange",start_date:n,end_date:i})},onDismiss:()=>{e.close()},minDate:Rm().ou.now().minus({years:Hl().Uy}),maxDate:Rm().ou.now().plus({years:Hl().Je})})]})})})})]}),(0,i.jsx)(il().Z,{id:"legalHoldDateRangeError",error:r})]})}const Wm={id:"name",headerTitle:(0,i.jsx)(x()._H,{id:"organizationLegalHoldsSubTab.legalHolds.nameColumn.header",defaultMessage:"Hold name"}),renderCell:e=>{if(e.type===Vt().a.Loading)return(0,i.jsx)(Ht().HD,{includeIcon:!0,containerStyles:{width:140}});const t=(0,i.jsx)(Dl,{legalHoldName:e.name,legalHoldId:e.id,legalHoldIcon:e.icon,size:er().Oz,emojiSize:er().Dt});return(0,i.jsx)(Ht().iP,{title:e.name,icon:t})},widthData:{widthPercent:25,minWidth:80},sortable:!1},Km={id:"status",headerTitle:(0,i.jsx)(x()._H,{id:"organizationLegalHoldsSubTab.legalHolds.statusColumn.header",defaultMessage:"Status"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):(0,i.jsx)(Al,{status:e.status}),widthData:{widthPercent:15,minWidth:80},sortable:!1},Gm={id:"workspaces",headerTitle:(0,i.jsx)(x()._H,{id:"organizationLegalHoldsSubTab.legalHolds.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):(0,i.jsx)(Rl,{workspaceIds:e.workspaces.ids,totalCount:e.workspaces.total}),widthData:{widthPercent:20,minWidth:80},sortable:!1},Ym={id:"users",headerTitle:(0,i.jsx)(x()._H,{id:"organizationLegalHoldsSubTab.legalHolds.membersColumn.header",defaultMessage:"Hold members"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:140}}):(0,i.jsx)(zl,{userIds:e.users.ids,totalCount:e.users.total}),widthData:{widthPercent:20,minWidth:80},sortable:!1};function $m(e){let{lastEditedTime:t,lastEditedBy:a}=e;const s=(0,y().O7)(),n=(0,b().VK)((()=>{if(a)return new(ct().U)(s,{table:j().KJ,id:a})}),[a,s]);return n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fo().G,{userStores:[n],useSecondaryColorTitle:!0}),(0,i.jsx)(es().Z,{isSecondaryColor:!0,children:(0,i.jsx)(x()._H,{id:"legalHoldsTable.updatedAt.by",defaultMessage:" on {date}",values:{date:(0,i.jsx)(x().Ji,{value:t,year:"numeric",month:"short",day:"numeric"})}})})]}):null}const Jm={id:"lastModifiedAt",headerTitle:(0,i.jsx)(x()._H,{id:"organizationLegalHoldsSubTab.legalHolds.lastModifiedAtColumn.header",defaultMessage:"Last modified at"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)($m,{lastEditedTime:e.lastEditedTime,lastEditedBy:e.lastEditedBy}),widthData:{widthPercent:20,minWidth:80},sortable:!0};function Qm(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,setSelectedLegalHoldId:r}=e;const l=s.useMemo((()=>[Wm,Km,Gm,Ym,Jm]),[]),d=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:l,theme:e,containerMarginTop:0})),[l]),c=t.map((e=>({...e,isClickable:!0,type:Vt().a.OrganizationLegalHold}))),u=a&&0===c.length?(0,Vt().s)():c.slice(Ge().B*(n-1),Ge().B*n),m=c.length>Ge().B*n,g=1!==n;return(0,i.jsx)(It().Dp,{columnRenderInfo:l,hideHeaderRowPadding:!0,rows:u,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{title:(0,i.jsx)(x()._H,{id:"legalHoldsTable.empty",defaultMessage:"No legal holds found"}),byline:(0,i.jsx)(x()._H,{id:"legalHoldsTable.empty.byline",defaultMessage:"There are no legal holds that match this query."})}),styles:d,showRowBorders:!0,onRowClick:e=>{e.type===Vt().a.OrganizationLegalHold&&r(e.id)},loadMoreMethod:{type:"pages",onLoadNext:()=>{m&&o(n+1)},onLoadPrevious:()=>{g&&o(n-1)},hasNextPage:m,hasPrevPage:g,currentPage:n},allowHorizontalScroll:!0,setStickyHeaderRow:!0})}function Xm(e){let{organizationId:t,legalHoldId:a,legalHoldIcon:s,legalHoldName:n,onDismiss:o}=e;const{legalHold:r,loading:l,refetch:d}=function(e){const t=(0,y().O7)(),[{status:a,value:s},n]=(0,Ke().r5)((async()=>{const a=await M().callApi({eventName:"getLegalHold",environment:t,data:{legalHoldId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;return(0,kt().t1)(a)}),[t,e]);return{loading:"pending"===a,legalHold:s,refetch:n}}(a),c=(0,S().yK)((e=>({icon:{height:16,width:16,fill:e.mediumTextColor}})),[]),u=(0,i.jsxs)(ea().X2,{gap:4,alignItems:"center",children:[(0,i.jsx)(Il,{startDate:null==r?void 0:r.startDate,endDate:null==r?void 0:r.endDate}),(0,i.jsx)(Z().Z,{textWrap:!0,renderTooltip:()=>{return(0,i.jsx)(ea().X2,{width:"204px",children:(0,i.jsx)(x()._H,{defaultMessage:"This legal hold is currently holding pages {interactionType} between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange",values:{interactionType:(e=null==r?void 0:r.userInteractionType,e?e.includes("page.viewed")?"viewed":e.includes("page.created")?"created":e.includes("page.edited")?"edited":void 0:"viewed"),legalHoldDateRange:(0,i.jsx)(Il,{startDate:null==r?void 0:r.startDate,endDate:null==r?void 0:r.endDate})}})});var e},render:e=>(0,i.jsx)("div",{...e,children:(0,Cl().m)(c.icon)})})]});return(0,i.jsx)($t().Dl,{sidebarProps:{sidebarTitle:(null==r?void 0:r.name)||n,sidebarByline:u,sidebarTitleIcon:(0,i.jsx)(Dl,{legalHoldId:a,size:$t().Tr,emojiSize:$t().Tr,legalHoldIcon:(null==r?void 0:r.icon)||s,legalHoldName:(null==r?void 0:r.name)||n}),sidebarItemsTitle:(0,i.jsx)(x()._H,{defaultMessage:"Legal hold settings",id:"legalHold.sidebar.topEntitySection"}),hideSeparator:!0,renderTooltip:e=>{if("released"===(null==r?void 0:r.status)&&"browse_content"===e.id)return(0,i.jsx)(x()._H,{id:"legalHold.sidebar.browseContent.tooltip",defaultMessage:"You can no longer view the content of a released legal hold."})}},sceneProps:{legalHoldId:a,legalHold:r,organizationId:t,loading:l,refetchLegalHold:d},tabRenderer:Up,tabNames:Ft().$9,defaultTab:"general",tabAccessor:"active"===(null==r?void 0:r.status)?Vp:Op,isOpen:!0,onDismiss:o})}const eg=(0,x().vU)({placeholder:{id:"organizationLegalHoldsSubTab.legalHolds.search.placeholder",defaultMessage:"Search by legal hold name."}}),tg=(0,x().vU)({name:{id:"organizationLegalHoldsSubTab.legalHolds.sort.name",defaultMessage:"Name"},status:{id:"organizationLegalHoldsSubTab.legalHolds.sort.status",defaultMessage:"Status"},lastModifiedAt:{id:"organizationLegalHoldsSubTab.legalHolds.sort.lastModifiedAt",defaultMessage:"Last modified at"}}),ag=[{id:"name",name:T().Z.formatMessage(tg.name),type:"title"},{id:"status",name:T().Z.formatMessage(tg.status),type:"status"},{id:"lastModifiedAt",name:T().Z.formatMessage(tg.lastModifiedAt),type:"last_edited_time"}],sg=[{key:"active",value:"active",title:(0,i.jsx)(x()._H,{id:"legalHoldsTable.filters.status.active",defaultMessage:"Active"})},{key:"released",value:"released",title:(0,i.jsx)(x()._H,{id:"legalHoldsTable.filters.status.released",defaultMessage:"Released"})}];var ng=function(e){return e.CreateLegalHold="create-legal-hold",e}(ng||{});function ig(e){let{organizationId:t}=e;const a=(0,x().YB)(),[n,o]=s.useState(),[r,l]=s.useState(""),[d,c]=s.useState(),[u,m]=s.useState(1),[g,p]=s.useState(!1),[h,f]=s.useState(),[v,y]=s.useState(),[b,S]=s.useState(),[j,w]=s.useState([]),M=j.length>0?j:void 0,C=b||M?{status:b,userIds:M}:void 0,{legalHolds:_,loading:T,refetch:k}=Nm({organizationId:t,filters:C,query:""===r?void 0:r,sort:v}),I=(0,qn().V)(),P=Array.from(_.reduce(((e,t)=>(t.users.ids.forEach((t=>{e.add(t)})),e)),new Set)),D=_.find((e=>e.id===d)),z=s.useCallback((async()=>{m(1),y(void 0),f(void 0),l(""),S(void 0),w([]),await k()}),[k]);return(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:rg[og.LegalHolds].title,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organizationLegalHoldsSubTab.legalHolds.byline",defaultMessage:"Placing a legal hold on a team member allows Organization Owners to view and export all the content that’s been created or modified by that member."})})}),(0,i.jsxs)("div",{style:I.tableHeader,children:[(0,i.jsxs)("div",{style:I.leftContent,children:[(0,i.jsx)(ya().i,{sortProperties:ag,isMenuOpen:g,setIsMenuOpen:p,onApply:e=>{p(!1),y(e),f(void 0),m(1)},currentSorts:h??v??[]}),(0,i.jsx)(Am().u,{pillTitle:(0,i.jsx)(x()._H,{id:"legalHoldsTable.filters.status.title",defaultMessage:"Status"}),pillIcon:zm,selectedItem:b,setSelectedItem:e=>{S(e),m(1)},items:sg}),(0,i.jsx)(Br,{pillTitle:(0,i.jsx)(x()._H,{id:"legalHoldsTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:fr().O,selectedUsers:j,setSelectedUsers:e=>{w(e),m(1)},userIds:P})]}),(0,i.jsxs)("div",{style:I.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:v,openSortPillMenu:e=>{e&&f([{propertyId:e,direction:"ascending"}]),p(!0)},sortProperties:ag}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:r,setQueryFilter:e=>{l(e),m(1)},placeholderText:a.formatMessage(eg.placeholder)}),(0,i.jsx)(q().Z,{onClick:()=>{o(ng.CreateLegalHold)},children:(0,i.jsx)(x()._H,{id:"legalHoldsTable.button.addLegalHold",defaultMessage:"Create hold"})})]})]}),(0,i.jsx)(Qm,{data:_,loading:T,currentPage:u,setCurrentPage:m,setSelectedLegalHoldId:c}),d?(0,i.jsx)(Xm,{organizationId:t,legalHoldIcon:(null==D?void 0:D.icon)??"",legalHoldName:(null==D?void 0:D.name)??"",legalHoldId:d,onDismiss:async()=>{c(void 0),await k()}}):null,n===ng.CreateLegalHold?(0,i.jsx)(Um,{onDismiss:()=>o(void 0),organizationId:t,onSuccess:z}):null]})}let og=function(e){return e.LegalHolds="legal-holds",e.ContentSearch="content-search",e.AuditLog="audit-log",e}({});const rg={[og.LegalHolds]:{title:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.title",defaultMessage:"Legal holds"})},[og.ContentSearch]:{title:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.title",defaultMessage:"Content search"})},[og.AuditLog]:{title:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.auditLog.title",defaultMessage:"Audit log"})}};function lg(e){const{subtab:t,organizationId:a}=e,n=(0,y().O7)(),o=(0,s.useMemo)((()=>t?function(e){switch(e){case og.LegalHolds:return og.LegalHolds;case og.ContentSearch:return og.ContentSearch;case og.AuditLog:return og.AuditLog;default:return og.LegalHolds}}(t):void 0),[t]);if(!a)return null;let r=null;switch(o){case og.ContentSearch:r=(0,i.jsx)(bg,{...e});break;case og.AuditLog:r=(0,i.jsx)(_m,{...e});break;case og.LegalHolds:r=(0,i.jsx)(ig,{organizationId:a})}return r&&o?(0,i.jsx)(ys().J,{breadcrumbs:[{onClick:()=>{Oa().c4({environment:n,url:(0,La().a5)({organizationId:a,tabRoute:Ft().em})})},message:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.breadcrumb.goBack",defaultMessage:"Data & Compliance"})},{message:rg[o].title}],children:r}):(0,i.jsx)(dg,{...e})}function dg(e){let{organizationId:t}=e;const a=(0,y().O7)(),n=(0,ne().o)(),{availableOrganizationFeatures:o}=(0,s.useContext)(z().g),r=o.legal_holds_enabled,{legalHolds:l,loading:d}=Nm({organizationId:t,filters:{status:"active"}});return(0,i.jsxs)(Ji,{children:[(0,i.jsx)(xa().f,{title:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.title",defaultMessage:"Data & Compliance"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.byline",defaultMessage:"Access tools for content search, audit logs, and legal holds to ensure data governance and meet regulatory requirements."})})}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.title",defaultMessage:"Data governance"}),content:(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(ae().f,{title:rg[og.LegalHolds].title,byline:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.byline",defaultMessage:"Place members on legal hold and export their content."}),rightContent:d?(0,i.jsx)(se().Z,{style:n.longShimmer}):(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.rightContent",defaultMessage:"{numLegalHolds, plural, one {# active legal hold} other {# active legal holds}}",values:{numLegalHolds:l.length.toLocaleString()}}),onClick:()=>cg({environment:a,organizationId:t,tab:og.LegalHolds})}),(0,i.jsx)(ae().f,{title:rg[og.ContentSearch].title,byline:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.byline",defaultMessage:"See all the pages this user has shared externally or with other members."}),onClick:()=>cg({environment:a,organizationId:t,tab:og.ContentSearch})}),(0,i.jsx)(ae().f,{title:rg[og.AuditLog].title,byline:(0,i.jsx)(x()._H,{id:"organization.dataAndCompliance.dataGovernance.auditLog.byline",defaultMessage:"See all recent activity on Notion."}),onClick:()=>cg({environment:a,organizationId:t,tab:og.AuditLog})})]})})]})}function cg(e){const{environment:t,organizationId:a,tab:s}=e;Oa().c4({environment:t,url:(0,La().a5)({organizationId:a,tabRoute:Ft().em,properties:{subtab:s}})})}var ug=()=>a(155481);function mg(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:n}=e;const o=(0,ug().Jd)([]),r=(0,s.useMemo)((()=>(t||km().a).map((e=>({key:e.toString(),value:e,shortTitle:(0,ug().A0)(e),title:(0,ug().A0)(e),caption:(0,ug().sC)(e),wrapCaption:!0})))),[t]);return(0,i.jsx)(Ts().J,{pillTitle:o,pillIcon:fr().O,selectedItems:a,setSelectedItems:n,items:r})}var gg=()=>a(18902),pg=()=>a(934935),hg=()=>a(220725);const fg=["alive","in_trash","deleted_from_trash"];function xg(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:n}=e;const o=(0,x().YB)(),{currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l}=(0,b().VK)((()=>({currentDeleteFromTrashDelayInSeconds:(0,gg().Tv)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,gg().FT)(t.getModel())/1e3})),[t]),d=(0,s.useMemo)((()=>(0,hg().Sp)({currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l,intl:o})),[r,l,o]),c=(0,s.useMemo)((()=>fg.map((e=>({key:e.toString(),value:e,shortTitle:(0,hg().To)([e]),title:(0,hg().xR)(e),caption:d(e),wrapCaption:!0})))),[d]);return(0,i.jsx)(Ts().J,{pillIcon:pg().S,pillTitle:(0,hg().To)([]),selectedItems:a,setSelectedItems:n,items:c})}function vg(e){let{spaceStore:t,filters:a,runNewSearch:n,setFilters:o,hasUserConfirmedAcknowledgement:r,pageStores:l,organizationId:d}=e;const c=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:u}=(0,A().x)(c),m=u[t.id],g=(0,S().yK)((e=>({container:{margin:"0 auto 14px",display:"flex",flexDirection:"column",gap:20},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]),p=(0,y().O7)(),[h]=(0,Ke().r5)((async()=>{const e=null==t?void 0:t.id;if(!e)return!1;return(await(0,ut().rX)({environment:p,spaceId:e})).length>0}),[p,t]),f=(0,b().VK)((()=>v().default.checkGate({gateName:"enterprise_trusted_domain_enabled"})&&"resolved"===h.status&&h.value?km().m:km().a),[h]);return(0,i.jsxs)("div",{style:g.container,children:[(0,i.jsx)(Pt().ON,{mode:Pt().p3.Button,query:a.query,setQueryFilter:function(e){o({query:e},{runSearchAfter:!0})},disabled:!r}),r?(0,i.jsxs)(ea().X2,{justifyContent:"space-between",alignItems:"top",children:[(0,i.jsxs)("div",{style:g.filterPillsContainer,children:[(0,i.jsx)(Ed,{showAsPill:!0,organizationId:d,currentTabRoute:Ft().em,currentTabProperties:{subtab:og.ContentSearch},selectedSpaceStore:t}),(0,i.jsx)(xg,{spaceStore:t,selectedPageStatus:a.pageStatus,setSelectedPageStatus:function(e){o({pageStatus:e},{runSearchAfter:!0})}}),(0,i.jsx)(Pm().f,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){o({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){o({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,i.jsx)(Cu,{selectedTeamspaceIds:a.teamIds,setSelectedTeamspaceIds:function(e){o({teamIds:e},{runSearchAfter:!0})},teamspaceStores:m}),(0,i.jsx)(Dm().Q,{spaceStore:t,sharedWithFilterItems:a.sharedWith,setSharedWithFilter:function(e){o({sharedWith:e})},runNewSearch:n,includeGroups:!0,includeGuests:!0}),(0,i.jsx)(mg,{selectedAudience:a.audience,setSelectedAudience:function(e){o({audience:e},{runSearchAfter:!0})},audienceValues:f}),(0,i.jsx)(Hm().y,{spaceStore:t,createdByFilterIds:a.createdBy,setCreatedByFilter:function(e){o({createdBy:e})},runNewSearch:n,includeGuests:!0})]}),(0,i.jsx)(Im().C,{spaceId:t.id,disabled:0===l.length,filters:a,shouldUsePrimaryButton:!0})]}):null]})}function yg(e){let{spaceStore:t,userStore:a,organizationId:s}=e;const n=!0,{showSuggestions:o,loadNextPage:r,pageStores:l,loading:d,error:c,runNewSearch:u,filters:m,setFilters:g,refreshSearchResult:p}=(0,zr().z)({spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:n});return(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:(0,i.jsx)(x()._H,{id:"settingsConsole.spaceContentSearch.title",defaultMessage:"Content search"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"settingsConsole.spaceContentSearch.description",defaultMessage:"Organization owners can search for any page in the workspaces owned by the organization. This includes private pages and deleted pages retained per the data retention policy"})})}),(0,i.jsx)(vg,{spaceStore:t,setFilters:g,runNewSearch:u,filters:m,hasUserConfirmedAcknowledgement:n,pageStores:l,organizationId:s}),(0,i.jsx)(Tm().d,{loading:d,error:c,pageStores:l,loadNextPage:r,filters:m,setFilters:g,showSuggestions:o,runNewSearch:u,hasUserConfirmedAcknowledgement:n,refreshSearchResult:p})]})}function bg(e){let{organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}=e;const r=(0,b().VK)((()=>pe().default.state.currentUserStore),[]),l=Yt({spaceId:a});return vm({organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}),l&&r&&t?(0,i.jsx)(yg,{spaceStore:l,userStore:r,organizationId:t}):null}const Sg=1,jg=Ge().B;function wg(e){const[t,a]=(0,s.useState)({}),[n,i]=(0,s.useState)(),[o,r]=(0,s.useState)(""),[l,d]=(0,s.useState)(Sg),c=(0,s.useCallback)((e=>{a((t=>({...t,...e}))),d(Sg)}),[]),u=(0,s.useMemo)((()=>{if(!e)return[];let a=e;return o&&(a=(0,rt().ZP)(o,a,(e=>e.spaceName))),t.spaceIds&&t.spaceIds.length>0&&(a=a.filter((e=>{var a;return null===(a=t.spaceIds)||void 0===a?void 0:a.includes(e.id)}))),t.emailDomains&&t.emailDomains.length>0&&(a=a.filter((e=>{var a;return null===(a=t.emailDomains)||void 0===a?void 0:a.includes(e.emailDomain)}))),t.owners&&t.owners.length>0&&(a=a.filter((e=>e.owners.some((e=>{var a;return null===(a=t.owners)||void 0===a?void 0:a.includes(e)}))))),function(e){let{rows:t,appliedSorts:a}=e;const s=null!=a&&a.length?a:[{propertyId:Jg,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===Xg.id?"emailDomain":t===tp.id?"memberCount":t===ap.id?"guestCount":e=>e.spaceName.toLowerCase()})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,kt().t1)(t)}));return We().Xo(t,n,i)}({rows:a,appliedSorts:n})}),[e,t.spaceIds,t.emailDomains,t.owners,o,n]),m=(0,s.useMemo)((()=>{const e=(l-1)*jg,t=e+jg;return u.slice(e,t)}),[u,l]),g=(0,s.useMemo)((()=>l*jg<u.length),[u,l]),p=l>Sg,h=(0,s.useCallback)((()=>{g&&d((e=>e+1))}),[g]),f=(0,s.useCallback)((()=>{p&&d((e=>e-1))}),[p]);return{filters:t,updateFilters:c,query:o,setQuery:e=>{r(e),d(Sg)},paginatedRows:m,appliedSorts:n,setAppliedSorts:e=>{i(e),d(Sg)},loadNextPage:h,loadPrevPage:f,hasNextPage:g,hasPrevPage:p,currentPage:l}}const Mg={};var Cg=()=>a(857806);const _g=(0,n().IU)("checkmarkRectangle",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M4.142 16.45q-1.108 0-1.675-.561-.568-.56-.568-1.655V5.908q0-1.093.568-1.654.567-.567 1.675-.567h11.703q1.114 0 1.681.567.568.56.568 1.654v8.326q0 1.095-.568 1.655-.567.56-1.681.56H4.142Zm.082-1.34H15.77q.472 0 .724-.247.253-.252.253-.745V6.024q0-.492-.253-.738-.252-.252-.724-.253H4.224q-.48 0-.732.253-.246.246-.246.738v8.094q0 .492.246.745.253.246.732.246Zm5.045-1.798a.7.7 0 0 1-.342-.082 1.2 1.2 0 0 1-.294-.26L7.02 11a.74.74 0 0 1-.178-.458q0-.253.17-.43a.57.57 0 0 1 .425-.185q.157 0 .28.068.129.061.253.226l1.271 1.613 2.7-4.327q.213-.35.534-.349.24 0 .43.157a.5.5 0 0 1 .192.41.6.6 0 0 1-.055.24q-.048.116-.116.219L9.87 12.963q-.219.348-.601.349"})}),Tg=(0,n().IU)("personTransfer",{viewBox:"0 0 26 20",svg:(0,i.jsx)("path",{d:"M5.918 10.085q-.738 0-1.347-.39a2.9 2.9 0 0 1-.964-1.039A3 3 0 0 1 3.252 7.2a2.85 2.85 0 0 1 1.32-2.44 2.5 2.5 0 0 1 1.346-.383q.732 0 1.333.376.61.375.97 1.018.363.643.363 1.43a2.92 2.92 0 0 1-1.333 2.494 2.4 2.4 0 0 1-1.333.39m0-1.155q.396 0 .725-.226.334-.232.533-.622.204-.39.205-.882 0-.485-.205-.861a1.5 1.5 0 0 0-.533-.588 1.3 1.3 0 0 0-.725-.219 1.3 1.3 0 0 0-.738.219 1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.847q0 .5.198.889.198.39.527.615.335.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.397-.267-.397-.82 0-.622.349-1.3.349-.675 1.012-1.264.663-.587 1.613-.95c.95-.363 1.351-.362 2.153-.362s1.518.12 2.147.362a5.2 5.2 0 0 1 1.613.95 4.4 4.4 0 0 1 1.019 1.265q.348.677.348 1.299 0 .553-.396.82-.398.267-1.176.267zm-.177-1.156h7.465q.13 0 .13-.116 0-.321-.24-.752a3 3 0 0 0-.724-.834 4 4 0 0 0-1.204-.683q-.724-.274-1.695-.274-.963 0-1.688.274a4.1 4.1 0 0 0-1.21.683 3.1 3.1 0 0 0-.732.834q-.24.43-.239.752 0 .116.137.116m17.91-4.457q-.738 0-1.347-.383a2.9 2.9 0 0 1-.964-1.045 3 3 0 0 1-.355-1.456q0-.773.355-1.415.363-.643.964-1.026a2.5 2.5 0 0 1 1.347-.383q.738 0 1.34.383.608.375.964 1.019.362.635.362 1.422 0 .8-.362 1.456a2.9 2.9 0 0 1-.971 1.039 2.4 2.4 0 0 1-1.333.39Zm0-1.155q.404 0 .731-.226.336-.232.527-.622.198-.39.198-.881 0-.486-.198-.862a1.47 1.47 0 0 0-.527-.588 1.3 1.3 0 0 0-.731-.218q-.404 0-.738.218a1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.848q0 .498.198.888c.198.39.308.465.527.615q.334.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.39-.265-.39-.82 0-.622.342-1.299.349-.676 1.011-1.258a5.2 5.2 0 0 1 1.614-.95q.949-.369 2.153-.369 1.203 0 2.153.37a5.2 5.2 0 0 1 1.614.95 4.3 4.3 0 0 1 1.011 1.257q.35.677.349 1.299 0 .555-.396.82-.398.267-1.176.267zm-.177-1.155h7.464q.137 0 .137-.117 0-.32-.246-.752a3 3 0 0 0-.724-.833 4 4 0 0 0-1.21-.677q-.725-.274-1.689-.274-.97 0-1.695.274a4 4 0 0 0-1.21.677 3 3 0 0 0-.718.834q-.24.43-.24.752 0 .116.13.116Zm-5.695-4.423a.63.63 0 0 1-.45-.185.63.63 0 0 1-.192-.458q0-.266.191-.458a.62.62 0 0 1 .451-.191.6.6 0 0 1 .458.191q.192.191.192.458c0 .267-.064.33-.192.458a.62.62 0 0 1-.458.185m2.345 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.267 0 .458.191.192.191.191.458c-.001.267-.063.33-.191.458a.64.64 0 0 1-.458.185m2.338 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.26 0 .451.191.192.191.191.458c-.001.267-.063.33-.19.458a.63.63 0 0 1-.452.185"})});var kg=()=>a(112955);const Ig={claimableSpaces:[],filters:{query:""},loading:!1,error:void 0,nextEarliestCreatedAt:Date.now(),hasNextPage:!0};function Hg(e){let{organizationId:t}=e;const a=(0,y().O7)(),[n,i]=(0,s.useState)(Ig),o=(0,s.useRef)(!1),r=(0,s.useRef)({}),l=(0,s.useCallback)((async e=>{let{nextEarliestCreatedAt:s,filters:n}=e;try{const{spaces:e,earliestCreatedAt:o,hasMoreSpaces:r}=await async function(e){const{environment:t,organizationId:a,emailDomains:s,spaceCreatedTimeUpperBound:n,memberCountFilter:i,query:o}=e,r=await M().callApi({eventName:"getClaimableWorkspacesInOrganization",environment:t,data:{organizationId:a,emailDomains:s,memberCountFilter:i,spaceCreatedTimeUpperBound:n,limit:Ge().B,filters:{query:o}}});if("failed"===r.type)throw r.error;return{spaces:r.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:r.data.hasMoreSpaces?r.data.earliestCreatedAt:void 0,hasMoreSpaces:r.data.hasMoreSpaces}}({environment:a,organizationId:t,emailDomains:n.emailDomains,memberCountFilter:n.memberCountFilter,query:n.query,spaceCreatedTimeUpperBound:s?s-1:Date.now()});i((t=>({...t,loading:!1,error:void 0,claimableSpaces:t.claimableSpaces.concat(e),nextEarliestCreatedAt:o,hasNextPage:r})))}catch(o){const e=(0,cs().t)(o);i((t=>({...t,loading:!1,error:e})))}}),[a,t]),d=(0,s.useCallback)((async e=>{let{restartSearch:a,nextEarliestCreatedAt:s}=e;if(!t)return;let o=n.loading,d=n.error;a&&(i((e=>({...Ig,filters:e.filters}))),o=Ig.loading,d=Ig.error),o||d||(i((e=>({...e,loading:!0}))),r.current=n.filters,await l({nextEarliestCreatedAt:s,filters:n.filters}))}),[t,n,l]);(0,s.useEffect)((()=>{!o.current&&Boolean(t)&&(d({restartSearch:!0}),o.current=!0)}),[t,d]),(0,s.useEffect)((()=>{We().Xy(r.current,n.filters)||d({restartSearch:!0})}),[n.filters,d]);const c=(0,s.useCallback)((async()=>{if(n.hasNextPage)return d({restartSearch:!1,nextEarliestCreatedAt:n.nextEarliestCreatedAt})}),[d,n.hasNextPage,n.nextEarliestCreatedAt]),u=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),m=(0,s.useCallback)((e=>(i((t=>({...t,loading:Boolean(e),claimableSpaces:[]}))),d({restartSearch:!0}))),[d]);return{loadNextPage:c,claimableSpaces:n.claimableSpaces,nextEarliestCreatedAt:n.nextEarliestCreatedAt,filters:n.filters,loading:n.loading,error:n.error,hasNextPage:n.hasNextPage,setFilters:u,refreshPage:m}}function Pg(e){let{selectedMemberCountType:t,setSelectedMemberCountType:a}=e;return(0,i.jsx)(Ts().p,{pillTitle:(0,i.jsx)(x()._H,{id:"filters.memberCountType.title",defaultMessage:"Member count"}),pillIcon:Tt().K,selectedItem:t,setSelectedItem:a,items:Dg,shouldUseCheck:!0})}const Dg=[{key:"one",value:"single",title:(0,i.jsx)(x()._H,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"}),shortTitle:(0,i.jsx)(x()._H,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"})},{key:"multi",value:"multi",title:(0,i.jsx)(x()._H,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"}),shortTitle:(0,i.jsx)(x()._H,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"})}];var zg=()=>a(587148);const Ag=(0,n().IU)("newArrowUpCircled",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.993 17.126a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.727q0-1.45.553-2.728a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25q.555 1.278.554 2.728 0 1.449-.553 2.727a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202q0 1.182.438 2.208a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654ZM10 13.51a.6.6 0 0 1-.43-.164.58.58 0 0 1-.172-.431V9.688l.055-1.4-.615.765-.766.8a.56.56 0 0 1-.417.177.54.54 0 0 1-.553-.547q0-.246.157-.417L9.52 6.783q.22-.225.479-.225.267 0 .485.225l2.256 2.283q.165.178.164.417a.52.52 0 0 1-.164.39.54.54 0 0 1-.396.157.53.53 0 0 1-.417-.177l-.76-.793-.621-.78.055 1.408v3.227a.58.58 0 0 1-.171.43.6.6 0 0 1-.431.165Z"})});async function Ng(e){const{spaceIds:t,fn:a,successMessage:s}=e,n=(0,Ye().qd)(t,Ge().v,(async e=>a(e)));!function(e){const{responses:t,successMessage:a}=e,s=t.find((e=>"failed"===(null==e?void 0:e.type)));if(s)return C().UW((0,_().wf)(T().Z.getIntl(),s));et().oV({label:a})}({responses:await n,successMessage:s})}function Rg(e){const{spaces:t}=e,a=(0,S().yK)((e=>({workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,boxSizing:"border-box",padding:"0 12px",width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column",maxHeight:200,overflowY:"auto"},content:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"100%"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16}})),[]);return(0,i.jsx)("div",{style:a.workspaceContainer,children:t.map((e=>(0,i.jsxs)("div",{style:a.content,children:[(0,i.jsx)(zg().k,{id:e.id,name:e.name,icon:e.icon,subscriptionTier:e.subscriptionTier,memberCount:e.memberCount}),(0,i.jsx)("div",{style:a.checkContainer,children:(0,Du().k)(a.check)})]},e.id)))})}function Bg(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,y().O7)(),l=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},container:{width:480}})),[]);const[d,c]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:Ag(l.icon),title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.title",defaultMessage:"Add workspace to organization?"}),byline:(0,i.jsx)("div",{style:l.container,children:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.byline",defaultMessage:"Send a request to claim ownership of this workspace. Once approved, it will be added to your organization."})})}),footer:(0,i.jsx)(W().mz,{primaryText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.primary",defaultMessage:"Send request"}),primaryAction:async()=>{c(!0),await async function(){await Ng({spaceIds:a.map((e=>e.id)),fn:async e=>M().callApi({eventName:"requestClaimForSalesAssisted",environment:r,data:{requestingOrganizationId:t,targetSpaceId:e}}),successMessage:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.saveSuccess",defaultMessage:"Successfully requested to add {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n()}(),c(!1)},primaryDisabled:d,secondaryText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)(Rg,{spaces:a})})})}function Lg(e){const t=(0,S().yK)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},inputCaptionError:{marginTop:8},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:14,width:14}})),[]);return(0,i.jsxs)("div",{style:t.container,children:[(0,i.jsxs)("div",{style:t.labelContainer,children:[(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:e.labelMessage}),e.helpMessage&&(0,i.jsx)(Z().Z,{renderTooltip:()=>e.helpMessage,render:e=>(0,i.jsx)("span",{...e,children:(0,Cl().m)(t.helpIcon)})})]}),(0,i.jsx)(O().Z,{value:e.value,placeholder:e.placeholder,onChange:e.onChange,onBlur:e.onBlur}),e.errorMessage&&(0,i.jsx)(H().q,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",customStyles:t.inputCaptionError,children:e.errorMessage})]})}function Og(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,y().O7)(),l=(0,x().YB)(),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(),[g,p]=(0,s.useState)(!0),h=(0,S().yK)((e=>({icon:{height:32,fill:e.icon.secondary},container:{width:440},content:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",gap:24},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function f(){const e=(0,ot().H3)(u);return p((0,ot().oH)(e)),e}const[v,b]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:Tg(h.icon),title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.title",defaultMessage:"Request transfer"}),byline:(0,i.jsx)("div",{style:h.container,children:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.byline",defaultMessage:"Request the workspace owner to transfer this workspace to a personal account. Access will be restricted until transfer is complete."})})}),footer:(0,i.jsx)(W().mz,{primaryDisabled:!d||v||!g||!u,primaryText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.primary",defaultMessage:"Request transfer"}),primaryAction:async()=>{b(!0),await async function(){const e=f();e&&(await Ng({spaceIds:a.map((e=>e.id)),fn:async a=>M().callApi({eventName:"initiateOrganizationSpaceTransfer",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.saveSuccess",defaultMessage:"Successfully requested transfer for {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),b(!1)},secondaryText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(Rg,{spaces:a}),(0,i.jsx)(Lg,{value:u,onChange:e=>m(e.target.value),onBlur:f,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.helpMessage",defaultMessage:"The Workspace Owner of the transfer requested workspace can contact this email for inquiries"}),errorMessage:g?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:h.confirmation,children:[(0,i.jsx)(tt().Z,{checked:d,size:14,checkSize:10,onClick:()=>c((e=>!e))}),(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.confirmationCheckbox",defaultMessage:"I understand this cannot be undone"})})]})]})})})}function Vg(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,y().O7)(),l=(0,x().YB)(),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(),[g,p]=(0,s.useState)(!0),h=(0,S().yK)((e=>({icon:{height:32,width:32,fill:e.icon.uiRedPrimary},container:{width:440},content:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",gap:24},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function f(){const e=(0,ot().H3)(u);return p((0,ot().oH)(e)),e}const[v,b]=(0,s.useState)(!1);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(V().sR,{header:(0,i.jsx)(W().xB,{icon:Ls(h.icon),title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.title",defaultMessage:"Delete workspace?"}),byline:(0,i.jsx)("div",{style:h.container,children:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.byline",defaultMessage:"Schedule this workspace deletion in 30 days, revoking access for all users and notifying workspace owners."})})}),footer:(0,i.jsx)(W().mz,{isDarkRed:!0,primaryDisabled:!d||v||!g||!u,primaryText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.primary",defaultMessage:"Schedule deletion"}),primaryAction:async()=>{b(!0),await async function(){const e=f();e&&(await Ng({spaceIds:a.map((e=>e.id)),fn:async a=>M().callApi({eventName:"deleteSpaceForOrganizationDomain",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.saveSuccess",defaultMessage:"Successfully scheduled to delete {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),b(!1)},secondaryText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(Rg,{spaces:a}),(0,i.jsx)(Lg,{value:u,onChange:e=>m(e.target.value),onBlur:f,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.helpMessage",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:g?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:h.confirmation,children:[(0,i.jsx)(tt().Z,{checked:d,size:14,checkSize:10,onClick:()=>c((e=>!e))}),(0,i.jsx)(H().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.confirmationCheckbox",defaultMessage:"I understand this cannot be undone after the 30-day period"})})]})]})})})}const Ug=[{id:"name",headerTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(na,{}):(0,i.jsx)(a(727432).d,{shouldAccountForMultiselect:!0,rightContent:(0,i.jsx)(Zg,{claimableSpace:e.claimableSpace,setSelectedSpaceId:e.setSelectedSpaceId,setOpenedModal:e.setOpenedModal}),spaceId:e.claimableSpace.id,spaceName:e.claimableSpace.name,spaceIcon:e.claimableSpace.icon,badge:e.claimableSpace.spaceRequest?(0,i.jsx)(Fg,{claimableSpace:e.claimableSpace}):void 0}),widthData:{width:300,maxWidth:300},sortable:!1,shouldShowSortTooltip:!1},{id:"plan",headerTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.plan.header",defaultMessage:"Plan"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:100}}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,zg().t)(e.claimableSpace.subscriptionTier,T().Z.getIntl())}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"memberCount",headerTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.memberCount.header",defaultMessage:"Members"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:120}}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.memberCount.count",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.claimableSpace.memberCount}})}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"domain",headerTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.domain.header",defaultMessage:"Verified email domain"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:200}}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.domain.email",defaultMessage:"@{domain}",values:{domain:e.claimableSpace.creatorEmailDomain}})}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"owners",headerTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.owners.header",defaultMessage:"Workspace owners"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Fo().x,{}):e.workspaceOwnerUserStores.length>0?(0,i.jsx)(Fo().G,{isClickable:!0,userStores:e.workspaceOwnerUserStores}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.owners.noOwners",defaultMessage:"Nobody"})}),hasClickableContents:!0,widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"createdBy",headerTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.createdBy.header",defaultMessage:"Created by"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Fo().x,{}):e.claimableSpace.creator?(0,i.jsx)(Fo().G,{isClickable:!0,userStores:[e.createdByUserStore]}):(0,i.jsx)(Ht().iP,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.createdBy.deletedUser",defaultMessage:"Deleted user"})}),hasClickableContents:!0,widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"createdOn",headerTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.createdOn.header",defaultMessage:"Created on"}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{containerStyles:{width:80}}):(0,i.jsx)(Zs().T,{useSecondaryColorTitle:!0,dateTs:e.claimableSpace.createdAt}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1}];var qg=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e}(qg||{});function Eg(e){let{organizationId:t,claimableSpaces:a,hasMoreResults:n,onLoadMoreResults:o,refreshPage:r,loading:l,error:d,selectedIds:c,onSelectAll:u,onUnselectAll:m,onSelectRow:g}=e;const p=(0,y().O7)(),[f,v]=(0,s.useState)(),[b,w]=(0,s.useState)(),M=(0,Rt().Z)(),C=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:Ug,theme:e,containerMarginTop:0})),[]),_=(0,s.useMemo)((()=>a.map((e=>({id:e.id,type:Vt().a.OrganizationClaimableWorkspace,claimableSpace:e,createdByUserStore:e.creator?new(I().U6)(p,{table:j().KJ,id:e.creator.id}):void 0,workspaceOwnerUserStores:e.admins.map((e=>new(I().U6)(p,{table:j().KJ,id:e.id}))),setSelectedSpaceId:v,setOpenedModal:w,isClickable:!0})))),[a,p]),T=l?0===_.length?(0,Vt().s)():[..._,...(0,Vt().s)(3)]:_,k=Ug.map((e=>({...e,headerStyle:M.tableHeaderForModal,rowStyle:M.tableRowForModal}))),H={header:{isDisabled:l,isSelected:c.length>0&&c.length===a.length,onClick:()=>{c.length===a.length?m():u()}},row:{getDisabledState:e=>l,getSelectedState:e=>e.type===Vt().a.OrganizationClaimableWorkspace&&c.includes(e.claimableSpace.id),onClick:e=>{e.type===Vt().a.OrganizationClaimableWorkspace&&g(e.claimableSpace.id)}}},P=f?a.find((e=>e.id===f)):void 0;return!l&&d?(0,i.jsx)(Ot,{error:d,runNewSearch:r}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(It().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:k,rows:T,styles:C,onRowClick:e=>g(e.id),multiselect:H,loadMoreMethod:!l&&n?{type:"button",onLoadMore:o}:void 0,renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:h().K,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.empty.title",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.empty.byline",defaultMessage:"There are no workspaces that match this query."})})}),b===qg.AddWorkspace&&P?(0,i.jsx)(Bg,{organizationId:t,claimableSpaces:[P],onDismiss:()=>w(void 0),onRefresh:r}):null,b===qg.RequestTransfer&&P?(0,i.jsx)(Og,{organizationId:t,claimableSpaces:[P],onDismiss:()=>w(void 0),onRefresh:r}):null,b===qg.ScheduleDeletion&&P?(0,i.jsx)(Vg,{organizationId:t,claimableSpaces:[P],onDismiss:()=>w(void 0),onRefresh:r}):null]})}function Zg(e){const{claimableSpace:t,setSelectedSpaceId:a,setOpenedModal:s}=e,n=(0,S().yK)((()=>({icon16x20:{height:16,width:20,fill:"currentColor"},icon20x20:{height:20,width:20,fill:"currentColor"}})),[]),o=[{key:"add-workspace",icon:_g(n.icon20x20),title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace",defaultMessage:"Add workspace"}),caption:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.caption",defaultMessage:"Claim ownership and add this workspace to your organization."}),disabled:(0,Cg().zv)(t)||(0,Cg().Kp)(t),tooltipTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),tooltipDisabled:(0,Cg().qn)(t)&&!(0,Cg().Kp)(t),action:()=>{s(qg.AddWorkspace),a(t.id)}},{key:"request-transfer",icon:Tg(n.icon20x20),title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer",defaultMessage:"Request transfer"}),caption:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.caption",defaultMessage:"Prompt the owner to transfer workspace ownership to a personal account."}),disabled:(0,Cg().qn)(t)||(0,Cg().Kp)(t),tooltipTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),tooltipDisabled:(0,Cg().zv)(t)&&!(0,Cg().Kp)(t),action:()=>{s(qg.RequestTransfer),a(t.id)}},{key:"schedule-deletion",icon:(0,kg().p)(n.icon20x20),title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion",defaultMessage:"Schedule deletion"}),caption:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.caption",defaultMessage:"Schedule for 30-day deletion, revoke access, and notify owners."}),disabled:(0,Cg().qn)(t)||(0,Cg().Kp)(t)||(0,Cg().j_)(t),tooltipTitle:(0,Cg().j_)(t)?(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip.notFreeTier",defaultMessage:"Only workspaces on the free tier are eligible for deletion."}):(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member and have no pending requests."}),tooltipDisabled:(0,Cg().zv)(t)&&!(0,Cg().Kp)(t)&&!(0,Cg().j_)(t),action:()=>{s(qg.ScheduleDeletion),a(t.id)}}];return(0,i.jsx)(Ht().Wu,{items:o})}function Fg(e){const{claimableSpace:t}=e,n=(0,x().YB)(),o=(0,s.useMemo)((()=>{const e=t.admins[0];return e?(0,a(499110).Nz)(n,e):void 0}),[n,t]);const r=function(){var e;switch(null===(e=t.spaceRequest)||void 0===e?void 0:e.type){case"team_claim_upgrade":case"organization_claiming_space":return(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.claim",defaultMessage:"Workspace claim request is being processed."});case"organization_domain_claim_space_deletion":case"domain_claim_space_deletion":return(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.delete",defaultMessage:"Workspace is in the process of being deleted."});case"organization_personal_external_transfer":case"personal_external_transfer":return o?(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer",defaultMessage:"Waiting for {ownerName} to transfer this workspace to an external account.",values:{ownerName:o}}):(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer.noOwnerName",defaultMessage:"Waiting for the workspace owner to transfer this workspace to an external account."});default:return}}();return r?(0,i.jsx)(Z().Z,{renderTooltip:()=>r,render:e=>(0,i.jsx)(zt().Z,{...e,content:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.table.name.pendingBadge.content",defaultMessage:"Pending"})})}):null}function Wg(e){let{organizationId:t,onDismiss:a}=e;const s=(0,S().yK)((e=>({content:{display:"flex",flexDirection:"column",width:"100%",gap:0,overflowY:"auto",padding:"16px 12px"}})),[]);return(0,i.jsx)(E().c,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"fixed",length:800},width:{type:"fixed",length:1280}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(V().sR,{sizeRange:a,showDismissButton:!1,header:null,footer:null,children:(0,i.jsxs)("div",{style:s.content,children:[(0,i.jsx)(xa().f,{title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.title",defaultMessage:"Add workspaces"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.byline",defaultMessage:"Add workspaces created with a verified domain, or request ownership transfer to a personal account."})})}),(0,i.jsx)(Gg,{organizationId:t})]})})}})}var Kg=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e}(Kg||{});function Gg(e){let{organizationId:t}=e;const[a,n]=(0,s.useState)(),o=(0,qn().V)(),r=(0,x().YB)(),l=(0,y().O7)(),d=(0,eo().k)({organizationId:t}),c=(0,b().VK)((()=>(null==d?void 0:d.getEmailDomains())??[]),[d]),[u,m]=(0,s.useState)(!1),{claimableSpaces:g,filters:p,setFilters:h,loading:f,error:v,hasNextPage:S,loadNextPage:j,refreshPage:w}=Hg({organizationId:t}),M=(0,s.useMemo)((()=>g.map((e=>e.id))),[g]),{selectedIds:C,handleToggleId:_,handleSelectAllIds:T,handleUnselectAllIds:k}=gs({allPossibleIds:M}),I=(0,s.useMemo)((()=>C.map((e=>g.find((t=>t.id===e)))).filter(kt().$K)),[g,C]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:o.tableHeader,children:[(0,i.jsxs)("div",{style:o.leftContent,children:[(0,i.jsxs)(ws,{isOpen:C.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(Cs,{itemsSelectedCount:C.length}),onClick:k}),(0,i.jsx)(Ms,{icon:_g,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.multiselect.addWorkspace",defaultMessage:"Add workspace"}),disabled:I.some(Cg().zv)||I.some(Cg().Kp),disabledTooltipText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.multiselect.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),onClick:()=>n(Kg.AddWorkspace)}),(0,i.jsx)(Ms,{icon:Tg,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.multiselect.requestTransfer",defaultMessage:"Request transfer"}),disabled:I.some(Cg().qn)||I.some(Cg().Kp),disabledTooltipText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.multiselect.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),onClick:()=>n(Kg.RequestTransfer)}),(0,i.jsx)(Ms,{isDestructive:!0,icon:kg().p,title:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion",defaultMessage:"Schedule deletion"}),disabled:I.some(Cg().qn)||I.some(Cg().Kp)||I.some(Cg().j_),disabledTooltipText:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member, no pending requests, and on the free tier."}),onClick:()=>n(Kg.ScheduleDeletion)})]}),(0,i.jsx)(Pg,{selectedMemberCountType:p.memberCountFilter,setSelectedMemberCountType:e=>h({memberCountFilter:e})}),(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organization.workspaces.addModal.filters.email.title",defaultMessage:"Verified email domains"}),emailDomains:c,selectedEmailDomains:p.emailDomains||[],setSelectedEmailDomains:e=>{h({emailDomains:e})}})]}),(0,i.jsxs)("div",{style:o.rightContent,children:[(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:p.query,setQueryFilter:e=>h({query:e}),placeholderText:r.formatMessage({id:"organization.workspaces.addModal.filters.query.placeholder",defaultMessage:"Search by workspace name"})}),(0,i.jsx)(im,{disabled:u,onClick:async()=>{m(!0),await Ne().mG({environment:l,data:{organizationId:t}}),m(!1)}})]})]}),(0,i.jsx)(Eg,{organizationId:t,claimableSpaces:g,hasMoreResults:S,onLoadMoreResults:j,refreshPage:()=>w(!0),loading:f,error:v,selectedIds:C,onSelectAll:T,onUnselectAll:k,onSelectRow:_}),a===Kg.AddWorkspace?(0,i.jsx)(Bg,{organizationId:t,claimableSpaces:I,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===Kg.RequestTransfer?(0,i.jsx)(Og,{organizationId:t,claimableSpaces:I,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===Kg.ScheduleDeletion?(0,i.jsx)(Vg,{organizationId:t,claimableSpaces:I,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null]})}var Yg=()=>a(685958);function $g(e){var t;let{spaceStore:a,organizationId:s,onDismiss:n}=e;const o=(0,b().VK)((()=>a.getName()),[a]),{state:r}=(0,Xi().J)(),l=(null===(t=r.value)||void 0===t||null===(t=t.membersForSpace[a.id])||void 0===t?void 0:t.length)||0,d=(0,b().VK)((()=>(0,i.jsx)(B().Z,{disabled:!0,icon:a.getIcon(),defaultIcon:(0,h().K)(),isEmptyPage:!1,size:$t().Tr})),[a]),c=(0,b().VK)((()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x()._H,{id:"organization.general.workspace",defaultMessage:"Workspace"}),(0,i.jsx)(P().Z,{style:{margin:"0 2px"}}),(0,i.jsx)(re().To,{memberCount:l})]})),[l]);return(0,i.jsx)($t().Dl,{isOpen:!0,sidebarProps:{sidebarTitleIcon:d,sidebarTitle:o,sidebarByline:c,hideSeparator:!0,bottomEntitySection:(0,i.jsx)(Yg().yJ,{organizationId:s}),renderTooltip:()=>(0,i.jsx)(Yg().cT,{})},tabRenderer:Lp,tabNames:Ft().fp,tabAccessor:Bp,defaultTab:"general",onDismiss:n,sceneProps:{spaceStore:a,organizationId:s,onCloseModal:n}})}const Jg="space",Qg=(0,x().vU)({workspace:{id:"organizationManageWorkspacesTable.spaceColumn.sortName",defaultMessage:"Workspace"},members:{id:"organizationManageWorkspacesTable.membersColumn.header",defaultMessage:"Members"},guests:{id:"organizationManageWorkspacesTable.guestsColumn.header",defaultMessage:"Guests"},emailDomain:{id:"organizationManageWorkspacesTable.emailDomain.sortName",defaultMessage:"Email Domain"}});const Xg={id:"emailDomain",headerTitle:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesTable.verifiedEmailDomainColumn.header",defaultMessage:"Verified email domain"}),renderCell:e=>e.type!==Vt().a.Loading&&e.emailDomain?(0,i.jsx)(H().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesTable.emailDomainColumn.emailDomain",defaultMessage:"@{emailDomain}",values:{emailDomain:e.emailDomain}})}):(0,i.jsx)(Ht().HD,{}),widthData:{widthPercent:20,minWidth:180},sortable:!1};function ep(e,t){return{id:"owners",headerTitle:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesTable.ownersColumn.header",defaultMessage:"Workspace owners"}),renderCell:a=>a.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{}):(0,i.jsx)(ie().s,{users:e.filter((e=>a.owners.includes(e.id))),totalMemberCount:a.owners.length,showTooltip:!0,isLoading:t}),widthData:{widthPercent:20,minWidth:140},sortable:!1}}const tp={id:"members",headerTitle:(0,i.jsx)(x()._H,{...Qg.members}),renderCell:e=>e.type===Vt().a.Loading||void 0===e.memberCount?(0,i.jsx)(Ht().HD,{}):(0,i.jsx)(H().q,{colorName:"secondary",children:(0,i.jsx)(x()._H,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:15,minWidth:120},sortable:!1},ap={id:"guests",headerTitle:(0,i.jsx)(x()._H,{...Qg.guests}),renderCell:e=>e.type===Vt().a.Loading||void 0===e.guestCount?(0,i.jsx)(Ht().HD,{}):(0,i.jsx)(H().q,{colorName:"secondary",children:(0,i.jsx)(re().vn,{guestCount:e.guestCount})}),widthData:{widthPercent:15,minWidth:120},sortable:!1},sp=[{id:Jg,name:T().Z.formatMessage(Qg.workspace),type:"title"},{id:Xg.id,name:T().Z.formatMessage(Qg.emailDomain),type:"title"},{id:tp.id,name:T().Z.formatMessage(Qg.members),type:"number"},{id:ap.id,name:T().Z.formatMessage(Qg.guests),type:"number"}];function np(e){let{organizationId:t}=e;const a=(0,y().O7)(),{refreshOrganization:n}=(0,s.useContext)(z().g),o=(0,k().E)("organization_console_ga_enabled"),r=(0,Rt().Z)(),l=(0,Js()._)(),{workspaceOwnerIdsBySpaceId:d,loading:c}=function(e){let{organizationId:t}=e;const a=(0,y().O7)(),[{status:s,error:n,value:i}]=(0,Ke().r5)((async()=>{if(!t)return{userIdsBySpaceId:{}};const e=await M().callApi({eventName:"getWorkspaceOwnersInOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,kt().t1)(e)}),[a,t]);return{workspaceOwnerIdsBySpaceId:(null==i?void 0:i.userIdsBySpaceId)??Mg,loading:"pending"===s||"idle"===s,error:n}}({organizationId:t}),u=(0,b().VK)((()=>{const e=new Set(Object.values(d).flat());return Array.from(e).map((e=>new(ct().U)(a,{table:j().KJ,id:e})))}),[a,d]),m=s.useMemo((()=>{return[(e=l.length,{id:Jg,headerTitle:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesTable.spaceColumn.header",defaultMessage:"Workspaces ({numWorkspaces})",values:{numWorkspaces:e}}),renderCell:e=>e.type===Vt().a.Loading?(0,i.jsx)(Ht().HD,{}):(0,i.jsx)(Ht().iP,{title:e.spaceName,icon:(0,i.jsx)(B().Z,{disabled:!0,icon:e.spaceIcon,isEmptyPage:!1,title:e.spaceName,size:ba().CD,isLarge:!0}),iconSize:ba().CD,iconMargin:Ht().dI,summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:`calc(100% - ${It().HQ}px)`}}),widthData:{widthPercent:0,minWidth:350,maxWidth:350},sortable:!1}),Xg,ep(u,c),tp,ap];var e}),[u,l.length,c]),g=m.map((e=>({...e,headerStyle:r.tableHeader,rowStyle:r.tableRow}))),p=(0,S().yK)((e=>(0,It().bE)({columnRenderInfo:m,theme:e,containerMarginTop:0})),[m]),f=Sa(),{spaceUsers:v}=(0,N().D)(l),{emailDomainsBySpace:C,allEmailDomains:_,isLoadingEmailDomains:T}=function(e,t){const a=(0,s.useMemo)((()=>t.map((e=>e.id))),[t]),n=(0,y().O7)(),[{value:i,status:o}]=(0,Ke().r5)((async()=>{if(0===a.length)return;const t=await M().callApi({eventName:"getWorkspaceCreatorEmailDomainsForOrg",environment:n,data:{organizationId:e,spaceIds:a}});return"success"===t.type?{emailDomainMap:t.data.emailDomainMap,emailDomains:[...new Set(Object.values(t.data.emailDomainMap).filter((e=>void 0!==e)))]}:void 0}),[n,e,a]);return{isLoadingEmailDomains:"pending"===o||"idle"===o,emailDomainsBySpace:null==i?void 0:i.emailDomainMap,allEmailDomains:null==i?void 0:i.emailDomains}}(t,l),I=(0,b().VK)((()=>0===l.length||T||l.some((e=>!e.isReady()))||u.some((e=>!e.isReady()))),[l,u,T]),H=(0,b().VK)((()=>l.map((e=>{const t=null==C?void 0:C[e.id],a=null==v?void 0:v[e.id];let s,n;if(a){s=a.filter(w().FN).filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,n=a.filter((e=>(0,w().nB)(e))).length}return{type:Vt().a.OrganizationWorkspace,spaceName:e.getName()||"",spaceIcon:e.getIcon(),emailDomain:t||"",owners:d[e.id]||[],memberCount:n,guestCount:s,id:e.id,isClickable:!0}}))),[C,l,v,d]),{filters:P,updateFilters:D,query:A,setQuery:R,paginatedRows:L,appliedSorts:O,setAppliedSorts:V,loadNextPage:U,loadPrevPage:E,hasNextPage:F,hasPrevPage:W,currentPage:K}=wg(H),G=I?(0,Vt().s)():L,Y=(0,s.useMemo)((()=>L.map((e=>e.id))),[L]),{selectedIds:$,handleToggleId:J,handleSelectAllIds:Q,handleUnselectAllIds:X}=gs({allPossibleIds:Y}),ee=En({spaceStores:l}),[te,ae]=(0,s.useState)(),[se,ne]=(0,s.useState)(),[ie,oe]=(0,s.useState)(!1);const re=(0,b().VK)((()=>{if(te&&"viewWorkspace"===(null==te?void 0:te.type))return l.find((e=>e.id===te.spaceId))}),[te,l]),le=se??O??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:f.tableHeader,children:[(0,i.jsxs)("div",{style:f.leftContent,children:[(0,i.jsxs)(ws,{isOpen:$.length>0,children:[(0,i.jsx)(Ms,{isPrimary:!0,title:(0,i.jsx)(Cs,{itemsSelectedCount:$.length}),onClick:X}),(0,i.jsx)(Ms,{disabled:$.length===H.length,disabledTooltipText:(0,i.jsx)(x()._H,{id:"manageWorkspacesTable.multiselect.removeAllWorkspacesTooltip",defaultMessage:"You must have at least one workspace in your organization"}),icon:Rs().L,iconSize:14,title:(0,i.jsx)(x()._H,{id:"manageWorkspacesTable.multiselect.removeWorkspace",defaultMessage:"Remove workspace"}),onClick:()=>ae({type:"removeWorkspace",spaceIds:$})})]}),(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{sortProperties:sp,isMenuOpen:ie,setIsMenuOpen:oe,onApply:e=>{oe(!1),V(e),ne(void 0)},currentSorts:le})}),le.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(Hs,{selectedSpaceIds:P.spaceIds||[],setSelectedSpaceIds:e=>D({spaceIds:e}),spaceData:ee}),(0,i.jsx)(ks,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesTable.emailDomainsFilter.pillTitle",defaultMessage:"Verified email domain"}),emailDomains:_||[],selectedEmailDomains:P.emailDomains||[],setSelectedEmailDomains:e=>{D({emailDomains:e})}}),(0,i.jsx)(Br,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesTable.ownersFilter.pillTitle",defaultMessage:"Workspace owners"}),pillIcon:Io,userIds:d?[...new Set(Object.values(d).flat())]:[],selectedUsers:P.owners||[],setSelectedUsers:e=>{D({owners:e})}})]}),(0,i.jsxs)("div",{style:f.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:O,openSortPillMenu:e=>{e&&ne([{propertyId:e,direction:"ascending"}]),oe(!0)},sortProperties:sp}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:A,setQueryFilter:R}),(0,i.jsx)(Z().Z,{renderTooltip:()=>(0,i.jsx)(x()._H,{defaultMessage:"Coming soon",id:"manageWorkspacesTable.comingSoon"}),disableTooltip:o,render:e=>(0,i.jsx)(q().Z,{disabled:!o,onClick:()=>ae({type:"addWorkspaces"}),...e,children:(0,i.jsx)(x()._H,{defaultMessage:"Add workspace",id:"manageWorkspacesTable.addWorkspaceButton"})})})]})]}),"addWorkspaces"===(null==te?void 0:te.type)?(0,i.jsx)(Wg,{onDismiss:()=>ae(void 0),organizationId:t}):null,"viewWorkspace"===(null==te?void 0:te.type)&&re?(0,i.jsx)($g,{spaceStore:re,onDismiss:()=>ae(void 0),organizationId:t}):null,"removeWorkspace"===(null==te?void 0:te.type)?(0,i.jsx)(at,{spaceIds:te.spaceIds,organizationId:t,onCancel:()=>{ae(void 0)},onSubmit:()=>{ae(void 0),X()},refetchData:async()=>await n()}):null,(0,i.jsx)(It().Dp,{hideHeaderRowPadding:!0,columnRenderInfo:g,rows:G,loadMoreMethod:{type:"pages",onLoadNext:U,onLoadPrevious:E,hasNextPage:F,hasPrevPage:W,currentPage:K},renderNoRowsComponent:()=>(0,i.jsx)(Lt,{icon:h().K,title:(0,i.jsx)(x()._H,{id:"manageWorkspacesTable.empty",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(x()._H,{id:"manageWorkspacesTable.empty.byline",defaultMessage:"There are no workspaces that match this query."})}),styles:p,showRowBorders:!0,onRowClick:function(e){e.type!==Vt().a.Loading&&e.isClickable&&ae({type:"viewWorkspace",spaceId:e.id})},multiselect:{header:{isDisabled:!1,isSelected:L.length>0&&$.length===L.length,onClick:()=>{$.length===L.length?X():Q()}},row:{getDisabledState:()=>!1,getSelectedState:e=>$.includes(e.id),onClick:e=>{J(e.id)}}},allowHorizontalScroll:!0,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}})]})}function ip(e){let{organizationStore:t}=e;const a=(0,y().O7)(),s=(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesSubTab.title",defaultMessage:"Manage workspaces"});return(0,i.jsx)(ys().J,{breadcrumbs:[{message:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesSubTab.breadcrumb.goBack",defaultMessage:"General"}),onClick:()=>{Oa().c4({environment:a,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().CO})})}},{message:s}],children:(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:s,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:(0,i.jsx)(x()._H,{id:"organizationManageWorkspacesSubTab.description",defaultMessage:"View and manage all workspaces associated to this organization."})})}),(0,i.jsx)(np,{organizationId:t.id})]})})}var op=()=>a(732811);var rp=()=>a(752127);function lp(e){const{samlConfig:t,updateCreateAccount:a,loading:s}=e,n=(0,y().O7)();return(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.automaticAccountCreation.title",defaultMessage:"Automatic account creation"}),badge:(0,i.jsx)(Es().Z,{icon:Cl().m,ariaLabel:"Learn more about automatic account creation",onClick:()=>rp().D({environment:n,url:(0,ue().UY)("guides.samlJIT")})}),byline:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.automaticAccountCreation.byline",defaultMessage:"Automatically create accounts for new SAML SSO users."}),item:(0,i.jsx)(ye().Z,{on:Boolean(null==t?void 0:t.createAccount),onClick:async function(){t&&await a(!t.createAccount)},disabled:!t||s})})}var dp=()=>a(511375),cp=function(e){return e.UpdateConfiguration="update-configuration",e.UpdateAndEnableConfiguration="update-and-enable-configuration",e}(cp||{});function up(e){const{samlConfig:t,onUpdateSamlStatus:a,loading:n}=e,[o,r]=(0,s.useState)(),l=!!t&&("disabled"!==t.status&&"unconfigured"!==t.status);return(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.enableSamlSso.title",defaultMessage:"Enable SAML SSO"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.enableSamlSso.byline",defaultMessage:"Allow members to log in with SAML SSO using a verified domain."}),item:(0,i.jsx)(dp().h,{buttonTitle:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.enableSamlSso.configure.button",defaultMessage:"Configure"}),buttonOnClick:()=>r(cp.UpdateConfiguration),buttonDisabled:!t||n,on:l,onClick:async function(){if(!t)return;const{status:e,idpMetadata:s,idpMetadataUrl:n}=t,i=n||s;switch(e){case"disabled":i?await a("configured"):r(cp.UpdateAndEnableConfiguration);break;case"unconfigured":r(cp.UpdateAndEnableConfiguration);break;case"configured":case"enforced":await a("disabled");break;case"enforced_for_domain":break;default:(0,kt().t1)(e)}},disabled:!t||n})})}function mp(e){const{samlConfig:t,onUpdateSamlStatus:a,loading:s}=e,n=(0,S().yK)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...K().sM}})),[]),o="enforced"===(null==t?void 0:t.status)?"enforced":"enforced_for_domain"===(null==t?void 0:t.status)?"enforced_for_domain":"not_enforced",r=[{key:"enforced",label:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.loginMethod.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.loginMethod.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===o?(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access."}),item:(0,i.jsx)(K().mk,{disabled:!0,disabledFeedback:!0,children:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.loginMethod.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})}):(0,i.jsx)(be().N,{title:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access."}),item:(0,i.jsx)(ts().L,{isMobile:!1,disabled:!t||s,type:"dropdown",placementToOrigin:_a().Placement.Left,currentOption:o,options:r,onSelectOption:async function(e){"enforced"===e?await a("enforced"):"enforced_for_domain"===e?await a("enforced_for_domain"):await a("configured")},buttonStyle:n.button})})}function gp(){const{samlConfig:e,updateSamlConfig:t,loading:a}=function(){const e=(0,y().O7)(),t=(0,x().YB)(),{samlConfigs:a,loadSamlConfigs:n,refreshSamlConfigs:o}=(0,s.useContext)(z().g),[r,l]=(0,s.useState)(!1);(0,op().Q)((()=>{n()}));const d=(0,s.useCallback)((async(a,s)=>{l(!0);const n=await M().callApi({eventName:"setSamlConfig",environment:e,data:{spaceId:a,...s}});if("failed"===n.type)return C().UW((0,_().wf)(t,n)),void l(!1);await o(),l(!1),et().oV({label:(0,i.jsx)(x()._H,{id:"organization.general.saml.settings.saveChanges.toast.success",defaultMessage:"Successfully updated SAML configuration"})})}),[e,o,t]);return{samlConfig:a.at(0),refreshSamlConfigs:o,updateSamlConfig:d,loading:r}}();async function n(a){e&&await t(e.id,{status:a})}return(0,i.jsx)(be().k,{items:[(0,i.jsx)(up,{samlConfig:e,onUpdateSamlStatus:n,loading:a},"enable-saml-sso"),(0,i.jsx)(mp,{samlConfig:e,onUpdateSamlStatus:n,loading:a},"login-method"),(0,i.jsx)(lp,{samlConfig:e,updateCreateAccount:async function(a){e&&await t(e.id,{createAccount:a})},loading:a},"auto-account-creation")]})}let pp=function(e){return e.Workspaces="workspaces",e.EmailDomains="email-domains",e}({});function hp(e){var t;let{organizationId:n,subtab:o}=e;const r=(0,ne().o)(),l=(0,S().yK)((e=>({orgInfoContainer:{display:"flex",gap:16,flexDirection:"column",marginBottom:36},profileContainer:{display:"flex"},container:{display:"flex",gap:12},orgMetadataContainer:{gap:10,display:"flex",flexDirection:"column"},orgName:{fontSize:26,fontWeight:R().Ue.bold},bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row-reverse"},hiddenAvatarCount:{display:"flex",alignItems:"center",marginLeft:12},defaultIcon:{width:80,fill:e.accentColors.gray[500],borderRadius:L().E.large,padding:24,height:80,marginTop:-88,boxShadow:"0 0 0px 2px rgba(0, 0, 0, 0.04)"},divider:{color:e.stroke.secondary},workspacesIcons:{display:"flex",height:24}})),[]),d=(0,y().O7)(),{state:c}=(0,Xi().J)(),u=(0,b().VK)((()=>c.value?c.value.sampleMemberIds.map((e=>new(ct().U)(d,{table:j().KJ,id:e}))):[]),[d,c.value]),m=(null===(t=c.value)||void 0===t?void 0:t.memberCount)||0,g=(0,Js()._)(),{domainVerifications:p}=(0,a(616438).l)({organizationId:n}),f=(0,b().VK)((()=>p?p.map((e=>(0,a(279431).UV)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at}))).filter((e=>{let{status:t}=e;return t===a(825820).YF.Pending})).length:0),[p]),{updateCacheWithRecordMap:v}=(0,s.useContext)(D().V),w=(0,eo().k)({organizationId:n}),I=(0,b().VK)((()=>null==w?void 0:w.getRawIcon()),[w]),z=(0,b().VK)((()=>(null==w?void 0:w.getName())||""),[w]),A=(0,b().VK)((()=>null==w?void 0:w.getEmailDomains().length),[w]),N=(0,k().E)("organization_console_ga_enabled"),[B,O]=(0,s.useState)();(0,s.useEffect)((()=>{O(z)}),[z]);const V=(0,s.useMemo)((()=>o?function(e){switch(e){case pp.Workspaces:return pp.Workspaces;case pp.EmailDomains:return pp.EmailDomains;default:return pp.Workspaces}}(o):void 0),[o]);const U=()=>{Oa().c4({environment:d,url:(0,La().a5)({organizationId:n,tabRoute:Ft().CO,properties:{subtab:pp.Workspaces}})})};return w?V===pp.Workspaces?(0,i.jsx)(ip,{organizationStore:w}):V===pp.EmailDomains?(0,i.jsx)(a(246578).gt,{organizationStore:w}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{}),(0,i.jsxs)(Ji,{children:[(0,i.jsx)(J,{title:(0,i.jsx)(x()._H,{id:"organization.general.organization.title",defaultMessage:"Edit organization details"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.organization.byline",defaultMessage:"Edit this organization's name below. Changes will take effect immediately upon saving."}),icon:h().K,onSave:async function(){if(!w||B===z)return;const e=await M().callApi({eventName:"updateOrganization",environment:d,data:{organizationId:w.id,name:B}});"success"===e.type?v(e):C().UW((0,_().wf)(T().Z.getIntl(),e))},onCancel:()=>{O(z)},onIconChange:async function(e){if(!w||!e)return;const t=await M().callApi({eventName:"updateOrganization",environment:d,data:{organizationId:w.id,icon:e}});"success"===t.type?v(t):C().UW((0,_().wf)(T().Z.getIntl(),t))},onNameChange:e=>O(e),entityName:z,localIconWithPointer:void 0===I?void 0:{pointer:w.pointer,icon:I},entityDescription:(0,i.jsxs)(H().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(x()._H,{id:"organization.general.orgMetadata",defaultMessage:"Enterprise plan"}),(0,i.jsx)(P().Z,{style:{margin:"0 5px"}}),(0,i.jsx)(re().To,{memberCount:m})]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)(oe,{memberCount:m,sampleMemberUserStores:u,onClick:()=>{Oa().c4({environment:d,url:(0,La().a5)({organizationId:n,tabRoute:Ft().qR,properties:{subtab:"members"}})})},isLoading:void 0===c}),(0,i.jsx)(te().Z,{headerText:(0,i.jsx)(x()._H,{id:"organization.general.workspaces.title",defaultMessage:"Workspaces"}),mainText:(0,i.jsx)(re().Bf,{workspacesCount:g.length}),bottom:(0,i.jsx)("div",{style:l.workspacesIcons,children:(0,i.jsx)(X().ms,{spaceStores:g,isLoading:!1})}),onClick:U})]}),(0,i.jsx)(Va().Z,{size:1,style:{marginTop:52},dividerColor:l.divider.color}),(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.general.configure.title",defaultMessage:"Manage organization"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.general.manageWorkspaces.title",defaultMessage:"Manage workspaces"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.manageWorkspaces.subtitle",defaultMessage:"Add or remove workspaces from your organization."}),rightContent:0!==g.length&&(0,i.jsx)(re().Bf,{workspacesCount:g.length}),onClick:U}),N&&(0,i.jsx)(ae().f,{title:(0,i.jsx)(x()._H,{id:"organization.general.manageEmailDomains.title",defaultMessage:"Manage email domains"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.manageEmailDomains.subtitle",defaultMessage:"Verify email domains to manage matching user accounts and workspaces."}),rightContent:A?(0,i.jsx)(re().gf,{verifiedDomainsCount:A,pendingDomainsCount:f}):(0,i.jsx)(se().Z,{style:r.shortShimmer}),onClick:()=>{Oa().c4({environment:d,url:(0,La().a5)({organizationId:n,tabRoute:Ft().CO,properties:{subtab:pp.EmailDomains}})})}}),!N&&(0,i.jsx)(Z().Z,{renderTooltip:()=>(0,i.jsx)(x()._H,{id:"organization.general.tooltip",defaultMessage:"Coming soon"}),placement:_a().Placement.Right,render:e=>(0,i.jsx)(ae().f,{disabled:!0,title:(0,i.jsx)(x()._H,{id:"organization.general.manageEmailDomains.title",defaultMessage:"Manage email domains"}),byline:(0,i.jsx)(x()._H,{id:"organization.general.manageEmailDomains.subtitle",defaultMessage:"Verify email domains to manage matching user accounts and workspaces."}),...e})})]})}),N?(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"organization.general.saml.title",defaultMessage:"SAML Single sign-on (SSO)"}),content:(0,i.jsx)(gp,{})}):null]})]})]}):null}var fp=()=>a(765513);function xp(e){let{organizationStore:t}=e;const{spaceIds:a}=(0,s.useContext)(z().g),n=(0,y().O7)(),o=(0,Js()._)(),r=()=>{Oa().c4({environment:n,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().CO,properties:{subtab:pp.Workspaces}})})},l=e=>Oa().c4({environment:n,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().HI,queryParams:{[uu]:e}})});return(0,i.jsxs)(Ji,{children:[(0,i.jsx)(xa().f,{title:(0,i.jsx)(x()._H,{id:"settingsConsole.security.title",defaultMessage:"Security"}),children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"p",children:(0,i.jsx)(x()._H,{id:"settingsConsole.security.organizationSettings.landingPage.description",defaultMessage:"Enforce security settings to {workspaceCount, plural, one {the <workspaceslink>1 workspace</workspaceslink>} other {all <workspaceslink>{workspaceCount} workspaces</workspaceslink>}} in your organization. Once enforced, workspace owners will not be able to change them.",values:{workspaceCount:a.length,workspaceslink:e=>(0,i.jsx)(fp().Z,{onClick:r,children:e})}})})}),(0,i.jsx)(vp,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(yp,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(bp,{navigateToSettingTab:l,organizationStore:t,spaceStores:o})]})}function vp(e){return(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"settingsConsole.security.organizationSettings.pageAndPublishing.title",defaultMessage:"Publishing & pages"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Sp,{config:Zc,...e}),(0,i.jsx)(Sp,{config:Wc,...e}),(0,i.jsx)(Sp,{config:Kc,...e})]})})}function yp(e){return(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"settingsConsole.security.organizationSettings.membersAndGuests.title",defaultMessage:"Members & guests"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Sp,{config:Jc,...e}),(0,i.jsx)(Sp,{config:$c,...e})]})})}function bp(e){return(0,i.jsx)(ae().Q,{title:(0,i.jsx)(x()._H,{id:"settingsConsole.security.organizationSettings.integrations.title",defaultMessage:"Integrations"}),content:(0,i.jsx)(Sp,{config:Qc,...e})})}function Sp(e){var t;let{config:a,navigateToSettingTab:s,organizationStore:n,spaceStores:o}=e;const r=a.getOptions(),l=(0,b().VK)((()=>a.getValueFromOrganization(n)),[n,a]),d=(null===(t=r.find((e=>e.key===l)))||void 0===t?void 0:t.label)??du,c=(0,b().VK)((()=>o.map((e=>a.getValueFromSpace(e)))),[o,a]),u=Boolean(l&&c.filter((e=>e!==l)).length)?du:d;return(0,i.jsx)(ae().f,{title:a.title,byline:a.byline,rightContent:u,onClick:()=>s(a.settingName)})}var jp=()=>a(461438);function wp(e){let{selectedValues:t,setSelectedValues:a,options:s}=e;return(0,i.jsx)(Ts().J,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationSecuritySettingFilter.filters.setting.title",defaultMessage:"Setting"}),pillIcon:m().q,selectedItems:t,setSelectedItems:a,items:s.map((e=>{let{key:t,label:a,count:s}=e;return{key:t,value:t,title:a,count:s}}))})}function Mp(e){let{selectedValue:t,setSelectedValue:a}=e;return(0,i.jsx)(Ts().p,{pillTitle:(0,i.jsx)(x()._H,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:h().K,selectedItem:t,setSelectedItem:a,shouldUseCheck:!0,items:[{key:"pending",value:"pending",title:(0,i.jsx)(x()._H,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.title",defaultMessage:"With pending changes only"}),shortTitle:(0,i.jsx)(x()._H,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.shortTitle",defaultMessage:"Changes"})},{key:"custom",value:"custom",title:(0,i.jsx)(x()._H,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.title",defaultMessage:"With custom setting only"}),shortTitle:(0,i.jsx)(x()._H,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.shortTitle",defaultMessage:"Custom setting"})}]})}function Cp(e){let{searchQuery:t,setSearchQuery:a,filters:n,setFilters:o,options:r,appliedSorts:l,setAppliedSorts:d}=e;const c=(0,S().yK)((()=>({leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:6},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),u=[{id:gu.id,name:T().Z.formatMessage(mu.name),type:"title"},{id:hu.id,name:T().Z.formatMessage(mu.members),type:"number"}],[m,g]=(0,s.useState)(!1),[p,h]=(0,s.useState)(),f=p??l??[];return(0,i.jsxs)("div",{style:c.tableHeader,children:[(0,i.jsxs)("div",{style:c.leftContent,children:[(0,i.jsx)(Bn().Z,{children:(0,i.jsx)(ya().i,{sortProperties:u,isMenuOpen:m,setIsMenuOpen:g,onApply:e=>{g(!1),d(e),h(void 0)},currentSorts:f})}),f.length>0?(0,i.jsx)(Rn().Xo,{}):null,(0,i.jsx)(Mp,{selectedValue:n.workspaceFilter,setSelectedValue:e=>o({...n,workspaceFilter:e})}),(0,i.jsx)(wp,{selectedValues:n.settingFilter??[],setSelectedValues:e=>o({...n,settingFilter:e.length?e:void 0}),options:r})]}),(0,i.jsxs)("div",{style:c.rightContent,children:[(0,i.jsx)(va().L,{appliedSorts:l,openSortPillMenu:e=>{e&&h([{propertyId:e,direction:"ascending"}]),g(!0)},sortProperties:u}),(0,i.jsx)(Pt().ON,{mode:Pt().p3.AnimatedSearchButton,query:t,setQueryFilter:a})]})]})}function _p(e){const{organizationStore:t,spaceStores:a,teamStoresForSpace:n,config:o,hasTeamColumn:r}=e,[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(),[m,g]=(0,s.useState)(),{pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f}=(0,s.useContext)(Lc().u),x=Boolean(Object.values(l).filter((e=>(0,kt().$K)(e))).length),v=(0,b().VK)((()=>function(e){let{config:t,organizationStore:a,spaceStores:s,teamStoresForSpace:n,pendingOrgSetting:i,pendingSpaceSettings:o,pendingTeamSettings:r}=e;const l={};for(const c of t.getOptions())l[c.key]={option:c,count:0};const d=i??t.getValueFromOrganization(a);if(d&&d!==Oc){const e=l[d];e&&(l[d]={...e,count:e.count+1})}for(const c of s){const e=o[c.id]??t.getValueFromSpace(c),a=l[e];if(l[e]={...a,count:a.count+1},t.teamSettingName)for(const s of n[c.id]){const e=r[s.id]??t.getValueFromTeam(s,c),a=l[e];l[e]={...a,count:a.count+1}}}return Object.values(l).map((e=>{let{option:t,count:a}=e;return{...t,count:a}}))}({organizationStore:t,spaceStores:a,config:o,teamStoresForSpace:n,pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f})),[t,a,n,o,p,h,f]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(Cp,{appliedSorts:m,setAppliedSorts:g,searchQuery:c,setSearchQuery:u,filters:l,setFilters:d,options:v}),(0,i.jsx)(wu,{organizationStore:t,spaceStores:a,teamStoresForSpace:n,hasTeamColumn:r,config:o,rowFilterFn:e=>function(e,t,a){let s=!0;return t&&e.title&&(s=s&&e.title.toLowerCase().includes(t.toLowerCase())),a.workspaceFilter&&("custom"===a.workspaceFilter?s=s&&Boolean(e.parentSettingValue)&&e.parentSettingValue!==e.settingValue:"pending"===a.workspaceFilter?s=s&&e.isPending:(0,kt().t1)(a.workspaceFilter)),a.settingFilter&&(s=s&&a.settingFilter.includes(e.settingValue)),s}(e,c,l),isFiltered:Boolean(c||x),appliedSorts:null!=m&&m.length?m:[{propertyId:"name",direction:"ascending"}]})]})}function Tp(e){let{organizationStore:t,settingName:a}=e;const n=(0,y().O7)(),o=(0,S().Fg)(),{updateCacheWithRecordMap:r}=(0,s.useContext)(D().V),l=t.id,d=function(e){return cu[e]}(a),c=(0,Js()._)(),u=(0,s.useMemo)((()=>c.map((e=>e.id))),[c]),m=Boolean(d.teamSettingName),{teamStores:g}=(0,A().x)(u,!m),{pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f,clearAllPendingSettings:v,hasPendingSecuritySettings:b}=(0,s.useContext)(Lc().u);(0,s.useEffect)((()=>(v(),v)),[v]);const j=(0,s.useCallback)((async()=>{if(b()){const{accept:e}=await(0,jp().m)(o);if(!e)return;v()}Oa().c4({environment:n,url:(0,La().a5)({organizationId:t.id,tabRoute:Ft().HI})})}),[n,o,v,b,t.id]),w=b(),k=(0,s.useCallback)((async()=>{const e=async function(e){let{environment:t,pendingOrgSetting:a,config:s,organizationId:n,updateCacheWithRecordMap:i}=e;if(!a)return;const o=a===Oc?s.formatUndefinedToSave():s.formatValueToSave(a),r=await M().callApi({eventName:"updateOrganizationSettings",environment:t,data:{organizationId:n,settings:o}});return"success"===r.type&&i({data:r.data}),r}({environment:n,pendingOrgSetting:p,config:d,organizationId:l,updateCacheWithRecordMap:r}),t=Ye().qd(u,Ge().v,(async e=>async function(e){let{environment:t,pendingSpaceSettings:a,pendingTeamSettings:s,spaceId:n,teamStoresForSpace:i,config:o,updateCacheWithRecordMap:r}=e;const l=function(e){let t,{pendingSpaceSettings:a,spaceId:s,config:n}=e;return a[s]&&(t=n.formatValueToSave(a[s])),t}({pendingSpaceSettings:a,spaceId:n,config:o}),d=function(e){let{pendingTeamSettings:t,config:a,teams:s}=e;const n=[];for(const i of s){const e=t[i.id];e&&n.push({teamId:i.id,...a.formatValueToSave(e)})}return n.length?n:void 0}({pendingTeamSettings:s,config:o,teams:i[n]});if(l||d){const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:t,data:{spaceId:n,spaceSettings:l,teamSettings:d}});return"success"===e.type&&r({data:e.data}),e}}({environment:n,pendingSpaceSettings:h,pendingTeamSettings:f,spaceId:e,teamStoresForSpace:g,config:d,updateCacheWithRecordMap:r})));!function(e){let{orgResponse:t,spaceResponses:a}=e;const s=(null==a?void 0:a.find((e=>"failed"===(null==e?void 0:e.type))))??t;"failed"===(null==s?void 0:s.type)?C().UW((0,_().wf)(T().Z.getIntl(),s)):et().oV({label:(0,i.jsx)(x()._H,{id:"organizationSecuritySettingPage.saveSettings.success",defaultMessage:"Successfully saved all settings"})})}({orgResponse:await e,spaceResponses:await t}),v()}),[n,l,d,p,f,h,v,u,g,r]);return(0,i.jsx)(ys().J,{breadcrumbs:[{onClick:j,message:(0,i.jsx)(x()._H,{id:"organizationSecuritySettingPage.breadcrumb.goBack",defaultMessage:"Security"})},{message:d.title}],headerRight:(0,i.jsx)(Y,{onCancel:v,onSave:k,disabled:!w,saveButtonText:(0,i.jsx)(x()._H,{id:"organizationSecuritySettingPage.saveChanges",defaultMessage:"Save changes"}),isLarge:!0}),children:(0,i.jsxs)(bs().B,{children:[(0,i.jsx)(xa().f,{title:d.title,children:(0,i.jsx)(H().q,{styleName:"Body-14px/Regular",colorName:"secondary",as:"span",children:d.byline})}),(0,i.jsx)(_p,{organizationStore:t,spaceStores:c,teamStoresForSpace:g,hasTeamColumn:m,config:d})]})})}function kp(e){let{organizationId:t,queryParams:a}=e;const s=(0,eo().k)({organizationId:t}),n=a[uu],o=(0,kt().qg)(cu,n)?n:void 0;return s?o?(0,i.jsx)(Tp,{settingName:o,organizationStore:s}):(0,i.jsx)(xp,{organizationStore:s}):null}const Ip={general:()=>!0,security:()=>!0,people:()=>!0,data_and_compliance:e=>{let{features:t}=e;return t.organization_console_new_data_compliance_view_enabled??!1},audit_log:()=>!0,analytics:()=>v().default.checkGate({gateName:"organization_console_ga_enabled"}),content_search:()=>!1},Hp="group-id",Pp={general:{tab:{icon:m().q,name:(0,i.jsx)(x()._H,{id:"settingsConsole.organization.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(hp,{subtab:e.properties.subtab,...e})},security:{tab:{icon:d().Y,name:(0,i.jsx)(x()._H,{id:"settingsConsole.organization.tabNames.security",defaultMessage:"Security"})},scene:e=>(0,i.jsx)(kp,{...e})},people:{tab:{icon:f,name:(0,i.jsx)(x()._H,{id:"settingsConsole.organization.tabNames.people",defaultMessage:"People"})},scene:e=>(0,i.jsx)(ao,{subtab:e.properties.subtab,userId:e.queryParams.userId,groupId:e.queryParams[Hp],...e})},data_and_compliance:{tab:{icon:o,name:(0,i.jsx)(x()._H,{id:"settingsConsole.organization.tabNames.dataAndCompliance",defaultMessage:"Data & Compliance"})},scene:e=>(0,i.jsx)(lg,{subtab:e.properties.subtab,spaceId:e.queryParams[Dp],...e})},audit_log:{tab:{icon:c,name:(0,i.jsx)(x()._H,{id:"settingsConsole.organization.tabNames.audit_log",defaultMessage:"Audit log"})},scene:e=>(0,i.jsx)(_m,{...e,spaceId:e.queryParams[Dp]})},content_search:{tab:{icon:u,name:(0,i.jsx)(x()._H,{id:"settingsConsole.organization.tabNames.contentSearch",defaultMessage:"Content search"})},scene:e=>(0,i.jsx)(bg,{spaceId:e.queryParams[Dp],...e})},analytics:{tab:{icon:r,name:(0,i.jsx)(x()._H,{id:"settingsConsole.organization.tabNames.contentAnalytics",defaultMessage:"Analytics"})},scene:e=>(0,i.jsx)(Sm,{spaceId:e.queryParams[Dp],subtab:e.properties.subtab,...e})}},Dp="space-id",zp={general:()=>!0,workspaces:()=>!0,groups:()=>!0,audit_log:()=>!0},Ap={general:{tab:{icon:m().q,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleUserView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Ac,{...e})},workspaces:{tab:{icon:h().K,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleUserView.tabNames.workspaces",defaultMessage:"Workspaces"})},scene:e=>(0,i.jsx)(Zu,{...e})},groups:{tab:{icon:p,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleUserView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(Pu,{...e})},audit_log:{tab:{icon:c,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleUserView.tabNames.auditLog",defaultMessage:"Audit log"})},scene:e=>(0,i.jsx)(wc,{...e})}},Np={general:()=>!0,members:()=>!0,teamspaces:()=>!0,pages:()=>!0},Rp={general:{tab:{icon:m().q,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleGroupView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Gl,{organizationId:e.organizationId,membersState:e.membersState,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},members:{tab:{icon:f,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleGroupView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(od,{organizationId:e.organizationId,membersState:e.membersState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},teamspaces:{tab:{icon:h().K,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleGroupView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(gr,{organizationId:e.organizationId,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},pages:{tab:{icon:l().I,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleGroupView.tabNames.pages",defaultMessage:"Pages"})},scene:e=>(0,i.jsx)(xd,{organizationId:e.organizationId,groupPageStores:e.groupPageStores,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal,removePagesFromGroup:e.removePagesFromGroup})}},Bp={general:()=>!0,members:()=>!0,guests:()=>v().default.checkGate({gateName:"organization_console_ga_enabled"}),groups:()=>v().default.checkGate({gateName:"organization_console_ga_enabled"}),teamspaces:()=>v().default.checkGate({gateName:"organization_console_ga_enabled"})},Lp={general:{tab:{icon:m().q,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleWorkspaceView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(_t,{...e})},members:{tab:{icon:f,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleWorkspaceView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(Zo,{...e})},guests:{tab:{icon:g,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleWorkspaceView.tabNames.guests",defaultMessage:"Guests"})},scene:e=>(0,i.jsx)(ko,{...e})},groups:{tab:{icon:p,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleWorkspaceView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(fo,{...e})},teamspaces:{tab:{icon:h().K,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleWorkspaceView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(kr,{...e})}},Op={general:()=>!0,members:()=>!0,browse_content:()=>!1},Vp={general:()=>!0,members:()=>!0,browse_content:()=>!0},Up={general:{tab:{icon:m().q,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleLegalHoldView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(El,{...e})},members:{tab:{icon:h().K,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleLegalHoldView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(Ml,{...e})},browse_content:{tab:{icon:u,name:(0,i.jsx)(x()._H,{id:"settingsConsole.singleLegalHoldView.tabNames.browseContent",defaultMessage:"Browse content"})},scene:e=>(0,i.jsx)(el,{...e})}}},916940:(e,t,a)=>{a.d(t,{E:()=>s,X:()=>n});const s={mini:3,small:4,default:6,medium:8,large:12,max:16},n="0px 4px 0px -2px #00000005"},220167:(e,t,a)=>{a.d(t,{y:()=>h});a(667294);var s=()=>a(219727),n=()=>a(846550),i=()=>a(826341),o=()=>a(456681),r=()=>a(788860),l=()=>a(752127),d=()=>a(527278),c=()=>a(148126),u=()=>a(265640),m=()=>a(67961),g=a(785893);const p=(0,r().vU)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics in the last 90 days"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"An admin has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"An admin has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){const t=(0,n().yK)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s().O7)(),{type:h,spaceName:f}=e,x=function(e,t){switch(e){case"empty":return{heading:d().Z.formatMessage(p.emptyAnalyticsHeading),description:d().Z.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,g.jsx)(r()._H,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,g.jsx)("br",{})}}):(0,g.jsx)(r()._H,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,g.jsx)("br",{})}});return{heading:d().Z.formatMessage(p.disabledAnalyticsHeading),description:e}}}(h,f);return(0,g.jsx)("div",{style:t.outerDiv,children:(0,g.jsxs)("div",{style:t.innerDiv,children:[(0,i().z)(t.analyticsIcon),(0,g.jsx)(m().Z,{isSecondaryColor:!0,style:t.header,children:x.heading}),(0,g.jsx)(m().Z,{isSecondaryColor:!0,children:x.description}),(0,g.jsxs)(u().D,{onClick:()=>l().D({environment:a,url:(0,c().UY)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,o().m)(t.learnMoreIcon),(0,g.jsx)(m().Z,{isSmall:!0,children:(0,g.jsx)(r()._H,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},121056:(e,t,a)=>{a.d(t,{D:()=>P,c:()=>D});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(843403),l=()=>a(306164),d=()=>a(989478),c=()=>a(768050),u=()=>a(788860),m=()=>a(696459),g=()=>a(707513),p=()=>a(266093),h=()=>a(527278),f=()=>a(148126),x=()=>a(407544),v=()=>a(998901),y=()=>a(826955),b=()=>a(356641),S=()=>a(654133),j=()=>a(67961),w=()=>a(360964),M=()=>a(774933),C=()=>a(140303),_=()=>a(637887),T=()=>a(499214),k=()=>a(304109),I=a(785893);const H=640;function P(e){let{data:t,loading:a,error:r,daysFilter:m,setDaysFilter:P}=e;const z=(0,n().O7)(),{activeMembersCount:A,previousActiveMembersCount:N,activeGuestsCount:R,previousActiveGuestsCount:B,topTeamspaces:L,topViewers:O,topEditors:V}=t,U=(0,o().yK)((e=>({title:{fontWeight:g().Ue.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{minHeight:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[q,E]=(0,x().e)(),{organizationOwnerRecordCache:Z}=(0,s.useContext)(C().V),F=(0,s.useCallback)((e=>{p().m0(z,{filter:"user_engagement",daysFilter:e}),P(e)}),[z,P]),W=(0,i().VK)((()=>L.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(y().zX)(z,{id:t,table:l().e0},{inMemoryRecordCache:Z}),caption:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,I.jsx)(M().e,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[z,L,Z]),K=(0,i().VK)((()=>O.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(y().U6)(z,{id:t,table:d().KJ}),caption:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,I.jsx)(M().e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[z,O]),G=(0,i().VK)((()=>V.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(y().U6)(z,{id:t,table:d().KJ}),caption:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,I.jsx)(M().e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[z,V]);return(0,I.jsxs)("div",{style:U.container,ref:q,children:[(0,I.jsxs)("div",{style:U.titleContainer,children:[(0,I.jsxs)(j().Z,{style:U.title,children:[(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,I.jsx)(S().Z,{placement:v().Placement.Bottom,render:e=>(0,I.jsx)(w().Z,{...e,href:(0,f().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:U.helpInfo}),renderTooltip:()=>"all_time"!==m?(0,I.jsx)(u()._H,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().Z.formatMessage(c().xX[m])}}):(0,I.jsx)(u()._H,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,I.jsx)(k().f,{currentFilter:m,onChangeFilter:F})]}),(0,I.jsxs)(b().rj,{gap:16,children:[(0,I.jsx)(b().r8,{row:1,col:1,children:(0,I.jsx)(T().q,{style:U.summaryCard,loading:a,error:r,title:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,I.jsx)(M().e,{abbreviateNumber:E<H,num:A})}}),byline:void 0!==N?(0,I.jsx)(D,{userType:"members",daysFilter:m,count:A,previousCount:N}):null})}),(0,I.jsx)(b().r8,{row:1,col:2,children:(0,I.jsx)(T().q,{style:U.summaryCard,loading:a,error:r,title:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,I.jsx)(M().e,{abbreviateNumber:E<H,num:R})}}),byline:void 0!==B?(0,I.jsx)(D,{userType:"guests",daysFilter:m,count:R,previousCount:B}):null})})]}),(0,I.jsxs)(b().rj,{gap:16,children:[(0,I.jsx)(b().r8,{row:1,col:1,children:(0,I.jsx)(_().$,{loading:a,error:r,title:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:W})}),(0,I.jsx)(b().r8,{row:1,col:2,children:(0,I.jsx)(_().$,{loading:a,error:r,title:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:K})}),(0,I.jsx)(b().r8,{row:1,col:3,children:(0,I.jsx)(_().$,{loading:a,error:r,title:(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:G})})]})]})}function D(e){let{userType:t,daysFilter:a,count:s,previousCount:n}=e;const i=0===s&&0===n?0:Math.round((s-n)/n*100);let l;l=i===1/0?function(e,t,a){if("all_time"===a)return(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().ez[a].toLocaleString()}}):(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().ez[a].toLocaleString()}})}(t,s,a):function(e,t){switch(t){case"all_time":return 0===e?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,I.jsx)(u()._H,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,m().t1)(t)}}(i,a);const d=i>0?(0,r().J)({height:12,width:12,fill:"currentColor"}):i<0?(0,r().J)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,g=(0,o().yK)((e=>({text:{color:i>0?e.accentColors.green[500]:i<0?e.accentColors.red[500]:e.lightTextColor,display:"flex",alignItems:"center",gap:4}})),[i]);return(0,I.jsxs)("span",{style:g.text,children:[d,l]})}},776981:(e,t,a)=>{a.d(t,{Z:()=>L});var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(565630),r=()=>a(768050),l=()=>a(788860),d=()=>a(707513),c=()=>a(527278),u=()=>a(148126),m=()=>a(998901),g=()=>a(654133),p=()=>a(67961),h=()=>a(360964),f=()=>a(304109),x=()=>a(220167),v=(a(821057),a(670560),a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(241792),()=>a(219727)),y=()=>a(431595),b=()=>a(513670),S=()=>a(266093),j=()=>a(824462),w=()=>a(443269);const M={field:"num_searches",direction:"desc"},C=a(840984).D2,_={sort:M,timeRange:C,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var T=()=>a(549874),k=()=>a(285473),I=()=>a(312578),H=()=>a(330565),P=a(785893);const D=(0,l().vU)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),z=(0,l().vU)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}}),A={queryText:{id:"queryText",headerTitle:c().Z.formatMessage(z.queryText),renderCell:e=>(0,P.jsx)(p().Z,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,P.jsx)(H().r,{tooltipMessageDescriptor:D.numSearches,columnHeader:z.numSearches}),renderCell:e=>(0,P.jsx)(B,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,P.jsx)(H().r,{tooltipMessageDescriptor:D.numUniqueUsers,columnHeader:z.numUniqueUsers}),renderCell:e=>(0,P.jsx)(B,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,P.jsx)(H().r,{tooltipMessageDescriptor:D.ctr,columnHeader:z.ctr}),renderCell:e=>(0,P.jsx)(B,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}},N=(0,a(696459).Yd)(A).map((e=>A[e]));function R(e){let{searchAnalyticsDataList:t,runNewSearch:a,sort:o,setSort:d,loadNextPage:c,loading:u,error:m}=e;const g=(0,n().VK)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),h=(0,s.useMemo)((()=>function(e){const t=r().Fi[e.field];if(!t)return;return{column:A[t],sortAscending:"asc"===e.direction}}(o)),[o]),f=(0,i().yK)((e=>(0,k().bE)({columnRenderInfo:N,theme:e,containerMarginTop:0})),[]),x=(0,i().yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return m?(0,P.jsx)(T().q,{error:m,runNewSearch:a}):(0,P.jsxs)("div",{children:[(0,P.jsx)(k().Dp,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:N,rows:g,sortState:h,onSortStateChanged:e=>{d(function(e){const t=r().hx[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:c},renderNoRowsComponent:()=>(0,P.jsx)(p().Z,{isSmall:!0,style:x.emptyQuery,children:!u&&0===t.length&&(0,P.jsx)(l()._H,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:f}),u?(0,P.jsx)(I().Z,{style:x.loadingSpinner}):null]})}function B(e){let{value:t,isPercentage:a}=e;const s=(0,i().yK)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=a?`${t}%`:t;return(0,P.jsx)(p().Z,{style:s.centered,children:n})}function L(e){const{spaceStore:t}=e,a=(0,i().yK)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:d().Ue.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),T=(0,s.useRef)(!1),{searchAnalyticsDataList:k,timeRange:I,sort:H,loading:D,error:z,loadNextPage:A,runNewSearch:N,setTimeRange:B,setSort:L}=function(e){let{spaceStore:t}=e;const a=(0,v().O7)(),[n,i]=(0,s.useState)(_),o=(0,s.useRef)(M),r=(0,s.useRef)(C),d=(0,l().YB)(),c=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const d=!b().Xy(n.sort,o.current)||!b().Xy(n.timeRange,r.current);if(!l&&!d)return;o.current=n.sort,r.current=n.timeRange;let c=n.loading,u=n.error,m=n.hasNextPage,g=n.paginationToken;if(s&&(i((e=>({..._,timeRange:e.timeRange,sort:e.sort}))),c=_.loading,u=_.error,m=_.hasNextPage,g=_.paginationToken),!m||c)return;if(u)return;i((e=>({...e,loading:!0})));const p=await j().callApi({eventName:"loadSearchAnalytics",environment:a,data:{spaceId:t.id,sort:n.sort,timeRange:n.timeRange,startCursor:g}});if("failed"===p.type)return void i((e=>({...e,loading:!1,error:p})));const h=p.data.results;i((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of h){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:p.data.nextCursor,hasNextPage:Boolean(p.data.nextCursor)}}))}),[a,t,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),m=(0,s.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),g=(0,s.useCallback)((e=>{"all_time"!==e&&(i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),S().ye(a,{daysFilter:e}))}),[a]),p=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),S().$f(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]),h=(0,s.useMemo)((()=>{if(n.error)return 404===n.error.status?new(y().dR)({message:(0,w().wf)(d,n.error)}):new Error((0,w().wf)(d,n.error))}),[n.error,d]);return{...n,error:h,loadNextPage:u,runNewSearch:m,setTimeRange:g,setSort:p}}({spaceStore:t}),O=(0,o().D9)(t.id),V=(0,s.useMemo)((()=>void 0!==O&&t.id!==O),[t.id,O]);(0,s.useEffect)((()=>{T.current&&!V||(N(!0),T.current=!0)}),[N,V]);const U=(0,n().VK)((()=>t.getName()),[t]);return"NotFoundError"===(null==z?void 0:z.name)?(0,P.jsx)(x().y,{type:"empty",spaceName:U}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{style:a.header,children:[(0,P.jsxs)(p().Z,{style:a.sectionTitle,children:[(0,P.jsx)(l()._H,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,P.jsx)(g().Z,{placement:m().Placement.Bottom,render:e=>(0,P.jsx)(h().Z,{...e,href:(0,u().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:a.helpInfo}),renderTooltip:()=>(0,P.jsx)(l()._H,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c().Z.formatMessage(r().xX[I])}})})]}),(0,P.jsx)(f().f,{currentFilter:I,onChangeFilter:B,hideAllTime:!0})]}),(0,P.jsx)(R,{searchAnalyticsDataList:k,runNewSearch:N,sort:H,setSort:L,loadNextPage:A,loading:D,error:z})]})}},549971:(e,t,a)=>{a.d(t,{w:()=>$,Z:()=>Y});a(241792);var s=a(667294),n=()=>a(239297),i=()=>a(219727),o=()=>a(142735),r=()=>a(846550),l=()=>a(768050),d=()=>a(788860),c=()=>a(568017),u=()=>a(707513),m=()=>a(266093),g=()=>a(840984),p=()=>a(196587),h=()=>a(527278),f=()=>a(148126),x=()=>a(407544),v=()=>a(998901),y=()=>a(902030),b=()=>a(901690),S=()=>a(654133),j=()=>a(67961),w=()=>a(360964),M=()=>a(928826),C=()=>a(220167),_=()=>a(356641),T=()=>a(774933),k=()=>a(499214),I=()=>a(304109),H=()=>a(121056),P=a(785893);const D=640;function z(e){let{data:t,loading:a,error:s,daysFilter:n,setDaysFilter:i}=e;const[o,c]=(0,x().e)(),m=(0,r().yK)((e=>({title:{fontWeight:u().Ue.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:g,previousActiveMembersCount:p,activeGuestsCount:y,previousActiveGuestsCount:b}=t;return(0,P.jsxs)("div",{style:m.container,ref:o,children:[(0,P.jsxs)("div",{style:m.titleContainer,children:[(0,P.jsxs)(j().Z,{style:m.title,children:[(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,P.jsx)(S().Z,{placement:v().Placement.Bottom,render:e=>(0,P.jsx)(w().Z,{...e,href:(0,f().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().Z.formatMessage(l().xX[n])}}):(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,P.jsx)(I().f,{currentFilter:n,onChangeFilter:i})]}),(0,P.jsxs)(_().rj,{gap:16,children:[(0,P.jsx)(_().r8,{row:1,col:1,children:(0,P.jsx)(k().q,{style:m.summaryCard,loading:a,error:s,title:(0,P.jsx)(d()._H,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,P.jsx)(T().e,{abbreviateNumber:c<D,num:g})}}),byline:void 0!==p?(0,P.jsx)(H().c,{userType:"members",daysFilter:n,count:g,previousCount:p}):null})}),(0,P.jsx)(_().r8,{row:1,col:2,children:(0,P.jsx)(k().q,{style:m.summaryCard,loading:a,error:s,title:(0,P.jsx)(d()._H,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,P.jsx)(T().e,{abbreviateNumber:c<D,num:y})}}),byline:void 0!==b?(0,P.jsx)(H().c,{userType:"guests",daysFilter:n,count:y,previousCount:b}):null})})]})]})}a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(267602),a(653476);var A=()=>a(801812),N=()=>a(741633),R=()=>a(243225),B=()=>a(824462),L=()=>a(591914),O=()=>a(421736),V=()=>a(876822),U=()=>a(285473),q=()=>a(330565);const E=(0,d().vU)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),Z=(0,d().vU)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),F={user:{id:"user",renderCell:function(e){const{userStore:t,role:n}=e,i=(0,r().yK)((e=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,o().VK)((()=>t.isReady()),[t])?(0,P.jsx)(O().Z,{containerStyle:i.container,actorStore:t,spaceRole:n&&(0,O().K)(n)}):(0,P.jsx)(a(816559).L,{})},headerTitle:h().Z.formatMessage(Z.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e,s=(0,r().yK)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor},cell:{marginLeft:10}})),[]);if(void 0===t)return(0,P.jsx)(S().Z,{placement:v().Placement.Bottom,render:e=>(0,P.jsx)("div",{...e,children:(0,a(259739).D)(s.eyeHideIcon)}),renderTooltip:e=>(0,P.jsx)(d()._H,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,P.jsx)(j().Z,{children:t})},headerTitle:(0,P.jsx)(q().r,{tooltipMessageDescriptor:E.page_views,columnHeader:Z.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,P.jsx)(j().Z,{children:t})},headerTitle:(0,P.jsx)(q().r,{tooltipMessageDescriptor:E.page_edits,columnHeader:Z.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let s;s=t?(0,P.jsx)(a(802321).T,{dateTs:t}):(0,P.jsx)(j().Z,{isSecondaryColor:!0,children:(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,P.jsx)("div",{children:s})},headerTitle:h().Z.formatMessage(Z.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:s,role:n,userPermissionGroupIds:i}=e;if(!n)return(0,P.jsx)(j().Z,{children:(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,P.jsx)(a(825910).ZP,{teamStores:t,memberId:s.id,userPermissionGroupIds:i})},headerTitle:h().Z.formatMessage(Z.teams),widthData:{width:50},sortable:!1}};const W=(0,a(696459).Yd)(F).map((e=>F[e])),K=25;function G(e){const t=(0,i().O7)(),[a,n]=(0,s.useState)(K),{teamStores:u,usersAndStats:g,filter:p,onUserTabFilterChange:h,usersAndStatsError:f}=e,{userRoles:x,spaceId:v}=(0,o().VK)((()=>{const{currentSpaceStore:e}=V().default.state,t=g.map((e=>e.userStore.id)),a=null==e?void 0:e.id,s={};for(const n of t){const t=(0,L()._P)(e,n),a=null==t?void 0:t.getMembershipType();if(a&&"none"!==a&&"page_guest"!==a){const e=(0,R().qF)(a);s[n]=e}}return{userRoles:s,spaceId:a}}),[g]),[{value:y}]=(0,A().r5)((async()=>{if(void 0===v)return{};const e=await B().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:v,userIds:g.map((e=>e.userStore.id))},headers:(0,N().Bb)({cellId:void 0,spaceId:v})});return"success"===e.type?e.data.userToGroupMap:{}}),[t,v,g],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),[b,S]=(0,s.useState)({column:F.last_active,sortAscending:!1}),w=(0,s.useCallback)((e=>{m().gE(t,{column:e.column.id,isAscending:e.sortAscending}),S(e)}),[S,t]),M=g.map((e=>{let{userStore:t,stats:a}=e;return{id:a.userId,userStore:t,teamStores:u,isClickable:!1,last_active:a.lastActive,page_views:a.numPageViews,page_edits:a.numPageEdits,role:x[a.userId],userPermissionGroupIds:new Set((null==y?void 0:y[a.userId])||[])}})).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,l().Zj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,l().yM)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(b)),C=(0,s.useMemo)((()=>M.slice(0,a)),[M,a]),_=(0,r().yK)((e=>({error:{color:c().ZP.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const T=(0,s.useCallback)((e=>{m().Iw(t,{daysFilter:e}),h({tableFilter:e})}),[t,h]),k=(0,r().yK)((e=>(0,U().bE)({columnRenderInfo:W,theme:e,containerMarginTop:0})),[]);return(0,P.jsxs)(P.Fragment,{children:[f&&(0,P.jsx)(j().Z,{isMultiline:!1,style:_.error,children:f}),(0,P.jsxs)("div",{style:_.dateFilterPill,children:[(0,P.jsx)(j().Z,{isSecondaryColor:!0,style:_.timeFilterDescription,children:(0,P.jsx)(d()._H,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,P.jsx)(I().f,{currentFilter:p,onChangeFilter:T})]}),(0,P.jsx)(U().Dp,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:b,onSortStateChanged:w,columnRenderInfo:W,rows:C,renderNoRowsComponent:()=>(0,P.jsx)("div",{children:"N/A"}),styles:k,loadMoreMethod:{type:"scroll",onLoadMore:function(){a<g.length&&n(a+K)}}})]})}function Y(e){var t,a;let{spaceStore:n,teamStores:p,usersTabData:b,onUserTabFilterChange:_,userEngagement:T}=e;const[k,I]=(0,x().e)(),H=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},sectionTitle:{fontWeight:u().Ue.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-around"},numUsersCaption:{display:"flex"},overviewText:{textAlign:"center"},error:{color:c().ZP.red},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"},tooltip:{marginLeft:3},infoIcon:{height:14,width:14,color:e.mediumTextColor}})),[]),D=(0,i().O7)(),A=(0,d().YB)(),N=(0,s.useCallback)((e=>{m().KC(D,{daysFilter:e});_({graphFilter:"all_time"===e?"last_90_days":e}),T.setDaysFilter(e)}),[_,T,D]),R=(0,o().VK)((()=>n.getName()),[n]);if("NotFoundError"===(null==b||null===(t=b.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=T.error)||void 0===a?void 0:a.name))return(0,P.jsx)(C().y,{type:"empty",spaceName:R});const B=Math.floor(I-8);return(0,P.jsxs)("div",{style:H.container,children:[(0,P.jsx)(z,{data:T.data,loading:T.loading,error:T.error,daysFilter:T.daysFilter,setDaysFilter:N}),(0,P.jsx)($,{usersTabData:b,daysFilter:T.daysFilter,intl:A,containerRef:k,widthOfGraph:B}),(0,P.jsxs)("div",{style:H.tableHeader,children:[(0,P.jsxs)("div",{style:H.sectionTitleLeft,children:[(0,P.jsx)(j().Z,{style:H.sectionTitle,children:(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,P.jsx)(S().Z,{placement:v().Placement.Bottom,render:e=>(0,P.jsx)(w().Z,{...e,href:(0,f().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:H.helpInfo}),renderTooltip:()=>b&&"all_time"!==b.tableFilter?(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:h().Z.formatMessage(l().xX[b.tableFilter])}}):(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),b?(0,P.jsx)(M().f,{analyticsType:y().x.Users,filters:{daysFilter:b.tableFilter}}):null]}),b?(0,P.jsx)(G,{teamStores:p,filter:b.tableFilter,usersAndStats:b.usersAndStats,onUserTabFilterChange:_,usersAndStatsError:b.usersAndStatsError&&g().Uk(b.usersAndStatsError,A)}):null]})}function $(e){let{usersTabData:t,daysFilter:a,containerRef:s,widthOfGraph:n,intl:i,displayBoxStyle:o,graphTitleStyle:r}=e;return(0,P.jsx)(J,{style:o,children:(0,P.jsx)("div",{ref:s,children:t?(0,P.jsx)(Q,{width:n,dailyUsersData:t.dailyUsersData,userEngagementDaysFilter:a,daysFilter:t.graphFilter,dailyUsersError:t.dailyUsersError&&g().Uk(t.dailyUsersError,i),graphTitleStyle:r}):(0,P.jsx)(X,{})})})}function J(e){const t=(0,r().yK)((t=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${t.regularDividerColor}`,backgroundColor:t.contentBackground,color:t.regularTextColor,padding:20,...e.style}})),[e.style]);return(0,P.jsx)("div",{style:t.border,children:e.children})}function Q(e){const{width:t,dailyUsersData:a,userEngagementDaysFilter:s,daysFilter:i,dailyUsersError:m}=e,g=(0,r().yK)((t=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:u().JB.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24,...e.graphTitleStyle},graphCaption:{fontSize:u().JB.UISmall.desktop},graphTooltip:{marginLeft:5,width:14,height:14},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:c().ZP.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[e.graphTitleStyle]),{blueLayer:x}=(0,n().useTimeSeriesPalette)(),y=(0,o().VK)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),b=(0,o().VK)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let M;return M=!y||a.length<3?(0,P.jsx)("div",{style:g.emptyGraphBody,children:(0,P.jsx)(j().Z,{isSecondaryColor:!0,children:(0,P.jsx)(d()._H,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,P.jsx)(p().J,{startDate:y.startDate,endDate:y.endDate,width:t,data:b,height:300,layers:[{key:"active_members",...x,renderLabel:e=>(0,P.jsx)(d()._H,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,P.jsx)("div",{style:g.graphSubLabel,children:(0,P.jsx)(d()._H,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:h().Z.formatMessage(l().xX[i])}})})}),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:g.graphHeader,children:(0,P.jsxs)(j().Z,{style:g.graphTitle,children:[(0,P.jsx)(d()._H,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===s&&(0,P.jsx)(S().Z,{placement:v().Placement.Bottom,render:e=>(0,P.jsx)(w().Z,{...e,href:(0,f().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>(0,P.jsx)(d()._H,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})})]})}),m&&(0,P.jsx)(j().Z,{isMultiline:!1,style:g.error,children:m}),M]})}function X(){return(0,P.jsxs)("div",{children:[(0,P.jsx)(b().Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,P.jsx)(b().Z,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},330565:(e,t,a)=>{a.d(t,{r:()=>l});a(667294);var s=()=>a(788860),n=()=>a(527278),i=()=>a(998901),o=()=>a(654133),r=a(785893);function l(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,r.jsx)(o().Z,{placement:i().Placement.Top,renderTooltip:e=>(0,r.jsx)("div",{...e,children:(0,r.jsx)(s()._H,{...t})}),render:e=>(0,r.jsx)("div",{...e,children:n().Z.formatMessage(a)})})}},637887:(e,t,a)=>{a.d(t,{$:()=>f});a(241792),a(667294);var s=()=>a(142735),n=()=>a(846550),i=()=>a(788860),o=()=>a(568017),r=()=>a(696459),l=()=>a(707513),d=()=>a(383694),c=()=>a(901690),u=()=>a(943620),m=()=>a(384241),g=()=>a(67961),p=()=>a(981583),h=a(785893);function f(e){let{title:t,items:a,loading:s,error:i,titleStyle:o,containerStyle:r}=e;const d=(0,n().yK)((e=>({title:{alignSelf:"center",maxWidth:"100%",fontWeight:l().Ue.semibold,marginBottom:8,...l().Yu},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",width:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12,overflow:"hidden"}})),[]);return(0,h.jsxs)("div",{style:{...d.container,...r},children:[(0,h.jsx)(g().Z,{style:{...d.title,...o},showTooltipWhenTruncated:!0,children:t}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{})]}):i?(0,h.jsx)(y,{}):a.map(((e,t)=>(0,h.jsx)(x,{item:e},t)))]})}function x(e){let{item:t}=e;const{store:a,caption:n}=t,o=(0,i().YB)(),l=b(),c=(0,s().VK)((()=>{switch(a.table){case"block":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(u().Z,{icon:a.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(m().Z,{store:a})]});case"notion_user":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(p().Z,{userStore:a,size:18}),(0,h.jsx)(g().Z,{children:a.getDisplayName(o)})]});case"team":const e=a.getName();return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(d().p,{disabled:!0,store:a,size:20}),(0,h.jsx)(g().Z,{children:e})]});default:(0,r().t1)(a)}}),[a,l.nameAndIconContainer,o]);return(0,h.jsxs)("div",{style:l.container,children:[(0,h.jsx)(g().Z,{style:l.label,children:c}),(0,h.jsx)("div",{style:l.caption,children:(0,h.jsx)(g().Z,{isSecondaryColor:!0,isSmall:!0,children:n})})]})}function v(){const e=b();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(g().Z,{style:e.label,children:(0,h.jsx)(c().Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c().Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function y(){const e=b();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(g().Z,{style:e.errorLabel,children:(0,h.jsx)(i()._H,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function b(){return(0,n().yK)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:o().ZP.red}})),[])}},499214:(e,t,a)=>{a.d(t,{q:()=>u});a(667294);var s=()=>a(846550),n=()=>a(431595),i=()=>a(788860),o=()=>a(568017),r=()=>a(707513),l=()=>a(901690),d=()=>a(67961),c=a(785893);function u(e){let{icon:t,iconStyles:a,textStyles:u,style:m,title:g,byline:p,loading:h,error:f}=e;const x=function(e,t,a){return(0,s().yK)((s=>({title:{fontWeight:r().Ue.medium,fontSize:16,maxWidth:"100%"},byline:{fontSize:r().JB.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.lightTextColor,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:o().ZP.red}})),[e,t,a])}(a,u,m);return h?(0,c.jsx)("div",{style:x.container,children:(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)("div",{style:x.loadingTitle,children:(0,c.jsx)(l().Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,c.jsx)("div",{style:x.loadingByline,children:(0,c.jsx)(l().Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,c.jsx)("div",{style:x.container,children:(0,c.jsx)("div",{style:x.titleContainer,children:(0,c.jsx)(d().Z,{style:x.errorTitle,children:(0,n().Jx)(f)?f.message:(0,c.jsx)(i()._H,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:x.container,children:[t?t(x.icon):null,(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)(d().Z,{style:x.title,showTooltipWhenTruncated:!0,children:g}),p?(0,c.jsx)(d().Z,{style:x.byline,isMultiline:!0,children:p}):null]})]})}},304109:(e,t,a)=>{a.d(t,{f:()=>y});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(846550),i=()=>a(135796),o=()=>a(768050),r=()=>a(61738),l=()=>a(527278),d=()=>a(352230),c=()=>a(998901),u=()=>a(104088),m=()=>a(827973),g=()=>a(198829),p=()=>a(255577),h=()=>a(967092),f=()=>a(388284),x=()=>a(390561),v=a(785893);function y(e){const t=(0,n().yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:y}=e,[b,S]=(0,s.useState)(!1),j=o().Hz.filter((e=>!y||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),S(!1)};return{key:t,action:()=>{},render:()=>(0,v.jsx)(m().Z,{focused:!1,onClick:a,title:l().Z.formatMessage(o().Rh[t])})}})),w=(0,v.jsx)(r().Z,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,i().C)({width:16,marginRight:6,fill:"currentColor"}),title:l().Z.formatMessage(o().Rh[a]),onClick:()=>{S(!0)}}),M=[{key:"filters",items:j,render:e=>(0,v.jsx)(f().Z,{...e,title:null,loading:!1})}],C=(0,v.jsx)(g().Z,{menuType:d().o.Popup,header:null,children:(0,v.jsx)(p().ZP,{type:p().iW.Vertical,initialFocus:0,sections:M})});return(0,v.jsx)(x().Z,{marginAfter:!1,children:(0,v.jsx)(h().ZP,{popupType:u().k.Popup,placementToOrigin:c().Placement.Bottom,alignmentToOrigin:c().Alignment.Start,open:b,render:()=>C,onDismiss:()=>S(!1),keepFocus:!0,origin:w,preventScaleTransition:!0,style:t.popup})})}},928826:(e,t,a)=>{a.d(t,{f:()=>p,z:()=>h});var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(788860),r=()=>a(696459),l=()=>a(266093),d=()=>a(174912),c=()=>a(876822),u=()=>a(902030),m=()=>a(661297),g=a(785893);function p(e){const{style:t,analyticsType:a,filters:r,disabled:l}=e,d=(0,n().O7)(),[u,p]=(0,s.useState)(!1),f=(0,i().VK)((()=>{var e;return null===(e=c().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),x=l||u;return(0,g.jsx)(m().Z,{style:t,disabled:x,onClick:async function(){f&&(p(!0),await h({environment:d,spaceId:f,analyticsType:a,filters:r}),p(!1))},children:(0,g.jsx)(o()._H,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}async function h(e){const{environment:t,spaceId:a,analyticsType:s,filters:n}=e;if(a)switch(s){case u().x.Users:l().Lb(t,{daysFilter:n.daysFilter}),await d().Tp(t,{spaceId:a,daysFilter:n.daysFilter});break;case u().x.Content:l().Z(t,{filters:n}),await d().hN(t,{spaceId:a,filters:n});break;default:(0,r().t1)(s)}}},860570:(e,t,a)=>{a.d(t,{F:()=>c,U:()=>d});var s=a(667294),n=()=>a(219727),i=()=>a(801812),o=()=>a(696459),r=()=>a(824462);const l={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function d(e){let{spaceId:t}=e;const[a,n]=(0,s.useState)("last_90_days");return{...c({spaceId:t,daysFilter:a}),daysFilter:a,setDaysFilter:n}}function c(e){let{spaceId:t,daysFilter:a}=e;const d=(0,n().O7)(),[{status:c,value:u,error:m}]=(0,i().r5)((async()=>{const e=await r().callApi({eventName:"getContentEngagementAnalytics",environment:d,data:{spaceId:t,daysFilter:a}});switch(e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,o().t1)(e)}}),[d,t,a]);return{data:(0,s.useMemo)((()=>u||l),[u]),loading:"pending"===c||"idle"===c,error:m}}},113437:(e,t,a)=>{a.d(t,{d:()=>g,i:()=>m});var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(801812),r=()=>a(696459),l=()=>a(824462),d=()=>a(591914),c=()=>a(140303);const u={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function m(e){let{spaceStore:t,userId:a,isOrganizationOwner:n}=e;const[i,o]=(0,s.useState)("last_90_days");return{...g({spaceStore:t,userId:a,isOrganizationOwner:n,daysFilter:i}),daysFilter:i,setDaysFilter:o}}function g(e){let{spaceStore:t,userId:a,isOrganizationOwner:m,daysFilter:g}=e;const p=(0,n().O7)(),{updateCacheWithRecordMap:h}=(0,s.useContext)(c().V),f=(0,i().VK)((()=>t.id),[t]),x=(0,i().VK)((()=>Boolean(t&&a&&(0,d().VK)(t,a).isWorkspaceOwner())),[t,a]),[{status:v,value:y,error:b}]=(0,o().r5)((async()=>{if(!a||!(m||x))return u;const e=await l().callApi({eventName:"getUserEngagementAnalytics",environment:p,data:{spaceId:f,daysFilter:g}});switch(e.type){case"success":return h(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,r().t1)(e)}}),[p,a,f,g,x,m,h]);return{data:(0,s.useMemo)((()=>y||u),[y]),loading:"pending"===v||"idle"===v,error:b}}},123638:(e,t,a)=>{a.d(t,{Z:()=>x});var s=a(667294),n=()=>a(219727),i=()=>a(846550),o=()=>a(570328),r=()=>a(788860),l=()=>a(707513),d=()=>a(912732),c=()=>a(949842),u=()=>a(59407),m=()=>a(628370),g=()=>a(1910),p=()=>a(573357),h=()=>a(291198),f=a(785893);function x(e){let{handleSearchQueryChange:t,handleEnterPressed:a,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:y}=e;const b=(0,n().O7)(),{styles:S,isSearchOpen:j,intl:w,handleSearchButtonClick:M,handleSearchDismiss:C,searchQuery:_,setSearchQuery:T}=function(e){let{handleSearchQueryChange:t,handleInputCleared:a,currentTab:o,isSearchBarAlwaysOpen:c}=e;const u=(0,i().yK)((e=>({searchIcon:{width:14,height:void 0,fill:e.mediumTextColor},topbarIconButton:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.mediumTextColor,fill:e.mediumIconColor,fontWeight:l().Ue.regular,lineHeight:1,borderRadius:4},searchInput:{fontSize:14,lineHeight:1,paddingRight:4,color:e.regularTextColor,marginBottom:1}})),[]),m=(0,n().O7)(),[g,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(void 0),x=(0,s.useCallback)((()=>{p(!0),o&&d().RP(m,{current_tab:o})}),[m,o]),v=(0,s.useCallback)((()=>{p(!1),f(void 0),t(void 0),null==a||a()}),[t,a]),y=(0,r().YB)();return{styles:u,isSearchOpen:g||c,intl:y,handleSearchButtonClick:x,handleSearchDismiss:v,searchQuery:h,setSearchQuery:f}}({handleSearchQueryChange:t,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:y});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g().Z,{ariaLabel:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),icon:o().e,iconStyle:S.searchIcon,style:S.topbarIconButton,onClick:M,disableBackground:y}),(0,f.jsx)(m().Z,{visible:j,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},skip:y,children:(0,f.jsx)(p().Z,{capture:j,allowEsc:!0,render:e=>(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},...e,children:(0,f.jsx)(h().Z,{style:S.searchInput,format:h().B.Transparent,value:_,onChange:e=>{const a=e.target.value;T(a),t(a)},placeholder:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),focusInitial:j,showClearButton:!0,onCancel:C,onClick:c().Wi,onClearButtonClick:C,onKeyDown:e=>{27===e.keyCode&&C(),a&&(0,u().Z)(b,e,"enter")&&a()},onBlur:()=>{!_&&C()}})})})})]})}},868982:(e,t,a)=>{a.d(t,{ON:()=>h,_7:()=>p,p3:()=>g});var s=a(667294),n=()=>a(846550),i=()=>a(570328),o=()=>a(788860),r=()=>a(513670),l=()=>a(527278),d=()=>a(291198),c=()=>a(906651),u=()=>a(123638),m=a(785893);let g=function(e){return e.OnChange="on-change",e.Button="button",e.AnimatedSearchButton="animated-search-button",e}({});const p=(0,o().vU)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"},titleOnlyPlaceholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function h(e){let{mode:t,query:a,setQueryFilter:h,placeholderText:f,disabled:x}=e;const[v,y]=(0,s.useState)(a??""),b=function(e){return(0,n().yK)((t=>({searchIcon:{color:t.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1},searchInputContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDirection:"row"}})),[e])}(x),S=(0,s.useMemo)((()=>(0,r().Ds)(h,500)),[h]),j=(0,s.useCallback)((e=>{void 0===e&&t===g.AnimatedSearchButton||(y(e??""),t!==g.OnChange&&t!==g.AnimatedSearchButton||S(e??""))}),[S,t]),w=(0,s.useCallback)((e=>{j(e.target.value)}),[j]);return t===g.AnimatedSearchButton?(0,m.jsx)("div",{style:b.searchInputContainer,children:(0,m.jsx)(u().Z,{handleSearchQueryChange:j,handleEnterPressed:()=>h(v),handleInputCleared:()=>h(""),isSearchBarAlwaysOpen:!1})}):(0,m.jsx)(d().Z,{value:v,style:b.input,left:(0,i().e)(b.searchIcon),placeholder:f||l().Z.formatMessage(p.placeholder),focus:!x&&void 0,onChange:w,onSubmit:()=>h(v),disabled:x,right:t===g.Button?(0,m.jsx)(c().Z,{onClick:()=>h(v),disabled:x,style:b.button,children:(0,m.jsx)(o()._H,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},196234:(e,t,a)=>{a.d(t,{ZP:()=>D,fy:()=>N,zm:()=>A});var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(456681),l=()=>a(788860),d=()=>a(707513),c=()=>a(148126),u=()=>a(491927),m=()=>a(155055),g=()=>a(824462),p=()=>a(959137),h=()=>a(308186),f=()=>a(752127),x=()=>a(224597),v=()=>a(269299),y=()=>a(345918),b=()=>a(576387),S=()=>a(212493),j=()=>a(356042),w=()=>a(666414),M=()=>a(1910),C=()=>a(471645),_=()=>a(67961),T=()=>a(765513),k=()=>a(868614),I=()=>a(696489),H=()=>a(512220),P=a(785893);function D(e){let{spaceStore:t,inviteLinkCode:a,spacePermissionsSettingsStore:s}=e;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(z,{}),(0,P.jsx)(A,{spaceStore:t,inviteLinkCode:a,spacePermissionsSettingsStore:s})]})}function z(){const e=R(),t=(0,n().O7)(),a=(0,s.useCallback)((()=>{f().D({environment:t,url:(0,c().UY)("guides.invitePerson")})}),[t]);return(0,P.jsxs)(k().Z,{divider:"none",large:!0,style:e.headingStyle,children:[(0,P.jsx)(l()._H,{id:"spacePermissionsSettings.people.common.title",defaultMessage:"People"}),(0,P.jsx)(M().Z,{onClick:a,icon:r().m,ariaLabel:"Learn more about inviting people"})]})}function A(e){let{spaceStore:t,inviteLinkCode:a,spacePermissionsSettingsStore:s,shouldUseEdgeCache:r}=e;const d=(0,n().O7)(),c=(0,i().VK)((()=>(0,y().ly)({spaceStore:t,environment:d,inviteLinkCode:a})),[t,a,d]),g=(0,H().tM)({spaceStore:t}),h=(0,i().VK)((()=>Boolean(t.getInviteLinkEnabled())),[t]),f=R(),b=(0,o().yK)((e=>({divider:{color:e.stroke.secondary}})),[]);return g&&c?(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{style:f.inviteLinkSection,children:[(0,P.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,P.jsx)(k().Z,{smallMarginBottom:!0,children:(0,P.jsx)(l()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.description",defaultMessage:"Invite link to add members"})}),(0,P.jsx)(_().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:0,width:"85%"},children:s&&h&&c?(0,P.jsx)(N,{spaceStore:t}):(0,P.jsx)(l()._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption.v2",defaultMessage:"Only people with permission to invite members can see this."})})]}),(0,P.jsx)("div",{style:{minWidth:130},children:(0,P.jsxs)(S().jX,{gap:16,align:"center-right",direction:"row",children:[s&&h&&c&&(0,P.jsx)(j().F,{color:"uiBlue",onClick:()=>{!async function(e){let{environment:t,inviteLinkUrl:a}=e;const s=await p().F.clipboardActions.load();s.copyString({environment:t,stringValue:a,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),u().nl(t)}({environment:d,inviteLinkUrl:c})},children:(0,P.jsx)(l()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"})}),(0,P.jsx)(C().Z,{on:h,onClick:()=>{!function(e){let{environment:t,spaceStore:a,inviteLinkEnabled:s}=e;const n=!s;m().eo(t,{enabled:n}),v().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:e=>{x().ys({transaction:e,spaceStore:a,inviteLinkEnabled:Boolean(n)})}})}({environment:d,spaceStore:t,inviteLinkEnabled:h})}})]})})]}),(0,P.jsx)(w().Z,{size:40,dividerColor:b.divider.color})]}):r?null:(0,P.jsx)("div",{style:{marginBottom:20}})}function N(e){let{spaceStore:t,organizationId:a,showBlueLink:i}=e;const o=(0,n().O7)(),r=(0,s.useCallback)((()=>{h().vC({message:(0,P.jsx)(l()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:h().lo,items:[{label:(0,P.jsx)(l()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await g().callApi({eventName:"refreshInviteLink",environment:o,data:{spaceId:t.id,organizationId:a}}),b().bi(o)}}]})}),[o,t.id,a]);return(0,P.jsx)(l()._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink.v2",defaultMessage:"Only people with permission to invite members can see this. You can also <resetlink>generate a new link</resetlink>",values:{resetlink:e=>i?(0,P.jsx)(I().X,{onClick:r,children:e}):(0,P.jsx)(T().Z,{onClick:r,children:e})}})}function R(){return(0,o().yK)((e=>({commonTitle:{display:"flex",alignItems:"center"},commonTitleText:{fontSize:"17px",lineHeight:"22px",fontWeight:590,color:e.text.primary,fontStyle:"normal"},commonHelpButton:{paddingLeft:"1px"},inviteLinkSection:{paddingTop:"24px",paddingBottom:"8px",display:"flex",alignItems:"center"},headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:d().Ue.medium,display:"flex"}})),[])}},512220:(e,t,a)=>{a.d(t,{IH:()=>h,JJ:()=>p,VJ:()=>x,bS:()=>m,eA:()=>f,tM:()=>v,yE:()=>g});var s=()=>a(219727),n=()=>a(142735),i=()=>a(801812),o=()=>a(122792),r=()=>a(824462),l=()=>a(308186),d=()=>a(940823),c=()=>a(18281),u=()=>a(708071);function m(e){let{spaceStore:t,members:a}=e;const n=h({spaceStore:t}),o=(0,s().O7)(),d=t.id,[c]=(0,i().r5)((async()=>{if(!n)return;const e=await r().callApi({eventName:"getRecentlyRemovedUsers",environment:o,data:{spaceId:d}});if("failed"===e.type)throw l().x2(e),e;return e.data.recentlyRemovedMembers}),[d,o,n,a]);return c.value}function g(e){let{spaceStore:t,subscriptionData:a}=e;const n=p({spaceStore:t,subscriptionData:a}),o=(0,s().O7)();(0,i().r5)((async()=>{if(!n)return;const e=await r().callApi({eventName:"getRecoverableSpaceUserContent",environment:o,data:{spaceId:t.id}});if("failed"===e.type)throw e;const a=e.data.recentSpaceRecoverPages;return u().default.setState({...u().default.state,recentRecoverableUsers:a}),a}),[t,o,n])}function p(e){let{spaceStore:t,subscriptionData:a}=e;return(0,n().VK)((()=>t.canAdmin()&&o().wP(a.subscriptionTier)),[a,t])}function h(e){let{spaceStore:t}=e;return(0,n().VK)((()=>t.canAdmin()),[t])}function f(e){let{spaceStore:t}=e;return(0,n().VK)((()=>t.canEditMembership()),[t])}function x(){const e=(0,s().O7)();return(0,n().VK)((()=>c().qF(e)),[e])}function v(e){let{spaceStore:t}=e;const a=(0,d().Q)();return(0,n().VK)((()=>(null==t?void 0:t.canEditMembership())&&a),[t,a])}},708071:(e,t,a)=>{a.d(t,{default:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{recentRecoverableUsers:[],searchQuery:void 0}}}const n=new s},196587:(e,t,a)=>{a.d(t,{J:()=>i});var s=()=>a(677559);const n=new(s().Ss)("time-series",(async()=>await Promise.resolve().then(a.bind(a,239297)))),i=(0,s().kF)(n,(e=>e.TimeSeries))},259259:(e,t,a)=>{a.d(t,{K:()=>o,o:()=>i});a(267602),a(470928);var s=()=>a(160459);const n={externalWorkspaceName:{defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."}};function i(e){return e.formatMessage(n.externalWorkspaceName)}function o(e){if(!e)return;const t=Object.entries(s().nb).find((t=>{let[a,s]=t;return s===e}));if(t){return t[0]}}},223160:(e,t,a)=>{a.d(t,{g:()=>i});a(667294);var s=()=>a(788860),n=a(785893);function i(){return(0,n.jsx)(s()._H,{id:"organization.workspaceSettings.locked.tooltip",defaultMessage:"This setting is being managed by your organization."})}},365969:(e,t,a)=>{a.d(t,{As:()=>l,MP:()=>c,tX:()=>d});var s=()=>a(142735),n=()=>a(18902),i=()=>a(646574),o=()=>a(874459),r=()=>a(749826);function l(){return r().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??n().yB}function d(){return(0,s().VK)((()=>l()),[])}function c(e,t,a){const s=(0,o().NK)(e,t);if((0,o().qw)(s)){const e=s.end.diff(s.start),t=e.as("year");if(t>=1)return(0,i().IV)({years:Math.round(t)},a);const n=e.as("days");if(n>=1&&n<=45)return(0,i().IV)({days:Math.round(n)},a);const o=e.as("months");if(o>=1)return(0,i().IV)({months:Math.round(o)},a);if(n>=1)return(0,i().IV)({days:Math.round(n)},a);const r=e.as("hours");if(r>=1)return(0,i().IV)({hours:Math.round(r)},a);const l=e.as("minutes");return(0,i().IV)({minutes:Math.round(l)},a)}return""}},853571:(e,t,a)=>{a.d(t,{J:()=>r});var s=()=>a(696459),n=()=>a(803021);var i=()=>a(548812),o=()=>a(697623);function r(e){var t;let{billingData:a}=e;return function(e){let{subscriptionTier:t,subscriptionCreatedAtTime:a,useLegacyBehavior:i}=e;return"enterprise"===t||!("plus"!==t||!i)&&(0,s().$K)(a)&&a<n().Xn}({subscriptionTier:(0,o().zt)(),subscriptionCreatedAtTime:null==a||null===(t=a.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,i().fX)()})}},560847:(e,t,a)=>{a.d(t,{R:()=>i});var s=a(667294),n=()=>a(949842);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return(0,s.useCallback)((t=>{(0,n().sg)({event:t,context:a,callback:()=>e(t)})}),[...t,a])}},940823:(e,t,a)=>{a.d(t,{Q:()=>o});var s=()=>a(142735),n=()=>a(876822),i=()=>a(815277);function o(){var e;const{currentSpaceId:t,currentUserId:a}=(0,s().VK)((()=>{var e,t;return{currentSpaceId:null===(e=n().default.state.currentSpaceStore)||void 0===e?void 0:e.id,currentUserId:null===(t=n().default.state.currentUserStore)||void 0===t?void 0:t.id}}),[]),o=(0,i().oo)({name:"members",spaceId:t,userId:a,amount:"unknown"}),r=null==o||null===(e=o.limit)||void 0===e?void 0:e.total;return!!r&&("unlimited"===r||r>1)}},403587:(e,t,a)=>{a.d(t,{R:()=>d});a(267602),a(916054),a(653476),a(241792);var s=()=>a(142735),n=()=>a(989478),i=()=>a(657120),o=()=>a(826955),r=()=>a(18281),l=()=>a(897257);function d(e){let{spaceStore:t}=e;return(0,s().VK)((()=>{const e=l().subscriptionDataStoreInstance.state;if(!e)return{loading:!0};const a=r().CM(e);if(!a.every((e=>o().U6.createChildStore(t,{table:n().KJ,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(i().nB),d=a.filter(i().FN);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return o().U6.createChildStore(t,{table:n().KJ,id:a})})),guests:d.map((e=>{let{userId:a}=e;return o().U6.createChildStore(t,{table:n().KJ,id:a})}))}}),[t])}},226994:(e,t,a)=>{a.d(t,{Z:()=>l,s:()=>d});var s=()=>a(142735),n=()=>a(989478),i=()=>a(788860),o=()=>a(876822),r=()=>a(826955);function l(e){const t=(0,i().YB)();return(0,s().VK)((()=>{const{currentSpaceStore:a}=o().default.state;if(!a||!e)return;return r().U6.createChildStore(a,{table:n().KJ,id:e}).getDisplayName(t)}),[t,e])}function d(){const e=(0,i().YB)();return(0,s().VK)((()=>{const{currentUserStore:t}=o().default.state,a=null!=t&&t.isDefined()?t.getModel():void 0;return a?a.getDisplayName(e):void 0}),[e])}},335058:(e,t,a)=>{a.d(t,{Z:()=>x});a(267602),a(653476),a(241792);var s=a(667294),n=()=>a(142735),i=()=>a(846550),o=()=>a(446866),r=()=>a(788860),l=()=>a(696459),d=()=>a(967092),c=()=>a(301741),u=()=>a(122671),m=()=>a(88476),g=()=>a(998901),p=()=>a(896014),h=a(785893);function f(e){const{permissionsInviteStore:t}=e,a=(0,r().YB)(),d=(0,n().VK)((()=>{const{inputFocus:e}=t.state;return"invitee"===e}),[t]),g=(0,n().VK)((()=>t.state.tokenQuery),[t]),f=(0,n().VK)((()=>t.state.inviteTargets.filter((e=>(0,p().oM)(e)))),[t]),x=(0,n().VK)((()=>t.state.inviteRole||"editor"),[t]),v=(0,s.useCallback)((e=>{const{newInviteTargets:a,newInputValue:s,inputFocus:n}=e;a.length>0?t.setState({...t.state,inviteTargets:a,isInviteTargetsEmpty:!1,table:"space",inviteRole:x,...(0,l().$K)(s)&&{tokenQuery:s},...(0,l().$K)(n)&&{inputFocus:n}}):t.setState({...t.state,inviteTargets:[],isInviteTargetsEmpty:!0,table:"space",inviteRole:x,...(0,l().$K)(s)&&{tokenQuery:s},...(0,l().$K)(n)&&{inputFocus:n}})}),[x,t]),y=(0,s.useCallback)((e=>{const a=e.target.value,{extractedEmails:s,newInputValue:n}=(0,o().zI)(a),i=s.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,m().Nd)({target:e,permissionsInviteStore:t}))).filter(p().oM),r=[...f,...i];v({newInviteTargets:r,newInputValue:n,inputFocus:"invitee"})}),[f,t,v]),b=(0,s.useCallback)((e=>{const t=f.filter((t=>t!==e));v({newInviteTargets:t})}),[f,v]),S=(0,s.useCallback)((()=>{const e=f.slice(0,-1);v({newInviteTargets:e})}),[f,v]),j=(0,i().yK)((()=>({tokenMenuItem:{borderRadius:6}})),[]),w=f.map((e=>(0,h.jsx)(c().Z,{target:e,onClickRemove:b},e.value.id)));return(0,h.jsx)(u().ZP,{focusInitial:!0,focus:d,showBorder:!0,format:u().UR.Select,value:g,onChange:y,onRemoveLastToken:S,type:"email",placeholder:a.formatMessage({id:"spacePermissionsInviteEmailSection.tokenInput.placeholder",defaultMessage:"Search names or emails"}),tokens:w,focusAfterAnimation:!0,style:j.tokenMenuItem})}const x=function(e){const{permissionsInviteStore:t,disableAutoFocus:l,showCurrentUser:c}=e,u=(0,a(228772).r)(),x=e.parentStore||u,v=(0,n().VK)((()=>{var e;return"invitee"===(null===(e=t.state)||void 0===e?void 0:e.inputFocus)}),[t]),y=(0,s.useCallback)((()=>{const e=t.state.tokenQuery.trim();if((0,o().oH)(e)){const a=t.state.inviteTargets.filter((e=>(0,p().oM)(e))),s="editor",n=t.state.inviteRole||s,i={type:"newUser",value:{email:e},source:"email"};if(!(0,m().Nd)({target:i,permissionsInviteStore:t})){const e=[...a,i];t.setState({...t.state,inviteTargets:e,isInviteTargetsEmpty:!1,table:"space",inviteRole:n,tokenQuery:""})}}t.setState({...t.state,inputFocus:"none"})}),[t]),b=(0,s.useCallback)((e=>{t.setState({...t.state,inputFocus:"invitee"}),e.stopPropagation()}),[t]);(0,s.useEffect)((()=>{l||t.setState({...t.state,inputFocus:"invitee"})}),[t,l]);const S=(0,i().yK)((e=>({origin:{display:"flex",flexDirection:"column",width:"100%",gap:8,padding:2},emailText:{color:e.mediumTextColor}})),[]);return x?(0,h.jsx)(d().ZP,{placementToOrigin:g().Placement.Bottom,alignmentToOrigin:g().Alignment.Start,originGap:10,open:v,popupType:d().kQ.Popup,sameWidthAsOrigin:!0,disableMouseCapture:!0,enableOutsideClickDismiss:!0,onDismiss:y,render:()=>(0,h.jsx)(a(711658).Z,{permissionsInviteStore:t,store:x,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:4,membersOnly:!1,disableInvitedUsers:!1,hideCurrentUser:!c,hideUserTypeToken:!1,hideTitle:!0,defaultUserTitle:"name_and_email_unless_right",performSearchRequest:e.performSearchRequest}),origin:(0,h.jsxs)("div",{style:S.origin,onClick:b,children:[(0,h.jsx)(a(661641).q,{styleName:"UISmall-12px/Medium",customStyles:S.emailText,children:(0,h.jsx)(r()._H,{id:"spacePermissionsInviteEmailSection.title",defaultMessage:"Email addresses"})}),(0,h.jsx)(f,{permissionsInviteStore:t})]})}):null}},729675:(e,t,a)=>{a.r(t),a.d(t,{ENGLISH_PERSONAL_PRONOUNS:()=>we,TEST_ONLY__getVisibleSpaceUserIds:()=>Me,getLocalCacheFromAppState:()=>te,isPersonalPronoun:()=>je,searchActorsById:()=>ke,searchCollections:()=>ce,searchCollectionsWithRecents:()=>ue,searchEmailUser:()=>Te,searchInstallableIntegrations:()=>xe,searchLocalNavigableBlocks:()=>me,searchMentionablePages:()=>Ie,searchPageIds:()=>se,searchPageIdsInAncestor:()=>le,searchPagesInAncestor:()=>re,searchPagesInCollection:()=>ne,searchPagesInSpace:()=>ae,searchPagesWithParent:()=>ie,searchPublicPages:()=>Pe,searchSpaceActorIds:()=>_e,searchSpaceActors:()=>Ce,searchSpaceBots:()=>pe,searchSpaceGroups:()=>ge,searchTeams:()=>De,searchTrashPages:()=>de,searchUsers:()=>ye,searchVisibleSpaceUsers:()=>be});a(670560),a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624),a(267602),a(653476),a(470928),a(749411),a(241792);var s=a.n(a(443261)),n=()=>a(163262),i=()=>a(446866),o=()=>a(235484),r=()=>a(799891),l=()=>a(619186),d=()=>a(728670),c=()=>a(933868),u=()=>a(217465),m=()=>a(54193),g=()=>a(396136),p=()=>a(696056),h=()=>a(752778),f=()=>a(255933),x=()=>a(989478),v=()=>a(899133),y=()=>a(542487),b=()=>a(955620),S=()=>a(499110),j=()=>a(513670),w=()=>a(839002),M=()=>a(342792),C=()=>a(855741),_=()=>a(696459),T=()=>a(326966),k=()=>a(824462),I=()=>a(158792),H=()=>a(505789),P=()=>a(205228),D=()=>a(718959),z=()=>a(286338),A=()=>a(781105),N=()=>a(239482),R=()=>a(122479),B=()=>a(15981),L=()=>a(8),O=()=>a(907099),V=()=>a(772529),U=()=>a(876822),q=()=>a(804217),E=()=>a(467806),Z=()=>a(749826),F=()=>a(63317),W=()=>a(485014),K=()=>a(21965),G=()=>a(826955),Y=()=>a(615389),$=()=>a(576387),J=()=>a(18281),Q=()=>a(897257),X=()=>a(307853),ee=()=>a(590166);async function te(e){const{currentSpaceStore:t,currentSpaceViewStore:a}=U().default.state;if(!t)return;return Z().default.checkGate({gateName:"search_use_local_search_cache"})?(W().Z.state.localSearchableBlocksCache||await W().Z.waitUntil((()=>Boolean(W().Z.state.localSearchableBlocksCache))),W().Z.state.localSearchableBlocksCache):await(0,ee().S1)({environment:e,currentSpaceStore:t,currentSpaceViewStore:a})}async function ae(e){const{environment:t,query:a,limit:s,currentPageId:n,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:r,spaceId:l,requireEditPermissions:d,excludeTemplates:c,source:m,boostRecentlyViewedPages:g,ignoresHighlight:p,filterOverrides:h}=e,{currentSpaceStore:f}=U().default.state,x={results:[],recordMap:u().RecordMapWithRole.create().toJson(),total:0,trackEventProperties:void 0};if(!f)return x;const y=await te(t),b=v().u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:c,requireEditPermissions:d||void 0,...h}),S={field:"relevance"};if(!a&&y){const e=(0,X().f)({query:{query:{text:a,filters:b,sort:S},limit:s},localCachedPages:y,userId:t.currentUser.id,environment:t});return e||x}const j=await k().callApi({eventName:"search",environment:t,data:{type:v().n8.BlocksInSpace,query:a,spaceId:l,currentPageId:n,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:r,limit:s,filters:b,sort:S,source:m,recentPagesForBoosting:g?(0,B().Wk)(F().Z.getWithoutSubscribing(l)):void 0,ignoresHighlight:p}});if("failed"===j.type)throw j.error;return j.data}async function se(e){const t=await ae(e);return{results:t.results.map((e=>e.id)),recordMap:t.recordMap}}async function ne(e){const{environment:t,query:a,collectionId:s,limit:n,spaceId:i,excludeTemplates:o,source:r,includePublicPagesWithoutExplicitAccess:l,boostRecentlyViewedPages:d,ignoresHighlight:c}=e,u=new Array,m=await te(t),g=v().u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:l,excludeTemplates:o}),p={field:"relevance"},f=k().callApi({eventName:"search",environment:t,data:{type:v().n8.BlocksInCollection,query:a,spaceId:i,collectionId:s,limit:n,filters:g,sort:p,source:r,recentPagesForBoosting:d?(0,B().Wk)(F().Z.getWithoutSubscribing(i)):void 0,ignoresHighlight:c}});if(m){const e={table:h().vF,id:s,spaceId:i},o=new(G().NW)(t,e);await o.load();const r=(0,X().f)({query:{query:{text:a,filters:o.isPageTreeCollection()?{...g,ancestors:[s]}:{...g,parentId:s},sort:p},limit:n},localCachedPages:m,userId:t.currentUser.id,environment:t});r&&u.push(...r.results)}const x=await f;if("failed"===x.type){if(0===u.length)throw x.error}else{let e=x.data.results;a||(e=L().YB({sort:p,batchSize:n,currentUserId:t.currentUser.id,unsorted:e})),u.push(...e)}return{results:j().oA(j().jj(u.map((e=>e.id))))}}async function ie(e){const{environment:t,query:a,parentId:s,limit:n,spaceId:i,excludeTemplates:o,source:r,includePublicPagesWithoutExplicitAccess:l,boostRecentlyViewedPages:d,ignoresHighlight:c}=e,[u,m]=await Promise.all([k().callApi({eventName:"search",environment:t,data:{type:v().n8.BlocksInParent,query:a,spaceId:i,parentId:s,limit:n,filters:v().u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:l,excludeTemplates:o}),sort:{field:"relevance"},source:r,recentPagesForBoosting:d?(0,B().Wk)(F().Z.getWithoutSubscribing(i)):void 0,ignoresHighlight:c}}),oe(e)]);if("failed"===u.type)throw u.error;return{results:j().oA(j().jj([m,...u.data.results.map((e=>e.id))]))}}async function oe(e){const{environment:t,query:a,parentId:s,spaceId:n}=e,i=(0,m().parseRoute)({url:a,baseUrl:P().default.domainBaseUrl,publicDomainName:P().default.publicDomainName,isMobile:t.device.isMobile,protocol:P().default.protocol,currentUrl:window.location.href}),o="page"===i.name?i.peekViewBlockId||i.blockId:void 0,r=((0,M().qn)(a)?(0,M().wr)(a):void 0)||o;if(r){const e={table:g().iU,id:r},a=new(G().G)(t,e);await a.load();const i=a.id,o=a.getParentId(),l=a.getSpaceId();if(o===s&&l===n)return i}}async function re(e){const{environment:t,query:a,ancestorId:s,limit:n,excludeTemplates:i,source:o,currentPageId:r,searchSessionId:l,searchSessionFlowNumber:d,recentlyMentionedPageIds:c,ignoresHighlight:u}=e,m=await k().callApi({eventName:"search",environment:t,data:{type:v().n8.BlocksInAncestor,query:a,ancestorId:s,filters:v().u4({navigableBlockContentOnly:!0,excludeTemplates:i}),sort:{field:"relevance"},limit:n,source:o,currentPageId:r,searchSessionId:l,searchSessionFlowNumber:d,recentlyMentionedPageIds:c,ignoresHighlight:u}});if("failed"===m.type)throw m.error;return m.data}async function le(e){return{results:(await re(e)).results.map((e=>e.id))}}async function de(e){const{environment:t,query:a,limit:s,spaceId:n}=e,i=0===a.trim().length?{field:"lastEdited",direction:"desc"}:{field:"relevance"},o={query:a,filters:v().u4({isDeletedOnly:!0,navigableBlockContentOnly:!0,excludeTemplates:!1,editedBy:e.editedByIds||[],ancestors:e.ancestorIds||[],inTeams:e.teamspaceIds||[]}),sort:i,limit:s,spaceId:n,source:"trash"},r=k().callApi({eventName:"search",environment:t,data:{type:v().n8.BlocksInSpace,...o}}),l=await r;if("failed"===l.type)throw l.error;{const{results:e,recordMap:t,total:a}=l.data;return{results:e.map((e=>e.id)),recordMap:u().RecordMapWithRole.create(t),endOfResultsReached:a===e.length}}}async function ce(e,t){const{query:a,limit:s,source:n,requireEditPermissions:i,databaseType:o,spaceStore:r,searchSessionId:l}=t;if(!r)return{results:[],total:0};const d=r.id,[c,u]=await Promise.all([ze(e,{...t,spaceId:d,requireEditPermissions:i,databaseType:o,parentStore:r}),k().callApi({eventName:"search",environment:e,data:{type:v().n8.CollectionsInSpace,query:a,spaceId:d,limit:s,filters:{...v().u4({excludeTemplates:!0,requireEditPermissions:i,databaseType:o})},sort:{field:"relevance"},source:n,recentPagesForBoosting:(0,B().Wk)(F().Z.get(d)),searchSessionId:l}})]),m=j().G0("success"===u.type?j().oA(u.data.results.map((e=>e.collectionId))):[],c).slice(0,s);return{results:m,total:"success"===u.type?u.data.total:m.length}}async function ue(e){const{environment:t,collectionViewBlockStore:a,spaceStore:s,parentStore:n,query:i,limit:o,requireEditPermissions:r,databaseType:l,searchSessionId:d}=e;let c=[],u=0;if(!i){const e=t.currentUser.id;s&&(c=[...(0,H().l)({currentUserId:e,spaceId:s.id}).map((e=>G().NW.createChildStore(n,{table:h().vF,id:e})))]),c=[...j().oA(null==a?void 0:a.getCollectionViewStores().map((e=>e.getCollectionStore()))),...c],l&&(c=c.filter((e=>{const t=e.getDatabaseType();return!!t&&l.includes(t)}))),c=j().mN(c,(e=>e.id)).filter((e=>!r||e.canEdit()))}const m=await ce(t,{query:i,limit:o,source:"collection_settings_source",requireEditPermissions:r,databaseType:l,spaceStore:s,searchSessionId:d});return c=[...c,...m.results.map((e=>G().NW.createChildStore(n,{table:h().vF,id:e})))],u=m.total,c=c.filter((e=>!(0,N().wf)(e)&&e.canRead())),await Promise.all(c.map((async e=>{await e.load()}))),{results:j().mN(c,(e=>e.id)).slice(0,o).map((e=>e.id)),total:u}}async function me(e){const{environment:t,searchQuery:a,blockTypes:s,currentSpaceStore:n,currentSpaceViewStore:i,limit:o,parentId:r}=e,l=await(0,ee().S1)({environment:t,currentSpaceStore:n,currentSpaceViewStore:i}),d={query:{text:a,filters:(0,v().u4)({requireEditPermissions:!1,isDeletedOnly:!1,excludeTemplates:!0,navigableBlockContentOnly:!0,blockTypes:s,parentId:r}),sort:{field:"relevance"}},limit:o},c=(0,X().Y)({query:d,localCachedPages:l,parentStore:n,isOnline:q().default.state.online,environment:t,shouldLimitLocalResultsWhenOnline:!1,applyScoreThresholdWhenOnline:!0,canUseLtr:!1});return c&&C().x.isSuccess(c)?c.value.results.filter((e=>e.store.pathIsAccessibleAndAlive())):[]}function ge(e){const{query:t,intl:a}=e,s=E().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group));if(0===s.length)return[];return t?(0,l().ZP)(t,s,(e=>(0,O().kF)({intl:a,groupName:e.name})),{normalizeFuzzyScore:!0}):s}async function pe(e){const{query:t}=e,{currentSpaceStore:a}=U().default.state;if(!a)return[];return fe({parentStore:a,query:t,botIds:await he(e)})}async function he(e){const{environment:t}=e,{currentSpaceStore:a}=U().default.state;if(!a)return[];const s=a.id,n=await I().Yw({environment:t,table:f().bx,id:s,type:"guest"});return j().jj(n.botIds)}function fe(e){const{parentStore:t,query:a,botIds:s}=e,i=j().oA(s.map((e=>{const a=t.table===f().bx?t.id:void 0;return(0,G().Kv)(t,{table:p().cZ,id:e,spaceId:a}).getValue()})));return a?(0,l().ZP)(a,i,n().y2):i}async function xe(e){const{query:t,environment:a,spaceId:s,botSettings:n}=e;if(!s)return[];const i=await k().callApi({eventName:"searchIntegrations",environment:a,data:{query:t}});if("success"===i.type){const e=i.data.integrationIds,t=n&&n.integration_approval_statuses?Object.keys(n.integration_approval_statuses):[],a=Boolean(null==n?void 0:n.integration_restrictions),s=Boolean("approved_or_built_by_notion"===(null==n?void 0:n.integration_restrictions));return a?e.filter((e=>s?t.includes(e)||(0,o().BP)({integrationId:e,env:"production"}):t.includes(e))):e}if("failed"===i.type)throw i.error;(0,_().t1)(i)}const ve=new Set(["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","aol.com"]);async function ye(e){var t;let{environment:a,parentStore:s,query:n,userIds:o,minFuzzyScore:d,placeSelfFirst:c}=e;const u=Promise.all(o.map((async e=>{const t={table:x().KJ,id:e};let n;try{var i;n=null===(i=await(0,A().Ye)({environment:a,pointer:t}))||void 0===i?void 0:i.model}catch{}const o=G().U6.createChildStore(s,t);return n?n.__IM_SORRY__getValue():(await o.load(),o.getValue())})));(await(0,w().OI)(1e4,[u])).timeout&&r().log({level:"error",from:"searchActions.searchUsers",type:"UserStoreLoadTimeoutV1",error:{message:"The UserStore.load()'s took longer than 10 seconds"},data:{searchedUserIdCount:o.length}});const m=j().oA(await u);let g;const p=null===(t=U().default.state.currentUserStore)||void 0===t?void 0:t.userId;if(c&&p){const e=m.findIndex((e=>p===e.id));e>-1&&(g=m[e],m.splice(e,1))}const h=Y().O.state??{},f=Math.max(...Object.values(h));function v(e){var t;return e===(null===(t=U().default.state.currentUserRootStore)||void 0===t?void 0:t.userId)?f+1e-5:h[e]??0}const y=j().xb(h)?m:m.sort(((e,t)=>{const a=v(e.id);return v(t.id)-a})),b=new Set(s.getEmailDomains()),M=n?(0,l().ZP)(n,y,S().of,{minThreshold:d,getSortScore:e=>{const{original:t,score:a}=e,s=t.email&&(0,i().Gd)(t.email),n=g&&(0,i().Gd)(g.email),o=s&&b.has(s),r=n===s,l=n&&ve.has(n);return a*(o||r&&!l?-2:-1)}}):m;return g?[g,...M]:M}async function be(e){const{currentSpaceStore:t}=U().default.state;if(!t)return[];const a=e.query.startsWith("@")?e.query.slice(1):e.query,s=await Se(e);return ye({environment:e.environment,parentStore:t,query:a,userIds:s,minFuzzyScore:e.minFuzzyScore,placeSelfFirst:e.placeSelfFirst})}async function Se(e){const{environment:t,membersOnly:a}=e,{currentSpaceStore:s}=U().default.state;if(!s)return[];await $().OR({environment:t,spaceId:s.id});const n=Q().subscriptionDataStoreInstance.state;if(!n)return[];const i=(0,J().CM)(n).filter((e=>!(a&&!(0,c().Jy)(e.role)))),{mainEditorCurrentBlockStore:o,currentUserStore:r}=U().default.state,l=o&&!a?(0,R().YO)(o).flatMap((e=>{let{permissionItem:t}=e;return(0,c().jg)(t)?[t.user_id]:[]})):[],d=(0,z().F$)()&&o?function(e,t){const a=N().VP(e);if(a){const e=new Set((0,y().Hf)({membership:a.getRawMembership()}));return t.filter((t=>"none"!==t.role||t.isPageGuest||t.isTeamGuest&&e.has(t.userId)))}return t.filter((e=>"none"!==e.role||e.isPageGuest))}(o,i):i,u=d.map((e=>e.userId));return j().jj([...j().oA([null==r?void 0:r.userId]),...l,...u])}function je(e,t){return!(!t.startsWith("en-")||!we.has(e.toLowerCase()))}const we=new Set(["me","you","i"]),Me=Se;async function Ce(e){const{query:t}=e,[a,s]=await Promise.all([be({...e,placeSelfFirst:""===t||je(t,e.userLocale)}),pe(e)]);return{users:a,bots:s}}async function _e(e){const[t,a]=await Promise.all([Se(e),he(e)]);return{userIds:t,botIds:a}}async function Te(e,t){const a=(0,i().H3)(t);if((0,i().oH)(a)&&a){const t=await k().callApi({eventName:"findUser",environment:e,data:{email:a}});if("failed"===t.type)throw t.error;const s=t.data;return s.value?{user:s.value.value}:{email:a}}return{}}async function ke(e){const{environment:t,query:a,userIds:s,botIds:n,store:i}=e;let o=i;if(!o){const{currentSpaceStore:e}=U().default.state;if(!e)return{users:[],bots:[]};o=e}return{users:await ye({environment:t,parentStore:o,query:a,userIds:s}),bots:fe({parentStore:o,query:a,botIds:n})}}async function Ie(e){const{nearBlock:t,environment:a,query:s,source:n,searchSessionId:i,searchSessionFlowNumber:o}=e,{currentSpaceStore:r}=U().default.state,l=(0,D().zj)(),d=t&&(0,R().YO)(t).find((e=>{let{permissionItem:t}=e;return(0,c().$D)(t)})),u=K().Z.getMentionedIds(a.currentUser.id);if(r){return He(await ae({environment:a,query:s,limit:20,spaceId:r.id,currentPageId:l,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:u,requireEditPermissions:!1,excludeTemplates:!0,source:n,boostRecentlyViewedPages:!0,ignoresHighlight:!0}))}if(d&&d.from.table===g().iU){return He(await re({environment:a,query:s,limit:20,ancestorId:d.from.blockId,excludeTemplates:!0,source:n,currentPageId:l,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:u,ignoresHighlight:!0}))}return[]}function He(e){const{trackEventProperties:t,results:a}=e,s=(0,T().m8)((0,_().qP)(t).map((e=>{let[t,a]=e;return[`server-${t}`,a]})));return a.map((e=>({...e,serverEventProperties:s})))}async function Pe(e){const{environment:t,query:a,source:s,limit:n}=e,{currentSpaceStore:i}=U().default.state;if(!i)return[];return(await ae({environment:t,query:a,limit:n||20,spaceId:i.id,requireEditPermissions:!0,excludeTemplates:!0,source:s,boostRecentlyViewedPages:!1})).results.filter((e=>{const t=G().G.createChildStore(i,{table:g().iU,id:e.id}),a=(0,N().fJ)(t);return(0,d().$t)(a)}))}async function De(e){let{spaceViewStore:t,query:a,teamStores:s}=e;const n=j().oA(await Promise.all(s.map((async e=>(await e.load(),e.getValue()))))),i=t.getTeamsStores(),o=new Set(i.map((e=>e.id)));return a?(0,l().ZP)(a,n,(e=>e.name),{getSortScore:e=>{const{original:t,score:a}=e;return a*(o.has(t.id)?-2:-1)}}):n}function ze(e,t){const{query:a,limit:n,spaceId:i,requireEditPermissions:o,databaseType:r}=t,l=[];if(n>0){const d=new AbortController;e.defaultRecordCache.inMemoryRecordCache.forEachRecord(e.currentUser.id,(e=>{let{model:u,role:m}=e;if(u.table===h().vF){const e=u.space_id===i,g=!o||(0,c().J5)(m);if(!e||!g||(0,V().Kj)(u.getParentId()))return;const p=u.getDatabaseType();if(!(!r||p&&r.includes(p)))return;const h=(0,b().QaF)(u.getName());if(!s().test(a,h))return;const f=G().NW.createChildStore(t.parentStore,u.pointer),x=N().eG(f);if(!N().fl(x))return;l.push(u.pointer.id),l.length>=n&&d.abort()}}),d.signal)}return l}},996379:(e,t,a)=>{a.d(t,{ZM:()=>i,kg:()=>o});var s=()=>a(677559);const n={ConfirmHIPAAModal:new(s().Ss)("ConfirmHIPAAModal",(async()=>a.e(28182).then(a.bind(a,830938)))),HIPAASuccessModal:new(s().Ss)("HIPAASuccessModal",(async()=>a.e(68578).then(a.bind(a,934646))))},i=(0,s().kF)(n.ConfirmHIPAAModal,(e=>e.ConfirmHIPAAModal)),o=(0,s().kF)(n.HIPAASuccessModal,(e=>e.HIPAASuccessModal))},314169:(e,t,a)=>{a.d(t,{L7:()=>b,iK:()=>S,qq:()=>j});a(821057),a(670560),a(667294);var s=()=>a(799891),n=()=>a(60836),i=()=>a(528514),o=()=>a(81954),r=()=>a(788860),l=()=>a(513670),d=()=>a(912732),c=()=>a(824462),u=()=>a(308186),m=()=>a(784234),g=()=>a(269299),p=()=>a(67961),h=()=>a(877807),f=()=>a(620218),x=()=>a(749826),v=()=>a(779733),y=a(785893);async function b(e){let{newRole:t,...a}=e;const s=a.oldPermissionItem,n=(0,l().d9)(s);return n.role=t,await S({newPermissionItem:n,...a})}async function S(e){const{oldPermissionItem:t,newPermissionItem:a,wasInherited:n,environment:r,store:l,sudoModeStore:u,restrictingVisibility:p,fromPermissionWrapper:h,trustedDomainsLoggingData:y}=e,b=(0,v().wZ)();if(!(0,i().Kf)(t,a))throw new Error("Permission type mismatch.");const S=!!u&&u.shouldSaveTransactionWithSudoMode(l),w=(0,i().nl)(t.role,a.role);if(n&&w!==a.role||p){return await j({environment:r,useSudoMode:S,store:l,permissionItem:a,fromPermissionWrapper:h,isRedesignEnabled:b,shouldInherit:!0,trustedDomainsLoggingData:y})}!l.isTopLevel()&&t.role!==a.role&&w!==t.role&&d().SM(r);const M="public_permission"===t.type&&"public_permission"===a.type&&"none"===t.role&&"none"!==a.role,C=("public_permission"===t.type&&"public_permission"===a.type&&!t.allow_search_engine_indexing&&a.allow_search_engine_indexing||M&&Boolean(x().default.checkGate({gateName:"include_nonindexed_public_content_for_scanning"})))&&Boolean(x().default.checkGate({gateName:"enable_public_content_scanning"}));return g().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:r,canUndo:!0,useSudoMode:S,perform:t=>{const s=f().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");m().l3({environment:r,store:l,permissionItems:[a],transaction:t,pagePermissionChangeLocation:e.location,metric:s,fromPermissionWrapper:h}),C&&t.postSubmitCallbacks.push((async e=>{e||await c().callApi({eventName:"enqueueScanContentTask",environment:r,data:{pagePointer:{id:l.id,table:"block",spaceId:(0,o().J)(l.pointer.spaceId)}}})}))}}),"trusted_domain_permission"===a.type&&s().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,o().J)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:t,newPermissionItem:a,trustedDomainsLoggingData:y}}}),!0}async function j(e){const{environment:t,useSudoMode:a,store:s,permissionItem:i,fromPermissionWrapper:o,isRedesignEnabled:l,shouldInherit:d,trustedDomainsLoggingData:c}=e,f="none"===(null==i?void 0:i.role)?{type:"remove",permissionItem:i}:{type:"restrict"};return!!("user_permission"===(null==i?void 0:i.type)&&(null==i?void 0:i.user_id)===t.currentUser.id||(l?await u().gt({message:(0,h().mX)(f,l),description:(0,y.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,y.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,h().nH)(f,l),icon:(0,n().Z)({height:24,width:24})}):await u().gt({message:(0,h().mX)(f),acceptLabel:(0,h().nH)(f),cancelLabel:(0,y.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,y.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,y.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(g().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:a,perform:e=>{m().Pk({environment:t,store:s,permissionItem:i,shouldInherit:d,transaction:e,fromPermissionWrapper:o,trustedDomainsLoggingData:c})}}),!0)}},960516:(e,t,a)=>{a.d(t,{ZG:()=>P,xF:()=>D,ZP:()=>O});var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(506347),l=()=>a(728670),d=()=>a(528514),c=()=>a(933868),u=()=>a(396136),m=()=>a(306164),g=()=>a(788860),p=()=>a(568017),h=()=>a(525496),f=()=>a(729775),x=()=>a(67961),v=()=>a(370005),y=()=>a(429725),b=()=>a(852465),S=()=>a(314169),j=()=>a(270895),w=()=>a(826955),M=()=>a(44556),C=()=>a(469203),_=()=>a(295334),T=()=>a(779733),k=()=>a(845465),I=a(785893);const H=function(e){const{store:t,isDisabled:a,isCurrentUserPermission:s}=e;return a?s?(0,I.jsx)(g()._H,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,I.jsx)(h().Z,{store:t,useInvertedColors:!0})}}):(0,I.jsx)(g()._H,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,I.jsx)(h().Z,{store:t,useInvertedColors:!0})}}):s?(0,I.jsx)(g()._H,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,I.jsx)(h().Z,{store:t,useInvertedColors:!0,maxLength:26})}}):(0,I.jsx)(g()._H,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,I.jsx)(h().Z,{store:t,useInvertedColors:!0,maxLength:26})}})},P=32,D=40,z=(0,g().vU)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function A(e){const{from:t,currentBlockStore:r,onClick:l,permissionItem:d,ignoreLocalHoverState:c,nonInheritedTooltip:g,inheritedTooltip:p,shouldDisable:h,isCollapsible:f,openRoleSelectMenuOnRender:x}=e,v=(0,n().Fy)(),y=(0,n().O7)(),b=(0,i().qz)(void 0,a(529048).Z),S=(0,i().VK)((()=>{const e=t.table;return e===u().iU?w().G.createChildStore(r,{table:u().iU,id:t.blockId}):e===m().e0?w().zX.createChildStore(r,{table:m().e0,id:t.teamId}):void(0,a(696459).t1)(e)}),[t,r]),j=(0,i().VK)((()=>(0,T().wZ)()),[]),[M,C]=(0,s.useState)(!1),P=(0,s.useCallback)((()=>{b.setState({...b.state,open:!0}),C(!0)}),[b]),D=(0,s.useCallback)((()=>{C(!1)}),[]);(0,s.useEffect)((()=>{x&&!b.state.open&&requestAnimationFrame((()=>{P()}))}),[x,P,b]);const z=j&&M,A=(0,i().VK)((()=>h||(0,_().zX)({permissionItem:d,store:r})),[h,d,r]),R=(0,i().VK)((()=>S.id!==r.id),[S,r]),B=(0,a(560847).R)((e=>{l?l(e):A||b.setState({...b.state,open:!0})}),[b,l,A],a(949842).Af.PermissionItemClick),L=(0,i().VK)((()=>{const e=y.currentUser.id;return"user_permission"===d.type&&d.user_id===e}),[y,d]),O=(0,i().VK)((()=>z?null:j?R?p||(0,I.jsx)(H,{store:S,isDisabled:A,isCurrentUserPermission:L}):g:(0,_().mN)(d)||(0,_().tr)(d)?null:R?(0,I.jsx)(H,{store:S,isDisabled:A,isCurrentUserPermission:L}):g),[j,d,R,g,p,S,A,L,z]),V=(0,o().yK)((t=>{const a=j?{...(0,k().ZY)({isMobile:v.isMobile}),...e.menuListItemProps?{width:"unset"}:{}}:{};return{disabledButton:{...a,cursor:"not-allowed"},button:a,pressedButton:{background:t.buttonPressedBackgroundLight},tooltip:{maxWidth:240}}}),[v.isMobile,j,e.menuListItemProps]);return(0,I.jsx)(a(654133).Z,{delayThreshold:0,renderTooltip:()=>O,textWrap:!0,disableTooltip:!Boolean(O)||z,forceRenderTooltipPopupComponent:j&&Boolean(O),style:V.tooltip,render:t=>{const s=(0,a(164079).Z)(t,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,I.jsx)(a(827973).Z,{...e.menuListItemProps,onClick:B,disabled:A,ignoreLocalHoverState:c,pressed:!1,buttonStyle:A&&!j?V.disabledButton:V.button,textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,I.jsx)(N,{...e,isDisabled:A,fromBlockStore:S,buttonPopupStore:b,isInherited:R,onOpenMenu:P,onClose:D}),...s}):(0,I.jsx)(a(154186).Z,{disabled:A&&!f,mobileFeedback:v.isMobile,ignoreLocalHoverState:c,style:A&&!j?V.disabledButton:V.button,pressedStyle:j?V.pressedButton:void 0,onClick:B,...s,children:(0,I.jsx)(N,{...e,isDisabled:A,fromBlockStore:S,buttonPopupStore:b,isInherited:R,onOpenMenu:P,onClose:D})})},placement:a(998901).Placement.Left})}function N(e){const{permissionItem:t,fromBlockStore:a,isCompact:s,iconStyle:r,icon:l,title:d,tag:c,subtitle:u,showInherited:m,isInherited:g,permissionRoleSelect:p,hideRoleSelectButton:h,renderTitleWithoutUILabelWrapper:f,onClose:v}=e,y=(0,n().O7)(),b=y.device.isMobile,S=(0,i().VK)((()=>function(e){return"user_permission"===e.type}(t)),[t]),j=(0,i().VK)((()=>(0,T().wZ)()),[]),{paddingLeft:w,paddingRight:M}=(0,i().VK)((()=>({paddingLeft:y.WindowSizeStore.getSafePaddingLeftCSS(j?b?0:k().gf:14),paddingRight:y.WindowSizeStore.getSafePaddingRightCSS(j?b?0:k().gf:14)})),[y.WindowSizeStore,b,j]),_=(0,o().yK)((e=>({container:{display:"flex",alignItems:"center",minHeight:s?44:j?void 0:52,...j?{height:b?void 0:k().o8}:void 0,paddingTop:b&&j?12:8,paddingBottom:b&&j?12:8,paddingLeft:w,paddingRight:M},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:j&&b?40:32,height:j&&b?40:32,marginRight:(0,k().bY)({isMobile:b}),...r},title:{marginRight:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginLeft:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8,...j&&{marginRight:k().gf}},button:{marginRight:-8,color:e.mediumTextColor,fontSize:b?14:12}})),[s,w,M,b,r,j]);return(0,I.jsxs)("div",{className:"notranslate",style:_.container,children:[(0,I.jsx)("div",{style:_.icon,children:l}),(0,I.jsxs)("div",{style:_.title,children:[(0,I.jsxs)("div",{style:_.labelWrapper,children:[f?d:(0,I.jsx)(x().Z,{style:S?void 0:_.label,children:(0,I.jsx)(C().s,{children:d})}),c&&(0,I.jsx)("div",{style:_.tag,children:c})]}),u&&(0,I.jsx)(x().Z,{style:e.subtitleStyle,isSmall:!0,children:u}),m&&g&&(0,I.jsx)(B,{store:a})]}),!h&&(0,I.jsx)("div",{style:_.roleSelect,children:L(t)?p:(0,I.jsx)(R,{...e,onClose:v,permissionItem:t})})]})}function R(e){const{isInherited:t,permissionItem:a,currentBlockStore:r,from:m,isDisabled:g,sudoModeStore:p,location:h,fromPermissionWrapper:f,onUpgradeButtonClick:x,onChange:y,onClose:b,onOpenMenu:j,upgradeButtonName:w,buttonPopupStore:M,isRemovableOverride:C,onChangeSuccess:_}=e,H=(0,n().O7)(),P=(0,i().VK)((()=>{var e;const t=r.getModel(),s=null===(e=r.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().Gy)({record:t,parent:s,from:m,permissionItem:a})?(0,d().$5)({ancestors:l().DW(r.pointer,r.getRecordModel),from:m}):a.role}),[m,a,r]),D=(0,i().VK)((()=>(0,T().wZ)()),[]),z=(0,i().VK)((()=>r.getType()),[r]),A=(0,i().VK)((()=>{const e=H.currentUser.id;return c().jg(a)&&a.user_id===e}),[H,a]),N=(0,s.useCallback)((async e=>{let s=!1;const n={...a};n.role=P,s=y?await y(e):await(0,S().L7)({oldPermissionItem:n,newRole:e,wasInherited:t,environment:H,store:r,sudoModeStore:p,location:h,fromPermissionWrapper:f}),s&&(null==_||_(e))}),[a,P,t,H,r,p,h,f,y,_]),R=(0,o().yK)((e=>({button:{marginRight:-8,color:e.mediumTextColor,fontSize:(0,k().fV)({environment:H,isRedesignEnabled:D})}})),[H,D]);return(0,I.jsx)(v().ZP,{role:P,table:u().iU,blockType:z,type:a.type,disabled:g,isUserPermission:A,onChange:N,onClick:D?j:void 0,onClose:D?b:void 0,onUpgradeButtonClick:x,upgradeButtonName:w,buttonPopupStore:M,buttonStyle:R.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:C,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function B(e){const{store:t}=e,a=(0,n().O7)(),l=(0,g().YB)(),d=(0,i().VK)((()=>{if(t.table===u().iU)return(0,y().ZP)({store:t,fullyQualified:!1,pageVisitSource:r().tY.LinkInPage})}),[t]),c=(0,i().VK)((()=>(0,b().Y)(t)),[t]),m=(0,s.useCallback)((()=>{M().RF({environment:a,teamId:t.id,tab:j().a.Members,from:"permission_item"})}),[t.id,a]),v=(0,o().yK)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${p().ZP.mediumTextColor}`}})),[]);return(0,I.jsx)(x().Z,{isSmall:!0,style:v.label,children:l.formatMessage(z.fromLinkBox,{linkBoxWithPageTitle:(0,I.jsx)(f().Z,{inline:!0,href:d,onClick:c?m:void 0,innerStyle:v.linkBox,children:(0,I.jsx)(h().Z,{store:t,useInvertedColors:!1})})})})}function L(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}const O=s.memo(A)},998306:(e,t,a)=>{a.d(t,{Z:()=>d});var s=a(667294),n=()=>a(846550),i=()=>a(960516),o=a(785893);function r(e){let{type:t,isMobile:s,containerStyle:r,iconSize:d,...c}=e;const u=d??20,m=(0,n().yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,a(845465).lw)({theme:e,size:d??(s?i().xF:i().ZG),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===t&&{borderRadius:"100%"},...r}})),[r,s,t,d]);return(0,o.jsx)("div",{style:m.container,children:"function"===c.iconType?(0,o.jsx)(l,{iconFn:c.iconFn,iconStyle:c.iconStyle,innerIconSize:u}):"emoji"===c.iconType?(0,o.jsx)(a(754668).Z,{char:c.emoji,size:u}):"recordIcon"===c.iconType?(0,o.jsx)(a(943620).Z,{icon:c.icon,disabled:!0,isEmptyPage:!1,size:u,defaultIcon:(0,a(491630).C)()}):c.element})}function l(e){let{iconFn:t,iconStyle:a,innerIconSize:s}=e;return t((0,n().yK)((e=>({icon:{width:s,height:s,fill:e.mediumIconColor,...a}})),[a,s]).icon)}const d=s.memo(r)},295334:(e,t,a)=>{a.d(t,{E9:()=>o,ab:()=>d,mN:()=>r,tr:()=>l,zX:()=>i});var s=()=>a(933868),n=()=>a(95718);function i(e){let{permissionItem:t,store:a}=e;return"display_only_inherited_permission"!==t.type&&(!r(t)&&!a.canAdmin()||a.pathIsDead()||(0,n().Eo)(a))}function o(e){let{permissionItem:t,store:a}=e;return"block"!==t.from.table||t.from.blockId!==a.id}function r(e){return"display_only_overview_permission"===e.type}function l(e){return"display_only_inherited_permission"===e.type}function d(e){const t=e&&"from"in e?e.permissionItem:e;if(!t||!(0,s().YX)(t.role))return"private";return(0,s().tx)(t)&&"none"!==t.role?"unlisted":"open"}},61278:(e,t,a)=>{a.d(t,{Z:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{count:0,exportedPageCount:0}}}const n=new s},544590:(e,t,a)=>{a.d(t,{B:()=>s,Z:()=>i});const s={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class n extends(()=>a(263184))().default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const i=n},21234:(e,t,a)=>{a.d(t,{Z:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const n=s},356765:(e,t,a)=>{a.d(t,{Sw:()=>i,ZP:()=>l,jR:()=>o});var s=()=>a(146947);const n=["en","en-us","en-ca"];function i(e){return"pdf"===e.exportOptions.exportType}function o(){return n.includes(s().locale.toLowerCase())?"Letter":"A4"}class r extends(()=>a(263184))().default{getInitialState(){return{open:!1,shouldExportComments:!1}}}const l=new r},779522:(e,t,a)=>{a.d(t,{Z:()=>n});const s=new(a(168469).q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var s;let{spaceId:n}=t;const i=await Promise.resolve().then(a.bind(a,824462)),o=await i.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:n}});return"success"===o.type?null===(s=o.data)||void 0===s?void 0:s.internalDomainsWithInfo:void 0}));a(947115).exposeDebugValue("InternalDomainsStore",s);const n=s},812376:(e,t,a)=>{a.d(t,{Z:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{disablePublicAccess:!1,disableGuests:!1,disableMoveToSpace:!1,disableExport:!1,disableSpacePageEdits:!1,disablePublicAccessRequests:!1,disableTeamCreation:!1,disableMembershipRequests:!1,disableExternalMembershipRequests:!1,disableGuestMembershipRequests:!1,disableMemberUpgradeRequests:!1,enableGuestInviteRequests:!1,enableAiFeature:!1,disableTeamGuests:!1,disableGuestsModalOpen:!1,enableAiTraining:!1,zeroRetentionEnabled:!1}}getValueForSpace(e){if(e.isDefined())return{disablePublicAccess:Boolean(e.getDisablePublicAccess()),disableGuests:Boolean(e.getDisableGuests()),disableMoveToSpace:Boolean(e.getDisableMoveToSpace()),disableExport:Boolean(e.getDisableExport()),disableSpacePageEdits:Boolean(e.getDisableSpacePageEdits()),disablePublicAccessRequests:Boolean(e.getDisablePublicAccessRequests()),disableTeamCreation:Boolean(e.getDisableTeamCreation()),disableMembershipRequests:Boolean(e.getSetting("disable_membership_requests")),disableExternalMembershipRequests:Boolean(e.getSetting("disable_external_membership_requests")),disableGuestMembershipRequests:Boolean(e.getSetting("disable_guest_membership_requests")),enableGuestInviteRequests:Boolean(e.getSetting("enable_guest_invite_requests")),enableAiFeature:Boolean(e.getSetting("enable_ai_feature")),disableTeamGuests:Boolean(e.getSetting("disable_team_guests")),enableAiTraining:Boolean(e.getSetting("enable_ai_training")),zeroRetentionEnabled:Boolean(e.getSetting("zero_retention_enabled")),disableMemberUpgradeRequests:Boolean(e.getSetting("disable_member_upgrade_requests"))}}}const n=s},179378:(e,t,a)=>{a.d(t,{Z:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{}}}const n=s},658530:(e,t,a)=>{a.d(t,{Z:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const n=new s},902030:(e,t,a)=>{a.d(t,{Z:()=>i,x:()=>s});let s=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class n extends(()=>a(263184))().default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==s.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const i=new n},536984:(e,t,a)=>{a.d(t,{Z:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{name:"",emailDomains:[]}}getValueForSpace(e){if(e.isDefined())return{name:e.getName()||"",emailDomains:e.getEmailDomains()}}}const n=s},296631:(e,t,a)=>{a.d(t,{Z:()=>n});class s extends(()=>a(263184))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:a(306164).e0,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const n=s},615389:(e,t,a)=>{a.d(t,{O:()=>n});class s extends(()=>a(263184))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}}const n=new s},239823:(e,t,a)=>{a.d(t,{Z:()=>n});a(667294);var s=a(785893);const n=function(e){const t=(0,a(219727).O7)(),{render:n,requireUpgradeToTier:i,analyticsName:o,renderUpgradeTooltip:r,onUpgradeClick:l,alwaysAllowClick:d,tooltipPlacement:c,upgradeButtonDesktopStyle:u,upgradeButtonMobileStyle:m}=e;let g,{onClick:p,renderTooltip:h}=e;return i&&(g=(0,s.jsx)(a(188296).Z,{subscriptionTier:i,analyticsName:o,desktopStyle:{display:"inline-block",pointerEvents:"none",...u},mobileStyle:{display:"inline-block",pointerEvents:"none",...m}}),d||(p=e=>{a(965014).y(t,{from:o,upsell:{type:"product",product:i,limit:{type:"none"}}}),l&&l(e)},h=r)),(0,s.jsx)(a(654133).Z,{renderTooltip:h||(()=>null),render:e=>n((0,a(164079).Z)(e,{onClick:p}),g),disableTooltip:!h,placement:c})}},437594:(e,t,a)=>{a.d(t,{Dp:()=>o,iI:()=>r,vS:()=>i});var s=()=>a(677559);const n={DowngradeModal:new(s().Ss)("DowngradeModal",(async()=>Promise.all([a.e(62743),a.e(22467),a.e(80895),a.e(31095)]).then(a.bind(a,541616)))),RemoveAddOnModal:new(s().Ss)("RemoveAddOnModal",(async()=>Promise.all([a.e(62743),a.e(80895),a.e(23055)]).then(a.bind(a,947989)))),DeletePaidWorkspaceModal:new(s().Ss)("DeletePaidWorkspaceModal",(async()=>Promise.all([a.e(62743),a.e(80895),a.e(45632)]).then(a.bind(a,558120))))},i=(0,s().kF)(n.DowngradeModal,(e=>e.DowngradeModal)),o=(0,s().kF)(n.RemoveAddOnModal,(e=>e.RemoveAddOnModal)),r=(0,s().kF)(n.DeletePaidWorkspaceModal,(e=>e.DeletePaidWorkspaceModal))},216867:(e,t,a)=>{a.r(t),a.d(t,{AccessLevelSection:()=>Q,SidebarCreateTeamModal:()=>ae,TeamDescriptionRow:()=>F,TeamIconAndNameRow:()=>G});a(241792);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(714230),l=()=>a(205248),d=()=>a(237010),c=()=>a(788860),u=()=>a(513670),m=()=>a(696459),g=()=>a(707513),p=()=>a(465755),h=()=>a(154186),f=()=>a(291198),x=()=>a(94967),v=()=>a(312578),y=()=>a(708518),b=()=>a(67961),S=()=>a(981583),j=()=>a(167830),w=()=>a(527278),M=()=>a(345918),C=()=>a(91502),_=()=>a(577128),T=()=>a(876822),k=()=>a(826955),I=()=>a(296631),H=()=>a(595976),P=()=>a(44556),D=()=>a(906651),z=()=>a(423557),A=()=>a(697623),N=()=>a(174896),R=()=>a(586270),B=a(785893);function L(){const e=(0,n().O7)(),{currentSpaceStore:t,spaceViewStore:a}=(0,i().VK)((()=>({currentSpaceStore:T().default.state.currentSpaceStore,spaceViewStore:T().default.state.currentSpaceViewStore})),[]),r=(0,i().VK)((()=>{var e;return null===(e=T().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),l=(0,H().p)({spaceId:r}),d=(0,i().Kw)(_().default),g=(0,C().OX)(l),p=function(){const e=(0,i().VK)((()=>A().Mk()&&!_().default.state.isDefault),[]),t=_().F.Team,a=_().F.Members;return e?[t,a]:[t]}(),{screen:h,pageNumber:f,teamId:x}=d,v=""===d.name,y=(0,o().yK)((e=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginLeft:8},previous:{fontSize:14,color:e.mediumTextColor,cursor:"pointer"},learnMoreLink:{overflow:"hidden"}})),[]),b=(0,s.useCallback)(((a,s)=>{t&&function(e){let{pageOrder:t,pageNumber:a,teamId:s,currentSpaceStore:n,environment:i,from:o}=e;const r=a+1;if(r<=t.length)_().default.update((e=>({...e,loading:!1,screen:t[r-1],pageNumber:r})));else if(s){const e=k().zX.createChildStore(n,{table:"team",id:s,spaceId:n.id});P().hI({environment:i,teamStore:e,shouldScroll:!0}),P().ED({environment:i,from:o,teamStore:e})}}({pageOrder:p,pageNumber:f,teamId:s||x,currentSpaceStore:t,environment:e,from:a})}),[t,e,f,p,x]),S=u().Ds((async()=>{if(!t||!a)return;let s=x;switch(h){case _().F.Team:s=await async function(e){var t;let{spaceStore:a,environment:s,shouldShowZeroTeamsExperience:n,sidebarCreateTeamModalStoreState:i}=e;const{name:o,description:r,icon:l,flowId:d,accessLevel:c,isDefault:u}=i,m=await(0,z().Xg)({environment:s,spaceStore:a,teamName:o});if(!m)return;let g;_().default.update((e=>({...e,loading:!0}))),g=n?await N().HD({environment:s,name:o,description:r,icon:l,flowId:d,trackCreateTeamComplete:!0}):await N().Cm({environment:s,name:o,description:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0});if(!g)return;const p=null===(t=g)||void 0===t?void 0:t.id;return _().default.update((e=>({...e,teamId:p}))),p}({spaceStore:t,environment:e,shouldShowZeroTeamsExperience:g,sidebarCreateTeamModalStoreState:d});break;case _().F.Members:break;default:(0,m().t1)(h)}s?b("success",s):_().default.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),j=(0,s.useCallback)(S,[S]);return(0,B.jsxs)("div",{style:y.box,children:[(0,B.jsx)(R().Z,{containerStyle:y.learnMoreLink,helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_sidebar_create_team_modal"}),(0,B.jsx)("div",{style:{display:"inline-flex"},children:(0,B.jsx)(D().Z,{isLarge:!0,onClick:j,disabled:v,style:y.button,children:(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.footer.createTeam",defaultMessage:"Create teamspace"})})})]})}var O=()=>a(408491),V=()=>a(669200),U=()=>a(383694);const q={userSelect:"none",WebkitUserSelect:"none",position:"relative",padding:"22px 26px"},E={createTeamContainer:{...q,width:480},addMembersContainer:{...q,width:500},full:{width:"100%"}},Z=(0,c().vU)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",defaultMessage:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",defaultMessage:"Details about your teamspace"}});function F(){const e=(0,i().VK)((()=>_().default.state.description),[]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(j().Z,{hasMarginTop:!0,children:(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",defaultMessage:"Description"})}),(0,B.jsx)(f().Z,{value:e,placeholder:w().Z.formatMessage(Z.teamDescriptionPlaceholder),textarea:!0,onChange:e=>{_().default.update((t=>({...t,description:e.target.value})))}})]})}function W(e){return(0,B.jsx)("div",{id:e.titleAriaId,style:{fontSize:18,fontWeight:g().Ue.semibold},children:(()=>{switch(e.screen){case _().F.Team:return(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.teamTitle.label",defaultMessage:"Create a new teamspace"});case _().F.Members:return(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.membersTitle.label",defaultMessage:"Add people"});default:(0,m().t1)(e.screen)}})()})}function K(e){const t=(0,n().O7)(),{screen:a,teamId:o}=(0,i().VK)((()=>{const{screen:e,teamId:t}=_().default.state;return{screen:e,teamId:t}}),[]),r=(0,s.useCallback)(((e,a)=>{P().ED({environment:t,from:a,teamStore:e})}),[t]);switch(a){case _().F.Team:return(0,B.jsx)($,{titleAriaId:e.titleAriaId,descriptionAriaId:e.descriptionAriaId,parentSpaceStore:e.parentSpaceStore});case _().F.Members:return o?(0,B.jsx)(X,{teamId:o,onCompleted:e=>{r(e,"success")},onCanceled:e=>{r(e,"dismiss_button")}}):null;default:(0,m().t1)(a)}}function G(e){let{parentSpaceStore:t}=e;const a=(0,i().VK)((()=>t??T().default.state.currentSpaceStore),[t]),{icon:s,name:n}=(0,i().VK)((()=>{const{icon:e,name:t}=_().default.state;return{icon:e,name:t}}),[]),r=(0,o().yK)((e=>({container:{display:"inline-flex",width:"100%",verticalAlign:"middle"},icon:{marginRight:8,marginTop:1}})),[]);if(!a)return null;const l=s?{icon:s,pointer:{table:"space",id:a.id}}:void 0;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(j().Z,{hasMarginTop:!0,children:(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",defaultMessage:"Icon & name"})}),(0,B.jsxs)("div",{style:r.container,children:[(0,B.jsx)(U().p,{icon:l,size:26,style:r.icon,onChange:e=>{_().default.update((t=>({...t,icon:e})))},iconLoggingData:{recordTable:"team",source:"team_creation"},parentSpaceStore:t}),(0,B.jsx)(f().Z,{value:n,placeholder:w().Z.formatMessage(Z.teamNamePlaceholder),onChange:e=>{_().default.update((t=>({...t,name:e.target.value})))},preventSafariAutofill:!0})]})]})}function Y(e){const t=(0,o().yK)((()=>({description:{marginTop:3,marginBottom:26}})),[]);return(0,B.jsx)(b().Z,{id:e.descriptionAriaId,isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:t.description,children:(()=>{switch(e.screen){case _().F.Team:return(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.teamDescription.label",defaultMessage:"Teamspaces are where your team organizes pages, permissions, and members"});case _().F.Members:return null;default:(0,m().t1)(e.screen)}})()})}function $(e){const t=(0,n().O7)(),{open:a,from:o,flowId:r}=(0,i().VK)((()=>{const e=_().default.state;return{open:e.open,from:e.open?e.from:void 0,flowId:e.flowId}}),[]);return(0,s.useEffect)((()=>{a&&o&&p().kr(t,{from:o,flowId:r})}),[]),(0,B.jsxs)("div",{style:E.createTeamContainer,children:[(0,B.jsx)(W,{titleAriaId:e.titleAriaId,screen:_().F.Team}),(0,B.jsx)(Y,{descriptionAriaId:e.descriptionAriaId,screen:_().F.Team}),(0,B.jsxs)("div",{style:E.full,children:[(0,B.jsx)(G,{parentSpaceStore:e.parentSpaceStore}),(0,B.jsx)(F,{}),(0,B.jsx)(Q,{parentSpaceStore:e.parentSpaceStore})]}),(0,B.jsx)(L,{})]})}function J(){const e=(0,i().VK)((()=>_().default.state.loading),[]),t=(0,o().yK)((e=>({spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,left:0}})),[]);return(0,B.jsx)(B.Fragment,{children:e&&(0,B.jsx)("div",{style:t.spinner,children:(0,B.jsx)(v().Z,{style:{position:"absolute",top:"50%",left:"50%"}})})})}function Q(e){let{parentSpaceStore:t}=e;const a=(0,o().yK)((e=>({openAccessMessage:{fontSize:13,color:e.mediumTextColor,marginTop:20,lineHeight:1.4,display:"flex"},iconContainer:{marginRight:8},openTeamIcon:{width:24,fill:e.mediumIconColor},teamAccessPopupContainer:{marginTop:20}})),[]),s=(0,H().p)({spaceId:null==t?void 0:t.id}),r=(0,C().OX)(s),l=(0,n().O7)(),u=(0,i().VK)((()=>{const e=t??T().default.state.currentSpaceStore;return e?(0,M().rn)(l,e):"this workspace"}),[l,t]),{accessLevel:m,isDefault:g}=(0,i().VK)((()=>{const{accessLevel:e,isDefault:t}=_().default.state;return{accessLevel:e,isDefault:t}}),[]);return r?(0,B.jsxs)("div",{style:a.openAccessMessage,children:[(0,B.jsx)("div",{style:a.iconContainer,children:(0,d().R)(a.openTeamIcon)}),(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",defaultMessage:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:u}})]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(j().Z,{hasMarginTop:!0,children:(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",defaultMessage:"Permissions"})}),(0,B.jsx)(O()._,{currentAccessLevel:m,currentIsDefault:g,onChange:(e,t)=>{t?_().default.update((e=>({...e,accessLevel:"open",isDefault:t}))):_().default.update((a=>({...a,accessLevel:e,isDefault:t})))},parentSpaceStore:t})]})}function X(e){const t=(0,n().O7)(),a=(0,i().qz)(void 0,I().Z);(0,i().VK)((()=>{const{defaultInviteTargets:e,flowId:t}=_().default.state;a.setState({...a.state,flowId:t}),e&&a.setState({...a.state,isInviteTargetsEmpty:!1,inviteTargets:e})}),[a]);const s=(0,i().VK)((()=>e.parentSpaceStore??T().default.state.currentSpaceStore),[e.parentSpaceStore]);if(!s)return null;const o=k().zX.createChildStore(s,{table:"team",id:e.teamId,spaceId:s.id});return(0,B.jsx)("div",{style:E.full,children:(0,B.jsx)("div",{style:E.addMembersContainer,children:(0,B.jsx)(V().Z,{store:o,permissionsInviteStore:a,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(o),P().hI({environment:t,teamStore:o,shouldScroll:!0})},onDismiss:()=>{e.onCanceled(o)}})})})}const ee=[r().Z.images.avatars.avatar1Png,r().Z.images.avatars.avatar2Png,r().Z.images.avatars.avatar3Png];function te(e){let{handleModalClose:t}=e;const a=(0,o().yK)((e=>({container:{borderTopLeftRadius:5,borderTopRightRadius:5,background:e.inputBackground,boxShadow:e.inputBoxShadow},header:{display:"flex",padding:14,fontWeight:g().Ue.medium},avatarGroup:{display:"flex",width:"100",marginLeft:4,alignSelf:"center"},avatar:{marginLeft:-4},message:{paddingLeft:14,paddingRight:14},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor}})),[]);return(0,B.jsx)("div",{style:a.container,children:(0,B.jsxs)("div",{style:a.header,children:[(0,B.jsx)("div",{style:a.avatarGroup,children:ee.map(((e,t)=>(0,B.jsx)(S().Z,{avatarShouldShowShadow:!0,style:a.avatar,size:28,avatar:{avatarUrl:e}},t)))}),(0,B.jsx)(b().Z,{style:a.message,isMultiline:!0,isSmall:!0,children:(0,B.jsx)(c()._H,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",defaultMessage:"Create your first teamspace to start using Notion with your teammates"})}),(0,B.jsx)(h().Z,{onClick:t,style:a.closeButton,hoveredStyle:a.closeButtonHover,children:(0,l().D)(a.closeButtonIcon)})]})})}function ae(e){let{parentSpaceStore:t}=e;const a=(0,n().O7)(),r=(0,s.useId)(),d=(0,s.useId)(),c=(0,o().yK)((e=>({modal:{maxWidth:500,borderRadius:5,overflow:"visible"},closeButton:{position:"absolute",top:14,right:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.mediumTextColor},wrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"},container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"}})),[]),m=(0,s.useCallback)((e=>{P().ED({environment:a,from:e})}),[a]),{open:g,loading:p,screen:f}=(0,i().VK)((()=>{const{open:e,loading:t,screen:a}=_().default.state;return{open:e,loading:t,screen:a}}),[]),v=(0,H().p)({spaceId:null==t?void 0:t.id}),b=(0,C().OX)(v),S=(0,s.useRef)(b);return(0,s.useEffect)((()=>{p||(S.current=b&&f===_().F.Team)}),[p,f,b]),g?(0,B.jsx)(y().Z,{ariaLabelledBy:r,ariaDescribedBy:d,open:g,innerStyle:c.modal,onDismiss:()=>{m("modal")},render:()=>{const{device:e}=a;return(0,B.jsxs)("div",{style:{height:"100%"},children:[!e.isMobile&&(S.current?(0,B.jsx)(te,{handleModalClose:()=>{m("close_button")}}):(0,B.jsx)(h().Z,{onClick:()=>{m("close_button")},style:c.closeButton,hoveredStyle:c.closeButtonHover,children:(0,l().D)(c.closeButtonIcon)})),(0,B.jsx)("div",{style:c.wrapper,children:(0,B.jsx)(x().Z,{debugName:"SidebarCreateTeamModal",capture:!0,onBackspace:u().yR,onLeft:u().yR,onRight:u().yR,onSelectAll:u().yR,onRedo:u().yR,onUndo:u().yR,onCut:u().yR,onCopy:u().yR,onPaste:u().yR,onKeypress:u().yR,onDelete:u().yR,onTab:u().yR,children:(0,B.jsx)(K,{titleAriaId:r,descriptionAriaId:d,parentSpaceStore:t})})}),(0,B.jsx)(J,{})]})}}):null}},408491:(e,t,a)=>{a.d(t,{_:()=>j});a(267602),a(470928),a(241792),a(667294);var s=()=>a(219727),n=()=>a(142735),i=()=>a(846550),o=()=>a(286977),r=()=>a(374289),l=()=>a(429600),d=()=>a(827973),c=()=>a(448419),u=()=>a(198829),m=()=>a(255577),g=()=>a(388284),p=()=>a(654133),h=()=>a(352230),f=()=>a(164079),x=()=>a(998901),v=()=>a(128119),y=()=>a(936968),b=()=>a(550445),S=a(785893);function j(e){let{currentAccessLevel:t,currentIsDefault:a=!1,onChange:j,teamStore:w,disabledWithRightChevron:M=!1,style:C,parentSpaceStore:_}=e;const{device:T}=(0,s().O7)(),k=(0,y().q)(w),I=(0,i().yK)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`,...C},selectedCheckmark:{width:T.isMobile?16:14},icon:{alignSelf:"center",marginTop:0}})),[T.isMobile,C]),H=(0,n().VK)((()=>(null==w?void 0:w.isDefault())??a),[w,a]),P=H?"default":t,D=(0,b().U)({teamStore:w,onChange:j,isDefault:H,parentSpaceStore:_});return(0,S.jsx)(c().ZP,{popupType:T.isMobile?c().Z4.SlideUp:c().Z4.Popup,renderOrigin:e=>{const t=D.find((e=>e.key===P));if(!t)return null;const a=t.disableAllOptionsTooltip,s=M||Boolean(a)||Boolean(w)&&!k;return(0,S.jsx)(p().Z,{placement:x().Placement.Bottom,alignment:x().Alignment.Start,disableTooltip:!a||!k,renderTooltip:()=>a,style:{width:350},textWrap:!0,render:a=>(0,S.jsx)(d().Z,{...(0,f().Z)(e,a),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:I.icon,disabled:s,right:M?(0,l().o)(I.chevron):s?void 0:(0,r().i)(I.chevron),focused:!1,shouldWrapCaption:!0,buttonStyle:I.selectedButton})})},placementToOrigin:v().Iw.Bottom,alignmentToOrigin:v().lU.Start,sameWidthAsOrigin:!0,render:e=>{const t=[{key:"access levels",render:e=>(0,S.jsx)(g().Z,{...e,topBorder:0!==e.index}),items:D.map((t=>{const a=t.key===P;return{key:t.key,render:e=>(0,S.jsx)(p().Z,{placement:x().Placement.Top,disableTooltip:!t.tooltip,renderTooltip:()=>t.tooltip,render:s=>(0,S.jsx)(d().Z,{...(0,f().Z)(e,s),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:I.icon,right:a?(0,S.jsx)("div",{style:I.selectedCheckmark,children:(0,o().e)()}):void 0,disabled:t.disabled,shouldWrapCaption:!0})}),action:()=>{t.onSelect(),e.close()}}}))}];return(0,S.jsx)(u().Z,{menuType:h().o.Popup,children:(0,S.jsx)(m().ZP,{type:m().iW.Vertical,initialFocus:void 0,sections:t})})}})}},669200:(e,t,a)=>{a.d(t,{u:()=>H,Z:()=>P});a(267602),a(653476),a(241792),a(228244);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(237874),l=()=>a(788860),d=()=>a(707513),c=()=>a(465755),u=()=>a(959137),m=()=>a(849129),g=()=>a(102182),p=()=>a(265640),h=()=>a(312578),f=()=>a(661297),x=()=>a(906651),v=()=>a(654133),y=()=>a(67961),b=()=>a(677559);const S=new(b().Ss)("teamPermissionsInvite",(async()=>await Promise.all([a.e(62743),a.e(52774),a.e(44832),a.e(39938),a.e(84885),a.e(90698),a.e(37358),a.e(7312),a.e(5242),a.e(31189),a.e(90424),a.e(69343),a.e(81580),a.e(84325),a.e(2933),a.e(94556),a.e(78701),a.e(38804),a.e(17100),a.e(4387),a.e(11189),a.e(53329),a.e(71896),a.e(72586),a.e(53335),a.e(46616),a.e(54940),a.e(20224),a.e(46546),a.e(98721),a.e(50471),a.e(49498),a.e(2971),a.e(20634),a.e(91253),a.e(63707),a.e(61171),a.e(4014),a.e(63502),a.e(7678),a.e(5006),a.e(20919),a.e(75377),a.e(99590),a.e(52435),a.e(69437),a.e(81063),a.e(75066),a.e(81917),a.e(88128),a.e(97934),a.e(37317),a.e(91e3),a.e(18162),a.e(91752),a.e(78517),a.e(99537),a.e(80730),a.e(11770),a.e(83962),a.e(62084),a.e(79289),a.e(21862),a.e(41589),a.e(71641),a.e(23006),a.e(72646),a.e(10553),a.e(74879),a.e(67601),a.e(37239),a.e(40692),a.e(20683),a.e(22467),a.e(27039),a.e(97083),a.e(52065),a.e(18534),a.e(39179),a.e(77555),a.e(38632),a.e(78856),a.e(19592),a.e(47559),a.e(22371),a.e(73230),a.e(25911),a.e(54843),a.e(76540),a.e(22337),a.e(93536),a.e(53936),a.e(23721),a.e(32175),a.e(66283),a.e(22154),a.e(58586)]).then(a.bind(a,939123)))),j=(0,b().kF)(S,(e=>e.TeamPermissionsInvite));var w=()=>a(286338),M=()=>a(88476),C=()=>a(91502),_=a(785893);const T={button:{height:32},buttonContainer:{width:"100%",paddingTop:22,display:"flex",justifyContent:"end"},multiButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"space-between"},singleButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"right"},container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},containerLeftAligned:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},titleAndIcon:{paddingBottom:18,alignItems:"center",display:"flex"},addMembersTo:{minWidth:"25%"},icon:{paddingRight:3,paddingLeft:3},teamName:{paddingRight:10,fontWeight:d().Ue.medium,...d().Yu,maxWidth:250},full:{width:"100%"},inviteInput:{zIndex:1},submitTooltip:{minWidth:250},subtitle:{paddingTop:16,position:"relative",zIndex:-1}};function k(e){var t;let{isLoading:a,isNewlyCreatedTeam:s,onDismiss:n,onSubmit:o,inviteTargets:r,inviteRole:d,canEditSpaceMembership:c,membershipRequestsDisabled:u,spaceAllowedDomains:m,hasTeamGuestsMatchAllowedDomain:g}=e;const p=r.length>0,y=r.filter((e=>(0,M().OA)(e))).length>0&&u&&!c,b=(0,i().VK)((()=>(0,w().F$)()&&"team_level_guest"===d&&r.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.spaceRole&&"not_in_space"!==e.spaceRole))),[d,r]),S=b||y||g;if(a)return(0,_.jsx)(x().Z,{style:{...T.button,minWidth:80},disabled:!0,children:(0,_.jsx)(h().Z,{onDarkBackground:!0})});if(s&&!p)return(0,_.jsx)(f().Z,{style:T.button,onClick:n,disabled:a,children:(0,_.jsx)(l()._H,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",defaultMessage:"Skip for now"})});const j=b?(0,_.jsx)(l()._H,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",defaultMessage:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):g?(0,_.jsx)(l()._H,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",defaultMessage:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",values:{emailDomains:null==m||null===(t=m.map((e=>`@${e}`)))||void 0===t?void 0:t.join(", ")}}):null;return(0,_.jsx)(v().Z,{textWrap:!0,style:T.submitTooltip,disableTooltip:!j,renderTooltip:()=>j,render:e=>(0,_.jsx)(x().Z,{style:T.button,onClick:o,disabled:!p||a||S,...e,children:(0,_.jsx)(l()._H,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",defaultMessage:"Invite"})})})}function I(e){let{inviteTargets:t,workspaceName:a,canEditSpaceMembership:s,membershipRequestsDisabled:n,isFreeTier:i,inviteRole:o,hasTeamGuestsMatchAllowedDomain:r}=e;if(void 0===s)return null;if(!t||0===t.length)return null;const d=t.map((e=>{if("group"!==e.type&&(0,M().OA)(e))return e.value.email})).filter((e=>e));if(!d||0===d.length)return null;const c=e=>(0,_.jsx)("b",{children:e}),u=a??"this workspace";return s?i?(0,_.jsx)(y().Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):"team_level_guest"===o?r?null:(0,_.jsx)(y().Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):(0,_.jsx)(y().Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):n?(0,_.jsx)(y().Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",defaultMessage:"You can't add workspace guests to a teamspace. Ask your admin to add them as workspace members first."})}):(0,_.jsx)(y().Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})})}function H(e){const{store:t,isSmall:a}=e,s=(0,n().O7)(),i=(0,o().yK)((e=>({button:{marginRight:5,marginLeft:5,height:32,fontSize:a?12:14},icon:{width:a?12:14,height:a?12:14}})),[a]);return(0,_.jsx)(p().D,{onClick:async()=>{const e=await u().F.clipboardActions.load();e.copyString({environment:s,stringValue:(0,C().W8)(t.id),copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),c().XT(s,{store:t})},icon:r().N,style:i.button,iconStyle:i.icon,isBlue:!0,children:a?(0,_.jsx)(l()._H,{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",defaultMessage:"Copy link"}):(0,_.jsx)(l()._H,{id:"teamPermissionsInviteOverlay.copyLinkButton.label",defaultMessage:"Copy invite link"})})}const P=function(e){let{store:t,permissionsInviteStore:o,isNewlyCreatedTeam:r,onSubmitSuccessful:d,onDismiss:c}=e;const u=(0,n().O7)(),{teamName:p,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v}=(0,i().VK)((()=>{const{currentSpaceStore:e}=a(876822).default.state;return{teamName:t.getName(),workspaceName:null==e?void 0:e.getName(),canEditSpaceMembership:null==e?void 0:e.canEditMembership(),membershipRequestsDisabled:null==e?void 0:e.getDisableMembershipRequests(),spaceAllowedDomains:null==e?void 0:e.getEmailDomains()}}),[t]);(0,s.useEffect)((()=>()=>{r&&a(44556).hI({environment:u,teamStore:t,shouldScroll:!0})}),[r,t,u]);const[y,b]=(0,s.useState)(!1),S=(0,i().VK)((()=>o.state.inviteTargets),[o]),P=(0,i().VK)((()=>o.state.inviteTargets.length),[o]),D=(0,i().VK)((()=>o.state.inviteRole),[o]),z=(0,i().VK)((()=>a(697623).QM()),[]),A=(0,i().VK)((()=>!(null==v||!v.length||"team_level_guest"!==D||!(0,w().F$)())&&S.some((e=>"group"!==e.type&&(0,a(446866).dy)(v,e.value.email)))),[v,D,S]),N=(0,i().VK)((()=>!z&&!(0,C().U2)(t)),[t,z]),R=async()=>{if(b(!0),P>0){const e=o.state.inviteTargets,{success:a}=await m().zK({environment:u,store:t,permissionsInviteStore:o,inviteOrigin:"team_invite_overlay"});if(void 0!==f)if(a){const a=(0,M().t0)({inviteTargets:e,recordStore:t,canEditSpaceMembership:f});if(!a)return;setTimeout((()=>{g().oV({label:a})}))}else setTimeout((()=>{g().oV({label:(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",defaultMessage:"Failed to send invites"})})}))}m().Mr({permissionsInviteStore:o}),b(!1),null==d||d()};return(0,_.jsx)("div",{className:a(247724).D$4,style:{...T.full},children:(0,_.jsxs)("div",{style:T.containerLeftAligned,children:[(0,_.jsxs)("div",{style:T.titleAndIcon,children:[(0,_.jsx)("div",{style:T.addMembersTo,children:(0,_.jsx)(l()._H,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",defaultMessage:"Invite people to"})}),(0,_.jsx)("div",{style:T.icon,children:(0,_.jsx)(a(383694).p,{disabled:!0,store:t,size:20})}),(0,_.jsx)(a(469203).s,{style:T.teamName,children:p})]}),(0,_.jsxs)("div",{style:T.inviteInput,children:[(0,_.jsx)(j,{store:t,permissionsInviteStore:o,onEmptySubmit:R}),(0,_.jsx)("div",{style:T.subtitle,children:(0,_.jsx)(I,{inviteTargets:S,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,isFreeTier:z,inviteRole:D,hasTeamGuestsMatchAllowedDomain:A})})]}),(0,_.jsx)("div",{style:N?T.multiButtonContainer:T.singleButtonContainer,children:(0,_.jsxs)("div",{style:N?T.multiButtonContainer:{},children:[N&&(0,_.jsx)(H,{store:t}),(0,_.jsx)(k,{isLoading:y,onSubmit:R,onDismiss:()=>{m().Mr({permissionsInviteStore:o}),null==c||c()},isNewlyCreatedTeam:r,inviteTargets:S,inviteRole:D,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v,hasTeamGuestsMatchAllowedDomain:A})]})})]})})}},586270:(e,t,a)=>{a.d(t,{Z:()=>m});a(667294);var s=()=>a(846550),n=()=>a(788860),i=()=>a(696459),o=()=>a(360964),r=()=>a(148126),l=()=>a(469203),d=a(785893);function c(e){switch(e){case"bestPractices":return(0,r().UY)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,r().UY)("guides.teamspacesWorkspaceOwner");case"settingsAndPermissions":return(0,r().UY)("guides.teamspacesSettingsAndPermissions");default:return(0,i().t1)(e)}}function u(e){return e||(0,d.jsx)(l().s,{children:(0,d.jsx)(n()._H,{defaultMessage:"Learn about teamspaces",id:"teamsLearnMoreLink"})})}function m(e){let{onClick:t,message:a,helpCenterLocation:n,analyticsFrom:i,containerStyle:r}=e;const l=(0,s().yK)((()=>({button:{maxWidth:"100%"}})),[]);return(0,d.jsx)("div",{style:r,children:(0,d.jsx)(o().Z,{buttonStyle:l.button,title:u(a),analyticsFrom:i,href:c(n),onClick:t})})}},17064:(e,t,a)=>{a.d(t,{h:()=>D});a(670560),a(267602),a(916054),a(653476),a(241792),a(731107);var s=a(667294),n=()=>a(219727),i=()=>a(142735),o=()=>a(846550),r=()=>a(38883),l=()=>a(619186),d=()=>a(542487),c=()=>a(788860),u=()=>a(513670);function m(e,t){return{state:t,store:e}}class g extends(()=>a(263184))().default{getInitialState(){return{showAutoCompletePopup:!1,defaultTeams:{}}}addedAndCurrentTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"current-default"===t||"add-default"===t}))}addedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"add-default"===t}))}removedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"remove-default"===t}))}}const p=new g;function h(e){var t;let{teamStore:a}=e;return null===(t=p.state.defaultTeams[a.id])||void 0===t?void 0:t.state}function f(e,t){const a=p.state,s={...a.defaultTeams};t?s[e.id]=m(e,t):delete s[e.id],p.setState({...a,defaultTeams:s})}var x=()=>a(198829),v=()=>a(255577),y=()=>a(967092),b=()=>a(906651),S=()=>a(388284),j=()=>a(654133),w=()=>a(435676),M=()=>a(78014),C=()=>a(122671),_=()=>a(352230),T=()=>a(641506),k=()=>a(998901),I=()=>a(104088),H=()=>a(383694),P=a(785893);function D(e){let{immediateUpdate:t,onUpdate:a,tokenStyle:r,unarchivedTeams:g,description:M,isOrgOwner:T}=e;const H=(0,n().Fy)(),D=(0,c().YB)(),B=(0,n().O7)(),[L,O]=(0,s.useState)(!1),V=(0,i().qz)(p),[U,q]=(0,s.useState)(""),{addedTeams:E,removedTeams:Z,addedAndCurrentTeams:F}=(0,i().VK)((()=>({addedAndCurrentTeams:V.addedAndCurrentTeams(),addedTeams:V.addedTeams(),removedTeams:V.removedTeams()})),[V]),W=(0,i().VK)((()=>g.reduce(((e,t)=>(e[t.id]=t.getName(),e)),{})),[g]),K=(0,i().VK)((()=>g.filter((e=>e.isDefault()))),[g]);(0,s.useEffect)((()=>function(e){const t=p.state,a=e.reduce(((e,t)=>(e[t.id]=m(t,"current-default"),e)),{});p.setState({...t,defaultTeams:a})}(K)),[K]);let G=null;0===g.length?G=(0,P.jsx)(c()._H,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noUnarchivedTeamsExist",defaultMessage:"Create your first teamspace to set a default"}):0===E.length&&0===Z.length?G=(0,P.jsx)(c()._H,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noChangesToExistingDefaultTeams",defaultMessage:"Current selection already matches existing default teams"}):0===F.length&&(G=(0,P.jsx)(c()._H,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.atLeastOneDefaultTeamMustBeSelected",defaultMessage:"At least one default team must be selected"}));const Y=e=>{O(!0),a({addedTeams:e.addedTeams,removedTeams:e.removedTeams}),O(!1)},$=e=>{!function(e){let{teamStore:t}=e;f(t,"add-default"===h({teamStore:t})?null:"remove-default")}({teamStore:e}),t&&Y({addedTeams:[],removedTeams:[m(e,"remove-default")]})},J=e=>{!function(e){let{teamStore:t}=e;f(t,"remove-default"===h({teamStore:t})?"current-default":"add-default")}({teamStore:e}),V.update((e=>({...e,showAutoCompletePopup:!1}))),t&&Y({addedTeams:[m(e,"add-default")],removedTeams:[]}),q("")},Q=B.currentUser.id,X=(0,i().VK)((()=>Q?g.filter((e=>{const t=e.getSettingsStore().getValue();return!!t&&((T||e.isOwner(Q))&&"open"===(0,d().B5)(t)&&F.every((t=>t.store.id!==e.id)))})):[]),[Q,g,T,F]),ee=(0,l().ZP)(U,X,(e=>W[e.id]??"")),te=[];ee.length>0&&U.length>0&&te.push({key:"default-teams-list",render:e=>(0,P.jsx)(S().Z,{...e,title:(0,P.jsx)(c()._H,{id:"defaultTeamsInput.defaultTeamList.title",defaultMessage:"Teamspaces"}),loading:!1}),items:ee.map((e=>({key:e.id,render:t=>(0,P.jsx)(w().Z,{...t,teamStore:e}),action:()=>J(e)})))});const ae=(0,i().VK)((()=>V.state.showAutoCompletePopup&&te.length>0),[V,te.length]),se=(0,o().yK)((e=>({defaultTeamsHeader:{fontSize:14,marginBottom:2},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{borderRadius:ae?N:A,margin:0},menuList:{maxHeight:300,border:`1px solid ${e.regularDividerColor}`,borderTop:0,borderRadius:R},updateButton:{marginLeft:10,height:35}})),[ae]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:se.defaultTeamsHeader,children:(0,P.jsx)(c()._H,{id:"teamsWorkspaceSettings.defaultTeams.title",defaultMessage:"Default teamspaces"})}),M,(0,P.jsxs)("div",{style:se.inputAndButtonContainer,children:[(0,P.jsx)("div",{style:se.inputContainer,children:(0,P.jsx)(y().ZP,{popupType:I().k.Popup,placementToOrigin:k().Placement.Bottom,sameWidthAsOrigin:!0,open:ae,borderRadius:R,onDismiss:()=>V.update((e=>({...e,showAutoCompletePopup:!1}))),origin:(0,P.jsx)(C().ZP,{disabled:L||0===g.length,style:se.tokenInputMenu,focusInitial:H.isMobile,focusAfterAnimation:!0,format:C().UR.Share,inputDivStyle:{alignItems:"center"},value:U,onChange:e=>{V.update((e=>({...e,showAutoCompletePopup:!0}))),q(e.target.value)},type:"default-teams",tokens:F.map((e=>(0,P.jsx)(z,{teamStore:e.store,onClickRemove:$,style:r,hideRemoveButton:1===F.length},e.store.id))),placeholder:D.formatMessage({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",defaultMessage:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=F,t=u().Z$(e);t&&$(t.store)},onEmptySubmit:u().yR,showBorder:!0}),render:()=>(0,P.jsx)(x().Z,{menuType:_().o.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,children:(0,P.jsx)("div",{style:se.menuList,children:(0,P.jsx)(v().ZP,{type:v().iW.Vertical,initialFocus:0,sections:te})})})})}),!t&&(0,P.jsx)(j().Z,{placement:k().Placement.Top,alignment:k().Alignment.Center,disableTooltip:null===G,renderTooltip:()=>G,style:{width:180},textWrap:!0,render:e=>(0,P.jsx)(b().Z,{...e,style:se.updateButton,disabled:null!==G||L,isLarge:!0,onClick:()=>Y({addedTeams:E,removedTeams:Z}),children:(0,P.jsx)(c()._H,{id:"teamsWorkspaceSettings.updateButton.label.2",defaultMessage:"Update"})})})]})]})}function z(e){const t=(0,n().Fy)(),{teamStore:a,onClickRemove:s,style:o,hideRemoveButton:l}=e,{name:d}=(0,i().VK)((()=>({name:a.getName()})),[a]);return(0,P.jsx)(M().Z,{showRemoveButton:!l,isSingle:!1,format:t.isMobile?r().lo.Large:r().lo.Medium,style:{marginLeft:6,...o},onClickRemove:()=>s(a),value:(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,P.jsx)(H().p,{disabled:!0,store:a,size:14,style:{marginRight:4}}),d]})})}const A=3,N=(0,T().wK)({topLeft:A,topRight:A,bottomLeft:0,bottomRight:0}),R=(0,T().wK)({topLeft:0,topRight:0,bottomLeft:A,bottomRight:A})},617111:(e,t,a)=>{a.d(t,{P:()=>d,z:()=>c});var s=()=>a(142735),n=()=>a(122792),i=()=>a(853571),o=()=>a(876822),r=()=>a(548812),l=()=>a(661769);function d(e){const{currentSpaceStore:t}=(0,s().Kw)(o().default),a=e??t;return(0,s().VK)((()=>{const e=(null==a?void 0:a.getSubscriptionTier())??"free";return(0,n().$V)(e,"business")}),[a])}function c(){const{currentSpaceStore:e}=(0,s().Kw)(o().default),t=(0,l().pQ)({spaceId:null==e?void 0:e.id});return(0,s().VK)((()=>{const a=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,r().fX)()&&(0,n().$V)(a,"business")||(0,i().J)({billingData:t})}),[e,t])}},1038:(e,t,a)=>{a.d(t,{y:()=>i});a(267602),a(653476);var s=()=>a(142735),n=()=>a(700696);function i(e){return(0,s().VK)((()=>{if(!e)return!1;const t=n().default.state.teams.filter((e=>e.isDefault()&&!e.isArchived()));return 1===t.length&&t[0].id===e}),[e])}},936968:(e,t,a)=>{a.d(t,{q:()=>i});var s=()=>a(219727),n=()=>a(142735);function i(e){const t=(0,s().O7)();return(0,n().VK)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&Boolean(e.isOwner(a))}),[t.currentUser.id,e])}},550445:(e,t,a)=>{a.d(t,{U:()=>S});a(667294);var s=()=>a(219727),n=()=>a(142735),i=()=>a(846550),o=a(785893);const r=(0,a(827282).IU)("closedTeam",{viewBox:"0 0 28 28",svg:(0,o.jsx)("path",{d:"M18.0459 13.8125C20.1377 13.8125 21.8428 11.9492 21.8428 9.68164C21.8428 7.43164 20.1465 5.66504 18.0459 5.66504C15.9541 5.66504 14.2402 7.4668 14.249 9.69922C14.2578 11.958 15.9541 13.8125 18.0459 13.8125ZM7.9209 13.8828C9.73145 13.8828 11.2168 12.2568 11.2168 10.2617C11.2168 8.31055 9.74902 6.7373 7.9209 6.7373C6.11035 6.7373 4.61621 8.33691 4.625 10.2793C4.625 12.2656 6.11035 13.8828 7.9209 13.8828ZM18.0459 12.4854C16.7627 12.4854 15.6641 11.2549 15.6641 9.69922C15.6553 8.16992 16.7363 6.99219 18.0459 6.99219C19.3555 6.99219 20.4277 8.15234 20.4277 9.68164C20.4277 11.2373 19.3379 12.4854 18.0459 12.4854ZM7.9209 12.5732C6.83984 12.5732 5.93457 11.5449 5.93457 10.2793C5.93457 9.04004 6.83105 8.04688 7.9209 8.04688C9.02832 8.04688 9.91602 9.02246 9.91602 10.2617C9.91602 11.5449 9.00195 12.5732 7.9209 12.5732ZM3.02539 21.9424H9.9248C9.50293 21.7051 9.18652 21.1777 9.24805 20.6416H2.81445C2.62988 20.6416 2.55078 20.5713 2.55078 20.4043C2.55078 18.2246 5.03809 16.1855 7.91211 16.1855C9.01074 16.1855 10.0127 16.4492 10.8652 16.9502C11.1377 16.5986 11.4629 16.291 11.8584 16.0186C10.7246 15.2715 9.3623 14.8848 7.91211 14.8848C4.22949 14.8848 1.24121 17.5566 1.24121 20.4834C1.24121 21.459 1.83887 21.9424 3.02539 21.9424ZM12.5176 21.9424H23.5566C25.0244 21.9424 25.7188 21.5029 25.7188 20.5361C25.7188 18.2334 22.8096 14.9023 18.0371 14.9023C13.2734 14.9023 10.3643 18.2334 10.3643 20.5361C10.3643 21.5029 11.0586 21.9424 12.5176 21.9424ZM12.0957 20.6152C11.8672 20.6152 11.7793 20.5537 11.7793 20.3691C11.7793 18.9277 14.0117 16.2295 18.0371 16.2295C22.0713 16.2295 24.3037 18.9277 24.3037 20.3691C24.3037 20.5537 24.207 20.6152 23.9785 20.6152H12.0957Z"})});var l=()=>a(81979),d=()=>a(535014),c=()=>a(237010),u=()=>a(542487),m=()=>a(788860),g=()=>a(568017),p=()=>a(345918),h=()=>a(616433),f=()=>a(876822),x=()=>a(965014);const v=function(e){let{tier:t}=e;const s=()=>"business"===t?(0,o.jsx)(m()._H,{id:"upgradeToBusinessBadge",defaultMessage:"Business"}):(0,o.jsx)(m()._H,{id:"upgradeToEnterpriseBadge",defaultMessage:"Enterprise"});return(0,o.jsx)(a(946563).Z,{children:(0,o.jsx)(s,{})})};var y=()=>a(617111),b=()=>a(1038);function S(e){let{teamStore:t,isDefault:a,onChange:S=(()=>{}),parentSpaceStore:w}=e;const M=(0,s().O7)(),C=(0,h().J)(),_=(0,b().y)(null==t?void 0:t.id),T=(0,y().P)(w),k="business",I=(0,n().VK)((()=>w??f().default.state.currentSpaceStore),[w]),H=(0,n().VK)((()=>{if(I)return(0,p().rn)(M,I)}),[M,I]),P=(0,n().VK)((()=>{const e=null==t?void 0:t.getSettingsStore().getValue();return!!e&&"private"===(0,u().B5)(e)}),[t]),D=(0,i().yK)((()=>({openIcon:{width:20,height:20},lockIcon:{width:18,height:18},closedIcon:{width:20,height:20},iconContainer:{width:20,height:20,display:"flex",justifyContent:"center",alignItems:"center",marginLeft:5,marginRight:5}})),[]),z=(0,o.jsx)(m()._H,{id:"TeamAccessLevelSwitcher.privateTeamspaceUpsellBusiness.tooltip",defaultMessage:"Upgrade to Business Plan to enable Private teamspaces"}),A=(0,o.jsx)(m()._H,{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",defaultMessage:"Default"}),N=(0,o.jsx)(m()._H,{id:"TeamAccessLevelSwitcher.openTeamspace.title",defaultMessage:"Open"}),R=(0,o.jsx)(m()._H,{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",defaultMessage:"Closed"}),B=(0,o.jsx)(m()._H,{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",defaultMessage:"Private"}),L="dark"===(0,i().Fg)().mode?g().ZP.uiLightGray:g().ZP.black,O=[{key:"open",icon:e=>(0,o.jsx)("div",{style:D.iconContainer,children:(0,c().R)({...e,...D.openIcon})}),iconColor:L,level:N,title:N,caption:(0,o.jsx)(m()._H,{id:"CreateTeamspaceMenu.openTeamspace.caption",defaultMessage:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>S("open",!1)},{key:"closed",icon:e=>(0,o.jsx)("div",{style:D.iconContainer,children:r({...e,...D.closedIcon})}),iconColor:L,level:R,title:R,caption:(0,o.jsx)(m()._H,{id:"CreateTeamspaceMenu.closedTeamspace.caption",defaultMessage:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>S("closed",!1)},{key:"private",icon:e=>(0,o.jsx)("div",{style:D.iconContainer,children:(0,d().b)({...e,...D.lockIcon})}),iconColor:L,level:B,title:T?B:(0,o.jsx)(j,{title:B,badge:(0,o.jsx)(v,{tier:k})}),caption:(0,o.jsx)(m()._H,{id:"CreateTeamspaceMenu.privateTeamspace.caption",defaultMessage:"Only members can see that this teamspace exists"}),disabled:!T&&!C,tooltip:T?void 0:z,onSelect:()=>{if(!T&&!P)return x().y(M,{from:"team_security_settings",upsell:{type:"product",product:k,limit:{type:"none"}},dontOpenPlansOnCancel:!0});S("private",!1)}}];if(a||C){const e=a&&(!C||_),t={key:"default",icon:e=>(0,o.jsx)("div",{style:D.iconContainer,children:(0,l().o)({...e,...D.lockIcon})}),iconColor:L,level:A,title:A,caption:(0,o.jsx)(m()._H,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",defaultMessage:"Everyone at {spaceName} must be a member",values:{spaceName:H}}),disabled:!1,disableAllOptionsTooltip:e?C?(0,o.jsx)(m()._H,{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",defaultMessage:"Add another default teamspace to change teamspace permissions."}):(0,o.jsx)(m()._H,{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",defaultMessage:"You can't change this setting because you are not a workspace admin"}):void 0,onSelect:()=>S("open",!0)};O.unshift(t)}return O}function j(e){let{title:t,badge:a}=e;const s=(0,i().yK)((()=>({container:{display:"flex",flexWrap:"wrap",alignItems:"center"},badge:{marginLeft:5}})),[]);return(0,o.jsxs)("div",{style:s.container,children:[t,(0,o.jsx)("div",{style:s.badge,children:a})]})}},107496:(e,t,a)=>{a.d(t,{AD:()=>d});a(670560);var s=()=>a(730120),n=()=>a(326966),i=()=>a(431595);const o=7;function r(e){if(void 0===e)return s().ou.utc();const t={zone:"utc"};return"number"==typeof e?s().ou.fromMillis(e,t):s().ou.fromISO(e,t)}function l(e,t){const a=t?r(t):s().ou.utc(),n=r(e??function(e){const{days:t,endDate:a,startDate:n}=e;if(t<=0)throw new(i().p8)("Days must be greater than 0");const o=a?r(a):s().ou.utc();if(!o.isValid)throw new(i().p8)(`endDate ${a} is in an invalid format`);const l=n?r(n).toMillis():0,d=o.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:o,endDate:t}));if(!n.isValid)throw new(i().p8)(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new(i().p8)(`endDate ${t} is in an invalid format`);if(n>a)throw new(i().p8)(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:s}=l(e,t),i=[];let o=a;for(;o<=s;)i.push(r(o).toISODate()),o+=n().A0;return i}},857806:(e,t,a)=>{a.d(t,{Kp:()=>r,Ns:()=>n,j_:()=>l,qn:()=>i,zv:()=>o});var s=()=>a(657120);function n(e,t){if(void 0!==e&&(0,s().XR)(e))return!1;const a=(0,s().TZ)(e)||(0,s().ZQ)(e);return!(void 0===e||!a||0!==t)||1===t}function i(e){return e.memberCount>1}function o(e){return!i(e)}function r(e){return Boolean(e.spaceRequest)}function l(e){return"free"!==e.subscriptionTier}},578062:(e,t,a)=>{a.d(t,{AS:()=>i,Hs:()=>o});var s=()=>a(530980),n=()=>a(989349);const i=(0,a(696459).AO)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function o(e){const t=s().kk5.fromValue(n().Jd,e);return{type:t.verified_at?"verified":"unverified",id:t.id,domain:t.domain,verificationCode:t.verification_code,createdAt:t.created_at,expiresAt:t.expires_at,invalidatedAt:t.getInfo().invalidated_at}}},815757:(e,t,a)=>{a.d(t,{g:()=>s});const s=28*a(326966).A0},26613:(e,t,a)=>{a.d(t,{B:()=>n,k:()=>i});var s=()=>a(788860);const n=(0,s().vU)({private:{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"},sharedExternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"},sharedInternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"},publishedToWeb:{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"},sharedWithTrustedDomain:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedWithTrustedDomain",defaultMessage:"Shared with email domain"}}),i=(0,s().vU)({alive:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.active",defaultMessage:"Active pages"},trash:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.inTrash",defaultMessage:"In Trash"},retained:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.retainedPages",defaultMessage:"Retained pages"}})},73363:(e,t,a)=>{a.d(t,{M:()=>s});const s=(0,a(827282).CZ)("questionMarkCircled",{default:{loader:()=>a.e(18872).then(a.bind(a,118872))},small:{loader:()=>a.e(95020).then(a.bind(a,295020))},mini:{loader:()=>a.e(51419).then(a.bind(a,651419))},large:{loader:()=>a.e(78727).then(a.bind(a,678727))}})},981219:(e,t,a)=>{a.d(t,{U:()=>s});const s=(0,a(827282).CZ)("xmark",{default:{loader:()=>a.e(71448).then(a.bind(a,471448))},small:{loader:()=>a.e(24056).then(a.bind(a,624056))},mini:{loader:()=>a.e(84500).then(a.bind(a,384500))},large:{loader:()=>a.e(71533).then(a.bind(a,71533))}})},361072:(e,t,a)=>{a.d(t,{l:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("addPersonOutline",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M11.524 16.45h-5.79q-1.75 0-1.75-1.177 0-.696.417-1.463.424-.765 1.21-1.428a6.4 6.4 0 0 1 1.9-1.073q1.108-.417 2.489-.417.895 0 1.675.191a6.4 6.4 0 0 1 1.435.513 4.5 4.5 0 0 0-.464.43q-.22.225-.397.5A5.7 5.7 0 0 0 10 12.074q-1.135 0-2.017.32-.875.315-1.476.8-.595.48-.91.992-.314.506-.314.902 0 .096.048.137.055.04.178.04h5.824q.007.315.048.602a4 4 0 0 0 .143.581Zm-1.53-6.358a2.75 2.75 0 0 1-1.512-.438 3.2 3.2 0 0 1-1.08-1.175A3.35 3.35 0 0 1 7 6.845q0-.882.403-1.6A3.2 3.2 0 0 1 8.49 4.104a2.78 2.78 0 0 1 1.504-.424q.82 0 1.497.43.684.431 1.087 1.156.41.718.403 1.592 0 .89-.403 1.627a3.2 3.2 0 0 1-1.08 1.17 2.7 2.7 0 0 1-1.504.437m0-1.19q.471 0 .867-.266a1.95 1.95 0 0 0 .643-.739q.24-.465.24-1.039a2 2 0 0 0-.24-1.011 1.9 1.9 0 0 0-.636-.718 1.54 1.54 0 0 0-.875-.267q-.478 0-.875.26-.396.26-.636.711t-.239 1.012q0 .574.24 1.046.238.465.635.738.403.273.875.273Zm5.83 9.79a3.4 3.4 0 0 1-1.36-.274 3.5 3.5 0 0 1-1.121-.766 3.7 3.7 0 0 1-.766-1.12 3.4 3.4 0 0 1-.273-1.361q0-.725.273-1.36.28-.636.766-1.121a3.5 3.5 0 0 1 1.12-.766 3.4 3.4 0 0 1 1.361-.274q.725 0 1.36.274a3.56 3.56 0 0 1 1.88 1.886q.28.636.28 1.36 0 .719-.28 1.354a3.5 3.5 0 0 1-.765 1.128q-.486.486-1.128.76a3.3 3.3 0 0 1-1.347.28m0-1.293a.44.44 0 0 0 .335-.13.45.45 0 0 0 .13-.334v-1.3h1.299a.45.45 0 0 0 .335-.13.44.44 0 0 0 .13-.334.44.44 0 0 0-.13-.335.45.45 0 0 0-.335-.13h-1.299v-1.299a.45.45 0 0 0-.13-.335.44.44 0 0 0-.335-.13.46.46 0 0 0-.342.13.47.47 0 0 0-.123.335v1.3H14.06a.45.45 0 0 0-.334.129.44.44 0 0 0-.13.335.44.44 0 0 0 .13.335q.13.13.334.13h1.3v1.299q0 .204.122.335.13.13.342.13Z"})})},826341:(e,t,a)=>{a.d(t,{z:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,s.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},721543:(e,t,a)=>{a.d(t,{K:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,s.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},60836:(e,t,a)=>{a.d(t,{Z:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,s.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},242217:(e,t,a)=>{a.d(t,{S:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("bot",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8zm0-1.594A6.375 6.375 0 011.61 8a6.366 6.366 0 016.38-6.398A6.393 6.393 0 0114.398 8a6.383 6.383 0 01-6.403 6.406zM4.648 8.518c0 .21.17.364.386.364h2.53l-1.346 3.605c-.202.527.355.813.703.395l4.168-5.176a.515.515 0 00.132-.325c0-.209-.17-.356-.379-.356H8.305l1.346-3.613c.201-.518-.356-.812-.704-.395l-4.16 5.184a.484.484 0 00-.14.317z"})})},177194:(e,t,a)=>{a.d(t,{W:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("circleDottedCircle",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.993 16.626a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.728q0-1.449.553-2.727a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25 6.8 6.8 0 0 1 .554 2.727q0 1.45-.553 2.728a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.209a5.55 5.55 0 0 0-.437-2.2 5.66 5.66 0 0 0-3.029-3.029 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 5.552a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.201q0 1.183.438 2.209a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm0-8.162a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.504.404a.5.5 0 0 1-.362-.144.5.5 0 0 1-.144-.369.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.513m1.1 1.1a.49.49 0 0 1-.505-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .505.505.49.49 0 0 1-.505.506Zm.404 1.504a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-.403 1.51a.49.49 0 0 1-.506-.505.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506Zm-1.1 1.095a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506Zm-1.505.403a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-1.51-.403a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506q.219 0 .363.143.15.144.15.363a.48.48 0 0 1-.15.362.5.5 0 0 1-.363.144Zm-1.101-1.094a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506m-.403-1.51a.49.49 0 0 1-.506-.507.49.49 0 0 1 .506-.506.49.49 0 0 1 .505.506.49.49 0 0 1-.505.506Zm.403-1.505a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.1-1.1a.49.49 0 0 1-.505-.513.49.49 0 0 1 .505-.506q.219 0 .363.144.15.143.15.362 0 .225-.15.37a.5.5 0 0 1-.363.143"})})},406998:(e,t,a)=>{a.d(t,{I:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("docOnDoc",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M6.268 5.28V3.61q0-1.107.56-1.674.561-.575 1.661-.575h2.57q.595 0 1.06.171.473.164.855.56l3.404 3.467q.403.417.567.888.165.465.164 1.142v5.414q0 1.107-.567 1.675-.56.567-1.654.567h-1.402v-1.34h1.279q.498 0 .745-.253.252-.26.253-.731v-5.66h-3.008q-.636 0-.964-.322-.328-.328-.328-.963V2.709H8.599q-.492 0-.745.253-.247.253-.247.731V5.28zm6.316.526q0 .177.075.26.083.075.253.075h2.502l-2.83-2.871zm-9.7 10.705V7.118q0-1.107.56-1.675.561-.573 1.661-.574h2.38q.621 0 1.025.137.41.13.82.554l3.705 3.76q.287.293.438.56.15.267.198.595.055.321.055.779v5.257q0 1.107-.561 1.675-.56.567-1.661.567H5.105q-1.1 0-1.66-.567-.561-.56-.561-1.675m1.346-.082q0 .479.247.731.246.253.738.253h6.173q.492 0 .738-.253.253-.253.253-.731V11.41h-3.61q-.725 0-1.086-.355-.363-.363-.363-1.1v-3.74H5.222q-.5 0-.745.253-.247.253-.247.724zm4.676-6.2h3.288L8.503 6.476v3.35q0 .21.096.307.095.096.307.096"})})},318673:(e,t,a)=>{a.d(t,{g:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("edit",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M6.104 16.442q-1.109 0-1.682-.567-.568-.56-.568-1.654V6.38q0-1.101.568-1.661.574-.56 1.682-.56h7.608l-1.34 1.34H6.186q-.48 0-.732.252-.253.246-.253.745v7.608q0 .5.253.746t.732.246h7.8a.75.75 0 0 0 .574-.246q.231-.247.232-.745V7.978l1.347-1.346v7.588q0 1.093-.547 1.654-.54.567-1.525.567H6.104ZM8.68 11.87q-.116.048-.212-.048-.096-.102-.048-.219l.615-1.353 6.235-6.234 1.045 1.032-6.24 6.234zm8.155-7.335L15.79 3.481l.479-.471a.7.7 0 0 1 .444-.205.52.52 0 0 1 .43.15l.178.185a.58.58 0 0 1 .192.444.64.64 0 0 1-.199.458l-.478.492Z"})})},384534:(e,t,a)=>{a.d(t,{L:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("exclamationMarkOctagon",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7.908 16.441a2.7 2.7 0 0 1-.765-.095 1.8 1.8 0 0 1-.581-.28 3.3 3.3 0 0 1-.486-.438l-2.638-2.94a3 3 0 0 1-.363-.485 1.7 1.7 0 0 1-.184-.492 3.5 3.5 0 0 1-.048-.622V8.04q0-.362.048-.622.054-.26.184-.485.13-.226.362-.486l2.64-2.94a3 3 0 0 1 .485-.444q.26-.184.58-.28a2.7 2.7 0 0 1 .766-.095h4.184q.437 0 .759.095.328.096.58.28.26.178.493.445l2.604 2.94q.24.273.376.498.137.22.192.479.06.252.061.615v3.049q0 .362-.055.622a1.6 1.6 0 0 1-.177.492q-.13.225-.37.486l-2.631 2.939a3.7 3.7 0 0 1-.492.437 1.7 1.7 0 0 1-.581.28 2.7 2.7 0 0 1-.76.096zm.328-1.326h3.528q.32 0 .52-.055a.86.86 0 0 0 .355-.17 2.6 2.6 0 0 0 .341-.315l2.359-2.611q.206-.226.266-.417.069-.198.069-.574v-2.81q0-.383-.069-.574a1.2 1.2 0 0 0-.266-.417L12.98 4.56a2.6 2.6 0 0 0-.341-.315.9.9 0 0 0-.356-.178 2 2 0 0 0-.52-.054H8.237q-.322 0-.526.054a1 1 0 0 0-.362.178q-.15.116-.328.315L4.654 7.17q-.197.226-.266.418t-.069.574v2.81q0 .376.069.574.068.19.266.417l2.366 2.611q.177.198.328.315a.9.9 0 0 0 .362.17q.205.055.526.055Zm1.77-4.416q-.593 0-.614-.601l-.096-3.323a.61.61 0 0 1 .184-.492.7.7 0 0 1 .513-.191q.315 0 .52.198.204.192.191.485l-.11 3.323q-.012.6-.587.601Zm0 2.27a.84.84 0 0 1-.573-.212.71.71 0 0 1-.233-.54.69.69 0 0 1 .233-.533.82.82 0 0 1 .574-.22q.328 0 .56.213a.69.69 0 0 1 .24.54.69.69 0 0 1-.24.54.82.82 0 0 1-.56.212Z"})})},443417:(e,t,a)=>{a.d(t,{Y:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("lock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M6.8 16.702q-.779 0-1.182-.424-.403-.417-.403-1.257v-4.847q0-.834.403-1.251t1.183-.417h6.398q.78 0 1.183.417t.403 1.25v4.848q0 .84-.403 1.257-.403.424-1.183.424H6.801Zm.192-1.23h6.016a.42.42 0 0 0 .328-.13q.116-.123.116-.37V10.23q0-.247-.116-.37a.43.43 0 0 0-.328-.123H6.992a.44.44 0 0 0-.328.123q-.116.124-.116.37v4.744q0 .246.116.369a.43.43 0 0 0 .328.13ZM6.466 9.08V6.906q0-1.264.492-2.112.5-.855 1.306-1.285A3.6 3.6 0 0 1 10 3.079q.93 0 1.736.43.807.43 1.3 1.285.498.848.498 2.112V9.08h-1.278V6.783q0-.8-.315-1.346a2.1 2.1 0 0 0-.82-.841A2.26 2.26 0 0 0 10 4.309q-.61 0-1.121.287a2.1 2.1 0 0 0-.82.84q-.308.547-.308 1.347V9.08z"})})},314171:(e,t,a)=>{a.d(t,{Z:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("mail",{viewBox:"0 0 30 30",svg:(0,s.jsx)("path",{d:"M0,4v22h30V4H0z M17.591,16.33C16.137,17.753,15.819,18,15,18s-1.137-0.247-2.555-1.635L2,6h26L17.591,16.33z M2,8.814 l7.17,7.119L2,21.8V8.814z M2.445,24l8.141-6.661L11,17.75c1.438,1.406,2.281,2.25,4,2.25s2.563-0.844,4-2.25l0.414-0.411L27.555,24 H2.445z M28,21.8l-7.17-5.867L28,8.814V21.8z"})})},396820:(e,t,a)=>{a.d(t,{D:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("megaphone",{viewBox:"0 0 64 64",svg:(0,s.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},290106:(e,t,a)=>{a.d(t,{Y:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("newAt",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M2.87 9.906q0-1.641.526-2.987A6.7 6.7 0 0 1 4.9 4.609a6.7 6.7 0 0 1 2.304-1.484q1.334-.526 2.94-.526 1.53 0 2.802.464a6.5 6.5 0 0 1 2.215 1.333 5.9 5.9 0 0 1 1.45 2.072q.512 1.203.512 2.68 0 1.326-.39 2.337-.383 1.005-1.093 1.58-.711.567-1.696.567-.82 0-1.387-.397a1.64 1.64 0 0 1-.677-1.107h-.082a2.44 2.44 0 0 1-.868 1.107q-.574.397-1.354.397-.902 0-1.586-.465-.683-.472-1.073-1.306-.383-.84-.383-1.934 0-1.08.383-1.9.383-.828 1.053-1.286.67-.465 1.551-.465.746 0 1.333.363.588.362.848.984h.089v-.656q0-.321.17-.506.172-.185.486-.185.308 0 .479.185.178.185.178.506v4.388q0 .548.28.848.287.3.806.3.526 0 .903-.41.382-.41.588-1.14.211-.74.212-1.71 0-1.305-.452-2.317a4.8 4.8 0 0 0-1.237-1.716 5.5 5.5 0 0 0-1.839-1.06 6.7 6.7 0 0 0-2.235-.362q-1.334 0-2.427.451a5.4 5.4 0 0 0-1.88 1.265 5.7 5.7 0 0 0-1.217 1.948q-.423 1.128-.423 2.495 0 1.416.444 2.53a5.3 5.3 0 0 0 1.278 1.893q.828.78 1.969 1.183 1.149.41 2.55.41.656 0 1.176-.082.52-.083 1.073-.212l.191-.034q.09-.007.164-.007.232 0 .376.143.15.144.15.356a.6.6 0 0 1-.136.39q-.13.177-.478.287-.459.157-1.183.253-.718.095-1.559.095-1.599 0-2.94-.499a6.7 6.7 0 0 1-2.323-1.442 6.5 6.5 0 0 1-1.525-2.283q-.54-1.34-.54-3.022m6.973 2.489q.574 0 .998-.301a2 2 0 0 0 .656-.862q.24-.56.24-1.319 0-1.114-.513-1.764-.507-.656-1.374-.656-.568 0-.985.3-.41.295-.642.849-.226.546-.226 1.292 0 .759.226 1.312.225.547.635.848.418.3.985.3Z"})})},565766:(e,t,a)=>{a.d(t,{H:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("newExclamationMarkTriangle",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M4.716 16.62q-.595 0-1.032-.26a1.8 1.8 0 0 1-.677-.697 2.04 2.04 0 0 1 .04-1.962L8.34 4.48q.267-.485.718-.731t.943-.246.937.246q.444.24.724.731l5.291 9.222a1.96 1.96 0 0 1 .274.991q0 .534-.24.971a1.8 1.8 0 0 1-.676.697q-.431.26-1.026.26H4.716Zm.123-1.292H15.16q.321 0 .506-.212a.73.73 0 0 0 .185-.492.8.8 0 0 0-.096-.383l-5.168-9.05a.6.6 0 0 0-.26-.247.7.7 0 0 0-.328-.082.74.74 0 0 0-.335.082.57.57 0 0 0-.253.246l-5.175 9.037a1 1 0 0 0-.089.397q0 .28.185.492a.64.64 0 0 0 .506.212Zm5.168-3.438q-.596 0-.615-.602l-.096-3.322a.61.61 0 0 1 .184-.492.7.7 0 0 1 .513-.192q.315 0 .52.198.204.192.191.486l-.11 3.322q-.012.602-.587.602m0 2.27a.84.84 0 0 1-.574-.213.71.71 0 0 1-.233-.54.69.69 0 0 1 .233-.533.82.82 0 0 1 .574-.219q.328 0 .56.212a.69.69 0 0 1 .24.54.69.69 0 0 1-.24.54.82.82 0 0 1-.56.212Z"})})},93287:(e,t,a)=>{a.d(t,{q:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("newSettings",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.31 17.481q-.425 0-.739-.239a1.1 1.1 0 0 1-.403-.65l-.28-1.21-.185-.06-1.046.642q-.355.225-.752.17a1.16 1.16 0 0 1-.69-.348l-.957-.95a1.17 1.17 0 0 1-.356-.697q-.048-.39.178-.745l.656-1.046-.061-.171-1.21-.28a1.13 1.13 0 0 1-.889-1.142V9.408a1.146 1.146 0 0 1 .889-1.141l1.196-.288.068-.184-.656-1.046a1.08 1.08 0 0 1-.177-.738q.047-.39.355-.698l.957-.957q.3-.3.69-.348.39-.055.746.164l1.052.65.192-.076.28-1.21a1.1 1.1 0 0 1 .403-.642 1.16 1.16 0 0 1 .739-.247h1.387a1.135 1.135 0 0 1 1.135.89l.28 1.21.192.074 1.052-.65q.356-.218.746-.163.396.048.69.348l.957.957q.3.309.349.698.055.39-.171.738l-.656 1.046.075.184 1.19.288q.402.095.642.41.246.315.246.731v1.347a1.15 1.15 0 0 1-.889 1.141l-1.203.28-.068.172.656 1.046q.225.355.17.745-.046.39-.348.697l-.957.95q-.3.3-.697.349-.39.055-.745-.171l-1.053-.643-.178.062-.28 1.21a1.115 1.115 0 0 1-1.135.888zm.17-1.237h1.046q.164 0 .185-.157l.41-1.682q.342-.075.636-.198a4.5 4.5 0 0 0 .547-.287l1.47.902q.129.09.252-.027l.725-.732q.11-.095.02-.246l-.902-1.463q.144-.246.267-.546.13-.3.205-.623l1.688-.403q.157-.027.157-.191V9.565q0-.156-.157-.191l-1.681-.403a4 4 0 0 0-.22-.65 5 5 0 0 0-.252-.526l.902-1.47q.096-.144-.02-.26l-.725-.71q-.116-.11-.26-.035l-1.47.896a5 5 0 0 0-.553-.267 4 4 0 0 0-.629-.212l-.41-1.695q-.02-.157-.185-.157H9.48q-.17 0-.198.157l-.396 1.682a4.4 4.4 0 0 0-.65.218q-.315.13-.547.267L6.22 5.32a.2.2 0 0 0-.252.028l-.732.717q-.11.117-.02.26l.902 1.47a9 9 0 0 0-.253.526 3.4 3.4 0 0 0-.212.65l-1.681.403q-.158.035-.158.191v1.026q0 .164.158.191l1.681.397q.083.328.212.629.13.294.267.546l-.91 1.47q-.081.144.021.246l.732.725q.123.116.246.034l1.476-.91q.253.158.554.288.308.123.629.198l.403 1.682q.028.157.198.157Zm.52-3.582a2.53 2.53 0 0 1-1.306-.349 2.75 2.75 0 0 1-.943-.943 2.5 2.5 0 0 1-.349-1.305q0-.712.349-1.3a2.7 2.7 0 0 1 .943-.936A2.54 2.54 0 0 1 10 7.48q.718 0 1.306.35.588.348.936.936a2.5 2.5 0 0 1 .349 1.299q0 .71-.349 1.305a2.6 2.6 0 0 1-.936.944 2.5 2.5 0 0 1-1.306.348m0-1.176q.383 0 .704-.191.321-.198.506-.52.191-.32.191-.71t-.191-.705a1.4 1.4 0 0 0-1.92-.512 1.45 1.45 0 0 0-.514.512q-.19.315-.191.705 0 .396.191.717.192.321.513.513.321.19.711.191"})})},254216:(e,t,a)=>{a.d(t,{o:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("settingsIdentityProvisioning",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.952 17.194a.8.8 0 0 1-.219-.04 1.5 1.5 0 0 1-.26-.103 48 48 0 0 1-2.488-1.45q-1.011-.635-1.633-1.237a3.8 3.8 0 0 1-.896-1.299q-.273-.704-.273-1.64V6.257q0-.609.239-.889.246-.287.752-.499.225-.096.636-.253.41-.157.909-.335.498-.185.991-.362.492-.178.895-.315.411-.143.636-.205.171-.04.356-.075.184-.04.355-.04.179 0 .363.033.19.034.355.082a98 98 0 0 1 1.531.54 63 63 0 0 1 1.9.684q.411.15.636.246.513.218.752.5.24.279.24.888v5.168q0 .936-.274 1.64-.273.697-.895 1.306-.615.602-1.634 1.237-1.012.636-2.489 1.443-.136.068-.266.102a.7.7 0 0 1-.219.041m0-1.442a.5.5 0 0 0 .164-.034q.09-.034.233-.123 1.155-.697 1.941-1.197.793-.505 1.265-.957.479-.45.683-.977.205-.533.205-1.292V6.476a.6.6 0 0 0-.047-.267q-.048-.096-.185-.144a64 64 0 0 1-.718-.253l-.84-.3-.869-.315-.813-.294a33 33 0 0 1-.656-.253 2 2 0 0 0-.206-.061.65.65 0 0 0-.314 0 2 2 0 0 0-.198.061q-.274.11-.657.246-.382.137-.82.288a75 75 0 0 0-1.716.615q-.396.143-.697.266-.144.056-.191.144a.6.6 0 0 0-.048.267v4.696q0 .751.205 1.278t.67.978q.471.444 1.258.95.792.506 1.962 1.217.143.089.232.123t.157.034m-.724-2.632a.7.7 0 0 1-.342-.082 1.2 1.2 0 0 1-.294-.26L6.979 10.81a.74.74 0 0 1-.178-.458.6.6 0 0 1 .17-.431.57.57 0 0 1 .425-.185q.157 0 .28.069.129.06.253.225L9.2 11.644l2.7-4.328q.213-.348.534-.348.24 0 .43.157a.5.5 0 0 1 .192.41.6.6 0 0 1-.055.24q-.047.116-.116.218l-3.056 4.778q-.219.35-.601.35Z"})})},757665:(e,t,a)=>{a.d(t,{K:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("settingsWorkspace",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M11.757 16.94v-1.333h4.812q.178 0 .267-.088.09-.09.089-.267v-7.95q0-.179-.09-.267-.087-.09-.266-.089h-4.327V5.62h4.703q.609 0 .957.383.35.376.349 1.032v8.484q0 .655-.349 1.039-.348.382-.957.382zm2.659-7.417q-.219 0-.219-.225V8.252q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .225-.226.225zm0 2.53q-.219 0-.219-.233v-1.046q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .233-.226.233zm0 2.522q-.219 0-.219-.232v-1.046q0-.226.219-.226h1.08q.226 0 .226.226v1.046q0 .232-.226.232zm-12.674.944V3.624q0-.663.349-1.039.349-.383.964-.383h8.627q.607 0 .957.383.355.376.355 1.039v11.895q0 .655-.355 1.039-.35.382-.957.382H3.055q-.616 0-.964-.382-.35-.384-.349-1.04Zm1.333-.267q0 .177.09.267.087.088.266.088h7.875q.177 0 .266-.088.09-.09.09-.267V3.897q0-.185-.09-.273-.089-.09-.266-.089H3.43q-.179 0-.267.089-.09.09-.089.273v11.355Zm1.853.991v-2.618q0-.437.205-.65.205-.218.622-.218H8.98q.417 0 .623.219.204.21.205.649v2.618h-1.04v-2.27q0-.204-.211-.204h-2.38q-.21 0-.211.205v2.27h-1.04Zm.198-9.755q-.26 0-.26-.273V4.943q0-.273.26-.273h1.306q.273 0 .273.273v1.272q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V4.943q0-.273.267-.273h1.306q.266 0 .266.273v1.272q0 .273-.266.273zM5.126 9.106q-.26 0-.26-.273V7.568q0-.273.26-.273h1.306q.273 0 .273.273v1.265q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V7.568q0-.273.267-.273h1.306q.266 0 .266.273v1.265q0 .273-.266.273zm-3.172 2.625q-.26 0-.26-.28v-1.264q0-.274.26-.274h1.306q.273 0 .273.274v1.264q0 .28-.273.28zm3.172 0q-.267 0-.267-.28v-1.264q0-.274.267-.274h1.306q.266 0 .266.274v1.264q0 .28-.266.28z"})})},811939:(e,t,a)=>{a.d(t,{x:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("sortSidebar",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M5.40625 3.26855C5.57031 3.09082 5.76855 3.00195 6.00098 3.00195C6.2334 3.00195 6.43164 3.09082 6.5957 3.26855L10.041 6.7959C10.2005 6.95996 10.2803 7.15365 10.2803 7.37695C10.2803 7.60938 10.2051 7.80078 10.0547 7.95117C9.90885 8.09701 9.72201 8.16992 9.49414 8.16992C9.26628 8.16992 9.07943 8.09473 8.93359 7.94434L7.53223 6.48828L6.75977 5.58594L6.80078 6.95996V15.3271C6.80078 15.5596 6.72559 15.751 6.5752 15.9014C6.4248 16.0563 6.2334 16.1338 6.00098 16.1338C5.76855 16.1338 5.57487 16.0563 5.41992 15.9014C5.26953 15.751 5.19434 15.5596 5.19434 15.3271V6.95996L5.24902 5.58594L4.46289 6.48828L3.06836 7.94434C2.91797 8.09473 2.73112 8.16992 2.50781 8.16992C2.27539 8.16992 2.08398 8.09701 1.93359 7.95117C1.78776 7.80078 1.71484 7.60938 1.71484 7.37695C1.71484 7.15365 1.79688 6.95996 1.96094 6.7959L5.40625 3.26855ZM14.5938 15.874C14.4251 16.0518 14.2246 16.1383 13.9922 16.1338C13.7643 16.1338 13.5684 16.0472 13.4043 15.874L9.96582 12.3398C9.7972 12.1758 9.71289 11.9821 9.71289 11.7588C9.71289 11.5218 9.78809 11.3304 9.93848 11.1846C10.0889 11.0387 10.2803 10.9658 10.5127 10.9658C10.7314 10.9658 10.916 11.041 11.0664 11.1914L12.4678 12.6406L13.2471 13.5498L13.1924 12.1758V3.80859C13.1924 3.57617 13.2676 3.38477 13.418 3.23438C13.5729 3.07943 13.7666 3.00195 13.999 3.00195C14.2314 3.00195 14.4229 3.07943 14.5732 3.23438C14.7236 3.38477 14.7988 3.57617 14.7988 3.80859V12.1758L14.751 13.5498L15.5371 12.6406L16.9316 11.1914C17.0775 11.041 17.262 10.9658 17.4854 10.9658C17.7178 10.9658 17.9069 11.0387 18.0527 11.1846C18.2031 11.3304 18.2783 11.5218 18.2783 11.7588C18.2783 11.9821 18.1963 12.1758 18.0322 12.3398L14.5938 15.874Z"})})},112955:(e,t,a)=>{a.d(t,{p:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("trashSmall",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},779653:(e,t,a)=>{a.d(t,{K:()=>n});a(667294);var s=a(785893);const n=(0,a(827282).IU)("typesPersonOutline",{viewBox:"0 0 20 20",svg:(0,s.jsx)("g",{children:(0,s.jsx)("path",{d:"M9.303 16.45q-1.743 0-1.743-1.177 0-.696.417-1.463.423-.765 1.21-1.428.793-.663 1.9-1.073 1.107-.417 2.481-.417 1.375 0 2.482.417 1.114.409 1.9 1.073t1.203 1.428q.424.767.424 1.463 0 1.176-1.75 1.176H9.303Zm-.226-1.183h8.976q.123 0 .17-.041.055-.042.055-.137 0-.396-.307-.902-.307-.513-.916-.992-.602-.485-1.484-.8-.874-.32-2.003-.32-1.134 0-2.01.32-.874.315-1.476.8-.601.48-.916.992-.308.506-.308.902 0 .096.048.137.056.04.171.04Zm4.491-5.175a2.73 2.73 0 0 1-1.503-.438 3.2 3.2 0 0 1-1.08-1.169 3.34 3.34 0 0 1-.404-1.627 3.2 3.2 0 0 1 .403-1.592 3.2 3.2 0 0 1 1.08-1.156q.684-.43 1.504-.43.834 0 1.511.424.684.423 1.08 1.141a3.2 3.2 0 0 1 .404 1.6q0 .895-.404 1.634a3.2 3.2 0 0 1-1.087 1.175 2.7 2.7 0 0 1-1.504.438m0-1.19q.486 0 .882-.273t.636-.738q.24-.472.24-1.046 0-.56-.24-1.012a1.9 1.9 0 0 0-.636-.71 1.58 1.58 0 0 0-.882-.26 1.5 1.5 0 0 0-.868.266 1.9 1.9 0 0 0-.635.718q-.24.45-.24 1.011 0 .575.24 1.04.238.464.635.738.405.266.868.266M1.886 16.45q-.732 0-1.1-.307-.37-.308-.37-.923 0-.848.403-1.627.411-.787 1.128-1.395a5.5 5.5 0 0 1 1.668-.957 5.8 5.8 0 0 1 2.03-.355q.534 0 1.06.095.526.089 1.019.274.498.184.936.451a3.2 3.2 0 0 0-.882.861 3.3 3.3 0 0 0-.65-.28 5 5 0 0 0-.724-.178A4.6 4.6 0 0 0 4.1 12.3a4.5 4.5 0 0 0-1.285.691q-.553.43-.875.985-.314.546-.314 1.134 0 .096.041.137.048.04.15.041h4.806q-.035.342.13.67.164.335.444.492zm3.766-6.282q-.717 0-1.312-.383a2.84 2.84 0 0 1-.944-1.025 3 3 0 0 1-.348-1.436A2.83 2.83 0 0 1 4.34 4.917a2.38 2.38 0 0 1 1.312-.383q.718 0 1.306.376.594.376.943 1.005.356.63.356 1.401 0 .78-.356 1.436a2.8 2.8 0 0 1-.943 1.032 2.34 2.34 0 0 1-1.306.383Zm0-1.169q.39 0 .718-.226.328-.225.526-.601a1.8 1.8 0 0 0 .199-.855 1.7 1.7 0 0 0-.199-.82q-.19-.37-.519-.581a1.3 1.3 0 0 0-.725-.212q-.396 0-.724.219a1.6 1.6 0 0 0-.52.58q-.19.37-.191.821 0 .465.191.848.198.383.527.608.328.219.717.219"})})})},191918:(e,t,a)=>{a.d(t,{J:()=>s});let s=function(e){return e.User="user",e.Domains="domains",e}({})},730728:(e,t,a)=>{a.d(t,{a:()=>n,m:()=>s});const s=["private","shared_internally","shared_with_email_domain","shared_externally","shared_to_web"],n=["private","shared_internally","shared_externally","shared_to_web"]},921778:(e,t,a)=>{a.d(t,{B:()=>s,v:()=>n});const s=20,n=25}}]);