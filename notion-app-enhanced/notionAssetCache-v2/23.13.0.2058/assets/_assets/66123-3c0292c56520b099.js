"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66123],{821159:(e,t,o)=>{o.d(t,{Y:()=>p,s:()=>s});o(667294);var n=()=>o(219727),l=()=>o(846550),i=()=>o(707513),r=()=>o(827973),c=()=>o(641506),a=o(785893);function s(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px 4px",alignItems:"center"}}function p(e){let{buttonMenuItemProps:t,title:o,caption:p,icon:d,onClick:m,right:u,isDisabled:f}=e;const S=(0,n().O7)(),g=(0,l().yK)((e=>({menuItem:{display:"flex",...s({environment:S}),opacity:f?.4:void 0},title:{fontSize:S.device.isMobile?16:14,...i().Yu},caption:{fontSize:(0,c().yv)(S,"UISmall"),overflow:"hidden",color:e.mediumTextColor,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[S,f]),I={};return m&&(I.onClick=m),(0,a.jsx)(r().Z,{...t,style:g.menuItem,disabled:f,title:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:g.title,children:o}),p&&(0,a.jsx)("div",{style:g.caption,children:p})]}),icon:d,right:u,...I})}},535645:(e,t,o)=>{o.d(t,{N:()=>b,r:()=>_});o(821057),o(241792),o(667294);var n=()=>o(219727),l=()=>o(142735),i=()=>o(846550),r=()=>o(353329),c=()=>o(226413),a=()=>o(696459),s=()=>o(139224),p=()=>o(269299),d=()=>o(821159),m=()=>o(887430),u=()=>o(594546),f=()=>o(527278),S=()=>o(938938),g=()=>o(122252),I=()=>o(697360),v=()=>o(281236),h=()=>o(382474),w=()=>o(822909),y=()=>o(741119),T=()=>o(792329),x=()=>o(563452),C=()=>o(499819),k=o(785893);function b(e){let{environment:t,template:o,isInSuggestedSection:n,collectionContextStore:l}=e;return{key:o.templateId,action:()=>{if(n)_({environment:t,template:o,collectionContextStore:l,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:n,collectionSettingsStore:i}=(0,w().B)(l);(0,I().zY)({template:o,environment:t,collectionStore:e,collectionViewStore:n,collectionSettingsStore:i,collectionContextStore:l})}},render:e=>(0,k.jsx)(j,{buttonMenuItemProps:e,template:o,isInSuggestedSection:n})}}function _(e){let{environment:t,collectionContextStore:o,template:n,suggestedFeatureAnalytics:l}=e;const i=o.collectionStore();if(!i)throw new Error("collectionStore not found");const c=i.getWorkflowTemplateId();l&&(0,u().j)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:l.origin,selected_index:l.selectedIndex,template_ids_shown:l.shownTemplateIds,template_id_clicked:n.templateId,collection_template_id:c}}});const a=o.settingsStore;if((0,T().isWorkflowTemplateWithConfirmStep)(n))s().H4({collectionSettingsStore:a,item:{type:"confirmAddTemplate",template:n}});else if((0,r().yw)(n)){const{relatedCollectionTemplateId:e}=n;!function(e){var t;let{environment:o,template:n,collectionStore:l,relatedCollectionTemplateId:i}=e;const r=null===(t=l.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!r)throw new Error(`parentStore not found for ${l.id}`);if(!(0,v().isCollectionTemplateParentStore)(r))throw new Error(`Incorrect parent store: ${r.table} ${r.id}`);const c=v().globalWorkflowTemplates.fromIdOfType({templateId:i,type:"collection"});(0,S().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:c,origin:"suggested_feature_template",parentStore:r,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:l,relationPropertyTemplate:n}],aiPrompt:void 0})}({environment:t,template:n,collectionStore:i,relatedCollectionTemplateId:e})}else p().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{g().rU({environment:t,transaction:e,collectionStore:i,template:n,logger:new(v().WorkflowTemplateLogger),origin:"suggested_feature"}),l&&(0,u().j)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:l.origin,template_id_added:n.templateId,collection_template_id:c}}});const r=o.collectionViewStore();r&&I().zY({template:n,environment:t,collectionStore:i,collectionViewStore:r,collectionSettingsStore:a,collectionContextStore:o})}})}function j(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:r}=e;const s=(0,i().yK)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:p}=(0,w().M)(),u=(0,n().O7)(),S=(0,l().VK)((()=>(0,h().w2)({environment:u,collectionStore:p,templateId:o.templateId})),[u,p,o.templateId]),g=(0,l().VK)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:n}=t;switch(n){case"property":const{value:e}=t;if((0,c().t)(e)){const n=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:n}=e;const l=(0,h().ZQ)({collectionStore:n,templateId:t,instancePointerType:"property"});if(!l)return o.options??[];const i=n.getSchema()[l.id];if(!i||!(0,c().t)(i))return[];return i.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,v().getWorkflowTemplateItemsCaption)(n)}return;case"collection_view":return`${f().Z.formatMessage(m().b1[t.value.type])} view`;case"compound":return;default:(0,a().t1)(n)}}({template:o,collectionStore:p})),[o,p]),I=(0,v().getWorkflowTemplateName)(o);return r?(0,k.jsx)(d().Y,{buttonMenuItemProps:t,title:I,icon:(0,k.jsx)(C().$,{template:o}),right:(0,k.jsx)(x().a,{isAdded:S})}):(0,k.jsx)(d().Y,{buttonMenuItemProps:t,title:I,caption:g,icon:(0,k.jsx)("div",{style:s.iconContainer,children:(0,k.jsx)(C().l,{template:o,iconStyle:s.icon})}),right:(0,k.jsx)(y().K,{})})}},741119:(e,t,o)=>{o.d(t,{K:()=>r});o(667294);var n=()=>o(846550),l=()=>o(429600),i=o(785893);function r(){const e=(0,n().yK)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,i.jsx)(i.Fragment,{children:(0,l().o)(e.icon)})}},563452:(e,t,o)=>{o.d(t,{a:()=>c});o(667294);var n=()=>o(846550),l=()=>o(286977),i=()=>o(490670),r=o(785893);function c(e){let{isAdded:t}=e;const o=(0,n().yK)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,r.jsx)("div",{style:o.circle,children:t?(0,l().e)(o.checkIcon):(0,i().f)(o.plusIcon)})}},520186:(e,t,o)=>{o.d(t,{K:()=>d,r:()=>s});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792);var n=()=>o(780741),l=()=>o(353329),i=()=>o(513670),r=()=>o(852465),c=()=>o(281236),a=()=>o(382474);function s(e,t){return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const n of e)o.push(...p(n).filter((e=>!t.has(e))).map((e=>c().globalWorkflowTemplates.fromId(e))).filter(l().iI).filter((e=>!(0,l().yw)(e))));return o}((0,a().Bs)(e,t))}function p(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function d(e){let{persona:t,parentStore:o}=e;const l=t?n().SN[t]:[],a=function(e){let{collectionTemplates:t,parentStore:o}=e;if(!o)return t;if((0,r().Mm)(o))return t;const n=(0,r().Y)(o)?o.getTeamPageStores():o.getContentStores(),l=new Set,i=new Set;for(const r of n){var a;const e=null===(a=r.getCollectionStore())||void 0===a?void 0:a.getWorkflowTemplateId(),t=e&&(0,c().getCollectionTemplateFromId)(e);t&&(l.add(t.templateId),t.category&&i.add(t.category))}const s=[],p=[];for(const r of t)l.has(r.templateId)||r.category&&i.has(r.category)?s.push(r):p.push(r);return[...p,...s]}({collectionTemplates:[...c().globalWorkflowTemplates.allOfType({templateIds:l??[],type:"collection"}),...c().globalWorkflowTemplates.allOfType({templateIds:n().pA,type:"collection"})],parentStore:o});return i().mN(a,(e=>e.templateId))}},822909:(e,t,o)=>{o.d(t,{B:()=>c,M:()=>r});var n=()=>o(142735),l=()=>o(349220),i=()=>o(125659);function r(){const e=(0,i().Y$)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:l}=(0,n().VK)((()=>c(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:l,collectionContextStore:e}}function c(e){return{collectionStore:(0,l().TO)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,l().TO)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}}}]);