"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[58354],{509572:(e,t,o)=>{o.r(t),o.d(t,{FORMS_SHARE_CALLOUT_KEY:()=>Y,changeFormClosedState:()=>de,changeFormSubmissionPermissions:()=>ue,createAndFocusCollectionFormEditorView:()=>ie,createCollectionFormEditorView:()=>ne,createDummyFormPage:()=>pe,createFormInPrivate:()=>ae,createFormQuestion:()=>le,createFormQuestionAndModuleForNewlyDuplicatedProperty:()=>se,createFormQuestionAndUpdateOrCreateModule:()=>ce,createResponsesCollectionView:()=>re,handleUpdateFormQuestionName:()=>ee,incrementAndTrackUserFormsCreated:()=>X,maybeAlertAboutUnsupportedPublicQuestions:()=>ye,maybeSyncQuestionNameToPropertyName:()=>te,remapQuestionToNewProperty:()=>be,toggleAnonymousFormSubmissionState:()=>me,toggleNotionBrandingState:()=>ge});o(821057),o(670560),o(267602),o(653476),o(470928),o(30005),o(667294);var i=()=>o(846550),n=()=>o(506347),a=()=>o(156642),r=()=>o(863112),l=()=>o(226413),s=()=>o(532850),c=()=>o(817629),d=()=>o(998411),u=()=>o(127513),m=()=>o(64272),g=()=>o(644602),b=()=>o(667932),p=()=>o(217465),y=()=>o(375255),v=()=>o(396136),f=()=>o(139978),h=()=>o(26645),k=()=>o(483791),x=()=>o(955620),S=()=>o(788860),T=()=>o(342792),M=()=>o(543172),C=()=>o(707513),A=()=>o(984871),w=()=>o(132156),I=()=>o(308186),_=()=>o(421654),B=()=>o(636340),P=()=>o(47443),Z=()=>o(145284),R=()=>o(269299),N=()=>o(348141),L=()=>o(804057),F=()=>o(427886),V=()=>o(594546),j=()=>o(907005),E=()=>o(561933),q=()=>o(487270),U=()=>o(527278),D=()=>o(803728),H=()=>o(99537),O=()=>o(356117),G=()=>o(876822),K=()=>o(749826),Q=()=>o(808282),z=()=>o(807230),J=()=>o(469753),$=o(785893);const W=(0,S().vU)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),Y="forms_share_form_tooltip";function X(e,t){const{currentUserSettingsStore:o}=G().default.state;if(!o)return;const i=function(){const{currentUserSettingsStore:e}=G().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==i&&(N().d2({userSettingsStore:o,transaction:t,data:{user_forms_created_count:i+1}}),function(e,t){(0,V().j)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:t.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:i+1})),K().default.logEvent("form_created")}function ee(e){var t;const{questionStore:o,newName:i,environment:n,collectionStore:a,collectionSchema:r,collectionContextStore:l}=e,s=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!s)throw new Error("No property ID found for question");R().createAndCommit({userAction:"formQuestion.changeName",environment:n,canUndo:!0,perform:e=>{var t,n;const c=null===(t=o.getConfig())||void 0===t?void 0:t.name;if(!c)return;const u=(0,y().Xh)({textValue:c,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,d().r)(),intl:U().Z.getIntl()})===(null===(n=r[s])||void 0===n?void 0:n.name);R().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","name"],command:"set",args:[[i]]},transaction:e}),o.shouldSyncQuestionNameToPropertyName()&&(u&&!(0,E().Gu)({property:s,collectionContextStore:l,newValue:i})?A().Bv({collectionStore:a,property:s,name:i,transaction:e}):R().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function te(e){var t;const{questionStore:o,environment:i,collectionStore:n,collectionContextStore:a}=e,r=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!r)throw new Error("No property ID found for question");R().createAndCommit({userAction:"formQuestion.changeName",environment:i,canUndo:!0,perform:e=>{if(!o.shouldSyncQuestionNameToPropertyName())return;const t=o.getNameStore().getValue();if(!t)return;const i=(0,y().Xh)({textValue:t,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,d().r)(),intl:U().Z.getIntl()}),l=(0,E().Gu)({property:r,collectionContextStore:a,newValue:i})?(0,c().n)(i):i;A().Bv({collectionStore:n,property:r,name:l,transaction:e})}})}function oe(){const e=(0,i().yK)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:C().Ue.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,$.jsxs)("div",{style:e.container,children:[(0,$.jsxs)("div",{style:e.iconGroup,children:[(0,g().t)({width:24}),(0,u().r)({width:16,marginLeft:16,marginRight:14}),(0,m().E)({width:24})]}),(0,$.jsx)("span",{style:e.dialogTitle,children:(0,$.jsx)(S()._H,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,$.jsx)("span",{style:e.dialogDescription,children:(0,$.jsx)(S()._H,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ie(e){const{environment:t,collectionContextStore:o,transaction:i}=e,n=o.collectionViewBlockStore(),a=o.collectionStore();if(!n||!a)return;const r=o.normalizedSchemaStore.state,l=ne({environment:t,collectionViewBlockStore:n,schema:r,transaction:i,initializeWithAllDefaultQuestions:!1});if(!l)return;(0,F().f)({environment:t,collectionContextStore:o,collectionViewId:l.newViewId,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});const s=l.layoutStore,c=Object.keys(r).filter((e=>{const t=r[e];return"title"!==e&&t&&(0,J().I0)(t)}));c.length>0&&c.length<=J().h0&&I().vC({showCancel:!1,keepFocus:!1,message:(0,$.jsx)(oe,{}),mode:"wide",items:[{label:(0,$.jsx)(S()._H,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:c.length}}),color:"blue",buttonType:"solid",onAccept(){R().createAndCommit({environment:t,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const i of c)se({environment:t,transaction:e,layoutStore:s,collectionStore:a,propertyId:i,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},addLayoutModule:o=>{(0,H().sW)({environment:t,sessionId:(0,T().ZP)(),layoutStore:s,position:o.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},module:o.layoutModule,transaction:e,isPropertyCreation:!1})},collectionContextStore:o,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0})}})}},{label:(0,$.jsx)(S()._H,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function ne(e){const{environment:t,collectionViewBlockStore:o,transaction:i,schema:n,initializeWithAllDefaultQuestions:a}=e;if(!o)return;const s=o.getSpaceId(),{formBlockStore:c,layoutStore:d}=function(e){var t;const{environment:o,spaceId:i,inMemoryRecordCache:n,transaction:a,schema:s,initializeWithAllDefaultQuestions:c}=e,d=Object.keys(s).find((e=>{var t;return"select"===(null===(t=s[e])||void 0===t?void 0:t.type)})),u=Boolean(c&&void 0!==d),m=(0,q().TS)({environment:o,table:v().iU,spaceId:i}),g=(0,q().TS)({environment:o,table:h().L_,spaceId:i}),p=u?(0,q().TS)({environment:o,table:h().L_,spaceId:i}):void 0,y=B().j4({id:m,environment:o,type:"form",permissions:(0,r().wG)(),inMemoryRecordCache:n,transaction:a}),f=B().ae({environment:o,table:k().Bh,value:{space_id:i,parent_table:v().iU,parent_id:y.id,modules:(0,b().l2)(g,p)},inMemoryRecordCache:n,transaction:a});var x;_().FH({stores:[y],update:{form_layout_pointer:{id:f.id,spaceId:i,table:k().Bh}},transaction:a}),le({environment:o,questionId:g,spaceId:i,layoutId:f.id,propertyId:l().iw,initialQuestionTitle:(null===(t=s[l().iw])||void 0===t?void 0:t.name)??"",inMemoryRecordCache:n,transaction:a,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1}),u&&p&&d&&le({environment:o,questionId:p,spaceId:i,layoutId:f.id,propertyId:d,initialQuestionTitle:(null===(x=s[d])||void 0===x?void 0:x.name)??"",inMemoryRecordCache:n,transaction:a,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1});return{formBlockStore:y,layoutStore:f}}({environment:t,spaceId:s,inMemoryRecordCache:o.inMemoryRecordCache,transaction:i,schema:n,initializeWithAllDefaultQuestions:a}),u=(0,L().W)({environment:t,collectionViewBlockStore:o,collectionView:{type:"form_editor",parent_id:o.id,parent_table:v().iU,alive:!0,space_id:s,name:U().Z.formatMessage(W.newFormViewName),format:{form_block_pointer:{id:c.id,spaceId:s,table:v().iU}}},transaction:i});return B().sW({store:c,data:{parent_id:u.id,parent_table:f().np,alive:!0},transaction:i}),Q().Z.setState({openTooltip:u.id}),D().yM(t,Y),X(t,i),{newViewId:u.id,layoutStore:d,formId:c.id}}function ae(e){const{environment:t,navigateToFormBuilder:o}=e,{currentSpaceStore:i,currentSpaceViewStore:a}=G().default.state;if(!i||!a)return;if(!(0,z().ww)(t))return void(0,z().eD)(t);if(!(i&&i.canEdit()&&a))return;const r=i.id,l=t.idCreator.getSpaceIdCreatorSync(r);R().createAndCommit({environment:t,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var s;const{targetBlockStore:c}=w().Z({environment:t,sourceBlockId:"root",targetBlockPointer:(0,q().Ii)({environment:t,table:v().iU,spaceId:r}),sourceBlockSubtree:(0,p().partialRecordMapToRecordMap)(j().Xq({isInline:!0,name:(0,x().TPx)(U().Z.formatMessage(W.formDatabaseTitle))})),targetRecordCache:i.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:l}),d=c.getCollectionStore(),u=null==d||null===(s=d.getModel())||void 0===s?void 0:s.getNormalizedSchema(),m=c;if(!u)throw new Error("Schema not found");ne({environment:t,transaction:e,collectionViewBlockStore:m,schema:u,initializeWithAllDefaultQuestions:!0}),re({environment:t,transaction:e,collectionViewBlockStore:m,schema:u}),Z().Hj({environment:t,spaceStore:i,spaceViewStore:a,pageStore:c,isPrivate:!0,transaction:e,location:{type:"prepend"}}),o&&P()._c({environment:t,store:c,pageVisitSource:n().tY.CreateFormDeepLink})}})}function re(e){const{environment:t,collectionViewBlockStore:o,transaction:i}=e,n=o.getSpaceId(),a=Object.keys(e.schema).find((t=>{var o;return"created_by"===(null===(o=e.schema[t])||void 0===o?void 0:o.type)}));(0,L().W)({environment:t,collectionViewBlockStore:o,collectionView:{type:"table",parent_id:o.id,parent_table:v().iU,alive:!0,name:U().Z.formatMessage(W.responsesViewName),space_id:n,format:{table_properties:[{property:"title",visible:!0},...a?[{property:a,visible:!0}]:[]],table_wrap:!0,collection_pointer:o.getCollectionPointer()}},transaction:i})}function le(e){const{environment:t,questionId:o,spaceId:i,layoutId:n,propertyId:a,initialQuestionTitle:r,inMemoryRecordCache:l,transaction:s,shouldSyncQuestionNameToPropertyName:c,collectionContextStore:d,shouldLogEvent:u=!0,autofocusTitle:m,existingFormQuestionConfig:g,autoCreatedFromExistingDatabase:b}=e;B().ae({environment:t,table:h().L_,value:{id:o,space_id:i,parent_table:k().Bh,parent_id:n,alive:!0,config:{...g,propertyId:a,name:[[r]],shouldSyncQuestionNameToPropertyName:c}},inMemoryRecordCache:l,transaction:s}),u&&(0,V().j)({environment:t,event:{eventName:"add_form_question",eventProperties:{...(0,J().Pz)({collectionContextStore:d,propertyId:a,questionId:o}),auto_created_from_existing_database:Boolean(b)}}}),m&&m.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:o})}function se(e){const{environment:t,transaction:o,layoutStore:i,collectionStore:n,propertyId:a,position:r,addLayoutModule:l,collectionContextStore:s,shouldLogEvent:c=!0,autofocusTitle:d,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:m}=e,g=n.getSchema()[a];if(!g)throw new Error(`No schema found for property ${a}`);const b=u?(0,x().QaF)(null==u?void 0:u.name):g.name,p=i.getSpaceId(),y=(0,q().TS)({environment:t,table:h().L_,spaceId:p});return le({environment:t,questionId:y,spaceId:p,layoutId:i.id,propertyId:a,initialQuestionTitle:b,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:c,collectionContextStore:s,autofocusTitle:d,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:m}),l({layoutModule:{type:"formQuestion",id:(0,M().ZP)(),formQuestionId:y},position:r,transaction:o}),{questionId:y}}function ce(e){const{environment:t,transaction:o,layoutStore:i,propertyId:n,initialQuestionTitle:a,moduleId:r,shouldSyncQuestionNameToPropertyName:l,collectionContextStore:s,autofocusTitle:c,area:d,sessionId:u}=e,m=i.getModel();if(!m)throw new Error("Layout model cannot be undefined");const g=i.getSpaceId(),b=(0,q().TS)({environment:t,table:h().L_,spaceId:g});le({environment:t,questionId:b,spaceId:g,layoutId:m.id,propertyId:n,initialQuestionTitle:a,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:l,collectionContextStore:s,autofocusTitle:c});const p={type:"formQuestion",id:r??(0,M().ZP)(),formQuestionId:b,..."form_conditional_modules"===d?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return r?(0,O().Uq)({environment:t,transaction:o,layoutStore:i,position:{area:d,moduleId:r},updatedModule:p}):"form_conditional_modules"===d&&(0,H().sW)({environment:t,transaction:o,layoutStore:i,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:p,sessionId:u,isPropertyCreation:!1}),{updatedModuleId:p.id}}function de(e){let{environment:t,formBlockStore:o,isClosed:i}=e;o.getIsFormClosed()!==i&&R().createAndCommit({userAction:"formActions.changeFormClosedState",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),is_form_closed:i}},transaction:e})}})}function ue(e){let{environment:t,formBlockStore:o,permissions:i}=e;o.getFormSubmissionPermissions()!==i&&R().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),submission_permissions:i}},transaction:e})}})}function me(e){let{environment:t,formBlockStore:o}=e;const i=o.getIsFormAnonymousSubmissionEnabled();R().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),anonymous_submissions:!i}},transaction:e})}})}function ge(e){var t;let{environment:o,formBlockStore:i}=e;const n=i.getSiteStore();if(!n)return;const a=(null===(t=n.getHeader())||void 0===t?void 0:t.hideWatermark)??!1;R().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:o,canUndo:!0,perform:e=>{R().applyOperation({store:n,operation:{pointer:n.pointer,path:["header","hideWatermark"],command:"set",args:!a},transaction:e})}})}function be(e){let{environment:t,newPropertyId:o,formQuestionStore:i}=e;R().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:t,canUndo:!0,perform:e=>{R().applyOperation({store:i,operation:{pointer:i.pointer,path:["config","propertyId"],command:"set",args:o},transaction:e})}})}function pe(e){const{environment:t,collectionSchema:o,temporaryRecordCache:i,spaceId:n,collectionId:r,formMode:l}=e,s={};Object.keys(o).forEach((e=>{s[e]=(0,x().TPx)("")}));const{performResult:c}=R().createAndCommit({environment:t,userAction:"formActions.createDummyFormPage",perform:e=>{const o=B().j4({environment:t,type:a().Ti.page,inMemoryRecordCache:i,transaction:e,spaceId:n,properties:{...s}});return B().sW({store:o,data:{alive:"viewer"===l,parent_id:r,parent_table:"collection"},transaction:e}),o},canUndo:!1});return c}async function ye(e){const{environment:t,formBlockStore:o,collectionSchema:i,theme:n,onAccept:a}=e;if(!i)return;const r=(0,J().jj)(o),l=(null==r?void 0:r.getFormQuestionsForFormLayout())??[],c=[];if(l.forEach((e=>{const o=e.getPropertyId();if(!o)return;const n=(0,s().Qm)({schema:i,property:o}),a=null==n?void 0:n.type;if(!a)return;(0,J().Hz)({environment:t,propertyType:a,propertySchema:n,isPublicForm:!0})&&c.push(e)})),0===c.length)return void a();const u=c.map(((e,t)=>{const o=(0,y().Xh)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,d().r)(),intl:U().Z.getIntl()}),i=t===c.length-1;return(0,$.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:i?void 0:`1px solid ${n.lightDividerColor}`},children:o},e.id)})),{accept:m}=await I().gt({message:(0,$.jsx)(S()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,$.jsx)("div",{style:{borderRadius:6,border:`1px solid ${n.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:u}),acceptLabel:(0,$.jsx)(S()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});m&&a()}},444579:(e,t,o)=>{o.r(t),o.d(t,{MobileActionBar:()=>H});var i=o(667294),n=()=>o(146947),a=()=>o(629013),r=()=>o(219727),l=()=>o(657320),s=()=>o(142735),c=()=>o(846550),d=()=>o(156642),u=()=>o(374289),m=()=>o(827282),g=o(785893);const b=(0,m().IU)("indentDown",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M24,15l-1.406-1.406L16,20.188V2h-2v18.188l-6.594-6.594L6,15l9,9L24,15z M2,26v2h26v-2H2z"})});const p=(0,m().IU)("moveUp",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M14,5.813V24h2V5.813l6.594,6.594L24,11l-9-9l-9,9l1.406,1.406L14,5.813z M2,26v2h26v-2H2z"})});var y=()=>o(66782),v=()=>o(788860),f=()=>o(707513),h=()=>o(353141),k=()=>o(80072),x=()=>o(207874),S=()=>o(141735),T=()=>o(233936),M=()=>o(814139),C=()=>o(191003),A=()=>o(505462),w=()=>o(236029),I=()=>o(998901),_=()=>o(72041),B=()=>o(302353),P=()=>o(253225),Z=()=>o(121700),R=()=>o(965903),N=()=>o(127519),L=()=>o(154186),F=()=>o(967092),V=()=>o(313358),j=()=>o(161035),E=()=>o(675876),q=()=>o(393322),U=()=>o(284831);const D=42;function H(e){const{stores:t,position:o,currentBlockStore:u}=e,m=(0,r().O7)(),b=(0,l().l)(),p=(0,r().Fy)(),y=p.isMobileNative,P=p.isSmallPhone,H=(0,w().Z)(!0),ae=(0,s().VK)((()=>T().$3(m,u,null==b?void 0:b.publicEditModeStore.state)),[m,u,null==b?void 0:b.publicEditModeStore]),re=(0,s().VK)((()=>m.WindowSizeStore.state),[m]),le=(0,c().yK)((e=>({button:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"},actionButton:{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:o===M().nd.Bottom?e.bottomActionBarShadow:e.shadowMD,backgroundColor:e.keyboardActionBarBackground,paddingLeft:y?re.paddingLeftCSS:0,paddingRight:y?re.paddingRightCSS:0},item:{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:P?8:10,paddingRight:P?8:10,borderRight:`1px solid ${e.regularDividerColor}`,whiteSpace:"nowrap",height:D,flexShrink:0,flexGrow:0,flexBasis:"auto",color:e.regularTextColor,minWidth:P?42:44},minorItem:{width:34,justifyContent:"center"},itemBorderLeft:{borderLeft:`1px solid ${e.regularDividerColor}`},selectionLinkSpan:{borderBottom:`1px solid ${e.linkDecorationColor}`},actionMenu:{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}})),[o,y,re,P]),se=(0,s().VK)((()=>m.device.isMobileBrowser?t.store.state.isOpen:ae.shouldShow),[m,t,ae]),ce=(0,s().VK)((()=>B().default.mobileNativeBottomPadding(m)),[m]),de=(0,s().VK)((()=>T().Tz({environment:m,store:u})),[m,u]),ue=(0,s().VK)((()=>T().oQ(t.ignoreSelectionAreaStore,m.TextSelectionCompositionStore,u,!1)),[t,m,u]),{canTriggerTextActions:me,canTriggerCommentAction:ge,canTriggerBlockActions:be,hasMultiBlockSelection:pe,currentSelection:ye}=(0,s().VK)((()=>{const e=T().eQ(b&&b.publicEditModeStore.state,u),t=u.canComment(),o=!ue&&T().Bo(b&&b.publicEditModeStore.state),i=N().default.state;return{canTriggerTextActions:e,canTriggerCommentAction:t,canTriggerBlockActions:o,hasMultiBlockSelection:"editing"===i.mode&&!(0,C().qS)(i.multiSelection),currentSelection:R().default.state.stores[0]}}),[b,u,ue]),ve=((0,s().VK)((()=>{const e=N().default.state;if("editing"===e.mode){const t=e.multiSelection.end;return{scrollTop:_().Z.state.scrollTop_DEPRECATED,editing:!0,store:t.store.id,selection:t}}return{scrollTop:_().Z.state.scrollTop_DEPRECATED,editing:!1}}),[]),(0,a().y)((()=>h().FG(m)),500)),fe=(0,i.useRef)(null),he=(0,i.useRef)(void 0),ke=(0,i.useRef)(!1);(0,i.useLayoutEffect)((()=>{if(y)ae.shouldShow!==ke.current&&(ke.current=ae.shouldShow,fe.current&&(fe.current.scrollLeft=0));else{const e=t.store.state.isOpen;ae.shouldShow?e?void 0!==he.current&&(window.clearTimeout(he.current),he.current=void 0):(t.store.setState({...t.store.state,isOpen:!0}),fe.current&&(fe.current.scrollLeft=0)):e&&void 0===he.current&&(he.current=window.setTimeout((()=>{he.current=void 0,t.store.setState({...t.store.state,isOpen:!1})}),200))}}),[m,y,ae.shouldShow,t.store]);const xe=()=>{let e=!1,o=!1;const i=u.getType();if(i){const t=u.getFormat();(0,d()._T)(i,t)||(e=!0),(0,d().lQ)(i)||(o=!0)}return Z().Z.state.isOpen&&(e=!1),(0,g.jsxs)("div",{ref:fe,style:le.actionMenu,onScroll:ve,children:[(0,g.jsxs)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...le.item,...!P&&{paddingLeft:12,paddingRight:12}},onClick:()=>{t.store.setState({...t.store.state,isInsertOpen:!0}),ne("insert",m)},disabled:!be,children:[J,(0,g.jsx)(G,{})]}),(0,g.jsxs)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...le.item,fontWeight:f().Ue.medium},onClick:e=>{t.store.setState({...t.store.state,isTurnIntoOpen:!0}),ne("turn_into",m)},disabled:!be,children:[(0,g.jsx)(v()._H,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),(0,g.jsx)(G,{})]}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,...H,style:le.item,onClick:()=>T().Z3(m),disabled:!o,children:(0,g.jsx)("span",{style:{fontSize:19,lineHeight:1,fontWeight:f().Ue.medium,marginBottom:m.device.isAndroid?4:0},children:"@"})}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.item,onClick:async()=>{const e=await S().F.formulas.load();T().ol(m,"mobile_action_bar",e)},disabled:!e,children:$}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.item,onClick:()=>T().vs(m),disabled:!be,children:W}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.item,onClick:()=>T().fn(m),disabled:!be,children:Y}),(0,g.jsxs)("div",{style:{...le.item,paddingLeft:6,paddingRight:6},children:[(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.minorItem,disabled:!be||!k().gq(ye),onClick:()=>T().$$(m),children:K}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.minorItem,disabled:!k().nt(ye),onClick:()=>T().O2(m),children:Q}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.minorItem,disabled:!be,onClick:()=>T().s0(m),children:X}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.minorItem,disabled:!be,onClick:()=>T().rZ(m),children:ee})]}),(0,g.jsxs)("div",{style:{...le.item,paddingLeft:6,paddingRight:6},children:[(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.minorItem,disabled:!x().L0(),onClick:()=>T().i2(m),children:te}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.minorItem,disabled:!x().AZ(),onClick:()=>T().GH(m),children:oe})]}),(0,g.jsxs)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...le.item,fontWeight:f().Ue.medium},onClick:e=>{t.store.setState({...t.store.state,isColorOpen:!0}),ne("color",m)},disabled:!be,children:[(0,g.jsx)(v()._H,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),(0,g.jsx)(G,{})]}),(0,g.jsxs)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...le.item,fontWeight:f().Ue.medium},onClick:()=>T().w1(m),disabled:!be,children:[(0,g.jsx)(v()._H,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),(0,g.jsx)(G,{})]})]})},Se=()=>(0,g.jsxs)("div",{style:le.actionButton,children:[de?(0,g.jsx)(O,{itemStyle:le.item,actionMenuStyle:le.actionMenu}):ue?(0,g.jsxs)("div",{style:le.actionMenu,onScroll:ve,children:[ge&&!Z().Z.state.isOpen&&(0,g.jsx)(j().Z,{style:le.item,blockStore:ye,iconOnly:!1}),(0,g.jsx)(E().Z,{type:"b",style:le.item,onClick:()=>ne("bold",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontWeight:f().Ue.semibold},children:(0,g.jsx)(v()._H,{defaultMessage:"B",id:"mobileActionBar.bold.symbol"})})}),(0,g.jsx)(E().Z,{type:"i",style:le.item,onClick:()=>ne("italic",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontStyle:"italic",fontWeight:f().Ue.semibold},children:(0,g.jsx)(v()._H,{defaultMessage:"i",id:"mobileActionBar.italic.symbol"})})}),(0,g.jsx)(E().Z,{type:"_",style:le.item,onClick:()=>ne("underline",m),disabled:!me,children:(0,g.jsx)("span",{style:{textDecoration:"underline"},children:(0,g.jsx)(v()._H,{defaultMessage:"U",id:"mobileActionBar.underline.symbol"})})}),(0,g.jsx)(E().Z,{type:"s",style:le.item,onClick:()=>ne("strike_through",m),disabled:!me,children:(0,g.jsx)("span",{style:{textDecoration:"line-through"},children:(0,g.jsx)(v()._H,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol"})})}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.button,disabled:!k().gq(ye),onClick:()=>T().$$(m),children:K}),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:le.button,disabled:!k().nt(ye),onClick:()=>T().O2(m),children:Q}),(0,g.jsx)(E().Z,{type:"c",style:le.item,onClick:()=>ne("code",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontFamily:f().F5(n().locale).githubMono},children:(0,g.jsx)(v()._H,{defaultMessage:"Code",id:"mobileActionBar.code.symbol"})})}),(0,g.jsx)(U().Z,{style:le.item,disabled:!me||pe,children:(0,g.jsx)("span",{style:le.selectionLinkSpan,children:(0,g.jsx)(v()._H,{defaultMessage:"Link",id:"mobileActionBar.link.symbol"})})}),(0,g.jsx)(q().Z,{onClick:()=>ne("equation",m),disabled:!me||pe,style:le.item,children:z}),(0,g.jsx)(V().Z,{style:le.item,disabled:!me})]}):xe(),(0,g.jsx)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...le.item,...le.itemBorderLeft,borderRight:"none"},onClick:()=>T().QO(t,m),children:ie})]});if(o===M().nd.Bottom)return(0,g.jsx)("div",{style:{position:"absolute",bottom:ce,left:0,height:D,width:"100%",pointerEvents:se?"auto":"none",opacity:se?1:0,transform:se?"translateY(0)":`translateY(${D}px)`,transition:"opacity 120ms ease-out, transform 120ms ease-out"},children:Se()});{const e=A().getSelectionRect();if(!e)return null;const t=document.body.getBoundingClientRect(),o={...e,left:10,top:e.top+10-t.top};return(0,g.jsx)(F().ZP,{popupType:y?F().kQ.SlideUp:F().kQ.Popup,open:se,preventBlockRenderQueueOnEnter:!0,placementToOrigin:I().Placement.Bottom,alignmentToOrigin:I().Alignment.Start,originRect:o,disableMouseCapture:!0,keepFocus:!0,render:()=>(0,g.jsx)("div",{style:{height:D,borderRadius:4,overflow:"hidden"},children:Se()})})}}function O(e){let{itemStyle:t,actionMenuStyle:o}=e;const i=(0,r().O7)();return(0,g.jsx)("div",{style:o,children:(0,g.jsxs)(L().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...t,borderRight:"none",fontWeight:f().Ue.medium},onClick:e=>{P().Z.setState({open:!0}),ne("templates",i)},children:[(0,y().i)({width:20,marginRight:8}),(0,g.jsx)(v()._H,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),(0,g.jsx)(G,{})]})})}function G(){const e=(0,c().yK)((e=>({chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,u().i)(e.chevron)}const K=b({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1}),Q=b({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1}),z=(0,o(823715).G)({width:16,height:16}),J=(0,o(760910).C)({width:14,height:14}),$=(0,o(698763).s)({width:18,height:18}),W=(0,o(512596).y)({width:18,height:18}),Y=(0,o(95886).y)({width:18,height:18}),X=p({width:18,height:18,position:"relative",left:2}),ee=p({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2}),te=(0,o(366825).s)({width:19,height:19}),oe=(0,o(228035).N)({width:19,height:19}),ie=(0,o(697956).z)({width:18,height:18});function ne(e,t){h().YO(t,{itemName:e})}},166350:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(846550),l=()=>o(788860),s=()=>o(159357),c=()=>o(808828),d=()=>o(790082),u=()=>o(241516),m=()=>o(352230),g=()=>o(233936),b=()=>o(10271),p=()=>o(258017),y=()=>o(104088),v=()=>o(263184);class f extends v().default{getInitialState(){return{}}}const h=f;class k extends v().default{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}const x=k;var S=()=>o(253225),T=()=>o(965903),M=()=>o(149809),C=()=>o(198829),A=()=>o(470386),w=()=>o(967092),I=()=>o(293660),_=()=>o(45290),B=o(785893);const P=function(e){let{currentBlockStore:t,makeActionBarComponent:r,isNativeMobileActionBar:l}=e;const s=(0,n().O7)(),c=(0,o(657320).l)(),d=(0,a().qz)(void 0,o(692304).Z),u=(0,a().qz)(void 0,h),m=(0,a().qz)(void 0,x),p=(0,a().VK)((()=>g().$3(s,t,null==c?void 0:c.publicEditModeStore.state)),[s,t,c]),{shouldShow:y}=p,{device:v,WindowSizeStore:f}=s,k=(0,a().VK)((()=>function(e,t,o){const{device:i}=e;return i.isMobileBrowser?t.state.isOpen:o}(s,m,y)),[s,m,y]),S=(0,a().VK)((()=>f.state.paddingBottomCSS),[f]),T=(0,o(236029).Z)(!0),M=s.NativeMobileActionBarStore,C=(0,a().VK)((()=>g().c7(s)),[s]),A=(0,a().VK)((()=>"editing"!==o(127519).default.state.mode&&!(null==M||!M.state.shouldRestoreSelectionForMenu)),[M]);return(0,b().Z)({shouldPreserveTextSelection:C,shouldPreserveBlockSelection:!1,shouldRestoreSelection:A}),(0,B.jsxs)(i.Fragment,{children:[(0,B.jsxs)("div",{...T,style:{position:"relative",width:"100%",height:0,zIndex:o(492522).Eo},children:[r({store:m,ignoreSelectionAreaStore:u,templatePickerMenuListStore:d}),!l&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(R,{store:m}),(0,B.jsx)(N,{store:m}),(0,B.jsx)(L,{store:m})]}),(0,B.jsx)(F,{})]}),!k&&v.isIPhoneX&&v.isNative&&(0,B.jsx)("div",{style:{position:"absolute",bottom:0,background:"transparent",height:S,width:"100%",pointerEvents:"none",WebkitUserSelect:"none"}})]})};function Z(e){e.setState({...e.state,isInsertOpen:!1})}function R(e){let{store:t}=e;const o=(0,n().O7)(),r=(0,i.useCallback)((()=>Z(t)),[t]),{device:s}=o,d=(0,a().VK)((()=>t.state.isInsertOpen),[t]),u=(0,i.useMemo)((()=>(0,c().PU)(o)),[o]),{insertActions:g}=(0,a().Kw)(u);return(0,B.jsx)(w().ZP,{popupType:s.isMobile?y().k.SlideUp:y().k.Popup,preventBlockRenderQueueOnEnter:!0,open:d,keepFocus:!0,onDismiss:()=>{Z(t)},render:()=>(0,B.jsx)(C().Z,{menuType:m().o.Modal,title:(0,B.jsx)(l()._H,{defaultMessage:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:(0,B.jsx)(A().CancelMenuText,{}),onClickRight:()=>{Z(t)},children:(0,B.jsx)(M().Z,{sections:g,context:{environment:o,blocks:T().default.state.stores,publicEditMode:void 0},onAccept:r})})})}function N(e){let{store:t}=e;const o=(0,n().O7)(),r=(0,i.useCallback)((()=>function(e){e.setState({...e.state,isTurnIntoOpen:!1})}(t)),[t]),s=(0,a().VK)((()=>t.state.isTurnIntoOpen),[t]);(0,b().Z)({shouldPreserveTextSelection:s,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const{device:c}=o;return(0,B.jsx)(w().ZP,{popupType:c.isMobile?y().k.SlideUp:y().k.Popup,open:s,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,B.jsx)(C().Z,{menuType:m().o.Modal,title:(0,B.jsx)(l()._H,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:(0,B.jsx)(A().CancelMenuText,{}),onClickRight:r,children:(0,B.jsx)(M().Z,{sections:[{...d().gH,title:""}],context:{environment:o,blocks:T().default.state.stores,publicEditMode:void 0},onAccept:r})})})}function L(e){let{store:t}=e;const o=(0,n().O7)(),r=(0,i.useCallback)((()=>function(e){e.setState({...e.state,isColorOpen:!1})}(t)),[t]),{device:c}=o,d=(0,a().VK)((()=>t.state.isColorOpen),[t]);return(0,b().Z)({shouldPreserveTextSelection:d,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0}),(0,B.jsx)(w().ZP,{popupType:c.isMobile?y().k.SlideUp:y().k.Popup,open:d,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,B.jsx)(C().Z,{menuType:m().o.Modal,title:(0,B.jsx)(l()._H,{defaultMessage:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:(0,B.jsx)(A().CancelMenuText,{}),onClickRight:r,children:(0,B.jsx)(M().Z,{sections:[s().te,s().rz,s().Vm],context:{environment:o,blocks:T().default.state.stores,publicEditMode:void 0},onAccept:r})})})}function F(){const e=(0,n().O7)(),t=(0,r().yK)((e=>({popupStyles:{background:e.contentBackground}})),[]),o=(0,i.useCallback)((()=>function(e,t){const o=S().Z.state.isFromNativeHome;S().Z.setState({open:!1}),t.shouldCancel&&o&&(0,_().handleCancelQuickAdd)(e,{isMobileHorizon1QuickCapture:!1})}(e,{shouldCancel:!0})),[e]),{isTemplatesOpen:s}=(0,a().VK)((()=>({isTemplatesOpen:S().Z.state.open})),[]),{device:c}=e;return(0,B.jsx)(w().ZP,{popupType:c.isMobile?y().k.SlideUp:y().k.Popup,open:s,onDismiss:o,keepFocus:!0,style:t.popupStyles,render:()=>(0,B.jsx)(C().Z,{menuType:m().o.Modal,whiteBackground:!0,disableHeaderShadow:s,hideMobileTopbar:s,title:(0,B.jsx)(l()._H,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,B.jsx)(I().CloseTemplatesPopupComponent,{handleClick:o,style:{marginRight:20}}),disableScroller:!0,onClickRight:o,shouldRenderRightDirectly:!0,onCancel:o,forceFullScreenSlideUp:!0,children:(0,B.jsx)(p().Z,{onTemplateItemSelect:t=>{u().openWithItem({environment:e,item:t,createNewPage:!1,isPrivate:!1,disablePointerEvents:!0})},onClose:o})})})}},320662:(e,t,o)=>{o.r(t),o.d(t,{NativeMobileActionBar:()=>qe});o(267602),o(916054),o(749411),o(30005),o(241792),o(228244);var i=o(667294),n=()=>o(488858),a=()=>o(219727),r=()=>o(70186),l=()=>o(657320),s=()=>o(142735),c=()=>o(156642),d=()=>o(956057),u=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(653476),o(470928),()=>o(568017)),m=()=>o(696459),g=()=>o(714230),b=(o(731107),()=>o(957042)),p=()=>o(124199);function y(e,t,o){const{content:i,apiRequestValue:n}=o;return{id:e,content:i,action:{type:t,apiRequestValue:n}}}function v(e,t,o,i,n){return y(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:i},apiRequestValue:{menuType:o,actionId:e,context:void 0}})}function f(e,t,o,i,n){return y(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:i},apiRequestValue:{menuType:o,actionId:e,context:void 0}})}const h=["insertBlock","turnInto","textColor","textSelectionColor"];const k=["suggested","textFormatting","slashMenu","turnInto","textColor","textSelectionColor","more"];function x(e,t){return{type:e,apiRequestValue:t}}function S(e,t){const o={from:t,data:e};return JSON.stringify(o)}const T=p().object({required:{data:p().object({required:{action:p().literals("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more","ai","voiceInput","filing","templates","todoListTemplate","weeklyPlanTemplate","copyLinkToBlock")},optional:{}})},optional:{from:p().literals("mobile_action_bar","mobile_text_formatting_menu")}});let M=function(e){return e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData",e}({});class C{constructor(e,t){this.type=e,this.message=t}}function A(e){return 0===e.reduce(((e,t)=>e+t.items.length),0)}const w=y("mab.button.back","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.backward.2",localImageIdentifier:"back"},accessibilityText:""},apiRequestValue:{subMenuType:void 0,context:void 0}});y("mab.button.noResults","nativeAction_setSubMenuType",{content:{type:"text_and_icon",imageReference:{},accessibilityText:"",text:"No results",fullWidth:!0,disabled:!0},apiRequestValue:{subMenuType:void 0,context:void 0}});function I(e,t,o,i){return y("mab.button.indent","webAction_generic",{content:{type:"icon",imageReference:i,disabled:e||t,accessibilityText:o},apiRequestValue:{jsonPayload:S({action:"indent"}),context:void 0}})}function _(e,t,o,i){return y("mab.button.unindent","webAction_generic",{content:{type:"icon",imageReference:i,accessibilityText:o,disabled:e||t},apiRequestValue:{jsonPayload:S({action:"unindent"}),context:void 0}})}function B(e,t,o){return y("mab.button.moveUp","webAction_generic",{content:{type:"icon",imageReference:o,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:S({action:"moveUp"}),context:void 0}})}function P(e,t,o){return y("mab.button.moveDown","webAction_generic",{content:{type:"icon",imageReference:o,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:S({action:"moveDown"}),context:void 0}})}function Z(e){const{createAIAction:t,createDictationAction:o,disableDictationActions:i,disableTextActions:n,disableAIAction:a,disableBlockActions:r,disableCommentAction:l,disableMentionAction:s,disableInsertBlockAction:c,disableTurnIntoAction:d,disableTextFormatting:m,disableTextColorAction:b,disableDeleteBlock:p,disableUndo:h,disableRedo:k,disableIndent:x,disableUnindent:T,disableLinkAction:M,disableCopyLinkToBlock:C,disableEquationAction:A,isEditingTitle:w,selectedMenuType:Z,isPersonalizedActionsEnabled:R,shouldShowTextActions:N,usePillStyling:L,textSelectionColor:F,textFormattingSelections:j,titleTexts:q,accessibilityTexts:U,theme:D}=e,H=N?"textSelectionColor":"textColor",O=function(e){const{usePillStyling:t,titleTexts:o}=e,i=t?"pill":"filled";return{todoListTemplate:y("mab.button.template.todolist","webAction_generic",{content:{type:"text_and_icon",text:o.todoListTemplate,style:i,imageReference:{sfProGlyphName:"checkmark.square",localImageIdentifier:"checkbox"}},apiRequestValue:{jsonPayload:S({action:"todoListTemplate"}),context:void 0}}),weeklyPlanTemplate:y("mab.button.template.weeklyPlan","webAction_generic",{content:{type:"text_and_icon",text:o.weeklyPlanTemplate,style:i,imageReference:{sfProGlyphName:"calendar",localImageIdentifier:"calendar"}},apiRequestValue:{jsonPayload:S({action:"weeklyPlanTemplate"}),context:void 0}}),templates:y("mab.buttonSection.template","webAction_generic",{content:{type:"text_and_icon",text:t?o.moreTemplates:o.template,style:i,imageReference:{sfProGlyphName:t?"ellipsis":void 0,localImageIdentifier:t?"ellipsis":"template"}},apiRequestValue:{jsonPayload:S({action:"templates"}),context:void 0}})}}({usePillStyling:L,titleTexts:q});return{ai:t?y("mab.button.ai","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.aiFaceSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{localImageIdentifier:"ai"},disabled:a,accessibilityText:U.ai},apiRequestValue:{jsonPayload:S({action:"ai"}),context:void 0}}):void 0,speech:o?y("mab.button.speech","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.micSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"mic.fill",localImageIdentifier:"micFilled"},style:L?"pill":void 0,accessibilityText:U.ai,disabled:i},apiRequestValue:{jsonPayload:S({action:"voiceInput"}),context:void 0}}):void 0,insert:y("mab.button.insert","nativeAction_setMenuType",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.plusSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"plus",localImageIdentifier:"insertBlock"},accessibilityText:U.insert,disabled:r||c,selected:"insertBlock"===Z},apiRequestValue:{menuType:"insertBlock",context:void 0}}),turnInto:y("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.turnIntoSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:r||d,selected:"turnInto"===Z,accessibilityText:U.turnInto},apiRequestValue:{menuType:"turnInto",context:void 0}}),filePicker:y("mab.button.filePicker","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.photoMultipleSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"photo.on.rectangle.angled",localImageIdentifier:"filePicker"},style:L?"pill":void 0,disabled:!w&&r,accessibilityText:U.filePicker},apiRequestValue:{jsonPayload:S({action:"filePicker"}),context:void 0}}),mention:y("mab.button.mention","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.mentionSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"at",localImageIdentifier:"mention"},disabled:s,accessibilityText:U.mention},apiRequestValue:{jsonPayload:S({action:"mention"}),context:void 0}}),comment:y("mab.button.comment","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.commentSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"text.bubble",localImageIdentifier:"comment"},disabled:l,accessibilityText:U.comment},apiRequestValue:{jsonPayload:S({action:"comment"},"mobile_action_bar"),context:void 0}}),biu:y("bold.italic.underline","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.textFormattingSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"textformat",localImageIdentifier:"textFormat"},disabled:m,accessibilityText:U.textFormatting},apiRequestValue:{subMenuType:"textFormatting",context:void 0}}),delete:y("mab.button.delete","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.trashSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"trash",localImageIdentifier:"trash"},disabled:p,accessibilityText:U.trash},apiRequestValue:{jsonPayload:S({action:"trash"}),context:void 0}}),undo:y("mab.button.undo","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.undoSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"arrow.uturn.backward",localImageIdentifier:"undo"},disabled:h,accessibilityText:U.undo},apiRequestValue:{jsonPayload:S({action:"undo"}),context:void 0}}),redo:y("mab.button.redo","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.redoSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"arrow.uturn.forward",localImageIdentifier:"redo"},disabled:k,accessibilityText:U.redo},apiRequestValue:{jsonPayload:S({action:"redo"}),context:void 0}}),more:y("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.moreSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"ellipsis",localImageIdentifier:"ellipsis"},accessibilityText:U.more,disabled:r},apiRequestValue:{jsonPayload:S({action:"more"}),context:void 0}}),indent:I(r,x,U.indent,R?{imageUrl:g().Z.images.mab.actions.indentSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"}),unindent:_(r,T,U.unindent,R?{imageUrl:g().Z.images.mab.actions.outdentSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"}),moveUp:B(r,U.moveUp,R?{imageUrl:g().Z.images.mab.actions.moveUpSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"}),moveDown:P(r,U.moveDown,R?{imageUrl:g().Z.images.mab.actions.moveDownSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"}),indentPrioritized:V(I(r,x,U.indent,R?{imageUrl:g().Z.images.mab.actions.indentSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"})),unindentPioritized:V(_(r,T,U.unindent,R?{imageUrl:g().Z.images.mab.actions.outdentSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"})),moveUpPrioritized:V(B(r,U.moveUp,R?{imageUrl:g().Z.images.mab.actions.moveUpSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"})),moveDownPrioritized:V(P(r,U.moveDown,R?{imageUrl:g().Z.images.mab.actions.moveDownSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"})),color:R?n||b?void 0:y("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.actions.textColorSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},selected:Z===H,accessibilityText:U.textColor},apiRequestValue:{menuType:H,context:void 0}}):y("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:E(F,D),disabled:n||b,selected:Z===H,accessibilityText:U.textColor},apiRequestValue:{menuType:H,context:void 0}}),bold:y("mab.button.bold","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.boldSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"bold",localImageIdentifier:"bold"},accessibilityText:U.bold,disabled:n,selected:j.bold},apiRequestValue:{jsonPayload:S({action:"bold"}),context:void 0}}),italic:y("mab.button.italic","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.italicSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"italic",localImageIdentifier:"italic"},disabled:n,selected:j.italic,accessibilityText:U.italics},apiRequestValue:{jsonPayload:S({action:"italic"}),context:void 0}}),underline:y("mab.button.underline","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.underlineSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"underline",localImageIdentifier:"underline"},disabled:n,selected:j.underline,accessibilityText:U.underline},apiRequestValue:{jsonPayload:S({action:"underline"}),context:void 0}}),strikethrough:y("mab.button.strikethrough","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.strikethroughSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"strikethrough",localImageIdentifier:"strikethrough"},disabled:n,selected:j.strikethrough,accessibilityText:U.strikethrough},apiRequestValue:{jsonPayload:S({action:"strikethrough"}),context:void 0}}),linkToPage:y("insert link_to_page-Link to page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.linkToPageSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:"Link",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert link_to_page-Link to page",context:void 0}}),link:y("mab.button.link","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.linkAddSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"link.badge.plus",localImageIdentifier:"link"},accessibilityText:U.link,disabled:n||M,selected:j.link},apiRequestValue:{jsonPayload:S({action:"link"}),context:void 0}}),copyLinkToBlock:R?y("mab.button.copyLinkToBlock","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.linkSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"link",localImageIdentifier:"link"},accessibilityText:U.copyLinkToBlock,disabled:C},apiRequestValue:{jsonPayload:S({action:"copyLinkToBlock"}),context:void 0}}):void 0,code:y("mab.button.code","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.blocks.codeSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"chevron.left.slash.chevron.right",localImageIdentifier:"code"},accessibilityText:U.code,disabled:n,selected:j.code},apiRequestValue:{jsonPayload:S({action:"code"}),context:void 0}}),equation:y("mab.button.equation","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.blocks.inlineEquationSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"x.squareroot",localImageIdentifier:"equation"},accessibilityText:U.equation,disabled:n||A,selected:j.equation},apiRequestValue:{jsonPayload:S({action:"equation"}),context:void 0}}),filing:y("mab.button.filing","webAction_generic",{content:q.filing?{type:"text_and_icon",text:q.filing,style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:U.filing}:{type:"icon",style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:U.filing},apiRequestValue:{jsonPayload:S({action:"filing"}),context:void 0}}),text:R?y("insert text-Text","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.textSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:"Text",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert text-Text",context:void 0}}):void 0,encryptedText:R?y("insert encrypted_text-Encrypted Text","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.encryptedTextSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:"Encrypted Text",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert encrypted_text-Encrypted Text",context:void 0}}):void 0,page:R?y("insert page-Page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.pageSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:"Page",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert page-Page",context:void 0}}):void 0,divider:y("insert divider-Divider","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.dividerSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:"Divider",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert divider-Divider",context:void 0}}),table:y("insert table-Table","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.simpleTableSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:"Table",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert table-Table",context:void 0}}),toDoList:R?y("insert to_do-To-do list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.toDoSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.todoList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert to_do-To-do list",context:void 0}}):void 0,h1:R?y("insert header-Heading 1","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.headerH1Svg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.h1,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert header-Heading 1",context:void 0}}):void 0,h2:R?y("insert sub_header-Heading 2","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.headerH2Svg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.h2,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_header-Heading 2",context:void 0}}):void 0,h3:R?y("insert sub_sub_header-Heading 3","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.headerH3Svg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.h3,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_sub_header-Heading 3",context:void 0}}):void 0,bulletedList:R?y("insert bulleted_list-Bulleted list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.bulletedListSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.bulletedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert bulleted_list-Bulleted list",context:void 0}}):void 0,numberedList:R?y("insert numbered_list-Numbered list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.numberedListSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.numberedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert numbered_list-Numbered list",context:void 0}}):void 0,toggleList:R?y("insert toggle-Toggle list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.toggleListSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.toggleList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert toggle-Toggle list",context:void 0}}):void 0,quote:R?y("insert quote-Quote","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.quoteSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.quote,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert quote-Quote",context:void 0}}):void 0,callout:R?y("insert callout-Callout","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.calloutSvg,imageTintColor:(0,u().J1)(D.icon.secondary)},accessibilityText:U.callout,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert callout-Callout",context:void 0}}):void 0,backgroundColorDefault:R&&"default_background"!==j.backgroundHighlight?f("action color default_background-Default background","dark"===D.mode?g().Z.images.mab.textBackground.dark.defaultSvg:g().Z.images.mab.textBackground.light.defaultSvg,H,!1,"Default"):void 0,backgroundColorGray:R?f("action color gray_background-Gray background","dark"===D.mode?g().Z.images.mab.textBackground.dark.graySvg:g().Z.images.mab.textBackground.light.graySvg,H,"gray_background"===j.backgroundHighlight,"Gray"):void 0,backgroundColorBrown:R?f("action color brown_background-Brown background","dark"===D.mode?g().Z.images.mab.textBackground.dark.brownSvg:g().Z.images.mab.textBackground.light.brownSvg,H,"brown_background"===j.backgroundHighlight,"Brown"):void 0,backgroundColorOrange:R?f("action color orange_background-Orange background","dark"===D.mode?g().Z.images.mab.textBackground.dark.orangeSvg:g().Z.images.mab.textBackground.light.orangeSvg,H,"orange_background"===j.backgroundHighlight,"Orange"):void 0,backgroundColorYellow:R?f("action color yellow_background-Yellow background","dark"===D.mode?g().Z.images.mab.textBackground.dark.yellowSvg:g().Z.images.mab.textBackground.light.yellowSvg,H,"yellow_background"===j.backgroundHighlight,"Yellow"):void 0,backgroundColorTeal:R?f("action color teal_background-Green background","dark"===D.mode?g().Z.images.mab.textBackground.dark.greenSvg:g().Z.images.mab.textBackground.light.greenSvg,H,"teal_background"===j.backgroundHighlight,"Green"):void 0,backgroundColorBlue:R?f("action color blue_background-Blue background","dark"===D.mode?g().Z.images.mab.textBackground.dark.blueSvg:g().Z.images.mab.textBackground.light.blueSvg,H,"blue_background"===j.backgroundHighlight,"Blue"):void 0,backgroundColorPurple:R?f("action color purple_background-Purple background","dark"===D.mode?g().Z.images.mab.textBackground.dark.purpleSvg:g().Z.images.mab.textBackground.light.purpleSvg,H,"purple_background"===j.backgroundHighlight,"Purple"):void 0,backgroundColorPink:R?f("action color pink_background-Pink background","dark"===D.mode?g().Z.images.mab.textBackground.dark.pinkSvg:g().Z.images.mab.textBackground.light.pinkSvg,H,"pink_background"===j.backgroundHighlight,"Pink"):void 0,backgroundColorRed:R?f("action color red_background-Red background","dark"===D.mode?g().Z.images.mab.textBackground.dark.redSvg:g().Z.images.mab.textBackground.light.redSvg,H,"red_background"===j.backgroundHighlight,"Red"):void 0,textColorRed:R?v("action color red-Red text","dark"===D.mode?g().Z.images.mab.textColor.dark.redSvg:g().Z.images.mab.textColor.light.redSvg,H,"red"===F,"Red"):void 0,textColorOrange:R?v("action color orange-Orange text","dark"===D.mode?g().Z.images.mab.textColor.dark.orangeSvg:g().Z.images.mab.textColor.light.orangeSvg,H,"orange"===F,"Orange"):void 0,textColorYellow:R?v("action color yellow-Yellow text","dark"===D.mode?g().Z.images.mab.textColor.dark.yellowSvg:g().Z.images.mab.textColor.light.yellowSvg,H,"yellow"===F,"Yellow"):void 0,textColorTeal:R?v("action color teal-Green text","dark"===D.mode?g().Z.images.mab.textColor.dark.greenSvg:g().Z.images.mab.textColor.light.greenSvg,H,"teal"===F,"Green"):void 0,textColorBlue:R?v("action color blue-Blue text","dark"===D.mode?g().Z.images.mab.textColor.dark.blueSvg:g().Z.images.mab.textColor.light.blueSvg,H,"blue"===F,"Blue"):void 0,textColorPurple:R?v("action color purple-Purple text","dark"===D.mode?g().Z.images.mab.textColor.dark.purpleSvg:g().Z.images.mab.textColor.light.purpleSvg,H,"purple"===F,"Purple"):void 0,textColorPink:R?v("action color pink-Pink text","dark"===D.mode?g().Z.images.mab.textColor.dark.pinkSvg:g().Z.images.mab.textColor.light.pinkSvg,H,"pink"===F,"Pink"):void 0,textColorGray:R?v("action color gray-Gray text","dark"===D.mode?g().Z.images.mab.textColor.dark.graySvg:g().Z.images.mab.textColor.light.graySvg,H,"gray"===F,"Gray"):void 0,textColorBrown:R?v("action color brown-Brown text","dark"===D.mode?g().Z.images.mab.textColor.dark.brownSvg:g().Z.images.mab.textColor.light.brownSvg,H,"brown"===F,"Brown"):void 0,textColorDefault:R&&"default"!==F?v("action color default-Default text","dark"===D.mode?g().Z.images.mab.textColor.dark.defaultSvg:g().Z.images.mab.textColor.light.defaultSvg,H,!1,"Default"):void 0,...O,dismissKeyboard:y("mab.dismissKeyboard","webAction_generic",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.keyboardDownSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"keyboard.chevron.compact.down",localImageIdentifier:"keyboardDown"},accessibilityText:U.dismissKeyboard},apiRequestValue:{jsonPayload:S({action:"dismissKeyboard"}),context:void 0}}),closeActionMenu:y("mab.dismissKeyboard","nativeAction_setMenuType",{content:{type:"icon",imageReference:R?{imageUrl:g().Z.images.mab.actions.xCircleSvg,imageTintColor:(0,u().J1)(D.icon.secondary)}:{sfProGlyphName:"xmark.circle.fill",localImageIdentifier:"cancel"},accessibilityText:U.closeActionMenu},apiRequestValue:{menuType:void 0,context:void 0}})}}function R(e){const{buttonMap:t,shouldShowTemplatePills:o,frecentlyRankedActions:i,isEditingTitle:n,isEditingHeader:a,isEditingSimpleTable:r,isEditingCallout:l,isEditingQuote:s,shouldPrioritizeList:c,shouldShowFiling:d,shouldShowTemplates:u,someBlockPrioritizesIndentation:g,isTablet:b,isPersonalizedActionsEnabled:p,shouldShowSelectedTextButtons:y,isIndentable:v,isEmpty:f}=e;let h=[];if(n)if(o)h=[t.todoListTemplate,t.weeklyPlanTemplate,t.templates];else{const e=b?[]:[t.speech,t.filePicker],o=d?[t.filing]:[],i=u?[t.templates]:[];h=[...o,...i,...e]}if(!n&&p){let e=[];if(e=function(e,t,o,i,n,a,r,l){const s=new Set(["todoListTemplate","weeklyPlanTemplate","templates","filing"]),c=new Set(["bold","italic","underline","strikethrough","biu","dismissKeyboard","closeActionMenu","indent","unindent","moveUp","moveDown","ai"]),d=new Set(["color","backgroundColorDefault","backgroundColorGray","backgroundColorBrown","backgroundColorOrange","backgroundColorYellow","backgroundColorTeal","backgroundColorBlue","backgroundColorPurple","backgroundColorPink","backgroundColorRed","textColorDefault","textColorGray","textColorBrown","textColorOrange","textColorYellow","textColorTeal","textColorBlue","textColorPurple","textColorPink","textColorRed"]);let u;u=n?new Set([...c,...s,...d,"insert","biu","turnInto","more"]):r||l?new Set([...c,...s,...d,"insert","turnInto","more"]):o?new Set([...c,...s,...d,"copyLinkToBlock","insert","turnInto","more"]):a?new Set([...c,...s,...d,"toDoList","h1","h2","h3","bulletedList","numberedList","toggleList","quote","callout","insert","speech","turnInto","filePicker","ai","more"]):new Set([...c,...s,...d,"insert","turnInto","more"]);const g=Object.keys(e).filter((o=>{var i;return!u.has(o)&&t.includes(o)&&!(null!==(i=e[o])&&void 0!==i&&null!==(i=i.content)&&void 0!==i&&i.disabled)})).sort(((e,o)=>t.indexOf(e)-t.indexOf(o))).map((t=>e[t])).filter(m().$K).slice(0,3).sort(((e,t)=>e.id>t.id?1:-1));return g}(t,i,f,0,a,r,l,s),e.length<3){const o=function(e,t){return t?[e.toDoList,e.bulletedList,e.toggleList].filter(m().$K):[e.toDoList,e.bulletedList,e.h1].filter(m().$K)}(t,a);e=Array.from(new Set([...e,...o])).slice(0,3)}const o=function(e){const{buttonMap:t,shouldShowSelectedTextButtons:o,isIndentable:i,isEditingSimpleTable:n,isEditingCallout:a}=e;let r=[];r=o?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.link,t.comment,t.turnInto,t.code,t.equation,t.copyLinkToBlock,t.more]:n?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.mention,t.link,t.comment,t.code,t.equation,t.copyLinkToBlock]:i?[t.unindent,t.indent,t.insert,t.biu,t.moveUp,t.moveDown,t.filePicker,t.speech,t.turnInto,t.undo,t.redo,t.mention,t.delete,t.more]:a?[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,t.undo,t.redo,t.unindent,t.indent,t.moveUp,t.moveDown,t.delete,t.mention,t.more]:[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,t.undo,t.redo,t.unindent,t.indent,t.moveUp,t.moveDown,t.mention,t.delete,t.more];return r.filter(m().$K)}({buttonMap:t,shouldShowSelectedTextButtons:y,isIndentable:v,isEditingSimpleTable:r,isEditingCallout:l}),n=function(e,t){const o=new Set(t.map((e=>e.id)));return e.filter((e=>!o.has(e.id)))}(o,e);return[e.length>0?{id:"mab.buttonSection.main.personalized",buttons:[...[t.ai,...e].filter(m().$K).entries()].map((e=>{let[t,o]=e;return L(o,t)})),skipSectionDivider:!1,shouldFadeIn:!0}:void 0,{id:"mab.buttonSection.main",buttons:[...n.entries()].map((e=>{let[t,o]=e;return L(o,t)})),shouldFadeIn:!0}].filter(m().$K)}if(c&&g){return[{id:"mab.buttonSection.main",buttons:[...[t.ai,t.unindentPioritized,t.indentPrioritized,t.moveUpPrioritized,t.moveDownPrioritized].filter(m().$K),...b?[t.insert,t.turnInto,t.filePicker,t.speech].filter(m().$K):[t.insert,t.speech,t.filePicker,t.turnInto].filter(m().$K),...[t.biu,t.comment,t.undo,t.mention,t.delete,t.more].filter(m().$K)],skipSectionDivider:!0}]}return[{id:"mab.buttonSection.main",buttons:(()=>{if(n)return h;const e=b?[t.turnInto,t.speech,t.filePicker]:[t.speech,t.filePicker,t.turnInto];return[d&&b?t.filing:void 0,t.ai,t.insert,...e,t.biu,t.comment,t.undo,t.mention,t.delete,t.indent,t.unindent,t.moveUp,t.moveDown,t.more]})().filter(m().$K)}]}const N="static-";function L(e,t){return{...e,id:`${e.id}.${N}${t}`}}function F(e){const t=e.split(".");if(t.length>0){if(t[t.length-1].startsWith(N))return t.slice(0,-1).join(".")}return e}function V(e){return e.id=`${e.id}.prioritized`,e}const j={"insert text-Text":"text","insert page-Page":"page","insert to_do-To-do list":"toDoList","insert header-Heading 1":"h1","insert sub_header-Heading 2":"h2","insert sub_sub_header-Heading 3":"h3","insert bulleted_list-Bulleted list":"bulletedList","insert numbered_list-Numbered list":"numberedList","insert toggle-Toggle list":"toggleList","insert quote-Quote":"quote","insert callout-Callout":"callout","insert link_to_page-Link to page":"linkToPage","insert divider-Divider":"divider","insert table-Table":"table","insert encrypted_text-Encrypted Text":"encryptedText","action color default_background-Default background":"backgroundColorDefault","action color gray_background-Gray background":"backgroundColorGray","action color brown_background-Brown background":"backgroundColorBrown","action color orange_background-Orange background":"backgroundColorOrange","action color yellow_background-Yellow background":"backgroundColorYellow","action color teal_background-Green background":"backgroundColorTeal","action color blue_background-Blue background":"backgroundColorBlue","action color purple_background-Purple background":"backgroundColorPurple","action color pink_background-Pink background":"backgroundColorPink","action color red_background-Red background":"backgroundColorRed","action color default-Default text":"textColorDefault","action color gray-Gray text":"textColorGray","action color brown-Brown text":"textColorBrown","action color orange-Orange text":"textColorOrange","action color yellow-Yellow text":"textColorYellow","action color teal-Green text":"textColorTeal","action color blue-Blue text":"textColorBlue","action color purple-Purple text":"textColorPurple","action color pink-Pink text":"textColorPink","action color red-Red text":"textColorRed"};function E(e,t){let o="textColor";const i=u().E_.find((t=>t===e));let n;"default"===e||i&&(i.includes("background")?(n="background",o="textBackgroundColor"):n="color");const a=n&&i?(0,u().fi)(i,t)[n]:void 0;return{localImageIdentifier:o,imageTintColor:a?(0,u().J1)(a):void 0}}var q=()=>o(955620),U=()=>o(788860),D=()=>o(513670),H=()=>o(808828),O=()=>o(790082),G=()=>o(491927),K=()=>o(959137),Q=()=>o(80072),z=()=>o(207874),J=()=>o(964433),$=()=>o(542058),W=()=>o(23338),Y=()=>o(141735),X=()=>o(421797),ee=()=>o(594546),te=()=>o(718959),oe=()=>o(982855),ie=()=>o(527278),ne=()=>o(233936),ae=()=>o(191003),re=()=>o(271308),le=()=>o(852465),se=()=>o(549813),ce=()=>o(550054),de=()=>o(465371);var ue=()=>o(677559),me=()=>o(696764);const ge={TIME_BUCKETS:[{hours:24,weight:100},{hours:96,weight:70},{hours:168,weight:50},{hours:720,weight:30}],DEFAULT_BUCKET_WEIGHT:10},be={TIME_BUCKETS:[{hours:4,weight:100},{hours:12,weight:80},{hours:24,weight:70},{hours:72,weight:60},{hours:168,weight:50},{hours:336,weight:40},{hours:672,weight:30}],DEFAULT_BUCKET_WEIGHT:20};var pe=()=>o(687117),ye=()=>o(608085),ve=()=>o(639832),fe=()=>o(876822),he=()=>o(524434),ke=()=>o(749826),xe=()=>o(121700),Se=()=>o(826955),Te=()=>o(965903),Me=()=>o(127519),Ce=(o(670560),()=>o(963069)),Ae=()=>o(159357),we=()=>o(879952),Ie=()=>o(990966),_e=()=>o(360372),Be=()=>o(201741),Pe=()=>o(267629);function Ze(e){const{type:t,actionSections:o,closeParentMenu:i,context:n}=e,a={},r=[];for(const l of o){const e={id:`${l.key}`,title:l.title,items:l.actions.map((e=>{var o;const r=`${e.key}-${e.analyticsName||""}`;return a[r]={...e,closeParentMenu:i},{id:r,title:e.displayName||"",icon:(null===(o=e.nativeImageReference)||void 0===o?void 0:o.call(e,n))??{},action:x("webAction_genericAction",{menuType:t,actionId:r,context:void 0}),checked:!1}}))};r.push(e)}return{actions:a,sections:r}}function Re(e){const{key:t,displayName:o,analyticsName:i,closeParentMenu:n,action:a}=e,r=o;return{key:`action ${t}`,displayName:o?ie().Z.formatMessage(o):void 0,analyticsName:i||`textformatting_action_${t}`,searchName:r?`${ie().Z.formatMessage(r)} ${r.defaultMessage}`:void 0,validators:[],action:a,closeParentMenu:Boolean(n)}}const Ne={bold:Re({key:"bold",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().pk(t,["b"])}}),italic:Re({key:"italic",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().pk(t,["i"])}}),underline:Re({key:"underline",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().pk(t,["_"])}}),strikethrough:Re({key:"strikethrough",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().pk(t,["s"])}}),code:Re({key:"code",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().pk(t,["c"])}}),comment:Re({key:"comment",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());const i=await Y().F.formulas.load();ne().ol(o,"mobile_action_bar",i)}}),equation:Re({key:"equation",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ne()._W(o)}}),filePicker:Re({key:"filePicker",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ne().vs(o)}}),indent:Re({key:"indent",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().O2(t)}}),unindent:Re({key:"unindent",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().$$(t)}}),moveDown:Re({key:"moveDown",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().rZ(t)}}),moveUp:Re({key:"moveUp",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().s0(t)}}),undo:Re({key:"undo",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().i2(t)}}),redo:Re({key:"redo",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().GH(t)}}),trash:Re({key:"trash",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().fn(t)}}),mention:Re({key:"mention",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ne().Z3(o)}}),ai:Re({key:"ai",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ne().QG(o)}}),voiceInput:Re({key:"voiceInput",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());Be().default.state.enabled&&!Be().default.state.loading?await _e().dictationActions.stopDictation({environment:o,from:"native_action"}):await _e().dictationActions.smartToggleDictation({environment:o,from:"native_action",preCreateDictationBlock:o.device.isIOS&&Le()})}}),link:Re({key:"link",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ne().UF(o)}}),copyLinkToBlock:Re({key:"copyLinkToBlock",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const o=Te().default.state.stores[0];if(!o)return;(await K().F.clipboardActions.load()).copyLinkToBlock({environment:t,blocks:[o],event:void 0})}}),more:Re({key:"more",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().w1(t)}}),filing:Re({key:"filing",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const i=(0,te().np)();if(!i)return;const n=i.getParentStore();if(!n)return;const a=!t.device.isTablet,r=Te().default.getEditing(),l=Me().default.state,s="editing"===l.mode?(0,ae().QY)(l.multiSelection):void 0;Ie().blurActiveElement(),Ie().clear({environment:t}),we().ZH({environment:t});const c=()=>{if(a&&(r&&we().eP({environment:t,store:r}),s)){ke().default.checkGate({gateName:"mobile_move_to_restore_selection_v2"})?(Ie().setSelectionAtEnd({store:s.store}),o(492788).default.afterNextFlush((()=>{Ie().setSelection(s)}))):Ie().setSelection(s)}},{currentSpaceStore:d}=fe().default.state,u=n instanceof Se().H2&&d&&n.id===d.id,m=t.RouterStore.state.route,g="page"===m.name&&m.showMoveTo;await o(525038).$X({environment:t,blocks:[i],moveToContext:"quick_add_mab",disableSuccessToast:!0,onAccept:e=>{o(353141).xx(t),c()},onCanceled:()=>{c()},isAddTo:g,isDefaultPrivateLocation:u})}}),dismissKeyboard:Re({key:"dismissKeyboard",closeParentMenu:!0,action:e=>{let{environment:t}=e;we().ZH({environment:t}),o(156958).MO(),ne().hc(t,void 0,!1),ne().hD(t,void 0,!1),ne().Oh(t,"hide_keyboard"),Ie().blurActiveElement()}}),todoListTemplate:Re({key:"todoListTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;we().ZH({environment:t}),ne().T5(t,Ce().Yt.todoListMobile)}}),weeklyPlanTemplate:Re({key:"weeklyPlanTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;we().ZH({environment:t}),ne().T5(t,Ce().Yt.weeklyPlanMobile)}}),templates:Re({key:"templates",closeParentMenu:!1,action:e=>{let{environment:t}=e;ne().em(t)}})};function Le(){if("editing"!==Me().default.state.mode)return!1;const e=Me().default.state.multiSelection.start.store;return!!(0,o(339523).x7)(e)}var Fe=o(785893);const Ve=(0,U().vU)({subMenuLabelSuggested:{defaultMessage:"Suggested",id:"mobileActionBar.subMenuLabel.suggested"},subMenuLabelInsert:{defaultMessage:"Add",id:"mobileActionBar.subMenuLabel.insert"},subMenuLabelTurnInto:{defaultMessage:"Turn into",id:"mobileActionBar.subMenuLabel.turnInto"},subMenuLabelTextFormatting:{defaultMessage:"Format",id:"mobileActionBar.subMenuLabel.textFormatting"},subMenuLabelTextColor:{defaultMessage:"Text color",id:"mobileActionBar.subMenuLabel.textColor"},templatesButtonTitle:{defaultMessage:"Templates",id:"mobileActionBar.templateButtonTitle"},moreTemplatesButtonTitle:{defaultMessage:"More",id:"mobileActionBar.moreTemplatesButtonTitle"},todoListTemplateTitle:{defaultMessage:"To-do list",id:"mobileActionBar.templateTitle.todoList"},weeklyPlanTemplateTitle:{defaultMessage:"Weekly plan",id:"mobileActionBar.templateTitle.weeklyPlan"},actionMenuInsertBlockTitle:{defaultMessage:"Insert Block",id:"mobileActionBar.actionMenuTitle.insertBlock"},actionMenuTurnIntoTitle:{defaultMessage:"Turn Into",id:"mobileActionBar.actionMenuTitle.turnInto"},actionMenuColorTitle:{defaultMessage:"Color",id:"mobileActionBar.actionMenuTitle.blockColor"},accessibilityInsert:{defaultMessage:"Add block",id:"mobileActionBar.accessibility.insertBlock"},accessibilityTurnInto:{defaultMessage:"Turn into block",id:"mobileActionBar.accessibility.turnInto"},accessibilityFilePicker:{defaultMessage:"Add image",id:"mobileActionBar.accessibility.filePicker"},accessibilityMention:{defaultMessage:"Add mention",id:"mobileActionBar.accessibility.mention"},accessibilityBlockColor:{defaultMessage:"Change block color",id:"mobileActionBar.accessibility.blockColor"},accessibilityTextFormatting:{defaultMessage:"Open text formatting menu",id:"mobileActionBar.accessibility.textFormatting"},accessibilityComment:{defaultMessage:"Add comment",id:"mobileActionBar.accessibility.comment"},accessibilityTrash:{defaultMessage:"Delete block",id:"mobileActionBar.accessibility.trash"},accessibilityIndent:{defaultMessage:"Indent block",id:"mobileActionBar.accessibility.indent"},accessibilityDedent:{defaultMessage:"Unindent block",id:"mobileActionBar.accessibility.unindent"},accessibilityMoveUp:{defaultMessage:"Move a block up",id:"mobileActionBar.accessibility.moveUp"},accessibilityMoveDown:{defaultMessage:"Move a block down",id:"mobileActionBar.accessibility.moveDown"},accessibilityUndo:{defaultMessage:"Undo edit",id:"mobileActionBar.accessibility.undo"},accessibilityRedo:{defaultMessage:"Redo edit",id:"mobileActionBar.accessibility.redo"},accessibilityMore:{defaultMessage:"More block actions",id:"mobileActionBar.accessibility.more"},accessibilityBold:{defaultMessage:"Bold",id:"mobileActionBar.accessibility.bold"},accessibilityItalics:{defaultMessage:"Italicize",id:"mobileActionBar.accessibility.italics"},accessibilityUnderline:{defaultMessage:"Underline",id:"mobileActionBar.accessibility.underline"},accessibilityStrikethrough:{defaultMessage:"Strikethrough",id:"mobileActionBar.accessibility.strikethrough"},accessibilityTextColor:{defaultMessage:"Text color",id:"mobileActionBar.accessibility.textColor"},accessibilityCode:{defaultMessage:"Code",id:"mobileActionBar.accessibility.code"},accessibilityLink:{defaultMessage:"Add link",id:"mobileActionBar.accessibility.link"},accessibilityCopyLinkToBlock:{defaultMessage:"Copy link to block",id:"mobileActionBar.accessibility.copyLinkToBlock"},accessibilityEquation:{defaultMessage:"Add equation",id:"mobileActionBar.accessibility.equation"},accessibilityFiling:{defaultMessage:"Page location",id:"mobileActionBar.accessibility.filing"},accessibilityCloseTextFormattingMenu:{defaultMessage:"Close text formatting menu",id:"mobileActionBar.accessibility.close"},accessibilityDismissKeyboard:{defaultMessage:"End editing",id:"mobileActionBar.accessibility.endEditing"},accessibilityCloseActionMenu:{defaultMessage:"Close menu",id:"mobileActionBar.accessibility.closeMenu"},accessibilityAi:{defaultMessage:"Notion AI",id:"mobileActionBar.accessibility.ai"},filingButtonPrivateSection:{defaultMessage:"Private",id:"mobileActionBar.filing.private"},accessibilityTodoList:{defaultMessage:"Add a to-do list",id:"mobileActionBar.accessibility.todoList"},accessibilityH1:{defaultMessage:"Add an H1 heading",id:"mobileActionBar.accessibility.h1"},accessibilityH2:{defaultMessage:"Add an H2 heading",id:"mobileActionBar.accessibility.h2"},accessibilityH3:{defaultMessage:"Add an H3 heading",id:"mobileActionBar.accessibility.h3"},accessibilityBulletedList:{defaultMessage:"Add a bulleted list",id:"mobileActionBar.accessibility.bulletedList"},accessibilityNumberedList:{defaultMessage:"Add a numbered list",id:"mobileActionBar.accessibility.numberedList"},accessibilityToggleList:{defaultMessage:"Add a toggle list",id:"mobileActionBar.accessibility.toggleList"},accessibilityQuote:{defaultMessage:"Add a quote block",id:"mobileActionBar.accessibility.quote"},accessibilityCallout:{defaultMessage:"Add a callout block",id:"mobileActionBar.accessibility.callout"}}),je={text:!1,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!1,transclusion_container:!1,callout:!1,quote:!1,post:!1};function Ee(e){var t;const{onAction:o,fallbackRenderer:r,...l}=e,s=null===(t=(0,a().O7)().mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar,c=(0,n().e)(s,l);return function(e,t,o,n){var r;const l=null===(r=(0,a().O7)().mobileNative)||void 0===r?void 0:r.componentEvents;(0,i.useEffect)((()=>{if(l&&n&&t)return l.addListener(e,t,o,n)}),[e,t,o,n,l])}("MobileActionBar",c,"onAction",o),!c&&r?(0,Fe.jsx)(Fe.Fragment,{children:r()}):null}function qe(e){const{currentBlockStore:t,fallbackRenderer:o,stores:n,shouldShowMoveTo:g,renderApi:y}=e,v=(0,a().O7)(),f=(0,l().l)(),x=(0,U().YB)(),{value:S}=(0,ue().XJ)(J().p),{value:I}=(0,ue().XJ)($().m),{value:_}=(0,ue().XJ)(Y().F.formulas),{value:B}=(0,ue().XJ)(K().F.clipboardActions),P=(0,s().VK)((()=>ke().default.getEligibleGroup({experimentId:"mab_refresh_personalization",defaultGroup:"control"})),[]),N="v1"===P||"v2"===P,L=(0,i.useRef)(void 0),V=(0,s().VK)((()=>{const e=null==f?void 0:f.publicEditModeStore.state;return ne().$3(v,t,e)}),[v,t,null==f?void 0:f.publicEditModeStore]),E=(0,i.useMemo)((()=>D().HP((e=>{const{blocks:t,environment:o}=e;return function(e,t,o){return{insertBlock:Ze({type:"insertBlock",actionSections:Pe().L1(t,e),context:e,closeParentMenu:!0}),turnInto:Ze({type:"turnInto",actionSections:Pe().L1(o,e),context:e,closeParentMenu:!0}),textColor:Ze({type:"textColor",actionSections:Pe().L1([Ae().rz,Ae().Vm],e),context:e,closeParentMenu:!0}),textSelectionColor:Ze({type:"textSelectionColor",actionSections:Pe().L1([Ae().b4,Ae().Sw],e),context:e,closeParentMenu:!0})}}({environment:o,blocks:t,publicEditMode:void 0},function(e){return(0,H().vC)(e).state.insertActions}(N),[(0,O().qF)({isPersonalizedActionsEnabled:N})])}),(e=>{let{blocks:t,environment:o}=e;const i=t.map((e=>e.key)).join(",");return`${o.key}-${i}`}))),[N]),re=(0,s().VK)((()=>E({blocks:Ue(),environment:v,isPersonalizedActionsEnabled:N})),[v,E,N]),Ce=(0,s().VK)((()=>{const e=Qe(n.ignoreSelectionAreaStore);return 1===(null==e?void 0:e.length)?e[0]:void 0}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),we=(0,s().VK)((()=>!0===ne().oQ(n.ignoreSelectionAreaStore,v.TextSelectionCompositionStore,Ce,N)),[v,n,Ce,N]),Ie=(0,s().VK)((()=>{const e=(e,t)=>{if(!e||"editing"!==e.mode)return;const{multiSelection:o}=e;return{startRecord:o.start.store.pointer,startIndex:o.start.index,endRecord:o.end.store.pointer,endIndex:o.end.index,source:t}};return e(Me().default.state,"TextSelectionStore")||e(n.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,"IgnoreSelectionAreaStore")}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),_e=(0,s().VK)((()=>{if(!Ie)return;const{source:e,...t}=Ie;return t}),[Ie],{useDeepEqual:!0}),Be=(0,s().VK)((()=>{var e;const{NativeMobileActionBarStore:o}=v,i=(0,u().gh)({theme:v.ThemeModeStore.state}),a=xe().Z.state.isOpen,r=t.getType(),l=t.getFormat(),s=De(),d=ye().Z.state.isActive,m=xe().Z.state.isOpen,b=Ke(n.ignoreSelectionAreaStore),p=Boolean(b&&(0,ae().qS)(b)),y=(0,oe().GD)(null==f?void 0:f.publicEditModeStore.state),h=!(0,te().VV)()&&(0,W().d)(),k=d||m,S=s||d,T=!ne().eQ(f&&f.publicEditModeStore.state,t),M=!ne().Bo(f&&f.publicEditModeStore.state),C=function(){let e;e="editing"===Me().default.state.mode?(0,ce().KF)([q().GKr.Bold,q().GKr.Italic,q().GKr.Underline,q().GKr.Strike,q().GKr.Code,q().GKr.Link,q().GKr.Equation,...(0,q().F7H)(q().GKr.Highlight)],Me().default.state.multiSelection,Me().default.state.forceExtendAnnotations):{};const t=e.hf,o=e.hb;return{bold:Boolean(e[q().GKr.Bold]),italic:Boolean(e[q().GKr.Italic]),underline:Boolean(e[q().GKr.Underline]),strikethrough:Boolean(Boolean(e[q().GKr.Strike])),code:Boolean(e[q().GKr.Code]),link:Boolean(e[q().GKr.Link]),equation:Boolean(e[q().GKr.Equation]),textHighlight:t&&(0,q().LAI)(t)?(0,q().zIN)(t):void 0,backgroundHighlight:o&&(0,q().LAI)(o)?(0,q().zIN)(o):void 0}}(),w=Boolean(V.disableStyleAnnotations),I=null==o||null===(e=o.state.menu)||void 0===e?void 0:e.type,_=A(re.insertBlock.sections),B=A(re.turnInto.sections),P=A(re.textColor.sections),R=function(e,t,o){var i;const{NativeMobileActionBarStore:n}=e,a=n&&void 0!==(null===(i=n.state.menu)||void 0===i?void 0:i.type)?t.state.savedTextSelectionStoreState:void 0;if(!a)return o;const r="editing"===a.mode&&(0,ce().KF)(["hf","hb"],a.multiSelection,a.forceExtendAnnotations);if(r){const e=r.hf??r.hb;return e&&(0,q().LAI)(e)?(0,q().zIN)(e):void 0}}(v,n.ignoreSelectionAreaStore,C.textHighlight),L=!z().L0(),F=!z().AZ(),j=!Ue().every(Q().nt),E=!Ue().every(Q().gq),U=s||m,D=!p,H=!p,O=Boolean(r&&(0,c().lQ)(r))||!p,G=Boolean(r&&(0,c()._T)(r,l))||Boolean(V.disableComment)||a,K=(null==Ce?void 0:Ce.isNavigableBlock())||(0,X().l2t)(Ce),J=s&&Ge(v,t)&&Oe(v),$=g&&!Oe(v),Y=function(e,t,o,i){if(!o||!t)return;if(e.device.isTablet&&!function(e){if(!e.hasContent())return!0;return e.getContentStores().every((e=>e.isEmptyEditableBlock()))}(t))return;const n=t.getParentStore();if(!n||!(0,se().JL)(n))return;function a(e){if(!e)return;const t=10;return e.length>t?`${Array.from(e).slice(0,t).join("").trim()}…`:e}const{currentSpaceStore:r}=fe().default.state;if(n instanceof Se().H2&&r&&n.id===r.id)return a(ie().Z.formatMessage(Ve.filingButtonPrivateSection));return a((0,se().V)(n,i,e,he().KR.shouldEnablePageTitleDiffs(e.device)))}(v,null==f?void 0:f.pageStore,$,x);return Z({createAIAction:y,createDictationAction:h,disableDictationActions:k,disableAIAction:S,disableTextActions:T,disableBlockActions:M,disableLinkAction:D,disableEquationAction:H,disableCommentAction:G,disableMentionAction:O,disableTextFormatting:w,disableInsertBlockAction:_,disableTurnIntoAction:B,disableTextColorAction:P,disableDeleteBlock:U,disableUndo:L,disableRedo:F,disableIndent:j,disableUnindent:E,disableCopyLinkToBlock:K,selectedMenuType:I,isEditingTitle:s,shouldShowTextActions:we,usePillStyling:J,isPersonalizedActionsEnabled:N,textSelectionColor:R,textFormattingSelections:C,titleTexts:{filing:Y,template:ie().Z.formatMessage(Ve.templatesButtonTitle),moreTemplates:ie().Z.formatMessage(Ve.moreTemplatesButtonTitle),todoListTemplate:ie().Z.formatMessage(Ve.todoListTemplateTitle),weeklyPlanTemplate:ie().Z.formatMessage(Ve.weeklyPlanTemplateTitle)},accessibilityTexts:{insert:ie().Z.formatMessage(Ve.accessibilityInsert),turnInto:ie().Z.formatMessage(Ve.accessibilityTurnInto),filePicker:ie().Z.formatMessage(Ve.accessibilityFilePicker),mention:ie().Z.formatMessage(Ve.accessibilityMention),comment:ie().Z.formatMessage(Ve.accessibilityComment),textFormatting:ie().Z.formatMessage(Ve.accessibilityTextFormatting),trash:ie().Z.formatMessage(Ve.accessibilityTrash),ai:ie().Z.formatMessage(Ve.accessibilityAi),undo:ie().Z.formatMessage(Ve.accessibilityUndo),redo:ie().Z.formatMessage(Ve.accessibilityRedo),more:ie().Z.formatMessage(Ve.accessibilityMore),indent:ie().Z.formatMessage(Ve.accessibilityIndent),unindent:ie().Z.formatMessage(Ve.accessibilityDedent),moveUp:ie().Z.formatMessage(Ve.accessibilityMoveUp),moveDown:ie().Z.formatMessage(Ve.accessibilityMoveDown),bold:ie().Z.formatMessage(Ve.accessibilityBold),italics:ie().Z.formatMessage(Ve.accessibilityItalics),underline:ie().Z.formatMessage(Ve.accessibilityUnderline),strikethrough:ie().Z.formatMessage(Ve.accessibilityStrikethrough),textColor:ie().Z.formatMessage(Ve.accessibilityTextColor),code:ie().Z.formatMessage(Ve.accessibilityCode),link:ie().Z.formatMessage(Ve.accessibilityLink),copyLinkToBlock:ie().Z.formatMessage(Ve.accessibilityCopyLinkToBlock),equation:ie().Z.formatMessage(Ve.accessibilityEquation),close:ie().Z.formatMessage(Ve.accessibilityCloseTextFormattingMenu),filing:ie().Z.formatMessage(Ve.accessibilityFiling),todoList:ie().Z.formatMessage(Ve.accessibilityTodoList),h1:ie().Z.formatMessage(Ve.accessibilityH1),h2:ie().Z.formatMessage(Ve.accessibilityH2),h3:ie().Z.formatMessage(Ve.accessibilityH3),bulletedList:ie().Z.formatMessage(Ve.accessibilityBulletedList),numberedList:ie().Z.formatMessage(Ve.accessibilityNumberedList),toggleList:ie().Z.formatMessage(Ve.accessibilityToggleList),quote:ie().Z.formatMessage(Ve.accessibilityQuote),callout:ie().Z.formatMessage(Ve.accessibilityCallout),dismissKeyboard:ie().Z.formatMessage(Ve.accessibilityDismissKeyboard),closeActionMenu:ie().Z.formatMessage(Ve.accessibilityCloseActionMenu)},theme:i})}),[v,Ce,t,n.ignoreSelectionAreaStore,g,f,re,V,we,N,x]),Re=(0,s().VK)((()=>{var e;const t=v.NativeMobileActionBarStore,o=Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden),i=ve().Z.state.open,n=Boolean(V.disableStyleAnnotations);var a;return o?null==t||null===(a=t.state.subMenu)||void 0===a?void 0:a.type:i?"slashMenu":!we||n||N?void 0:"textFormatting"}),[v.NativeMobileActionBarStore,V.disableStyleAnnotations,we,N]),Le=(0,s().VK)((()=>{var e;const{NativeMobileActionBarStore:o}=v,i=De(),a=He(Ce),r=ye().Z.state.isActive,l="callout"===(null==(s=Ce)||null===(c=s.getParentBlockStore())||void 0===c?void 0:c.getType());var s,c;const d=function(e){const t=null==e?void 0:e.getType();return"quote"===t}(Ce),u=!ne().Bo(f&&f.publicEditModeStore.state),m=!Ue().every(Q().nt),b=!Ue().every(Q().gq),p=Qe(n.ignoreSelectionAreaStore),y=!!p&&p.some((e=>{const t=e.getType();return t&&je[t]})),h=Ge(v,t)&&Oe(v),k=Boolean(Ce&&(0,le().Nm)(Ce)),x=null==Ce?void 0:Ce.getType(),S=x&&je[x],T=Boolean(V.disableStyleAnnotations),M=Boolean(null==o||null===(e=o.state)||void 0===e?void 0:e.isSubMenuOverridden),C=Boolean(!M&&we&&!T&&!r),A=!(u||m&&b),w=N?function(e,t){const o=new(me().Z),i=t?be:ge;return o.getFrecencyRankedActions(e,i)}(pe().Z.get(),"v2"===P):[];return R({buttonMap:Be,shouldShowTemplatePills:h,frecentlyRankedActions:w,isEditingTitle:i,isEditingHeader:a,isEditingSimpleTable:r,isEditingCallout:l,isEditingQuote:d,shouldPrioritizeList:A,someBlockPrioritizesIndentation:y,shouldShowFiling:g&&!Oe(v),shouldShowTemplates:Ge(v,t),isTablet:v.device.isTablet,isPersonalizedActionsEnabled:N,shouldShowSelectedTextButtons:C,isIndentable:S,isEmpty:k})}),[Ce,t,f,n.ignoreSelectionAreaStore,v,V.disableStyleAnnotations,we,N,P,Be,g]),qe=(0,s().VK)((()=>{var e;const{NativeMobileActionBarStore:t}=v,o=null==t||null===(e=t.state.menu)||void 0===e?void 0:e.type,i=function(e){const{buttonMap:t,shouldShowTextActions:o}=e;let i;return i=o?[w,t.ai,t.color,t.comment,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(m().$K):[w,t.color,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(m().$K),{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:i}}({buttonMap:Be,shouldShowTextActions:we}),n=void 0===o?Be.dismissKeyboard:Be.closeActionMenu,a=function(e){const{version:t,selectedMenu:o,selectedSubMenu:i,nativeMenus:n,buttonSections:a,nativeSubMenus:r,dismissKeyboardButton:l,localizedMessages:s}=e;return{nativeMenus:n,nativeSubMenus:r,localizedMessages:s,state:{buttonSections:a,selectedMenu:o,selectedSubMenu:i,dismissKeyboardButton:l},version:t}}({version:N?3:1,selectedMenu:o,selectedSubMenu:Re,nativeMenus:{textColor:{id:"textColor",title:ie().Z.formatMessage(Ve.actionMenuColorTitle),sections:re.textColor.sections},textSelectionColor:{id:"textSelectionColor",title:ie().Z.formatMessage(Ve.actionMenuColorTitle),sections:re.textSelectionColor.sections},insertBlock:{id:"insertBlock",title:ie().Z.formatMessage(Ve.actionMenuInsertBlockTitle),sections:re.insertBlock.sections},turnInto:{id:"turnInto",title:ie().Z.formatMessage(Ve.actionMenuTurnIntoTitle),sections:re.turnInto.sections}},nativeSubMenus:{suggested:[],textFormatting:[i],slashMenu:[],turnInto:[],textColor:[],textSelectionColor:[],more:[]},buttonSections:Le,accessibilityTexts:{dismissKeyboard:ie().Z.formatMessage(Ve.accessibilityDismissKeyboard),closeActionMenu:ie().Z.formatMessage(Ve.accessibilityCloseActionMenu)},localizedMessages:{...ze(Re)},dismissKeyboardButton:n});if(ke().default.checkGate({gateName:"mobile_mab_mrr"})){var r;const e=null===(r=v.NativeMobileActionBarStore)||void 0===r?void 0:r.state,t=7,i=Boolean(null==e?void 0:e.isSubMenuOverridden)?t:0;if(a.state.buttonSections.flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+i,id:e.id})})),Re){var l,s;let o=0;null!=e&&null!==(l=e.subMenu)&&void 0!==l&&l.type&&null!=e&&null!==(s=e.subMenu)&&void 0!==s&&s.context&&(o=t+e.subMenu.context.index),a.nativeSubMenus[Re].flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+o,id:e.id})}))}if(o){var c,d;let i=0;null!=e&&null!==(c=e.menu)&&void 0!==c&&c.type&&null!=e&&null!==(d=e.menu)&&void 0!==d&&d.context&&(i=t+e.menu.context.index),a.nativeMenus[o].sections.flatMap((e=>e.items)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+i,id:e.id})}))}}return a}),[v,Re,we,Be,re,Le,N],{useDeepEqual:!0,debugName:"getCurrentActionBarSchema"}),Je=(0,i.useCallback)((e=>{var t,o,i;let{action:n}=e;if(null!==(t=n.apiRequestValue)&&void 0!==t&&t.context&&null!==(o=n.apiRequestValue)&&void 0!==o&&o.context.id&&null!==(i=n.apiRequestValue)&&void 0!==i&&i.context.index){var a,r,l;const e=Boolean(Ce&&(0,le().Nm)(Ce)),t=null==Ce?void 0:Ce.getType(),o=Boolean(t&&je[t]),i=null==Ie?void 0:Ie.startIndex,s=null==Ie?void 0:Ie.endIndex,c=Te().default.state.stores[0],d={action_id:F(n.apiRequestValue.context.id),reciprocal_rank:1/(null===(a=n.apiRequestValue)||void 0===a?void 0:a.context.index),block_type:null==c?void 0:c.getType(),is_editing_title:De(),text_selection_start_index:i,text_selection_end_index:s,is_indentable:o,is_empty:e,is_editing_header:He(Ce),session_id:null===(r=v.NativeMobileActionBarStore)||void 0===r||null===(r=r.state.session)||void 0===r?void 0:r.session_id,render_id:null===(l=v.NativeMobileActionBarStore)||void 0===l||null===(l=l.state.session)||void 0===l?void 0:l.render_id,algorithm_version:P};(0,ee().j)({environment:v,event:{eventName:"mobile_action_bar_reciprocal_rank",eventProperties:d}})}switch(n.type){case"nativeAction_setMenuType":!function(e,t,o){var i;const n=function(e){if("nativeAction_setMenuType"!==e.type)return new C(M.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("menuType"in t))return new C(M.MissingPayload,void 0);null===t.menuType&&(t.menuType=void 0);const o=p().object({required:{menuType:p().undefinable(p().literals(...h))},optional:{}}),i=(0,b().Gu)(o,t);return i?new C(M.InvalidRequestType,JSON.stringify(i)):t.menuType}(e);if(n instanceof C)return void console.error(JSON.stringify(n));const a=t.NativeMobileActionBarStore?null===(i=t.NativeMobileActionBarStore.state.menu)||void 0===i?void 0:i.type:void 0;if(a===n)ne().hc(t,void 0,!0);else{var r;if(!n)return void ne().hc(t,void 0,!0);switch(ne().hc(t,{type:n,context:null===(r=e.apiRequestValue)||void 0===r?void 0:r.context},!0),o(n),n){case"insertBlock":ne().Oh(t,"insert");break;case"turnInto":ne().Oh(t,"turn_into");break;case"textColor":ne().Oh(t,"color","mobile_action_bar");break;case"textSelectionColor":ne().Oh(t,"color","mobile_text_formatting_menu")}}}(n,v,(e=>{const t=function(e){if("turnInto"===e)return"turnInto"}(e);void 0!==t&&pe().Z.track(t)}));break;case"nativeAction_setSubMenuType":!function(e,t,o){const i=function(e){if("nativeAction_setSubMenuType"!==e.type)return new C(M.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("subMenuType"in t))return new C(M.MissingPayload,void 0);null===t.subMenuType&&(t.subMenuType=void 0);const o=p().object({required:{subMenuType:p().undefinable(p().literals(...k))},optional:{}}),i=(0,b().Gu)(o,t);return i?new C(M.InvalidRequestType,JSON.stringify(i)):t.subMenuType}(e);if(i instanceof C)return void console.error(JSON.stringify(i));if(i){var n;ne().hD(t,{type:i,context:null===(n=e.apiRequestValue)||void 0===n?void 0:n.context},!0),o(i)}else ne().hD(t,void 0,!0)}(n,v,(e=>{const t=function(e){switch(e){case"textFormatting":return"biu";case"turnInto":return"turnInto";default:return}}(e);void 0!==t&&pe().Z.track(t)}));break;case"webAction_generic":!function(e,t,o,i,n,a,r){const l=function(e){if("webAction_generic"!==e.type)return new C(M.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("jsonPayload"in t))return new C(M.MissingPayload,void 0);const o=JSON.parse(t.jsonPayload),i=(0,b().Gu)(T,o);return i?new C(M.InvalidData,JSON.stringify(i)):o}(e);if(l instanceof C)return void console.error(JSON.stringify(l));const{mainEditorCurrentBlockStore:s}=fe().default.state;if(!s)return;const{device:c}=a,d=Ne[l.data.action];d.closeParentMenu&&!c.isTablet&&ne().hc(a,void 0,!0);(0,d.action)({environment:a,blocks:[s],publicEditMode:void 0,lazyDependencies:{clipboardActions:t,formulasModule:o,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:n}}),r(l.data.action)}(n,B,_,S,I,v,(e=>{const t=e??j[e];Be[t]&&pe().Z.track(t)}));break;case"webAction_genericAction":!function(e,t,o,i,n,a,r,l,s){var c,d;const u=null===(c=e.apiRequestValue)||void 0===c?void 0:c.menuType,m=null===(d=e.apiRequestValue)||void 0===d?void 0:d.actionId;if(!u||!m)return;const g=a({environment:l,blocks:Te().default.state.stores,isPersonalizedActionsEnabled:r})[u].actions[m];if(!g)return;const b=g.action;b&&(g.closeParentMenu&&ne().hc(l,void 0,!0),b({environment:l,blocks:Te().default.state.stores,publicEditMode:void 0,lazyDependencies:{clipboardActions:t,formulasModule:o,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:n}}));const p=Te().default.state.stores[0];if(p){const e=p.getType(),t=p.getFormat();G().dh(l,{analyticsName:g.analyticsName,action_type:g.analyticsActionType,from:"slash_menu",block_id:p.id,block_type:e,is_toggleable:e?(0,de()._A)(e,t):void 0,slash_menu_filter_length:0,slash_menu_section:`Mobile Action Bar ${u}`,parent_collection_id:p.getParentCollectionIdUpToTwoLevels()}),g.analyticsName&&ne().Oh(l,g.analyticsName,u)}s(m)}(n,B,_,S,I,E,N,v,(e=>{const t=j[e];void 0!==t&&Be[t]&&pe().Z.track(t)}))}}),[Ce,Ie,v,P,_,S,I,E,Be,N,B]);return(0,i.useEffect)((()=>{if(!V){const{NativeMobileActionBarStore:e}=v,t=window.setTimeout((()=>{var t,o;null!=e&&null!==(t=e.state.menu)&&void 0!==t&&t.type&&ne().hc(v,void 0,!1),null!=e&&null!==(o=e.state.subMenu)&&void 0!==o&&o.type&&ne().hD(v,void 0,!1)}),500);return()=>{window.clearTimeout(t)}}}),[V,v]),(0,i.useEffect)((()=>{var e;const t=v.NativeMobileActionBarStore;Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden)||"slashMenu"!==Re&&"textFormatting"!==Re||null==t||t.update((e=>({...e,isSubMenuOverridden:!1,subMenu:void 0})))}),[v.NativeMobileActionBarStore,Re]),(0,i.useEffect)((()=>{var e;if(!Ie)return;const{NativeMobileActionBarStore:t,device:o}=v;"TextSelectionStore"===Ie.source&&null!=t&&null!==(e=t.state.menu)&&void 0!==e&&e.type&&!o.isTablet&&ne().hc(v,void 0,!0)}),[v,Ie]),(0,i.useEffect)((()=>{var e;_e&&null!==(e=v.NativeMobileActionBarStore)&&void 0!==e&&e.state.isSubMenuOverridden&&!ve().Z.state.open&&ne().hD(v,void 0,!1)}),[v,_e]),(0,i.useEffect)((()=>{var e,t,o;const{NativeMobileActionBarStore:i}=v,n=V.shouldShow,a=(Re?qe.nativeSubMenus[Re]:qe.state.buttonSections).map((e=>{let{id:t,buttons:o}=e;return{id:t,buttonIds:o.map((e=>{let{id:t}=e;return F(t)}))}}));let r=!0,l=!0;L.current&&(r=n&&L.current.isOpen!==n,l=r||!D().Xy(a,L.current.sectionsState));const s=null==i||null===(e=i.state.session)||void 0===e?void 0:e.session_id,c=l||!s?d().Il():s,u=null==i||null===(t=i.state.session)||void 0===t?void 0:t.render_id,m=l||!u?d().Il():u;if(null===(o=v.NativeMobileActionBarStore)||void 0===o||o.update((e=>({...e,session:{session_id:c,render_id:m}}))),L.current={isOpen:n,sectionsState:a},(r||l)&&n){const e=Boolean(Ce&&(0,le().Nm)(Ce)),t=null==Ce?void 0:Ce.getType(),o=Boolean(t&&je[t]),i=null==Ie?void 0:Ie.startIndex,n=null==Ie?void 0:Ie.endIndex,a=Te().default.state.stores[0];(0,ee().j)({environment:v,event:{eventName:"mobile_action_bar_render",eventProperties:{session_id:c,render_id:m,block_type:null==a?void 0:a.getType(),is_editing_title:De(),text_selection_start_index:i,text_selection_end_index:n,is_indentable:o,is_empty:e,is_editing_header:He(Ce),algorithm_version:P}}})}}),[v,qe,Re,V.shouldShow,Ce,Ie,P]),(0,r().L)((0,i.useCallback)((()=>{y&&y({type:"unmount",id:""})}),[y])),(0,Fe.jsx)(Ee,{isOpen:V.shouldShow,canShow:V.canShowNativeBar,isEmpty:V.isEmpty,schema:qe,onAction:Je,fallbackRenderer:o&&(()=>o(n))})}function Ue(){return Te().default.state.stores}function De(){return(0,te().JE)()||(0,te().VV)()}function He(e){const t=null==e?void 0:e.getType();return"header"===t||"sub_header"===t||"sub_sub_header"===t}function Oe(e){return e.device.isMobileNative&&!e.device.isTablet}function Ge(e,t){return ne().Tz({environment:e,store:t})}function Ke(e){const t="editing"===Me().default.state.mode&&Me().default.state.multiSelection,o=e.state.savedTextSelectionStoreState,i=o&&"editing"===o.mode&&o.multiSelection;return t||i||void 0}function Qe(e){var t;const o=Ke(e);return o&&(null===(t=(0,re().tp)({multiSelection:o,focus:void 0,filterCommonAncestors:!1}))||void 0===t?void 0:t.stores)}function ze(e){let t;switch(e){case void 0:break;case"suggested":t=ie().Z.formatMessage(Ve.subMenuLabelSuggested);break;case"slashMenu":t=ve().Z.state.open&&ve().Z.state.isAddMenu?ie().Z.formatMessage(Ve.subMenuLabelInsert):ie().Z.formatMessage(Ve.subMenuLabelTurnInto);break;case"turnInto":t=ie().Z.formatMessage(Ve.subMenuLabelTurnInto);break;case"textFormatting":t=ie().Z.formatMessage(Ve.subMenuLabelTextFormatting);break;case"textColor":case"textSelectionColor":t=ie().Z.formatMessage(Ve.subMenuLabelTextColor)}return t?{selectedSubMenuLabel:t}:void 0}},696764:(e,t,o)=>{o.d(t,{Z:()=>n});var i=()=>o(730120);class n{constructor(){this.UNVISITED_FRECENCY_SCORE=1}getFrecencyRankedActions(e,t){const o=Date.now();return Object.keys(e).sort(((i,n)=>{const a=e=>Math.ceil(e.frequency*this.getWeightForVisit(o,e.lastAccessed,t)),r=e[i],l=e[n],s=void 0!==(null==r?void 0:r.frequency)&&void 0!==(null==r?void 0:r.lastAccessed)?a(r):this.UNVISITED_FRECENCY_SCORE,c=void 0!==(null==l?void 0:l.frequency)&&void 0!==(null==l?void 0:l.lastAccessed)?a(l):this.UNVISITED_FRECENCY_SCORE;return s===c?0:c-s}))}getWeightForVisit(e,t,o){const{TIME_BUCKETS:n,DEFAULT_BUCKET_WEIGHT:a}=o,r=i().ou.fromMillis(e).diff(i().ou.fromMillis(t),"hours").as("hours");for(const i of n){if(r<=i.hours)return i.weight}return a}}},808282:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{getInitialState(){return{openTooltip:void 0}}}const n=new i},728267:(e,t,o)=>{o.d(t,{a:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("clock",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M6.541 10.919a.53.53 0 0 1-.39-.157.53.53 0 0 1-.157-.39c0-.155.053-.283.157-.383a.53.53 0 0 1 .39-.157h2.905V5.895c0-.15.053-.278.158-.383a.521.521 0 0 1 .382-.158.53.53 0 0 1 .39.158.521.521 0 0 1 .157.383v4.477a.53.53 0 0 1-.157.39.53.53 0 0 1-.39.157H6.541Zm3.452 6.207a6.789 6.789 0 0 1-2.727-.554 7.124 7.124 0 0 1-2.256-1.524 7.277 7.277 0 0 1-1.525-2.256 6.788 6.788 0 0 1-.553-2.727c0-.967.184-1.876.553-2.728a7.241 7.241 0 0 1 3.773-3.78 6.788 6.788 0 0 1 2.728-.554c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 0 1 1.53 2.25c.37.852.554 1.761.554 2.728 0 .966-.184 1.875-.553 2.727a7.218 7.218 0 0 1-3.787 3.78 6.789 6.789 0 0 1-2.728.554Zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 0 0 1.805-1.217 5.68 5.68 0 0 0 1.217-1.804c.291-.684.437-1.42.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.567 5.567 0 0 0-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.715 5.715 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202c0 .788.146 1.524.438 2.208a5.735 5.735 0 0 0 1.21 1.804 5.598 5.598 0 0 0 4.013 1.654Z"})})},697956:(e,t,o)=>{o.d(t,{z:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("keyboard",{viewBox:"0 0 30 30",svg:(0,i.jsxs)("g",{children:[" ",(0,i.jsx)("path",{d:"M15,30l8-10H7Zm0-3.2L11.16,22h7.68Z"})," ",(0,i.jsx)("path",{d:"M6,4H4V6H6V4Zm4,0H8V6h2V4Zm4,0H12V6h2V4Zm4,0H16V6h2V4Zm4,0H20V6h2V4Zm4,0H24V6h2V4ZM10,8H8v2h2V8Zm4,0H12v2h2V8Zm4,0H16v2h2V8Zm4,0H20v2h2V8Zm-2,4H10v2H20V12Zm5,0H22v2h3V12ZM5,14H8V12H5v2ZM0,0V18H30V0H0ZM28,16H2V2H28V16Z"})," "]})})},760910:(e,t,o)=>{o.d(t,{C:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("thinPlus",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{d:"M 7.75 0L 6.25 0L 6.25 6.25L 0 6.25L 0 7.75L 6.25 7.75L 6.25 14L 7.75 14L 7.75 7.75L 14 7.75L 14 6.25L 7.75 6.25L 7.75 0Z"})})}}]);