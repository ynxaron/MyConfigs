"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[23006],{279830:(e,t,o)=>{o.d(t,{T:()=>g,e:()=>p});var i=()=>o(492788),n=()=>o(749826),s=()=>o(253225),r=()=>o(54512),l=()=>o(421654),a=()=>o(282662),c=()=>o(636340),d=()=>o(879952),u=()=>o(990966);function p(e){const{environment:t,store:o,transaction:l,preventTextSelection:p,onTextSelection:g}=e;n().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&s().Z.state.open&&s().Z.setState({open:!1});const m=(()=>{const e=o.getContentStores();if(1===e.length&&e[0].isEmptyTextBlock())return e[0];const i=c().j4({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:l,spaceId:o.pointer.spaceId}),n=a().R3({parentStore:o.getContentStore(),appendStore:i,transaction:l}).childStore;return r().W(t,{from:"template_picker",type:"text",creating_block_id:i.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels()}),n})();return p||i().default.afterNextFlush((()=>{d().eP({environment:t,store:m}),u().setSelectionAtStart({store:m.getBlockTitleStore()}),null==g||g()})),m}function g(e){const{environment:t,store:o,transaction:i}=e;l().is({store:o,transaction:i}),p({environment:t,store:o,transaction:i})}},881266:(e,t,o)=>{o.d(t,{Z:()=>m,g:()=>g});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(846550),r=()=>o(285670),l=()=>o(467171),a=()=>o(788860),c=()=>o(668001),d=()=>o(778447),u=()=>o(729201),p=o(785893);function g(e){let{store:t,peekMode:o,forceShowIcon:l}=e;const a=(0,i().O7)(),u=(0,n().VK)((()=>t.hasCover()),[t]),g=(0,n().VK)((()=>t.hasIcon()),[t])||l,m=(0,n().VK)((()=>t.isCollectionView()),[t]),h=(0,n().VK)((()=>t.isFullWidth()),[t]),S=(0,n().VK)((()=>a.device.isMobile&&!a.device.isTablet),[a]),f=(0,n().VK)((()=>o===r().l?"20vh":(0,d().b)(a)),[a,o]),y=(0,s().yK)((()=>{const e=S?24:o===r().R?48:96,t=(()=>{switch(!0){case S:return 32;case g:return 96;case o===r().l&&!g:return 54;case!g:return 102}})(),i=(()=>{switch(!0){case S&&u&&g:return 22;case S&&u&&!g:return 54;case S&&!u&&g:return 56;case S&&!u&&!g:return 4;case!S&&u&&g:return 50;case!S&&u&&!g:return 58;case!S&&!u&&g:return 92;case!S&&!u&&!g:return 20}})();return{collectionCoverPhoto:{width:"100%",height:"20vh"},collectionTitleContainer:{display:"flex",alignItems:"center",paddingLeft:e,paddingRight:e,width:"100%",paddingTop:(()=>{switch(!0){case S&&u:return 50;case S&&!u:return 78;case!S&&u:return 48;case!S&&!u:return 36}})()},collectionIcon:{flexGrow:0,flexShrink:0,width:36,height:36,borderRadius:6,marginRight:10,marginLeft:3},collectionTitle:{height:S?24:30,width:600,marginTop:S?6:3,borderRadius:15},pageCoverPhoto:{width:"100%",height:f},pageCoverPadding:{width:"100%",height:t},pageIconContainer:{maxWidth:"100%",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:h?"100%":900,height:36},pageIcon:{position:"relative",top:u?-42:0,width:78,height:78,marginLeft:2,borderRadius:16},pageTitleContainer:{display:"flex",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:h?"100%":900,maxWidth:"100%",paddingTop:i},pageTitle:{marginTop:S?3:0,height:S?24:30,width:600,borderRadius:15}}}),[h,u,g,f,S,o]);return m||o===r().R?(0,p.jsxs)(p.Fragment,{children:[u&&(0,p.jsx)(c().Z,{style:y.collectionCoverPhoto}),(0,p.jsxs)("div",{style:y.collectionTitleContainer,children:[g&&(0,p.jsx)(c().Z,{emphasized:!0,style:y.collectionIcon}),(0,p.jsx)(c().Z,{style:y.collectionTitle})]})]}):(0,p.jsxs)(p.Fragment,{children:[u?(0,p.jsx)(c().Z,{style:y.pageCoverPhoto}):(0,p.jsx)("div",{style:y.pageCoverPadding}),g&&(0,p.jsx)("div",{style:y.pageIconContainer,children:(0,p.jsx)(c().Z,{emphasized:!0,style:y.pageIcon})}),(0,p.jsx)("div",{style:y.pageTitleContainer,children:(0,p.jsx)(c().Z,{style:y.pageTitle})})]})}function m(e){let{isVisible:t,peekMode:o,store:c}=e;const{WindowSizeStore:d}=(0,i().O7)(),m=(0,i().Fy)(),h=(0,a().YB)(),S=m.isPhone,f=m.isMobileNative,y=l().R6(m.isElectronMac),v=(0,n().VK)((()=>{const e=o===r().l||o===r().R||S?y:0;return{top:d.getSafePaddingTopCSS(e),bottom:d.getSafePaddingBottomCSS(0),left:d.getSafePaddingLeftCSS(0),right:d.getSafePaddingRightCSS(0)}}),[d,o,S,y]),x=(0,s().yK)((()=>({root:{position:"absolute",...v,display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"none"}})),[v]);return(0,u().Z)(t,f?0:10,0)?(0,p.jsx)("div",{role:"progressbar","aria-valuetext":h.formatMessage({id:"frameLoadingState.loading",defaultMessage:"Loading..."}),style:x.root,children:(0,p.jsx)(g,{store:c,peekMode:o})},"shimmer"):null}},138196:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(653476);var i=()=>o(670655),n=()=>o(191586),s=()=>o(852465);function r(e){var t;const{store:o,pageViewBlockStore:r,environment:l}=e,a=s().vV(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),c=a.length>0,d=0===a.length,u=0===a.filter((e=>e.getComments().length>0)).length,p="PageDetailsStore"in l&&l.PageDetailsStore.getToggleState({environment:l,type:"discussion",id:o.id}),g={type:"hidden"},m=o.getAssociatedCollectionStore()??o,h="section_hide"===(0,i().vC)(null===(t=m.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==r?void 0:r.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!d)&&(d||c&&(!1===p||void 0===p&&h)))return g;if(h)return g;const S=o.pathIsDead(),f=l.currentUser.isLoggedIn();if(d&&S)return g;const y=f&&o.canComment()&&u&&!(0,n().a_)(o)&&(!(0,n().Wt)(o)||(0,n().bm)(o));return!y&&d?g:{type:"visible",showDiscussionInput:y,unresolvedDiscussionStores:a}}},281510:(e,t,o)=>{o.d(t,{Z:()=>oe});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(666669),l=()=>o(955620),a=()=>o(788860),c=()=>o(269299);const d=1e3;function u(e){if(e){const t=(0,l().QaF)(e.getValue());return Boolean(t)}return!1}function p(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function g(e){const{environment:t,pageId:o,isExpanded:i,store:n,userSettingsStore:s,descriptionStore:r}=e,l=n.state.isExpanded;n.setState({isExpanded:i});u(r)&&s&&l!==i&&c().createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,canUndo:!0,perform:e=>{if(i){const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:o}};c().applyOperation({store:s,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:o}};c().applyOperation({store:s,transaction:e,operation:t});let i=p(s);for(;i.length>d;){const t=i[0],o={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};c().applyOperation({store:s,transaction:e,operation:o}),i=p(s)}}}})}var m=()=>o(990966),h=()=>o(778447),S=()=>o(718959),f=()=>o(191586),y=()=>o(309797),v=()=>o(657320),x=()=>o(535014),b=()=>o(349220),C=()=>o(513670),k=()=>o(707513),w=()=>o(970105),V=()=>o(943620),M=()=>o(384241),P=()=>o(654133),_=()=>o(623498),j=()=>o(12512),I=()=>o(191003),B=()=>o(122479),T=()=>o(339523),K=()=>o(279386),L=()=>o(127519),D=o(785893);function E(e){let{descriptionStore:t,disabled:o,toggleStore:i,pageId:n,userSettingsStore:s,collectionStore:r,locked:l,canEdit:a}=e;return(0,D.jsx)("div",{style:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:12},children:(0,D.jsx)(U,{descriptionStore:t,disabled:o,toggleStore:i,pageId:n,userSettingsStore:s,collectionStore:r,locked:l,canEdit:a})})}const Z=i.memo(E);function H(e){return e.isExpanded()}function R(e){let{collectionStore:t}=e;const o=(0,s().VK)((()=>t&&t.getIcon()),[t]);return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,D.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,x().b)({width:12})}),(0,D.jsx)("div",{children:(0,D.jsx)("div",{children:(0,D.jsx)(a()._H,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,D.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:k().Ue.bold},children:[o&&(0,D.jsx)(V().Z,{disabled:!0,icon:o,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),t&&(0,D.jsx)(M().Z,{store:t,style:{display:"inline"}})]})}})})})]})}function F(e){return!0}function A(e){return!0}function O(e,t,o,i,n,s){H(t)||e.preventDefault(),function(e,t,o,i,n){g({environment:i,pageId:t,isExpanded:!H(e),store:e,userSettingsStore:n,descriptionStore:o})}(t,o,i,n,s)}function W(e,t,o,i,n,s){if(!function(e,t,o){const i=o&&o.publicEditModeStore.state,n=(0,b().TO)((0,T().sQ)(e));return!t&&!(0,B().Ix)(i)&&"suggest"!==K().MT.getMode(n)&&e.canEdit()}(o,i,s))return;if(e.preventDefault(),n&&n.isComposing())return;const r=L().default.state;if("editing"===r.mode){const e=(0,I().QY)(r.multiSelection);if(!e)return;const i=null!=s&&s.pageStore?K().MT.getMode(s.pageStore):"default";c().createAndCommit({userAction:"PageDescription.handleEnter",environment:t,canUndo:!0,perform:n=>{w().hJ({environment:t,editorMode:i,store:o,string:"\n",selection:e.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:n})}})}}const z={fontSize:14,paddingLeft:6,paddingBottom:4,paddingTop:3,width:780};function N(e){let{descriptionStore:t,disabled:o,toggleStore:r,pageId:l,userSettingsStore:c}=e;const d=(0,n().O7)(),u=(0,a().YB)(),{device:p}=d,g=(0,v().l)(),m=(0,i.useRef)(null),h=(0,i.useCallback)((e=>W(e,d,t,o,m.current,g)),[d,t,o,g,m]),S=(0,s().VK)((()=>H(r)),[r]);return t?(0,D.jsx)(_().Z,{ref:m,store:t,style:z,disabled:o,placeholder:u.formatMessage({defaultMessage:"Add a description…",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disableMentions:!0,onTab:F,onUntab:A,onEnter:h,onClick:S?C().ZT:e=>O(e,r,l,t,d,c),disableStyleAnnotations:p.isMobileBrowser,disableInsertedDeletedAnnotations:p.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline",inPageFind:j().B3.none}):null}function U(e){let{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:r,collectionStore:l,locked:a,canEdit:c}=e;return(0,n().O7)().device.isMobile?(0,D.jsx)(N,{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:r}):(0,D.jsx)(P().Z,{renderTooltip:()=>(0,D.jsx)(R,{collectionStore:l}),disableTooltip:!a||!c,render:e=>(0,D.jsx)("div",{children:(0,D.jsx)("div",{style:{display:"flex",cursor:"text"},...e,children:(0,D.jsx)(N,{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:r})})})})}var G=()=>o(589525),J=()=>o(876822);class X extends(()=>o(263184))().default{getInitialState(){return{isExpanded:!0}}isExpanded(){return Boolean(this.state.isExpanded)}}const Y=X;var q=()=>o(311562),$=()=>o(963310),Q=()=>o(265640);function ee(e){const{canEdit:t,context:c,controlHoverStyle:d,disabled:h,handleHeaderMouseEnter:v,handleHeaderMouseLeave:x,headerFocusStore:b,isEditable:C,paddingLeft:k,paddingRight:w,pageCover:V,store:M,topControls:P,onCollectionViewBlockMount:_}=e,j=(0,n().O7)(),I=(0,n().Fy)(),[B,T]=(0,i.useState)(!!I.isAndroid);(0,i.useEffect)((()=>{(async()=>{if((0,o(148126).Sr)(j)){const e=j.RouterStore.getState();if((0,o(54193).FK)(e.route)){const e=(0,o(772084).gR)(M),t=null==e?void 0:e.getSiteStore();await(null==t?void 0:t.load());const i=null==t?void 0:t.getSettings(),n=null==i?void 0:i.embedSettings;return void T(Boolean(!(null!=n&&n.hideTitle)))}}T(!0)})()}),[j,M]);const L=(0,i.useMemo)((()=>new Y),[]),E=(0,s().VK)((()=>M.getCollectionViewSourceDescriptionStore()),[M]),H=(0,s().VK)((()=>M.getCollectionViewSourceCollectionStore()),[M]),R=(0,s().VK)((()=>u(E)),[E]),F=(0,s().VK)((()=>M.getTitleStore()),[M]),A=(0,s().VK)((()=>K().MT.getMode(M)),[M]),O=i.useRef(!1);(0,i.useEffect)((()=>{if(!O.current){O.current=!0;const{currentUserSettingsStore:e}=J().default.state;!function(e){const{pageId:t,store:o,userSettingsStore:i,descriptionHasText:n}=e;let s=n;p(i).includes(t)&&(s=!1),o.setState({isExpanded:s})}({pageId:M.id,store:L,userSettingsStore:e,descriptionHasText:R})}}),[R,M.id,L]);const W=(0,s().VK)((()=>l().QaF(null==F?void 0:F.getValue())),[F]),z=(0,s().VK)((()=>!(0!==M.getCollectionViewStores().length)||(!!M.getCollectionViewSourceCollectionStore()||!!F&&(!!W||!!(0,o(550054).J5)(F)))),[M,F,W]),N=(0,s().VK)((()=>S().qG(M.id)||S().X(M.id)),[M]),U=(0,s().VK)((()=>(0,f().kC)(M,j)),[M,j]),X=(0,s().VK)((()=>(0,f().du)(M,c,j)),[M,c,j]),q=(0,y().D9)(M),$=(0,y().GB)(M),ee=q||$,oe=()=>{const{currentUserSettingsStore:e}=J().default.state,t=M.id;g({environment:j,pageId:t,isExpanded:!1,store:L,userSettingsStore:e,descriptionStore:E})},ie=()=>{const{currentUserSettingsStore:e}=J().default.state,t=M.id;g({environment:j,pageId:t,isExpanded:!0,store:L,userSettingsStore:e,descriptionStore:E})},ne=(0,s().VK)((()=>{const e=L.isExpanded();return(u(E)||C)&&e}),[E,C,L]),se=(0,s().VK)((()=>{if(!ne)return{type:"hidden"};if(!E)return{type:"hidden"};if(!L.isExpanded())return{type:"hidden"};const{currentUserSettingsStore:e}=J().default.state;return{type:"visible",descriptionStore:E,currentUserSettingsStore:e,collectionStore:H}}),[E,H,L,ne]),re=(0,s().VK)((()=>M.isNonEditableState()),[M]),le=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(474788).E)(t)&&b.setState(!0)},ae=()=>{const{currentUserSettingsStore:e}=J().default.state,t=E;g({environment:j,pageId:M.id,store:L,userSettingsStore:e,isExpanded:!0,descriptionStore:t}),o(492788).default.afterNextFlush((()=>{t&&!I.isMobileBrowser&&m().setSelectionAtEnd({store:t})}))},ce=()=>{b.setState(!1)},de=()=>{F&&(o(879952).ZH({environment:j}),m().setSelectionAtEnd({store:F}))},ue=()=>{if(C&&!H&&!W)return(0,D.jsx)(Q().D,{style:d,isLightGray:!0,onClick:de,icon:o(562027).c,children:I.isSmallPhone?(0,D.jsx)(a()._H,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,D.jsx)(a()._H,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")},pe=()=>{if(H)return ne?(0,D.jsx)(Q().D,{isLightGray:!0,style:d,onClick:oe,icon:r().z,children:(0,D.jsx)(a()._H,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):C&&!R&&"suggest"!==A?(0,D.jsx)(Q().D,{isLightGray:!0,style:d,onClick:ae,icon:r().z,children:I.isSmallPhone?(0,D.jsx)(a()._H,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,D.jsx)(a()._H,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):R?(0,D.jsx)(Q().D,{isLightGray:!0,style:d,onClick:ie,icon:r().z,children:I.isSmallPhone?(0,D.jsx)(a()._H,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,D.jsx)(a()._H,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):void 0},ge=()=>(0,D.jsxs)(o(441672).Z,{store:M,context:e.context,onFocus:le,onBlur:ce,children:[P,ue(),pe()]}),me=(0,s().VK)((()=>(0,G().$3)(j)+(0,G().ll)(j,!1)-o(505121).Z.state-k),[j,k]),he=(0,s().VK)((()=>{const{WindowSizeStore:e}=j;return{paddingLeft:e.getSafePaddingLeftCSS(k),paddingRight:e.getSafePaddingRightCSS(w)}}),[j,k,w]);return(0,D.jsxs)(D.Fragment,{children:[B&&function(){const i=N?null:(0,D.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,D.jsx)(o(32313).Z,{...e}),z&&(0,D.jsx)(o(21535).V,{...e})]});return(0,D.jsxs)("div",{style:U,onMouseEnter:v,onMouseLeave:x,children:[V,(0,D.jsxs)(o(628370).Z,{animate:{width:X},style:{maxWidth:"100%",paddingLeft:he.paddingLeft},children:[ge(),(0,D.jsxs)("div",{style:{paddingRight:he.paddingRight,marginBottom:8,width:me},children:[i,ee&&(0,D.jsx)(o(986286).yY,{store:M}),"visible"===se.type&&(0,D.jsx)(Z,{disabled:!C,canEdit:t,locked:re,pageId:M.id,toggleStore:L,descriptionStore:se.descriptionStore,collectionStore:se.collectionStore,userSettingsStore:se.currentUserSettingsStore}),(0,D.jsx)(o(179289).V,{store:M,context:c,layoutModule:void 0,disabled:h||"suggest"===A,wrapper:e=>(0,D.jsx)(o(857719).Pb,{className:"layout-content-with-divider",children:e})},M.id)]})]})]})}(),(0,D.jsx)(te,{store:M,paddingLeft:k,paddingRight:w,context:c,disabled:h,onMount:_})]})}function te(e){let{store:t,paddingLeft:o,paddingRight:i,context:r,disabled:l,onMount:a}=e;const c=(0,n().O7)(),d=(0,s().VK)((()=>(0,h().nZ)(t,c)),[t,c]);return(0,D.jsx)($().DZ,{overridePaddingLeft:o,overridePaddingRight:i,store:t,isFullScreen:!0,viewId:d,disabled:l,headerActionsBehavior:r===q().S.InAppTemplatePreview?"hidden":"default",onMount:a})}const oe=i.memo(ee,o(632314).Z)},441672:(e,t,o)=>{o.d(t,{Z:()=>d});o(667294);var i=()=>o(146947),n=()=>o(219727),s=()=>o(142735),r=()=>o(846550),l=()=>o(707513),a=()=>o(191586),c=o(785893);function d(e){const{store:t,context:o,onFocus:d,onBlur:u,children:p}=e,g=(0,n().O7)(),m=(0,s().VK)((()=>t.hasIcon()),[t]),h=(0,s().VK)((()=>t.hasCover()),[t]),S=(0,s().VK)((()=>t.isCollectionView()),[t]),f=(0,s().VK)((()=>(0,a().di)(g)),[g]),y=(0,s().VK)((()=>(0,a().yp)(t)),[t]),v=(0,r().yK)((e=>{const{device:t}=g,{isMobile:n}=t,s=(0,a().uU)(o,g);let r,c,d;return n?h?(d="block",r=s,c=4):(d="flex",r=s,c=f):S||y?(d="flex",h?(r=16,c=4):(r=4,c=4)):(d="flex",m?(r=8,c=4):h?(r=16,c=4):(r=s,c=f)),{container:{display:d,justifyContent:"flex-start",flexWrap:"wrap",paddingTop:r,paddingBottom:c,marginLeft:-1,color:e.lightTextColor,fontFamily:l().F5(i().locale).sans,pointerEvents:"auto"}}}),[o,g,h,m,S,y,f]);return(0,c.jsx)("div",{onFocus:d,onBlur:u,style:v.container,className:"notion-page-controls",children:p})}},857815:(e,t,o)=>{o.d(t,{Z:()=>p});var i=o(667294),n=()=>o(219727),s=()=>o(383499),r=()=>o(788860),l=()=>o(441530),a=()=>o(269299),c=()=>o(521412),d=()=>o(265640),u=o(785893);function p(e){const{store:t,style:o,label:p}=e,g=(0,n().O7)(),[m,h]=(0,i.useState)(!1),S=(0,n().Fy)(),f=(0,i.useCallback)((async()=>{const e=t.getCoverStore();if(!e)return;if(e.getValue())return;h(!0);const o=(await c().X.load()).default;a().createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:g,canUndo:!0,perform:i=>{l().tk({transaction:i,store:t,coverStore:e,pageCovers:o})}}),h(!1)}),[g,t]);return!0===m?(0,u.jsx)(d().D,{style:o,isLightGray:!0,disabled:!0,icon:s().P,children:S.isSmallPhone?(0,u.jsx)(r()._H,{id:"pageAddCoverButton.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,u.jsx)(r()._H,{id:"pageAddCoverButton.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,u.jsx)(d().D,{style:o,isLightGray:!0,onClick:f,icon:s().P,children:p},"add-cover")}},628621:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294),n=()=>o(219727),s=()=>o(969269),r=()=>o(421654),l=()=>o(269299),a=()=>o(265640),c=o(785893);function d(e){const{store:t,afterOnClick:o,style:d,label:u}=e,p=(0,n().O7)(),g=(0,i.useCallback)((()=>{l().createAndCommit({userAction:"PageAddIconButton.handleAddRandomIconClick",environment:p,canUndo:!0,perform:e=>{r().is({store:t,transaction:e})}}),o()}),[p,o,t]);return(0,c.jsx)(a().D,{style:d,isLightGray:!0,onClick:g,icon:s().o,children:u},"add-icon")}},386790:(e,t,o)=>{o.d(t,{Z:()=>g});o(267602),o(653476),o(470928),o(241792);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(513670),l=()=>o(421654),a=()=>o(269299),c=()=>o(494630),d=()=>o(119891),u=o(785893);function p(e){const{store:t,collectionStore:i,disabled:c,locked:p,propertyIds:g,blockPropertyValueOverlayStore:h,format:S,type:f}=e,y=(0,n().O7)(),v=(0,o(125659).DK)(),x=(0,s().VK)((()=>null==v?void 0:v.permissionScopesStore.state),[v]);return v?"minimal"===f?(0,u.jsx)(u.Fragment,{children:g.map(((e,o)=>(0,u.jsx)(m,{format:S,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:f,isLast:o===g.length-1},e)))}):c||p||null==x||!x.canConfigureCollection?(0,u.jsx)("div",{style:d().yA,children:g.map(((e,o)=>(0,u.jsx)(m,{format:S,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:f,isLast:o===g.length-1},e)))}):(0,u.jsx)(d().ZP,{direction:"vertical",keys:g,renderKey:(e,o)=>(0,u.jsx)(m,{format:S,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:f,isLast:o===g.length-1},e),onDrop:e=>function(e,t,o,i){const n=o.collection_page_sections||[],s=r().oA(e.map((e=>n.find((t=>t.section===e))))),c=n.filter((t=>!e.includes(t.section))),d=[...s,...c];a().createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:i,canUndo:!0,perform:e=>{l().FH({stores:[t],update:{collection_page_sections:d},transaction:e})}})}(e,i,S,y)}):null}const g=i.memo(p,o(632314).Z),m=i.memo((function(e){let t,{propertyId:i,format:r,locked:l,collectionStore:a,store:d,disabled:p,blockPropertyValueOverlayStore:g,visibility:m,isLast:h}=e;if(m)t=m;else{const e=r.collection_page_sections??[];t=e.filter((e=>e.section===i)).map((e=>e.visibility))[0]}const S=(0,n().Fy)(),[f,y]=(0,o(407544).e)(),v=(0,o(291848).w)(),x="inline"===t,b=!h&&"minimal"!==t,C=(0,s().VK)((()=>d.canEdit()),[d]),k=(0,o(846550).yK)((()=>{const e={position:"absolute",visibility:y?"visible":"hidden",left:y?y+4:void 0,top:0};return{discussionIndicator:S.isMobile?{flexShrink:0}:x?e:{},wrapperDiv:{position:"relative",width:"minimal"!==t?"100%":void 0,...b?{marginBottom:c().Kq+c().Yq+(C?-4:0)}:{}},selectable:x?{}:{display:"flex",alignItems:"center"}}}),[y,S.isMobile,b,x,t,C]),w=(0,u.jsx)(o(874018).zl,{store:d,propertyId:i,style:k.discussionIndicator});return(0,u.jsx)("div",{className:"minimal"!==t?"layout-content":void 0,style:k.wrapperDiv,ref:f,children:(0,u.jsxs)(o(307369).Z,{store:d,analyticsName:"page_property",style:k.selectable,children:[(0,u.jsx)(o(679791).m,{store:d,property:i,disabled:p,locked:l,format:o(356321).C.PropertyModule,tableWrap:!1,blockPropertyValueOverlayStore:g,collectionStore:a,propertyVisibility:t},i),v?null:w]})})}))},160740:(e,t,o)=>{o.d(t,{Z:()=>b});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(846550),r=()=>o(109477),l=()=>o(562842),a=()=>o(521913),c=()=>o(788860),d=()=>o(568017),u=()=>o(139224),p=()=>o(887274),g=()=>o(594546),m=()=>o(417746),h=()=>o(148976),S=()=>o(338855),f=()=>o(176691),y=()=>o(308939),v=()=>o(729775),x=o(785893);const b=function(e){let{collectionStore:t,collectionContextStore:o}=e;return(0,n().VK)((()=>t.isSyncedCollection()),[t])?(0,x.jsx)(V,{collectionStore:t,collectionContextStore:o}):null};function C(e){return{color:e.mediumTextColor,fontSize:14,lineHeight:1.2}}function k(e){let{collectionStore:t,collectionContextStore:o}=e;const r=(0,s().Fg)(),p=(0,i().O7)(),g=(0,n().VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),m=(0,n().VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),h=(0,n().VK)((()=>null==o?void 0:o.numberChildrenUnfurledStore.state),[o]),S=(0,n().VK)((()=>null==o?void 0:o.numberChildrenReceivedStore.state),[o]),y=h&&S&&h/S<1&&!p.device.isMobile,b=g&&p.device.isMobile;let k;return m&&(k=(0,x.jsx)(c()._H,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,f().IS)(m,{useLowercase:!0})}})),"row_limit_exceeded"===g?(0,x.jsx)(v().Z,{style:{display:"inline-flex",...C(r)},onClick:()=>function(e){e&&(u().r$({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),u().H4({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(o),children:(0,x.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...C(r)},children:[(0,a().t)({fill:(0,d().fi)("orange",r).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,x.jsx)(c()._H,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):y||b?(0,x.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...C(r)},children:[(0,x.jsx)(c()._H,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,l().b)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,x.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...C(r)},children:k})}function w(){const e=(0,i().O7)(),t=(0,s().yK)((e=>({span:{color:e.mediumTextColor},linkBox:{fontSize:"14px",lineHeight:1.2,color:e.blueColor,marginLeft:"5px",marginRight:"5px"}})),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{style:t.span,children:"•"}),(0,x.jsx)(v().Z,{inline:!0,onClick:async()=>{await p().jW({environment:e,from:"collection_header"});const t=y().ZP.createNewFlowId();(0,g().j)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"database_sync",flowId:t}}})},style:t.linkBox,hoveredStyle:{background:"none",textDecoration:"underline"},children:(0,x.jsx)(c()._H,{defaultMessage:"Improve your Jira sync",id:"synced.improve_jira_sync.label"})})]})}function V(e){let{collectionStore:t,collectionContextStore:o}=e;const i=(0,s().Fg)(),l=(0,n().VK)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),a=(0,n().VK)((()=>t.getSpaceId()),[t]),c=(0,n().VK)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),d=(0,n().VK)((()=>l&&(0,m().pI)(l,a)),[a,l]),u=(0,n().VK)((()=>(0,S().wY)(l,a)),[a,l]),p=(0,n().VK)((()=>{if(!(0,h().K6)())return!1;const e=t.getFormat().uri;return!!e&&(t.getFormat().external_collection_type!==r().Vj.Jira&&(0,S().Ng)(e))}),[t]);return(0,x.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[d&&(0,x.jsx)(v().Z,{href:d,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...C(i)},external:!0,children:u}),c?(0,x.jsx)("span",{style:{color:i.mediumTextColor},children:"•"}):null,c?(0,x.jsx)(k,{collectionStore:t,collectionContextStore:o}):null,p&&(0,x.jsx)(w,{})]})}},763986:(e,t,o)=>{o.d(t,{d:()=>i});const i=(0,o(667294).createContext)(0);i.displayName="PageViewHorizontalOffsetContext"},937905:(e,t,o)=>{o.d(t,{D:()=>s});var i=()=>o(677559);const n=new(i().Ss)("FormBlock",(async()=>await Promise.all([o.e(62743),o.e(37358),o.e(7312),o.e(80129),o.e(11189),o.e(53329),o.e(72586),o.e(53335),o.e(50471),o.e(2971),o.e(52065),o.e(47559),o.e(93455)]).then(o.bind(o,393478)))),s=(0,i().kF)(n,(e=>e.FormBlock))},448438:(e,t,o)=>{o.d(t,{G:()=>s});var i=()=>o(677559);const n=new(i().Ss)("GenerateSocialMediaPreviewImageWrapper",(async()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(90698),o.e(37358),o.e(7312),o.e(5242),o.e(31189),o.e(90424),o.e(69343),o.e(81580),o.e(84325),o.e(2933),o.e(94556),o.e(78701),o.e(38804),o.e(17100),o.e(4387),o.e(11189),o.e(53329),o.e(71896),o.e(72586),o.e(53335),o.e(46616),o.e(54940),o.e(20224),o.e(46546),o.e(98721),o.e(50471),o.e(49498),o.e(2971),o.e(20634),o.e(91253),o.e(63707),o.e(61171),o.e(4014),o.e(63502),o.e(7678),o.e(5006),o.e(20919),o.e(75377),o.e(99590),o.e(52435),o.e(69437),o.e(81063),o.e(75066),o.e(81917),o.e(88128),o.e(97934),o.e(37317),o.e(91e3),o.e(18162),o.e(91752),o.e(78517),o.e(99537),o.e(80730),o.e(11770),o.e(83962),o.e(62084),o.e(79289),o.e(21862),o.e(41589),o.e(71641),o.e(23006),o.e(72646),o.e(10553),o.e(74879),o.e(67601),o.e(37239),o.e(40692),o.e(20683),o.e(22467),o.e(27039),o.e(97083),o.e(52065),o.e(18534),o.e(39179),o.e(77555),o.e(38632),o.e(78856),o.e(19592),o.e(47559),o.e(22371),o.e(73230),o.e(25911),o.e(54843),o.e(76540),o.e(22337),o.e(93536),o.e(53936),o.e(23721),o.e(32175),o.e(66283),o.e(22154),o.e(58586)]).then(o.bind(o,119963)))),s=(0,i().kF)(n,(e=>e.GenerateSocialMediaPreviewImageWrapper))},795597:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{constructor(){super()}getInitialState(){}}const n=new i},580215:(e,t,o)=>{o.d(t,{M:()=>a,W:()=>c});var i=o(667294),n=()=>o(177357);const s=24*n().U6;function r(e){return l(e).status}function l(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=s?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-s}}function a(e){const[t,o]=(0,i.useState)((()=>r(e)));return(0,i.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function i(){t=void 0;const{status:n,nextUpdateInMs:s}=l(e);o(n),s&&(t=setTimeout(i,s))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,o]=(0,i.useState)((()=>Date.now())),s=(null==e?void 0:e.enabled)&&e.start_ts;return(0,i.useEffect)((()=>{if("number"!=typeof s)return;const e=s;let t;return function i(){const s=Date.now();o(s);const r=e*n().C0-s;if(r>0){const e=r%n().hM,o=0===e?n().hM:e;t=setTimeout(i,o)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[s]),{freezeStatus:r(e),minUntilFreeze:s?Math.floor((s*n().C0-t)/n().hM):void 0}}},639018:(e,t,o)=>{o.d(t,{v:()=>y});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(846550),r=()=>o(843403),l=()=>o(788860),a=()=>o(265640),c=()=>o(448419),d=()=>o(198829),u=()=>o(935753),p=()=>o(352230),g=()=>o(26796),m=()=>o(247904),h=()=>o(309797),S=o(785893);function f(e){let{store:t}=e;return(0,S.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:h().m4,onClick:h().h9,children:(0,S.jsx)(m().Z,{type:"page",store:t,headerText:(0,S.jsx)(l()._H,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function y(e){const{pageStore:t,backlinksButtonPopupStore:o,numBacklinks:m,customization:h={}}=e,{buttonStyles:y,buttonIsGray:v,buttonIsLightGray:x}=h,b=(0,i().O7)(),C=(0,n().VK)((()=>void 0!==m?m:(0,u().b)(t,b).backlinksCount),[b,t,m],{debugName:"BacklinksControlButton.useComputedStore"}),k=(0,n().VK)((()=>g().Z.getState().isOpen),[]),w=(0,s().yK)((e=>{const t=0===C&&k,o=e.text.quaternary;return{button:t?{color:o}:{},icon:t?{fill:o}:{}}}),[k,C]);return(0,S.jsx)(c().ZP,{buttonPopupStore:o,popupType:c().Z4.Popup,renderOrigin:e=>(e=>{let{buttonPopupEvents:t={}}=e;return(0,S.jsx)(a().D,{icon:e=>(0,r().J)({...e,transform:"rotate(180deg)",...w.icon}),style:{...y,...w.button},isGray:v,isLightGray:x,...t,children:(0,S.jsx)(l()._H,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, =0 {No backlinks} one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:C}})})})({buttonPopupEvents:e}),render:()=>{const e={menuType:p().o.Popup,width:500};return(0,S.jsx)(d().Z,{...e,children:C>0?(0,S.jsx)(f,{store:t}):null})}},"backlinkspopup")}},995764:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var i=()=>o(846550),n=o(785893);const s=(0,o(827282).IU)("layoutFilled",{viewBox:"0 0 14 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.00056 1.59766H2.40058C1.95875 1.59766 1.60059 1.95583 1.60059 2.39765V11.5976C1.60059 12.0394 1.95875 12.3976 2.40058 12.3976H5.00056C5.44238 12.3976 5.80055 12.0394 5.80055 11.5976V2.39765C5.80055 1.95583 5.44238 1.59766 5.00056 1.59766ZM11.6006 8.19981H9.00059C8.55877 8.19981 8.2006 8.55798 8.2006 8.99981V11.5998C8.2006 12.0417 8.55877 12.3998 9.00059 12.3998H11.6006C12.0424 12.3998 12.4006 12.0417 12.4006 11.5998V8.99981C12.4006 8.55798 12.0424 8.19981 11.6006 8.19981ZM9.00054 1.59766H11.6006C12.0423 1.59766 12.4005 1.95583 12.4005 2.39765V4.99763C12.4005 5.43946 12.0423 5.79762 11.6006 5.79762H9.00054C8.55871 5.79762 8.20054 5.43946 8.20054 4.99763V2.39765C8.20054 1.95583 8.55871 1.59766 9.00054 1.59766Z"}),(0,n.jsx)("path",{d:"M2.39999 2.2H4.99998V1H2.39999V2.2ZM2.19999 2.39999C2.19999 2.28953 2.28954 2.2 2.39999 2.2V1C1.6268 1 1 1.62679 1 2.39999H2.19999ZM2.19999 11.5999V2.39999H1V11.5999H2.19999ZM2.39999 11.7999C2.28954 11.7999 2.19999 11.7104 2.19999 11.5999H1C1 12.3732 1.6268 12.9999 2.39999 12.9999V11.7999ZM4.99998 11.7999H2.39999V12.9999H4.99998V11.7999ZM5.19997 11.5999C5.19997 11.7104 5.11043 11.7999 4.99998 11.7999V12.9999C5.77317 12.9999 6.39997 12.3732 6.39997 11.5999H5.19997ZM5.19997 2.39999V11.5999H6.39997V2.39999H5.19997ZM4.99998 2.2C5.11043 2.2 5.19997 2.28953 5.19997 2.39999H6.39997C6.39997 1.62679 5.77317 1 4.99998 1V2.2ZM9.00001 8.80215H11.6V7.60216H9.00001V8.80215ZM8.80001 9.00215C8.80001 8.89169 8.88955 8.80215 9.00001 8.80215V7.60216C8.22681 7.60216 7.60001 8.22896 7.60001 9.00215H8.80001ZM8.80001 11.6021V9.00215H7.60001V11.6021H8.80001ZM9.00001 11.8022C8.88955 11.8022 8.80001 11.7126 8.80001 11.6021H7.60001C7.60001 12.3753 8.22681 13.0022 9.00001 13.0022V11.8022ZM11.6 11.8022H9.00001V13.0022H11.6V11.8022ZM11.8 11.6021C11.8 11.7126 11.7105 11.8022 11.6 11.8022V13.0022C12.3731 13.0022 13 12.3753 13 11.6021H11.8ZM11.8 9.00215V11.6021H13V9.00215H11.8ZM11.6 8.80215C11.7105 8.80215 11.8 8.89169 11.8 9.00215H13C13 8.22896 12.3731 7.60216 11.6 7.60216V8.80215ZM11.6 1H8.99995V2.2H11.6V1ZM12.9999 2.39999C12.9999 1.62679 12.3731 1 11.6 1V2.2C11.7104 2.2 11.7999 2.28953 11.7999 2.39999H12.9999ZM12.9999 4.99997V2.39999H11.7999V4.99997H12.9999ZM11.6 6.39996C12.3731 6.39996 12.9999 5.77317 12.9999 4.99997H11.7999C11.7999 5.11043 11.7104 5.19997 11.6 5.19997V6.39996ZM8.99995 6.39996H11.6V5.19997H8.99995V6.39996ZM7.59996 4.99997C7.59996 5.77317 8.22675 6.39996 8.99995 6.39996V5.19997C8.8895 5.19997 8.79996 5.11043 8.79996 4.99997H7.59996ZM7.59996 2.39999V4.99997H8.79996V2.39999H7.59996ZM8.99995 1C8.22675 1 7.59996 1.62679 7.59996 2.39999H8.79996C8.79996 2.28953 8.8895 2.2 8.99995 2.2V1Z"})]})});var r=()=>o(788860),l=()=>o(265640);function a(e){const{style:t,onClick:o}=e,a=(0,i().yK)((e=>({buttonIcon:{width:15,height:15,fill:"dark"===e.mode?"#5A5A5A":"#B9B9B7",color:"dark"===e.mode?"#5A5A5A":"#B9B9B7"}})),[]);return(0,n.jsx)(l().D,{style:t,iconStyle:a.buttonIcon,isLightGray:!0,onClick:o,icon:s,children:(0,n.jsx)(r()._H,{id:"pageViewBlock.customizeLayout",defaultMessage:"Customize layout"})},"customize-layout")}},847207:(e,t,o)=>{o.d(t,{X:()=>l});o(667294);var i=()=>o(846550),n=()=>o(788860),s=()=>o(312578),r=o(785893);function l(){const e=(0,i().yK)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.mediumTextColor}})),[]);return(0,r.jsxs)("div",{style:e.wrapper,children:[(0,r.jsx)(s().Z,{}),(0,r.jsx)("div",{style:e.message,children:(0,r.jsx)(n()._H,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}},45830:(e,t,o)=>{o.d(t,{$:()=>n});o(267602),o(653476),o(470928),o(228244);var i=()=>o(70191);function n(e){const{collectionStore:t,module:o,isMobile:n}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const s=t.getSchema(),r=!!s&&(0,i().zD)({collectionSchema:s,module:o}).length>0,l=(0,i().nJ)({collectionStore:t}).count>0;return!(!n||!l)||!r&&l}},349509:(e,t,o)=>{o.d(t,{Z:()=>A});o(670560),o(267602),o(653476),o(470928),o(241792);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(532850),l=o(785893);const a=(0,o(827282).IU)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})});var c=()=>o(235605),d=()=>o(788860),u=()=>o(707513),p=()=>o(990966),g=()=>o(874018),m=()=>o(58836),h=()=>o(265640),S=()=>o(448419),f=()=>o(677559);const y=new(f().Ss)("floatingTableOfContents",(async()=>await o.e(26534).then(o.bind(o,587262)))),v=(0,f().kF)(y,(e=>e.FloatingTableOfContents));var x=()=>o(247724),b=()=>o(670655),C=()=>o(352230),k=()=>o(191586);o(821057);var w=()=>o(852465),V=()=>o(589525),M=()=>o(749826),P=()=>o(311562),_=()=>o(482162),j=()=>o(57956),I=()=>o(639018),B=()=>o(293936),T=()=>o(427886),K=()=>o(718959),L=()=>o(942226),D=()=>o(505121),E=()=>o(242921);function Z(e){let{pageStore:t,disabled:r,viewsModule:a,wrapper:c,templatePickerMenuListStore:d}=e;const u=(0,n().O7)(),[p,g]=(0,i.useState)(void 0),{collectionViewBlockStore:m,viewsModuleContext:h,isViewsMainModule:S}=(0,s().VK)((()=>{if(!a)return{collectionViewBlockStore:void 0,collectionViewId:void 0,viewsModuleContext:void 0,isViewsMainModule:!1};const e=o(826955).G.createChildStore(t,a.collection_view_block_pointer);return{collectionViewBlockStore:e,viewsModuleContext:{location:"page",viewsModule:a,currentPageStore:t,collectionViewBlockStore:e},isViewsMainModule:"viewsMain"===a.type}}),[t,a]);!function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,environment:n,collectionContextStore:r}=e;const l=(0,s().VK)((()=>{if(!t||!o)return;const e=n.RouterStore.state.route;if("page"===e.name&&e.scrollToBlockId){const e=o.getCollectionViewStores().find((e=>"page"===e.getType()));return null==e?void 0:e.id}}),[n,o,t]);(0,i.useEffect)((()=>{r&&l&&(0,T().f)({environment:n,collectionContextStore:r,collectionViewId:l,isFullScreen:r.isFullScreenStore.state,isRootChild:r.isRootChildStore.state,isInPeekRenderer:r.isInPeekRendererStore.state})}),[n,l,o,t,r])}({isViewsMainModule:S,collectionViewBlockStore:m,environment:u,collectionContextStore:p});const f=function(e){const t=(0,n().O7)();return(0,s().VK)((()=>{if(!e)return 0;const{device:o}=t,i=t.WindowSizeStore.state.width,n=Boolean(e&&(0,L().wq)(e));if(n){const e=(0,E().rb)({environment:t,isInPeek:!0});return _().default.getPeekModeWidth(i)-D().Z.state-e}const s=(0,V().ll)(t,n)-(0,V().vJ)(t);let r=i-D().Z.state-s;if(!(0,V().Jr)(t))return r;const{shouldShowSidebar:l}=(0,K().h1)(t);return o.isMobile&&!o.isTablet||!l||(r-=(0,V().Wk)(t)),r}),[t,e])}(m),y=function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,collectionContextStore:i}=e;return(0,s().VK)((()=>{if(!t||!i)return!1;const e=null==i?void 0:i.collectionViewStore();return 1===(null==o?void 0:o.getCollectionViewStores().length)&&"page"===(null==e?void 0:e.getType())&&!(null!=e&&e.getFormat().page_pointer)}),[t,i,o])}({isViewsMainModule:S,collectionViewBlockStore:m,collectionContextStore:p});return m&&h?c((0,l.jsx)("div",{style:S?{minHeight:"60vh"}:void 0,children:(0,l.jsx)(o(963310).DZ,{store:m,isFullScreen:!1,hideViewTabBar:y,headerActionsBehavior:y?"hidden":"always_show",headerAllowedActions:H,disabled:r,disableHoverMenu:!0,fullWidth:f,showOnlyCurrentView:!S,isUnlistedView:!1,viewsModuleContext:h,setCollectionContextStore:g,templatePickerMenuListStore:d})})):null}const H=["filter","sort","search","addItem","noDate"];var R=()=>o(494630);class F extends i.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){o(680146).vd("appPlatform"),this.setState({hasError:!0,error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallbackComponent:this.props.children}}const A=(0,i.forwardRef)((function(e,t){const{store:y,context:_,postContext:B,disabled:T,templatePickerMenuListStore:K,styleOverrides:L,onHeaderMouseEnter:D,onHeaderMouseLeave:E,pageCoverHeight:Z,isEditable:H,getControlHoverStyle:R,pageViewBlockStores:A,pageViewBlockAccessor:W,onDetailMouseEnter:z,onDetailMouseLeave:N,modules:U}=e,G=(0,n().O7)(),J=(0,d().YB)(),X=(0,s().VK)((()=>y.getAssociatedCollectionStore()),[y],{debugName:"PageLayoutModules(collectionStore).useComputedStore"}),Y=(0,s().VK)((()=>y.getSchema()),[y],{debugName:"PageLayoutModules(schema).useComputedStore"}),q=(0,s().VK)((()=>(0,o(138196).Z)({environment:G,store:y,pageViewBlockStore:A.pageViewBlockStore})),[G,y,A.pageViewBlockStore]),$=(0,s().VK)((()=>{const e=(0,k().y6)(y);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const t=Y[e.section];if(!t||"relation"!==t.type)return;const o=y.getPropertyValue(e.section),i=(0,r().j$)({relationValue:(0,r().rq)(o),propertySchema:t,getRecordModel:y.getRecordModel,includeDeleted:M().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:M().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:M().default.checkGate({gateName:"relations_show_no_access"})}).length;return"inline"===e.visibility&&Y[e.section]&&0!==i})).map((e=>e.section))}),[Y,y],{debugName:"PageLayoutModules(inlinePropertyIDs).useComputedStore"}),Q=(0,o(846550).yK)((e=>({bottomControls:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:e.lightTextColor,fontFamily:u().F5(o(146947).locale).sans},detailsButton:{fontWeight:u().Ue.medium,color:e.mediumTextColor},fallbackComponent:{display:"flex",color:e.errorText,padding:10,marginBottom:10,background:e.layoutModuleErrorBackground,borderRadius:4},fallbackIcon:{color:e.errorText,fill:e.errorText,marginRight:5,width:14}})),[]),ee=(0,s().VK)((()=>(null==L?void 0:L.paddingX)??(0,k().RH)(_,G)),[_,G,null==L?void 0:L.paddingX],{debugName:"PageLayoutModules(horizontalPadding).useComputedStore"}),te=(0,i.useCallback)((()=>(0,w().Xp)(y,{recursivelyLoadAllDiscussions:!1})),[y]),oe=(0,i.useCallback)((()=>te()>0),[te]),ie=(0,s().VK)((()=>{const e=(0,k().y6)(y);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const t=Y[e.section];if(!t||"relation"!==t.type)return;const o=y.getPropertyValue(e.section),i=(0,r().j$)({relationValue:(0,r().rq)(o),propertySchema:t,getRecordModel:y.getRecordModel,includeDeleted:M().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:M().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:M().default.checkGate({gateName:"relations_show_no_access"})}).length;return"minimal"===e.visibility&&Y[e.section]||"inline"===e.visibility&&Y[e.section]&&0===i})).map((e=>e.section))}),[Y,y],{debugName:"PageLayoutModules(minimalPropertyIDs).useComputedStore"}),{value:ne}=(0,f().XJ)(g().commentsDependency),{value:se}=(0,f().XJ)(o(650996).assistantDependency),re=(0,s().VK)((()=>{var e;if(!se)return!1;const t=se.clientSkillHelpers.createClientGlobalSkill("fill_title");return 1===se.assistantSurfaceValidators.filterAssistantSurfaceActionsForContext(se.assistantSurfaceValidators.clientSkillToAssistantSurfaceAction([t]),{type:"entrypoint",entrypoint:"pageStart",pageStore:y,isMobile:G.device.isMobile,userSettings:null===(e=o(876822).default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}).length}),[se,G.device.isMobile,y]),le=(0,s().VK)((()=>(0,o(935753).b)(y,G).backlinksCount),[G,y],{debugName:"PageLayoutModules.useComputedStore:numberOfBacklinks"}),ae=(0,j().x)({pageStore:y,numBacklinks:le}),ce=(0,j().T7)({pageStore:y,numBacklinks:le}),de=(0,k().OZ)(_),ue=(0,s().VK)((()=>{if(e.context===P().S.DraftPostInInlineComposer)return{bottomControls:[]};const t=async()=>{A.pageViewBlockStore.setState({...A.pageViewBlockStore.state,forceDiscussionOpen:!0}),o(248825).ZW(G,{from:"page_comments"}),await o(492788).default.afterNextFlush();const e=o(585742).W.find((e=>e.getBlockStore().id===y.id)),t=null==e?void 0:e.getInputStore();t&&p().setSelectionAtEnd({store:t.state.textStore})},n=async()=>{const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650996)),t=y.getTitleStore();if(!t)return;const i=await e.load();p().setSelectionAtEnd({store:t}),i.executeAssistantSkillAction({environment:G,clientSkillWithParameterValues:i.clientSkillHelpers.dangerouslyCreateClientSkillWithParameterValues(i.clientSkillHelpers.createClientGlobalSkill("fill_title")),from:"block_action_menu",assistantSurfaceType:G.device.isMobile?"mobileWriter":"writer"})};try{let r=[];const u=[...e.topControls],p=()=>{if("section_hide"!==(0,b().uX)()&&oe()){const e=te();return(0,l.jsx)(h().D,{isGray:!0,onClick:()=>{"PageDetailsStore"in G&&G.PageDetailsStore.setToggleState({environment:G,type:"discussion",id:y.id},!0)},icon:a,style:Q.detailsButton,children:(0,l.jsx)(d()._H,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:e}})},"showcomments")}},m=()=>{if(!X)return;const e=(0,k().y6)(y),t=y.isNonEditableState();if(!e)return;const i=ie;return i&&i.length?(0,l.jsx)(o(386790).Z,{propertyIds:i,store:y,collectionStore:X,disabled:T,locked:t,blockPropertyValueOverlayStore:de?o(27475).Z:o(121700).Z,format:e,type:"minimal"}):void 0},f=()=>{const e=(0,w().mY)(y,{recursivelyLoadAllDiscussions:!1});if(0===e.length)return;const t=(0,l.jsx)(d()._H,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:e.length}});return(0,V().Sx)(G)?(0,l.jsx)(h().D,{icon:c().k,isGray:!0,style:Q.detailsButton,onClick:()=>{o(799454).Ib({environment:G,blockStore:y,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:e.map((e=>e.id))})},children:t}):(0,l.jsx)(S().ZP,{buttonPopupStore:A.resolvedDiscussionButtonPopupStore,popupType:G.device.isMobile?S().Z4.SlideUp:S().Z4.Popup,renderOrigin:e=>(0,l.jsx)(h().D,{icon:c().k,isGray:!0,style:Q.detailsButton,...e,children:t}),render:t=>{let i;return i=G.device.isMobile?{menuType:C().o.Modal,title:(0,l.jsx)(d()._H,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,l.jsx)(o(470386).DoneMenuText,{}),onClickRight:t.close,whiteBackground:!0}:{menuType:C().o.Popup,width:500},(0,l.jsx)(o(198829).Z,{...i,children:e.map(((e,i,n)=>(0,l.jsx)(o(299519).Z,{store:e,droppable:!0,render:()=>ne?(0,l.jsx)(g().gU,{store:e,format:ne.discussionHelpers.DiscussionFormat.Menu,isFirst:0===i,isOnly:1===n.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:y,onDismiss:t.close},e.id):null},e.id)))})}},"resolve-discussions")},v=e=>{const t=[];ae&&t.push((0,l.jsx)(i.Fragment,{children:(0,l.jsx)(I().v,{pageStore:y,backlinksButtonPopupStore:A.backlinksButtonPopupStore,numBacklinks:le,customization:{buttonStyles:Q.detailsButton,buttonIsGray:!0}})},"backlinks"));const o="hidden"===e.type,n=o&&p();n&&t.push((0,l.jsx)(i.Fragment,{children:n},"discussions"));const s=f();s&&!o&&t.unshift((0,l.jsx)(i.Fragment,{children:s},"resolveddiscussions"));const r=m();return r&&t.push((0,l.jsx)(i.Fragment,{children:r},"minimalpagesections")),t};if(r=v(q),"always"===ce||"onHover"===ce){const e={isBottomControl:!1,..."always"===ce?{forceVisible:!0}:{}};u.unshift((0,l.jsx)(i.Fragment,{children:(0,l.jsx)(I().v,{pageStore:y,backlinksButtonPopupStore:A.backlinksButtonPopupStore,numBacklinks:le,customization:{buttonStyles:R(e),buttonIsLightGray:!0}})},"backlinks"))}"section_hide"===(0,b().uX)()||y.isCollectionView()||y.isInsideCollection()||oe()||!y.canComment()||!G.currentUser.isLoggedIn()||A.pageViewBlockStore.state.forceDiscussionOpen||y.pathIsDead()||y.isPost()||T||u.push((s={isBottomControl:!1},(0,l.jsx)(h().D,{style:R({isBottomControl:s.isBottomControl}),isLightGray:!0,onClick:t,icon:a,children:G.device.isSmallPhone?(0,l.jsx)(d()._H,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,l.jsx)(d()._H,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"addcomment"))),re&&u.push((0,l.jsx)(h().D,{style:R({isBottomControl:!1}),isBlue:!0,onClick:n,icon:o(562027).c,children:(0,l.jsx)(d()._H,{id:"pageViewBlock.add.fillTitle",defaultMessage:"Fill page title"})},"fill-title"));return{headerControls:(0,l.jsx)("div",{className:de?x().JiT:void 0,children:(0,l.jsx)(o(441672).Z,{store:y,context:e.context,children:u})}),bottomControls:r}}catch(r){return{bottomControls:[]}}var s}),[e.context,e.topControls,A.pageViewBlockStore,A.resolvedDiscussionButtonPopupStore,A.backlinksButtonPopupStore,G,y,R,oe,T,q,ce,re,de,te,Q.detailsButton,X,ie,ne,ae,le],{debugName:"PageLayoutModules(headerAndBottomControlsStore).useComputedStore"}),pe=(0,i.useCallback)((e=>(0,l.jsxs)(o(857719).Pb,{style:Q.fallbackComponent,children:[(0,o(521913).t)(Q.fallbackIcon),(0,l.jsx)(d()._H,{id:"pageLayoutModules.failedToRender",defaultMessage:"Failed to render {moduleName}. Please contact support.",values:{moduleName:J.formatMessage(o(844650).B[e.type])}})]})),[J,Q.fallbackComponent,Q.fallbackIcon]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m().p,{style:{display:"contents"},allowSelectionWithin:!1,children:(0,l.jsx)(v,{store:y})}),U.map(((o,i)=>(0,l.jsx)(F,{fallbackComponent:pe(o),children:(0,l.jsx)(O,{ref:t,module:o,context:_,postContext:B,pageViewBlockStore:A.pageViewBlockStore,disabled:T,environment:G,bottomControls:ue.bottomControls,headerControls:ue.headerControls,horizontalPadding:ee,inlinePropertyIDs:$,isEditable:H,isInPeek:de,onDetailMouseEnter:z,onDetailMouseLeave:N,onHeaderMouseEnter:D,onHeaderMouseLeave:E,pageCoverHeight:Z,pageViewBlockAccessor:W,headerFocusStore:A.headerFocusStore,store:y,collectionStore:X,collectionSchema:Y,bottomControlsStyle:Q.bottomControls,templatePickerMenuListStore:K,pageTitleWithIconProps:e,modules:U,pageDiscussionsRenderState:q})},o.id)))]})})),O=(0,i.forwardRef)((function(e,t){const{module:i,modules:r,context:a,postContext:c,disabled:d,environment:u,bottomControls:p,headerControls:g,horizontalPadding:h,inlinePropertyIDs:S,isEditable:f,isInPeek:y,onDetailMouseEnter:v,onDetailMouseLeave:b,onHeaderMouseEnter:C,onHeaderMouseLeave:k,pageCoverHeight:w,pageViewBlockAccessor:V,headerFocusStore:j,store:I,collectionStore:T,collectionSchema:K,bottomControlsStyle:L,templatePickerMenuListStore:D,pageTitleWithIconProps:E,pageDiscussionsRenderState:H}=e,{isMobile:F}=(0,n().Fy)(),{pageVisitStore:A,presenceStore:O}=(0,o(69890).c)({store:I,environment:u,postContext:c}),W=(0,s().VK)((()=>!!T&&(0,o(45830).$)({collectionStore:T,module:i,isMobile:F})),[T,F,i]),z="page_main",N=(0,R().wV)({layoutModule:i,area:z,collectionSchema:K,collectionStore:T,showDetailsPanelToggleButtonBelowTitle:W,modules:r,context:a,postContext:c}),U=(0,R().du)({layoutModule:i,area:z,collectionSchema:K,collectionStore:T,pageMainModules:r,showDetailsPanelToggleButtonBelowTitle:W});if((0,s().VK)((()=>M().default.checkGate({gateName:"side_peek_transition_improvements"})&&a===P().S.PeekView&&_().default.state.open&&"side_peek"===_().default.state.mode&&(_().default.state.isOpening||_().default.state.isClosing)&&("editor"===i.type||"views"===i.type||"viewsMain"===i.type)),[a,i.type]))return(0,l.jsx)("div",{className:x().psr,children:(0,l.jsx)(o(668001).Z,{style:{width:"100%",height:"30px",display:"block",marginTop:32,borderRadius:8}})});if((0,o(639708).f)(i))return(0,l.jsx)(o(965631)._,{context:a,disabled:d,propertyId:i.propertyId,store:I,pageModule:i,wrapper:N,stackPropertyLabelAndValue:!0});switch(i.type){case"cover":return(0,l.jsx)(o(279080).D,{store:I,isEditable:f,paddingX:h,pageCoverHeight:w,onMouseEnter:C,onMouseLeave:k,isInPeek:y});case"normalizedTitleWithIcon":return N((0,l.jsx)(o(780814).J,{handleHeaderMouseEnter:C,handleHeaderMouseLeave:k,headerControls:g,headerFocusStore:j,layoutModule:i,...E}));case"properties":return(0,l.jsx)(o(179289).V,{context:a,disabled:d,store:I,layoutModule:i,customization:{neverShowPropertiesElsewhereInLayout:!0,disableContainerPadding:!0},wrapper:N,showDefaultTitle:U});case"inlinePageSections":return(0,l.jsx)(o(725858).bM,{context:a,disabled:d,inlinePropertyIDs:S,store:I,wrapper:N});case"expandedBacklinks":case"transcript":case"formTitle":case"formQuestion":case"formSubmit":case"placeholder":case"deleted_property":return null;case"discussions":return c===P().S.DraftPostInInlineComposer||c===P().S.DraftPostInFullPageComposer?null:c===P().S.PostInFullPageOrPeek?(0,l.jsx)(B().s,{store:I,wrapper:N,showDefaultTitle:!1,discussionLocation:"post_discussion",pageDiscussionsRenderState:H,presenceStore:O,pageVisitStore:A}):(0,l.jsx)(B().s,{store:I,wrapper:N,showDefaultTitle:U,discussionLocation:"page_discussion",pageDiscussionsRenderState:H});case"bottomControls":return 0===p.length?null:N((0,l.jsx)(m().p,{allowSelectionWithin:!0,children:(0,l.jsx)("div",{style:L,className:"notion-page-details-controls",onMouseEnter:v,onMouseLeave:b,children:p})}));case"editor":return(0,l.jsx)(o(865449).H,{context:a,disabled:d,handlePlaceholderWrapClick:e=>o(441530).og(e,I,u),pageBlockStore:I,pathToBlockId:i.pathToBlockId,templatePickerMenuListStore:D,pageViewBlockAccessor:V,ref:t,editorWrapper:a===P().S.DraftPostInInlineComposer?void 0:N});case"viewsMain":case"views":return(0,l.jsx)(Z,{pageStore:I,disabled:d,viewsModule:i,wrapper:N,templatePickerMenuListStore:D});case"relationsGroup":return(0,l.jsx)(o(305128).T,{pageStore:I,wrapper:N,disabled:d,context:a,showDefaultTitle:U})}}))},494630:(e,t,o)=>{o.d(t,{Kq:()=>y,Wd:()=>V,Yq:()=>f,du:()=>w,wV:()=>k});o(821057),o(267602),o(470928);var i=o.n(o(294184)),n=o(667294),s=()=>o(219727),r=()=>o(142735),l=()=>o(639708),a=()=>o(696459),c=()=>o(177610),d=()=>o(778447),u=()=>o(311562),p=()=>o(70191),g=()=>o(761650),m=()=>o(896751),h=()=>o(857719),S=o(785893);const f=12,y=12,v=10,x=10,b=8;function C(e){let{collectionSchema:t,module:o}=e;return!(!t||"normalizedTitleWithIcon"!==o.type)&&(0,p().zD)({collectionSchema:t,module:o}).length>0}function k(e){let{layoutModule:t,area:o,context:p,collectionSchema:k,collectionStore:w,showDetailsPanelToggleButtonBelowTitle:V,modules:M,postContext:P}=e;const{isMobile:_}=(0,s().Fy)(),j=M.findIndex((e=>e.id===t.id)),I=null!=M&&M.length&&-1!==j?M[j+1]:void 0,B=(0,m().K)({collectionStore:w,layoutModule:I}),T=(0,c().vg)(w),K=(0,r().VK)((()=>Boolean(null==w?void 0:w.isPageTreeCollection())),[w]),[L,D]=(0,n.useMemo)((()=>{const e=C({collectionSchema:k,module:t});let i=!1;const n={};if("page_details"===o)n.marginBottom=v,n.paddingBottom=x;else if("page_main"===o)n.marginBottom=y,n.paddingBottom=f;else if("views_main_tab_modules"===o)n.marginBottom=y,n.paddingBottom=f;else{if("form_layout_schema"===o||"form_conditional_modules"===o)throw new Error("Not implemented for forms");(0,a().t1)(o)}const s="editor"===(null==I?void 0:I.type);(0,d().XH)(P)?"editor"===t.type&&P!==u().S.DraftPostInFullPageComposer?i=!0:"normalizedTitleWithIcon"===t.type&&(n.marginBottom=void 0,n.paddingBottom=b):s&&(i=!0,"normalizedTitleWithIcon"!==t.type||e||(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0),"views_main_tab_modules"===o&&(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0)),B&&n.marginBottom&&(n.marginBottom=Math.max(n.marginBottom-4,0)),"page_main"!==o&&"page_details"!==o||("discussions"===t.type?n.marginLeft=0:"normalizedTitleWithIcon"===t.type?n.marginLeft=-4:(0,l().f)(t)||"properties"===t.type||"relationsGroup"===t.type?n.marginLeft=-6:"editor"===t.type&&(n.marginLeft=-2));const r="views"===(null==I?void 0:I.type)||"editor"===(null==I?void 0:I.type);return"page_main"!==o&&"page_details"!==o||!n.paddingBottom||r||("property_text"===t.type||"property_relation"===t.type&&T?n.paddingBottom=Math.max(n.paddingBottom-4,0):"properties"===t.type&&(K&&!_||(n.paddingBottom=Math.max(n.paddingBottom-4,0))),"viewsMain"===(null==I?void 0:I.type)&&(n.paddingBottom=Math.max(n.paddingBottom-12,0))),"normalizedTitleWithIcon"===t.type&&(e?_&&"properties"===(null==I?void 0:I.type)&&!B&&(n.paddingBottom=void 0,n.marginBottom=4):(V?"discussions"===(null==I?void 0:I.type)&&(n.marginBottom=void 0):"properties"===(null==I?void 0:I.type)?(n.paddingBottom=void 0,n.marginBottom=8):"discussions"===(null==I?void 0:I.type)&&(n.paddingBottom=f),_&&"discussions"===(null==I?void 0:I.type)&&(n.marginBottom=void 0))),"bottomControls"===t.type&&(n.paddingBottom=void 0,n.marginBottom=void 0),"discussions"===t.type&&s&&(n.paddingBottom=void 0),"inlinePageSections"!==(null==I?void 0:I.type)&&"expandedBacklinks"!==(null==I?void 0:I.type)&&"bottomControls"!==(null==I?void 0:I.type)||(n.marginBottom=8),"editor"!==t.type||(0,d().XH)(P)||(n.marginTop=8),("views"===t.type||"editor"===t.type&&!(0,d().XH)(P))&&(n.paddingBottom=void 0,n.marginBottom=void 0),"viewsMain"===t.type&&(n.paddingBottom=void 0),p===u().S.DraftPostInInlineComposer&&(n.marginBottom=4,n.paddingBottom=0),[i,n]}),[k,t,o,null==I?void 0:I.type,B,K,p,T,_,V,P]);return(0,n.useMemo)((()=>function(e){return(0,S.jsx)(h().Pb,{className:i()({"layout-content-with-divider":L}),style:D,testId:(0,g().Z)(t),children:e})}),[t,L,D])}function w(e){let{layoutModule:t,area:o,collectionSchema:i,collectionStore:n,showDetailsPanelToggleButtonBelowTitle:l,pageMainModules:a}=e;const{isMobile:c}=(0,s().Fy)(),d=(0,r().VK)((()=>{if(!n)return!1;return!!a.find((e=>"normalizedTitleWithIcon"===e.type))&&l}),[n,a,l]);if(!n)return!1;if("properties"!==t.type&&"discussions"!==t.type&&"relationsGroup"!==t.type)return!1;if("page_main"!==o)return!0;const u=a.findIndex((e=>e.id===t.id));if(0===u||a.length<=1)return!1;const p=a[u-1];if("normalizedTitleWithIcon"!==(null==p?void 0:p.type))return!0;if("relationsGroup"===t.type&&d)return!0;if("properties"===t.type&&d&&!c)return!0;const g=C({collectionSchema:i,module:p});return("properties"!==t.type||!c||!g)&&g}function V(e){let{collectionStore:t,modulesByArea:o}=e;return!((t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,p().t5)({collectionStore:t,modulesByArea:o}).length}},725858:(e,t,o)=>{o.d(t,{bM:()=>m});var i=o(667294),n=()=>o(142735),s=()=>o(58836),r=()=>o(386790),l=()=>o(191586),a=()=>o(121700),c=()=>o(763058),d=()=>o(311562),u=()=>o(27475),p=o(785893);function g(e){const{state:t,store:o,disabled:i,blockPropertyValueOverlayStore:s}=e,l=(0,n().VK)((()=>o.isNonEditableState()),[o]);return(0,p.jsx)(r().Z,{propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:i,locked:l,blockPropertyValueOverlayStore:s})}function m(e){const{store:t,context:o,disabled:r,inlinePropertyIDs:m,wrapper:h}=e,S=(0,n().VK)((()=>t.getAssociatedCollectionStore()),[t]),f=(0,i.useMemo)((()=>new(c().pB)),[]),y=function(e){const{collectionStore:t,format:o,sectionPropertyIds:i}=e;if(!(t&&o&&i&&i.length))return{type:"hidden"};return{type:"visible",collectionStore:t,format:o,sectionPropertyIds:i}}({collectionStore:S,format:(0,n().VK)((()=>(0,l().y6)(t)),[t]),sectionPropertyIds:m});if("hidden"===y.type)return null;const v=o===d().S.PeekView;return h((0,p.jsx)(s().p,{allowSelectionWithin:!0,children:(0,p.jsx)(g,{topBorder:!0,state:y,store:t,disabled:r,blockPropertyValueOverlayStore:v?u().Z:a().Z,isInPeekRenderer:v,pagePropertiesStore:f})}))}},279080:(e,t,o)=>{o.d(t,{D:()=>m,p:()=>h});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(492522),r=()=>o(58836),l=()=>o(628370),a=()=>o(75751),c=()=>o(247724),d=()=>o(191586),u=()=>o(309797),p=()=>o(857719),g=o(785893);function m(e){const{store:t,isEditable:o,isInPeek:s,paddingX:d,pageCoverHeight:m,onMouseEnter:S,onMouseLeave:f}=e,y=(0,i().O7)(),v=(0,n().VK)((()=>t.isCollectionView()?"20vh":m),[m,t]),x=(0,n().VK)((()=>y.WindowSizeStore.getSafePaddingLeftCSS(d)),[y.WindowSizeStore,d]),b=(0,n().VK)((()=>y.WindowSizeStore.getSafePaddingRightCSS(d)),[y.WindowSizeStore,d]),C=(0,n().VK)((()=>y.WindowSizeStore.state.width),[y.WindowSizeStore]),k=(0,u().WJ)(t),w=(0,n().VK)((()=>h(t,y)),[y,t]);return(0,g.jsx)(p().Nx,{style:{isolation:"isolate"},children:(0,g.jsx)(l().Z,{tag:r().p,animate:{translateX:k},allowSelectionWithin:!1,className:s?c().JiT:void 0,style:w,onMouseEnter:S,onMouseLeave:f,children:(0,g.jsx)(a().Z,{height:v,store:t,disabled:!o,paddingLeft:x,paddingRight:b,proxyWidth:C})})})}function h(e,t){const o=(0,d().kC)(e,t);return o.zIndex=s().ag,o}},293936:(e,t,o)=>{o.d(t,{s:()=>E});o(267602),o(241792),o(228244);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(846550),l=()=>o(78652),a=()=>o(788860),c=()=>o(825270),d=()=>o(444851),u=()=>o(802911),p=()=>o(58836),g=()=>o(1910),m=()=>o(251932),h=()=>o(259878),S=()=>o(141735),f=()=>o(247724),y=()=>o(677559),v=()=>o(309797),x=()=>o(452220),b=()=>o(81954),C=()=>o(874018),k=()=>o(3391),w=o(785893);function V(e){const{store:t,discussionStore:o,isFirst:s,isOnly:r,discussionLocation:l,collapsed:a}=e,c=(0,n().O7)(),d=(0,i.useMemo)((()=>new(k().Z)(c,(0,b().J)(t.pointer.spaceId))),[c,t.pointer.spaceId]),{value:u}=(0,y().XJ)(C().commentsDependency);return u?(0,w.jsx)(C().gU,{store:o,format:u.discussionHelpers.DiscussionFormat.Page,isFirst:s,isOnly:r,collapsed:a,showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:d,..."post_discussion"===l?{discussionLocation:"post_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}},o.id):null}o(470928);var M=()=>o(492788),P=()=>o(98642),_=()=>o(990966),j=()=>o(269299),I=()=>o(396651),B=()=>o(244826),T=()=>o(585742),K=()=>o(311562);function L(e){const{store:t}=e,o=(0,n().O7)(),r=(0,i.useMemo)((()=>new(k().Z)(o,(0,b().J)(t.pointer.spaceId))),[o,t.pointer.spaceId]),l=(0,i.useRef)(null),a=(0,i.useCallback)((()=>{_().clear({environment:o})}),[o]),c=function(e){const{environment:t,discussionInputStore:o,store:n}=e,r=(0,s().qz)(void 0,K().Z),l=(0,i.useCallback)((e=>{var o;const i=n.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:i},e)}),[t,n.id]);return(0,i.useCallback)((async()=>{const e=o.state.textStore.getValue(),i=o.state.files,s=await S().F.formulas.load();if(e&&e.length>0||i.length>0){const{performResult:a}=j().createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,canUndo:!0,perform:o=>(0,I().i)({environment:t,type:"default",blockStore:n,commentTextValue:e||[],transaction:o,files:i,formulasModule:s}),skipUpdatingEditedMetadata:!0});if(o.reset(),r.setState({...r.state,forceDiscussionOpen:!1}),l(!0),a&&!t.device.isMobile){await M().default.afterNextFlush();const e=B().Z.find((e=>e.getStore().id===a.id));e&&_().setSelectionAtEnd({store:e.getInputStore().state.textStore})}}}),[o,t,r,l,n])}({environment:o,discussionInputStore:r,store:t});(0,P().c)(T().W,(()=>({getNode:()=>l.current,getBlockStore:()=>t,getInputStore:()=>r})),[r]);const{value:d}=(0,y().XJ)(C().commentsDependency);return d?(0,w.jsx)("div",{ref:l,children:(0,w.jsx)(C().rI,{showAvatar:!0,parentStore:t,onSubmit:c,onCancel:a,discussionInputStore:r,discussionFormat:d.discussionHelpers.DiscussionFormat.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})}):null}function D(e){const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:i,discussionLocation:u,collapsed:p}=e,m=(0,n().O7)(),x=(0,a().YB)(),{value:b}=(0,y().XJ)(S().F.formulas),C=(0,r().yK)((e=>({pageViewDiscussion:{width:"100%",margin:"0 auto"},newPageDiscussionWrapper:{paddingTop:i.length>0?12:-1*d().n4/2,paddingBottom:12,paddingRight:4,..."post_discussion"===u&&{padding:0}},emptyPostDiscussion:{display:"flex",justifyContent:"space-between",paddingBottom:12},reactionButton:{height:26,width:40,paddingLeft:10,paddingRight:10,borderRadius:13,borderWidth:1,borderColor:e.stroke.secondary,borderStyle:"solid"},reactionIcon:{width:22,height:22,fill:e.icon.secondary,marginTop:-.5,marginRight:1}})),[i.length,u]),k=(0,s().VK)((()=>i.some((e=>e.getReactions().length))),[i]);return(0,w.jsxs)("div",{style:C.pageViewDiscussion,onMouseDown:v().m4,onClick:v().h9,className:f().KA2,children:["post_discussion"===u&&!k&&(0,w.jsxs)("div",{style:C.emptyPostDiscussion,children:[(0,w.jsx)(g().Z,{ariaLabel:x.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:C.reactionButton,icon:()=>(0,l().V)(C.reactionIcon),onClick:e=>{(0,c().t)({environment:m,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:b})}}),e.pageVisitStore&&e.presenceStore&&(0,w.jsx)(h().W4,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,isShowingInPostFeed:!0})]}),i.map(((o,i,n)=>(0,w.jsx)(V,{store:t,discussionStore:o,isFirst:0===i,isOnly:1===n.length,collapsed:p,..."post_discussion"===u?{discussionLocation:"post_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:u}},o.id))),o&&(0,w.jsx)("div",{style:C.newPageDiscussionWrapper,children:(0,w.jsx)(L,{store:t})})]})}function E(e){const{store:t,wrapper:o,discussionLocation:i,collapsed:n,showDefaultTitle:s,pageDiscussionsRenderState:r}=e;return(0,w.jsx)(u().Z,{name:"PageDiscussionsWrapper",children:"hidden"!==r.type&&o((0,w.jsxs)(m().Ht,{gap:2,children:[s&&(0,w.jsx)(x().$,{store:t,children:(0,w.jsx)(a()._H,{id:"pageLayout.discussionsModule.title",defaultMessage:"Comments"})}),(0,w.jsx)(p().p,{allowSelectionWithin:!0,children:(0,w.jsx)(D,{...r,withLegacyInputPadding:!0,store:t,collapsed:n,..."post_discussion"===i?{discussionLocation:"post_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}})})]}))})}},865449:(e,t,o)=>{o.d(t,{H:()=>N});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(846550),l=()=>o(58836),a=()=>o(191586),c=()=>o(954452),d=o(785893);function u(e){const{pageBlockStore:t,isVisible:i,context:r}=e,u=(0,n().O7)(),p=(0,s().VK)((()=>(0,a().mO)(t,r,u)),[t,r,u]);return(0,d.jsx)(l().p,{allowSelectionWithin:!0,style:{width:p&&i?c().QB:0},children:(0,d.jsx)(o(874018).HV,{...e})})}var p=()=>o(778447),g=()=>o(506347),m=()=>o(494488),h=()=>o(788860),S=()=>o(8101),f=()=>o(295274),y=()=>o(497065),v=()=>o(279830),x=()=>o(269299),b=()=>o(887430),C=()=>o(41340),k=()=>o(544903),w=()=>o(982855),V=()=>o(429725),M=()=>o(949842),P=()=>o(876822),_=()=>o(804217),j=()=>o(749826),I=()=>o(890324),B=()=>o(807230),T=()=>o(154186),K=(o(241792),()=>o(668001));function L(){const e=(0,r().yK)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,d.jsx)(d.Fragment,{children:[...Array(6)].map(((t,o)=>(0,d.jsxs)("div",{style:e.menu,children:[(0,d.jsx)(K().Z,{style:e.icon}),(0,d.jsx)(K().Z,{style:e.menuItem})]},o)))})}const D={width:"100%"};const E=function(e){let{menuListStore:t,store:a}=e;(0,o(732811).K)((()=>{t.reset()}));const c=(0,n().MO)(),u=(0,s().VK)((()=>_().default.state.online),[]),p=(0,s().VK)((()=>a.isPost()),[a]),g=(0,r().yK)((e=>({wrapStyle:{width:"100%",display:"flex",flexDirection:"column",marginBottom:p?void 0:"14vh"}})),[p]),m=(0,i.useCallback)((()=>!c&&(0,d.jsx)(L,{})),[c]);return(0,d.jsx)(l().p,{style:D,allowSelectionWithin:!1,children:(0,d.jsx)(o(71410).Z,{capture:!0,render:e=>(0,o(84080).Z)((o=>(0,d.jsxs)("div",{...e,...o,style:g.wrapStyle,children:[(0,d.jsx)(H,{store:a}),u&&(0,d.jsx)(k().OG,{menuListStore:t,store:a,renderLoading:m})]})))})})};function Z(e,t,o){const{mainEditorCurrentBlockStore:i}=P().default.state;!function(e,t,o){o?o(e):y().c4({environment:t,url:e})}(i?(0,V().ZP)({store:i,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:g().tY.LinkInPage}):(0,V().ZP)({store:e,fullyQualified:!1,pageVisitSource:g().tY.LinkInPage}),t,o)}function H(e){let{store:t}=e;const o=(0,n().O7)(),l=(0,n().Fy)(),a=(0,i.useContext)(C().Z),c=(0,s().VK)((()=>I().Z.getMode(o,t)),[o,t]),u=(0,i.useCallback)((e=>function(e,t,o,i){const n=o.getAssociatedCollectionStore();if(n&&(0,B().ww)(t)){const{performResult:e}=x().createAndCommit({userAction:"TemplatePicker.newPage",environment:t,canUndo:!0,perform:e=>f().nx({environment:t,collectionStore:n,transaction:e})});e&&Z(e,t,i),S().dZ(t,{collection_id:n.id})}}(0,o,t,a)),[o,t,a]),p=(0,s().VK)((()=>t.isTemplate()),[t]),g=(0,s().VK)((()=>_().default.state.online),[]),y=(0,s().VK)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),k=(0,s().VK)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(t)),[t]),V=y&&!k,P=y&&k,K=(0,s().VK)((()=>!function(e){const t=e.getAssociatedCollectionStore(),o=t&&t.getParentBlockStore();return b().eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}(t)),[t]),L=(0,s().VK)((()=>(0,w().GD)(c)),[c]),E=(0,s().VK)((()=>t.isPost()),[t]),H=(0,r().yK)((e=>({placeholder:{...m().ZD,color:e.lightTextColor,paddingTop:E?3:5,paddingBottom:E?3:24,paddingLeft:E?2:void 0,paddingRight:E?2:void 0}})),[E]),R=(0,s().VK)((()=>l.isMobile&&!l.isTablet&&l.isIOS&&"on"===j().default.getEligibleGroup({experimentId:"mobile_lightweight_editor_prompt",defaultGroup:"control"})),[l.isMobile,l.isIOS,l.isTablet]);let F=null;return g?p?F=(0,d.jsx)(h()._H,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:l.isMobile}}):l.isMobile?P?F=l.isTablet?(0,d.jsx)(h()._H,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(h()._H,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):V?F=(0,d.jsx)(h()._H,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:K,templatebutton:e=>(0,d.jsx)(T().Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):R||(F=l.isTablet?(0,d.jsx)(h()._H,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(h()._H,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"})):V?F=(0,d.jsx)(h()._H,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:K,templatebutton:e=>(0,d.jsx)(T().Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):L&&!y||(F=(0,d.jsx)(h()._H,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"})):F=(0,d.jsx)(h()._H,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:l.isMobile}}),F?(0,d.jsx)("div",{style:D,children:(0,d.jsx)("div",{style:H.placeholder,onClick:e=>function(e,t,o){(0,M().ZP)({event:e,context:M().Af.EditorClick,callback:()=>{(0,B().ww)(o)&&(x().createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,canUndo:!0,perform:e=>{v().e({environment:o,store:t,transaction:e})}}),S().rN(o,{is_keyboard:!1,from:"template_picker",template_type:"empty_page"}))}})}(e,t,o),children:F})}):null}var R=()=>o(84926),F=()=>o(311562),A=()=>o(482162),O=()=>o(309797),W=()=>o(857719);const z=(0,i.forwardRef)((function(e,t){let{context:l,disabled:c,onClick:u,store:g,templatePickerMenuListStore:m}=e;const h=(0,n().O7)(),{device:S}=h,f=(0,O().Nr)(g),y=function(e,t){const o=(0,O().sD)(e,t),i=(0,O().mj)(e,t);if(o)return"horizontal";if(i)return"legacy";return"none"}(g,l),v=(0,O().Qg)(g),x=(0,O().L2)(g),b=(0,s().VK)((()=>!!c||(!!g.isNonEditableState()||!!x)),[g,c,x]),C=(0,s().VK)((()=>g.getFormat()),[g]),w=(0,s().VK)((()=>(0,a().CX)(g)),[g]),V=(0,a().OZ)(l),M=(0,s().VK)((()=>g.isPost()),[g]),P=(0,o(480089).PE)(g,c),_=(0,n().MO)(),j=(0,s().VK)((()=>g.isCollectionView()),[g]),I=(0,s().VK)((()=>g.hasCover()),[g]),B=(0,s().VK)((()=>`calc(${(0,o(942226).wq)(g)&&!A().default.isSidePeekOpen()&&!A().default.isSidePeekClosingStore.state?`100vh - ${A().PeekModeOuterPadding}px*2`:"100vh"} - ${(0,o(467171).R6)(h.device.isElectronMac)}px - 66px - 48px - 140px)`),[h.device.isElectronMac,g]),T=(0,r().yK)((e=>{const t=C.page_font||p().rk,i=p().VN[t],n=p().n5[t]||1.5;let s;if(S.isMobile)s=S.isAndroid?p().pE:p().tb;else if(l===F().S.DraftPostInInlineComposer)s=14;else{s=C.page_small_text?p().Pc[t]||p().ZY:p().TE[t]||p().jo}let r={},c={paddingTop:8};const d=(0,a().OZ)(l);if(!(w&&d&&"none"===y&&!f)){if(w){const e=29;c={...c,paddingBottom:l===F().S.DraftPostInInlineComposer?e:M?0:"15vh"}}else c={...c,paddingBottom:0};r={...c,paddingLeft:0,paddingRight:0}}let u={};d&&!M&&(u={minHeight:240,zIndex:1});let g={};l===F().S.InAppTemplatePreview&&(g={margin:"0 auto"});let m={};if(_&&!j&&P&&!I){const e=132,t=(0,p().Wc)(l,h);m={minHeight:`calc(100vh - ${o(751052).g5+e-t}px)`}}return{content:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:p().sL[t],fontSize:s,letterSpacing:i?`${i}em`:void 0,lineHeight:n,width:"100%",zIndex:o(492522).ke,...r,...u,...g,...m},emptyDroppableStyle:{width:"100%"},templatePicker:{position:"absolute",top:B,width:"100%",pointerEvents:"none"}}}),[I,j,_,w,P,l,S.isAndroid,S.isMobile,h,C.page_font,C.page_small_text,f,y,B,M]),[K,L]=function(e,t){const n=(0,i.useRef)(null),r=(0,o(794623).Z)(n,e),l=(0,o(965865).yU)(n),a=(0,i.useCallback)((e=>{R().Z.setWidth(e.width,t)}),[t]);(0,i.useEffect)((()=>{l&&a(l)}),[a,l]);const c=(0,s().VK)((()=>R().Z.getWidth(t)),[t]);return[r,c]}(t,V);return(0,d.jsxs)(o(802911).Z,{name:"PageEditor",children:[(0,d.jsxs)("div",{className:o(247724).QS0,onClick:u,style:T.content,ref:K,children:[!v&&(0,d.jsx)(o(98275).Z,{store:g.getContentStore(),emptyDroppableStyle:T.emptyDroppableStyle,disabled:b}),f&&(0,d.jsx)(o(312578).Z,{}),m&&"legacy"===y&&(0,d.jsx)(E,{store:g,menuListStore:m})]}),"horizontal"===y&&(0,d.jsx)("div",{style:T.templatePicker,children:(0,d.jsx)(k().ri,{store:g,context:l,menuListStore:m,editorWidth:L})})]})}));const N=(0,i.forwardRef)((function(e,t){const{context:r,disabled:l,handlePlaceholderWrapClick:p,pageBlockStore:g,pathToBlockId:m,templatePickerMenuListStore:h,pageViewBlockAccessor:S,editorWrapper:f}=e,y=(0,n().O7)(),v=(0,s().VK)((()=>m?(0,o(251932).Vg)({environment:y,pageBlockStore:g,pathToBlockId:m}):g),[y,g,m]),x=(0,s().VK)((()=>(0,c().fg)(y,g)),[y,g]),b=(0,s().VK)((()=>(0,a().CX)(g)),[g]),C=(0,s().VK)((()=>(0,o(95718).UV)(g)),[g]),k=r===F().S.DraftPostInInlineComposer,w=y.device.isMobile||k?0:5,V=(0,s().VK)((()=>o(819828).Z.state.isHovered),[]),M=f||(e=>(0,d.jsx)(W().Pb,{style:{...k?{minHeight:void 0,pointerEvents:"auto"}:{minHeight:170},paddingTop:w},children:e})),P=(0,i.useMemo)((()=>C?async()=>{const e=await o(650996).assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(y)}:b?p:void 0),[p,b,C,y]);return(0,d.jsxs)(d.Fragment,{children:[M((0,d.jsx)(z,{store:v,disabled:l,context:r,templatePickerMenuListStore:h,onClick:P,ref:t})),x&&S?(0,d.jsx)(W().Vw,{children:(0,d.jsx)(u,{pageBlockStore:g,isVisible:!V,context:r,pageViewBlockAccessor:S,isCollapsedAnchor:!0})}):null]})}))},32313:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294),n=()=>o(142735),s=()=>o(156642),r=()=>o(943620),l=()=>o(205228),a=()=>o(718959),c=o(785893);const d=i.memo((function(e){let{store:t,isEditable:d,hasCover:u,isInSidePeek:p,openMenuOnMount:g,openMenuOnMountCallback:m,isInPageLayoutModuleEditor:h}=e;const S=(0,o(219727).O7)(),f=(0,o(788860).YB)(),y=(0,n().VK)((()=>t.hasIcon()),[t]),v=(0,n().VK)((()=>{if(y)return t.getIcon()}),[y,t]),x=(0,n().VK)((()=>t.getIconStore()),[t]),b=(0,n().VK)((()=>t.getType()),[t]),C=(0,n().VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(s().Ti.externalObjectInstancePage)}),[t]),k=(0,n().VK)((()=>t.isType(s().Ti.form)),[t]),w=(0,n().VK)((()=>t.isCollectionView()||p),[t,p]),V=(0,n().VK)((()=>w?36:C?74:140),[w,C]),M=(0,n().VK)((()=>t.isEmptyPage()),[t]),P=(0,n().VK)((()=>o(279386).MT.getMode(t)),[t]),_=(0,i.useCallback)((async e=>{const i=t.getIconStore();if(i){const t=(0,o(225339).Wv)({source:e,secureFileConfigRootpath:l().default.secureFileConfig.rootPath,secureFileConfigHostname:l().default.secureFileConfig.hostname}),n=t?t.link:e,{serverCommitResult:s}=o(269299).createAndCommit({userAction:"PageIcon.handleChange",environment:S,canUndo:!0,perform:e=>{o(636340).sO({store:i,value:n,transaction:e})}});await s}}),[S,t]);if(!y)return null;const j={position:"relative",zIndex:1,marginLeft:3,marginBottom:S.device.isMobile?8:0,marginTop:4,pointerEvents:"auto"};let I;w?j.marginRight=6:j.marginTop=u&&!h?-80:S.device.isMobile||h?0:(0,a().CP)(S)-(k?32:0),I=w?{marginTop:(S.device.isMobile,4),marginRight:8}:{marginTop:u&&!h?-42:S.device.isMobile||h?0:(0,a().CP)(S)-(k?32:0)};const B=w?36:78;if(d&&"suggest"!==P){const e=null==x?void 0:x.table;return(0,c.jsx)(r().Z,{disabled:!1,bucket:"secure",icon:v,store:t,isEmptyPage:M,onChange:_,size:V,emojiSize:B,style:j,emojiStyle:I,largeIcon:!0,openMenuOnMount:g,openMenuOnMountCallback:m,iconLoggingData:{recordTable:e,source:"page_header",block_type:b,collection_id:"collection"===e?null==x?void 0:x.id:void 0},label:f.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"}),testId:"pageIcon"})}return(0,c.jsx)(r().Z,{disabled:!0,icon:v,isEmptyPage:M,size:V,emojiSize:B,style:j,emojiStyle:I,largeIcon:!0,label:f.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"}),testId:"pageIcon"})}))},965631:(e,t,o)=>{o.d(t,{_:()=>M});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(639708),l=()=>o(887430),a=()=>o(874018),c=()=>o(679791),d=()=>o(356321),u=()=>o(58836),p=()=>o(251932),g=()=>o(663221),m=()=>o(307369),h=()=>o(480089),S=()=>o(704713),f=()=>o(121700),y=()=>o(763058),v=()=>o(311562),x=()=>o(27475),b=()=>o(231272),C=()=>o(291848),k=()=>o(206658),w=()=>o(70191),V=o(785893);function M(e){const{store:t,context:o,propertyId:M,disabled:P,wrapper:_,pageModule:j,stackPropertyLabelAndValue:I}=e,B=(0,h().PE)(t,P),T=(0,s().VK)((()=>t.getAssociatedCollectionStore()),[t]),K=(0,s().VK)((()=>null==T?void 0:T.getParentStore()),[T]),L=(0,s().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:M}:{type:"hidden"}}),[M,t]),D=(0,s().VK)((()=>null==T?void 0:T.getSchema()),[T]),E=(0,s().VK)((()=>null==T?void 0:T.getFormat()),[T]),Z=(0,s().VK)((()=>{var e;return null===(e=L.collectionStore)||void 0===e?void 0:e.getSchema()[M]}),[L.collectionStore,M]),H=(0,s().VK)((()=>t.isNonEditableState()),[t]),R=(0,i.useMemo)((()=>new(y().pB)),[]),F=i.useRef(null),A=(0,s().VK)((()=>!(!T||!K||"block"!==K.table)&&(0,l().eD)({collectionStore:T,collectionViewBlockStore:K,checkNavigableAncestorLocked:!1})),[T,K]),O=o===v().S.PeekView,W=(0,r().f)(j)?j:void 0,{isPropertyInPageDetails:z}=(0,w().d0)({store:t,propertyId:M}),{isMobile:N}=(0,n().O7)().device,U=(0,S().X)(F,50),G=(0,k().E)(t),J=(0,s().VK)((()=>{var e;return"hide"===(null==G||null===(e=G.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[G]),X=(0,C().w)();if(!Z)return null;if("hidden"===L.type)return null;if(!T||!D||!E)return null;const Y=!X&&"relation"!==Z.type,q=!X,$=(0,b().gM)({isMobile:N,stackPropertyLabelAndValue:I,isPropertyInPageDetails:z}),Q=(0,V.jsx)(a().zl,{store:t,propertyId:M,style:z||N?{flexShrink:0}:{position:"absolute",left:null!=U&&U.width?U.width+4:void 0,top:0}}),ee=(0,V.jsxs)(V.Fragment,{children:[Y&&(0,V.jsxs)(p().gq,{alignItems:"center",justifyContent:z?void 0:"space-between",style:$?{width:$,flexShrink:0}:void 0,children:[(0,V.jsx)(g().Z,{schema:D,format:E,hideIcon:J,hideDragHandle:!0,property:M,blockStore:t,collectionStore:T,pagePropertiesStore:R,disabled:P,locked:H,canConfigureCollection:A,isInPeekRenderer:O,styleVariants:{width:(0,b().Gm)({stackPropertyLabelAndValue:I}),height:I?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:W,hideDuplicatePropertyOption:!0}),q?Q:null]}),(0,V.jsx)(m().Z,{store:t,analyticsName:"page_property",children:(0,V.jsx)(c().m,{store:t,property:M,disabled:!B,locked:H,format:d().C.PropertyModule,tableWrap:!0,blockPropertyValueOverlayStore:O?x().Z:f().Z,collectionStore:L.collectionStore,isInPeekRenderer:O,propertyModule:W},M)})]});return _((0,V.jsx)(u().p,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:I?(0,V.jsx)(p().Ht,{ref:F,children:ee}):(0,V.jsx)(p().gq,{ref:F,style:{alignItems:"flex-start"},children:ee})}))}},21535:(e,t,o)=>{o.d(t,{V:()=>p});var i=o(667294),n=()=>o(146947),s=()=>o(219727),r=()=>o(142735),l=()=>o(494488),a=()=>o(707513),c=()=>o(311562),d=()=>o(309797),u=o(785893);const p=i.memo((function(e){let{store:t,context:p,disabled:m,isInSidePeek:h,extraStyles:S,titlePlaceholder:f,collectionContextStore:y,shouldShowTemplatePicker:v,onTitleChange:x,onTitleEditText:b,onTitleEsc:C,onTitleUntab:k,onTitleTab:w,onMoveUp:V,onMoveDown:M,hideText:P,disableEnter:_}=e;const j=(0,s().O7)(),I=(0,s().Fy)(),B=(0,o(657320).l)(),T=(0,r().VK)((()=>t.getTitleStore()),[t]),K=(0,r().VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(o(156642).Ti.externalObjectInstancePage)}),[t]),L=(0,d().L2)(t),D=(0,r().VK)((()=>{if(m)return!1;if(o(764189).n.state)return!1;const e=B&&B.publicEditModeStore.state;return!(0,o(122479).Ix)(e)&&t.canEditCollection()}),[m,B,t]),E=(0,r().VK)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionViewSourceCollectionStore();return!!e&&(0,o(569427).OY)(e.getValue())}),[t]),Z=(0,r().VK)((()=>{const e=t.getModel();return f??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,o(998411).r)(),intl:o(527278).Z.getIntl()}))}),[t,f]),H=!j.device.isMobile&&h,R=(0,r().VK)((()=>D&&!t.isNonEditableState()&&!K&&!L&&!(0,o(772529).Kj)(t.id)&&!("suggest"===o(279386).MT.getMode(t))),[D,K,L,t]),F=(0,r().VK)((()=>t.isEmptyPage()),[t]),A=(0,r().VK)((()=>t.isTemplate()),[t]),O=(0,r().VK)((()=>t.getAssociatedCollectionTemplateStores()),[t]),W=(0,r().VK)((()=>t.getSyncedUri()),[t]),z=function(e){const{store:t,isInSidePeek:i,context:d,extraStyles:u}=e,p=(0,s().O7)(),g=(0,r().VK)((()=>t.getFormat()),[t]),m=(0,r().VK)((()=>t.isCollectionView()),[t]),h=(0,r().VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]);return(0,o(846550).yK)((e=>{const t=!!g.page_small_text||p.device.isMobile||m||i;let o;o=p.device.isMobile?28:t?32:d===c().S.DraftPostInInlineComposer?26:40;const s=d===c().S.DraftPostInInlineComposer?a().Ue.semibold:a().Ue.bold,r=p.device.isMobile?"0px":`${l().ZD}px`;return{title:{...l().ZD,paddingBottom:r,width:h?"fit-content":"100%",fontSize:"1em",fontWeight:"inherit",margin:0,...d===c().S.DraftPostInInlineComposer&&{fontSize:24}},selectable:{color:e.regularTextColor,fontWeight:s,lineHeight:1.2,fontSize:o,fontFamily:a().pe({pageFont:g.page_font,locale:n().locale}),cursor:"text",display:"flex",alignItems:"center",textRendering:p.device.isSafari?"optimizeSpeed":void 0,...u},link:{width:16,fill:e.mediumIconColor},placeholder:{...l().ZD,paddingBottom:r,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text",...d===c().S.DraftPostInInlineComposer&&{color:e.text.tertiary,WebkitTextFillColor:e.text.tertiary}}}}),[p.device.isMobile,p.device.isSafari,u,g.page_font,g.page_small_text,m,h,i,d])}({store:t,isInSidePeek:h,context:p,extraStyles:S}),N=(0,r().VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),U=(0,r().VK)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),G=(0,r().VK)((()=>(null==U?void 0:U.canEdit())??!1),[U]),J=(0,r().VK)((()=>W?(0,o(417746).pI)(W,t.pointer.spaceId):void 0),[t.pointer.spaceId,W]),X=(0,r().VK)((()=>o(524434).KR.shouldEnablePageTitleDiffs(I)),[I]),Y=O&&0===O.length,q=(0,d().sD)(t,p),$=(0,r().VK)((()=>!!_||!q&&(!(!v||A||Y||j.device.isMobile)&&F)),[q,_,v,A,Y,j.device.isMobile,F]),Q=(0,i.useRef)(null),ee=(0,i.useCallback)((()=>{t&&o(269299).createAndCommit({userAction:"TourTutorial.createEmptyTextBlock",environment:j,canUndo:!0,perform:e=>{o(94912).ls({environment:j,store:t,transaction:e})}})}),[t,j]);if(E)return null;if(!T)return null;const te=o(826955).G.createChildStore(T,t.pointer),oe=j.device.isIOS||j.device.isSafari,ie=(0,u.jsx)(o(21062).N,{step:"create_page_start_with_title",showSidebarOverlays:!1,onNextButtonClick:ee,children:P?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)(o(623498).Z,{tagName:"h1",style:z.title,store:T,placeholderStyle:z.placeholder,disabled:!R,placeholder:Z,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!X,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:C,onUntab:k,onTab:w,onMoveDown:M,onMoveUp:V,disableUpDownArrows:!(!v||A||Y||j.device.isMobile)&&F,disableEnter:$,onChange:x,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title",inPageFind:o(12512).B3.block_match},T.id)});return(0,u.jsxs)("div",{style:H?{flex:1}:void 0,ref:Q,children:[(0,u.jsxs)(o(307369).Z,{canSelect:!1,canDrag:!1,canEditText:R,onEditText:b,store:te,style:z.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[oe?(0,u.jsx)(o(58836).p,{allowSelectionWithin:!0,style:{width:"100%",maxWidth:"100%"},children:ie}):ie,(0,u.jsx)(o(63562).BZ,{origin:Q??void 0}),N&&(0,u.jsx)(o(654133).Z,{placement:o(998901).Placement.Bottom,renderTooltip:e=>(0,u.jsx)(o(788860)._H,{...e,defaultMessage:"Link to original url",description:"Link to the original source of the data.",id:"PageTitle.syncedBlock.original"}),render:e=>(0,u.jsx)(o(729775).Z,{href:J,ignoreLocalHoverState:!0,hovered:!1,children:(0,u.jsx)(o(1910).Z,{ariaLabel:"Link",...e,icon:()=>(0,o(237874).N)(z.link),style:{marginLeft:4},onClick:()=>{J&&o(752127).D({url:J,environment:j})}})})}),U&&!j.device.isMobile&&(0,u.jsx)(o(989560).Z,{store:U,canEdit:G,buttonStyle:{fontWeight:"normal",margin:0}})]}),(0,u.jsx)("div",{style:{marginLeft:4},children:(0,u.jsx)(g,{store:t,collectionContextStore:y})})]})}));function g(e){const{store:t,collectionContextStore:i}=e,n=(0,r().VK)((()=>t.isCollectionView()),[t]),s=(0,r().VK)((()=>t.getCollectionViewSourceCollectionStore()),[t]);return n&&i&&s?(0,u.jsx)(o(160740).Z,{collectionStore:s,collectionContextStore:i}):null}},780814:(e,t,o)=>{o.d(t,{J:()=>K});var i=o(667294),n=()=>o(219727),s=()=>o(474788),r=()=>o(142735),l=()=>o(54193),a=()=>o(955620),c=()=>o(650996),d=()=>o(58836),u=()=>o(989560),p=()=>o(986286),g=()=>o(247724),m=()=>o(949842),h=()=>o(191586),S=()=>o(942226),f=()=>o(148126),y=()=>o(772084),v=()=>o(95718),x=()=>o(482162),b=()=>o(70191),C=()=>o(309797),k=()=>o(864060),w=()=>o(45830),V=()=>o(494630),M=()=>o(857719),P=o(785893);function _(e){let{onMouseEnter:t,onMouseLeave:o,headerControls:i}=e;return(0,P.jsx)("div",{onMouseEnter:t,onMouseLeave:o,children:i})}var j=()=>o(32313),I=()=>o(179289),B=()=>o(21535);const T=0;function K(e){const{store:t,hasCover:o,headerFocusStore:K,headerControls:L,isEditable:D,openMenuOnMount:E,openMenuOnMountCallback:Z,pageViewBlockStore:H,discussionInputStore:R,handleHeaderMouseEnter:F,handleHeaderMouseLeave:A,hideTitleIfEmpty:O,isInPageLayoutModuleEditor:W=!1,layoutModule:z,disabled:N,...U}=e,G=(0,n().O7)(),{WindowSizeStore:J}=G,{isMobile:X,isAndroid:Y}=(0,n().Fy)(),[q,$]=(0,i.useState)((()=>!!Y));(0,i.useEffect)((()=>{(async()=>{if((0,f().Sr)(G)){const e=G.RouterStore.getState();if((0,l().FK)(e.route)){await t.load();const e=(0,y().gR)(t),o=null==e?void 0:e.getSiteStore();await(null==o?void 0:o.load());const i=null==o?void 0:o.getSettings(),n=null==i?void 0:i.embedSettings;return void $(Boolean(!(null!=n&&n.hideTitle)))}}$(!0)})()}),[G,t]);const Q=(0,r().VK)((()=>(0,S().wq)(t)),[t]),ee=(0,r().VK)((()=>Q&&(x().default.isSidePeekOpen()||x().default.isSidePeekClosingStore.state)),[Q]),te=X&&!o,oe=!X&&U.isInSidePeek,ie=(0,r().VK)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),ne=(0,r().VK)((()=>t.canEdit()),[t]),se=(0,r().VK)((()=>J.getSafePaddingLeftCSS(T)),[J]),re=(0,r().VK)((()=>J.getSafePaddingRightCSS(T)),[J]),le=(0,r().VK)((()=>(0,h().kC)(t,G)),[t,G]),ae=(0,C().L2)(t),ce=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,s().E)(t)&&K.setState(!0)}),[K]),de=(0,i.useCallback)((()=>{K.setState(!1)}),[K]),ue=(0,P.jsx)("div",{className:Q?g().JiT:void 0,style:{display:"flow-root",pointerEvents:"auto"},children:(0,P.jsx)(j().Z,{store:t,isEditable:D,hasCover:o,isInSidePeek:U.isInSidePeek,openMenuOnMount:E,openMenuOnMountCallback:Z,isInPageLayoutModuleEditor:W})}),pe=(0,r().VK)((()=>{var e;return(0,a().PgY)(null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue())}),[t]),ge=(0,P.jsx)(B().V,{store:t,disabled:N,hideText:O&&pe||!q,...U}),me=(0,r().VK)((()=>t.getAssociatedCollectionStore()),[t]),{context:he}=U,Se=(0,r().VK)((()=>!(!me||!z)&&(0,w().$)({collectionStore:me,module:z,isMobile:X})),[me,X,z]),fe=(0,r().VK)((()=>null==me?void 0:me.getSchema()),[me]),ye=fe&&z?(0,b().zD)({collectionSchema:fe,module:z}):void 0,ve=i.useMemo((()=>{const e={...Boolean(null==ye?void 0:ye.length)&&(X?{paddingBottom:20}:{paddingBottom:V().Yq})};return(0,P.jsxs)(P.Fragment,{children:[me&&Se&&(0,P.jsx)("div",{style:e,children:(0,P.jsx)(k().Z,{collectionStore:me,pageViewBlockContext:he})}),Boolean(null==ye?void 0:ye.length)&&(0,P.jsx)("div",{style:{paddingTop:X&&!Se?V().Yq:void 0,marginLeft:-2},children:(0,P.jsx)(I().V,{context:he,disabled:N,store:t,variant:"pinned",layoutModule:z,propertyIds:ye,wrapper:e=>(0,P.jsx)(M().Pb,{children:e}),customization:{disableContainerPadding:!0,disableLastRowBottomPadding:!0}})})]})}),[me,X,z,he,ye,N,Se,t]),xe=(0,r().VK)((()=>(0,v().UV)(t)),[t]);return ee?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(d().p,{allowSelectionWithin:!0,children:[(0,P.jsx)(_,{onMouseEnter:F,onMouseLeave:A,headerControls:L}),q&&ue,ge,ae&&(0,P.jsx)(p().yY,{store:t})]}),ve]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:le,onMouseEnter:F,onMouseLeave:A,children:(0,P.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:se,width:"100%"},onClick:async e=>{if(xe){const e=await c().assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(G)}(0,m().ZP)({event:e,context:m().Af.PageTitleClick})},children:[(0,P.jsxs)(d().p,{onFocus:ce,onBlur:de,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[te&&L,q&&!oe&&ue,!te&&L]}),(0,P.jsx)("div",{style:{paddingRight:re},children:oe?(0,P.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[q&&ue,ge,ae&&(0,P.jsx)(p().yY,{store:t})]}):ge}),ae&&(0,P.jsx)(p().yY,{store:t}),ie?(0,P.jsx)(u().Z,{store:ie,canEdit:ne}):null]})}),ve]})}},305128:(e,t,o)=>{o.d(t,{T:()=>b});o(267602),o(653476),o(241792);var i=o(667294),n=()=>o(142735),s=()=>o(846550),r=()=>o(421551),l=()=>o(532850),a=()=>o(109477),c=()=>o(305580),d=()=>o(788860),u=()=>o(58836),p=()=>o(251932),g=()=>o(386790),m=()=>o(749826),h=()=>o(121700),S=()=>o(311562),f=()=>o(27475),y=()=>o(494630),v=()=>o(452220),x=o(785893);function b(e){const{pageStore:t,disabled:o,context:b,wrapper:C,showDefaultTitle:k}=e,w=b===S().S.PeekView,{isPageLocked:V}=(0,n().VK)((()=>({isPageLocked:t.isNonEditableState()})),[t]),{collectionStore:M,collectionSchema:P,normalizedCollectionFormat:_}=(0,n().VK)((()=>{const e=t.getAssociatedCollectionStore(),o=null==e?void 0:e.getSchema(),i=null==e?void 0:e.getFormat();return{collectionStore:e,collectionSchema:o,normalizedCollectionFormat:i&&o&&(0,c().i)(i,o,void 0,a().j5.Collection)}}),[t]),j=(0,i.useCallback)((e=>{const o=null==P?void 0:P[e];if("relation"!==(null==o?void 0:o.type))return!1;const i=t.getPropertyValue(e);return 0===(0,l().j$)({relationValue:(0,l().rq)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeDeleted:m().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:m().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:m().default.checkGate({gateName:"relations_show_no_access"})}).length}),[P,t]),I=(0,n().VK)((()=>{if(!P||!_)return[];return(0,r().d)({format:_,schema:P,visibilityLevels:["inline"]}).filter((e=>!j(e)))}),[P,j,_]),B=(0,n().VK)((()=>{if(!P||!_)return[];return(0,r().n)({format:_,schema:P,visibilityLevels:["minimal","inline"]}).filter((e=>"minimal"===e.visibility||!("inline"!==e.visibility||!j(e.section)))).map((e=>e.section))}),[P,j,_]),T=(0,n().VK)((()=>t.canEdit()),[t]),K=(0,s().yK)((e=>({inlinePageSectionsContainer:{...B.length>0?{marginBottom:y().Kq+y().Yq+(T?-4:0)}:{}},minimalPropertiesContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})),[B.length,T]);return M&&P&&_&&(0!==I.length||0!==B.length)?C((0,x.jsx)(p().Ht,{gap:4,children:(0,x.jsxs)(u().p,{allowSelectionWithin:!0,children:[I.length>0&&(0,x.jsx)("div",{style:K.inlinePageSectionsContainer,children:(0,x.jsx)(g().Z,{propertyIds:I,store:t,collectionStore:M,disabled:o,locked:V,blockPropertyValueOverlayStore:w?f().Z:h().Z,format:_,type:"inline"})}),B.length>0&&(0,x.jsxs)(x.Fragment,{children:[k&&(0,x.jsx)(v().$,{store:t,style:{marginLeft:6},children:(0,x.jsx)(d()._H,{id:"pageLayout.relationsGroup.defaultTitle",defaultMessage:"Relations"})}),(0,x.jsx)("div",{style:K.minimalPropertiesContainer,children:(0,x.jsx)(g().Z,{propertyIds:B,store:t,collectionStore:M,disabled:o,locked:V,blockPropertyValueOverlayStore:w?f().Z:h().Z,format:_,type:"minimal"})})]})]})})):null}},291848:(e,t,o)=>{o.d(t,{w:()=>s});var i=()=>o(142735),n=()=>o(26796);function s(){return(0,i().VK)((()=>n().Z.state.isOpen),[])}},844650:(e,t,o)=>{o.d(t,{B:()=>r});const i={id:"pageLayoutEditor.property",defaultMessage:"Property",description:"Label for the property section in the page layout editor"},n={id:"pageLayoutEditor.titleWithIcon",defaultMessage:"Heading",description:"Label for the titleWithIcon section in the page layout editor"},s={id:"pageLayoutEditor.collectionView",defaultMessage:"Database View",description:"Label for the form submit button section in the form page layout editor"},r=(0,o(788860).vU)({cover:{id:"pageLayoutEditor.cover",defaultMessage:"Cover"},properties:{id:"pageLayoutEditor.properties",defaultMessage:"Property group"},inlinePageSections:{id:"pageLayoutEditor.inlinePageSections",defaultMessage:"Inline Page Sections"},expandedBacklinks:{id:"pageLayoutEditor.expandedBacklinks",defaultMessage:"Backlinks"},discussions:{id:"pageLayoutEditor.discussions",defaultMessage:"Page Comments"},editor:{id:"pageLayoutEditor.editor",defaultMessage:"Content"},tabs:{id:"pageLayoutEditor.tabs",defaultMessage:"Tabs"},transcript:{id:"pageLayoutEditor.transcript",defaultMessage:"Transcript"},bottomControls:{id:"pageLayoutEditor.bottomControls",defaultMessage:"Bottom Controls"},selectAModulePrompt:{id:"pageLayoutEditor.selectAModuleTitle",defaultMessage:"Select a module to configure"},deleteModuleButton:{id:"pageLayoutEditor.deleteModuleButton",defaultMessage:"Delete"},views:{id:"pageLayoutEditor.views",defaultMessage:"Views"},viewsMain:{id:"pageLayoutEditor.views",defaultMessage:"Views"},relationsGroup:{id:"pageLayoutEditor.relationsGroup",defaultMessage:"Relations group"},formTitle:{id:"pageLayoutEditor.formTitle",defaultMessage:"Form Title"},formQuestion:{id:"pageLayoutEditor.formQuestion",defaultMessage:"Form Question"},formSubmit:{id:"pageLayoutEditor.formSubmit",defaultMessage:"Form Submit"},placeholder:{id:"pageLayoutEditor.placeholder",defaultMessage:"New"},normalizedTitleWithIcon:n,titleWithIcon:n,deleted_property:i,property_number:i,property_title:i,property_person:i,property_file:i,property_text:i,property_checkbox:i,property_url:i,property_email:i,property_phone_number:i,property_created_by:i,property_last_edited_by:i,property_button:i,property_select:i,property_multi_select:i,property_status:i,property_date:i,property_created_time:i,property_last_edited_time:i,property_last_visited_time:i,property_relation:i,property_rollup:i,property_formula:i,property_auto_increment_id:i,property_location:i,property_verification:i,property_geo_point:i,property:i,collectionView:s,collectionViewV2:s})},761650:(e,t,o)=>{o.d(t,{Z:()=>s});var i=()=>o(639708),n=()=>o(696459);function s(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,i().Vd)(t)?`module__property_${e.id}`:void(0,n().t1)(t)}},57956:(e,t,o)=>{o.d(t,{F6:()=>d,Kr:()=>c,T7:()=>u,x:()=>p});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(696459),l=()=>o(593515),a=()=>o(670655);function c(e){const{format:t}=e;return{backlinksConfiguredToShowAboveTitle:(0,s().VK)((()=>{const e=(0,a().pJ)(t.page_section_visibility);return"section_collapsed"===e||"always_show"===e}),[t.page_section_visibility])}}function d(e){const{store:t,format:o}=e,s=(0,n().O7)();return{backlinksVisibility:(0,a().pJ)(o.page_section_visibility),updateBacklinksVisibility:(0,i.useCallback)((e=>{const i=(0,a().AN)(e);l().W4({environment:s,pageSection:"backlinks",visibility:i,store:t,format:o})}),[s,t,o])}}function u(e){const{pageStore:t,numBacklinks:o}=e,{store:i,format:n}=(0,s().VK)((()=>{const e=t.getAssociatedCollectionStore()??t,o=e.getFormat();return{store:e,format:o}}),[t]),{backlinksVisibility:l}=d({store:i,format:n});return 0===o?"never":"always_show"===l?"always":"section_collapsed"===l?"onHover":"section_hide"===l?"never":void(0,r().t1)(l)}function p(e){return!1}},896641:(e,t,o)=>{o.d(t,{L:()=>S,S:()=>h});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(228244);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(570270),l=()=>o(513197),a=()=>o(667932),c=()=>o(639708),d=()=>o(887430),u=()=>o(138196),p=()=>o(778447),g=()=>o(311562),m=()=>o(494630);function h(e){const{pageStore:t,pageViewBlockStore:o,postContext:r,collectionStore:a,collectionSchema:p}=e,{collectionStore:g,collectionFormat:h,collectionSchema:f,canConfigureCollection:y}=(0,s().VK)((()=>{const e=a||(null==t?void 0:t.getAssociatedCollectionStore()),o=p||(null==e?void 0:e.getSchema()),i=null==e?void 0:e.getFormat(),n=e&&d().eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:i,canConfigureCollection:n}}),[t,a,p]),v=(0,n().O7)(),x=(0,s().VK)((()=>(0,u().Z)({environment:v,store:t,pageViewBlockStore:o})),[v,t,o]),b=S({collectionFormat:h,collectionSchema:f,layoutStore:(0,s().VK)((()=>null==g?void 0:g.getLayoutStore()),[g]),postContext:r,pageStoreId:null==t?void 0:t.id}),C=(0,s().VK)((()=>{const e=b.page_main.some((e=>(0,c().z1)(e)))||b.page_details.some((e=>(0,c().z1)(e)));return!(!g||!e)&&(0,m().Wd)({modulesByArea:b,collectionStore:g})}),[b,g]),k=(0,i.useMemo)((()=>{const e=new Set;return(!Boolean(g)||!y&&C)&&e.add("properties"),"hidden"===(null==x?void 0:x.type)&&e.add("discussions"),e}),[y,g,null==x?void 0:x.type,C]);return(0,i.useMemo)((()=>0===k.size?b:(0,l().e)(b,(e=>!k.has(e.type)))),[b,k])}function S(e){const{layoutStore:t,collectionSchema:o,collectionFormat:n,postContext:l,pageStoreId:c}=e,d=(0,i.useRef)(c),u=(0,i.useRef)(null);return(0,s().VK)((()=>{var e;if(l===g().S.DraftPostInInlineComposer)return a().KD;if((0,p().XH)(l)){const e=(0,r().oE)(o,"created_time"),t=(0,r().oE)(o,"created_by"),i=[];t&&i.push(t),e&&i.push(e);return{...a()._I,page_main:[{...a()._I.page_main[0],propertyIds:i},...a()._I.page_main.slice(1)]}}let i=null==t?void 0:t.getModules();const s=c&&i&&c===d.current&&0===i.page_main.length&&(null===(e=u.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return i&&!s||(i=(0,a().x9)({collectionSchema:o,collectionFormat:n})),d.current=c,u.current=i,i}),[t,c,o,n,l])}},69890:(e,t,o)=>{o.d(t,{c:()=>c});var i=o(667294),n=()=>o(142735),s=()=>o(853686),r=()=>o(311562),l=()=>o(611252),a=()=>o(469863);function c(e){let{store:t,environment:o,postContext:c}=e;const{pageVisitStore:d,presenceStore:u}=(0,n().VK)((()=>({pageVisitStore:new(l().Z),presenceStore:new(a().Z)})),[]);return(0,i.useEffect)((()=>{!c||c!==r().S.PostInFullPageOrPeek&&c!==r().S.PostInFeed||(t.id!==d.state.pageId&&d.setState({...d.getInitialState(),pageId:t.id}),s().Ri(o,{blockStore:t,pageVisitStore:d,incremental:!1,includeTotalCount:!0}))}),[t,d,o,u,c]),{pageVisitStore:d,presenceStore:u}}},844095:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const n=new i},969269:(e,t,o)=>{o.d(t,{o:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},78652:(e,t,o)=>{o.d(t,{V:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("reactionAdd",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M12 14.3516C12 14.1875 12.0573 14.0482 12.1719 13.9336C12.2891 13.8164 12.4297 13.7578 12.5938 13.7578H14.7617V11.5938C14.7617 11.4297 14.819 11.2904 14.9336 11.1758C15.0482 11.0586 15.1875 11 15.3516 11C15.5156 11 15.6549 11.0586 15.7695 11.1758C15.8867 11.2904 15.9453 11.4297 15.9453 11.5938V13.7578H18.1133C18.2747 13.7578 18.4128 13.8164 18.5273 13.9336C18.6445 14.0482 18.7031 14.1875 18.7031 14.3516C18.7031 14.5156 18.6445 14.6562 18.5273 14.7734C18.4128 14.888 18.2747 14.9453 18.1133 14.9453H15.9453V17.1133C15.9453 17.2747 15.8867 17.4128 15.7695 17.5273C15.6549 17.6445 15.5156 17.7031 15.3516 17.7031C15.1875 17.7031 15.0482 17.6445 14.9336 17.5273C14.819 17.4128 14.7617 17.2747 14.7617 17.1133V14.9453H12.5938C12.4297 14.9453 12.2891 14.888 12.1719 14.7734C12.0573 14.6562 12 14.5156 12 14.3516Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0615 17.123C9.09538 17.123 8.1862 16.9385 7.33398 16.5693C6.48177 16.2048 5.72982 15.6966 5.07812 15.0449C4.43099 14.3932 3.92285 13.6413 3.55371 12.7891C3.18457 11.9368 3 11.0277 3 10.0615C3 9.09538 3.18457 8.1862 3.55371 7.33398C3.92285 6.48177 4.43099 5.7321 5.07812 5.08496C5.72982 4.43327 6.47949 3.92285 7.32715 3.55371C8.17936 3.18457 9.08854 3 10.0547 3C11.0254 3 11.9368 3.18457 12.7891 3.55371C13.6413 3.92285 14.3932 4.43327 15.0449 5.08496C15.6966 5.7321 16.207 6.48177 16.5762 7.33398C16.9453 8.1862 17.1299 9.09538 17.1299 10.0615C17.1299 10.6193 17.0684 11.1581 16.9453 11.678V11.5938C16.9453 11.1646 16.7813 10.7706 16.4767 10.4687C16.2657 10.2558 16.0099 10.1116 15.7285 10.0441C15.7263 9.26677 15.5805 8.53887 15.291 7.86035C14.9993 7.1722 14.5938 6.56836 14.0742 6.04883C13.5547 5.5293 12.9508 5.1237 12.2627 4.83203C11.5791 4.54036 10.8431 4.39453 10.0547 4.39453C9.27083 4.39453 8.53483 4.54036 7.84668 4.83203C7.16309 5.1237 6.5638 5.5293 6.04883 6.04883C5.53385 6.56836 5.13053 7.1722 4.83887 7.86035C4.5472 8.54395 4.40137 9.27767 4.40137 10.0615C4.40137 10.8499 4.5472 11.5859 4.83887 12.2695C5.13053 12.9531 5.53385 13.5547 6.04883 14.0742C6.56836 14.5938 7.16992 14.9993 7.85352 15.291C8.54167 15.5827 9.27767 15.7285 10.0615 15.7285C10.5739 15.7285 11.0641 15.6669 11.5321 15.5438C11.8272 15.8056 12.1958 15.9453 12.5938 15.9453H13.7617V16.0641C13.4535 16.2554 13.1293 16.4238 12.7891 16.5693C11.9368 16.9385 11.0277 17.123 10.0615 17.123ZM10.0547 13.4248C9.58073 13.4248 9.16146 13.3405 8.79688 13.1719C8.43685 12.9987 8.15658 12.8005 7.95605 12.5771C7.76009 12.3538 7.66211 12.167 7.66211 12.0166C7.66211 11.9346 7.69401 11.8776 7.75781 11.8457C7.82617 11.8092 7.89909 11.8092 7.97656 11.8457C8.22721 11.9779 8.51204 12.1055 8.83105 12.2285C9.15006 12.3516 9.55794 12.4131 10.0547 12.4131C10.5514 12.4131 10.9593 12.3516 11.2783 12.2285C11.6019 12.1055 11.8867 11.9779 12.1328 11.8457C12.2103 11.8092 12.2832 11.8092 12.3516 11.8457C12.4199 11.8776 12.4541 11.9346 12.4541 12.0166C12.4541 12.167 12.3538 12.3538 12.1533 12.5771C11.9528 12.8005 11.6725 12.9987 11.3125 13.1719C10.9525 13.3405 10.5332 13.4248 10.0547 13.4248ZM8.03809 9.44629C7.82389 9.44629 7.63704 9.3597 7.47754 9.18652C7.32259 9.01335 7.24512 8.79004 7.24512 8.5166C7.24512 8.24772 7.32259 8.02669 7.47754 7.85352C7.63704 7.67578 7.82389 7.58691 8.03809 7.58691C8.25228 7.58691 8.44141 7.67578 8.60547 7.85352C8.76953 8.02669 8.85156 8.24772 8.85156 8.5166C8.85156 8.79004 8.76953 9.01335 8.60547 9.18652C8.44141 9.3597 8.25228 9.44629 8.03809 9.44629ZM12.0713 9.44629C11.8571 9.44629 11.6702 9.3597 11.5107 9.18652C11.3558 9.01335 11.2783 8.79004 11.2783 8.5166C11.2783 8.24772 11.3558 8.02669 11.5107 7.85352C11.6702 7.67578 11.8571 7.58691 12.0713 7.58691C12.2855 7.58691 12.4746 7.67578 12.6387 7.85352C12.8027 8.02669 12.8848 8.24772 12.8848 8.5166C12.8848 8.79004 12.8027 9.01335 12.6387 9.18652C12.4746 9.3597 12.2855 9.44629 12.0713 9.44629Z"})]})})}}]);