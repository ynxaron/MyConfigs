"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5054],{787738:(e,t,n)=>{n.d(t,{K:()=>r});var o=()=>n(594546);function r(e,t){const{spaceId:n,pageId:r,joinSpaceMethod:a}=t;(0,o().j)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:n,pageId:r,joinSpaceMethod:a}}})}},5485:(e,t,n)=>{n.d(t,{k:()=>S});var o=n(667294),r=()=>n(732811),a=()=>n(142735),i=()=>n(157955),s=()=>n(529048),l=()=>n(166312),c=()=>n(158548),d=(n(241792),()=>n(788860)),u=()=>n(696459),p=()=>n(827973),m=()=>n(198829),g=()=>n(255577),h=()=>n(388284),f=()=>n(918745),v=n(785893);const b=(0,d().vU)({day:{id:"automations.RecurrencePresetMenu.day",defaultMessage:"Day"},weekday:{id:"automations.RecurrencePresetMenu.weekday",defaultMessage:"Weekday"},week:{id:"automations.RecurrencePresetMenu.week",defaultMessage:"Week"},twoWeeks:{id:"automations.RecurrencePresetMenu.twoWeeks",defaultMessage:"2 Weeks"},month:{id:"automations.RecurrencePresetMenu.month",defaultMessage:"Month"},threeMonths:{id:"automations.RecurrencePresetMenu.threeMonths",defaultMessage:"3 Months"},sixMonths:{id:"automations.RecurrencePresetMenu.sixMonths",defaultMessage:"6 Months"},year:{id:"automations.RecurrencePresetMenu.year",defaultMessage:"Year"}}),C={day:b.day,weekday:b.weekday,week:b.week,twoWeeks:b.twoWeeks,month:b.month,threeMonths:b.threeMonths,sixMonths:b.sixMonths,year:b.year};function y(e){const{onSelect:t}=e,n=(0,f().F)(),o=[{key:"default",items:(0,u().qP)(C).map((e=>{let[n]=e;return{key:n,action:()=>{t(function(e){const t=(0,l().dF)();switch(e){case"day":return{...t,frequency:"day"};case"weekday":return{...t,frequency:"week",weekdays:["MO","TU","WE","TH","FR"]};case"week":return{...t,frequency:"week",weekdays:["MO"]};case"twoWeeks":return{...t,frequency:"week",interval:2,weekdays:["MO"]};case"month":return{...t,frequency:"month"};case"threeMonths":return{...t,frequency:"month",interval:3};case"sixMonths":return{...t,frequency:"month",interval:6};case"year":return{...t,frequency:"year"};default:(0,u().t1)(e)}}(n))},render:e=>(0,v.jsx)(p().Z,{...e,title:(0,v.jsx)(d()._H,{...C[n]})})}})),render:e=>(0,v.jsx)(h().Z,{...e})}];return(0,v.jsx)(m().Z,{...n,children:(0,v.jsx)(g().ZP,{type:g().iW.Vertical,sections:o,initialFocus:0})})}var _=()=>n(25303);const x=150;function S(e){const{recurrence:t,onChange:n,disabled:d,autoFocusIfNew:u,allowDelete:p,buttonPopupStore:m}=e,g=(0,a().qz)(m,s().Z);(0,r().K)((()=>{u&&!t&&setTimeout((()=>{g.setState({open:!0})}),x)}));const[h,f]=(0,o.useState)(),b=(0,o.useMemo)((()=>h||(t?{...(0,i().convertToUnpersistedRecurrenceConfig)(t),hour:t.hour??0,minute:t.minute??0}:(0,l().dF)())),[h,t]),[C,S]=(0,o.useState)(!1);(0,o.useEffect)((()=>{S((e=>e||Boolean(t)))}),[t]);const k=(0,o.useCallback)((e=>{f(e);const t=(0,_().h)(e)&&void 0!==(0,i().getNextDateUtc)((0,i().convertFromUnpersistedRecurrenceConfig)(e));n(t?e:void 0)}),[n]),w=(0,o.useCallback)((()=>{n(void 0),S(!1),g.setState({open:!1})}),[n,g]),I=(0,o.useCallback)((e=>{f(e),n(e),g.setState({open:!1}),setTimeout((()=>{S(!0),g.setState({open:!0})}),x)}),[n,g]),j=(0,o.useCallback)((()=>{f(void 0),S(Boolean(t))}),[t]);return{render:(0,o.useCallback)((()=>C||t?(0,v.jsx)(c().w,{currentValue:b,onChange:k,onDelete:p?w:void 0,disabled:d}):(0,v.jsx)(y,{onSelect:I})),[C,t,b,k,p,w,d,I]),onClose:j,buttonPopupStore:g}}},918745:(e,t,n)=>{n.d(t,{F:()=>s,U:()=>i});var o=()=>n(219727),r=()=>n(142735),a=()=>n(352230);function i(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:a().o.ActionSheet}:{menuType:a().o.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function s(e){const t=(0,o().Fy)();return(0,r().VK)((()=>i({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},938564:(e,t,n)=>{n.r(t),n.d(t,{BannersRenderer:()=>wt});n(241792);var o=n(667294),r=()=>n(219727),a=()=>n(142735),i=()=>n(696459),s=()=>n(127898),l=()=>n(522411),c=()=>n(589525),d=()=>n(682551),u=()=>n(235629),p=()=>n(548812),m=()=>n(193173),g=()=>n(30795),h=()=>n(479092),f=()=>n(878911),v=()=>n(459815),b=()=>n(897257),C=()=>n(87098),y=()=>n(646574),_=()=>n(832054),x=()=>n(308186),S=()=>n(528918),k=()=>n(497065),w=()=>n(730621),I=()=>n(500174),j=()=>n(876822),M=()=>n(489434),T=n(785893);const B=function(e){var t;const{legacyColor:i}=e,s=(0,r().O7)(),l=(0,a().VK)((()=>j().default.state.currentUserStore),[]),c=(0,a().VK)((()=>null==l?void 0:l.getEmail()),[l]),d="makenotion.com"===(0,n(446866).Gd)(c??""),[u,p]=o.useState("");o.useEffect((()=>{!async function(){try{const e=await(0,n(274879).getCookie)(s,"notion_ghost_preferred_role");p((t=>e??""))}catch(e){console.error(e)}}()}));const m="full"===u?"restricted":"full",g=o.useCallback((async()=>{if(!c)return null;const e=await _().N(s,{email:c,intercomLink:"switch role",preferredLoginRole:m});if("failed"===e.type)S().x(),x().x2(e);else{const{userId:t}=e.data,o=`Success! click "Continue" to enter account for "${c}" in ${w().v[m].text} mode.`,r=e.data.expiryTime?`${o} The user has granted access until ${(0,y().Yx)(e.data.expiryTime,"medium_with_time",n(578292).al)}.`:o;S().x(),x().vC({message:r,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{n(406973).O({userId:t,environment:s})}}]})}}),[s,c,m]);if(!c)return null;const h=(0,T.jsxs)(T.Fragment,{children:[`You are currently logged in as ${c}`,(0,T.jsx)("i",{children:u&&d?` (${null===(t=w().v[u])||void 0===t?void 0:t.text} access)`:""}),"."]});let f=[{label:"Back to Admin Console",onClick:()=>{k().c4({environment:s,url:"/__admin"})}},{label:"Logout as user",onClick:()=>{_().B(s)}}];return u&&d&&(f=[{label:`Switch to ${w().v[m].text} mode`,onClick:()=>g()},...f]),(0,T.jsx)(M().j,{label:h,display:"full-width",actions:f,tint:(0,I().X)(i)})};n(670560);var L=()=>n(846550),V=()=>n(506347),A=()=>n(135857),D=()=>n(788860),P=()=>n(707513),Z=()=>n(205228);const U=(0,D().vU)({viewTutorial:{id:"pageViewBlock.asanaImporterBanner.tutorialPage",defaultMessage:"View tutorial"},dismissAriaLabel:{id:"ageViewBlock.asanaImporterBanner.dismiss.ariaLabel",defaultMessage:"Dismiss"}});const F=function(e){let{blockStore:t,legacyColor:i}=e;const{tutorial_page:s,number_of_projects:l}=(0,a().VK)((()=>{var e,n;return{tutorial_page:null===(e=t.getFormat())||void 0===e?void 0:e.asana_importer_tutorial_page,number_of_projects:(null===(n=t.getFormat())||void 0===n?void 0:n.asana_importer_number_of_projects)??0}}),[t]),c=(0,r().O7)(),d=((0,L().yK)((e=>({helpCenterButtonStyles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:P().JB.UIRegular.desktop,padding:"6px, 0px, 0px, 0px",borderRadius:4,color:e.mediumTextColor,marginTop:5,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:16,height:16,padding:"0.5px, 0px, 0px, 0px"},helpCenterButtonTextStyles:{width:238,height:18,font:"SF Pro",fontWeight:P().Ue.medium,fontSize:P().JB.UIRegular.desktop,color:e.accentColors.uiBlue[600]}})),[]),(0,o.useCallback)((()=>{k().c4({url:(0,A().Z)({pageId:s,pageModel:(0,n(718162).lA)({table:n(396136).iU,id:s}),baseUrl:Z().default.domainBaseUrl,pageVisitSource:V().tY.Import}),environment:c})}),[c,s])),u=(0,o.useCallback)((()=>{n(269299).createAndCommit({environment:c,userAction:"userSettingsActions.setDismissedAsanaImporterBanner",canUndo:!0,perform:e=>{n(636340).sW({store:t.getFormatStore(),transaction:e,data:{dismissed_asana_import_banner:!0}})}})}),[t,c]),p=[];s&&p.push({label:(0,T.jsx)(D()._H,{...U.viewTutorial}),onClick:()=>d()}),p.push({label:(0,T.jsx)(D()._H,{id:"pageViewBlock.asanaImporterBanner.dismiss",defaultMessage:"Dismiss"}),onClick:u});const m=(0,o.useMemo)((()=>(0,T.jsx)(D()._H,{id:"pageViewBlock.asanaImporterBanner.tutorial",defaultMessage:"Imported {number_of_projects} Asana {project_or_projects} to Notion",values:{number_of_projects:l,project_or_projects:1===l?"project":"projects"}})),[l]);return(0,T.jsx)(M().j,{label:m,display:"full-width",actions:p,tint:(0,I().X)(i)})};var R=()=>n(641772),q=()=>n(979348),K=()=>n(112955),H=()=>n(366825),N=()=>n(454393),O=()=>n(663366),W=()=>n(255933),E=()=>n(568017),z=()=>n(429725),Y=()=>n(826955),X=()=>n(729775),$=()=>n(943620),Q=()=>n(384241);function J(e){const{urlStore:t,titleStore:n}=e,o=(0,r().Fy)(),i=n||t,{icon:s,url:l}=(0,a().VK)((()=>({icon:i.getIcon(),url:(0,z().ZP)({store:t,fullyQualified:!1,pageVisitSource:V().tY.Move})})),[i,t]);return(0,T.jsxs)(X().Z,{href:l,style:{display:"inline-flex"},innerStyle:{display:"inline-flex",alignItems:"baseline"},children:[(0,T.jsx)($().Z,{disabled:!0,icon:s,isEmptyPage:!1,size:o.isMobile?18:16,emojiSize:o.isMobile?24:20,style:{marginRight:"0.2em",fill:""},pageIconStyle:{fill:E().ZP.white}}),(0,T.jsx)(Q().Z,{store:i,style:{fontWeight:P().Ue.medium}})]})}function G(e){let{movedSourceBlockStore:t,moveTarget:n}=e;return o.useMemo((()=>(0,T.jsx)(J,{urlStore:Y().G.createChildStore(t,n.moved_to),titleStore:Y().H2.createChildStore(t,{table:W().bx,id:n.moved_to.spaceId})})),[t,n])}function ee(e){let{movedSourceBlockStore:t,moveTarget:n}=e;const o=G({movedSourceBlockStore:t,moveTarget:n});return(0,T.jsx)(D()._H,{defaultMessage:"Moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.pageMovedMessage",values:{targetSpaceLink:o}})}function te(e){let{movedSourceBlockStore:t,moveTarget:n}=e;const o=G({movedSourceBlockStore:t,moveTarget:n});return(0,T.jsx)(D()._H,{defaultMessage:"{movedAncestorLink} was moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.ancestorMovedMessage",values:{targetSpaceLink:o,movedAncestorLink:(0,T.jsx)(J,{urlStore:t})}})}var ne=()=>n(352230),oe=()=>n(228772),re=()=>n(998901),ae=()=>n(529048),ie=()=>n(815277),se=()=>n(64742),le=()=>n(827973),ce=()=>n(448419),de=()=>n(1910),ue=()=>n(198829),pe=()=>n(255577),me=()=>n(967092),ge=()=>n(388284),he=()=>n(146947),fe=()=>n(18902),ve=()=>n(998411),be=()=>n(135796),Ce=()=>n(429892),ye=()=>n(365969),_e=()=>n(176691),xe=()=>n(480089),Se=()=>n(218181),ke=()=>n(46335);function we(e){const{blockStore:t,intl:n}=e,o=(0,oe().r)(),r=(0,xe().FS)(t),{trashAuthorDisplayName:i,trashTimestamp:s,isMovedToTrashMetadata:l}=(0,Se().q)({blockStore:t,closestNonAliveAncestorStore:r,intl:n}),c=(0,a().VK)((()=>(0,fe().Tv)(null==o?void 0:o.getModel())),[o]),d=(0,a().VK)((()=>{const e=(0,ye().As)();return(0,fe().KH)({movedToTrashTime:l?s:void 0,deleteFromTrashDelayMs:c,cdrrDeletionEnabledTimestamp:e})}),[l,s,c]);if(d<=Date.now()){const e=(0,Ce().uP)(c/1e3,n);return(0,T.jsx)(D()._H,{defaultMessage:"This page will be deleted soon since it was moved to the Trash over {retentionWindowCopy} ago",id:"pageViewBlock.trashBanner.message.pendingDeletion",values:{retentionWindowCopy:e}})}const u=(0,_e().IS)(s,{roundDownYears:!0,useWeeks:!0,useLowercase:!0}),p=(0,y().Yx)(s,"medium_with_time",he().locale),m=(0,ye().MP)({type:"daterange",start_date:(0,y().$6)(Date.now()),end_date:(0,y().$6)(d)},(0,ve().r)(),n);return l?(0,T.jsx)(D()._H,{defaultMessage:"{trashAuthorDisplayName} moved this page to Trash {movedToTrashDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.trashMetadata",values:{trashAuthorDisplayName:i,movedToTrashDateComponent:(0,T.jsx)(ke().Z,{text:u,tooltipText:p,icon:be().C}),numDaysLeftInTrashComponent:(0,T.jsx)(ke().Z,{text:m,tooltipText:(0,y().$6)(d),icon:be().C})}}):(0,T.jsx)(D()._H,{defaultMessage:"{trashAuthorDisplayName} last edited this page {lastEditedDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.lastEdited",values:{trashAuthorDisplayName:i,lastEditedDateComponent:(0,T.jsx)(ke().Z,{text:u,tooltipText:p,icon:be().C}),numDaysLeftInTrashComponent:(0,T.jsx)(ke().Z,{text:m,tooltipText:(0,y().$6)(d),icon:be().C})}})}function Ie(e){var t;let{spaceStore:n,blockStore:o,sourceBlock:i}=e;const s=(0,r().O7)(),l=null===(t=s.currentUser)||void 0===t?void 0:t.id,c=(0,r().Fy)(),d=(0,a().VK)((()=>Be(s,o,n,l)),[s,o,n,l]),u=(0,L().yK)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",...c.isMobile&&{flexWrap:"wrap",paddingTop:8,paddingBottom:8}},button:{...c.isMobile&&{marginTop:8}}})),[c.isMobile]),{message:p,restoreVariant:m}=(0,a().VK)((()=>{const{store:e,moved:t}=i,n=e.id===o.id;return{message:n?(0,T.jsx)(ee,{movedSourceBlockStore:e,moveTarget:t}):(0,T.jsx)(te,{movedSourceBlockStore:e,moveTarget:t}),restoreVariant:n?"lastVersion":"currentPage"}}),[o.id,i]);return(0,T.jsxs)("div",{style:u.banner,children:[(0,T.jsx)("div",{children:p}),d&&(0,T.jsx)("div",{style:u.button,children:(0,T.jsx)(Te,{variant:m,blockStore:o})})]})}function je(e){var t;const n=(0,r().O7)(),{spaceStore:o}=e,i=(0,a().qz)(void 0,ae().Z),s=(0,L().yK)((()=>({popupMenu:{},iconContainer:{marginLeft:12},dotsIcon:{fill:"currentColor"},itemIcon:{height:18,width:18,fill:"currentColor"}})),[]),l=(0,ie().VX)({name:"configurable_deletion_and_retention_settings",spaceId:null==o?void 0:o.id,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id});if(!(0,a().VK)((()=>(null==o?void 0:o.canAdmin())&&l),[o,l]))return null;const c=[{key:"open-settings",render:e=>(0,T.jsx)(le().Z,{...e,icon:(0,q().D)(s.itemIcon),title:(0,T.jsx)(D()._H,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.title",defaultMessage:"Deletion and retention settings"}),caption:(0,T.jsx)(D()._H,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.caption",defaultMessage:"Only workspace owners can change this"})}),action:()=>{N().r$({currentTab:"security",subtab:"data_retention"})}}],d={key:"actions",render:e=>(0,T.jsx)(ge().Z,{...e}),items:c};return(0,T.jsx)(ce().ZP,{popupType:me().kQ.Popup,alignmentToOrigin:re().Alignment.Center,placementToOrigin:re().Placement.Bottom,style:s.popupMenu,render:()=>(0,T.jsx)(ue().Z,{menuType:ne().o.Popup,children:(0,T.jsx)(pe().ZP,{type:pe().iW.Vertical,initialFocus:void 0,sections:[d]})}),buttonPopupStore:i,renderOrigin:e=>(0,T.jsx)(de().Z,{style:s.iconContainer,iconStyle:s.dotsIcon,ariaLabel:"3 dot menu for actions to apply to a deleted from trash page",icon:R().o,...e})})}function Me(e){let{blockStore:t}=e;const n=(0,r().O7)(),i=(0,o.useCallback)((()=>{O().Rn({environment:n,blocks:[t],from:"trash_banner"})}),[n,t]),s=(0,a().VK)((()=>!t.useCrdt()),[t]),l=Le();return(0,T.jsxs)(o.Fragment,{children:[(0,T.jsx)(Te,{variant:"default",blockStore:t}),s&&(0,T.jsx)(se().Z,{style:l.button,onClick:i,icon:(0,K().p)(l.icon),children:(0,T.jsx)(D()._H,{defaultMessage:"Delete from Trash",id:"pageViewBlock.trashBanner.deleteFromTrashButton.label"})})]})}function Te(e){let{variant:t,blockStore:n}=e;const i=(0,r().O7)(),s=(0,a().VK)((()=>({default:(0,T.jsx)(D()._H,{defaultMessage:"Restore page",id:"pageViewBlock.trashBanner.restoreButton.label"}),lastVersion:(0,T.jsx)(D()._H,{defaultMessage:"Restore last version",id:"pageViewBlock.trashBanner.restoreLastVersionButton.label"}),currentPage:(0,T.jsx)(D()._H,{defaultMessage:"Restore current page",id:"pageViewBlock.trashBanner.restoreCurrentPageButton.label"})}[t])),[t]),l=(0,o.useCallback)((()=>{const{currentSpaceStore:e}=j().default.state;e&&O().DV({environment:i,block:n,spaceId:n.pointer.spaceId||e.id,from:"trash_banner"})}),[n,i]),c=Le();return(0,T.jsx)(se().Z,{style:c.button,onClick:l,icon:(0,H().s)(c.icon),children:s})}function Be(e,t,n,o){const r=(0,ie().DE)(e,{name:"configurable_deletion_and_retention_settings",spaceId:null==n?void 0:n.id,userId:o});if(null!=n&&n.canAdmin()&&r)return!0;if(!t.canEdit())return!1;if(!t.isNavigableBlock())return!1;const a=t.getParentStore();return!a||a.canEdit()}function Le(){return(0,L().yK)((e=>({button:{marginLeft:12},icon:{width:14,height:14,marginRight:6}})),[])}const Ve=function(e){var t;let{blockStore:n}=e;const i=(0,r().O7)(),s=null===(t=i.currentUser)||void 0===t?void 0:t.id,l=(0,r().Fy)(),c=(0,D().YB)(),d=(0,L().yK)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",whiteSpace:"normal",padding:"8px 4px",...l.isMobile&&{flexWrap:"wrap",width:"100%",paddingTop:8,paddingBottom:8}},helpButton:{marginLeft:4},helpIcon:{fill:"inherit"}})),[l.isMobile]),u=(0,oe().r)(),p=(0,a().VK)((()=>Be(i,n,u,s)),[i,n,u,s]),m=(0,a().VK)((()=>l.isPhone&&p),[l.isPhone,p]),g=(0,a().VK)((()=>n.getClosestMovedBlock()),[n]),h=(0,T.jsx)("span",{children:(0,T.jsx)(we,{blockStore:n,intl:c})}),f=(0,T.jsx)(D()._H,{defaultMessage:"This page was PERMANENTLY deleted.",id:"pageViewBlock.permanentlyDeleted.message"}),v=(0,a().VK)((()=>Z().default.isAdminMode&&n.pathHasDeletedPermission()),[n]);return g?(0,T.jsx)(Ie,{spaceStore:u,blockStore:n,sourceBlock:g}):m?(0,T.jsx)("div",{style:d.banner,children:(0,T.jsx)(Me,{blockStore:n})}):v?(0,T.jsxs)("div",{children:[f,(0,T.jsx)(Te,{variant:"default",blockStore:n})]}):p?(0,T.jsxs)(o.Fragment,{children:[(0,T.jsx)("div",{style:d.banner,children:h}),(0,T.jsx)(Me,{blockStore:n}),(0,T.jsx)(je,{spaceStore:u})]}):(0,T.jsx)("div",{style:d.banner,children:h})};var Ae=()=>n(827282);const De=(0,Ae().CZ)("wifiExclamationMark",{default:{loader:()=>n.e(24892).then(n.bind(n,924892))},small:{loader:()=>n.e(3726).then(n.bind(n,703726))},mini:{loader:()=>n.e(97607).then(n.bind(n,797607))},large:{loader:()=>n.e(23933).then(n.bind(n,723933))}});const Pe=function(e){const{legacyColor:t}=e;return(0,T.jsx)(M().j,{label:(0,T.jsx)(D()._H,{id:"dictationConnectionBanner.message",defaultMessage:"We can't reach our dictation server right now. Please check your connection"}),display:"full-width",actions:[],tint:(0,I().X)(t),iconGroup:De})};const Ze=function(e){const{legacyColor:t}=e,r=(0,o.useCallback)((()=>{n(890324).Z.setState({editing:!1,commenting:!0})}),[]);return(0,T.jsx)(M().j,{label:(0,T.jsx)(D()._H,{id:"pageViewBlock.editingPageBanner.status",defaultMessage:"You can now edit this page."}),display:"full-width",actions:[{label:(0,T.jsx)(D()._H,{id:"pageViewBlock.editingPageBanner.stop",defaultMessage:"Done editing"}),onClick:()=>r()}],tint:(0,I().X)(t)})};const Ue=function(e){let{blockStore:t,legacyColor:o}=e;const r=(0,a().VK)((()=>n(844095).Z.state.pageMap[t.id]),[t.id]);if(!r)return null;const i=(0,T.jsx)(D()._H,{defaultMessage:"Imported {importedNumberOfNotes} of {totalNumberOfNotes}",values:{importedNumberOfNotes:r.importedNotes,totalNumberOfNotes:r.totalNotes},id:"pageViewBlock.evernoteBanner.contents"});return(0,T.jsx)(M().j,{label:i,display:"full-width",actions:[],tint:(0,I().X)(o)})},Fe=(0,Ae().CZ)("exclamationMarkCircleFill",{default:{loader:()=>n.e(58944).then(n.bind(n,558944))},small:{loader:()=>n.e(42772).then(n.bind(n,642772))},mini:{loader:()=>n.e(80616).then(n.bind(n,680616))},micro:{loader:()=>n.e(88961).then(n.bind(n,588961))},large:{loader:()=>n.e(26437).then(n.bind(n,926437))},max:{loader:()=>n.e(26437).then(n.bind(n,926437))}});var Re=()=>n(836273),qe=()=>n(917801),Ke=()=>n(9599);function He(e){const t=(0,r().O7)(),{isMobile:n}=e,a=(0,o.useCallback)((()=>{k().c4({environment:t,url:Re()._j.signup})}),[t]);if(!n)return null;const i=[{label:(0,T.jsx)(D()._H,{defaultMessage:"Sign up",id:"mobileLoggedOutAppBanner.signUp"}),onClick:()=>a()}];return(0,T.jsx)(M().j,{label:(0,T.jsx)(D()._H,{defaultMessage:"You have view-only access. To edit, you need an account.",id:"mobileLoggedOutAppBanner.banner"}),iconGroup:Fe,display:"full-width",actions:i,tint:I().v.Yellow,onDismiss:()=>{qe().qL({bannerStore:Ke().Z,id:"LoggedOutAppBanner"})}})}var Ne=()=>n(566232);const Oe=function(e){const{legacyColor:t}=e,{mobileNative:o,device:i}=(0,r().O7)(),{osVersion:s}=i,l=(0,L().yK)((()=>({updated:{whiteSpace:"normal",textAlign:"center",flex:"1 auto"}})),[]),c=(0,a().VK)((()=>i.isAndroid&&(0,Ne().isLessThanVersion)(s,[7,0])?"Android 7.0":i.isIOS&&(0,Ne().isLessThanVersion)(s,[16,0])?"iOS 16.0":void 0),[i.isAndroid,i.isIOS,s]);if(!o||!o.api.openUpdateSettings||!c)return null;const d=(0,T.jsx)(D()._H,{defaultMessage:" This operating system is no longer supported.{br}Please <upgradelink>upgrade to {supportedPlatformVersion} or later.</upgradelink>.",id:"appUpdateListener.mobilePlatformNotSupported.message",values:{br:(0,T.jsx)("br",{}),upgradelink:e=>(0,T.jsx)(n(765513).Z,{onClick:()=>{o.openUpdateSettings()},disableHover:!0,children:e}),supportedPlatformVersion:c}});return(0,T.jsx)(M().j,{label:(0,T.jsx)("div",{style:l.updated,children:d}),display:"full-width",actions:[],tint:(0,I().X)(t)})};const We=function(e){const{legacyColor:t}=e;return(0,T.jsx)(M().j,{label:(0,T.jsx)(D()._H,{defaultMessage:"This page is in an archived teamspace.",id:"pageViewBlock.archivedTeamBanner.message"}),display:"full-width",actions:[],tint:(0,I().X)(t)})};var Ee=()=>n(657120),ze=()=>n(752127),Ye=()=>n(148126);const Xe=function(e){let{blockStore:t,legacyColor:s}=e;const l=(0,r().O7)(),c=(0,T.jsx)(D()._H,{defaultMessage:"This workspace is in a read-only state while the contents are being duplicated.",id:"pageViewBlock.contentDuplicationInProgress.message"}),d=(0,T.jsx)(D()._H,{defaultMessage:"This workspace's contents have been duplicated. Navigate to the new workspace for edits.",id:"pageViewBlock.contentDuplicationCompleted.message"}),{spaceRequestStatus:u,targetSpaceId:p}=(0,a().VK)((()=>{const e=n(239482).oZ(t);return e&&(0,Ee().nV)(e)?{spaceRequestStatus:e.status,targetSpaceId:e.target_space_id}:{spaceRequestStatus:void 0,targetSpaceId:void 0}}),[t]),m=(0,o.useCallback)((()=>{const e=(0,Ye().UY)("guides.workspaceConsolidation");ze().D({environment:l,url:e})}),[l]),g=(0,o.useCallback)((e=>{k().c4({environment:l,url:(0,Ee().BD)({spaceId:e,baseUrl:Z().default.domainBaseUrl}),openInNew:"tab"})}),[l]);let h;const f=[{label:(0,T.jsx)(D()._H,{defaultMessage:"Learn more",id:"pageViewBlock.contentDuplication.learnMoreButton.label"}),onClick:()=>m()}];if("started"===u||"failed_with_closed_source"===u)h=c;else if("completed"===u||"pending_deletion"===u)h=d,f.push({label:(0,T.jsx)(D()._H,{defaultMessage:"Visit new workspace",id:"pageViewBlock.contentDuplication.linkToTargetWorkspace.label"}),onClick:()=>g(p)});else{if(!u)return null;(0,i().t1)(u)}return(0,T.jsx)(M().j,{label:h,display:"full-width",actions:f,tint:(0,I().X)(s)})};var $e=()=>n(580215);function Qe(){const e=(0,D().YB)(),t=(0,r().O7)(),n=(0,a().VK)((()=>{var e;return null===(e=j().default.state.currentSpaceStore)||void 0===e?void 0:e.getFreezeSettings()}),[]),{freezeStatus:i,minUntilFreeze:s}=(0,$e().W)(n),l=(0,o.useCallback)((()=>{const e=(0,Ye().UY)("guides.workspaceConsolidation");ze().D({environment:t,url:e})}),[t]);if(!n||"disabled"===i||"scheduled"===i)return null;const c=(0,T.jsx)(D()._H,{defaultMessage:"This workspace will be frozen for migration in {timeRemaining}, during which some features may be temporarily unavailable.",id:"workspaceFreeze.banners.scheduled_migration",values:{timeRemaining:s&&s>60?e.formatRelativeTime(Math.floor(s/60),"hour"):e.formatRelativeTime(s??0,"minute")}}),d=(0,T.jsx)(D()._H,{defaultMessage:"This workspace is currently frozen to perform a migration. Changes cannot be saved at this time.",id:"workspaceFreeze.banners.active_migration"}),u=[{label:(0,T.jsx)(D()._H,{defaultMessage:"Learn more",id:"workspaceFreeze.banners.learn_more"}),onClick:()=>l()}];return(0,T.jsx)(M().j,{label:"warning"===i?c:d,display:"full-width",actions:u,tint:(0,I().X)("warning"===i?I().v.Yellow:I().v.Red)})}var Je=()=>n(407391);function Ge(e){const{message:t,mobileMessage:n,learnMoreLink:o,tint:a}=e,i=(0,r().Fy)(),s=(0,r().O7)(),l=(0,L().yK)((e=>({messageContainer:{display:"flex",alignItems:"center",minWidth:0,whiteSpace:"nowrap"},updatedHelpContainer:{display:"flex",flex:1,gap:4,alignItems:"center"}})),[]);return(0,T.jsx)(M().j,{label:(0,T.jsx)("div",{style:l.messageContainer,children:i.isMobile?n:t}),display:"full-width",actions:e.actions,onLearnMoreClick:()=>{Je().Fs(s,{from:"collection_template_topbar"}),o&&k().c4({environment:s,url:o,openInNew:"tab"})},tint:a})}const et=(0,D().vU)({editInsideButton:{defaultMessage:"<mediumtext>You're editing a template in a button</mediumtext>",id:"pageViewBlock.templatePageBanner.editInsideButton"},editInsideButtonMobile:{defaultMessage:"<mediumtext>Template inside button</mediumtext>",id:"pageViewBlock.templatePageBanner.mobile.editInsideButton"}});const tt=function(e){let{context:t,legacyColor:n}=e;return(0,T.jsx)(Ge,{context:t,message:(0,T.jsx)(D()._H,{...et.editInsideButton,values:{mediumtext:e=>(0,T.jsx)("span",{children:e})}}),mobileMessage:(0,T.jsx)(D()._H,{...et.editInsideButtonMobile,values:{mediumtext:e=>(0,T.jsx)("span",{children:e})}}),tint:(0,I().X)(n)})};var nt=()=>n(657320),ot=()=>n(374289),rt=()=>n(513670),at=()=>n(5485),it=()=>n(166312),st=()=>n(680917),lt=()=>n(867601),ct=()=>n(122479),dt=()=>n(466970),ut=()=>n(764189),pt=()=>n(342292);const mt=(0,D().vU)({viewTemplate:{defaultMessage:"<mediumtext>You're viewing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.viewTemplateLabel"},editTemplate:{defaultMessage:"<mediumtext>You're editing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.editTemplateLabel"},editTemplateMobile:{defaultMessage:"<mediumtext>Template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.mobile.editTemplateLabel"},repeatEvery:{defaultMessage:"Repeat every…",id:"pageViewBlock.templatePageBanner.repeatEveryLabel"}});function gt(e){let{blockStore:t,context:n,disabled:i,legacyColor:s}=e;const l=(0,a().VK)((()=>t.getAssociatedCollectionStore()),[t]),c=(0,a().VK)((()=>{const e=null==l?void 0:l.getParentBlockStore();if(e)return(0,A().Z)({pageId:e.id,pageVisitSource:V().tY.LinkInPage})}),[l]),d=(0,nt().l)(),u=(0,a().VK)((()=>{if(i)return!1;if(ut().n.state)return!1;const e=d&&d.publicEditModeStore.state;if((0,ct().Ix)(e))return mt.viewTemplate;return t.canEdit()?mt.editTemplate:mt.viewTemplate}),[d,i,t]),p=function(e){let{legacyColor:t}=e;return(0,L().yK)((e=>({innerLinkBox:{display:"flex",alignItems:"center"},linkBox:{marginLeft:8,marginRight:8,minWidth:0},linkBoxMobile:{marginLeft:8,marginRight:"auto",minWidth:0},recordTitle:{marginLeft:4,maxWidth:380},recordTitleMobile:{marginLeft:4,marginRight:8},chevron:{width:10,marginLeft:4,fill:pt().Zo[(0,I().X)(t)](e)}})),[t])}({legacyColor:s}),m=(0,Ye().UY)("guides.databaseTemplates"),g=(0,a().VK)((()=>null==l?void 0:l.getIcon()),[l]),h=(0,r().O7)(),f=(0,D().YB)(),{isMobile:v}=(0,r().Fy)(),b=(0,a().VK)((()=>{const e=Y().Mz.fromBlockStore(t);if(null!=e&&e.getActionStores())return null!=e&&e.isActive()?e.getRecurrence():void 0}),[t]),C=(0,o.useCallback)((async e=>{const{recurrenceActions:n}=await st().s.load();e?n.addRecurrence({environment:h,blockStore:t,recurrence:e}):n.deleteRecurrence({environment:h,blockStore:t})}),[h,t]),y=(0,at().k)({recurrence:b,onChange:C,allowDelete:!0}),_=(0,a().VK)((()=>l&&lt().Li({collectionStore:l})),[l]),x=(0,dt().E)("automation_generalized_recurrence");if(!l||!c||!u)return null;const S=[];return _&&x&&!v&&S.push({isCustom:!0,render:()=>(0,o.createElement)(ce().ZP,{...y,key:"recurrence-editor",popupType:ce().Z4.Popup,originGap:4,renderOrigin:e=>(0,T.jsx)(pt().tp,{tint:(0,I().X)(s),action:{label:(0,T.jsxs)(T.Fragment,{children:[b?(0,rt().kC)((0,it().De)({recurrence:b,intl:f,leadingPhrase:"repeat every"})):f.formatMessage(mt.repeatEvery),(0,ot().i)(p.chevron)]}),onClick:e.onClick,iconGroup:void 0}})})}),(0,T.jsx)(Ge,{actions:S,learnMoreLink:m,context:n,message:(0,T.jsx)(D()._H,{...u,values:{mediumtext:e=>(0,T.jsx)("span",{children:e}),pageTitleWithIcon:(0,T.jsxs)(X().Z,{href:c,style:p.linkBox,innerStyle:p.innerLinkBox,children:[(0,T.jsx)($().Z,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,T.jsx)(Q().Z,{style:p.recordTitle,store:l,underline:!0})]})}}),mobileMessage:(0,T.jsx)(D()._H,{...mt.editTemplateMobile,values:{mediumtext:e=>(0,T.jsx)("span",{children:e}),pageTitleWithIcon:(0,T.jsxs)(X().Z,{href:c,style:p.linkBoxMobile,innerStyle:p.innerLinkBox,children:[(0,T.jsx)($().Z,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,T.jsx)(Q().Z,{style:p.recordTitleMobile,store:l,underline:!0})]})}}),tint:(0,I().X)(s)})}var ht=()=>n(342792),ft=()=>n(661297),vt=()=>n(184495);function bt(e){const{blockId:t,value:n,handleJoinWorkspaceClick:o}=e;if(!n)return null;switch(n.getJoinSpaceMethod()){case"request_to_join":return(0,T.jsx)(vt().Z,{type:"current-actor-to-space-via-block",block:t,flowId:(0,ht().ZP)(),source:"trusted_domain_page",buttonType:"outline"});case"click_to_join":return(0,T.jsx)(ft().Z,{onClick:o,children:(0,T.jsx)(D()._H,{id:"pageViewBlock.trustedDomainPageBanner.clickToJoin",defaultMessage:"Join workspace"})});default:return null}}const Ct=function(e){var t,i;const{legacyColor:s}=e,l=(0,a().VK)((()=>{const e=n(658096).default.state.publicPageData;if(e&&e.spaceId&&e.pageId)return{spaceShardedBlockId:{spaceId:e.spaceId,id:e.pageId},spaceName:e.spaceName}}),[]),c=(0,r().O7)(),d=null==l||null===(t=l.spaceShardedBlockId)||void 0===t?void 0:t.spaceId,u=null==l||null===(i=l.spaceShardedBlockId)||void 0===i?void 0:i.id,[p]=(0,n(801812).r5)((async()=>{if(!d)return;return await(0,n(656221).nk)({environment:c,spaceId:d})}),[c,d]),m=(0,a().VK)((()=>{var e;return"resolved"===p.status&&"click_to_join"===(null===(e=p.value)||void 0===e?void 0:e.join_space_method)}),[p]),g=(0,o.useCallback)((async()=>{const{currentUserRootStore:e,currentUserSettingsStore:t}=j().default.state;d&&e&&(await n(224597).j({environment:c,userRootStore:e,spaceId:d,navigate:!0,analyticsFrom:"trusted_domain_page",userSettingsStore:t,redirectSource:"click_to_join_workspace_from_dls",isJoinableTrustedDomainViewer:m}),n(787738).K(c,{spaceId:d,pageId:u,joinSpaceMethod:"click_to_join"}),n(143346).LK(c))}),[c,d,u,m]),h=(0,T.jsx)("div",{style:{gap:"auto",flexDirection:"row",alignItems:"center"},children:(0,T.jsxs)(n(212493).jX,{direction:"row",align:"center",width:"hug",gap:4,children:[(0,T.jsx)(n(661641).q,{styleName:"UIRegular-14px/Medium",children:(0,T.jsx)(D()._H,{id:"pageViewBlock.trustedDomainPageBanner.label",defaultMessage:"You're viewing a shared page in the {spaceName} workspace",values:{spaceName:null==l?void 0:l.spaceName}})}),(0,T.jsx)(n(108714).Z,{href:(0,Ye().UY)("guides.domainManagement"),children:(0,T.jsx)(de().Z,{icon:n(456681).m,ariaLabel:"Help icon"})}),(null==l?void 0:l.spaceShardedBlockId)&&"resolved"===p.status&&bt({blockId:l.spaceShardedBlockId,value:p.value,handleJoinWorkspaceClick:g})]})});return(0,T.jsx)(M().j,{display:"full-width-no-content",tint:(0,I().X)(s),content:h})};var yt=()=>n(18281);const _t=function(e){const{legacyColor:t}=e,o=(0,r().O7)(),i=(0,a().VK)((()=>o.device.isMobile&&!o.device.isTablet),[o.device]),s=(0,a().VK)((()=>{const e="personal"===yt().M9(o),t=b().subscriptionDataStoreInstance.state,r=yt().GJ(t);return!((0,n(814139).S$)({environment:o})&&e&&!r)}),[o]),l=(0,T.jsx)(D()._H,{id:"uploadLimitExceededBanner.message",defaultMessage:"{shouldShowShortMessage, select, true {Your file is over the {maxFreeAccountFileSize} MB limit} other {Your file is over the {maxFreeAccountFileSize} MB limit of the Free plan}}",values:{shouldShowShortMessage:i,maxFreeAccountFileSize:n(109757).K_}}),c=(0,T.jsx)(D()._H,{id:"uploadLimitExceededBanner.upgradeButton.label",defaultMessage:"{shouldShowShortMessage, select, true {Upgrade} other {Upgrade for unlimited uploads}}",values:{shouldShowShortMessage:i}}),d=async()=>{await n(965014).y(o,{from:"upload_limit_banner",upsell:{type:"product",product:yt().M9(o)||"plus",limit:{type:"none"}}})};return(0,T.jsx)(M().j,{label:l,display:"full-width",actions:s?[{label:c,onClick:()=>d()}]:[],tint:(0,I().X)(t)})};var xt=()=>n(610146);const St=(0,Ae().IU)("mobileNewFeatures",{viewBox:"0 0 26 26",svg:(0,T.jsx)("path",{d:"M12.3984 5.47754C12.5273 5.47754 12.5918 5.40234 12.624 5.28418C12.9463 3.49023 12.9355 3.44727 14.8047 3.09277C14.9229 3.07129 15.0088 2.99609 15.0088 2.86719C15.0088 2.73828 14.9229 2.66309 14.8047 2.6416C12.9355 2.26562 13 2.22266 12.624 0.450195C12.5918 0.332031 12.5273 0.256836 12.3984 0.256836C12.2695 0.256836 12.1943 0.332031 12.1729 0.450195C11.7969 2.22266 11.8613 2.26562 9.99219 2.6416C9.86328 2.66309 9.78809 2.73828 9.78809 2.86719C9.78809 2.99609 9.86328 3.07129 9.99219 3.09277C11.8613 3.46875 11.8398 3.49023 12.1729 5.28418C12.1943 5.40234 12.2695 5.47754 12.3984 5.47754ZM7.19922 12.8682C7.40332 12.8682 7.54297 12.7393 7.56445 12.5459C7.95117 9.67773 8.04785 9.67773 11.0127 9.1084C11.1953 9.07617 11.335 8.94727 11.335 8.74316C11.335 8.5498 11.1953 8.41016 11.0127 8.37793C8.04785 7.96973 7.94043 7.87305 7.56445 4.95117C7.54297 4.75781 7.40332 4.61816 7.19922 4.61816C7.00586 4.61816 6.86621 4.75781 6.83398 4.96191C6.49023 7.84082 6.3291 7.83008 3.38574 8.37793C3.20312 8.4209 3.06348 8.5498 3.06348 8.74316C3.06348 8.95801 3.20312 9.07617 3.42871 9.1084C6.35059 9.58105 6.49023 9.65625 6.83398 12.5244C6.86621 12.7393 7.00586 12.8682 7.19922 12.8682ZM14.4824 24.7598C14.7617 24.7598 14.9658 24.5557 15.0088 24.2656C15.7715 18.3789 16.6094 17.4873 22.4316 16.8428C22.7324 16.8105 22.9365 16.585 22.9365 16.3057C22.9365 16.0264 22.7324 15.8115 22.4316 15.7686C16.6094 15.124 15.7715 14.2324 15.0088 8.3457C14.9658 8.05566 14.7617 7.8623 14.4824 7.8623C14.2031 7.8623 13.999 8.05566 13.9561 8.3457C13.1826 14.2324 12.3555 15.124 6.5332 15.7686C6.23242 15.8115 6.02832 16.0264 6.02832 16.3057C6.02832 16.585 6.23242 16.8105 6.5332 16.8428C12.3447 17.6055 13.1504 18.3896 13.9561 24.2656C13.999 24.5557 14.2031 24.7598 14.4824 24.7598Z"})});const kt=function(e){const{onClick:t,legacyColor:n}=e,o=(0,r().O7)(),{isMobile:a}=o.device,i=(0,L().yK)((()=>({icon:{width:22,marginRight:8},mobileIcon:{width:26,marginRight:12},navigateReleaseAction:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},mobileButton:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start"},button:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),l=s().p9?(0,T.jsxs)(T.Fragment,{children:[St(a?i.mobileIcon:i.icon),(0,T.jsx)("div",{style:i.navigateReleaseAction,children:(0,T.jsx)(D()._H,{defaultMessage:"Update and see what's new",id:"updateBanner.updateAvailableBanner.message"})})]}):(0,T.jsx)("div",{children:a?(0,T.jsx)(D()._H,{id:"updateBanner.updateMessage.noRedirectMobile",defaultMessage:"Tap here to update to the latest version"}):(0,T.jsx)(D()._H,{id:"updateBanner.updateMessage.noRedirect",defaultMessage:"Click here to update to the latest version"})});return(0,T.jsx)(M().j,{label:void 0,display:"full-width",actions:[{label:l,onClick:e=>t(e)}],tint:(0,I().X)(n)})};function wt(e){let{isInPeekRenderer:t,arbitraryRenderBefore:n,banners:o,isMobile:i}=e;const s=(0,r().O7)(),l=(0,a().VK)((()=>(0,c().ll)(s,t)),[s,t]);return(0,T.jsxs)("div",{style:{width:`calc(100% - ${l}px)`,userSelect:"none",WebkitUserSelect:"none"},children:[n,o.map(((e,t,n)=>(0,T.jsx)(It,{banner:e,index:t,array:n,isMobile:i},e.id)))]})}function It(e){let{banner:t,index:n,array:o,isMobile:c}=e;const y=(0,r().O7)(),_=(0,a().Kw)(b().subscriptionDataStoreInstance),x=(0,g().V)(_),{styleKey:S,contentKey:k}=t,w=o.length>1&&n!==o.length-1,I=(0,a().VK)((()=>(0,p().vT)(x)),[x]);switch(k){case"russian_sanctions":return(0,T.jsx)(v().I,{});case"over_free_block_limit":return I?(0,T.jsx)(T.Fragment,{}):(0,T.jsx)(u().default,{});case"editing_page":return(0,T.jsx)(Ze,{legacyColor:S});case"subscription_trial_add_payment_method":return(0,T.jsx)(l().a,{legacyColor:S});case"upload_limit_exceeded":return(0,T.jsx)(_t,{legacyColor:S});case"admin_mode":return(0,T.jsx)(B,{legacyColor:S});case"subscription_uncollectible":return(0,T.jsx)(h().T,{legacyColor:S});case"billing_subscription_status":return(0,T.jsx)(m().J,{legacyColor:S});case"test_clock":return(0,T.jsx)(f().U,{legacyColor:S});case"space_content_duplication":return(0,T.jsx)(Xe,{blockStore:t.blockStore,legacyColor:S});case"space_freeze":return(0,T.jsx)(Qe,{});case"minor_app_update":return(0,T.jsx)(kt,{onClick:()=>s().mK(y),legacyColor:S});case"mobile_platform_unsupported":return(0,T.jsx)(Oe,{legacyColor:S});case"deleted_or_moved_page":return(0,T.jsx)(xt().Z,{styleKey:S,shouldUseDivider:w,isMobile:c,children:(0,T.jsx)(Ve,{blockStore:t.blockStore})});case"page_in_archived_team":return(0,T.jsx)(We,{legacyColor:S});case"importing_evernote":return(0,T.jsx)(Ue,{blockStore:t.blockStore,legacyColor:S});case"template_in_page":return(0,T.jsx)(gt,{blockStore:t.blockStore,context:t.context,disabled:t.disabled,legacyColor:S});case"template_in_button":return(0,T.jsx)(tt,{context:t.context,legacyColor:S});case"asana_importer_banner":return(0,T.jsx)(F,{blockStore:t.blockStore,legacyColor:S});case"site":return(0,T.jsx)(d().Z,{blockStore:t.blockStore,legacyColor:S});case"dictation_connection":return(0,T.jsx)(Pe,{legacyColor:S});case"trusted_domain_page":return(0,T.jsx)(Ct,{legacyColor:S});case"translate":return(0,T.jsx)(C().nj,{blockStore:t.blockStore});case"logged_out_app_banner":return(0,T.jsx)(He,{isMobile:c});default:(0,i().t1)(k)}}},308252:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(667294),r=()=>n(646574),a=()=>n(874459),i=()=>n(998411),s=n(785893);const l=function(e){const t=(0,n(788860).YB)(),l=(0,n(846550).Fg)(),u=(0,n(992231).k)(),p=(0,o.useRef)(),m=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=a().KR(t,(0,i().r)());if(!o)return;const r=o.valueOf(),s=r-Date.now();s<0||s>n(326966).A0||p.current&&p.current.timestamp===r||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:r,timer:setTimeout(u,s)})}),[u,e.value]),g=(0,o.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,o.useEffect)((()=>{m()}),[m]),(0,o.useEffect)((()=>()=>{g()}),[g]);const{value:h,withComma:f}=e,v=(0,n(142735).VK)((()=>h?(0,r().ZV)({value:h,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,i().r)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(767608).HL}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,h]);if(!h)return null;const b=a().NK(h,(0,i().r)(),n(146947).locale);let C;if(h.reminder){const e=a().Nm(h,(0,i().r)());C=e?{color:l.errorText}:{color:n(568017).ZP.blue}}const y=(0,s.jsxs)(s.Fragment,{children:[v,h.reminder&&(0,n(471500).m)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),f?", ":null]});return e.disableTooltip?(0,s.jsx)("div",{className:e.className,style:{...e.style,...C},children:y}):(0,s.jsx)(n(654133).Z,{renderTooltip:()=>(0,s.jsxs)(s.Fragment,{children:[e.tooltipHeader,(0,s.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(b.start),b.end?` → ${c(b.end)}`:""]})]}),render:t=>(0,s.jsx)("div",{className:e.className,style:{...e.style,...C},...t,children:y}),placement:e.tooltipPlacement})};function c(e){return(0,r().ZW)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.mediumInvertedTextColor}:{}}},296034:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(667294),r=n(785893);const a=function(e){let{firstDayOfWeek:t,value:a,selectValue:i=!0,onChange:s,onFocus:l,onBlur:c,disabledDays:d}=e;const u=(0,o.useMemo)((()=>new Date(a)),[a]),[p,m]=(0,o.useState)(u),g=(0,o.useRef)(a);(0,o.useLayoutEffect)((()=>{g.current!==a&&(m(new Date(a)),g.current=a)}),[a]);const h=(0,o.useCallback)(((e,t,n)=>{s(e.getTime())}),[s]);return(0,r.jsx)(n(933696).y,{locale:n(146947).locale,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:i?{value:u}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:h,onMonthSelected:m,disabled:d,month:p,onDayBlur:c,onDayFocus:l})}},46335:(e,t,n)=>{n.d(t,{Z:()=>l});n(667294);var o=()=>n(846550),r=()=>n(707513),a=()=>n(998901),i=()=>n(654133),s=n(785893);function l(e){let{text:t,tooltipText:n,icon:l}=e;const c=(0,o().yK)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.shadowSM},container:{display:"flex",alignItems:"center",fontWeight:r().Ue.regular,color:e.mediumTextColor,fontSize:r().JB.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,s.jsx)(i().Z,{style:c.tooltip,render:e=>(0,s.jsx)("div",{style:c.text,...e,children:t}),renderTooltip:()=>(0,s.jsxs)("div",{style:c.container,children:[l(c.icon),(0,s.jsx)("div",{children:n})]}),alignment:a().Alignment.Start,placement:a().Placement.Bottom})}},184495:(e,t,n)=>{n.d(t,{Z:()=>V});var o=n(667294),r=()=>n(219727),a=()=>n(142735),i=()=>n(263184),s=()=>n(788860),l=()=>n(568017),c=()=>n(696459),d=()=>n(707513),u=()=>n(438793),p=()=>n(912732),m=()=>n(787738),g=()=>n(824462),h=()=>n(443269),f=()=>n(352230),v=()=>n(876822),b=()=>n(697623),C=()=>n(154439),y=()=>n(206352),_=()=>n(291198),x=()=>n(198829),S=()=>n(661297),k=()=>n(906651),w=n(785893);const I={marginBottom:10},j={...I,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},M=(0,s().vU)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function T(){return(0,w.jsx)(s()._H,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const B=i().default.createClass(0,{name:"RequestAttemptStore"}),L=i().default.createClass(void 0,{name:"MessageStore"});const V=function(e){const t=(0,r().O7)(),i=(0,r().MO)(),l=(0,a().qz)(void 0,n(529048).Z),c=(0,a().qz)(void 0,L),p=(0,a().qz)(void 0,B),g=(0,o.useCallback)((()=>P(l)),[l]),h=(0,o.useCallback)((()=>(0,w.jsx)(U,{...e,requestAttemptStore:p,messageStore:c,buttonPopupStore:l})),[e,p,c,l]),f=(0,a().VK)((()=>p.state>0),[p]),v=(0,a().VK)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,w.jsx)(F,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,w.jsx)(F,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const b="primary"===e.buttonType?k().Z:S().Z;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(b,{isLarge:!0,disabled:f,onClick:()=>{var n,o;return function(e,t){const{environment:n,flowId:o,type:r,source:a,spaceId:i,pageId:s}=e;"trusted_domain_page"===a&&i&&m().K(n,{spaceId:i,pageId:s,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===r?u().zX(n,{button_name:"request-access",flow_id:o,request_access_type:"page"}):"current-actor-to-space-via-team"===r&&u().zX(n,{button_name:"request-access",flow_id:o,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(n=e.block)||void 0===n?void 0:n.id,spaceId:null===(o=e.block)||void 0===o?void 0:o.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Ue.semibold}:{},children:f?(0,w.jsx)(s()._H,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):R(e.type)}),i?(0,w.jsx)(n(967092).ZP,{popupType:n(104088).k.SlideUp,open:v,render:h}):(0,w.jsx)(n(708518).Z,{open:v,onDismiss:g,render:h})]})};function A(e){let{result:t}=e;return t&&t.error?(0,w.jsx)("div",{style:{color:l().ZP.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function D(e){e.update((e=>e+1))}function P(e){return e.setState({open:!1})}function Z(e){let{error:t,result:n,ready:i,requestAttemptStore:l,messageStore:c,type:u}=e;const p=(0,s().YB)(),m=(0,r().MO)(),g=(0,o.useCallback)((()=>D(l)),[l]),h=(0,o.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),f=(0,a().VK)((()=>Boolean(0===l.state||i&&n&&n.error)),[l,i,n]),v=(0,a().VK)((()=>c.state||""),[c]);return(0,w.jsxs)(w.Fragment,{children:[!m&&(0,w.jsx)("div",{style:{fontSize:16,fontWeight:d().Ue.semibold,marginBottom:16},children:R(u)}),(0,w.jsx)(_().Z,{format:m?_().B.Transparent:void 0,textarea:!0,value:v,onChange:h,disabled:!f,placeholder:p.formatMessage(M.requestAccessMessagePlaceholder),style:{...m?{...j,padding:"16px"}:{...I,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!m&&(0,w.jsx)(k().Z,{isLarge:!0,disabled:!f,onClick:g,style:I,children:(0,w.jsx)(s()._H,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,w.jsx)(A,{result:n})]})}function U(e){const{requestAttemptStore:t,messageStore:n,buttonPopupStore:i}=e,l=(0,r().O7)(),d=(0,r().MO)(),u=(0,s().YB)(),m=(0,o.useCallback)(((o,r,a)=>(0,w.jsx)(Z,{requestAttemptStore:t,messageStore:n,error:o,result:r,ready:a,type:e.type})),[t,n,e.type]),b=(0,a().VK)((()=>{var e;return null===(e=v().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),_=(0,o.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:n,type:o,teamId:r,requestAttempt:a,environment:i,currentUserId:s,intl:l,flowId:d}=e;if(0===a)return;const u=t.state,m=await async function(){if("current-actor-to-block"===o)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===o)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===o)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-space-via-team",teamId:r,message:u}});if("current-actor-to-space-via-block"===o){if(!s)return;return g().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}}();return m?"success"!==m.type?"UserRateLimitResponse"===(null===(f=m.body)||void 0===f?void 0:f.name)?{error:l.formatMessage(M.rateLimitError)}:{error:(0,h().wf)(l,m)}:("current-actor-to-block"===o?p().dU(i,{request_access_type:"page",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-team"===o?p().dU(i,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===o?p().dU(i,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===o?p().dU(i,{request_access_type:"collection",flow_id:d,requestId:m.data.requestId}):(0,c().t1)(o),n.reset(),{value:!0}):{error:l.formatMessage(M.currentUserNotFound)};var f}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:b})),[l,u,e,b]),k=(0,o.useCallback)((()=>D(t)),[t]),I=(0,o.useCallback)((()=>P(i)),[i]),j=(0,a().Kw)(t);return d?(0,w.jsx)(x().Z,{menuType:f().o.Modal,whiteBackground:!0,title:R(e.type),left:T(),onClickLeft:I,right:(0,w.jsx)(s()._H,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:k,children:(0,w.jsx)(y().Z,{debugName:"RequestAccessForm",capture:!0,children:(0,w.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,w.jsx)(C().Z,{request:j,performRequest:_,render:m})})})}):(0,w.jsx)(y().Z,{debugName:"RequestAccessForm",capture:!0,children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,w.jsx)(C().Z,{request:j,performRequest:_,render:m}),(0,w.jsx)(S().Z,{onClick:I,children:T()})]})})}function F(e){const{type:t,flowId:n,buttonType:i}=e,l=(0,r().O7)(),d="outline"===i?S().Z:k().Z,[u,m]=(0,o.useState)(!1),[h,f]=(0,o.useState)(!1),v={attributes:{add_permissions_on_approval:!1,role:(0,a().VK)((()=>(0,b().QM)()),[])?"reader":"read_and_write"},message:void 0};let C;"page"===t?C={...v,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?C={...v,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().t1)(t);const y=(0,o.useCallback)((async()=>{var e;const o=await g().callApi({eventName:"requestAccess",environment:l,data:C});"success"===o.type&&o.data.request?(m(!0),p().dU(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:n,requestId:o.data.requestId})):"failed"===o.type&&"UserRateLimitResponse"===(null===(e=o.body)||void 0===e?void 0:e.name)&&f(!0)}),[l,C,t,n]);return(0,w.jsx)(d,{isLarge:!0,disabled:u||h,disabledFeedback:u||h,onClick:y,children:u?(0,w.jsx)(s()._H,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):h?(0,w.jsx)(s()._H,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):R("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function R(e){return"current-actor-to-space-via-block"===e?(0,w.jsx)(s()._H,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,w.jsx)(s()._H,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},449866:(e,t,n)=>{n.d(t,{A:()=>a});var o=()=>n(677559);const r=new(o().Ss)("invoice",(async()=>await n.e(15149).then(n.bind(n,959320)))),a=(0,o().kF)(r,(e=>e.Invoice))},933696:(e,t,n)=>{n.d(t,{y:()=>a});var o=()=>n(677559);const r=new(o().Ss)("react-day-picker",(async()=>await Promise.all([n.e(59897),n.e(81369)]).then(n.bind(n,712627)))),a=(0,o().kF)(r,(e=>e.default))},365969:(e,t,n)=>{n.d(t,{As:()=>l,MP:()=>d,tX:()=>c});var o=()=>n(142735),r=()=>n(18902),a=()=>n(646574),i=()=>n(874459),s=()=>n(749826);function l(){return s().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??r().yB}function c(){return(0,o().VK)((()=>l()),[])}function d(e,t,n){const o=(0,i().NK)(e,t);if((0,i().qw)(o)){const e=o.end.diff(o.start),t=e.as("year");if(t>=1)return(0,a().IV)({years:Math.round(t)},n);const r=e.as("days");if(r>=1&&r<=45)return(0,a().IV)({days:Math.round(r)},n);const i=e.as("months");if(i>=1)return(0,a().IV)({months:Math.round(i)},n);if(r>=1)return(0,a().IV)({days:Math.round(r)},n);const s=e.as("hours");if(s>=1)return(0,a().IV)({hours:Math.round(s)},n);const l=e.as("minutes");return(0,a().IV)({minutes:Math.round(l)},n)}return""}},218181:(e,t,n)=>{n.d(t,{q:()=>i});var o=()=>n(142735),r=()=>n(530980),a=()=>n(396136);function i(e){let{blockStore:t,closestNonAliveAncestorStore:n,intl:i}=e;return(0,o().VK)((()=>{var e;let o,s,l;const c=n&&n.table===a().iU&&n.getMovedToTrashTime();c?(o=!0,l=c,s=n.getMovedToTrashStore()):(l=t.getLastEditedTime(),s=t.getLastEditedByStore(),o=!1);return{trashAuthorStore:s,trashAuthorDisplayName:(null===(e=s)||void 0===e?void 0:e.getDisplayName(i))||i.formatMessage(r().T_T.messages.anonymousPlaceholder),trashTimestamp:l,isMovedToTrashMetadata:o}}),[t,n,i])}},580215:(e,t,n)=>{n.d(t,{M:()=>l,W:()=>c});var o=n(667294),r=()=>n(177357);const a=24*r().U6;function i(e){return s(e).status}function s(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=a?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-a}}function l(e){const[t,n]=(0,o.useState)((()=>i(e)));return(0,o.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function o(){t=void 0;const{status:r,nextUpdateInMs:a}=s(e);n(r),a&&(t=setTimeout(o,a))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,n]=(0,o.useState)((()=>Date.now())),a=(null==e?void 0:e.enabled)&&e.start_ts;return(0,o.useEffect)((()=>{if("number"!=typeof a)return;const e=a;let t;return function o(){const a=Date.now();n(a);const i=e*r().C0-a;if(i>0){const e=i%r().hM,n=0===e?r().hM:e;t=setTimeout(o,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[a]),{freezeStatus:i(e),minUntilFreeze:a?Math.floor((a*r().C0-t)/r().hM):void 0}}},863606:(e,t,n)=>{n.d(t,{W:()=>r});var o=n(667294);function r(e,t,n){const r=(0,o.useRef)(e),a=(0,o.useRef)(null);(0,o.useEffect)((()=>{r.current=e}),[e]),(0,o.useEffect)((()=>{const e=async()=>{a.current&&(clearTimeout(a.current),a.current=null),n&&(await r.current(),a.current=setTimeout(e,t))};return n&&e(),()=>{a.current&&(clearTimeout(a.current),a.current=null)}}),[n,t])}},151165:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{}const r=new o},844095:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:n}=this.state;t?n[e]=t:delete n[e],this.emit()}}const r=new o},235629:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});n(667294);var o=()=>n(142735),r=()=>n(548812),a=()=>n(30795),i=()=>n(897257),s=()=>n(219727),l=()=>n(732811),c=()=>n(665398),d=()=>n(788860),u=()=>n(979614),p=()=>n(636340),m=()=>n(269299),g=()=>n(489434),h=()=>n(616433),f=()=>n(876822),v=()=>n(965014),b=()=>n(18281),C=()=>n(595976),y=n(785893);const _=(0,d().vU)({overFreeBlockLimitLong:{id:"subscriptionActions.overFreeBlockLimit.longMessage",defaultMessage:"You are over the block limit for the Free plan"},overFreeBlockLimitMobileNative:{id:"subscriptionActions.overFreeBlockLimit.mobileNative",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."},upgradeForUnlimited:{id:"subscriptionActions.upgradeForUnlimitedBlocks.longMessage",defaultMessage:"Upgrade for unlimited"},upgradePlan:{id:"subscriptionActions.upgradePlan",defaultMessage:"Upgrade plan"},gracePeriodMessage:{id:"subscriptionActions.gracePeriodMessage",defaultMessage:"You have {dayCount, plural, one {1 day} other {{dayCount} days}} left to upgrade"},overFreeBlockLimitShort:{id:"subscriptionActions.overFreeBlockLimitShort",defaultMessage:"You've used all of this workspace's free blocks"}});function x(){const{isMobileNative:e}=(0,s().Fy)(),t=(0,s().O7)(),n=(0,o().VK)((()=>f().default.state.currentSpaceStore),[]),r=(0,o().Kw)(i().subscriptionDataStoreInstance),c=(0,h().J)(),d=(0,a().V)(r);return(0,l().K)((()=>{const e=null==n?void 0:n.pointer.spaceId;if(e&&c){var o;const a=null===(o=n.getSettings())||void 0===o?void 0:o.reach_block_limit_time;!a&&r&&b().Ln(t,e,r,d)&&m().createAndCommit({userAction:"OverFreeBlockLimitBanner.initialMount",environment:t,canUndo:!0,perform:e=>{p().sW({store:n,data:{settings:{...n.getSettings(),reach_block_limit_time:Date.now()}},transaction:e})}}),u().x1(t,{reach_block_limit_time:a??Date.now(),eligible_for_trial:!1})}})),e?(0,y.jsx)(k,{}):(0,y.jsx)(S,{})}function S(){const e=(0,d().YB)(),t=(0,o().Kw)(i().subscriptionDataStoreInstance),n=(0,a().V)(t),l=(0,s().O7)(),u=(0,o().VK)((()=>(0,r().vT)(n)),[n]),p=(0,o().VK)((()=>{var e;return null===(e=f().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),m=(0,C().p)({spaceId:p}),h=(0,o().VK)((()=>b().Nf({billingData:m,spaceStore:f().default.state.currentSpaceStore})),[m]),x=(0,o().VK)((()=>function(e,t){if(!t)return e.formatMessage(_.overFreeBlockLimitLong);const n=(0,r().fQ)();return n>0?e.formatMessage(_.gracePeriodMessage,{dayCount:n}):e.formatMessage(_.overFreeBlockLimitShort)}(e,u)),[u,e]),S=(0,o().VK)((()=>function(e){if(!e)return"red";return(0,r().fQ)()>0?"yellow":"red"}(u)),[u]),k=[{label:u?e.formatMessage(_.upgradePlan):e.formatMessage(_.upgradeForUnlimited),onClick:()=>{v().y(l,{from:"block_limit_banner",upsell:{type:"product",product:"plus",limit:{type:"none"}}})}}];return(0,y.jsx)(g().j,{label:x,display:"full-width",tint:S,iconGroup:c().P,actions:h?k:[]})}function k(){const e=(0,d().YB)().formatMessage(_.overFreeBlockLimitMobileNative);return(0,y.jsx)(g().j,{label:e,display:"full-width",tint:"red"})}function w(){const e=(0,o().Kw)(i().subscriptionDataStoreInstance),t=(0,a().V)(e);return(0,o().VK)((()=>(0,r().vT)(t)),[t])?(0,y.jsx)("div",{style:{position:"sticky",left:0,right:"100%",width:"100%"},children:(0,y.jsx)(x,{})}):(0,y.jsx)(x,{})}},87098:(e,t,n)=>{n.d(t,{PN:()=>a,kE:()=>s,nj:()=>i});var o=()=>n(677559);const r={translation:new(o().Ss)("translation",(()=>Promise.all([n.e(62743),n.e(43043),n.e(63283)]).then(n.bind(n,993996)))),TranslateBanner:new(o().Ss)("TranslateBanner",(async()=>await Promise.all([n.e(62743),n.e(43043)]).then(n.bind(n,704562))))},a=(0,o().kF)(r.translation,(e=>e.TopbarAmbientSuggestTranslateButton)),i=(0,o().kF)(r.TranslateBanner,(e=>e.TranslateBanner)),s=(0,o().kF)(r.translation,(e=>e.MobileTopbarAmbientSuggestTranslateRenderer))},656221:(e,t,n)=>{n.d(t,{JT:()=>m,O:()=>h,Zb:()=>g,jL:()=>f,nk:()=>b,rX:()=>v,yP:()=>p});n(821057),n(670560),n(267602),n(653476),n(470928),n(241792);var o=()=>n(799891),r=()=>n(530980),a=()=>n(934165),i=()=>n(696459),s=()=>n(824462),l=()=>n(636340),c=()=>n(269299),d=()=>n(876822),u=()=>n(826955);function p(e){let{trustedDomainIds:t,spaceStore:n}=e;return t.map((e=>{const t=u().hf.createChildStore(n,{table:a().l,id:e,spaceId:n.id});if(t.canRead())return t})).filter(i().$K)}async function m(e){let{environment:t,spaceId:n,currentUserId:r,organizationId:a}=e;const i=await s().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:n,organizationId:a},userId:r});return"failed"===i.type?(o().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):i.data.results}function g(e){let{environment:t,trustedEmailDomain:n,trustedDomainStores:o,spaceStore:r,spaceBasicSettingsStore:i}=e,s=o.find((e=>e.getEmailDomain()===n));const d=i.state.emailDomains;return s?(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainDLSEnabled",environment:t,canUndo:!0,perform:e=>{l().sW({store:r,data:{email_domains:d},transaction:e}),l().sW({store:s,data:{domain_link_sharing_enabled:!0,join_space_method:"request_to_join"},transaction:e})}}),s):(c().createAndCommit({userAction:"trustedDomainActions.createTrustedDomain",environment:t,canUndo:!0,perform:e=>{l().sW({store:r,data:{email_domains:d},transaction:e});const o={space_id:r.id,join_space_method:"request_to_join",domain_link_sharing_enabled:!0,email_domain:n};s=l().ae({environment:t,table:a().l,value:o,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e})}}),s&&o.push(s),s)}function h(e){let{store:t,environment:n}=e;const{currentSpaceStore:o}=d().default.getState();if(!o)throw new Error("currentSpaceStore does not exist");if(o.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(c().createAndCommit({userAction:"trustedDomainActions.deleteTrustedDomain",environment:n,canUndo:!0,perform:e=>{l().sW({store:t,data:{domain_link_sharing_enabled:!1},transaction:e})}}),!0)}function f(e){let{store:t,environment:n,joinSpaceMethod:o}=e;const{currentSpaceStore:r}=d().default.getState();if(!r)throw new Error("currentSpaceStore does not exist");if(r.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(t.getJoinSpaceMethod()!==o&&(c().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainJoinSpaceMethod",environment:n,canUndo:!0,perform:e=>{l().sW({store:t,data:{join_space_method:o},transaction:e})}}),!0))}async function v(e){let{environment:t,spaceId:n}=e;const o=await s().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:n}});if("success"!==o.type)return[];return o.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>r().kk5.fromValue(a().l,e)))}async function b(e){let{environment:t,spaceId:n}=e;const o=await s().callApi({eventName:"getTrustedDomainForUser",environment:t,data:{spaceId:n}});if("success"===o.type)return r().kk5.fromValue(a().l,o.data.result)}},280210:(e,t,n)=>{n.d(t,{U_:()=>x,f6:()=>k,ii:()=>S});n(821057),n(409045),n(453627),n(994774),n(995194),n(520522),n(200082),n(379976),n(724224),n(761121),n(637133),n(241792);var o=n.n(n(402568)),r=()=>n(513670),a=()=>n(326966),i=()=>n(431595),s=()=>n(24945),l=()=>n(255933);const c={version:8,notion_version:0,variant:2},d={version:8,notion_version:1,variant:2},u=0,p=1,m=6,g=8,h=10,f=Date.UTC(2024,0,1);function v(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const n=Math.floor(((new Date).getTime()-f)/a().A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[u]=n>>4,t[u+1]=n<<4&240|15&t[u+1],t}function b(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let n=0;n<4;n++)t[p+1+n]=e/2**(24-8*n)&255;return t}function C(e,t){const n=e?1:0;return t[m]=c.version<<4&240|c.notion_version<<1&14|1&n,t[g]=c.variant<<6&192|63&t[g],t}function y(e,t){if("block"===e)return t[h]=(0,s().ym)(e)|63&t[h],t;const n=(0,s().ym)(e);return t[h]=n>>8&127,t[h+1]=255&n,t}function _(e,t){const n=(0,s().Nq)(e);return t[h]=127&n|128&t[h],t}function x(e,t,n,o){const r=new Uint8Array(16),a=globalThis.crypto.getRandomValues(r);return n!==l().bx&&v(e,a),b(t,a),C(o,a),y(n,a),j(a)}function S(e,t,n,o){return x(e,t,n,o)}function k(e,t,n){return w(e,t,n)}function w(e,t,n){const a=o()(n),l=r().yo(a,2).map((e=>parseInt(e.join(""),16)));if((0,s().LV)(t)){if(void 0===e)throw new(i().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(i().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(l);return e&&b(e,c),_(t,c),function(e){e[m]=240&d.version<<4|14&d.notion_version<<1|1&e[m],e[g]=192&d.variant<<6|63&e[g]}(c),j(c)}const I=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function j(e){let t=0;return I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]}},665398:(e,t,n)=>{n.d(t,{P:()=>o});const o=(0,n(827282).CZ)("blockLimit",{default:{loader:()=>n.e(72870).then(n.bind(n,372870))},small:{loader:()=>n.e(33898).then(n.bind(n,233898))},mini:{loader:()=>n.e(24744).then(n.bind(n,724744))},large:{loader:()=>n.e(7016).then(n.bind(n,107016))}})},619857:(e,t,n)=>{n.d(t,{Y:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 11.4795C7.77214 11.4795 7.56478 11.3883 7.37793 11.2061L2.17578 5.88086C2.09831 5.80794 2.03906 5.72591 1.99805 5.63477C1.96159 5.53906 1.94336 5.43652 1.94336 5.32715C1.94336 5.17676 1.97754 5.04004 2.0459 4.91699C2.11882 4.79395 2.21452 4.69824 2.33301 4.62988C2.4515 4.55697 2.58594 4.52051 2.73633 4.52051C2.95508 4.52051 3.14648 4.60254 3.31055 4.7666L8.33496 9.91406H7.67188L12.6895 4.7666C12.8535 4.60254 13.0449 4.52051 13.2637 4.52051C13.4141 4.52051 13.5485 4.55697 13.667 4.62988C13.7855 4.69824 13.8789 4.79395 13.9473 4.91699C14.0202 5.04004 14.0566 5.17676 14.0566 5.32715C14.0566 5.54134 13.9792 5.72591 13.8242 5.88086L8.62207 11.2061C8.53548 11.2972 8.43978 11.3656 8.33496 11.4111C8.23014 11.4567 8.11849 11.4795 8 11.4795Z"})})},605305:(e,t,n)=>{n.d(t,{K:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("externalLink",{viewBox:"0 0 17 16",svg:(0,o.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})},979348:(e,t,n)=>{n.d(t,{D:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("newSidebarSettings",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10 13C8.35003 13 7.00003 11.65 7.00003 10C7.00003 8.35 8.35003 7 10 7C11.65 7 13 8.35 13 10C13 11.65 11.65 13 10 13ZM10 8.5C9.17003 8.5 8.50003 9.17 8.50003 10C8.50003 10.83 9.17003 11.5 10 11.5C10.83 11.5 11.5 10.83 11.5 10C11.5 9.17 10.83 8.5 10 8.5ZM10.02 18.45C9.45003 18.45 8.90003 18.4 8.36003 18.29C8.08003 18.23 7.85003 18.01 7.80003 17.72L7.51003 16.06C7.51003 16.06 7.42003 16.02 7.37003 16L6.01003 16.96C5.77003 17.13 5.45003 17.13 5.21003 16.96C4.78003 16.67 4.39003 16.34 4.03003 15.98C3.63003 15.57 3.27003 15.15 2.97003 14.69C2.81003 14.45 2.81003 14.13 2.97003 13.9L3.94003 12.52C3.94003 12.52 3.90003 12.43 3.88003 12.38L2.24003 12.1C1.95003 12.05 1.72003 11.83 1.67003 11.54C1.58003 11.04 1.53003 10.52 1.53003 10.01C1.53003 9.44 1.58003 8.89 1.69003 8.35C1.75003 8.07 1.97003 7.84 2.26003 7.79L3.92003 7.5C3.92003 7.5 3.96003 7.41 3.98003 7.36L3.02003 6C2.85003 5.76 2.85003 5.44 3.02003 5.2C3.31003 4.78 3.64003 4.38 4.00003 4.02C4.40003 3.62 4.83003 3.27 5.28003 2.96C5.52003 2.8 5.84003 2.8 6.07003 2.96L7.45003 3.93C7.45003 3.93 7.54003 3.89 7.59003 3.87L7.87003 2.23C7.92003 1.94 8.14003 1.71 8.43003 1.66C8.93003 1.57 9.45003 1.52 9.96003 1.52C10.53 1.52 11.08 1.57 11.62 1.68C11.91 1.74 12.13 1.96 12.17 2.25L12.46 3.91C12.46 3.91 12.55 3.95 12.6 3.97L13.96 3.01C14.2 2.84 14.52 2.84 14.76 3.01C15.18 3.3 15.58 3.63 15.94 3.99C16.35 4.4 16.7 4.82 17 5.27C17.16 5.51 17.16 5.83 17 6.06L16.03 7.44C16.03 7.44 16.07 7.53 16.09 7.58L17.73 7.86C18.02 7.91 18.24 8.13 18.3 8.42C18.39 8.92 18.44 9.44 18.44 9.95C18.44 10.52 18.39 11.07 18.28 11.61C18.22 11.89 18 12.12 17.71 12.16L16.05 12.45C16.05 12.45 16.01 12.54 15.99 12.59L16.95 13.95C17.12 14.19 17.12 14.51 16.95 14.75C16.66 15.17 16.33 15.57 15.97 15.93C15.57 16.34 15.14 16.69 14.69 16.99C14.45 17.15 14.13 17.15 13.9 16.99L12.52 16.02C12.52 16.02 12.43 16.06 12.38 16.08L12.1 17.72C12.05 18.01 11.83 18.23 11.54 18.29C11.04 18.38 10.52 18.43 10.01 18.43L10.02 18.45ZM9.10003 16.99C9.68003 17.06 10.26 17.06 10.82 16.99L11.09 15.44C11.13 15.18 11.32 14.97 11.57 14.89C11.82 14.81 12.07 14.71 12.3 14.59C12.53 14.47 12.8 14.5 13.02 14.64L14.32 15.56C14.56 15.38 14.78 15.18 14.99 14.97C15.19 14.77 15.37 14.57 15.54 14.36L14.64 13.08C14.49 12.87 14.47 12.58 14.59 12.35C14.7 12.13 14.8 11.89 14.89 11.62C14.97 11.37 15.18 11.19 15.43 11.15L17 10.88C17.04 10.58 17.06 10.28 17.06 9.99C17.06 9.71 17.04 9.44 17.01 9.17L15.46 8.9C15.2 8.86 14.99 8.67 14.91 8.42C14.83 8.17 14.73 7.92 14.61 7.69C14.49 7.46 14.52 7.18 14.66 6.97L15.58 5.67C15.4 5.44 15.2 5.21 14.99 5C14.79 4.8 14.59 4.62 14.37 4.45L13.09 5.35C12.88 5.5 12.6 5.52 12.37 5.4C12.15 5.29 11.91 5.19 11.64 5.1C11.4 5.02 11.22 4.81 11.17 4.56L10.9 2.99C10.33 2.92 9.74003 2.92 9.18003 2.99L8.91003 4.54C8.87003 4.8 8.68003 5.01 8.43003 5.09C8.18003 5.17 7.93003 5.27 7.70003 5.39C7.47003 5.51 7.19003 5.49 6.98003 5.34L5.68003 4.42C5.44003 4.6 5.22003 4.8 5.01003 5.01C4.81003 5.21 4.63003 5.41 4.46003 5.62L5.36003 6.9C5.51003 7.11 5.53003 7.39 5.41003 7.62C5.30003 7.84 5.20003 8.08 5.11003 8.35C5.03003 8.59 4.82003 8.77 4.57003 8.82L3.00003 9.09C2.96003 9.39 2.94003 9.69 2.94003 9.98C2.94003 10.26 2.96003 10.53 2.99003 10.8L4.54003 11.07C4.80003 11.11 5.01003 11.3 5.09003 11.55C5.17003 11.8 5.27003 12.05 5.39003 12.28C5.50003 12.51 5.48003 12.79 5.34003 13L4.42003 14.3C4.60003 14.54 4.80003 14.76 5.01003 14.97C5.21003 15.17 5.41003 15.35 5.62003 15.52L6.90003 14.62C7.11003 14.47 7.39003 14.45 7.63003 14.57C7.85003 14.68 8.09003 14.78 8.36003 14.87C8.61003 14.95 8.79003 15.16 8.83003 15.41L9.10003 16.98V16.99Z"})})},112955:(e,t,n)=>{n.d(t,{p:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("trashSmall",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},46581:(e,t,n)=>{n.d(t,{U:()=>i});var o=n.n(n(389539)),r=()=>n(280210),a=()=>n(956057);class i{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:o}=this.getSettings();return o&&e!==n(363777).uK?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,r().ii)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:a}=this.getSettings();if(!a||"space"===t)return this.legacyId(t,"disabled");const i=this.mapSpaceIdToShortId(e),s=o().types.isPromise(i)?await i:i;return s?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),(0,r().U_)(n,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:o}=this.getSettings();return o&&"space"!==t?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,r().U_)(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),a().Il()}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:i,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),a().Ul(n);const l=this.mapSpaceIdToShortId(e),c=o().types.isPromise(l)?await l:l;return c?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema"),(0,r().f6)(c,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),a().Ul(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:o,enableIdSchema:i}=this.getSettings();return i?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,r().f6)(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),a().Ul(n))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),r=o().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,r)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),r=o().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,r)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),a().Il()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),a().Il()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),a().Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},667932:(e,t,n)=>{n.d(t,{KD:()=>l,_I:()=>c,_P:()=>u,l2:()=>p,x9:()=>d});n(267602),n(653476),n(241792);var o=()=>n(543172),r=()=>n(210349),a=()=>n(639708),i=()=>n(712185);const s={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},l={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},c={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[]};function d(e){return(0,i().Dl)({modulesByArea:s,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function u(){return{page_layout_schema:(0,i().L0)(s.page_main).map((e=>{if(!(0,a().zP)(e))return(0,r().T)(e)?{...e,id:(0,o().ZP)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,i().L0)(s.page_details).map((e=>{if(!(0,a().zP)(e))return(0,r().T)(e)?{...e,id:(0,o().ZP)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function p(e,t){const n=void 0===t?[{id:(0,o().ZP)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,o().ZP)(),type:"formQuestion",formQuestionId:e},{id:(0,o().ZP)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,o().ZP)(),type:"cover"},{id:(0,o().ZP)(),type:"formTitle"},...n,{id:(0,o().ZP)(),type:"formSubmit"}]}}},210349:(e,t,n)=>{n.d(t,{T:()=>i,s:()=>a});const o={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},r={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function a(e,t){return o[e.type]}function i(e){return r[e.type]}},501274:(e,t,n)=>{n.d(t,{mb:()=>s,nK:()=>l,pe:()=>c});var o=()=>n(803021),r=()=>n(646574),a=()=>n(874459),i=()=>n(998411);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,i=a().OQ.toPersistedDate(t.valueOf());return r().ZV({value:i,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:i,alwaysIncludeTimezone:s}=e,l=a().OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return r().ZV({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:i,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=a().OQ.toPersistedDateRange(t),l=r().ZV({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,i().r)()),d=r().mr({start_time:c.toFormat(o().jK),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}}}]);