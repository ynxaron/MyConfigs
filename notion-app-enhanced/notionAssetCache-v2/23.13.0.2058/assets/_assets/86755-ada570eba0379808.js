"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[86755],{686755:(e,t,o)=>{o.d(t,{Nz:()=>fe,ZP:()=>Be,c8:()=>we,FE:()=>Ie});var i=o(667294),a=()=>o(219727),r=()=>o(474788),n=()=>o(142735),s=()=>o(846550),l=()=>o(993407),d=()=>o(161002),c=()=>o(788860),u=()=>o(696459),m=()=>o(707513),g=()=>o(711608),p=()=>o(497065),h=()=>o(247724),f=()=>o(459805),S=()=>o(148126);function v(e){switch(e){case l().cz:case l().mu:return!0;case l().PT:case l().kg:return!1;default:(0,u().t1)(e)}}var b=()=>o(466970),T=()=>o(142589),y=()=>o(840196),x=()=>o(568017),j=()=>o(465755),w=()=>o(628370),I=()=>o(448419),B=()=>o(796408),M=()=>o(654133),C=()=>o(966296),k=()=>o(253548),P=()=>o(949842),_=()=>o(906591),H=()=>o(641506),R=()=>o(998901),L=()=>o(876822),O=()=>o(369320),A=()=>o(677006),U=()=>o(296631),V=()=>o(44556),K=o(785893);const Z=function(e){const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:i,style:r}=e,{isMobile:l}=(0,a().Fy)(),d=(0,s().yK)((e=>({caratContainer:{minHeight:20,minWidth:20,...r||{}},toggleButton:{color:e.lightIconColor}})),[r]),c=(0,n().VK)((()=>t.state.isHidden),[t]);return(0,K.jsx)("div",{style:d.caratContainer,children:(0,K.jsx)(o(167705).Z,{isSidebar:!0,fill:!0,icon:"chevron",open:!c,color:d.toggleButton.color,onClick:i,disabled:l})})};var N=()=>o(840821),F=(o(267602),o(916054),o(241792),()=>o(989478)),D=()=>o(239444),q=()=>o(91502),G=()=>o(826955);function W(e){const t=(0,a().O7)(),[o,r]=(0,i.useState)(!1),{teamStore:l,teamOutlinerType:d}=e,u=(0,n().VK)((()=>(0,q().oT)(l)),[l]),m=(null==u?void 0:u.memberCountWithGuests)??0,{isReady:g,limitedUserStores:p,countRemainingUsers:h}=(0,n().VK)((()=>{let e=(null==u?void 0:u.sampleMemberUserIds)??[];e.length>5&&(e=e.slice(0,5));const t=e.map((e=>G().U6.createChildStore(l,{table:F().KJ,id:e})))??[],o=t&&t.every((e=>e.isReady()));return{countRemainingUsers:(null==u?void 0:u.memberCount)??0-t.length,limitedUserStores:t,isReady:o}}),[l,u]),f=(0,s().yK)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.mediumInvertedTextColor}})),[]);return g?(0,K.jsx)("div",{style:f.membershipSection,children:(0,K.jsx)(M().Z,{placement:R().Placement.Bottom,disableTooltip:m<=0,render:t=>{return(0,K.jsxs)("span",{...t,style:e.renderStyle,children:[m," ",(o=m,o>1?(0,K.jsx)(c()._H,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,K.jsx)(c()._H,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(r(!0),j().v2(t,{teamStore:l,outliner_type:d})),(0,K.jsx)("div",{...e,children:(0,K.jsxs)("div",{style:{marginBottom:4},children:[p.map((e=>(0,K.jsx)(D().Z,{style:f.teamMemberList,userStore:e,avatarSize:18},e.id))),h>0&&(0,K.jsx)("div",{style:f.moreMessage,children:(0,K.jsx)(c()._H,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:h}})})]})}))})}):null}var z=()=>o(383694),E=()=>o(132222),Y=()=>o(321542),J=()=>o(983135),$=()=>o(490670),Q=()=>o(106342),X=()=>o(154186),ee=()=>o(594546),te=()=>o(527278),oe=()=>o(807230),ie=()=>o(877727),ae=()=>o(793935),re=()=>o(273212);function ne(e){let{teamStore:t,from:o,outlinerToggleButtonStore:r,shouldPersistToggleState:s}=e;const l=(0,a().O7)(),d=(0,n().VK)((()=>(0,ie().QZ)(l)),[l]),c=(0,i.useCallback)((()=>(0,ie().QZ)(l)),[l]);return d?(0,K.jsx)(Q().rx,{origin:"team",parentStore:t,onClick:c}):(0,K.jsx)(se,{teamStore:t,from:o,outlinerToggleButtonStore:r,shouldPersistToggleState:s,onClick:c})}function se(e){let{teamStore:t,from:o,outlinerToggleButtonStore:r,shouldPersistToggleState:l,onClick:d}=e;const c=(0,a().Fy)(),u=(0,a().O7)(),m=(0,n().VK)((()=>(0,oe().ww)(u)),[u]),p=(0,i.useCallback)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:i}=L().default.state;null==d||d(),e&&i&&(g().mv({environment:u,from:o,spaceStore:e,spaceViewStore:i,teamStore:t,outlinerToggleButtonStore:r,shouldPersistToggleState:l,andNavigate:!0,appendOrPrepend:"append"}),c.isMobile&&(0,ae().close)(),(0,ee().j)({environment:u,event:{eventName:"sidebar_new_page_click",eventProperties:{origin:"team",target_team_id:t.id}}}))}),[c.isMobile,u,o,d,r,l,t]),h=(0,s().yK)((e=>{const t=c.isMobile?32:20;return{button:{height:t,width:t,border:"none",borderRadius:3,marginLeft:c.isMobile?0:4},mediumText:{color:e.mediumInvertedTextColor},plusIcon:{fill:c.isMobile?e.lightIconColor:e.mediumIconColor,...c.isMobile?{width:18,height:18}:{width:14,height:14}},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:e.legacyRedSelectColor,height:t,width:t},tooltip:{width:"204px"}}}),[c.isMobile]);return(0,K.jsx)(M().Z,{textWrap:!m,renderTooltip:()=>m?te().Z.formatMessage(re().g.addPageTooltip):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{children:te().Z.formatMessage(le.disabledTooltipUpper)}),(0,K.jsx)("div",{children:te().Z.formatMessage(le.disabledTooltipLower)})]}),placement:R().Placement.Bottom,render:e=>(0,K.jsx)(X().Z,{style:h.button,onClick:p,ariaLabel:m?te().Z.formatMessage(re().g.addPageTooltip):te().Z.formatMessage(le.disabledTooltipUpper),...e,disabled:!m,children:(0,K.jsx)("div",{style:h.plusIconContainer,children:(0,$().f)(h.plusIcon)})}),style:m?{}:h.tooltip})}const le=(0,c().vU)({disabledTooltipUpper:{defaultMessage:"You’ve used up your free blocks.",id:"sidebar.addButton.disabledTooltipUpper"},disabledTooltipLower:{defaultMessage:"Upgrade to add a new page.",id:"sidebar.addButton.disabledTooltipLower"}});function de(e){const{teamStore:t,label:o,isHovered:r,outlinerToggleButtonStore:d,teamOutlinerType:p,shouldPersistToggleState:h,outlinerTeamOnToggle:S,labelAriaId:b}=e,T=(0,a().Fy)().isMobile,F=v(p),D=(0,a().O7)(),{name:q,showAddPageButton:G}=(0,n().VK)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),$=(0,E().e)(t),Q=(0,Y().s)(t),X=(0,J().K)(t),ee=(0,n().VK)((()=>L().default.state.currentSpaceStore),[]),te=(0,n().qz)(void 0,U().Z),oe=(0,a().Fy)(),ie=T||r,ae=(0,s().yK)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:x().ZP.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:4},container:{position:"relative",display:"flex",alignItems:"center",minHeight:T?48:F?30:28,padding:F?"6px 0px":0},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center",opacity:r||T?1:0,transition:`opacity ${f().PP}`,...ie?{}:H().jy},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...m().Yu},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:m().Nv.UISmall.desktop,marginBottom:1,minHeight:20,...m().Yu},membersCountText:{display:"flex",fontSize:12,fontWeight:m().Ue.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...m().Yu},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...m().Yu},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...ie?{}:H().jy},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,opacity:r?1:0,transition:`opacity ${f().PP}`,...ie?{}:H().jy},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:20,height:20},iconAndToggleContainer:{display:"grid"},toggle:{gridColumn:1,gridRow:1,opacity:r?1:0,order:r?1:0,transition:`opacity ${f().PP}`},icon:{gridColumn:1,gridRow:1,opacity:r?0:1,transition:`opacity ${f().PP}`,order:r?0:1}})),[T,F,ie,r]),re=(0,n().VK)((()=>t.getTeamPagesStore()),[t]),se=(0,n().VK)((()=>A().Z.state===t.id),[t.id]),le=(0,n().VK)((()=>t.getTeamAccessLevel()),[t]),[de,me]=(0,i.useState)(void 0),ge=(0,i.useCallback)((e=>{let{draggingStores:t}=e;return!!ee&&(0,_().Pl)({environment:D,draggingStores:t,parentStore:re,currentSpaceStore:ee})}),[ee,D,re]),pe=(0,i.useCallback)((async e=>{await g().NP({dropArgs:e,environment:D,type:"team",isDroppingOnFullSection:!1,parentStore:re})}),[D,re]);if(!q)return null;const he=!Q,fe=function(e,t){if(!t)return!1;switch(e){case l().mu:return!0;case l().PT:case l().kg:case l().cz:return!1;default:(0,u().t1)(e)}}(p,$),Se=!oe.isMobile&&!$&&"closed"===le,ve=e=>{O().Z.addNamedPopup("team_more_actions"),j().Qk(D,{store:t,from:e})},be=()=>{O().Z.removeNamedPopup("team_more_actions")};return(0,K.jsxs)(B().GR,{dropTargetKey:V().Ui(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:ge,onSelectableDrop:pe,children:[(0,K.jsx)(I().ZP,{popupType:I().Z4.Popup,alignmentToOrigin:I().vR.Start,placementToOrigin:I().pO.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:de,render:e=>(0,K.jsx)(k().S,{teamStore:t,permissionsInviteStore:te,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:i}=e;return(0,K.jsxs)("div",{style:ae.container,onContextMenu:e=>{!oe.isMobile&&(0,P().ZP)({event:e,context:P().Af.EditorContextMenu,callback:()=>{e.preventDefault(),me(new DOMRect(e.clientX,e.clientY)),i()}})},children:[oe.isMobile?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(Z,{store:t,outlinerToggleButtonStore:d,outlinerTeamOnToggle:S}),(0,K.jsx)("div",{style:ae.teamIconContainer,children:(0,K.jsx)(z().p,{size:20,store:t,disabled:!0,style:{fontWeight:m().Ue.medium}})})]}):(0,K.jsxs)("div",{style:ae.iconAndToggleContainer,children:[(0,K.jsx)("div",{style:ae.icon,children:(0,K.jsx)("div",{style:ae.teamIconContainer,children:(0,K.jsx)(z().p,{size:20,store:t,disabled:!0,style:{fontWeight:m().Ue.medium}})})}),(0,K.jsx)("div",{style:ae.toggle,children:(0,K.jsx)(Z,{store:t,outlinerToggleButtonStore:d,outlinerTeamOnToggle:S,style:F||ie?ae.carat:H().jy})})]}),(0,K.jsxs)("div",{style:ae.labelContainer,children:[(0,K.jsx)("div",{style:ae.labelText,id:b,children:o}),F&&void 0!==X&&(0,K.jsxs)("div",{style:ae.membersCountText,children:[ee&&(0,K.jsx)(W,{teamStore:t,renderStyle:ae.membersCountText,teamOutlinerType:p}),Se&&(0,K.jsx)(M().Z,{placement:R().Placement.Bottom,renderTooltip:e=>(0,K.jsx)("div",{style:ae.closedTeamTooltip,...e,children:ce({accessLevel:le})}),render:e=>(0,K.jsxs)("div",{style:ae.closedTeamLabel,...e,children:[" ","·"," ",(0,K.jsx)(c()._H,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]})}),fe&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("span",{children:" "})," ·",(0,K.jsx)("span",{children:(0,y().p)(ae.joinedBadgeIcon)}),(0,K.jsx)("span",{style:ae.joinedBadge,children:(0,K.jsx)(c()._H,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),$&&(0,K.jsxs)("div",{style:ae.overflow,children:[(0,K.jsx)(k().SG,{teamStore:t,from:p,onPopupClick:()=>ve(p),onPopupClose:be}),G&&!oe.isMobile&&(0,K.jsx)(ne,{teamStore:t,outlinerToggleButtonStore:d,shouldPersistToggleState:h,from:ue(p)})]}),!$&&(0,K.jsx)("div",{style:ae.unjoinedOverflowMenu,children:(0,K.jsx)(k().SG,{teamStore:t,from:p,hideJoin:!0,onPopupClick:()=>ve(p),onPopupClose:be})}),!oe.isMobile&&he&&(0,K.jsx)(N().M,{style:ae.joinLeaveButton,hoveredStyle:ae.joinLeaveButtonHovered,teamStore:t,placement:R().Placement.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0}),G&&oe.isMobile&&(0,K.jsx)("div",{style:{...ae.overflow,...ie?{}:H().jy},children:(0,K.jsx)(ne,{teamStore:t,outlinerToggleButtonStore:d,shouldPersistToggleState:h,from:ue(p)})}),(0,K.jsx)(w().Z,{visible:se,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:ae.teamHighlightAnimationBackgroundContainer})]})},onClick:()=>ve("teamSidebar"),onClose:be}),(0,K.jsx)(C().B,{permissionsInviteStore:te,store:t})]})}function ce(e){let{accessLevel:t}=e;if("private"===t)return(0,K.jsx)(c()._H,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}function ue(e){switch(e){case l().cz:case l().PT:return"sidebar_team_section_browser";case l().mu:return"sidebar_team_section_browser_search";case l().kg:return"sidebar_team_section";default:(0,u().t1)(e)}}const me=function(e){let{type:t,from:r,disableTooltip:n,labelTooltip:d,spaceStore:m,spaceViewStore:p,shouldPersistToggleState:h,outlinerToggleButtonStore:f,fromSecondarySidebar:S,onClick:v}=e;const T=(0,a().O7)(),y=T.device.isMobile,x=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":case l().g$:return!1;case l().PT:case l().cz:case l().mu:case l().kg:return!0;default:(0,u().t1)(e)}}(t),j=(0,c().YB)(),w=(0,b().E)("sidebar_add_new_pages_to_bottom"),I=(0,i.useRef)(null),B=(0,i.useCallback)((()=>{if(x)V().lo("sidebar_team_section");else{if(!p)return;if("team"===t||t===l().g$)return;o(625230).j({name:"page_created",args:{type:t,from:r}}),g().kC({environment:T,spaceStore:m,spaceViewStore:p,type:t,outlinerToggleButtonStore:f,outlinerItemFrom:r,prepend:!w,shouldPersistToggleState:h}),v&&v()}}),[x,w,T,r,v,f,h,m,p,t]),C=o(123145).dc(),k=(0,s().yK)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4,marginLeft:y||S?0:4,...S?C.button:{}},plusIcon:{fill:e.mediumIconColor,width:14,height:14,...S?C.icon:{}},tutorialTooltip:{width:230},tutorialText:{fontSize:16,lineHeight:.85},labelTooltip:{color:e.mediumInvertedTextColor}})),[y,S,C]),P=x?j.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):j.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"});return(0,K.jsx)(M().Z,{textWrap:!1,disableTooltip:n,renderTooltip:()=>(0,K.jsxs)(K.Fragment,{children:[P,(0,K.jsx)("br",{}),(0,K.jsx)("span",{style:k.labelTooltip,children:!x&&d})]}),placement:R().Placement.Bottom,render:e=>(0,K.jsxs)(X().Z,{ariaLabel:P,style:k.plusButton,mobileFeedback:y,onClick:B,className:"private"===t?"shadow-cursor-new-page-sidebar":void 0,...e,children:[(0,K.jsx)("span",{ref:I}),(0,$().f)(k.plusIcon)]})})};var ge=()=>o(589525),pe=()=>o(997593),he=()=>o(945634);const fe=12,Se={bookmarks:h().F4o,workspace:h().j35,shared:h().MU2,private:h().aL4,offline:h().yNE,team:h().l24,[l().PT]:h().RG3,[l().cz]:h().Uwd,[l().mu]:h().jWx,[l().kg]:h().rIE,[l().g$]:h().Y6l};function ve(e){const{type:t,renderSidebar:r,isLastTeam:d,marginBottomOverrideWhenExpanded:c,marginBottomOverrideWhenCollapsed:u,initialToggleState:m,shouldPersistToggleState:g}=e,p=(0,a().O7)(),h=(0,n().qz)(e.outlinerToggleButtonStore,o(34670).Z);(0,o(732811).K)((()=>{if(m&&h.setState({...h.state,isHidden:"hidden"===m}),!g)return;const t=function(e){const{type:t,spaceViewStore:o}=e;if(t===l().g$)return;if("team"===t)return pe().RW(o,e.teamStore.id);return(0,ge().Fl)(o,t)}(e);if(!t)return;const i=o(35980).Z.get({userId:p.currentUser.id,key:t});i&&h.setState({...h.state,isHidden:i})}));const f=(0,n().VK)((()=>h.state.isHidden),[h]),S=Se[t],v=(0,i.useRef)(null),b=(0,i.useId)(),T=(0,i.useId)(),y=(0,s().yK)((()=>({toggle:{marginBottom:f||d&&!p.device.isMobile?u:c??fe,width:"100%",display:"flex",flexDirection:"column",gap:1}})),[f,d,p,u,c]);return(0,K.jsxs)("div",{ref:v,style:y.toggle,className:`${S}-container`,children:[p.device.isMobile&&"team"===t?(0,K.jsx)(be,{...e,outlinerToggleButtonStore:h,isHidden:f,labelAriaId:T,contentsAriaId:b}):(0,K.jsx)(Te,{...e,outlinerToggleButtonStore:h,isHidden:f,labelAriaId:T,contentsAriaId:b}),!f&&r({headerRef:v,labelAriaId:T,contentsAriaId:b})]})}function be(e){const{type:t}=e,o=Se[t],i=(0,s().yK)((e=>({sidebarItem:{padding:0},sidebarItemChildren:{overflow:"visible"}})),[]);return(0,K.jsx)(he().Z,{className:o,style:i.sidebarItem,childrenStyle:i.sidebarItemChildren,right:(0,K.jsx)(xe,{right:e.right,from:e.from,showAddButton:e.showAddButton,type:e.type,spaceStore:e.spaceStore,spaceViewStore:e.spaceViewStore,shouldPersistToggleState:e.shouldPersistToggleState,outlinerToggleButtonStore:e.outlinerToggleButtonStore}),children:(0,K.jsx)(Te,{...e})})}function Te(e){const{type:t,isHidden:o,teamOutlinerType:c,teamStore:u,labelAriaId:h,contentsAriaId:v,forceHoveredButtonStyle:y,spaceViewStore:x,shouldPersistToggleState:j,outlinerToggleButtonStore:w}=e,I=(0,a().O7)(),{isMobile:B}=I.device,{isTablet:M}=(0,a().Fy)(),[C,k]=(0,i.useState)(!1),[P,_]=(0,i.useState)(!1),H=C||P||Boolean(y),R=(0,n().VK)((()=>"team"===t&&(0,S().Kn)({environment:I,teamStore:u})),[I,u,t]),L=(0,b().E)("tablet_refresh_gate"),O=Se[t],A=(0,ge().hr)(),U=(0,s().yK)((e=>({label:{...Ie(e),..."team"===t&&{width:"100%"},...H&&!M&&{color:e.darkTextColor},...B&&"team"!==t&&{fontWeight:m().Ue.semibold,paddingLeft:8,fontSize:13}},button:{...!("team"===t&&B)&&we(c),...(0,f().MF)(),...!L&&B&&"team"!==t&&{boxShadow:`0 1px 0 ${e.regularDividerColor}`},..."team"===t&&{width:"100%",...(0,f().G$)({isMobile:B})},...R&&A.currentSelectedSidebarItem},hoveredButton:{background:e.sidebarItemSelectedBackground},rightLabelWrapper:{marginLeft:"auto"}})),[B,t,H,c,R,A.currentSelectedSidebarItem,M,L]),V=(0,i.useCallback)((()=>{!function(e,t,o,i,a,r,n){const{isHidden:s}=n.state,d=!s;"team"===t?pe().k7({environment:e,spaceViewStore:o,teamStore:i,outlinerToggleButtonStore:n,newIsHidden:d,shouldPersistToggleState:a,teamOutlinerType:r,isExplicitUserAction:!0}):t===l().g$?g().Eo({environment:e,type:t,outlinerToggleButtonStore:n,newIsHidden:d,shouldPersistToggleState:!1}):g().Eo({environment:e,spaceViewStore:o,type:t,outlinerToggleButtonStore:n,newIsHidden:d,shouldPersistToggleState:a})}(I,t,x,u,j,c,w)}),[I,t,x,u,c,j,w]),Z=(0,i.useCallback)((e=>{u&&p().navigateOnBaseUrl({environment:I,url:(0,d().y)({teamId:u.id}),openInNew:e.metaKey||e.ctrlKey?"tab":void 0})}),[I,u]),N=(0,i.useCallback)((()=>k(!0)),[k]),F=(0,i.useCallback)((()=>k(!1)),[k]),D=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r().E)(t)&&_(!0)}),[_]),q=(0,i.useCallback)((()=>_(!1)),[_]),G=(0,n().VK)((()=>u&&(0,T().U)({isMobileNative:I.device.isMobileNative,disableExposureLogging:!0})),[u,I]);return(0,K.jsxs)(X().Z,{className:O,..."team"===t?{"aria-labelledby":h}:{id:h},"aria-expanded":!o,"aria-controls":v,mobileFeedback:B,style:U.button,hoveredStyle:U.hoveredButton,hovered:!!y||void 0,onClick:M?V:G?Z:V,onMouseMove:N,onMouseLeave:F,onFocus:D,onBlur:q,disabled:"publicPageTemplateIncludes"===t,children:[(0,K.jsx)("span",{style:U.label,children:"team"===t?(0,K.jsx)(de,{isHovered:H,isExpanded:!o,teamStore:e.teamStore,label:e.teamHeaderLabel,outlinerToggleButtonStore:e.outlinerToggleButtonStore,outlinerTeamOnToggle:V,shouldPersistToggleState:e.shouldPersistToggleState,teamOutlinerType:e.teamOutlinerType,labelAriaId:e.labelAriaId}):je(t)?e.sectionLabel:ye(t)}),(0,K.jsx)("div",{style:U.rightLabelWrapper,children:(0,K.jsx)(xe,{right:e.right,showAddButton:e.showAddButton,from:e.from,type:t,spaceStore:e.spaceStore,spaceViewStore:e.spaceViewStore,shouldPersistToggleState:e.shouldPersistToggleState,isHovered:H,outlinerToggleButtonStore:e.outlinerToggleButtonStore})})]})}function ye(e){switch(e){case"bookmarks":return(0,K.jsx)(c()._H,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,K.jsx)(c()._H,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,K.jsx)(c()._H,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,K.jsx)(c()._H,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});default:(0,u().t1)(e)}}function xe(e){let{right:t,showAddButton:o,isHovered:i,...r}=e;const{isTablet:n}=(0,a().Fy)(),l=(0,b().E)("tablet_refresh_gate"),d=(0,s().yK)((()=>({wrapper:{display:"flex",alignItems:"center",opacity:n&&l||i?1:0,pointerEvents:i?"auto":"none",transition:`opacity ${f().PP}`}})),[i,n,l]);return(0,K.jsxs)("div",{style:d.wrapper,children:[t,o&&(0,K.jsx)(me,{...r})]})}function je(e){return"teamSidebar"===e||"teamBrowserJoinedTeams"===e||"teamBrowserUnjoinedTeams"===e||"teamBrowserSearch"===e||"publicPageTemplateIncludes"===e}function we(e){return{display:"flex",alignItems:"center",borderRadius:6,cursor:void 0,...!(e&&v(e))&&{height:ge().H3}}}function Ie(e){return{textTransform:"initial",fontSize:12,lineHeight:1,color:e.sidebarSecondaryColor,fontWeight:m().Ue.medium,transition:"color 100ms ease-out"}}const Be=i.memo(ve)},966296:(e,t,o)=>{o.d(t,{B:()=>r});var i=()=>o(677559);const a=new(i().Ss)("teamPermissionsInviteWithModal",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(90698),o.e(37358),o.e(7312),o.e(5242),o.e(31189),o.e(90424),o.e(69343),o.e(81580),o.e(84325),o.e(2933),o.e(94556),o.e(78701),o.e(38804),o.e(17100),o.e(4387),o.e(11189),o.e(53329),o.e(71896),o.e(72586),o.e(53335),o.e(46616),o.e(54940),o.e(20224),o.e(46546),o.e(98721),o.e(50471),o.e(49498),o.e(2971),o.e(20634),o.e(91253),o.e(63707),o.e(61171),o.e(4014),o.e(63502),o.e(7678),o.e(5006),o.e(20919),o.e(75377),o.e(99590),o.e(52435),o.e(69437),o.e(81063),o.e(75066),o.e(81917),o.e(88128),o.e(97934),o.e(37317),o.e(91e3),o.e(18162),o.e(91752),o.e(78517),o.e(99537),o.e(80730),o.e(11770),o.e(83962),o.e(62084),o.e(79289),o.e(21862),o.e(41589),o.e(71641),o.e(23006),o.e(72646),o.e(10553),o.e(74879),o.e(67601),o.e(37239),o.e(40692),o.e(20683),o.e(22467),o.e(27039),o.e(97083),o.e(52065),o.e(18534),o.e(39179),o.e(77555),o.e(38632),o.e(78856),o.e(19592),o.e(47559),o.e(22371),o.e(73230),o.e(25911),o.e(54843),o.e(76540),o.e(22337),o.e(93536),o.e(53936),o.e(23721),o.e(32175),o.e(66283),o.e(22154),o.e(58586)]).then(o.bind(o,824033)))),r=(0,i().kF)(a,(e=>e.TeamPermissionsInviteWithModal))},223248:(e,t,o)=>{o.d(t,{Id:()=>y,Ng:()=>x,Px:()=>b,ow:()=>T,t_:()=>v,um:()=>S});o(267602),o(653476);var i=()=>o(506347),a=()=>o(989478),r=()=>o(465755),n=()=>o(824462),s=()=>o(636340),l=()=>o(102182),d=()=>o(224597),c=()=>o(269299),u=()=>o(527278),m=()=>o(345918),g=()=>o(876822),p=()=>o(44556),h=()=>o(111631);const f=(0,o(788860).vU)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function S(e){let{environment:t,userId:o,teamStore:i,user:a}=e;const n=i.getSpaceId();if(!n)return;await p().Wi({environment:t,teamId:i.id,spaceId:n,teamUserInfo:a,isSettingDefaultTeam:!1,inviterId:o})&&(r().UD(t,{store:i,joined_role:"member",from:"team_invite_link"}),await v({environment:t,userId:o,teamStore:i}),l().oV({label:u().Z.formatMessage(f.joinTeamSuccessMessage,{teamName:i.getName()})}))}async function v(e){let{environment:t,userId:o,teamStore:a}=e;const r=g().default.state.currentUserRootStore,n=a.getSpaceId();if(!n||!r)return;const s=r.getSpaceViewStores().filter((e=>e.getSpaceId()===n))[0];await d().y3({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:r,pageVisitSource:i().tY.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await h().I({environment:t,spaceId:n,userId:o}),p().hI({environment:t,teamStore:a,shouldScroll:!0})}async function b(e){let{environment:t,teamId:o,message:i}=e;if(!t.currentUser.id)return;"success"===(await n().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:o,message:i}})).type?(r().LB(t,{teamId:o}),await y({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{l().oV({label:u().Z.formatMessage(f.requestTeamSuccessMessage)})}))):l().oV({label:u().Z.formatMessage(f.requestTeamFailureMessage)})}async function T(e){let{environment:t,teamStore:o,accessRequestStore:i,status:n}=e;const l=i.getForActorId();if(!l)return;const d=i.getRecordModel({table:a().KJ,id:l});if(d){if("approved"===n){const e=[{type:"member",entity_type:"user",user_id:d.id}];if(!(await p().Uj({environment:t,teamStore:o,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}c().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().sW({store:i,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:a().KJ,resolved_by_id:t.currentUser.id,status:n}})}}),r().co(t,{store:o,resolution:n})}}async function y(e){let{environment:t}=e;const{lastVisitedSpaceView:o,userRootStore:a,userSettingsStore:r}=await(0,m().iX)({environment:t,disableRedirectUrl:!1});o?await d().y3({environment:t,spaceViewStore:o,userRootStore:a,userSettingsStore:r,pageVisitSource:i().tY.BackForward,navigationType:"switchingToOrLoadingSpace"}):await d().L5({environment:t,userRootStore:a,userSettingsStore:r,pageVisitSource:i().tY.BackForward})}async function x(e){let{environment:t,teamId:o}=e;const i=await n().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:o}});if("success"===i.type)return i.data}},840821:(e,t,o)=>{o.d(t,{M:()=>v});var i=o(667294),a=()=>o(219727),r=()=>o(142735),n=()=>o(846550),s=()=>o(707513),l=()=>o(345918),d=()=>o(91502),c=()=>o(289963),u=()=>o(132222),m=()=>o(788860),g=()=>o(265640),p=o(785893);const h=function(e){const{teamStore:t,from:n,navigateToTeamHomeOnJoin:s,style:l,hoveredStyle:d,icon:c,isRed:u}=e,h=(0,a().O7)(),f=(0,r().VK)((()=>o(876822).default.state.currentSpaceStore),[]),S=(0,i.useCallback)((async()=>{f&&await o(44556).um({environment:h,teamStore:t,currentSpaceStore:f,from:n,andNavigateToTeamHome:s??!1})}),[f,h,t,n,s]);return(0,p.jsx)(g().D,{style:l,hoveredStyle:d,onClick:S,icon:c,isRed:u,children:(0,p.jsx)(m()._H,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var f=()=>o(12875);const S=function(e){const{teamStore:t,style:a,hoveredStyle:n}=e,[s,l]=(0,i.useState)(!1),d=(0,r().VK)((()=>t.getName()),[t]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g().D,{style:a,hoveredStyle:n,onClick:()=>l(!0),children:(0,p.jsx)(m()._H,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,p.jsx)(o(450194).Z,{teamStore:t,teamName:d,teamId:t.id,isModalOpen:s,onDismiss:()=>l(!1)})]})};function v(e){const{teamStore:t,style:o,hoveredStyle:i}=e,m=(0,a().O7)(),g=(0,c().Q)(),v=(0,u().e)(t),b=(0,r().VK)((()=>t.getTeamAccessLevel()),[t]),T=(0,n().yK)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:s().Ue.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...o},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...i}})),[o,i]),y=(0,r().VK)((()=>(0,d().Hu)({membership:t.getRawMembership()})&&(0,l().Fn)(m)),[m,t]),x=!v&&"open"===b||y,j=!v&&"closed"===b;return g?null:v?(0,p.jsx)(f().Z,{...e,style:T.joinTeamButton,hoveredStyle:T.joinTeamButtonHoveredStyle}):x?(0,p.jsx)(h,{...e,style:T.joinTeamButton,hoveredStyle:T.joinTeamButtonHoveredStyle}):j?(0,p.jsx)(S,{teamStore:t,style:T.joinTeamButton,hoveredStyle:T.joinTeamButtonHoveredStyle}):null}},12875:(e,t,o)=>{o.d(t,{Z:()=>c});o(241792);var i=o(667294),a=()=>o(219727),r=()=>o(142735),n=()=>o(788860),s=()=>o(513670),l=()=>o(463807),d=o(785893);const c=function(e){const{teamStore:t,from:c,onLeavingTeam:u,style:m,hoveredStyle:g,icon:p,isRed:h,placement:f,alignment:S,buttonInternals:v}=e,b=(0,a().O7)(),T=(0,r().VK)((()=>o(876822).default.state.currentSpaceStore),[]),y=(0,l().l)(t),x=(0,i.useCallback)((async()=>{if(!T)return;await o(44556).s({environment:b,teamStore:t,from:c,userGroupsInTeam:y})&&(null==u||u())}),[T,b,t,c,y,u]),j=(0,d.jsx)(n()._H,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),w=function(e){let{teamStore:t}=e;const o=(0,a().O7)(),i=o.currentUser.id,{isDefaultTeam:c}=(0,r().VK)((()=>({isDefaultTeam:t.isDefault()})),[t]),u=(0,l().l)(t),m=(0,r().VK)((()=>{if(!t.isReady())return!1;const{ownerUserIds:e,ownerGroupIds:o}=t.getAllOwnerIds();return Boolean(i&&t.isOwner(i)&&e.length+o.length===1)}),[t,i]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:o,userGroupsInTeam:i}=e;if(t)return(0,d.jsx)(n()._H,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You can’t leave this teamspace because everyone in the workspace must be a member"});if(o)return(0,d.jsx)(n()._H,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(i.length>0)return(0,d.jsx)(n()._H,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:s().oA(i.map((e=>e.name))).join()}})}({isDefaultTeam:c,isOnlyTeamOwner:m,userGroupsInTeam:u})}({teamStore:t}),I=Boolean(w),B=I?w:j;return(0,d.jsx)(o(654133).Z,{style:I?{width:240}:void 0,disableTooltip:!Boolean(B),renderTooltip:e=>(0,d.jsx)("div",{...e,children:B}),textWrap:I,placement:f,alignment:S,render:e=>(0,d.jsx)(o(265640).D,{...e,style:m,hoveredStyle:g,onClick:x,disabled:I,disabledFeedback:I,icon:p,isRed:h,children:v||(0,d.jsxs)(d.Fragment,{children:[(0,o(286977).e)({width:12.5,marginRight:4}),(0,d.jsx)(n()._H,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}},450194:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(667294),a=()=>o(788860),r=o(785893);const n=(0,a().vU)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const s=function(e){const{teamStore:t,teamName:s,teamId:l,isModalOpen:d,onDismiss:c}=e,[u,m]=(0,i.useState)(""),g=(0,o(219727).O7)(),p=(0,a().YB)(),h=async()=>{await o(223248).Px({environment:g,teamId:l,message:u}),c()},f=(0,o(846550).yK)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,r.jsx)(o(708518).Z,{open:d,onDismiss:c,innerStyle:f.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:f.requestTitle,children:(0,r.jsx)(a()._H,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:s,icon:(0,r.jsx)(o(383694).p,{style:f.icon,store:t,disabled:!0,size:22})}})}),(0,r.jsx)(o(291198).Z,{textarea:!0,style:f.input,value:u,onChange:e=>{m(e.target.value)},placeholder:p.formatMessage(n.message_placeholder)}),(0,r.jsxs)("div",{style:f.footer,children:[(0,r.jsx)(o(67961).Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,r.jsx)(a()._H,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,r.jsx)(o(906651).Z,{isLarge:!0,style:f.requestInvitesButton,onClick:h,children:(0,r.jsx)(a()._H,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},289963:(e,t,o)=>{o.d(t,{Q:()=>l});var i=()=>o(219727),a=()=>o(142735),r=()=>o(345918),n=()=>o(876822),s=()=>o(897257);function l(){const e=function(){const e=(0,i().O7)();return(0,a().VK)((()=>{const t=n().default.state.currentSpaceStore,o=s().subscriptionDataStoreInstance.state;return t?r().Cx(t)?o?{loading:!1,isUserTeamGuestOfSpace:r().di(e,o)}:{loading:!0}:{loading:!1,isUserTeamGuestOfSpace:!1}:{loading:!0}}),[e])}();return(0,a().VK)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},132222:(e,t,o)=>{o.d(t,{e:()=>n});var i=()=>o(219727),a=()=>o(142735),r=()=>o(619779);function n(e){const t=(0,i().O7)().currentUser.id;return(0,a().VK)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,r().Z.state.spacePermissionGroupIds))),[t,e])}},321542:(e,t,o)=>{o.d(t,{s:()=>n});var i=()=>o(219727),a=()=>o(142735),r=()=>o(619779);function n(e){const t=(0,i().O7)();return(0,a().VK)((()=>{if(t.currentUser.id)return e.isMemberOrGuest(t.currentUser.id,r().Z.state.spacePermissionGroupIds)}),[t.currentUser.id,e])}},983135:(e,t,o)=>{o.d(t,{K:()=>r});var i=()=>o(142735),a=()=>o(91502);function r(e){return(0,i().VK)((()=>{var t;return void 0===e?0:(null===(t=(0,a().oT)(e))||void 0===t?void 0:t.memberCountWithGuests)??0}),[e])}},463807:(e,t,o)=>{o.d(t,{l:()=>s});o(267602),o(653476),o(241792);var i=()=>o(142735),a=()=>o(542487),r=()=>o(467806),n=()=>o(619779);function s(e){return(0,i().VK)((()=>{if(!e.isDefined())return[];return(0,a().Gr)({rawMembers:e.getRawMembership(),groupsInSpace:r().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group))}).filter((e=>n().Z.state.spacePermissionGroupIds.has(e.getGroupId())))}),[e])}}}]);