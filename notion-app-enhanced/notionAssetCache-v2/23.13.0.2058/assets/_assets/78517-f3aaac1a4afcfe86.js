"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[78517],{472675:(e,t,i)=>{i.d(t,{S:()=>p});i(667294);var n=()=>i(142735),o=()=>i(846550),r=()=>i(934158),l=()=>i(696056),a=()=>i(989478),s=()=>i(696459),d=()=>i(634760),c=()=>i(981583),u=()=>i(871953),g=i(785893);function p(e){let{authorStore:t,avatarSize:i,avatarStyle:p,hasTooltip:m=!0}=e;const h=(0,n().VK)((()=>(0,u().TL)(t)),[t]),x=(0,o().yK)((e=>({placeholder:{width:i,height:i,background:e.lightDividerColor,borderRadius:i/2,flexShrink:0,...p}})),[i,p]);return h.asActor?h.table===a().KJ?(0,g.jsx)(c().Z,{hasTooltip:m,userValue:h.asActor,style:p,size:i,avatarShouldShowShadow:!1}):h.table===l().cZ?(0,g.jsx)(d().Z,{botValue:h,size:i,style:p}):h.table===r().y0?(0,g.jsx)("div",{style:x.placeholder}):void(0,s().t1)(h):(0,g.jsx)("div",{style:x.placeholder})}},625449:(e,t,i)=>{i.r(t),i.d(t,{ExternalObjectInstanceBlockMenu:()=>B});i(670560);var n=i(667294),o=()=>i(219727),r=()=>i(142735),l=()=>i(235484),a=()=>i(781391),s=()=>i(562842),d=()=>i(696056),c=()=>i(788860),u=()=>i(696459),g=()=>i(20919),p=()=>i(959137),m=()=>i(269299),h=()=>i(423402),x=()=>i(964433),f=()=>i(542058),y=()=>i(141735),v=()=>i(352230),j=()=>i(677559),S=()=>i(138912),k=()=>i(855238),b=()=>i(198829),w=()=>i(255577),I=()=>i(388284),C=i(785893);function B(e){const{titleForReloadMenuOption:t,store:i,parentBlockStore:B,onAccept:T,onDismiss:M,extraSecondaryItemKey:_,token:R}=e,A=(0,o().O7)(),{value:U}=(0,j().XJ)(x().p),{value:P}=(0,j().XJ)(f().m),{value:Z}=(0,j().XJ)(y().F.formulas),{value:D}=(0,j().XJ)(p().F.clipboardActions),O=(0,n.useCallback)((e=>{const t={blocks:[i],environment:A,publicEditMode:void 0,lazyDependencies:{clipboardActions:D,formulasModule:Z,markdownLinkifyIt:U,tinyMceMicrosoftWordPasteFilter:P}};return{key:e.key,render:(i,n)=>e.render(i,t,{onAccept:T,onFocus:n.onFocus}),action:i=>{let{event:n}=i;return e.action(t,n)}}}),[i,A,Z,U,P,T,D]),z=[];(0,r().VK)((()=>{const e=i.getFormat().bot_id,t=S().default.getBotsAsRecordMap();if(e&&!0===S().default.state.loaded){const i=t.getValue({table:d().cZ,id:e});if(i&&i.integration_id&&i.integration_id===l().U9)return!1}return!0}),[i])&&z.push({key:0,render:e=>(0,C.jsx)(I().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,C.jsx)(k().Z,{...e,title:t,svg:s().b}),action:()=>{i&&(i.isExternalObjectInstanceBlockStore()||i.isExternalObjectInstancePageBlockStore())&&h().qK({environment:A,from:"page_more_menu",store:i,spaceId:i.getSpaceId()})}}]});const H=(0,r().VK)((()=>{switch(_){case"preview_to_mention":return[O(g().OH)];case"mention_to_preview":if(!i.isExternalObjectInstanceBlockStore())return[];const e={key:"turn preview into block",render:e=>(0,C.jsx)(k().Z,{...e,title:(0,C.jsx)(c()._H,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:a().z}),action:()=>{B&&R&&m().createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:A,canUndo:!0,perform:e=>{h().aV({block:i,parentStore:B,transaction:e,token:R}),e.postSubmitCallbacks.push((e=>{e||null==M||M()}))}})}};return[e];default:(0,u().t1)(_)}}),[_,O,i,B,R,A,M]);return z.push({key:1,render:e=>(0,C.jsx)(I().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...H,O(g().IK)]}),(0,C.jsx)(b().Z,{menuType:v().o.Popup,children:(0,C.jsx)(w().ZP,{type:w().iW.Vertical,initialFocus:void 0,onAccept:T,sections:z,style:{paddingTop:3,paddingBottom:3}})})}},34683:(e,t,i)=>{i.d(t,{g:()=>S});var n=i(667294),o=()=>i(219727),r=()=>i(846550),l=()=>i(641772),a=()=>i(519454),s=()=>i(788860),d=()=>i(568017),c=()=>i(145990),u=()=>i(998901),g=()=>i(35982),p=()=>i(826955),m=()=>i(154186),h=()=>i(448419),x=()=>i(1910),f=()=>i(733518),y=()=>i(54782),v=()=>i(710706),j=i(785893);function S(e){const{height:t,padding:i,padding_top:S,iframe_url:k,hoverData:b,store:w,token:I,href:C,onDismiss:B}=e,T=(0,s().vU)({editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),M=(0,o().O7)(),_=(0,s().YB)(),R=(0,n.useRef)(null),A=(0,r().yK)((e=>({content:{width:340,height:"100%",aspectRatio:"auto",position:"relative"},container:{width:340,maxHeight:420,flexDirection:"column",alignItems:"flex-start"},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:(0,v().M1)(M)}})),[M]),U=w&&w.recordStoreUIParentStore&&w.recordStoreUIParentStore instanceof p().G?w.recordStoreUIParentStore:w instanceof p().G?w:void 0;return(0,j.jsxs)("div",{style:A.container,children:[e.showEditButton&&(0,j.jsx)(x().Z,{onClick:e.handleEditClick,icon:a().R,isDarkIconColor:!0,ariaLabel:_.formatMessage(T.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:8,zIndex:1}}),I&&U&&b&&(0,j.jsx)("div",{style:{position:"absolute",top:8,right:8,zIndex:2},children:(0,j.jsx)(h().ZP,{popupType:h().Z4.Popup,placementToOrigin:u().Placement.Right,alignmentToOrigin:u().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=R.current;t&&(e=(0,g().uh)(t.getBoundingClientRect(),c().IL.x,c().IL.y)),e||null==B||B()},renderOrigin:e=>(0,j.jsx)(m().Z,{style:A.buttonStyle,...e,children:(0,l().o)({width:14,fill:d().ZP.white})}),render:e=>(0,j.jsx)(y().Z,{parentBlockStore:U,store:w,token:I,href:C,hoverData:b,onAccept:()=>e.close()})})}),(0,j.jsx)(f().Z,{source:k,style:A.content,preserveScale:!!(t&&t<1||i),background:!1,height:t&&t>0?t:void 0,aspectRatio:i?i/100:.75,paddingTop:S||void 0})]})}},863406:(e,t,i)=>{i.d(t,{Y:()=>_});var n=i(667294),o=()=>i(492788),r=()=>i(219727),l=()=>i(846550),a=()=>i(524052),s=()=>i(641772),d=()=>i(237874),c=()=>i(519454),u=()=>i(788860),g=()=>i(568017),p=()=>i(707513),m=()=>i(959137),h=()=>i(145990),x=()=>i(641506),f=()=>i(998901),y=()=>i(35982),v=()=>i(826955),j=()=>i(154186),S=()=>i(448419),k=()=>i(643051),b=()=>i(1910),w=()=>i(518242),I=()=>i(668001),C=()=>i(251932),B=()=>i(54782),T=()=>i(710706),M=i(785893);function _(e){const t=(0,r().O7)(),{hoverData:i,href:_,handleEditClick:R,showEditButton:A,loading:U,store:P,token:Z,onDismiss:D}=e,O=(0,l().yK)((e=>({newWrapper:{width:280,flexDirection:"column",alignItems:"flex-start"},coverContainer:{width:280,height:120},pageTitle:{display:"inline",fontWeight:p().Ue.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},highlightedBlockWrapper:{display:"flex",marginBottom:8},contentNew:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"12px 16px",gap:12,width:280},titleAndDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,gap:2,width:248},linkTitle:{...(0,x().pd)(2),fontStyle:"normal",fontWeight:p().Ue.semibold,fontSize:14,letterSpacing:-.154,lineHeight:"143%",fontFeatureSettings:"'case' on",textOverflow:"ellipsis",color:e.regularTextColor},newDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,...(0,x().pd)(3),textOverflow:"ellipsis",width:248},newText:{fontSize:12,fontWeight:400,whiteSpace:"normal",wordBreak:"break-word",color:e.regularTextColor},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:i?(0,T().M1)(t):"dark"===e.mode?e.accentColors.gray[100]:e.buttonBackground,border:i?void 0:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))"},iconBoxImageStyle:{margin:1}})),[t,i]),z=(0,u().YB)(),H=(0,n.useRef)(null),V=(0,u().vU)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"},editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),E=(0,n.useCallback)((async()=>{await o().default.afterNextFlush();const e=await m().F.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=_;e.copyString({environment:t,stringValue:n,copiedMessage:i})}),[t,_]),L=P&&P.recordStoreUIParentStore&&P.recordStoreUIParentStore instanceof v().G?P.recordStoreUIParentStore:P instanceof v().G?P:void 0,K=(null==i?void 0:i.thumbnail_url)??((null==i?void 0:i.images)&&i.images.length>0&&i.images[0].url);return(0,M.jsxs)(C().Ht,{style:O.newWrapper,children:[A&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(b().Z,{onClick:E,icon:a().U,isDarkIconColor:!0,ariaLabel:z.formatMessage(V.copyLink),hasBackground:!0,style:{position:"absolute",top:8,right:8}}),(0,M.jsx)(b().Z,{onClick:R,icon:c().R,isDarkIconColor:!0,ariaLabel:z.formatMessage(V.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:35}})]}),Z&&L&&!A&&(0,M.jsx)("div",{style:{position:"absolute",top:8,right:8},children:(0,M.jsx)(S().ZP,{popupType:S().Z4.Popup,placementToOrigin:f().Placement.Right,alignmentToOrigin:f().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=H.current;t&&(e=(0,y().uh)(t.getBoundingClientRect(),h().IL.x,h().IL.y)),e||null==D||D()},renderOrigin:e=>(0,M.jsx)(j().Z,{style:O.buttonStyle,...e,children:(0,s().o)({width:14,fill:i?g().ZP.white:g().ZP.uiGray})}),render:e=>(0,M.jsx)(B().Z,{parentBlockStore:L,store:P,token:Z,href:_,hoverData:i,onAccept:()=>e.close()})})}),K&&(0,M.jsx)(C().gq,{style:O.coverContainer,children:(0,M.jsx)(w().ZP,{src:K,style:{width:"100%",height:"100%",left:0,top:"calc(50% - 280px/2)"}})}),(0,M.jsxs)(C().Ht,{style:O.contentNew,children:[((null==i?void 0:i.title)||(null==i?void 0:i.description))&&(0,M.jsxs)(C().Ht,{style:O.titleAndDescription,children:[(null==i?void 0:i.title)&&(0,M.jsx)(C().gq,{gap:2,children:(0,M.jsx)("div",{style:O.linkTitle,children:null==i?void 0:i.title})}),(null==i?void 0:i.description)&&(0,M.jsx)(C().gq,{gap:2,children:(0,M.jsx)("div",{style:O.newDescription,children:(0,M.jsx)("div",{spellCheck:!1,style:O.newText,children:(0,M.jsx)("div",{children:null==i?void 0:i.description})})})})]}),U?(0,M.jsx)(I().Z,{style:{width:200,height:16}}):(0,M.jsxs)(C().gq,{alignItems:"left",style:{display:"flex",flexDirection:"row",alignItems:"center",padding:0,gap:4,width:205,height:16},children:[null!=i&&i.favicon_url?(0,M.jsx)(k().Z,{type:"image_url",imageURL:null==i?void 0:i.favicon_url,size:16,style:O.iconBoxImageStyle}):null!=i&&i.icon_url?(0,M.jsx)(k().Z,{type:"image_url",imageURL:null==i?void 0:i.icon_url,size:16,style:O.iconBoxImageStyle}):(0,M.jsx)(b().Z,{icon:d().N,isDarkIconColor:!0,disabled:!0}),(0,M.jsx)("div",{style:{flexGrow:0,fontWeight:p().Ue.medium,color:"#787774",fontSize:12,...p().Yu},children:(null==i?void 0:i.provider_name)||(null==i?void 0:i.link_provider)||_})]})]})]})}},878517:(e,t,i)=>{i.d(t,{D5:()=>it,E5:()=>dt,s6:()=>Le,Tq:()=>lt,yD:()=>nt,n1:()=>st});i(267602),i(653476),i(470928),i(241792),i(228244);var n=i(667294),o=()=>i(219727),r=()=>i(142735),l=()=>i(846550),a=()=>i(646574),s=()=>i(278606),d=()=>i(235484),c=()=>i(565630),u=()=>i(135796),g=()=>i(641772),p=()=>i(956057),m=()=>i(995867),h=()=>i(396136),x=()=>i(602299),f=()=>i(955620),y=()=>i(727207),v=()=>i(830968),j=()=>i(788860),S=()=>i(513670),k=()=>i(696459),b=()=>i(707513),w=()=>i(30238),I=()=>i(448046),C=()=>i(145990),B=()=>i(293689),T=()=>i(681035),M=()=>i(103908),_=()=>i(589024),R=()=>i(286338),A=()=>i(606757),U=()=>i(250625),P=()=>i(417746),Z=()=>i(485569),D=()=>i(659234),O=()=>i(641506),z=()=>i(480089),H=()=>i(485491),V=()=>i(472753),E=()=>i(998901),L=()=>i(104088),K=()=>i(35982),W=()=>i(876822),F=()=>i(197666),G=()=>i(202842),N=()=>i(111124),q=()=>i(56810),J=()=>i(826955),Y=()=>i(9656),$=()=>i(154186),X=()=>i(448419),Q=()=>i(643051),ee=()=>i(518242),te=()=>i(967092),ie=()=>i(943620),ne=()=>i(679063),oe=()=>i(384241),re=()=>i(989560),le=()=>i(625449),ae=()=>i(743790),se=()=>i(251932),de=()=>i(75751),ce=()=>i(801812),ue=()=>i(824462),ge=()=>i(34683),pe=()=>i(863406),me=i(785893);function he(e){const{token:t,store:i}=e.state,{linkMentionAnnotationData:r}=e,l=e.onDismiss,a=(0,o().O7)(),[s,d]=(0,n.useState)(!0),{iframe_url:c,height:u,padding:g,href:p,padding_top:m}=r,h=r.hasOwnProperty("description"),x=S().xb(r),[{value:f}]=(0,ce().r5)((async()=>{var e,t;if(c)return w().wB(a,{type:"iframe"}),{result:"iframePresent"};if(h)return d(!1),x?w().wB(a,{type:"default"}):w().wB(a,{type:"custom"}),{result:"linkMentionContainsDescription"};d(!0);const i=await ue().callApi({eventName:"getDataForLinkMention",environment:a,data:{url:p,spaceId:(null===(e=W().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=W().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"link_mention_hover"}});return"success"===i.type?"error"in i.data?(d(!1),{result:"apiFailed"}):(w().wB(a,{type:"custom"}),d(!1),{result:"gotApiResponse",resultData:i.data}):"failed"===i.type?(d(!1),{result:"apiFailed"}):(d(!1),(0,k().t1)(i))}),[c,h,a,p,x]);let y;switch(null==f?void 0:f.result){case"linkMentionContainsDescription":y=r;break;case"gotApiResponse":y=f.resultData;break;case"apiFailed":case"iframePresent":case void 0:y=void 0;break;default:(0,k().t1)(f)}return y&&!c||!y&&!c?(0,me.jsx)(pe().Y,{hoverData:y,href:p,showEditButton:!1,store:i,token:t,onDismiss:l,loading:s}):c?(0,me.jsx)(ge().g,{hoverData:r,iframe_url:c,showEditButton:!1,height:u,padding:g,store:i,token:t,onDismiss:l,href:p,padding_top:m}):(0,me.jsx)(pe().Y,{hoverData:y,href:p,showEditButton:!1,store:i,token:t,onDismiss:l,loading:s})}var xe=()=>i(492788),fe=()=>i(506347),ye=()=>i(135857),ve=()=>i(524052),je=()=>i(81979),Se=()=>i(526839),ke=()=>i(54193),be=()=>i(463212),we=()=>i(959137),Ie=()=>i(33649),Ce=()=>i(970105),Be=()=>i(205228),Te=()=>i(718611),Me=()=>i(338530),_e=()=>i(624528),Re=()=>i(1910);function Ae(e){const{onDismiss:t,state:i}=e,{store:a}=i,s=(0,o().O7)(),d=(0,l().Fg)(),[c,u]=(0,n.useState)(!0),g="token"===i.type?f().zW$(i.annotation):i.hyperlink,p=(0,Se().A5)({url:g,baseUrl:Be().default.domainBaseUrl,publicDomainName:Be().default.publicDomainName}),m=(0,n.useCallback)((async()=>{switch(t(),await xe().default.afterNextFlush(),i.type){case"token":Ce().AE({token:i.token,store:i.store,readOnly:!1}),Ie().dz({type:"focusOnly",focus:!0});break;case"block":_e().KB({store:i.store});break;default:(0,k().t1)(i)}}),[t,i]),x=(0,n.useCallback)((async()=>{t(),await xe().default.afterNextFlush();const e=await we().F.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard;let n=g;const o=(0,ke().parseRoute)({url:g,baseUrl:Be().default.domainBaseUrl,publicDomainName:Be().default.publicDomainName,isMobile:s.device.isMobile,protocol:Be().default.protocol,currentUrl:window.location.href});if("page"===o.name&&o.blockId){const e=J().G.createChildStore(a,{table:h().iU,id:o.blockId});n=(0,ye().Z)({pageId:o.blockId,pageModel:e.getModel(),baseUrl:Be().default.domainBaseUrl,discussionId:o.discussionId,scrollToBlockId:o.scrollToBlockId,peekViewBlockId:o.peekViewBlockId,peekMode:o.peekMode,pageVisitSource:fe().tY.CopyLink})}e.copyString({environment:s,stringValue:n,copiedMessage:i})}),[s,t,a,g]),y=(0,r().VK)((()=>(0,R().L0)()),[]),[{value:v}]=(0,ce().r5)((async()=>{var e,t;if(p||!y)return;u(!0);const i=await ue().callApi({eventName:"getDataForLinkMention",environment:s,data:{url:g,spaceId:(null===(e=W().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=W().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"hyperlink_hover"}});if("success"===i.type)return"error"in i.data?void u(!1):(u(!1),i.data);if("failed"===i.type)throw void u(!1);return u(!1),(0,k().t1)(i)}),[s,g,p,y]),S=s.device.isSafari||s.device.isIOS,I=(0,l().yK)((e=>({wrapper:{fontSize:b().JB.UISmall.desktop,color:e.mediumTextColor,fontWeight:b().Ue.regular,fill:e.mediumIconColor,flexDirection:"column"},destination:{padding:"4px 0 4px 6px",alignItems:"center"},button:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:4,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,...b().Yu},icon:{height:"1em",width:"1em",marginRight:S?"0.4em":"0.5em",fill:e.mediumIconColor},content:{width:340,height:"100%",aspectRatio:"auto"},title:{color:e.regularTextColor,fontWeight:b().Ue.semibold,whiteSpace:"normal",wordBreak:"break-word",fontSize:13,padding:"4px 0",maxWidth:300},author:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop},description:{wordBreak:"break-word",maxWidth:300,...b().Yu,color:e.regularTextColor,fontSize:12,lineHeight:1.45,whiteSpace:"normal",flexDirection:"column"},text:{color:e.regularTextColor,fontSize:12,lineHeight:1.45},buttons:{fontWeight:b().Ue.medium}})),[S]),C=(0,j().YB)(),B=(0,j().vU)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"}}),T=(0,r().VK)((()=>{if(!p)return{pageIcon:(0,je().o)(I.icon),title:(0,me.jsx)("div",{style:I.destinationText,children:g})};const e=J().G.createChildStore(a,{table:h().iU,id:p});return{pageIcon:(0,be().tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:Be().default.domainBaseUrl,getRecordModel:a.getRecordModel,emojiType:(0,Te().e_)(s),isSafariOrIOS:S,isClient:!0,showEmojiInline:s.device.isWindows,currentUserId:s.currentUser.id,theme:d,emojiData:Me().Z.state}),title:(0,me.jsx)(oe().Z,{placeholder:`${window.location.protocol}//${window.location.host}${g}`,style:I.destinationText,store:e})}}),[s,a,p,I,d,S,g]),M=(0,r().VK)((()=>{if(!s.device.isMobile)return v?(v.hasOwnProperty("iframe")?w().uo(s,{type:"iframe"}):w().uo(s,{type:"custom"}),v):void 0}),[s,v]);if(y&&!p){if(M&&!M.iframe||!M)return(0,me.jsx)(pe().Y,{hoverData:M,href:g,handleEditClick:m,showEditButton:e.isHoveredTokenEditable,store:a,loading:c});if(M&&M.iframe)return(0,me.jsx)(ge().g,{hoverData:M,iframe_url:M.iframe,height:M.height,padding:M.padding,padding_top:M.padding_top,handleEditClick:m,store:a,href:g,onDismiss:t,showEditButton:e.isHoveredTokenEditable})}return(0,me.jsx)(se().gq,{style:I.wrapper,alignItems:"center",children:(0,me.jsxs)(se().gq,{style:I.destination,alignItems:"center",children:[T.pageIcon,T.title,(0,me.jsx)(Re().Z,{onClick:x,icon:ve().U,isDarkIconColor:!0,ariaLabel:C.formatMessage(B.copyLink)}),e.isHoveredTokenEditable&&(0,me.jsx)($().Z,{style:I.button,onClick:m,children:(0,me.jsx)(j()._H,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})})]})})}var Ue=()=>i(146947),Pe=()=>i(472675),Ze=()=>i(218181),De=()=>i(654133);function Oe(e){const{store:t,closestNonAliveAncestorStore:i,originRect:n}=e,o=(0,j().YB)(),r=(0,l().yK)((e=>({tooltipStyle:{fontSize:14},mentionPageInTrashTime:{fontWeight:b().Ue.regular,color:e.text.secondary,fontSize:14},avatarStyle:{margin:"0 6px"},placeholderStyle:{marginRight:6}})),[]),{trashAuthorStore:s,trashAuthorDisplayName:d,trashTimestamp:c,isMovedToTrashMetadata:u}=(0,Ze().q)({blockStore:t,closestNonAliveAncestorStore:i,intl:o}),g=(0,a().$b)(c,Ue().locale,o),p=s&&(0,me.jsx)(Pe().S,{authorStore:s,avatarSize:18,avatarStyle:r.avatarStyle,placeholderStyle:{}});return(0,me.jsx)(De().Z,{forceVisibleState:!0,originRect:n,render:()=>{},renderTooltip:()=>(0,me.jsxs)("div",{children:[(0,me.jsxs)(se().gq,{alignItems:"center",children:[u?(0,me.jsx)(j()._H,{defaultMessage:"Moved to Trash by",id:"hoverPreviewOverlay.pageInTrash.message.movedToTrashBy"}):(0,me.jsx)(j()._H,{defaultMessage:"Last edited by",id:"hoverPreviewOverlay.pageInTrash.message.lastEditedBy"}),p||(0,me.jsx)("div",{style:r.placeholderStyle}),d]}),(0,me.jsx)("div",{style:r.mentionPageInTrashTime,children:g})]}),placement:E().Placement.Bottom,alignment:E().Alignment.Start,style:r.tooltipStyle})}var ze=()=>i(989478),He=()=>i(193739);function Ve(e){const t=(0,r().VK)((()=>W().default.state.currentSpaceStore),[]),i=(0,r().VK)((()=>{var t;return null===(t=e.state)||void 0===t?void 0:t.annotation}),[e.state]),n=(0,r().VK)((()=>{if(t)return J().U6.createChildStore(t,{id:i[1],table:ze().KJ})}),[t,i]),o=(0,r().VK)((()=>!!n&&n.isDefined()),[n]);return n&&o&&t?(0,me.jsx)(He().J,{userStore:n}):null}const Ee=20;function Le(e){const t=(0,o().O7)(),i=(0,r().Kw)(F().Z,{debugName:"HoverPreviewOverlay"}),{state:l,pinPopup:a,unpinPopup:s,hasBeenHovering:d,isPinned:u,dismissPopup:g}=function(){const[e,t]=(0,n.useState)(!1),[i]=(0,r().AF)(N().Z),o=(0,c().Kt)(i,400,Object.is),[l,a]=(0,n.useState)(void 0),s=l||(e?void 0:o),d=(0,n.useCallback)((()=>a(s)),[s]),u=(0,n.useCallback)((()=>{a(void 0)}),[]),g=(0,n.useCallback)((()=>{u(),t(!0)}),[u]);return(0,n.useEffect)((()=>{t(!1)}),[o]),{state:s,pinPopup:d,unpinPopup:u,hasBeenHovering:i&&i===s,isPinned:Boolean(l),dismissPopup:g}}(),p=(0,r().VK)((()=>(0,R().y3)()),[]),m=function(e){const t=(0,o().O7)();return(0,r().VK)((()=>!!e&&(0,D().E)(t,e.store)),[e,t])}(l),h=(0,n.useMemo)((()=>Boolean(l&&function(e,t){switch(e.type){case"token":return e.annotations.some(f().j0F)||t&&e.annotations.some(f().nSN)||e.annotations.some(f().IWo)||e.annotations.some(f().vuC)||e.annotations.some(f().UlJ);case"block":return!!e.hyperlink;default:(0,k().t1)(e)}}(l,m))),[l,m]),x=(0,n.useMemo)((()=>l&&("token"===l.type?l.token.node.getBoundingClientRect():V().R.getRect(null==l?void 0:l.store))),[l]),y=x&&0===x.width&&0===x.height&&0===x.left&&0===x.top,v=h?!y:Boolean(!i&&d&&!y),[,j]=(0,r().AF)(G().Z);(0,n.useEffect)((()=>(j({isPinned:u}),()=>j({isPinned:!1}))),[u,j]);const b=(0,n.useMemo)((()=>"token"===(null==l?void 0:l.type)&&(null==l?void 0:l.annotations.some(f().UlJ))),[l]),w=!("token"!==(null==l?void 0:l.type)||null!=l&&l.annotations.some(f().nSN)||null!=l&&l.annotations.some(f().STW)||b),C=(0,n.useMemo)((()=>"token"===(null==l?void 0:l.type)&&(null==l?void 0:l.annotations.some(f().VOE))),[l]),B=(0,n.useMemo)((()=>(p&&"token"===(null==l?void 0:l.type)&&(null==l?void 0:l.annotations.some(f().IWo)))??!1),[p,l]),T=(0,n.useCallback)((()=>B?E().Alignment.End:C?E().Alignment.Center:E().Alignment.Start),[B,C]),M=(0,n.useCallback)((()=>B||b?E().Placement.Top:E().Placement.Bottom),[B,b]),_=(0,r().Kw)(t.RouterStore);return(0,n.useEffect)((()=>{g()}),[_,g]),(0,n.useEffect)((()=>{const e=S().P2((()=>{I().lY(),g()}),200,{leading:!0});return U().lj(window,"scroll",e,!0),()=>U().ZV(window,"scroll",e,!0)}),[g]),(0,me.jsx)(te().ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:v&&!h,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:L().k.Popup,open:v,originRect:x,originGap:6,alignmentToOrigin:T(),placementToOrigin:M(),useLightBoxShadow:w,render:()=>l&&(0,me.jsx)("div",{onMouseEnter:a,onMouseLeave:s,children:(0,me.jsx)(Ke,{state:l,isHoveredTokenEditable:m,onDismiss:s,originRect:x})}),...C?{borderRadius:6}:{}})}function Ke(e){const t=(0,r().VK)((()=>(0,R().y3)()),[]),i=(0,r().VK)((()=>W().default.state.currentSpaceStore),[]),n=(0,o().Fy)(),a=(0,l().yK)((e=>({noMembersInGroupStyle:{fontSize:b().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),s="token"===e.state.type?e.state.annotations:void 0,d=null==s?void 0:s.find(f().vuC),c=(0,r().VK)((()=>{if((0,R().d3)()&&d)return f().r0m(d)}),[d]),u=null==s?void 0:s.find(f().j0F),g=null==s?void 0:s.find(f().fpG),p=null==s?void 0:s.find(f()._bk),m=null==s?void 0:s.find(f().aq),h=s?f().frE(s):void 0,y=null==s?void 0:s.find(f().STW),v=t?null==s?void 0:s.find(f().IWo):void 0,S=null==s?void 0:s.find(f().VOE),k=null==s?void 0:s.find(f().UlJ),w=(0,r().VK)((()=>{if(!p)return;const e=f().kxk(p);if(!e)return;return i?(0,H().Q)({groupId:null==e?void 0:e.groupId,spaceStore:i}).getModel():void 0}),[i,p]);if("token"!==e.state.type)return null;if(u&&e.state.store.table!==x().x_)return(0,me.jsx)(Ae,{...e,state:{...e.state,annotation:u}});if(g)return(0,me.jsx)(Fe,{...e,state:{...e.state,annotation:g}});if(p){if(f().kxk(p)&&w)return(0,me.jsx)(ae().Y,{group:w,limit:10,color:"white_background",trackHover:!0,noMembersMessage:(0,me.jsx)(se().gq,{style:a.noMembersInGroupStyle,children:(0,me.jsx)("div",{style:b().Yu,children:(0,me.jsx)(j()._H,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})})})})}else if(c&&!n.isMobile)return(0,me.jsx)(he,{state:e.state,isHoveredTokenEditable:e.isHoveredTokenEditable,linkMentionAnnotationData:c,onDismiss:e.onDismiss});return S?(0,me.jsx)(We,{...e,state:{...e.state,annotation:S},currentSpaceStore:i}):m?(0,me.jsx)(Ge,{...e,state:{...e.state,annotation:m}}):h&&!n.isMobile?(0,me.jsx)(it,{...e,state:{...e.state,annotation:h},onDismiss:e.onDismiss}):y&&!n.isMobile?(0,me.jsx)(rt,{...e,state:{...e.state,annotation:y},onDismiss:e.onDismiss}):v&&!n.isMobile?(0,me.jsx)(Ve,{...e,state:{...e.state,annotation:v},onDismiss:e.onDismiss}):k?(0,me.jsx)(B()._H,{store:e.state.store,annotation:k}):null}function We(e){var t,i;const{store:n,annotation:o}=e.state,a=f().PtE(o),s=a&&J().t1.createChildStore(n,a),d=(0,r().VK)((()=>{if(null!=s&&s.isDefined())return null==s?void 0:s.getModel().getRenderTitle()}),[s]),c=(0,r().VK)((()=>(0,A().Zr)({spaceStore:e.currentSpaceStore})),[e.currentSpaceStore]),u=(0,l().yK)((e=>({container:{backgroundColor:e.tooltipBackground,padding:"4px 8px",maxWidth:250,width:"max-content"},text:{color:e.mediumInvertedTextColor}})),[]);return s?(0,me.jsx)("div",{style:u.container,children:(0,me.jsx)(M().Z,{type:"custom",customEmojiStore:s,text:(0,me.jsx)("span",{className:"notranslate",children:d}),deletedText:(0,me.jsx)(j()._H,{defaultMessage:"{name} <medium>(deleted)</medium>",id:"HoverPreviewOverlay.customEmojiDeleted",values:{name:(0,me.jsx)("span",{className:"notranslate",children:d}),medium:e=>(0,me.jsx)("span",{style:u.text,children:e})}}),subText:null!==(t=e.currentSpaceStore)&&void 0!==t&&t.id&&a.spaceId!==(null===(i=e.currentSpaceStore)||void 0===i?void 0:i.id)&&c?(0,me.jsx)("span",{style:u.text,children:(0,me.jsx)(j()._H,{id:"HoverPreviewOverlay.customEmojiUpload",defaultMessage:"Right-click to add to your workspace"})}):void 0})}):null}function Fe(e){const{annotation:t}=e.state,i=f().zyO(t),n=(0,l().yK)((e=>({container:{fontSize:b().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),o=(0,j().YB)(),r="relative"===i.date_format?"ll":"relative",s=(0,a().ZV)({value:i,date_format:r,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return s===(0,a().ZV)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:o})?null:(0,me.jsxs)(se().gq,{style:n.container,alignItems:"center",children:[(0,u().C)(n.icon),(0,me.jsx)("div",{style:b().Yu,children:s})]})}function Ge(e){const{annotation:t}=e.state,i=f().fsE(t),n=(0,j().YB)(),o=(0,y().Z0)(i.type,n),r=(0,l().yK)((e=>({container:{fontSize:b().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return(0,me.jsx)(se().gq,{style:r.container,alignItems:"center",children:(0,me.jsx)("div",{style:b().Yu,children:o})})}function Ne(e){var t;const{renderConfig:i,store:n}=e,o=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:b().Ue.semibold,whiteSpace:"initial",fontSize:13,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Ue.regular,fontSize:b().JB.UISmall.desktop},dictionaryValue:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return(0,me.jsxs)(me.Fragment,{children:[i.title&&(0,me.jsx)(se().gq,{children:(0,me.jsx)(Z().ox,{...i.title,store:n,style:o.title})}),i.headerAttributes&&i.headerAttributes.length>0&&(0,me.jsx)(se().gq,{alignItems:"center",style:{...o.header,marginBottom:8},children:(0,m().Z)(i.headerAttributes.map(((e,t)=>(0,me.jsx)(Z().ox,{...e,store:n,style:{...o.header,...b().Yu}},`attribute-${t}`)))||[],(e=>(0,me.jsxs)("span",{children:[" ","·"," "]},`dot-${e}`)))}),i.dictionaryAttributes&&i.dictionaryAttributes.length>0&&(0,me.jsx)(se().Ht,{children:i.dictionaryAttributes.map(((e,t)=>{var r;let{key:l,value:a}=e;return(0,me.jsxs)(se().gq,{style:{marginBottom:t!==((null===(r=i.dictionaryAttributes)||void 0===r?void 0:r.length)??0)-1?4:8},children:[(0,me.jsx)("div",{style:{marginRight:8,width:"30%",display:"flex",alignItems:"center"},children:(0,me.jsx)("span",{style:o.dictionaryKey,children:(0,me.jsx)(j()._H,{...l.formatter,values:{value:a.attribute.name}})})}),(0,me.jsxs)("div",{style:{width:"70%",display:"flex",alignItems:"center"},children:[a.icon&&(0,v().li)(a.icon)&&(0,me.jsx)(Q().Z,{type:"image_url",imageURL:a.icon.values[0],size:16,style:{marginRight:6}}),(0,me.jsx)(Z().ox,{...a,store:n,style:o.dictionaryValue,avatarStyle:{marginRight:6}})]})]},t)}))}),i.bodyAttribute&&!(0,v().O0)(i.bodyAttribute)&&(0,me.jsx)(se().gq,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,me.jsx)(Z().hx,{attribute:i.bodyAttribute,store:n})}),i.previewImageAttribute&&(0,me.jsx)("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,me.jsx)("div",{children:(0,me.jsx)(ee().ZP,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})})]})}function qe(e,t){if(!e)return null;const i=e.find((e=>e.key.formatter.id===t));return i?i.value:null}function Je(e,t){if(!e)return null;return e.filter((e=>e.attribute&&t.includes(e.attribute.id)))}function Ye(e,t){if(!e)return null;const i=e.find((e=>e.value.attribute.id===t));return i?i.value:null}function $e(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:s,parentBlockStore:d,onDismiss:c}=e,u=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:b().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Ue.regular,fontSize:b().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},innerBox:{width:"fit-content",display:"flex",alignItems:"center",gap:4}})),[]),p=null===(t=qe(i.dictionaryAttributes,"unfurling.github.pullRequest"))||void 0===t?void 0:t.attribute.values[0],m=qe(i.dictionaryAttributes,"unfurling.generic.status"),h=qe(i.dictionaryAttributes,"unfurling.generic.author"),x=function(e,t){if(!e)return null;return e.find((e=>e.formatter&&t.includes(e.formatter.id)))||null}(i.headerAttributes,["unfurling.github.githubPullMerged","unfurling.github.githubPullClosed","unfurling.github.githubPullOpened"]);return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,me.jsxs)(se().gq,{alignItems:"center",style:{fontSize:12},children:[(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Q().Z,{type:"image_url",imageURL:o.icon,size:16,style:{marginRight:4}}),(0,me.jsx)("div",{style:{fontWeight:b().Ue.medium},children:"GitHub"})]}),p&&(0,me.jsx)("div",{style:u.header,children:(0,me.jsx)(j()._H,{id:"unfurling.github.pullRequestNo",defaultMessage:"PR {prNumber}",values:{prNumber:p}})}),!r&&(0,me.jsx)("div",{style:{position:"relative"},children:(0,me.jsx)(X().ZP,{popupType:X().Z4.Popup,placementToOrigin:E().Placement.Right,alignmentToOrigin:E().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),C().IL.x,C().IL.y)),e||null==c||c()},renderOrigin:e=>(0,me.jsx)($().Z,{style:u.buttonOrigin,...e,children:(0,g().o)({width:14})}),render:e=>(0,me.jsx)(le().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(j()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:s,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),i.title&&(0,me.jsx)(se().gq,{children:(0,me.jsx)(Z().ox,{...i.title,store:n,style:u.title})}),(0,me.jsxs)(se().gq,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:[m.icon&&(0,v().li)(m.icon)&&(0,me.jsx)(Q().Z,{type:"image_url",imageURL:m.icon.values[0],size:14}),(0,me.jsx)(Z().ox,{...m,store:n,style:u.dictionaryValue,avatarStyle:{marginRight:6}})]}),(0,me.jsxs)("div",{style:{lineHeight:"16px",display:"flex",gap:4},children:[x&&(0,me.jsx)("div",{style:u.innerBox,children:(0,me.jsx)(Z().ox,{attribute:x.attribute,store:n,style:u.dictionaryValue})}),h&&(0,me.jsxs)("div",{style:u.innerBox,children:[(0,me.jsx)("div",{style:u.dictionaryValue,children:(0,me.jsx)(j()._H,{id:"unfurling.generic.by",defaultMessage:"by"})}),h.icon&&(0,v().li)(h.icon)&&(0,me.jsx)(Q().Z,{type:"image_url",imageURL:h.icon.values[0],size:16,style:{marginLeft:4}}),(0,me.jsx)(Z().ox,{...h,store:n,style:u.dictionaryValue})]})]})]})]})}function Xe(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:s,onDismiss:d}=e,c=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:b().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Ue.regular,fontSize:b().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),u=qe(t.dictionaryAttributes,"unfurling.generic.lastModifiedBy"),p=qe(t.dictionaryAttributes,"unfurling.generic.lastModifiedAt");return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,me.jsx)(se().gq,{alignItems:"center",style:{fontSize:12},children:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Q().Z,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,me.jsx)("div",{style:{fontWeight:b().Ue.medium},children:"Figma"})]})}),(0,me.jsxs)(se().gq,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[p&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:c.dictionaryValue,children:(0,me.jsx)(j()._H,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,me.jsx)(Z().ox,{...p,store:i,style:c.dictionaryValue})]}),u&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:c.dictionaryValue,children:(0,me.jsx)(j()._H,{id:"unfurling.generic.from",defaultMessage:"by"})}),u.icon&&(0,v().li)(u.icon)&&(0,me.jsx)(Q().Z,{type:"image_url",imageURL:u.icon.values[0],size:16,style:{marginLeft:4}}),(0,me.jsx)(Z().ox,{...u,store:i,style:c.dictionaryValue})]})]}),t.previewImageAttribute&&(0,me.jsx)("div",{style:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,me.jsx)("div",{children:(0,me.jsx)(ee().ZP,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,me.jsx)("div",{style:c.actionButton,children:(0,me.jsx)(X().ZP,{popupType:X().Z4.Popup,placementToOrigin:E().Placement.Right,alignmentToOrigin:E().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),C().IL.x,C().IL.y)),e||null==d||d()},renderOrigin:e=>(0,me.jsx)($().Z,{style:c.buttonOrigin,...e,children:(0,g().o)({width:14})}),render:e=>(0,me.jsx)(le().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(j()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:s,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function Qe(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:s,parentBlockStore:d,onDismiss:c}=e,u=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:b().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Ue.regular,fontSize:b().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},channelValue:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},author:{paddingTop:8,alignSelf:"stretch",alignItems:"center"},replyIcons:{},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),p=qe(i.dictionaryAttributes,"unfurling.generic.author"),m=function(e,t){if(!e)return null;return e.find((e=>e.key.formatter.id===t))||null}(i.dictionaryAttributes,"unfurling.slack.slackReplyCount"),h=Je(i.headerAttributes,["title","name"]),x=Je(i.headerAttributes,["sent_at"]),f=S().mN(i.icons||[],(e=>`${e.type}:${e.values[0].toString()}`)),y=f.length>5?5:f.length;return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,me.jsxs)(se().gq,{alignItems:"center",style:{fontSize:12},children:[(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Q().Z,{type:"image_url",imageURL:o.icon,size:16,style:{padding:2}}),(0,me.jsx)("div",{style:{fontWeight:b().Ue.medium,marginRight:8},children:"Slack"})]}),h&&h.length>0&&(0,me.jsx)(Z().ox,{attribute:h[0].attribute,store:n,style:u.channelValue,avatarStyle:{marginRight:6}})]}),(0,me.jsxs)(se().gq,{style:u.author,children:[p&&(0,me.jsx)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:(0,me.jsx)(Z().ox,{...p,store:n,style:u.dictionaryValue})}),x&&(0,me.jsx)("div",{style:{marginLeft:8},children:(0,me.jsx)(Z().ox,{...x[0],store:n,style:u.channelValue})})]}),(0,me.jsxs)(se().Ht,{style:{gap:8},children:[i.bodyAttribute&&!(0,v().O0)(i.bodyAttribute)&&(0,me.jsx)(se().gq,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,me.jsx)(Z().hx,{attribute:i.bodyAttribute,store:n})}),(0,me.jsxs)(se().gq,{style:{alignSelf:"stretch",alignItems:"center"},children:[i.icons&&m&&(0,me.jsx)(tt,{renderConfig:i}),m&&(0,me.jsx)(Z().ox,{formatter:m.key.formatter,attribute:m.value.attribute,store:n,style:{...u.channelValue,transform:`translateX(-${3*(y-1)}px)`},avatarStyle:{marginRight:6}})]})]}),!r&&(0,me.jsx)("div",{style:u.actionButton,children:(0,me.jsx)(X().ZP,{popupType:X().Z4.Popup,placementToOrigin:E().Placement.Right,alignmentToOrigin:E().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),C().IL.x,C().IL.y)),e||null==c||c()},renderOrigin:e=>(0,me.jsx)($().Z,{style:u.buttonOrigin,...e,children:(0,g().o)({width:14})}),render:e=>(0,me.jsx)(le().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(j()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:s,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function et(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:s,onDismiss:d,fileType:c}=e,u=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:b().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Ue.regular,fontSize:b().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2},imageBackground:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center",padding:"docs"===c?"14px 54px":"14px 34px",borderRadius:6,background:"doc"===c?"#4285F4":"sheet"===c?"#34A853":"#F8CB4A"}})),[c,t.dictionaryAttributes]),p=Ye(t.dictionaryAttributes,"username"),m=Ye(t.dictionaryAttributes,"updated_at"),h="doc"===c?"Google Docs":"sheet"===c?"Google Sheets":"Google Slides";return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:288},children:[(0,me.jsx)(se().gq,{alignItems:"center",style:{fontSize:12},children:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Q().Z,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,me.jsx)("div",{style:{fontWeight:b().Ue.medium},children:h})]})}),(0,me.jsxs)(se().gq,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:u.dictionaryValue,children:(0,me.jsx)(j()._H,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,me.jsx)(Z().ox,{...m,store:i,style:u.dictionaryValue})]}),p&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:u.dictionaryValue,children:(0,me.jsx)(j()._H,{id:"unfurling.generic.from",defaultMessage:"by"})}),(0,me.jsx)(Z().ox,{...p,store:i,style:u.dictionaryValue})]})]}),t.previewImageAttribute&&(0,me.jsx)("div",{style:u.imageBackground,children:(0,me.jsx)("div",{children:(0,me.jsx)(ee().ZP,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,me.jsx)("div",{style:u.actionButton,children:(0,me.jsx)(X().ZP,{popupType:X().Z4.Popup,placementToOrigin:E().Placement.Right,alignmentToOrigin:E().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),C().IL.x,C().IL.y)),e||null==d||d()},renderOrigin:e=>(0,me.jsx)($().Z,{style:u.buttonOrigin,...e,children:(0,g().o)({width:14})}),render:e=>(0,me.jsx)(le().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(j()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:s,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function tt(e){let{renderConfig:t}=e;const i=S().mN(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return i.length>=2?(0,me.jsx)(se().gq,{style:{height:16,gap:-5.333,justifyContent:"flex-end"},children:i.slice(0,5).map(((e,t)=>(0,me.jsx)(Z().lf,{attribute:e,isSmall:!0,isUltraSmall:!0,style:{zIndex:10-t,transform:`translateX(${-5*t}px)`,position:"relative"}},t)))}):1===i.length?(0,me.jsx)("div",{style:{paddingRight:4},children:(0,me.jsx)(Z().lf,{attribute:i[0],isSmall:!0,isUltraSmall:!0})}):null}function it(e){const{state:{annotation:t,store:i,token:a},onDismiss:c}=e,u=f().frW(t),p=(0,o().O7)(),m=(0,l().Fg)(),x=(0,n.useRef)(null),y=(0,r().VK)((()=>{const t=J().G.createChildStore(i,{table:h().iU,id:u,spaceId:i.pointer.spaceId}),n=t.canEdit(),o=(0,R().k1)(),r=(0,P()._F)({store:t,isInDarkMode:"dark"===m.mode,canEdit:n,currentUserId:p.currentUser.id,getRenderFn:e=>t=>{var i,n;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(n=s().j.hover)||void 0===n?void 0:n.call(s().j,t))},showAction:void 0});if(!r)return;const{renderConfig:l,integration:f}=r,y=Boolean(r.action),v=e.isHoveredTokenEditable,S=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof J().G?i.recordStoreUIParentStore:void 0;if(o){if(f.id===d().Gw||f.id===d().Xs)return(0,me.jsx)($e,{store:t,integration:f,renderConfig:l,haveInstanceAction:y,containerDivRef:x,token:a,parentBlockStore:S,onDismiss:c});if(f.id===d().mQ)return(0,me.jsx)(Xe,{store:t,integration:f,renderConfig:l,haveInstanceAction:y,containerDivRef:x,token:a,parentBlockStore:S,onDismiss:c});if(f.id===d().nO)return(0,me.jsx)(Qe,{store:t,integration:f,renderConfig:l,haveInstanceAction:y,containerDivRef:x,token:a,parentBlockStore:S,onDismiss:c});if(f.id===d().f3){const e=t.getFormat().uri;let i="drive";if(e&&(i=e.includes("spreadsheets")?"sheet":e.includes("document")?"doc":e.includes("presentation")?"slide":"drive"),"drive"!==i)return(0,me.jsx)(et,{store:t,integration:f,renderConfig:l,haveInstanceAction:y,containerDivRef:x,token:a,parentBlockStore:S,onDismiss:c,fileType:i})}}return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column"},ref:x,children:[(0,me.jsxs)(se().gq,{alignItems:"center",style:{fontSize:12},children:[(0,me.jsx)(Q().Z,{type:"image_url",imageURL:f.icon,size:16,style:{margin:4}}),(0,me.jsx)("div",{style:{flexGrow:1,fontWeight:b().Ue.medium},children:f.name}),a&&!y&&v&&(0,me.jsx)("div",{children:(0,me.jsx)(X().ZP,{popupType:X().Z4.Popup,placementToOrigin:E().Placement.Right,alignmentToOrigin:E().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=x.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),C().IL.x,C().IL.y)),e||null==c||c()},renderOrigin:e=>(0,me.jsx)($().Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:m.lightIconColor},...e,children:(0,g().o)({width:14})}),render:e=>(0,me.jsx)(le().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(j()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:S,store:t,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),y&&v?(0,me.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"},children:(0,me.jsx)(re().Z,{canEdit:n,store:t,isHoverPreview:!0,postActionCallback:c})}):(0,me.jsx)(Ne,{renderConfig:l,store:t})]})}),[u,i,p,m,a,c,e.isHoveredTokenEditable,x]);return y?(0,me.jsx)("div",{style:{padding:"12px 16px",minWidth:260,maxWidth:450},children:y}):null}function nt(){return(0,l().yK)((e=>({icon:{height:16,width:16,fill:e.icon.purplePrimary,marginRight:2},title:{fontSize:12,color:e.icon.purplePrimary},summary:{...(0,O().pd)(4),fontSize:12,lineHeight:1.35,color:e.text.secondary,marginBottom:12},contentCover:{color:e.text.primary,fontSize:11,lineHeight:1.5,marginBottom:0,width:"110%",transform:"translateX(-13px) translateY(-2px) scale(0.91)"},contentCoverEmpty:{height:16},imageCoverWrap:{marginBottom:16},contentCoverFade:{height:48,background:`linear-gradient(to bottom, transparent, ${e.surface.elevated} 100%)`},loadingShimmer:{marginBottom:0},rendererBlockStyle:{fontSize:9}})),[])}function ot(e){const t=(0,o().O7)(),{store:i,startBlockId:l,size:a}=e,s=nt(),d=(0,r().VK)((()=>_().TP(i)),[i]),c=d&&f().Vkf(d)>=Ee,u=(0,n.useMemo)((()=>p().Il()),[]),g=(0,r().VK)((()=>{var e;if("tall"===a)return 200;const t=i.getModel();return!t||!t.isCollectionView()||t.hasWikiBlockUri()||null!==(e=i.getAssociatedCollectionStore())&&void 0!==e&&e.isPageTreeCollection()?84:125}),[a,i]);return(0,n.useEffect)((()=>{const e=q().$g.getCurrentPageVisitId();return w().pi(t,{hover_session_id:u,mentioned_page_id:i.pointer.id,hover_content_type:c?"ai_summary":"content_preview",page_visit_id:e}),()=>{w().Yo(t,{hover_session_id:u,hover_content_type:c?"ai_summary":"content_preview",mentioned_page_id:i.pointer.id,page_visit_id:e})}}),[t,u,c,i.pointer.id]),l||!c?(0,me.jsx)(T().S,{variant:"default",store:i,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:s.contentCoverFade,coverHeight:g,startBlockId:l,contentWrapStyle:s.contentCover,imageCoverWrapStyle:s.imageCoverWrap,emptyGalleryCoverStyle:s.contentCoverEmpty,loadingShimmerStyle:s.loadingShimmer,showLoadingShimmer:!0,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{},rendererBlockStyle:s.rendererBlockStyle,renderAdditionalBlocks:!0}):(0,me.jsx)("div",{children:(0,me.jsx)("div",{style:s.summary,children:(0,me.jsx)(Y().A,{textValue:d,parentStore:i})})})}function rt(e){const{store:t,contentBlockStart:i}=(0,r().VK)((()=>{const t=W().default.state.currentSpaceStore;if(!t)return{store:void 0,contentBlockStart:void 0};const i=J().G.createChildStore(t,{id:e.state.annotation[1],table:"block"});if(!i.isNavigableBlock()){return{store:i.getNavigableBlockStore(),contentBlockStart:i}}return i.isDefined()?{store:i}:{store:void 0,contentBlockStart:void 0}}),[e.state.annotation]),n=(0,z().FS)(t);return t&&n&&e.originRect?(0,me.jsx)(Oe,{store:t,closestNonAliveAncestorStore:n,originRect:e.originRect}):(0,me.jsx)(dt,{store:t,contentBlocks:i&&[i]})}const lt=260,at=24;function st(){return(0,l().yK)((e=>({wrapper:{width:lt},coverContainer:{height:36,zIndex:1},content:{padding:"0 16px"},breadcrumb:{color:e.text.tertiary,fontSize:11,marginBottom:-2},pageTitle:{display:"inline",fontWeight:b().Ue.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},pageTitleIcon:{zIndex:2,position:"relative",marginLeft:16,marginTop:-15,marginBottom:8},pageTitleContainer:{...(0,O().pd)(2),verticalAlign:"top",lineHeight:1.15},description:{fontSize:b().JB.UISmall.desktop,color:e.icon.primary,lineHeight:1.2},empty:{height:16},highlightedBlockWrapper:{display:"flex",marginBottom:8}})),[])}function dt(e){const{store:t,contentBlocks:i,events:n,size:o="regular"}=e,l=st(),{icon:a,isEmptyPage:s,content:d}=(0,r().VK)((()=>{if(!t)return{icon:void 0,isEmptyPage:!1,content:null};const e=t.isEmptyPage(),n=e?(0,me.jsx)("div",{style:{height:at}}):i?i.map(((e,i)=>(0,me.jsx)("div",{style:l.highlightedBlockWrapper,children:(0,me.jsx)(ot,{store:t,startBlockId:null==e?void 0:e.id,size:o})},`${e.id}_${i}`))):(0,me.jsx)(ot,{store:t,size:o});return{icon:t.getIcon(),isEmptyPage:e,content:n}}),[t,i,l.highlightedBlockWrapper,o]);return t?(0,me.jsxs)("div",{style:l.wrapper,...n,children:[(0,me.jsx)("div",{style:l.coverContainer,children:(0,me.jsx)(de().Z,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:36,proxyWidth:260})}),(0,me.jsx)(ie().Z,{disabled:!0,icon:a,isEmptyPage:s,isLarge:!0,disableShrinking:!0,size:26,emojiSize:26,largeIcon:!0,style:l.pageTitleIcon}),(0,me.jsxs)(se().Ht,{gap:4,style:l.content,children:[(0,me.jsxs)(se().Ht,{gap:2,children:[(0,me.jsx)(ne().ZP,{store:t,style:l.breadcrumb}),(0,me.jsx)("div",{style:l.pageTitleContainer,children:(0,me.jsx)(oe().Z,{shouldWrap:!0,maxLines:2,store:t,style:l.pageTitle})})]}),d]})]}):null}},54782:(e,t,i)=>{i.d(t,{Z:()=>v});i(670560),i(667294);var n=()=>i(219727),o=()=>i(156642),r=()=>i(524052),l=()=>i(781391),a=()=>i(955620),s=()=>i(788860),d=()=>i(551771),c=()=>i(959137),u=()=>i(636340),g=()=>i(269299),p=()=>i(352230),m=()=>i(855238),h=()=>i(198829),x=()=>i(255577),f=()=>i(388284),y=i(785893);function v(e){const{store:t,parentBlockStore:i,onAccept:v,token:j,href:S,hoverData:k}=e,b=(0,n().O7)(),w=[];return w.push({key:0,render:e=>(0,y.jsx)(f().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"copy link",render:e=>(0,y.jsx)(m().Z,{...e,title:(0,y.jsx)(s()._H,{id:"linkMention.copyLink",defaultMessage:"Copy Link"}),svg:r().U}),action:async()=>{if(!t)return;if(!j)return;const e=await c().F.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=S;e.copyString({environment:b,stringValue:n,copiedMessage:i})}}]}),w.push({key:1,render:e=>(0,y.jsx)(f().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"convert to bookmark",render:e=>(0,y.jsx)(m().Z,{...e,title:(0,y.jsx)(s()._H,{id:"linkMention.convertToBookmark",defaultMessage:"Turn into preview"}),svg:l().z}),action:()=>{t&&j&&g().createAndCommit({userAction:"LinkMentionMenu.convertToBookmark",environment:b,canUndo:!0,perform:e=>{if(k){const n=u().j4({environment:b,type:o().Ti.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:k&&k.title?a().TPx(k.title):a().TPx(S),link:a().TPx(S),description:k&&k.description?a().TPx(k.description):void 0},format:{bookmark_cover:k.thumbnail_url,bookmark_icon:k.favicon_url?k.favicon_url:k.icon_url},transaction:e,spaceId:t.pointer.spaceId});d().e1({environment:b,parentBlockStore:i,blockStore:n,token:j,transaction:e})}else{const n=u().j4({environment:b,type:o().Ti.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:a().TPx(S),link:a().TPx(S)},transaction:e,spaceId:t.pointer.spaceId});d().e1({environment:b,parentBlockStore:i,blockStore:n,token:j,transaction:e})}}})}}]}),(0,y.jsx)(h().Z,{menuType:p().o.Popup,children:(0,y.jsx)(x().ZP,{type:x().iW.Vertical,initialFocus:void 0,onAccept:v,sections:w,style:{paddingTop:3,paddingBottom:3}})})}},193739:(e,t,i)=>{i.d(t,{J:()=>w});i(241792),i(667294);var n=()=>i(142735),o=()=>i(846550),r=()=>i(135796),l=()=>i(890598),a=()=>i(995867),s=()=>i(578292),d=()=>i(788860),c=()=>i(696459),u=()=>i(707513),g=()=>i(286338),p=()=>i(219727),m=()=>i(801812),h=()=>i(824462),x=()=>i(876822);var f=()=>i(591914),y=()=>i(668001),v=()=>i(661297),j=()=>i(67961),S=()=>i(981583),k=()=>i(251932),b=i(785893);function w(e){let{userStore:t}=e;const i=(0,d().YB)(),c=(0,n().VK)((()=>{var e;const i=x().default.state.currentSpaceStore;if(i)return null===(e=(0,f().VK)(i,t.id))||void 0===e?void 0:e.getMembershipType()}),[t]),w=(0,n().VK)((()=>(0,g().y3)()),[]),B=(0,n().VK)((()=>t.id),[t]),{value:T,isLoading:M}=function(e){let{userId:t}=e;const i=(0,p().O7)(),o=(0,n().VK)((()=>{var e;return null===(e=x().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),[{status:r,error:l,value:a}]=(0,m().r5)((async()=>{if(!o)return;const e=await h().callApi({eventName:"getExtendedUserProfile",environment:i,data:{userId:t,spaceId:o}});if("failed"===e.type)throw e.error;if(e){const t=e.data.permissionGroups??[];return{timeZone:e.data.timeZone,permissionGroups:t}}}),[i,t,o]);return void 0===o?{isLoading:!0,error:void 0,value:void 0}:{isLoading:"pending"===r,error:l,value:a}}({userId:B}),{timeZone:_,permissionGroups:R}=(0,n().VK)((()=>T??{timeZone:void 0,permissionGroups:[]}),[T]),A=function(e){return e.sort(((e,t)=>e.memberCount-t.memberCount)).map((e=>e.name))}(R),{name:U,email:P}=(0,n().VK)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]),Z=(0,n().VK)((()=>t.isDefined()),[t]),D=(0,o().yK)((e=>({card:{minWidth:280,height:126,padding:12},bio:{display:"inline-flex",alignItems:"center",gap:12,flexGrow:1,width:0},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:u().Ue.medium},profileTitle:{fontWeight:u().Ue.semibold},profileSubtitle:{...u().Yu},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[]);return Z&&w?(0,b.jsx)("div",{style:D.card,children:(0,b.jsxs)(k().Ht,{gap:16,children:[(0,b.jsx)(k().gq,{children:(0,b.jsxs)("div",{style:D.bio,children:[(0,b.jsx)(S().Z,{userStore:t,size:56}),(0,b.jsxs)(k().Ht,{gap:3,style:D.bioRight,children:[(0,b.jsx)(j().Z,{style:D.profileTitle,children:U}),M?(0,b.jsx)(y().Z,{style:D.loadingShimmer}):A.length>0?(0,b.jsx)(j().Z,{isSmall:!0,style:D.profileSubtitle,children:(0,a().Z)(A.slice(0,3),(e=>(0,b.jsx)(I,{index:e},e)))}):c?(0,b.jsx)(j().Z,{isSmall:!0,style:D.profileSubtitle,children:(0,b.jsx)(C,{membershipType:c})}):null,M?(0,b.jsx)(y().Z,{style:D.loadingShimmer}):_?(0,b.jsx)(j().Z,{isSmall:!0,isSecondaryColor:!0,style:D.profileSubtitle,children:(0,b.jsx)(d()._H,{id:"personHoverCard.userInfo.timeZone",defaultMessage:"{time} local time",values:{time:(new Date).toLocaleTimeString((0,s().E2)(i),{timeZone:_,hour:"2-digit",minute:"2-digit",hour12:!0})}})}):null]})]})}),(0,b.jsxs)(k().gq,{gap:12,children:[(0,b.jsx)(v().Z,{style:D.actionButton,onClick:()=>{window.open(`mailto:${P}`,"_blank")},icon:l().h,children:(0,b.jsx)(j().Z,{children:(0,b.jsx)(d()._H,{id:"personHoverCard.actionButtons.email",defaultMessage:"Email"})})}),(0,b.jsx)(v().Z,{style:D.actionButton,onClick:()=>{window.open(`https://calendar.notion.so/meet-with/${P}`,"_blank")},icon:r().C,children:(0,b.jsx)(d()._H,{id:"personHoverCard.actionButtons.schedule",defaultMessage:"Schedule"})})]})]})}):null}function I(e){let{index:t}=e;return(0,b.jsx)("span",{style:{whiteSpace:"pre"},children:(0,b.jsx)(d()._H,{defaultMessage:", ",id:"personHoverCard.userInfo.groupSeparatorValue"})},t)}function C(e){switch(e.membershipType){case"none":return(0,b.jsx)(d()._H,{id:"personHoverCard.memberStatus.none",defaultMessage:"Deactivated"});case"page_guest":return(0,b.jsx)(d()._H,{id:"personHoverCard.memberStatus.guest",defaultMessage:"Guest"});case"member":return(0,b.jsx)(d()._H,{id:"personHoverCard.memberStatus.member",defaultMessage:"Member"});case"membership_admin":return(0,b.jsx)(d()._H,{id:"personHoverCard.memberStatus.admin",defaultMessage:"Admin"});case"owner":return(0,b.jsx)(d()._H,{id:"personHoverCard.memberStatus.owner",defaultMessage:"Workspace Owner"});default:(0,c().t1)(e.membershipType)}}},743790:(e,t,i)=>{i.d(t,{Y:()=>h});i(241792),i(667294);var n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),l=()=>i(801812),a=()=>i(788860),s=()=>i(707513),d=()=>i(30238),c=()=>i(824462),u=()=>i(907099),g=()=>i(876822),p=()=>i(239444),m=i(785893);function h(e){const{group:t,limit:i,noMembersMessage:h,color:x,trackHover:f}=e,y=(0,r().yK)((e=>({container:{marginBottom:4,..."white_background"===x?{fontSize:s().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===x?{fontSize:s().JB.UISmall.desktop,color:e.mediumTextColor}:{color:e.mediumInvertedTextColor}}})),[x]),v=(0,o().VK)((()=>g().default.state.currentSpaceStore),[]),j=(0,n().O7)();(0,o().VK)((()=>{f&&d().iH(j,{group_id:t.group_id})}),[f,t,j]);const[{value:S}]=(0,l().r5)((async()=>{if(!v)return;const e=await c().callApi({eventName:"getSpacePermissionGroupMembers",environment:j,data:{groupIds:[t.group_id],spaceId:v.id}});if("success"===e.type){var n;const o=null===(n=e.data.groupUsersMap[t.group_id])||void 0===n?void 0:n.userIds;return(0,u().rm)({userIds:o,limit:i,spaceStore:v})}}),[v,j,t,i]);return 0===(null==S?void 0:S.limitedUserStores.length)?(0,m.jsx)(m.Fragment,{children:h}):(0,m.jsxs)("div",{style:y.container,children:[null==S?void 0:S.limitedUserStores.map((e=>(0,m.jsx)("div",{style:y.userContainer,children:(0,m.jsx)(p().Z,{style:y.user,userStore:e,avatarSize:18})},e.id))),S&&S.countRemainingUsers>0&&(0,m.jsx)("div",{style:y.moreMessage,children:(0,m.jsx)(a()._H,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:S.countRemainingUsers}})})]})}},103908:(e,t,i)=>{i.d(t,{Z:()=>r});i(667294);var n=()=>i(67961),o=i(785893);const r=function(e){const{type:t,emoji:r,customEmojiStore:l,text:a,deletedText:s,subText:d}=e,c=(0,i(142735).VK)((()=>"custom"===t&&l.isDefined()&&l.getAlive()),[l,t]),u=(0,i(846550).yK)((e=>({container:{alignItems:"center"},label:{color:e.regularInvertedTextColor,fontWeight:i(707513).Ue.medium,textAlign:"center",overflowWrap:"anywhere"},emojiContainer:{background:"white",borderRadius:4,padding:4,display:"flex",lineHeight:1,marginTop:2}})),[]);return(0,o.jsxs)(i(251932).Ht,{gap:4,style:u.container,children:["custom"===t&&c?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(1898).Z,{emojiStore:l,size:40})}):"unicode"===t?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(754668).Z,{size:40,char:r})}):null,(0,o.jsx)(n().Z,{isSmall:!0,isMultiline:!0,style:u.label,children:"unicode"===t||c?a:s}),d&&(0,o.jsx)(n().Z,{isSmall:!0,isMultiline:!0,style:u.label,children:d})]})}},659234:(e,t,i)=>{i.d(t,{E:()=>s,N:()=>a});var n=()=>i(890324),o=()=>i(826955),r=()=>i(239482),l=()=>i(122479);function a(e,t){const i=t.getRecordStoreUIRoot(),a=i instanceof o().G&&i.isPageBlock()&&i.isNonEditableState(),s=(0,r().n3)(i)&&n().Z.getMode(e,i),d=Boolean((0,l().Ix)(s));return!t.canEdit()||d||a}function s(e,t){return!a(e,t)}},218181:(e,t,i)=>{i.d(t,{q:()=>l});var n=()=>i(142735),o=()=>i(530980),r=()=>i(396136);function l(e){let{blockStore:t,closestNonAliveAncestorStore:i,intl:l}=e;return(0,n().VK)((()=>{var e;let n,a,s;const d=i&&i.table===r().iU&&i.getMovedToTrashTime();d?(n=!0,s=d,a=i.getMovedToTrashStore()):(s=t.getLastEditedTime(),a=t.getLastEditedByStore(),n=!1);return{trashAuthorStore:a,trashAuthorDisplayName:(null===(e=a)||void 0===e?void 0:e.getDisplayName(l))||l.formatMessage(o().T_T.messages.anonymousPlaceholder),trashTimestamp:s,isMovedToTrashMetadata:n}}),[t,i,l])}}}]);