"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[55798],{806420:(e,t,i)=>{i.r(t),i.d(t,{ImageHyperlinkOverlay:()=>P,ImageHyperlinkPreview:()=>H});var n=i(667294),o=()=>i(219727),r=()=>i(142735),a=()=>i(846550),l=()=>i(801812),s=()=>i(843403),c=()=>i(519454),d=()=>i(526839),p=()=>i(396136),g=()=>i(463212),h=()=>i(788860),u=()=>i(568017),v=()=>i(696459),m=()=>i(707513),y=()=>i(824462),f=()=>i(628370),b=()=>i(1910),k=()=>i(108714),x=()=>i(384241),w=()=>i(251932),j=()=>i(205228),S=()=>i(718611),I=()=>i(338530),C=()=>i(594546),M=()=>i(472753),R=()=>i(876822),U=()=>i(826955),_=()=>i(624528),B=i(785893);function H(e){const{isHovered:t,store:i,hideText:H,disableActions:O}=e,P=(0,h().YB)(),T=(0,a().Fg)(),Z=(0,o().O7)(),[E,K]=(0,n.useState)(!1),L=M().R.getRect(i),N=O?80:110,V={linkTitle:{fontStyle:"normal",fontWeight:m().Ue.medium,fontSize:12,letterSpacing:-.154,lineHeight:"143%",fontFeatureSettings:"'case' on",textOverflow:"ellipsis",color:u().ZP.white,maxWidth:L?L.width-N:0,paddingRight:"4px",overflow:"hidden"},iconButton:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 6px"},titleOverlay:{left:0,bottom:0,width:"100%",height:"88px",background:"linear-gradient(360deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.18) 50%, rgba(0, 0, 0, 0.09) 65%, rgba(0, 0, 0, 0.045) 75%, rgba(0, 0, 0, 0.0222) 82.85%, rgba(0, 0, 0, 0.0114) 88%, rgba(0, 0, 0, 0) 100%)"}},z=(0,h().vU)({editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),D=(0,r().VK)((()=>{const e=i.getImageHyperlink()||"";return"placeholder"===e?void 0:e}),[i]),[{value:q}]=(0,l().r5)((async()=>{var e,t;if(!D)return"";const i=await y().callApi({eventName:"getDataForLinkMention",environment:Z,data:{url:D,spaceId:(null===(e=R().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=R().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"hyperlink_hover"}});if("success"===i.type){if("error"in i.data)return;return i.data.title}if("failed"===i.type)throw void 0;return(0,v().t1)(i)}),[D,Z]),A=(0,d().A5)({url:D||"",baseUrl:j().default.domainBaseUrl,publicDomainName:j().default.publicDomainName}),F=(0,r().VK)((()=>{if(!A)return;const e=U().G.createChildStore(i,{table:p().iU,id:A});return{pageIcon:(0,g().tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:j().default.domainBaseUrl,getRecordModel:i.getRecordModel,emojiType:(0,S().e_)(Z),isSafariOrIOS:Z.device.isSafari||Z.device.isIOS,isClient:!0,showEmojiInline:Z.device.isWindows,currentUserId:Z.currentUser.id,theme:T,emojiData:I().Z.state}),title:(0,B.jsx)(x().Z,{style:{...V.linkTitle,whiteSpace:"nowrap"},store:e})}}),[Z,i,A,T,V.linkTitle]),W=(0,r().VK)((()=>Boolean(D)&&t),[D,t]),G=(0,n.useCallback)((()=>{_().KB({store:i})}),[i]);return(0,B.jsx)(f().Z,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},visible:W,children:(0,B.jsx)("div",{style:{...V.titleOverlay,pointerEvents:"none",position:"absolute"},children:(0,B.jsxs)(w().gq,{style:{justifyContent:"start",alignItems:"center",position:"absolute",opacity:W?1:0,left:12,bottom:8,cursor:"pointer",pointerEvents:"auto"},children:[F&&(0,B.jsx)(k().Z,{href:D,external:!1,onClick:e=>{e.stopPropagation(),(0,C().j)({environment:Z,event:{eventName:"image_hyperlink_click",eventProperties:{location:"link",url_type:"notion"}}})},children:(0,B.jsxs)(w().gq,{style:{alignItems:"center",height:24},children:[F.pageIcon,!H&&F.title]})}),!F&&(0,B.jsx)(k().Z,{href:D,external:!0,onClick:e=>{e.stopPropagation(),(0,C().j)({environment:Z,event:{eventName:"image_hyperlink_click",eventProperties:{location:"link",url_type:"external"}}})},children:(0,B.jsxs)(w().gq,{style:{alignItems:"center",height:24},children:[(0,B.jsx)("div",{style:{paddingRight:"4px"},children:(0,s().J)({height:14,width:14,fill:u().ZP.white})}),!H&&(0,B.jsx)("div",{style:{...V.linkTitle,whiteSpace:"nowrap"},children:q||D})]})}),!O&&!H&&(0,B.jsx)(b().Z,{icon:c().R,style:{...V.iconButton},hoveredStyle:{background:"rgba(227, 226, 224, 0.25)"},iconStyle:{width:14,height:14,fill:E?"rgba(255, 255, 255, 1)":"rgba(255, 255, 255, 0.65)"},onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),ariaLabel:P.formatMessage(z.editLink),onClick:e=>{e.stopPropagation(),G()}})]})})})}const O="opacity 100ms ease-in-out";function P(e){const{isHovered:t,store:i}=e,n=(0,r().VK)((()=>{const e=i.getImageHyperlink()||"";return"placeholder"===e?void 0:e}),[i]),o=(0,r().VK)((()=>n&&t),[n,t]);return(0,B.jsx)("div",{style:{left:0,top:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.3)",pointerEvents:"none",opacity:o?1:0,position:"absolute",transition:O}})}},519454:(e,t,i)=>{i.d(t,{R:()=>o});i(667294);var n=i(785893);const o=(0,i(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})}}]);