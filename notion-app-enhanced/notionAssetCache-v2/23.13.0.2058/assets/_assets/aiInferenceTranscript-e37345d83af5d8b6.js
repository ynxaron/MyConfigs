"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[94543,95986,93843],{939198:(e,t,n)=>{n.r(t),n.d(t,{FullPageAI:()=>b});n(267602),n(470928);var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(923301),c=()=>n(836273),l=()=>n(325490),d=()=>n(342792),u=()=>n(497065),m=()=>n(573357),p=()=>n(755589),f=()=>n(466970),S=()=>n(857719),g=()=>n(589525),y=()=>n(876822),h=()=>n(826955),v=()=>n(922065),_=()=>n(84028),C=n(785893);function b(e){const{threadId:t,configType:n,defaultUserMessage:b}=e,w=(0,r().O7)(),{isElectronWindows:x}=(0,r().Fy)(),R=(0,a().yK)((e=>({pageLayout:{display:"flex",minHeight:"100vh",width:"100%",backgroundColor:e.contentBackground,order:2},layoutContent:{minWidth:0,flex:1,display:"flex",flexDirection:"column",height:"100vh"}})),[]),T=(0,o.useCallback)((e=>{let{id:t}=e;u().c4({environment:w,url:t?`${c().VP.aiInferenceTranscript}?t=${(0,d().cj)(t)}`:c().VP.aiInferenceTranscript})}),[w]),E=(0,o.useMemo)((()=>s().t8.find((e=>e.type===n))),[n]),L=(0,i().VK)((()=>!(0,g().in)(w)),[w]),k=(0,i().VK)((()=>{const{currentSpaceStore:e}=y().default.state;if(e&&t)return h().V3.createChildStore(e,{table:l().kL,id:t,spaceId:e.id})}),[t]),A=(0,f().E)("full_page_ai");if(!w.currentUser.id||!A)return null;const I=v().r;return(0,C.jsx)(m().Z,{capture:!0,render:e=>(0,C.jsxs)(S().Xg,{type:"chat",style:R.pageLayout,...e,children:[(0,C.jsx)(S().Pb,{style:R.layoutContent,children:(0,C.jsx)(_().C,{threadStore:k,onThreadChange:T,showSidebarButton:L,config:E,defaultUserMessage:b,clientStore:I})}),x&&(0,C.jsx)(p().m,{})]})})}},579217:(e,t,n)=>{n.d(t,{_:()=>i,s:()=>r});var o=()=>n(677559);const r=(0,o().kF)(new(o().Ss)("UniversalQnaModals",(async()=>await Promise.all([n.e(62743),n.e(37358),n.e(7312),n.e(31189),n.e(69343),n.e(2933),n.e(7678),n.e(20919),n.e(52435),n.e(75066),n.e(37317),n.e(78517),n.e(93843),n.e(58183)]).then(n.bind(n,960872)))),(e=>e.UniversalQnaModals)),i=(0,o().kF)(new(o().Ss)("SlackConnectionOptions",(async()=>await n.e(16982).then(n.bind(n,945272)))),(e=>e.SlackConnectionOptions))},493843:(e,t,n)=>{n.d(t,{$o:()=>Z,Fv:()=>N,IL:()=>$,J4:()=>q,KA:()=>F,Nf:()=>V,_p:()=>Q,cQ:()=>K,f$:()=>O,fX:()=>X,j2:()=>U,k2:()=>Y,mg:()=>J,mz:()=>H,oP:()=>z,tF:()=>j,td:()=>B,x:()=>W});n(670560),n(267602),n(470928),n(30005),n(241792),n(228244);var o=()=>n(730120),r=()=>n(492788),i=()=>n(506347),a=()=>n(926724),s=()=>n(331540),c=()=>n(874459),l=()=>n(998411),d=()=>n(35980),u=()=>n(513670),m=()=>n(696459),p=()=>n(250303),f=()=>n(384667),S=()=>n(366257),g=()=>n(139224),y=()=>n(421654),h=()=>n(636340),v=()=>n(531515),_=()=>n(47443),C=()=>n(794586),b=()=>n(879952),w=()=>n(970105),x=()=>n(990966),R=()=>n(269299),T=()=>n(715146),E=()=>n(887430),L=()=>n(861026),k=()=>n(804217),A=()=>n(826955),I=()=>n(965903),P=()=>n(807230),M=()=>n(701182),D=()=>n(645843);function U(e){const{collectionViewStore:t,collectionContextStore:n,timelineState:o,environment:r}=e,i=r.currentUser.id,a=(0,M().B8)(t.id),s=(0,M().pQ)(t,r),c=n.permissionScopesStore.state,l=u().Ds((()=>{if(o.destroyed)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,M().al)(o)};d().Z.set({userId:i,key:a,value:e})}),1e3),m=u().Ds((()=>{if(o.destroyed||!k().default.state.online||!r.currentUser.isLoggedIn()||!c.canConfigureBlock)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,M().al)(o)},n=t.getFormat().timeline_preference;u().Xy(n,e)||R().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:r,canUndo:!0,perform:n=>{y().FH({stores:[t],update:{timeline_preference:e},transaction:n})}})}),5e3);o.savePreference=()=>{l(),m()},V({timelineState:o,environment:r,...s})}function V(e){const{timelineState:t,zoomLevel:n,centerTimestamp:o,environment:i}=e,{savePreference:a}=t,s=i.WindowSizeStore.state.width+2*M().Ge,c=(0,M().x2)(n,s),l=o-c/2,d=o+c/2;t.zoomLevel.setState(n),t.currentRange.setState({startTimestamp:l,endTimestamp:d}),r().default.afterNextFlush((()=>{F({timelineState:t,centerTimestamp:o}),a&&a()}))}function F(e){const{timelineState:t,centerTimestamp:n}=e,{horizontalScroller:o,outerSizeObserver:r}=t;if(!o)return;const i=t.zoomLevel.state,{startTimestamp:a,endTimestamp:s}=t.currentRange.state,c=r.rect.state.width;if(c===(0,M().e$)(i,s-a))return;const l=(0,M().e$)(i,n-a)-c/2;o.scrollLeft=l,t.scrollLeft.setState(l)}function z(e){const{environment:t,store:n,query:o,date:r,schema:i,transaction:a}=e,{timeline_by:s}=o;if(!s)return;const c=n.getAssociatedCollectionStore(),l=(null==c?void 0:c.getMappedProperty(s))??s,d=o.timeline_by_end?(null==c?void 0:c.getMappedProperty(o.timeline_by_end))??o.timeline_by_end:void 0,u=(0,M().TW)({store:n,dateValue:r,query:o,schema:(null==c?void 0:c.getSchema())??i}),m=n.getPropertyValue(l),p=d?n.getPropertyValue(d):void 0;return h().sW({store:n.getPropertiesStore(),data:u,transaction:a}),S().H({environment:t,store:n,dateProperty:{id:l,newValue:(null==u?void 0:u[l])??[],oldValue:m},otherDateProperty:d?{id:d,newValue:(null==u?void 0:u[d])??[],oldValue:p}:void 0}),n}function N(e){var t;const{environment:n,timelineState:r,collectionStore:i,collectionContextStore:a,store:s,query:d,groupFormat:u,transaction:m}=e,p=r.zoomLevel.state,S=(0,M().al)(r),{snapUnit:g,getDateRangePlaceholderDuration:y}=M().BJ[p],{timeline_by:h}=d;if(!h)return;const v=null===(t=a.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state;if(!v)return;const _=o().ou.fromMillis(S),C=(0,M().DS)(_,g),b=(0,M().DS)(y(_),g),w=(0,M().AZ)({startValue:(0,c().Lg)((0,l().r)()),snapUnit:g,desiredStart:C,desiredEnd:b});return z({environment:n,store:s,query:d,schema:i.getSchema(),date:w,transaction:m}),f().$T({environment:n,collectionStore:i,before:!0,store:v[0],insertStores:[s],collectionContextStore:a,groupsPointer:u?[u]:[],transaction:m}),s}function O(e){const{type:t,timelineState:n,store:o,startX:r,query:i,schema:a,intl:s,environment:c}=e,{horizontalScroller:l}=n,{startTimestamp:d}=n.currentRange.state;if(!l)return;b().Ys({environment:c,store:o});const m=l.scrollLeft,{stores:p}=I().default.state,f=u().oA(p.map((e=>{const t=(0,M().bk)({store:e,query:i,schema:a,userId:c.currentUser.id,intl:s,formulasModule:void 0});if(t)return{startValue:t,store:e}})));n.dragState.setState({type:t,startStore:o,stores:f.map((e=>{let{store:t}=e;return t})),startValues:f.map((e=>{let{startValue:t}=e;return t})),temporaryValues:f.map((e=>{let{startValue:t}=e;return t})),startX:r,startStartTimestamp:d,startScrollLeft:m})}function q(e){const{timelineState:t,store:n,startX:o,startY:r,schema:i,collectionContextStore:a,verticalScroller:s}=e,{horizontalScroller:c}=t,{startTimestamp:l}=t.currentRange.state;if(!c||!s)return;const d=c.scrollLeft,u=s.scrollTop,m=(0,M().YE)(a,n,i);t.drawState.setState({startStore:n,startDependencyRelationPointers:m,temporaryDependencyRelationPointers:[...m],startX:o,startY:r,startScrollLeft:d,startScrollTop:u,startStartTimestamp:l,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function B(e){const{timelineState:t,currentX:n}=e,{horizontalScroller:o}=t,r=t.zoomLevel.state,i=t.dragState.state,{startTimestamp:a}=t.currentRange.state;if(!i||!o)return;const{type:s,startStartTimestamp:l,startValues:d,startScrollLeft:p,startX:f,startStore:S,stores:g}=i,y=M().BJ[r],{snapUnit:h}=y,v=o.scrollLeft-p+(n-f)+(0,M().e$)(r,a-l),_=(0,M().x2)(r,v),C=d[g.indexOf(S)];let b;if(s===M().px.LeftResizer){const{start:e}=(0,M().XO)(C,h),t=e.plus(_);b=d.map((e=>{const n=(0,M().AZ)({startValue:e,snapUnit:h,desiredStart:t});return(0,c().gW)(n)}))}else if(s===M().px.RightResizer){const{end:e}=(0,M().XO)(C,h),t=e.plus(_);b=d.map((e=>{const n=(0,M().AZ)({startValue:e,snapUnit:h,desiredEnd:t});return(0,c().Qq)(n)}))}else s===M().px.ItemDrag?b=d.map((e=>{const{start:t,end:n}=(0,M().XO)(e,h),o=t.plus(_),r=o.plus(n.valueOf()-t.valueOf());return(0,M().AZ)({startValue:e,snapUnit:h,desiredStart:o,desiredEnd:r})})):(0,m().t1)(s);u().Xy(i.temporaryValues,b)||t.dragState.setState({...i,temporaryValues:b})}function H(e){const{timelineState:t,currentX:n,currentY:o,verticalScroller:r}=e,i=t.drawState.state,a=t.zoomLevel.state,{startTimestamp:s}=t.currentRange.state,{horizontalScroller:c}=t;if(!i||!c||!r)return;const{startDependencyRelationPointers:l,startStore:d,startX:m,startY:p,startScrollLeft:f,startScrollTop:S,startStartTimestamp:g}=i,y=c.scrollLeft,h=r.scrollTop,v=y-f+(n-m)+(0,M().e$)(a,s-g),_=h-S+(o-p),C=t.hoveredItem.state;if(C&&C!==d&&!l.some((e=>e.id===C.id))){const e=[...l,{table:"block",id:C.id,spaceId:C.getSpaceId()}];u().Xy(i.temporaryDependencyRelationPointers,e)||t.drawState.setState({...i,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...i,temporaryDependencyRelationPointers:[...l],xOffsetPx:v,yOffsetPx:_})}function X(e){const{environment:t,collectionContextStore:n,timelineState:o,query:r,schema:i,transaction:a}=e,s=o.dragState.state,{timeline_by:c}=r;if(!s||!c)return;const{temporaryValues:l,stores:d}=s;l.forEach(((e,o)=>{const s=d[o];z({environment:t,store:s,query:r,schema:i,transaction:a,date:e}),p().rv({environment:t,collectionContextStore:n,block_id:s.id,property:c,property_type:"date",from:"timeline"})})),o.dragState.setState(void 0)}function Z(e){var t;const{timelineState:n,environment:o,transaction:r,collectionContextStore:i,isFullScreen:a,isRootChild:s}=e,c=n.drawState.state,l=n.dateRangePlaceholder.state;if(!c)return;const{startStore:d,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:m}=c;if(!d)return void n.drawState.setState(void 0);let f;if(l.active){const{date:e,store:t,parentStore:a,groupFormat:s,newTimelineItemProps:c,existingTimelineItemProps:u}=l;if(t&&u){const{query:n,schema:i}=u;z({environment:o,store:t,query:n,schema:i,date:e,transaction:r}),f={table:"block",id:t.id,spaceId:d.getSpaceId()}}else if(c){const{query:n,schema:l,isFullScreen:u,canEditTimelineItems:m,subitemPath:p}=c,S=J({environment:o,date:e,store:t,parentStore:a,query:n,schema:l,isFullScreen:u,groupFormat:s,canEditTimelineItems:m,collectionContextStore:i,subitemPath:p,transaction:r,from:"timeline_complete_draw"});S&&(f={table:"block",id:S.id,spaceId:d.getSpaceId()})}n.dateRangePlaceholder.setState({active:!1})}else f=m.find((e=>!u.includes(e)));const S=(0,M()._e)(i);if(S){const{property:e}=S;f&&(v().hE({environment:o,propertyWithInverse:S,sourceStore:d,destStore:A().G.createChildStore(d,f),position:{type:"after"},transaction:r}),p().rv({environment:o,collectionContextStore:i,block_id:d.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),n.drawState.setState(void 0)}else g().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:i.settingsStore}),n.drawState.setState({...c,tryToCompleteDrawnArrow:!0});const y=null===(t=f)||void 0===t?void 0:t.id;y&&(0,D().LE)(o,{...(0,L().Pn)(i),...(0,D().Ii)({environment:o,collectionContextStore:i,timelineState:n,isFullScreen:a,isRootChild:s}),dependenciesPropertyID:null==S?void 0:S.property,blockedByStoreID:d.id,blockingStoreID:y})}function K(e){const{timelineState:t,environment:n}=e;t.dragState.state&&(t.dragState.setState(void 0),b().ZH({environment:n}))}function W(e){const{timelineState:t,environment:n}=e;t.drawState.state&&(t.drawState.setState(void 0),b().ZH({environment:n}))}function Y(e){const{stores:t,collectionViewStore:n,schema:o,transaction:r}=e,i=n.getType(),a=n.getQuery(o),s=[];a&&("calendar"===i?a.calendar_by&&s.push(a.calendar_by):"timeline"===i&&(a.timeline_by&&s.push(a.timeline_by),a.timeline_by_end&&s.push(a.timeline_by_end)));for(const c of t)for(const e of s)w().sO({environment:c.environment,store:c.getPropertyStore(e),value:void 0,transaction:r})}function $(e){const{dependency:t,collectionContextStore:n,environment:o,timelineState:r,isFullScreen:i,isRootChild:a}=e,s=(0,M()._e)(n),c=n.collectionStore();if(!s||!c)return;const{property:l}=s,{store:d,relationPointer:u}=t,m=d.getSchema()[l];m&&"relation"===m.type&&(R().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:o,canUndo:!0,perform:e=>{v().Bl({environment:o,propertyWithInverse:s,sourceStore:d,destStore:A().G.createChildStore(d,u),transaction:e}),p().rv({environment:o,block_id:u.id,property:l,property_type:m.type,from:"timeline",collectionContextStore:n,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,D().lf)(o,{...(0,L().Pn)(n),...(0,D().Ii)({environment:o,collectionContextStore:n,timelineState:r,isFullScreen:i,isRootChild:a}),dependenciesPropertyID:l,blockedByStoreID:d.id,blockingStoreID:u.id}))}function j(e){const{collectionViewStore:t,newProperty:n,transaction:o}=e;y().FH({stores:[t],update:{timeline_arrows_by:{property:n}},transaction:o})}function Q(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:r}=e,i=n.collectionStore();if(!i)return;const c=o?i.getSchema()[o]:void 0,l="relation"===(null==c?void 0:c.type)&&c.property&&"relation"===(null===(t=i.getSchema()[c.property])||void 0===t?void 0:t.type)?c.property:void 0;y().FH({stores:[i],update:{collection_default_arrows_by:o,...i.getFormat().app_config_uri===s().iS?{app_uri_map:{...i.getFormat().app_uri_map?i.getFormat().app_uri_map:{},[a().Es.BlockingRelation]:o,[a().Es.BlockedRelation]:l}}:{}},transaction:r})}function J(e){const{environment:t,transaction:n,date:o,parentStore:r,query:a,schema:s,isFullScreen:c,groupFormat:l,canEditTimelineItems:d,collectionContextStore:u,from:m}=e;if(!(0,P().ww)(t))return;const p=l?[l]:[],S=u.groupsStore.getGroupState(p);if(!S)return;if(r)return function(e){const{environment:t,transaction:n,date:o,store:r,parentStore:a,query:s,schema:c,groupFormat:l,canEditTimelineItems:d,collectionContextStore:u,subitemPath:m}=e;if(!r||!a)return;const p=l?[l]:[],S=f().yk({environment:t,collectionContextStore:u,groupsPointer:p,store:r,before:!1,collectionStore:a,transaction:n,subitemPath:m,subitemInsertDirection:"into"});if(S){if(z({environment:t,store:S,query:s,schema:c,date:o,transaction:n}),t.device.isMobile)_()._c({environment:t,store:S,pageVisitSource:i().tY.Create});else if(S&&d){const e=S.getBlockTitleStore();x().setSelectionAtStart({store:e})}return S}}(e);u.searchQueryStore.state&&(0,T().U)({searchQuery:"",collectionContextStore:u,isFullScreen:c});const g=f().IW({environment:t,collectionContextStore:u,groupsPointer:p,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:n,from:{createBlock:m},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!g)return;const y=g.coercionSucceeded,h=g.newStore;if(z({environment:t,store:h,query:a,schema:s,date:o,transaction:n}),t.device.isMobile)_()._c({environment:t,store:h,pageVisitSource:i().tY.Create});else if(y&&d){const e=h.getBlockTitleStore();x().setSelectionAtEnd({store:e})}else C().CH({environment:t,store:h,peekMode:(0,E().kr)(u),resultsStore:null==S?void 0:S.resultsStore,collectionContextStore:u,pageVisitSource:i().tY.Create});return h}},645843:(e,t,n)=>{n.d(t,{Al:()=>c,CB:()=>l,H6:()=>s,Ii:()=>f,LE:()=>m,gw:()=>d,iR:()=>i,lf:()=>p,ne:()=>u,zI:()=>a});n(267602),n(653476);var o=()=>n(594546),r=()=>n(701182);function i(e,t){o().lu(e,"timeline_view","timeline_view",5,t)}function a(e,t){o().K4(e,"timeline_zoom_level_update",t)}function s(e,t){o().K4(e,"timeline_today_click",t)}function c(e,t){o().K4(e,"timeline_shift_time_click",t)}function l(e,t){o().K4(e,"timeline_toggle_table_click",t)}function d(e,t){o().K4(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){o().K4(e,"timeline_item_resize",t)}function m(e,t){o().K4(e,"timeline_dependency_arrow_add",t)}function p(e,t){o().K4(e,"timeline_dependency_arrow_delete",t)}function f(e){const{environment:t,collectionContextStore:n,timelineState:o,isFullScreen:i,isRootChild:a}=e,s=o.zoomLevel.state,c=n.normalizedFormatStore.state,l=(0,r().C1)({environment:t,format:c,isFullScreen:i,isRootChild:a}),d=l&&c.timeline_table_properties?c.timeline_table_properties.length:0,u=c.timeline_properties||[],m=u.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:l,show_table_properties_count:d,show_timeline_title:u.length!==m.length,show_timeline_properties_count:m.length}}},715146:(e,t,n)=>{function o(e){const{searchQuery:t,collectionContextStore:n}=e;n.collectionViewStore()&&(n.searchQueryStore.setState(t||""),n.groupsStore.resetAllLimits())}n.d(t,{U:()=>o})},887330:(e,t,n)=>{n.d(t,{C:()=>r,L:()=>i});var o=()=>n(707513);function r(e){const{theme:t,isInHomeWidget:n}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...n?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:o().Ue.regular,lineHeight:1,borderRadius:6}}function i(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:o().Ue.regular,lineHeight:1,borderRadius:4}}},762300:(e,t,n)=>{n.d(t,{P9:()=>c,YJ:()=>l,jc:()=>s,jg:()=>a});n(670560),n(267602),n(653476);var o=()=>n(235484),r=()=>n(530980),i=()=>n(525807);function a(e){if(e.integration_id!==o().nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,n,r]=t;return{organizationName:n,accountName:r}}function s(e){return r().kk5.fromValue(i().PJ,e).getSlackWorkspaceId()}function c(e,t){return t?e.filter((e=>{const n=s(e);return!!n&&t(n)})):e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n={};for(const o of e){const{accountName:e,organizationName:r}=a(o);d({query:t,accountName:e,organizationName:r})&&(n[e]||(n[e]=[]),n[e].push({externalAuthentication:o,workspaceName:r}))}return n}function d(e){const{accountName:t,organizationName:n,query:o}=e;if(0===o.length)return!0;const r=t.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0,i=!!n&&n.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0;return r||i}},974442:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},877727:(e,t,n)=>{n.d(t,{QZ:()=>a,SV:()=>r,mq:()=>i});var o=()=>n(749826);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"workflow_templates_settings_dev",disableExposureLogging:e.disableExposureLogging})&&o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function a(e){return!e.device.isPhone}},999582:(e,t,n)=>{n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const r=new o;n(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},29488:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{O:()=>o})},157955:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>k,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>b,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>C,MAX_RECURRENCE_INTERVAL:()=>g,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>S,convertFromUnpersistedRecurrenceConfig:()=>M,convertToUnpersistedRecurrenceConfig:()=>A,getFormattedEndCondition:()=>L,getFormattedNextRecurrenceTime:()=>E,getNewEndTimestamp:()=>I,getNextDateUtc:()=>T,getRecurrenceAfter:()=>x,isRunningBetweenMidnightAnd3AM:()=>R,isValidRecurrenceInterval:()=>h,isValidRecurrenceNumberOfRuns:()=>v,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>w});n(267602),n(653476),n(241792);var o=()=>n(730120);n(670560);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(696459),a=()=>n(326966),s=()=>n(803021),c=()=>n(646574),l=()=>n(998411),d=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(494616);const p=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},S={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},g=99,y=999;function h(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=g}function v(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=y}function _(e){const{start_date:t,frequency:n,interval:o,weekdays:a,timezone:c,hour:l,minute:d}=e,m="week"===n&&a?a.map((e=>S[e])):void 0,p={};return(0,i().$K)(e.end_condition)&&("date"===e.end_condition.type?p.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?p.count=e.end_condition.number_of_occurrences:(0,i().t1)(e.end_condition)),"month"===e.frequency&&(0,i().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?p.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?p.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return S[t].nth(n)})):(0,i().t1)(e.monthly_restriction)),new u({freq:f[n],dtstart:(0,s().pd)(t),interval:o,byweekday:m,tzid:c,byhour:l??0,byminute:d??0,bysecond:0,...p})}const C=1,b=1;function w(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=o>C,a=n.length>=b;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:r}}function x(e){const{recurrence:t,afterDate:n}=e;if((0,m().nA)(t)){const e=(0,s().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(t).after((0,s().pd)(n));if(!e)return;return(0,s().YL)(e)}}function R(e){return 0===e.hour||1===e.hour||2===e.hour}function T(e){return _(e).after((0,s().pd)((0,s().Jh)()))||void 0}function E(e){const{recurrence:t,intl:n}=e,r=T(M(t));if(!r)return;const i=R(t),a=o().ou.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(n)).setZone(t.timezone),s=(0,c().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(p.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().ou.TIME_SIMPLE);return t.timezone!==(0,l().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(p.dateAtTime,{date:s,time:e})}}function L(e,t){return(0,i().$K)(e)?"number"===e.type?t.formatMessage(p.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().p6)({date:o().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().t1)(e):t.formatMessage(p.noEndCondition)}const k=100;function A(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,i().t1)(e.end_condition):void 0}}function I(e,t,n){return e.plus(n-t)}function P(e,t){const n=o().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(n.toJSDate())}}function M(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?P(e,e.end_condition):(0,i().t1)(e.end_condition):void 0}}},775404:(e,t,n)=>{n.d(t,{p:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("at",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"})})},984478:(e,t,n)=>{n.d(t,{f:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},728267:(e,t,n)=>{n.d(t,{a:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("clock",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M6.541 10.919a.53.53 0 0 1-.39-.157.53.53 0 0 1-.157-.39c0-.155.053-.283.157-.383a.53.53 0 0 1 .39-.157h2.905V5.895c0-.15.053-.278.158-.383a.521.521 0 0 1 .382-.158.53.53 0 0 1 .39.158.521.521 0 0 1 .157.383v4.477a.53.53 0 0 1-.157.39.53.53 0 0 1-.39.157H6.541Zm3.452 6.207a6.789 6.789 0 0 1-2.727-.554 7.124 7.124 0 0 1-2.256-1.524 7.277 7.277 0 0 1-1.525-2.256 6.788 6.788 0 0 1-.553-2.727c0-.967.184-1.876.553-2.728a7.241 7.241 0 0 1 3.773-3.78 6.788 6.788 0 0 1 2.728-.554c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 0 1 1.53 2.25c.37.852.554 1.761.554 2.728 0 .966-.184 1.875-.553 2.727a7.218 7.218 0 0 1-3.787 3.78 6.789 6.789 0 0 1-2.728.554Zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 0 0 1.805-1.217 5.68 5.68 0 0 0 1.217-1.804c.291-.684.437-1.42.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.567 5.567 0 0 0-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.715 5.715 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202c0 .788.146 1.524.438 2.208a5.735 5.735 0 0 0 1.21 1.804 5.598 5.598 0 0 0 4.013 1.654Z"})})}}]);