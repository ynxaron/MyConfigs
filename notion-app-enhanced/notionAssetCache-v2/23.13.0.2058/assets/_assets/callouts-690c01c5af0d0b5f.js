"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[16006],{603867:(e,t,n)=>{n.r(t),n.d(t,{ConfigureRetentionAnnouncement:()=>S});var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(18902);const s=(0,n(827282).CZ)("infoCircleFill",{default:{loader:()=>n.e(35903).then(n.bind(n,535903))},small:{loader:()=>n.e(49058).then(n.bind(n,449058))},mini:{loader:()=>n.e(39182).then(n.bind(n,539182))},large:{loader:()=>n.e(4328).then(n.bind(n,104328))}});var c=()=>n(429892),l=()=>n(788860),u=()=>n(269299),d=()=>n(348141),m=()=>n(228772),_=()=>n(907337),p=()=>n(876822),g=()=>n(838266),f=n(785893);const v=(0,l().vU)({title:{defaultMessage:"Configure data retention settings",id:"sidebar.configureRetention.title"},body:{defaultMessage:"Starting August 19th, pages in Trash will be automatically deleted after {duration}",id:"sidebar.configureRetention.body"},postLaunchBody:{defaultMessage:"Pages in Trash will be automatically deleted after {duration}",id:"sidebar.configureRetention.postLaunchBody"},button:{defaultMessage:"Configure",id:"sidebar.configureRetention.button"}});function S(e){const t=(0,o().O7)(),n=(0,l().YB)(),S=(0,i().VK)((()=>p().default.state.currentUserSettingsStore),[]),y=(0,m().r)(),b=(0,i().VK)((()=>(0,a().Tv)(null==y?void 0:y.getModel())/1e3),[y]),h=(0,r.useCallback)((()=>{S&&(u().createAndCommit({userAction:"ConfigureRetentionAnnouncement.handleClick",environment:t,canUndo:!0,perform:e=>{d().d2({transaction:e,userSettingsStore:S,data:{seen_trash_autodeletion_announcement:!0}})}}),g().default.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}))}),[S,t]),w=(0,r.useCallback)((()=>{S&&u().createAndCommit({userAction:"ConfigureRetentionAnnouncement.handleDismiss",environment:t,canUndo:!0,perform:e=>{d().d2({transaction:e,userSettingsStore:S,data:{seen_trash_autodeletion_announcement:!0}})}})}),[S,t]),I=new Date>new Date("2024-08-19")?v.postLaunchBody:v.body;return(0,f.jsx)(_().g,{messageKey:"configure_retention_sidebar",title:n.formatMessage(v.title),iconGroup:s,body:n.formatMessage(I,{duration:(0,c().uP)(b,n)}),buttons:[{text:n.formatMessage(v.button),onClick:h}],onDismiss:w})}},519563:(e,t,n)=>{n.d(t,{S:()=>i});var r=()=>n(142735),o=()=>n(876822);function i(){return(0,r().VK)((()=>{const{currentSpaceStore:e}=o().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},228772:(e,t,n)=>{n.d(t,{r:()=>i});var r=()=>n(142735),o=()=>n(876822);function i(){return(0,r().VK)((()=>o().default.state.currentSpaceStore),[])}},110372:(e,t,n)=>{n.d(t,{YF:()=>l,bl:()=>c,gF:()=>a,i6:()=>u,lZ:()=>s});var r=()=>n(954949),o=()=>n(594546),i=()=>n(749826);function a(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,o().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),i().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,o().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),i().default.logEvent("callout_click",t.callout_key)}function c(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,o().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),i().default.logEvent("callout_dismiss",t.callout_key)}function l(e,t){const{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:i,eligibility_timeouts:a,blocklist:s}=t;(0,o().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:i,eligibility_timeouts:a,blocklist:s}}})}function u(e,t){(0,o().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},500221:(e,t,n)=>{n.r(t),n.d(t,{getEligibleStaticMessages:()=>q,maybeShowMessagesImpl:()=>F,showStartupMessagesImpl:()=>T});n(670560),n(267602),n(653476),n(241792);var r=()=>n(730120),o=()=>n(843957),i=()=>n(954949),a=()=>n(839002),s=()=>n(696459),c=()=>n(824462),l=()=>n(876822),u=()=>n(524434),d=()=>n(518019),m=()=>n(749826),_=()=>n(897257),p=()=>n(706443),g=()=>n(803728),f=()=>n(110372),v=(n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),()=>n(575861)),S=()=>n(578292),y=()=>n(741633),b=()=>n(629719),h=()=>n(381348),w=()=>n(326966),I=()=>n(345918),k=()=>n(438665),C=()=>n(400324),P=()=>n(548812),A=()=>n(815277),U=()=>n(18281),x=()=>n(697623),D=()=>n(546464);function N(e){const{currentUserSettingsStore:t,minAccountAgeInDays:r}=e,o=(0,n(572623).e2)(t);return Number(o)>=r}function j(e){return"unsubscribed_admin"===e.state.type||"unsubscribed_member"===e.state.type}const E={dummy_modal:async e=>{const{environment:t}=e;return Promise.resolve(!t.device.isElectron&&m().default.checkGate({gateName:"can_see_callout_modal_test"}))},dummy_modal_2:async e=>{const{environment:t}=e;return Promise.resolve(!t.device.isElectron&&m().default.checkGate({gateName:"can_see_callout_modal_test"}))},omnimodal:async e=>{let{}=e;return Promise.resolve(!1)},ai_google_drive_universal_qna_announcement:async e=>Promise.resolve(!1),ai_jira_universal_qna_announcement:async e=>{const{environment:t,currentSpaceStore:n,mainEditorCurrentBlockStore:r,assistantFeatureGateStore:o,currentUserSettingsStore:i}=e,a=await(0,A().KQ)(t,{name:"ai_jira_connector",spaceId:n.getSpaceId(),userId:t.currentUser.id}),s=(n.getMemberCountFromPublicSpaceData()??1)>1;if(!(r.canRead()&&n.canAdmin()&&a&&s))return!1;if(!N({currentUserSettingsStore:i,minAccountAgeInDays:8}))return!1;if(!o.isJiraQnaEnabled()||!o.isAiEnabled())return!1;try{const e=await c().callApi({eventName:"getJiraAIConnectorAnnouncementEligibility",environment:t,data:{spaceId:n.getSpaceId()}});return"success"===e.type&&e.data.eligibility}catch{return!1}},ai_github_ai_connector_announcement:async e=>Promise.resolve(!1),ai_assistant_announcement:async e=>{const{currentUserSettingsStore:t,mainEditorCurrentBlockStore:n,assistantFeatureGateStore:r}=e,o=t.getSettings();if(!o)return!1;const i=void 0===(null==o?void 0:o.ai_assistant_onboarding_phase);return Promise.resolve(n.canRead()&&N({currentUserSettingsStore:t,minAccountAgeInDays:8})&&i&&r.canSeeAssistantFeaturePromotionalModal())},sidebar_upgrade_nudge:async e=>{const{currentUserSettingsStore:t,billingData:r,currentSpaceStore:o}=e,i=t.getSettings(),a=o.getMemberCountFromPublicSpaceData()??1,s=(0,n(843570).F)({billingData:r,memberCount:a});return Promise.resolve(!(null!=i&&i.dismissed_sidebar_upgrade_nudge||"none"!==s||(0,b().YK)(r)||1!==a||(0,I().Q9)(o)))},calendar_launch_prompt:async e=>{const{experimentStore:t,currentSpaceStore:o,currentUserSettingsStore:i,subscriptionDataStore:a}=e,s=i.getSettings(),c=null==s?void 0:s.notion_calendar_launch_modal_dismissed_at;if(void 0===c)return!1;if((0,n(909859).tE)())return!1;const l=r().ou.now().toMillis()-c;return Promise.resolve(!j(a)&&t.checkGate({gateName:"notion_calendar_launch_modal"})&&!(0,I().Dj)(o)&&void 0!==s&&"dismissed_modal"===s.notion_calendar_launch_modal_phase&&l>=2*w().A0)},ai_limit_nudge:async e=>{var t,n;const{environment:r,currentSpaceStore:o,currentUserSettingsStore:i}=e,a=i.getSettings();if(void 0===a)return!1;const s=o.getSpaceId(),c=await(0,D().$W)(r,{name:"ai_space_usage",spaceId:s,userId:r.currentUser.id,amount:"unknown"}),l=c.limit;if("unlimited"===l.total)return!1;const u=(await(0,D().$W)(r,{name:"ai_user_usage",spaceId:s,userId:r.currentUser.id,amount:"unknown"})).limit;if("unlimited"===u.total||u.current<u.total)return!1;const d=+l.current/l.total,m=d>=C().T?!(null===(t=a.addOnLimitNotifications)||void 0===t||!t.disableLimitNotificationInSidebar):!(null===(n=a.addOnLimitNotifications)||void 0===n||!n.disableWarningNotificationInSidebar),_=c.upsell;return"blocked"!==c.type&&void 0!==_&&!m&&d>=C().y},block_limit_nudge:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,o=n.state;if(!o)return!1;const i=await U().DI(t,r.getSpaceId(),o);return j(n)&&U().KB(o,t,r.getSpaceId(),i)},post_reverse_trial_sidebar:async e=>{const{environment:t,subscriptionDataStore:r,currentSpaceStore:o}=e;if(!j(r)||!o.canAdmin())return Promise.resolve(!1);const i=o.getSpaceId(),a=await c().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:i},headers:(0,y().Bb)({cellId:void 0,spaceId:i})});if("failed"===a.type)return Promise.resolve(!1);const s=a.data,l=(0,h().XU)(s,"trial"),u=l&&(0,n(851549).jQ)(l.offer.campaign);return Promise.resolve(u)},lic_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,o=r.getSpaceId();if(!j(n)||!U().GJ(n.state)||!o)return Promise.resolve(!1);const i=await(0,k().DV)(t,o,"sidebar_upsell");if(!i)return Promise.resolve(!1);const a=i.campaign;if("lic_25"!==a&&"lic_50"!==a)return Promise.resolve(!1);const s=(0,I().rn)(t,r);return s&&(0,k().n9)({environment:t,spaceName:s,offerCampaign:a}),Promise.resolve(!0)},new_year_2025_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,o=r.getSpaceId();if(!(U().GJ(n.state)&&j(n)&&o&&(0,P().oB)()))return Promise.resolve(!1);const i=await(0,k().ZF)(t,{spaceId:o,offerCampaign:"new_year_2025"});if(!i)return Promise.resolve(!1);return"new_year_2025"!==i.campaign?Promise.resolve(!1):Promise.resolve(!0)},resurrection_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,o=(0,P().a7)(),i=r.getSpaceId();if(!(j(n)&&o&&U().GJ&&i))return Promise.resolve(!1);const a=await(0,k().ZF)(t,{spaceId:i,offerCampaign:"resurrection_offer"});return a?Promise.resolve((0,h().K0)(a)):Promise.resolve(!1)},onboarding_reverse_trial_sidebar:async e=>{const{environment:t,currentSpaceStore:r}=e,o=await d().Z.awaitData(t,{spaceId:r.getSpaceId()}),i=(0,n(182946).Cf)(o),a=(0,b().PB)(o);if(!i||!r.canAdmin())return Promise.resolve(!1);const s=r.getSpaceId(),l=await c().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:s},headers:(0,y().Bb)({cellId:void 0,spaceId:s})});if("success"!==l.type)return Promise.resolve(!1);const u=(0,h().XU)(l.data,"trial");if(!u)return Promise.resolve(!1);const m=(0,h().b_)(u,a),_=(0,h().e)(u.offer).as("days"),p=m>Math.round(_/2);return Promise.resolve(p)},import_data_prompt:async e=>{var t;const{experimentStore:n,currentUserSettingsStore:r}=e;if(!(null===(t=r.getSettings())||void 0===t||null===(t=t.adoption_entry_points)||void 0===t||!t.import_sidebar_announcement))return Promise.resolve(!1);const o=n.getEligibleGroup({experimentId:"adoption_import_push",defaultGroup:"control"});return Promise.resolve("on"===o)},student_org_prompt:async e=>{var t,n;const{environment:r,subscriptionDataStore:o,currentUserSettingsStore:i}=e,a=o.state,s=o.state.subscriptionTier,l=void 0!==s&&["student","personal","personal_free","free"].includes(s),u=new Set(["student_club_monthly","student_club_yearly"]),d=(0,I().kO)(),m=U().GJ(a)&&(null==a||null===(t=a.customerData)||void 0===t?void 0:t.stripe)&&"plan"in a.customerData.stripe&&u.has(a.customerData.stripe.plan);if(void 0!==(null===(n=i.getSettings())||void 0===n?void 0:n.dismissed_sidebar_student_org_prompt)||!l||m||"multiplayer"===(null==d?void 0:d.collaborativeIntent))return!1;const _=await c().callApi({eventName:"isEmailEducation",environment:r,data:{validationType:"Domain"}});return"failed"!==_.type&&_.data.isEligible},notion_calendar_launch_promo:async e=>{const{environment:t,currentUserSettingsStore:n,mainEditorCurrentBlockStore:r,experimentStore:o,currentSpaceStore:i}=e,a=n.getSettings();if(!a)return!1;const s=a.notion_calendar_launch_modal_phase,c=t.device.isElectron?void 0===s:void 0===s||"connected_notion_calendar"===s;return Promise.resolve(r.canRead()&&o.checkGate({gateName:"notion_calendar_launch_modal"})&&!(0,I().Cx)(i)&&!(0,I().Dj)(i)&&c)},startup_sidebar_footer:async e=>Promise.resolve(!1),asana_post_import_tour:async e=>{var t,n;const{currentUserSettingsStore:r,mainEditorCurrentBlockStore:o}=e,i=o,a=(null==i?void 0:i.isCollectionView())&&(null===(t=i.getFormat())||void 0===t?void 0:t.is_asana_imported_project)&&!(null!==(n=r.getSettings())&&void 0!==n&&n.seen_asana_post_import_tour);return Promise.resolve(a)},configure_retention_sidebar:async e=>{var t;const{environment:n,currentSpaceStore:r,currentUserSettingsStore:o}=e,i=await(0,A().KQ)(n,{name:"configurable_retention",spaceId:r.getSpaceId(),userId:n.currentUser.id}),a=void 0===r.getSettings().delete_from_trash_delay_seconds&&void 0===r.getSettings().purge_delay_seconds,s=!(null!==(t=o.getSettings())&&void 0!==t&&t.seen_trash_autodeletion_announcement);return Promise.resolve(i&&r.canAdmin()&&a&&s)},desktop_download_sidebar:async e=>{var t,n,o;const{currentUserSettingsStore:i,environment:a}=e;if("web-desktop"!==a.device.deviceType)return!1;if(!!(null!==(t=i.getSettings())&&void 0!==t&&t.used_mac_app||null!==(n=i.getSettings())&&void 0!==n&&n.used_windows_app))return!1;const s=null===(o=i.getSettings())||void 0===o?void 0:o.signup_time;if(!s)return!1;const c=r().ou.now().toMillis()-s;return!(c>=7*w().A0)&&Promise.resolve(c<1*w().U6)},share_button_tooltip:async e=>{var t,n;const{currentUserSettingsStore:o,mainEditorCurrentBlockStore:i}=e,a=void 0!==(null===(t=o.getSettings())||void 0===t?void 0:t.seen_share_button_tooltip_at),s=null===(n=o.getSettings())||void 0===n?void 0:n.signup_time;if(!s)return!1;const c=r().ou.now().toMillis()-s;return Promise.resolve(!a&&!(null!=i&&i.isTypedCollectionViewBlock())&&c>=10*w().A0&&c<=30*w().A0)},open_in_calendar_tooltip:async e=>{const{currentSpaceStore:t,currentUserSettingsStore:n}=e,r=n.getSettings(),o=(0,I().XY)({env:"production",spaceStore:t});return Promise.resolve(!(o||null!=r&&r.seen_open_in_calendar_tooltip))},ai_google_drive_qna_notification_tooltip:async e=>{const{environment:t,assistantFeatureGateStore:n,currentSpaceStore:r,currentSpaceViewStore:o}=e,i=o.getSettings();if(!i||!n.isAiEnabled()||!n.canShowUniversalGoogleDriveSearchScope()||void 0!==i.ai_google_drive_qna_notification_seen_at)return Promise.resolve(!1);const a=await c().callApi({eventName:"getGoogleDriveRecallStatusForUser",environment:t,data:{spaceId:r.getSpaceId()}});return Promise.resolve("success"===a.type&&"enabled"===a.data.status)},ai_slack_qna_notification_tooltip:async e=>{const{environment:t,currentSpaceStore:n,currentSpaceViewStore:r,assistantFeatureGateStore:o}=e,i=null==r?void 0:r.getSettings(),a=n.getSpaceId();if(!o.isSlackQnaNotificationEnabled()||!o.isAiEnabled()||!i||void 0!==i.ai_slack_qna_notification_seen_at)return Promise.resolve(!1);const[s,l]=await Promise.all([c().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:a},headers:(0,y().Bb)({spaceId:a})}),c().callApi({eventName:"getSlackBulkIngestionStatus",environment:t,data:{spaceId:a},headers:(0,y().Bb)({spaceId:a})})]);return Promise.resolve("success"===s.type&&s.data.connectedApps.includes("slack-admin")&&"success"===l.type&&!l.data.inProgress&&l.data.isSyncCompleted)},ai_slack_qna_embed_tooltip:async e=>{var t;const{environment:n,currentSpaceStore:r,mainEditorCurrentBlockStore:o,assistantFeatureGateStore:i,currentUserSettingsStore:a,experimentStore:s}=e;if(null!==(t=a.getSettings())&&void 0!==t&&t.seen_slack_embed_ai_connector_tooltip)return!1;const c=await(0,A().KQ)(n,{name:"ai_slack_qna",spaceId:r.id,userId:n.currentUser.id}),l=(r.getMemberCountFromPublicSpaceData()??1)>1;return!!(o.canRead()&&c&&l)&&(!!N({currentUserSettingsStore:a,minAccountAgeInDays:8})&&(!(!s.checkGate({gateName:"enable_slack_embed_tooltips_actual"})||!i.isAiEnabled())&&Promise.resolve(!0)))},ai_sales_assisted_notification_tooltip:async e=>{var t;const{assistantFeatureGateStore:r,currentUserSettingsStore:o,currentSpaceStore:i,environment:a,subscriptionDataStore:s}=e,c=null==o?void 0:o.getSettings(),l=(0,n(559155).$_)(a,i.id),u="tooltip"!==(null==c?void 0:c.ai_assistant_onboarding_phase)||void 0!==(null==c?void 0:c.ai_assistant_onboarding_phase_last_set_at)&&(0,v().O5)(c.ai_assistant_onboarding_phase_last_set_at)<1,d=(0,n(255393).de)((null===(t=s.state)||void 0===t?void 0:t.addOns)??[]);return Promise.resolve(r.showAssistantNotionAiCopy()&&r.isAiEnabled()&&l&&void 0===c.ai_sales_assisted_extra_notification_seen_at&&!u&&d)},ai_assistant_origin_element_tooltip:async e=>{const{environment:t,currentUserSettingsStore:r,mainEditorCurrentBlockStore:o,assistantFeatureGateStore:i}=e;return Promise.resolve(!n(718959).tu.state&&o.canRead()&&i.isQnATooltipsVisible(t.device,r))},ai_assistant_reminder_tooltip:async e=>Promise.resolve(!1),language_switch_prompt:async e=>{var t,n;const{currentUserSettingsStore:r}=e,o=(null==r||null===(t=r.getSettings())||void 0===t?void 0:t.preferred_locale)||S().al,i=(null==r||null===(n=r.getSettings())||void 0===n?void 0:n.language_switching_prompt_dismissals)||[],a=!!(0,S().RH)(o,i);return Promise.resolve(a)},forms_share_form_tooltip:async e=>{var t;const{currentUserSettingsStore:n}=e,r=Boolean(null===(t=n.getSettings())||void 0===t?void 0:t.seen_forms_share_form_tooltip);return Promise.resolve(!r)},contact_sales_promo_sidebar_v2:async e=>{var t;const{environment:r,currentSpaceStore:o,subscriptionDataStore:i,currentUserSettingsStore:a,experimentStore:s}=e;let c=!1;try{c=await(0,n(444297).D)(r)}catch(_){}const l=(0,x().QM)()||(0,x().eR)()||(0,x().NG)(),u=U().GJ(i.state),d=i.state?await U().DI(r,o.pointer.spaceId,i.state):1,m=((null==a||null===(t=a.getSettings())||void 0===t?void 0:t.preferred_locale)||S().al)===S().al;return Promise.resolve(u&&c&&l&&d>5&&m&&Boolean("on"===s.getEligibleGroup({experimentId:"contact_sales_promo_v2",defaultGroup:"control"})))},mwn_feature_modal:async e=>{const{experimentStore:t,currentUserSettingsStore:n,environment:r}=e,o=null==n?void 0:n.getSettings(),i=Boolean(null==o?void 0:o.mwn_feature_modal_dismissed_at_millis),a=r.RouterStore.state.route,s=a&&"gallery"===a.name;return Promise.resolve(!i&&t.checkGate({gateName:"mwn_feature_modal"})&&!s)},customize_slug_tooltip:async e=>{const{currentSpaceStore:t}=e,n=(0,I().j9)(t);return Promise.resolve(n)},collection_add_item_button_tooltip:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())},faces_xsell_sidebar:async e=>{var t;const{experimentStore:n,currentUserSettingsStore:r}=e,o=N({currentUserSettingsStore:r,minAccountAgeInDays:8}),i=null==r||null===(t=r.getSettings())||void 0===t?void 0:t.first_seen_faces_xsell_at,a=i&&(0,v().O5)(i)<7;return Promise.resolve(o&&(n.checkGate({gateName:"faces_xsell_sidebar"})||a))},student_offer_jan_2025_sidebar:async e=>{const{environment:t,experimentStore:n,currentSpaceStore:r}=e,o=(0,I().kO)(),i=r.getMemberCountFromPublicSpaceData()??1,a="singleplayer"===o.collaborativeIntent||1===i;if(!["personal","school"].includes(o.intent??"")||!a)return!1;const s=await c().callApi({eventName:"isEmailEducation",environment:t,data:{validationType:"Domain"}});return"failed"!==s.type&&(!!n.checkGate({gateName:"student_offer_jan_2025_sidebar"})&&s.data.isEligible)},workflow_template_installation:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())},organization_onboarding_modal:async e=>{const{environment:t,currentSpaceStore:r,experimentStore:o}=e;if(!o.checkGate({gateName:"organization_console_ga_enabled"}))return!1;const i=(0,n(122792).$U)(r.getSubscriptionTier()),a=r.isReady()&&r.canAdmin();if(!i||!a)return!1;const s=await c().callApi({eventName:"getOrganizationOnboardingInfo",environment:t,data:{spaceId:r.getSpaceId()}});if("success"===s.type){const e=s.data.result.onboardingStatus;return"ineligible"!==e&&"completed"!==e}return!1}};var B=()=>n(354811);const G=5e3,R=3e4;async function M(e){const t={environment:Promise.resolve(e),currentUserSettingsStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentUserSettingsStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentUserSettingsStore)),currentSpaceStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceStore)),mainEditorCurrentBlockStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.mainEditorCurrentBlockStore)),currentSpaceViewStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceViewStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceViewStore)),assistantFeatureGateStore:u().KR.waitUntil((()=>u().KR.getIsInitialized())).then((()=>u().KR)),subscriptionDataStore:_().subscriptionDataStoreInstance.waitUntilLoaded().then((()=>_().subscriptionDataStoreInstance)),experimentStore:m().default.waitUntilStatsigReady().then((()=>m().default)),billingData:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceStore)).then((t=>d().Z.awaitData(e,{spaceId:t.getSpaceId()})))},n={};return Promise.all((0,s().Yd)(t).map((e=>async function(e,t,n){const r=await(0,a().OI)(R,n);return r.timeout?Promise.reject(t):(e[t]=r.result,Promise.resolve(void 0))}(n,e,t[e])))).then((()=>({requiredArgs:n,timeoutKey:void 0})),(e=>({timeoutKey:e,requiredArgs:void 0})))}async function q(e,t){const n=r().ou.now().toMillis(),{requiredArgs:o,timeoutKey:i}=await M(e),s=r().ou.now().toMillis()-n;if(!o)return{eligibleKeys:[],requiredArgTimeout:i,requiredArgsRunDuration:s};const{candidates:c,timeouts:l}=await async function(e,t){const n=[],r=[];for(const o of t){const{timeout:t,result:i}=await(0,a().OI)(G,E[o](e));t?n.push(o):i&&r.push(o)}return{candidates:r,timeouts:n}}(o,t);return{eligibleKeys:c,eligibilityTimeouts:l,requiredArgsRunDuration:s}}async function F(e,t){await async function(){return new Promise((e=>{O?e():V.push(e)}))}();const{eligibleKeys:n,eligibilityTimeouts:r,requiredArgsRunDuration:o,requiredArgTimeout:i}=await q(e,t);if(i)return{shown:[],requiredArgTimeout:i,requiredArgsRunDuration:o};const a=K(n),s=[];for(const c of a){const t={id:"",key:c,type:"static",props:{}};g().PV(e,t).success&&s.push(c)}return{shown:s,eligibilityTimeouts:r,requiredArgsRunDuration:o}}async function T(e){const t=i().p.filter((e=>o().xm[e].show_on_startup));await m().default.waitUntilStatsigReady();const{eligibleKeys:n,eligibilityTimeouts:r,requiredArgTimeout:a,requiredArgsRunDuration:s}=await q(e,t);if(a)return void f().YF(e,{eligible_callouts:[],required_arg_timeout:a,required_args_run_duration:s,eligibility_timeouts:[]});let l=K(n);if(m().default.checkGate({gateName:"callouts_omnimodal"})){const e=l.filter((e=>"Modal"===(0,i().pU)(e)&&Boolean((0,B().G)(e))));e.length>1&&(p().Z.setConfig("omnimodal",{callouts:e}),l=["omnimodal",...l.filter((e=>"Modal"!==(0,i().pU)(e)))])}const u=[];for(const o of n)u.push({id:"",key:o,type:"static",props:{}});if(m().default.checkGate({gateName:"callout_show_dynamic_messages"})){const t=await async function(e){const t=await c().callApi({eventName:"getUnreadInAppMessagesForUser",environment:e,data:{}});if("failed"===t.type)return[];return t.data.messages}(e);for(const e of t)p().Z.setConfig(e.config.key,{message:e}),u.push(e.config)}const d=[];for(const o of u){g().PV(e,o).success&&d.push(o.key)}const _=m().default.getConfigKey("callout_config","callout_blocklist");f().YF(e,{eligible_callouts:d,required_arg_timeout:null,required_args_run_duration:s,eligibility_timeouts:r??[],blocklist:_}),function(){O=!0;for(const e of V)e()}()}function K(e){const t=e.filter((e=>"Modal"===(0,i().pU)(e))),n=e.filter((e=>"Modal"!==(0,i().pU)(e)));return t.sort(((e,t)=>(0,i().fS)(t)-(0,i().fS)(e))),n.sort(((e,t)=>(0,i().DE)(e)-(0,i().DE)(t))),[...t,...n]}let O=!1;const V=[]},354811:(e,t,n)=>{n.d(t,{G:()=>i,O:()=>r});function r(e,t){t}const o={dummy_modal:{title:{id:"announcementDigest.dummy_modal.title",defaultMessage:"Dummy Modal",description:"Title for the dummy modal announcement"},caption:{id:"announcementDigest.dummy_modal.caption",defaultMessage:"This is a dummy description of an announcement. Hi.",description:"Caption for the dummy modal announcement"},callToAction:{id:"announcementDigest.dummy_modal.callToAction",defaultMessage:"Do Nothing",description:"Button for the dummy modal announcement that does nothing"},imageUrl:n(714230).Z.images.sites.sitesLaunchModalPng},dummy_modal_2:void 0,ai_assistant_announcement:void 0,ai_google_drive_universal_qna_announcement:void 0,ai_github_ai_connector_announcement:void 0,ai_jira_universal_qna_announcement:void 0,notion_calendar_launch_promo:void 0,omnimodal:void 0,mwn_feature_modal:void 0,organization_onboarding_modal:void 0};function i(e){return o[e]}},254264:(e,t,n)=>{n.d(t,{N:()=>u});n(670560);var r=n(667294),o=()=>n(219727),i=()=>n(930494),a=()=>n(803728),s=()=>n(110372),c=()=>n(308361),l=n(785893);function u(e){const{message:t,buttons:n}=e,u=(0,o().O7)();(0,r.useEffect)((()=>{s().gF(u,{callout_key:t.key,placement_key:(0,i().SI)(t)})}),[u,t]);const d=(0,r.useCallback)((e=>{s().lZ(u,{callout_key:t.key,placement_key:(0,i().SI)(t),click_type:"primary_cta"}),e&&e()}),[u,t]),m=(0,r.useCallback)((()=>{s().bl(u,{callout_key:t.key,placement_key:(0,i().SI)(t),dismiss_type:"sidebar_dismiss"}),a().pl(u,t),e.onDismiss&&e.onDismiss()}),[u,t,e]);let _;if(n){_=[];for(const e of n)_.push({...e,onClick:()=>{d(e.onClick)}})}return(0,l.jsx)(c().lE,{children:(0,l.jsx)(c().Io,{...e,buttons:_,onDismiss:m})})}},308361:(e,t,n)=>{n.d(t,{Io:()=>f,lE:()=>g});n(670560),n(267602),n(30005);var r=n(667294),o=()=>n(846550),i=()=>n(981219),a=()=>n(696459),s=()=>n(212493),c=()=>n(154186),l=()=>n(603692),u=()=>n(661641),d=()=>n(777346),m=n(785893);const _=(0,r.createContext)(void 0);_.displayName="AnimationDismissContext";const p=300;function g(e){const{children:t}=e,[n,i]=(0,r.useState)(100),a=(0,o().yK)((()=>({card:{marginBottom:`-${n}%`,transitionProperty:"margin-bottom",transitionDuration:`${p}ms`,transitionTimingFunction:"ease"}})),[n]);(0,r.useEffect)((()=>{i(0)}),[]);const s=(0,r.useCallback)((e=>{i(100),setTimeout(e,p)}),[]);return(0,m.jsx)(_.Provider,{value:s,children:(0,m.jsx)("div",{style:a.card,children:t})})}function f(e){const{title:t,body:n,buttons:c,imageUrl:p,imageUrlHeight:g,onDismiss:f,iconGroup:S,iconColor:y}=e,b=(0,o().yK)((e=>({container:{backgroundColor:"transparent",margin:8,display:"flex"},card:{borderRadius:8,border:`1px solid ${"dark"===e.mode?e.stroke.secondary:"transparent"}`,boxShadow:e.shadowSM,position:"relative",padding:8,backgroundColor:e.surface.wash,WebkitBackdropFilter:"blur(30px)",backdropFilter:"blur(30px)"},content:{paddingTop:4},closeButton:{position:"absolute",top:8,right:8,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center"},image:{height:g??56,alignSelf:"start",maxWidth:"100%",marginLeft:4},iconWrapper:{width:24,height:24,display:"flex",justifyContent:"center",alignItems:"center"}})),[g]),h=(0,r.useContext)(_),w=(0,r.useCallback)((()=>{h?h((()=>null==f?void 0:f())):null==f||f()}),[f,h]),I=[];let k,C,P;return c&&(0,a().Of)(c)&&c.forEach(((e,t)=>I.push((0,m.jsx)(v,{...e},t)))),f&&(k=(0,m.jsx)(d().Z,{style:b.closeButton,onClick:w,children:(0,m.jsx)(l().y,{iconGroup:i().U,variantName:"mini",colorName:"secondary"})})),p&&(C=(0,m.jsx)("img",{src:p,style:b.image})),S&&(P=(0,m.jsx)("span",{style:b.iconWrapper,children:(0,m.jsx)(l().y,{iconGroup:S,variantName:"default",colorName:y??"primary"})})),(0,m.jsx)("div",{style:b.container,children:(0,m.jsxs)(s().jX,{direction:"column",style:b.card,gap:8,children:[C,(0,m.jsxs)(s().jX,{direction:"row",children:[P,(0,m.jsxs)(s().jX,{gap:4,style:b.content,children:[(0,m.jsxs)(s().jX,{gap:4,padding:`0px ${f?32:8}px 0px 8px`,children:[(0,m.jsx)(u().q,{styleName:"UISmall-12px/Semibold",colorName:"primary",children:t}),(0,m.jsx)(u().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n})]}),(0,m.jsx)("div",{children:I})]})]}),k]})})}function v(e){const t=Boolean(e.leftIcon)||Boolean(e.leftIconGroup),n=(0,o().yK)((()=>({button:{paddingTop:4,paddingRight:8,paddingBottom:4,paddingLeft:t?6:8,borderRadius:6},buttonIcon:{width:14}})),[t]);let r,i;return e.leftIcon?r=(0,m.jsx)("div",{style:n.buttonIcon,children:e.leftIcon()}):e.leftIconGroup&&(r=(0,m.jsx)(l().y,{iconGroup:e.leftIconGroup,variantName:"small"})),e.rightIcon?i=(0,m.jsx)("div",{style:n.buttonIcon,children:e.rightIcon()}):e.rightIconGroup&&(i=(0,m.jsx)(l().y,{iconGroup:e.rightIconGroup,variantName:"small"})),(0,m.jsx)(s().jX,{direction:"row",children:(0,m.jsx)(c().Z,{style:n.button,onClick:e.onClick,children:(0,m.jsxs)(s().jX,{direction:"row",align:"center-left",gap:t?4:6,width:"hug",children:[r,(0,m.jsx)(u().q,{styleName:"UISmall-12px/Semibold",colorName:"primary",children:e.text}),i]})})})}},907337:(e,t,n)=>{n.d(t,{g:()=>a});n(667294);var r=()=>n(254264),o=()=>n(308361),i=n(785893);function a(e){const{messageKey:t}=e,n={id:"",key:t,type:"static",props:{}};return(0,i.jsx)(o().lE,{children:(0,i.jsx)(r().N,{...e,message:n})})}},438665:(e,t,n)=>{n.d(t,{zL:()=>m,lB:()=>_,ZF:()=>d,DV:()=>f,an:()=>p,n9:()=>v,WV:()=>g});var r=()=>n(799891),o=()=>n(741633);const i={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var a=()=>n(792409),s=()=>n(824462),c=()=>n(308186),l=()=>n(594546),u=()=>n(876822);async function d(e,t){var n;const{spaceId:r,offerCampaign:o}=t;if(!r||!o||null===(n=u().default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const i=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:r,offerCampaign:o}});return"failed"!==i.type&&"offer"in i.data&&i.data.offer?i.data.offer:void 0}async function m(e){const{environment:t,spaceId:n,offerCampaign:r,entrypoint:o}=e,i=await s().callApi({eventName:"applyCustomerOffer",environment:t,data:{spaceId:n,offerCampaign:r,entrypoint:o??"unknown"}});if("failed"!==i.type)return i;c().x2(i)}async function _(e,t){const n=await s().callApi({eventName:"applyCustomerOffer",environment:e,data:{...t}});if("failed"!==n.type)return n;c().x2(n)}async function p(e){const{environment:t,spaceId:n,offerCampaign:r}=e;return void 0!==await d(t,{spaceId:n,offerCampaign:r})}async function g(e){var t;const{environment:n,hasReceived:i,offerType:c,newPlan:l,coupon:d}=e,m=null===(t=u().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId();if(!m)return;const _=await s().callApi({eventName:"updateCustomerOffer",environment:n,data:{spaceId:m,hasReceived:i,offerType:c,newPlan:l,coupon:d},headers:(0,o().Bb)({cellId:void 0,spaceId:m})});"failed"===_.type&&r().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,a().Ui)(_.error)})}async function f(e,t,n){const r=function(e){if(i.hasOwnProperty(e))return i[e]}(n);if(r)for(const o of r){const n=await d(e,{spaceId:t,offerCampaign:o});if((null==n?void 0:n.campaign)===o)return n}}function v(e){let{environment:t,spaceName:n,offerCampaign:r}=e;if(n)switch(r){case"lic_25":case"lic_50":(0,l().lu)(t,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:n,lic_25:"lic_25"===r,lic_50:"lic_50"===r});break;case"resurrection_offer":(0,l().lu)(t,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:n});break;default:return}}},400324:(e,t,n)=>{n.d(t,{T:()=>o,y:()=>r});const r=.7,o=1},663773:(e,t,n)=>{n.d(t,{Cv:()=>c,aJ:()=>l,kw:()=>u,zX:()=>d});var r=()=>n(219727),o=()=>n(142735),i=()=>n(799891),a=()=>n(629719),s=()=>n(515323);function c(e){let{spaceId:t}=e;const n=(0,r().O7)();return(0,o().VK)((()=>{if(t)return s().U.getData(n,{spaceId:t})}),[n,t])}function l(e){if("admin"===(null==e?void 0:e.type))return e}function u(e,t,n){if(!t)return 0;const r=(0,a().nW)({spaceId:e,logFunction:i().log.bind(i()),subscriptionState:t});return r?Math.max(r,n):0}function d(e){var t;const n=null===(t=(0,a().a7)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const r=n.unitAmount,o="year"===n.billingInterval?12:1;return{amount:r.amount/o,currencyCode:r.currencyCode}}},843570:(e,t,n)=>{n.d(t,{F:()=>s,T:()=>c});var r=()=>n(629719),o=()=>n(122792),i=()=>n(519563),a=()=>n(663773);function s(e){const{billingData:t,memberCount:n}=e,i=(0,r().wO)(null==t?void 0:t.subscription),a=(0,o().QM)(i),s=(0,o().Aw)(i);return a&&n<5?"invite":a?"upgrade":n<5&&!s?"invite":"none"}function c(e){return s({billingData:(0,a().Cv)({spaceId:e}),memberCount:(0,i().S)()??1})}},595976:(e,t,n)=>{n.d(t,{p:()=>c});var r=()=>n(219727),o=()=>n(142735),i=()=>n(616433),a=()=>n(515323),s=()=>n(663773);function c(e){let{spaceId:t}=e;const n=(0,r().O7)(),c=(0,i().J)();return(0,o().VK)((()=>{if(!t||!c)return;const e=a().U.getData(n,{spaceId:t});return(0,s().aJ)(e)}),[n,t,c],{useDeepEqual:!0})}},981219:(e,t,n)=>{n.d(t,{U:()=>r});const r=(0,n(827282).CZ)("xmark",{default:{loader:()=>n.e(71448).then(n.bind(n,471448))},small:{loader:()=>n.e(24056).then(n.bind(n,624056))},mini:{loader:()=>n.e(84500).then(n.bind(n,384500))},large:{loader:()=>n.e(71533).then(n.bind(n,71533))}})},851549:(e,t,n)=>{n.d(t,{jQ:()=>i});var r=()=>n(979881);const o=["trial_from_perf_marketing","onboarding_reverse_trial","mp_reverse_trial","admin_trial"];function i(e){return o.includes(e)||r().W_.includes(e)}}}]);