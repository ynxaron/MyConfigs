"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11770,39447],{820185:(e,t,o)=>{o.d(t,{r:()=>B,z:()=>O});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928);var n=()=>o(492788),r=()=>o(659089),a=()=>o(552221),i=()=>o(226413),l=()=>o(532850),s=()=>o(803021),c=()=>o(646574),d=()=>o(874459),u=()=>o(177634),p=()=>o(998411),g=()=>o(996106),m=()=>o(955620),f=()=>o(463212),y=()=>o(513670),h=()=>o(696459),v=()=>o(326966),b=()=>o(970105),S=()=>o(932641),C=()=>o(967092),x=()=>o(205228),M=()=>o(338530),k=()=>o(141735),_=()=>o(589024),w=()=>o(641702),P=()=>o(615676),I=()=>o(185697),T=()=>o(527278),R=()=>o(749826),F=()=>o(250303),V=()=>o(909240),Z=()=>o(959137),j=()=>o(844085),D=()=>o(269299);async function B(e){const{environment:t,theme:o,store:n,schema:i,property:c,collectionContextStore:g}=e,y=t.device,b=i[c],S=await Z().F.clipboardActions.load();if(b){switch(b.type){case"formula":{const e=await k().F.formulas.load();"v2"===b.version?function(e){const{clipboardActions:t,environment:o,store:n,propertySchema:r,property:a,formulasModule:i}=e,l=n.getModel();if(!r.formula2||!l)return;const s=T().Z.getIntl(),c=(0,p().r)(),d=i.evaluateCollectionFormula2({block:l,property:a,formulaCode:r.formula2.code,getRecordModel:n.getRecordModel,intl:s,userTimeZone:c,depth:0,visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:R().default,collectionFeatureGates:(0,P().W)()});if(!d)return;const g=(0,u().j4)(d),m=(0,w().Xh)(g,n);t.copyString({stringValue:m,environment:o,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}({clipboardActions:S,environment:t,store:n,propertySchema:b,property:c,formulasModule:e}):function(e){var t;const{clipboardActions:o,environment:n,store:r,schema:a,property:i,propertySchema:l,formulasModule:c}=e,d=r.getValue();if(!d)return;const u=c.evaluateFormulaProperty({property:i,schema:a,block:d,getRecordValue:r.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().r)(),depth:0,intl:T().Z.getIntl(),resultCache:new Map,regExpCache:new Map,visitedProperties:new Set,experimentService:R().default,collectionFeatureGates:(0,P().W)()}}),g=null==l||null===(t=l.formula)||void 0===t?void 0:t.result_type;switch(g){case"number":v().hj(u)&&N({clipboardActions:o,value:u,propertySchema:l,environment:n});break;case"date":u&&s().U3(u)&&A({clipboardActions:o,date:u,environment:n});break;case"text":u&&o.copyString({stringValue:u.toString(),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,h().t1)(g)}}({clipboardActions:S,environment:t,store:n,schema:i,property:c,propertySchema:b,formulasModule:e});break}case"person":{const e=n.getPropertyValue(c);L({actors:l().DW({textValue:e,propertySchema:b,blockCreatorPointer:n.getCreatedByPointer()}),clipboardActions:S,environment:t,store:n});break}case"created_by":{const e=n.getCreatedByPointer();e&&L({actors:[e],clipboardActions:S,environment:t,store:n});break}case"last_edited_by":{const e=n.getLastEditedByPointer();e&&L({actors:[e],clipboardActions:S,environment:t,store:n});break}case"number":N({clipboardActions:S,environment:t,propertySchema:b,value:l().VY(n.getPropertyValue(c))});break;case"text":{const e=n.getPropertyValue(c);if(!e)return;const r=f().hW({textValue:{value:e,spaceId:n.getSpaceId()},getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,userTimeZone:(0,p().r)(),isClient:!0,isAndroid:y.isAndroid,isSafariOrIOS:y.isSafari||y.isIOS,isWindows:y.isWindows,showEmojiInline:y.isWindows,emojiType:"raw",theme:o,baseUrl:x().default.domainBaseUrl,publicDomainName:x().default.publicDomainName,currentUserId:t.currentUser.id,intl:T().Z.getIntl(),katex:void 0,getPublicBaseUrlForPage:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:M().Z.state,isMobileNative:y.isMobileNative,isMobileNativeExternalLinkFixEnabled:R().default.checkGate({gateName:"mobile_native_external_link_fix"})}),a=(0,w().Xh)(n.getPropertyValue(c),n);S.copyHtml({stringValue:a,htmlValue:r,environment:t,copiedMessage:S.clipboardMessages.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=m().Jcv(n.getPropertyValue(c));S.copyString({stringValue:e,environment:t,copiedMessage:S.clipboardMessages.copiedPropertyToClipboard});break}case"date":{const e=n.getPropertyValue(c),o=(0,a().G)(e);o&&A({clipboardActions:S,date:o,environment:t,dateFormat:b.date_format,timeFormat:b.time_format});break}case"last_edited_time":case"created_time":{const e=n.getKeyStore(b.type).getValue();if(e){A({clipboardActions:S,date:d().CQ(e,(0,p().r)()),environment:t,dateFormat:b.date_format,timeFormat:b.time_format})}break}case"auto_increment_id":{const e=n.getPropertyValue(c);!function(e){const{clipboardActions:t,value:o,environment:n,collectionContextStore:a}=e;if(o&&a){var i;const e=(null===(i=a.collectionStore())||void 0===i||null===(i=i.getRecordKeyStore())||void 0===i?void 0:i.getRecordKey())??"";t.copyString({stringValue:(0,r().wf)(e,o),environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}({clipboardActions:S,value:l().ah(e),environment:t,collectionContextStore:g});break}}F().S$(t,g,{block_id:n.id,property:c,property_type:b.type})}}function L(e){const{actors:t,clipboardActions:o,environment:n,store:r}=e,a=l().C1(t);o.copyString({stringValue:(0,w().Xh)(a,r),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard})}function N(e){const{clipboardActions:t,value:o,propertySchema:n,environment:r}=e;if(!y().i2(o)&&!v().z4(o)){const e=(null==n?void 0:n.number_format)||g().dk,a=g().uf(o,e,T().Z.getIntl());t.copyString({stringValue:a,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}function A(e){const{clipboardActions:t,date:o,environment:n,dateFormat:r,timeFormat:a}=e,i=(0,c().ZV)({value:o,date_format:r??s().sF,time_format:a??s().c_,allowRelativeDates:!0,intl:T().Z.getIntl()});t.copyString({stringValue:i,environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}async function O(e){const{element:t,rect:o,environment:r,onClick:a,store:s,additionalStores:c=[],property:d,format:u,collectionStore:p,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:f,collectionSchema:y,mouseStore:h,setMouseEntered:v,statusSetCheckbox:x,preventClearSelection:M,collectionsBulkActionsToolbarStore:k,scrollerContext:w,sizing:P,formQuestionStore:R,onClose:Z}=e,{device:B,WindowSizeStore:L}=r,N=f&&_().aJ({store:s,additionalStores:c,collectionContextStore:f});let A=p.getSchema();N&&(A=f.normalizedSchemaStore.state),y&&(A=y);const O=(0,I().A)({collectionStore:p,collectionContextStore:f,property:d}),E=A[O],U=null==E?void 0:E.type;if(!U)return;if(_().g0({property:d,collectionStore:p}))return;const H=s.getPropertyStore(O);if("checkbox"===U)H&&D().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{V().vO({stores:[s,...c],property:O,transaction:e})}}),f&&F().rv({environment:r,collectionContextStore:f,block_id:H.id,property:O,property_type:U,from:_().Sy(u),isFromBulkActionsToolbar:Boolean(k)});else if("status"===U&&"status"===E.type&&x){const e=s.getPropertyValue(O),t=l().rO(e,E,T().Z.getIntl());H&&D().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{const o=E.groups??[],n=!0===t?o[0]:o[o.length-1],a=(E.options??[]).find((e=>{var t;return e.id===(null==n||null===(t=n.optionIds)||void 0===t?void 0:t[0])}));if(a)for(const t of[s,...c])b().sO({environment:r,store:t.getPropertyStore(O),value:l().Is(a.value),transaction:e})}})}else{-1===i().uk.indexOf(U)&&(null==v||v(!1),h&&h.setState({...h.state,mouseEntered:!1}),t&&w&&B.isMobileNative&&S().mZ[U]===C().kQ.Popup&&(j().bx({element:t,environment:r,scrollerContext:w,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:L.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await n().default.afterNextFlush()),V().bA({environment:r,blockPropertyValueOverlayStore:g,store:s,additionalStores:c,property:O,format:u,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:f,collectionSchema:y,preventClearSelection:M,collectionsBulkActionsToolbarStore:k,sizing:P,formQuestionStore:R,onClose:Z}),f&&F().zF({environment:r,collectionContextStore:f,property:O,property_type:U,from:_().Sy(u),isFromBulkActionsToolbar:Boolean(k)}))}a&&a()}},971928:(e,t,o)=>{o.d(t,{P3:()=>u,n6:()=>p,yW:()=>m});o(670560),o(267602),o(470928);var n=()=>o(226413),r=()=>o(543172),a=()=>o(187920),i=()=>o(887430),l=()=>o(527278),s=()=>o(826955),c=()=>o(308186),d=()=>o(269299);function u(e){const{modification:t,property:o,propertySchema:i,options:u,groupIndex:p,environment:m,collectionStore:f}=e;let y,h;if("keyedObjectListRemove"===t.type)y={pointer:f.pointer,command:"keyedObjectListRemove",path:["schema",o,"options"],args:{remove:{id:t.id}}},void 0!==p&&"status"===i.type&&(h={pointer:f.pointer,command:"listRemove",path:["schema",o,"groups",p,"optionIds"],args:{id:t.id}});else{if(u){if(u.find((e=>e.value===t.newValue)))return void c().UW(l().Z.formatMessage(g.optionAlreadyExists))}if("keyedObjectListUpdate"===t.type)y={pointer:f.pointer,command:"keyedObjectListUpdate",path:["schema",o,"options"],args:{value:{...t.option,value:t.newValue}}};else{const e=i.options||[];let a=(0,n().TL)(e);if("status"===i.type&&void 0!==p){var v;const e=null===(v=i.groups)||void 0===v||null===(v=v[p])||void 0===v?void 0:v.color;e&&(a=e)}const l={id:(0,r().ZP)(),value:t.newValue,color:a};if("autoSortInsert"===t.type){if(!(0,n().cu)(i))return;y=(0,n().Ch)({collectionId:f.id,property:o,propertySchema:i,newOption:l,isAscending:"alphabetical"===i.auto_sort_options})}else"keyedObjectListBefore"===t.type?(y={pointer:f.pointer,command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:l,before:t.beforeOption}},void 0!==p&&"status"===i.type&&(h={pointer:f.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}})):"keyedObjectListAfter"===t.type&&(y={pointer:f.pointer,command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:l,after:t.afterOption}},void 0!==p&&"status"===i.type&&(h={pointer:f.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}}))}}(0,a().H)({environment:m,collectionStore:f,performTransaction:e=>{d().applyOperation({store:f,operation:y,transaction:e}),h&&d().applyOperation({store:(0,s().Kv)(f,h.pointer),operation:h,transaction:e})}})}function p(e){const{newValues:t,property:o,schema:r,collectionStore:l,environment:c}=e,u=r[o];let p;if("status"===(null==u?void 0:u.type)){p=[[]];for(const e of t)e.startsWith("group-header-")?p.push([]):p[p.length-1].push(e)}else p=t;const g=(0,i().YL)({newOptions:p,collectionId:l.id,property:o,schema:r});if(g){if(u&&(0,n().cu)(u)){"manual"!==(u.auto_sort_options||"manual")&&g.push({pointer:l.pointer,command:"update",path:["schema",o],args:{auto_sort_options:"manual"}})}(0,a().H)({environment:c,collectionStore:l,performTransaction:e=>{for(const t of g)d().applyOperation({store:(0,s().Kv)(l,t.pointer),operation:t,transaction:e})}})}}const g=(0,o(788860).vU)({deleteModalPrompt:{id:"database.selectPropertyOptionEditMenu.deleteModal.prompt",defaultMessage:"Are you sure you want to delete this option?"},acceptButtonLabel:{id:"database.selectPropertyOptionEditMenu.deleteModal.confirmButton",defaultMessage:"Delete"},preventDefaultStatusOptionDelete:{defaultMessage:"Cannot delete default option.",id:"database.editProperty.errorDialog.forbidDeleteDefaultOption.message"},optionAlreadyExists:{defaultMessage:"Option already exists.",id:"database.optionExistsAlreadyError.message"}});function m(e){const{option:t,propertySchema:o,property:r,collectionStore:a,statusGroup:i,environment:s}=e;"status"!==o.type||t.value!==o.defaultOption?c().vC({showCancel:!0,keepFocus:!1,message:l().Z.formatMessage(g.deleteModalPrompt),items:[{label:l().Z.formatMessage(g.acceptButtonLabel),color:"red",onAccept:()=>{if((0,n().cu)(o)||"status"===o.type)if("status"===o.type&&i){const e=(o.groups??[]).findIndex((e=>e.id===i.id));u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a,groupIndex:e})}else u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a})}}]}):c().UW(l().Z.formatMessage(g.preventDefaultStatusOptionDelete))}},463058:(e,t,o)=>{o.d(t,{O:()=>m,Q:()=>f});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928);var n=()=>o(506347),r=()=>o(226413),a=()=>o(532850),i=()=>o(135857),l=()=>o(663132),s=()=>o(876822),c=()=>o(749826),d=()=>o(482162),u=()=>o(826955),p=()=>o(491927),g=()=>o(497065);function m(e){let{relationPointers:t,relatedPageStore:o,environment:r,from:a,peekMode:c,openInNew:m}=e;const{mainEditorCurrentBlockStore:f}=s().default.state;if(!f)return;const y=t.find((e=>e.id===o.id));if(!y)return;let h;if(m){const e=u().G.createChildStore(f,y),t=e.getModel(),o=l().Or(r,e);h=(0,i().Z)({pageId:y.id,pageModel:t,baseUrl:o,pageVisitSource:n().tY.MentionInPage})}else{const e=f.getModel(),t=l().Or(r,f);h=(0,i().Z)({pageId:f.id,pageModel:e,baseUrl:t,peekViewBlockId:y.id,peekMode:(0,d().getUrlParamFromPeekMode)("full_page"===c?void 0:c??d().default.state.mode),pageVisitSource:n().tY.MentionInPage}),p().XX(r,{from:a,meta_click:Boolean(m)})}g().c4({environment:r,url:h,openInNew:m})}async function f(e){var t,o;const{update:n,environment:i,store:l,collectionStore:d,propertySchema:p}=e,g=l.state.isOpen?l.state:null,m=new Set(n.oldValues),f=n.newValues.filter((e=>!m.has(e)));if(!c().default.checkGate({gateName:"relation_two_way_limit_of_1_add_relation_confirmation_dialog"}))return!1;const y=s().default.state.currentUserSettingsStore;if(Boolean(null==y?void 0:y.getSettingsStore().getKeyStore("relation_limit_confirmation_dialog_dismissed_at").getValue()))return!1;if(1!==f.length||!g)return!1;const h=g.property,v=(null===(t=g.collectionContextStore)||void 0===t?void 0:t.collectionViewStore())||(null==d||null===(o=d.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores()[0]);if(!d||!v||!p)return!1;const b=await async function(e){const{collectionStore:t,property:o,environment:n,targetCollectionStore:a}=e,i=t.getSchema()[o];if(!i||"relation"!==i.type)return!1;const l=r().j0(i),s=i.property;if(!l||!s)return!1;const c=a??new(u().NW)(n,l);await c.load();const d=c.getSchema();if(!(0,r().$u)({propertySchema:i,property:o,sourceCollectionId:t.id,targetCollectionSchema:d}))return!1;const p=d[s];return!(!p||"relation"!==p.type)&&Boolean(p.limit)}({collectionStore:d,property:h,environment:i});if(!b)return!1;const S=await async function(e){const{collectionStore:t,relationPointer:o,environment:n,property:r}=e,i=new(u().G)(n,o);await i.load();const l=t.getSchema()[r];if(!l||"relation"!==l.type)return;const s=l.property;if(!s)return;const c=i.getPropertyValue(s);if(!c)return;const[d]=a().rq(c);return d}({collectionStore:d,relationPointer:f[0],property:h,environment:i});if(!S)return!1;const C=new(u().G)(i,S);await C.load();return{blockWithExistingRelationTitle:C.getPropertyValue("title"),currentBlockTitle:g.store.getPropertyValue("title"),update:n,canAccessBlockWithExistingRelation:C.canRead()}}},922646:(e,t,o)=>{o.d(t,{wK:()=>h,wm:()=>y,yY:()=>f,zM:()=>m});o(670560),o(267602),o(653476),o(470928),o(241792);var n=()=>o(455947),r=()=>o(530980),a=()=>o(543172),i=()=>o(696459),l=()=>o(269299),s=()=>o(615676),c=()=>o(99537),d=()=>o(913011),u=()=>o(356117),p=()=>o(749826),g=()=>o(87849);function m(e){const{environment:t,layoutStore:o,currentQuestionModule:n,area:r,property:i,filterValue:s,setModuleSelection:d,sessionId:p}=e;l().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const l=(0,a().ZP)(),g=(0,a().ZP)(),m=function(e){switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:e.value.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:e.value.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:!0}}}}(s);(0,u().Uq)({environment:t,transaction:e,layoutStore:o,position:{area:r,moduleId:n.id},updatedModule:{...n,conditionalGroups:[...n.conditionalGroups??[],{id:l,trigger:{property:i,filter:m},children:[]}]}});const f={id:g,type:"placeholder",parentModuleId:n.id,parentConditionalGroupId:l};(0,c().sW)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:l,parentModuleId:n.id},module:f,sessionId:p,isPropertyCreation:!1}),d&&d({type:"existing_module",moduleId:g,isDragging:!1})}})}function f(e){const{environment:t,parentModule:o,groupId:n,layoutStore:a,collectionContextStore:i,isCollectionEmpty:s,sessionId:c}=e,d=a.getModules().form_conditional_modules??{};l().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var p,m;const f=null==a?void 0:a.getModel();if(!a||!f)return;const y=null===(p=o.conditionalGroups)||void 0===p?void 0:p.filter((e=>e.id!==n)),h=null===(m=o.conditionalGroups)||void 0===m?void 0:m.find((e=>e.id===n));if(void 0!==h){for(const o of h.children??[]){const n=d[o];n&&("placeholder"!==n.type?(0,g().r)({environment:t,module:n,sessionId:c,transaction:e,layoutStore:a,collectionContextStore:i,collectionSettingsStore:i.settingsStore,isCollectionEmpty:s,area:"form_conditional_modules",updateParentModule:!1}):l().applyOperation({transaction:e,store:a,operation:r().CIp.deleteModuleInArea({pointer:a.pointer,area:"form_conditional_modules",moduleId:o})}))}(0,u().Uq)({environment:t,transaction:e,layoutStore:a,position:{area:Object.keys(d).includes(o.id)?"form_conditional_modules":"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:y}})}}})}function y(e){const{environment:t,layoutStore:o,formQuestionModule:n,sessionId:r}=e;l().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{(0,d().H)({environment:t,transaction:e,layoutStore:o,position:{area:"form_conditional_modules",moduleId:n.id}}),(0,c().sW)({environment:t,transaction:e,layoutStore:o,position:{area:"form_layout_schema",type:"area_relative",location:"end_moveable"},module:{...n,parentModuleId:void 0,parentConditionalGroupId:void 0},sessionId:r,isPropertyCreation:!1})}})}function h(e){const{questionModulesToVisit:t,draftSubmissionPageStore:o,collectionSchema:r,nestedQuestionModules:a,intl:l}=e,c=[],d=o.getModel();if(!d)return[];for(const g of t){c.push(g);const e=g.conditionalGroups;if(e)for(const t of e){var u;const e=t.trigger;if(!(0,n().Y1)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:r,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:l,collectionFeatureGates:(0,s().W)()},depth:0})({block:d,getRecordModel:o.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,experimentService:p().default,formulasModule:void 0}))continue;const g=null===(u=t.children)||void 0===u?void 0:u.map((e=>{const t=a[e];if(t&&"formQuestion"===t.type)return t})).filter(i().$K);if(!g||0===g.length)continue;const m=h({questionModulesToVisit:g,draftSubmissionPageStore:o,collectionSchema:r,nestedQuestionModules:a,intl:l});c.push(...m)}}return c}},87849:(e,t,o)=>{o.d(t,{r:()=>g});o(821057),o(267602),o(653476);var n=()=>o(530980),r=()=>o(26645),a=()=>o(984871),i=()=>o(139224),l=()=>o(269299),s=()=>o(594546),c=()=>o(913011),d=()=>o(826955),u=()=>o(469753),p=()=>o(852282);function g(e){let{environment:t,module:o,sessionId:n,layoutStore:r,collectionSettingsStore:a,isCollectionEmpty:l,collectionContextStore:s,area:c,transaction:d,updateParentModule:u}=e;const g=s.collectionStore();if(!g)throw new Error("Could not find collection store");const f=r.getModules().form_conditional_modules??{},y=(0,p().B)({currentModule:o,nestedModules:f,includePlaceholders:!0}).filter((e=>e.id!==o.id)),h=s.normalizedSchemaStore.state;for(const i of y)m({environment:t,module:i,sessionId:n,layoutStore:r,isCollectionEmpty:l,collectionContextStore:s,collectionStore:g,area:c,transaction:d,schema:h,updateParentModule:!1});m({environment:t,module:o,sessionId:n,layoutStore:r,isCollectionEmpty:l,collectionContextStore:s,collectionStore:g,area:c,transaction:d,schema:h,updateParentModule:u}),i().E3({collectionSettingsStore:a})}function m(e){let t,{environment:o,module:i,sessionId:p,layoutStore:g,isCollectionEmpty:m,collectionContextStore:f,collectionStore:y,area:h,transaction:v,updateParentModule:b,schema:S}=e;if("formQuestion"===i.type){if(t=d().cq.createChildStore(g,{table:r().L_,id:i.formQuestionId,spaceId:g.getSpaceId()??""}).getPropertyId(),!t)return}if(b?(0,c().H)({environment:o,position:{area:h,moduleId:i.id},layoutStore:g,sessionId:p,transaction:v}):l().applyOperation({transaction:v,store:g,operation:n().CIp.deleteModuleInArea({pointer:g.pointer,area:"form_conditional_modules",moduleId:i.id})}),t){var C;const e=null===(C=S[t])||void 0===C?void 0:C.type;m&&e&&"title"!==e&&a().E2({environment:o,collectionStore:y,schema:S,property:t,transaction:v}),(0,s().j)({environment:o,event:{eventName:"delete_form_question",eventProperties:(0,u().Pz)({collectionContextStore:f,propertyId:t,questionId:i.id})}})}}},852282:(e,t,o)=>{o.d(t,{B:()=>n,l:()=>r});o(670560),o(267602),o(30005);function n(e){let{currentModule:t,nestedModules:o,includePlaceholders:n}=e;const r=[t],a=[];for(;r.length>0;){const e=r.shift();var i;if(e)if(a.push(e),"formQuestion"===e.type)null===(i=e.conditionalGroups)||void 0===i||i.forEach((e=>{const t=e.children??[];for(const a of t){const e=o[a];e&&("formQuestion"===e.type||n&&"placeholder"===e.type)&&r.push(e)}}))}return a}function r(e,t){return!!t&&Object.keys(e).includes(t.parentModuleId??"")}},505521:(e,t,o)=>{o.d(t,{k:()=>a});var n=()=>o(532850),r=()=>o(72539);function a(e){let{type:t,store:o,textValue:a}=e;if(!a||!t)return{linkHref:void 0,shouldShowMaliciousContentDialog:!1};const i=(null==o?void 0:o.getCreatedById())===r().gd.id&&"url"===t;return{linkHref:(0,n().Hw)(t,a),shouldShowMaliciousContentDialog:i}}},143695:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(667294),r=()=>o(846550),a=()=>o(409873),i=()=>o(644248),l=o(785893);function s(e){let{setIsHovered:t}=e;const[o,s]=(0,i().C)();(0,n.useEffect)((()=>{t(s)}),[s,t]);const c=(0,r().yK)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:s?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[s]);return(0,l.jsx)("div",{ref:o,style:c.container,children:(0,a().D)(c.icon)})}},205951:(e,t,o)=>{o.d(t,{Lm:()=>M,P4:()=>x,ZP:()=>w});var n=o(667294),r=()=>o(142735),a=()=>o(846550),i=()=>o(647439),l=()=>o(205248),s=()=>o(788860),c=()=>o(707513),d=()=>o(139224),u=()=>o(154186),p=()=>o(1910),g=()=>o(94967),m=()=>o(198829),f=()=>o(347577),y=()=>o(949842),h=()=>o(352230),v=()=>o(565276),b=()=>o(26796),S=o(785893);const C=(0,s().vU)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),x=290,M=400;function k(e){let{children:t,title:o,settingsStackLength:n,handleClose:d,handleBackArrowClick:g,hideDesktopHeader:m,hasBackStack:f}=e;const y=(0,r().VK)((()=>b().Z.state.isOpen),[]),h=(0,s().YB)(),v=(0,a().yK)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:y?"top":"center",padding:y?"0px 14px 6px 14px":"14px 16px 6px 16px",height:y?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:y?c().Ue.medium:c().Ue.semibold,fontSize:y?16:14,lineHeight:y?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.mediumTextColor}})),[y]),x=!y;return(0,S.jsxs)(S.Fragment,{children:[m?(0,S.jsx)("div",{style:v.hiddenDesktopHeaderDiv}):(0,S.jsxs)("div",{style:v.nonHiddenDesktopHeaderDiv,children:[(n>1||f)&&(0,S.jsx)(p().Z,{icon:i().W,style:v.arrowButton,iconStyle:v.arrowIcon,onClick:g,ariaLabel:h.formatMessage(C.back)}),(0,S.jsx)("span",{style:v.title,children:o}),x&&(0,S.jsx)(u().Z,{onClick:d,style:v.closeButton,hoveredStyle:v.closeButtonHover,children:(0,l().D)(v.closeIcon)})]}),t]})}function _(e,t){let{children:a,footer:i,header:l,unconstrainedWidth:c,desktopWidth:u,title:M,collectionSettingsStore:_,fullHeight:w,hideDesktopHeader:P,menuScrollerStyle:I,innerContentWrapperStyle:T,disableScroller:R,handleBackArrowClick:F,hasBackStack:V,handleClose:Z}=e;const j=(0,s().YB)(),D=(0,o(219727).Fy)(),B=(0,o(125659).DK)(),L=(0,r().VK)((()=>b().Z.state.isOpen),[]),N=(0,o(830700).o)({collectionContextStore:B}),A=(0,o(409318).L)(),O=N&&!A,{currentTab:E,settingsStackLength:U,hideHeader:H}=(0,r().VK)((()=>{const e=_.state;return{currentTab:(0,o(642966).n)(_),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[_]),K=(0,n.useCallback)((()=>{var e;F?F():d().z$({collectionSettingsStore:_,keepPreviousRef:"form_editor"===(null==B||null===(e=B.collectionViewStore())||void 0===e?void 0:e.getType())})}),[F,_,B]),W=(0,n.useCallback)((e=>{Z?Z(e):(0,y().ZP)({event:e,context:y().Af.CollectionSettingsClick,callback:()=>{d().E3({collectionSettingsStore:_})}})}),[Z,_]),z=(0,n.useCallback)((e=>{(0,v().jM)(e.target)||(0,v().eO)(e.target)||(0,v().al)(e.target)||b().Z.state.isOpen||W(e)}),[W]),{MenuArrowKeysProvider:G,context:Y}=(0,o(288141).ZP)();if(!E)return null;let q;if(D.isMobile)q={disableScroller:R,menuType:h().o.Modal,title:M,left:U>1&&(0,S.jsx)(p().Z,{icon:o(891142).S,onClick:K,ariaLabel:j.formatMessage(C.back)}),right:!A&&(0,S.jsx)(o(470386).DoneMenuText,{}),onClickRight:W,scrollerStyle:{...O&&{maxHeight:`calc(${f().DQ} - ${f().BM})`,height:`calc(${f().DQ} - ${f().BM})`},...I},paddingTop:O?"0px":void 0,innerRef:t};else{const e=c||u?void 0:L?280:x;q={disableScroller:R,menuType:h().o.Popup,minWidth:L?280:x,width:u,maxHeight:w?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:z,scrollerStyle:{flexGrow:0,...I},header:!H&&(0,S.jsx)(k,{settingsStackLength:U,handleClose:W,handleBackArrowClick:K,hasBackStack:V,hideDesktopHeader:P,title:M,children:l}),paddingTop:H?6:0,footer:i,innerRef:t}}const Q=(0,S.jsxs)(S.Fragment,{children:[D.isMobile&&l,a,D.isMobile&&i]});return w?(0,S.jsx)(G,{value:Y,children:(0,S.jsx)(g().Z,{debugName:"CollectionSettingsMenu",capture:!0,onUp:Y.onKeyDown,onDown:Y.onKeyDown,children:(0,S.jsx)(m().Z,{...q,children:Q})})}):(0,S.jsx)(o(573357).Z,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,S.jsx)(G,{value:Y,children:(0,S.jsx)(g().Z,{debugName:"CollectionSettingsMenu",capture:!0,onUp:Y.onKeyDown,onDown:Y.onKeyDown,children:(0,S.jsx)(m().Z,{...q,...e,children:(0,S.jsx)("div",{style:T,children:Q})})})})})}const w=(0,n.forwardRef)(_)},475692:(e,t,o)=>{o.d(t,{Z:()=>n});const n=(0,o(788860).vU)({inputPlaceholder:{defaultMessage:"Property name",id:"database.viewSettings.propertyTab.propertyName"},autofillOffLabel:{defaultMessage:"Off",id:"database.viewSettings.propertyTab.autofillOffLabel"},autofillOnLabel:{defaultMessage:"On",id:"database.viewSettings.propertyTab.autofillOnLabel"},keptUpToDateWithNotionAITooltip:{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"},buttonPropertyErrorTooltip:{defaultMessage:"Button property has an error",id:"database.tableHeaderCell.tooltipButtonPropertyError"}})},830700:(e,t,o)=>{o.d(t,{o:()=>a});var n=()=>o(219727),r=()=>o(142735);function a(e){let{collectionContextStore:t}=e;const o=(0,n().O7)(),a=(0,n().MO)(),i=(0,r().VK)((()=>o.WindowSizeStore.isLandscape()),[o.WindowSizeStore]);return(0,r().VK)((()=>"chart"===(null==t?void 0:t.getViewType())&&a&&!i),[t,a,i])}},765458:(e,t,o)=>{o.d(t,{PJ:()=>l,fq:()=>s,oL:()=>d,yA:()=>c});o(667294);var n=()=>o(677559),r=o(785893);function a(e){const{shouldShowSpinner:t,collectionSettingsProps:n}=e;return(0,r.jsx)(o(205951).ZP,{collectionSettingsStore:n.collectionSettingsStore,fullHeight:n.fullHeight,hideDesktopHeader:n.hideDesktopHeader,children:t&&(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,r.jsx)(o(312578).Z,{})})})}const i=new(n().Ss)("collectionSettings",(()=>Promise.all([o.e(62743),o.e(52774),o.e(84885),o.e(90698),o.e(90424),o.e(94556),o.e(78701),o.e(38804),o.e(11189),o.e(53329),o.e(71896),o.e(72586),o.e(53335),o.e(46616),o.e(54940),o.e(20224),o.e(46546),o.e(98721),o.e(50471),o.e(49498),o.e(2971),o.e(20634),o.e(91253),o.e(63707),o.e(61171),o.e(63502),o.e(7678),o.e(5006),o.e(69437),o.e(75066),o.e(88128),o.e(18162),o.e(91752),o.e(80730),o.e(62084),o.e(71641),o.e(10553),o.e(67601),o.e(20683),o.e(27039),o.e(52065),o.e(38632),o.e(73230),o.e(25911),o.e(76540),o.e(53936),o.e(58799)]).then(o.bind(o,445294)))),l=(0,n().kF)(i,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,r.jsx)(a,{shouldShowSpinner:e,collectionSettingsProps:t})}),s=(0,n().kF)(i,(e=>e.CollectionSettingsButtonOptions)),c=(0,n().kF)(i,(e=>e.CollectionSettingsPropertyTypeMenuItem)),d=(0,n().kF)(i,(e=>e.CollectionSettingsEditButtonAutomationOption))},162109:(e,t,o)=>{o.d(t,{R:()=>i,e:()=>a});var n=()=>o(677559);const r=new(n().Ss)("SharingEnabled",(async()=>{const[{default:e},{default:t}]=await Promise.all([o.e(4761).then(o.bind(o,377403)),o.e(93940).then(o.bind(o,474728))]);return{SharingEnabledIcon:e,SharingEnabledPropertyNameTooltip:t}})),a=(0,n().kF)(r,(e=>e.SharingEnabledPropertyNameTooltip)),i=(0,n().kF)(r,(e=>e.SharingEnabledIcon))},928459:(e,t,o)=>{o.d(t,{MB:()=>i,Q6:()=>r,aO:()=>a,vS:()=>l});var n=o(667294);const r=n.createContext({columnVirtualizer:void 0,propertiesInRange:[],propertiesInRangeIndices:[],beforeWidth:0,afterWidth:0});r.displayName="ColumnVirtualizerContext";const a=n.createContext(!1);function i(){return(0,n.useContext)(r)}function l(){return(0,n.useContext)(a)}a.displayName="ColumnVirtualizerExistenceContext"},187920:(e,t,o)=>{o.d(t,{H:()=>a});var n=()=>o(269299),r=()=>o(544179);function a(e){const{environment:t,collectionStore:o,performTransaction:a}=e;return n().createAndCommit({userAction:"collectionViewActions.createSchemaUpdateTransaction",environment:t,canUndo:!0,perform:e=>{const n=o.getSchema(),i=a(e),l=o.getSchema();return(0,r().C)({environment:t,collectionStore:o,oldSchema:n,newSchema:l,transaction:e}),i}}).performResult}},864871:(e,t,o)=>{o.d(t,{I:()=>r});var n=()=>o(341374);function r(e){const{store:t}=e;"new"===n().Z.state.editMode&&n().Z.state.store.id===t.id&&n().Z.reset()}},191560:(e,t,o)=>{o.d(t,{v:()=>r});var n=()=>o(419380);function r(e){const{store:t,transient:o}=e;n().Z.setState({isActive:!0,store:t,transient:Boolean(o)})}},702466:(e,t,o)=>{o.d(t,{p:()=>r});var n=()=>o(142735);function r(e){let{collectionContextStore:t,blockId:o,property:r,featureEnabled:a=!1}=e;return(0,n().VK)((()=>{if(!(a&&o&&r&&t))return!1;const e=t.virtualizedModule.getBlockHeightsCache();return e&&e.propertyCanExpandStore(o,r).state}),[t,o,r,a])}},554952:(e,t,o)=>{o.d(t,{L:()=>S,Z:()=>M});o(241792),o(667294);var n=()=>o(142735),r=()=>o(846550),a=()=>o(506347),i=()=>o(717956),l=()=>o(667067),s=()=>o(923398),c=()=>o(788860),d=()=>o(568017),u=()=>o(922227),p=()=>o(453059),g=()=>o(239482),m=()=>o(826955),f=()=>o(383694),y=()=>o(943620),h=o(785893);const v=(0,c().vU)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function b(e){return(0,h.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function S(e){const{collectionForLocationStore:t,collectionContextStore:o}=e,a=(0,c().YB)(),u=(0,n().VK)((()=>{const e=g().uJ(t);return e.reverse(),e}),[t]),{collectionIsInPrivate:p,collectionIsInRestricted:m,collectionIsInShared:f}=(0,n().VK)((()=>{const e=o.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[t.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[t.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[t.id])}}),[o.groupsForTypedDatabasesStore,t.id],{useDeepEqual:!0}),y=(0,n().VK)((()=>(0,d().gh)({theme:"light"})),[]),S=(0,r().yK)((e=>({textStyle:{color:y.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:y.accentColors.gray[100],borderRadius:3}})),[y]),x=p||m||f;let M=null;return p?M=(0,h.jsxs)(h.Fragment,{children:[(0,l().Q)(S.shareTypeIndicatorIcon),(0,h.jsx)("span",{children:a.formatMessage(v.private)})]}):m?M=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{...S.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,i().B)({...S.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,h.jsx)("span",{children:a.formatMessage(v.noAccess)})]}):f&&(M=(0,h.jsxs)(h.Fragment,{children:[(0,s().O)(S.shareTypeIndicatorIcon),(0,h.jsx)("span",{children:a.formatMessage(v.shared)})]})),(0,h.jsxs)("div",{style:{display:"flex"},children:[x&&(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,...S.textStyle},children:[M,!m&&(0,h.jsx)(b,{style:{marginTop:-4,...S.textStyle}})]}),u.length>3?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(C,{ancestorStore:u[0],showDivider:!0}),(0,h.jsx)("span",{style:{paddingLeft:2,paddingTop:4,...S.textStyle},children:"..."}),(0,h.jsx)(b,{style:S.textStyle}),!(p||f)&&(0,h.jsx)(C,{ancestorStore:u[u.length-2],showDivider:!0}),(0,h.jsx)(C,{ancestorStore:u[u.length-1],showDivider:!1})]}):u.map(((e,t)=>(0,h.jsx)(C,{ancestorStore:e,showDivider:t<u.length-1},e.id)))]})}function C(e){const{ancestorStore:t,showDivider:o}=e,a=(0,n().VK)((()=>(0,d().gh)({theme:"light"})),[]),i=(0,r().yK)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:a.popoverWaxPaperBackground,fontWeigth:"normal"}})),[a]);return t instanceof m().zX?(0,h.jsxs)("div",{style:{display:"flex"},children:[(0,h.jsx)(p().Z,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:i.teamIconStyle,titleStyle:i.textStyle}),o&&(0,h.jsx)(b,{style:i.textStyle})]}):(0,h.jsxs)("div",{style:{display:"flex"},children:[(0,h.jsx)(u().Z,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:i.textStyle},t.id),o&&(0,h.jsx)(b,{style:i.textStyle})]})}function x(e){const{teamStore:t,collectionStore:o}=e,a=(0,n().VK)((()=>o.getIcon()),[o]),i=(0,r().yK)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return a?(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,h.jsx)(y().Z,{icon:a,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,h.jsx)(f().p,{store:t,disabled:!0,size:12,style:i.miniTeamSpaceIcon},"icon")]}):(0,h.jsx)(f().p,{store:t,disabled:!0,size:20,style:i.teamSpaceIcon},"icon")}const M=function(e){const{collectionContextStore:t,collectionForLocationStore:d}=e,u=(0,o(219727).O7)(),p=(0,c().YB)(),{collectionIsInPrivate:m,collectionIsInRestricted:f,collectionIsInShared:b}=(0,n().VK)((()=>{const e=t.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[d.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[d.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[d.id])}}),[t.groupsForTypedDatabasesStore,d.id],{useDeepEqual:!0}),S=(0,n().VK)((()=>g().VP(d)),[d]),C=(0,n().VK)((()=>(0,o(641702).Xh)(d.getName(),d)??p.formatMessage(v.emptyCollectionName)),[d,p]),M=(0,n().VK)((()=>d.getIcon()),[d]),k=(0,n().VK)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),_=(0,n().VK)((()=>{let e=a().tY.LocationProperty;return k?((0,o(718959).qG)(k)&&(e=t.isInHomeWidgetStore.state?a().tY.PersonalHomeTileTasks:a().tY.PersonalHomePageTasks),e):e}),[k,t]),w=(0,r().yK)((e=>({button:{color:e.accentColors.gray[800],cursor:"pointer"},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGraySecondary,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.grayPrimary,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:o(707513).Ue.medium,marginTop:2,marginLeft:2,whiteSpace:"nowrap",...(0,o(589024).z0)(e)}})),[]);if(!(S||m||f||b))return null;const P=m||f||b;let I=(0,s().O)(w.shareTypeIndicatorIcon);return M?I=(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,h.jsx)(y().Z,{icon:M,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),m?(0,l().Q)(w.miniShareTypeIndicatorIcon):(0,s().O)(w.miniShareTypeIndicatorIcon)]}):f?I=(0,h.jsx)("div",{style:{...w.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,i().B)({...w.shareTypeIndicatorIcon,margin:0,background:void 0})}):m&&(I=(0,l().Q)(w.shareTypeIndicatorIcon)),(0,h.jsx)(o(154186).Z,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:w.button,onClick:e=>{const t=d.getParentBlockStore();if(t){const n=(0,o(250625).DJ)(e);o(47443)._c({environment:u,store:t,pageVisitSource:_,openInNew:n})}},children:(0,h.jsxs)("div",{style:w.inner,children:[S&&(0,h.jsx)(x,{teamStore:S,collectionStore:d}),P&&I,(0,h.jsx)("div",{style:w.collectionTitleTextStyle,children:C})]})})}},472344:(e,t,o)=>{o.d(t,{O:()=>m,b:()=>g});o(667294);var n=()=>o(846550),r=()=>o(996106),a=()=>o(513670),i=()=>o(326966),l=()=>o(589024),s=()=>o(527278),c=()=>o(86048),d=()=>o(594072),u=o(785893);const p=21;function g(e){const{numberValue:t,numberFormat:o,numberPrecision:g,numberShowAs:f,shouldRenderTooltip:y,withComma:h,style:v,ringWidth:b,className:S,barHeight:C}=e,x=(0,n().Fg)();if(a().i2(t)||i().z4(t))return null;const M=e.progressSize??p,k=(null==f?void 0:f.showValue)??!0,_=k&&r().uf(t,o,s().Z.getIntl(),void 0,g);let w;if("bar"===(null==f?void 0:f.type)||"ring"===(null==f?void 0:f.type)){const n=r().IM(t,f.maxValue),{filledColor:a,gapColor:i,unfilledColor:s}=m({theme:x,color:f.color}),p=y?l().X7({numberValue:t,numberFormat:o,numberShowAs:f}):void 0;w="bar"===f.type?(0,u.jsx)(c().k,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,height:C,style:{height:M,...e.barStyle,...k?{}:{flexBasis:"100%"}},tooltip:p}):(0,u.jsx)(d().e,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,size:M,ringWidth:b,tooltip:p})}return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...v},className:S,children:[_,w,h?", ":null]})}function m(e){let{theme:t,color:o}=e;const n="default"===o?t.selectLightGray:t.accentColors[o];return{filledColor:"dark"===t.mode?n[500]:n[400],gapColor:n[50],unfilledColor:"dark"===t.mode?n[200]:t.selectLightGray[200]}}},663221:(e,t,o)=>{o.d(t,{Z:()=>F});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(846550),l=()=>o(226413),s=()=>o(639708),c=()=>o(509917),d=()=>o(707513),u=()=>o(879952),p=()=>o(990966),g=()=>o(143695),m=()=>o(162109),f=()=>o(673385),y=()=>o(677559);const h=new(y().Ss)("PagePropertiesRowNameMenu",(async()=>Promise.all([o.e(84885),o.e(11189),o.e(53329),o.e(71896),o.e(72586),o.e(53335),o.e(46546),o.e(50471),o.e(2971),o.e(97583)]).then(o.bind(o,829563)))),v=(0,y().kF)(h,(e=>e.PagePropertiesRowNameMenu));var b=()=>o(949842),S=()=>o(154057),C=()=>o(231272),x=()=>o(998901),M=()=>o(158429),k=()=>o(154186),_=()=>o(864266),w=()=>o(967092),P=()=>o(899316),I=o(785893);function T(e){const{property:t,schema:s,disabled:c,locked:d,canConfigureCollection:g,isInPeekRenderer:y,labelComponent:h,hideDragHandle:b,pagePropertiesStore:M,styleVariants:k,disableRowNameInteractivity:P,dragHandleStyle:T,layoutModule:F,forceHighlight:j,forceFocusedHighlight:D,hideIcon:B,propertyNameAriaId:L,showDragHandleAsIcon:N}=e,A=(0,n.useRef)(null),O=(0,o(125659).DK)(),E=(0,r().O7)(),U=(0,r().Fy)(),[H,K]=(0,n.useState)(!1),W=t===l().ow?l().Qr:s[t],z=(0,a().VK)((()=>M.state.hoveredProperty===t),[M,t]),G=(0,a().VK)((()=>!U.isMobile&&z&&!o(475335).default.state.isKeyboardMode&&!b),[U.isMobile,b,z]),Y=(0,a().VK)((()=>M.state.openProperty),[M]),q=(0,o(173113).a)(W),Q=(0,a().VK)((()=>null==O?void 0:O.collectionStore()),[O]),$=(0,i().yK)((e=>{const{size:t="medium",width:n={variant:"fixed",widthMobile:C().Uk,widthDesktop:C().rZ},height:r,color:a="default"}=k||{},i="medium"!==(null==r?void 0:r.variant)&&(null!=r&&r.variant||"medium"!==t)?24:34;let l;if("fixed"===n.variant){const e=U.isMobile?n.widthMobile||C().Uk:n.widthDesktop||C().rZ;l={width:e,maxWidth:e,minWidth:0}}else if("hug-content"===n.variant){l={width:"min-content",maxWidth:U.isMobile?n.maxWidthMobile||"100%":n.maxWidthDesktop||"100%",minWidth:0}}else(0,o(696459).t1)(n);return{propertyLabelContainerStyles:{display:"flex",alignItems:"center",color:"primary"===a?e.text.primary:e.text.secondary,height:i,...l},tooltipLockedIcon:{width:12,fill:e.regularInvertedTextColor,marginLeft:2,display:"inline-block",verticalAlign:"middle",paddingBottom:3},tooltipDescription:{color:e.mediumInvertedTextColor},tooltipAutoUpdatedByAi:{color:e.mediumInvertedTextColor},sharingEnabledTooltip:{marginTop:8,color:e.mediumInvertedTextColor}}}),[U.isMobile,k]),X=(0,n.useMemo)((()=>!U.isMobile&&!c&&!(d||!g)&&!b&&!e.showDragHandleAsIcon&&(0,I.jsx)(o(628370).Z,{animate:{opacity:G?1:0},initial:{opacity:0},exit:{opacity:0},style:{width:_().C+4,marginLeft:-(_().C+4)},onMouseMove:()=>Z(e.property,M),onMouseLeave:()=>V(M),children:(0,I.jsx)(o(735697).Z,{role:"cell",disallowTabbing:!0,onClick:t=>function(e,t,o,n){S().X9()||n.setState({...n.state,openProperty:{property:t,isInPeekRenderer:o}})}(0,e.property,e.isInPeekRenderer,M)})})),[g,U.isMobile,c,b,d,M,e.isInPeekRenderer,e.property,e.showDragHandleAsIcon,G]),J=(0,n.useCallback)((e=>{if(!O)return;const n=O.permissionScopesStore.state,r={onClick:!P&&n.canConfigureBlock?()=>function(e,t,o,n){p().clear({environment:o}),u().ZH({environment:o}),(0,f().w)(),n.setState({...n.state,openProperty:{property:e,isInPeekRenderer:t}})}(t,y,E,M):o(513670).yR};return(0,I.jsx)(R,{hideIcon:Boolean(B),showDragIcon:!B&&N&&G,dragHandleStyle:T,schema:s,property:t,disabled:c||Boolean(P),locked:d,canConfigureCollection:g,events:(0,o(164079).Z)(r,e),propertyNameAriaId:L,setIsDescriptionIconTooltipHovered:e=>K(e),styleVariants:k,layoutModule:F,forceHighlight:j,forceFocusedHighlight:D,isSharingEnabled:q})}),[O,E,F,j,D,T,t,s,y,c,d,g,P,M,k,G,L,N,B,q]),ee=Boolean(Y&&!c&&Y.property===t&&Y.isInPeekRenderer===y),te=(0,n.useCallback)((()=>{if(!O)return;M.setState({...M.state,openProperty:void 0});const e=O.settingsStore;o(139224).E3({collectionSettingsStore:e})}),[O,M]),oe=(0,n.useCallback)((()=>{const t=null==O?void 0:O.settingsStore;if(O&&t)return(0,I.jsx)("div",{ref:A,children:t.state.open?(0,I.jsx)(o(765458).PJ,{context:o(347577).HV.TopbarFilterPopup,collectionContextStore:O,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,I.jsx)(v,{...e,popupContainerRef:A})})}),[O,e]),ne=(0,n.useCallback)((e=>{if(!O||!W)return null;const t=(0,l().qQ)(W)&&(0,l().q3)(W);return(0,I.jsxs)("div",{...e,style:o(514).F6,children:[(0,I.jsxs)("div",{children:[W.name,Q&&"relation"===W.type&&q&&(0,I.jsx)(m().e,{propertySchema:W,collectionStore:Q,style:$.sharingEnabledTooltip}),d&&(0,o(535014).b)($.tooltipLockedIcon)]}),void 0!==(null==W?void 0:W.description)&&W.description.length>0?(0,I.jsx)("div",{style:$.tooltipDescription,children:W.description}):null,t&&t.auto_update_on_edit&&(0,I.jsx)("div",{style:$.tooltipAutoUpdatedByAi,children:(0,I.jsx)(o(788860)._H,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})})]})}),[O,Q,d,W,$.tooltipAutoUpdatedByAi,$.tooltipDescription,$.tooltipLockedIcon,$.sharingEnabledTooltip,q]);return O&&W?(0,I.jsx)(o(654133).Z,{disableTooltip:U.isMobile,renderTooltip:ne,delayThreshold:H?0:500,placement:x().Placement.Left,render:o=>(0,I.jsxs)("div",{style:$.propertyLabelContainerStyles,onMouseMove:()=>Z(e.property,M),onMouseLeave:()=>V(M),children:[X,(0,I.jsx)(w().ZP,{popupType:U.isMobile?w().kQ.SlideUp:w().kQ.Popup,originGap:1,alignmentToOrigin:x().Alignment.Start,render:oe,open:ee,onDismiss:te,origin:h??J(o)})]},t)}):null}function R(e){var t;const{schema:o,property:n,disabled:u,locked:p,canConfigureCollection:f,events:y,styleVariants:h,forceHighlight:v,forceFocusedHighlight:S,showDragIcon:C,isSharingEnabled:x}=e,_=(null==h?void 0:h.color)||"default",w=(null==h?void 0:h.size)||"medium",T=null==h?void 0:h.fontWeight,R=n===l().ow?l().Qr:o[n],{isMobile:F}=(0,r().Fy)(),V=(0,a().VK)((()=>{const e=M().V.state;return!(!e||"page_property_name"!==e.type)&&e.propertyId===n}),[n])||S,Z=(0,a().VK)((()=>{var e;const t=M().l.state,r=null===(e=o[n])||void 0===e?void 0:e.name;if(!t||!r)return!1;return r.toLowerCase().includes(t.toLowerCase())}),[n,o])||v,j=(0,i().yK)((t=>{const o=V?t.findHighlightMatch.selectedBackground:t.findHighlightMatch.unselectedBackground;return{button:{display:"flex",alignItems:"center",height:"100%",width:(0,s().f)(e.layoutModule)?void 0:"100%",borderRadius:4,padding:"0 6px",maxWidth:"100%"},property:{backgroundColor:Z?o:void 0,outline:Z?`5px solid ${o}`:void 0,borderRadius:Z?4:void 0,color:V?"black":void 0,..."medium"===w?{fontSize:14,lineHeight:"20px"}:{fontSize:13,lineHeight:"18px"},...T?{fontWeight:d().Ue[T]}:{}},icon:{marginRight:2,..."primary"===_?{fill:t.icon.primary}:V?{fill:"black"}:{}}}}),[_,V,w,T,e.layoutModule,Z]);if(!R)return null;const D=n===l().ow?e=>{(0,b().ZP)({event:e,context:b().Af.EditorMouseDown})}:void 0;return(0,I.jsx)(k().Z,{role:"cell",id:e.propertyNameAriaId,style:j.button,disabled:u||p||!f,...y,onMouseDown:D,onContextMenu:e=>{e.preventDefault(),y.onClick(e)},children:(0,I.jsx)(P().ZP,{propertySchema:R,showIcon:!e.hideIcon,showDragIcon:C,badge:(0,I.jsxs)(I.Fragment,{children:["relation"===R.type&&x&&(0,I.jsx)(m().R,{style:{width:20,height:20,marginLeft:4}}),(0,I.jsx)(P().oV,{propertySchema:R}),!F&&!(null===(t=R.description)||void 0===t||!t.length)&&(0,I.jsx)(g().Z,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:j.property,property:n,className:V?c().qp:void 0,labelSizeVariant:w,iconSize:"medium"===w?16:14,iconStyle:j.icon,dragHandleStyle:e.dragHandleStyle})})}const F=n.memo(T);function V(e){e.setState({...e.state,hoveredProperty:void 0})}function Z(e,t){t.setState({...t.state,hoveredProperty:e})}},225385:(e,t,o)=>{o.d(t,{Z:()=>ee});o(670560),o(267602),o(653476),o(241792),o(731107);var n=o(667294),r=()=>o(492788),a=()=>o(219727),i=()=>o(142735),l=()=>o(846550),s=()=>o(926724),c=()=>o(156642),d=()=>o(226413),u=()=>o(532850),p=()=>o(766933),g=()=>o(159732),m=()=>o(899548),f=()=>o(396136),y=()=>o(955620),h=()=>o(788860),v=()=>o(707513),b=()=>o(491927),S=()=>o(54512),C=()=>o(909240),x=()=>o(917881),M=()=>o(295274),k=()=>o(494657),_=()=>o(332542),w=()=>o(636340),P=()=>o(970105),I=()=>o(990966),T=()=>o(269299),R=()=>o(360240),F=()=>o(677559);const V=new(F().Ss)("RelationPropertyCustomizeLayoutMenu",(async()=>{const{default:e}=await Promise.all([o.e(44832),o.e(82164)]).then(o.bind(o,903639));return{RelationPropertyCustomizeLayoutMenu:e}})),Z=(0,F().kF)(V,(e=>e.RelationPropertyCustomizeLayoutMenu));var j=()=>o(589024),D=()=>o(861026),B=()=>o(487270),L=()=>o(191586),N=()=>o(852465),A=()=>o(129338),O=()=>o(973837),E=()=>o(749826),U=()=>o(826955),H=()=>o(356321),K=()=>o(154186),W=()=>o(255577),z=()=>o(388284),G=()=>o(654133),Y=()=>o(663221),q=o(785893);const Q={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};function $(e){const{property:t,propertySchema:o,numberOfRelations:r,schema:a,format:c,disabled:d,locked:u,canConfigureCollection:g,blockStore:m,collectionStore:f,onHandleOpenProperty:y,onHandleRelationPropertyPageSectionRefMount:b,isInPeekRenderer:S,targetCollectionStore:C,pagePropertiesStore:x,shouldHideIcon:M}=e,k=(0,l().yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:v().Ue.regular,color:e.lightTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:v().Ue.regular,color:e.lightTextColor},iconStyle:{width:14,height:14,fill:e.lightIconColor,marginRight:6,alignItems:"baseline"},minmalButtonLabelStyle:{...v().Yu}})),[]),_=(0,l().Fg)(),w=(0,n.useCallback)((e=>{d||u||!g||(e.preventDefault(),x.setState({...x.state,openProperty:{property:t,isInPeekRenderer:S}}))}),[d,u,g,x,t,S]),P=(0,n.useCallback)((e=>{y(!0)}),[y]),I=(0,n.useMemo)((()=>({size:"medium",fontWeight:"regular",width:{variant:"hug-content",maxWidthDesktop:300,maxWidthMobile:300}})),[]),T=(0,n.useCallback)((()=>{x.setState({...x.state,hoveredProperty:t})}),[t,x]),F=(0,n.useCallback)((()=>{x.setState({...x.state,hoveredProperty:void 0})}),[x]),V=(0,i().VK)((()=>C.getFormatStore().getKeyStore("app_config_uri").getValue()),[C]),Z=(0,R().sN)(s().p$),j=(0,R().Q_)(s().p$);return(0,q.jsx)("div",{style:k.hoverButton,onMouseMove:T,onMouseLeave:F,children:(0,q.jsx)(Y().Z,{schema:a,format:c,property:t,blockStore:m,collectionStore:f,disabled:d,locked:u,canConfigureCollection:g,styleVariants:I,pagePropertiesStore:x,labelComponent:(0,q.jsx)("div",{ref:b,style:k.minimalButtonWrapper,children:(0,q.jsxs)(K().Z,{style:k.minimalButton,onClick:P,onContextMenu:w,children:[(0,q.jsx)(p().ZP,{size:14,style:k.iconStyle,theme:_,type:o.type??"relation",icon:o.icon}),(0,q.jsx)("div",{style:k.minmalButtonLabelStyle,children:V===s().p$?(0,q.jsx)(h()._H,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:r,propertyName:o.name,singleTypedItemName:Z,pluralTypedItemName:j}}):(0,q.jsx)(h()._H,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:r,propertyName:o.name}})})]},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:S,hideIcon:M})})}function X(e){const{collectionStore:t,targetCollectionStore:o,property:r,showRight:l,disabled:c,style:d,children:u,canConfigureCollection:p,isConnectedRelation:g,canEditCurrentPage:f,handleMouseMove:y,onHandleOpenProperty:v,onHandleRelationPropertyPageSectionRefMount:b,topBorder:S,collectionContextStore:C}=e,x=(0,i().VK)((()=>o.isSyncedCollection()),[o]),M=(0,i().VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===s().p$),[o]),k=(0,i().VK)((()=>C.permissionScopesStore.state),[C]),_=(0,a().O7)(),[w,P]=(0,n.useState)(!1),I=_.device.isMobile?l:l&&w;return(0,q.jsx)("div",{style:{width:"100%"},ref:b,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),children:(0,q.jsx)(z().Z,{...e,topBorder:S,children:u,noTextOverflow:!1,isTitleUppercase:!1,disableMobilePadding:!0,right:I&&!x&&!k.isExternallyImportedAndSyncedCollection&&!g&&(0,q.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[f&&(0,q.jsx)(J,{disabled:c,handleMouseMove:y,onClick:v,icon:m().R,tooltipMessage:M?(0,q.jsx)(h()._H,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,q.jsx)(h()._H,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${r}`),(0,q.jsx)(Z,{collectionStore:t,targetCollectionStore:o,property:r,disabled:c||!p,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:0,width:"100%",...d},mobileStyle:{boxShadow:"none"},desktopTitleStyle:{marginTop:0,marginBottom:4,paddingLeft:0,paddingRight:8,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function J(e){const{disabled:t,handleMouseMove:o,onClick:n,icon:r,tooltipMessage:a}=e,i=(0,l().yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,q.jsx)(G().Z,{renderTooltip:()=>a,render:e=>(0,q.jsx)(K().Z,{style:i.buttonStyle,onMouseMove:o,onClick:n,disabled:t,...e,children:r(i.iconStyle)})})}const ee=function(e){const t=(0,n.useContext)(o(125659).cu),r=(0,i().qz)(void 0,o(692304).Z),c=(0,i().qz)(void 0,o(280977).Z),[p,m]=(0,n.useState)(10),{schema:y,format:v,locked:S,property:C,collectionStore:M,store:_,disabled:w,visibility:P,isInPeekRenderer:R,topBorder:F,pagePropertiesStore:V,blockPropertyValueOverlayStore:Z}=e,D=(0,a().O7)(),B=(0,i().VK)((()=>{const e=y[C];if(!e||"relation"!==e.type)return[];const t=_.getPropertyValue(C);return u().j$({relationValue:u().rq(t),propertySchema:e,getRecordModel:_.getRecordModel,includeDeleted:E().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:E().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:E().default.checkGate({gateName:"relations_show_no_access"})})}),[y,C,_],{useDeepEqual:!0}),A=(0,i().VK)((()=>B.length),[B.length]),O=(0,n.useCallback)(((e,t)=>function(e,t,o,n,r,a,i,l){const s=r[a];if(!s||"relation"!==s.type)return;const c=d().j0(s);if(!c)return;const p=U().NW.createChildStore(i,c);if(!(0,N().OY)(i)||!a)return;const g=i.getPropertyValue(a),m=u().j$({relationValue:u().rq(g),propertySchema:s,getRecordModel:i.getRecordModel,includeDeleted:E().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:E().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:E().default.checkGate({gateName:"relations_show_no_access"})}),y=[...e.map((e=>({id:e,spaceId:n.pointer.spaceId,table:f().iU}))),...m.slice(e.length)];ne({newValues:y,oldValues:m},p,i,a,o),b().yT(o,{from:"relation_section"}),k().sv({store:l,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition,footerFocused:!1}})}(e,t,D,M,y,C,_,r)),[D,M,y,C,_,r]),G=(0,n.useCallback)(((o,n,r)=>ie(o,n,r,D,e.blockPropertyValueOverlayStore,_,C,t,J)),[t,D,C,e.blockPropertyValueOverlayStore,_]),J=(0,n.useRef)(null),ee=(0,a().Fy)(),le=y[C],se=(0,i().VK)((()=>null==t?void 0:t.permissionScopesStore.state),[t]),ce=(0,i().VK)((()=>{if("relation"===(null==le?void 0:le.type)&&t)return le}),[t,le]),de=(0,i().VK)((()=>{if(!ce)return;const e=d().j0(ce);return e?U().NW.createChildStore(_,e):void 0}),[ce,_]),ue=(0,i().VK)((()=>(null==de?void 0:de.canEdit())??!1),[de]),pe=(0,i().VK)((()=>{const e=M.getSchema()[C];return Boolean(e&&d().NK(e))}),[M,C]),ge=(0,i().VK)((()=>_.canEdit()),[_]),me=(0,i().VK)((()=>(0,L().Wt)(_)),[_]),fe=(0,l().yK)((e=>({addNewRelationButtonWrapper:te(e),addNewRelationButtonIcon:oe(e,ee.isMobile),replacePageSprint:{color:e.mediumTextColor}})),[ee.isMobile]),ye=(0,n.useMemo)((()=>B.slice(0,p)),[B,p]),he=(0,i().VK)((()=>(null==de?void 0:de.getFormatStore().getKeyStore("app_config_uri").getValue())===s().p$),[de]),ve=1===(null==ce?void 0:ce.limit),be=!(ee.isMobile||w||S||ve),Se=(0,o(206658).E)(_),Ce=(0,i().VK)((()=>{var e;return"hide"===(null==Se||null===(e=Se.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[Se]),xe=(0,n.useCallback)((()=>{de&&ce&&(he?re(de,e.store,e.property,B,D):pe||ve?G(!0):ae(B.length>=p?p:B.length+1,de,"relation_section_footer",D,_,C,M,p,m,t,ce))}),[t,M,p,D,G,ve,pe,he,C,e.property,e.store,ce,B,_,de]),Me=(0,i().VK)((()=>{if(!de||!ce||!M)return[];const e=de.getFormatStore().getKeyStore("app_config_uri").getValue()===s().p$;return ye.reduce(((n,a,i)=>{const l=U().G.createChildStore(_,a),s=l.getAssociatedCollectionStore();if((null==s?void 0:s.id)===d().F0(ce)){const a={key:l.id,render:n=>{let{ref:a,...s}=n;return(0,q.jsx)(o(320197).a,{...s,canDrag:be&&1!==ce.limit&&_.canEdit(),schema:y,propertySchema:ce,collectionStore:M,collectionId:M.id,targetCollectionStore:de,relatedPageStore:l,disabled:w,locked:S,isSelected:!0,pageStore:_,property:C,rowType:"section",onActionButtonClick:()=>function(e,t,o,n,r,a,i,l,s,c){const d=a[i];if("relation"!==(null==d?void 0:d.type)||!c)return;if((0,L().Wt)(r))return;const u=d.limit,p=u?[]:e.filter((e=>e.id!==t.id));T().createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:n,canUndo:!0,perform:e=>{x().sf({store:r,propertyId:i,value:p,environment:n,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:c,analyticsData:{isFromBulkActionsToolbar:j().VM(l),analyticsFrom:j().Sy(H().C.Page)},isUnthrottled:!1})}}),b().WF(n,{from:"relation_section",collection_id:null==s?void 0:s.id,target_collection_id:null==o?void 0:o.id})}(B,l,de,D,_,y,C,Z,M,t),onMouseLeave:()=>r.unsetFocus(),onSecondaryButtonClick:()=>ae(i+1,de,"relation_section_inline",D,_,C,M,p,m,t,ce),onInsertInline:e?()=>{I().clear({environment:D})}:()=>ae(i+1,de,"relation_section_inline",D,_,C,M,p,m,t,ce),onTitleEsc:()=>{var e;0===(null===(e=l.getTitleStore())||void 0===e||null===(e=e.getValue())||void 0===e?void 0:e.length)&&"relation"===ce.type?function(e,t,o){if((0,L().Wt)(o))return;T().createAndCommit({userAction:"RelationSection.handleDeleteRelatedPage",environment:t,canUndo:!0,perform:t=>{const o={pointer:e.pointer,command:"update",path:[],args:{alive:!1}};T().applyOperation({store:e,operation:o,transaction:t})}})}(l,D,_):I().clear({environment:D})},onOpenPageButtonClick:()=>{o(463058).O({relationPointers:B,relatedPageStore:l,environment:D,from:"relation_section_inline"})},index:i+1,propertyLimit:ce.limit})},action:e=>{}};n.push(a)}return n}),[])}),[Z,be,t,M,p,w,D,ye,B,S,r,C,ce,y,_,de]);if(!("section_hide"!==P&&ce&&de&&t&&se))return null;if("minimal"===P)return(0,q.jsx)($,{property:C,propertySchema:ce,numberOfRelations:A,onHandleOpenProperty:G,onHandleRelationPropertyPageSectionRefMount:e=>{e&&(J.current=e)},schema:y,format:v,disabled:w,locked:S,canConfigureCollection:se.canConfigureCollection,blockStore:_,collectionStore:M,collectionContextStore:t,isInPeekRenderer:R,targetCollectionStore:de,pagePropertiesStore:V,shouldHideIcon:Ce});const ke=Me.map((e=>e.key.toString())),_e=(0,q.jsx)(W().ZP,{type:W().iW.Vertical,store:r,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,q.jsx)(z().Z,{...e,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,children:be?(0,q.jsx)(o(119891).ZP,{direction:"vertical",keys:ke,renderKey:t=>e.children[ke.indexOf(t)],onDrop:O,store:c}):e.children}),items:Me}]});return(0,q.jsx)(X,{collectionContextStore:t,isConnectedRelation:pe,title:e.propertyRowName??(0,q.jsx)(Y().Z,{schema:y,format:v,property:C,blockStore:_,collectionStore:M,disabled:w,locked:S,canConfigureCollection:se.canConfigureCollection,styleVariants:{width:{variant:"hug-content"},height:{variant:"small"},fontWeight:"medium",size:"small"},isInPeekRenderer:R,pagePropertiesStore:V,hideIcon:Ce}),collectionStore:M,targetCollectionStore:de,property:C,showRight:!0,disabled:w,schema:y,format:v,locked:S,canEditTargetCollection:ue,canConfigureCollection:se.canConfigureCollection,canEditCurrentPage:ge,handleMouseMove:e.handleMouseMove,onHandleOpenProperty:()=>{ie(!1,void 0,void 0,D,Z,_,C,t,J)},onHandleRelationPropertyPageSectionRefMount:e=>{e&&(J.current=e)},onTitleEnter:()=>ae(void 0,de,"relation_section_inline",D,_,C,M,p,m,t,ce),handleClearProperty:()=>re(de,_,C,B,D),topBorder:F,children:(0,q.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",width:"100%",...ee.isMobile&&{paddingLeft:"none"}},onMouseMove:e.handleMouseMove,onMouseLeave:e.handleMouseLeave,children:[_e,B.length>p&&(0,q.jsx)(K().Z,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>m(p+10),children:(0,q.jsx)(o(762141).Z,{count:B.length-p,format:o(38883).lo.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),ue&&ge&&!S&&!me&&(0,q.jsx)(K().Z,{style:fe.addNewRelationButtonWrapper,onClick:xe,disabled:w||S,children:0===A?(0,q.jsxs)(q.Fragment,{children:[(0,g().R)({...fe.addNewRelationButtonIcon,marginLeft:6,marginRight:6}),(0,q.jsx)(h()._H,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"})]}):(0,q.jsxs)(q.Fragment,{children:[he?(0,o(916539).R)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===ce.limit?(0,o(151126).h)(fe.addNewRelationButtonIcon):(0,g().R)(fe.addNewRelationButtonIcon),(0,q.jsxs)("div",{style:Q,children:[he&&(0,q.jsx)("span",{style:fe.replacePageSprint,children:(0,q.jsx)(h()._H,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!he&&(1===ce.limit?(0,q.jsx)(h()._H,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace"}):(0,q.jsx)(h()._H,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"}))]})]})})]})},C)};function te(e){return{display:"flex",alignItems:"center",color:e.lightTextColor,borderRadius:4,paddingRight:4,height:32,width:"100%",fontSize:14}}function oe(e,t){return{width:16,height:16,marginRight:t?7:11,marginTop:1,marginLeft:5,fill:e.lightIconColor}}function ne(e,t,o,n,a){if(!(0,N().OY)(o)||!n)return;let i;T().createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:a,canUndo:!0,perform:r=>{const l=t.id;if(e.newPage&&l){const n=y().TPx(e.newPage.name);i=w().j4({environment:a,id:e.newPage.id,type:c().Ti.page,properties:{title:n},spaceId:e.newPage.spaceId,inMemoryRecordCache:t.inMemoryRecordCache,transaction:r}),_().zw({childStore:i,parentStore:t,transaction:r});const l=U().G.createChildStore(o,i.pointer),s=t.getDefaultTemplatePageStore();s&&M().ob({title:{text:n},environment:a,store:l,templateStore:s,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_page_section"})}if(e.newValues){const t=u().ow(e.newValues),i=o.getPropertyStore(n);P().sO({environment:a,store:i,value:t,transaction:r})}}}),r().default.afterNextFlush((()=>{if(!i)return;const e=O().Z.findRow(i.id,"section",n);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),r={start:{index:0,store:o},end:{index:0,store:o}};I().setMultiSelection({multiSelection:r})}))}function re(e,t,o,n,r){ne({newValues:[],oldValues:n},e,t,o,r)}function ae(e,t,o,n,r,a,i,l,s,c,d){if(!d||"relation"!==d.type)return;if(!r.canEdit())return;if((0,L().Wt)(r))return;const p=i.pointer.spaceId,g=d.limit,m=(0,B().Ii)({environment:n,table:f().iU,spaceId:p}),y=m.id;if(!(0,N().OY)(r)||!a)return;const h=r.getPropertyValue(a),v=u().j$({relationValue:u().rq(h),propertySchema:d,getRecordModel:r.getRecordModel,includeDeleted:E().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:E().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:E().default.checkGate({gateName:"relations_show_no_access"})});e&&e+1>l&&s(e+1);ne({newPage:{id:y,spaceId:p,name:""},newValues:g?[m]:e?[...v.slice(0,e),m,...v.slice(e)]:[m,...v],oldValues:v},t,r,a,n),S().W(n,{...(0,D().Pn)(c),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:y,creating_block_id:y})}function ie(e,t,o,n,r,a,i,l,s){const c=s.current;if(!(c&&c instanceof Element))return;if((0,L().Wt)(a))return;const d=o?null==o?void 0:o.getBoundingClientRect():c.getBoundingClientRect(),u=e?d.top+A().Mu:d.top+5,p=new DOMRect(d.left,u,d.width,d.height);C().bA({environment:n,blockPropertyValueOverlayStore:r,store:a,property:i,rect:p,format:H().C.Page,mode:t,collectionContextStore:l}),b().ud(n,{from:"relation_section"})}},384152:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(667294),r=o(785893);const a=n.forwardRef((function(e,t){const{children:n,property:a,store:i}=e,l=(0,o(802729).C)({propertyId:a,store:i})||[];return(0,r.jsx)("div",{ref:t,className:l.length?l.join(" "):void 0,children:n})}))},330982:(e,t,o)=>{o.d(t,{t:()=>i});o(667294);var n=()=>o(611253),r=()=>o(135499),a=o(785893);function i(e){const{imageRef:t,url:o,blockStore:i,environment:l}=e;return e=>{if(e.stopPropagation(),e.preventDefault(),!t.current)return;const s=t.current.getBoundingClientRect(),c=s.width/s.height;n().ui({environment:l,renderFullScreenNode:()=>(0,a.jsx)(r().Z,{url:o,isAuthenticated:!0,permissionRecord:i.pointer,width:window.innerWidth,render:(e,t)=>(0,a.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:s,contentAspectRatio:c,imageUrl:o,blockStore:i})}}},690982:(e,t,o)=>{o.d(t,{B:()=>B});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(241792),o(228244);var n=o(667294),r=()=>o(492788),a=()=>o(219727),i=()=>o(732811),l=()=>o(142735),s=()=>o(846550),c=()=>o(226413),d=()=>o(532850),u=()=>o(451122),p=()=>o(95886),g=()=>o(215134),m=()=>o(788860),f=()=>o(513670),y=()=>o(250303),h=()=>o(971928),v=()=>o(102182),b=()=>o(990966),S=()=>o(269299),C=()=>o(922646),x=()=>o(852282),M=()=>o(949842),k=()=>o(466970),_=()=>o(162178),w=()=>o(998901),P=()=>o(735697),I=()=>o(1910),T=()=>o(206352),R=()=>o(291198),F=()=>o(192106),V=()=>o(654133),Z=()=>o(96778),j=()=>o(356321),D=o(785893);const B=(0,n.forwardRef)((function(e,t){const{property:r,propertySchema:i,format:s}=(0,n.useContext)(Z().OU),{collectionStore:u,disabled:p,locked:g,store:m,formQuestionStore:f,formDataStore:y}=e,{isMobile:h}=(0,a().Fy)(),v=(0,l().VK)((()=>{var e;return"multi_select"===(null==i?void 0:i.type)?null==f||null===(e=f.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0}),[f,i]),b=(0,o(469753).J8)({formQuestionStore:f,propertySchema:i}),S=(0,l().VK)((()=>i&&(0,c().cu)(i)?i.options??[]:[]),[i]),C=(0,l().VK)((()=>{var e;const t=null==y||null===(e=y.getFormState())||void 0===e?void 0:e.draftFormBlockStore;if(!r||!t)return new Set;const o=null==t?void 0:t.getPropertyValue(r),n=(0,d().ib)(o,S);return new Set(n.map((e=>e.id)))}),[y,S,r]),x=(0,l().VK)((()=>`form-question-${null==f?void 0:f.id}`),[f]);return s!==j().C.FormEditor||g?(0,D.jsx)("div",{style:{marginTop:8,marginLeft:h?void 0:-8,display:"flex",gap:h?4:0,flexDirection:"column"},children:S.map((e=>{let t=p;return v&&C.size>=v&&!b&&(C.has(e.id)||(t=!0)),(0,D.jsx)(A,{store:m,disabled:t,option:e,allOptions:S,showRadioButtonSelector:b,questionName:x},e.id)}))}):(0,D.jsx)(L,{options:S,collectionStore:u,showRadioButtonSelector:b,formQuestionStore:f})}));function L(e){const t=(0,a().O7)(),[r,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),{options:g,collectionStore:y,showRadioButtonSelector:v,formQuestionStore:b}=e,{property:S}=(0,n.useContext)(Z().OU),C=(0,l().VK)((()=>y.getSchema()),[y]),x=(0,s().yK)((e=>({addOptionButtonStyle:{color:e.lightTextColor,fill:e.lightTextColor},selectOptionList:{marginTop:g.length>0?4:0},newSelectOption:{marginTop:g.length>0?0:4}})),[g]);return S?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(o(119891).ZP,{direction:"vertical",style:x.selectOptionList,keys:null==g?void 0:g.map((e=>e.value)),disabled:c,onDragStart:()=>p(!0),onDragEnd:()=>p(!1),renderKey:e=>{const t=g.find((t=>t.value===e));return t?(0,D.jsx)(O,{type:"persisted",option:t,options:g,showRadioButtonSelector:v,isDragging:u,collectionStore:y,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:b},t.id):null},onDrop:e=>{h().n6({newValues:e,property:S,schema:C,collectionStore:y,environment:t})}}),r?(0,D.jsx)("div",{style:x.newSelectOption,children:(0,D.jsx)(O,{type:"temporary",collectionStore:y,options:g,showRadioButtonSelector:v,isDragging:u,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:b})}):null,(0,D.jsx)(o(265640).D,{onMouseDown:e=>{(0,M().ZP)({event:e,context:M().Af.EditorMouseDown,callback:f().yR})},icon:e=>(0,o(159732).R)({...e,width:18,marginLeft:1,marginRight:11,fill:x.addOptionButtonStyle.fill}),style:{color:x.addOptionButtonStyle.color,marginLeft:4,marginTop:4},onClick:e=>{i(!0)},children:(0,D.jsx)(m()._H,{id:"questionModule.formSelectMultiSelectProperty.addOption",defaultMessage:"Add option"})})]}):null}const N=6;function A(e){const{option:t,allOptions:r,store:i,disabled:u,showRadioButtonSelector:p,questionName:g}=e,m=(0,a().O7)(),{isMobile:f}=(0,a().Fy)(),{format:y,property:h,propertySchema:v}=(0,n.useContext)(Z().OU),b=(0,l().VK)((()=>null==v?void 0:v.type),[v]),C=(0,l().VK)((()=>{if(!h||!v||!(0,c().cu)(v))return!1;const e=i.getPropertyValue(h);let o=[];if("select"===v.type){const t=(0,d().P4)(e,r);o=t?[t]:[]}else o=(0,d().ib)(e,r);return o.some((e=>e.value===t.value))}),[i,t,r,v,h]),x=(0,s().yK)((e=>({selectorButton:{width:"calc(100% + 16px)",borderRadius:N},selectorButtonInner:{border:"none",padding:"4px 8px",borderRadius:N,...f?{backgroundColor:"light"===e.mode?e.accentColors.gray[30]:e.accentColors.gray[100]}:{}},selectorButtonPressed:{backgroundColor:e.buttonPressedBackground},selectorButtonHovered:{backgroundColor:e.buttonHoveredBackground},rowPadding:{padding:y===j().C.FormEditor?"0px 0px 0px 16px":void 0}})),[y,f]),M=(0,n.useCallback)((()=>{h&&v&&(0,c().cu)(v)&&("multi_select"!==v.type||p?S().createAndCommit({userAction:"FormSelectProperty.handleSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{t&&o(970105).sO({environment:m,store:i.getPropertyStore(h),value:(0,o(955620).TPx)(t.value),transaction:e})}}):S().createAndCommit({userAction:"FormSelectProperty.handleMultiSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{C?S().applyOperation({transaction:e,store:i.getPropertyStore(h),operation:{path:["properties",h],pointer:i.pointer,command:"removeSelectOption",args:{option:t.value}}}):S().applyOperation({transaction:e,store:i.getPropertyStore(h),operation:{path:["properties",h],pointer:i.pointer,command:"addSelectOptionAfter",args:{option:t.value}}})}}))}),[m,t,C,v,h,i,p]);return v&&(0,c().cu)(v)?(0,D.jsx)("div",{style:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:(0,D.jsx)(o(212493).jX,{direction:"row",padding:x.rowPadding.padding,children:(0,D.jsx)(o(154186).Z,{hoveredStyle:x.selectorButtonHovered,pressedStyle:x.selectorButtonPressed,style:x.selectorButton,disallowTabbing:!0,children:(0,D.jsx)(F().n,{style:x.selectorButtonInner,name:g,isDisabled:u,label:t.value,onChange:M,selectorSize:"large",isSelected:y===j().C.FormViewer&&C,value:"select_option",selectType:"select"===b||p?"radio":"checkbox",selectAlignYAxis:"center"})})})}):null}function O(e){const t=(0,a().O7)(),o=(0,m().YB)(),{type:d,collectionStore:S,formQuestionStore:M,option:j,options:B,isDragging:L,setNewOptionInput:N,setDisableDragging:A,showRadioButtonSelector:O}=e,[E,U]=n.useState((null==j?void 0:j.value)??""),[H,K]=(0,n.useState)(!1),[W,z]=(0,n.useState)(!1),[G,Y]=(0,n.useState)(!1),q=(0,k().E)("forms_conditional_logic"),Q=(0,_().oR)();(0,i().K)((()=>{"temporary"===d&&(Y(!0),z(!0))}));const{property:$,propertySchema:X,collectionContextStore:J}=(0,n.useContext)(Z().OU),ee=(0,l().VK)((()=>null==M?void 0:M.getParentStore()),[M]),{currentQuestionModuleAndArea:te,modulesByArea:oe}=(0,l().VK)((()=>{const e=null==ee?void 0:ee.getModules();if(!e||!M)return{undefined:void 0,modulesByArea:e};return{currentQuestionModuleAndArea:(0,g().bF)({modulesByArea:e,find:e=>"formQuestion"===e.type&&e.formQuestionId===M.id}),modulesByArea:e}}),[M,ee]),ne=(0,n.useCallback)((()=>{if(!$||!X||!(0,c().cu)(X))return;const e=E.trim();e?("alphabetical"===X.auto_sort_options||"reverse_alphabetical"===X.auto_sort_options?h().P3({modification:{type:"autoSortInsert",newValue:e},property:$,propertySchema:X,options:B,environment:t,collectionStore:S}):h().P3({modification:{type:"keyedObjectListAfter",newValue:e},property:$,propertySchema:X,options:B,environment:t,collectionStore:S}),N(!1),J&&y().$q({environment:t,collectionContextStore:J,property:$,from:"form_editor",action:"select_add_option"})):N(!1),Y(!1)}),[$,N,J,X,B,t,E,S]),re=(0,n.useCallback)((e=>{$&&j&&X&&(0,c().cu)(X)?(e?h().yW({environment:t,option:j,property:$,propertySchema:X,collectionStore:S}):h().P3({modification:{type:"keyedObjectListRemove",id:j.id},property:$,propertySchema:X,environment:t,collectionStore:S}),J&&y().$q({environment:t,collectionContextStore:J,property:$,from:"form_editor",action:"select_delete_option"}),N&&N(!1),Y(!1),z(!1),A(!1)):N&&N(!1)}),[$,N,J,X,j,z,A,t,S]),ae=(0,n.useCallback)((()=>{if(!($&&j&&X&&(0,c().cu)(X)))return;const e=E.trim();e?(e&&e!==(null==j?void 0:j.value)&&(h().P3({modification:{type:"keyedObjectListUpdate",option:j,newValue:e},property:$,propertySchema:X,options:B,environment:t,collectionStore:S}),J&&y().$q({environment:t,collectionContextStore:J,property:$,from:"form_editor",action:"select_rename_option"})),Y(!1),z(!1),A(!1)):re()}),[$,J,re,X,t,z,A,j,B,E,S]),ie=(0,n.useCallback)((()=>{$&&X&&(0,c().cu)(X)&&te&&ee&&j&&C().zM({environment:t,layoutStore:ee,currentQuestionModule:te.module,area:te.area,property:$,filterValue:{type:X.type,value:j},setModuleSelection:null==Q?void 0:Q.setModuleSelection,sessionId:(null==Q?void 0:Q.sessionId)??""})}),[$,t,te,ee,j,Q,X]),le=f().Ds((()=>K(!0)),5),se=le,ce=(0,n.useCallback)((()=>{K(!1),le.cancel()}),[le]),de=(0,n.useMemo)((()=>H&&!W),[H,W]),ue=(0,n.useMemo)((()=>H&&!W&&!L),[W,L,H]),pe=(0,n.useMemo)((()=>{if(null==j||!j.value||!X)return!1;const e=q&&H&&!W&&!L,t=null==te?void 0:te.module.conditionalGroups,o="select"===X.type?{property:$,filter:{operator:"enum_is",value:{type:"exact",value:j.value}}}:{property:$,filter:{operator:"enum_contains",value:{type:"exact",value:j.value}}},n=null==t?void 0:t.some((e=>f().Xy(e.trigger,o))),r=(0,x().l)((null==oe?void 0:oe.form_conditional_modules)??{},null==te?void 0:te.module);return e&&!n&&!r}),[W,L,H,q,te,$,null==j?void 0:j.value,X,oe]),ge=(0,s().yK)((e=>({container:{display:"flex",alignItems:"center",width:"calc(100% + 16px)",marginLeft:-8,padding:"2px 4px",borderRadius:6,backgroundColor:H?e.buttonHoveredBackground:void 0,cursor:"grab"},dragHandle:{position:"absolute",zIndex:2,marginLeft:"-2px"},innerContainer:{display:"flex",alignItems:"center",padding:"0px 0px 0px 16px",width:"100%"}})),[H]);return $&&X&&(0,c().cu)(X)?(0,D.jsxs)("div",{style:ge.container,onMouseMove:se,onMouseLeave:ce,children:[de&&(0,D.jsx)(P().Z,{width:16,height:24,disallowTabbing:!0,disableDrag:W,tooltipPlacement:w().Placement.Left,hideClickMessage:!0,style:ge.dragHandle}),(0,D.jsxs)("div",{style:ge.innerContainer,children:[(0,D.jsx)(F().n,{style:{border:"none",padding:0,cursor:"grab",flexGrow:0},isDisabled:!0,label:null,isSelected:!1,selectorSize:"large",value:"select_option",selectType:"select"===X.type||O?"radio":"checkbox"}),(0,D.jsx)(T().Z,{debugName:"Form question option",capture:W,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,D.jsx)(R().Z,{value:E,style:{padding:"2px 0px",paddingRight:3,maxWidth:ue?"calc(100% - 50px)":"100%",flexGrow:1,overflowX:"hidden"},focus:W,format:R().B.Transparent,onMouseDown:e=>e.stopPropagation(),onFocus:()=>{A(!1),G||b().clear({environment:t})},onClick:()=>z(!0),onChange:e=>{Y(!1);const t=/,/g;t.test(e.target.value)&&v().oV({label:(0,D.jsx)(m()._H,{id:"questionModule.formSelectMultiSelectProperty.commaWarning",defaultMessage:"Commas are currently not supported."})});const o=e.target.value.replace(t,"").trim();U(o)},onKeyDown:e=>{"Backspace"===e.key&&""===E&&re()},onBlur:"temporary"===d?ne:ae,onSubmit:e=>{"temporary"===d?ne():ae(),r().default.afterNextFlush((()=>{N(!0)}))}})}),pe&&(0,D.jsx)(V().Z,{placement:w().Placement.Top,renderTooltip:()=>(0,D.jsx)(m()._H,{defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),render:e=>(0,D.jsx)(I().Z,{style:{width:20,height:20,flexGrow:0,transform:"rotate(90deg)"},onClick:ie,icon:u().B,ariaLabel:o.formatMessage({defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),...e})}),ue&&(0,D.jsx)(I().Z,{style:{width:20,height:20,flexGrow:0},onClick:()=>re(!0),icon:p().y,ariaLabel:o.formatMessage({defaultMessage:"Delete option",id:"BlockPropertyRouter.FormSelectProperty.TrashIcon.title"})})]})]}):null}},11593:(e,t,o)=>{o.d(t,{e:()=>r,g:()=>a});var n=()=>o(677559);const r=new(n().Ss)("formPropertyRenderer",(()=>o.e(64331).then(o.bind(o,403738)))),a=(0,n().iS)(r,(e=>e.default))},596324:(e,t,o)=>{o.d(t,{O:()=>C});o(667294);var n=()=>o(219727),r=()=>o(142735),a=()=>o(846550),i=()=>o(226413),l=()=>o(998411),s=()=>o(960482),c=()=>o(788860),d=()=>o(707513),u=()=>o(463058),p=()=>o(582835),g=()=>o(998901),m=()=>o(128076),f=()=>o(154186),y=()=>o(654133),h=o(785893);const v=200,b=75,S=75;function C(e){let{blockStore:t,collectionContextStore:o,columnWidth:C}=e;const x=(0,r().Kw)(o.currentSubitemFormatStoreForCollectionStore),M=(0,r().VK)((()=>t.getAssociatedCollectionStore()),[t]),k=(0,r().VK)((()=>{var e;return null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType()}),[o]),_=(0,r().VK)((()=>{if(!x||!M)return;const e=M.getSchema()[x.property];return void 0!==e&&(0,i().p_)(e)?e:void 0}),[M,x]),w="table"===k||"list"===k||"timeline"===k,P=(0,n().O7)(),I=(0,c().YB)(),T=P.device.isMobile?b:v,R=(0,a().yK)((e=>({parentItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},button:{height:20,display:"flex",alignItems:"center",color:e.lightTextColor,borderRadius:6,padding:"0 6px"},parentTitle:{...w?{maxWidth:C?Math.min(T,C-S):T}:{},fontWeight:d().Ue.medium,fontSize:d().JB.UISmall.desktop,...d().Yu}})),[C,w,T]),F=(0,r().VK)((()=>x&&_?(0,p().xb)({store:t,subitemFormat:x,propertySchema:_}):[]),[t,x,_]),V=(0,r().VK)((()=>{if(0===F.length)return;const e=F[0];return m().G.createChildStore(t,e)}),[t,F]),Z=(0,r().VK)((()=>{var e;return null==V||null===(e=V.getModel())||void 0===e?void 0:e.getRenderTitleWithPlaceholder({getRecordModel:V.getRecordModel,userTimeZone:(0,l().r)(),intl:I})}),[V,I]);return(0,r().VK)((()=>(0,p().Cr)({collectionContextStore:o,blockStore:t})),[o,t])&&V?(0,h.jsx)(y().Z,{renderTooltip:()=>(0,h.jsx)("div",{children:Z}),alignment:g().Alignment.Start,delayThreshold:300,render:e=>(0,h.jsxs)(f().Z,{ariaLabel:I.formatMessage({id:"parentItemIndicator.button.openParentSidePeek.ariaLabel",defaultMessage:"Open parent in side peek"}),onClick:()=>{u().O({relationPointers:F,relatedPageStore:V,environment:P,from:"relation_property",peekMode:"side_peek"})},style:R.button,...e,children:[(0,s().v)(R.parentItemIcon),(0,h.jsx)("div",{style:R.parentTitle,children:Z})]})}):null}},973509:(e,t,o)=>{o.d(t,{B:()=>u});o(667294);var n=()=>o(142735),r=()=>o(846550),a=()=>o(226413),i=()=>o(531328),l=()=>o(707513),s=()=>o(887430),c=()=>o(582835),d=o(785893);function u(e){let{blockStore:t,collectionContextStore:o,wrapperStyle:u}=e;const p=(0,n().Kw)(o.currentSubitemFormatStoreForCollectionStore),g=(0,n().VK)((()=>(0,s().Bm)({store:t,collectionContextStore:o})),[o,t]),m=(0,n().VK)((()=>{if(!p||!g)return;const e=g.getSchema()[p.property];return void 0!==e&&(0,a().p_)(e)?e:void 0}),[g,p]),f=(0,r().yK)((e=>({subItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",verticalAlign:" text-top",paddingRight:8,...u},numSubitemsSpan:{fontSize:l().JB.UISmall.desktop,fontWeight:l().Ue.medium,color:e.lightTextColor}})),[u]),y=(0,n().VK)((()=>p&&m?(0,c().CJ)({store:t,subitemFormat:p,propertySchema:m}):[]),[t,p,m]);return(0,n().VK)((()=>(0,c().wI)({collectionContextStore:o,blockStore:t})),[o,t])&&0!==y.length?(0,d.jsxs)("span",{style:f.wrapper,children:[(0,i().S)(f.subItemIcon),(0,d.jsx)("span",{style:f.numSubitemsSpan,children:y.length})]}):null}},783901:(e,t,o)=>{o.d(t,{z:()=>m});var n=o(667294),r=()=>o(846550),a=()=>o(836083),i=()=>o(116223),l=()=>o(501274),s=()=>o(496205),c=()=>o(788860),d=()=>o(696459),u=()=>o(707513),p=()=>o(603885),g=o(785893);function m(e){const{verificationValue:t,fontSize:o=p().z6}=e,m=(0,c().YB)(),f=(0,n.useMemo)((()=>s().WN(t)),[t]),y=f.type,h=(0,r().yK)((e=>({icon:{width:"expired"===y?8:14,height:"expired"===y?9:14,fill:"verified"===y?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:u().Ue.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:p().Ac},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[y,o]);if("none"===y)return null;let v=null,b=null;const S=h.caption;switch(y){case"verified":v=(0,a().f)({...h.icon}),b=f.isIndefinite?(0,g.jsx)(c()._H,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(c()._H,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:l().mb({dateTime:f.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,g.jsx)("div",{style:h.expiredIconContainer,children:(0,i().X)({...h.icon})}),b=(0,g.jsx)(c()._H,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired.text",values:{timeFromMoment:s().kY(f.dateTimeRange.end.setLocale(m.locale))}});break;default:(0,d().t1)(y)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,g.jsx)("div",{style:S,children:b})]})}},593067:(e,t,o)=>{o.d(t,{Z:()=>f});o(667294);var n=()=>o(219727),r=()=>o(142735),a=()=>o(934158),i=()=>o(696056),l=()=>o(989478),s=()=>o(501274),c=()=>o(788860),d=()=>o(696459),u=()=>o(826955),p=()=>o(51620),g=()=>o(239444),m=o(785893);function f(e){const{isMobile:t}=(0,n().Fy)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(y,{...e})})}function y(e){const{verificationState:t,blockStore:o}=e,n=(0,c().YB)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(c()._H,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(h,{actorPointer:t.actorPointer,blockStore:o}),date:(0,s().mb)({dateTime:t.startDateTime,intl:n})}}):(0,m.jsx)(c()._H,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(h,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().pe)({luxonRange:t.dateTimeRange,intl:n})}});case"expired":return(0,m.jsx)(c()._H,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(h,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().pe)({luxonRange:t.dateTimeRange,intl:n})}});default:(0,d().t1)(t)}}function h(e){const{actorPointer:t,blockStore:o}=e,n=(0,r().VK)((()=>u().t1.createChildStore(o,t)),[o,t]),s={display:"flex",marginLeft:4,marginRight:4};return n.table===l().KJ?(0,m.jsx)(g().Z,{userStore:n,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):n.table===i().cZ?(0,m.jsx)(p().Z,{botStore:n,style:s,avatarSize:16}):n.table===a().y0?(0,m.jsx)(g().Z,{userStore:void 0,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):void(0,d().t1)(n)}},598645:(e,t,o)=>{o.d(t,{p:()=>a});var n=()=>o(677559);const r=new(n().Ss)("FilePropertyModule",(async()=>await o.e(80841).then(o.bind(o,73522)))),a=(0,n().kF)(r,(e=>e.FilePropertyModule))},968459:(e,t,o)=>{o.d(t,{r:()=>a});var n=()=>o(677559);const r=new(n().Ss)("PropertyModulePersonProperty",(async()=>await Promise.all([o.e(62743),o.e(53335),o.e(61171),o.e(63502),o.e(10553),o.e(72001)]).then(o.bind(o,840541)))),a=(0,n().kF)(r,(e=>e.PersonPropertyModule))},320197:(e,t,o)=>{o.d(t,{a:()=>a});var n=()=>o(677559);const r=new(n().Ss)("RelationMenuRow",(async()=>{const{RelationMenuRow:e}=await Promise.all([o.e(44832),o.e(39453)]).then(o.bind(o,290950));return{RelationMenuRow:e}})),a=(0,n().kF)(r,(e=>e.RelationMenuRow))},589024:(e,t,o)=>{o.d(t,{AB:()=>V,Sy:()=>C,TP:()=>T,Hw:()=>M,z0:()=>x,X9:()=>P,X7:()=>_,AF:()=>k,g0:()=>w,xE:()=>F,aJ:()=>R,VM:()=>S});o(267602),o(228244);var n=()=>o(506347),r=()=>o(15607),a=()=>o(226413),i=()=>o(532850);o(667294);const l={viewBox:"0 0 20 20",svg:(0,o(785893).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},s=(0,o(827282).IU)("arrowExpandDiagonal",l);var c=()=>o(165405),d=()=>o(850648),u=()=>o(996106),p=()=>o(955620),g=()=>o(513670),m=()=>o(696459),f=()=>o(916673),y=()=>o(326966),h=()=>o(356321),v=()=>o(429725),b=()=>o(527278);function S(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function C(e){switch(e){case h().C.Table:return"table";case h().C.Board:return"board";case h().C.ListView:return"list";case h().C.GalleryView:return"gallery";case h().C.Relation:case h().C.RelationSection:return"relation_section";case h().C.Timeline:return"timeline";case h().C.Calendar:return"calendar";case h().C.Page:return"page_properties";case h().C.CompactPage:return"compact_page";case h().C.Mini:return"mini_peek";case h().C.FormEditor:case h().C.FormViewer:case h().C.PropertyModule:return"property_module";default:(0,m().t1)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function M(e){const{store:t,property:o,propertySchema:r}=e,a=null==r?void 0:r.type;if("title"===a)return(0,v().ZP)({store:t,fullyQualified:!1,pageVisitSource:n().tY.LinkInPage});{const e=t.getPropertyValue(o);return i().Hw(a,e)}}function k(e){let t=(0,p().Jcv)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=f().Qc(t),n=o.host;if(o.protocol&&n||(o=f().Qc(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const r=t.toLowerCase().indexOf(n.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};n=t.slice(r,r+n.length);return{domain:n,restOfUrl:t.slice(r+n.length)}}function _(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(g().i2(t)||y().z4(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=b().Z.getIntl();return"percent"===o?u().uf(t,"percent",e):`${t} / ${n.maxValue}`}}function w(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,r().w)(t)}function P(e,t){switch(e){case"side_peek":return{icon:d().L,tooltip:b().Z.formatMessage(I.openInSidePeekTooltip),caption:t?"":b().Z.formatMessage(I.openAsPageTitle)};case"center_peek":return{icon:c().w,tooltip:b().Z.formatMessage(I.openInCenterPeekTooltip),caption:t?"":b().Z.formatMessage(I.openAsPageTitle)};case"full_page":return{icon:s,tooltip:b().Z.formatMessage(I.openAsPageTooltip),caption:t?"":b().Z.formatMessage(I.openAsPageTitle)};default:(0,m().t1)(e)}}const I=(0,o(788860).vU)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function T(e){const t=e.getSchema();if(t)for(const[n,r]of Object.entries(t)){var o;if(r&&"text"===r.type&&"summarize"===(null===(o=r.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function R(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!r)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function F(e){return e===h().C.FormEditor||e===h().C.FormViewer}function V(e){return Boolean(e&&!a().uk.includes(e.type))}},667247:(e,t,o)=>{o.d(t,{BG:()=>h,Ol:()=>x,SD:()=>S,Sn:()=>b,VN:()=>g,WD:()=>C,Zy:()=>M,nL:()=>v,v6:()=>f});var n=()=>o(714230),r=()=>o(332143),a=()=>o(803021),i=()=>o(646574),l=()=>o(996106),s=()=>o(788860),c=()=>o(513670),d=()=>o(696459),u=()=>o(527278);const p=(0,s().vU)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"},count_aggregations:{defaultMessage:"Count",id:"database.aggregationBucket.count"},percent_aggregations:{defaultMessage:"Percent",id:"database.aggregationBucket.percent"},statistics_aggregations:{defaultMessage:"More options",id:"database.aggregationBucket.more_options"},date_aggregations:{defaultMessage:"Date",id:"database.aggregationBucket.date"},rollup_aggregations:{defaultMessage:"Rollup",id:"database.aggregationBucket.rollup"}}),g={count:u().Z.formatMessage(p.count),count_values:u().Z.formatMessage(p.count_values),unique:u().Z.formatMessage(p.unique),show_unique:u().Z.formatMessage(p.show_unique),empty:u().Z.formatMessage(p.empty),not_empty:u().Z.formatMessage(p.not_empty),percent_empty:u().Z.formatMessage(p.percent_empty),percent_not_empty:u().Z.formatMessage(p.percent_not_empty),sum:u().Z.formatMessage(p.sum),average:u().Z.formatMessage(p.average),median:u().Z.formatMessage(p.median),min:u().Z.formatMessage(p.min),max:u().Z.formatMessage(p.max),range:u().Z.formatMessage(p.range),earliest_date:u().Z.formatMessage(p.earliest_date),latest_date:u().Z.formatMessage(p.latest_date),date_range:u().Z.formatMessage(p.date_range),checked:u().Z.formatMessage(p.checked),unchecked:u().Z.formatMessage(p.unchecked),percent_checked:u().Z.formatMessage(p.percent_checked),percent_unchecked:u().Z.formatMessage(p.percent_unchecked),count_per_group:u().Z.formatMessage(p.count_per_group),percent_per_group:u().Z.formatMessage(p.percent_per_group)},m=(0,s().vU)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),f={count:u().Z.formatMessage(m.count),count_values:u().Z.formatMessage(m.count_values),unique:u().Z.formatMessage(m.unique),show_unique:u().Z.formatMessage(m.show_unique),empty:u().Z.formatMessage(m.empty),not_empty:u().Z.formatMessage(m.not_empty),percent_empty:u().Z.formatMessage(m.percent_empty),percent_not_empty:u().Z.formatMessage(m.percent_not_empty),sum:u().Z.formatMessage(m.sum),average:u().Z.formatMessage(m.average),median:u().Z.formatMessage(m.median),min:u().Z.formatMessage(m.min),max:u().Z.formatMessage(m.max),range:u().Z.formatMessage(m.range),earliest_date:u().Z.formatMessage(m.earliest_date),latest_date:u().Z.formatMessage(m.latest_date),date_range:u().Z.formatMessage(m.date_range),checked:u().Z.formatMessage(m.checked),unchecked:u().Z.formatMessage(m.unchecked),percent_checked:u().Z.formatMessage(m.percent_checked),percent_unchecked:u().Z.formatMessage(m.percent_unchecked),count_per_group:u().Z.formatMessage(m.count_per_group),percent_per_group:u().Z.formatMessage(m.percent_per_group)},y=(0,s().vU)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),h={count:u().Z.formatMessage(y.count),count_values:u().Z.formatMessage(y.count_values),unique:u().Z.formatMessage(y.unique),show_unique:u().Z.formatMessage(y.show_unique),empty:u().Z.formatMessage(y.empty),not_empty:u().Z.formatMessage(y.not_empty),percent_empty:u().Z.formatMessage(y.percent_empty),percent_not_empty:u().Z.formatMessage(y.percent_not_empty),sum:u().Z.formatMessage(y.sum),average:u().Z.formatMessage(y.average),median:u().Z.formatMessage(y.median),min:u().Z.formatMessage(y.min),max:u().Z.formatMessage(y.max),range:u().Z.formatMessage(y.range),earliest_date:u().Z.formatMessage(y.earliest_date),latest_date:u().Z.formatMessage(y.latest_date),date_range:u().Z.formatMessage(y.date_range),checked:u().Z.formatMessage(y.checked),unchecked:u().Z.formatMessage(y.unchecked),percent_checked:u().Z.formatMessage(y.percent_checked),percent_unchecked:u().Z.formatMessage(y.percent_unchecked),count_per_group:u().Z.formatMessage(y.count_per_group),percent_per_group:u().Z.formatMessage(y.percent_per_group)},v={count_aggregations:u().Z.formatMessage(p.count_aggregations),percent_aggregations:u().Z.formatMessage(p.percent_aggregations),statistics_aggregations:u().Z.formatMessage(p.statistics_aggregations),date_aggregations:u().Z.formatMessage(p.date_aggregations)},b={count:n().Z.images.aggregations.countPng,count_values:n().Z.images.aggregations.countValuesPng,unique:n().Z.images.aggregations.uniquePng,show_unique:void 0,empty:n().Z.images.aggregations.emptyPng,not_empty:n().Z.images.aggregations.notEmptyPng,percent_empty:n().Z.images.aggregations.percentEmptyPng,percent_not_empty:n().Z.images.aggregations.percentNotEmptyPng,sum:n().Z.images.aggregations.sumPng,average:n().Z.images.aggregations.averagePng,median:n().Z.images.aggregations.medianPng,min:n().Z.images.aggregations.minPng,max:n().Z.images.aggregations.maxPng,range:n().Z.images.aggregations.rangePng,earliest_date:n().Z.images.aggregations.earliestDatePng,latest_date:n().Z.images.aggregations.latestDatePng,date_range:n().Z.images.aggregations.dateRangePng,checked:n().Z.images.aggregations.checkedPng,unchecked:n().Z.images.aggregations.uncheckedPng,percent_checked:n().Z.images.aggregations.percentCheckedPng,percent_unchecked:n().Z.images.aggregations.percentUncheckedPng,count_per_group:n().Z.images.aggregations.countPng,percent_per_group:n().Z.images.aggregations.percentCheckedPng};function S(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,d().t1)(e.operator)}}}function C(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":case"average":return t??"precision_2";case"sum":case"median":case"min":case"max":case"range":return t??void 0;default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return t??"precision_2";default:(0,d().t1)(e.operator)}}}function x(e){const{aggregationType:t,value:o,userTimeZone:n,dateFormat:s,numberPrecision:d}=e;if("date"===o.type){if(!(0,r().Fw)(t))return;if(!o.value)return;return"date_range"===t?(0,i().LU)(o.value,n,u().Z.getIntl()):(0,i().ZV)({value:a().QD(o.value),date_format:s??a().sF,userTimeZone:n,allowRelativeDates:!0,intl:u().Z.getIntl()})}if((0,r().Fw)(t))return;if("show_unique"===t)return;if("object"==typeof o.value)return;if("string"==typeof o.value)return o.value;let p;p=void 0===d||"precision_uncapped"===d?void 0===o.value?void 0:c().NM(o.value,5):o.value;const g=S(t,e.numberFormat);return(0,l().uf)(p,g,u().Z.getIntl(),void 0,d)}function M(e){const{aggregation:t,value:o,numberFormat:n,dateFormat:a,numberPrecision:i}=e,l=x({numberFormat:n,dateFormat:a,aggregationType:t?t.aggregator:"count",userTimeZone:e.userTimeZone,value:o,numberPrecision:i});if(null!=t&&t.enforceMaxAggregationLimit){const e=Number(l);if(e&&e>=r().GW)return r().GW-1+"+"}return l}},185697:(e,t,o)=>{o.d(t,{A:()=>a,K:()=>i});var n=()=>o(142735),r=()=>o(125659);function a(e){let{collectionStore:t,collectionContextStore:o,property:n}=e;return null!=o&&o.isMultiSourceView?t.getMappedProperty(n):n}function i(e){let{collectionStore:t,property:o}=e;const i=(0,r().DK)();return(0,n().VK)((()=>a({collectionStore:t,collectionContextStore:i,property:o})),[t,i,o])}},363936:(e,t,o)=>{o.d(t,{q:()=>a});var n=()=>o(680146);const r={};function a(e){const{throttleSeconds:t,...o}=e,a=`${e.from}:${e.type}`,i=r[a],l=Date.now();(!i||l-i>1e3*t)&&(r[a]=l,function(e){const{error:t,...o}=e;(0,n().rn)(t,o)}(o))}},817606:(e,t,o)=>{o.d(t,{_:()=>i});var n=()=>o(142735),r=()=>o(749826);const a=1*o(326966).hM;function i(){return(0,n().VK)((()=>r().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")??a),[])}},535950:(e,t,o)=>{o.d(t,{g:()=>a});var n=()=>o(142735),r=()=>o(958783);function a(e){const{blockId:t,propertyId:o}=e;return(0,n().VK)((()=>r().default.isPropertyWithDraftDiscussion({blockId:t,propertyId:o})),[t,o])}},584461:(e,t,o)=>{o.d(t,{b:()=>r,o:()=>l});var n=()=>o(466970);const r=Symbol("loading"),a=Object.freeze({recomputeSchedule:{type:"debounce",debounceMs:250,maxWaitMs:500,initialValue:r}}),i=Object.freeze({});function l(){return(0,n().E)("experimental_computed_store_defer_debounce")?a:i}},173113:(e,t,o)=>{o.d(t,{a:()=>u});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(226413),l=()=>o(417823),s=()=>o(989478),c=()=>o(876822),d=()=>o(749826);function u(e){const t=function(){const e=(0,r().O7)();return(0,a().VK)((()=>{var t;return(0,l().nS)({experimentService:d().default,actor:{table:s().KJ,id:e.currentUser.id??""},spaceId:(null===(t=c().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??""})}),[e.currentUser])}();return(0,n.useMemo)((()=>{var o;if(!t)return!1;if(!e)return!1;if(!i().p_(e))return!1;return Boolean(null===(o=e.permissions_data)||void 0===o?void 0:o.shared_by_enabled)}),[e,t])}},162178:(e,t,o)=>{o.d(t,{Dt:()=>r,J9:()=>a,PP:()=>s,eK:()=>l,oR:()=>i});o(821057);var n=o(667294);const r=(0,n.createContext)(null);function a(){const e=(0,n.useContext)(r);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function i(){return(0,n.useContext)(r)}r.displayName="BaseLayoutEditorContext";const l=(0,n.createContext)(null);function s(){const e=(0,n.useContext)(l);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}l.displayName="PageLayoutEditorContext"},231272:(e,t,o)=>{o.d(t,{Gm:()=>s,Uk:()=>i,gM:()=>l,rZ:()=>r});var n=()=>o(551242);const r=160,a=120,i=120;function l(e){let{isMobile:t,stackPropertyLabelAndValue:o,isPropertyInPageDetails:l}=e;if(o||!l)return;const s=a/n().t*100;return t?i:`min(max(${s}%, ${a}px), ${r}px)`}function s(e){let{stackPropertyLabelAndValue:t}=e;return t?{variant:"hug-content"}:{variant:"fixed"}}},206658:(e,t,o)=>{o.d(t,{E:()=>r});var n=()=>o(142735);function r(e){const t=(0,n().VK)((()=>function(e){if(!e)return;const t=null==e?void 0:e.getAssociatedCollectionStore();return null==t?void 0:t.getLayoutStore()}(e)),[e]);return t}},551242:(e,t,o)=>{o.d(t,{D:()=>i,t:()=>a});var n=()=>o(311562),r=()=>o(242921);const a=r().li;function i(e){let{environment:t,layoutArea:o,moduleType:i,pageViewBlockContext:l}=e;return("page_main"===o||"views_main_tab_modules"===o)&&"properties"===i||"properties"===i&&"page_details"===o&&(0,r().GH)({environment:t,isInPeek:l===n().S.PeekView})>=a}},973837:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(470928);class n extends(()=>o(442))().Z{findRow(e,t,o){return this.find((n=>n.relatedPageStoreId===e&&n.rowType===t&&n.property===o))}}const r=new n},341374:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{editMode:void 0,store:void 0}}cloneState(){return o(513670).d9(this.state)}}const r=new n},82548:(e,t,o)=>{o.d(t,{CollectionsAiAutofillProgressStore:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:n,stores:r,sessionIdForAnalytics:a}=e,i=r[0].getAssociatedCollectionId()??(null===(t=r[0].getCollectionStore())||void 0===t?void 0:t.id),l=a||o(956057).Il();return this.setState({type:"filling",propertySchema:n,collectionId:i,numBlocksToAutofill:r.length,numBlocksAutofilled:0,sessionId:l,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),l}}const r=new n},469203:(e,t,o)=>{o.d(t,{s:()=>d});var n=o(667294),r=()=>o(219727),a=()=>o(846550),i=()=>o(707513),l=()=>o(654133);var s=()=>o(998901),c=o(785893);function d(e){let{children:t,style:o,tooltipStyle:d,placement:u=s().Placement.Bottom}=e;const{isSafari:p}=(0,r().Fy)(),g=(0,n.useRef)(null),m=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(g),f=(0,a().yK)((()=>({overflowText:{...i().Yu,...o}})),[o]);return(0,c.jsx)(l().Z,{delayThreshold:500,placement:u,textWrap:!0,style:d,forceVisibleState:!(p||!m)&&void 0,renderTooltip:()=>m?t:void 0,render:e=>(0,c.jsx)("div",{ref:g,style:f.overflowText,...e,children:t})})}},395833:(e,t,o)=>{function n(e){switch(null==e?void 0:e.type){case"url":case"email":case"phone_number":return e;default:return}}o.d(t,{$:()=>n})},756191:(e,t,o)=>{o.d(t,{FR:()=>m,OY:()=>g,ic:()=>p,sB:()=>u,sG:()=>d,y_:()=>f});o(241792);var n=()=>o(513670),r=()=>o(696459),a=()=>o(834458),i=()=>o(193962),l=()=>o(455222),s=()=>o(177634);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,r().t1)(e)}}function d(e){switch(e.type){case l().$E.InvalidCharacter:return{...i().mr.InvalidCharacter,values:{errorCharacter:e.character}};case l().$E.UnclosedStringLiteral:return i().mr.UnclosedStringLiteral;case l().$E.UnclosedComment:return i().mr.UnclosedComment;case l().$E.TokenExpected:return{...i().mr.TokenExpected,values:{expectedToken:e.token}};case l().$E.StringLiteralContainsToken:return i().mr.StringLiteralContainsToken;case l().$E.ExpressionExpected:return i().mr.ExpressionExpected;case l().$E.PropertyTokenOrFunctionExpected:return i().mr.PropertyTokenOrFunctionExpected;case l().$E.EndOfInputExpected:return i().mr.EndOfInputExpected;case l().$E.UnexpectedError:return i().mr.UnexpectedError;case l().$E.TooDeeplyNested:return i().mr.TooDeeplyNested;default:(0,r().t1)(e)}}function u(e){switch(e.type){case l().h4.FunctionCallArgumentWrongType:case l().h4.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function p(e,t){let o;switch(t.type){case l().h4.ThisRowTypeNotFound:o=i().o8.ThisRowTypeNotFound;break;case l().h4.ThisRowNotBlockWithCollection:o=i().o8.ThisRowNotBlockWithCollection;break;case l().h4.MissingPropertyOnThisRow:o={...i().o8.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case l().h4.MissingContextVariable:{const e=(0,s().Xp)(t.token)?t.token.contextValueId:t.token.valueId;o={...i().o8.MissingContextVariable,values:{valueId:e}}}break;case l().h4.MissingBlock:o={...i().o8.MissingBlock,values:{blockId:t.token.blockId}};break;case l().h4.CallingNotFunction:o={...i().o8.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case l().h4.FunctionCallTooFewArguments:o={...i().o8.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case l().h4.FunctionCallUnexpectedArgument:o={...i().o8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case l().h4.FunctionCallArgumentWrongType:o={...i().o8.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case l().h4.MemberPropertyMismatchCollection:o={...i().o8.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case l().h4.MemberPropertyMissing:o={...i().o8.MemberPropertyMissing,values:{propertyName:t.property}};break;case l().h4.MemberPropertyTargetNotBlock:o=i().o8.MemberPropertyTargetNotBlock;break;case l().h4.MemberPropertyTypeInvalid:o={...i().o8.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case l().h4.UndefinedIdentifier:o={...i().o8.UndefinedIdentifier,values:{identifier:t.node.text}};break;case l().h4.UnifiedFunctionCannotFindFunction:o={...i().o8.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case l().h4.UnifiedFunctionNoArguments:o={...i().o8.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case l().h4.UnifiedFunctionTargetWrongType:o={...i().o8.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case l().h4.CannotRelativelyCompareTypes:o={...i().o8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case l().h4.CannotDoMathOnType:o={...i().o8.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case l().h4.UnaryMinusOnNonNumber:o={...i().o8.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case l().h4.IdentifierExpected:o=i().o8.IdentifierExpected;break;case l().h4.FunctionCallExpected:o={...i().o8.FunctionCallExpected,values:{functionName:t.functionName}};break;case l().h4.RenamedIdentifier:o={...i().o8.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case l().h4.RemovedFunction:o={...i().o8.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case l().h4.ContextVariableNotBlockWithCollection:o={...i().o8.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case l().h4.MissingPropertyOnContextVariable:o={...i().o8.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case l().h4.BlockPropertyTypeInvalid:o={...i().o8.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case l().h4.DisallowedReturnType:{const n=t.allowedReturnTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().o8.DisallowedReturnType,values:{allowedReturnType:e.formatList(n,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,a().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case l().h4.CrossSpacePropertyNotSupported:o={...i().o8.CrossSpacePropertyNotSupported};break;default:(0,r().t1)(t)}return{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function g(e,t){let o;switch(t.type){case l().FY.MissingThisRow:o=i().YG.MissingThisRow;break;case l().FY.MissingSchemaPropertyOnThisRow:o={...i().YG.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case l().FY.ThisRowBlockPropertyMismatchCollection:o=i().YG.ThisRowBlockPropertyMismatchCollection;break;case l().FY.MissingContextVariable:o={...i().YG.MissingContextVariable,values:{valueId:t.valueId}};break;case l().FY.IdentifierNotFound:o={...i().YG.IdentifierNotFound,values:{identifier:t.node.text}};break;case l().FY.CannotRelativelyCompareTypes:o={...i().YG.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case l().FY.CannotDoMathOnType:o={...i().YG.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case l().FY.CannotCallNonFunction:o={...i().YG.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case l().FY.UnifiedFunctionPropertyNotFound:o={...i().YG.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case l().FY.LibraryFunctionExecutionError:const n=t.error instanceof l().Mu?t.error:void 0;o=(null==n?void 0:n.info.type)===l().sj.DateInvalidDurationUnit?{...i().z8.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:n.info.invalidUnit}}:(null==n?void 0:n.info.type)===l().sj.CannotUseToNumberOnList?{...i().z8.CannotUseToNumberOnList}:(null==n?void 0:n.info.type)===l().sj.CannotRoundToNonInteger?{...i().z8.CannotRoundToNonInteger,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===l().sj.CannotRoundToTooManyDecimalPlaces?{...i().z8.CannotRoundToTooManyDecimalPlaces,values:{precision:n.info.precision}}:{...i().YG.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case l().FY.FunctionCallTooFewArguments:o={...i().YG.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case l().FY.FunctionCallUnexpectedArgument:o={...i().YG.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case l().FY.FunctionCallArgumentWrongType:o={...i().YG.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case l().FY.AccessingPropertyOnNonBlock:o=i().YG.AccessingPropertyOnNonBlock;break;case l().FY.MissingDataDependencyBlock:o={...i().YG.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case l().FY.MissingDataDependencyPerson:o={...i().YG.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case l().FY.MemberPropertyMismatchCollection:o=i().YG.MemberPropertyMismatchCollection;break;case l().FY.MissingPropertyOnSchemaForMemberProperty:o=i().YG.MissingPropertyOnSchemaForMemberProperty;break;case l().FY.UnaryMinusOnNonNumber:o={...i().YG.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case l().FY.UnexpectedRecoveryNode:o=i().YG.UnexpectedRecoveryNode;break;case l().FY.UnexpectedError:o=i().YG.UnexpectedError;break;case l().FY.DepthExceeded:o=i().YG.DepthExceeded;break;case l().FY.CycleDetected:o=i().YG.CycleDetected;break;case l().FY.DownstreamParseFailure:o=i().YG.DownstreamParseFailure;break;case l().FY.MaxEvaluationTimeExceeded:o=i().YG.MaxEvaluationTimeExceeded;break;case l().FY.MissingSchemaPropertyOnCollection:o={...i().YG.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case l().FY.ContextVariableWrongType:o={...i().YG.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case l().FY.DisallowedValueType:{const n=t.allowedValueTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().o8.DisallowedReturnType,values:{allowedValueType:e.formatList(n,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,a().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,r().t1)(t)}return(0,s().w7)(t)?{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:o}function m(e){const t=null==e?void 0:e.values;return[n().CE(e,"values"),t]}function f(e){return e.type===l().FY.DepthExceeded||e.type===l().FY.CycleDetected||e.type===l().FY.MaxEvaluationTimeExceeded||e.type===l().FY.LibraryFunctionExecutionError}},176796:(e,t,o)=>{o.d(t,{x:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("arrowUpDown",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 16.8662C9.89518 16.8662 9.79492 16.848 9.69922 16.8115C9.60807 16.7751 9.52604 16.7181 9.45312 16.6406L5.90527 13.0244C5.75488 12.874 5.67969 12.6986 5.67969 12.498C5.67969 12.2839 5.74577 12.1107 5.87793 11.9785C6.01009 11.8464 6.18099 11.7803 6.39062 11.7803C6.49544 11.7803 6.58887 11.8008 6.6709 11.8418C6.75293 11.8828 6.82585 11.9352 6.88965 11.999L8.33203 13.4756L9.33008 14.6514L9.26855 13.1133V7.01562L9.33008 5.47754L8.33203 6.64648L6.88965 8.12988C6.82585 8.19368 6.75293 8.24609 6.6709 8.28711C6.58887 8.32357 6.49544 8.3418 6.39062 8.3418C6.18099 8.3418 6.01009 8.27799 5.87793 8.15039C5.74577 8.01823 5.67969 7.84277 5.67969 7.62402C5.67969 7.42806 5.75488 7.25488 5.90527 7.10449L9.45312 3.48828C9.52604 3.41081 9.60807 3.35384 9.69922 3.31738C9.79492 3.28092 9.89518 3.2627 10 3.2627C10.0957 3.2627 10.1891 3.28092 10.2803 3.31738C10.376 3.35384 10.4626 3.41081 10.54 3.48828L14.0879 7.10449C14.2383 7.25488 14.3135 7.42806 14.3135 7.62402C14.3135 7.84277 14.2451 8.01823 14.1084 8.15039C13.9762 8.27799 13.8076 8.3418 13.6025 8.3418C13.4977 8.3418 13.4043 8.32357 13.3223 8.28711C13.2402 8.24609 13.165 8.19368 13.0967 8.12988L11.6611 6.64648L10.6562 5.47754L10.7246 7.01562V13.1133L10.6562 14.6514L11.6611 13.4756L13.0967 11.999C13.165 11.9352 13.2402 11.8828 13.3223 11.8418C13.4043 11.8008 13.4977 11.7803 13.6025 11.7803C13.8076 11.7803 13.9762 11.8464 14.1084 11.9785C14.2451 12.1107 14.3135 12.2839 14.3135 12.498C14.3135 12.6986 14.2383 12.874 14.0879 13.0244L10.54 16.6406C10.4626 16.7181 10.376 16.7751 10.2803 16.8115C10.1891 16.848 10.0957 16.8662 10 16.8662Z"})})},451122:(e,t,o)=>{o.d(t,{B:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("branch",{viewBox:"0 0 64 64",svg:(0,n.jsx)("path",{d:"m56.76,23l-5.96-5.96v8.46c0,5.53-1.97,9.48-6.4,12.8l-5.6,4.2c-2.92,2.19-4,4.35-4,8v5.5h-6v-5.5c0-3.65-1.08-5.81-4-8l-5.6-4.2c-4.43-3.32-6.4-7.27-6.4-12.8v-8.06l-5.56,5.56-4.24-4.24,13-13,13,13-4.24,4.24-5.96-5.96v8.46c0,3.65,1.08,5.81,4,8l5.6,4.2c1.36,1.02,2.49,2.1,3.4,3.27.91-1.17,2.04-2.25,3.4-3.27l5.6-4.2c2.92-2.19,4-4.35,4-8v-8.06l-5.56,5.56-4.24-4.24,13-13,13,13-4.24,4.24Z"})})},916539:(e,t,o)=>{o.d(t,{R:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},891142:(e,t,o)=>{o.d(t,{S:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("historyBack",{viewBox:"0 0 14 14",svg:(0,n.jsx)("polygon",{points:"2.85893 7.74676 8.05608 12.9439 7 14 0.528042 7.52804 0 7 0.528042 6.47196 7 0 8.05608 1.05608 2.85893 6.25324 14 6.25324 14 7.74676"})})},960482:(e,t,o)=>{o.d(t,{v:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("parentItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29662 5.47368L7.33167 4.11653L6.30839 5.24265L4.22625 7.32458C4.16064 7.39019 4.0821 7.43856 3.99288 7.47024C3.90958 7.5013 3.82192 7.51646 3.73089 7.51646C3.54036 7.51646 3.37427 7.45062 3.24187 7.31823L3.23992 7.31628C3.11249 7.18353 3.04999 7.01804 3.04999 6.82921C3.04999 6.63758 3.12598 6.46746 3.2656 6.32285L3.26711 6.32129L7.4749 2.10083C7.62016 1.9509 7.79567 1.87 7.99651 1.87C8.19734 1.87 8.37284 1.95089 8.51809 2.10079L12.7355 6.32457C12.8705 6.46954 12.943 6.63917 12.943 6.82921C12.943 7.01927 12.8775 7.18502 12.7458 7.31725C12.617 7.45083 12.4522 7.51646 12.2621 7.51646C12.1706 7.51646 12.0814 7.50115 11.995 7.47068L11.9926 7.4698C11.9069 7.43769 11.8313 7.38908 11.7668 7.32458L9.6802 5.238L8.65635 4.11153L8.69652 5.47736L8.69011 9.81896C8.69011 10.5736 8.80303 11.157 9.01808 11.5793C9.2312 11.9935 9.55909 12.2887 10.0079 12.4675L10.0088 12.4678C10.4652 12.6536 11.062 12.7499 11.8051 12.7499C11.952 12.7499 12.0793 12.7478 12.1871 12.7436C12.303 12.7393 12.417 12.7372 12.5287 12.7372C12.7186 12.7372 12.8855 12.7955 13.0191 12.9179C13.1612 13.0441 13.2287 13.2138 13.2287 13.4117C13.2287 13.5394 13.2018 13.6569 13.1388 13.7556C13.0846 13.8467 13.0093 13.919 12.9157 13.9718C12.8317 14.0256 12.7415 14.0631 12.6459 14.0833C12.5373 14.1068 12.4035 14.12 12.2469 14.1243C12.0973 14.1286 11.931 14.1307 11.748 14.1307C10.2678 14.1307 9.14333 13.8104 8.40142 13.144C7.6536 12.4723 7.29657 11.3702 7.29657 9.87609L7.29662 5.47368Z"})})},151126:(e,t,o)=>{o.d(t,{h:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("replace",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})},531328:(e,t,o)=>{o.d(t,{S:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("subItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.88642 2.43778C1.98215 2.3846 2.09567 2.35999 2.22362 2.35999C2.41846 2.35999 2.58374 2.42299 2.71309 2.55179C2.84789 2.67678 2.91386 2.84079 2.91386 3.03655C2.91386 3.161 2.90926 3.28545 2.90008 3.40989C2.8956 3.52687 2.89335 3.66669 2.89335 3.82952C2.89335 4.6672 2.99989 5.34012 3.20906 5.85192C3.42107 6.35987 3.76386 6.73052 4.23921 6.9683C4.72178 7.20285 5.37665 7.32288 6.20897 7.32288H10.9303L12.4002 7.41264L10.2433 5.44074L8.72396 3.8939C8.66786 3.83269 8.6225 3.76177 8.58753 3.68184L8.58532 3.67681C8.55515 3.59133 8.54022 3.50307 8.54022 3.41252C8.54022 3.22504 8.60443 3.06601 8.73414 2.94147C8.86699 2.81372 9.02934 2.74963 9.21678 2.74963C9.40179 2.74963 9.5677 2.81976 9.71223 2.95431L9.71419 2.95614L14.2523 7.49436C14.4062 7.63869 14.4871 7.81019 14.4871 8.00627C14.4871 8.20241 14.4062 8.37593 14.2528 8.52459L9.72696 13.0436C9.57465 13.191 9.40407 13.2698 9.21678 13.2698C9.03026 13.2698 8.86827 13.2086 8.73525 13.0858L8.73305 13.0838C8.60434 12.9551 8.54022 12.7943 8.54022 12.6069C8.54022 12.5163 8.55535 12.4281 8.58551 12.3426C8.61631 12.2554 8.66304 12.1796 8.72601 12.1166L10.2463 10.5689L12.3938 8.61275L10.9258 8.69663L6.14745 8.69651C4.516 8.69651 3.32454 8.32105 2.59311 7.55211C1.86303 6.77991 1.50604 5.55355 1.50604 3.89104C1.50604 3.68942 1.51062 3.50571 1.51983 3.34C1.52904 3.17413 1.54527 3.03558 1.56915 2.92552C1.58898 2.82668 1.62376 2.73465 1.67362 2.64989C1.72566 2.56142 1.79795 2.48982 1.88642 2.43778Z"})})},116223:(e,t,o)=>{o.d(t,{X:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},501274:(e,t,o)=>{o.d(t,{mb:()=>l,nK:()=>s,pe:()=>c});var n=()=>o(803021),r=()=>o(646574),a=()=>o(874459),i=()=>o(998411);function l(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,i=a().OQ.toPersistedDate(t.valueOf());return r().ZV({value:i,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function s(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:l}=e,s=a().OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return r().ZV({value:s,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:l})}function c(e){const{luxonRange:t,intl:o}=e,l=a().OQ.toPersistedDateRange(t),s=r().ZV({value:l,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,i().r)()),d=r().mr({start_time:c.toFormat(n().jK),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:s,formattedEndTime:d})}}}]);