"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[80317],{522411:(e,n,t)=>{t.d(n,{Z:()=>w,a:()=>f});var o=()=>t(730120),a=t(667294),i=()=>t(142735),s=()=>t(629719),r=()=>t(851549),l=()=>t(788860),c=()=>t(917801),u=()=>t(454393),d=()=>t(489434),p=()=>t(500174),m=()=>t(876822),v=()=>t(9599),b=()=>t(663773),y=()=>t(297959),_=t(785893);function f(e){const{legacyColor:n}=e,t=(0,_.jsx)(l()._H,{id:"app.banner.trial_subscription.add_payment_method",defaultMessage:"Add a payment method to continue using your free trial. You will not be charged until the end of your trial period."}),o=(0,_.jsx)(l()._H,{id:"app.banner.trial_subscription.add_payment_method.call_to_action",defaultMessage:"Add payment method"});return(0,_.jsx)(d().j,{label:t,display:"full-width",actions:[{label:o,onClick:()=>{u().r$({currentTab:"billing"})}}],tint:(0,p().X)(n)})}function w(){const e=(0,i().VK)((()=>{var e;return null===(e=m().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),n=(0,b().Cv)({spaceId:e}),t=(0,y().W)();let l;const u="admin"===(null==n?void 0:n.type)&&(0,s().Dw)(n);l=!(!u||!t)&&(!(0,s().Rd)(n.subscription)&&(!n.paymentMethod&&(!(0,r().jQ)(t.offer.campaign)&&o().ou.now()>(null==u?void 0:u.minus({days:15}))))),a.useEffect((()=>(l?c().Bw({bannerStore:v().Z,id:"SubscriptionTrialAddPaymentMethodBanner",contentKey:"subscription_trial_add_payment_method",styleKey:p().v.Yellow,prepend:!0}):c().qL({bannerStore:v().Z,id:"SubscriptionTrialAddPaymentMethodBanner"}),()=>{c().qL({bannerStore:v().Z,id:"SubscriptionTrialAddPaymentMethodBanner"})})),[l])}},193173:(e,n,t)=>{t.d(n,{J:()=>B,Z:()=>K});var o=t(667294),a=()=>t(219727),i=()=>t(142735),s=()=>t(947115),r=()=>t(788860),l=()=>t(696459),c=()=>t(917801),u=()=>t(454393),d=()=>t(489434),p=()=>t(594546),m=()=>t(500174),v=()=>t(345918),b=()=>t(151165),y=()=>t(9599),_=()=>t(548812),f=()=>t(93543),w=t(785893);const g={updatePaymentMethod:(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.update_payment_method",defaultMessage:"View unpaid invoice"}),viewBillingTab:(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.view_billing_tab",defaultMessage:"Go to Billing"}),viewWorkspaceOwner:(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.view_workspace_owner",defaultMessage:"View workspace owner"}),confirmPayment:(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.confirm_payment",defaultMessage:"Confirm payment"})};function h(){return()=>{u().r$()}}function T(){return()=>{u().r$({currentTab:"billing"})}}function x(e){const{messageType:n,overdueInvoiceCount:t=1}=e;switch(n){case"past_due_owner":return(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.payment_failed.past_due.workspace_owner",defaultMessage:"We couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}. Please update your payment method or you may lose access to Notion soon.",values:{overdueInvoiceCount:t}});case"past_due_member":return(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.payment_failed.past_due.member",defaultMessage:"Please contact a workspace owner to update your payment method or you may lose access to Notion soon."});case"unpaid_owner":return(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.payment_failed.unpaid.workspace_owner",defaultMessage:"Access to Notion is limited to viewing because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}. Update your payment information to restore full access.",values:{overdueInvoiceCount:t}});case"unpaid_member":return(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.payment_failed.unpaid.member",defaultMessage:"Access to Notion is limited to viewing. Contact a workspace owner to update your workspace’s payment method."});default:(0,l().t1)(n)}}function k(e){const{messageType:n,overdueInvoiceCount:t=1}=e;switch(n){case"past_due_owner":return(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.confirmation_required.past_due.workspace_owner",defaultMessage:"Please confirm {overdueInvoiceCount, plural, one {your subscription payment} other {{overdueInvoiceCount} payments}} or you may lose access to Notion soon.",values:{overdueInvoiceCount:t}});case"unpaid_owner":return(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.confirmation_required.unpaid.workspace_owner",defaultMessage:"Access to Notion is limited to viewing. Confirm {overdueInvoiceCount, plural, one {your subscription payment} other {{overdueInvoiceCount} payments}} to restore full access.",values:{overdueInvoiceCount:t}});case"unpaid_member":return(0,w.jsx)(r()._H,{id:"subscription.payment_status_banner.confirmation_required.unpaid.member",defaultMessage:"Access to Notion is limited to viewing. Contact a workspace owner to update your workspace’s payment method."});default:(0,l().t1)(n)}}function S(e){const{billingStatusData:n,showNativeInvoicePayment:t,uncollectibleExperienceEnabled:o}=e;if(null==n||!n.data)return;const{isWorkspaceOwner:a}=n,{invoiceHostedUrl:i,overdueInvoiceCount:s,bannerKey:r}=n.data;switch(r){case"past_due":return function(e){const{isWorkspaceOwner:n,invoiceHostedUrl:t,overdueInvoiceCount:o,showNativeInvoicePayment:a}=e,i=m().v.Yellow;return n?{bannerStyleKey:i,messageType:"past_due_owner",messageText:x({overdueInvoiceCount:o,messageType:"past_due_owner"}),callToActionText:a?g.viewBillingTab:g.updatePaymentMethod,callToActionHandler:a?T():(0,f().o)(t)}:{bannerStyleKey:i,messageType:"past_due_member",messageText:x({overdueInvoiceCount:o,messageType:"past_due_member"}),callToActionText:g.viewWorkspaceOwner,callToActionHandler:h()}}({isWorkspaceOwner:a,invoiceHostedUrl:i,overdueInvoiceCount:s,showNativeInvoicePayment:t});case"unpaid":if(o)return;return function(e){const{isWorkspaceOwner:n,invoiceHostedUrl:t,overdueInvoiceCount:o,showNativeInvoicePayment:a}=e,i=m().v.LightRed;return n?{bannerStyleKey:i,messageType:"unpaid_owner",messageText:x({overdueInvoiceCount:o,messageType:"unpaid_owner"}),callToActionText:a?g.viewBillingTab:g.updatePaymentMethod,callToActionHandler:a?T():(0,f().o)(t)}:{bannerStyleKey:i,messageType:"unpaid_member",messageText:x({overdueInvoiceCount:o,messageType:"unpaid_member"}),callToActionText:g.viewWorkspaceOwner,callToActionHandler:h()}}({isWorkspaceOwner:a,invoiceHostedUrl:i,overdueInvoiceCount:s,showNativeInvoicePayment:t});default:(0,l().t1)(r)}}function I(e){if(!e.data)return;const{isWorkspaceOwner:n}=e,{invoiceHostedUrl:t,bannerKey:o}=e.data;switch(o){case"past_due":return function(e,n,t){if(e)return{bannerStyleKey:m().v.Yellow,messageType:"past_due_owner",messageText:k({overdueInvoiceCount:t,messageType:"past_due_owner"}),callToActionText:g.confirmPayment,callToActionHandler:(0,f().o)(n)}}(n,t);case"unpaid":return function(e,n,t){const o=m().v.LightRed;return e?{bannerStyleKey:o,messageType:"unpaid_owner",messageText:k({overdueInvoiceCount:t,messageType:"unpaid_owner"}),callToActionText:g.confirmPayment,callToActionHandler:(0,f().o)(n)}:{bannerStyleKey:o,messageType:"unpaid_member",messageText:k({overdueInvoiceCount:t,messageType:"unpaid_member"}),callToActionText:g.viewWorkspaceOwner,callToActionHandler:h()}}(n,t);default:(0,l().t1)(o)}}function C(e){const{billingStatusData:n}=e;if(void 0===(null==n?void 0:n.data))return;const{overdueReason:t}=n.data;if(t)switch(t){case"payment_failed":return S(e);case"confirmation_required":return I(n);default:(0,l().t1)(t)}}function j(e){const n=b().Z.state,t=(0,v().Fn)(e);return n&&n.data?{...n,isWorkspaceOwner:t}:void 0}function K(){const e=(0,i().VK)((()=>(0,_().EQ)()),[]),n=(0,a().O7)(),t=(0,i().VK)((()=>j(n)),[n]),r=(0,i().VK)((()=>(0,_().Un)(n)),[n]),l=(0,o.useMemo)((()=>C({billingStatusData:t,showNativeInvoicePayment:e,uncollectibleExperienceEnabled:r})),[t,e,r]);o.useEffect((()=>(["local","development","staging"].includes("production")&&(0,s().exposeDebugValue)("billingStatus",t),null!=t&&t.data&&l?(c().Bw({bannerStore:y().Z,id:"BillingSubscriptionBanner",contentKey:"billing_subscription_status",styleKey:l.bannerStyleKey,prepend:!0}),(0,p().j)({environment:n,event:{eventName:"billing_subscription_banner_displayed",eventProperties:{isWorkspaceOwner:t.isWorkspaceOwner,...t.data}}})):c().qL({bannerStore:y().Z,id:"BillingSubscriptionBanner"}),()=>{c().qL({bannerStore:y().Z,id:"BillingSubscriptionBanner"})})),[n,t,l])}function B(e){const{legacyColor:n}=e,t=(0,i().VK)((()=>(0,_().EQ)()),[]),s=(0,a().O7)(),r=(0,i().VK)((()=>j(s)),[s]),l=(0,i().VK)((()=>(0,_().Un)(s)),[s]),c=(0,o.useMemo)((()=>C({billingStatusData:r,showNativeInvoicePayment:t,uncollectibleExperienceEnabled:l})),[r,t,l]),u=null==c?void 0:c.callToActionText,v=null==c?void 0:c.callToActionHandler,b=(0,o.useCallback)((e=>{void 0!==v&&v(e),null!=r&&r.data&&(0,p().j)({environment:s,event:{eventName:"billing_subscription_banner_action",eventProperties:{isWorkspaceOwner:r.isWorkspaceOwner,...r.data}}})}),[s,v,r]);return c?(0,w.jsx)(d().j,{label:c.messageText,display:"full-width",actions:[{label:u,onClick:e=>b(e)}],tint:(0,m().X)(n)}):null}},479092:(e,n,t)=>{t.d(n,{T:()=>w,Z:()=>g});var o=t(667294),a=()=>t(219727),i=()=>t(142735),s=()=>t(788860),r=()=>t(696459),l=()=>t(979614),c=()=>t(917801),u=()=>t(489434),d=()=>t(500174),p=()=>t(228772),m=()=>t(591914),v=()=>t(876822),b=()=>t(106815),y=()=>t(9599),_=()=>t(826955),f=t(785893);function w(e){const{legacyColor:n}=e,t=(0,a().O7)(),o=(0,i().VK)((()=>t.currentUser.id),[t]),l=(0,p().r)(),c=(0,m().r_)(l),v=(0,i().VK)((()=>{var e;if(!l||!o||!c)return null;const n=null===(e=b().Z.getData(t,{spaceId:l.id}))||void 0===e?void 0:e.bannerIds;if(n&&n.length>0){const e=n[0],t=_().$I.createChildStore(l,{id:e,table:"subscription_banner",spaceId:l.id});if(!t.isDefined())return null;const o=t.getBannerText();if(o)return(0,f.jsx)("span",{children:o});const a=Boolean(null==c?void 0:c.isWorkspaceOwner());return function(e,n){switch(e){case"uncollectible_past_due":return n?(0,f.jsx)(s()._H,{id:"subscription.payment_uncollectible.past_due.workspace_owner",defaultMessage:"Your workspace may lose editing capabilities soon due to past-due invoices. Please remit payment to avoid losing access to Notion. If you have any questions, please reach out to billing@makenotion.com."}):(0,f.jsx)(s()._H,{id:"subscription.payment_uncollectible.past_due.member",defaultMessage:"Your workspace may lose editing capabilities soon due to past-due invoices. Please remit payment to avoid losing access to Notion. If you have any questions, please reach out to billing@makenotion.com."});case"uncollectible_unpaid":return n?(0,f.jsx)(s()._H,{id:"subscription.payment_uncollectible.unpaid.workspace_owner",defaultMessage:"Your workspace is unable to edit due to past-due invoices. Please remit payment to avoid losing access to Notion. If you have any questions, please reach out to billing@makenotion.com."}):(0,f.jsx)(s()._H,{id:"subscription.payment_uncollectible.unpaid.member",defaultMessage:"Your workspace is unable to edit due to past-due invoices. Please remit payment to avoid losing access to Notion. If you have any questions, please reach out to billing@makenotion.com."});default:(0,r().t1)(e)}}(t.getBannerKey(),a)}return null}),[t,o,l,c]);return v?(0,f.jsx)(u().j,{label:v,display:"full-width",actions:[],tint:(0,d().X)(n)}):null}function g(){const e=(0,a().O7)(),n=(0,i().VK)((()=>v().default.state.currentSpaceStore),[]),[t,s,u,p,m]=(0,i().VK)((()=>{var t;if(!n)return[];const o=null===(t=b().Z.getData(e,{spaceId:n.id}))||void 0===t?void 0:t.bannerIds;if(o&&o.length>0){const e=o[0],t=_().$I.createChildStore(n,{id:e,table:"subscription_banner",spaceId:n.id});if(!t.isDefined())return[];const a=t.getBannerKey(),i=t.getAudience(),s=t.getBannerText();switch(a){case"uncollectible_past_due":return[e,d().v.Yellow,a,i,s];case"uncollectible_unpaid":return[e,d().v.LightRed,a,i,s];default:(0,r().t1)(a)}}return[]}),[e,n]);o.useEffect((()=>{if(t&&s){if(c().Bw({bannerStore:y().Z,id:"SubscriptionUncollectibleBanner",contentKey:"subscription_uncollectible",styleKey:s,prepend:!0}),u&&p){const n={banner:u,audience:p,text:""};m&&(n.text=m),l().j(e,{name:"subscription_uncollectible_banner_displayed",args:n})}}else c().qL({bannerStore:y().Z,id:"SubscriptionUncollectibleBanner"});return()=>{c().qL({bannerStore:y().Z,id:"SubscriptionUncollectibleBanner"})}}),[e,t,s,u,p,m])}},878911:(e,n,t)=>{t.d(n,{U:()=>h,Z:()=>T});var o=()=>t(730120),a=t(667294),i=()=>t(219727),s=()=>t(142735),r=()=>t(846550),l=()=>t(714230),c=()=>t(629719),u=()=>t(696459),d=()=>t(824462),p=()=>t(917801),m=()=>t(489434),v=()=>t(500174),b=()=>t(876822),y=()=>t(518019),_=()=>t(9599),f=()=>t(515323),w=()=>t(595976),g=t(785893);function h(e){const{legacyColor:n}=e,t=(0,s().VK)((()=>{var e;return null===(e=b().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),p=(0,w().p)({spaceId:t}),_=(0,c().Tz)(null==p?void 0:p.subscription),h=(0,c().PB)(p),T=null==p?void 0:p.clock.externalId,[k,S]=(0,a.useState)(1),[I,C]=(0,a.useState)("second"),[j,K]=(0,a.useState)(!1),B=(0,i().O7)(),H=(0,r().yK)((e=>({message:{flexGrow:1,textWrap:"wrap"}})),[]);if(!t||!T||!_)return null;const A=async()=>{const e=o().nL.fromObject({[I]:k}),n=function(e){switch(e){case"month":return o().nL.fromObject({months:2});case"year":return o().nL.fromObject({years:2});default:(0,u().t1)(e)}}(_);if(e>n)return void x(`Cannot advance test clock by more than two billing intervals. The current billing interval is ${_}.`);K(!0);"success"===(await d().callApi({eventName:"stripeAdvanceTestClock",environment:B,data:{spaceId:t,epochSeconds:h.plus(e).toSeconds()}})).type?await Promise.all([f().U.resetData(B,{spaceId:t}),y().Z.resetData(B,{spaceId:t})]):x("Failed to advance test clock. Check server logs for details."),K(!1)},P=(0,g.jsxs)("div",{style:H.message,children:["The clock time is currently frozen at ",h.toLocaleString(o().ou.DATETIME_FULL)]}),M=[{label:(0,g.jsx)("input",{disabled:j,type:"number",value:k,style:{width:75,textAlign:"right"},onChange:e=>S(parseInt(e.target.value))}),onClick:()=>{}},{label:(0,g.jsxs)("select",{disabled:j,value:I,onChange:e=>{C(e.target.value)},children:[(0,g.jsx)("option",{value:"seconds",children:"seconds"}),(0,g.jsx)("option",{value:"minutes",children:"minutes"}),(0,g.jsx)("option",{value:"hours",children:"hours"}),(0,g.jsx)("option",{value:"days",children:"days"}),(0,g.jsx)("option",{value:"months",children:"months"}),(0,g.jsx)("option",{value:"years",disabled:"year"!==_,children:"years"})]}),onClick:()=>{}},{label:"Advance clock",onClick:()=>A()},{label:j?(0,g.jsx)("img",{src:l().Z.images.clubPenguinDanceGif,alt:"loading...",style:{width:48}}):(0,g.jsx)("div",{style:{width:48}}),onClick:()=>{}}];return(0,g.jsx)(m().j,{label:P,display:"full-width",actions:M,tint:(0,v().X)(n)})}function T(){var e;const n=(0,s().VK)((()=>{var e;return null===(e=b().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,w().p)({spaceId:n}),o=(0,c().YK)(t)&&(null==t||null===(e=t.clock)||void 0===e?void 0:e.externalId);a.useEffect((()=>(o?p().Bw({bannerStore:_().Z,id:"TestClockBanner",contentKey:"test_clock",styleKey:v().v.Yellow,prepend:!0}):p().qL({bannerStore:_().Z,id:"TestClockBanner"}),()=>{p().qL({bannerStore:_().Z,id:"TestClockBanner"})})),[o])}function x(e){}},459815:(e,n,t)=>{t.d(n,{I:()=>_,n:()=>f});var o=t(667294),a=()=>t(219727),i=()=>t(142735),s=()=>t(801812),r=()=>t(788860),l=()=>t(917801),c=()=>t(497065),u=()=>t(489434),d=()=>t(765513),p=()=>t(594546),m=()=>t(500174),v=()=>t(876822),b=()=>t(9599),y=t(785893);function _(){const e=(0,a().O7)();return(0,y.jsx)(u().j,{label:(0,y.jsx)(r()._H,{id:"subscription.russianSanctionsBanner.banner_text",defaultMessage:"Due to <sanctionLink>U.S. sanctions</sanctionLink>, users in Russia will not be able to access Notion from Sept 9, 2024. We sincerely apologize for this disruption in service.",values:{sanctionLink:n=>(0,y.jsx)(d().Z,{onClick:()=>c().c4({environment:e,url:"https://ofac.treasury.gov/media/932951/download?inline",openInNew:"tab"}),children:n})}}),display:"full-width",actions:[{label:(0,y.jsx)(r()._H,{id:"subscription.russianSanctionsBanner.learn_more",defaultMessage:"Learn more"}),onClick:()=>c().c4({environment:e,url:"https://www.notion.so/help/restrictions-for-customers-based-in-russia",openInNew:"tab"})}],tint:"yellow"})}function f(){const e=(0,a().O7)(),n=function(){const e=(0,a().O7)(),n=(0,i().VK)((()=>{var e;return null===(e=v().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),[{value:o}]=(0,s().r5)((async()=>{if(!n)return;const o=await Promise.resolve().then(t.bind(t,824462)),a=await o.callApi({eventName:"getWillBeSubjectToSanctions",environment:e,data:{spaceId:n}});return"success"===a.type?a.data.value:void 0}),[e,n]);return o??!1}();o.useEffect((()=>(n?(l().Bw({bannerStore:b().Z,id:"RussianSanctionsBanner",contentKey:"russian_sanctions",prepend:!0,styleKey:m().v.Yellow}),(0,p().j)({environment:e,event:{eventName:"russia_sanctions_banner_displayed",eventProperties:{}}})):l().qL({bannerStore:b().Z,id:"RussianSanctionsBanner"}),()=>{l().qL({bannerStore:b().Z,id:"RussianSanctionsBanner"})})),[e,n])}},851549:(e,n,t)=>{t.d(n,{jQ:()=>i});var o=()=>t(979881);const a=["trial_from_perf_marketing","onboarding_reverse_trial","mp_reverse_trial","admin_trial"];function i(e){return a.includes(e)||o().W_.includes(e)}}}]);