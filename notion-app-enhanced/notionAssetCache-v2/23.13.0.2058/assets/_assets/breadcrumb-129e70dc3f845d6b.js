"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[65548],{530916:(e,t,i)=>{i.d(t,{default:()=>re});var r=i(667294),n=()=>i(219727),s=()=>i(142735),o=()=>i(846550),a=()=>i(707513),l=()=>i(772529),c=()=>i(876822),d=(i(267602),i(653476),i(241792),()=>i(788860)),u=()=>i(231077),h=()=>i(239482),x=()=>i(549813),m=()=>i(91502),g=()=>i(826955),p=()=>i(154186),f=()=>i(265640),v=()=>i(448419),b=()=>i(198829),j=()=>i(255577),M=()=>i(470386),y=()=>i(352230),k=()=>i(493686),W=i(785893);const S=function(e,t){return[{key:"results",render:e=>(0,W.jsx)(i(388284).Z,{...e}),items:t.map(((t,r)=>({key:t.id,render:e=>(0,W.jsx)(i(231219).Z,{...e,isSubpage:0!==r,store:t,hidePath:!0}),action:r=>{let{event:n}=r;const s=i(250625).DJ(n);t instanceof g().G&&i(47443)._c({environment:e,store:t,openInNew:s,visitType:i(614027).vu.Link,pageVisitSource:i(506347).tY.Breadcrumb})}})))}]};const P=function(e){const{isMobile:t,stores:i}=e,r=(0,n().O7)(),s={display:"flex",alignItems:"center",flexShrink:0};return(0,W.jsx)(v().ZP,{popupType:t?v().Z4.SlideUp:v().Z4.Popup,renderOrigin:e=>t?(0,W.jsxs)(p().Z,{style:{...s},mobileFeedback:!0,...e,children:[(0,W.jsx)(k().f,{}),(0,W.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,W.jsx)(k().f,{})]}):(0,W.jsxs)("div",{style:s,children:[(0,W.jsx)(f().D,{size:"sm",...e,children:"..."}),(0,W.jsx)(k().f,{})]}),render:e=>{let n;return n=t?{menuType:y().o.Modal,title:(0,W.jsx)(d()._H,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,W.jsx)(M().DoneMenuText,{}),onClickRight:e.close}:{menuType:y().o.Popup,width:240},(0,W.jsx)(b().Z,{...n,children:(0,W.jsx)(j().ZP,{type:j().iW.Vertical,onAccept:e.close,initialFocus:void 0,sections:S(r,i)})})}})};var w=()=>i(922227),C=()=>i(453059);function V(e){const{ancestorMaxWidth:t,showDivider:i,store:r}=e;return r instanceof g().zX?(0,W.jsx)(C().Z,{store:r,showDivider:i,maxWidth:t}):(0,W.jsx)(w().Z,{store:r,showDivider:i,maxWidth:t})}function D(e){const{ancestorMaxWidth:t,isMobile:i,homeStore:o,store:a,maxAncestorCount:c}=e,p=(0,n().O7)(),f=(0,d().YB)(),[v,b]=(0,s().VK)((()=>{const e=h().uJ(a),t=a.isNavigableBlock()?e.slice(1):[...e];return t.reverse(),e.reverse(),[t,e]}),[a],{useDeepEqual:!0}),j=(0,s().VK)((()=>v.map((e=>(0,x().V)(e,f,p,!0)||(0,x().NO)(e,f)||""))),[p,f,v]);(0,r.useEffect)((()=>(u().setTabBreadcrumbs(j),()=>{u().setTabBreadcrumbs(void 0)})),[j]);const M=(0,s().VK)((()=>(0,l().Kj)(a.id)),[a]),y=(0,s().VK)((()=>(0,m().az)()>0),[]);if(M&&void 0!==o)return(0,W.jsx)(V,{ancestorMaxWidth:t,showDivider:v.length>0,store:o},o.id);if(v.length>c){const[e,r,n]=[v[0],v.slice(1,v.length-c+1),v.slice(v.length-c+1)];if(y)return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(V,{ancestorMaxWidth:t,showDivider:!i,store:e},e.id),(0,W.jsx)(P,{isMobile:i,stores:i?b:r},"pages-popup"),n.map((e=>e instanceof g().zX?(0,W.jsx)(C().Z,{store:e,showDivider:!0,maxWidth:t},e.id):(0,W.jsx)(w().Z,{store:e,showDivider:!0,maxWidth:t},e.id)))]});{const e=v.filter((e=>e instanceof g().G)),r=v.filter((e=>e instanceof g().G));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(w().Z,{store:e[0],showDivider:!i,maxWidth:t},e[0].id),(0,W.jsx)(P,{isMobile:i,stores:i?r:e.slice(1,e.length-c+1)},"pages-popup"),e.slice(e.length-c+1).map((e=>(0,W.jsx)(w().Z,{store:e,showDivider:!0,maxWidth:t},e.id)))]})}}return(0,W.jsx)(W.Fragment,{children:v.map((e=>(0,W.jsx)(V,{ancestorMaxWidth:t,showDivider:!0,store:e},`${e.table}-${e.id}`)))})}var R=()=>i(491927),Z=()=>i(547586),K=()=>i(594546),_=()=>i(191586),B=()=>i(148126),I=()=>i(832924),T=()=>i(275200),O=()=>i(466970),N=()=>i(482162);const L=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:r,showDivider:n,store:s}=e,a=(0,o().yK)((()=>({homeBreadCrumbWrapper:{marginLeft:-4},wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:6,minWidth:0,maxWidth:r?void 0:"100%"}})),[r]);return(0,W.jsxs)("div",{style:a.wrapper,children:[(0,W.jsx)(i(543227).Z,{store:s,maxWidth:t,ignoreMaxLength:r}),n&&(0,W.jsx)(k().f,{})]})};function E(e,t,i,r){return(0,s().VK)((()=>{const n=r.canEdit(),s=r.isNonEditableState(),o=r.getCollectionStore(),a=null==o?void 0:o.isSyncedCollection(),c=r.isExternalObjectInstancePageBlockStore(),d=(0,_().Wt)(r);return(0,l().Kj)(r.id)||t||(0,B().Sr)(e)||N().default.isCenterPeekOpen()||!i||!n||s||c||a||d}),[e,t,i,r])}function z(e,t,i,n){const s=E(e,t,i,n);return(0,r.useCallback)((()=>{if(s)return;const t=N().default.isCenterPeekOpen()?I().default.PeekViewScroller:I().default.PageScroller;if(t){const i=t.getNode();if(i&&!T().$e(i))return T().X5({element:i,environment:e,options:{top:0,behavior:"smooth"}}),void R().Op(e)}const r=i.current;if(!r)return;if(!(r instanceof Element))return;const o=r.getBoundingClientRect();Z().$({blockStore:n,originRect:o}),R().V(e)}),[s,e,i,n])}function F(e,t){const{currentPageMaxWidth:r,isMobile:o,currentPageRef:a,store:l}=e,c=(0,n().O7)(),d=E(c,o,a,l),u=(0,s().VK)((()=>l.isEmptyPage()),[l]),h=(0,s().VK)((()=>l.getIcon()),[l]),x=o?24:20,m=z(c,o,a,l);return(0,W.jsxs)(f().D,{shouldShrink:!0,onClick:m,size:"sm",ref:t,disabled:d,children:[Boolean(h)&&(0,W.jsx)(i(943620).Z,{disabled:!0,icon:h,isEmptyPage:u,size:x,style:{marginRight:6},largeIcon:!0}),(0,W.jsx)(i(384241).Z,{store:l,style:{maxWidth:r},enableHover:!0})]})}const H=(0,r.forwardRef)(F);function U(e){const{ancestorMaxWidth:t,isMobile:i,currentPageRef:r,store:o}=e,a=(0,n().O7)(),{mobileNative:c}=a,d=(0,s().VK)((()=>(0,l().WE)(o)),[o]),u=z(a,i,r,o),x=(0,s().VK)((()=>{const e=h().uJ(o);return 0===(o.isNavigableBlock()?e.slice(1):[...e]).length}),[o]);return d?null:i?(0,W.jsx)(f().D,{shouldShrink:!0,onClick:u,size:"sm",style:null!=c&&c.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,W.jsx)(L,{store:o,showDivider:!1,ignoreMaxLength:x,ancestorMaxWidth:t})}):(0,W.jsx)(f().D,{shouldShrink:!0,onClick:u,size:"sm",style:{fontSize:"inherit"},children:(0,W.jsx)(L,{store:o,showDivider:!1,ancestorMaxWidth:t})})}function A(e){const{ancestorMaxWidth:t,store:i}=e,o=(0,n().O7)(),a={display:"flex",alignItems:"center",flexShrink:0},l=(0,s().VK)((()=>{const e=h().uJ(i);return e.reverse(),e}),[i]),c=(0,r.useCallback)((()=>{(0,K().j)({environment:o,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:l.length>1}}})}),[o,l]),u=(0,O().E)("mobile_use_bottom_sheet_popup_container");return(0,W.jsx)(v().ZP,{popupType:u?v().Z4.BottomSheet:v().Z4.SlideUp,bottomSheetInitialState:"half",onClick:c,renderOrigin:e=>(0,W.jsx)(p().Z,{style:{...a,maxWidth:"100%"},mobileFeedback:!0,...e,children:(0,W.jsx)(L,{store:i,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:t})}),render:e=>{const t={menuType:y().o.Modal,title:(0,W.jsx)(d()._H,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:u?void 0:(0,W.jsx)(M().DoneMenuText,{}),onClickRight:e.close};return(0,W.jsx)(b().Z,{...t,children:(0,W.jsx)(j().ZP,{type:j().iW.Vertical,onAccept:e.close,initialFocus:void 0,sections:S(o,l)})})}},"pages-popup")}i(916054),i(228244);var J=i(973935),X=()=>i(374289),$=()=>i(667067),G=()=>i(933868),q=()=>i(765056),Y=()=>i(525038),Q=()=>i(654133),ee=()=>i(998901),te=()=>i(815277);function ie(e){const{store:t}=e,i=(0,n().O7)(),a=(0,s().VK)((()=>t.getSpaceId()),[t]),l=(0,te().VX)({name:"move_to",spaceId:a,userId:i.currentUser.id}),u=(0,s().VK)((()=>{if(!(0,m().bq)())return!1;if(!l)return!1;const{currentSpaceViewStore:e}=c().default.state,r=null==e?void 0:e.getPrivatePages(i);return null==r?void 0:r.some((e=>e.id===t.id))}),[i,t,l]),h=(0,s().VK)((()=>{const e=i.currentUser.id;return t.getPermissionItems().every((t=>(0,G().jg)(t)&&e===t.user_id))}),[i,t]),x=(0,o().Fg)(),g=(0,r.useRef)(null),p=(0,r.useCallback)((()=>{if(!g)return;const e=J.findDOMNode(g.current);if(!(e&&e instanceof Element))return;const r=e.getBoundingClientRect(),n=new DOMRect(r.x,r.y,r.width,r.height+5);q().Fo(i),Y().bA({environment:i,blocks:[t],originRect:n,moveToContext:"topbar_breadcrumb"})}),[i,g,t]);return u&&h?(0,W.jsx)(Q().Z,{placement:ee().Placement.Right,renderTooltip:e=>(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{children:(0,W.jsx)(d()._H,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,W.jsx)("div",{style:{color:x.mediumInvertedTextColor},children:(0,W.jsx)(d()._H,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,W.jsxs)(f().D,{size:"sm",disabled:!1,onClick:p,ref:g,...e,children:[(0,$().Q)({width:16,fill:x.lightIconColor}),(0,W.jsx)("span",{style:{color:x.lightTextColor,marginLeft:4,marginRight:5},children:(0,W.jsx)(d()._H,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,X().i)({width:9,fill:x.lightIconColor})]})}):null}const re=function(e){const{ancestorMaxWidth:t,maxAncestorCount:d,currentPageMaxWidth:u,isMobile:h,showCurrentPageControls:x,store:m,style:g}=e,p=(0,r.useRef)(null),f=(0,n().O7)(),v=(0,o().yK)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:h?a().JB.UIRegular.mobile:a().JB.UIRegular.desktop,...g},enforceMaxLength:{maxWidth:"100%"}})),[h,g]),b=(0,s().VK)((()=>{var e;return!(null===(e=m.getTitleStore())||void 0===e||!e.isReady())}),[m]),j=(0,s().VK)((()=>{const{currentSpaceViewStore:e}=c().default.state;let t;return e&&e.isReady()&&(t=(0,l().Al)(e)),t}),[]),M=(0,s().VK)((()=>!(0,l().WE)(m)&&x&&m.isReady()),[x,m]),y=(0,s().VK)((()=>{var e;return null===(e=f.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[f]);return(0,s().VK)((()=>{var e;if(Boolean(f.currentUser.isLoggedIn()||f.publicDomainUserId))return!1;const t=i(772084).gR(m),r=f.RouterStore.state.route;return!(!(0,i(54193).FK)(r)||(null==t?void 0:t.id)!==m.id)||(null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs)}),[f,m])?null:b?y?(0,W.jsx)("div",{style:{...v.container,...v.enforceMaxLength},className:"notranslate",children:(0,W.jsx)(A,{store:m,ancestorMaxWidth:t})}):(0,W.jsxs)("div",{style:v.container,className:"notranslate shadow-cursor-breadcrumb",children:[(0,W.jsx)(D,{ancestorMaxWidth:t,maxAncestorCount:d,isMobile:h,homeStore:j,store:m}),M?(0,W.jsx)(H,{currentPageMaxWidth:u,isMobile:h,currentPageRef:p,ref:p,store:m}):(0,W.jsx)(U,{ancestorMaxWidth:t,isMobile:h,currentPageRef:p,store:m}),(0,W.jsx)(ie,{store:m})]}):null}}}]);